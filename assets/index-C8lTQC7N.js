(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();const LD="modulepreload",DD=function(e){return"/demo-map/"+e},xE={},xf=function(t,n,i){let a=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),a=Promise.all(n.map(u=>{if(u=DD(u),u in xE)return;xE[u]=!0;const l=u.endsWith(".css"),s=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${s}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":LD,l||(f.as="script",f.crossOrigin=""),f.href=u,document.head.appendChild(f),l)return new Promise((y,x)=>{f.addEventListener("load",y),f.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))),a.then(()=>t()).catch(u=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u})};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dA(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Zr={},Ay=[],gu=()=>{},RD=()=>!1,V1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),aM=e=>e.startsWith("onUpdate:"),Pi=Object.assign,oM=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},OD=Object.prototype.hasOwnProperty,ai=(e,t)=>OD.call(e,t),jn=Array.isArray,wy=e=>Yy(e)==="[object Map]",Um=e=>Yy(e)==="[object Set]",AE=e=>Yy(e)==="[object Date]",zD=e=>Yy(e)==="[object RegExp]",ir=e=>typeof e=="function",ji=e=>typeof e=="string",fc=e=>typeof e=="symbol",Ai=e=>e!==null&&typeof e=="object",lM=e=>(Ai(e)||ir(e))&&ir(e.then)&&ir(e.catch),$3=Object.prototype.toString,Yy=e=>$3.call(e),FD=e=>Yy(e).slice(8,-1),fA=e=>Yy(e)==="[object Object]",uM=e=>ji(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Cy=dA(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pA=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},BD=/-(\w)/g,Ha=pA(e=>e.replace(BD,(t,n)=>n?n.toUpperCase():"")),ND=/\B([A-Z])/g,hl=pA(e=>e.replace(ND,"-$1").toLowerCase()),j1=pA(e=>e.charAt(0).toUpperCase()+e.slice(1)),U0=pA(e=>e?`on${j1(e)}`:""),Do=(e,t)=>!Object.is(e,t),Iy=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},H3=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Ix=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Mx=e=>{const t=ji(e)?Number(e):NaN;return isNaN(t)?e:t};let wE;const mA=()=>wE||(wE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),VD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",jD=dA(VD);function qr(e){if(jn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],a=ji(i)?GD(i):qr(i);if(a)for(const u in a)t[u]=a[u]}return t}else if(ji(e)||Ai(e))return e}const UD=/;(?![^(]*\))/g,$D=/:([^]+)/,HD=/\/\*[^]*?\*\//g;function GD(e){const t={};return e.replace(HD,"").split(UD).forEach(n=>{if(n){const i=n.split($D);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function ii(e){let t="";if(ji(e))t=e;else if(jn(e))for(let n=0;n<e.length;n++){const i=ii(e[n]);i&&(t+=i+" ")}else if(Ai(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Ui(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ji(t)&&(e.class=ii(t)),n&&(e.style=qr(n)),e}const ZD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",WD=dA(ZD);function G3(e){return!!e||e===""}function qD(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Zf(e[i],t[i]);return n}function Zf(e,t){if(e===t)return!0;let n=AE(e),i=AE(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=fc(e),i=fc(t),n||i)return e===t;if(n=jn(e),i=jn(t),n||i)return n&&i?qD(e,t):!1;if(n=Ai(e),i=Ai(t),n||i){if(!n||!i)return!1;const a=Object.keys(e).length,u=Object.keys(t).length;if(a!==u)return!1;for(const l in e){const s=e.hasOwnProperty(l),f=t.hasOwnProperty(l);if(s&&!f||!s&&f||!Zf(e[l],t[l]))return!1}}return String(e)===String(t)}function gA(e,t){return e.findIndex(n=>Zf(n,t))}const Z3=e=>!!(e&&e.__v_isRef===!0),an=e=>ji(e)?e:e==null?"":jn(e)||Ai(e)&&(e.toString===$3||!ir(e.toString))?Z3(e)?an(e.value):JSON.stringify(e,W3,2):String(e),W3=(e,t)=>Z3(t)?W3(e,t.value):wy(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,a],u)=>(n[B2(i,u)+" =>"]=a,n),{})}:Um(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>B2(n))}:fc(t)?B2(t):Ai(t)&&!jn(t)&&!fA(t)?String(t):t,B2=(e,t="")=>{var n;return fc(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lo;class cM{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lo,!t&&Lo&&(this.index=(Lo.scopes||(Lo.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Lo;try{return Lo=this,t()}finally{Lo=n}}}on(){Lo=this}off(){Lo=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function KD(e){return new cM(e)}function hM(){return Lo}function q3(e,t=!1){Lo&&Lo.cleanups.push(e)}let Vi;const N2=new WeakSet;class c1{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lo&&Lo.active&&Lo.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,N2.has(this)&&(N2.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Y3(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,CE(this),X3(this);const t=Vi,n=hc;Vi=this,hc=!0;try{return this.fn()}finally{Q3(this),Vi=t,hc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)pM(t);this.deps=this.depsTail=void 0,CE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?N2.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qC(this)&&this.run()}get dirty(){return qC(this)}}let K3=0,$0,H0;function Y3(e,t=!1){if(e.flags|=8,t){e.next=H0,H0=e;return}e.next=$0,$0=e}function dM(){K3++}function fM(){if(--K3>0)return;if(H0){let t=H0;for(H0=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;$0;){let t=$0;for($0=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function X3(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Q3(e){let t,n=e.depsTail,i=n;for(;i;){const a=i.prevDep;i.version===-1?(i===n&&(n=a),pM(i),YD(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=a}e.deps=t,e.depsTail=n}function qC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(J3(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function J3(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===h1))return;e.globalVersion=h1;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!qC(e)){e.flags&=-3;return}const n=Vi,i=hc;Vi=e,hc=!0;try{X3(e);const a=e.fn(e._value);(t.version===0||Do(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Vi=n,hc=i,Q3(e),e.flags&=-3}}function pM(e,t=!1){const{dep:n,prevSub:i,nextSub:a}=e;if(i&&(i.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let u=n.computed.deps;u;u=u.nextDep)pM(u,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function YD(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function XD(e,t){e.effect instanceof c1&&(e=e.effect.fn);const n=new c1(e);t&&Pi(n,t);try{n.run()}catch(a){throw n.stop(),a}const i=n.run.bind(n);return i.effect=n,i}function QD(e){e.effect.stop()}let hc=!0;const e5=[];function ep(){e5.push(hc),hc=!1}function tp(){const e=e5.pop();hc=e===void 0?!0:e}function CE(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Vi;Vi=void 0;try{t()}finally{Vi=n}}}let h1=0;class JD{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yA{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Vi||!hc||Vi===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Vi)n=this.activeLink=new JD(Vi,this),Vi.deps?(n.prevDep=Vi.depsTail,Vi.depsTail.nextDep=n,Vi.depsTail=n):Vi.deps=Vi.depsTail=n,t5(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Vi.depsTail,n.nextDep=void 0,Vi.depsTail.nextDep=n,Vi.depsTail=n,Vi.deps===n&&(Vi.deps=i)}return n}trigger(t){this.version++,h1++,this.notify(t)}notify(t){dM();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{fM()}}}function t5(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)t5(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Sx=new WeakMap,Cm=Symbol(""),KC=Symbol(""),d1=Symbol("");function ro(e,t,n){if(hc&&Vi){let i=Sx.get(e);i||Sx.set(e,i=new Map);let a=i.get(n);a||(i.set(n,a=new yA),a.map=i,a.key=n),a.track()}}function ad(e,t,n,i,a,u){const l=Sx.get(e);if(!l){h1++;return}const s=f=>{f&&f.trigger()};if(dM(),t==="clear")l.forEach(s);else{const f=jn(e),y=f&&uM(n);if(f&&n==="length"){const x=Number(i);l.forEach((b,M)=>{(M==="length"||M===d1||!fc(M)&&M>=x)&&s(b)})}else switch((n!==void 0||l.has(void 0))&&s(l.get(n)),y&&s(l.get(d1)),t){case"add":f?y&&s(l.get("length")):(s(l.get(Cm)),wy(e)&&s(l.get(KC)));break;case"delete":f||(s(l.get(Cm)),wy(e)&&s(l.get(KC)));break;case"set":wy(e)&&s(l.get(Cm));break}}fM()}function eR(e,t){const n=Sx.get(e);return n&&n.get(t)}function Gg(e){const t=Gr(e);return t===e?t:(ro(t,"iterate",d1),Fl(e)?t:t.map(io))}function vA(e){return ro(e=Gr(e),"iterate",d1),e}const tR={__proto__:null,[Symbol.iterator](){return V2(this,Symbol.iterator,io)},concat(...e){return Gg(this).concat(...e.map(t=>jn(t)?Gg(t):t))},entries(){return V2(this,"entries",e=>(e[1]=io(e[1]),e))},every(e,t){return ed(this,"every",e,t,void 0,arguments)},filter(e,t){return ed(this,"filter",e,t,n=>n.map(io),arguments)},find(e,t){return ed(this,"find",e,t,io,arguments)},findIndex(e,t){return ed(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ed(this,"findLast",e,t,io,arguments)},findLastIndex(e,t){return ed(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ed(this,"forEach",e,t,void 0,arguments)},includes(...e){return j2(this,"includes",e)},indexOf(...e){return j2(this,"indexOf",e)},join(e){return Gg(this).join(e)},lastIndexOf(...e){return j2(this,"lastIndexOf",e)},map(e,t){return ed(this,"map",e,t,void 0,arguments)},pop(){return v0(this,"pop")},push(...e){return v0(this,"push",e)},reduce(e,...t){return IE(this,"reduce",e,t)},reduceRight(e,...t){return IE(this,"reduceRight",e,t)},shift(){return v0(this,"shift")},some(e,t){return ed(this,"some",e,t,void 0,arguments)},splice(...e){return v0(this,"splice",e)},toReversed(){return Gg(this).toReversed()},toSorted(e){return Gg(this).toSorted(e)},toSpliced(...e){return Gg(this).toSpliced(...e)},unshift(...e){return v0(this,"unshift",e)},values(){return V2(this,"values",io)}};function V2(e,t,n){const i=vA(e),a=i[t]();return i!==e&&!Fl(e)&&(a._next=a.next,a.next=()=>{const u=a._next();return u.value&&(u.value=n(u.value)),u}),a}const nR=Array.prototype;function ed(e,t,n,i,a,u){const l=vA(e),s=l!==e&&!Fl(e),f=l[t];if(f!==nR[t]){const b=f.apply(e,u);return s?io(b):b}let y=n;l!==e&&(s?y=function(b,M){return n.call(this,io(b),M,e)}:n.length>2&&(y=function(b,M){return n.call(this,b,M,e)}));const x=f.call(l,y,i);return s&&a?a(x):x}function IE(e,t,n,i){const a=vA(e);let u=n;return a!==e&&(Fl(e)?n.length>3&&(u=function(l,s,f){return n.call(this,l,s,f,e)}):u=function(l,s,f){return n.call(this,l,io(s),f,e)}),a[t](u,...i)}function j2(e,t,n){const i=Gr(e);ro(i,"iterate",d1);const a=i[t](...n);return(a===-1||a===!1)&&xA(n[0])?(n[0]=Gr(n[0]),i[t](...n)):a}function v0(e,t,n=[]){ep(),dM();const i=Gr(e)[t].apply(e,n);return fM(),tp(),i}const rR=dA("__proto__,__v_isRef,__isVue"),n5=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(fc));function iR(e){fc(e)||(e=String(e));const t=Gr(this);return ro(t,"has",e),t.hasOwnProperty(e)}class r5{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,u=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return u;if(n==="__v_raw")return i===(a?u?u5:l5:u?o5:a5).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const l=jn(t);if(!a){let f;if(l&&(f=tR[n]))return f;if(n==="hasOwnProperty")return iR}const s=Reflect.get(t,n,yi(t)?t:i);return(fc(n)?n5.has(n):rR(n))||(a||ro(t,"get",n),u)?s:yi(s)?l&&uM(n)?s:s.value:Ai(s)?a?U1(s):xu(s):s}}class i5 extends r5{constructor(t=!1){super(!1,t)}set(t,n,i,a){let u=t[n];if(!this._isShallow){const f=Wf(u);if(!Fl(i)&&!Wf(i)&&(u=Gr(u),i=Gr(i)),!jn(t)&&yi(u)&&!yi(i))return f?!1:(u.value=i,!0)}const l=jn(t)&&uM(n)?Number(n)<t.length:ai(t,n),s=Reflect.set(t,n,i,yi(t)?t:a);return t===Gr(a)&&(l?Do(i,u)&&ad(t,"set",n,i):ad(t,"add",n,i)),s}deleteProperty(t,n){const i=ai(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&i&&ad(t,"delete",n,void 0),a}has(t,n){const i=Reflect.has(t,n);return(!fc(n)||!n5.has(n))&&ro(t,"has",n),i}ownKeys(t){return ro(t,"iterate",jn(t)?"length":Cm),Reflect.ownKeys(t)}}class s5 extends r5{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const sR=new i5,aR=new s5,oR=new i5(!0),lR=new s5(!0),YC=e=>e,Tb=e=>Reflect.getPrototypeOf(e);function uR(e,t,n){return function(...i){const a=this.__v_raw,u=Gr(a),l=wy(u),s=e==="entries"||e===Symbol.iterator&&l,f=e==="keys"&&l,y=a[e](...i),x=n?YC:t?XC:io;return!t&&ro(u,"iterate",f?KC:Cm),{next(){const{value:b,done:M}=y.next();return M?{value:b,done:M}:{value:s?[x(b[0]),x(b[1])]:x(b),done:M}},[Symbol.iterator](){return this}}}}function Pb(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function cR(e,t){const n={get(a){const u=this.__v_raw,l=Gr(u),s=Gr(a);e||(Do(a,s)&&ro(l,"get",a),ro(l,"get",s));const{has:f}=Tb(l),y=t?YC:e?XC:io;if(f.call(l,a))return y(u.get(a));if(f.call(l,s))return y(u.get(s));u!==l&&u.get(a)},get size(){const a=this.__v_raw;return!e&&ro(Gr(a),"iterate",Cm),Reflect.get(a,"size",a)},has(a){const u=this.__v_raw,l=Gr(u),s=Gr(a);return e||(Do(a,s)&&ro(l,"has",a),ro(l,"has",s)),a===s?u.has(a):u.has(a)||u.has(s)},forEach(a,u){const l=this,s=l.__v_raw,f=Gr(s),y=t?YC:e?XC:io;return!e&&ro(f,"iterate",Cm),s.forEach((x,b)=>a.call(u,y(x),y(b),l))}};return Pi(n,e?{add:Pb("add"),set:Pb("set"),delete:Pb("delete"),clear:Pb("clear")}:{add(a){!t&&!Fl(a)&&!Wf(a)&&(a=Gr(a));const u=Gr(this);return Tb(u).has.call(u,a)||(u.add(a),ad(u,"add",a,a)),this},set(a,u){!t&&!Fl(u)&&!Wf(u)&&(u=Gr(u));const l=Gr(this),{has:s,get:f}=Tb(l);let y=s.call(l,a);y||(a=Gr(a),y=s.call(l,a));const x=f.call(l,a);return l.set(a,u),y?Do(u,x)&&ad(l,"set",a,u):ad(l,"add",a,u),this},delete(a){const u=Gr(this),{has:l,get:s}=Tb(u);let f=l.call(u,a);f||(a=Gr(a),f=l.call(u,a)),s&&s.call(u,a);const y=u.delete(a);return f&&ad(u,"delete",a,void 0),y},clear(){const a=Gr(this),u=a.size!==0,l=a.clear();return u&&ad(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=uR(a,e,t)}),n}function _A(e,t){const n=cR(e,t);return(i,a,u)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?i:Reflect.get(ai(n,a)&&a in i?n:i,a,u)}const hR={get:_A(!1,!1)},dR={get:_A(!1,!0)},fR={get:_A(!0,!1)},pR={get:_A(!0,!0)},a5=new WeakMap,o5=new WeakMap,l5=new WeakMap,u5=new WeakMap;function mR(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gR(e){return e.__v_skip||!Object.isExtensible(e)?0:mR(FD(e))}function xu(e){return Wf(e)?e:bA(e,!1,sR,hR,a5)}function mM(e){return bA(e,!1,oR,dR,o5)}function U1(e){return bA(e,!0,aR,fR,l5)}function yR(e){return bA(e,!0,lR,pR,u5)}function bA(e,t,n,i,a){if(!Ai(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=a.get(e);if(u)return u;const l=gR(e);if(l===0)return e;const s=new Proxy(e,l===2?i:n);return a.set(e,s),s}function Vf(e){return Wf(e)?Vf(e.__v_raw):!!(e&&e.__v_isReactive)}function Wf(e){return!!(e&&e.__v_isReadonly)}function Fl(e){return!!(e&&e.__v_isShallow)}function xA(e){return e?!!e.__v_raw:!1}function Gr(e){const t=e&&e.__v_raw;return t?Gr(t):e}function c5(e){return!ai(e,"__v_skip")&&Object.isExtensible(e)&&H3(e,"__v_skip",!0),e}const io=e=>Ai(e)?xu(e):e,XC=e=>Ai(e)?U1(e):e;function yi(e){return e?e.__v_isRef===!0:!1}function Kt(e){return h5(e,!1)}function Ca(e){return h5(e,!0)}function h5(e,t){return yi(e)?e:new vR(e,t)}class vR{constructor(t,n){this.dep=new yA,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Gr(t),this._value=n?t:io(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Fl(t)||Wf(t);t=i?t:Gr(t),Do(t,n)&&(this._rawValue=t,this._value=i?t:io(t),this.dep.trigger())}}function _R(e){e.dep&&e.dep.trigger()}function re(e){return yi(e)?e.value:e}function d5(e){return ir(e)?e():re(e)}const bR={get:(e,t,n)=>t==="__v_raw"?e:re(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const a=e[t];return yi(a)&&!yi(n)?(a.value=n,!0):Reflect.set(e,t,n,i)}};function gM(e){return Vf(e)?e:new Proxy(e,bR)}class xR{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new yA,{get:i,set:a}=t(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=a}get value(){return this._value=this._get()}set value(t){this._set(t)}}function f5(e){return new xR(e)}function p5(e){const t=jn(e)?new Array(e.length):{};for(const n in e)t[n]=m5(e,n);return t}class AR{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return eR(Gr(this._object),this._key)}}class wR{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function CR(e,t,n){return yi(e)?e:ir(e)?new wR(e):Ai(e)&&arguments.length>1?m5(e,t,n):Kt(e)}function m5(e,t,n){const i=e[t];return yi(i)?i:new AR(e,t,n)}class IR{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new yA(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=h1-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Vi!==this)return Y3(this,!0),!0}get value(){const t=this.dep.track();return J3(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function MR(e,t,n=!1){let i,a;return ir(e)?i=e:(i=e.get,a=e.set),new IR(i,a,n)}const SR={GET:"get",HAS:"has",ITERATE:"iterate"},ER={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},kb={},Ex=new WeakMap;let Sf;function TR(){return Sf}function g5(e,t=!1,n=Sf){if(n){let i=Ex.get(n);i||Ex.set(n,i=[]),i.push(e)}}function PR(e,t,n=Zr){const{immediate:i,deep:a,once:u,scheduler:l,augmentJob:s,call:f}=n,y=U=>a?U:Fl(U)||a===!1||a===0?od(U,1):od(U);let x,b,M,A,P=!1,L=!1;if(yi(e)?(b=()=>e.value,P=Fl(e)):Vf(e)?(b=()=>y(e),P=!0):jn(e)?(L=!0,P=e.some(U=>Vf(U)||Fl(U)),b=()=>e.map(U=>{if(yi(U))return U.value;if(Vf(U))return y(U);if(ir(U))return f?f(U,2):U()})):ir(e)?t?b=f?()=>f(e,2):e:b=()=>{if(M){ep();try{M()}finally{tp()}}const U=Sf;Sf=x;try{return f?f(e,3,[A]):e(A)}finally{Sf=U}}:b=gu,t&&a){const U=b,Z=a===!0?1/0:a;b=()=>od(U(),Z)}const O=hM(),V=()=>{x.stop(),O&&O.active&&oM(O.effects,x)};if(u&&t){const U=t;t=(...Z)=>{U(...Z),V()}}let z=L?new Array(e.length).fill(kb):kb;const B=U=>{if(!(!(x.flags&1)||!x.dirty&&!U))if(t){const Z=x.run();if(a||P||(L?Z.some((te,Y)=>Do(te,z[Y])):Do(Z,z))){M&&M();const te=Sf;Sf=x;try{const Y=[Z,z===kb?void 0:L&&z[0]===kb?[]:z,A];f?f(t,3,Y):t(...Y),z=Z}finally{Sf=te}}}else x.run()};return s&&s(B),x=new c1(b),x.scheduler=l?()=>l(B,!1):B,A=U=>g5(U,!1,x),M=x.onStop=()=>{const U=Ex.get(x);if(U){if(f)f(U,4);else for(const Z of U)Z();Ex.delete(x)}},t?i?B(!0):z=x.run():l?l(B.bind(null,!0),!0):x.run(),V.pause=x.pause.bind(x),V.resume=x.resume.bind(x),V.stop=V,V}function od(e,t=1/0,n){if(t<=0||!Ai(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,yi(e))od(e.value,t,n);else if(jn(e))for(let i=0;i<e.length;i++)od(e[i],t,n);else if(Um(e)||wy(e))e.forEach(i=>{od(i,t,n)});else if(fA(e)){for(const i in e)od(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&od(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const y5=[];function kR(e){y5.push(e)}function LR(){y5.pop()}function DR(e,t){}const RR={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},OR={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Xy(e,t,n,i){try{return i?e(...i):e()}catch(a){$m(a,t,n)}}function Au(e,t,n,i){if(ir(e)){const a=Xy(e,t,n,i);return a&&lM(a)&&a.catch(u=>{$m(u,t,n)}),a}if(jn(e)){const a=[];for(let u=0;u<e.length;u++)a.push(Au(e[u],t,n,i));return a}}function $m(e,t,n,i=!0){const a=t?t.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Zr;if(t){let s=t.parent;const f=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const x=s.ec;if(x){for(let b=0;b<x.length;b++)if(x[b](e,f,y)===!1)return}s=s.parent}if(u){ep(),Xy(u,null,10,[e,f,y]),tp();return}}zR(e,n,a,i,l)}function zR(e,t,n,i=!0,a=!1){if(a)throw e;console.error(e)}const Ro=[];let Jc=-1;const My=[];let Ef=null,ny=0;const v5=Promise.resolve();let Tx=null;function fl(e){const t=Tx||v5;return e?t.then(this?e.bind(this):e):t}function FR(e){let t=Jc+1,n=Ro.length;for(;t<n;){const i=t+n>>>1,a=Ro[i],u=p1(a);u<e||u===e&&a.flags&2?t=i+1:n=i}return t}function yM(e){if(!(e.flags&1)){const t=p1(e),n=Ro[Ro.length-1];!n||!(e.flags&2)&&t>=p1(n)?Ro.push(e):Ro.splice(FR(t),0,e),e.flags|=1,_5()}}function _5(){Tx||(Tx=v5.then(b5))}function f1(e){jn(e)?My.push(...e):Ef&&e.id===-1?Ef.splice(ny+1,0,e):e.flags&1||(My.push(e),e.flags|=1),_5()}function ME(e,t,n=Jc+1){for(;n<Ro.length;n++){const i=Ro[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Ro.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Px(e){if(My.length){const t=[...new Set(My)].sort((n,i)=>p1(n)-p1(i));if(My.length=0,Ef){Ef.push(...t);return}for(Ef=t,ny=0;ny<Ef.length;ny++){const n=Ef[ny];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ef=null,ny=0}}const p1=e=>e.id==null?e.flags&2?-1:1/0:e.id;function b5(e){try{for(Jc=0;Jc<Ro.length;Jc++){const t=Ro[Jc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Xy(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Jc<Ro.length;Jc++){const t=Ro[Jc];t&&(t.flags&=-2)}Jc=-1,Ro.length=0,Px(),Tx=null,(Ro.length||My.length)&&b5()}}let ry,Lb=[];function x5(e,t){var n,i;ry=e,ry?(ry.enabled=!0,Lb.forEach(({event:a,args:u})=>ry.emit(a,...u)),Lb=[]):typeof window<"u"&&window.HTMLElement&&!((i=(n=window.navigator)==null?void 0:n.userAgent)!=null&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(u=>{x5(u,t)}),setTimeout(()=>{ry||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Lb=[])},3e3)):Lb=[]}let ua=null,AA=null;function m1(e){const t=ua;return ua=e,AA=e&&e.type.__scopeId||null,t}function BR(e){AA=e}function NR(){AA=null}const VR=e=>nt;function nt(e,t=ua,n){if(!t||e._n)return e;const i=(...a)=>{i._d&&sI(-1);const u=m1(t);let l;try{l=e(...a)}finally{m1(u),i._d&&sI(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function pl(e,t){if(ua===null)return e;const n=G1(ua),i=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[u,l,s,f=Zr]=t[a];u&&(ir(u)&&(u={mounted:u,updated:u}),u.deep&&od(l),i.push({dir:u,instance:n,value:l,oldValue:void 0,arg:s,modifiers:f}))}return e}function nh(e,t,n,i){const a=e.dirs,u=t&&t.dirs;for(let l=0;l<a.length;l++){const s=a[l];u&&(s.oldValue=u[l].value);let f=s.dir[i];f&&(ep(),Au(f,n,8,[e.el,s,e,t]),tp())}}const A5=Symbol("_vte"),w5=e=>e.__isTeleport,G0=e=>e&&(e.disabled||e.disabled===""),SE=e=>e&&(e.defer||e.defer===""),EE=e=>typeof SVGElement<"u"&&e instanceof SVGElement,TE=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,QC=(e,t)=>{const n=e&&e.to;return ji(n)?t?t(n):null:n},C5={name:"Teleport",__isTeleport:!0,process(e,t,n,i,a,u,l,s,f,y){const{mc:x,pc:b,pbc:M,o:{insert:A,querySelector:P,createText:L,createComment:O}}=y,V=G0(t.props);let{shapeFlag:z,children:B,dynamicChildren:U}=t;if(e==null){const Z=t.el=L(""),te=t.anchor=L("");A(Z,n,i),A(te,n,i);const Y=(H,ne)=>{z&16&&(a&&a.isCE&&(a.ce._teleportTarget=H),x(B,H,ne,a,u,l,s,f))},W=()=>{const H=t.target=QC(t.props,P),ne=I5(H,t,L,A);H&&(l!=="svg"&&EE(H)?l="svg":l!=="mathml"&&TE(H)&&(l="mathml"),V||(Y(H,ne),sx(t,!1)))};V&&(Y(n,te),sx(t,!0)),SE(t.props)?aa(()=>{W(),t.el.__isMounted=!0},u):W()}else{if(SE(t.props)&&!e.el.__isMounted){aa(()=>{C5.process(e,t,n,i,a,u,l,s,f,y),delete e.el.__isMounted},u);return}t.el=e.el,t.targetStart=e.targetStart;const Z=t.anchor=e.anchor,te=t.target=e.target,Y=t.targetAnchor=e.targetAnchor,W=G0(e.props),H=W?n:te,ne=W?Z:Y;if(l==="svg"||EE(te)?l="svg":(l==="mathml"||TE(te))&&(l="mathml"),U?(M(e.dynamicChildren,U,H,a,u,l,s),EM(e,t,!0)):f||b(e,t,H,ne,a,u,l,s,!1),V)W?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Db(t,n,Z,y,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const le=t.target=QC(t.props,P);le&&Db(t,le,null,y,0)}else W&&Db(t,te,Y,y,1);sx(t,V)}},remove(e,t,n,{um:i,o:{remove:a}},u){const{shapeFlag:l,children:s,anchor:f,targetStart:y,targetAnchor:x,target:b,props:M}=e;if(b&&(a(y),a(x)),u&&a(f),l&16){const A=u||!G0(M);for(let P=0;P<s.length;P++){const L=s[P];i(L,t,n,A,!!L.dynamicChildren)}}},move:Db,hydrate:jR};function Db(e,t,n,{o:{insert:i},m:a},u=2){u===0&&i(e.targetAnchor,t,n);const{el:l,anchor:s,shapeFlag:f,children:y,props:x}=e,b=u===2;if(b&&i(l,t,n),(!b||G0(x))&&f&16)for(let M=0;M<y.length;M++)a(y[M],t,n,2);b&&i(s,t,n)}function jR(e,t,n,i,a,u,{o:{nextSibling:l,parentNode:s,querySelector:f,insert:y,createText:x}},b){const M=t.target=QC(t.props,f);if(M){const A=G0(t.props),P=M._lpa||M.firstChild;if(t.shapeFlag&16)if(A)t.anchor=b(l(e),t,s(e),n,i,a,u),t.targetStart=P,t.targetAnchor=P&&l(P);else{t.anchor=l(e);let L=P;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")t.targetStart=L;else if(L.data==="teleport anchor"){t.targetAnchor=L,M._lpa=t.targetAnchor&&l(t.targetAnchor);break}}L=l(L)}t.targetAnchor||I5(M,t,x,y),b(P&&l(P),t,M,n,i,a,u)}sx(t,A)}return t.anchor&&l(t.anchor)}const g1=C5;function sx(e,t){const n=e.ctx;if(n&&n.ut){let i,a;for(t?(i=e.el,a=e.anchor):(i=e.targetStart,a=e.targetAnchor);i&&i!==a;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function I5(e,t,n,i){const a=t.targetStart=n(""),u=t.targetAnchor=n("");return a[A5]=u,e&&(i(a,e),i(u,e)),u}const Tf=Symbol("_leaveCb"),Rb=Symbol("_enterCb");function vM(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Er(()=>{e.isMounted=!0}),yh(()=>{e.isUnmounting=!0}),e}const uu=[Function,Array],_M={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:uu,onEnter:uu,onAfterEnter:uu,onEnterCancelled:uu,onBeforeLeave:uu,onLeave:uu,onAfterLeave:uu,onLeaveCancelled:uu,onBeforeAppear:uu,onAppear:uu,onAfterAppear:uu,onAppearCancelled:uu},M5=e=>{const t=e.subTree;return t.component?M5(t.component):t},UR={name:"BaseTransition",props:_M,setup(e,{slots:t}){const n=Za(),i=vM();return()=>{const a=t.default&&wA(t.default(),!0);if(!a||!a.length)return;const u=S5(a),l=Gr(e),{mode:s}=l;if(i.isLeaving)return U2(u);const f=PE(u);if(!f)return U2(u);let y=Ry(f,l,i,n,b=>y=b);f.type!==Hs&&dd(f,y);let x=n.subTree&&PE(n.subTree);if(x&&x.type!==Hs&&!oc(f,x)&&M5(n).type!==Hs){let b=Ry(x,l,i,n);if(dd(x,b),s==="out-in"&&f.type!==Hs)return i.isLeaving=!0,b.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete b.afterLeave,x=void 0},U2(u);s==="in-out"&&f.type!==Hs?b.delayLeave=(M,A,P)=>{const L=T5(i,x);L[String(x.key)]=x,M[Tf]=()=>{A(),M[Tf]=void 0,delete y.delayedLeave,x=void 0},y.delayedLeave=()=>{P(),delete y.delayedLeave,x=void 0}}:x=void 0}else x&&(x=void 0);return u}}};function S5(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Hs){t=n;break}}return t}const E5=UR;function T5(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Ry(e,t,n,i,a){const{appear:u,mode:l,persisted:s=!1,onBeforeEnter:f,onEnter:y,onAfterEnter:x,onEnterCancelled:b,onBeforeLeave:M,onLeave:A,onAfterLeave:P,onLeaveCancelled:L,onBeforeAppear:O,onAppear:V,onAfterAppear:z,onAppearCancelled:B}=t,U=String(e.key),Z=T5(n,e),te=(H,ne)=>{H&&Au(H,i,9,ne)},Y=(H,ne)=>{const le=ne[1];te(H,ne),jn(H)?H.every(Q=>Q.length<=1)&&le():H.length<=1&&le()},W={mode:l,persisted:s,beforeEnter(H){let ne=f;if(!n.isMounted)if(u)ne=O||f;else return;H[Tf]&&H[Tf](!0);const le=Z[U];le&&oc(e,le)&&le.el[Tf]&&le.el[Tf](),te(ne,[H])},enter(H){let ne=y,le=x,Q=b;if(!n.isMounted)if(u)ne=V||y,le=z||x,Q=B||b;else return;let ce=!1;const K=H[Rb]=Le=>{ce||(ce=!0,Le?te(Q,[H]):te(le,[H]),W.delayedLeave&&W.delayedLeave(),H[Rb]=void 0)};ne?Y(ne,[H,K]):K()},leave(H,ne){const le=String(e.key);if(H[Rb]&&H[Rb](!0),n.isUnmounting)return ne();te(M,[H]);let Q=!1;const ce=H[Tf]=K=>{Q||(Q=!0,ne(),K?te(L,[H]):te(P,[H]),H[Tf]=void 0,Z[le]===e&&delete Z[le])};Z[le]=e,A?Y(A,[H,ce]):ce()},clone(H){const ne=Ry(H,t,n,i,a);return a&&a(ne),ne}};return W}function U2(e){if($1(e))return e=hh(e),e.children=null,e}function PE(e){if(!$1(e))return w5(e.type)&&e.children?S5(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&ir(n.default))return n.default()}}function dd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,dd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wA(e,t=!1,n){let i=[],a=0;for(let u=0;u<e.length;u++){let l=e[u];const s=n==null?l.key:String(n)+String(l.key!=null?l.key:u);l.type===Fn?(l.patchFlag&128&&a++,i=i.concat(wA(l.children,t,s))):(t||l.type!==Hs)&&i.push(s!=null?hh(l,{key:s}):l)}if(a>1)for(let u=0;u<i.length;u++)i[u].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function An(e,t){return ir(e)?Pi({name:e.name},t,{setup:e}):e}function $R(){const e=Za();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function bM(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function HR(e){const t=Za(),n=Ca(null);if(t){const a=t.refs===Zr?t.refs={}:t.refs;Object.defineProperty(a,e,{enumerable:!0,get:()=>n.value,set:u=>n.value=u})}return n}function y1(e,t,n,i,a=!1){if(jn(e)){e.forEach((P,L)=>y1(P,t&&(jn(t)?t[L]:t),n,i,a));return}if(jf(i)&&!a){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&y1(e,t,n,i.component.subTree);return}const u=i.shapeFlag&4?G1(i.component):i.el,l=a?null:u,{i:s,r:f}=e,y=t&&t.r,x=s.refs===Zr?s.refs={}:s.refs,b=s.setupState,M=Gr(b),A=b===Zr?()=>!1:P=>ai(M,P);if(y!=null&&y!==f&&(ji(y)?(x[y]=null,A(y)&&(b[y]=null)):yi(y)&&(y.value=null)),ir(f))Xy(f,s,12,[l,x]);else{const P=ji(f),L=yi(f);if(P||L){const O=()=>{if(e.f){const V=P?A(f)?b[f]:x[f]:f.value;a?jn(V)&&oM(V,u):jn(V)?V.includes(u)||V.push(u):P?(x[f]=[u],A(f)&&(b[f]=x[f])):(f.value=[u],e.k&&(x[e.k]=f.value))}else P?(x[f]=l,A(f)&&(b[f]=l)):L&&(f.value=l,e.k&&(x[e.k]=l))};l?(O.id=-1,aa(O,n)):O()}}}let kE=!1;const Zg=()=>{kE||(console.error("Hydration completed but contains mismatches."),kE=!0)},GR=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",ZR=e=>e.namespaceURI.includes("MathML"),Ob=e=>{if(e.nodeType===1){if(GR(e))return"svg";if(ZR(e))return"mathml"}},dy=e=>e.nodeType===8;function WR(e){const{mt:t,p:n,o:{patchProp:i,createText:a,nextSibling:u,parentNode:l,remove:s,insert:f,createComment:y}}=e,x=(B,U)=>{if(!U.hasChildNodes()){n(null,B,U),Px(),U._vnode=B;return}b(U.firstChild,B,null,null,null),Px(),U._vnode=B},b=(B,U,Z,te,Y,W=!1)=>{W=W||!!U.dynamicChildren;const H=dy(B)&&B.data==="[",ne=()=>L(B,U,Z,te,Y,H),{type:le,ref:Q,shapeFlag:ce,patchFlag:K}=U;let Le=B.nodeType;U.el=B,K===-2&&(W=!1,U.dynamicChildren=null);let Ue=null;switch(le){case $f:Le!==3?U.children===""?(f(U.el=a(""),l(B),B),Ue=B):Ue=ne():(B.data!==U.children&&(Zg(),B.data=U.children),Ue=u(B));break;case Hs:z(B)?(Ue=u(B),V(U.el=B.content.firstChild,B,Z)):Le!==8||H?Ue=ne():Ue=u(B);break;case Mm:if(H&&(B=u(B),Le=B.nodeType),Le===1||Le===3){Ue=B;const Be=!U.children.length;for(let tt=0;tt<U.staticCount;tt++)Be&&(U.children+=Ue.nodeType===1?Ue.outerHTML:Ue.data),tt===U.staticCount-1&&(U.anchor=Ue),Ue=u(Ue);return H?u(Ue):Ue}else ne();break;case Fn:H?Ue=P(B,U,Z,te,Y,W):Ue=ne();break;default:if(ce&1)(Le!==1||U.type.toLowerCase()!==B.tagName.toLowerCase())&&!z(B)?Ue=ne():Ue=M(B,U,Z,te,Y,W);else if(ce&6){U.slotScopeIds=Y;const Be=l(B);if(H?Ue=O(B):dy(B)&&B.data==="teleport start"?Ue=O(B,B.data,"teleport end"):Ue=u(B),t(U,Be,null,Z,te,Ob(Be),W),jf(U)&&!U.type.__asyncResolved){let tt;H?(tt=je(Fn),tt.anchor=Ue?Ue.previousSibling:Be.lastChild):tt=B.nodeType===3?Wr(""):je("div"),tt.el=B,U.component.subTree=tt}}else ce&64?Le!==8?Ue=ne():Ue=U.type.hydrate(B,U,Z,te,Y,W,e,A):ce&128&&(Ue=U.type.hydrate(B,U,Z,te,Ob(l(B)),Y,W,e,b))}return Q!=null&&y1(Q,null,te,U),Ue},M=(B,U,Z,te,Y,W)=>{W=W||!!U.dynamicChildren;const{type:H,props:ne,patchFlag:le,shapeFlag:Q,dirs:ce,transition:K}=U,Le=H==="input"||H==="option";if(Le||le!==-1){ce&&nh(U,null,Z,"created");let Ue=!1;if(z(B)){Ue=ek(null,K)&&Z&&Z.vnode.props&&Z.vnode.props.appear;const tt=B.content.firstChild;Ue&&K.beforeEnter(tt),V(tt,B,Z),U.el=B=tt}if(Q&16&&!(ne&&(ne.innerHTML||ne.textContent))){let tt=A(B.firstChild,U,B,Z,te,Y,W);for(;tt;){zb(B,1)||Zg();const ut=tt;tt=tt.nextSibling,s(ut)}}else if(Q&8){let tt=U.children;tt[0]===`
`&&(B.tagName==="PRE"||B.tagName==="TEXTAREA")&&(tt=tt.slice(1)),B.textContent!==tt&&(zb(B,0)||Zg(),B.textContent=U.children)}if(ne){if(Le||!W||le&48){const tt=B.tagName.includes("-");for(const ut in ne)(Le&&(ut.endsWith("value")||ut==="indeterminate")||V1(ut)&&!Cy(ut)||ut[0]==="."||tt)&&i(B,ut,null,ne[ut],void 0,Z)}else if(ne.onClick)i(B,"onClick",null,ne.onClick,void 0,Z);else if(le&4&&Vf(ne.style))for(const tt in ne.style)ne.style[tt]}let Be;(Be=ne&&ne.onVnodeBeforeMount)&&ll(Be,Z,U),ce&&nh(U,null,Z,"beforeMount"),((Be=ne&&ne.onVnodeMounted)||ce||Ue)&&uk(()=>{Be&&ll(Be,Z,U),Ue&&K.enter(B),ce&&nh(U,null,Z,"mounted")},te)}return B.nextSibling},A=(B,U,Z,te,Y,W,H)=>{H=H||!!U.dynamicChildren;const ne=U.children,le=ne.length;for(let Q=0;Q<le;Q++){const ce=H?ne[Q]:ne[Q]=cl(ne[Q]),K=ce.type===$f;B?(K&&!H&&Q+1<le&&cl(ne[Q+1]).type===$f&&(f(a(B.data.slice(ce.children.length)),Z,u(B)),B.data=ce.children),B=b(B,ce,te,Y,W,H)):K&&!ce.children?f(ce.el=a(""),Z):(zb(Z,1)||Zg(),n(null,ce,Z,null,te,Y,Ob(Z),W))}return B},P=(B,U,Z,te,Y,W)=>{const{slotScopeIds:H}=U;H&&(Y=Y?Y.concat(H):H);const ne=l(B),le=A(u(B),U,ne,Z,te,Y,W);return le&&dy(le)&&le.data==="]"?u(U.anchor=le):(Zg(),f(U.anchor=y("]"),ne,le),le)},L=(B,U,Z,te,Y,W)=>{if(zb(B.parentElement,1)||Zg(),U.el=null,W){const le=O(B);for(;;){const Q=u(B);if(Q&&Q!==le)s(Q);else break}}const H=u(B),ne=l(B);return s(B),n(null,U,ne,H,Z,te,Ob(ne),Y),Z&&(Z.vnode.el=U.el,SA(Z,U.el)),H},O=(B,U="[",Z="]")=>{let te=0;for(;B;)if(B=u(B),B&&dy(B)&&(B.data===U&&te++,B.data===Z)){if(te===0)return u(B);te--}return B},V=(B,U,Z)=>{const te=U.parentNode;te&&te.replaceChild(B,U);let Y=Z;for(;Y;)Y.vnode.el===U&&(Y.vnode.el=Y.subTree.el=B),Y=Y.parent},z=B=>B.nodeType===1&&B.tagName==="TEMPLATE";return[x,b]}const LE="data-allow-mismatch",qR={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function zb(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(LE);)e=e.parentElement;const n=e&&e.getAttribute(LE);if(n==null)return!1;if(n==="")return!0;{const i=n.split(",");return t===0&&i.includes("children")?!0:n.split(",").includes(qR[t])}}const KR=mA().requestIdleCallback||(e=>setTimeout(e,1)),YR=mA().cancelIdleCallback||(e=>clearTimeout(e)),XR=(e=1e4)=>t=>{const n=KR(t,{timeout:e});return()=>YR(n)};function QR(e){const{top:t,left:n,bottom:i,right:a}=e.getBoundingClientRect(),{innerHeight:u,innerWidth:l}=window;return(t>0&&t<u||i>0&&i<u)&&(n>0&&n<l||a>0&&a<l)}const JR=e=>(t,n)=>{const i=new IntersectionObserver(a=>{for(const u of a)if(u.isIntersecting){i.disconnect(),t();break}},e);return n(a=>{if(a instanceof Element){if(QR(a))return t(),i.disconnect(),!1;i.observe(a)}}),()=>i.disconnect()},e8=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},t8=(e=[])=>(t,n)=>{ji(e)&&(e=[e]);let i=!1;const a=l=>{i||(i=!0,u(),t(),l.target.dispatchEvent(new l.constructor(l.type,l)))},u=()=>{n(l=>{for(const s of e)l.removeEventListener(s,a)})};return n(l=>{for(const s of e)l.addEventListener(s,a,{once:!0})}),u};function n8(e,t){if(dy(e)&&e.data==="["){let n=1,i=e.nextSibling;for(;i;){if(i.nodeType===1){if(t(i)===!1)break}else if(dy(i))if(i.data==="]"){if(--n===0)break}else i.data==="["&&n++;i=i.nextSibling}}else t(e)}const jf=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function r8(e){ir(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:a=200,hydrate:u,timeout:l,suspensible:s=!0,onError:f}=e;let y=null,x,b=0;const M=()=>(b++,y=null,A()),A=()=>{let P;return y||(P=y=t().catch(L=>{if(L=L instanceof Error?L:new Error(String(L)),f)return new Promise((O,V)=>{f(L,()=>O(M()),()=>V(L),b+1)});throw L}).then(L=>P!==y&&y?y:(L&&(L.__esModule||L[Symbol.toStringTag]==="Module")&&(L=L.default),x=L,L)))};return An({name:"AsyncComponentWrapper",__asyncLoader:A,__asyncHydrate(P,L,O){const V=u?()=>{const z=u(O,B=>n8(P,B));z&&(L.bum||(L.bum=[])).push(z)}:O;x?V():A().then(()=>!L.isUnmounted&&V())},get __asyncResolved(){return x},setup(){const P=oa;if(bM(P),x)return()=>$2(x,P);const L=B=>{y=null,$m(B,P,13,!i)};if(s&&P.suspense||Oy)return A().then(B=>()=>$2(B,P)).catch(B=>(L(B),()=>i?je(i,{error:B}):null));const O=Kt(!1),V=Kt(),z=Kt(!!a);return a&&setTimeout(()=>{z.value=!1},a),l!=null&&setTimeout(()=>{if(!O.value&&!V.value){const B=new Error(`Async component timed out after ${l}ms.`);L(B),V.value=B}},l),A().then(()=>{O.value=!0,P.parent&&$1(P.parent.vnode)&&P.parent.update()}).catch(B=>{L(B),V.value=B}),()=>{if(O.value&&x)return $2(x,P);if(V.value&&i)return je(i,{error:V.value});if(n&&!z.value)return je(n)}}})}function $2(e,t){const{ref:n,props:i,children:a,ce:u}=t.vnode,l=je(e,i,a);return l.ref=n,l.ce=u,delete t.vnode.ce,l}const $1=e=>e.type.__isKeepAlive,i8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=Za(),i=n.ctx;if(!i.renderer)return()=>{const z=t.default&&t.default();return z&&z.length===1?z[0]:z};const a=new Map,u=new Set;let l=null;const s=n.suspense,{renderer:{p:f,m:y,um:x,o:{createElement:b}}}=i,M=b("div");i.activate=(z,B,U,Z,te)=>{const Y=z.component;y(z,B,U,0,s),f(Y.vnode,z,B,U,Y,s,Z,z.slotScopeIds,te),aa(()=>{Y.isDeactivated=!1,Y.a&&Iy(Y.a);const W=z.props&&z.props.onVnodeMounted;W&&ll(W,Y.parent,z)},s)},i.deactivate=z=>{const B=z.component;Lx(B.m),Lx(B.a),y(z,M,null,1,s),aa(()=>{B.da&&Iy(B.da);const U=z.props&&z.props.onVnodeUnmounted;U&&ll(U,B.parent,z),B.isDeactivated=!0},s)};function A(z){H2(z),x(z,n,s,!0)}function P(z){a.forEach((B,U)=>{const Z=cI(B.type);Z&&!z(Z)&&L(U)})}function L(z){const B=a.get(z);B&&(!l||!oc(B,l))?A(B):l&&H2(l),a.delete(z),u.delete(z)}xi(()=>[e.include,e.exclude],([z,B])=>{z&&P(U=>P0(z,U)),B&&P(U=>!P0(B,U))},{flush:"post",deep:!0});let O=null;const V=()=>{O!=null&&(Dx(n.subTree.type)?aa(()=>{a.set(O,Fb(n.subTree))},n.subTree.suspense):a.set(O,Fb(n.subTree)))};return Er(V),IA(V),yh(()=>{a.forEach(z=>{const{subTree:B,suspense:U}=n,Z=Fb(B);if(z.type===Z.type&&z.key===Z.key){H2(Z);const te=Z.component.da;te&&aa(te,U);return}A(z)})}),()=>{if(O=null,!t.default)return l=null;const z=t.default(),B=z[0];if(z.length>1)return l=null,z;if(!fd(B)||!(B.shapeFlag&4)&&!(B.shapeFlag&128))return l=null,B;let U=Fb(B);if(U.type===Hs)return l=null,U;const Z=U.type,te=cI(jf(U)?U.type.__asyncResolved||{}:Z),{include:Y,exclude:W,max:H}=e;if(Y&&(!te||!P0(Y,te))||W&&te&&P0(W,te))return U.shapeFlag&=-257,l=U,B;const ne=U.key==null?Z:U.key,le=a.get(ne);return U.el&&(U=hh(U),B.shapeFlag&128&&(B.ssContent=U)),O=ne,le?(U.el=le.el,U.component=le.component,U.transition&&dd(U,U.transition),U.shapeFlag|=512,u.delete(ne),u.add(ne)):(u.add(ne),H&&u.size>parseInt(H,10)&&L(u.values().next().value)),U.shapeFlag|=256,l=U,Dx(B.type)?B:U}}},s8=i8;function P0(e,t){return jn(e)?e.some(n=>P0(n,t)):ji(e)?e.split(",").includes(t):zD(e)?(e.lastIndex=0,e.test(t)):!1}function P5(e,t){L5(e,"a",t)}function k5(e,t){L5(e,"da",t)}function L5(e,t,n=oa){const i=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(CA(t,i,n),n){let a=n.parent;for(;a&&a.parent;)$1(a.parent.vnode)&&a8(i,t,n,a),a=a.parent}}function a8(e,t,n,i){const a=CA(t,e,i,!0);ha(()=>{oM(i[t],a)},n)}function H2(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function Fb(e){return e.shapeFlag&128?e.ssContent:e}function CA(e,t,n=oa,i=!1){if(n){const a=n[e]||(n[e]=[]),u=t.__weh||(t.__weh=(...l)=>{ep();const s=Dm(n),f=Au(t,n,e,l);return s(),tp(),f});return i?a.unshift(u):a.push(u),u}}const yd=e=>(t,n=oa)=>{(!Oy||e==="sp")&&CA(e,(...i)=>t(...i),n)},D5=yd("bm"),Er=yd("m"),xM=yd("bu"),IA=yd("u"),yh=yd("bum"),ha=yd("um"),R5=yd("sp"),O5=yd("rtg"),z5=yd("rtc");function F5(e,t=oa){CA("ec",e,t)}const AM="components",o8="directives";function Us(e,t){return wM(AM,e,!0,t)||e}const B5=Symbol.for("v-ndc");function ps(e){return ji(e)?wM(AM,e,!1)||e:e||B5}function l8(e){return wM(o8,e)}function wM(e,t,n=!0,i=!1){const a=ua||oa;if(a){const u=a.type;if(e===AM){const s=cI(u,!1);if(s&&(s===t||s===Ha(t)||s===j1(Ha(t))))return u}const l=DE(a[e]||u[e],t)||DE(a.appContext[e],t);return!l&&i?u:l}}function DE(e,t){return e&&(e[t]||e[Ha(t)]||e[j1(Ha(t))])}function Or(e,t,n,i){let a;const u=n&&n[i],l=jn(e);if(l||ji(e)){const s=l&&Vf(e);let f=!1;s&&(f=!Fl(e),e=vA(e)),a=new Array(e.length);for(let y=0,x=e.length;y<x;y++)a[y]=t(f?io(e[y]):e[y],y,void 0,u&&u[y])}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,u&&u[s])}else if(Ai(e))if(e[Symbol.iterator])a=Array.from(e,(s,f)=>t(s,f,void 0,u&&u[f]));else{const s=Object.keys(e);a=new Array(s.length);for(let f=0,y=s.length;f<y;f++){const x=s[f];a[f]=t(e[x],x,f,u&&u[f])}}else a=[];return n&&(n[i]=a),a}function u8(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(jn(i))for(let a=0;a<i.length;a++)e[i[a].name]=i[a].fn;else i&&(e[i.name]=i.key?(...a)=>{const u=i.fn(...a);return u&&(u.key=i.key),u}:i.fn)}return e}function Sn(e,t,n={},i,a){if(ua.ce||ua.parent&&jf(ua.parent)&&ua.parent.ce)return t!=="default"&&(n.name=t),xe(),Rt(Fn,null,[je("slot",n,i&&i())],64);let u=e[t];u&&u._c&&(u._d=!1),xe();const l=u&&CM(u(n)),s=n.key||l&&l.key,f=Rt(Fn,{key:(s&&!fc(s)?s:`_${t}`)+(!l&&i?"_fb":"")},l||(i?i():[]),l&&e._===1?64:-2);return!a&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),u&&u._c&&(u._d=!0),f}function CM(e){return e.some(t=>fd(t)?!(t.type===Hs||t.type===Fn&&!CM(t.children)):!0)?e:null}function c8(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:U0(i)]=e[i];return n}const JC=e=>e?pk(e)?G1(e):JC(e.parent):null,Z0=Pi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>JC(e.parent),$root:e=>JC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>MM(e),$forceUpdate:e=>e.f||(e.f=()=>{yM(e.update)}),$nextTick:e=>e.n||(e.n=fl.bind(e.proxy)),$watch:e=>B8.bind(e)}),G2=(e,t)=>e!==Zr&&!e.__isScriptSetup&&ai(e,t),eI={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:a,props:u,accessCache:l,type:s,appContext:f}=e;let y;if(t[0]!=="$"){const A=l[t];if(A!==void 0)switch(A){case 1:return i[t];case 2:return a[t];case 4:return n[t];case 3:return u[t]}else{if(G2(i,t))return l[t]=1,i[t];if(a!==Zr&&ai(a,t))return l[t]=2,a[t];if((y=e.propsOptions[0])&&ai(y,t))return l[t]=3,u[t];if(n!==Zr&&ai(n,t))return l[t]=4,n[t];tI&&(l[t]=0)}}const x=Z0[t];let b,M;if(x)return t==="$attrs"&&ro(e.attrs,"get",""),x(e);if((b=s.__cssModules)&&(b=b[t]))return b;if(n!==Zr&&ai(n,t))return l[t]=4,n[t];if(M=f.config.globalProperties,ai(M,t))return M[t]},set({_:e},t,n){const{data:i,setupState:a,ctx:u}=e;return G2(a,t)?(a[t]=n,!0):i!==Zr&&ai(i,t)?(i[t]=n,!0):ai(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:a,propsOptions:u}},l){let s;return!!n[l]||e!==Zr&&ai(e,l)||G2(t,l)||(s=u[0])&&ai(s,l)||ai(i,l)||ai(Z0,l)||ai(a.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ai(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},h8=Pi({},eI,{get(e,t){if(t!==Symbol.unscopables)return eI.get(e,t,e)},has(e,t){return t[0]!=="_"&&!jD(t)}});function d8(){return null}function f8(){return null}function p8(e){}function m8(e){}function g8(){return null}function y8(){}function v8(e,t){return null}function IM(){return N5().slots}function _8(){return N5().attrs}function N5(){const e=Za();return e.setupContext||(e.setupContext=yk(e))}function v1(e){return jn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function wi(e,t){const n=v1(e);for(const i in t){if(i.startsWith("__skip"))continue;let a=n[i];a?jn(a)||ir(a)?a=n[i]={type:a,default:t[i]}:a.default=t[i]:a===null&&(a=n[i]={default:t[i]}),a&&t[`__skip_${i}`]&&(a.skipFactory=!0)}return n}function Ki(e,t){return!e||!t?e||t:jn(e)&&jn(t)?e.concat(t):Pi({},v1(e),v1(t))}function b8(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function x8(e){const t=Za();let n=e();return oI(),lM(n)&&(n=n.catch(i=>{throw Dm(t),i})),[n,()=>Dm(t)]}let tI=!0;function A8(e){const t=MM(e),n=e.proxy,i=e.ctx;tI=!1,t.beforeCreate&&RE(t.beforeCreate,e,"bc");const{data:a,computed:u,methods:l,watch:s,provide:f,inject:y,created:x,beforeMount:b,mounted:M,beforeUpdate:A,updated:P,activated:L,deactivated:O,beforeDestroy:V,beforeUnmount:z,destroyed:B,unmounted:U,render:Z,renderTracked:te,renderTriggered:Y,errorCaptured:W,serverPrefetch:H,expose:ne,inheritAttrs:le,components:Q,directives:ce,filters:K}=t;if(y&&w8(y,i,null),l)for(const Be in l){const tt=l[Be];ir(tt)&&(i[Be]=tt.bind(n))}if(a){const Be=a.call(n,n);Ai(Be)&&(e.data=xu(Be))}if(tI=!0,u)for(const Be in u){const tt=u[Be],ut=ir(tt)?tt.bind(n,n):ir(tt.get)?tt.get.bind(n,n):gu,Tt=!ir(tt)&&ir(tt.set)?tt.set.bind(n):gu,Ge=Wt({get:ut,set:Tt});Object.defineProperty(i,Be,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:Ne=>Ge.value=Ne})}if(s)for(const Be in s)V5(s[Be],i,n,Be);if(f){const Be=ir(f)?f.call(n):f;Reflect.ownKeys(Be).forEach(tt=>{Uf(tt,Be[tt])})}x&&RE(x,e,"c");function Ue(Be,tt){jn(tt)?tt.forEach(ut=>Be(ut.bind(n))):tt&&Be(tt.bind(n))}if(Ue(D5,b),Ue(Er,M),Ue(xM,A),Ue(IA,P),Ue(P5,L),Ue(k5,O),Ue(F5,W),Ue(z5,te),Ue(O5,Y),Ue(yh,z),Ue(ha,U),Ue(R5,H),jn(ne))if(ne.length){const Be=e.exposed||(e.exposed={});ne.forEach(tt=>{Object.defineProperty(Be,tt,{get:()=>n[tt],set:ut=>n[tt]=ut})})}else e.exposed||(e.exposed={});Z&&e.render===gu&&(e.render=Z),le!=null&&(e.inheritAttrs=le),Q&&(e.components=Q),ce&&(e.directives=ce),H&&bM(e)}function w8(e,t,n=gu){jn(e)&&(e=nI(e));for(const i in e){const a=e[i];let u;Ai(a)?"default"in a?u=ca(a.from||i,a.default,!0):u=ca(a.from||i):u=ca(a),yi(u)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:l=>u.value=l}):t[i]=u}}function RE(e,t,n){Au(jn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function V5(e,t,n,i){let a=i.includes(".")?sk(n,i):()=>n[i];if(ji(e)){const u=t[e];ir(u)&&xi(a,u)}else if(ir(e))xi(a,e.bind(n));else if(Ai(e))if(jn(e))e.forEach(u=>V5(u,t,n,i));else{const u=ir(e.handler)?e.handler.bind(n):t[e.handler];ir(u)&&xi(a,u,e)}}function MM(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:a,optionsCache:u,config:{optionMergeStrategies:l}}=e.appContext,s=u.get(t);let f;return s?f=s:!a.length&&!n&&!i?f=t:(f={},a.length&&a.forEach(y=>kx(f,y,l,!0)),kx(f,t,l)),Ai(t)&&u.set(t,f),f}function kx(e,t,n,i=!1){const{mixins:a,extends:u}=t;u&&kx(e,u,n,!0),a&&a.forEach(l=>kx(e,l,n,!0));for(const l in t)if(!(i&&l==="expose")){const s=C8[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const C8={data:OE,props:zE,emits:zE,methods:k0,computed:k0,beforeCreate:To,created:To,beforeMount:To,mounted:To,beforeUpdate:To,updated:To,beforeDestroy:To,beforeUnmount:To,destroyed:To,unmounted:To,activated:To,deactivated:To,errorCaptured:To,serverPrefetch:To,components:k0,directives:k0,watch:M8,provide:OE,inject:I8};function OE(e,t){return t?e?function(){return Pi(ir(e)?e.call(this,this):e,ir(t)?t.call(this,this):t)}:t:e}function I8(e,t){return k0(nI(e),nI(t))}function nI(e){if(jn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function To(e,t){return e?[...new Set([].concat(e,t))]:t}function k0(e,t){return e?Pi(Object.create(null),e,t):t}function zE(e,t){return e?jn(e)&&jn(t)?[...new Set([...e,...t])]:Pi(Object.create(null),v1(e),v1(t??{})):t}function M8(e,t){if(!e)return t;if(!t)return e;const n=Pi(Object.create(null),e);for(const i in t)n[i]=To(e[i],t[i]);return n}function j5(){return{app:null,config:{isNativeTag:RD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let S8=0;function E8(e,t){return function(i,a=null){ir(i)||(i=Pi({},i)),a!=null&&!Ai(a)&&(a=null);const u=j5(),l=new WeakSet,s=[];let f=!1;const y=u.app={_uid:S8++,_component:i,_props:a,_container:null,_context:u,_instance:null,version:_k,get config(){return u.config},set config(x){},use(x,...b){return l.has(x)||(x&&ir(x.install)?(l.add(x),x.install(y,...b)):ir(x)&&(l.add(x),x(y,...b))),y},mixin(x){return u.mixins.includes(x)||u.mixins.push(x),y},component(x,b){return b?(u.components[x]=b,y):u.components[x]},directive(x,b){return b?(u.directives[x]=b,y):u.directives[x]},mount(x,b,M){if(!f){const A=y._ceVNode||je(i,a);return A.appContext=u,M===!0?M="svg":M===!1&&(M=void 0),b&&t?t(A,x):e(A,x,M),f=!0,y._container=x,x.__vue_app__=y,G1(A.component)}},onUnmount(x){s.push(x)},unmount(){f&&(Au(s,y._instance,16),e(null,y._container),delete y._container.__vue_app__)},provide(x,b){return u.provides[x]=b,y},runWithContext(x){const b=Im;Im=y;try{return x()}finally{Im=b}}};return y}}let Im=null;function Uf(e,t){if(oa){let n=oa.provides;const i=oa.parent&&oa.parent.provides;i===n&&(n=oa.provides=Object.create(i)),n[e]=t}}function ca(e,t,n=!1){const i=oa||ua;if(i||Im){const a=Im?Im._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&ir(t)?t.call(i&&i.proxy):t}}function T8(){return!!(oa||ua||Im)}const U5={},$5=()=>Object.create(U5),H5=e=>Object.getPrototypeOf(e)===U5;function P8(e,t,n,i=!1){const a={},u=$5();e.propsDefaults=Object.create(null),G5(e,t,a,u);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);n?e.props=i?a:mM(a):e.type.props?e.props=a:e.props=u,e.attrs=u}function k8(e,t,n,i){const{props:a,attrs:u,vnode:{patchFlag:l}}=e,s=Gr(a),[f]=e.propsOptions;let y=!1;if((i||l>0)&&!(l&16)){if(l&8){const x=e.vnode.dynamicProps;for(let b=0;b<x.length;b++){let M=x[b];if(MA(e.emitsOptions,M))continue;const A=t[M];if(f)if(ai(u,M))A!==u[M]&&(u[M]=A,y=!0);else{const P=Ha(M);a[P]=rI(f,s,P,A,e,!1)}else A!==u[M]&&(u[M]=A,y=!0)}}}else{G5(e,t,a,u)&&(y=!0);let x;for(const b in s)(!t||!ai(t,b)&&((x=hl(b))===b||!ai(t,x)))&&(f?n&&(n[b]!==void 0||n[x]!==void 0)&&(a[b]=rI(f,s,b,void 0,e,!0)):delete a[b]);if(u!==s)for(const b in u)(!t||!ai(t,b))&&(delete u[b],y=!0)}y&&ad(e.attrs,"set","")}function G5(e,t,n,i){const[a,u]=e.propsOptions;let l=!1,s;if(t)for(let f in t){if(Cy(f))continue;const y=t[f];let x;a&&ai(a,x=Ha(f))?!u||!u.includes(x)?n[x]=y:(s||(s={}))[x]=y:MA(e.emitsOptions,f)||(!(f in i)||y!==i[f])&&(i[f]=y,l=!0)}if(u){const f=Gr(n),y=s||Zr;for(let x=0;x<u.length;x++){const b=u[x];n[b]=rI(a,f,b,y[b],e,!ai(y,b))}}return l}function rI(e,t,n,i,a,u){const l=e[n];if(l!=null){const s=ai(l,"default");if(s&&i===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&ir(f)){const{propsDefaults:y}=a;if(n in y)i=y[n];else{const x=Dm(a);i=y[n]=f.call(null,t),x()}}else i=f;a.ce&&a.ce._setProp(n,i)}l[0]&&(u&&!s?i=!1:l[1]&&(i===""||i===hl(n))&&(i=!0))}return i}const L8=new WeakMap;function Z5(e,t,n=!1){const i=n?L8:t.propsCache,a=i.get(e);if(a)return a;const u=e.props,l={},s=[];let f=!1;if(!ir(e)){const x=b=>{f=!0;const[M,A]=Z5(b,t,!0);Pi(l,M),A&&s.push(...A)};!n&&t.mixins.length&&t.mixins.forEach(x),e.extends&&x(e.extends),e.mixins&&e.mixins.forEach(x)}if(!u&&!f)return Ai(e)&&i.set(e,Ay),Ay;if(jn(u))for(let x=0;x<u.length;x++){const b=Ha(u[x]);FE(b)&&(l[b]=Zr)}else if(u)for(const x in u){const b=Ha(x);if(FE(b)){const M=u[x],A=l[b]=jn(M)||ir(M)?{type:M}:Pi({},M),P=A.type;let L=!1,O=!0;if(jn(P))for(let V=0;V<P.length;++V){const z=P[V],B=ir(z)&&z.name;if(B==="Boolean"){L=!0;break}else B==="String"&&(O=!1)}else L=ir(P)&&P.name==="Boolean";A[0]=L,A[1]=O,(L||ai(A,"default"))&&s.push(b)}}const y=[l,s];return Ai(e)&&i.set(e,y),y}function FE(e){return e[0]!=="$"&&!Cy(e)}const W5=e=>e[0]==="_"||e==="$stable",SM=e=>jn(e)?e.map(cl):[cl(e)],D8=(e,t,n)=>{if(t._n)return t;const i=nt((...a)=>SM(t(...a)),n);return i._c=!1,i},q5=(e,t,n)=>{const i=e._ctx;for(const a in e){if(W5(a))continue;const u=e[a];if(ir(u))t[a]=D8(a,u,i);else if(u!=null){const l=SM(u);t[a]=()=>l}}},K5=(e,t)=>{const n=SM(t);e.slots.default=()=>n},Y5=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},R8=(e,t,n)=>{const i=e.slots=$5();if(e.vnode.shapeFlag&32){const a=t._;a?(Y5(i,t,n),n&&H3(i,"_",a,!0)):q5(t,i)}else t&&K5(e,t)},O8=(e,t,n)=>{const{vnode:i,slots:a}=e;let u=!0,l=Zr;if(i.shapeFlag&32){const s=t._;s?n&&s===1?u=!1:Y5(a,t,n):(u=!t.$stable,q5(t,a)),l=t}else t&&(K5(e,t),l={default:1});if(u)for(const s in a)!W5(s)&&l[s]==null&&delete a[s]},aa=uk;function X5(e){return J5(e)}function Q5(e){return J5(e,WR)}function J5(e,t){const n=mA();n.__VUE__=!0;const{insert:i,remove:a,patchProp:u,createElement:l,createText:s,createComment:f,setText:y,setElementText:x,parentNode:b,nextSibling:M,setScopeId:A=gu,insertStaticContent:P}=e,L=(Ie,$,Te,Oe=null,ye=null,pe=null,Fe=void 0,rt=null,at=!!$.dynamicChildren)=>{if(Ie===$)return;Ie&&!oc(Ie,$)&&(Oe=pt(Ie),Ne(Ie,ye,pe,!0),Ie=null),$.patchFlag===-2&&(at=!1,$.dynamicChildren=null);const{type:Ve,ref:Mt,shapeFlag:wt}=$;switch(Ve){case $f:O(Ie,$,Te,Oe);break;case Hs:V(Ie,$,Te,Oe);break;case Mm:Ie==null&&z($,Te,Oe,Fe);break;case Fn:Q(Ie,$,Te,Oe,ye,pe,Fe,rt,at);break;default:wt&1?Z(Ie,$,Te,Oe,ye,pe,Fe,rt,at):wt&6?ce(Ie,$,Te,Oe,ye,pe,Fe,rt,at):(wt&64||wt&128)&&Ve.process(Ie,$,Te,Oe,ye,pe,Fe,rt,at,Pt)}Mt!=null&&ye&&y1(Mt,Ie&&Ie.ref,pe,$||Ie,!$)},O=(Ie,$,Te,Oe)=>{if(Ie==null)i($.el=s($.children),Te,Oe);else{const ye=$.el=Ie.el;$.children!==Ie.children&&y(ye,$.children)}},V=(Ie,$,Te,Oe)=>{Ie==null?i($.el=f($.children||""),Te,Oe):$.el=Ie.el},z=(Ie,$,Te,Oe)=>{[Ie.el,Ie.anchor]=P(Ie.children,$,Te,Oe,Ie.el,Ie.anchor)},B=({el:Ie,anchor:$},Te,Oe)=>{let ye;for(;Ie&&Ie!==$;)ye=M(Ie),i(Ie,Te,Oe),Ie=ye;i($,Te,Oe)},U=({el:Ie,anchor:$})=>{let Te;for(;Ie&&Ie!==$;)Te=M(Ie),a(Ie),Ie=Te;a($)},Z=(Ie,$,Te,Oe,ye,pe,Fe,rt,at)=>{$.type==="svg"?Fe="svg":$.type==="math"&&(Fe="mathml"),Ie==null?te($,Te,Oe,ye,pe,Fe,rt,at):H(Ie,$,ye,pe,Fe,rt,at)},te=(Ie,$,Te,Oe,ye,pe,Fe,rt)=>{let at,Ve;const{props:Mt,shapeFlag:wt,transition:At,dirs:Gt}=Ie;if(at=Ie.el=l(Ie.type,pe,Mt&&Mt.is,Mt),wt&8?x(at,Ie.children):wt&16&&W(Ie.children,at,null,Oe,ye,Z2(Ie,pe),Fe,rt),Gt&&nh(Ie,null,Oe,"created"),Y(at,Ie,Ie.scopeId,Fe,Oe),Mt){for(const pn in Mt)pn!=="value"&&!Cy(pn)&&u(at,pn,null,Mt[pn],pe,Oe);"value"in Mt&&u(at,"value",null,Mt.value,pe),(Ve=Mt.onVnodeBeforeMount)&&ll(Ve,Oe,Ie)}Gt&&nh(Ie,null,Oe,"beforeMount");const dn=ek(ye,At);dn&&At.beforeEnter(at),i(at,$,Te),((Ve=Mt&&Mt.onVnodeMounted)||dn||Gt)&&aa(()=>{Ve&&ll(Ve,Oe,Ie),dn&&At.enter(at),Gt&&nh(Ie,null,Oe,"mounted")},ye)},Y=(Ie,$,Te,Oe,ye)=>{if(Te&&A(Ie,Te),Oe)for(let pe=0;pe<Oe.length;pe++)A(Ie,Oe[pe]);if(ye){let pe=ye.subTree;if($===pe||Dx(pe.type)&&(pe.ssContent===$||pe.ssFallback===$)){const Fe=ye.vnode;Y(Ie,Fe,Fe.scopeId,Fe.slotScopeIds,ye.parent)}}},W=(Ie,$,Te,Oe,ye,pe,Fe,rt,at=0)=>{for(let Ve=at;Ve<Ie.length;Ve++){const Mt=Ie[Ve]=rt?Pf(Ie[Ve]):cl(Ie[Ve]);L(null,Mt,$,Te,Oe,ye,pe,Fe,rt)}},H=(Ie,$,Te,Oe,ye,pe,Fe)=>{const rt=$.el=Ie.el;let{patchFlag:at,dynamicChildren:Ve,dirs:Mt}=$;at|=Ie.patchFlag&16;const wt=Ie.props||Zr,At=$.props||Zr;let Gt;if(Te&&cm(Te,!1),(Gt=At.onVnodeBeforeUpdate)&&ll(Gt,Te,$,Ie),Mt&&nh($,Ie,Te,"beforeUpdate"),Te&&cm(Te,!0),(wt.innerHTML&&At.innerHTML==null||wt.textContent&&At.textContent==null)&&x(rt,""),Ve?ne(Ie.dynamicChildren,Ve,rt,Te,Oe,Z2($,ye),pe):Fe||tt(Ie,$,rt,null,Te,Oe,Z2($,ye),pe,!1),at>0){if(at&16)le(rt,wt,At,Te,ye);else if(at&2&&wt.class!==At.class&&u(rt,"class",null,At.class,ye),at&4&&u(rt,"style",wt.style,At.style,ye),at&8){const dn=$.dynamicProps;for(let pn=0;pn<dn.length;pn++){const ct=dn[pn],mt=wt[ct],_t=At[ct];(_t!==mt||ct==="value")&&u(rt,ct,mt,_t,ye,Te)}}at&1&&Ie.children!==$.children&&x(rt,$.children)}else!Fe&&Ve==null&&le(rt,wt,At,Te,ye);((Gt=At.onVnodeUpdated)||Mt)&&aa(()=>{Gt&&ll(Gt,Te,$,Ie),Mt&&nh($,Ie,Te,"updated")},Oe)},ne=(Ie,$,Te,Oe,ye,pe,Fe)=>{for(let rt=0;rt<$.length;rt++){const at=Ie[rt],Ve=$[rt],Mt=at.el&&(at.type===Fn||!oc(at,Ve)||at.shapeFlag&70)?b(at.el):Te;L(at,Ve,Mt,null,Oe,ye,pe,Fe,!0)}},le=(Ie,$,Te,Oe,ye)=>{if($!==Te){if($!==Zr)for(const pe in $)!Cy(pe)&&!(pe in Te)&&u(Ie,pe,$[pe],null,ye,Oe);for(const pe in Te){if(Cy(pe))continue;const Fe=Te[pe],rt=$[pe];Fe!==rt&&pe!=="value"&&u(Ie,pe,rt,Fe,ye,Oe)}"value"in Te&&u(Ie,"value",$.value,Te.value,ye)}},Q=(Ie,$,Te,Oe,ye,pe,Fe,rt,at)=>{const Ve=$.el=Ie?Ie.el:s(""),Mt=$.anchor=Ie?Ie.anchor:s("");let{patchFlag:wt,dynamicChildren:At,slotScopeIds:Gt}=$;Gt&&(rt=rt?rt.concat(Gt):Gt),Ie==null?(i(Ve,Te,Oe),i(Mt,Te,Oe),W($.children||[],Te,Mt,ye,pe,Fe,rt,at)):wt>0&&wt&64&&At&&Ie.dynamicChildren?(ne(Ie.dynamicChildren,At,Te,ye,pe,Fe,rt),($.key!=null||ye&&$===ye.subTree)&&EM(Ie,$,!0)):tt(Ie,$,Te,Mt,ye,pe,Fe,rt,at)},ce=(Ie,$,Te,Oe,ye,pe,Fe,rt,at)=>{$.slotScopeIds=rt,Ie==null?$.shapeFlag&512?ye.ctx.activate($,Te,Oe,Fe,at):K($,Te,Oe,ye,pe,Fe,at):Le(Ie,$,at)},K=(Ie,$,Te,Oe,ye,pe,Fe)=>{const rt=Ie.component=fk(Ie,Oe,ye);if($1(Ie)&&(rt.ctx.renderer=Pt),mk(rt,!1,Fe),rt.asyncDep){if(ye&&ye.registerDep(rt,Ue,Fe),!Ie.el){const at=rt.subTree=je(Hs);V(null,at,$,Te)}}else Ue(rt,Ie,$,Te,ye,pe,Fe)},Le=(Ie,$,Te)=>{const Oe=$.component=Ie.component;if($8(Ie,$,Te))if(Oe.asyncDep&&!Oe.asyncResolved){Be(Oe,$,Te);return}else Oe.next=$,Oe.update();else $.el=Ie.el,Oe.vnode=$},Ue=(Ie,$,Te,Oe,ye,pe,Fe)=>{const rt=()=>{if(Ie.isMounted){let{next:wt,bu:At,u:Gt,parent:dn,vnode:pn}=Ie;{const qt=tk(Ie);if(qt){wt&&(wt.el=pn.el,Be(Ie,wt,Fe)),qt.asyncDep.then(()=>{Ie.isUnmounted||rt()});return}}let ct=wt,mt;cm(Ie,!1),wt?(wt.el=pn.el,Be(Ie,wt,Fe)):wt=pn,At&&Iy(At),(mt=wt.props&&wt.props.onVnodeBeforeUpdate)&&ll(mt,dn,wt,pn),cm(Ie,!0);const _t=ax(Ie),jt=Ie.subTree;Ie.subTree=_t,L(jt,_t,b(jt.el),pt(jt),Ie,ye,pe),wt.el=_t.el,ct===null&&SA(Ie,_t.el),Gt&&aa(Gt,ye),(mt=wt.props&&wt.props.onVnodeUpdated)&&aa(()=>ll(mt,dn,wt,pn),ye)}else{let wt;const{el:At,props:Gt}=$,{bm:dn,m:pn,parent:ct,root:mt,type:_t}=Ie,jt=jf($);if(cm(Ie,!1),dn&&Iy(dn),!jt&&(wt=Gt&&Gt.onVnodeBeforeMount)&&ll(wt,ct,$),cm(Ie,!0),At&&un){const qt=()=>{Ie.subTree=ax(Ie),un(At,Ie.subTree,Ie,ye,null)};jt&&_t.__asyncHydrate?_t.__asyncHydrate(At,Ie,qt):qt()}else{mt.ce&&mt.ce._injectChildStyle(_t);const qt=Ie.subTree=ax(Ie);L(null,qt,Te,Oe,Ie,ye,pe),$.el=qt.el}if(pn&&aa(pn,ye),!jt&&(wt=Gt&&Gt.onVnodeMounted)){const qt=$;aa(()=>ll(wt,ct,qt),ye)}($.shapeFlag&256||ct&&jf(ct.vnode)&&ct.vnode.shapeFlag&256)&&Ie.a&&aa(Ie.a,ye),Ie.isMounted=!0,$=Te=Oe=null}};Ie.scope.on();const at=Ie.effect=new c1(rt);Ie.scope.off();const Ve=Ie.update=at.run.bind(at),Mt=Ie.job=at.runIfDirty.bind(at);Mt.i=Ie,Mt.id=Ie.uid,at.scheduler=()=>yM(Mt),cm(Ie,!0),Ve()},Be=(Ie,$,Te)=>{$.component=Ie;const Oe=Ie.vnode.props;Ie.vnode=$,Ie.next=null,k8(Ie,$.props,Oe,Te),O8(Ie,$.children,Te),ep(),ME(Ie),tp()},tt=(Ie,$,Te,Oe,ye,pe,Fe,rt,at=!1)=>{const Ve=Ie&&Ie.children,Mt=Ie?Ie.shapeFlag:0,wt=$.children,{patchFlag:At,shapeFlag:Gt}=$;if(At>0){if(At&128){Tt(Ve,wt,Te,Oe,ye,pe,Fe,rt,at);return}else if(At&256){ut(Ve,wt,Te,Oe,ye,pe,Fe,rt,at);return}}Gt&8?(Mt&16&&en(Ve,ye,pe),wt!==Ve&&x(Te,wt)):Mt&16?Gt&16?Tt(Ve,wt,Te,Oe,ye,pe,Fe,rt,at):en(Ve,ye,pe,!0):(Mt&8&&x(Te,""),Gt&16&&W(wt,Te,Oe,ye,pe,Fe,rt,at))},ut=(Ie,$,Te,Oe,ye,pe,Fe,rt,at)=>{Ie=Ie||Ay,$=$||Ay;const Ve=Ie.length,Mt=$.length,wt=Math.min(Ve,Mt);let At;for(At=0;At<wt;At++){const Gt=$[At]=at?Pf($[At]):cl($[At]);L(Ie[At],Gt,Te,null,ye,pe,Fe,rt,at)}Ve>Mt?en(Ie,ye,pe,!0,!1,wt):W($,Te,Oe,ye,pe,Fe,rt,at,wt)},Tt=(Ie,$,Te,Oe,ye,pe,Fe,rt,at)=>{let Ve=0;const Mt=$.length;let wt=Ie.length-1,At=Mt-1;for(;Ve<=wt&&Ve<=At;){const Gt=Ie[Ve],dn=$[Ve]=at?Pf($[Ve]):cl($[Ve]);if(oc(Gt,dn))L(Gt,dn,Te,null,ye,pe,Fe,rt,at);else break;Ve++}for(;Ve<=wt&&Ve<=At;){const Gt=Ie[wt],dn=$[At]=at?Pf($[At]):cl($[At]);if(oc(Gt,dn))L(Gt,dn,Te,null,ye,pe,Fe,rt,at);else break;wt--,At--}if(Ve>wt){if(Ve<=At){const Gt=At+1,dn=Gt<Mt?$[Gt].el:Oe;for(;Ve<=At;)L(null,$[Ve]=at?Pf($[Ve]):cl($[Ve]),Te,dn,ye,pe,Fe,rt,at),Ve++}}else if(Ve>At)for(;Ve<=wt;)Ne(Ie[Ve],ye,pe,!0),Ve++;else{const Gt=Ve,dn=Ve,pn=new Map;for(Ve=dn;Ve<=At;Ve++){const de=$[Ve]=at?Pf($[Ve]):cl($[Ve]);de.key!=null&&pn.set(de.key,Ve)}let ct,mt=0;const _t=At-dn+1;let jt=!1,qt=0;const Cn=new Array(_t);for(Ve=0;Ve<_t;Ve++)Cn[Ve]=0;for(Ve=Gt;Ve<=wt;Ve++){const de=Ie[Ve];if(mt>=_t){Ne(de,ye,pe,!0);continue}let ge;if(de.key!=null)ge=pn.get(de.key);else for(ct=dn;ct<=At;ct++)if(Cn[ct-dn]===0&&oc(de,$[ct])){ge=ct;break}ge===void 0?Ne(de,ye,pe,!0):(Cn[ge-dn]=Ve+1,ge>=qt?qt=ge:jt=!0,L(de,$[ge],Te,null,ye,pe,Fe,rt,at),mt++)}const Xe=jt?z8(Cn):Ay;for(ct=Xe.length-1,Ve=_t-1;Ve>=0;Ve--){const de=dn+Ve,ge=$[de],Ae=de+1<Mt?$[de+1].el:Oe;Cn[Ve]===0?L(null,ge,Te,Ae,ye,pe,Fe,rt,at):jt&&(ct<0||Ve!==Xe[ct]?Ge(ge,Te,Ae,2):ct--)}}},Ge=(Ie,$,Te,Oe,ye=null)=>{const{el:pe,type:Fe,transition:rt,children:at,shapeFlag:Ve}=Ie;if(Ve&6){Ge(Ie.component.subTree,$,Te,Oe);return}if(Ve&128){Ie.suspense.move($,Te,Oe);return}if(Ve&64){Fe.move(Ie,$,Te,Pt);return}if(Fe===Fn){i(pe,$,Te);for(let wt=0;wt<at.length;wt++)Ge(at[wt],$,Te,Oe);i(Ie.anchor,$,Te);return}if(Fe===Mm){B(Ie,$,Te);return}if(Oe!==2&&Ve&1&&rt)if(Oe===0)rt.beforeEnter(pe),i(pe,$,Te),aa(()=>rt.enter(pe),ye);else{const{leave:wt,delayLeave:At,afterLeave:Gt}=rt,dn=()=>i(pe,$,Te),pn=()=>{wt(pe,()=>{dn(),Gt&&Gt()})};At?At(pe,dn,pn):pn()}else i(pe,$,Te)},Ne=(Ie,$,Te,Oe=!1,ye=!1)=>{const{type:pe,props:Fe,ref:rt,children:at,dynamicChildren:Ve,shapeFlag:Mt,patchFlag:wt,dirs:At,cacheIndex:Gt}=Ie;if(wt===-2&&(ye=!1),rt!=null&&y1(rt,null,Te,Ie,!0),Gt!=null&&($.renderCache[Gt]=void 0),Mt&256){$.ctx.deactivate(Ie);return}const dn=Mt&1&&At,pn=!jf(Ie);let ct;if(pn&&(ct=Fe&&Fe.onVnodeBeforeUnmount)&&ll(ct,$,Ie),Mt&6)St(Ie.component,Te,Oe);else{if(Mt&128){Ie.suspense.unmount(Te,Oe);return}dn&&nh(Ie,null,$,"beforeUnmount"),Mt&64?Ie.type.remove(Ie,$,Te,Pt,Oe):Ve&&!Ve.hasOnce&&(pe!==Fn||wt>0&&wt&64)?en(Ve,$,Te,!1,!0):(pe===Fn&&wt&384||!ye&&Mt&16)&&en(at,$,Te),Oe&&Dt(Ie)}(pn&&(ct=Fe&&Fe.onVnodeUnmounted)||dn)&&aa(()=>{ct&&ll(ct,$,Ie),dn&&nh(Ie,null,$,"unmounted")},Te)},Dt=Ie=>{const{type:$,el:Te,anchor:Oe,transition:ye}=Ie;if($===Fn){Bt(Te,Oe);return}if($===Mm){U(Ie);return}const pe=()=>{a(Te),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(Ie.shapeFlag&1&&ye&&!ye.persisted){const{leave:Fe,delayLeave:rt}=ye,at=()=>Fe(Te,pe);rt?rt(Ie.el,pe,at):at()}else pe()},Bt=(Ie,$)=>{let Te;for(;Ie!==$;)Te=M(Ie),a(Ie),Ie=Te;a($)},St=(Ie,$,Te)=>{const{bum:Oe,scope:ye,job:pe,subTree:Fe,um:rt,m:at,a:Ve}=Ie;Lx(at),Lx(Ve),Oe&&Iy(Oe),ye.stop(),pe&&(pe.flags|=8,Ne(Fe,Ie,$,Te)),rt&&aa(rt,$),aa(()=>{Ie.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&Ie.asyncDep&&!Ie.asyncResolved&&Ie.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},en=(Ie,$,Te,Oe=!1,ye=!1,pe=0)=>{for(let Fe=pe;Fe<Ie.length;Fe++)Ne(Ie[Fe],$,Te,Oe,ye)},pt=Ie=>{if(Ie.shapeFlag&6)return pt(Ie.component.subTree);if(Ie.shapeFlag&128)return Ie.suspense.next();const $=M(Ie.anchor||Ie.el),Te=$&&$[A5];return Te?M(Te):$};let ft=!1;const ot=(Ie,$,Te)=>{Ie==null?$._vnode&&Ne($._vnode,null,null,!0):L($._vnode||null,Ie,$,null,null,null,Te),$._vnode=Ie,ft||(ft=!0,ME(),Px(),ft=!1)},Pt={p:L,um:Ne,m:Ge,r:Dt,mt:K,mc:W,pc:tt,pbc:ne,n:pt,o:e};let Lt,un;return t&&([Lt,un]=t(Pt)),{render:ot,hydrate:Lt,createApp:E8(ot,Lt)}}function Z2({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function cm({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ek(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function EM(e,t,n=!1){const i=e.children,a=t.children;if(jn(i)&&jn(a))for(let u=0;u<i.length;u++){const l=i[u];let s=a[u];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[u]=Pf(a[u]),s.el=l.el),!n&&s.patchFlag!==-2&&EM(l,s)),s.type===$f&&(s.el=l.el)}}function z8(e){const t=e.slice(),n=[0];let i,a,u,l,s;const f=e.length;for(i=0;i<f;i++){const y=e[i];if(y!==0){if(a=n[n.length-1],e[a]<y){t[i]=a,n.push(i);continue}for(u=0,l=n.length-1;u<l;)s=u+l>>1,e[n[s]]<y?u=s+1:l=s;y<e[n[u]]&&(u>0&&(t[i]=n[u-1]),n[u]=i)}}for(u=n.length,l=n[u-1];u-- >0;)n[u]=l,l=t[l];return n}function tk(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tk(t)}function Lx(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const nk=Symbol.for("v-scx"),rk=()=>ca(nk);function TM(e,t){return H1(e,null,t)}function F8(e,t){return H1(e,null,{flush:"post"})}function ik(e,t){return H1(e,null,{flush:"sync"})}function xi(e,t,n){return H1(e,t,n)}function H1(e,t,n=Zr){const{immediate:i,deep:a,flush:u,once:l}=n,s=Pi({},n),f=t&&i||!t&&u!=="post";let y;if(Oy){if(u==="sync"){const A=rk();y=A.__watcherHandles||(A.__watcherHandles=[])}else if(!f){const A=()=>{};return A.stop=gu,A.resume=gu,A.pause=gu,A}}const x=oa;s.call=(A,P,L)=>Au(A,x,P,L);let b=!1;u==="post"?s.scheduler=A=>{aa(A,x&&x.suspense)}:u!=="sync"&&(b=!0,s.scheduler=(A,P)=>{P?A():yM(A)}),s.augmentJob=A=>{t&&(A.flags|=4),b&&(A.flags|=2,x&&(A.id=x.uid,A.i=x))};const M=PR(e,t,s);return Oy&&(y?y.push(M):f&&M()),M}function B8(e,t,n){const i=this.proxy,a=ji(e)?e.includes(".")?sk(i,e):()=>i[e]:e.bind(i,i);let u;ir(t)?u=t:(u=t.handler,n=t);const l=Dm(this),s=H1(a,u.bind(i),n);return l(),s}function sk(e,t){const n=t.split(".");return()=>{let i=e;for(let a=0;a<n.length&&i;a++)i=i[n[a]];return i}}function Zs(e,t,n=Zr){const i=Za(),a=Ha(t),u=hl(t),l=ak(e,a),s=f5((f,y)=>{let x,b=Zr,M;return ik(()=>{const A=e[a];Do(x,A)&&(x=A,y())}),{get(){return f(),n.get?n.get(x):x},set(A){const P=n.set?n.set(A):A;if(!Do(P,x)&&!(b!==Zr&&Do(A,b)))return;const L=i.vnode.props;L&&(t in L||a in L||u in L)&&(`onUpdate:${t}`in L||`onUpdate:${a}`in L||`onUpdate:${u}`in L)||(x=A,y()),i.emit(`update:${t}`,P),Do(A,P)&&Do(A,b)&&!Do(P,M)&&y(),b=A,M=P}}});return s[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?l||Zr:s,done:!1}:{done:!0}}}},s}const ak=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ha(t)}Modifiers`]||e[`${hl(t)}Modifiers`];function N8(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Zr;let a=n;const u=t.startsWith("update:"),l=u&&ak(i,t.slice(7));l&&(l.trim&&(a=n.map(x=>ji(x)?x.trim():x)),l.number&&(a=n.map(Ix)));let s,f=i[s=U0(t)]||i[s=U0(Ha(t))];!f&&u&&(f=i[s=U0(hl(t))]),f&&Au(f,e,6,a);const y=i[s+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Au(y,e,6,a)}}function ok(e,t,n=!1){const i=t.emitsCache,a=i.get(e);if(a!==void 0)return a;const u=e.emits;let l={},s=!1;if(!ir(e)){const f=y=>{const x=ok(y,t,!0);x&&(s=!0,Pi(l,x))};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!u&&!s?(Ai(e)&&i.set(e,null),null):(jn(u)?u.forEach(f=>l[f]=null):Pi(l,u),Ai(e)&&i.set(e,l),l)}function MA(e,t){return!e||!V1(t)?!1:(t=t.slice(2).replace(/Once$/,""),ai(e,t[0].toLowerCase()+t.slice(1))||ai(e,hl(t))||ai(e,t))}function ax(e){const{type:t,vnode:n,proxy:i,withProxy:a,propsOptions:[u],slots:l,attrs:s,emit:f,render:y,renderCache:x,props:b,data:M,setupState:A,ctx:P,inheritAttrs:L}=e,O=m1(e);let V,z;try{if(n.shapeFlag&4){const U=a||i,Z=U;V=cl(y.call(Z,U,x,b,A,M,P)),z=s}else{const U=t;V=cl(U.length>1?U(b,{attrs:s,slots:l,emit:f}):U(b,null)),z=t.props?s:j8(s)}}catch(U){W0.length=0,$m(U,e,1),V=je(Hs)}let B=V;if(z&&L!==!1){const U=Object.keys(z),{shapeFlag:Z}=B;U.length&&Z&7&&(u&&U.some(aM)&&(z=U8(z,u)),B=hh(B,z,!1,!0))}return n.dirs&&(B=hh(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&dd(B,n.transition),V=B,m1(O),V}function V8(e,t=!0){let n;for(let i=0;i<e.length;i++){const a=e[i];if(fd(a)){if(a.type!==Hs||a.children==="v-if"){if(n)return;n=a}}else return}return n}const j8=e=>{let t;for(const n in e)(n==="class"||n==="style"||V1(n))&&((t||(t={}))[n]=e[n]);return t},U8=(e,t)=>{const n={};for(const i in e)(!aM(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function $8(e,t,n){const{props:i,children:a,component:u}=e,{props:l,children:s,patchFlag:f}=t,y=u.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return i?BE(i,l,y):!!l;if(f&8){const x=t.dynamicProps;for(let b=0;b<x.length;b++){const M=x[b];if(l[M]!==i[M]&&!MA(y,M))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:i===l?!1:i?l?BE(i,l,y):!0:!!l;return!1}function BE(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let a=0;a<i.length;a++){const u=i[a];if(t[u]!==e[u]&&!MA(n,u))return!0}return!1}function SA({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const Dx=e=>e.__isSuspense;let iI=0;const H8={name:"Suspense",__isSuspense:!0,process(e,t,n,i,a,u,l,s,f,y){if(e==null)Z8(t,n,i,a,u,l,s,f,y);else{if(u&&u.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}W8(e,t,n,i,a,l,s,f,y)}},hydrate:q8,normalize:K8},G8=H8;function _1(e,t){const n=e.props&&e.props[t];ir(n)&&n()}function Z8(e,t,n,i,a,u,l,s,f){const{p:y,o:{createElement:x}}=f,b=x("div"),M=e.suspense=lk(e,a,i,t,b,n,u,l,s,f);y(null,M.pendingBranch=e.ssContent,b,null,i,M,u,l),M.deps>0?(_1(e,"onPending"),_1(e,"onFallback"),y(null,e.ssFallback,t,n,i,null,u,l),Sy(M,e.ssFallback)):M.resolve(!1,!0)}function W8(e,t,n,i,a,u,l,s,{p:f,um:y,o:{createElement:x}}){const b=t.suspense=e.suspense;b.vnode=t,t.el=e.el;const M=t.ssContent,A=t.ssFallback,{activeBranch:P,pendingBranch:L,isInFallback:O,isHydrating:V}=b;if(L)b.pendingBranch=M,oc(M,L)?(f(L,M,b.hiddenContainer,null,a,b,u,l,s),b.deps<=0?b.resolve():O&&(V||(f(P,A,n,i,a,null,u,l,s),Sy(b,A)))):(b.pendingId=iI++,V?(b.isHydrating=!1,b.activeBranch=L):y(L,a,b),b.deps=0,b.effects.length=0,b.hiddenContainer=x("div"),O?(f(null,M,b.hiddenContainer,null,a,b,u,l,s),b.deps<=0?b.resolve():(f(P,A,n,i,a,null,u,l,s),Sy(b,A))):P&&oc(M,P)?(f(P,M,n,i,a,b,u,l,s),b.resolve(!0)):(f(null,M,b.hiddenContainer,null,a,b,u,l,s),b.deps<=0&&b.resolve()));else if(P&&oc(M,P))f(P,M,n,i,a,b,u,l,s),Sy(b,M);else if(_1(t,"onPending"),b.pendingBranch=M,M.shapeFlag&512?b.pendingId=M.component.suspenseId:b.pendingId=iI++,f(null,M,b.hiddenContainer,null,a,b,u,l,s),b.deps<=0)b.resolve();else{const{timeout:z,pendingId:B}=b;z>0?setTimeout(()=>{b.pendingId===B&&b.fallback(A)},z):z===0&&b.fallback(A)}}function lk(e,t,n,i,a,u,l,s,f,y,x=!1){const{p:b,m:M,um:A,n:P,o:{parentNode:L,remove:O}}=y;let V;const z=Y8(e);z&&t&&t.pendingBranch&&(V=t.pendingId,t.deps++);const B=e.props?Mx(e.props.timeout):void 0,U=u,Z={vnode:e,parent:t,parentComponent:n,namespace:l,container:i,hiddenContainer:a,deps:0,pendingId:iI++,timeout:typeof B=="number"?B:-1,activeBranch:null,pendingBranch:null,isInFallback:!x,isHydrating:x,isUnmounted:!1,effects:[],resolve(te=!1,Y=!1){const{vnode:W,activeBranch:H,pendingBranch:ne,pendingId:le,effects:Q,parentComponent:ce,container:K}=Z;let Le=!1;Z.isHydrating?Z.isHydrating=!1:te||(Le=H&&ne.transition&&ne.transition.mode==="out-in",Le&&(H.transition.afterLeave=()=>{le===Z.pendingId&&(M(ne,K,u===U?P(H):u,0),f1(Q))}),H&&(L(H.el)===K&&(u=P(H)),A(H,ce,Z,!0)),Le||M(ne,K,u,0)),Sy(Z,ne),Z.pendingBranch=null,Z.isInFallback=!1;let Ue=Z.parent,Be=!1;for(;Ue;){if(Ue.pendingBranch){Ue.effects.push(...Q),Be=!0;break}Ue=Ue.parent}!Be&&!Le&&f1(Q),Z.effects=[],z&&t&&t.pendingBranch&&V===t.pendingId&&(t.deps--,t.deps===0&&!Y&&t.resolve()),_1(W,"onResolve")},fallback(te){if(!Z.pendingBranch)return;const{vnode:Y,activeBranch:W,parentComponent:H,container:ne,namespace:le}=Z;_1(Y,"onFallback");const Q=P(W),ce=()=>{Z.isInFallback&&(b(null,te,ne,Q,H,null,le,s,f),Sy(Z,te))},K=te.transition&&te.transition.mode==="out-in";K&&(W.transition.afterLeave=ce),Z.isInFallback=!0,A(W,H,null,!0),K||ce()},move(te,Y,W){Z.activeBranch&&M(Z.activeBranch,te,Y,W),Z.container=te},next(){return Z.activeBranch&&P(Z.activeBranch)},registerDep(te,Y,W){const H=!!Z.pendingBranch;H&&Z.deps++;const ne=te.vnode.el;te.asyncDep.catch(le=>{$m(le,te,0)}).then(le=>{if(te.isUnmounted||Z.isUnmounted||Z.pendingId!==te.suspenseId)return;te.asyncResolved=!0;const{vnode:Q}=te;lI(te,le,!1),ne&&(Q.el=ne);const ce=!ne&&te.subTree.el;Y(te,Q,L(ne||te.subTree.el),ne?null:P(te.subTree),Z,l,W),ce&&O(ce),SA(te,Q.el),H&&--Z.deps===0&&Z.resolve()})},unmount(te,Y){Z.isUnmounted=!0,Z.activeBranch&&A(Z.activeBranch,n,te,Y),Z.pendingBranch&&A(Z.pendingBranch,n,te,Y)}};return Z}function q8(e,t,n,i,a,u,l,s,f){const y=t.suspense=lk(t,i,n,e.parentNode,document.createElement("div"),null,a,u,l,s,!0),x=f(e,y.pendingBranch=t.ssContent,n,y,u,l);return y.deps===0&&y.resolve(!1,!0),x}function K8(e){const{shapeFlag:t,children:n}=e,i=t&32;e.ssContent=NE(i?n.default:n),e.ssFallback=i?NE(n.fallback):je(Hs)}function NE(e){let t;if(ir(e)){const n=Lm&&e._c;n&&(e._d=!1,xe()),e=e(),n&&(e._d=!0,t=ao,ck())}return jn(e)&&(e=V8(e)),e=cl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function uk(e,t){t&&t.pendingBranch?jn(e)?t.effects.push(...e):t.effects.push(e):f1(e)}function Sy(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e;let a=t.el;for(;!a&&t.component;)t=t.component.subTree,a=t.el;n.el=a,i&&i.subTree===n&&(i.vnode.el=a,SA(i,a))}function Y8(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Fn=Symbol.for("v-fgt"),$f=Symbol.for("v-txt"),Hs=Symbol.for("v-cmt"),Mm=Symbol.for("v-stc"),W0=[];let ao=null;function xe(e=!1){W0.push(ao=e?null:[])}function ck(){W0.pop(),ao=W0[W0.length-1]||null}let Lm=1;function sI(e,t=!1){Lm+=e,e<0&&ao&&t&&(ao.hasOnce=!0)}function hk(e){return e.dynamicChildren=Lm>0?ao||Ay:null,ck(),Lm>0&&ao&&ao.push(e),e}function et(e,t,n,i,a,u){return hk(Pe(e,t,n,i,a,u,!0))}function Rt(e,t,n,i,a){return hk(je(e,t,n,i,a,!0))}function fd(e){return e?e.__v_isVNode===!0:!1}function oc(e,t){return e.type===t.type&&e.key===t.key}function X8(e){}const dk=({key:e})=>e??null,ox=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ji(e)||yi(e)||ir(e)?{i:ua,r:e,k:t,f:!!n}:e:null);function Pe(e,t=null,n=null,i=0,a=null,u=e===Fn?0:1,l=!1,s=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&dk(t),ref:t&&ox(t),scopeId:AA,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:i,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:ua};return s?(PM(f,n),u&128&&e.normalize(f)):n&&(f.shapeFlag|=ji(n)?8:16),Lm>0&&!l&&ao&&(f.patchFlag>0||u&6)&&f.patchFlag!==32&&ao.push(f),f}const je=Q8;function Q8(e,t=null,n=null,i=0,a=null,u=!1){if((!e||e===B5)&&(e=Hs),fd(e)){const s=hh(e,t,!0);return n&&PM(s,n),Lm>0&&!u&&ao&&(s.shapeFlag&6?ao[ao.indexOf(e)]=s:ao.push(s)),s.patchFlag=-2,s}if(sO(e)&&(e=e.__vccOpts),t){t=Di(t);let{class:s,style:f}=t;s&&!ji(s)&&(t.class=ii(s)),Ai(f)&&(xA(f)&&!jn(f)&&(f=Pi({},f)),t.style=qr(f))}const l=ji(e)?1:Dx(e)?128:w5(e)?64:Ai(e)?4:ir(e)?2:0;return Pe(e,t,n,i,a,l,u,!0)}function Di(e){return e?xA(e)||H5(e)?Pi({},e):e:null}function hh(e,t,n=!1,i=!1){const{props:a,ref:u,patchFlag:l,children:s,transition:f}=e,y=t?Qn(a||{},t):a,x={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&dk(y),ref:t&&t.ref?n&&u?jn(u)?u.concat(ox(t)):[u,ox(t)]:ox(t):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fn?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&hh(e.ssContent),ssFallback:e.ssFallback&&hh(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&i&&dd(x,f.clone(x)),x}function Wr(e=" ",t=0){return je($f,null,e,t)}function EA(e,t){const n=je(Mm,null,e);return n.staticCount=t,n}function rn(e="",t=!1){return t?(xe(),Rt(Hs,null,e)):je(Hs,null,e)}function cl(e){return e==null||typeof e=="boolean"?je(Hs):jn(e)?je(Fn,null,e.slice()):fd(e)?Pf(e):je($f,null,String(e))}function Pf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:hh(e)}function PM(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(jn(t))n=16;else if(typeof t=="object")if(i&65){const a=t.default;a&&(a._c&&(a._d=!1),PM(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!H5(t)?t._ctx=ua:a===3&&ua&&(ua.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ir(t)?(t={default:t,_ctx:ua},n=32):(t=String(t),i&64?(n=16,t=[Wr(t)]):n=8);e.children=t,e.shapeFlag|=n}function Qn(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const a in i)if(a==="class")t.class!==i.class&&(t.class=ii([t.class,i.class]));else if(a==="style")t.style=qr([t.style,i.style]);else if(V1(a)){const u=t[a],l=i[a];l&&u!==l&&!(jn(u)&&u.includes(l))&&(t[a]=u?[].concat(u,l):l)}else a!==""&&(t[a]=i[a])}return t}function ll(e,t,n,i=null){Au(e,t,7,[n,i])}const J8=j5();let eO=0;function fk(e,t,n){const i=e.type,a=(t?t.appContext:e.appContext)||J8,u={uid:eO++,vnode:e,type:i,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new cM(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Z5(i,a),emitsOptions:ok(i,a),emit:null,emitted:null,propsDefaults:Zr,inheritAttrs:i.inheritAttrs,ctx:Zr,data:Zr,props:Zr,attrs:Zr,slots:Zr,refs:Zr,setupState:Zr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=N8.bind(null,u),e.ce&&e.ce(u),u}let oa=null;const Za=()=>oa||ua;let Rx,aI;{const e=mA(),t=(n,i)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(i),u=>{a.length>1?a.forEach(l=>l(u)):a[0](u)}};Rx=t("__VUE_INSTANCE_SETTERS__",n=>oa=n),aI=t("__VUE_SSR_SETTERS__",n=>Oy=n)}const Dm=e=>{const t=oa;return Rx(e),e.scope.on(),()=>{e.scope.off(),Rx(t)}},oI=()=>{oa&&oa.scope.off(),Rx(null)};function pk(e){return e.vnode.shapeFlag&4}let Oy=!1;function mk(e,t=!1,n=!1){t&&aI(t);const{props:i,children:a}=e.vnode,u=pk(e);P8(e,i,u,t),R8(e,a,n);const l=u?tO(e,t):void 0;return t&&aI(!1),l}function tO(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,eI);const{setup:i}=n;if(i){ep();const a=e.setupContext=i.length>1?yk(e):null,u=Dm(e),l=Xy(i,e,0,[e.props,a]),s=lM(l);if(tp(),u(),(s||e.sp)&&!jf(e)&&bM(e),s){if(l.then(oI,oI),t)return l.then(f=>{lI(e,f,t)}).catch(f=>{$m(f,e,0)});e.asyncDep=l}else lI(e,l,t)}else gk(e,t)}function lI(e,t,n){ir(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ai(t)&&(e.setupState=gM(t)),gk(e,n)}let Ox,uI;function nO(e){Ox=e,uI=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,h8))}}const rO=()=>!Ox;function gk(e,t,n){const i=e.type;if(!e.render){if(!t&&Ox&&!i.render){const a=i.template||MM(e).template;if(a){const{isCustomElement:u,compilerOptions:l}=e.appContext.config,{delimiters:s,compilerOptions:f}=i,y=Pi(Pi({isCustomElement:u,delimiters:s},l),f);i.render=Ox(a,y)}}e.render=i.render||gu,uI&&uI(e)}{const a=Dm(e);ep();try{A8(e)}finally{tp(),a()}}}const iO={get(e,t){return ro(e,"get",""),e[t]}};function yk(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,iO),slots:e.slots,emit:e.emit,expose:t}}function G1(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(gM(c5(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Z0)return Z0[n](e)},has(t,n){return n in t||n in Z0}})):e.proxy}function cI(e,t=!0){return ir(e)?e.displayName||e.name:e.name||t&&e.__name}function sO(e){return ir(e)&&"__vccOpts"in e}const Wt=(e,t)=>MR(e,t,Oy);function ja(e,t,n){const i=arguments.length;return i===2?Ai(t)&&!jn(t)?fd(t)?je(e,null,[t]):je(e,t):je(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&fd(n)&&(n=[n]),je(e,t,n))}function aO(){}function oO(e,t,n,i){const a=n[i];if(a&&vk(a,e))return a;const u=t();return u.memo=e.slice(),u.cacheIndex=i,n[i]=u}function vk(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(Do(n[i],t[i]))return!1;return Lm>0&&ao&&ao.push(e),!0}const _k="3.5.13",lO=gu,uO=OR,cO=ry,hO=x5,dO={createComponentInstance:fk,setupComponent:mk,renderComponentRoot:ax,setCurrentRenderingInstance:m1,isVNode:fd,normalizeVNode:cl,getComponentPublicInstance:G1,ensureValidVNode:CM,pushWarningContext:kR,popWarningContext:LR},fO=dO,pO=null,mO=null,gO=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hI;const VE=typeof window<"u"&&window.trustedTypes;if(VE)try{hI=VE.createPolicy("vue",{createHTML:e=>e})}catch{}const bk=hI?e=>hI.createHTML(e):e=>e,yO="http://www.w3.org/2000/svg",vO="http://www.w3.org/1998/Math/MathML",sd=typeof document<"u"?document:null,jE=sd&&sd.createElement("template"),_O={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const a=t==="svg"?sd.createElementNS(yO,e):t==="mathml"?sd.createElementNS(vO,e):n?sd.createElement(e,{is:n}):sd.createElement(e);return e==="select"&&i&&i.multiple!=null&&a.setAttribute("multiple",i.multiple),a},createText:e=>sd.createTextNode(e),createComment:e=>sd.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>sd.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,a,u){const l=n?n.previousSibling:t.lastChild;if(a&&(a===u||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===u||!(a=a.nextSibling)););else{jE.innerHTML=bk(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const s=jE.content;if(i==="svg"||i==="mathml"){const f=s.firstChild;for(;f.firstChild;)s.appendChild(f.firstChild);s.removeChild(f)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Af="transition",_0="animation",zy=Symbol("_vtc"),xk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ak=Pi({},_M,xk),bO=e=>(e.displayName="Transition",e.props=Ak,e),wk=bO((e,{slots:t})=>ja(E5,Ck(e),t)),hm=(e,t=[])=>{jn(e)?e.forEach(n=>n(...t)):e&&e(...t)},UE=e=>e?jn(e)?e.some(t=>t.length>1):e.length>1:!1;function Ck(e){const t={};for(const Q in e)Q in xk||(t[Q]=e[Q]);if(e.css===!1)return t;const{name:n="v",type:i,duration:a,enterFromClass:u=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:f=u,appearActiveClass:y=l,appearToClass:x=s,leaveFromClass:b=`${n}-leave-from`,leaveActiveClass:M=`${n}-leave-active`,leaveToClass:A=`${n}-leave-to`}=e,P=xO(a),L=P&&P[0],O=P&&P[1],{onBeforeEnter:V,onEnter:z,onEnterCancelled:B,onLeave:U,onLeaveCancelled:Z,onBeforeAppear:te=V,onAppear:Y=z,onAppearCancelled:W=B}=t,H=(Q,ce,K,Le)=>{Q._enterCancelled=Le,Mf(Q,ce?x:s),Mf(Q,ce?y:l),K&&K()},ne=(Q,ce)=>{Q._isLeaving=!1,Mf(Q,b),Mf(Q,A),Mf(Q,M),ce&&ce()},le=Q=>(ce,K)=>{const Le=Q?Y:z,Ue=()=>H(ce,Q,K);hm(Le,[ce,Ue]),$E(()=>{Mf(ce,Q?f:u),Xc(ce,Q?x:s),UE(Le)||HE(ce,i,L,Ue)})};return Pi(t,{onBeforeEnter(Q){hm(V,[Q]),Xc(Q,u),Xc(Q,l)},onBeforeAppear(Q){hm(te,[Q]),Xc(Q,f),Xc(Q,y)},onEnter:le(!1),onAppear:le(!0),onLeave(Q,ce){Q._isLeaving=!0;const K=()=>ne(Q,ce);Xc(Q,b),Q._enterCancelled?(Xc(Q,M),dI()):(dI(),Xc(Q,M)),$E(()=>{Q._isLeaving&&(Mf(Q,b),Xc(Q,A),UE(U)||HE(Q,i,O,K))}),hm(U,[Q,K])},onEnterCancelled(Q){H(Q,!1,void 0,!0),hm(B,[Q])},onAppearCancelled(Q){H(Q,!0,void 0,!0),hm(W,[Q])},onLeaveCancelled(Q){ne(Q),hm(Z,[Q])}})}function xO(e){if(e==null)return null;if(Ai(e))return[W2(e.enter),W2(e.leave)];{const t=W2(e);return[t,t]}}function W2(e){return Mx(e)}function Xc(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[zy]||(e[zy]=new Set)).add(t)}function Mf(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[zy];n&&(n.delete(t),n.size||(e[zy]=void 0))}function $E(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let AO=0;function HE(e,t,n,i){const a=e._endId=++AO,u=()=>{a===e._endId&&i()};if(n!=null)return setTimeout(u,n);const{type:l,timeout:s,propCount:f}=Ik(e,t);if(!l)return i();const y=l+"end";let x=0;const b=()=>{e.removeEventListener(y,M),u()},M=A=>{A.target===e&&++x>=f&&b()};setTimeout(()=>{x<f&&b()},s+1),e.addEventListener(y,M)}function Ik(e,t){const n=window.getComputedStyle(e),i=P=>(n[P]||"").split(", "),a=i(`${Af}Delay`),u=i(`${Af}Duration`),l=GE(a,u),s=i(`${_0}Delay`),f=i(`${_0}Duration`),y=GE(s,f);let x=null,b=0,M=0;t===Af?l>0&&(x=Af,b=l,M=u.length):t===_0?y>0&&(x=_0,b=y,M=f.length):(b=Math.max(l,y),x=b>0?l>y?Af:_0:null,M=x?x===Af?u.length:f.length:0);const A=x===Af&&/\b(transform|all)(,|$)/.test(i(`${Af}Property`).toString());return{type:x,timeout:b,propCount:M,hasTransform:A}}function GE(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>ZE(n)+ZE(e[i])))}function ZE(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function dI(){return document.body.offsetHeight}function wO(e,t,n){const i=e[zy];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const zx=Symbol("_vod"),Mk=Symbol("_vsh"),Z1={beforeMount(e,{value:t},{transition:n}){e[zx]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):b0(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),b0(e,!0),i.enter(e)):i.leave(e,()=>{b0(e,!1)}):b0(e,t))},beforeUnmount(e,{value:t}){b0(e,t)}};function b0(e,t){e.style.display=t?e[zx]:"none",e[Mk]=!t}function CO(){Z1.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Sk=Symbol("");function IO(e){const t=Za();if(!t)return;const n=t.ut=(a=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(u=>Fx(u,a))},i=()=>{const a=e(t.proxy);t.ce?Fx(t.ce,a):fI(t.subTree,a),n(a)};xM(()=>{f1(i)}),Er(()=>{xi(i,gu,{flush:"post"});const a=new MutationObserver(i);a.observe(t.subTree.el.parentNode,{childList:!0}),ha(()=>a.disconnect())})}function fI(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{fI(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Fx(e.el,t);else if(e.type===Fn)e.children.forEach(n=>fI(n,t));else if(e.type===Mm){let{el:n,anchor:i}=e;for(;n&&(Fx(n,t),n!==i);)n=n.nextSibling}}function Fx(e,t){if(e.nodeType===1){const n=e.style;let i="";for(const a in t)n.setProperty(`--${a}`,t[a]),i+=`--${a}: ${t[a]};`;n[Sk]=i}}const MO=/(^|;)\s*display\s*:/;function SO(e,t,n){const i=e.style,a=ji(n);let u=!1;if(n&&!a){if(t)if(ji(t))for(const l of t.split(";")){const s=l.slice(0,l.indexOf(":")).trim();n[s]==null&&lx(i,s,"")}else for(const l in t)n[l]==null&&lx(i,l,"");for(const l in n)l==="display"&&(u=!0),lx(i,l,n[l])}else if(a){if(t!==n){const l=i[Sk];l&&(n+=";"+l),i.cssText=n,u=MO.test(n)}}else t&&e.removeAttribute("style");zx in e&&(e[zx]=u?i.display:"",e[Mk]&&(i.display="none"))}const WE=/\s*!important$/;function lx(e,t,n){if(jn(n))n.forEach(i=>lx(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=EO(e,t);WE.test(n)?e.setProperty(hl(i),n.replace(WE,""),"important"):e[i]=n}}const qE=["Webkit","Moz","ms"],q2={};function EO(e,t){const n=q2[t];if(n)return n;let i=Ha(t);if(i!=="filter"&&i in e)return q2[t]=i;i=j1(i);for(let a=0;a<qE.length;a++){const u=qE[a]+i;if(u in e)return q2[t]=u}return t}const KE="http://www.w3.org/1999/xlink";function YE(e,t,n,i,a,u=WD(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(KE,t.slice(6,t.length)):e.setAttributeNS(KE,t,n):n==null||u&&!G3(n)?e.removeAttribute(t):e.setAttribute(t,u?"":fc(n)?String(n):n)}function XE(e,t,n,i,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?bk(n):n);return}const u=e.tagName;if(t==="value"&&u!=="PROGRESS"&&!u.includes("-")){const s=u==="OPTION"?e.getAttribute("value")||"":e.value,f=n==null?e.type==="checkbox"?"on":"":String(n);(s!==f||!("_value"in e))&&(e.value=f),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=G3(n):n==null&&s==="string"?(n="",l=!0):s==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(a||t)}function ld(e,t,n,i){e.addEventListener(t,n,i)}function TO(e,t,n,i){e.removeEventListener(t,n,i)}const QE=Symbol("_vei");function PO(e,t,n,i,a=null){const u=e[QE]||(e[QE]={}),l=u[t];if(i&&l)l.value=i;else{const[s,f]=kO(t);if(i){const y=u[t]=RO(i,a);ld(e,s,y,f)}else l&&(TO(e,s,l,f),u[t]=void 0)}}const JE=/(?:Once|Passive|Capture)$/;function kO(e){let t;if(JE.test(e)){t={};let i;for(;i=e.match(JE);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hl(e.slice(2)),t]}let K2=0;const LO=Promise.resolve(),DO=()=>K2||(LO.then(()=>K2=0),K2=Date.now());function RO(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Au(OO(i,n.value),t,5,[i])};return n.value=e,n.attached=DO(),n}function OO(e,t){if(jn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>a=>!a._stopped&&i&&i(a))}else return t}const eT=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zO=(e,t,n,i,a,u)=>{const l=a==="svg";t==="class"?wO(e,i,l):t==="style"?SO(e,n,i):V1(t)?aM(t)||PO(e,t,n,i,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):FO(e,t,i,l))?(XE(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&YE(e,t,i,l,u,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ji(i))?XE(e,Ha(t),i,u,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),YE(e,t,i,l))};function FO(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&eT(t)&&ir(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return eT(t)&&ji(n)?!1:t in e}const tT={};/*! #__NO_SIDE_EFFECTS__ */function Ek(e,t,n){const i=An(e,t);fA(i)&&Pi(i,t);class a extends TA{constructor(l){super(i,l,n)}}return a.def=i,a}/*! #__NO_SIDE_EFFECTS__ */const BO=(e,t)=>Ek(e,t,Bk),NO=typeof HTMLElement<"u"?HTMLElement:class{};class TA extends NO{constructor(t,n={},i=Nx){super(),this._def=t,this._props=n,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==Nx?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof TA){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,fl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(i=>{for(const a of i)this._setAttr(a.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(i,a=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:u,styles:l}=i;let s;if(u&&!jn(u))for(const f in u){const y=u[f];(y===Number||y&&y.type===Number)&&(f in this._props&&(this._props[f]=Mx(this._props[f])),(s||(s=Object.create(null)))[Ha(f)]=!0)}this._numberProps=s,a&&this._resolveProps(i),this.shadowRoot&&this._applyStyles(l),this._mount(i)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(i=>t(this._def=i,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const i in n)ai(this,i)||Object.defineProperty(this,i,{get:()=>re(n[i])})}_resolveProps(t){const{props:n}=t,i=jn(n)?n:Object.keys(n||{});for(const a of Object.keys(this))a[0]!=="_"&&i.includes(a)&&this._setProp(a,this[a]);for(const a of i.map(Ha))Object.defineProperty(this,a,{get(){return this._getProp(a)},set(u){this._setProp(a,u,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let i=n?this.getAttribute(t):tT;const a=Ha(t);n&&this._numberProps&&this._numberProps[a]&&(i=Mx(i)),this._setProp(a,i,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,i=!0,a=!1){if(n!==this._props[t]&&(n===tT?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),a&&this._instance&&this._update(),i)){const u=this._ob;u&&u.disconnect(),n===!0?this.setAttribute(hl(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(hl(t),n+""):n||this.removeAttribute(hl(t)),u&&u.observe(this,{attributes:!0})}}_update(){Fk(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=je(this._def,Pi(t,this._props));return this._instance||(n.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const a=(u,l)=>{this.dispatchEvent(new CustomEvent(u,fA(l[0])?Pi({detail:l},l[0]):{detail:l}))};i.emit=(u,...l)=>{a(u,l),hl(u)!==u&&a(hl(u),l)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const i=this._nonce;for(let a=t.length-1;a>=0;a--){const u=document.createElement("style");i&&u.setAttribute("nonce",i),u.textContent=t[a],this.shadowRoot.prepend(u)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const i=n.nodeType===1&&n.getAttribute("slot")||"default";(t[i]||(t[i]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let i=0;i<t.length;i++){const a=t[i],u=a.getAttribute("name")||"default",l=this._slots[u],s=a.parentNode;if(l)for(const f of l){if(n&&f.nodeType===1){const y=n+"-s",x=document.createTreeWalker(f,1);f.setAttribute(y,"");let b;for(;b=x.nextNode();)b.setAttribute(y,"")}s.insertBefore(f,a)}else for(;a.firstChild;)s.insertBefore(a.firstChild,a);s.removeChild(a)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function Tk(e){const t=Za(),n=t&&t.ce;return n||null}function VO(){const e=Tk();return e&&e.shadowRoot}function jO(e="$style"){{const t=Za();if(!t)return Zr;const n=t.type.__cssModules;if(!n)return Zr;const i=n[e];return i||Zr}}const Pk=new WeakMap,kk=new WeakMap,Bx=Symbol("_moveCb"),nT=Symbol("_enterCb"),UO=e=>(delete e.props.mode,e),$O=UO({name:"TransitionGroup",props:Pi({},Ak,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Za(),i=vM();let a,u;return IA(()=>{if(!a.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!qO(a[0].el,n.vnode.el,l))return;a.forEach(GO),a.forEach(ZO);const s=a.filter(WO);dI(),s.forEach(f=>{const y=f.el,x=y.style;Xc(y,l),x.transform=x.webkitTransform=x.transitionDuration="";const b=y[Bx]=M=>{M&&M.target!==y||(!M||/transform$/.test(M.propertyName))&&(y.removeEventListener("transitionend",b),y[Bx]=null,Mf(y,l))};y.addEventListener("transitionend",b)})}),()=>{const l=Gr(e),s=Ck(l);let f=l.tag||Fn;if(a=[],u)for(let y=0;y<u.length;y++){const x=u[y];x.el&&x.el instanceof Element&&(a.push(x),dd(x,Ry(x,s,i,n)),Pk.set(x,x.el.getBoundingClientRect()))}u=t.default?wA(t.default()):[];for(let y=0;y<u.length;y++){const x=u[y];x.key!=null&&dd(x,Ry(x,s,i,n))}return je(f,null,u)}}}),HO=$O;function GO(e){const t=e.el;t[Bx]&&t[Bx](),t[nT]&&t[nT]()}function ZO(e){kk.set(e,e.el.getBoundingClientRect())}function WO(e){const t=Pk.get(e),n=kk.get(e),i=t.left-n.left,a=t.top-n.top;if(i||a){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${i}px,${a}px)`,u.transitionDuration="0s",e}}function qO(e,t,n){const i=e.cloneNode(),a=e[zy];a&&a.forEach(s=>{s.split(/\s+/).forEach(f=>f&&i.classList.remove(f))}),n.split(/\s+/).forEach(s=>s&&i.classList.add(s)),i.style.display="none";const u=t.nodeType===1?t:t.parentNode;u.appendChild(i);const{hasTransform:l}=Ik(i);return u.removeChild(i),l}const qf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return jn(t)?n=>Iy(t,n):t};function KO(e){e.target.composing=!0}function rT(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yu=Symbol("_assign"),dh={created(e,{modifiers:{lazy:t,trim:n,number:i}},a){e[yu]=qf(a);const u=i||a.props&&a.props.type==="number";ld(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n&&(s=s.trim()),u&&(s=Ix(s)),e[yu](s)}),n&&ld(e,"change",()=>{e.value=e.value.trim()}),t||(ld(e,"compositionstart",KO),ld(e,"compositionend",rT),ld(e,"change",rT))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:a,number:u}},l){if(e[yu]=qf(l),e.composing)return;const s=(u||e.type==="number")&&!/^0\d/.test(e.value)?Ix(e.value):e.value,f=t??"";s!==f&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||a&&e.value.trim()===f)||(e.value=f))}},PA={deep:!0,created(e,t,n){e[yu]=qf(n),ld(e,"change",()=>{const i=e._modelValue,a=Fy(e),u=e.checked,l=e[yu];if(jn(i)){const s=gA(i,a),f=s!==-1;if(u&&!f)l(i.concat(a));else if(!u&&f){const y=[...i];y.splice(s,1),l(y)}}else if(Um(i)){const s=new Set(i);u?s.add(a):s.delete(a),l(s)}else l(Lk(e,u))})},mounted:iT,beforeUpdate(e,t,n){e[yu]=qf(n),iT(e,t,n)}};function iT(e,{value:t,oldValue:n},i){e._modelValue=t;let a;if(jn(t))a=gA(t,i.props.value)>-1;else if(Um(t))a=t.has(i.props.value);else{if(t===n)return;a=Zf(t,Lk(e,!0))}e.checked!==a&&(e.checked=a)}const kM={created(e,{value:t},n){e.checked=Zf(t,n.props.value),e[yu]=qf(n),ld(e,"change",()=>{e[yu](Fy(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[yu]=qf(i),t!==n&&(e.checked=Zf(t,i.props.value))}},kA={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const a=Um(t);ld(e,"change",()=>{const u=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?Ix(Fy(l)):Fy(l));e[yu](e.multiple?a?new Set(u):u:u[0]),e._assigning=!0,fl(()=>{e._assigning=!1})}),e[yu]=qf(i)},mounted(e,{value:t}){sT(e,t)},beforeUpdate(e,t,n){e[yu]=qf(n)},updated(e,{value:t}){e._assigning||sT(e,t)}};function sT(e,t){const n=e.multiple,i=jn(t);if(!(n&&!i&&!Um(t))){for(let a=0,u=e.options.length;a<u;a++){const l=e.options[a],s=Fy(l);if(n)if(i){const f=typeof s;f==="string"||f==="number"?l.selected=t.some(y=>String(y)===String(s)):l.selected=gA(t,s)>-1}else l.selected=t.has(s);else if(Zf(Fy(l),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Fy(e){return"_value"in e?e._value:e.value}function Lk(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const LM={created(e,t,n){Bb(e,t,n,null,"created")},mounted(e,t,n){Bb(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Bb(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Bb(e,t,n,i,"updated")}};function Dk(e,t){switch(e){case"SELECT":return kA;case"TEXTAREA":return dh;default:switch(t){case"checkbox":return PA;case"radio":return kM;default:return dh}}}function Bb(e,t,n,i,a){const l=Dk(e.tagName,n.props&&n.props.type)[a];l&&l(e,t,n,i)}function YO(){dh.getSSRProps=({value:e})=>({value:e}),kM.getSSRProps=({value:e},t)=>{if(t.props&&Zf(t.props.value,e))return{checked:!0}},PA.getSSRProps=({value:e},t)=>{if(jn(e)){if(t.props&&gA(e,t.props.value)>-1)return{checked:!0}}else if(Um(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},LM.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=Dk(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const XO=["ctrl","shift","alt","meta"],QO={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>XO.some(n=>e[`${n}Key`]&&!t.includes(n))},yr=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(a,...u)=>{for(let l=0;l<t.length;l++){const s=QO[t[l]];if(s&&s(a,t))return}return e(a,...u)})},JO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ez=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=a=>{if(!("key"in a))return;const u=hl(a.key);if(t.some(l=>l===u||JO[l]===u))return e(a)})},Rk=Pi({patchProp:zO},_O);let q0,aT=!1;function Ok(){return q0||(q0=X5(Rk))}function zk(){return q0=aT?q0:Q5(Rk),aT=!0,q0}const Fk=(...e)=>{Ok().render(...e)},tz=(...e)=>{zk().hydrate(...e)},Nx=(...e)=>{const t=Ok().createApp(...e),{mount:n}=t;return t.mount=i=>{const a=Vk(i);if(!a)return;const u=t._component;!ir(u)&&!u.render&&!u.template&&(u.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=n(a,!1,Nk(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t},Bk=(...e)=>{const t=zk().createApp(...e),{mount:n}=t;return t.mount=i=>{const a=Vk(i);if(a)return n(a,!0,Nk(a))},t};function Nk(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Vk(e){return ji(e)?document.querySelector(e):e}let oT=!1;const nz=()=>{oT||(oT=!0,YO(),CO())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const rz=()=>{},iz=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:E5,BaseTransitionPropsValidators:_M,Comment:Hs,DeprecationTypes:gO,EffectScope:cM,ErrorCodes:RR,ErrorTypeStrings:uO,Fragment:Fn,KeepAlive:s8,ReactiveEffect:c1,Static:Mm,Suspense:G8,Teleport:g1,Text:$f,TrackOpTypes:SR,Transition:wk,TransitionGroup:HO,TriggerOpTypes:ER,VueElement:TA,assertNumber:DR,callWithAsyncErrorHandling:Au,callWithErrorHandling:Xy,camelize:Ha,capitalize:j1,cloneVNode:hh,compatUtils:mO,compile:rz,computed:Wt,createApp:Nx,createBlock:Rt,createCommentVNode:rn,createElementBlock:et,createElementVNode:Pe,createHydrationRenderer:Q5,createPropsRestProxy:b8,createRenderer:X5,createSSRApp:Bk,createSlots:u8,createStaticVNode:EA,createTextVNode:Wr,createVNode:je,customRef:f5,defineAsyncComponent:r8,defineComponent:An,defineCustomElement:Ek,defineEmits:f8,defineExpose:p8,defineModel:y8,defineOptions:m8,defineProps:d8,defineSSRCustomElement:BO,defineSlots:g8,devtools:cO,effect:XD,effectScope:KD,getCurrentInstance:Za,getCurrentScope:hM,getCurrentWatcher:TR,getTransitionRawChildren:wA,guardReactiveProps:Di,h:ja,handleError:$m,hasInjectionContext:T8,hydrate:tz,hydrateOnIdle:XR,hydrateOnInteraction:t8,hydrateOnMediaQuery:e8,hydrateOnVisible:JR,initCustomFormatter:aO,initDirectivesForSSR:nz,inject:ca,isMemoSame:vk,isProxy:xA,isReactive:Vf,isReadonly:Wf,isRef:yi,isRuntimeOnly:rO,isShallow:Fl,isVNode:fd,markRaw:c5,mergeDefaults:wi,mergeModels:Ki,mergeProps:Qn,nextTick:fl,normalizeClass:ii,normalizeProps:Ui,normalizeStyle:qr,onActivated:P5,onBeforeMount:D5,onBeforeUnmount:yh,onBeforeUpdate:xM,onDeactivated:k5,onErrorCaptured:F5,onMounted:Er,onRenderTracked:z5,onRenderTriggered:O5,onScopeDispose:q3,onServerPrefetch:R5,onUnmounted:ha,onUpdated:IA,onWatcherCleanup:g5,openBlock:xe,popScopeId:NR,provide:Uf,proxyRefs:gM,pushScopeId:BR,queuePostFlushCb:f1,reactive:xu,readonly:U1,ref:Kt,registerRuntimeCompiler:nO,render:Fk,renderList:Or,renderSlot:Sn,resolveComponent:Us,resolveDirective:l8,resolveDynamicComponent:ps,resolveFilter:pO,resolveTransitionHooks:Ry,setBlockTracking:sI,setDevtoolsHook:hO,setTransitionHooks:dd,shallowReactive:mM,shallowReadonly:yR,shallowRef:Ca,ssrContextKey:nk,ssrUtils:fO,stop:QD,toDisplayString:an,toHandlerKey:U0,toHandlers:c8,toRaw:Gr,toRef:CR,toRefs:p5,toValue:d5,transformVNodeArgs:X8,triggerRef:_R,unref:re,useAttrs:_8,useCssModule:jO,useCssVars:IO,useHost:Tk,useId:$R,useModel:Zs,useSSRContext:rk,useShadowRoot:VO,useSlots:IM,useTemplateRef:HR,useTransitionState:vM,vModelCheckbox:PA,vModelDynamic:LM,vModelRadio:kM,vModelSelect:kA,vModelText:dh,vShow:Z1,version:_k,warn:lO,watch:xi,watchEffect:TM,watchPostEffect:F8,watchSyncEffect:ik,withAsyncContext:x8,withCtx:nt,withDefaults:v8,withDirectives:pl,withKeys:ez,withMemo:oO,withModifiers:yr,withScopeId:VR},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const iy=typeof document<"u";function jk(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function sz(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&jk(e.default)}const fi=Object.assign;function Y2(e,t){const n={};for(const i in t){const a=t[i];n[i]=pc(a)?a.map(e):e(a)}return n}const K0=()=>{},pc=Array.isArray,Uk=/#/g,az=/&/g,oz=/\//g,lz=/=/g,uz=/\?/g,$k=/\+/g,cz=/%5B/g,hz=/%5D/g,Hk=/%5E/g,dz=/%60/g,Gk=/%7B/g,fz=/%7C/g,Zk=/%7D/g,pz=/%20/g;function DM(e){return encodeURI(""+e).replace(fz,"|").replace(cz,"[").replace(hz,"]")}function mz(e){return DM(e).replace(Gk,"{").replace(Zk,"}").replace(Hk,"^")}function pI(e){return DM(e).replace($k,"%2B").replace(pz,"+").replace(Uk,"%23").replace(az,"%26").replace(dz,"`").replace(Gk,"{").replace(Zk,"}").replace(Hk,"^")}function gz(e){return pI(e).replace(lz,"%3D")}function yz(e){return DM(e).replace(Uk,"%23").replace(uz,"%3F")}function vz(e){return e==null?"":yz(e).replace(oz,"%2F")}function b1(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const _z=/\/$/,bz=e=>e.replace(_z,"");function X2(e,t,n="/"){let i,a={},u="",l="";const s=t.indexOf("#");let f=t.indexOf("?");return s<f&&s>=0&&(f=-1),f>-1&&(i=t.slice(0,f),u=t.slice(f+1,s>-1?s:t.length),a=e(u)),s>-1&&(i=i||t.slice(0,s),l=t.slice(s,t.length)),i=Cz(i??t,n),{fullPath:i+(u&&"?")+u+l,path:i,query:a,hash:b1(l)}}function xz(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function lT(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Az(e,t,n){const i=t.matched.length-1,a=n.matched.length-1;return i>-1&&i===a&&By(t.matched[i],n.matched[a])&&Wk(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function By(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Wk(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!wz(e[n],t[n]))return!1;return!0}function wz(e,t){return pc(e)?uT(e,t):pc(t)?uT(t,e):e===t}function uT(e,t){return pc(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function Cz(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),a=i[i.length-1];(a===".."||a===".")&&i.push("");let u=n.length-1,l,s;for(l=0;l<i.length;l++)if(s=i[l],s!==".")if(s==="..")u>1&&u--;else break;return n.slice(0,u).join("/")+"/"+i.slice(l).join("/")}const wf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var x1;(function(e){e.pop="pop",e.push="push"})(x1||(x1={}));var Y0;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Y0||(Y0={}));function Iz(e){if(!e)if(iy){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),bz(e)}const Mz=/^[^#]+#/;function Sz(e,t){return e.replace(Mz,"#")+t}function Ez(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const LA=()=>({left:window.scrollX,top:window.scrollY});function Tz(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=Ez(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function cT(e,t){return(history.state?history.state.position-t:-1)+e}const mI=new Map;function Pz(e,t){mI.set(e,t)}function kz(e){const t=mI.get(e);return mI.delete(e),t}let Lz=()=>location.protocol+"//"+location.host;function qk(e,t){const{pathname:n,search:i,hash:a}=t,u=e.indexOf("#");if(u>-1){let s=a.includes(e.slice(u))?e.slice(u).length:1,f=a.slice(s);return f[0]!=="/"&&(f="/"+f),lT(f,"")}return lT(n,e)+i+a}function Dz(e,t,n,i){let a=[],u=[],l=null;const s=({state:M})=>{const A=qk(e,location),P=n.value,L=t.value;let O=0;if(M){if(n.value=A,t.value=M,l&&l===P){l=null;return}O=L?M.position-L.position:0}else i(A);a.forEach(V=>{V(n.value,P,{delta:O,type:x1.pop,direction:O?O>0?Y0.forward:Y0.back:Y0.unknown})})};function f(){l=n.value}function y(M){a.push(M);const A=()=>{const P=a.indexOf(M);P>-1&&a.splice(P,1)};return u.push(A),A}function x(){const{history:M}=window;M.state&&M.replaceState(fi({},M.state,{scroll:LA()}),"")}function b(){for(const M of u)M();u=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",x)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",x,{passive:!0}),{pauseListeners:f,listen:y,destroy:b}}function hT(e,t,n,i=!1,a=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:a?LA():null}}function Rz(e){const{history:t,location:n}=window,i={value:qk(e,n)},a={value:t.state};a.value||u(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(f,y,x){const b=e.indexOf("#"),M=b>-1?(n.host&&document.querySelector("base")?e:e.slice(b))+f:Lz()+e+f;try{t[x?"replaceState":"pushState"](y,"",M),a.value=y}catch(A){console.error(A),n[x?"replace":"assign"](M)}}function l(f,y){const x=fi({},t.state,hT(a.value.back,f,a.value.forward,!0),y,{position:a.value.position});u(f,x,!0),i.value=f}function s(f,y){const x=fi({},a.value,t.state,{forward:f,scroll:LA()});u(x.current,x,!0);const b=fi({},hT(i.value,f,null),{position:x.position+1},y);u(f,b,!1),i.value=f}return{location:i,state:a,push:s,replace:l}}function Oz(e){e=Iz(e);const t=Rz(e),n=Dz(e,t.state,t.location,t.replace);function i(u,l=!0){l||n.pauseListeners(),history.go(u)}const a=fi({location:"",base:e,go:i,createHref:Sz.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function zz(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Oz(e)}function Fz(e){return typeof e=="string"||e&&typeof e=="object"}function Kk(e){return typeof e=="string"||typeof e=="symbol"}const Yk=Symbol("");var dT;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(dT||(dT={}));function Ny(e,t){return fi(new Error,{type:e,[Yk]:!0},t)}function td(e,t){return e instanceof Error&&Yk in e&&(t==null||!!(e.type&t))}const fT="[^/]+?",Bz={sensitive:!1,strict:!1,start:!0,end:!0},Nz=/[.+*?^${}()[\]/\\]/g;function Vz(e,t){const n=fi({},Bz,t),i=[];let a=n.start?"^":"";const u=[];for(const y of e){const x=y.length?[]:[90];n.strict&&!y.length&&(a+="/");for(let b=0;b<y.length;b++){const M=y[b];let A=40+(n.sensitive?.25:0);if(M.type===0)b||(a+="/"),a+=M.value.replace(Nz,"\\$&"),A+=40;else if(M.type===1){const{value:P,repeatable:L,optional:O,regexp:V}=M;u.push({name:P,repeatable:L,optional:O});const z=V||fT;if(z!==fT){A+=10;try{new RegExp(`(${z})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${P}" (${z}): `+U.message)}}let B=L?`((?:${z})(?:/(?:${z}))*)`:`(${z})`;b||(B=O&&y.length<2?`(?:/${B})`:"/"+B),O&&(B+="?"),a+=B,A+=20,O&&(A+=-8),L&&(A+=-20),z===".*"&&(A+=-50)}x.push(A)}i.push(x)}if(n.strict&&n.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const l=new RegExp(a,n.sensitive?"":"i");function s(y){const x=y.match(l),b={};if(!x)return null;for(let M=1;M<x.length;M++){const A=x[M]||"",P=u[M-1];b[P.name]=A&&P.repeatable?A.split("/"):A}return b}function f(y){let x="",b=!1;for(const M of e){(!b||!x.endsWith("/"))&&(x+="/"),b=!1;for(const A of M)if(A.type===0)x+=A.value;else if(A.type===1){const{value:P,repeatable:L,optional:O}=A,V=P in y?y[P]:"";if(pc(V)&&!L)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const z=pc(V)?V.join("/"):V;if(!z)if(O)M.length<2&&(x.endsWith("/")?x=x.slice(0,-1):b=!0);else throw new Error(`Missing required param "${P}"`);x+=z}}return x||"/"}return{re:l,score:i,keys:u,parse:s,stringify:f}}function jz(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Xk(e,t){let n=0;const i=e.score,a=t.score;for(;n<i.length&&n<a.length;){const u=jz(i[n],a[n]);if(u)return u;n++}if(Math.abs(a.length-i.length)===1){if(pT(i))return 1;if(pT(a))return-1}return a.length-i.length}function pT(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Uz={type:0,value:""},$z=/[a-zA-Z0-9_]/;function Hz(e){if(!e)return[[]];if(e==="/")return[[Uz]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(A){throw new Error(`ERR (${n})/"${y}": ${A}`)}let n=0,i=n;const a=[];let u;function l(){u&&a.push(u),u=[]}let s=0,f,y="",x="";function b(){y&&(n===0?u.push({type:0,value:y}):n===1||n===2||n===3?(u.length>1&&(f==="*"||f==="+")&&t(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:y,regexp:x,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):t("Invalid state to consume buffer"),y="")}function M(){y+=f}for(;s<e.length;){if(f=e[s++],f==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:f==="/"?(y&&b(),l()):f===":"?(b(),n=1):M();break;case 4:M(),n=i;break;case 1:f==="("?n=2:$z.test(f)?M():(b(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&s--);break;case 2:f===")"?x[x.length-1]=="\\"?x=x.slice(0,-1)+f:n=3:x+=f;break;case 3:b(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&s--,x="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${y}"`),b(),l(),a}function Gz(e,t,n){const i=Vz(Hz(e.path),n),a=fi(i,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function Zz(e,t){const n=[],i=new Map;t=vT({strict:!1,end:!0,sensitive:!1},t);function a(b){return i.get(b)}function u(b,M,A){const P=!A,L=gT(b);L.aliasOf=A&&A.record;const O=vT(t,b),V=[L];if("alias"in b){const U=typeof b.alias=="string"?[b.alias]:b.alias;for(const Z of U)V.push(gT(fi({},L,{components:A?A.record.components:L.components,path:Z,aliasOf:A?A.record:L})))}let z,B;for(const U of V){const{path:Z}=U;if(M&&Z[0]!=="/"){const te=M.record.path,Y=te[te.length-1]==="/"?"":"/";U.path=M.record.path+(Z&&Y+Z)}if(z=Gz(U,M,O),A?A.alias.push(z):(B=B||z,B!==z&&B.alias.push(z),P&&b.name&&!yT(z)&&l(b.name)),Qk(z)&&f(z),L.children){const te=L.children;for(let Y=0;Y<te.length;Y++)u(te[Y],z,A&&A.children[Y])}A=A||z}return B?()=>{l(B)}:K0}function l(b){if(Kk(b)){const M=i.get(b);M&&(i.delete(b),n.splice(n.indexOf(M),1),M.children.forEach(l),M.alias.forEach(l))}else{const M=n.indexOf(b);M>-1&&(n.splice(M,1),b.record.name&&i.delete(b.record.name),b.children.forEach(l),b.alias.forEach(l))}}function s(){return n}function f(b){const M=Kz(b,n);n.splice(M,0,b),b.record.name&&!yT(b)&&i.set(b.record.name,b)}function y(b,M){let A,P={},L,O;if("name"in b&&b.name){if(A=i.get(b.name),!A)throw Ny(1,{location:b});O=A.record.name,P=fi(mT(M.params,A.keys.filter(B=>!B.optional).concat(A.parent?A.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),b.params&&mT(b.params,A.keys.map(B=>B.name))),L=A.stringify(P)}else if(b.path!=null)L=b.path,A=n.find(B=>B.re.test(L)),A&&(P=A.parse(L),O=A.record.name);else{if(A=M.name?i.get(M.name):n.find(B=>B.re.test(M.path)),!A)throw Ny(1,{location:b,currentLocation:M});O=A.record.name,P=fi({},M.params,b.params),L=A.stringify(P)}const V=[];let z=A;for(;z;)V.unshift(z.record),z=z.parent;return{name:O,path:L,params:P,matched:V,meta:qz(V)}}e.forEach(b=>u(b));function x(){n.length=0,i.clear()}return{addRoute:u,resolve:y,removeRoute:l,clearRoutes:x,getRoutes:s,getRecordMatcher:a}}function mT(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function gT(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Wz(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Wz(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function yT(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function qz(e){return e.reduce((t,n)=>fi(t,n.meta),{})}function vT(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Kz(e,t){let n=0,i=t.length;for(;n!==i;){const u=n+i>>1;Xk(e,t[u])<0?i=u:n=u+1}const a=Yz(e);return a&&(i=t.lastIndexOf(a,i-1)),i}function Yz(e){let t=e;for(;t=t.parent;)if(Qk(t)&&Xk(e,t)===0)return t}function Qk({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Xz(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<i.length;++a){const u=i[a].replace($k," "),l=u.indexOf("="),s=b1(l<0?u:u.slice(0,l)),f=l<0?null:b1(u.slice(l+1));if(s in t){let y=t[s];pc(y)||(y=t[s]=[y]),y.push(f)}else t[s]=f}return t}function _T(e){let t="";for(let n in e){const i=e[n];if(n=gz(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(pc(i)?i.map(u=>u&&pI(u)):[i&&pI(i)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+n,u!=null&&(t+="="+u))})}return t}function Qz(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=pc(i)?i.map(a=>a==null?null:""+a):i==null?i:""+i)}return t}const Jz=Symbol(""),bT=Symbol(""),RM=Symbol(""),Jk=Symbol(""),gI=Symbol("");function x0(){let e=[];function t(i){return e.push(i),()=>{const a=e.indexOf(i);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function kf(e,t,n,i,a,u=l=>l()){const l=i&&(i.enterCallbacks[a]=i.enterCallbacks[a]||[]);return()=>new Promise((s,f)=>{const y=M=>{M===!1?f(Ny(4,{from:n,to:t})):M instanceof Error?f(M):Fz(M)?f(Ny(2,{from:t,to:M})):(l&&i.enterCallbacks[a]===l&&typeof M=="function"&&l.push(M),s())},x=u(()=>e.call(i&&i.instances[a],t,n,y));let b=Promise.resolve(x);e.length<3&&(b=b.then(y)),b.catch(M=>f(M))})}function Q2(e,t,n,i,a=u=>u()){const u=[];for(const l of e)for(const s in l.components){let f=l.components[s];if(!(t!=="beforeRouteEnter"&&!l.instances[s]))if(jk(f)){const x=(f.__vccOpts||f)[t];x&&u.push(kf(x,n,i,l,s,a))}else{let y=f();u.push(()=>y.then(x=>{if(!x)throw new Error(`Couldn't resolve component "${s}" at "${l.path}"`);const b=sz(x)?x.default:x;l.mods[s]=x,l.components[s]=b;const A=(b.__vccOpts||b)[t];return A&&kf(A,n,i,l,s,a)()}))}}return u}function xT(e){const t=ca(RM),n=ca(Jk),i=Wt(()=>{const f=re(e.to);return t.resolve(f)}),a=Wt(()=>{const{matched:f}=i.value,{length:y}=f,x=f[y-1],b=n.matched;if(!x||!b.length)return-1;const M=b.findIndex(By.bind(null,x));if(M>-1)return M;const A=AT(f[y-2]);return y>1&&AT(x)===A&&b[b.length-1].path!==A?b.findIndex(By.bind(null,f[y-2])):M}),u=Wt(()=>a.value>-1&&rF(n.params,i.value.params)),l=Wt(()=>a.value>-1&&a.value===n.matched.length-1&&Wk(n.params,i.value.params));function s(f={}){if(nF(f)){const y=t[re(e.replace)?"replace":"push"](re(e.to)).catch(K0);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:i,href:Wt(()=>i.value.href),isActive:u,isExactActive:l,navigate:s}}function eF(e){return e.length===1?e[0]:e}const tF=An({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xT,setup(e,{slots:t}){const n=xu(xT(e)),{options:i}=ca(RM),a=Wt(()=>({[wT(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[wT(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const u=t.default&&eF(t.default(n));return e.custom?u:ja("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},u)}}}),e4=tF;function nF(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function rF(e,t){for(const n in t){const i=t[n],a=e[n];if(typeof i=="string"){if(i!==a)return!1}else if(!pc(a)||a.length!==i.length||i.some((u,l)=>u!==a[l]))return!1}return!0}function AT(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const wT=(e,t,n)=>e??t??n,iF=An({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=ca(gI),a=Wt(()=>e.route||i.value),u=ca(bT,0),l=Wt(()=>{let y=re(u);const{matched:x}=a.value;let b;for(;(b=x[y])&&!b.components;)y++;return y}),s=Wt(()=>a.value.matched[l.value]);Uf(bT,Wt(()=>l.value+1)),Uf(Jz,s),Uf(gI,a);const f=Kt();return xi(()=>[f.value,s.value,e.name],([y,x,b],[M,A,P])=>{x&&(x.instances[b]=y,A&&A!==x&&y&&y===M&&(x.leaveGuards.size||(x.leaveGuards=A.leaveGuards),x.updateGuards.size||(x.updateGuards=A.updateGuards))),y&&x&&(!A||!By(x,A)||!M)&&(x.enterCallbacks[b]||[]).forEach(L=>L(y))},{flush:"post"}),()=>{const y=a.value,x=e.name,b=s.value,M=b&&b.components[x];if(!M)return CT(n.default,{Component:M,route:y});const A=b.props[x],P=A?A===!0?y.params:typeof A=="function"?A(y):A:null,O=ja(M,fi({},P,t,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(b.instances[x]=null)},ref:f}));return CT(n.default,{Component:O,route:y})||O}}});function CT(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const t4=iF;function sF(e){const t=Zz(e.routes,e),n=e.parseQuery||Xz,i=e.stringifyQuery||_T,a=e.history,u=x0(),l=x0(),s=x0(),f=Ca(wf);let y=wf;iy&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=Y2.bind(null,pt=>""+pt),b=Y2.bind(null,vz),M=Y2.bind(null,b1);function A(pt,ft){let ot,Pt;return Kk(pt)?(ot=t.getRecordMatcher(pt),Pt=ft):Pt=pt,t.addRoute(Pt,ot)}function P(pt){const ft=t.getRecordMatcher(pt);ft&&t.removeRoute(ft)}function L(){return t.getRoutes().map(pt=>pt.record)}function O(pt){return!!t.getRecordMatcher(pt)}function V(pt,ft){if(ft=fi({},ft||f.value),typeof pt=="string"){const $=X2(n,pt,ft.path),Te=t.resolve({path:$.path},ft),Oe=a.createHref($.fullPath);return fi($,Te,{params:M(Te.params),hash:b1($.hash),redirectedFrom:void 0,href:Oe})}let ot;if(pt.path!=null)ot=fi({},pt,{path:X2(n,pt.path,ft.path).path});else{const $=fi({},pt.params);for(const Te in $)$[Te]==null&&delete $[Te];ot=fi({},pt,{params:b($)}),ft.params=b(ft.params)}const Pt=t.resolve(ot,ft),Lt=pt.hash||"";Pt.params=x(M(Pt.params));const un=xz(i,fi({},pt,{hash:mz(Lt),path:Pt.path})),Ie=a.createHref(un);return fi({fullPath:un,hash:Lt,query:i===_T?Qz(pt.query):pt.query||{}},Pt,{redirectedFrom:void 0,href:Ie})}function z(pt){return typeof pt=="string"?X2(n,pt,f.value.path):fi({},pt)}function B(pt,ft){if(y!==pt)return Ny(8,{from:ft,to:pt})}function U(pt){return Y(pt)}function Z(pt){return U(fi(z(pt),{replace:!0}))}function te(pt){const ft=pt.matched[pt.matched.length-1];if(ft&&ft.redirect){const{redirect:ot}=ft;let Pt=typeof ot=="function"?ot(pt):ot;return typeof Pt=="string"&&(Pt=Pt.includes("?")||Pt.includes("#")?Pt=z(Pt):{path:Pt},Pt.params={}),fi({query:pt.query,hash:pt.hash,params:Pt.path!=null?{}:pt.params},Pt)}}function Y(pt,ft){const ot=y=V(pt),Pt=f.value,Lt=pt.state,un=pt.force,Ie=pt.replace===!0,$=te(ot);if($)return Y(fi(z($),{state:typeof $=="object"?fi({},Lt,$.state):Lt,force:un,replace:Ie}),ft||ot);const Te=ot;Te.redirectedFrom=ft;let Oe;return!un&&Az(i,Pt,ot)&&(Oe=Ny(16,{to:Te,from:Pt}),Ge(Pt,Pt,!0,!1)),(Oe?Promise.resolve(Oe):ne(Te,Pt)).catch(ye=>td(ye)?td(ye,2)?ye:Tt(ye):tt(ye,Te,Pt)).then(ye=>{if(ye){if(td(ye,2))return Y(fi({replace:Ie},z(ye.to),{state:typeof ye.to=="object"?fi({},Lt,ye.to.state):Lt,force:un}),ft||Te)}else ye=Q(Te,Pt,!0,Ie,Lt);return le(Te,Pt,ye),ye})}function W(pt,ft){const ot=B(pt,ft);return ot?Promise.reject(ot):Promise.resolve()}function H(pt){const ft=Bt.values().next().value;return ft&&typeof ft.runWithContext=="function"?ft.runWithContext(pt):pt()}function ne(pt,ft){let ot;const[Pt,Lt,un]=aF(pt,ft);ot=Q2(Pt.reverse(),"beforeRouteLeave",pt,ft);for(const $ of Pt)$.leaveGuards.forEach(Te=>{ot.push(kf(Te,pt,ft))});const Ie=W.bind(null,pt,ft);return ot.push(Ie),en(ot).then(()=>{ot=[];for(const $ of u.list())ot.push(kf($,pt,ft));return ot.push(Ie),en(ot)}).then(()=>{ot=Q2(Lt,"beforeRouteUpdate",pt,ft);for(const $ of Lt)$.updateGuards.forEach(Te=>{ot.push(kf(Te,pt,ft))});return ot.push(Ie),en(ot)}).then(()=>{ot=[];for(const $ of un)if($.beforeEnter)if(pc($.beforeEnter))for(const Te of $.beforeEnter)ot.push(kf(Te,pt,ft));else ot.push(kf($.beforeEnter,pt,ft));return ot.push(Ie),en(ot)}).then(()=>(pt.matched.forEach($=>$.enterCallbacks={}),ot=Q2(un,"beforeRouteEnter",pt,ft,H),ot.push(Ie),en(ot))).then(()=>{ot=[];for(const $ of l.list())ot.push(kf($,pt,ft));return ot.push(Ie),en(ot)}).catch($=>td($,8)?$:Promise.reject($))}function le(pt,ft,ot){s.list().forEach(Pt=>H(()=>Pt(pt,ft,ot)))}function Q(pt,ft,ot,Pt,Lt){const un=B(pt,ft);if(un)return un;const Ie=ft===wf,$=iy?history.state:{};ot&&(Pt||Ie?a.replace(pt.fullPath,fi({scroll:Ie&&$&&$.scroll},Lt)):a.push(pt.fullPath,Lt)),f.value=pt,Ge(pt,ft,ot,Ie),Tt()}let ce;function K(){ce||(ce=a.listen((pt,ft,ot)=>{if(!St.listening)return;const Pt=V(pt),Lt=te(Pt);if(Lt){Y(fi(Lt,{replace:!0,force:!0}),Pt).catch(K0);return}y=Pt;const un=f.value;iy&&Pz(cT(un.fullPath,ot.delta),LA()),ne(Pt,un).catch(Ie=>td(Ie,12)?Ie:td(Ie,2)?(Y(fi(z(Ie.to),{force:!0}),Pt).then($=>{td($,20)&&!ot.delta&&ot.type===x1.pop&&a.go(-1,!1)}).catch(K0),Promise.reject()):(ot.delta&&a.go(-ot.delta,!1),tt(Ie,Pt,un))).then(Ie=>{Ie=Ie||Q(Pt,un,!1),Ie&&(ot.delta&&!td(Ie,8)?a.go(-ot.delta,!1):ot.type===x1.pop&&td(Ie,20)&&a.go(-1,!1)),le(Pt,un,Ie)}).catch(K0)}))}let Le=x0(),Ue=x0(),Be;function tt(pt,ft,ot){Tt(pt);const Pt=Ue.list();return Pt.length?Pt.forEach(Lt=>Lt(pt,ft,ot)):console.error(pt),Promise.reject(pt)}function ut(){return Be&&f.value!==wf?Promise.resolve():new Promise((pt,ft)=>{Le.add([pt,ft])})}function Tt(pt){return Be||(Be=!pt,K(),Le.list().forEach(([ft,ot])=>pt?ot(pt):ft()),Le.reset()),pt}function Ge(pt,ft,ot,Pt){const{scrollBehavior:Lt}=e;if(!iy||!Lt)return Promise.resolve();const un=!ot&&kz(cT(pt.fullPath,0))||(Pt||!ot)&&history.state&&history.state.scroll||null;return fl().then(()=>Lt(pt,ft,un)).then(Ie=>Ie&&Tz(Ie)).catch(Ie=>tt(Ie,pt,ft))}const Ne=pt=>a.go(pt);let Dt;const Bt=new Set,St={currentRoute:f,listening:!0,addRoute:A,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:O,getRoutes:L,resolve:V,options:e,push:U,replace:Z,go:Ne,back:()=>Ne(-1),forward:()=>Ne(1),beforeEach:u.add,beforeResolve:l.add,afterEach:s.add,onError:Ue.add,isReady:ut,install(pt){const ft=this;pt.component("RouterLink",e4),pt.component("RouterView",t4),pt.config.globalProperties.$router=ft,Object.defineProperty(pt.config.globalProperties,"$route",{enumerable:!0,get:()=>re(f)}),iy&&!Dt&&f.value===wf&&(Dt=!0,U(a.location).catch(Lt=>{}));const ot={};for(const Lt in wf)Object.defineProperty(ot,Lt,{get:()=>f.value[Lt],enumerable:!0});pt.provide(RM,ft),pt.provide(Jk,mM(ot)),pt.provide(gI,f);const Pt=pt.unmount;Bt.add(pt),pt.unmount=function(){Bt.delete(pt),Bt.size<1&&(y=wf,ce&&ce(),ce=null,f.value=wf,Dt=!1,Be=!1),Pt()}}};function en(pt){return pt.reduce((ft,ot)=>ft.then(()=>H(ot)),Promise.resolve())}return St}function aF(e,t){const n=[],i=[],a=[],u=Math.max(t.matched.length,e.matched.length);for(let l=0;l<u;l++){const s=t.matched[l];s&&(e.matched.find(y=>By(y,s))?i.push(s):n.push(s));const f=e.matched[l];f&&(t.matched.find(y=>By(y,f))||a.push(f))}return[n,i,a]}function Qy(e){return hM()?(q3(e),!0):!1}function oF(){const e=new Set,t=a=>{e.delete(a)};return{on:a=>{e.add(a);const u=()=>t(a);return Qy(u),{off:u}},off:t,trigger:(...a)=>Promise.all(Array.from(e).map(u=>u(...a)))}}class fy{constructor(){if(this.state={},typeof window<"u"){const t=window;t.$_hungpv_store??(t.$_hungpv_store={}),this.state=t.$_hungpv_store}else this.state={}}static getInstance(){return fy.instance||(fy.instance=new fy),fy.instance}getState(){return this.state}updateWindowStore(){if(typeof window<"u"){const t=window;t.$_hungpv_store=this.state}}get(t){return this.updateWindowStore(),this.state[t]}set(t,n){return this.state[t]=n,this.updateWindowStore(),n}has(t){return t in this.state}delete(t){return delete this.state[t]}}function lF(e,t){const n=fy.getInstance();return n.get(e)??n.set(e,t)}function np(e,t){return n=>Object.keys(e).reduce((i,a)=>{const l=typeof e[a]=="object"&&e[a]!=null&&!Array.isArray(e[a])?e[a]:{type:e[a]};return n&&a in n?i[a]={...l,default:n[a]}:i[a]=l,t&&!i[a].source&&(i[a].source=t),i},{})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function n4(e){return typeof e>"u"||e===null}function uF(e){return typeof e=="object"&&e!==null}function cF(e){return Array.isArray(e)?e:n4(e)?[]:[e]}function hF(e,t){var n,i,a,u;if(t)for(u=Object.keys(t),n=0,i=u.length;n<i;n+=1)a=u[n],e[a]=t[a];return e}function dF(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function fF(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var pF=n4,mF=uF,gF=cF,yF=dF,vF=fF,_F=hF,OM={isNothing:pF,isObject:mF,toArray:gF,repeat:yF,isNegativeZero:vF,extend:_F};function r4(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function A1(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=r4(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}A1.prototype=Object.create(Error.prototype);A1.prototype.constructor=A1;A1.prototype.toString=function(t){return this.name+": "+r4(this,t)};var _m=A1,bF=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],xF=["scalar","sequence","mapping"];function AF(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function wF(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(bF.indexOf(n)===-1)throw new _m('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=AF(t.styleAliases||null),xF.indexOf(this.kind)===-1)throw new _m('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var oo=wF;function IT(e,t){var n=[];return e[t].forEach(function(i){var a=n.length;n.forEach(function(u,l){u.tag===i.tag&&u.kind===i.kind&&u.multi===i.multi&&(a=l)}),n[a]=i}),n}function CF(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(a){a.multi?(e.multi[a.kind].push(a),e.multi.fallback.push(a)):e[a.kind][a.tag]=e.fallback[a.tag]=a}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function yI(e){return this.extend(e)}yI.prototype.extend=function(t){var n=[],i=[];if(t instanceof oo)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new _m("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(u){if(!(u instanceof oo))throw new _m("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new _m("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new _m("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(u){if(!(u instanceof oo))throw new _m("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var a=Object.create(yI.prototype);return a.implicit=(this.implicit||[]).concat(n),a.explicit=(this.explicit||[]).concat(i),a.compiledImplicit=IT(a,"implicit"),a.compiledExplicit=IT(a,"explicit"),a.compiledTypeMap=CF(a.compiledImplicit,a.compiledExplicit),a};var IF=yI,MF=new oo("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),SF=new oo("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),EF=new oo("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),TF=new IF({explicit:[MF,SF,EF]});function PF(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function kF(){return null}function LF(e){return e===null}var DF=new oo("tag:yaml.org,2002:null",{kind:"scalar",resolve:PF,construct:kF,predicate:LF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function RF(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function OF(e){return e==="true"||e==="True"||e==="TRUE"}function zF(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var FF=new oo("tag:yaml.org,2002:bool",{kind:"scalar",resolve:RF,construct:OF,predicate:zF,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function BF(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function NF(e){return 48<=e&&e<=55}function VF(e){return 48<=e&&e<=57}function jF(e){if(e===null)return!1;var t=e.length,n=0,i=!1,a;if(!t)return!1;if(a=e[n],(a==="-"||a==="+")&&(a=e[++n]),a==="0"){if(n+1===t)return!0;if(a=e[++n],a==="b"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(a!=="0"&&a!=="1")return!1;i=!0}return i&&a!=="_"}if(a==="x"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!BF(e.charCodeAt(n)))return!1;i=!0}return i&&a!=="_"}if(a==="o"){for(n++;n<t;n++)if(a=e[n],a!=="_"){if(!NF(e.charCodeAt(n)))return!1;i=!0}return i&&a!=="_"}}if(a==="_")return!1;for(;n<t;n++)if(a=e[n],a!=="_"){if(!VF(e.charCodeAt(n)))return!1;i=!0}return!(!i||a==="_")}function UF(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function $F(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!OM.isNegativeZero(e)}var HF=new oo("tag:yaml.org,2002:int",{kind:"scalar",resolve:jF,construct:UF,predicate:$F,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GF=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function ZF(e){return!(e===null||!GF.test(e)||e[e.length-1]==="_")}function WF(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var qF=/^[-+]?[0-9]+e/;function KF(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(OM.isNegativeZero(e))return"-0.0";return n=e.toString(10),qF.test(n)?n.replace("e",".e"):n}function YF(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||OM.isNegativeZero(e))}var XF=new oo("tag:yaml.org,2002:float",{kind:"scalar",resolve:ZF,construct:WF,predicate:YF,represent:KF,defaultStyle:"lowercase"}),QF=TF.extend({implicit:[DF,FF,HF,XF]}),JF=QF,i4=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s4=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function eB(e){return e===null?!1:i4.exec(e)!==null||s4.exec(e)!==null}function tB(e){var t,n,i,a,u,l,s,f=0,y=null,x,b,M;if(t=i4.exec(e),t===null&&(t=s4.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,a=+t[3],!t[4])return new Date(Date.UTC(n,i,a));if(u=+t[4],l=+t[5],s=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(x=+t[10],b=+(t[11]||0),y=(x*60+b)*6e4,t[9]==="-"&&(y=-y)),M=new Date(Date.UTC(n,i,a,u,l,s,f)),y&&M.setTime(M.getTime()-y),M}function nB(e){return e.toISOString()}var rB=new oo("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:eB,construct:tB,instanceOf:Date,represent:nB});function iB(e){return e==="<<"||e===null}var sB=new oo("tag:yaml.org,2002:merge",{kind:"scalar",resolve:iB}),zM=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function aB(e){if(e===null)return!1;var t,n,i=0,a=e.length,u=zM;for(n=0;n<a;n++)if(t=u.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function oB(e){var t,n,i=e.replace(/[\r\n=]/g,""),a=i.length,u=zM,l=0,s=[];for(t=0;t<a;t++)t%4===0&&t&&(s.push(l>>16&255),s.push(l>>8&255),s.push(l&255)),l=l<<6|u.indexOf(i.charAt(t));return n=a%4*6,n===0?(s.push(l>>16&255),s.push(l>>8&255),s.push(l&255)):n===18?(s.push(l>>10&255),s.push(l>>2&255)):n===12&&s.push(l>>4&255),new Uint8Array(s)}function lB(e){var t="",n=0,i,a,u=e.length,l=zM;for(i=0;i<u;i++)i%3===0&&i&&(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]),n=(n<<8)+e[i];return a=u%3,a===0?(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]):a===2?(t+=l[n>>10&63],t+=l[n>>4&63],t+=l[n<<2&63],t+=l[64]):a===1&&(t+=l[n>>2&63],t+=l[n<<4&63],t+=l[64],t+=l[64]),t}function uB(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var cB=new oo("tag:yaml.org,2002:binary",{kind:"scalar",resolve:aB,construct:oB,predicate:uB,represent:lB}),hB=Object.prototype.hasOwnProperty,dB=Object.prototype.toString;function fB(e){if(e===null)return!0;var t=[],n,i,a,u,l,s=e;for(n=0,i=s.length;n<i;n+=1){if(a=s[n],l=!1,dB.call(a)!=="[object Object]")return!1;for(u in a)if(hB.call(a,u))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(u)===-1)t.push(u);else return!1}return!0}function pB(e){return e!==null?e:[]}var mB=new oo("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fB,construct:pB}),gB=Object.prototype.toString;function yB(e){if(e===null)return!0;var t,n,i,a,u,l=e;for(u=new Array(l.length),t=0,n=l.length;t<n;t+=1){if(i=l[t],gB.call(i)!=="[object Object]"||(a=Object.keys(i),a.length!==1))return!1;u[t]=[a[0],i[a[0]]]}return!0}function vB(e){if(e===null)return[];var t,n,i,a,u,l=e;for(u=new Array(l.length),t=0,n=l.length;t<n;t+=1)i=l[t],a=Object.keys(i),u[t]=[a[0],i[a[0]]];return u}var _B=new oo("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:yB,construct:vB}),bB=Object.prototype.hasOwnProperty;function xB(e){if(e===null)return!0;var t,n=e;for(t in n)if(bB.call(n,t)&&n[t]!==null)return!1;return!0}function AB(e){return e!==null?e:{}}var wB=new oo("tag:yaml.org,2002:set",{kind:"mapping",resolve:xB,construct:AB});JF.extend({implicit:[rB,sB],explicit:[cB,mB,_B,wB]});function MT(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}var CB=new Array(256),IB=new Array(256);for(var Wg=0;Wg<256;Wg++)CB[Wg]=MT(Wg)?1:0,IB[Wg]=MT(Wg);function Rm(e){return typeof e=="function"?e():re(e)}function w1(e){return JSON.parse(JSON.stringify(e))}const Jy=typeof window<"u"&&typeof document<"u",MB=e=>e!=null,SB=Object.prototype.toString,EB=e=>SB.call(e)==="[object Object]",ux=()=>{},TB=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),PB=kB();function kB(){var e,t;return Jy&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const wu=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))};function a4(e){return Za()}function LB(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const i=t;t=void 0,i&&await i},n}function DB(e,t){var u;if(typeof e=="number")return e+t;const n=((u=e.match(/^-?\d+\.?\d*/))==null?void 0:u[0])||"",i=e.slice(n.length),a=Number.parseFloat(n)+t;return Number.isNaN(a)?e:a+i}function RB(e,t){a4()&&ha(e,t)}function xm(e){const t=Rm(e);return(t==null?void 0:t.$el)??t}function OB(e,t,n={}){const{immediate:i=!0}=n,a=Kt(!1);let u=null;function l(){u&&(clearTimeout(u),u=null)}function s(){a.value=!1,l()}function f(...y){l(),a.value=!0,u=setTimeout(()=>{a.value=!1,u=null,e(...y)},d5(t))}return i&&(a.value=!0,Jy&&f()),Qy(s),{isPending:U1(a),start:f,stop:s}}function zB(e,t=!0,n){a4()?Er(e,n):t?e():fl(e)}const DA=Jy?window:void 0,o4=Jy?window.document:void 0,FM=Jy?window.navigator:void 0;function uc(...e){let t,n,i,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,a]=e,t=DA):[t,n,i,a]=e,!t)return ux;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const u=[],l=()=>{u.forEach(x=>x()),u.length=0},s=(x,b,M,A)=>(x.addEventListener(b,M,A),()=>x.removeEventListener(b,M,A)),f=xi(()=>[xm(t),Rm(a)],([x,b])=>{if(l(),!x)return;const M=EB(b)?{...b}:b;u.push(...n.flatMap(A=>i.map(P=>s(x,A,P,M))))},{immediate:!0,flush:"post"}),y=()=>{f(),l()};return Qy(y),y}let ST=!1;function FB(e,t,n={}){const{window:i=DA,ignore:a=[],capture:u=!0,detectIframe:l=!1}=n;if(!i)return ux;PB&&!ST&&(ST=!0,Array.from(i.document.body.children).forEach(M=>M.addEventListener("click",ux)),i.document.documentElement.addEventListener("click",ux));let s=!0;const f=M=>a.some(A=>{if(typeof A=="string")return Array.from(i.document.querySelectorAll(A)).some(P=>P===M.target||M.composedPath().includes(P));{const P=xm(A);return P&&(M.target===P||M.composedPath().includes(P))}}),x=[uc(i,"click",M=>{const A=xm(e);if(!(!A||A===M.target||M.composedPath().includes(A))){if(M.detail===0&&(s=!f(M)),!s){s=!0;return}t(M)}},{passive:!0,capture:u}),uc(i,"pointerdown",M=>{const A=xm(e);s=!f(M)&&!!(A&&!M.composedPath().includes(A))},{passive:!0}),l&&uc(i,"blur",M=>{setTimeout(()=>{var P;const A=xm(e);((P=i.document.activeElement)==null?void 0:P.tagName)==="IFRAME"&&!(A!=null&&A.contains(i.document.activeElement))&&t(M)},0)})].filter(Boolean);return()=>x.forEach(M=>M())}function BB(){const e=Kt(!1),t=Za();return t&&Er(()=>{e.value=!0},t),e}function W1(e){const t=BB();return Wt(()=>(t.value,!!e()))}function A0(e,t={}){const{window:n=DA}=t,i=W1(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let a;const u=Kt(!1),l=y=>{u.value=y.matches},s=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",l):a.removeListener(l))},f=TM(()=>{i.value&&(s(),a=n.matchMedia(Rm(e)),"addEventListener"in a?a.addEventListener("change",l):a.addListener(l),u.value=a.matches)});return Qy(()=>{f(),s(),a=void 0}),u}function l4(e,t={}){function n(x,b){let M=Rm(e[Rm(x)]);return b!=null&&(M=DB(M,b)),typeof M=="number"&&(M=`${M}px`),M}const{window:i=DA,strategy:a="min-width"}=t;function u(x){return i?i.matchMedia(x).matches:!1}const l=x=>A0(()=>`(min-width: ${n(x)})`,t),s=x=>A0(()=>`(max-width: ${n(x)})`,t),f=Object.keys(e).reduce((x,b)=>(Object.defineProperty(x,b,{get:()=>a==="min-width"?l(b):s(b),enumerable:!0,configurable:!0}),x),{});function y(){const x=Object.keys(e).map(b=>[b,l(b)]);return Wt(()=>x.filter(([,b])=>b.value).map(([b])=>b))}return Object.assign(f,{greaterOrEqual:l,smallerOrEqual:s,greater(x){return A0(()=>`(min-width: ${n(x,.1)})`,t)},smaller(x){return A0(()=>`(max-width: ${n(x,-.1)})`,t)},between(x,b){return A0(()=>`(min-width: ${n(x)}) and (max-width: ${n(b,-.1)})`,t)},isGreater(x){return u(`(min-width: ${n(x,.1)})`)},isGreaterOrEqual(x){return u(`(min-width: ${n(x)})`)},isSmaller(x){return u(`(max-width: ${n(x,-.1)})`)},isSmallerOrEqual(x){return u(`(max-width: ${n(x)})`)},isInBetween(x,b){return u(`(min-width: ${n(x)}) and (max-width: ${n(b,-.1)})`)},current:y,active(){const x=y();return Wt(()=>x.value.length===0?"":x.value[x.value.length-1])}})}function ET(e,t={}){const{controls:n=!1,navigator:i=FM}=t,a=W1(()=>i&&"permissions"in i);let u;const l=typeof e=="string"?{name:e}:e,s=Kt(),f=()=>{u&&(s.value=u.state)},y=LB(async()=>{if(a.value){if(!u)try{u=await i.permissions.query(l),uc(u,"change",f),f()}catch{s.value="prompt"}return u}});return y(),n?{state:s,isSupported:a,query:y}:s}function NB(e={}){const{navigator:t=FM,read:n=!1,source:i,copiedDuring:a=1500,legacy:u=!0}=e,l=W1(()=>t&&"clipboard"in t),s=ET("clipboard-read"),f=ET("clipboard-write"),y=Wt(()=>l.value||u),x=Kt(""),b=Kt(!1),M=OB(()=>b.value=!1,a);function A(){l.value&&V(s.value)?t.clipboard.readText().then(z=>{x.value=z}):x.value=O()}y.value&&n&&uc(["copy","cut"],A);async function P(z=Rm(i)){y.value&&z!=null&&(l.value&&V(f.value)?await t.clipboard.writeText(z):L(z),x.value=z,b.value=!0,M.start())}function L(z){const B=document.createElement("textarea");B.value=z??"",B.style.position="absolute",B.style.opacity="0",document.body.appendChild(B),B.select(),document.execCommand("copy"),B.remove()}function O(){var z,B;return((B=(z=document==null?void 0:document.getSelection)==null?void 0:z.call(document))==null?void 0:B.toString())??""}function V(z){return z==="granted"||z==="prompt"}return{isSupported:y,text:x,copied:b,copy:P}}function VB(e,t={}){const n=Kt(!1),i=Ca(null);let a=0,u=!0;if(Jy){const l=typeof t=="function"?{onDrop:t}:t,s=f=>{var x;const y=Array.from(((x=f.dataTransfer)==null?void 0:x.files)??[]);return i.value=y.length===0?null:y};uc(e,"dragenter",f=>{var x,b;const y=Array.from(((x=f==null?void 0:f.dataTransfer)==null?void 0:x.items)||[]).map(M=>M.kind==="file"?M.type:null).filter(MB);if(l.dataTypes&&f.dataTransfer){const M=re(l.dataTypes);if(u=typeof M=="function"?M(y):M?M.some(A=>y.includes(A)):!0,!u)return}f.preventDefault(),a+=1,n.value=!0,(b=l.onEnter)==null||b.call(l,s(f),f)}),uc(e,"dragover",f=>{var y;u&&(f.preventDefault(),(y=l.onOver)==null||y.call(l,s(f),f))}),uc(e,"dragleave",f=>{var y;u&&(f.preventDefault(),a-=1,a===0&&(n.value=!1),(y=l.onLeave)==null||y.call(l,s(f),f))}),uc(e,"drop",f=>{var y;f.preventDefault(),a=0,n.value=!1,(y=l.onDrop)==null||y.call(l,s(f),f)})}return{files:i,isOverDropZone:n}}const TT=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function jB(e,t={}){const{document:n=o4,autoExit:i=!1}=t,a=Wt(()=>xm(e)??(n==null?void 0:n.querySelector("html"))),u=Kt(!1),l=Wt(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(V=>n&&V in n||a.value&&V in a.value)),s=Wt(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(V=>n&&V in n||a.value&&V in a.value)),f=Wt(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(V=>n&&V in n||a.value&&V in a.value)),y=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(V=>n&&V in n),x=W1(()=>a.value&&n&&l.value!==void 0&&s.value!==void 0&&f.value!==void 0),b=()=>y?(n==null?void 0:n[y])===a.value:!1,M=()=>{if(f.value){if(n&&n[f.value]!=null)return n[f.value];{const V=a.value;if((V==null?void 0:V[f.value])!=null)return!!V[f.value]}}return!1};async function A(){if(!(!x.value||!u.value)){if(s.value)if((n==null?void 0:n[s.value])!=null)await n[s.value]();else{const V=a.value;(V==null?void 0:V[s.value])!=null&&await V[s.value]()}u.value=!1}}async function P(){if(!x.value||u.value)return;M()&&await A();const V=a.value;l.value&&(V==null?void 0:V[l.value])!=null&&(await V[l.value](),u.value=!0)}async function L(){await(u.value?A():P())}const O=()=>{const V=M();(!V||V&&b())&&(u.value=V)};return uc(n,TT,O,!1),uc(()=>xm(a),TT,O,!1),i&&Qy(A),{isSupported:x,isFullscreen:u,enter:P,exit:A,toggle:L}}function UB(e={}){const{enableHighAccuracy:t=!0,maximumAge:n=3e4,timeout:i=27e3,navigator:a=FM,immediate:u=!0}=e,l=W1(()=>a&&"geolocation"in a),s=Kt(null),f=Ca(null),y=Kt({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function x(P){s.value=P.timestamp,y.value=P.coords,f.value=null}let b=null;function M(){return new Promise((P,L)=>{if(!l.value||!(a!=null&&a.geolocation)){L(new Error("Geolocation is not supported"));return}let O=!1;b=a.geolocation.watchPosition(V=>{x(V),O||(O=!0,P(V))},V=>{f.value=V,O||(O=!0,L(V))},{enableHighAccuracy:t,maximumAge:n,timeout:i})})}u&&M();function A(){b!=null&&(a!=null&&a.geolocation)&&(a.geolocation.clearWatch(b),b=null)}return Qy(()=>{A()}),{isSupported:l,coords:y,locatedAt:s,error:f,resume:M,pause:A}}const $B={multiple:!0,accept:"*",reset:!1,directory:!1};function HB(e={}){const{document:t=o4}=e,n=Kt(null),{on:i,trigger:a}=oF();let u;t&&(u=t.createElement("input"),u.type="file",u.onchange=f=>{const y=f.target;n.value=y.files,a(n.value)});const l=()=>{n.value=null,u&&u.value&&(u.value="",a(null))},s=f=>{if(!u)return;const y={...$B,...e,...f};u.multiple=y.multiple,u.accept=y.accept,u.webkitdirectory=y.directory,TB(y,"capture")&&(u.capture=y.capture),y.reset&&l(),u.click()};return{files:U1(n),open:s,reset:l,onChange:i}}const GB=An({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(e,{emit:t}){const n=e,i=t,{onChange:a,open:u}=HB({multiple:n.multiple,accept:n.accept});a(y=>{y&&l(Array.from(y))});function l(y){y&&i("change",n.multiple?y:y[0])}const s=Kt(),{isOverDropZone:f}=VB(s,l);return(y,x)=>(xe(),et("div",{class:ii(["ddf__area",{ddf__active:re(f)}]),ref_key:"dropZoneRef",ref:s,onClick:x[0]||(x[0]=b=>re(u)())},x[1]||(x[1]=[EA('<label class="ddf__label" for="upload-file" data-v-70127256><i class="ddf__label-inner" data-v-70127256><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-70127256><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-70127256></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-70127256></path></svg><span class="ddf__text" data-v-70127256> Drag and drop your files here </span><span class="ddf__subtext" data-v-70127256> or click to browse your files </span></i></label>',1)]),2))}}),_n=(e,t)=>{const n=e.__vccOpts||e;for(const[i,a]of t)n[i]=a;return n},ZB=_n(GB,[["__scopeId","data-v-70127256"]]);function u4(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function c4(e){return Array.isArray(e)&&e.every(u4)}function h4(e){return Array.isArray(e)&&e.every(c4)}function WB(e){return Array.isArray(e)&&e.every(h4)}function qB(e){return e&&typeof e=="object"&&"geometry"in e}function d4(e){return Array.isArray(e)?1+Math.max(0,...e.map(d4)):0}function KB(){return{detectGeoType:t=>{if(t!=null&&t.type&&(t!=null&&t.coordinates))return t.type;switch(d4(t)){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";case 4:return"MultiPolygon";default:throw new Error("Unsupported geometry depth")}}}}function YB(){const e=t=>{if(t.type==="GeometryCollection")return t.geometries.every(e);const n=t.coordinates;switch(t.type){case"Point":return u4(n);case"MultiPoint":case"LineString":return c4(n);case"Polygon":case"MultiLineString":return h4(n);case"MultiPolygon":return WB(n);default:return!1}};return{validateGeometry:e}}function XB(){const{detectGeoType:e}=KB(),{validateGeometry:t}=YB(),n=a=>{if(!qB(a))throw new Error("Invalid input: not an InputFeature");const{geometry:u,...l}=a,s=u!=null&&u.type&&(u!=null&&u.coordinates)?u:{type:e(u),coordinates:u};if(!t(s))throw new Error("Invalid geometry");return{type:"Feature",geometry:s,properties:l}};return{convertFeature:n,convertList:a=>({type:"FeatureCollection",features:a.map(n)})}}const PT=e=>{if(typeof e=="string"){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://"))return"url";if(e.startsWith("data:"))return"base64"}else{if(e instanceof Blob||e instanceof File)return"blob";if(e instanceof ArrayBuffer||e instanceof Uint8Array)return"buffer"}throw new Error("Khng th xc nh loi d liu  ti")},kT=e=>{var i;const t=(i=e.split(".").pop())==null?void 0:i.toLowerCase();return{pdf:"application/pdf",txt:"text/plain",csv:"text/csv",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",html:"text/html"}[t||""]||"application/octet-stream"};function QB(){const e=Kt("idle"),t=Kt(null),n=()=>{e.value="idle",t.value=null},i=async(u,l,s,f)=>{n();try{e.value="downloading";const y=s||PT(u),x=l||"download",b=f||kT(x);let M;switch(y){case"url":{const A=await fetch(u);if(!A.ok)throw new Error(`Fetch failed: ${A.status} ${A.statusText}`);M=await A.blob();break}case"base64":{const A=u,P=atob(A.split(",")[1]||A),L=new ArrayBuffer(P.length),O=new Uint8Array(L);for(let V=0;V<P.length;V++)O[V]=P.charCodeAt(V);M=new Blob([L],{type:b});break}case"blob":{M=u;break}case"buffer":{if(u instanceof ArrayBuffer)M=new Blob([u],{type:b});else if(u instanceof Uint8Array)M=new Blob([u.buffer],{type:b});else throw new Error("Khng th chuyn buffer thnh Blob");break}default:throw new Error("Loi d liu khng hp l")}a(M,x),e.value="success"}catch(y){e.value="error",t.value=y.message||"Li khng xc nh"}},a=(u,l)=>{const s=document.createElement("a"),f=URL.createObjectURL(u);s.href=f,s.download=l,s.click(),URL.revokeObjectURL(f)};return{status:e,error:t,downloadFile:i,detectType:PT,guessMimeType:kT}}function JB(e={}){const t=new eN;async function n(i,a={}){return t.read(i,Object.assign({},e,a))}return{read:n}}class eN{async read(t,n={}){const i=n.parser||this.getParser(t),a=n.type||"text",u=n.onSuccess,l=n.onError;try{let s=await LT.read(t,a);return i&&(s=await i.parse(s,t)),u&&u(s),s}catch(s){throw l&&l(s),s}}getParser(t){switch(LT.getExtension(t)){case"geojson":case"json":return new tN}}}class LT{static getExtension(t){return t.name.split(".").pop()}static async read(t,n){return new Promise((i,a)=>{const u=new window.FileReader;u.onload=l=>l.target&&i(l.target.result),u.onerror=l=>a(l),n==="text"?u.readAsText(t):n==="arraybuffer"?u.readAsArrayBuffer(t):n==="binary"?u.readAsDataURL(t):a(new Error(`Read file as ${n} is not available`))})}}class tN{parse(t,n){const i=JSON.parse(t);return Promise.resolve(this.toGeojson(i))}toGeojson(t){return t.crs,t}}var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function q1(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var RA={},BM={};BM.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31};var f4={},nN={C:254,L:1,D:8,N:18,M:18,F:18,B:8},OA={};OA.lpad=function(t,n,i){for(;t.length<n;)t=i+t;return t};OA.rpad=function(t,n,i){for(;t.length<n;)t=t+i;return t};OA.writeField=function(t,n,i,a){for(var u=0;u<n;u++)t.setUint8(a,i.charCodeAt(u)),a++;return a};var zA={},rN=nN,iN={string:"C",number:"N",boolean:"L",null:"C"};zA.multi=sN;zA.bytesPer=oN;zA.obj=p4;function sN(e){var t={};e.forEach(n);function n(i){aN(t,i)}return p4(t)}function aN(e,t){for(var n in t){var i=typeof t[n]<"u"&&t[n]!==null;(typeof e[n]>"u"||i)&&(e[n]=t[n])}return e}function p4(e){var t={},n=[];for(var i in e)t[i]=e[i]===null?"null":typeof e[i];for(var a in t){var u=iN[t[a]];u&&n.push({name:a,type:u,size:rN[u]})}return n}function oN(e){return e.reduce(function(t,n){return t+n.size},1)}var qg=OA,DT=zA,lN=function(t,n){var i=n||DT.multi(t),a=32*i.length+1,u=DT.bytesPer(i),l=new ArrayBuffer(a+32+u*t.length+1),s=new Date,f=new DataView(l);f.setUint8(0,3),f.setUint8(1,s.getFullYear()-1900),f.setUint8(2,s.getMonth()+1),f.setUint8(3,s.getDate()),f.setUint32(4,t.length,!0);var y=a+32;f.setUint16(8,y,!0),f.setUint16(10,u,!0),f.setInt8(32+a-1,13),i.forEach(function(b,M){b.name.split("").slice(0,10).forEach(function(A,P){f.setInt8(32+M*32+P,A.charCodeAt(0))}),f.setInt8(32+M*32+11,b.type.charCodeAt(0)),f.setInt8(32+M*32+16,b.size),b.type=="N"&&f.setInt8(32+M*32+17,3)});var x=a+32;return t.forEach(function(b,M){f.setUint8(x,32),x++,i.forEach(function(A){var P=b[A.name];switch((P===null||typeof P>"u")&&(P=""),A.type){case"L":f.setUint8(x,P?84:70),x++;break;case"D":x=qg.writeField(f,8,qg.lpad(P.toString(),8," "),x);break;case"N":x=qg.writeField(f,A.size,qg.lpad(P.toString(),A.size," ").substr(0,18),x);break;case"C":x=qg.writeField(f,A.size,qg.rpad(P.toString(),A.size," "),x);break;default:throw new Error("Unknown field type")}})}),f.setUint8(x,26),f};f4.structure=lN;var m4='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]',ev={},K1={};K1.enlarge=function(t,n){return n[0]<t.xmin&&(t.xmin=n[0]),n[0]>t.xmax&&(t.xmax=n[0]),n[1]<t.ymin&&(t.ymin=n[1]),n[1]>t.ymax&&(t.ymax=n[1]),t};K1.enlargeExtent=function(t,n){return n.xmax>t.xmax&&(t.xmax=n.xmax),n.xmin<t.xmin&&(t.xmin=n.xmin),n.ymax>t.ymax&&(t.ymax=n.ymax),n.ymin<t.ymin&&(t.ymin=n.ymin),t};K1.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}};var RT=K1;ev.write=function(t,n,i,a){var u=28,l=100,s=0,f=0;t.forEach(function(x,b){i.setInt32(s,b+1),i.setInt32(s+4,10),i.setInt32(s+8,1,!0),i.setFloat64(s+12,x[0],!0),i.setFloat64(s+20,x[1],!0),a.setInt32(f,l/2),a.setInt32(f+4,10),f+=8,s+=u,l+=u})};ev.extent=function(e){return e.reduce(function(t,n){return RT.enlarge(t,n)},RT.blank())};ev.parts=function(t,n){return t.length};ev.shxLength=function(e){return e.length*8};ev.shpLength=function(e){return e.length*28};var tv={},Vx=K1,OT=BM;tv.write=function(t,n,i,a,u){var l=0,s=0,f=100;t.forEach(y);function y(x,b){var M=FA(x),A=g4([x],u),P=M.length*16+48+(A-1)*4,L=M.reduce(function(z,B){return Vx.enlarge(z,B)},Vx.blank());a.setInt32(s,f/2),a.setInt32(s+4,P/2),s+=8,f+=P+8,i.setInt32(l,b+1),i.setInt32(l+4,P/2),i.setInt32(l+8,u,!0),i.setFloat64(l+12,L.xmin,!0),i.setFloat64(l+20,L.ymin,!0),i.setFloat64(l+28,L.xmax,!0),i.setFloat64(l+36,L.ymax,!0),i.setInt32(l+44,A,!0),i.setInt32(l+48,M.length,!0),i.setInt32(l+52,0,!0);for(var O=x.reduce(function(z,B){return Array.isArray(B[0][0])?z=z.concat(B):z.push(B),z},[]),V=1;V<A;V++)i.setInt32(l+52+V*4,O.reduce(function(z,B,U){return U<V?z+B.length:z},0),!0);M.forEach(function(B,U){i.setFloat64(l+56+U*16+(A-1)*4,B[0],!0),i.setFloat64(l+56+U*16+(A-1)*4+8,B[1],!0)}),l+=P+8}};tv.shpLength=function(e){return e.length*56+FA(e).length*16};tv.shxLength=function(e){return e.length*8};tv.extent=function(e){return FA(e).reduce(function(t,n){return Vx.enlarge(t,n)},Vx.blank())};function g4(e,t){var n=1;return(t===OT.geometries.POLYGON||t===OT.geometries.POLYLINE)&&(n=e.reduce(function(i,a){return i+=a.length,Array.isArray(a[0][0][0])&&(i+=a.reduce(function(u,l){return u+l.length-1},0)),i},0)),n}tv.parts=g4;function FA(e,t){return t===void 0&&(t=[]),typeof e[0][0]=="object"?e.reduce(function(n,i){return n.concat(FA(i))},t):e}var uN=BM,cN=f4,hN=m4,dN=ev,zT=tv,fN={1:dN,5:zT,3:zT},y4=pN;function pN(e,t,n,i){var a=uN.geometries[t],u=fN[a],l=u.parts(n,a),s=100+(l-n.length)*4+u.shpLength(n),f=100+u.shxLength(n),y=new ArrayBuffer(s),x=new DataView(y),b=new ArrayBuffer(f),M=new DataView(b),A=u.extent(n);FT(x,a),FT(M,a),BT(A,x),BT(A,M),u.write(n,A,new DataView(y,100),new DataView(b,100),a),x.setInt32(24,s/2),M.setInt32(24,50+n.length*4);var P=cN.structure(e);i(null,{shp:x,shx:M,dbf:P,prj:hN})}function FT(e,t){e.setInt32(0,9994),e.setInt32(28,1e3,!0),e.setInt32(32,t,!0)}function BT(e,t){t.setFloat64(36,e.xmin,!0),t.setFloat64(44,e.ymin,!0),t.setFloat64(52,e.xmax,!0),t.setFloat64(60,e.ymax,!0)}var nv={};nv.point=Y1("Point","POINT");nv.line=Y1("LineString","POLYLINE");nv.multiline=Y1("MultiLineString","POLYLINE");nv.polygon=Y1("Polygon","POLYGON");nv.multipolygon=Y1("MultiPolygon","POLYGON");function Y1(e,t){return function(n){var i=n.features.filter(gN(e));return{geometries:t==="POLYLINE"?[i.map(NT)]:i.map(NT),properties:i.map(mN),type:t}}}function NT(e){return e.geometry.coordinates}function mN(e){return e.properties}function gN(e){return Array.isArray(e)?function(t){return e.includes(t.geometry.type)}:function(t){return t.geometry.type===e}}function Nb(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var v4={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,a,u){function l(y,x){if(!a[y]){if(!i[y]){var b=typeof Nb=="function"&&Nb;if(!x&&b)return b(y,!0);if(s)return s(y,!0);var M=new Error("Cannot find module '"+y+"'");throw M.code="MODULE_NOT_FOUND",M}var A=a[y]={exports:{}};i[y][0].call(A.exports,function(P){var L=i[y][1][P];return l(L||P)},A,A.exports,n,i,a,u)}return a[y].exports}for(var s=typeof Nb=="function"&&Nb,f=0;f<u.length;f++)l(u[f]);return l}({1:[function(n,i,a){var u=n("./utils"),l=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(f){for(var y,x,b,M,A,P,L,O=[],V=0,z=f.length,B=z,U=u.getTypeOf(f)!=="string";V<f.length;)B=z-V,b=U?(y=f[V++],x=V<z?f[V++]:0,V<z?f[V++]:0):(y=f.charCodeAt(V++),x=V<z?f.charCodeAt(V++):0,V<z?f.charCodeAt(V++):0),M=y>>2,A=(3&y)<<4|x>>4,P=1<B?(15&x)<<2|b>>6:64,L=2<B?63&b:64,O.push(s.charAt(M)+s.charAt(A)+s.charAt(P)+s.charAt(L));return O.join("")},a.decode=function(f){var y,x,b,M,A,P,L=0,O=0,V="data:";if(f.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");var z,B=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===s.charAt(64)&&B--,f.charAt(f.length-2)===s.charAt(64)&&B--,B%1!=0)throw new Error("Invalid base64 input, bad content length.");for(z=l.uint8array?new Uint8Array(0|B):new Array(0|B);L<f.length;)y=s.indexOf(f.charAt(L++))<<2|(M=s.indexOf(f.charAt(L++)))>>4,x=(15&M)<<4|(A=s.indexOf(f.charAt(L++)))>>2,b=(3&A)<<6|(P=s.indexOf(f.charAt(L++))),z[O++]=y,A!==64&&(z[O++]=x),P!==64&&(z[O++]=b);return z}},{"./support":30,"./utils":32}],2:[function(n,i,a){var u=n("./external"),l=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),f=n("./stream/DataLengthProbe");function y(x,b,M,A,P){this.compressedSize=x,this.uncompressedSize=b,this.crc32=M,this.compression=A,this.compressedContent=P}y.prototype={getContentWorker:function(){var x=new l(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),b=this;return x.on("end",function(){if(this.streamInfo.data_length!==b.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),x},getCompressedWorker:function(){return new l(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(x,b,M){return x.pipe(new s).pipe(new f("uncompressedSize")).pipe(b.compressWorker(M)).pipe(new f("compressedSize")).withStreamInfo("compression",b)},i.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,a){var u=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,a){var u=n("./utils"),l=function(){for(var s,f=[],y=0;y<256;y++){s=y;for(var x=0;x<8;x++)s=1&s?3988292384^s>>>1:s>>>1;f[y]=s}return f}();i.exports=function(s,f){return s!==void 0&&s.length?u.getTypeOf(s)!=="string"?function(y,x,b,M){var A=l,P=M+b;y^=-1;for(var L=M;L<P;L++)y=y>>>8^A[255&(y^x[L])];return-1^y}(0|f,s,s.length,0):function(y,x,b,M){var A=l,P=M+b;y^=-1;for(var L=M;L<P;L++)y=y>>>8^A[255&(y^x.charCodeAt(L))];return-1^y}(0|f,s,s.length,0):0}},{"./utils":32}],5:[function(n,i,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,i,a){var u=null;u=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:u}},{lie:37}],7:[function(n,i,a){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),s=n("./utils"),f=n("./stream/GenericWorker"),y=u?"uint8array":"array";function x(b,M){f.call(this,"FlateWorker/"+b),this._pako=null,this._pakoAction=b,this._pakoOptions=M,this.meta={}}a.magic="\b\0",s.inherits(x,f),x.prototype.processChunk=function(b){this.meta=b.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(y,b.data),!1)},x.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},x.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},x.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var b=this;this._pako.onData=function(M){b.push({data:M,meta:b.meta})}},a.compressWorker=function(b){return new x("Deflate",b)},a.uncompressWorker=function(){return new x("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,a){function u(A,P){var L,O="";for(L=0;L<P;L++)O+=String.fromCharCode(255&A),A>>>=8;return O}function l(A,P,L,O,V,z){var B,U,Z=A.file,te=A.compression,Y=z!==y.utf8encode,W=s.transformTo("string",z(Z.name)),H=s.transformTo("string",y.utf8encode(Z.name)),ne=Z.comment,le=s.transformTo("string",z(ne)),Q=s.transformTo("string",y.utf8encode(ne)),ce=H.length!==Z.name.length,K=Q.length!==ne.length,Le="",Ue="",Be="",tt=Z.dir,ut=Z.date,Tt={crc32:0,compressedSize:0,uncompressedSize:0};P&&!L||(Tt.crc32=A.crc32,Tt.compressedSize=A.compressedSize,Tt.uncompressedSize=A.uncompressedSize);var Ge=0;P&&(Ge|=8),Y||!ce&&!K||(Ge|=2048);var Ne=0,Dt=0;tt&&(Ne|=16),V==="UNIX"?(Dt=798,Ne|=function(St,en){var pt=St;return St||(pt=en?16893:33204),(65535&pt)<<16}(Z.unixPermissions,tt)):(Dt=20,Ne|=function(St){return 63&(St||0)}(Z.dosPermissions)),B=ut.getUTCHours(),B<<=6,B|=ut.getUTCMinutes(),B<<=5,B|=ut.getUTCSeconds()/2,U=ut.getUTCFullYear()-1980,U<<=4,U|=ut.getUTCMonth()+1,U<<=5,U|=ut.getUTCDate(),ce&&(Ue=u(1,1)+u(x(W),4)+H,Le+="up"+u(Ue.length,2)+Ue),K&&(Be=u(1,1)+u(x(le),4)+Q,Le+="uc"+u(Be.length,2)+Be);var Bt="";return Bt+=`
\0`,Bt+=u(Ge,2),Bt+=te.magic,Bt+=u(B,2),Bt+=u(U,2),Bt+=u(Tt.crc32,4),Bt+=u(Tt.compressedSize,4),Bt+=u(Tt.uncompressedSize,4),Bt+=u(W.length,2),Bt+=u(Le.length,2),{fileRecord:b.LOCAL_FILE_HEADER+Bt+W+Le,dirRecord:b.CENTRAL_FILE_HEADER+u(Dt,2)+Bt+u(le.length,2)+"\0\0\0\0"+u(Ne,4)+u(O,4)+W+Le+le}}var s=n("../utils"),f=n("../stream/GenericWorker"),y=n("../utf8"),x=n("../crc32"),b=n("../signature");function M(A,P,L,O){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=P,this.zipPlatform=L,this.encodeFileName=O,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(M,f),M.prototype.push=function(A){var P=A.meta.percent||0,L=this.entriesCount,O=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,f.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:L?(P+100*(L-O-1))/L:100}}))},M.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var P=this.streamFiles&&!A.file.dir;if(P){var L=l(A,P,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:L.fileRecord,meta:{percent:0}})}else this.accumulate=!0},M.prototype.closedSource=function(A){this.accumulate=!1;var P=this.streamFiles&&!A.file.dir,L=l(A,P,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(L.dirRecord),P)this.push({data:function(O){return b.DATA_DESCRIPTOR+u(O.crc32,4)+u(O.compressedSize,4)+u(O.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:L.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},M.prototype.flush=function(){for(var A=this.bytesWritten,P=0;P<this.dirRecords.length;P++)this.push({data:this.dirRecords[P],meta:{percent:100}});var L=this.bytesWritten-A,O=function(V,z,B,U,Z){var te=s.transformTo("string",Z(U));return b.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(V,2)+u(V,2)+u(z,4)+u(B,4)+u(te.length,2)+te}(this.dirRecords.length,L,A,this.zipComment,this.encodeFileName);this.push({data:O,meta:{percent:100}})},M.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},M.prototype.registerPrevious=function(A){this._sources.push(A);var P=this;return A.on("data",function(L){P.processChunk(L)}),A.on("end",function(){P.closedSource(P.previous.streamInfo),P._sources.length?P.prepareNextSource():P.end()}),A.on("error",function(L){P.error(L)}),this},M.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},M.prototype.error=function(A){var P=this._sources;if(!f.prototype.error.call(this,A))return!1;for(var L=0;L<P.length;L++)try{P[L].error(A)}catch{}return!0},M.prototype.lock=function(){f.prototype.lock.call(this);for(var A=this._sources,P=0;P<A.length;P++)A[P].lock()},i.exports=M},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,a){var u=n("../compressions"),l=n("./ZipFileWorker");a.generateWorker=function(s,f,y){var x=new l(f.streamFiles,y,f.platform,f.encodeFileName),b=0;try{s.forEach(function(M,A){b++;var P=function(z,B){var U=z||B,Z=u[U];if(!Z)throw new Error(U+" is not a valid compression method !");return Z}(A.options.compression,f.compression),L=A.options.compressionOptions||f.compressionOptions||{},O=A.dir,V=A.date;A._compressWorker(P,L).withStreamInfo("file",{name:M,dir:O,date:V,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(x)}),x.entriesCount=b}catch(M){x.error(M)}return x}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,a){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new u;for(var s in this)typeof this[s]!="function"&&(l[s]=this[s]);return l}}(u.prototype=n("./object")).loadAsync=n("./load"),u.support=n("./support"),u.defaults=n("./defaults"),u.version="3.10.1",u.loadAsync=function(l,s){return new u().loadAsync(l,s)},u.external=n("./external"),i.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,a){var u=n("./utils"),l=n("./external"),s=n("./utf8"),f=n("./zipEntries"),y=n("./stream/Crc32Probe"),x=n("./nodejsUtils");function b(M){return new l.Promise(function(A,P){var L=M.decompressed.getContentWorker().pipe(new y);L.on("error",function(O){P(O)}).on("end",function(){L.streamInfo.crc32!==M.decompressed.crc32?P(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}i.exports=function(M,A){var P=this;return A=u.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),x.isNode&&x.isStream(M)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",M,!0,A.optimizedBinaryString,A.base64).then(function(L){var O=new f(A);return O.load(L),O}).then(function(L){var O=[l.Promise.resolve(L)],V=L.files;if(A.checkCRC32)for(var z=0;z<V.length;z++)O.push(b(V[z]));return l.Promise.all(O)}).then(function(L){for(var O=L.shift(),V=O.files,z=0;z<V.length;z++){var B=V[z],U=B.fileNameStr,Z=u.resolve(B.fileNameStr);P.file(Z,B.decompressed,{binary:!0,optimizedBinaryString:!0,date:B.date,dir:B.dir,comment:B.fileCommentStr.length?B.fileCommentStr:null,unixPermissions:B.unixPermissions,dosPermissions:B.dosPermissions,createFolders:A.createFolders}),B.dir||(P.file(Z).unsafeOriginalName=U)}return O.zipComment.length&&(P.comment=O.zipComment),P})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,a){var u=n("../utils"),l=n("../stream/GenericWorker");function s(f,y){l.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(y)}u.inherits(s,l),s.prototype._bindStream=function(f){var y=this;(this._stream=f).pause(),f.on("data",function(x){y.push({data:x,meta:{percent:0}})}).on("error",function(x){y.isPaused?this.generatedError=x:y.error(x)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},s.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,a){var u=n("readable-stream").Readable;function l(s,f,y){u.call(this,f),this._helper=s;var x=this;s.on("data",function(b,M){x.push(b)||x._helper.pause(),y&&y(M)}).on("error",function(b){x.emit("error",b)}).on("end",function(){x.push(null)})}n("../utils").inherits(l,u),l.prototype._read=function(){this._helper.resume()},i.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,i,a){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(u,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,l);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new Buffer(u,l)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var l=new Buffer(u);return l.fill(0),l},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(n,i,a){function u(Z,te,Y){var W,H=s.getTypeOf(te),ne=s.extend(Y||{},x);ne.date=ne.date||new Date,ne.compression!==null&&(ne.compression=ne.compression.toUpperCase()),typeof ne.unixPermissions=="string"&&(ne.unixPermissions=parseInt(ne.unixPermissions,8)),ne.unixPermissions&&16384&ne.unixPermissions&&(ne.dir=!0),ne.dosPermissions&&16&ne.dosPermissions&&(ne.dir=!0),ne.dir&&(Z=V(Z)),ne.createFolders&&(W=O(Z))&&z.call(this,W,!0);var le=H==="string"&&ne.binary===!1&&ne.base64===!1;Y&&Y.binary!==void 0||(ne.binary=!le),(te instanceof b&&te.uncompressedSize===0||ne.dir||!te||te.length===0)&&(ne.base64=!1,ne.binary=!0,te="",ne.compression="STORE",H="string");var Q=null;Q=te instanceof b||te instanceof f?te:P.isNode&&P.isStream(te)?new L(Z,te):s.prepareContent(Z,te,ne.binary,ne.optimizedBinaryString,ne.base64);var ce=new M(Z,Q,ne);this.files[Z]=ce}var l=n("./utf8"),s=n("./utils"),f=n("./stream/GenericWorker"),y=n("./stream/StreamHelper"),x=n("./defaults"),b=n("./compressedObject"),M=n("./zipObject"),A=n("./generate"),P=n("./nodejsUtils"),L=n("./nodejs/NodejsStreamInputAdapter"),O=function(Z){Z.slice(-1)==="/"&&(Z=Z.substring(0,Z.length-1));var te=Z.lastIndexOf("/");return 0<te?Z.substring(0,te):""},V=function(Z){return Z.slice(-1)!=="/"&&(Z+="/"),Z},z=function(Z,te){return te=te!==void 0?te:x.createFolders,Z=V(Z),this.files[Z]||u.call(this,Z,null,{dir:!0,createFolders:te}),this.files[Z]};function B(Z){return Object.prototype.toString.call(Z)==="[object RegExp]"}var U={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Z){var te,Y,W;for(te in this.files)W=this.files[te],(Y=te.slice(this.root.length,te.length))&&te.slice(0,this.root.length)===this.root&&Z(Y,W)},filter:function(Z){var te=[];return this.forEach(function(Y,W){Z(Y,W)&&te.push(W)}),te},file:function(Z,te,Y){if(arguments.length!==1)return Z=this.root+Z,u.call(this,Z,te,Y),this;if(B(Z)){var W=Z;return this.filter(function(ne,le){return!le.dir&&W.test(ne)})}var H=this.files[this.root+Z];return H&&!H.dir?H:null},folder:function(Z){if(!Z)return this;if(B(Z))return this.filter(function(H,ne){return ne.dir&&Z.test(H)});var te=this.root+Z,Y=z.call(this,te),W=this.clone();return W.root=Y.name,W},remove:function(Z){Z=this.root+Z;var te=this.files[Z];if(te||(Z.slice(-1)!=="/"&&(Z+="/"),te=this.files[Z]),te&&!te.dir)delete this.files[Z];else for(var Y=this.filter(function(H,ne){return ne.name.slice(0,Z.length)===Z}),W=0;W<Y.length;W++)delete this.files[Y[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Z){var te,Y={};try{if((Y=s.extend(Z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=Y.type.toLowerCase(),Y.compression=Y.compression.toUpperCase(),Y.type==="binarystring"&&(Y.type="string"),!Y.type)throw new Error("No output type specified.");s.checkSupport(Y.type),Y.platform!=="darwin"&&Y.platform!=="freebsd"&&Y.platform!=="linux"&&Y.platform!=="sunos"||(Y.platform="UNIX"),Y.platform==="win32"&&(Y.platform="DOS");var W=Y.comment||this.comment||"";te=A.generateWorker(this,Y,W)}catch(H){(te=new f("error")).error(H)}return new y(te,Y.type||"string",Y.mimeType)},generateAsync:function(Z,te){return this.generateInternalStream(Z).accumulate(te)},generateNodeStream:function(Z,te){return(Z=Z||{}).type||(Z.type="nodebuffer"),this.generateInternalStream(Z).toNodejsStream(te)}};i.exports=U},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,a){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,a){var u=n("./DataReader");function l(s){u.call(this,s);for(var f=0;f<this.data.length;f++)s[f]=255&s[f]}n("../utils").inherits(l,u),l.prototype.byteAt=function(s){return this.data[this.zero+s]},l.prototype.lastIndexOfSignature=function(s){for(var f=s.charCodeAt(0),y=s.charCodeAt(1),x=s.charCodeAt(2),b=s.charCodeAt(3),M=this.length-4;0<=M;--M)if(this.data[M]===f&&this.data[M+1]===y&&this.data[M+2]===x&&this.data[M+3]===b)return M-this.zero;return-1},l.prototype.readAndCheckSignature=function(s){var f=s.charCodeAt(0),y=s.charCodeAt(1),x=s.charCodeAt(2),b=s.charCodeAt(3),M=this.readData(4);return f===M[0]&&y===M[1]&&x===M[2]&&b===M[3]},l.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,i,a){var u=n("../utils");function l(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var f,y=0;for(this.checkOffset(s),f=this.index+s-1;f>=this.index;f--)y=(y<<8)+this.byteAt(f);return this.index+=s,y},readString:function(s){return u.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},i.exports=l},{"../utils":32}],19:[function(n,i,a){var u=n("./Uint8ArrayReader");function l(s){u.call(this,s)}n("../utils").inherits(l,u),l.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,a){var u=n("./DataReader");function l(s){u.call(this,s)}n("../utils").inherits(l,u),l.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},l.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},l.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},l.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,i,a){var u=n("./ArrayReader");function l(s){u.call(this,s)}n("../utils").inherits(l,u),l.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,a){var u=n("../utils"),l=n("../support"),s=n("./ArrayReader"),f=n("./StringReader"),y=n("./NodeBufferReader"),x=n("./Uint8ArrayReader");i.exports=function(b){var M=u.getTypeOf(b);return u.checkSupport(M),M!=="string"||l.uint8array?M==="nodebuffer"?new y(b):l.uint8array?new x(u.transformTo("uint8array",b)):new s(u.transformTo("array",b)):new f(b)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,a){var u=n("./GenericWorker"),l=n("../utils");function s(f){u.call(this,"ConvertWorker to "+f),this.destType=f}l.inherits(s,u),s.prototype.processChunk=function(f){this.push({data:l.transformTo(this.destType,f.data),meta:f.meta})},i.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,a){var u=n("./GenericWorker"),l=n("../crc32");function s(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,u),s.prototype.processChunk=function(f){this.streamInfo.crc32=l(f.data,this.streamInfo.crc32||0),this.push(f)},i.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,a){var u=n("../utils"),l=n("./GenericWorker");function s(f){l.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}u.inherits(s,l),s.prototype.processChunk=function(f){if(f){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+f.data.length}l.prototype.processChunk.call(this,f)},i.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,a){var u=n("../utils"),l=n("./GenericWorker");function s(f){l.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(x){y.dataIsReady=!0,y.data=x,y.max=x&&x.length||0,y.type=u.getTypeOf(x),y.isPaused||y._tickAndRepeat()},function(x){y.error(x)})}u.inherits(s,l),s.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,y);break;case"uint8array":f=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":f=this.data.slice(this.index,y)}return this.index=y,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,a){function u(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,s){return this._listeners[l].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,s){if(this._listeners[l])for(var f=0;f<this._listeners[l].length;f++)this._listeners[l][f].call(this,s)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var s=this;return l.on("data",function(f){s.processChunk(f)}),l.on("end",function(){s.end()}),l.on("error",function(f){s.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,s){return this.extraStreamInfo[l]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},i.exports=u},{}],29:[function(n,i,a){var u=n("../utils"),l=n("./ConvertWorker"),s=n("./GenericWorker"),f=n("../base64"),y=n("../support"),x=n("../external"),b=null;if(y.nodestream)try{b=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function M(P,L){return new x.Promise(function(O,V){var z=[],B=P._internalType,U=P._outputType,Z=P._mimeType;P.on("data",function(te,Y){z.push(te),L&&L(Y)}).on("error",function(te){z=[],V(te)}).on("end",function(){try{var te=function(Y,W,H){switch(Y){case"blob":return u.newBlob(u.transformTo("arraybuffer",W),H);case"base64":return f.encode(W);default:return u.transformTo(Y,W)}}(U,function(Y,W){var H,ne=0,le=null,Q=0;for(H=0;H<W.length;H++)Q+=W[H].length;switch(Y){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for(le=new Uint8Array(Q),H=0;H<W.length;H++)le.set(W[H],ne),ne+=W[H].length;return le;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+Y+"'")}}(B,z),Z);O(te)}catch(Y){V(Y)}z=[]}).resume()})}function A(P,L,O){var V=L;switch(L){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=L,this._mimeType=O,u.checkSupport(V),this._worker=P.pipe(new l(V)),P.lock()}catch(z){this._worker=new s("error"),this._worker.error(z)}}A.prototype={accumulate:function(P){return M(this,P)},on:function(P,L){var O=this;return P==="data"?this._worker.on(P,function(V){L.call(O,V.data,V.meta)}):this._worker.on(P,function(){u.delay(L,arguments,O)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(P){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new b(this,{objectMode:this._outputType!=="nodebuffer"},P)}},i.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var u=new ArrayBuffer(0);try{a.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(u),a.blob=l.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,a){for(var u=n("./utils"),l=n("./support"),s=n("./nodejsUtils"),f=n("./stream/GenericWorker"),y=new Array(256),x=0;x<256;x++)y[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;y[254]=y[254]=1;function b(){f.call(this,"utf-8 decode"),this.leftOver=null}function M(){f.call(this,"utf-8 encode")}a.utf8encode=function(A){return l.nodebuffer?s.newBufferFrom(A,"utf-8"):function(P){var L,O,V,z,B,U=P.length,Z=0;for(z=0;z<U;z++)(64512&(O=P.charCodeAt(z)))==55296&&z+1<U&&(64512&(V=P.charCodeAt(z+1)))==56320&&(O=65536+(O-55296<<10)+(V-56320),z++),Z+=O<128?1:O<2048?2:O<65536?3:4;for(L=l.uint8array?new Uint8Array(Z):new Array(Z),z=B=0;B<Z;z++)(64512&(O=P.charCodeAt(z)))==55296&&z+1<U&&(64512&(V=P.charCodeAt(z+1)))==56320&&(O=65536+(O-55296<<10)+(V-56320),z++),O<128?L[B++]=O:(O<2048?L[B++]=192|O>>>6:(O<65536?L[B++]=224|O>>>12:(L[B++]=240|O>>>18,L[B++]=128|O>>>12&63),L[B++]=128|O>>>6&63),L[B++]=128|63&O);return L}(A)},a.utf8decode=function(A){return l.nodebuffer?u.transformTo("nodebuffer",A).toString("utf-8"):function(P){var L,O,V,z,B=P.length,U=new Array(2*B);for(L=O=0;L<B;)if((V=P[L++])<128)U[O++]=V;else if(4<(z=y[V]))U[O++]=65533,L+=z-1;else{for(V&=z===2?31:z===3?15:7;1<z&&L<B;)V=V<<6|63&P[L++],z--;1<z?U[O++]=65533:V<65536?U[O++]=V:(V-=65536,U[O++]=55296|V>>10&1023,U[O++]=56320|1023&V)}return U.length!==O&&(U.subarray?U=U.subarray(0,O):U.length=O),u.applyFromCharCode(U)}(A=u.transformTo(l.uint8array?"uint8array":"array",A))},u.inherits(b,f),b.prototype.processChunk=function(A){var P=u.transformTo(l.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var L=P;(P=new Uint8Array(L.length+this.leftOver.length)).set(this.leftOver,0),P.set(L,this.leftOver.length)}else P=this.leftOver.concat(P);this.leftOver=null}var O=function(z,B){var U;for((B=B||z.length)>z.length&&(B=z.length),U=B-1;0<=U&&(192&z[U])==128;)U--;return U<0||U===0?B:U+y[z[U]]>B?U:B}(P),V=P;O!==P.length&&(l.uint8array?(V=P.subarray(0,O),this.leftOver=P.subarray(O,P.length)):(V=P.slice(0,O),this.leftOver=P.slice(O,P.length))),this.push({data:a.utf8decode(V),meta:A.meta})},b.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=b,u.inherits(M,f),M.prototype.processChunk=function(A){this.push({data:a.utf8encode(A.data),meta:A.meta})},a.Utf8EncodeWorker=M},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,a){var u=n("./support"),l=n("./base64"),s=n("./nodejsUtils"),f=n("./external");function y(L){return L}function x(L,O){for(var V=0;V<L.length;++V)O[V]=255&L.charCodeAt(V);return O}n("setimmediate"),a.newBlob=function(L,O){a.checkSupport("blob");try{return new Blob([L],{type:O})}catch{try{var V=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return V.append(L),V.getBlob(O)}catch{throw new Error("Bug : can't construct the Blob.")}}};var b={stringifyByChunk:function(L,O,V){var z=[],B=0,U=L.length;if(U<=V)return String.fromCharCode.apply(null,L);for(;B<U;)O==="array"||O==="nodebuffer"?z.push(String.fromCharCode.apply(null,L.slice(B,Math.min(B+V,U)))):z.push(String.fromCharCode.apply(null,L.subarray(B,Math.min(B+V,U)))),B+=V;return z.join("")},stringifyByChar:function(L){for(var O="",V=0;V<L.length;V++)O+=String.fromCharCode(L[V]);return O},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function M(L){var O=65536,V=a.getTypeOf(L),z=!0;if(V==="uint8array"?z=b.applyCanBeUsed.uint8array:V==="nodebuffer"&&(z=b.applyCanBeUsed.nodebuffer),z)for(;1<O;)try{return b.stringifyByChunk(L,V,O)}catch{O=Math.floor(O/2)}return b.stringifyByChar(L)}function A(L,O){for(var V=0;V<L.length;V++)O[V]=L[V];return O}a.applyFromCharCode=M;var P={};P.string={string:y,array:function(L){return x(L,new Array(L.length))},arraybuffer:function(L){return P.string.uint8array(L).buffer},uint8array:function(L){return x(L,new Uint8Array(L.length))},nodebuffer:function(L){return x(L,s.allocBuffer(L.length))}},P.array={string:M,array:y,arraybuffer:function(L){return new Uint8Array(L).buffer},uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return s.newBufferFrom(L)}},P.arraybuffer={string:function(L){return M(new Uint8Array(L))},array:function(L){return A(new Uint8Array(L),new Array(L.byteLength))},arraybuffer:y,uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return s.newBufferFrom(new Uint8Array(L))}},P.uint8array={string:M,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return L.buffer},uint8array:y,nodebuffer:function(L){return s.newBufferFrom(L)}},P.nodebuffer={string:M,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return P.nodebuffer.uint8array(L).buffer},uint8array:function(L){return A(L,new Uint8Array(L.length))},nodebuffer:y},a.transformTo=function(L,O){if(O=O||"",!L)return O;a.checkSupport(L);var V=a.getTypeOf(O);return P[V][L](O)},a.resolve=function(L){for(var O=L.split("/"),V=[],z=0;z<O.length;z++){var B=O[z];B==="."||B===""&&z!==0&&z!==O.length-1||(B===".."?V.pop():V.push(B))}return V.join("/")},a.getTypeOf=function(L){return typeof L=="string"?"string":Object.prototype.toString.call(L)==="[object Array]"?"array":u.nodebuffer&&s.isBuffer(L)?"nodebuffer":u.uint8array&&L instanceof Uint8Array?"uint8array":u.arraybuffer&&L instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(L){if(!u[L.toLowerCase()])throw new Error(L+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(L){var O,V,z="";for(V=0;V<(L||"").length;V++)z+="\\x"+((O=L.charCodeAt(V))<16?"0":"")+O.toString(16).toUpperCase();return z},a.delay=function(L,O,V){setImmediate(function(){L.apply(V||null,O||[])})},a.inherits=function(L,O){function V(){}V.prototype=O.prototype,L.prototype=new V},a.extend=function(){var L,O,V={};for(L=0;L<arguments.length;L++)for(O in arguments[L])Object.prototype.hasOwnProperty.call(arguments[L],O)&&V[O]===void 0&&(V[O]=arguments[L][O]);return V},a.prepareContent=function(L,O,V,z,B){return f.Promise.resolve(O).then(function(U){return u.blob&&(U instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(U))!==-1)&&typeof FileReader<"u"?new f.Promise(function(Z,te){var Y=new FileReader;Y.onload=function(W){Z(W.target.result)},Y.onerror=function(W){te(W.target.error)},Y.readAsArrayBuffer(U)}):U}).then(function(U){var Z=a.getTypeOf(U);return Z?(Z==="arraybuffer"?U=a.transformTo("uint8array",U):Z==="string"&&(B?U=l.decode(U):V&&z!==!0&&(U=function(te){return x(te,u.uint8array?new Uint8Array(te.length):new Array(te.length))}(U))),U):f.Promise.reject(new Error("Can't read the data of '"+L+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,a){var u=n("./reader/readerFor"),l=n("./utils"),s=n("./signature"),f=n("./zipEntry"),y=n("./support");function x(b){this.files=[],this.loadOptions=b}x.prototype={checkSignature:function(b){if(!this.reader.readAndCheckSignature(b)){this.reader.index-=4;var M=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(M)+", expected "+l.pretty(b)+")")}},isSignature:function(b,M){var A=this.reader.index;this.reader.setIndex(b);var P=this.reader.readString(4)===M;return this.reader.setIndex(A),P},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var b=this.reader.readData(this.zipCommentLength),M=y.uint8array?"uint8array":"array",A=l.transformTo(M,b);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var b,M,A,P=this.zip64EndOfCentralSize-44;0<P;)b=this.reader.readInt(2),M=this.reader.readInt(4),A=this.reader.readData(M),this.zip64ExtensibleData[b]={id:b,length:M,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var b,M;for(b=0;b<this.files.length;b++)M=this.files[b],this.reader.setIndex(M.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),M.readLocalPart(this.reader),M.handleUTF8(),M.processAttributes()},readCentralDir:function(){var b;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(b=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(b);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var b=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(b<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(b);var M=b;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(b=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(b),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var P=M-A;if(0<P)this.isSignature(M,s.CENTRAL_FILE_HEADER)||(this.reader.zero=P);else if(P<0)throw new Error("Corrupted zip: missing "+Math.abs(P)+" bytes.")},prepareReader:function(b){this.reader=u(b)},load:function(b){this.prepareReader(b),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=x},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,a){var u=n("./reader/readerFor"),l=n("./utils"),s=n("./compressedObject"),f=n("./crc32"),y=n("./utf8"),x=n("./compressions"),b=n("./support");function M(A,P){this.options=A,this.loadOptions=P}M.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var P,L;if(A.skip(22),this.fileNameLength=A.readInt(2),L=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(L),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((P=function(O){for(var V in x)if(Object.prototype.hasOwnProperty.call(x,V)&&x[V].magic===O)return x[V];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,P,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var P=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(P),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=u(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var P,L,O,V=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<V;)P=A.readInt(2),L=A.readInt(2),O=A.readData(L),this.extraFields[P]={id:P,length:L,value:O};A.setIndex(V)},handleUTF8:function(){var A=b.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var P=this.findExtraFieldUnicodePath();if(P!==null)this.fileNameStr=P;else{var L=l.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(L)}var O=this.findExtraFieldUnicodeComment();if(O!==null)this.fileCommentStr=O;else{var V=l.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(V)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var P=u(A.value);return P.readInt(1)!==1||f(this.fileName)!==P.readInt(4)?null:y.utf8decode(P.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var P=u(A.value);return P.readInt(1)!==1||f(this.fileComment)!==P.readInt(4)?null:y.utf8decode(P.readData(A.length-5))}return null}},i.exports=M},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,a){function u(P,L,O){this.name=P,this.dir=O.dir,this.date=O.date,this.comment=O.comment,this.unixPermissions=O.unixPermissions,this.dosPermissions=O.dosPermissions,this._data=L,this._dataBinary=O.binary,this.options={compression:O.compression,compressionOptions:O.compressionOptions}}var l=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),f=n("./utf8"),y=n("./compressedObject"),x=n("./stream/GenericWorker");u.prototype={internalStream:function(P){var L=null,O="string";try{if(!P)throw new Error("No output type specified.");var V=(O=P.toLowerCase())==="string"||O==="text";O!=="binarystring"&&O!=="text"||(O="string"),L=this._decompressWorker();var z=!this._dataBinary;z&&!V&&(L=L.pipe(new f.Utf8EncodeWorker)),!z&&V&&(L=L.pipe(new f.Utf8DecodeWorker))}catch(B){(L=new x("error")).error(B)}return new l(L,O,"")},async:function(P,L){return this.internalStream(P).accumulate(L)},nodeStream:function(P,L){return this.internalStream(P||"nodebuffer").toNodejsStream(L)},_compressWorker:function(P,L){if(this._data instanceof y&&this._data.compression.magic===P.magic)return this._data.getCompressedWorker();var O=this._decompressWorker();return this._dataBinary||(O=O.pipe(new f.Utf8EncodeWorker)),y.createWorkerFrom(O,P,L)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof x?this._data:new s(this._data)}};for(var b=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<b.length;A++)u.prototype[b[A]]=M;i.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,a){(function(u){var l,s,f=u.MutationObserver||u.WebKitMutationObserver;if(f){var y=0,x=new f(P),b=u.document.createTextNode("");x.observe(b,{characterData:!0}),l=function(){b.data=y=++y%2}}else if(u.setImmediate||u.MessageChannel===void 0)l="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var L=u.document.createElement("script");L.onreadystatechange=function(){P(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},u.document.documentElement.appendChild(L)}:function(){setTimeout(P,0)};else{var M=new u.MessageChannel;M.port1.onmessage=P,l=function(){M.port2.postMessage(0)}}var A=[];function P(){var L,O;s=!0;for(var V=A.length;V;){for(O=A,A=[],L=-1;++L<V;)O[L]();V=A.length}s=!1}i.exports=function(L){A.push(L)!==1||s||l()}}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,a){var u=n("immediate");function l(){}var s={},f=["REJECTED"],y=["FULFILLED"],x=["PENDING"];function b(V){if(typeof V!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,V!==l&&L(this,V)}function M(V,z,B){this.promise=V,typeof z=="function"&&(this.onFulfilled=z,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}function A(V,z,B){u(function(){var U;try{U=z(B)}catch(Z){return s.reject(V,Z)}U===V?s.reject(V,new TypeError("Cannot resolve promise with itself")):s.resolve(V,U)})}function P(V){var z=V&&V.then;if(V&&(typeof V=="object"||typeof V=="function")&&typeof z=="function")return function(){z.apply(V,arguments)}}function L(V,z){var B=!1;function U(Y){B||(B=!0,s.reject(V,Y))}function Z(Y){B||(B=!0,s.resolve(V,Y))}var te=O(function(){z(Z,U)});te.status==="error"&&U(te.value)}function O(V,z){var B={};try{B.value=V(z),B.status="success"}catch(U){B.status="error",B.value=U}return B}(i.exports=b).prototype.finally=function(V){if(typeof V!="function")return this;var z=this.constructor;return this.then(function(B){return z.resolve(V()).then(function(){return B})},function(B){return z.resolve(V()).then(function(){throw B})})},b.prototype.catch=function(V){return this.then(null,V)},b.prototype.then=function(V,z){if(typeof V!="function"&&this.state===y||typeof z!="function"&&this.state===f)return this;var B=new this.constructor(l);return this.state!==x?A(B,this.state===y?V:z,this.outcome):this.queue.push(new M(B,V,z)),B},M.prototype.callFulfilled=function(V){s.resolve(this.promise,V)},M.prototype.otherCallFulfilled=function(V){A(this.promise,this.onFulfilled,V)},M.prototype.callRejected=function(V){s.reject(this.promise,V)},M.prototype.otherCallRejected=function(V){A(this.promise,this.onRejected,V)},s.resolve=function(V,z){var B=O(P,z);if(B.status==="error")return s.reject(V,B.value);var U=B.value;if(U)L(V,U);else{V.state=y,V.outcome=z;for(var Z=-1,te=V.queue.length;++Z<te;)V.queue[Z].callFulfilled(z)}return V},s.reject=function(V,z){V.state=f,V.outcome=z;for(var B=-1,U=V.queue.length;++B<U;)V.queue[B].callRejected(z);return V},b.resolve=function(V){return V instanceof this?V:s.resolve(new this(l),V)},b.reject=function(V){var z=new this(l);return s.reject(z,V)},b.all=function(V){var z=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=V.length,U=!1;if(!B)return this.resolve([]);for(var Z=new Array(B),te=0,Y=-1,W=new this(l);++Y<B;)H(V[Y],Y);return W;function H(ne,le){z.resolve(ne).then(function(Q){Z[le]=Q,++te!==B||U||(U=!0,s.resolve(W,Z))},function(Q){U||(U=!0,s.reject(W,Q))})}},b.race=function(V){var z=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=V.length,U=!1;if(!B)return this.resolve([]);for(var Z=-1,te=new this(l);++Z<B;)Y=V[Z],z.resolve(Y).then(function(W){U||(U=!0,s.resolve(te,W))},function(W){U||(U=!0,s.reject(te,W))});var Y;return te}},{immediate:36}],38:[function(n,i,a){var u={};(0,n("./lib/utils/common").assign)(u,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,a){var u=n("./zlib/deflate"),l=n("./utils/common"),s=n("./utils/strings"),f=n("./zlib/messages"),y=n("./zlib/zstream"),x=Object.prototype.toString,b=0,M=-1,A=0,P=8;function L(V){if(!(this instanceof L))return new L(V);this.options=l.assign({level:M,method:P,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},V||{});var z=this.options;z.raw&&0<z.windowBits?z.windowBits=-z.windowBits:z.gzip&&0<z.windowBits&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var B=u.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if(B!==b)throw new Error(f[B]);if(z.header&&u.deflateSetHeader(this.strm,z.header),z.dictionary){var U;if(U=typeof z.dictionary=="string"?s.string2buf(z.dictionary):x.call(z.dictionary)==="[object ArrayBuffer]"?new Uint8Array(z.dictionary):z.dictionary,(B=u.deflateSetDictionary(this.strm,U))!==b)throw new Error(f[B]);this._dict_set=!0}}function O(V,z){var B=new L(z);if(B.push(V,!0),B.err)throw B.msg||f[B.err];return B.result}L.prototype.push=function(V,z){var B,U,Z=this.strm,te=this.options.chunkSize;if(this.ended)return!1;U=z===~~z?z:z===!0?4:0,typeof V=="string"?Z.input=s.string2buf(V):x.call(V)==="[object ArrayBuffer]"?Z.input=new Uint8Array(V):Z.input=V,Z.next_in=0,Z.avail_in=Z.input.length;do{if(Z.avail_out===0&&(Z.output=new l.Buf8(te),Z.next_out=0,Z.avail_out=te),(B=u.deflate(Z,U))!==1&&B!==b)return this.onEnd(B),!(this.ended=!0);Z.avail_out!==0&&(Z.avail_in!==0||U!==4&&U!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(l.shrinkBuf(Z.output,Z.next_out))):this.onData(l.shrinkBuf(Z.output,Z.next_out)))}while((0<Z.avail_in||Z.avail_out===0)&&B!==1);return U===4?(B=u.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===b):U!==2||(this.onEnd(b),!(Z.avail_out=0))},L.prototype.onData=function(V){this.chunks.push(V)},L.prototype.onEnd=function(V){V===b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},a.Deflate=L,a.deflate=O,a.deflateRaw=function(V,z){return(z=z||{}).raw=!0,O(V,z)},a.gzip=function(V,z){return(z=z||{}).gzip=!0,O(V,z)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,a){var u=n("./zlib/inflate"),l=n("./utils/common"),s=n("./utils/strings"),f=n("./zlib/constants"),y=n("./zlib/messages"),x=n("./zlib/zstream"),b=n("./zlib/gzheader"),M=Object.prototype.toString;function A(L){if(!(this instanceof A))return new A(L);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},L||{});var O=this.options;O.raw&&0<=O.windowBits&&O.windowBits<16&&(O.windowBits=-O.windowBits,O.windowBits===0&&(O.windowBits=-15)),!(0<=O.windowBits&&O.windowBits<16)||L&&L.windowBits||(O.windowBits+=32),15<O.windowBits&&O.windowBits<48&&!(15&O.windowBits)&&(O.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var V=u.inflateInit2(this.strm,O.windowBits);if(V!==f.Z_OK)throw new Error(y[V]);this.header=new b,u.inflateGetHeader(this.strm,this.header)}function P(L,O){var V=new A(O);if(V.push(L,!0),V.err)throw V.msg||y[V.err];return V.result}A.prototype.push=function(L,O){var V,z,B,U,Z,te,Y=this.strm,W=this.options.chunkSize,H=this.options.dictionary,ne=!1;if(this.ended)return!1;z=O===~~O?O:O===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof L=="string"?Y.input=s.binstring2buf(L):M.call(L)==="[object ArrayBuffer]"?Y.input=new Uint8Array(L):Y.input=L,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new l.Buf8(W),Y.next_out=0,Y.avail_out=W),(V=u.inflate(Y,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&H&&(te=typeof H=="string"?s.string2buf(H):M.call(H)==="[object ArrayBuffer]"?new Uint8Array(H):H,V=u.inflateSetDictionary(this.strm,te)),V===f.Z_BUF_ERROR&&ne===!0&&(V=f.Z_OK,ne=!1),V!==f.Z_STREAM_END&&V!==f.Z_OK)return this.onEnd(V),!(this.ended=!0);Y.next_out&&(Y.avail_out!==0&&V!==f.Z_STREAM_END&&(Y.avail_in!==0||z!==f.Z_FINISH&&z!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(B=s.utf8border(Y.output,Y.next_out),U=Y.next_out-B,Z=s.buf2string(Y.output,B),Y.next_out=U,Y.avail_out=W-U,U&&l.arraySet(Y.output,Y.output,B,U,0),this.onData(Z)):this.onData(l.shrinkBuf(Y.output,Y.next_out)))),Y.avail_in===0&&Y.avail_out===0&&(ne=!0)}while((0<Y.avail_in||Y.avail_out===0)&&V!==f.Z_STREAM_END);return V===f.Z_STREAM_END&&(z=f.Z_FINISH),z===f.Z_FINISH?(V=u.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===f.Z_OK):z!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(Y.avail_out=0))},A.prototype.onData=function(L){this.chunks.push(L)},A.prototype.onEnd=function(L){L===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},a.Inflate=A,a.inflate=P,a.inflateRaw=function(L,O){return(O=O||{}).raw=!0,P(L,O)},a.ungzip=P},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,a){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(f){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var x=y.shift();if(x){if(typeof x!="object")throw new TypeError(x+"must be non-object");for(var b in x)x.hasOwnProperty(b)&&(f[b]=x[b])}}return f},a.shrinkBuf=function(f,y){return f.length===y?f:f.subarray?f.subarray(0,y):(f.length=y,f)};var l={arraySet:function(f,y,x,b,M){if(y.subarray&&f.subarray)f.set(y.subarray(x,x+b),M);else for(var A=0;A<b;A++)f[M+A]=y[x+A]},flattenChunks:function(f){var y,x,b,M,A,P;for(y=b=0,x=f.length;y<x;y++)b+=f[y].length;for(P=new Uint8Array(b),y=M=0,x=f.length;y<x;y++)A=f[y],P.set(A,M),M+=A.length;return P}},s={arraySet:function(f,y,x,b,M){for(var A=0;A<b;A++)f[M+A]=y[x+A]},flattenChunks:function(f){return[].concat.apply([],f)}};a.setTyped=function(f){f?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,l)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(u)},{}],42:[function(n,i,a){var u=n("./common"),l=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var f=new u.Buf8(256),y=0;y<256;y++)f[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function x(b,M){if(M<65537&&(b.subarray&&s||!b.subarray&&l))return String.fromCharCode.apply(null,u.shrinkBuf(b,M));for(var A="",P=0;P<M;P++)A+=String.fromCharCode(b[P]);return A}f[254]=f[254]=1,a.string2buf=function(b){var M,A,P,L,O,V=b.length,z=0;for(L=0;L<V;L++)(64512&(A=b.charCodeAt(L)))==55296&&L+1<V&&(64512&(P=b.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(P-56320),L++),z+=A<128?1:A<2048?2:A<65536?3:4;for(M=new u.Buf8(z),L=O=0;O<z;L++)(64512&(A=b.charCodeAt(L)))==55296&&L+1<V&&(64512&(P=b.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(P-56320),L++),A<128?M[O++]=A:(A<2048?M[O++]=192|A>>>6:(A<65536?M[O++]=224|A>>>12:(M[O++]=240|A>>>18,M[O++]=128|A>>>12&63),M[O++]=128|A>>>6&63),M[O++]=128|63&A);return M},a.buf2binstring=function(b){return x(b,b.length)},a.binstring2buf=function(b){for(var M=new u.Buf8(b.length),A=0,P=M.length;A<P;A++)M[A]=b.charCodeAt(A);return M},a.buf2string=function(b,M){var A,P,L,O,V=M||b.length,z=new Array(2*V);for(A=P=0;A<V;)if((L=b[A++])<128)z[P++]=L;else if(4<(O=f[L]))z[P++]=65533,A+=O-1;else{for(L&=O===2?31:O===3?15:7;1<O&&A<V;)L=L<<6|63&b[A++],O--;1<O?z[P++]=65533:L<65536?z[P++]=L:(L-=65536,z[P++]=55296|L>>10&1023,z[P++]=56320|1023&L)}return x(z,P)},a.utf8border=function(b,M){var A;for((M=M||b.length)>b.length&&(M=b.length),A=M-1;0<=A&&(192&b[A])==128;)A--;return A<0||A===0?M:A+f[b[A]]>M?A:M}},{"./common":41}],43:[function(n,i,a){i.exports=function(u,l,s,f){for(var y=65535&u|0,x=u>>>16&65535|0,b=0;s!==0;){for(s-=b=2e3<s?2e3:s;x=x+(y=y+l[f++]|0)|0,--b;);y%=65521,x%=65521}return y|x<<16|0}},{}],44:[function(n,i,a){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,a){var u=function(){for(var l,s=[],f=0;f<256;f++){l=f;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;s[f]=l}return s}();i.exports=function(l,s,f,y){var x=u,b=y+f;l^=-1;for(var M=y;M<b;M++)l=l>>>8^x[255&(l^s[M])];return-1^l}},{}],46:[function(n,i,a){var u,l=n("../utils/common"),s=n("./trees"),f=n("./adler32"),y=n("./crc32"),x=n("./messages"),b=0,M=4,A=0,P=-2,L=-1,O=4,V=2,z=8,B=9,U=286,Z=30,te=19,Y=2*U+1,W=15,H=3,ne=258,le=ne+H+1,Q=42,ce=113,K=1,Le=2,Ue=3,Be=4;function tt($,Te){return $.msg=x[Te],Te}function ut($){return($<<1)-(4<$?9:0)}function Tt($){for(var Te=$.length;0<=--Te;)$[Te]=0}function Ge($){var Te=$.state,Oe=Te.pending;Oe>$.avail_out&&(Oe=$.avail_out),Oe!==0&&(l.arraySet($.output,Te.pending_buf,Te.pending_out,Oe,$.next_out),$.next_out+=Oe,Te.pending_out+=Oe,$.total_out+=Oe,$.avail_out-=Oe,Te.pending-=Oe,Te.pending===0&&(Te.pending_out=0))}function Ne($,Te){s._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Te),$.block_start=$.strstart,Ge($.strm)}function Dt($,Te){$.pending_buf[$.pending++]=Te}function Bt($,Te){$.pending_buf[$.pending++]=Te>>>8&255,$.pending_buf[$.pending++]=255&Te}function St($,Te){var Oe,ye,pe=$.max_chain_length,Fe=$.strstart,rt=$.prev_length,at=$.nice_match,Ve=$.strstart>$.w_size-le?$.strstart-($.w_size-le):0,Mt=$.window,wt=$.w_mask,At=$.prev,Gt=$.strstart+ne,dn=Mt[Fe+rt-1],pn=Mt[Fe+rt];$.prev_length>=$.good_match&&(pe>>=2),at>$.lookahead&&(at=$.lookahead);do if(Mt[(Oe=Te)+rt]===pn&&Mt[Oe+rt-1]===dn&&Mt[Oe]===Mt[Fe]&&Mt[++Oe]===Mt[Fe+1]){Fe+=2,Oe++;do;while(Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Fe<Gt);if(ye=ne-(Gt-Fe),Fe=Gt-ne,rt<ye){if($.match_start=Te,at<=(rt=ye))break;dn=Mt[Fe+rt-1],pn=Mt[Fe+rt]}}while((Te=At[Te&wt])>Ve&&--pe!=0);return rt<=$.lookahead?rt:$.lookahead}function en($){var Te,Oe,ye,pe,Fe,rt,at,Ve,Mt,wt,At=$.w_size;do{if(pe=$.window_size-$.lookahead-$.strstart,$.strstart>=At+(At-le)){for(l.arraySet($.window,$.window,At,At,0),$.match_start-=At,$.strstart-=At,$.block_start-=At,Te=Oe=$.hash_size;ye=$.head[--Te],$.head[Te]=At<=ye?ye-At:0,--Oe;);for(Te=Oe=At;ye=$.prev[--Te],$.prev[Te]=At<=ye?ye-At:0,--Oe;);pe+=At}if($.strm.avail_in===0)break;if(rt=$.strm,at=$.window,Ve=$.strstart+$.lookahead,Mt=pe,wt=void 0,wt=rt.avail_in,Mt<wt&&(wt=Mt),Oe=wt===0?0:(rt.avail_in-=wt,l.arraySet(at,rt.input,rt.next_in,wt,Ve),rt.state.wrap===1?rt.adler=f(rt.adler,at,wt,Ve):rt.state.wrap===2&&(rt.adler=y(rt.adler,at,wt,Ve)),rt.next_in+=wt,rt.total_in+=wt,wt),$.lookahead+=Oe,$.lookahead+$.insert>=H)for(Fe=$.strstart-$.insert,$.ins_h=$.window[Fe],$.ins_h=($.ins_h<<$.hash_shift^$.window[Fe+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[Fe+H-1])&$.hash_mask,$.prev[Fe&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=Fe,Fe++,$.insert--,!($.lookahead+$.insert<H)););}while($.lookahead<le&&$.strm.avail_in!==0)}function pt($,Te){for(var Oe,ye;;){if($.lookahead<le){if(en($),$.lookahead<le&&Te===b)return K;if($.lookahead===0)break}if(Oe=0,$.lookahead>=H&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),Oe!==0&&$.strstart-Oe<=$.w_size-le&&($.match_length=St($,Oe)),$.match_length>=H)if(ye=s._tr_tally($,$.strstart-$.match_start,$.match_length-H),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=H){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else ye=s._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(ye&&(Ne($,!1),$.strm.avail_out===0))return K}return $.insert=$.strstart<H-1?$.strstart:H-1,Te===M?(Ne($,!0),$.strm.avail_out===0?Ue:Be):$.last_lit&&(Ne($,!1),$.strm.avail_out===0)?K:Le}function ft($,Te){for(var Oe,ye,pe;;){if($.lookahead<le){if(en($),$.lookahead<le&&Te===b)return K;if($.lookahead===0)break}if(Oe=0,$.lookahead>=H&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=H-1,Oe!==0&&$.prev_length<$.max_lazy_match&&$.strstart-Oe<=$.w_size-le&&($.match_length=St($,Oe),$.match_length<=5&&($.strategy===1||$.match_length===H&&4096<$.strstart-$.match_start)&&($.match_length=H-1)),$.prev_length>=H&&$.match_length<=$.prev_length){for(pe=$.strstart+$.lookahead-H,ye=s._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-H),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=pe&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+H-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=H-1,$.strstart++,ye&&(Ne($,!1),$.strm.avail_out===0))return K}else if($.match_available){if((ye=s._tr_tally($,0,$.window[$.strstart-1]))&&Ne($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return K}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(ye=s._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<H-1?$.strstart:H-1,Te===M?(Ne($,!0),$.strm.avail_out===0?Ue:Be):$.last_lit&&(Ne($,!1),$.strm.avail_out===0)?K:Le}function ot($,Te,Oe,ye,pe){this.good_length=$,this.max_lazy=Te,this.nice_length=Oe,this.max_chain=ye,this.func=pe}function Pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*Y),this.dyn_dtree=new l.Buf16(2*(2*Z+1)),this.bl_tree=new l.Buf16(2*(2*te+1)),Tt(this.dyn_ltree),Tt(this.dyn_dtree),Tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(W+1),this.heap=new l.Buf16(2*U+1),Tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*U+1),Tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lt($){var Te;return $&&$.state?($.total_in=$.total_out=0,$.data_type=V,(Te=$.state).pending=0,Te.pending_out=0,Te.wrap<0&&(Te.wrap=-Te.wrap),Te.status=Te.wrap?Q:ce,$.adler=Te.wrap===2?0:1,Te.last_flush=b,s._tr_init(Te),A):tt($,P)}function un($){var Te=Lt($);return Te===A&&function(Oe){Oe.window_size=2*Oe.w_size,Tt(Oe.head),Oe.max_lazy_match=u[Oe.level].max_lazy,Oe.good_match=u[Oe.level].good_length,Oe.nice_match=u[Oe.level].nice_length,Oe.max_chain_length=u[Oe.level].max_chain,Oe.strstart=0,Oe.block_start=0,Oe.lookahead=0,Oe.insert=0,Oe.match_length=Oe.prev_length=H-1,Oe.match_available=0,Oe.ins_h=0}($.state),Te}function Ie($,Te,Oe,ye,pe,Fe){if(!$)return P;var rt=1;if(Te===L&&(Te=6),ye<0?(rt=0,ye=-ye):15<ye&&(rt=2,ye-=16),pe<1||B<pe||Oe!==z||ye<8||15<ye||Te<0||9<Te||Fe<0||O<Fe)return tt($,P);ye===8&&(ye=9);var at=new Pt;return($.state=at).strm=$,at.wrap=rt,at.gzhead=null,at.w_bits=ye,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=pe+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+H-1)/H),at.window=new l.Buf8(2*at.w_size),at.head=new l.Buf16(at.hash_size),at.prev=new l.Buf16(at.w_size),at.lit_bufsize=1<<pe+6,at.pending_buf_size=4*at.lit_bufsize,at.pending_buf=new l.Buf8(at.pending_buf_size),at.d_buf=1*at.lit_bufsize,at.l_buf=3*at.lit_bufsize,at.level=Te,at.strategy=Fe,at.method=Oe,un($)}u=[new ot(0,0,0,0,function($,Te){var Oe=65535;for(Oe>$.pending_buf_size-5&&(Oe=$.pending_buf_size-5);;){if($.lookahead<=1){if(en($),$.lookahead===0&&Te===b)return K;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var ye=$.block_start+Oe;if(($.strstart===0||$.strstart>=ye)&&($.lookahead=$.strstart-ye,$.strstart=ye,Ne($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-le&&(Ne($,!1),$.strm.avail_out===0))return K}return $.insert=0,Te===M?(Ne($,!0),$.strm.avail_out===0?Ue:Be):($.strstart>$.block_start&&(Ne($,!1),$.strm.avail_out),K)}),new ot(4,4,8,4,pt),new ot(4,5,16,8,pt),new ot(4,6,32,32,pt),new ot(4,4,16,16,ft),new ot(8,16,32,32,ft),new ot(8,16,128,128,ft),new ot(8,32,128,256,ft),new ot(32,128,258,1024,ft),new ot(32,258,258,4096,ft)],a.deflateInit=function($,Te){return Ie($,Te,z,15,8,0)},a.deflateInit2=Ie,a.deflateReset=un,a.deflateResetKeep=Lt,a.deflateSetHeader=function($,Te){return $&&$.state?$.state.wrap!==2?P:($.state.gzhead=Te,A):P},a.deflate=function($,Te){var Oe,ye,pe,Fe;if(!$||!$.state||5<Te||Te<0)return $?tt($,P):P;if(ye=$.state,!$.output||!$.input&&$.avail_in!==0||ye.status===666&&Te!==M)return tt($,$.avail_out===0?-5:P);if(ye.strm=$,Oe=ye.last_flush,ye.last_flush=Te,ye.status===Q)if(ye.wrap===2)$.adler=0,Dt(ye,31),Dt(ye,139),Dt(ye,8),ye.gzhead?(Dt(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),Dt(ye,255&ye.gzhead.time),Dt(ye,ye.gzhead.time>>8&255),Dt(ye,ye.gzhead.time>>16&255),Dt(ye,ye.gzhead.time>>24&255),Dt(ye,ye.level===9?2:2<=ye.strategy||ye.level<2?4:0),Dt(ye,255&ye.gzhead.os),ye.gzhead.extra&&ye.gzhead.extra.length&&(Dt(ye,255&ye.gzhead.extra.length),Dt(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&($.adler=y($.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=69):(Dt(ye,0),Dt(ye,0),Dt(ye,0),Dt(ye,0),Dt(ye,0),Dt(ye,ye.level===9?2:2<=ye.strategy||ye.level<2?4:0),Dt(ye,3),ye.status=ce);else{var rt=z+(ye.w_bits-8<<4)<<8;rt|=(2<=ye.strategy||ye.level<2?0:ye.level<6?1:ye.level===6?2:3)<<6,ye.strstart!==0&&(rt|=32),rt+=31-rt%31,ye.status=ce,Bt(ye,rt),ye.strstart!==0&&(Bt(ye,$.adler>>>16),Bt(ye,65535&$.adler)),$.adler=1}if(ye.status===69)if(ye.gzhead.extra){for(pe=ye.pending;ye.gzindex<(65535&ye.gzhead.extra.length)&&(ye.pending!==ye.pending_buf_size||(ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Ge($),pe=ye.pending,ye.pending!==ye.pending_buf_size));)Dt(ye,255&ye.gzhead.extra[ye.gzindex]),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=73)}else ye.status=73;if(ye.status===73)if(ye.gzhead.name){pe=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Ge($),pe=ye.pending,ye.pending===ye.pending_buf_size)){Fe=1;break}Fe=ye.gzindex<ye.gzhead.name.length?255&ye.gzhead.name.charCodeAt(ye.gzindex++):0,Dt(ye,Fe)}while(Fe!==0);ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Fe===0&&(ye.gzindex=0,ye.status=91)}else ye.status=91;if(ye.status===91)if(ye.gzhead.comment){pe=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Ge($),pe=ye.pending,ye.pending===ye.pending_buf_size)){Fe=1;break}Fe=ye.gzindex<ye.gzhead.comment.length?255&ye.gzhead.comment.charCodeAt(ye.gzindex++):0,Dt(ye,Fe)}while(Fe!==0);ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Fe===0&&(ye.status=103)}else ye.status=103;if(ye.status===103&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&Ge($),ye.pending+2<=ye.pending_buf_size&&(Dt(ye,255&$.adler),Dt(ye,$.adler>>8&255),$.adler=0,ye.status=ce)):ye.status=ce),ye.pending!==0){if(Ge($),$.avail_out===0)return ye.last_flush=-1,A}else if($.avail_in===0&&ut(Te)<=ut(Oe)&&Te!==M)return tt($,-5);if(ye.status===666&&$.avail_in!==0)return tt($,-5);if($.avail_in!==0||ye.lookahead!==0||Te!==b&&ye.status!==666){var at=ye.strategy===2?function(Ve,Mt){for(var wt;;){if(Ve.lookahead===0&&(en(Ve),Ve.lookahead===0)){if(Mt===b)return K;break}if(Ve.match_length=0,wt=s._tr_tally(Ve,0,Ve.window[Ve.strstart]),Ve.lookahead--,Ve.strstart++,wt&&(Ne(Ve,!1),Ve.strm.avail_out===0))return K}return Ve.insert=0,Mt===M?(Ne(Ve,!0),Ve.strm.avail_out===0?Ue:Be):Ve.last_lit&&(Ne(Ve,!1),Ve.strm.avail_out===0)?K:Le}(ye,Te):ye.strategy===3?function(Ve,Mt){for(var wt,At,Gt,dn,pn=Ve.window;;){if(Ve.lookahead<=ne){if(en(Ve),Ve.lookahead<=ne&&Mt===b)return K;if(Ve.lookahead===0)break}if(Ve.match_length=0,Ve.lookahead>=H&&0<Ve.strstart&&(At=pn[Gt=Ve.strstart-1])===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]){dn=Ve.strstart+ne;do;while(At===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]&&At===pn[++Gt]&&Gt<dn);Ve.match_length=ne-(dn-Gt),Ve.match_length>Ve.lookahead&&(Ve.match_length=Ve.lookahead)}if(Ve.match_length>=H?(wt=s._tr_tally(Ve,1,Ve.match_length-H),Ve.lookahead-=Ve.match_length,Ve.strstart+=Ve.match_length,Ve.match_length=0):(wt=s._tr_tally(Ve,0,Ve.window[Ve.strstart]),Ve.lookahead--,Ve.strstart++),wt&&(Ne(Ve,!1),Ve.strm.avail_out===0))return K}return Ve.insert=0,Mt===M?(Ne(Ve,!0),Ve.strm.avail_out===0?Ue:Be):Ve.last_lit&&(Ne(Ve,!1),Ve.strm.avail_out===0)?K:Le}(ye,Te):u[ye.level].func(ye,Te);if(at!==Ue&&at!==Be||(ye.status=666),at===K||at===Ue)return $.avail_out===0&&(ye.last_flush=-1),A;if(at===Le&&(Te===1?s._tr_align(ye):Te!==5&&(s._tr_stored_block(ye,0,0,!1),Te===3&&(Tt(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),Ge($),$.avail_out===0))return ye.last_flush=-1,A}return Te!==M?A:ye.wrap<=0?1:(ye.wrap===2?(Dt(ye,255&$.adler),Dt(ye,$.adler>>8&255),Dt(ye,$.adler>>16&255),Dt(ye,$.adler>>24&255),Dt(ye,255&$.total_in),Dt(ye,$.total_in>>8&255),Dt(ye,$.total_in>>16&255),Dt(ye,$.total_in>>24&255)):(Bt(ye,$.adler>>>16),Bt(ye,65535&$.adler)),Ge($),0<ye.wrap&&(ye.wrap=-ye.wrap),ye.pending!==0?A:1)},a.deflateEnd=function($){var Te;return $&&$.state?(Te=$.state.status)!==Q&&Te!==69&&Te!==73&&Te!==91&&Te!==103&&Te!==ce&&Te!==666?tt($,P):($.state=null,Te===ce?tt($,-3):A):P},a.deflateSetDictionary=function($,Te){var Oe,ye,pe,Fe,rt,at,Ve,Mt,wt=Te.length;if(!$||!$.state||(Fe=(Oe=$.state).wrap)===2||Fe===1&&Oe.status!==Q||Oe.lookahead)return P;for(Fe===1&&($.adler=f($.adler,Te,wt,0)),Oe.wrap=0,wt>=Oe.w_size&&(Fe===0&&(Tt(Oe.head),Oe.strstart=0,Oe.block_start=0,Oe.insert=0),Mt=new l.Buf8(Oe.w_size),l.arraySet(Mt,Te,wt-Oe.w_size,Oe.w_size,0),Te=Mt,wt=Oe.w_size),rt=$.avail_in,at=$.next_in,Ve=$.input,$.avail_in=wt,$.next_in=0,$.input=Te,en(Oe);Oe.lookahead>=H;){for(ye=Oe.strstart,pe=Oe.lookahead-(H-1);Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[ye+H-1])&Oe.hash_mask,Oe.prev[ye&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=ye,ye++,--pe;);Oe.strstart=ye,Oe.lookahead=H-1,en(Oe)}return Oe.strstart+=Oe.lookahead,Oe.block_start=Oe.strstart,Oe.insert=Oe.lookahead,Oe.lookahead=0,Oe.match_length=Oe.prev_length=H-1,Oe.match_available=0,$.next_in=at,$.input=Ve,$.avail_in=rt,Oe.wrap=Fe,A},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,a){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,a){i.exports=function(u,l){var s,f,y,x,b,M,A,P,L,O,V,z,B,U,Z,te,Y,W,H,ne,le,Q,ce,K,Le;s=u.state,f=u.next_in,K=u.input,y=f+(u.avail_in-5),x=u.next_out,Le=u.output,b=x-(l-u.avail_out),M=x+(u.avail_out-257),A=s.dmax,P=s.wsize,L=s.whave,O=s.wnext,V=s.window,z=s.hold,B=s.bits,U=s.lencode,Z=s.distcode,te=(1<<s.lenbits)-1,Y=(1<<s.distbits)-1;e:do{B<15&&(z+=K[f++]<<B,B+=8,z+=K[f++]<<B,B+=8),W=U[z&te];t:for(;;){if(z>>>=H=W>>>24,B-=H,(H=W>>>16&255)===0)Le[x++]=65535&W;else{if(!(16&H)){if(!(64&H)){W=U[(65535&W)+(z&(1<<H)-1)];continue t}if(32&H){s.mode=12;break e}u.msg="invalid literal/length code",s.mode=30;break e}ne=65535&W,(H&=15)&&(B<H&&(z+=K[f++]<<B,B+=8),ne+=z&(1<<H)-1,z>>>=H,B-=H),B<15&&(z+=K[f++]<<B,B+=8,z+=K[f++]<<B,B+=8),W=Z[z&Y];n:for(;;){if(z>>>=H=W>>>24,B-=H,!(16&(H=W>>>16&255))){if(!(64&H)){W=Z[(65535&W)+(z&(1<<H)-1)];continue n}u.msg="invalid distance code",s.mode=30;break e}if(le=65535&W,B<(H&=15)&&(z+=K[f++]<<B,(B+=8)<H&&(z+=K[f++]<<B,B+=8)),A<(le+=z&(1<<H)-1)){u.msg="invalid distance too far back",s.mode=30;break e}if(z>>>=H,B-=H,(H=x-b)<le){if(L<(H=le-H)&&s.sane){u.msg="invalid distance too far back",s.mode=30;break e}if(ce=V,(Q=0)===O){if(Q+=P-H,H<ne){for(ne-=H;Le[x++]=V[Q++],--H;);Q=x-le,ce=Le}}else if(O<H){if(Q+=P+O-H,(H-=O)<ne){for(ne-=H;Le[x++]=V[Q++],--H;);if(Q=0,O<ne){for(ne-=H=O;Le[x++]=V[Q++],--H;);Q=x-le,ce=Le}}}else if(Q+=O-H,H<ne){for(ne-=H;Le[x++]=V[Q++],--H;);Q=x-le,ce=Le}for(;2<ne;)Le[x++]=ce[Q++],Le[x++]=ce[Q++],Le[x++]=ce[Q++],ne-=3;ne&&(Le[x++]=ce[Q++],1<ne&&(Le[x++]=ce[Q++]))}else{for(Q=x-le;Le[x++]=Le[Q++],Le[x++]=Le[Q++],Le[x++]=Le[Q++],2<(ne-=3););ne&&(Le[x++]=Le[Q++],1<ne&&(Le[x++]=Le[Q++]))}break}}break}}while(f<y&&x<M);f-=ne=B>>3,z&=(1<<(B-=ne<<3))-1,u.next_in=f,u.next_out=x,u.avail_in=f<y?y-f+5:5-(f-y),u.avail_out=x<M?M-x+257:257-(x-M),s.hold=z,s.bits=B}},{}],49:[function(n,i,a){var u=n("../utils/common"),l=n("./adler32"),s=n("./crc32"),f=n("./inffast"),y=n("./inftrees"),x=1,b=2,M=0,A=-2,P=1,L=852,O=592;function V(Q){return(Q>>>24&255)+(Q>>>8&65280)+((65280&Q)<<8)+((255&Q)<<24)}function z(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function B(Q){var ce;return Q&&Q.state?(ce=Q.state,Q.total_in=Q.total_out=ce.total=0,Q.msg="",ce.wrap&&(Q.adler=1&ce.wrap),ce.mode=P,ce.last=0,ce.havedict=0,ce.dmax=32768,ce.head=null,ce.hold=0,ce.bits=0,ce.lencode=ce.lendyn=new u.Buf32(L),ce.distcode=ce.distdyn=new u.Buf32(O),ce.sane=1,ce.back=-1,M):A}function U(Q){var ce;return Q&&Q.state?((ce=Q.state).wsize=0,ce.whave=0,ce.wnext=0,B(Q)):A}function Z(Q,ce){var K,Le;return Q&&Q.state?(Le=Q.state,ce<0?(K=0,ce=-ce):(K=1+(ce>>4),ce<48&&(ce&=15)),ce&&(ce<8||15<ce)?A:(Le.window!==null&&Le.wbits!==ce&&(Le.window=null),Le.wrap=K,Le.wbits=ce,U(Q))):A}function te(Q,ce){var K,Le;return Q?(Le=new z,(Q.state=Le).window=null,(K=Z(Q,ce))!==M&&(Q.state=null),K):A}var Y,W,H=!0;function ne(Q){if(H){var ce;for(Y=new u.Buf32(512),W=new u.Buf32(32),ce=0;ce<144;)Q.lens[ce++]=8;for(;ce<256;)Q.lens[ce++]=9;for(;ce<280;)Q.lens[ce++]=7;for(;ce<288;)Q.lens[ce++]=8;for(y(x,Q.lens,0,288,Y,0,Q.work,{bits:9}),ce=0;ce<32;)Q.lens[ce++]=5;y(b,Q.lens,0,32,W,0,Q.work,{bits:5}),H=!1}Q.lencode=Y,Q.lenbits=9,Q.distcode=W,Q.distbits=5}function le(Q,ce,K,Le){var Ue,Be=Q.state;return Be.window===null&&(Be.wsize=1<<Be.wbits,Be.wnext=0,Be.whave=0,Be.window=new u.Buf8(Be.wsize)),Le>=Be.wsize?(u.arraySet(Be.window,ce,K-Be.wsize,Be.wsize,0),Be.wnext=0,Be.whave=Be.wsize):(Le<(Ue=Be.wsize-Be.wnext)&&(Ue=Le),u.arraySet(Be.window,ce,K-Le,Ue,Be.wnext),(Le-=Ue)?(u.arraySet(Be.window,ce,K-Le,Le,0),Be.wnext=Le,Be.whave=Be.wsize):(Be.wnext+=Ue,Be.wnext===Be.wsize&&(Be.wnext=0),Be.whave<Be.wsize&&(Be.whave+=Ue))),0}a.inflateReset=U,a.inflateReset2=Z,a.inflateResetKeep=B,a.inflateInit=function(Q){return te(Q,15)},a.inflateInit2=te,a.inflate=function(Q,ce){var K,Le,Ue,Be,tt,ut,Tt,Ge,Ne,Dt,Bt,St,en,pt,ft,ot,Pt,Lt,un,Ie,$,Te,Oe,ye,pe=0,Fe=new u.Buf8(4),rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Q||!Q.state||!Q.output||!Q.input&&Q.avail_in!==0)return A;(K=Q.state).mode===12&&(K.mode=13),tt=Q.next_out,Ue=Q.output,Tt=Q.avail_out,Be=Q.next_in,Le=Q.input,ut=Q.avail_in,Ge=K.hold,Ne=K.bits,Dt=ut,Bt=Tt,Te=M;e:for(;;)switch(K.mode){case P:if(K.wrap===0){K.mode=13;break}for(;Ne<16;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(2&K.wrap&&Ge===35615){Fe[K.check=0]=255&Ge,Fe[1]=Ge>>>8&255,K.check=s(K.check,Fe,2,0),Ne=Ge=0,K.mode=2;break}if(K.flags=0,K.head&&(K.head.done=!1),!(1&K.wrap)||(((255&Ge)<<8)+(Ge>>8))%31){Q.msg="incorrect header check",K.mode=30;break}if((15&Ge)!=8){Q.msg="unknown compression method",K.mode=30;break}if(Ne-=4,$=8+(15&(Ge>>>=4)),K.wbits===0)K.wbits=$;else if($>K.wbits){Q.msg="invalid window size",K.mode=30;break}K.dmax=1<<$,Q.adler=K.check=1,K.mode=512&Ge?10:12,Ne=Ge=0;break;case 2:for(;Ne<16;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(K.flags=Ge,(255&K.flags)!=8){Q.msg="unknown compression method",K.mode=30;break}if(57344&K.flags){Q.msg="unknown header flags set",K.mode=30;break}K.head&&(K.head.text=Ge>>8&1),512&K.flags&&(Fe[0]=255&Ge,Fe[1]=Ge>>>8&255,K.check=s(K.check,Fe,2,0)),Ne=Ge=0,K.mode=3;case 3:for(;Ne<32;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}K.head&&(K.head.time=Ge),512&K.flags&&(Fe[0]=255&Ge,Fe[1]=Ge>>>8&255,Fe[2]=Ge>>>16&255,Fe[3]=Ge>>>24&255,K.check=s(K.check,Fe,4,0)),Ne=Ge=0,K.mode=4;case 4:for(;Ne<16;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}K.head&&(K.head.xflags=255&Ge,K.head.os=Ge>>8),512&K.flags&&(Fe[0]=255&Ge,Fe[1]=Ge>>>8&255,K.check=s(K.check,Fe,2,0)),Ne=Ge=0,K.mode=5;case 5:if(1024&K.flags){for(;Ne<16;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}K.length=Ge,K.head&&(K.head.extra_len=Ge),512&K.flags&&(Fe[0]=255&Ge,Fe[1]=Ge>>>8&255,K.check=s(K.check,Fe,2,0)),Ne=Ge=0}else K.head&&(K.head.extra=null);K.mode=6;case 6:if(1024&K.flags&&(ut<(St=K.length)&&(St=ut),St&&(K.head&&($=K.head.extra_len-K.length,K.head.extra||(K.head.extra=new Array(K.head.extra_len)),u.arraySet(K.head.extra,Le,Be,St,$)),512&K.flags&&(K.check=s(K.check,Le,St,Be)),ut-=St,Be+=St,K.length-=St),K.length))break e;K.length=0,K.mode=7;case 7:if(2048&K.flags){if(ut===0)break e;for(St=0;$=Le[Be+St++],K.head&&$&&K.length<65536&&(K.head.name+=String.fromCharCode($)),$&&St<ut;);if(512&K.flags&&(K.check=s(K.check,Le,St,Be)),ut-=St,Be+=St,$)break e}else K.head&&(K.head.name=null);K.length=0,K.mode=8;case 8:if(4096&K.flags){if(ut===0)break e;for(St=0;$=Le[Be+St++],K.head&&$&&K.length<65536&&(K.head.comment+=String.fromCharCode($)),$&&St<ut;);if(512&K.flags&&(K.check=s(K.check,Le,St,Be)),ut-=St,Be+=St,$)break e}else K.head&&(K.head.comment=null);K.mode=9;case 9:if(512&K.flags){for(;Ne<16;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(Ge!==(65535&K.check)){Q.msg="header crc mismatch",K.mode=30;break}Ne=Ge=0}K.head&&(K.head.hcrc=K.flags>>9&1,K.head.done=!0),Q.adler=K.check=0,K.mode=12;break;case 10:for(;Ne<32;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}Q.adler=K.check=V(Ge),Ne=Ge=0,K.mode=11;case 11:if(K.havedict===0)return Q.next_out=tt,Q.avail_out=Tt,Q.next_in=Be,Q.avail_in=ut,K.hold=Ge,K.bits=Ne,2;Q.adler=K.check=1,K.mode=12;case 12:if(ce===5||ce===6)break e;case 13:if(K.last){Ge>>>=7&Ne,Ne-=7&Ne,K.mode=27;break}for(;Ne<3;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}switch(K.last=1&Ge,Ne-=1,3&(Ge>>>=1)){case 0:K.mode=14;break;case 1:if(ne(K),K.mode=20,ce!==6)break;Ge>>>=2,Ne-=2;break e;case 2:K.mode=17;break;case 3:Q.msg="invalid block type",K.mode=30}Ge>>>=2,Ne-=2;break;case 14:for(Ge>>>=7&Ne,Ne-=7&Ne;Ne<32;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if((65535&Ge)!=(Ge>>>16^65535)){Q.msg="invalid stored block lengths",K.mode=30;break}if(K.length=65535&Ge,Ne=Ge=0,K.mode=15,ce===6)break e;case 15:K.mode=16;case 16:if(St=K.length){if(ut<St&&(St=ut),Tt<St&&(St=Tt),St===0)break e;u.arraySet(Ue,Le,Be,St,tt),ut-=St,Be+=St,Tt-=St,tt+=St,K.length-=St;break}K.mode=12;break;case 17:for(;Ne<14;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(K.nlen=257+(31&Ge),Ge>>>=5,Ne-=5,K.ndist=1+(31&Ge),Ge>>>=5,Ne-=5,K.ncode=4+(15&Ge),Ge>>>=4,Ne-=4,286<K.nlen||30<K.ndist){Q.msg="too many length or distance symbols",K.mode=30;break}K.have=0,K.mode=18;case 18:for(;K.have<K.ncode;){for(;Ne<3;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}K.lens[rt[K.have++]]=7&Ge,Ge>>>=3,Ne-=3}for(;K.have<19;)K.lens[rt[K.have++]]=0;if(K.lencode=K.lendyn,K.lenbits=7,Oe={bits:K.lenbits},Te=y(0,K.lens,0,19,K.lencode,0,K.work,Oe),K.lenbits=Oe.bits,Te){Q.msg="invalid code lengths set",K.mode=30;break}K.have=0,K.mode=19;case 19:for(;K.have<K.nlen+K.ndist;){for(;ot=(pe=K.lencode[Ge&(1<<K.lenbits)-1])>>>16&255,Pt=65535&pe,!((ft=pe>>>24)<=Ne);){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(Pt<16)Ge>>>=ft,Ne-=ft,K.lens[K.have++]=Pt;else{if(Pt===16){for(ye=ft+2;Ne<ye;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(Ge>>>=ft,Ne-=ft,K.have===0){Q.msg="invalid bit length repeat",K.mode=30;break}$=K.lens[K.have-1],St=3+(3&Ge),Ge>>>=2,Ne-=2}else if(Pt===17){for(ye=ft+3;Ne<ye;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}Ne-=ft,$=0,St=3+(7&(Ge>>>=ft)),Ge>>>=3,Ne-=3}else{for(ye=ft+7;Ne<ye;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}Ne-=ft,$=0,St=11+(127&(Ge>>>=ft)),Ge>>>=7,Ne-=7}if(K.have+St>K.nlen+K.ndist){Q.msg="invalid bit length repeat",K.mode=30;break}for(;St--;)K.lens[K.have++]=$}}if(K.mode===30)break;if(K.lens[256]===0){Q.msg="invalid code -- missing end-of-block",K.mode=30;break}if(K.lenbits=9,Oe={bits:K.lenbits},Te=y(x,K.lens,0,K.nlen,K.lencode,0,K.work,Oe),K.lenbits=Oe.bits,Te){Q.msg="invalid literal/lengths set",K.mode=30;break}if(K.distbits=6,K.distcode=K.distdyn,Oe={bits:K.distbits},Te=y(b,K.lens,K.nlen,K.ndist,K.distcode,0,K.work,Oe),K.distbits=Oe.bits,Te){Q.msg="invalid distances set",K.mode=30;break}if(K.mode=20,ce===6)break e;case 20:K.mode=21;case 21:if(6<=ut&&258<=Tt){Q.next_out=tt,Q.avail_out=Tt,Q.next_in=Be,Q.avail_in=ut,K.hold=Ge,K.bits=Ne,f(Q,Bt),tt=Q.next_out,Ue=Q.output,Tt=Q.avail_out,Be=Q.next_in,Le=Q.input,ut=Q.avail_in,Ge=K.hold,Ne=K.bits,K.mode===12&&(K.back=-1);break}for(K.back=0;ot=(pe=K.lencode[Ge&(1<<K.lenbits)-1])>>>16&255,Pt=65535&pe,!((ft=pe>>>24)<=Ne);){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(ot&&!(240&ot)){for(Lt=ft,un=ot,Ie=Pt;ot=(pe=K.lencode[Ie+((Ge&(1<<Lt+un)-1)>>Lt)])>>>16&255,Pt=65535&pe,!(Lt+(ft=pe>>>24)<=Ne);){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}Ge>>>=Lt,Ne-=Lt,K.back+=Lt}if(Ge>>>=ft,Ne-=ft,K.back+=ft,K.length=Pt,ot===0){K.mode=26;break}if(32&ot){K.back=-1,K.mode=12;break}if(64&ot){Q.msg="invalid literal/length code",K.mode=30;break}K.extra=15&ot,K.mode=22;case 22:if(K.extra){for(ye=K.extra;Ne<ye;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}K.length+=Ge&(1<<K.extra)-1,Ge>>>=K.extra,Ne-=K.extra,K.back+=K.extra}K.was=K.length,K.mode=23;case 23:for(;ot=(pe=K.distcode[Ge&(1<<K.distbits)-1])>>>16&255,Pt=65535&pe,!((ft=pe>>>24)<=Ne);){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(!(240&ot)){for(Lt=ft,un=ot,Ie=Pt;ot=(pe=K.distcode[Ie+((Ge&(1<<Lt+un)-1)>>Lt)])>>>16&255,Pt=65535&pe,!(Lt+(ft=pe>>>24)<=Ne);){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}Ge>>>=Lt,Ne-=Lt,K.back+=Lt}if(Ge>>>=ft,Ne-=ft,K.back+=ft,64&ot){Q.msg="invalid distance code",K.mode=30;break}K.offset=Pt,K.extra=15&ot,K.mode=24;case 24:if(K.extra){for(ye=K.extra;Ne<ye;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}K.offset+=Ge&(1<<K.extra)-1,Ge>>>=K.extra,Ne-=K.extra,K.back+=K.extra}if(K.offset>K.dmax){Q.msg="invalid distance too far back",K.mode=30;break}K.mode=25;case 25:if(Tt===0)break e;if(St=Bt-Tt,K.offset>St){if((St=K.offset-St)>K.whave&&K.sane){Q.msg="invalid distance too far back",K.mode=30;break}en=St>K.wnext?(St-=K.wnext,K.wsize-St):K.wnext-St,St>K.length&&(St=K.length),pt=K.window}else pt=Ue,en=tt-K.offset,St=K.length;for(Tt<St&&(St=Tt),Tt-=St,K.length-=St;Ue[tt++]=pt[en++],--St;);K.length===0&&(K.mode=21);break;case 26:if(Tt===0)break e;Ue[tt++]=K.length,Tt--,K.mode=21;break;case 27:if(K.wrap){for(;Ne<32;){if(ut===0)break e;ut--,Ge|=Le[Be++]<<Ne,Ne+=8}if(Bt-=Tt,Q.total_out+=Bt,K.total+=Bt,Bt&&(Q.adler=K.check=K.flags?s(K.check,Ue,Bt,tt-Bt):l(K.check,Ue,Bt,tt-Bt)),Bt=Tt,(K.flags?Ge:V(Ge))!==K.check){Q.msg="incorrect data check",K.mode=30;break}Ne=Ge=0}K.mode=28;case 28:if(K.wrap&&K.flags){for(;Ne<32;){if(ut===0)break e;ut--,Ge+=Le[Be++]<<Ne,Ne+=8}if(Ge!==(4294967295&K.total)){Q.msg="incorrect length check",K.mode=30;break}Ne=Ge=0}K.mode=29;case 29:Te=1;break e;case 30:Te=-3;break e;case 31:return-4;case 32:default:return A}return Q.next_out=tt,Q.avail_out=Tt,Q.next_in=Be,Q.avail_in=ut,K.hold=Ge,K.bits=Ne,(K.wsize||Bt!==Q.avail_out&&K.mode<30&&(K.mode<27||ce!==4))&&le(Q,Q.output,Q.next_out,Bt-Q.avail_out)?(K.mode=31,-4):(Dt-=Q.avail_in,Bt-=Q.avail_out,Q.total_in+=Dt,Q.total_out+=Bt,K.total+=Bt,K.wrap&&Bt&&(Q.adler=K.check=K.flags?s(K.check,Ue,Bt,Q.next_out-Bt):l(K.check,Ue,Bt,Q.next_out-Bt)),Q.data_type=K.bits+(K.last?64:0)+(K.mode===12?128:0)+(K.mode===20||K.mode===15?256:0),(Dt==0&&Bt===0||ce===4)&&Te===M&&(Te=-5),Te)},a.inflateEnd=function(Q){if(!Q||!Q.state)return A;var ce=Q.state;return ce.window&&(ce.window=null),Q.state=null,M},a.inflateGetHeader=function(Q,ce){var K;return Q&&Q.state&&2&(K=Q.state).wrap?((K.head=ce).done=!1,M):A},a.inflateSetDictionary=function(Q,ce){var K,Le=ce.length;return Q&&Q.state?(K=Q.state).wrap!==0&&K.mode!==11?A:K.mode===11&&l(1,ce,Le,0)!==K.check?-3:le(Q,ce,Le,Le)?(K.mode=31,-4):(K.havedict=1,M):A},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,a){var u=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(x,b,M,A,P,L,O,V){var z,B,U,Z,te,Y,W,H,ne,le=V.bits,Q=0,ce=0,K=0,Le=0,Ue=0,Be=0,tt=0,ut=0,Tt=0,Ge=0,Ne=null,Dt=0,Bt=new u.Buf16(16),St=new u.Buf16(16),en=null,pt=0;for(Q=0;Q<=15;Q++)Bt[Q]=0;for(ce=0;ce<A;ce++)Bt[b[M+ce]]++;for(Ue=le,Le=15;1<=Le&&Bt[Le]===0;Le--);if(Le<Ue&&(Ue=Le),Le===0)return P[L++]=20971520,P[L++]=20971520,V.bits=1,0;for(K=1;K<Le&&Bt[K]===0;K++);for(Ue<K&&(Ue=K),Q=ut=1;Q<=15;Q++)if(ut<<=1,(ut-=Bt[Q])<0)return-1;if(0<ut&&(x===0||Le!==1))return-1;for(St[1]=0,Q=1;Q<15;Q++)St[Q+1]=St[Q]+Bt[Q];for(ce=0;ce<A;ce++)b[M+ce]!==0&&(O[St[b[M+ce]]++]=ce);if(Y=x===0?(Ne=en=O,19):x===1?(Ne=l,Dt-=257,en=s,pt-=257,256):(Ne=f,en=y,-1),Q=K,te=L,tt=ce=Ge=0,U=-1,Z=(Tt=1<<(Be=Ue))-1,x===1&&852<Tt||x===2&&592<Tt)return 1;for(;;){for(W=Q-tt,ne=O[ce]<Y?(H=0,O[ce]):O[ce]>Y?(H=en[pt+O[ce]],Ne[Dt+O[ce]]):(H=96,0),z=1<<Q-tt,K=B=1<<Be;P[te+(Ge>>tt)+(B-=z)]=W<<24|H<<16|ne|0,B!==0;);for(z=1<<Q-1;Ge&z;)z>>=1;if(z!==0?(Ge&=z-1,Ge+=z):Ge=0,ce++,--Bt[Q]==0){if(Q===Le)break;Q=b[M+O[ce]]}if(Ue<Q&&(Ge&Z)!==U){for(tt===0&&(tt=Ue),te+=K,ut=1<<(Be=Q-tt);Be+tt<Le&&!((ut-=Bt[Be+tt])<=0);)Be++,ut<<=1;if(Tt+=1<<Be,x===1&&852<Tt||x===2&&592<Tt)return 1;P[U=Ge&Z]=Ue<<24|Be<<16|te-L|0}}return Ge!==0&&(P[te+Ge]=Q-tt<<24|64<<16|0),V.bits=Ue,0}},{"../utils/common":41}],51:[function(n,i,a){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,a){var u=n("../utils/common"),l=0,s=1;function f(pe){for(var Fe=pe.length;0<=--Fe;)pe[Fe]=0}var y=0,x=29,b=256,M=b+1+x,A=30,P=19,L=2*M+1,O=15,V=16,z=7,B=256,U=16,Z=17,te=18,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],le=new Array(2*(M+2));f(le);var Q=new Array(2*A);f(Q);var ce=new Array(512);f(ce);var K=new Array(256);f(K);var Le=new Array(x);f(Le);var Ue,Be,tt,ut=new Array(A);function Tt(pe,Fe,rt,at,Ve){this.static_tree=pe,this.extra_bits=Fe,this.extra_base=rt,this.elems=at,this.max_length=Ve,this.has_stree=pe&&pe.length}function Ge(pe,Fe){this.dyn_tree=pe,this.max_code=0,this.stat_desc=Fe}function Ne(pe){return pe<256?ce[pe]:ce[256+(pe>>>7)]}function Dt(pe,Fe){pe.pending_buf[pe.pending++]=255&Fe,pe.pending_buf[pe.pending++]=Fe>>>8&255}function Bt(pe,Fe,rt){pe.bi_valid>V-rt?(pe.bi_buf|=Fe<<pe.bi_valid&65535,Dt(pe,pe.bi_buf),pe.bi_buf=Fe>>V-pe.bi_valid,pe.bi_valid+=rt-V):(pe.bi_buf|=Fe<<pe.bi_valid&65535,pe.bi_valid+=rt)}function St(pe,Fe,rt){Bt(pe,rt[2*Fe],rt[2*Fe+1])}function en(pe,Fe){for(var rt=0;rt|=1&pe,pe>>>=1,rt<<=1,0<--Fe;);return rt>>>1}function pt(pe,Fe,rt){var at,Ve,Mt=new Array(O+1),wt=0;for(at=1;at<=O;at++)Mt[at]=wt=wt+rt[at-1]<<1;for(Ve=0;Ve<=Fe;Ve++){var At=pe[2*Ve+1];At!==0&&(pe[2*Ve]=en(Mt[At]++,At))}}function ft(pe){var Fe;for(Fe=0;Fe<M;Fe++)pe.dyn_ltree[2*Fe]=0;for(Fe=0;Fe<A;Fe++)pe.dyn_dtree[2*Fe]=0;for(Fe=0;Fe<P;Fe++)pe.bl_tree[2*Fe]=0;pe.dyn_ltree[2*B]=1,pe.opt_len=pe.static_len=0,pe.last_lit=pe.matches=0}function ot(pe){8<pe.bi_valid?Dt(pe,pe.bi_buf):0<pe.bi_valid&&(pe.pending_buf[pe.pending++]=pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0}function Pt(pe,Fe,rt,at){var Ve=2*Fe,Mt=2*rt;return pe[Ve]<pe[Mt]||pe[Ve]===pe[Mt]&&at[Fe]<=at[rt]}function Lt(pe,Fe,rt){for(var at=pe.heap[rt],Ve=rt<<1;Ve<=pe.heap_len&&(Ve<pe.heap_len&&Pt(Fe,pe.heap[Ve+1],pe.heap[Ve],pe.depth)&&Ve++,!Pt(Fe,at,pe.heap[Ve],pe.depth));)pe.heap[rt]=pe.heap[Ve],rt=Ve,Ve<<=1;pe.heap[rt]=at}function un(pe,Fe,rt){var at,Ve,Mt,wt,At=0;if(pe.last_lit!==0)for(;at=pe.pending_buf[pe.d_buf+2*At]<<8|pe.pending_buf[pe.d_buf+2*At+1],Ve=pe.pending_buf[pe.l_buf+At],At++,at===0?St(pe,Ve,Fe):(St(pe,(Mt=K[Ve])+b+1,Fe),(wt=Y[Mt])!==0&&Bt(pe,Ve-=Le[Mt],wt),St(pe,Mt=Ne(--at),rt),(wt=W[Mt])!==0&&Bt(pe,at-=ut[Mt],wt)),At<pe.last_lit;);St(pe,B,Fe)}function Ie(pe,Fe){var rt,at,Ve,Mt=Fe.dyn_tree,wt=Fe.stat_desc.static_tree,At=Fe.stat_desc.has_stree,Gt=Fe.stat_desc.elems,dn=-1;for(pe.heap_len=0,pe.heap_max=L,rt=0;rt<Gt;rt++)Mt[2*rt]!==0?(pe.heap[++pe.heap_len]=dn=rt,pe.depth[rt]=0):Mt[2*rt+1]=0;for(;pe.heap_len<2;)Mt[2*(Ve=pe.heap[++pe.heap_len]=dn<2?++dn:0)]=1,pe.depth[Ve]=0,pe.opt_len--,At&&(pe.static_len-=wt[2*Ve+1]);for(Fe.max_code=dn,rt=pe.heap_len>>1;1<=rt;rt--)Lt(pe,Mt,rt);for(Ve=Gt;rt=pe.heap[1],pe.heap[1]=pe.heap[pe.heap_len--],Lt(pe,Mt,1),at=pe.heap[1],pe.heap[--pe.heap_max]=rt,pe.heap[--pe.heap_max]=at,Mt[2*Ve]=Mt[2*rt]+Mt[2*at],pe.depth[Ve]=(pe.depth[rt]>=pe.depth[at]?pe.depth[rt]:pe.depth[at])+1,Mt[2*rt+1]=Mt[2*at+1]=Ve,pe.heap[1]=Ve++,Lt(pe,Mt,1),2<=pe.heap_len;);pe.heap[--pe.heap_max]=pe.heap[1],function(pn,ct){var mt,_t,jt,qt,Cn,Xe,de=ct.dyn_tree,ge=ct.max_code,Ae=ct.stat_desc.static_tree,Se=ct.stat_desc.has_stree,ve=ct.stat_desc.extra_bits,Qe=ct.stat_desc.extra_base,dt=ct.stat_desc.max_length,We=0;for(qt=0;qt<=O;qt++)pn.bl_count[qt]=0;for(de[2*pn.heap[pn.heap_max]+1]=0,mt=pn.heap_max+1;mt<L;mt++)dt<(qt=de[2*de[2*(_t=pn.heap[mt])+1]+1]+1)&&(qt=dt,We++),de[2*_t+1]=qt,ge<_t||(pn.bl_count[qt]++,Cn=0,Qe<=_t&&(Cn=ve[_t-Qe]),Xe=de[2*_t],pn.opt_len+=Xe*(qt+Cn),Se&&(pn.static_len+=Xe*(Ae[2*_t+1]+Cn)));if(We!==0){do{for(qt=dt-1;pn.bl_count[qt]===0;)qt--;pn.bl_count[qt]--,pn.bl_count[qt+1]+=2,pn.bl_count[dt]--,We-=2}while(0<We);for(qt=dt;qt!==0;qt--)for(_t=pn.bl_count[qt];_t!==0;)ge<(jt=pn.heap[--mt])||(de[2*jt+1]!==qt&&(pn.opt_len+=(qt-de[2*jt+1])*de[2*jt],de[2*jt+1]=qt),_t--)}}(pe,Fe),pt(Mt,dn,pe.bl_count)}function $(pe,Fe,rt){var at,Ve,Mt=-1,wt=Fe[1],At=0,Gt=7,dn=4;for(wt===0&&(Gt=138,dn=3),Fe[2*(rt+1)+1]=65535,at=0;at<=rt;at++)Ve=wt,wt=Fe[2*(at+1)+1],++At<Gt&&Ve===wt||(At<dn?pe.bl_tree[2*Ve]+=At:Ve!==0?(Ve!==Mt&&pe.bl_tree[2*Ve]++,pe.bl_tree[2*U]++):At<=10?pe.bl_tree[2*Z]++:pe.bl_tree[2*te]++,Mt=Ve,dn=(At=0)===wt?(Gt=138,3):Ve===wt?(Gt=6,3):(Gt=7,4))}function Te(pe,Fe,rt){var at,Ve,Mt=-1,wt=Fe[1],At=0,Gt=7,dn=4;for(wt===0&&(Gt=138,dn=3),at=0;at<=rt;at++)if(Ve=wt,wt=Fe[2*(at+1)+1],!(++At<Gt&&Ve===wt)){if(At<dn)for(;St(pe,Ve,pe.bl_tree),--At!=0;);else Ve!==0?(Ve!==Mt&&(St(pe,Ve,pe.bl_tree),At--),St(pe,U,pe.bl_tree),Bt(pe,At-3,2)):At<=10?(St(pe,Z,pe.bl_tree),Bt(pe,At-3,3)):(St(pe,te,pe.bl_tree),Bt(pe,At-11,7));Mt=Ve,dn=(At=0)===wt?(Gt=138,3):Ve===wt?(Gt=6,3):(Gt=7,4)}}f(ut);var Oe=!1;function ye(pe,Fe,rt,at){Bt(pe,(y<<1)+(at?1:0),3),function(Ve,Mt,wt,At){ot(Ve),Dt(Ve,wt),Dt(Ve,~wt),u.arraySet(Ve.pending_buf,Ve.window,Mt,wt,Ve.pending),Ve.pending+=wt}(pe,Fe,rt)}a._tr_init=function(pe){Oe||(function(){var Fe,rt,at,Ve,Mt,wt=new Array(O+1);for(Ve=at=0;Ve<x-1;Ve++)for(Le[Ve]=at,Fe=0;Fe<1<<Y[Ve];Fe++)K[at++]=Ve;for(K[at-1]=Ve,Ve=Mt=0;Ve<16;Ve++)for(ut[Ve]=Mt,Fe=0;Fe<1<<W[Ve];Fe++)ce[Mt++]=Ve;for(Mt>>=7;Ve<A;Ve++)for(ut[Ve]=Mt<<7,Fe=0;Fe<1<<W[Ve]-7;Fe++)ce[256+Mt++]=Ve;for(rt=0;rt<=O;rt++)wt[rt]=0;for(Fe=0;Fe<=143;)le[2*Fe+1]=8,Fe++,wt[8]++;for(;Fe<=255;)le[2*Fe+1]=9,Fe++,wt[9]++;for(;Fe<=279;)le[2*Fe+1]=7,Fe++,wt[7]++;for(;Fe<=287;)le[2*Fe+1]=8,Fe++,wt[8]++;for(pt(le,M+1,wt),Fe=0;Fe<A;Fe++)Q[2*Fe+1]=5,Q[2*Fe]=en(Fe,5);Ue=new Tt(le,Y,b+1,M,O),Be=new Tt(Q,W,0,A,O),tt=new Tt(new Array(0),H,0,P,z)}(),Oe=!0),pe.l_desc=new Ge(pe.dyn_ltree,Ue),pe.d_desc=new Ge(pe.dyn_dtree,Be),pe.bl_desc=new Ge(pe.bl_tree,tt),pe.bi_buf=0,pe.bi_valid=0,ft(pe)},a._tr_stored_block=ye,a._tr_flush_block=function(pe,Fe,rt,at){var Ve,Mt,wt=0;0<pe.level?(pe.strm.data_type===2&&(pe.strm.data_type=function(At){var Gt,dn=4093624447;for(Gt=0;Gt<=31;Gt++,dn>>>=1)if(1&dn&&At.dyn_ltree[2*Gt]!==0)return l;if(At.dyn_ltree[18]!==0||At.dyn_ltree[20]!==0||At.dyn_ltree[26]!==0)return s;for(Gt=32;Gt<b;Gt++)if(At.dyn_ltree[2*Gt]!==0)return s;return l}(pe)),Ie(pe,pe.l_desc),Ie(pe,pe.d_desc),wt=function(At){var Gt;for($(At,At.dyn_ltree,At.l_desc.max_code),$(At,At.dyn_dtree,At.d_desc.max_code),Ie(At,At.bl_desc),Gt=P-1;3<=Gt&&At.bl_tree[2*ne[Gt]+1]===0;Gt--);return At.opt_len+=3*(Gt+1)+5+5+4,Gt}(pe),Ve=pe.opt_len+3+7>>>3,(Mt=pe.static_len+3+7>>>3)<=Ve&&(Ve=Mt)):Ve=Mt=rt+5,rt+4<=Ve&&Fe!==-1?ye(pe,Fe,rt,at):pe.strategy===4||Mt===Ve?(Bt(pe,2+(at?1:0),3),un(pe,le,Q)):(Bt(pe,4+(at?1:0),3),function(At,Gt,dn,pn){var ct;for(Bt(At,Gt-257,5),Bt(At,dn-1,5),Bt(At,pn-4,4),ct=0;ct<pn;ct++)Bt(At,At.bl_tree[2*ne[ct]+1],3);Te(At,At.dyn_ltree,Gt-1),Te(At,At.dyn_dtree,dn-1)}(pe,pe.l_desc.max_code+1,pe.d_desc.max_code+1,wt+1),un(pe,pe.dyn_ltree,pe.dyn_dtree)),ft(pe),at&&ot(pe)},a._tr_tally=function(pe,Fe,rt){return pe.pending_buf[pe.d_buf+2*pe.last_lit]=Fe>>>8&255,pe.pending_buf[pe.d_buf+2*pe.last_lit+1]=255&Fe,pe.pending_buf[pe.l_buf+pe.last_lit]=255&rt,pe.last_lit++,Fe===0?pe.dyn_ltree[2*rt]++:(pe.matches++,Fe--,pe.dyn_ltree[2*(K[rt]+b+1)]++,pe.dyn_dtree[2*Ne(Fe)]++),pe.last_lit===pe.lit_bufsize-1},a._tr_align=function(pe){Bt(pe,2,3),St(pe,B,le),function(Fe){Fe.bi_valid===16?(Dt(Fe,Fe.bi_buf),Fe.bi_buf=0,Fe.bi_valid=0):8<=Fe.bi_valid&&(Fe.pending_buf[Fe.pending++]=255&Fe.bi_buf,Fe.bi_buf>>=8,Fe.bi_valid-=8)}(pe)}},{"../utils/common":41}],53:[function(n,i,a){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,a){(function(u){(function(l,s){if(!l.setImmediate){var f,y,x,b,M=1,A={},P=!1,L=l.document,O=Object.getPrototypeOf&&Object.getPrototypeOf(l);O=O&&O.setTimeout?O:l,f={}.toString.call(l.process)==="[object process]"?function(U){process.nextTick(function(){z(U)})}:function(){if(l.postMessage&&!l.importScripts){var U=!0,Z=l.onmessage;return l.onmessage=function(){U=!1},l.postMessage("","*"),l.onmessage=Z,U}}()?(b="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",B,!1):l.attachEvent("onmessage",B),function(U){l.postMessage(b+U,"*")}):l.MessageChannel?((x=new MessageChannel).port1.onmessage=function(U){z(U.data)},function(U){x.port2.postMessage(U)}):L&&"onreadystatechange"in L.createElement("script")?(y=L.documentElement,function(U){var Z=L.createElement("script");Z.onreadystatechange=function(){z(U),Z.onreadystatechange=null,y.removeChild(Z),Z=null},y.appendChild(Z)}):function(U){setTimeout(z,0,U)},O.setImmediate=function(U){typeof U!="function"&&(U=new Function(""+U));for(var Z=new Array(arguments.length-1),te=0;te<Z.length;te++)Z[te]=arguments[te+1];var Y={callback:U,args:Z};return A[M]=Y,f(M),M++},O.clearImmediate=V}function V(U){delete A[U]}function z(U){if(P)setTimeout(z,0,U);else{var Z=A[U];if(Z){P=!0;try{(function(te){var Y=te.callback,W=te.args;switch(W.length){case 0:Y();break;case 1:Y(W[0]);break;case 2:Y(W[0],W[1]);break;case 3:Y(W[0],W[1],W[2]);break;default:Y.apply(s,W)}})(Z)}finally{V(U),P=!1}}}}function B(U){U.source===l&&typeof U.data=="string"&&U.data.indexOf(b)===0&&z(+U.data.slice(b.length))}})(typeof self>"u"?u===void 0?this:u:self)}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(v4);var yN=v4.exports,vN=y4,w0=nv,_N=m4,bN=yN,_4=function(e,t,n=!1){let i=new bN,a=i;t&&t.folder&&(a=i.folder(t.folder));var u=t&&t.prj?t.prj:_N;[w0.point(e),w0.line(e),w0.polygon(e),w0.multipolygon(e),w0.multiline(e)].forEach(function(s){s.geometries.length&&s.geometries[0].length&&vN(s.properties,s.type,s.geometries,function(f,y){var x=t&&t.types&&t.types[s.type.toLowerCase()]?t.types[s.type.toLowerCase()]:s.type;a.file(x+".shp",y.shp.buffer,{binary:!0}),a.file(x+".shx",y.shx.buffer,{binary:!0}),a.file(x+".dbf",y.dbf.buffer,{binary:!0}),a.file(x+".prj",u)})});var l={};return!t||!t.outputType?l.type="base64":l.type=t.outputType,!t||!t.compression?l.compression="DEFLATE":l.compression=t.compression,n?i.generateNodeStream({...l,streamFiles:!0}):i.generateAsync(l)},b4={exports:{}};(function(e,t){(function(n,i){i()})(la,function(){function n(y,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function i(y,x,b){var M=new XMLHttpRequest;M.open("GET",y),M.responseType="blob",M.onload=function(){f(M.response,x,b)},M.onerror=function(){console.error("could not download file")},M.send()}function a(y){var x=new XMLHttpRequest;x.open("HEAD",y,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function u(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(x)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof la=="object"&&la.global===la?la:void 0,s=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(y,x,b){var M=l.URL||l.webkitURL,A=document.createElement("a");x=x||y.name||"download",A.download=x,A.rel="noopener",typeof y=="string"?(A.href=y,A.origin===location.origin?u(A):a(A.href)?i(y,x,b):u(A,A.target="_blank")):(A.href=M.createObjectURL(y),setTimeout(function(){M.revokeObjectURL(A.href)},4e4),setTimeout(function(){u(A)},0))}:"msSaveOrOpenBlob"in navigator?function(y,x,b){if(x=x||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(n(y,b),x);else if(a(y))i(y,x,b);else{var M=document.createElement("a");M.href=y,M.target="_blank",setTimeout(function(){u(M)})}}:function(y,x,b,M){if(M=M||open("","_blank"),M&&(M.document.title=M.document.body.innerText="downloading..."),typeof y=="string")return i(y,x,b);var A=y.type==="application/octet-stream",P=/constructor/i.test(l.HTMLElement)||l.safari,L=/CriOS\/[\d]+/.test(navigator.userAgent);if((L||A&&P||s)&&typeof FileReader<"u"){var O=new FileReader;O.onloadend=function(){var B=O.result;B=L?B:B.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=B:location=B,M=null},O.readAsDataURL(y)}else{var V=l.URL||l.webkitURL,z=V.createObjectURL(y);M?M.location=z:location.href=z,M=null,setTimeout(function(){V.revokeObjectURL(z)},4e4)}});l.saveAs=f.saveAs=f,e.exports=f})})(b4);var BA=b4.exports;const xN=vd(BA);var AN=_4,wN=BA.saveAs,CN=function(e,t){let n="download";t&&(t.filename||t.folder)&&(n=t.filename||t.folder),AN(e,t).then(function(i){wN(i,n+".zip")})};RA.download=CN;RA.write=y4;RA.zip=_4;var x4={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,i)=>{e.exports=i()})(la,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},a,u=!i.document&&!!i.postMessage,l=i.IS_PAPA_WORKER||!1,s={},f=0,y={};function x(W){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(H){var ne=Z(H);ne.chunkSize=parseInt(ne.chunkSize),H.step||H.chunk||(ne.chunkSize=null),this._handle=new L(ne),(this._handle.streamer=this)._config=ne}).call(this,W),this.parseChunk=function(H,ne){var le=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<le){let ce=this._config.newline;ce||(Q=this._config.quoteChar||'"',ce=this._handle.guessLineEndings(H,Q)),H=[...H.split(ce).slice(le)].join(ce)}this.isFirstChunk&&Y(this._config.beforeFirstChunk)&&(Q=this._config.beforeFirstChunk(H))!==void 0&&(H=Q),this.isFirstChunk=!1,this._halted=!1;var le=this._partialLine+H,Q=(this._partialLine="",this._handle.parse(le,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(H=Q.meta.cursor,le=(this._finished||(this._partialLine=le.substring(H-this._baseIndex),this._baseIndex=H),Q&&Q.data&&(this._rowCount+=Q.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)i.postMessage({results:Q,workerId:y.WORKER_ID,finished:le});else if(Y(this._config.chunk)&&!ne){if(this._config.chunk(Q,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Q=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Q.data),this._completeResults.errors=this._completeResults.errors.concat(Q.errors),this._completeResults.meta=Q.meta),this._completed||!le||!Y(this._config.complete)||Q&&Q.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),le||Q&&Q.meta.paused||this._nextChunk(),Q}this._halted=!0},this._sendError=function(H){Y(this._config.error)?this._config.error(H):l&&this._config.error&&i.postMessage({workerId:y.WORKER_ID,error:H,finished:!1})}}function b(W){var H;(W=W||{}).chunkSize||(W.chunkSize=y.RemoteChunkSize),x.call(this,W),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ne){this._input=ne,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(H=new XMLHttpRequest,this._config.withCredentials&&(H.withCredentials=this._config.withCredentials),u||(H.onload=te(this._chunkLoaded,this),H.onerror=te(this._chunkError,this)),H.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var ne,le=this._config.downloadRequestHeaders;for(ne in le)H.setRequestHeader(ne,le[ne])}var Q;this._config.chunkSize&&(Q=this._start+this._config.chunkSize-1,H.setRequestHeader("Range","bytes="+this._start+"-"+Q));try{H.send(this._config.downloadRequestBody)}catch(ce){this._chunkError(ce.message)}u&&H.status===0&&this._chunkError()}},this._chunkLoaded=function(){H.readyState===4&&(H.status<200||400<=H.status?this._chunkError():(this._start+=this._config.chunkSize||H.responseText.length,this._finished=!this._config.chunkSize||this._start>=(ne=>(ne=ne.getResponseHeader("Content-Range"))!==null?parseInt(ne.substring(ne.lastIndexOf("/")+1)):-1)(H),this.parseChunk(H.responseText)))},this._chunkError=function(ne){ne=H.statusText||ne,this._sendError(new Error(ne))}}function M(W){(W=W||{}).chunkSize||(W.chunkSize=y.LocalChunkSize),x.call(this,W);var H,ne,le=typeof FileReader<"u";this.stream=function(Q){this._input=Q,ne=Q.slice||Q.webkitSlice||Q.mozSlice,le?((H=new FileReader).onload=te(this._chunkLoaded,this),H.onerror=te(this._chunkError,this)):H=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Q=this._input,ce=(this._config.chunkSize&&(ce=Math.min(this._start+this._config.chunkSize,this._input.size),Q=ne.call(Q,this._start,ce)),H.readAsText(Q,this._config.encoding));le||this._chunkLoaded({target:{result:ce}})},this._chunkLoaded=function(Q){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Q.target.result)},this._chunkError=function(){this._sendError(H.error)}}function A(W){var H;x.call(this,W=W||{}),this.stream=function(ne){return H=ne,this._nextChunk()},this._nextChunk=function(){var ne,le;if(!this._finished)return ne=this._config.chunkSize,H=ne?(le=H.substring(0,ne),H.substring(ne)):(le=H,""),this._finished=!H,this.parseChunk(le)}}function P(W){x.call(this,W=W||{});var H=[],ne=!0,le=!1;this.pause=function(){x.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){x.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Q){this._input=Q,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){le&&H.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),H.length?this.parseChunk(H.shift()):ne=!0},this._streamData=te(function(Q){try{H.push(typeof Q=="string"?Q:Q.toString(this._config.encoding)),ne&&(ne=!1,this._checkIsFinished(),this.parseChunk(H.shift()))}catch(ce){this._streamError(ce)}},this),this._streamError=te(function(Q){this._streamCleanUp(),this._sendError(Q)},this),this._streamEnd=te(function(){this._streamCleanUp(),le=!0,this._streamData("")},this),this._streamCleanUp=te(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(W){var H,ne,le,Q,ce=Math.pow(2,53),K=-ce,Le=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ue=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Be=this,tt=0,ut=0,Tt=!1,Ge=!1,Ne=[],Dt={data:[],errors:[],meta:{}};function Bt(ft){return W.skipEmptyLines==="greedy"?ft.join("").trim()==="":ft.length===1&&ft[0].length===0}function St(){if(Dt&&le&&(pt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),le=!1),W.skipEmptyLines&&(Dt.data=Dt.data.filter(function(Lt){return!Bt(Lt)})),en()){let Lt=function(un,Ie){Y(W.transformHeader)&&(un=W.transformHeader(un,Ie)),Ne.push(un)};if(Dt)if(Array.isArray(Dt.data[0])){for(var ft=0;en()&&ft<Dt.data.length;ft++)Dt.data[ft].forEach(Lt);Dt.data.splice(0,1)}else Dt.data.forEach(Lt)}function ot(Lt,un){for(var Ie=W.header?{}:[],$=0;$<Lt.length;$++){var Te=$,Oe=Lt[$],Oe=((ye,pe)=>(Fe=>(W.dynamicTypingFunction&&W.dynamicTyping[Fe]===void 0&&(W.dynamicTyping[Fe]=W.dynamicTypingFunction(Fe)),(W.dynamicTyping[Fe]||W.dynamicTyping)===!0))(ye)?pe==="true"||pe==="TRUE"||pe!=="false"&&pe!=="FALSE"&&((Fe=>{if(Le.test(Fe)&&(Fe=parseFloat(Fe),K<Fe&&Fe<ce))return 1})(pe)?parseFloat(pe):Ue.test(pe)?new Date(pe):pe===""?null:pe):pe)(Te=W.header?$>=Ne.length?"__parsed_extra":Ne[$]:Te,Oe=W.transform?W.transform(Oe,Te):Oe);Te==="__parsed_extra"?(Ie[Te]=Ie[Te]||[],Ie[Te].push(Oe)):Ie[Te]=Oe}return W.header&&($>Ne.length?pt("FieldMismatch","TooManyFields","Too many fields: expected "+Ne.length+" fields but parsed "+$,ut+un):$<Ne.length&&pt("FieldMismatch","TooFewFields","Too few fields: expected "+Ne.length+" fields but parsed "+$,ut+un)),Ie}var Pt;Dt&&(W.header||W.dynamicTyping||W.transform)&&(Pt=1,!Dt.data.length||Array.isArray(Dt.data[0])?(Dt.data=Dt.data.map(ot),Pt=Dt.data.length):Dt.data=ot(Dt.data,0),W.header&&Dt.meta&&(Dt.meta.fields=Ne),ut+=Pt)}function en(){return W.header&&Ne.length===0}function pt(ft,ot,Pt,Lt){ft={type:ft,code:ot,message:Pt},Lt!==void 0&&(ft.row=Lt),Dt.errors.push(ft)}Y(W.step)&&(Q=W.step,W.step=function(ft){Dt=ft,en()?St():(St(),Dt.data.length!==0&&(tt+=ft.data.length,W.preview&&tt>W.preview?ne.abort():(Dt.data=Dt.data[0],Q(Dt,Be))))}),this.parse=function(ft,ot,Pt){var Lt=W.quoteChar||'"',Lt=(W.newline||(W.newline=this.guessLineEndings(ft,Lt)),le=!1,W.delimiter?Y(W.delimiter)&&(W.delimiter=W.delimiter(ft),Dt.meta.delimiter=W.delimiter):((Lt=((un,Ie,$,Te,Oe)=>{var ye,pe,Fe,rt;Oe=Oe||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var at=0;at<Oe.length;at++){for(var Ve,Mt=Oe[at],wt=0,At=0,Gt=0,dn=(Fe=void 0,new V({comments:Te,delimiter:Mt,newline:Ie,preview:10}).parse(un)),pn=0;pn<dn.data.length;pn++)$&&Bt(dn.data[pn])?Gt++:(Ve=dn.data[pn].length,At+=Ve,Fe===void 0?Fe=Ve:0<Ve&&(wt+=Math.abs(Ve-Fe),Fe=Ve));0<dn.data.length&&(At/=dn.data.length-Gt),(pe===void 0||wt<=pe)&&(rt===void 0||rt<At)&&1.99<At&&(pe=wt,ye=Mt,rt=At)}return{successful:!!(W.delimiter=ye),bestDelimiter:ye}})(ft,W.newline,W.skipEmptyLines,W.comments,W.delimitersToGuess)).successful?W.delimiter=Lt.bestDelimiter:(le=!0,W.delimiter=y.DefaultDelimiter),Dt.meta.delimiter=W.delimiter),Z(W));return W.preview&&W.header&&Lt.preview++,H=ft,ne=new V(Lt),Dt=ne.parse(H,ot,Pt),St(),Tt?{meta:{paused:!0}}:Dt||{meta:{paused:!1}}},this.paused=function(){return Tt},this.pause=function(){Tt=!0,ne.abort(),H=Y(W.chunk)?"":H.substring(ne.getCharIndex())},this.resume=function(){Be.streamer._halted?(Tt=!1,Be.streamer.parseChunk(H,!0)):setTimeout(Be.resume,3)},this.aborted=function(){return Ge},this.abort=function(){Ge=!0,ne.abort(),Dt.meta.aborted=!0,Y(W.complete)&&W.complete(Dt),H=""},this.guessLineEndings=function(un,Lt){un=un.substring(0,1048576);var Lt=new RegExp(O(Lt)+"([^]*?)"+O(Lt),"gm"),Pt=(un=un.replace(Lt,"")).split("\r"),Lt=un.split(`
`),un=1<Lt.length&&Lt[0].length<Pt[0].length;if(Pt.length===1||un)return`
`;for(var Ie=0,$=0;$<Pt.length;$++)Pt[$][0]===`
`&&Ie++;return Ie>=Pt.length/2?`\r
`:"\r"}}function O(W){return W.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(W){var H=(W=W||{}).delimiter,ne=W.newline,le=W.comments,Q=W.step,ce=W.preview,K=W.fastMode,Le=null,Ue=!1,Be=W.quoteChar==null?'"':W.quoteChar,tt=Be;if(W.escapeChar!==void 0&&(tt=W.escapeChar),(typeof H!="string"||-1<y.BAD_DELIMITERS.indexOf(H))&&(H=","),le===H)throw new Error("Comment character same as delimiter");le===!0?le="#":(typeof le!="string"||-1<y.BAD_DELIMITERS.indexOf(le))&&(le=!1),ne!==`
`&&ne!=="\r"&&ne!==`\r
`&&(ne=`
`);var ut=0,Tt=!1;this.parse=function(Ge,Ne,Dt){if(typeof Ge!="string")throw new Error("Input must be a string");var Bt=Ge.length,St=H.length,en=ne.length,pt=le.length,ft=Y(Q),ot=[],Pt=[],Lt=[],un=ut=0;if(!Ge)return wt();if(K||K!==!1&&Ge.indexOf(Be)===-1){for(var Ie=Ge.split(ne),$=0;$<Ie.length;$++){if(Lt=Ie[$],ut+=Lt.length,$!==Ie.length-1)ut+=ne.length;else if(Dt)return wt();if(!le||Lt.substring(0,pt)!==le){if(ft){if(ot=[],rt(Lt.split(H)),At(),Tt)return wt()}else rt(Lt.split(H));if(ce&&ce<=$)return ot=ot.slice(0,ce),wt(!0)}}return wt()}for(var Te=Ge.indexOf(H,ut),Oe=Ge.indexOf(ne,ut),ye=new RegExp(O(tt)+O(Be),"g"),pe=Ge.indexOf(Be,ut);;)if(Ge[ut]===Be)for(pe=ut,ut++;;){if((pe=Ge.indexOf(Be,pe+1))===-1)return Dt||Pt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ot.length,index:ut}),Ve();if(pe===Bt-1)return Ve(Ge.substring(ut,pe).replace(ye,Be));if(Be===tt&&Ge[pe+1]===tt)pe++;else if(Be===tt||pe===0||Ge[pe-1]!==tt){Te!==-1&&Te<pe+1&&(Te=Ge.indexOf(H,pe+1));var Fe=at((Oe=Oe!==-1&&Oe<pe+1?Ge.indexOf(ne,pe+1):Oe)===-1?Te:Math.min(Te,Oe));if(Ge.substr(pe+1+Fe,St)===H){Lt.push(Ge.substring(ut,pe).replace(ye,Be)),Ge[ut=pe+1+Fe+St]!==Be&&(pe=Ge.indexOf(Be,ut)),Te=Ge.indexOf(H,ut),Oe=Ge.indexOf(ne,ut);break}if(Fe=at(Oe),Ge.substring(pe+1+Fe,pe+1+Fe+en)===ne){if(Lt.push(Ge.substring(ut,pe).replace(ye,Be)),Mt(pe+1+Fe+en),Te=Ge.indexOf(H,ut),pe=Ge.indexOf(Be,ut),ft&&(At(),Tt))return wt();if(ce&&ot.length>=ce)return wt(!0);break}Pt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ot.length,index:ut}),pe++}}else if(le&&Lt.length===0&&Ge.substring(ut,ut+pt)===le){if(Oe===-1)return wt();ut=Oe+en,Oe=Ge.indexOf(ne,ut),Te=Ge.indexOf(H,ut)}else if(Te!==-1&&(Te<Oe||Oe===-1))Lt.push(Ge.substring(ut,Te)),ut=Te+St,Te=Ge.indexOf(H,ut);else{if(Oe===-1)break;if(Lt.push(Ge.substring(ut,Oe)),Mt(Oe+en),ft&&(At(),Tt))return wt();if(ce&&ot.length>=ce)return wt(!0)}return Ve();function rt(Gt){ot.push(Gt),un=ut}function at(Gt){var dn=0;return dn=Gt!==-1&&(Gt=Ge.substring(pe+1,Gt))&&Gt.trim()===""?Gt.length:dn}function Ve(Gt){return Dt||(Gt===void 0&&(Gt=Ge.substring(ut)),Lt.push(Gt),ut=Bt,rt(Lt),ft&&At()),wt()}function Mt(Gt){ut=Gt,rt(Lt),Lt=[],Oe=Ge.indexOf(ne,ut)}function wt(Gt){if(W.header&&!Ne&&ot.length&&!Ue){var dn=ot[0],pn={},ct=new Set(dn);let mt=!1;for(let _t=0;_t<dn.length;_t++){let jt=dn[_t];if(pn[jt=Y(W.transformHeader)?W.transformHeader(jt,_t):jt]){let qt,Cn=pn[jt];for(;qt=jt+"_"+Cn,Cn++,ct.has(qt););ct.add(qt),dn[_t]=qt,pn[jt]++,mt=!0,(Le=Le===null?{}:Le)[qt]=jt}else pn[jt]=1,dn[_t]=jt;ct.add(jt)}mt&&console.warn("Duplicate headers found and renamed."),Ue=!0}return{data:ot,errors:Pt,meta:{delimiter:H,linebreak:ne,aborted:Tt,truncated:!!Gt,cursor:un+(Ne||0),renamedHeaders:Le}}}function At(){Q(wt()),ot=[],Pt=[]}},this.abort=function(){Tt=!0},this.getCharIndex=function(){return ut}}function z(W){var H=W.data,ne=s[H.workerId],le=!1;if(H.error)ne.userError(H.error,H.file);else if(H.results&&H.results.data){var Q={abort:function(){le=!0,B(H.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(Y(ne.userStep)){for(var ce=0;ce<H.results.data.length&&(ne.userStep({data:H.results.data[ce],errors:H.results.errors,meta:H.results.meta},Q),!le);ce++);delete H.results}else Y(ne.userChunk)&&(ne.userChunk(H.results,Q,H.file),delete H.results)}H.finished&&!le&&B(H.workerId,H.results)}function B(W,H){var ne=s[W];Y(ne.userComplete)&&ne.userComplete(H),ne.terminate(),delete s[W]}function U(){throw new Error("Not implemented.")}function Z(W){if(typeof W!="object"||W===null)return W;var H,ne=Array.isArray(W)?[]:{};for(H in W)ne[H]=Z(W[H]);return ne}function te(W,H){return function(){W.apply(H,arguments)}}function Y(W){return typeof W=="function"}return y.parse=function(W,H){var ne=(H=H||{}).dynamicTyping||!1;if(Y(ne)&&(H.dynamicTypingFunction=ne,ne={}),H.dynamicTyping=ne,H.transform=!!Y(H.transform)&&H.transform,!H.worker||!y.WORKERS_SUPPORTED)return ne=null,y.NODE_STREAM_INPUT,typeof W=="string"?(W=(le=>le.charCodeAt(0)!==65279?le:le.slice(1))(W),ne=new(H.download?b:A)(H)):W.readable===!0&&Y(W.read)&&Y(W.on)?ne=new P(H):(i.File&&W instanceof File||W instanceof Object)&&(ne=new M(H)),ne.stream(W);(ne=(()=>{var le;return!!y.WORKERS_SUPPORTED&&(le=(()=>{var Q=i.URL||i.webkitURL||null,ce=n.toString();return y.BLOB_URL||(y.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ce,")();"],{type:"text/javascript"})))})(),(le=new i.Worker(le)).onmessage=z,le.id=f++,s[le.id]=le)})()).userStep=H.step,ne.userChunk=H.chunk,ne.userComplete=H.complete,ne.userError=H.error,H.step=Y(H.step),H.chunk=Y(H.chunk),H.complete=Y(H.complete),H.error=Y(H.error),delete H.worker,ne.postMessage({input:W,config:H,workerId:ne.id})},y.unparse=function(W,H){var ne=!1,le=!0,Q=",",ce=`\r
`,K='"',Le=K+K,Ue=!1,Be=null,tt=!1,ut=((()=>{if(typeof H=="object"){if(typeof H.delimiter!="string"||y.BAD_DELIMITERS.filter(function(Ne){return H.delimiter.indexOf(Ne)!==-1}).length||(Q=H.delimiter),typeof H.quotes!="boolean"&&typeof H.quotes!="function"&&!Array.isArray(H.quotes)||(ne=H.quotes),typeof H.skipEmptyLines!="boolean"&&typeof H.skipEmptyLines!="string"||(Ue=H.skipEmptyLines),typeof H.newline=="string"&&(ce=H.newline),typeof H.quoteChar=="string"&&(K=H.quoteChar),typeof H.header=="boolean"&&(le=H.header),Array.isArray(H.columns)){if(H.columns.length===0)throw new Error("Option columns is empty");Be=H.columns}H.escapeChar!==void 0&&(Le=H.escapeChar+K),H.escapeFormulae instanceof RegExp?tt=H.escapeFormulae:typeof H.escapeFormulae=="boolean"&&H.escapeFormulae&&(tt=/^[=+\-@\t\r].*$/)}})(),new RegExp(O(K),"g"));if(typeof W=="string"&&(W=JSON.parse(W)),Array.isArray(W)){if(!W.length||Array.isArray(W[0]))return Tt(null,W,Ue);if(typeof W[0]=="object")return Tt(Be||Object.keys(W[0]),W,Ue)}else if(typeof W=="object")return typeof W.data=="string"&&(W.data=JSON.parse(W.data)),Array.isArray(W.data)&&(W.fields||(W.fields=W.meta&&W.meta.fields||Be),W.fields||(W.fields=Array.isArray(W.data[0])?W.fields:typeof W.data[0]=="object"?Object.keys(W.data[0]):[]),Array.isArray(W.data[0])||typeof W.data[0]=="object"||(W.data=[W.data])),Tt(W.fields||[],W.data||[],Ue);throw new Error("Unable to serialize unrecognized input");function Tt(Ne,Dt,Bt){var St="",en=(typeof Ne=="string"&&(Ne=JSON.parse(Ne)),typeof Dt=="string"&&(Dt=JSON.parse(Dt)),Array.isArray(Ne)&&0<Ne.length),pt=!Array.isArray(Dt[0]);if(en&&le){for(var ft=0;ft<Ne.length;ft++)0<ft&&(St+=Q),St+=Ge(Ne[ft],ft);0<Dt.length&&(St+=ce)}for(var ot=0;ot<Dt.length;ot++){var Pt=(en?Ne:Dt[ot]).length,Lt=!1,un=en?Object.keys(Dt[ot]).length===0:Dt[ot].length===0;if(Bt&&!en&&(Lt=Bt==="greedy"?Dt[ot].join("").trim()==="":Dt[ot].length===1&&Dt[ot][0].length===0),Bt==="greedy"&&en){for(var Ie=[],$=0;$<Pt;$++){var Te=pt?Ne[$]:$;Ie.push(Dt[ot][Te])}Lt=Ie.join("").trim()===""}if(!Lt){for(var Oe=0;Oe<Pt;Oe++){0<Oe&&!un&&(St+=Q);var ye=en&&pt?Ne[Oe]:Oe;St+=Ge(Dt[ot][ye],Oe)}ot<Dt.length-1&&(!Bt||0<Pt&&!un)&&(St+=ce)}}return St}function Ge(Ne,Dt){var Bt,St;return Ne==null?"":Ne.constructor===Date?JSON.stringify(Ne).slice(1,25):(St=!1,tt&&typeof Ne=="string"&&tt.test(Ne)&&(Ne="'"+Ne,St=!0),Bt=Ne.toString().replace(ut,Le),(St=St||ne===!0||typeof ne=="function"&&ne(Ne,Dt)||Array.isArray(ne)&&ne[Dt]||((en,pt)=>{for(var ft=0;ft<pt.length;ft++)if(-1<en.indexOf(pt[ft]))return!0;return!1})(Bt,y.BAD_DELIMITERS)||-1<Bt.indexOf(Q)||Bt.charAt(0)===" "||Bt.charAt(Bt.length-1)===" ")?K+Bt+K:Bt)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!u&&!!i.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=V,y.ParserHandle=L,y.NetworkStreamer=b,y.FileStreamer=M,y.StringStreamer=A,y.ReadableStreamStreamer=P,i.jQuery&&((a=i.jQuery).fn.parse=function(W){var H=W.config||{},ne=[];return this.each(function(ce){if(!(a(this).prop("tagName").toUpperCase()==="INPUT"&&a(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)ne.push({file:this.files[K],inputElem:this,instanceConfig:a.extend({},H)})}),le(),this;function le(){if(ne.length===0)Y(W.complete)&&W.complete();else{var ce,K,Le,Ue,Be=ne[0];if(Y(W.before)){var tt=W.before(Be.file,Be.inputElem);if(typeof tt=="object"){if(tt.action==="abort")return ce="AbortError",K=Be.file,Le=Be.inputElem,Ue=tt.reason,void(Y(W.error)&&W.error({name:ce},K,Le,Ue));if(tt.action==="skip")return void Q();typeof tt.config=="object"&&(Be.instanceConfig=a.extend(Be.instanceConfig,tt.config))}else if(tt==="skip")return void Q()}var ut=Be.instanceConfig.complete;Be.instanceConfig.complete=function(Tt){Y(ut)&&ut(Tt,Be.file,Be.inputElem),Q()},y.parse(Be.file,Be.instanceConfig)}}function Q(){ne.splice(0,1),le()}}),l&&(i.onmessage=function(W){W=W.data,y.WORKER_ID===void 0&&W&&(y.WORKER_ID=W.workerId),typeof W.input=="string"?i.postMessage({workerId:y.WORKER_ID,results:y.parse(W.input,W.config),finished:!0}):(i.File&&W.input instanceof File||W.input instanceof Object)&&(W=y.parse(W.input,W.config))&&i.postMessage({workerId:y.WORKER_ID,results:W,finished:!0})}),(b.prototype=Object.create(x.prototype)).constructor=b,(M.prototype=Object.create(x.prototype)).constructor=M,(A.prototype=Object.create(A.prototype)).constructor=A,(P.prototype=Object.create(x.prototype)).constructor=P,y})})(x4);var IN=x4.exports;const MN=vd(IN);var X1={};X1.attr=NM;X1.tagClose=SN;X1.tag=EN;X1.encode=TN;function NM(e){return e&&e.length?" "+e.map(function(t){return t[0]+'="'+t[1]+'"'}).join(" "):""}function SN(e,t){return"<"+e+NM(t)+"/>"}function EN(e,t,n){return"<"+e+NM(n)+">"+t+"</"+e+">"}function TN(e){return(e===null?"":e.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var A4=X1,Sr=A4.tag,C1=A4.encode,PN=function(t,n){return n=n||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+Sr("kml",Sr("Document",LN(n)+DN(n)+kN(t,n)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function J2(e,t){return function(n){if(!n.properties||!fu.valid(n.geometry))return"";var i=fu.any(n.geometry);if(!i)return"";var a="",u="";if(e.simplestyle){var l=GN(n.properties);l&&(fu.isPoint(n.geometry)&&NN(n.properties)?(t.indexOf(l)===-1&&(a=VN(n.properties,l),t.push(l)),u=Sr("styleUrl","#"+l)):(fu.isPolygon(n.geometry)||fu.isLine(n.geometry))&&$N(n.properties)&&(t.indexOf(l)===-1&&(a=HN(n.properties,l),t.push(l)),u=Sr("styleUrl","#"+l)))}return a+Sr("Placemark",RN(n.properties,e)+ON(n.properties,e)+FN(n.properties)+zN(n.properties,e)+i+u)}}function kN(e,t){if(!e.type)return"";var n=[];switch(e.type){case"FeatureCollection":return e.features?e.features.map(J2(t,n)).join(""):"";case"Feature":return J2(t,n)(e);default:return J2(t,n)({type:"Feature",geometry:e,properties:{}})}}function LN(e){return e.documentName!==void 0?Sr("name",e.documentName):""}function DN(e){return e.documentDescription!==void 0?Sr("description",e.documentDescription):""}function RN(e,t){return e[t.name]?Sr("name",C1(e[t.name])):""}function ON(e,t){return e[t.description]?Sr("description",C1(e[t.description])):""}function zN(e,t){return e[t.timestamp]?Sr("TimeStamp",Sr("when",C1(e[t.timestamp]))):""}var fu={Point:function(e){return Sr("Point",Sr("coordinates",e.coordinates.join(",")))},LineString:function(e){return Sr("LineString",Sr("coordinates",eC(e.coordinates)))},Polygon:function(e){if(!e.coordinates.length)return"";var t=e.coordinates[0],n=e.coordinates.slice(1),i=Sr("outerBoundaryIs",Sr("LinearRing",Sr("coordinates",eC(t)))),a=n.map(function(u){return Sr("innerBoundaryIs",Sr("LinearRing",Sr("coordinates",eC(u))))}).join("");return Sr("Polygon",i+a)},MultiPoint:function(e){return e.coordinates.length?Sr("MultiGeometry",e.coordinates.map(function(t){return fu.Point({coordinates:t})}).join("")):""},MultiPolygon:function(e){return e.coordinates.length?Sr("MultiGeometry",e.coordinates.map(function(t){return fu.Polygon({coordinates:t})}).join("")):""},MultiLineString:function(e){return e.coordinates.length?Sr("MultiGeometry",e.coordinates.map(function(t){return fu.LineString({coordinates:t})}).join("")):""},GeometryCollection:function(e){return Sr("MultiGeometry",e.geometries.map(fu.any).join(""))},valid:function(e){return e&&e.type&&(e.coordinates||e.type==="GeometryCollection"&&e.geometries&&e.geometries.every(fu.valid))},any:function(e){return fu[e.type]?fu[e.type](e):""},isPoint:function(e){return e.type==="Point"||e.type==="MultiPoint"},isPolygon:function(e){return e.type==="Polygon"||e.type==="MultiPolygon"},isLine:function(e){return e.type==="LineString"||e.type==="MultiLineString"}};function eC(e){return e.map(function(t){return t.join(",")}).join(" ")}function FN(e){return Sr("ExtendedData",ZN(e).map(BN).join(""))}function BN(e){return Sr("Data",Sr("value",C1(e[1])),[["name",C1(e[0])]])}function NN(e){return!!(e["marker-size"]||e["marker-symbol"]||e["marker-color"])}function VN(e,t){return Sr("Style",Sr("IconStyle",Sr("Icon",Sr("href",jN(e))))+UN(),[["id",t]])}function jN(e){var t=e["marker-size"]||"medium",n=e["marker-symbol"]?"-"+e["marker-symbol"]:"",i=(e["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+t.charAt(0)+n+"+"+i+".png"}function UN(e){return Sr("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function $N(e){for(var t in e)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[t])return!0}function HN(e,t){var n=Sr("LineStyle",[Sr("color",VT(e.stroke,e["stroke-opacity"])||"ff555555")+Sr("width",e["stroke-width"]===void 0?2:e["stroke-width"])]),i="";return(e.fill||e["fill-opacity"])&&(i=Sr("PolyStyle",[Sr("color",VT(e.fill,e["fill-opacity"])||"88555555")])),Sr("Style",n+i,[["id",t]])}function GN(e){var t="";return e["marker-symbol"]&&(t=t+"ms"+e["marker-symbol"]),e["marker-color"]&&(t=t+"mc"+e["marker-color"].replace("#","")),e["marker-size"]&&(t=t+"ms"+e["marker-size"]),e.stroke&&(t=t+"s"+e.stroke.replace("#","")),e["stroke-width"]&&(t=t+"sw"+e["stroke-width"].toString().replace(".","")),e["stroke-opacity"]&&(t=t+"mo"+e["stroke-opacity"].toString().replace(".","")),e.fill&&(t=t+"f"+e.fill.replace("#","")),e["fill-opacity"]&&(t=t+"fo"+e["fill-opacity"].toString().replace(".","")),t}function VT(e,t){if(typeof e!="string")return"";if(e=e.replace("#","").toLowerCase(),e.length===3)e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2];else if(e.length!==6)return"";var n=e[0]+e[1],i=e[2]+e[3],a=e[4]+e[5],u="ff";return typeof t=="number"&&t>=0&&t<=1&&(u=(t*255).toString(16),u.indexOf(".")>-1&&(u=u.substr(0,u.indexOf("."))),u.length<2&&(u="0"+u)),u+a+i+n}function ZN(e){var t=[];for(var n in e)t.push([n,e[n]]);return t}const WN=vd(PN);function qN(e){var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"geojson":case"json":return"geojson";case"zip":case"shp":return"shapefile";case"kml":return"kml";case"csv":return"csv";default:return null}}function KN(){async function e(t,{format:n,filename:i="data"}={}){const a=n||qN(i);if(!a)return console.error("Khng xc nh c nh dng u ra."),null;switch(a){case"geojson":return new Blob([JSON.stringify(t)],{type:"application/geo+json"});case"shapefile":{const u={folder:"shapefile",types:{point:"points",polygon:"polygons",line:"lines"},compression:"DEFLATE",outputType:"blob"},l=await RA.zip(t,u);return l instanceof Blob?l:l instanceof ArrayBuffer?new Blob([l]):l instanceof Uint8Array?new Blob([l.buffer]):Array.isArray(l)?new Blob([new Uint8Array(l).buffer]):typeof l=="string"?new Blob([l],{type:"text/plain"}):(console.error("Kt qu khng xc nh:",l),null)}case"kml":{const u=WN(t);return new Blob([u],{type:"application/vnd.google-earth.kml+xml"})}case"csv":{const u=t.features.map(s=>({...s.properties,geometry:JSON.stringify(s.geometry)})),l=MN.unparse(u);return new Blob([l],{type:"text/csv"})}default:return console.error("nh dng khng c h tr:",a),null}}return{convert:e}}const jT={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},YN={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:e=>["horizontal","vertical","both","none"].includes(e)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return jT[this.type]||jT.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},XN=["width","height","viewBox"],QN=["d"];function JN(e,t,n,i,a,u){return xe(),et("svg",{width:u.sizeValue,height:u.sizeValue,viewBox:u.viewboxValue,style:qr(u.styles)},[Pe("path",{d:n.path},null,8,QN)],12,XN)}const Pn=_n(YN,[["render",JN],["__scopeId","data-v-0fb36228"]]);var e9="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",t9="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",n9="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M19,8H5V19H9.5C9.81,19.75 10.26,20.42 10.81,21H5C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H6V1H8V3H16V1H18V3H19A2,2 0 0,1 21,5V13.03C20.5,12.22 19.8,11.54 19,11V8Z",r9="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",i9="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",Vy="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",s9="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",w4="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",a9="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",o9="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",C4="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",rv="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",l9="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",u9="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",c9="M12 3C7.58 3 4 4.79 4 7V17C4 19.21 7.59 21 12 21S20 19.21 20 17V7C20 4.79 16.42 3 12 3M18 17C18 17.5 15.87 19 12 19S6 17.5 6 17V14.77C7.61 15.55 9.72 16 12 16S16.39 15.55 18 14.77V17M18 12.45C16.7 13.4 14.42 14 12 14C9.58 14 7.3 13.4 6 12.45V9.64C7.47 10.47 9.61 11 12 11C14.39 11 16.53 10.47 18 9.64V12.45M12 9C8.13 9 6 7.5 6 7S8.13 5 12 5C15.87 5 18 6.5 18 7S15.87 9 12 9Z",rp="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",VM="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",NA="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",h9="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",d9="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",f9="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",jM="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",UM="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",p9="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",m9="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",g9="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",I4="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",y9="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",v9="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",_9="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",$M="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",VA="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",b9="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",HM="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",x9="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",A9="M15,19L9,16.89V5L15,7.11M20.5,3C20.44,3 20.39,3 20.34,3L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21C3.55,21 3.61,21 3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3Z",w9="M9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3L20.34,3.03L15,5.1L9,3M8,5.45V17.15L5,18.31V6.46L8,5.45M10,5.47L14,6.87V18.53L10,17.13V5.47M19,5.7V17.54L16,18.55V6.86L19,5.7M7.46,6.3L5.57,6.97V9.12L7.46,8.45V6.3M7.46,9.05L5.57,9.72V11.87L7.46,11.2V9.05M7.46,11.8L5.57,12.47V14.62L7.46,13.95V11.8M7.46,14.55L5.57,15.22V17.37L7.46,16.7V14.55Z",GM="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",C9="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M14,6.11L8,4V15.89L9,16.24V16.5C9,17.14 9.09,17.76 9.26,18.34L8,17.9L2.66,19.97L2.5,20A0.5,0.5 0 0,1 2,19.5V4.38C2,4.15 2.15,3.97 2.36,3.9L8,2L14,4.1L19.34,2H19.5A0.5,0.5 0 0,1 20,2.5V11.81C18.83,10.69 17.25,10 15.5,10C15,10 14.5,10.06 14,10.17V6.11Z",I9="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",M4="M7,10L12,15L17,10H7Z",M9="M14,7L9,12L14,17V7Z",S9="M7,15L12,10L17,15H7Z",E9="M19,13H5V11H19V13Z",S4="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",T9="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",ip="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",P9="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",k9="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",L9="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",D9="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",R9="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",O9="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",z9="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",F9="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";const B9={name:"MapButton",components:{SvgIcon:Pn},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:HM}}}},N9=["disabled"],V9={class:"map-control-button__content"};function j9(e,t,n,i,a,u){const l=Us("SvgIcon");return xe(),et("button",Qn({class:"map-control-button",style:u.bindStyle,disabled:n.disabled},e.$attrs,{class:{"map-control-button-active":n.active,"map-control-button-disabled":n.disabled}}),[Pe("span",V9,[n.loading?(xe(),Rt(l,{key:0,size:n.height*2/3,type:"mdi",path:u.path.loading,class:"spin"},null,8,["size","path"])):Sn(e.$slots,"default",{key:1},void 0,!0)])],16,N9)}const E4=_n(B9,[["render",j9],["__scopeId","data-v-9eb50069"]]),U9={name:"MapCard",props:{height:{type:[String,Number],default:void 0},width:{type:[String,Number],default:void 0}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}};function $9(e,t,n,i,a,u){return xe(),et("div",Qn({class:"hungpvq-draggable-card",style:u.cardStyle},e.$attrs),[Pe("div",null,[Sn(e.$slots,"default")]),t[0]||(t[0]=EA('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1))],16)}const H9=_n(U9,[["render",$9]]),G9={name:"MapIcon",props:{},computed:{iconName(){return""}}};function Z9(e,t,n,i,a,u){return xe(),et("i",{class:ii(["map-icon mdi",u.iconName])},null,2)}const ZM=_n(G9,[["render",Z9],["__scopeId","data-v-afa3c6ff"]]),W9={name:"MapControlButton",components:{MapButton:E4,MapIcon:ZM},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},q9={key:1,class:"button-container"},K9=["title"];function Y9(e,t,n,i,a,u){const l=Us("MapIcon"),s=Us("MapButton");return u.isGroup?(xe(),Rt(s,Qn({key:0},e.$attrs,{active:n.active,height:u.groupSize,title:n.tooltip||n.title,width:u.groupSize,disabled:n.disabled}),{default:nt(()=>[Sn(e.$slots,"default",{},()=>[je(l,null,{default:nt(()=>[Wr(an(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(xe(),et("div",q9,[Pe("div",{title:n.tooltip||n.title},[Sn(e.$slots,"content",{},()=>[je(s,Qn(e.$attrs,{active:n.active,height:n.size,loading:n.loading,width:n.size,disabled:n.disabled}),{default:nt(()=>[Sn(e.$slots,"default",{},()=>[je(l,null,{default:nt(()=>[Wr(an(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,K9)]))}const ri=_n(W9,[["render",Y9],["__scopeId","data-v-0fcaf8b5"]]),X9={name:"MapControlGroupButton",components:{MapButton:E4,MapIcon:ZM},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:[Number,String],default:32}},provide(){return{isGroup:!0,size:this.size}},computed:{containerStyle(){return{width:this.row?void 0:`${this.size}px`,height:this.row?`${this.size}px`:void 0}}}};function Q9(e,t,n,i,a,u){const l=Us("MapIcon"),s=Us("MapButton");return xe(),et("div",{class:ii(["button-container button-group-container",{"button-group-row-container":n.row,"button-group-column-container":!n.row}]),style:qr(u.containerStyle)},[Pe("div",{class:ii(["button-group-sheet",{"button-group-sheet-column":!n.row}]),style:{"border-radius":"150px"}},[(xe(!0),et(Fn,null,Or(n.items,(f,y)=>(xe(),Rt(s,{key:y,height:Number(n.size),width:Number(n.size),text:"",title:f.title,onClick:f.onClick},{default:nt(()=>[je(l,null,{default:nt(()=>[Wr(an(f.icon),1)]),_:2},1024)]),_:2},1032,["height","width","title","onClick"]))),128)),Sn(e.$slots,"default",{},void 0,!0)],2)],6)}const jy=_n(X9,[["render",Q9],["__scopeId","data-v-63dd0004"]]),J9={name:"MapImage",props:{src:{}},data:()=>({}),computed:{styleImage(){return this.src?{"background-image":`url(${this.src})`}:{}}},methods:{}},e7={class:"map-image"},t7={class:"map-image__content"};function n7(e,t,n,i,a,u){return xe(),et("div",e7,[t[0]||(t[0]=Pe("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),Pe("div",{class:"map-image__image",style:qr(u.styleImage)},null,4),Pe("div",t7,[Sn(e.$slots,"default",{},void 0,!0)])])}const vI=_n(J9,[["render",n7],["__scopeId","data-v-b4b63d95"]]),r7={class:"form-group"},i7={key:0},s7={class:"input-container"},a7=["disabled"],o7={name:"InputText"},l7=An({...o7,props:Ki({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue");return(n,i)=>(xe(),et("div",r7,[e.label?(xe(),et("label",i7,an(e.label),1)):rn("",!0),Pe("div",s7,[pl(Pe("input",Qn(n.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a),disabled:e.disabled}),null,16,a7),[[LM,t.value]])])]))}}),gi=_n(l7,[["__scopeId","data-v-705afc99"]]),u7={class:"form-group"},c7={key:0},h7={class:"input-container"},d7={value:"",disabled:"",selected:"",hidden:""},f7=["value"],p7=An({__name:"input-select",props:Ki({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue"),n=e;function i(l){return typeof l=="string"||n.returnObject?l:l[n.itemValue]}function a(l){return typeof l=="string"?l:l[n.itemText]}function u(l){return typeof l=="string"?l:l[n.itemValue]}return(l,s)=>(xe(),et("div",u7,[e.label?(xe(),et("label",c7,an(e.label),1)):rn("",!0),Pe("div",h7,[pl(Pe("select",Qn(l.$attrs,{"onUpdate:modelValue":s[0]||(s[0]=f=>t.value=f),required:""}),[Pe("option",d7,an(l.$attrs.placeholder),1),(xe(!0),et(Fn,null,Or(e.items,f=>(xe(),et("option",{value:i(f),key:u(f)},an(a(f)),9,f7))),128))],16),[[kA,t.value]])])]))}}),Kf=_n(p7,[["__scopeId","data-v-2fa00323"]]),m7={name:"BaseButton"},g7=An({...m7,props:{active:Boolean,disabled:Boolean},setup(e){const t=e;return(n,i)=>(xe(),et("button",Qn({class:"map-control__button clickable"},n.$attrs,{class:{"map-control__button-active":t.active,"map-control__button-disabled":t.disabled}}),[Sn(n.$slots,"default",{},void 0,!0)],16))}}),Br=_n(g7,[["__scopeId","data-v-dcbf8775"]]),y7=["aria-expanded"],v7={class:"collapse-header__title"},_7={class:"collapse-header__icon"},b7={key:0,class:"collapse-content"},x7={class:"collapse-content-box"},A7={name:"Collapse"},w7=Object.assign(A7,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(e,{emit:t}){const n=e,i=t,a=Kt(n.selected),u=()=>{a.value=!a.value,i("update:selected",a.value),a.value?i("open"):i("close")},l={open:M4,close:S9};return(s,f)=>(xe(),et("div",{class:ii(["collapse collapse-item",{"is-active":a.value}])},[Pe("div",{class:"collapse-header touchable",role:"tab","aria-expanded":a.value?"true":"false",onClick:yr(u,["prevent"])},[Pe("div",v7,[Sn(s.$slots,"header",{},void 0,!0)]),Pe("div",_7,[a.value?(xe(),Rt(re(Pn),{key:0,size:"14",type:"mdi",path:l.close},null,8,["path"])):(xe(),Rt(re(Pn),{key:1,size:"14",type:"mdi",path:l.open},null,8,["path"]))])],8,y7),je(wk,{name:"fade"},{default:nt(()=>[a.value?(xe(),et("div",b7,[Pe("div",x7,[Sn(s.$slots,"default",{},void 0,!0)])])):rn("",!0)]),_:3})],2))}}),_I=_n(w7,[["__scopeId","data-v-208c4e72"]]),C7={class:"form-group"},I7={key:0},M7={class:"input-container"},S7=An({__name:"input-textarea",props:Ki({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue");return(n,i)=>(xe(),et("div",C7,[e.label?(xe(),et("label",I7,an(e.label),1)):rn("",!0),Pe("div",M7,[pl(Pe("textarea",Qn(n.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a)}),null,16),[[dh,t.value]])])]))}}),T4=_n(S7,[["__scopeId","data-v-23a6d5c7"]]),E7={class:"form-group"},T7={key:0},P7={class:"input-container"},k7=["min","max","step","disabled"],L7={class:"input-slider__value"},D7=["min","max","step","disabled"],R7=An({__name:"input-slider",props:Ki({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue"),n=e,i=Wt(()=>(t.value-n.min)*100/(n.max-n.min)+"% 100%");return(a,u)=>(xe(),et("div",E7,[e.label?(xe(),et("label",T7,an(e.label),1)):rn("",!0),Pe("div",P7,[pl(Pe("input",{"onUpdate:modelValue":u[0]||(u[0]=l=>t.value=l),type:"range",min:e.min,max:e.max,step:e.step,style:qr({backgroundSize:i.value}),disabled:e.disabled},null,12,k7),[[dh,t.value]]),Pe("div",L7,[pl(Pe("input",{"onUpdate:modelValue":u[1]||(u[1]=l=>t.value=l),type:"number",min:e.min,max:e.max,step:e.step,disabled:e.disabled},null,8,D7),[[dh,t.value]])])])]))}}),jx=_n(R7,[["__scopeId","data-v-6248ac13"]]),O7={class:"form-group"},z7={class:"form-control form-checkbox"},F7=["disabled"],B7=An({__name:"input-checkbox",props:Ki({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue");return(n,i)=>(xe(),et("div",O7,[Pe("div",z7,[pl(Pe("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=a=>t.value=a),disabled:e.disabled},null,8,F7),[[PA,t.value]]),Pe("label",null,an(e.label),1)])]))}}),P4=_n(B7,[["__scopeId","data-v-d59a9d80"]]),N7={class:"form-group"},V7={key:0},j7={class:"input-container"},U7=["onClick"],$7={__name:"input-choose",props:Ki({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue");function n(i){t.value=i.value}return(i,a)=>(xe(),et("div",N7,[e.label?(xe(),et("label",V7,an(e.label),1)):rn("",!0),Pe("div",j7,[(xe(!0),et(Fn,null,Or(e.items,u=>(xe(),et("div",{key:u.value,class:ii(["item-choose",{"item-choose-active":u.value===t.value}]),onClick:yr(l=>n(u),["stop"])},an(u.text),11,U7))),128))])]))}},H7=_n($7,[["__scopeId","data-v-456d99be"]]),G7="";function iv(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}const sv=function(e,t){const{componentPrefix:n=G7}=t||{};e.component(`${n}${this.name}`,this)},tC={};var Q1={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${W7(this.white,this.grey,this.size)})`}}}};function Z7(e,t,n){if(typeof document>"u")return null;const i=document.createElement("canvas");i.width=i.height=n*2;const a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,i.width,i.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null}function W7(e,t,n){const i=`${e},${t},${n}`;if(tC[i])return tC[i];const a=Z7(e,t,n);return tC[i]=a,a}function q7(e,t,n,i,a,u){return xe(),et("div",{class:"vc-checkerboard",style:qr(u.bgStyle)},null,4)}var K7=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";iv(K7);Q1.render=q7;Q1.__file="src/components/checkboard/checkboard.vue";Q1.install=sv;var jA={name:"Alpha",components:{Checkboard:Q1},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:e}=this.colors,t=[e.r,e.g,e.b].join(",");return`linear-gradient(to right, rgba(${t}, 0) 0%, rgba(${t}, 1) 100%)`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,a=n.getBoundingClientRect().left+window.pageXOffset,l=(e.pageX||(e.touches?e.touches[0].pageX:0))-a;let s;l<0?s=0:l>i?s=1:s=Math.round(l*100/i)/100,this.colors.a!==s&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:s,source:"rgba"})},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const Y7={class:"vc-alpha"},X7={class:"vc-alpha-checkboard-wrap"},Q7=Pe("div",{class:"vc-alpha-picker"},null,-1),J7=[Q7];function eV(e,t,n,i,a,u){const l=Us("Checkboard");return xe(),et("div",Y7,[Pe("div",X7,[je(l)]),Pe("div",{class:"vc-alpha-gradient",style:qr({background:u.gradientColor})},null,4),Pe("div",{ref:"container",class:"vc-alpha-container",onMousedown:t[0]||(t[0]=(...s)=>u.handleMouseDown&&u.handleMouseDown(...s)),onTouchmove:t[1]||(t[1]=(...s)=>u.handleChange&&u.handleChange(...s)),onTouchstart:t[2]||(t[2]=(...s)=>u.handleChange&&u.handleChange(...s))},[Pe("div",{class:"vc-alpha-pointer",style:qr({left:`${u.colors.a*100}%`})},J7,4)],544)])}var tV=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";iv(tV);jA.render=eV;jA.__file="src/components/alpha/alpha.vue";jA.install=sv;function Ga(e,t){nV(e)&&(e="100%");var n=rV(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Vb(e){return Math.min(1,Math.max(0,e))}function nV(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function rV(e){return typeof e=="string"&&e.indexOf("%")!==-1}function k4(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function jb(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Am(e){return e.length===1?"0"+e:String(e)}function iV(e,t,n){return{r:Ga(e,255)*255,g:Ga(t,255)*255,b:Ga(n,255)*255}}function UT(e,t,n){e=Ga(e,255),t=Ga(t,255),n=Ga(n,255);var i=Math.max(e,t,n),a=Math.min(e,t,n),u=0,l=0,s=(i+a)/2;if(i===a)l=0,u=0;else{var f=i-a;switch(l=s>.5?f/(2-i-a):f/(i+a),i){case e:u=(t-n)/f+(t<n?6:0);break;case t:u=(n-e)/f+2;break;case n:u=(e-t)/f+4;break}u/=6}return{h:u,s:l,l:s}}function nC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sV(e,t,n){var i,a,u;if(e=Ga(e,360),t=Ga(t,100),n=Ga(n,100),t===0)a=n,u=n,i=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;i=nC(s,l,e+1/3),a=nC(s,l,e),u=nC(s,l,e-1/3)}return{r:i*255,g:a*255,b:u*255}}function $T(e,t,n){e=Ga(e,255),t=Ga(t,255),n=Ga(n,255);var i=Math.max(e,t,n),a=Math.min(e,t,n),u=0,l=i,s=i-a,f=i===0?0:s/i;if(i===a)u=0;else{switch(i){case e:u=(t-n)/s+(t<n?6:0);break;case t:u=(n-e)/s+2;break;case n:u=(e-t)/s+4;break}u/=6}return{h:u,s:f,v:l}}function aV(e,t,n){e=Ga(e,360)*6,t=Ga(t,100),n=Ga(n,100);var i=Math.floor(e),a=e-i,u=n*(1-t),l=n*(1-a*t),s=n*(1-(1-a)*t),f=i%6,y=[n,l,u,u,s,n][f],x=[s,n,n,l,u,u][f],b=[u,u,s,n,n,l][f];return{r:y*255,g:x*255,b:b*255}}function HT(e,t,n,i){var a=[Am(Math.round(e).toString(16)),Am(Math.round(t).toString(16)),Am(Math.round(n).toString(16))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function oV(e,t,n,i,a){var u=[Am(Math.round(e).toString(16)),Am(Math.round(t).toString(16)),Am(Math.round(n).toString(16)),Am(lV(i))];return a&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function lV(e){return Math.round(parseFloat(e)*255).toString(16)}function GT(e){return Dl(e)/255}function Dl(e){return parseInt(e,16)}function uV(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var bI={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function cV(e){var t={r:0,g:0,b:0},n=1,i=null,a=null,u=null,l=!1,s=!1;return typeof e=="string"&&(e=fV(e)),typeof e=="object"&&(nd(e.r)&&nd(e.g)&&nd(e.b)?(t=iV(e.r,e.g,e.b),l=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):nd(e.h)&&nd(e.s)&&nd(e.v)?(i=jb(e.s),a=jb(e.v),t=aV(e.h,i,a),l=!0,s="hsv"):nd(e.h)&&nd(e.s)&&nd(e.l)&&(i=jb(e.s),u=jb(e.l),t=sV(e.h,i,u),l=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=k4(n),{ok:l,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var hV="[-\\+]?\\d+%?",dV="[-\\+]?\\d*\\.\\d+%?",Of="(?:".concat(dV,")|(?:").concat(hV,")"),rC="[\\s|\\(]+(".concat(Of,")[,|\\s]+(").concat(Of,")[,|\\s]+(").concat(Of,")\\s*\\)?"),iC="[\\s|\\(]+(".concat(Of,")[,|\\s]+(").concat(Of,")[,|\\s]+(").concat(Of,")[,|\\s]+(").concat(Of,")\\s*\\)?"),ic={CSS_UNIT:new RegExp(Of),rgb:new RegExp("rgb"+rC),rgba:new RegExp("rgba"+iC),hsl:new RegExp("hsl"+rC),hsla:new RegExp("hsla"+iC),hsv:new RegExp("hsv"+rC),hsva:new RegExp("hsva"+iC),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function fV(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(bI[e])e=bI[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=ic.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=ic.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=ic.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=ic.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=ic.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=ic.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=ic.hex8.exec(e),n?{r:Dl(n[1]),g:Dl(n[2]),b:Dl(n[3]),a:GT(n[4]),format:t?"name":"hex8"}:(n=ic.hex6.exec(e),n?{r:Dl(n[1]),g:Dl(n[2]),b:Dl(n[3]),format:t?"name":"hex"}:(n=ic.hex4.exec(e),n?{r:Dl(n[1]+n[1]),g:Dl(n[2]+n[2]),b:Dl(n[3]+n[3]),a:GT(n[4]+n[4]),format:t?"name":"hex8"}:(n=ic.hex3.exec(e),n?{r:Dl(n[1]+n[1]),g:Dl(n[2]+n[2]),b:Dl(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function nd(e){return!!ic.CSS_UNIT.exec(String(e))}var pV=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var i;if(t instanceof e)return t;typeof t=="number"&&(t=uV(t)),this.originalInput=t;var a=cV(t);this.originalInput=t,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:a.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,i,a,u=t.r/255,l=t.g/255,s=t.b/255;return u<=.03928?n=u/12.92:n=Math.pow((u+.055)/1.055,2.4),l<=.03928?i=l/12.92:i=Math.pow((l+.055)/1.055,2.4),s<=.03928?a=s/12.92:a=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*i+.0722*a},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=k4(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=$T(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=$T(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),a=Math.round(t.v*100);return this.a===1?"hsv(".concat(n,", ").concat(i,"%, ").concat(a,"%)"):"hsva(".concat(n,", ").concat(i,"%, ").concat(a,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=UT(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=UT(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),a=Math.round(t.l*100);return this.a===1?"hsl(".concat(n,", ").concat(i,"%, ").concat(a,"%)"):"hsla(".concat(n,", ").concat(i,"%, ").concat(a,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),HT(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),oV(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(n,", ").concat(i,")"):"rgba(".concat(t,", ").concat(n,", ").concat(i,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(n){return"".concat(Math.round(Ga(n,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Ga(n,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+HT(this.r,this.g,this.b,!1),n=0,i=Object.entries(bI);n<i.length;n++){var a=i[n],u=a[0],l=a[1];if(t===l)return u}return!1},e.prototype.toString=function(t){var n=!!t;t=t??this.format;var i=!1,a=this.a<1&&this.a>=0,u=!n&&a&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Vb(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Vb(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Vb(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Vb(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var i=this.toRgb(),a=new e(t).toRgb(),u=n/100,l={r:(a.r-i.r)*u+i.r,g:(a.g-i.g)*u+i.g,b:(a.b-i.b)*u+i.b,a:(a.a-i.a)*u+i.a};return new e(l)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var i=this.toHsl(),a=360/n,u=[this];for(i.h=(i.h-(a*t>>1)+720)%360;--t;)i.h=(i.h+a)%360,u.push(new e(i));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),i=n.h,a=n.s,u=n.v,l=[],s=1/t;t--;)l.push(new e({h:i,s:a,v:u})),u=(u+s)%1;return l},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),i=new e(t).toRgb(),a=n.a+i.a*(1-n.a);return new e({r:(n.r*n.a+i.r*i.a*(1-n.a))/a,g:(n.g*n.a+i.g*i.a*(1-n.a))/a,b:(n.b*n.a+i.b*i.a*(1-n.a))/a,a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),i=n.h,a=[this],u=360/t,l=1;l<t;l++)a.push(new e({h:(i+l*u)%360,s:n.s,l:n.l}));return a},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function Lf(...e){return new pV(...e)}function sC(e,t){const n=e&&e.a;let i;e&&e.hsl?i=Lf(e.hsl):e&&e.hex&&e.hex.length>0?i=Lf(e.hex):e&&e.hsv?i=Lf(e.hsv):e&&e.rgba?i=Lf(e.rgba):e&&e.rgb?i=Lf(e.rgb):i=Lf(e),i&&(i._a===void 0||i._a===null)&&i.setAlpha(n||i.getAlpha());const a=i.toHsl(),u=i.toHsv();return a.s===0&&(u.h=a.h=e.h||e.hsl&&e.hsl.h||t||0),u.v<.0164&&(u.h=e.h||e.hsv&&e.hsv.h||0,u.s=e.s||e.hsv&&e.hsv.s||0),a.l<.01&&(a.h=e.h||e.hsl&&e.hsl.h||0,a.s=e.s||e.hsl&&e.hsl.s||0),{hsl:a,hex:i.toHexString().toUpperCase(),hex8:i.toHex8String().toUpperCase(),rgba:i.toRgb(),hsv:u,oldHue:e.h||t||a.h,source:e.source,a:i.getAlpha()}}var mV={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:sC(this.modelValue)}},computed:{colors:{get(){return this.val},set(e){this.val=e,this.$emit("update:modelValue",e)}}},watch:{modelValue(e){this.val=sC(e)}},methods:{colorChange(e,t){this.oldHue=this.colors.hsl.h,this.colors=sC(e,t||this.oldHue)},isValidHex(e){return Lf(e).isValid},simpleCheckForValidColor(e){const t=["r","g","b","a","h","s","l","v"];let n=0,i=0;for(let a=0;a<t.length;a++){const u=t[a];e[u]&&(n++,isNaN(e[u])||i++)}if(n===i)return e},paletteUpperCase(e){return e.map(t=>t.toUpperCase())},isTransparent(e){return Lf(e).getAlpha()===0}}},UA={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(e){if(this.max!==void 0&&+e>this.max)this.$refs.input.value=this.max;else return e}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(e){this.handleChange(e.target.value)},handleChange(e){const t={};t[this.label]=e,t.hex===void 0&&t["#"]===void 0?this.$emit("change",t):e.length>5&&this.$emit("change",t)},handleKeyDown(e){let{val:t}=this;const n=Number(t);if(n){const i=this.arrowOffset||1;e.keyCode===38&&(t=n+i,this.handleChange(t),e.preventDefault()),e.keyCode===40&&(t=n-i,this.handleChange(t),e.preventDefault())}}}};const gV={class:"vc-editable-input"},yV=["aria-labelledby"],vV=["id","for"],_V={class:"vc-input__desc"};function bV(e,t,n,i,a,u){return xe(),et("div",gV,[pl(Pe("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=l=>u.val=l),"aria-labelledby":u.labelId,class:"vc-input__input",onKeydown:t[1]||(t[1]=(...l)=>u.handleKeyDown&&u.handleKeyDown(...l)),onInput:t[2]||(t[2]=(...l)=>u.update&&u.update(...l))},null,40,yV),[[dh,u.val]]),Pe("span",{id:u.labelId,for:n.label,class:"vc-input__label"},an(u.labelSpanText),9,vV),Pe("span",_V,an(n.desc),1)])}var xV=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";iv(xV);UA.render=bV;UA.__file="src/components/editable-input/editable-input.vue";UA.install=sv;function aC(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}var $A={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,a=n.clientHeight,u=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,s=e.pageX||(e.touches?e.touches[0].pageX:0),f=e.pageY||(e.touches?e.touches[0].pageY:0),y=aC(s-u,0,i),x=aC(f-l,0,a),b=y/i,M=aC(-(x/a)+1,0,1);this.onChange({h:this.colors.hsv.h,s:b,v:M,a:this.colors.hsv.a,source:"hsva"})},onChange(e){this.$emit("change",e)},handleMouseDown(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const AV=Pe("div",{class:"vc-saturation--white"},null,-1),wV=Pe("div",{class:"vc-saturation--black"},null,-1),CV=Pe("div",{class:"vc-saturation-circle"},null,-1),IV=[CV];function MV(e,t,n,i,a,u){return xe(),et("div",{ref:"container",class:"vc-saturation",style:qr({background:u.bgColor}),onMousedown:t[0]||(t[0]=(...l)=>u.handleMouseDown&&u.handleMouseDown(...l)),onTouchmove:t[1]||(t[1]=(...l)=>u.handleChange&&u.handleChange(...l)),onTouchstart:t[2]||(t[2]=(...l)=>u.handleChange&&u.handleChange(...l))},[AV,wV,Pe("div",{class:"vc-saturation-pointer",style:qr({top:u.pointerTop,left:u.pointerLeft})},IV,4)],36)}var SV=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";iv(SV);$A.render=MV;$A.__file="src/components/saturation/saturation.vue";$A.install=sv;var HA={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(e,t){const{h:n}=e.hsl;n!==0&&n-this.oldHue>0&&(this.pullDirection="right"),n!==0&&n-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=n},deep:!0,immediate:!0}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,a=n.clientHeight,u=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,s=e.pageX||(e.touches?e.touches[0].pageX:0),f=e.pageY||(e.touches?e.touches[0].pageY:0),y=s-u,x=f-l;let b,M;this.direction==="vertical"?(x<0?b=360:x>a?b=0:(M=-(x*100/a)+100,b=360*M/100),this.colors.hsl.h!==b&&this.$emit("change",{h:b,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(y<0?b=0:y>i?b=360:(M=y*100/i,b=360*M/100),this.colors.hsl.h!==b&&this.$emit("change",{h:b,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const EV=["aria-valuenow"],TV=Pe("div",{class:"vc-hue-picker"},null,-1),PV=[TV];function kV(e,t,n,i,a,u){return xe(),et("div",{class:ii(["vc-hue",[u.directionClass]])},[Pe("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":u.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:t[0]||(t[0]=(...l)=>u.handleMouseDown&&u.handleMouseDown(...l)),onTouchmove:t[1]||(t[1]=(...l)=>u.handleChange&&u.handleChange(...l)),onTouchstart:t[2]||(t[2]=(...l)=>u.handleChange&&u.handleChange(...l))},[Pe("div",{class:"vc-hue-pointer",style:qr({top:u.pointerTop,left:u.pointerLeft}),role:"presentation"},PV,4)],40,EV)],2)}var LV=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";iv(LV);HA.render=kV;HA.__file="src/components/hue/hue.vue";HA.install=sv;const DV=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var GA={name:"Sketch",components:{Saturation:$A,Hue:HA,Alpha:jA,EdIn:UA,Checkboard:Q1},mixins:[mV],props:{presetColors:{type:Array,default(){return DV}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let e;return this.colors.a<1?e=this.colors.hex8:e=this.colors.hex,e.replace("#","")},activeColor(){const{rgba:e}=this.colors;return`rgba(${[e.r,e.g,e.b,e.a].join(",")})`}},methods:{handlePreset(e){this.colorChange(e)},childChange(e){this.colorChange(e)},inputChange(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}};const RV={class:"vc-sketch-saturation-wrap"},OV={class:"vc-sketch-controls"},zV={class:"vc-sketch-sliders"},FV={class:"vc-sketch-hue-wrap"},BV={key:0,class:"vc-sketch-alpha-wrap"},NV={class:"vc-sketch-color-wrap"},VV=["aria-label"],jV={key:0,class:"vc-sketch-field"},UV={class:"vc-sketch-field--double"},$V={class:"vc-sketch-field--single"},HV={class:"vc-sketch-field--single"},GV={class:"vc-sketch-field--single"},ZV={key:0,class:"vc-sketch-field--single"},WV={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},qV=["aria-label","onClick"],KV=["aria-label","onClick"];function YV(e,t,n,i,a,u){const l=Us("Saturation"),s=Us("Hue"),f=Us("Alpha"),y=Us("Checkboard"),x=Us("EdIn");return xe(),et("div",{role:"application","aria-label":"Sketch color picker",class:ii(["vc-sketch",[n.disableAlpha?"vc-sketch__disable-alpha":""]])},[Pe("div",RV,[je(l,{value:e.colors,onChange:u.childChange},null,8,["value","onChange"])]),Pe("div",OV,[Pe("div",zV,[Pe("div",FV,[je(s,{value:e.colors,onChange:u.childChange},null,8,["value","onChange"])]),n.disableAlpha?rn("v-if",!0):(xe(),et("div",BV,[je(f,{value:e.colors,onChange:u.childChange},null,8,["value","onChange"])]))]),Pe("div",NV,[Pe("div",{"aria-label":`Current color is ${u.activeColor}`,class:"vc-sketch-active-color",style:qr({background:u.activeColor})},null,12,VV),je(y)])]),n.disableFields?rn("v-if",!0):(xe(),et("div",jV,[rn(" rgba "),Pe("div",UV,[je(x,{label:"hex",value:u.hex,onChange:u.inputChange},null,8,["value","onChange"])]),Pe("div",$V,[je(x,{label:"r",value:e.colors.rgba.r,onChange:u.inputChange},null,8,["value","onChange"])]),Pe("div",HV,[je(x,{label:"g",value:e.colors.rgba.g,onChange:u.inputChange},null,8,["value","onChange"])]),Pe("div",GV,[je(x,{label:"b",value:e.colors.rgba.b,onChange:u.inputChange},null,8,["value","onChange"])]),n.disableAlpha?rn("v-if",!0):(xe(),et("div",ZV,[je(x,{label:"a",value:e.colors.a,"arrow-offset":.01,max:1,onChange:u.inputChange},null,8,["value","arrow-offset","onChange"])]))])),Pe("div",WV,[(xe(!0),et(Fn,null,Or(n.presetColors,b=>(xe(),et(Fn,null,[e.isTransparent(b)?(xe(),et("div",{key:b,"aria-label":`Color:${b}`,class:"vc-sketch-presets-color",onClick:M=>u.handlePreset(b)},[je(y)],8,KV)):(xe(),et("div",{key:`!${b}`,class:"vc-sketch-presets-color","aria-label":`Color:${b}`,style:qr({background:b}),onClick:M=>u.handlePreset(b)},null,12,qV))],64))),256))])],2)}var XV=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";iv(XV);GA.render=YV;GA.__file="src/components/sketch/sketch.vue";GA.install=sv;const QV={class:"form-group"},JV={key:0},ej={class:"input-container"},tj=An({__name:"input-colorPicker",props:Ki({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:Ki(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=Zs(e,"modelValue"),i=t;function a({hex:u}){n.value=u,i("change",u)}return(u,l)=>(xe(),et("div",QV,[e.label?(xe(),et("label",JV,an(e.label),1)):rn("",!0),Pe("div",ej,[je(re(GA),Qn({modelValue:n.value},u.$attrs,{"onUpdate:modelValue":a,disabled:e.disabled}),null,16,["modelValue","disabled"])])]))}});var to=63710088e-1,WM={centimeters:to*100,centimetres:to*100,degrees:to/111325,feet:to*3.28084,inches:to*39.37,kilometers:to/1e3,kilometres:to/1e3,meters:to,metres:to,miles:to/1609.344,millimeters:to*1e3,millimetres:to*1e3,nauticalmiles:to/1852,radians:1,yards:to*1.0936},nj={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/to,yards:1.0936133},xI={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Cu(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function rj(e,t,n){switch(e){case"Point":return Aa(t).geometry;case"LineString":return Ua(t).geometry;case"Polygon":return av(t).geometry;case"MultiPoint":return L4(t).geometry;case"MultiLineString":return qM(t).geometry;case"MultiPolygon":return D4(t).geometry;default:throw new Error(e+" is invalid")}}function Aa(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ux(e[0])||!Ux(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return Cu(i,t,n)}function ij(e,t,n){return n===void 0&&(n={}),Yf(e.map(function(i){return Aa(i,t)}),n)}function av(e,t,n){n===void 0&&(n={});for(var i=0,a=e;i<a.length;i++){var u=a[i];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<u[u.length-1].length;l++)if(u[u.length-1][l]!==u[0][l])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return Cu(s,t,n)}function sj(e,t,n){return n===void 0&&(n={}),Yf(e.map(function(i){return av(i,t)}),n)}function Ua(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return Cu(i,t,n)}function aj(e,t,n){return n===void 0&&(n={}),Yf(e.map(function(i){return Ua(i,t)}),n)}function Yf(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function qM(e,t,n){n===void 0&&(n={});var i={type:"MultiLineString",coordinates:e};return Cu(i,t,n)}function L4(e,t,n){n===void 0&&(n={});var i={type:"MultiPoint",coordinates:e};return Cu(i,t,n)}function D4(e,t,n){n===void 0&&(n={});var i={type:"MultiPolygon",coordinates:e};return Cu(i,t,n)}function oj(e,t,n){n===void 0&&(n={});var i={type:"GeometryCollection",geometries:e};return Cu(i,t,n)}function lj(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}function KM(e,t){t===void 0&&(t="kilometers");var n=WM[t];if(!n)throw new Error(t+" units is invalid");return e*n}function YM(e,t){t===void 0&&(t="kilometers");var n=WM[t];if(!n)throw new Error(t+" units is invalid");return e/n}function uj(e,t){return XM(YM(e,t))}function R4(e){var t=e%360;return t<0&&(t+=360),t}function XM(e){var t=e%(2*Math.PI);return t*180/Math.PI}function ud(e){var t=e%360;return t*Math.PI/180}function cj(e,t,n){if(t===void 0&&(t="kilometers"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return KM(YM(e,t),n)}function hj(e,t,n){if(t===void 0&&(t="meters"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=xI[t];if(!i)throw new Error("invalid original units");var a=xI[n];if(!a)throw new Error("invalid final units");return e/i*a}function Ux(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function QM(e){return!!e&&e.constructor===Object}function dj(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Ux(t))throw new Error("bbox must only contain numbers")})}function fj(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const pj=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:xI,bearingToAzimuth:R4,convertArea:hj,convertLength:cj,degreesToRadians:ud,earthRadius:to,factors:WM,feature:Cu,featureCollection:Yf,geometry:rj,geometryCollection:oj,isNumber:Ux,isObject:QM,lengthToDegrees:uj,lengthToRadians:YM,lineString:Ua,lineStrings:aj,multiLineString:qM,multiPoint:L4,multiPolygon:D4,point:Aa,points:ij,polygon:av,polygons:sj,radiansToDegrees:XM,radiansToLength:KM,round:lj,unitsFactors:nj,validateBBox:dj,validateId:fj},Symbol.toStringTag,{value:"Module"}));function Hm(e,t,n){if(e!==null)for(var i,a,u,l,s,f,y,x=0,b=0,M,A=e.type,P=A==="FeatureCollection",L=A==="Feature",O=P?e.features.length:1,V=0;V<O;V++){y=P?e.features[V].geometry:L?e.geometry:e,M=y?y.type==="GeometryCollection":!1,s=M?y.geometries.length:1;for(var z=0;z<s;z++){var B=0,U=0;if(l=M?y.geometries[z]:y,l!==null){f=l.coordinates;var Z=l.type;switch(x=n&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(t(f,b,V,B,U)===!1)return!1;b++,B++;break;case"LineString":case"MultiPoint":for(i=0;i<f.length;i++){if(t(f[i],b,V,B,U)===!1)return!1;b++,Z==="MultiPoint"&&B++}Z==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(i=0;i<f.length;i++){for(a=0;a<f[i].length-x;a++){if(t(f[i][a],b,V,B,U)===!1)return!1;b++}Z==="MultiLineString"&&B++,Z==="Polygon"&&U++}Z==="Polygon"&&B++;break;case"MultiPolygon":for(i=0;i<f.length;i++){for(U=0,a=0;a<f[i].length;a++){for(u=0;u<f[i][a].length-x;u++){if(t(f[i][a][u],b,V,B,U)===!1)return!1;b++}U++}B++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(Hm(l.geometries[i],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mj(e,t,n,i){var a=n;return Hm(e,function(u,l,s,f,y){l===0&&n===void 0?a=u:a=t(a,u,l,s,f,y)},i),a}function O4(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}function gj(e,t,n){var i=n;return O4(e,function(a,u){u===0&&n===void 0?i=a:i=t(i,a,u)}),i}function $x(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function yj(e,t,n){var i=n;return $x(e,function(a,u){u===0&&n===void 0?i=a:i=t(i,a,u)}),i}function vj(e){var t=[];return Hm(e,function(n){t.push(n)}),t}function JM(e,t){var n,i,a,u,l,s,f,y,x,b,M=0,A=e.type==="FeatureCollection",P=e.type==="Feature",L=A?e.features.length:1;for(n=0;n<L;n++){for(s=A?e.features[n].geometry:P?e.geometry:e,y=A?e.features[n].properties:P?e.properties:{},x=A?e.features[n].bbox:P?e.bbox:void 0,b=A?e.features[n].id:P?e.id:void 0,f=s?s.type==="GeometryCollection":!1,l=f?s.geometries.length:1,a=0;a<l;a++){if(u=f?s.geometries[a]:s,u===null){if(t(null,M,y,x,b)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(u,M,y,x,b)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<u.geometries.length;i++)if(t(u.geometries[i],M,y,x,b)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}function z4(e,t,n){var i=n;return JM(e,function(a,u,l,s,f){u===0&&n===void 0?i=a:i=t(i,a,u,l,s,f)}),i}function pd(e,t){JM(e,function(n,i,a,u,l){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Cu(n,a,{bbox:u,id:l}),i,0)===!1?!1:void 0}var f;switch(s){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var y=0;y<n.coordinates.length;y++){var x=n.coordinates[y],b={type:f,coordinates:x};if(t(Cu(b,a),i,y)===!1)return!1}})}function _j(e,t,n){var i=n;return pd(e,function(a,u,l){u===0&&l===0&&n===void 0?i=a:i=t(i,a,u,l)}),i}function F4(e,t){pd(e,function(n,i,a){var u=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var s,f=0,y=0,x=0;if(Hm(n,function(b,M,A,P,L){if(s===void 0||i>f||P>y||L>x){s=b,f=i,y=P,x=L,u=0;return}var O=Ua([s,b],n.properties);if(t(O,i,a,L,u)===!1)return!1;u++,s=b})===!1)return!1}}})}function B4(e,t,n){var i=n,a=!1;return F4(e,function(u,l,s,f,y){a===!1&&n===void 0?i=u:i=t(i,u,l,s,f,y),a=!0}),i}function N4(e,t){if(!e)throw new Error("geojson is required");pd(e,function(n,i,a){if(n.geometry!==null){var u=n.geometry.type,l=n.geometry.coordinates;switch(u){case"LineString":if(t(n,i,a,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<l.length;s++)if(t(Ua(l[s],n.properties),i,a,s)===!1)return!1;break}}})}function bj(e,t,n){var i=n;return N4(e,function(a,u,l,s){u===0&&n===void 0?i=a:i=t(i,a,u,l,s)}),i}function xj(e,t){if(t=t||{},!QM(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.segmentIndex||0,l=t.properties,s;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),l=l||e.features[n].properties,s=e.features[n].geometry;break;case"Feature":l=l||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var f=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=f.length+u-1),Ua([f[u],f[u+1]],l,t);case"Polygon":return a<0&&(a=f.length+a),u<0&&(u=f[a].length+u-1),Ua([f[a][u],f[a][u+1]],l,t);case"MultiLineString":return i<0&&(i=f.length+i),u<0&&(u=f[i].length+u-1),Ua([f[i][u],f[i][u+1]],l,t);case"MultiPolygon":return i<0&&(i=f.length+i),a<0&&(a=f[i].length+a),u<0&&(u=f[i][a].length-u-1),Ua([f[i][a][u],f[i][a][u+1]],l,t)}throw new Error("geojson is invalid")}function Aj(e,t){if(t=t||{},!QM(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,u=t.coordIndex||0,l=t.properties,s;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),l=l||e.features[n].properties,s=e.features[n].geometry;break;case"Feature":l=l||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var f=s.coordinates;switch(s.type){case"Point":return Aa(f,l,t);case"MultiPoint":return i<0&&(i=f.length+i),Aa(f[i],l,t);case"LineString":return u<0&&(u=f.length+u),Aa(f[u],l,t);case"Polygon":return a<0&&(a=f.length+a),u<0&&(u=f[a].length+u),Aa(f[a][u],l,t);case"MultiLineString":return i<0&&(i=f.length+i),u<0&&(u=f[i].length+u),Aa(f[i][u],l,t);case"MultiPolygon":return i<0&&(i=f.length+i),a<0&&(a=f[i].length+a),u<0&&(u=f[i][a].length-u),Aa(f[i][a][u],l,t)}throw new Error("geojson is invalid")}const wj=Object.freeze(Object.defineProperty({__proto__:null,coordAll:vj,coordEach:Hm,coordReduce:mj,featureEach:$x,featureReduce:yj,findPoint:Aj,findSegment:xj,flattenEach:pd,flattenReduce:_j,geomEach:JM,geomReduce:z4,lineEach:N4,lineReduce:bj,propEach:O4,propReduce:gj,segmentEach:F4,segmentReduce:B4},Symbol.toStringTag,{value:"Module"}));function I1(e){var t=[1/0,1/0,-1/0,-1/0];return Hm(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}I1.default=I1;const Cj=Object.freeze(Object.defineProperty({__proto__:null,default:I1},Symbol.toStringTag,{value:"Module"}));function M1(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function S1(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ZA(e){return e.type==="Feature"?e.geometry:e}function E1(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=M1(e),a=ZA(t),u=a.type,l=t.bbox,s=a.coordinates;if(l&&Ij(i,l)===!1)return!1;u==="Polygon"&&(s=[s]);for(var f=!1,y=0;y<s.length&&!f;y++)if(ZT(i,s[y][0],n.ignoreBoundary)){for(var x=!1,b=1;b<s[y].length&&!x;)ZT(i,s[y][b],!n.ignoreBoundary)&&(x=!0),b++;x||(f=!0)}return f}function ZT(e,t,n){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var a=0,u=t.length-1;a<t.length;u=a++){var l=t[a][0],s=t[a][1],f=t[u][0],y=t[u][1],x=e[1]*(l-f)+s*(f-e[0])+y*(e[0]-l)===0&&(l-e[0])*(f-e[0])<=0&&(s-e[1])*(y-e[1])<=0;if(x)return!n;var b=s>e[1]!=y>e[1]&&e[0]<(f-l)*(e[1]-s)/(y-s)+l;b&&(i=!i)}return i}function Ij(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Mj(e,t,n){n===void 0&&(n={});var i=M1(e),a=M1(t),u=ud(a[1]-i[1]),l=ud(a[0]-i[0]),s=ud(i[1]),f=ud(a[1]),y=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(s)*Math.cos(f);return KM(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),n.units)}function V4(e,t,n){if(n===void 0&&(n={}),n.final===!0)return Sj(e,t);var i=M1(e),a=M1(t),u=ud(i[0]),l=ud(a[0]),s=ud(i[1]),f=ud(a[1]),y=Math.sin(l-u)*Math.cos(f),x=Math.cos(s)*Math.sin(f)-Math.sin(s)*Math.cos(f)*Math.cos(l-u);return XM(Math.atan2(y,x))}function Sj(e,t){var n=V4(t,e);return n=(n+180)%360,n}function Ej(e,t){t===void 0&&(t={});var n=0,i=0,a=0;return Hm(e,function(u){n+=u[0],i+=u[1],a++},!0),Aa([n/a,i/a],t.properties)}function WT(e){if(!e)throw new Error("geojson is required");var t=[];return pd(e,function(n){Tj(n,t)}),Yf(t)}function Tj(e,t){var n=[],i=e.geometry;if(i!==null){switch(i.type){case"Polygon":n=S1(i);break;case"LineString":n=[S1(i)]}n.forEach(function(a){var u=Pj(a,e.properties);u.forEach(function(l){l.id=t.length,t.push(l)})})}}function Pj(e,t){var n=[];return e.reduce(function(i,a){var u=Ua([i,a],t);return u.bbox=kj(i,a),n.push(u),a}),n}function kj(e,t){var n=e[0],i=e[1],a=t[0],u=t[1],l=n<a?n:a,s=i<u?i:u,f=n>a?n:a,y=i>u?i:u;return[l,s,f,y]}var eS={exports:{}},j4={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(la,function(){function n(z,B,U,Z,te){(function Y(W,H,ne,le,Q){for(;le>ne;){if(le-ne>600){var ce=le-ne+1,K=H-ne+1,Le=Math.log(ce),Ue=.5*Math.exp(2*Le/3),Be=.5*Math.sqrt(Le*Ue*(ce-Ue)/ce)*(K-ce/2<0?-1:1),tt=Math.max(ne,Math.floor(H-K*Ue/ce+Be)),ut=Math.min(le,Math.floor(H+(ce-K)*Ue/ce+Be));Y(W,H,tt,ut,Q)}var Tt=W[H],Ge=ne,Ne=le;for(i(W,ne,H),Q(W[le],Tt)>0&&i(W,ne,le);Ge<Ne;){for(i(W,Ge,Ne),Ge++,Ne--;Q(W[Ge],Tt)<0;)Ge++;for(;Q(W[Ne],Tt)>0;)Ne--}Q(W[ne],Tt)===0?i(W,ne,Ne):i(W,++Ne,le),Ne<=H&&(ne=Ne+1),H<=Ne&&(le=Ne-1)}})(z,B,U||0,Z||z.length-1,te||a)}function i(z,B,U){var Z=z[B];z[B]=z[U],z[U]=Z}function a(z,B){return z<B?-1:z>B?1:0}var u=function(z){z===void 0&&(z=9),this._maxEntries=Math.max(4,z),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(z,B,U){if(!U)return B.indexOf(z);for(var Z=0;Z<B.length;Z++)if(U(z,B[Z]))return Z;return-1}function s(z,B){f(z,0,z.children.length,B,z)}function f(z,B,U,Z,te){te||(te=O(null)),te.minX=1/0,te.minY=1/0,te.maxX=-1/0,te.maxY=-1/0;for(var Y=B;Y<U;Y++){var W=z.children[Y];y(te,z.leaf?Z(W):W)}return te}function y(z,B){return z.minX=Math.min(z.minX,B.minX),z.minY=Math.min(z.minY,B.minY),z.maxX=Math.max(z.maxX,B.maxX),z.maxY=Math.max(z.maxY,B.maxY),z}function x(z,B){return z.minX-B.minX}function b(z,B){return z.minY-B.minY}function M(z){return(z.maxX-z.minX)*(z.maxY-z.minY)}function A(z){return z.maxX-z.minX+(z.maxY-z.minY)}function P(z,B){return z.minX<=B.minX&&z.minY<=B.minY&&B.maxX<=z.maxX&&B.maxY<=z.maxY}function L(z,B){return B.minX<=z.maxX&&B.minY<=z.maxY&&B.maxX>=z.minX&&B.maxY>=z.minY}function O(z){return{children:z,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V(z,B,U,Z,te){for(var Y=[B,U];Y.length;)if(!((U=Y.pop())-(B=Y.pop())<=Z)){var W=B+Math.ceil((U-B)/Z/2)*Z;n(z,W,B,U,te),Y.push(B,W,W,U)}}return u.prototype.all=function(){return this._all(this.data,[])},u.prototype.search=function(z){var B=this.data,U=[];if(!L(z,B))return U;for(var Z=this.toBBox,te=[];B;){for(var Y=0;Y<B.children.length;Y++){var W=B.children[Y],H=B.leaf?Z(W):W;L(z,H)&&(B.leaf?U.push(W):P(z,H)?this._all(W,U):te.push(W))}B=te.pop()}return U},u.prototype.collides=function(z){var B=this.data;if(!L(z,B))return!1;for(var U=[];B;){for(var Z=0;Z<B.children.length;Z++){var te=B.children[Z],Y=B.leaf?this.toBBox(te):te;if(L(z,Y)){if(B.leaf||P(z,Y))return!0;U.push(te)}}B=U.pop()}return!1},u.prototype.load=function(z){if(!z||!z.length)return this;if(z.length<this._minEntries){for(var B=0;B<z.length;B++)this.insert(z[B]);return this}var U=this._build(z.slice(),0,z.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var Z=this.data;this.data=U,U=Z}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},u.prototype.insert=function(z){return z&&this._insert(z,this.data.height-1),this},u.prototype.clear=function(){return this.data=O([]),this},u.prototype.remove=function(z,B){if(!z)return this;for(var U,Z,te,Y=this.data,W=this.toBBox(z),H=[],ne=[];Y||H.length;){if(Y||(Y=H.pop(),Z=H[H.length-1],U=ne.pop(),te=!0),Y.leaf){var le=l(z,Y.children,B);if(le!==-1)return Y.children.splice(le,1),H.push(Y),this._condense(H),this}te||Y.leaf||!P(Y,W)?Z?(U++,Y=Z.children[U],te=!1):Y=null:(H.push(Y),ne.push(U),U=0,Z=Y,Y=Y.children[0])}return this},u.prototype.toBBox=function(z){return z},u.prototype.compareMinX=function(z,B){return z.minX-B.minX},u.prototype.compareMinY=function(z,B){return z.minY-B.minY},u.prototype.toJSON=function(){return this.data},u.prototype.fromJSON=function(z){return this.data=z,this},u.prototype._all=function(z,B){for(var U=[];z;)z.leaf?B.push.apply(B,z.children):U.push.apply(U,z.children),z=U.pop();return B},u.prototype._build=function(z,B,U,Z){var te,Y=U-B+1,W=this._maxEntries;if(Y<=W)return s(te=O(z.slice(B,U+1)),this.toBBox),te;Z||(Z=Math.ceil(Math.log(Y)/Math.log(W)),W=Math.ceil(Y/Math.pow(W,Z-1))),(te=O([])).leaf=!1,te.height=Z;var H=Math.ceil(Y/W),ne=H*Math.ceil(Math.sqrt(W));V(z,B,U,ne,this.compareMinX);for(var le=B;le<=U;le+=ne){var Q=Math.min(le+ne-1,U);V(z,le,Q,H,this.compareMinY);for(var ce=le;ce<=Q;ce+=H){var K=Math.min(ce+H-1,Q);te.children.push(this._build(z,ce,K,Z-1))}}return s(te,this.toBBox),te},u.prototype._chooseSubtree=function(z,B,U,Z){for(;Z.push(B),!B.leaf&&Z.length-1!==U;){for(var te=1/0,Y=1/0,W=void 0,H=0;H<B.children.length;H++){var ne=B.children[H],le=M(ne),Q=(ce=z,K=ne,(Math.max(K.maxX,ce.maxX)-Math.min(K.minX,ce.minX))*(Math.max(K.maxY,ce.maxY)-Math.min(K.minY,ce.minY))-le);Q<Y?(Y=Q,te=le<te?le:te,W=ne):Q===Y&&le<te&&(te=le,W=ne)}B=W||B.children[0]}var ce,K;return B},u.prototype._insert=function(z,B,U){var Z=U?z:this.toBBox(z),te=[],Y=this._chooseSubtree(Z,this.data,B,te);for(Y.children.push(z),y(Y,Z);B>=0&&te[B].children.length>this._maxEntries;)this._split(te,B),B--;this._adjustParentBBoxes(Z,te,B)},u.prototype._split=function(z,B){var U=z[B],Z=U.children.length,te=this._minEntries;this._chooseSplitAxis(U,te,Z);var Y=this._chooseSplitIndex(U,te,Z),W=O(U.children.splice(Y,U.children.length-Y));W.height=U.height,W.leaf=U.leaf,s(U,this.toBBox),s(W,this.toBBox),B?z[B-1].children.push(W):this._splitRoot(U,W)},u.prototype._splitRoot=function(z,B){this.data=O([z,B]),this.data.height=z.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},u.prototype._chooseSplitIndex=function(z,B,U){for(var Z,te,Y,W,H,ne,le,Q=1/0,ce=1/0,K=B;K<=U-B;K++){var Le=f(z,0,K,this.toBBox),Ue=f(z,K,U,this.toBBox),Be=(te=Le,Y=Ue,W=void 0,H=void 0,ne=void 0,le=void 0,W=Math.max(te.minX,Y.minX),H=Math.max(te.minY,Y.minY),ne=Math.min(te.maxX,Y.maxX),le=Math.min(te.maxY,Y.maxY),Math.max(0,ne-W)*Math.max(0,le-H)),tt=M(Le)+M(Ue);Be<Q?(Q=Be,Z=K,ce=tt<ce?tt:ce):Be===Q&&tt<ce&&(ce=tt,Z=K)}return Z||U-B},u.prototype._chooseSplitAxis=function(z,B,U){var Z=z.leaf?this.compareMinX:x,te=z.leaf?this.compareMinY:b;this._allDistMargin(z,B,U,Z)<this._allDistMargin(z,B,U,te)&&z.children.sort(Z)},u.prototype._allDistMargin=function(z,B,U,Z){z.children.sort(Z);for(var te=this.toBBox,Y=f(z,0,B,te),W=f(z,U-B,U,te),H=A(Y)+A(W),ne=B;ne<U-B;ne++){var le=z.children[ne];y(Y,z.leaf?te(le):le),H+=A(Y)}for(var Q=U-B-1;Q>=B;Q--){var ce=z.children[Q];y(W,z.leaf?te(ce):ce),H+=A(W)}return H},u.prototype._adjustParentBBoxes=function(z,B,U){for(var Z=U;Z>=0;Z--)y(B[Z],z)},u.prototype._condense=function(z){for(var B=z.length-1,U=void 0;B>=0;B--)z[B].children.length===0?B>0?(U=z[B-1].children).splice(U.indexOf(z[B]),1):this.clear():s(z[B],this.toBBox)},u})})(j4);var Lj=j4.exports;const Dj=q1(pj),Rj=q1(wj),Oj=q1(Cj);var Kc=Lj,U4=Dj,$4=Rj,Kg=Oj.default,zj=$4.featureEach;$4.coordEach;U4.polygon;var qT=U4.featureCollection;function H4(e){var t=new Kc(e);return t.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Kg(n),Kc.prototype.insert.call(this,n)},t.load=function(n){var i=[];return Array.isArray(n)?n.forEach(function(a){if(a.type!=="Feature")throw new Error("invalid features");a.bbox=a.bbox?a.bbox:Kg(a),i.push(a)}):zj(n,function(a){if(a.type!=="Feature")throw new Error("invalid features");a.bbox=a.bbox?a.bbox:Kg(a),i.push(a)}),Kc.prototype.load.call(this,i)},t.remove=function(n,i){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Kg(n),Kc.prototype.remove.call(this,n,i)},t.clear=function(){return Kc.prototype.clear.call(this)},t.search=function(n){var i=Kc.prototype.search.call(this,this.toBBox(n));return qT(i)},t.collides=function(n){return Kc.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=Kc.prototype.all.call(this);return qT(n)},t.toJSON=function(){return Kc.prototype.toJSON.call(this)},t.fromJSON=function(n){return Kc.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var i;if(n.bbox)i=n.bbox;else if(Array.isArray(n)&&n.length===4)i=n;else if(Array.isArray(n)&&n.length===6)i=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")i=Kg(n);else if(n.type==="FeatureCollection")i=Kg(n);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},t}eS.exports=H4;eS.exports.default=H4;var Fj=eS.exports;const Bj=vd(Fj);function tS(e,t){var n={},i=[];if(e.type==="LineString"&&(e=Cu(e)),t.type==="LineString"&&(t=Cu(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var a=KT(e,t);return a&&i.push(a),Yf(i)}var u=Bj();return u.load(WT(t)),$x(WT(e),function(l){$x(u.search(l),function(s){var f=KT(l,s);if(f){var y=S1(f).join(",");n[y]||(n[y]=!0,i.push(f))}})}),Yf(i)}function KT(e,t){var n=S1(e),i=S1(t);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=n[0][0],u=n[0][1],l=n[1][0],s=n[1][1],f=i[0][0],y=i[0][1],x=i[1][0],b=i[1][1],M=(b-y)*(l-a)-(x-f)*(s-u),A=(x-f)*(u-y)-(b-y)*(a-f),P=(l-a)*(u-y)-(s-u)*(a-f);if(M===0)return null;var L=A/M,O=P/M;if(L>=0&&L<=1&&O>=0&&O<=1){var V=a+L*(l-a),z=u+L*(s-u);return Aa([V,z])}return null}var YT=6378137;function Nj(e){return z4(e,function(t,n){return t+Vj(n)},0)}function Vj(e){var t=0,n;switch(e.type){case"Polygon":return XT(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=XT(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function XT(e){var t=0;if(e&&e.length>0){t+=Math.abs(QT(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(QT(e[n]))}return t}function QT(e){var t,n,i,a,u,l,s,f=0,y=e.length;if(y>2){for(s=0;s<y;s++)s===y-2?(a=y-2,u=y-1,l=0):s===y-1?(a=y-1,u=0,l=1):(a=s,u=s+1,l=s+2),t=e[a],n=e[u],i=e[l],f+=(oC(i[0])-oC(t[0]))*Math.sin(oC(n[1]));f=f*YT*YT/2}return f}function oC(e){return e*Math.PI/180}function JT(e,t){return t===void 0&&(t={}),B4(e,function(n,i){var a=i.geometry.coordinates;return n+Mj(a[0],a[1],t)},0)}function AI(e,t){t===void 0&&(t={});var n=ZA(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return jj(n,t);case"MultiPolygon":return Uj(n,t);default:throw new Error("invalid poly")}}function jj(e,t){t===void 0&&(t={});var n=ZA(e),i=n.coordinates,a=t.properties?t.properties:e.type==="Feature"?e.properties:{};return G4(i,a)}function Uj(e,t){t===void 0&&(t={});var n=ZA(e),i=n.coordinates,a=t.properties?t.properties:e.type==="Feature"?e.properties:{},u=[];return i.forEach(function(l){u.push(G4(l,a))}),Yf(u)}function G4(e,t){return e.length>1?qM(e,t):Ua(e[0],t)}function $j(e,t){var n=!0;return pd(e,function(i){pd(t,function(a){if(n===!1)return!1;n=Hj(i.geometry,a.geometry)})}),n}function Hj(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!qj(e.coordinates,t.coordinates);case"LineString":return!eP(t,e);case"Polygon":return!E1(e,t)}break;case"LineString":switch(t.type){case"Point":return!eP(e,t);case"LineString":return!Gj(e,t);case"Polygon":return!tP(t,e)}break;case"Polygon":switch(t.type){case"Point":return!E1(t,e);case"LineString":return!tP(e,t);case"Polygon":return!Zj(t,e)}}return!1}function eP(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(Wj(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function Gj(e,t){var n=tS(e,t);return n.features.length>0}function tP(e,t){for(var n=0,i=t.coordinates;n<i.length;n++){var a=i[n];if(E1(a,e))return!0}var u=tS(t,AI(e));return u.features.length>0}function Zj(e,t){for(var n=0,i=e.coordinates[0];n<i.length;n++){var a=i[n];if(E1(a,t))return!0}for(var u=0,l=t.coordinates[0];u<l.length;u++){var s=l[u];if(E1(s,e))return!0}var f=tS(AI(e),AI(t));return f.features.length>0}function Wj(e,t,n){var i=n[0]-e[0],a=n[1]-e[1],u=t[0]-e[0],l=t[1]-e[1],s=i*l-a*u;return s!==0?!1:Math.abs(u)>=Math.abs(l)?u>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:l>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function qj(e,t){return e[0]===t[0]&&e[1]===t[1]}function Kj(e,t){var n=!1;return pd(e,function(i){pd(t,function(a){if(n===!0)return!0;n=!$j(i.geometry,a.geometry)})}),n}function WA(e,t,{zoom:n=15}={}){if(!t||!e)return;const i={top:50,bottom:50,left:50,right:50};if(["Point"].includes(t.type)){e.easeTo({center:t.coordinates,zoom:n,duration:0,padding:i});return}i.left=i.left,i.right=i.right;let a;t.length==4?a=t:a=Yj(t),a&&e.fitBounds(a,{padding:i,duration:100})}function Yj(e){if(!e.type)return;let t;return["Feature","FeatureCollection"].includes(e.type)?t=I1(e):t=I1({type:"Feature",properties:{},geometry:e}),t}function Xj(e,t={}){if(e.length!=0)return e.length==1?Aa(e[0],t):e.length==2?Ua(e,t):av([[...e,e[0]]],t)}function Mn(e,t,...n){const i=e.getNamespace(2)||"";return e.setNamespace(t,1),e.setNamespace(i,2),n.forEach((a,u)=>{e.setNamespace(a,3+u)}),e}function Qj(e,t,n="all"){const i=[];return e&&Array.isArray(e)&&i.push(e),t&&Array.isArray(t)&&i.push(t),i.length===0?null:i.length===1?i[0]:[n,...i]}class zf{constructor(){if(this.state={},typeof window<"u"){const t=window;t.$_hungpv_store??(t.$_hungpv_store={}),this.state=t.$_hungpv_store}else this.state={}}static getInstance(){return zf.instance||(zf.instance=new zf),zf.instance}getState(){return this.state}updateWindowStore(){if(typeof window<"u"){const t=window;t.$_hungpv_store=this.state}}get(t){this.updateWindowStore();const n=Array.isArray(t)?t:[t];let i=this.state;for(const a of n){if(typeof i!="object"||i===null||!(a in i))return;i=i[a]}return i}set(t,n){return typeof t=="string"?this.state[t]=n:Array.isArray(t)&&Jj(this.state,t,n),this.updateWindowStore(),n}has(t){const n=Array.isArray(t)?t:[t];let i=this.state;for(const a of n){if(typeof i!="object"||i===null||!(a in i))return!1;i=i[a]}return!0}delete(t){const n=Array.isArray(t)?t:[t];let i=this.state;for(let u=0;u<n.length-1;u++){const l=n[u];if(typeof i!="object"||i===null||!(l in i))return!1;i=i[l]}const a=n[n.length-1];return typeof i=="object"&&i!==null&&a in i?delete i[a]:!1}}function Jj(e,t,n){let i=e;for(let a=0;a<t.length;a++){const u=t[a];a===t.length-1?i[u]=n:((!(u in i)||typeof i[u]!="object"||i[u]===null)&&(i[u]={}),i=i[u])}return i}const eU=Symbol("@hungpvq/store");function tU(){const e=zf.getInstance();return{install(t){t.provide(eU,e)}}}function nU(){const e=zf.getInstance();if(!e)throw new Error("Store registry not found. Did you forget to app.use(createStoreRegistryPlugin())?");return e}function jl(e,t){return function(){const i=nU();if(!i.has(e)){const a=t();i.set(e,a)}return i.get(e)}}class rU{log(t,n,...i){const a=t.map(l=>`[${l}]`).join(""),u=`[${n.toUpperCase()}]${a}`;console[n](u,...i)}}class iU{constructor(t,n){this.adapters=t,this.isEnabled=n,this.namespaceMap=new Map}setNamespace(t,n=0){return this.namespaceMap.set(n,t),this}removeNamespace(t){return this.namespaceMap.delete(t),this}clearNamespaces(){return this.namespaceMap.clear(),this}getNamespace(t){return this.namespaceMap.get(t)}getNamespaces(){return this.getSortedNamespaces()}getSortedNamespaces(){return[...this.namespaceMap.entries()].sort(([t],[n])=>t-n).map(([,t])=>t)}log(t,...n){const i=this.getSortedNamespaces();if(this.isEnabled(i))for(const a of this.adapters)a.log(i,t,...n)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warn",...t)}error(...t){this.log("error",...t)}}class py{constructor(){this.adapters=[new rU],this.enableAll=!0,this.disabledNamespaces=new Set,this.enabledNamespaces=new Set}static getInstance(){return py.instance||(py.instance=new py),py.instance}enableEverything(){this.enableAll=!0,this.disabledNamespaces.clear(),this.enabledNamespaces.clear()}disableEverything(){this.enableAll=!1,this.disabledNamespaces.clear(),this.enabledNamespaces.clear()}disable(t){this.enableAll&&this.disabledNamespaces.add(t)}enable(t){this.enableAll||this.enabledNamespaces.add(t)}isEnabled(t){return this.enableAll?!t.some(n=>this.disabledNamespaces.has(n)):t.some(n=>this.enabledNamespaces.has(n))}setAdapters(t){this.adapters=t}addAdapter(t){this.adapters.push(t)}clearAdapters(){this.adapters=[]}getAdapters(){return this.adapters}createLogger(){return new iU(this.adapters,t=>this.isEnabled(t))}}const Vo=py.getInstance(),Mu={MITT:"mitt",EVENT:"event",IMAGE:"image",MAP_COMPARE:"map-compare",LANG:"lang",CRS:"crs"};Vo.disable("map:"+Mu.MITT);Vo.disableEverything();const lC=Vo.createLogger().setNamespace("map:core",2),sU=lF("map:core",{});function Uy(e){const t=sU[e];if(t)return t}function mue(e,t,n){const i=Uy(e);if(i)return i[t]||(i[t]=n||{}),i[t]}function gue(e,t){const n=Uy(e);return(n==null?void 0:n[t])||{}}function Z4(e){var t;return!!((t=Uy(e))!=null&&t.isMulti)}function W4(e){var t;return(t=Uy(e))==null?void 0:t.maps}function lo(e,t){var a,u;const n=(a=Uy(e))==null?void 0:a.map,i=(u=Uy(e))==null?void 0:u.maps;i&&i.forEach(l=>{t&&t(l)}),n&&t&&t(n)}const q4=jl("map:core",()=>({})),wI=e=>{const t=q4();function n(){const i=t[e];if(i)return i}return{getIsMulti(){var i;return!!((i=n())!=null&&i.isMulti)},getMaps(){var i;return(i=n())==null?void 0:i.maps},getMap(i){var l,s;const a=(l=n())==null?void 0:l.map,u=(s=n())==null?void 0:s.maps;u&&u.forEach(f=>{i&&i(f)}),a&&i&&i(a)}}},aU=e=>{const t=q4();return{initMaps(n){Mn(lC,e,"store").debug("init maps",n),t[e]={maps:n,isMulti:n.length>1}},initMap(n){Mn(lC,e,"store").debug("init",n),t[e]={map:n}},removeMap(){Mn(lC,e,"store").debug("removeMap"),delete t[e]}}},Lr=(e={},t,n)=>{const i=ca("$map.id"),a=Wt(()=>e.mapId||i);Er(()=>{lo(a.value,async s=>{t instanceof Function&&await t(s)})}),ha(async()=>{n instanceof Function&&lo(a.value,async s=>{t instanceof Function&&await n(s)})});function u(s){return lo(a.value,s)}const l={mapId:e.mapId,dragId:e.dragId,btnWidth:e.btnWidth,position:e.position,controlVisible:e.controlVisible,order:e.order};return{callMap:u,mapId:a,moduleContainerProps:l}},oU={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(e){return["top-left","top-right","bottom-left","bottom-right"].indexOf(e)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},Ri={mapId:"",dragId:"",btnWidth:40,position:"bottom-right",controlVisible:!0,order:0};function Bl(e=!1){const t=Kt(e);function n(i){if(i!=null){t.value=!!i;return}t.value=!t.value}return[t,n]}const lU=np({show:Boolean},"show");function K4(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(a){a(n)}),(i=e.get("*"))&&i.slice().map(function(a){a(t,n)})}}}const nP=Vo.createLogger().setNamespace("map:"+Mu.MITT,2),fh=e=>jl(["map:core",e,Mu.MITT],()=>{const t=K4();return Mn(nP,e,"store").debug("init"),t.on("*",(n,...i)=>{Mn(nP,e,"store").debug(`[${String(n)}]`,i)}),t})();var Hx={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Hx.exports;(function(e,t){(function(){var n,i="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",s="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",y=500,x="__lodash_placeholder__",b=1,M=2,A=4,P=1,L=2,O=1,V=2,z=4,B=8,U=16,Z=32,te=64,Y=128,W=256,H=512,ne=30,le="...",Q=800,ce=16,K=1,Le=2,Ue=3,Be=1/0,tt=9007199254740991,ut=17976931348623157e292,Tt=NaN,Ge=4294967295,Ne=Ge-1,Dt=Ge>>>1,Bt=[["ary",Y],["bind",O],["bindKey",V],["curry",B],["curryRight",U],["flip",H],["partial",Z],["partialRight",te],["rearg",W]],St="[object Arguments]",en="[object Array]",pt="[object AsyncFunction]",ft="[object Boolean]",ot="[object Date]",Pt="[object DOMException]",Lt="[object Error]",un="[object Function]",Ie="[object GeneratorFunction]",$="[object Map]",Te="[object Number]",Oe="[object Null]",ye="[object Object]",pe="[object Promise]",Fe="[object Proxy]",rt="[object RegExp]",at="[object Set]",Ve="[object String]",Mt="[object Symbol]",wt="[object Undefined]",At="[object WeakMap]",Gt="[object WeakSet]",dn="[object ArrayBuffer]",pn="[object DataView]",ct="[object Float32Array]",mt="[object Float64Array]",_t="[object Int8Array]",jt="[object Int16Array]",qt="[object Int32Array]",Cn="[object Uint8Array]",Xe="[object Uint8ClampedArray]",de="[object Uint16Array]",ge="[object Uint32Array]",Ae=/\b__p \+= '';/g,Se=/\b(__p \+=) '' \+/g,ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qe=/&(?:amp|lt|gt|quot|#39);/g,dt=/[&<>"']/g,We=RegExp(Qe.source),Et=RegExp(dt.source),Ot=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,Yt=/<%=([\s\S]+?)%>/g,mn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gn=/^\w*$/,Un=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jn=/[\\^$.*+?()[\]{}|]/g,Vt=RegExp(Jn.source),$n=/^\s+/,Ar=/\s/,Ur=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ht=/,? & /,bn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Bn=/[()=,{}\[\]\/\s]/,Ws=/\\(\\)?/g,Os=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oi=/\w*$/,Yn=/^[-+]0x[0-9a-f]+$/i,_h=/^0b[01]+$/i,Su=/^\[object .+?Constructor\]$/,Ad=/^0o[0-7]+$/i,$l=/^(?:0|[1-9]\d*)$/,wd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gi=/($^)/,li=/['\n\r\u2028\u2029\\]/g,Zi="\\ud800-\\udfff",bh="\\u0300-\\u036f",Cd="\\ufe20-\\ufe2f",co="\\u20d0-\\u20ff",Hl=bh+Cd+co,op="\\u2700-\\u27bf",lp="a-z\\xdf-\\xf6\\xf8-\\xff",up="\\xac\\xb1\\xd7\\xf7",_c="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cp="\\u2000-\\u206f",hv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wm="A-Z\\xc0-\\xd6\\xd8-\\xde",qm="\\ufe0e\\ufe0f",hp=up+_c+cp+hv,Id="[']",dp="["+Zi+"]",Md="["+hp+"]",bc="["+Hl+"]",Gl="\\d+",fp="["+op+"]",xh="["+lp+"]",Eu="[^"+Zi+hp+Gl+op+lp+Wm+"]",Zl="\\ud83c[\\udffb-\\udfff]",Km="(?:"+bc+"|"+Zl+")",Ym="[^"+Zi+"]",ho="(?:\\ud83c[\\udde6-\\uddff]){2}",Wl="[\\ud800-\\udbff][\\udc00-\\udfff]",er="["+Wm+"]",vr="\\u200d",Tu="(?:"+xh+"|"+Eu+")",$o="(?:"+er+"|"+Eu+")",qs="(?:"+Id+"(?:d|ll|m|re|s|t|ve))?",Ss="(?:"+Id+"(?:D|LL|M|RE|S|T|VE))?",vi=Km+"?",xc="["+qm+"]?",Es="(?:"+vr+"(?:"+[Ym,ho,Wl].join("|")+")"+xc+vi+")*",Ia="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ks="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gl=xc+vi+Es,Ah="(?:"+[fp,ho,Wl].join("|")+")"+gl,Ci="(?:"+[Ym+bc+"?",bc,ho,Wl,dp].join("|")+")",Ho=RegExp(Id,"g"),ql=RegExp(bc,"g"),Pu=RegExp(Zl+"(?="+Zl+")|"+Ci+gl,"g"),Wa=RegExp([er+"?"+xh+"+"+qs+"(?="+[Md,er,"$"].join("|")+")",$o+"+"+Ss+"(?="+[Md,er+Tu,"$"].join("|")+")",er+"?"+Tu+"+"+qs,er+"+"+Ss,Ks,Ia,Gl,Ah].join("|"),"g"),wh=RegExp("["+vr+Zi+Hl+qm+"]"),Nr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Pr=-1,kn={};kn[ct]=kn[mt]=kn[_t]=kn[jt]=kn[qt]=kn[Cn]=kn[Xe]=kn[de]=kn[ge]=!0,kn[St]=kn[en]=kn[dn]=kn[ft]=kn[pn]=kn[ot]=kn[Lt]=kn[un]=kn[$]=kn[Te]=kn[ye]=kn[rt]=kn[at]=kn[Ve]=kn[At]=!1;var $r={};$r[St]=$r[en]=$r[dn]=$r[pn]=$r[ft]=$r[ot]=$r[ct]=$r[mt]=$r[_t]=$r[jt]=$r[qt]=$r[$]=$r[Te]=$r[ye]=$r[rt]=$r[at]=$r[Ve]=$r[Mt]=$r[Cn]=$r[Xe]=$r[de]=$r[ge]=!0,$r[Lt]=$r[un]=$r[At]=!1;var xr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ch={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fo={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ac={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sd=parseFloat,Ed=parseInt,ku=typeof la=="object"&&la&&la.Object===Object&&la,Ih=typeof self=="object"&&self&&self.Object===Object&&self,Wi=ku||Ih||Function("return this")(),Td=t&&!t.nodeType&&t,Go=Td&&!0&&e&&!e.nodeType&&e,Lu=Go&&Go.exports===Td,ms=Lu&&ku.process,Ys=function(){try{var gt=Go&&Go.require&&Go.require("util").types;return gt||ms&&ms.binding&&ms.binding("util")}catch{}}(),Xs=Ys&&Ys.isArrayBuffer,Du=Ys&&Ys.isDate,ei=Ys&&Ys.isMap,wc=Ys&&Ys.isRegExp,Mh=Ys&&Ys.isSet,Pd=Ys&&Ys.isTypedArray;function gs(gt,Zt,zt){switch(zt.length){case 0:return gt.call(Zt);case 1:return gt.call(Zt,zt[0]);case 2:return gt.call(Zt,zt[0],zt[1]);case 3:return gt.call(Zt,zt[0],zt[1],zt[2])}return gt.apply(Zt,zt)}function kd(gt,Zt,zt,Ln){for(var Kn=-1,Cr=gt==null?0:gt.length;++Kn<Cr;){var Kr=gt[Kn];Zt(Ln,Kr,zt(Kr),gt)}return Ln}function da(gt,Zt){for(var zt=-1,Ln=gt==null?0:gt.length;++zt<Ln&&Zt(gt[zt],zt,gt)!==!1;);return gt}function dv(gt,Zt){for(var zt=gt==null?0:gt.length;zt--&&Zt(gt[zt],zt,gt)!==!1;);return gt}function Sh(gt,Zt){for(var zt=-1,Ln=gt==null?0:gt.length;++zt<Ln;)if(!Zt(gt[zt],zt,gt))return!1;return!0}function po(gt,Zt){for(var zt=-1,Ln=gt==null?0:gt.length,Kn=0,Cr=[];++zt<Ln;){var Kr=gt[zt];Zt(Kr,zt,gt)&&(Cr[Kn++]=Kr)}return Cr}function fa(gt,Zt){var zt=gt==null?0:gt.length;return!!zt&&Zo(gt,Zt,0)>-1}function Ru(gt,Zt,zt){for(var Ln=-1,Kn=gt==null?0:gt.length;++Ln<Kn;)if(zt(Zt,gt[Ln]))return!0;return!1}function Qr(gt,Zt){for(var zt=-1,Ln=gt==null?0:gt.length,Kn=Array(Ln);++zt<Ln;)Kn[zt]=Zt(gt[zt],zt,gt);return Kn}function mo(gt,Zt){for(var zt=-1,Ln=Zt.length,Kn=gt.length;++zt<Ln;)gt[Kn+zt]=Zt[zt];return gt}function Ou(gt,Zt,zt,Ln){var Kn=-1,Cr=gt==null?0:gt.length;for(Ln&&Cr&&(zt=gt[++Kn]);++Kn<Cr;)zt=Zt(zt,gt[Kn],Kn,gt);return zt}function mp(gt,Zt,zt,Ln){var Kn=gt==null?0:gt.length;for(Ln&&Kn&&(zt=gt[--Kn]);Kn--;)zt=Zt(zt,gt[Kn],Kn,gt);return zt}function qa(gt,Zt){for(var zt=-1,Ln=gt==null?0:gt.length;++zt<Ln;)if(Zt(gt[zt],zt,gt))return!0;return!1}var fv=Ld("length");function gp(gt){return gt.split("")}function Kl(gt){return gt.match(bn)||[]}function Cc(gt,Zt,zt){var Ln;return zt(gt,function(Kn,Cr,Kr){if(Zt(Kn,Cr,Kr))return Ln=Cr,!1}),Ln}function Eh(gt,Zt,zt,Ln){for(var Kn=gt.length,Cr=zt+(Ln?1:-1);Ln?Cr--:++Cr<Kn;)if(Zt(gt[Cr],Cr,gt))return Cr;return-1}function Zo(gt,Zt,zt){return Zt===Zt?ig(gt,Zt,zt):Eh(gt,Yl,zt)}function pv(gt,Zt,zt,Ln){for(var Kn=zt-1,Cr=gt.length;++Kn<Cr;)if(Ln(gt[Kn],Zt))return Kn;return-1}function Yl(gt){return gt!==gt}function Xm(gt,Zt){var zt=gt==null?0:gt.length;return zt?Th(gt,Zt)/zt:Tt}function Ld(gt){return function(Zt){return Zt==null?n:Zt[gt]}}function yp(gt){return function(Zt){return gt==null?n:gt[Zt]}}function vp(gt,Zt,zt,Ln,Kn){return Kn(gt,function(Cr,Kr,ti){zt=Ln?(Ln=!1,Cr):Zt(zt,Cr,Kr,ti)}),zt}function _p(gt,Zt){var zt=gt.length;for(gt.sort(Zt);zt--;)gt[zt]=gt[zt].value;return gt}function Th(gt,Zt){for(var zt,Ln=-1,Kn=gt.length;++Ln<Kn;){var Cr=Zt(gt[Ln]);Cr!==n&&(zt=zt===n?Cr:zt+Cr)}return zt}function Ph(gt,Zt){for(var zt=-1,Ln=Array(gt);++zt<gt;)Ln[zt]=Zt(zt);return Ln}function bp(gt,Zt){return Qr(Zt,function(zt){return[zt,gt[zt]]})}function xp(gt){return gt&&gt.slice(0,sg(gt)+1).replace($n,"")}function ss(gt){return function(Zt){return gt(Zt)}}function Dd(gt,Zt){return Qr(Zt,function(zt){return gt[zt]})}function Xl(gt,Zt){return gt.has(Zt)}function Ic(gt,Zt){for(var zt=-1,Ln=gt.length;++zt<Ln&&Zo(Zt,gt[zt],0)>-1;);return zt}function Qm(gt,Zt){for(var zt=gt.length;zt--&&Zo(Zt,gt[zt],0)>-1;);return zt}function Rd(gt,Zt){for(var zt=gt.length,Ln=0;zt--;)gt[zt]===Zt&&++Ln;return Ln}var Jm=yp(xr),eg=yp(Ch);function tg(gt){return"\\"+Ac[gt]}function ng(gt,Zt){return gt==null?n:gt[Zt]}function Ql(gt){return wh.test(gt)}function Od(gt){return Nr.test(gt)}function rg(gt){for(var Zt,zt=[];!(Zt=gt.next()).done;)zt.push(Zt.value);return zt}function Mc(gt){var Zt=-1,zt=Array(gt.size);return gt.forEach(function(Ln,Kn){zt[++Zt]=[Kn,Ln]}),zt}function Wo(gt,Zt){return function(zt){return gt(Zt(zt))}}function go(gt,Zt){for(var zt=-1,Ln=gt.length,Kn=0,Cr=[];++zt<Ln;){var Kr=gt[zt];(Kr===Zt||Kr===x)&&(gt[zt]=x,Cr[Kn++]=zt)}return Cr}function Sc(gt){var Zt=-1,zt=Array(gt.size);return gt.forEach(function(Ln){zt[++Zt]=Ln}),zt}function Ap(gt){var Zt=-1,zt=Array(gt.size);return gt.forEach(function(Ln){zt[++Zt]=[Ln,Ln]}),zt}function ig(gt,Zt,zt){for(var Ln=zt-1,Kn=gt.length;++Ln<Kn;)if(gt[Ln]===Zt)return Ln;return-1}function wp(gt,Zt,zt){for(var Ln=zt+1;Ln--;)if(gt[Ln]===Zt)return Ln;return Ln}function ar(gt){return Ql(gt)?gv(gt):fv(gt)}function Ma(gt){return Ql(gt)?yv(gt):gp(gt)}function sg(gt){for(var Zt=gt.length;Zt--&&Ar.test(gt.charAt(Zt)););return Zt}var mv=yp(fo);function gv(gt){for(var Zt=Pu.lastIndex=0;Pu.test(gt);)++Zt;return Zt}function yv(gt){return gt.match(Pu)||[]}function ag(gt){return gt.match(Wa)||[]}var vv=function gt(Zt){Zt=Zt==null?Wi:zu.defaults(Wi.Object(),Zt,zu.pick(Wi,pp));var zt=Zt.Array,Ln=Zt.Date,Kn=Zt.Error,Cr=Zt.Function,Kr=Zt.Math,ti=Zt.Object,zd=Zt.RegExp,Cp=Zt.String,ys=Zt.TypeError,Fu=zt.prototype,Fd=Cr.prototype,qo=ti.prototype,Bu=Zt["__core-js_shared__"],kh=Fd.toString,Dr=qo.hasOwnProperty,Ec=0,Ip=function(){var g=/[^.]+$/.exec(Bu&&Bu.keys&&Bu.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Tc=qo.toString,kr=kh.call(ti),Bd=Wi._,_v=zd("^"+kh.call(Dr).replace(Jn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nu=Lu?Zt.Buffer:n,Ka=Zt.Symbol,Nd=Zt.Uint8Array,og=Nu?Nu.allocUnsafe:n,Pc=Wo(ti.getPrototypeOf,ti),lg=ti.create,Vd=qo.propertyIsEnumerable,Ko=Fu.splice,kc=Ka?Ka.isConcatSpreadable:n,Vu=Ka?Ka.iterator:n,yl=Ka?Ka.toStringTag:n,Lh=function(){try{var g=Ku(ti,"defineProperty");return g({},"",{}),g}catch{}}(),jd=Zt.clearTimeout!==Wi.clearTimeout&&Zt.clearTimeout,Ud=Ln&&Ln.now!==Wi.Date.now&&Ln.now,$d=Zt.setTimeout!==Wi.setTimeout&&Zt.setTimeout,Dh=Kr.ceil,Lc=Kr.floor,Mp=ti.getOwnPropertySymbols,Sp=Nu?Nu.isBuffer:n,Dc=Zt.isFinite,Hd=Fu.join,Ep=Wo(ti.keys,ti),zi=Kr.max,qi=Kr.min,Rh=Ln.now,Gd=Zt.parseInt,Tp=Kr.random,Fi=Fu.reverse,vl=Ku(Zt,"DataView"),zs=Ku(Zt,"Map"),Oh=Ku(Zt,"Promise"),Jl=Ku(Zt,"Set"),ju=Ku(Zt,"WeakMap"),yo=Ku(ti,"create"),vo=ju&&new ju,eu={},Pp=Zc(vl),kp=Zc(zs),ug=Zc(Oh),Lp=Zc(Jl),Dp=Zc(ju),pa=Ka?Ka.prototype:n,Rc=pa?pa.valueOf:n,Rp=pa?pa.toString:n;function Ce(g){if(Ei(g)&&!lr(g)&&!(g instanceof ur)){if(g instanceof Sa)return g;if(Dr.call(g,"__wrapped__"))return M_(g)}return new Sa(g)}var Uu=function(){function g(){}return function(C){if(!Bi(C))return{};if(lg)return lg(C);g.prototype=C;var R=new g;return g.prototype=n,R}}();function zh(){}function Sa(g,C){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}Ce.templateSettings={escape:Ot,evaluate:yt,interpolate:Yt,variable:"",imports:{_:Ce}},Ce.prototype=zh.prototype,Ce.prototype.constructor=Ce,Sa.prototype=Uu(zh.prototype),Sa.prototype.constructor=Sa;function ur(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ge,this.__views__=[]}function tu(){var g=new ur(this.__wrapped__);return g.__actions__=ta(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=ta(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=ta(this.__views__),g}function ma(){if(this.__filtered__){var g=new ur(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function Qs(){var g=this.__wrapped__.value(),C=this.__dir__,R=lr(g),J=C<0,me=R?g.length:0,Ee=Lw(0,me,this.__views__),Ye=Ee.start,ht=Ee.end,bt=ht-Ye,tn=J?ht:Ye-1,nn=this.__iteratees__,cn=nn.length,In=0,Gn=qi(bt,this.__takeCount__);if(!R||!J&&me==bt&&Gn==bt)return Ps(g,this.__actions__);var nr=[];e:for(;bt--&&In<Gn;){tn+=C;for(var Ir=-1,rr=g[tn];++Ir<cn;){var Fr=nn[Ir],Hr=Fr.iteratee,kl=Fr.type,Eo=Hr(rr);if(kl==Le)rr=Eo;else if(!Eo){if(kl==K)continue e;break e}}nr[In++]=rr}return nr}ur.prototype=Uu(zh.prototype),ur.prototype.constructor=ur;function Ts(g){var C=-1,R=g==null?0:g.length;for(this.clear();++C<R;){var J=g[C];this.set(J[0],J[1])}}function cg(){this.__data__=yo?yo(null):{},this.size=0}function Yo(g){var C=this.has(g)&&delete this.__data__[g];return this.size-=C?1:0,C}function Xo(g){var C=this.__data__;if(yo){var R=C[g];return R===f?n:R}return Dr.call(C,g)?C[g]:n}function hg(g){var C=this.__data__;return yo?C[g]!==n:Dr.call(C,g)}function Op(g,C){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=yo&&C===n?f:C,this}Ts.prototype.clear=cg,Ts.prototype.delete=Yo,Ts.prototype.get=Xo,Ts.prototype.has=hg,Ts.prototype.set=Op;function _l(g){var C=-1,R=g==null?0:g.length;for(this.clear();++C<R;){var J=g[C];this.set(J[0],J[1])}}function zp(){this.__data__=[],this.size=0}function dg(g){var C=this.__data__,R=nu(C,g);if(R<0)return!1;var J=C.length-1;return R==J?C.pop():Ko.call(C,R,1),--this.size,!0}function bl(g){var C=this.__data__,R=nu(C,g);return R<0?n:C[R][1]}function xl(g){return nu(this.__data__,g)>-1}function yn(g,C){var R=this.__data__,J=nu(R,g);return J<0?(++this.size,R.push([g,C])):R[J][1]=C,this}_l.prototype.clear=zp,_l.prototype.delete=dg,_l.prototype.get=bl,_l.prototype.has=xl,_l.prototype.set=yn;function Qo(g){var C=-1,R=g==null?0:g.length;for(this.clear();++C<R;){var J=g[C];this.set(J[0],J[1])}}function Fp(){this.size=0,this.__data__={hash:new Ts,map:new(zs||_l),string:new Ts}}function Fh(g){var C=Ig(this,g).delete(g);return this.size-=C?1:0,C}function Bh(g){return Ig(this,g).get(g)}function $u(g){return Ig(this,g).has(g)}function Nh(g,C){var R=Ig(this,g),J=R.size;return R.set(g,C),this.size+=R.size==J?0:1,this}Qo.prototype.clear=Fp,Qo.prototype.delete=Fh,Qo.prototype.get=Bh,Qo.prototype.has=$u,Qo.prototype.set=Nh;function tr(g){var C=-1,R=g==null?0:g.length;for(this.__data__=new Qo;++C<R;)this.add(g[C])}function Zd(g){return this.__data__.set(g,f),this}function fg(g){return this.__data__.has(g)}tr.prototype.add=tr.prototype.push=Zd,tr.prototype.has=fg;function ga(g){var C=this.__data__=new _l(g);this.size=C.size}function Bp(){this.__data__=new _l,this.size=0}function pg(g){var C=this.__data__,R=C.delete(g);return this.size=C.size,R}function mg(g){return this.__data__.get(g)}function Wd(g){return this.__data__.has(g)}function gg(g,C){var R=this.__data__;if(R instanceof _l){var J=R.__data__;if(!zs||J.length<a-1)return J.push([g,C]),this.size=++R.size,this;R=this.__data__=new Qo(J)}return R.set(g,C),this.size=R.size,this}ga.prototype.clear=Bp,ga.prototype.delete=pg,ga.prototype.get=mg,ga.prototype.has=Wd,ga.prototype.set=gg;function Np(g,C){var R=lr(g),J=!R&&qc(g),me=!R&&!J&&La(g),Ee=!R&&!J&&!me&&Kh(g),Ye=R||J||me||Ee,ht=Ye?Ph(g.length,Cp):[],bt=ht.length;for(var tn in g)(C||Dr.call(g,tn))&&!(Ye&&(tn=="length"||me&&(tn=="offset"||tn=="parent")||Ee&&(tn=="buffer"||tn=="byteLength"||tn=="byteOffset")||Yu(tn,bt)))&&ht.push(tn);return ht}function qd(g){var C=g.length;return C?g[it(0,C-1)]:n}function yg(g,C){return Gc(ta(g),Fs(C,0,g.length))}function bv(g){return Gc(ta(g))}function Jo(g,C,R){(R!==n&&!xa(g[C],R)||R===n&&!(C in g))&&el(g,C,R)}function Yr(g,C,R){var J=g[C];(!(Dr.call(g,C)&&xa(J,R))||R===n&&!(C in g))&&el(g,C,R)}function nu(g,C){for(var R=g.length;R--;)if(xa(g[R][0],C))return R;return-1}function Kd(g,C,R,J){return tl(g,function(me,Ee,Ye){C(J,me,R(me),Ye)}),J}function Yd(g,C){return g&&Qa(C,ae(C),g)}function Vh(g,C){return g&&Qa(C,we(C),g)}function el(g,C,R){C=="__proto__"&&Lh?Lh(g,C,{configurable:!0,enumerable:!0,value:R,writable:!0}):g[C]=R}function jh(g,C){for(var R=-1,J=C.length,me=zt(J),Ee=g==null;++R<J;)me[R]=Ee?n:he(g,C[R]);return me}function Fs(g,C,R){return g===g&&(R!==n&&(g=g<=R?g:R),C!==n&&(g=g>=C?g:C)),g}function Js(g,C,R,J,me,Ee){var Ye,ht=C&b,bt=C&M,tn=C&A;if(R&&(Ye=me?R(g,J,me,Ee):R(g)),Ye!==n)return Ye;if(!Bi(g))return g;var nn=lr(g);if(nn){if(Ye=Rw(g),!ht)return ta(g,Ye)}else{var cn=vs(g),In=cn==un||cn==Ie;if(La(g))return wl(g,ht);if(cn==ye||cn==St||In&&!me){if(Ye=bt||In?{}:b_(g),!ht)return bt?Ta(g,Vh(Ye,g)):xg(g,Yd(Ye,g))}else{if(!$r[cn])return me?g:{};Ye=Ow(g,cn,ht)}}Ee||(Ee=new ga);var Gn=Ee.get(g);if(Gn)return Gn;Ee.set(g,Ye),Vg(g)?g.forEach(function(rr){Ye.add(Js(rr,C,R,rr,g,Ee))}):um(g)&&g.forEach(function(rr,Fr){Ye.set(Fr,Js(rr,C,R,Fr,g,Ee))});var nr=tn?bt?qp:Cg:bt?we:ae,Ir=nn?n:nr(g);return da(Ir||g,function(rr,Fr){Ir&&(Fr=rr,rr=g[Fr]),Yr(Ye,Fr,Js(rr,C,R,Fr,g,Ee))}),Ye}function On(g){var C=ae(g);return function(R){return Nn(R,g,C)}}function Nn(g,C,R){var J=R.length;if(g==null)return!J;for(g=ti(g);J--;){var me=R[J],Ee=C[me],Ye=g[me];if(Ye===n&&!(me in g)||!Ee(Ye))return!1}return!0}function Oc(g,C,R){if(typeof g!="function")throw new ys(l);return lf(function(){g.apply(n,R)},C)}function Hu(g,C,R,J){var me=-1,Ee=fa,Ye=!0,ht=g.length,bt=[],tn=C.length;if(!ht)return bt;R&&(C=Qr(C,ss(R))),J?(Ee=Ru,Ye=!1):C.length>=a&&(Ee=Xl,Ye=!1,C=new tr(C));e:for(;++me<ht;){var nn=g[me],cn=R==null?nn:R(nn);if(nn=J||nn!==0?nn:0,Ye&&cn===cn){for(var In=tn;In--;)if(C[In]===cn)continue e;bt.push(nn)}else Ee(C,cn,J)||bt.push(nn)}return bt}var tl=jp(ya),ea=jp(Bc,!0);function vg(g,C){var R=!0;return tl(g,function(J,me,Ee){return R=!!C(J,me,Ee),R}),R}function Ea(g,C,R){for(var J=-1,me=g.length;++J<me;){var Ee=g[J],Ye=C(Ee);if(Ye!=null&&(ht===n?Ye===Ye&&!Ja(Ye):R(Ye,ht)))var ht=Ye,bt=Ee}return bt}function zc(g,C,R,J){var me=g.length;for(R=hr(R),R<0&&(R=-R>me?0:me+R),J=J===n||J>me?me:hr(J),J<0&&(J+=me),J=R>J?0:Ug(J);R<J;)g[R++]=C;return g}function Fc(g,C){var R=[];return tl(g,function(J,me,Ee){C(J,me,Ee)&&R.push(J)}),R}function fr(g,C,R,J,me){var Ee=-1,Ye=g.length;for(R||(R=Rv),me||(me=[]);++Ee<Ye;){var ht=g[Ee];C>0&&R(ht)?C>1?fr(ht,C-1,R,J,me):mo(me,ht):J||(me[me.length]=ht)}return me}var Ii=jc(),Xd=jc(!0);function ya(g,C){return g&&Ii(g,C,ae)}function Bc(g,C){return g&&Xd(g,C,ae)}function Ya(g,C){return po(C,function(R){return Io(g[R])})}function nl(g,C){C=ks(C,g);for(var R=0,J=C.length;g!=null&&R<J;)g=g[Il(C[R++])];return R&&R==J?g:n}function Nc(g,C,R){var J=C(g);return lr(g)?J:mo(J,R(g))}function Yi(g){return g==null?g===n?wt:Oe:yl&&yl in ti(g)?Dv(g):Ov(g)}function Gu(g,C){return g>C}function Vp(g,C){return g!=null&&Dr.call(g,C)}function Vc(g,C){return g!=null&&C in ti(g)}function Zu(g,C,R){return g>=qi(C,R)&&g<zi(C,R)}function Uh(g,C,R){for(var J=R?Ru:fa,me=g[0].length,Ee=g.length,Ye=Ee,ht=zt(Ee),bt=1/0,tn=[];Ye--;){var nn=g[Ye];Ye&&C&&(nn=Qr(nn,ss(C))),bt=qi(nn.length,bt),ht[Ye]=!R&&(C||me>=120&&nn.length>=120)?new tr(Ye&&nn):n}nn=g[0];var cn=-1,In=ht[0];e:for(;++cn<me&&tn.length<bt;){var Gn=nn[cn],nr=C?C(Gn):Gn;if(Gn=R||Gn!==0?Gn:0,!(In?Xl(In,nr):J(tn,nr,R))){for(Ye=Ee;--Ye;){var Ir=ht[Ye];if(!(Ir?Xl(Ir,nr):J(g[Ye],nr,R)))continue e}In&&In.push(nr),tn.push(Gn)}}return tn}function Qd(g,C,R,J){return ya(g,function(me,Ee,Ye){C(J,R(me),Ee,Ye)}),J}function _o(g,C,R){C=ks(C,g),g=Qp(g,C);var J=g==null?g:g[Il(rl(C))];return J==null?n:gs(J,g,R)}function Jd(g){return Ei(g)&&Yi(g)==St}function ef(g){return Ei(g)&&Yi(g)==dn}function tf(g){return Ei(g)&&Yi(g)==ot}function Wu(g,C,R,J,me){return g===C?!0:g==null||C==null||!Ei(g)&&!Ei(C)?g!==g&&C!==C:w(g,C,R,J,Wu,me)}function w(g,C,R,J,me,Ee){var Ye=lr(g),ht=lr(C),bt=Ye?en:vs(g),tn=ht?en:vs(C);bt=bt==St?ye:bt,tn=tn==St?ye:tn;var nn=bt==ye,cn=tn==ye,In=bt==tn;if(In&&La(g)){if(!La(C))return!1;Ye=!0,nn=!1}if(In&&!nn)return Ee||(Ee=new ga),Ye||Kh(g)?Tv(g,C,R,J,me,Ee):Pv(g,C,bt,R,J,me,Ee);if(!(R&P)){var Gn=nn&&Dr.call(g,"__wrapped__"),nr=cn&&Dr.call(C,"__wrapped__");if(Gn||nr){var Ir=Gn?g.value():g,rr=nr?C.value():C;return Ee||(Ee=new ga),me(Ir,rr,R,J,Ee)}}return In?(Ee||(Ee=new ga),Wp(g,C,R,J,me,Ee)):!1}function r(g){return Ei(g)&&vs(g)==$}function c(g,C,R,J){var me=R.length,Ee=me,Ye=!J;if(g==null)return!Ee;for(g=ti(g);me--;){var ht=R[me];if(Ye&&ht[2]?ht[1]!==g[ht[0]]:!(ht[0]in g))return!1}for(;++me<Ee;){ht=R[me];var bt=ht[0],tn=g[bt],nn=ht[1];if(Ye&&ht[2]){if(tn===n&&!(bt in g))return!1}else{var cn=new ga;if(J)var In=J(tn,nn,bt,g,C,cn);if(!(In===n?Wu(nn,tn,P|L,J,cn):In))return!1}}return!0}function m(g){if(!Bi(g)||sf(g))return!1;var C=Io(g)?_v:Su;return C.test(Zc(g))}function v(g){return Ei(g)&&Yi(g)==rt}function I(g){return Ei(g)&&vs(g)==at}function T(g){return Ei(g)&&Wh(g.length)&&!!kn[Yi(g)]}function D(g){return typeof g=="function"?g:g==null?ra:typeof g=="object"?lr(g)?fe(g[0],g[1]):se(g):_E(g)}function N(g){if(!Hc(g))return Ep(g);var C=[];for(var R in ti(g))Dr.call(g,R)&&R!="constructor"&&C.push(R);return C}function G(g){if(!Bi(g))return Xp(g);var C=Hc(g),R=[];for(var J in g)J=="constructor"&&(C||!Dr.call(g,J))||R.push(J);return R}function X(g,C){return g<C}function ie(g,C){var R=-1,J=ka(g)?zt(g.length):[];return tl(g,function(me,Ee,Ye){J[++R]=C(me,Ee,Ye)}),J}function se(g){var C=Lv(g);return C.length==1&&C[0][2]?af(C[0][0],C[0][1]):function(R){return R===g||c(R,g,C)}}function fe(g,C){return Hh(g)&&Yp(C)?af(Il(g),C):function(R){var J=he(R,g);return J===n&&J===C?Me(R,g):Wu(C,J,P|L)}}function _e(g,C,R,J,me){g!==C&&Ii(C,function(Ee,Ye){if(me||(me=new ga),Bi(Ee))De(g,C,Ye,R,_e,J,me);else{var ht=J?J(Zh(g,Ye),Ee,Ye+"",g,C,me):n;ht===n&&(ht=Ee),Jo(g,Ye,ht)}},we)}function De(g,C,R,J,me,Ee,Ye){var ht=Zh(g,R),bt=Zh(C,R),tn=Ye.get(bt);if(tn){Jo(g,R,tn);return}var nn=Ee?Ee(ht,bt,R+"",g,C,Ye):n,cn=nn===n;if(cn){var In=lr(bt),Gn=!In&&La(bt),nr=!In&&!Gn&&Kh(bt);nn=bt,In||Gn||nr?lr(ht)?nn=ht:ls(ht)?nn=ta(ht):Gn?(cn=!1,nn=wl(bt,!0)):nr?(cn=!1,nn=Mi(bt,!0)):nn=[]:qh(bt)||qc(bt)?(nn=ht,qc(ht)?nn=mf(ht):(!Bi(ht)||Io(ht))&&(nn=b_(bt))):cn=!1}cn&&(Ye.set(bt,nn),me(nn,bt,J,Ee,Ye),Ye.delete(bt)),Jo(g,R,nn)}function ke(g,C){var R=g.length;if(R)return C+=C<0?R:0,Yu(C,R)?g[C]:n}function Re(g,C,R){C.length?C=Qr(C,function(Ee){return lr(Ee)?function(Ye){return nl(Ye,Ee.length===1?Ee[0]:Ee)}:Ee}):C=[ra];var J=-1;C=Qr(C,ss(Xn()));var me=ie(g,function(Ee,Ye,ht){var bt=Qr(C,function(tn){return tn(Ee)});return{criteria:bt,index:++J,value:Ee}});return _p(me,function(Ee,Ye){return _g(Ee,Ye,R)})}function $e(g,C){return qe(g,C,function(R,J){return Me(g,J)})}function qe(g,C,R){for(var J=-1,me=C.length,Ee={};++J<me;){var Ye=C[J],ht=nl(g,Ye);R(ht,Ye)&&hn(Ee,ks(Ye,g),ht)}return Ee}function Ke(g){return function(C){return nl(C,g)}}function Je(g,C,R,J){var me=J?pv:Zo,Ee=-1,Ye=C.length,ht=g;for(g===C&&(C=ta(C)),R&&(ht=Qr(g,ss(R)));++Ee<Ye;)for(var bt=0,tn=C[Ee],nn=R?R(tn):tn;(bt=me(ht,nn,bt,J))>-1;)ht!==g&&Ko.call(ht,bt,1),Ko.call(g,bt,1);return g}function lt(g,C){for(var R=g?C.length:0,J=R-1;R--;){var me=C[R];if(R==J||me!==Ee){var Ee=me;Yu(me)?Ko.call(g,me,1):Xi(g,me)}}return g}function it(g,C){return g+Lc(Tp()*(C-g+1))}function xt(g,C,R,J){for(var me=-1,Ee=zi(Dh((C-g)/(R||1)),0),Ye=zt(Ee);Ee--;)Ye[J?Ee:++me]=g,g+=R;return Ye}function Ct(g,C){var R="";if(!g||C<1||C>tt)return R;do C%2&&(R+=g),C=Lc(C/2),C&&(g+=g);while(C);return R}function vt(g,C){return Xu(Gh(g,C,ra),g+"")}function $t(g){return qd(Vs(g))}function Nt(g,C){var R=Vs(g);return Gc(R,Fs(C,0,R.length))}function hn(g,C,R,J){if(!Bi(g))return g;C=ks(C,g);for(var me=-1,Ee=C.length,Ye=Ee-1,ht=g;ht!=null&&++me<Ee;){var bt=Il(C[me]),tn=R;if(bt==="__proto__"||bt==="constructor"||bt==="prototype")return g;if(me!=Ye){var nn=ht[bt];tn=J?J(nn,bt,ht):n,tn===n&&(tn=Bi(nn)?nn:Yu(C[me+1])?[]:{})}Yr(ht,bt,tn),ht=ht[bt]}return g}var on=vo?function(g,C){return vo.set(g,C),g}:ra,Xt=Lh?function(g,C){return Lh(g,"toString",{configurable:!0,enumerable:!1,value:y0(C),writable:!0})}:ra;function Dn(g){return Gc(Vs(g))}function Zn(g,C,R){var J=-1,me=g.length;C<0&&(C=-C>me?0:me+C),R=R>me?me:R,R<0&&(R+=me),me=C>R?0:R-C>>>0,C>>>=0;for(var Ee=zt(me);++J<me;)Ee[J]=g[J+C];return Ee}function Wn(g,C){var R;return tl(g,function(J,me,Ee){return R=C(J,me,Ee),!R}),!!R}function ni(g,C,R){var J=0,me=g==null?J:g.length;if(typeof C=="number"&&C===C&&me<=Dt){for(;J<me;){var Ee=J+me>>>1,Ye=g[Ee];Ye!==null&&!Ja(Ye)&&(R?Ye<=C:Ye<C)?J=Ee+1:me=Ee}return me}return zr(g,C,ra,R)}function zr(g,C,R,J){var me=0,Ee=g==null?0:g.length;if(Ee===0)return 0;C=R(C);for(var Ye=C!==C,ht=C===null,bt=Ja(C),tn=C===n;me<Ee;){var nn=Lc((me+Ee)/2),cn=R(g[nn]),In=cn!==n,Gn=cn===null,nr=cn===cn,Ir=Ja(cn);if(Ye)var rr=J||nr;else tn?rr=nr&&(J||In):ht?rr=nr&&In&&(J||!Gn):bt?rr=nr&&In&&!Gn&&(J||!Ir):Gn||Ir?rr=!1:rr=J?cn<=C:cn<C;rr?me=nn+1:Ee=nn}return qi(Ee,Ne)}function ui(g,C){for(var R=-1,J=g.length,me=0,Ee=[];++R<J;){var Ye=g[R],ht=C?C(Ye):Ye;if(!R||!xa(ht,bt)){var bt=ht;Ee[me++]=Ye===0?0:Ye}}return Ee}function si(g){return typeof g=="number"?g:Ja(g)?Tt:+g}function or(g){if(typeof g=="string")return g;if(lr(g))return Qr(g,or)+"";if(Ja(g))return Rp?Rp.call(g):"";var C=g+"";return C=="0"&&1/g==-1/0?"-0":C}function pr(g,C,R){var J=-1,me=fa,Ee=g.length,Ye=!0,ht=[],bt=ht;if(R)Ye=!1,me=Ru;else if(Ee>=a){var tn=C?null:kw(g);if(tn)return Sc(tn);Ye=!1,me=Xl,bt=new tr}else bt=C?[]:ht;e:for(;++J<Ee;){var nn=g[J],cn=C?C(nn):nn;if(nn=R||nn!==0?nn:0,Ye&&cn===cn){for(var In=bt.length;In--;)if(bt[In]===cn)continue e;C&&bt.push(cn),ht.push(nn)}else me(bt,cn,R)||(bt!==ht&&bt.push(cn),ht.push(nn))}return ht}function Xi(g,C){return C=ks(C,g),g=Qp(g,C),g==null||delete g[Il(rl(C))]}function Qi(g,C,R,J){return hn(g,C,R(nl(g,C)),J)}function Ji(g,C,R,J){for(var me=g.length,Ee=J?me:-1;(J?Ee--:++Ee<me)&&C(g[Ee],Ee,g););return R?Zn(g,J?0:Ee,J?Ee+1:me):Zn(g,J?Ee+1:0,J?me:Ee)}function Ps(g,C){var R=g;return R instanceof ur&&(R=R.value()),Ou(C,function(J,me){return me.func.apply(me.thisArg,mo([J],me.args))},R)}function Xa(g,C,R){var J=g.length;if(J<2)return J?pr(g[0]):[];for(var me=-1,Ee=zt(J);++me<J;)for(var Ye=g[me],ht=-1;++ht<J;)ht!=me&&(Ee[me]=Hu(Ee[me]||Ye,g[ht],C,R));return pr(fr(Ee,1),C,R)}function Al(g,C,R){for(var J=-1,me=g.length,Ee=C.length,Ye={};++J<me;){var ht=J<Ee?C[J]:n;R(Ye,g[J],ht)}return Ye}function bo(g){return ls(g)?g:[]}function xo(g){return typeof g=="function"?g:ra}function ks(g,C){return lr(g)?g:Hh(g,C)?[g]:Sg(Xr(g))}var qu=vt;function va(g,C,R){var J=g.length;return R=R===n?J:R,!C&&R>=J?g:Zn(g,C,R)}var _a=jd||function(g){return Wi.clearTimeout(g)};function wl(g,C){if(C)return g.slice();var R=g.length,J=og?og(R):new g.constructor(R);return g.copy(J),J}function Ao(g){var C=new g.constructor(g.byteLength);return new Nd(C).set(new Nd(g)),C}function Cl(g,C){var R=C?Ao(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function _i(g){var C=new g.constructor(g.source,oi.exec(g));return C.lastIndex=g.lastIndex,C}function ci(g){return Rc?ti(Rc.call(g)):{}}function Mi(g,C){var R=C?Ao(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function hi(g,C){if(g!==C){var R=g!==n,J=g===null,me=g===g,Ee=Ja(g),Ye=C!==n,ht=C===null,bt=C===C,tn=Ja(C);if(!ht&&!tn&&!Ee&&g>C||Ee&&Ye&&bt&&!ht&&!tn||J&&Ye&&bt||!R&&bt||!me)return 1;if(!J&&!Ee&&!tn&&g<C||tn&&R&&me&&!J&&!Ee||ht&&R&&me||!Ye&&me||!bt)return-1}return 0}function _g(g,C,R){for(var J=-1,me=g.criteria,Ee=C.criteria,Ye=me.length,ht=R.length;++J<Ye;){var bt=hi(me[J],Ee[J]);if(bt){if(J>=ht)return bt;var tn=R[J];return bt*(tn=="desc"?-1:1)}}return g.index-C.index}function ru(g,C,R,J){for(var me=-1,Ee=g.length,Ye=R.length,ht=-1,bt=C.length,tn=zi(Ee-Ye,0),nn=zt(bt+tn),cn=!J;++ht<bt;)nn[ht]=C[ht];for(;++me<Ye;)(cn||me<Ee)&&(nn[R[me]]=g[me]);for(;tn--;)nn[ht++]=g[me++];return nn}function bg(g,C,R,J){for(var me=-1,Ee=g.length,Ye=-1,ht=R.length,bt=-1,tn=C.length,nn=zi(Ee-ht,0),cn=zt(nn+tn),In=!J;++me<nn;)cn[me]=g[me];for(var Gn=me;++bt<tn;)cn[Gn+bt]=C[bt];for(;++Ye<ht;)(In||me<Ee)&&(cn[Gn+R[Ye]]=g[me++]);return cn}function ta(g,C){var R=-1,J=g.length;for(C||(C=zt(J));++R<J;)C[R]=g[R];return C}function Qa(g,C,R,J){var me=!R;R||(R={});for(var Ee=-1,Ye=C.length;++Ee<Ye;){var ht=C[Ee],bt=J?J(R[ht],g[ht],ht,R,g):n;bt===n&&(bt=g[ht]),me?el(R,ht,bt):Yr(R,ht,bt)}return R}function xg(g,C){return Qa(g,Mg(g),C)}function Ta(g,C){return Qa(g,$c(g),C)}function wo(g,C){return function(R,J){var me=lr(R)?kd:Kd,Ee=C?C():{};return me(R,g,Xn(J,2),Ee)}}function iu(g){return vt(function(C,R){var J=-1,me=R.length,Ee=me>1?R[me-1]:n,Ye=me>2?R[2]:n;for(Ee=g.length>3&&typeof Ee=="function"?(me--,Ee):n,Ye&&ba(R[0],R[1],Ye)&&(Ee=me<3?n:Ee,me=1),C=ti(C);++J<me;){var ht=R[J];ht&&g(C,ht,J,Ee)}return C})}function jp(g,C){return function(R,J){if(R==null)return R;if(!ka(R))return g(R,J);for(var me=R.length,Ee=C?me:-1,Ye=ti(R);(C?Ee--:++Ee<me)&&J(Ye[Ee],Ee,Ye)!==!1;);return R}}function jc(g){return function(C,R,J){for(var me=-1,Ee=ti(C),Ye=J(C),ht=Ye.length;ht--;){var bt=Ye[g?ht:++me];if(R(Ee[bt],bt,Ee)===!1)break}return C}}function Up(g,C,R){var J=C&O,me=$p(g);function Ee(){var Ye=this&&this!==Wi&&this instanceof Ee?me:g;return Ye.apply(J?R:this,arguments)}return Ee}function nf(g){return function(C){C=Xr(C);var R=Ql(C)?Ma(C):n,J=R?R[0]:C.charAt(0),me=R?va(R,1).join(""):C.slice(1);return J[g]()+me}}function $h(g){return function(C){return Ou(Sb(na(C).replace(Ho,"")),g,"")}}function $p(g){return function(){var C=arguments;switch(C.length){case 0:return new g;case 1:return new g(C[0]);case 2:return new g(C[0],C[1]);case 3:return new g(C[0],C[1],C[2]);case 4:return new g(C[0],C[1],C[2],C[3]);case 5:return new g(C[0],C[1],C[2],C[3],C[4]);case 6:return new g(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new g(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var R=Uu(g.prototype),J=g.apply(R,C);return Bi(J)?J:R}}function xv(g,C,R){var J=$p(g);function me(){for(var Ee=arguments.length,Ye=zt(Ee),ht=Ee,bt=rf(me);ht--;)Ye[ht]=arguments[ht];var tn=Ee<3&&Ye[0]!==bt&&Ye[Ee-1]!==bt?[]:go(Ye,bt);if(Ee-=tn.length,Ee<R)return Cv(g,C,Hp,me.placeholder,n,Ye,tn,n,n,R-Ee);var nn=this&&this!==Wi&&this instanceof me?J:g;return gs(nn,this,Ye)}return me}function y_(g){return function(C,R,J){var me=ti(C);if(!ka(C)){var Ee=Xn(R,3);C=ae(C),R=function(ht){return Ee(me[ht],ht,me)}}var Ye=g(C,R,J);return Ye>-1?me[Ee?C[Ye]:Ye]:n}}function Ag(g){return as(function(C){var R=C.length,J=R,me=Sa.prototype.thru;for(g&&C.reverse();J--;){var Ee=C[J];if(typeof Ee!="function")throw new ys(l);if(me&&!Ye&&Kp(Ee)=="wrapper")var Ye=new Sa([],!0)}for(J=Ye?J:R;++J<R;){Ee=C[J];var ht=Kp(Ee),bt=ht=="wrapper"?kv(Ee):n;bt&&Si(bt[0])&&bt[1]==(Y|B|Z|W)&&!bt[4].length&&bt[9]==1?Ye=Ye[Kp(bt[0])].apply(Ye,bt[3]):Ye=Ee.length==1&&Si(Ee)?Ye[ht]():Ye.thru(Ee)}return function(){var tn=arguments,nn=tn[0];if(Ye&&tn.length==1&&lr(nn))return Ye.plant(nn).value();for(var cn=0,In=R?C[cn].apply(this,tn):nn;++cn<R;)In=C[cn].call(this,In);return In}})}function Hp(g,C,R,J,me,Ee,Ye,ht,bt,tn){var nn=C&Y,cn=C&O,In=C&V,Gn=C&(B|U),nr=C&H,Ir=In?n:$p(g);function rr(){for(var Fr=arguments.length,Hr=zt(Fr),kl=Fr;kl--;)Hr[kl]=arguments[kl];if(Gn)var Eo=rf(rr),Ll=Rd(Hr,Eo);if(J&&(Hr=ru(Hr,J,me,Gn)),Ee&&(Hr=bg(Hr,Ee,Ye,Gn)),Fr-=Ll,Gn&&Fr<tn){var Rs=go(Hr,Eo);return Cv(g,C,Hp,rr.placeholder,R,Hr,Rs,ht,bt,tn-Fr)}var tc=cn?R:this,Jh=In?tc[g]:g;return Fr=Hr.length,ht?Hr=of(Hr,ht):nr&&Fr>1&&Hr.reverse(),nn&&bt<Fr&&(Hr.length=bt),this&&this!==Wi&&this instanceof rr&&(Jh=Ir||$p(Jh)),Jh.apply(tc,Hr)}return rr}function Av(g,C){return function(R,J){return Qd(R,g,C(J),{})}}function su(g,C){return function(R,J){var me;if(R===n&&J===n)return C;if(R!==n&&(me=R),J!==n){if(me===n)return J;typeof R=="string"||typeof J=="string"?(R=or(R),J=or(J)):(R=si(R),J=si(J)),me=g(R,J)}return me}}function wv(g){return as(function(C){return C=Qr(C,ss(Xn())),vt(function(R){var J=this;return g(C,function(me){return gs(me,J,R)})})})}function Uc(g,C){C=C===n?" ":or(C);var R=C.length;if(R<2)return R?Ct(C,g):C;var J=Ct(C,Dh(g/ar(C)));return Ql(C)?va(Ma(J),0,g).join(""):J.slice(0,g)}function wg(g,C,R,J){var me=C&O,Ee=$p(g);function Ye(){for(var ht=-1,bt=arguments.length,tn=-1,nn=J.length,cn=zt(nn+bt),In=this&&this!==Wi&&this instanceof Ye?Ee:g;++tn<nn;)cn[tn]=J[tn];for(;bt--;)cn[tn++]=arguments[++ht];return gs(In,me?R:this,cn)}return Ye}function Gp(g){return function(C,R,J){return J&&typeof J!="number"&&ba(C,R,J)&&(R=J=n),C=Sl(C),R===n?(R=C,C=0):R=Sl(R),J=J===n?C<R?1:-1:Sl(J),xt(C,R,J,g)}}function Zp(g){return function(C,R){return typeof C=="string"&&typeof R=="string"||(C=Da(C),R=Da(R)),g(C,R)}}function Cv(g,C,R,J,me,Ee,Ye,ht,bt,tn){var nn=C&B,cn=nn?Ye:n,In=nn?n:Ye,Gn=nn?Ee:n,nr=nn?n:Ee;C|=nn?Z:te,C&=~(nn?te:Z),C&z||(C&=-4);var Ir=[g,C,me,Gn,cn,nr,In,ht,bt,tn],rr=R.apply(n,Ir);return Si(g)&&C_(rr,Ir),rr.placeholder=J,I_(rr,g,C)}function Iv(g){var C=Kr[g];return function(R,J){if(R=Da(R),J=J==null?0:qi(hr(J),292),J&&Dc(R)){var me=(Xr(R)+"e").split("e"),Ee=C(me[0]+"e"+(+me[1]+J));return me=(Xr(Ee)+"e").split("e"),+(me[0]+"e"+(+me[1]-J))}return C(R)}}var kw=Jl&&1/Sc(new Jl([,-0]))[1]==Be?function(g){return new Jl(g)}:So;function Mv(g){return function(C){var R=vs(C);return R==$?Mc(C):R==at?Ap(C):bp(C,g(C))}}function au(g,C,R,J,me,Ee,Ye,ht){var bt=C&V;if(!bt&&typeof g!="function")throw new ys(l);var tn=J?J.length:0;if(tn||(C&=-97,J=me=n),Ye=Ye===n?Ye:zi(hr(Ye),0),ht=ht===n?ht:hr(ht),tn-=me?me.length:0,C&te){var nn=J,cn=me;J=me=n}var In=bt?n:kv(g),Gn=[g,C,R,J,me,nn,cn,Ee,Ye,ht];if(In&&w_(Gn,In),g=Gn[0],C=Gn[1],R=Gn[2],J=Gn[3],me=Gn[4],ht=Gn[9]=Gn[9]===n?bt?0:g.length:zi(Gn[9]-tn,0),!ht&&C&(B|U)&&(C&=-25),!C||C==O)var nr=Up(g,C,R);else C==B||C==U?nr=xv(g,C,ht):(C==Z||C==(O|Z))&&!me.length?nr=wg(g,C,R,J):nr=Hp.apply(n,Gn);var Ir=In?on:C_;return I_(Ir(nr,Gn),g,C)}function Sv(g,C,R,J){return g===n||xa(g,qo[R])&&!Dr.call(J,R)?C:g}function v_(g,C,R,J,me,Ee){return Bi(g)&&Bi(C)&&(Ee.set(C,g),_e(g,C,n,v_,Ee),Ee.delete(C)),g}function Ev(g){return qh(g)?n:g}function Tv(g,C,R,J,me,Ee){var Ye=R&P,ht=g.length,bt=C.length;if(ht!=bt&&!(Ye&&bt>ht))return!1;var tn=Ee.get(g),nn=Ee.get(C);if(tn&&nn)return tn==C&&nn==g;var cn=-1,In=!0,Gn=R&L?new tr:n;for(Ee.set(g,C),Ee.set(C,g);++cn<ht;){var nr=g[cn],Ir=C[cn];if(J)var rr=Ye?J(Ir,nr,cn,C,g,Ee):J(nr,Ir,cn,g,C,Ee);if(rr!==n){if(rr)continue;In=!1;break}if(Gn){if(!qa(C,function(Fr,Hr){if(!Xl(Gn,Hr)&&(nr===Fr||me(nr,Fr,R,J,Ee)))return Gn.push(Hr)})){In=!1;break}}else if(!(nr===Ir||me(nr,Ir,R,J,Ee))){In=!1;break}}return Ee.delete(g),Ee.delete(C),In}function Pv(g,C,R,J,me,Ee,Ye){switch(R){case pn:if(g.byteLength!=C.byteLength||g.byteOffset!=C.byteOffset)return!1;g=g.buffer,C=C.buffer;case dn:return!(g.byteLength!=C.byteLength||!Ee(new Nd(g),new Nd(C)));case ft:case ot:case Te:return xa(+g,+C);case Lt:return g.name==C.name&&g.message==C.message;case rt:case Ve:return g==C+"";case $:var ht=Mc;case at:var bt=J&P;if(ht||(ht=Sc),g.size!=C.size&&!bt)return!1;var tn=Ye.get(g);if(tn)return tn==C;J|=L,Ye.set(g,C);var nn=Tv(ht(g),ht(C),J,me,Ee,Ye);return Ye.delete(g),nn;case Mt:if(Rc)return Rc.call(g)==Rc.call(C)}return!1}function Wp(g,C,R,J,me,Ee){var Ye=R&P,ht=Cg(g),bt=ht.length,tn=Cg(C),nn=tn.length;if(bt!=nn&&!Ye)return!1;for(var cn=bt;cn--;){var In=ht[cn];if(!(Ye?In in C:Dr.call(C,In)))return!1}var Gn=Ee.get(g),nr=Ee.get(C);if(Gn&&nr)return Gn==C&&nr==g;var Ir=!0;Ee.set(g,C),Ee.set(C,g);for(var rr=Ye;++cn<bt;){In=ht[cn];var Fr=g[In],Hr=C[In];if(J)var kl=Ye?J(Hr,Fr,In,C,g,Ee):J(Fr,Hr,In,g,C,Ee);if(!(kl===n?Fr===Hr||me(Fr,Hr,R,J,Ee):kl)){Ir=!1;break}rr||(rr=In=="constructor")}if(Ir&&!rr){var Eo=g.constructor,Ll=C.constructor;Eo!=Ll&&"constructor"in g&&"constructor"in C&&!(typeof Eo=="function"&&Eo instanceof Eo&&typeof Ll=="function"&&Ll instanceof Ll)&&(Ir=!1)}return Ee.delete(g),Ee.delete(C),Ir}function as(g){return Xu(Gh(g,n,Uv),g+"")}function Cg(g){return Nc(g,ae,Mg)}function qp(g){return Nc(g,we,$c)}var kv=vo?function(g){return vo.get(g)}:So;function Kp(g){for(var C=g.name+"",R=eu[C],J=Dr.call(eu,C)?R.length:0;J--;){var me=R[J],Ee=me.func;if(Ee==null||Ee==g)return me.name}return C}function rf(g){var C=Dr.call(Ce,"placeholder")?Ce:g;return C.placeholder}function Xn(){var g=Ce.iteratee||Hg;return g=g===Hg?D:g,arguments.length?g(arguments[0],arguments[1]):g}function Ig(g,C){var R=g.__data__;return Fw(C)?R[typeof C=="string"?"string":"hash"]:R.map}function Lv(g){for(var C=ae(g),R=C.length;R--;){var J=C[R],me=g[J];C[R]=[J,me,Yp(me)]}return C}function Ku(g,C){var R=ng(g,C);return m(R)?R:n}function Dv(g){var C=Dr.call(g,yl),R=g[yl];try{g[yl]=n;var J=!0}catch{}var me=Tc.call(g);return J&&(C?g[yl]=R:delete g[yl]),me}var Mg=Mp?function(g){return g==null?[]:(g=ti(g),po(Mp(g),function(C){return Vd.call(g,C)}))}:z2,$c=Mp?function(g){for(var C=[];g;)mo(C,Mg(g)),g=Pc(g);return C}:z2,vs=Yi;(vl&&vs(new vl(new ArrayBuffer(1)))!=pn||zs&&vs(new zs)!=$||Oh&&vs(Oh.resolve())!=pe||Jl&&vs(new Jl)!=at||ju&&vs(new ju)!=At)&&(vs=function(g){var C=Yi(g),R=C==ye?g.constructor:n,J=R?Zc(R):"";if(J)switch(J){case Pp:return pn;case kp:return $;case ug:return pe;case Lp:return at;case Dp:return At}return C});function Lw(g,C,R){for(var J=-1,me=R.length;++J<me;){var Ee=R[J],Ye=Ee.size;switch(Ee.type){case"drop":g+=Ye;break;case"dropRight":C-=Ye;break;case"take":C=qi(C,g+Ye);break;case"takeRight":g=zi(g,C-Ye);break}}return{start:g,end:C}}function Dw(g){var C=g.match(wr);return C?C[1].split(Ht):[]}function __(g,C,R){C=ks(C,g);for(var J=-1,me=C.length,Ee=!1;++J<me;){var Ye=Il(C[J]);if(!(Ee=g!=null&&R(g,Ye)))break;g=g[Ye]}return Ee||++J!=me?Ee:(me=g==null?0:g.length,!!me&&Wh(me)&&Yu(Ye,me)&&(lr(g)||qc(g)))}function Rw(g){var C=g.length,R=new g.constructor(C);return C&&typeof g[0]=="string"&&Dr.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function b_(g){return typeof g.constructor=="function"&&!Hc(g)?Uu(Pc(g)):{}}function Ow(g,C,R){var J=g.constructor;switch(C){case dn:return Ao(g);case ft:case ot:return new J(+g);case pn:return Cl(g,R);case ct:case mt:case _t:case jt:case qt:case Cn:case Xe:case de:case ge:return Mi(g,R);case $:return new J;case Te:case Ve:return new J(g);case rt:return _i(g);case at:return new J;case Mt:return ci(g)}}function zw(g,C){var R=C.length;if(!R)return g;var J=R-1;return C[J]=(R>1?"& ":"")+C[J],C=C.join(R>2?", ":" "),g.replace(Ur,`{
/* [wrapped with `+C+`] */
`)}function Rv(g){return lr(g)||qc(g)||!!(kc&&g&&g[kc])}function Yu(g,C){var R=typeof g;return C=C??tt,!!C&&(R=="number"||R!="symbol"&&$l.test(g))&&g>-1&&g%1==0&&g<C}function ba(g,C,R){if(!Bi(R))return!1;var J=typeof C;return(J=="number"?ka(R)&&Yu(C,R.length):J=="string"&&C in R)?xa(R[C],g):!1}function Hh(g,C){if(lr(g))return!1;var R=typeof g;return R=="number"||R=="symbol"||R=="boolean"||g==null||Ja(g)?!0:gn.test(g)||!mn.test(g)||C!=null&&g in ti(C)}function Fw(g){var C=typeof g;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?g!=="__proto__":g===null}function Si(g){var C=Kp(g),R=Ce[C];if(typeof R!="function"||!(C in ur.prototype))return!1;if(g===R)return!0;var J=kv(R);return!!J&&g===J[0]}function sf(g){return!!Ip&&Ip in g}var x_=Bu?Io:F2;function Hc(g){var C=g&&g.constructor,R=typeof C=="function"&&C.prototype||qo;return g===R}function Yp(g){return g===g&&!Bi(g)}function af(g,C){return function(R){return R==null?!1:R[g]===C&&(C!==n||g in ti(R))}}function A_(g){var C=zg(g,function(J){return R.size===y&&R.clear(),J}),R=C.cache;return C}function w_(g,C){var R=g[1],J=C[1],me=R|J,Ee=me<(O|V|Y),Ye=J==Y&&R==B||J==Y&&R==W&&g[7].length<=C[8]||J==(Y|W)&&C[7].length<=C[8]&&R==B;if(!(Ee||Ye))return g;J&O&&(g[2]=C[2],me|=R&O?0:z);var ht=C[3];if(ht){var bt=g[3];g[3]=bt?ru(bt,ht,C[4]):ht,g[4]=bt?go(g[3],x):C[4]}return ht=C[5],ht&&(bt=g[5],g[5]=bt?bg(bt,ht,C[6]):ht,g[6]=bt?go(g[5],x):C[6]),ht=C[7],ht&&(g[7]=ht),J&Y&&(g[8]=g[8]==null?C[8]:qi(g[8],C[8])),g[9]==null&&(g[9]=C[9]),g[0]=C[0],g[1]=me,g}function Xp(g){var C=[];if(g!=null)for(var R in ti(g))C.push(R);return C}function Ov(g){return Tc.call(g)}function Gh(g,C,R){return C=zi(C===n?g.length-1:C,0),function(){for(var J=arguments,me=-1,Ee=zi(J.length-C,0),Ye=zt(Ee);++me<Ee;)Ye[me]=J[C+me];me=-1;for(var ht=zt(C+1);++me<C;)ht[me]=J[me];return ht[C]=R(Ye),gs(g,this,ht)}}function Qp(g,C){return C.length<2?g:nl(g,Zn(C,0,-1))}function of(g,C){for(var R=g.length,J=qi(C.length,R),me=ta(g);J--;){var Ee=C[J];g[J]=Yu(Ee,R)?me[Ee]:n}return g}function Zh(g,C){if(!(C==="constructor"&&typeof g[C]=="function")&&C!="__proto__")return g[C]}var C_=zv(on),lf=$d||function(g,C){return Wi.setTimeout(g,C)},Xu=zv(Xt);function I_(g,C,R){var J=C+"";return Xu(g,zw(J,Bw(Dw(J),R)))}function zv(g){var C=0,R=0;return function(){var J=Rh(),me=ce-(J-R);if(R=J,me>0){if(++C>=Q)return arguments[0]}else C=0;return g.apply(n,arguments)}}function Gc(g,C){var R=-1,J=g.length,me=J-1;for(C=C===n?J:C;++R<C;){var Ee=it(R,me),Ye=g[Ee];g[Ee]=g[R],g[R]=Ye}return g.length=C,g}var Sg=A_(function(g){var C=[];return g.charCodeAt(0)===46&&C.push(""),g.replace(Un,function(R,J,me,Ee){C.push(me?Ee.replace(Ws,"$1"):J||R)}),C});function Il(g){if(typeof g=="string"||Ja(g))return g;var C=g+"";return C=="0"&&1/g==-1/0?"-0":C}function Zc(g){if(g!=null){try{return kh.call(g)}catch{}try{return g+""}catch{}}return""}function Bw(g,C){return da(Bt,function(R){var J="_."+R[0];C&R[1]&&!fa(g,J)&&g.push(J)}),g.sort()}function M_(g){if(g instanceof ur)return g.clone();var C=new Sa(g.__wrapped__,g.__chain__);return C.__actions__=ta(g.__actions__),C.__index__=g.__index__,C.__values__=g.__values__,C}function Nw(g,C,R){(R?ba(g,C,R):C===n)?C=1:C=zi(hr(C),0);var J=g==null?0:g.length;if(!J||C<1)return[];for(var me=0,Ee=0,Ye=zt(Dh(J/C));me<J;)Ye[Ee++]=Zn(g,me,me+=C);return Ye}function Vw(g){for(var C=-1,R=g==null?0:g.length,J=0,me=[];++C<R;){var Ee=g[C];Ee&&(me[J++]=Ee)}return me}function jw(){var g=arguments.length;if(!g)return[];for(var C=zt(g-1),R=arguments[0],J=g;J--;)C[J-1]=arguments[J];return mo(lr(R)?ta(R):[R],fr(C,1))}var Fv=vt(function(g,C){return ls(g)?Hu(g,fr(C,1,ls,!0)):[]}),S_=vt(function(g,C){var R=rl(C);return ls(R)&&(R=n),ls(g)?Hu(g,fr(C,1,ls,!0),Xn(R,2)):[]}),Bv=vt(function(g,C){var R=rl(C);return ls(R)&&(R=n),ls(g)?Hu(g,fr(C,1,ls,!0),n,R):[]});function E_(g,C,R){var J=g==null?0:g.length;return J?(C=R||C===n?1:hr(C),Zn(g,C<0?0:C,J)):[]}function Nv(g,C,R){var J=g==null?0:g.length;return J?(C=R||C===n?1:hr(C),C=J-C,Zn(g,0,C<0?0:C)):[]}function T_(g,C){return g&&g.length?Ji(g,Xn(C,3),!0,!0):[]}function P_(g,C){return g&&g.length?Ji(g,Xn(C,3),!0):[]}function Eg(g,C,R,J){var me=g==null?0:g.length;return me?(R&&typeof R!="number"&&ba(g,C,R)&&(R=0,J=me),zc(g,C,R,J)):[]}function Vv(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=R==null?0:hr(R);return me<0&&(me=zi(J+me,0)),Eh(g,Xn(C,3),me)}function jv(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=J-1;return R!==n&&(me=hr(R),me=R<0?zi(J+me,0):qi(me,J-1)),Eh(g,Xn(C,3),me,!0)}function Uv(g){var C=g==null?0:g.length;return C?fr(g,1):[]}function Jp(g){var C=g==null?0:g.length;return C?fr(g,Be):[]}function Uw(g,C){var R=g==null?0:g.length;return R?(C=C===n?1:hr(C),fr(g,C)):[]}function $v(g){for(var C=-1,R=g==null?0:g.length,J={};++C<R;){var me=g[C];J[me[0]]=me[1]}return J}function uf(g){return g&&g.length?g[0]:n}function Hv(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=R==null?0:hr(R);return me<0&&(me=zi(J+me,0)),Zo(g,C,me)}function $w(g){var C=g==null?0:g.length;return C?Zn(g,0,-1):[]}var Hw=vt(function(g){var C=Qr(g,bo);return C.length&&C[0]===g[0]?Uh(C):[]}),k_=vt(function(g){var C=rl(g),R=Qr(g,bo);return C===rl(R)?C=n:R.pop(),R.length&&R[0]===g[0]?Uh(R,Xn(C,2)):[]}),L_=vt(function(g){var C=rl(g),R=Qr(g,bo);return C=typeof C=="function"?C:n,C&&R.pop(),R.length&&R[0]===g[0]?Uh(R,n,C):[]});function Gw(g,C){return g==null?"":Hd.call(g,C)}function rl(g){var C=g==null?0:g.length;return C?g[C-1]:n}function em(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=J;return R!==n&&(me=hr(R),me=me<0?zi(J+me,0):qi(me,J-1)),C===C?wp(g,C,me):Eh(g,Yl,me,!0)}function D_(g,C){return g&&g.length?ke(g,hr(C)):n}var Zw=vt(R_);function R_(g,C){return g&&g.length&&C&&C.length?Je(g,C):g}function Ww(g,C,R){return g&&g.length&&C&&C.length?Je(g,C,Xn(R,2)):g}function qw(g,C,R){return g&&g.length&&C&&C.length?Je(g,C,n,R):g}var Kw=as(function(g,C){var R=g==null?0:g.length,J=jh(g,C);return lt(g,Qr(C,function(me){return Yu(me,R)?+me:me}).sort(hi)),J});function Yw(g,C){var R=[];if(!(g&&g.length))return R;var J=-1,me=[],Ee=g.length;for(C=Xn(C,3);++J<Ee;){var Ye=g[J];C(Ye,J,g)&&(R.push(Ye),me.push(J))}return lt(g,me),R}function Tg(g){return g==null?g:Fi.call(g)}function Gv(g,C,R){var J=g==null?0:g.length;return J?(R&&typeof R!="number"&&ba(g,C,R)?(C=0,R=J):(C=C==null?0:hr(C),R=R===n?J:hr(R)),Zn(g,C,R)):[]}function O_(g,C){return ni(g,C)}function z_(g,C,R){return zr(g,C,Xn(R,2))}function F_(g,C){var R=g==null?0:g.length;if(R){var J=ni(g,C);if(J<R&&xa(g[J],C))return J}return-1}function Xw(g,C){return ni(g,C,!0)}function Pg(g,C,R){return zr(g,C,Xn(R,2),!0)}function Qw(g,C){var R=g==null?0:g.length;if(R){var J=ni(g,C,!0)-1;if(xa(g[J],C))return J}return-1}function B_(g){return g&&g.length?ui(g):[]}function Jw(g,C){return g&&g.length?ui(g,Xn(C,2)):[]}function e2(g){var C=g==null?0:g.length;return C?Zn(g,1,C):[]}function t2(g,C,R){return g&&g.length?(C=R||C===n?1:hr(C),Zn(g,0,C<0?0:C)):[]}function N_(g,C,R){var J=g==null?0:g.length;return J?(C=R||C===n?1:hr(C),C=J-C,Zn(g,C<0?0:C,J)):[]}function n2(g,C){return g&&g.length?Ji(g,Xn(C,3),!1,!0):[]}function r2(g,C){return g&&g.length?Ji(g,Xn(C,3)):[]}var tm=vt(function(g){return pr(fr(g,1,ls,!0))}),V_=vt(function(g){var C=rl(g);return ls(C)&&(C=n),pr(fr(g,1,ls,!0),Xn(C,2))}),Zv=vt(function(g){var C=rl(g);return C=typeof C=="function"?C:n,pr(fr(g,1,ls,!0),n,C)});function j_(g){return g&&g.length?pr(g):[]}function os(g,C){return g&&g.length?pr(g,Xn(C,2)):[]}function Wv(g,C){return C=typeof C=="function"?C:n,g&&g.length?pr(g,n,C):[]}function qv(g){if(!(g&&g.length))return[];var C=0;return g=po(g,function(R){if(ls(R))return C=zi(R.length,C),!0}),Ph(C,function(R){return Qr(g,Ld(R))})}function Kv(g,C){if(!(g&&g.length))return[];var R=qv(g);return C==null?R:Qr(R,function(J){return gs(C,n,J)})}var Yv=vt(function(g,C){return ls(g)?Hu(g,C):[]}),Xv=vt(function(g){return Xa(po(g,ls))}),i2=vt(function(g){var C=rl(g);return ls(C)&&(C=n),Xa(po(g,ls),Xn(C,2))}),s2=vt(function(g){var C=rl(g);return C=typeof C=="function"?C:n,Xa(po(g,ls),n,C)}),a2=vt(qv);function o2(g,C){return Al(g||[],C||[],Yr)}function U_(g,C){return Al(g||[],C||[],hn)}var Pa=vt(function(g){var C=g.length,R=C>1?g[C-1]:n;return R=typeof R=="function"?(g.pop(),R):n,Kv(g,R)});function kg(g){var C=Ce(g);return C.__chain__=!0,C}function $_(g,C){return C(g),g}function Ml(g,C){return C(g)}var Lg=as(function(g){var C=g.length,R=C?g[0]:0,J=this.__wrapped__,me=function(Ee){return jh(Ee,g)};return C>1||this.__actions__.length||!(J instanceof ur)||!Yu(R)?this.thru(me):(J=J.slice(R,+R+(C?1:0)),J.__actions__.push({func:Ml,args:[me],thisArg:n}),new Sa(J,this.__chain__).thru(function(Ee){return C&&!Ee.length&&Ee.push(n),Ee}))});function nm(){return kg(this)}function cf(){return new Sa(this.value(),this.__chain__)}function Dg(){this.__values__===n&&(this.__values__=pf(this.value()));var g=this.__index__>=this.__values__.length,C=g?n:this.__values__[this.__index__++];return{done:g,value:C}}function Rg(){return this}function l2(g){for(var C,R=this;R instanceof zh;){var J=M_(R);J.__index__=0,J.__values__=n,C?me.__wrapped__=J:C=J;var me=J;R=R.__wrapped__}return me.__wrapped__=g,C}function u2(){var g=this.__wrapped__;if(g instanceof ur){var C=g;return this.__actions__.length&&(C=new ur(this)),C=C.reverse(),C.__actions__.push({func:Ml,args:[Tg],thisArg:n}),new Sa(C,this.__chain__)}return this.thru(Tg)}function H_(){return Ps(this.__wrapped__,this.__actions__)}var G_=wo(function(g,C,R){Dr.call(g,R)?++g[R]:el(g,R,1)});function c2(g,C,R){var J=lr(g)?Sh:vg;return R&&ba(g,C,R)&&(C=n),J(g,Xn(C,3))}function Z_(g,C){var R=lr(g)?po:Fc;return R(g,Xn(C,3))}var W_=y_(Vv),Qv=y_(jv);function Jv(g,C){return fr(rm(g,C),1)}function h2(g,C){return fr(rm(g,C),Be)}function q_(g,C,R){return R=R===n?1:hr(R),fr(rm(g,C),R)}function K_(g,C){var R=lr(g)?da:tl;return R(g,Xn(C,3))}function Y_(g,C){var R=lr(g)?dv:ea;return R(g,Xn(C,3))}var d2=wo(function(g,C,R){Dr.call(g,R)?g[R].push(C):el(g,R,[C])});function f2(g,C,R,J){g=ka(g)?g:Vs(g),R=R&&!J?hr(R):0;var me=g.length;return R<0&&(R=zi(me+R,0)),jg(g)?R<=me&&g.indexOf(C,R)>-1:!!me&&Zo(g,C,R)>-1}var p2=vt(function(g,C,R){var J=-1,me=typeof C=="function",Ee=ka(g)?zt(g.length):[];return tl(g,function(Ye){Ee[++J]=me?gs(C,Ye,R):_o(Ye,C,R)}),Ee}),X_=wo(function(g,C,R){el(g,R,C)});function rm(g,C){var R=lr(g)?Qr:ie;return R(g,Xn(C,3))}function im(g,C,R,J){return g==null?[]:(lr(C)||(C=C==null?[]:[C]),R=J?n:R,lr(R)||(R=R==null?[]:[R]),Re(g,C,R))}var ou=wo(function(g,C,R){g[R?0:1].push(C)},function(){return[[],[]]});function Wc(g,C,R){var J=lr(g)?Ou:vp,me=arguments.length<3;return J(g,Xn(C,4),R,me,tl)}function Q_(g,C,R){var J=lr(g)?mp:vp,me=arguments.length<3;return J(g,Xn(C,4),R,me,ea)}function e0(g,C){var R=lr(g)?po:Fc;return R(g,Fg(Xn(C,3)))}function m2(g){var C=lr(g)?qd:$t;return C(g)}function g2(g,C,R){(R?ba(g,C,R):C===n)?C=1:C=hr(C);var J=lr(g)?yg:Nt;return J(g,C)}function Og(g){var C=lr(g)?bv:Dn;return C(g)}function t0(g){if(g==null)return 0;if(ka(g))return jg(g)?ar(g):g.length;var C=vs(g);return C==$||C==at?g.size:N(g).length}function y2(g,C,R){var J=lr(g)?qa:Wn;return R&&ba(g,C,R)&&(C=n),J(g,Xn(C,3))}var n0=vt(function(g,C){if(g==null)return[];var R=C.length;return R>1&&ba(g,C[0],C[1])?C=[]:R>2&&ba(C[0],C[1],C[2])&&(C=[C[0]]),Re(g,fr(C,1),[])}),hf=Ud||function(){return Wi.Date.now()};function df(g,C){if(typeof C!="function")throw new ys(l);return g=hr(g),function(){if(--g<1)return C.apply(this,arguments)}}function r0(g,C,R){return C=R?n:C,C=g&&C==null?g.length:C,au(g,Y,n,n,n,n,C)}function i0(g,C){var R;if(typeof C!="function")throw new ys(l);return g=hr(g),function(){return--g>0&&(R=C.apply(this,arguments)),g<=1&&(C=n),R}}var sm=vt(function(g,C,R){var J=O;if(R.length){var me=go(R,rf(sm));J|=Z}return au(g,J,C,R,me)}),s0=vt(function(g,C,R){var J=O|V;if(R.length){var me=go(R,rf(s0));J|=Z}return au(C,J,g,R,me)});function am(g,C,R){C=R?n:C;var J=au(g,B,n,n,n,n,n,C);return J.placeholder=am.placeholder,J}function a0(g,C,R){C=R?n:C;var J=au(g,U,n,n,n,n,n,C);return J.placeholder=a0.placeholder,J}function J_(g,C,R){var J,me,Ee,Ye,ht,bt,tn=0,nn=!1,cn=!1,In=!0;if(typeof g!="function")throw new ys(l);C=Da(C)||0,Bi(R)&&(nn=!!R.leading,cn="maxWait"in R,Ee=cn?zi(Da(R.maxWait)||0,C):Ee,In="trailing"in R?!!R.trailing:In);function Gn(Rs){var tc=J,Jh=me;return J=me=n,tn=Rs,Ye=g.apply(Jh,tc),Ye}function nr(Rs){return tn=Rs,ht=lf(Fr,C),nn?Gn(Rs):Ye}function Ir(Rs){var tc=Rs-bt,Jh=Rs-tn,bE=C-tc;return cn?qi(bE,Ee-Jh):bE}function rr(Rs){var tc=Rs-bt,Jh=Rs-tn;return bt===n||tc>=C||tc<0||cn&&Jh>=Ee}function Fr(){var Rs=hf();if(rr(Rs))return Hr(Rs);ht=lf(Fr,Ir(Rs))}function Hr(Rs){return ht=n,In&&J?Gn(Rs):(J=me=n,Ye)}function kl(){ht!==n&&_a(ht),tn=0,J=bt=me=ht=n}function Eo(){return ht===n?Ye:Hr(hf())}function Ll(){var Rs=hf(),tc=rr(Rs);if(J=arguments,me=this,bt=Rs,tc){if(ht===n)return nr(bt);if(cn)return _a(ht),ht=lf(Fr,C),Gn(bt)}return ht===n&&(ht=lf(Fr,C)),Ye}return Ll.cancel=kl,Ll.flush=Eo,Ll}var v2=vt(function(g,C){return Oc(g,1,C)}),eb=vt(function(g,C,R){return Oc(g,Da(C)||0,R)});function _2(g){return au(g,H)}function zg(g,C){if(typeof g!="function"||C!=null&&typeof C!="function")throw new ys(l);var R=function(){var J=arguments,me=C?C.apply(this,J):J[0],Ee=R.cache;if(Ee.has(me))return Ee.get(me);var Ye=g.apply(this,J);return R.cache=Ee.set(me,Ye)||Ee,Ye};return R.cache=new(zg.Cache||Qo),R}zg.Cache=Qo;function Fg(g){if(typeof g!="function")throw new ys(l);return function(){var C=arguments;switch(C.length){case 0:return!g.call(this);case 1:return!g.call(this,C[0]);case 2:return!g.call(this,C[0],C[1]);case 3:return!g.call(this,C[0],C[1],C[2])}return!g.apply(this,C)}}function b2(g){return i0(2,g)}var x2=qu(function(g,C){C=C.length==1&&lr(C[0])?Qr(C[0],ss(Xn())):Qr(fr(C,1),ss(Xn()));var R=C.length;return vt(function(J){for(var me=-1,Ee=qi(J.length,R);++me<Ee;)J[me]=C[me].call(this,J[me]);return gs(g,this,J)})}),om=vt(function(g,C){var R=go(C,rf(om));return au(g,Z,n,C,R)}),Qu=vt(function(g,C){var R=go(C,rf(Qu));return au(g,te,n,C,R)}),tb=as(function(g,C){return au(g,W,n,n,n,C)});function nb(g,C){if(typeof g!="function")throw new ys(l);return C=C===n?C:hr(C),vt(g,C)}function rb(g,C){if(typeof g!="function")throw new ys(l);return C=C==null?0:zi(hr(C),0),vt(function(R){var J=R[C],me=va(R,0,C);return J&&mo(me,J),gs(g,this,me)})}function ib(g,C,R){var J=!0,me=!0;if(typeof g!="function")throw new ys(l);return Bi(R)&&(J="leading"in R?!!R.leading:J,me="trailing"in R?!!R.trailing:me),J_(g,C,{leading:J,maxWait:C,trailing:me})}function sb(g){return r0(g,1)}function o0(g,C){return om(xo(C),g)}function ab(){if(!arguments.length)return[];var g=arguments[0];return lr(g)?g:[g]}function lm(g){return Js(g,A)}function ob(g,C){return C=typeof C=="function"?C:n,Js(g,A,C)}function l0(g){return Js(g,b|A)}function lb(g,C){return C=typeof C=="function"?C:n,Js(g,b|A,C)}function Co(g,C){return C==null||Nn(g,C,ae(C))}function xa(g,C){return g===C||g!==g&&C!==C}var ub=Zp(Gu),cb=Zp(function(g,C){return g>=C}),qc=Jd(function(){return arguments}())?Jd:function(g){return Ei(g)&&Dr.call(g,"callee")&&!Vd.call(g,"callee")},lr=zt.isArray,hb=Xs?ss(Xs):ef;function ka(g){return g!=null&&Wh(g.length)&&!Io(g)}function ls(g){return Ei(g)&&ka(g)}function db(g){return g===!0||g===!1||Ei(g)&&Yi(g)==ft}var La=Sp||F2,fb=Du?ss(Du):tf;function pb(g){return Ei(g)&&g.nodeType===1&&!qh(g)}function mb(g){if(g==null)return!0;if(ka(g)&&(lr(g)||typeof g=="string"||typeof g.splice=="function"||La(g)||Kh(g)||qc(g)))return!g.length;var C=vs(g);if(C==$||C==at)return!g.size;if(Hc(g))return!N(g).length;for(var R in g)if(Dr.call(g,R))return!1;return!0}function gb(g,C){return Wu(g,C)}function A2(g,C,R){R=typeof R=="function"?R:n;var J=R?R(g,C):n;return J===n?Wu(g,C,n,R):!!J}function u0(g){if(!Ei(g))return!1;var C=Yi(g);return C==Lt||C==Pt||typeof g.message=="string"&&typeof g.name=="string"&&!qh(g)}function yb(g){return typeof g=="number"&&Dc(g)}function Io(g){if(!Bi(g))return!1;var C=Yi(g);return C==un||C==Ie||C==pt||C==Fe}function c0(g){return typeof g=="number"&&g==hr(g)}function Wh(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=tt}function Bi(g){var C=typeof g;return g!=null&&(C=="object"||C=="function")}function Ei(g){return g!=null&&typeof g=="object"}var um=ei?ss(ei):r;function Bg(g,C){return g===C||c(g,C,Lv(C))}function w2(g,C,R){return R=typeof R=="function"?R:n,c(g,C,Lv(C),R)}function C2(g){return Ju(g)&&g!=+g}function I2(g){if(x_(g))throw new Kn(u);return m(g)}function ff(g){return g===null}function Bs(g){return g==null}function Ju(g){return typeof g=="number"||Ei(g)&&Yi(g)==Te}function qh(g){if(!Ei(g)||Yi(g)!=ye)return!1;var C=Pc(g);if(C===null)return!0;var R=Dr.call(C,"constructor")&&C.constructor;return typeof R=="function"&&R instanceof R&&kh.call(R)==kr}var Ng=wc?ss(wc):v;function vb(g){return c0(g)&&g>=-9007199254740991&&g<=tt}var Vg=Mh?ss(Mh):I;function jg(g){return typeof g=="string"||!lr(g)&&Ei(g)&&Yi(g)==Ve}function Ja(g){return typeof g=="symbol"||Ei(g)&&Yi(g)==Mt}var Kh=Pd?ss(Pd):T;function M2(g){return g===n}function _b(g){return Ei(g)&&vs(g)==At}function h0(g){return Ei(g)&&Yi(g)==Gt}var d0=Zp(X),bb=Zp(function(g,C){return g<=C});function pf(g){if(!g)return[];if(ka(g))return jg(g)?Ma(g):ta(g);if(Vu&&g[Vu])return rg(g[Vu]());var C=vs(g),R=C==$?Mc:C==at?Sc:Vs;return R(g)}function Sl(g){if(!g)return g===0?g:0;if(g=Da(g),g===Be||g===-1/0){var C=g<0?-1:1;return C*ut}return g===g?g:0}function hr(g){var C=Sl(g),R=C%1;return C===C?R?C-R:C:0}function Ug(g){return g?Fs(hr(g),0,Ge):0}function Da(g){if(typeof g=="number")return g;if(Ja(g))return Tt;if(Bi(g)){var C=typeof g.valueOf=="function"?g.valueOf():g;g=Bi(C)?C+"":C}if(typeof g!="string")return g===0?g:+g;g=xp(g);var R=_h.test(g);return R||Ad.test(g)?Ed(g.slice(2),R?2:8):Yn.test(g)?Tt:+g}function mf(g){return Qa(g,we(g))}function f0(g){return g?Fs(hr(g),-9007199254740991,tt):g===0?g:0}function Xr(g){return g==null?"":or(g)}var p0=iu(function(g,C){if(Hc(C)||ka(C)){Qa(C,ae(C),g);return}for(var R in C)Dr.call(C,R)&&Yr(g,R,C[R])}),xb=iu(function(g,C){Qa(C,we(C),g)}),h=iu(function(g,C,R,J){Qa(C,we(C),g,J)}),o=iu(function(g,C,R,J){Qa(C,ae(C),g,J)}),d=as(jh);function p(g,C){var R=Uu(g);return C==null?R:Yd(R,C)}var _=vt(function(g,C){g=ti(g);var R=-1,J=C.length,me=J>2?C[2]:n;for(me&&ba(C[0],C[1],me)&&(J=1);++R<J;)for(var Ee=C[R],Ye=we(Ee),ht=-1,bt=Ye.length;++ht<bt;){var tn=Ye[ht],nn=g[tn];(nn===n||xa(nn,qo[tn])&&!Dr.call(g,tn))&&(g[tn]=Ee[tn])}return g}),S=vt(function(g){return g.push(n,v_),gs(kt,n,g)});function E(g,C){return Cc(g,Xn(C,3),ya)}function k(g,C){return Cc(g,Xn(C,3),Bc)}function F(g,C){return g==null?g:Ii(g,Xn(C,3),we)}function j(g,C){return g==null?g:Xd(g,Xn(C,3),we)}function q(g,C){return g&&ya(g,Xn(C,3))}function ee(g,C){return g&&Bc(g,Xn(C,3))}function oe(g){return g==null?[]:Ya(g,ae(g))}function ue(g){return g==null?[]:Ya(g,we(g))}function he(g,C,R){var J=g==null?n:nl(g,C);return J===n?R:J}function be(g,C){return g!=null&&__(g,C,Vp)}function Me(g,C){return g!=null&&__(g,C,Vc)}var ze=Av(function(g,C,R){C!=null&&typeof C.toString!="function"&&(C=Tc.call(C)),g[C]=R},y0(ra)),st=Av(function(g,C,R){C!=null&&typeof C.toString!="function"&&(C=Tc.call(C)),Dr.call(g,C)?g[C].push(R):g[C]=[R]},Xn),He=vt(_o);function ae(g){return ka(g)?Np(g):N(g)}function we(g){return ka(g)?Np(g,!0):G(g)}function Ze(g,C){var R={};return C=Xn(C,3),ya(g,function(J,me,Ee){el(R,C(J,me,Ee),J)}),R}function It(g,C){var R={};return C=Xn(C,3),ya(g,function(J,me,Ee){el(R,me,C(J,me,Ee))}),R}var Qt=iu(function(g,C,R){_e(g,C,R)}),kt=iu(function(g,C,R,J){_e(g,C,R,J)}),Ft=as(function(g,C){var R={};if(g==null)return R;var J=!1;C=Qr(C,function(Ee){return Ee=ks(Ee,g),J||(J=Ee.length>1),Ee}),Qa(g,qp(g),R),J&&(R=Js(R,b|M|A,Ev));for(var me=C.length;me--;)Xi(R,C[me]);return R});function sn(g,C){return ln(g,Fg(Xn(C)))}var Jt=as(function(g,C){return g==null?{}:$e(g,C)});function ln(g,C){if(g==null)return{};var R=Qr(qp(g),function(J){return[J]});return C=Xn(C),qe(g,R,function(J,me){return C(J,me[0])})}function Ut(g,C,R){C=ks(C,g);var J=-1,me=C.length;for(me||(me=1,g=n);++J<me;){var Ee=g==null?n:g[Il(C[J])];Ee===n&&(J=me,Ee=R),g=Io(Ee)?Ee.call(g):Ee}return g}function wn(g,C,R){return g==null?g:hn(g,C,R)}function Vn(g,C,R,J){return J=typeof J=="function"?J:n,g==null?g:hn(g,C,R,J)}var zn=Mv(ae),Tn=Mv(we);function mr(g,C,R){var J=lr(g),me=J||La(g)||Kh(g);if(C=Xn(C,4),R==null){var Ee=g&&g.constructor;me?R=J?new Ee:[]:Bi(g)?R=Io(Ee)?Uu(Pc(g)):{}:R={}}return(me?da:ya)(g,function(Ye,ht,bt){return C(R,Ye,ht,bt)}),R}function Ti(g,C){return g==null?!0:Xi(g,C)}function us(g,C,R){return g==null?g:Qi(g,C,xo(R))}function Ns(g,C,R,J){return J=typeof J=="function"?J:n,g==null?g:Qi(g,C,xo(R),J)}function Vs(g){return g==null?[]:Dd(g,ae(g))}function Ra(g){return g==null?[]:Dd(g,we(g))}function Ls(g,C,R){return R===n&&(R=C,C=n),R!==n&&(R=Da(R),R=R===R?R:0),C!==n&&(C=Da(C),C=C===C?C:0),Fs(Da(g),C,R)}function bi(g,C,R){return C=Sl(C),R===n?(R=C,C=0):R=Sl(R),g=Da(g),Zu(g,C,R)}function _s(g,C,R){if(R&&typeof R!="boolean"&&ba(g,C,R)&&(C=R=n),R===n&&(typeof C=="boolean"?(R=C,C=n):typeof g=="boolean"&&(R=g,g=n)),g===n&&C===n?(g=0,C=1):(g=Sl(g),C===n?(C=g,g=0):C=Sl(C)),g>C){var J=g;g=C,C=J}if(R||g%1||C%1){var me=Tp();return qi(g+me*(C-g+Sd("1e-"+((me+"").length-1))),C)}return it(g,C)}var Ds=$h(function(g,C,R){return C=C.toLowerCase(),g+(R?bs(C):C)});function bs(g){return $g(Xr(g).toLowerCase())}function na(g){return g=Xr(g),g&&g.replace(wd,Jm).replace(ql,"")}function Mo(g,C,R){g=Xr(g),C=or(C);var J=g.length;R=R===n?J:Fs(hr(R),0,J);var me=R;return R-=C.length,R>=0&&g.slice(R,me)==C}function xs(g){return g=Xr(g),g&&Et.test(g)?g.replace(dt,eg):g}function Oa(g){return g=Xr(g),g&&Vt.test(g)?g.replace(Jn,"\\$&"):g}var cs=$h(function(g,C,R){return g+(R?"-":"")+C.toLowerCase()}),As=$h(function(g,C,R){return g+(R?" ":"")+C.toLowerCase()}),ws=nf("toLowerCase");function es(g,C,R){g=Xr(g),C=hr(C);var J=C?ar(g):0;if(!C||J>=C)return g;var me=(C-J)/2;return Uc(Lc(me),R)+g+Uc(Dh(me),R)}function di(g,C,R){g=Xr(g),C=hr(C);var J=C?ar(g):0;return C&&J<C?g+Uc(C-J,R):g}function El(g,C,R){g=Xr(g),C=hr(C);var J=C?ar(g):0;return C&&J<C?Uc(C-J,R)+g:g}function gf(g,C,R){return R||C==null?C=0:C&&(C=+C),Gd(Xr(g).replace($n,""),C||0)}function Tl(g,C,R){return(R?ba(g,C,R):C===n)?C=1:C=hr(C),Ct(Xr(g),C)}function S2(){var g=arguments,C=Xr(g[0]);return g.length<3?C:C.replace(g[1],g[2])}var yf=$h(function(g,C,R){return g+(R?"_":"")+C.toLowerCase()});function Yh(g,C,R){return R&&typeof R!="number"&&ba(g,C,R)&&(C=R=n),R=R===n?Ge:R>>>0,R?(g=Xr(g),g&&(typeof C=="string"||C!=null&&!Ng(C))&&(C=or(C),!C&&Ql(g))?va(Ma(g),0,R):g.split(C,R)):[]}var vf=$h(function(g,C,R){return g+(R?" ":"")+$g(C)});function _f(g,C,R){return g=Xr(g),R=R==null?0:Fs(hr(R),0,g.length),C=or(C),g.slice(R,R+C.length)==C}function bf(g,C,R){var J=Ce.templateSettings;R&&ba(g,C,R)&&(C=n),g=Xr(g),C=h({},C,J,Sv);var me=h({},C.imports,J.imports,Sv),Ee=ae(me),Ye=Dd(me,Ee),ht,bt,tn=0,nn=C.interpolate||Gi,cn="__p += '",In=zd((C.escape||Gi).source+"|"+nn.source+"|"+(nn===Yt?Os:Gi).source+"|"+(C.evaluate||Gi).source+"|$","g"),Gn="//# sourceURL="+(Dr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Pr+"]")+`
`;g.replace(In,function(rr,Fr,Hr,kl,Eo,Ll){return Hr||(Hr=kl),cn+=g.slice(tn,Ll).replace(li,tg),Fr&&(ht=!0,cn+=`' +
__e(`+Fr+`) +
'`),Eo&&(bt=!0,cn+=`';
`+Eo+`;
__p += '`),Hr&&(cn+=`' +
((__t = (`+Hr+`)) == null ? '' : __t) +
'`),tn=Ll+rr.length,rr}),cn+=`';
`;var nr=Dr.call(C,"variable")&&C.variable;if(!nr)cn=`with (obj) {
`+cn+`
}
`;else if(Bn.test(nr))throw new Kn(s);cn=(bt?cn.replace(Ae,""):cn).replace(Se,"$1").replace(ve,"$1;"),cn="function("+(nr||"obj")+`) {
`+(nr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ht?", __e = _.escape":"")+(bt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+cn+`return __p
}`;var Ir=Eb(function(){return Cr(Ee,Gn+"return "+cn).apply(n,Ye)});if(Ir.source=cn,u0(Ir))throw Ir;return Ir}function Ab(g){return Xr(g).toLowerCase()}function wb(g){return Xr(g).toUpperCase()}function Cb(g,C,R){if(g=Xr(g),g&&(R||C===n))return xp(g);if(!g||!(C=or(C)))return g;var J=Ma(g),me=Ma(C),Ee=Ic(J,me),Ye=Qm(J,me)+1;return va(J,Ee,Ye).join("")}function Ib(g,C,R){if(g=Xr(g),g&&(R||C===n))return g.slice(0,sg(g)+1);if(!g||!(C=or(C)))return g;var J=Ma(g),me=Qm(J,Ma(C))+1;return va(J,0,me).join("")}function m0(g,C,R){if(g=Xr(g),g&&(R||C===n))return g.replace($n,"");if(!g||!(C=or(C)))return g;var J=Ma(g),me=Ic(J,Ma(C));return va(J,me).join("")}function g0(g,C){var R=ne,J=le;if(Bi(C)){var me="separator"in C?C.separator:me;R="length"in C?hr(C.length):R,J="omission"in C?or(C.omission):J}g=Xr(g);var Ee=g.length;if(Ql(g)){var Ye=Ma(g);Ee=Ye.length}if(R>=Ee)return g;var ht=R-ar(J);if(ht<1)return J;var bt=Ye?va(Ye,0,ht).join(""):g.slice(0,ht);if(me===n)return bt+J;if(Ye&&(ht+=bt.length-ht),Ng(me)){if(g.slice(ht).search(me)){var tn,nn=bt;for(me.global||(me=zd(me.source,Xr(oi.exec(me))+"g")),me.lastIndex=0;tn=me.exec(nn);)var cn=tn.index;bt=bt.slice(0,cn===n?ht:cn)}}else if(g.indexOf(or(me),ht)!=ht){var In=bt.lastIndexOf(me);In>-1&&(bt=bt.slice(0,In))}return bt+J}function ec(g){return g=Xr(g),g&&We.test(g)?g.replace(Qe,mv):g}var Mb=$h(function(g,C,R){return g+(R?" ":"")+C.toUpperCase()}),$g=nf("toUpperCase");function Sb(g,C,R){return g=Xr(g),C=R?n:C,C===n?Od(g)?ag(g):Kl(g):g.match(C)||[]}var Eb=vt(function(g,C){try{return gs(g,n,C)}catch(R){return u0(R)?R:new Kn(R)}}),E2=as(function(g,C){return da(C,function(R){R=Il(R),el(g,R,sm(g[R],g))}),g});function T2(g){var C=g==null?0:g.length,R=Xn();return g=C?Qr(g,function(J){if(typeof J[1]!="function")throw new ys(l);return[R(J[0]),J[1]]}):[],vt(function(J){for(var me=-1;++me<C;){var Ee=g[me];if(gs(Ee[0],this,J))return gs(Ee[1],this,J)}})}function P2(g){return On(Js(g,b))}function y0(g){return function(){return g}}function k2(g,C){return g==null||g!==g?C:g}var L2=Ag(),Pl=Ag(!0);function ra(g){return g}function Hg(g){return D(typeof g=="function"?g:Js(g,b))}function D2(g){return se(Js(g,b))}function R2(g,C){return fe(g,Js(C,b))}var O2=vt(function(g,C){return function(R){return _o(R,g,C)}}),ia=vt(function(g,C){return function(R){return _o(g,R,C)}});function za(g,C,R){var J=ae(C),me=Ya(C,J);R==null&&!(Bi(C)&&(me.length||!J.length))&&(R=C,C=g,g=this,me=Ya(C,ae(C)));var Ee=!(Bi(R)&&"chain"in R)||!!R.chain,Ye=Io(g);return da(me,function(ht){var bt=C[ht];g[ht]=bt,Ye&&(g.prototype[ht]=function(){var tn=this.__chain__;if(Ee||tn){var nn=g(this.__wrapped__),cn=nn.__actions__=ta(this.__actions__);return cn.push({func:bt,args:arguments,thisArg:g}),nn.__chain__=tn,nn}return bt.apply(g,mo([this.value()],arguments))})}),g}function Xh(){return Wi._===this&&(Wi._=Bd),this}function So(){}function Qh(g){return g=hr(g),vt(function(C){return ke(C,g)})}var lu=wv(Qr),aD=wv(Sh),oD=wv(qa);function _E(g){return Hh(g)?Ld(Il(g)):Ke(g)}function lD(g){return function(C){return g==null?n:nl(g,C)}}var uD=Gp(),cD=Gp(!0);function z2(){return[]}function F2(){return!1}function hD(){return{}}function dD(){return""}function fD(){return!0}function pD(g,C){if(g=hr(g),g<1||g>tt)return[];var R=Ge,J=qi(g,Ge);C=Xn(C),g-=Ge;for(var me=Ph(J,C);++R<g;)C(R);return me}function mD(g){return lr(g)?Qr(g,Il):Ja(g)?[g]:ta(Sg(Xr(g)))}function gD(g){var C=++Ec;return Xr(g)+C}var yD=su(function(g,C){return g+C},0),vD=Iv("ceil"),_D=su(function(g,C){return g/C},1),bD=Iv("floor");function xD(g){return g&&g.length?Ea(g,ra,Gu):n}function AD(g,C){return g&&g.length?Ea(g,Xn(C,2),Gu):n}function wD(g){return Xm(g,ra)}function CD(g,C){return Xm(g,Xn(C,2))}function ID(g){return g&&g.length?Ea(g,ra,X):n}function MD(g,C){return g&&g.length?Ea(g,Xn(C,2),X):n}var SD=su(function(g,C){return g*C},1),ED=Iv("round"),TD=su(function(g,C){return g-C},0);function PD(g){return g&&g.length?Th(g,ra):0}function kD(g,C){return g&&g.length?Th(g,Xn(C,2)):0}return Ce.after=df,Ce.ary=r0,Ce.assign=p0,Ce.assignIn=xb,Ce.assignInWith=h,Ce.assignWith=o,Ce.at=d,Ce.before=i0,Ce.bind=sm,Ce.bindAll=E2,Ce.bindKey=s0,Ce.castArray=ab,Ce.chain=kg,Ce.chunk=Nw,Ce.compact=Vw,Ce.concat=jw,Ce.cond=T2,Ce.conforms=P2,Ce.constant=y0,Ce.countBy=G_,Ce.create=p,Ce.curry=am,Ce.curryRight=a0,Ce.debounce=J_,Ce.defaults=_,Ce.defaultsDeep=S,Ce.defer=v2,Ce.delay=eb,Ce.difference=Fv,Ce.differenceBy=S_,Ce.differenceWith=Bv,Ce.drop=E_,Ce.dropRight=Nv,Ce.dropRightWhile=T_,Ce.dropWhile=P_,Ce.fill=Eg,Ce.filter=Z_,Ce.flatMap=Jv,Ce.flatMapDeep=h2,Ce.flatMapDepth=q_,Ce.flatten=Uv,Ce.flattenDeep=Jp,Ce.flattenDepth=Uw,Ce.flip=_2,Ce.flow=L2,Ce.flowRight=Pl,Ce.fromPairs=$v,Ce.functions=oe,Ce.functionsIn=ue,Ce.groupBy=d2,Ce.initial=$w,Ce.intersection=Hw,Ce.intersectionBy=k_,Ce.intersectionWith=L_,Ce.invert=ze,Ce.invertBy=st,Ce.invokeMap=p2,Ce.iteratee=Hg,Ce.keyBy=X_,Ce.keys=ae,Ce.keysIn=we,Ce.map=rm,Ce.mapKeys=Ze,Ce.mapValues=It,Ce.matches=D2,Ce.matchesProperty=R2,Ce.memoize=zg,Ce.merge=Qt,Ce.mergeWith=kt,Ce.method=O2,Ce.methodOf=ia,Ce.mixin=za,Ce.negate=Fg,Ce.nthArg=Qh,Ce.omit=Ft,Ce.omitBy=sn,Ce.once=b2,Ce.orderBy=im,Ce.over=lu,Ce.overArgs=x2,Ce.overEvery=aD,Ce.overSome=oD,Ce.partial=om,Ce.partialRight=Qu,Ce.partition=ou,Ce.pick=Jt,Ce.pickBy=ln,Ce.property=_E,Ce.propertyOf=lD,Ce.pull=Zw,Ce.pullAll=R_,Ce.pullAllBy=Ww,Ce.pullAllWith=qw,Ce.pullAt=Kw,Ce.range=uD,Ce.rangeRight=cD,Ce.rearg=tb,Ce.reject=e0,Ce.remove=Yw,Ce.rest=nb,Ce.reverse=Tg,Ce.sampleSize=g2,Ce.set=wn,Ce.setWith=Vn,Ce.shuffle=Og,Ce.slice=Gv,Ce.sortBy=n0,Ce.sortedUniq=B_,Ce.sortedUniqBy=Jw,Ce.split=Yh,Ce.spread=rb,Ce.tail=e2,Ce.take=t2,Ce.takeRight=N_,Ce.takeRightWhile=n2,Ce.takeWhile=r2,Ce.tap=$_,Ce.throttle=ib,Ce.thru=Ml,Ce.toArray=pf,Ce.toPairs=zn,Ce.toPairsIn=Tn,Ce.toPath=mD,Ce.toPlainObject=mf,Ce.transform=mr,Ce.unary=sb,Ce.union=tm,Ce.unionBy=V_,Ce.unionWith=Zv,Ce.uniq=j_,Ce.uniqBy=os,Ce.uniqWith=Wv,Ce.unset=Ti,Ce.unzip=qv,Ce.unzipWith=Kv,Ce.update=us,Ce.updateWith=Ns,Ce.values=Vs,Ce.valuesIn=Ra,Ce.without=Yv,Ce.words=Sb,Ce.wrap=o0,Ce.xor=Xv,Ce.xorBy=i2,Ce.xorWith=s2,Ce.zip=a2,Ce.zipObject=o2,Ce.zipObjectDeep=U_,Ce.zipWith=Pa,Ce.entries=zn,Ce.entriesIn=Tn,Ce.extend=xb,Ce.extendWith=h,za(Ce,Ce),Ce.add=yD,Ce.attempt=Eb,Ce.camelCase=Ds,Ce.capitalize=bs,Ce.ceil=vD,Ce.clamp=Ls,Ce.clone=lm,Ce.cloneDeep=l0,Ce.cloneDeepWith=lb,Ce.cloneWith=ob,Ce.conformsTo=Co,Ce.deburr=na,Ce.defaultTo=k2,Ce.divide=_D,Ce.endsWith=Mo,Ce.eq=xa,Ce.escape=xs,Ce.escapeRegExp=Oa,Ce.every=c2,Ce.find=W_,Ce.findIndex=Vv,Ce.findKey=E,Ce.findLast=Qv,Ce.findLastIndex=jv,Ce.findLastKey=k,Ce.floor=bD,Ce.forEach=K_,Ce.forEachRight=Y_,Ce.forIn=F,Ce.forInRight=j,Ce.forOwn=q,Ce.forOwnRight=ee,Ce.get=he,Ce.gt=ub,Ce.gte=cb,Ce.has=be,Ce.hasIn=Me,Ce.head=uf,Ce.identity=ra,Ce.includes=f2,Ce.indexOf=Hv,Ce.inRange=bi,Ce.invoke=He,Ce.isArguments=qc,Ce.isArray=lr,Ce.isArrayBuffer=hb,Ce.isArrayLike=ka,Ce.isArrayLikeObject=ls,Ce.isBoolean=db,Ce.isBuffer=La,Ce.isDate=fb,Ce.isElement=pb,Ce.isEmpty=mb,Ce.isEqual=gb,Ce.isEqualWith=A2,Ce.isError=u0,Ce.isFinite=yb,Ce.isFunction=Io,Ce.isInteger=c0,Ce.isLength=Wh,Ce.isMap=um,Ce.isMatch=Bg,Ce.isMatchWith=w2,Ce.isNaN=C2,Ce.isNative=I2,Ce.isNil=Bs,Ce.isNull=ff,Ce.isNumber=Ju,Ce.isObject=Bi,Ce.isObjectLike=Ei,Ce.isPlainObject=qh,Ce.isRegExp=Ng,Ce.isSafeInteger=vb,Ce.isSet=Vg,Ce.isString=jg,Ce.isSymbol=Ja,Ce.isTypedArray=Kh,Ce.isUndefined=M2,Ce.isWeakMap=_b,Ce.isWeakSet=h0,Ce.join=Gw,Ce.kebabCase=cs,Ce.last=rl,Ce.lastIndexOf=em,Ce.lowerCase=As,Ce.lowerFirst=ws,Ce.lt=d0,Ce.lte=bb,Ce.max=xD,Ce.maxBy=AD,Ce.mean=wD,Ce.meanBy=CD,Ce.min=ID,Ce.minBy=MD,Ce.stubArray=z2,Ce.stubFalse=F2,Ce.stubObject=hD,Ce.stubString=dD,Ce.stubTrue=fD,Ce.multiply=SD,Ce.nth=D_,Ce.noConflict=Xh,Ce.noop=So,Ce.now=hf,Ce.pad=es,Ce.padEnd=di,Ce.padStart=El,Ce.parseInt=gf,Ce.random=_s,Ce.reduce=Wc,Ce.reduceRight=Q_,Ce.repeat=Tl,Ce.replace=S2,Ce.result=Ut,Ce.round=ED,Ce.runInContext=gt,Ce.sample=m2,Ce.size=t0,Ce.snakeCase=yf,Ce.some=y2,Ce.sortedIndex=O_,Ce.sortedIndexBy=z_,Ce.sortedIndexOf=F_,Ce.sortedLastIndex=Xw,Ce.sortedLastIndexBy=Pg,Ce.sortedLastIndexOf=Qw,Ce.startCase=vf,Ce.startsWith=_f,Ce.subtract=TD,Ce.sum=PD,Ce.sumBy=kD,Ce.template=bf,Ce.times=pD,Ce.toFinite=Sl,Ce.toInteger=hr,Ce.toLength=Ug,Ce.toLower=Ab,Ce.toNumber=Da,Ce.toSafeInteger=f0,Ce.toString=Xr,Ce.toUpper=wb,Ce.trim=Cb,Ce.trimEnd=Ib,Ce.trimStart=m0,Ce.truncate=g0,Ce.unescape=ec,Ce.uniqueId=gD,Ce.upperCase=Mb,Ce.upperFirst=$g,Ce.each=K_,Ce.eachRight=Y_,Ce.first=uf,za(Ce,function(){var g={};return ya(Ce,function(C,R){Dr.call(Ce.prototype,R)||(g[R]=C)}),g}(),{chain:!1}),Ce.VERSION=i,da(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){Ce[g].placeholder=Ce}),da(["drop","take"],function(g,C){ur.prototype[g]=function(R){R=R===n?1:zi(hr(R),0);var J=this.__filtered__&&!C?new ur(this):this.clone();return J.__filtered__?J.__takeCount__=qi(R,J.__takeCount__):J.__views__.push({size:qi(R,Ge),type:g+(J.__dir__<0?"Right":"")}),J},ur.prototype[g+"Right"]=function(R){return this.reverse()[g](R).reverse()}}),da(["filter","map","takeWhile"],function(g,C){var R=C+1,J=R==K||R==Ue;ur.prototype[g]=function(me){var Ee=this.clone();return Ee.__iteratees__.push({iteratee:Xn(me,3),type:R}),Ee.__filtered__=Ee.__filtered__||J,Ee}}),da(["head","last"],function(g,C){var R="take"+(C?"Right":"");ur.prototype[g]=function(){return this[R](1).value()[0]}}),da(["initial","tail"],function(g,C){var R="drop"+(C?"":"Right");ur.prototype[g]=function(){return this.__filtered__?new ur(this):this[R](1)}}),ur.prototype.compact=function(){return this.filter(ra)},ur.prototype.find=function(g){return this.filter(g).head()},ur.prototype.findLast=function(g){return this.reverse().find(g)},ur.prototype.invokeMap=vt(function(g,C){return typeof g=="function"?new ur(this):this.map(function(R){return _o(R,g,C)})}),ur.prototype.reject=function(g){return this.filter(Fg(Xn(g)))},ur.prototype.slice=function(g,C){g=hr(g);var R=this;return R.__filtered__&&(g>0||C<0)?new ur(R):(g<0?R=R.takeRight(-g):g&&(R=R.drop(g)),C!==n&&(C=hr(C),R=C<0?R.dropRight(-C):R.take(C-g)),R)},ur.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},ur.prototype.toArray=function(){return this.take(Ge)},ya(ur.prototype,function(g,C){var R=/^(?:filter|find|map|reject)|While$/.test(C),J=/^(?:head|last)$/.test(C),me=Ce[J?"take"+(C=="last"?"Right":""):C],Ee=J||/^find/.test(C);me&&(Ce.prototype[C]=function(){var Ye=this.__wrapped__,ht=J?[1]:arguments,bt=Ye instanceof ur,tn=ht[0],nn=bt||lr(Ye),cn=function(Fr){var Hr=me.apply(Ce,mo([Fr],ht));return J&&In?Hr[0]:Hr};nn&&R&&typeof tn=="function"&&tn.length!=1&&(bt=nn=!1);var In=this.__chain__,Gn=!!this.__actions__.length,nr=Ee&&!In,Ir=bt&&!Gn;if(!Ee&&nn){Ye=Ir?Ye:new ur(this);var rr=g.apply(Ye,ht);return rr.__actions__.push({func:Ml,args:[cn],thisArg:n}),new Sa(rr,In)}return nr&&Ir?g.apply(this,ht):(rr=this.thru(cn),nr?J?rr.value()[0]:rr.value():rr)})}),da(["pop","push","shift","sort","splice","unshift"],function(g){var C=Fu[g],R=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",J=/^(?:pop|shift)$/.test(g);Ce.prototype[g]=function(){var me=arguments;if(J&&!this.__chain__){var Ee=this.value();return C.apply(lr(Ee)?Ee:[],me)}return this[R](function(Ye){return C.apply(lr(Ye)?Ye:[],me)})}}),ya(ur.prototype,function(g,C){var R=Ce[C];if(R){var J=R.name+"";Dr.call(eu,J)||(eu[J]=[]),eu[J].push({name:C,func:R})}}),eu[Hp(n,V).name]=[{name:"wrapper",func:n}],ur.prototype.clone=tu,ur.prototype.reverse=ma,ur.prototype.value=Qs,Ce.prototype.at=Lg,Ce.prototype.chain=nm,Ce.prototype.commit=cf,Ce.prototype.next=Dg,Ce.prototype.plant=l2,Ce.prototype.reverse=u2,Ce.prototype.toJSON=Ce.prototype.valueOf=Ce.prototype.value=H_,Ce.prototype.first=Ce.prototype.head,Vu&&(Ce.prototype[Vu]=Rg),Ce},zu=vv();Go?((Go.exports=zu)._=zu,Td._=zu):Wi._=zu}).call(la)})(Hx,Hx.exports);var Om=Hx.exports;const CI=Vo.createLogger().setNamespace("map:"+Mu.LANG,2),my={setLocale:"map:lang:set-locale",setTranslate:"map:lang:set-translate"},uU=e=>jl(["map:core",e,Mu.LANG],()=>(Mn(CI,e,"store").debug("init"),{locale:{},localeDefault:{}}))(),cU=e=>{const t=uU(e);function n(l){Mn(CI,e,"store").debug("setMapLang",l),t&&(t.locale=Om.merge({},t.locale,l));const s=fh(e);s==null||s.emit(my.setLocale,l)}function i(l){t&&(t.localeDefault=Om.merge({},t.localeDefault,l))}function a(l){Mn(CI,e,"store").debug("setMapTranslate",l),t&&(t.translate=l);const s=fh(e);s==null||s.emit(my.setTranslate,l)}function u(){return t}return{getMapLang:u,setMapTranslate:a,setMapLocaleDefault:i,setMapLang:n}},rP=new Map;function Oi(e){if(!e)throw new Error("mapId is required");const{getMapLang:t,setMapLang:n,setMapLocaleDefault:i,setMapTranslate:a}=cU(e),u=Ca(t()),l=fh(e);Er(()=>{l.on(my.setLocale,s),l.on(my.setTranslate,s)}),ha(()=>{l.off(my.setLocale,s),l.off(my.setTranslate,s)});function s(){u.value=t()}function f(A,P){var V,z,B;if((V=u.value)!=null&&V.translate)return u.value.translate(A,P);const L=iP((z=u.value)==null?void 0:z.locale,A);if(L!==void 0)return sP(L,P);const O=iP((B=u.value)==null?void 0:B.localeDefault,A);return O!==void 0?sP(O,P):A}const y=Wt(()=>f);function x(A){n(A)}function b(A){i(A)}function M(A){a(A)}return{trans:y,setLocale:x,setLocaleDefault:b,setTranslate:M}}function iP(e,t,n){if(!e||!t)return n;const i=Array.isArray(t)?t.join("."):t;let a=rP.get(e);if(a||(a=new Map,rP.set(e,a)),a.has(i))return a.get(i);const u=Array.isArray(t)?t:t.split(".").filter(Boolean);let l=e;for(const s of u)if(l&&typeof l=="object"&&s in l)l=l[s];else return n;return a.set(i,l),l}function sP(e,t){return e?t?e.replace(/\{(\w+)\}/g,(n,i)=>{const a=t[i];return a!==void 0?String(a):n}):e:""}const yue=Vo.createLogger().setNamespace("map:"+Mu.MAP_COMPARE,2),J1=jl("drag:core",()=>({container:xu({}),componentCard:void 0,componentCardHeader:void 0,componentCardSidebarToggle:void 0})),hU=e=>{const t=J1();return{getIsMobile(){return t.container[e].isMobile}}},Y4=e=>{const t=J1(),n=t.container[e];function i(u){const l=t.container[u];if(!l)throw"Not found container for id "+u;return l}function a(u,l){const s=i(e),f=n.actions[u];if(!("location"in f))return;const y=f.location,x=s.sideBar[y].show;x&&!l?(s.actions[x].setShow(!1),s.sideBar[y].show=void 0):l&&(x&&u!=x&&s.actions[x].setShow(!1),s.sideBar[y].show=u,s.actions[u].setShow(!0))}return{getStoreContainer:i,registerSideBar(u,l){i(e).sideBar[l].items.push(u)},registerSideBarShow(u,l){a(u,l)},unRegisterSideBar(u){if(!n)return;const l=n.actions[u];if(!("location"in l))return;const s=l.location;n.sideBar[s].items=n.sideBar[s].items.filter(f=>f!==u),n.sideBar[s].show=void 0,delete n.actions[u]},registerAction(u,l){n.actions[u]=l}}},qA=e=>{const t=J1(),n=t.container[e];function i(){n.show.forEach((l,s)=>{const f=n.actions[l];f&&f.setZIndex(s+10)})}function a(l){const s=t.container[l];if(!s)throw"Not found container for id "+l;return s}function u(l,s){const f=a(e),y=f.show;if(s&&!y.includes(l))y.push(l);else if(!s){const x=y.indexOf(l);x!==-1&&y.splice(x,1)}f.show=y}return{getStoreContainer:a,registerItem(l){a(e).items.push(l)},registerAction(l,s){n.actions[l]=s},registerOtherAction(l,s){n.actions[l]={...n.actions[l],...s}},unRegisterItem(l){n&&(n.items=n.items.filter(s=>s!==l),n.show=n.show.filter(s=>s!==l),delete n.actions[l])},registerItemShow(l,s){u(l,s),i()},setToBack(l){if(!e||!l)return;const s=a(e),f=s.show.findIndex(y=>y==l);f>0&&(s.show.splice(f,1),s.show.unshift(l),i())},setToFront(l){if(!e||!l)return;const s=a(e),f=s.show.findIndex(y=>y==l);f<s.show.length-1&&(s.show.splice(f,1),s.show.push(l),i())},getItems(){return n.items},getItemsShow(){return n.show}}},X4=()=>{const e=J1();return{getComponentCard(){return e.componentCard},getComponentCardHeader(){return e.componentCardHeader},getComponentCardSidebarToggle(){return e.componentCardSidebarToggle}}},Q4=e=>{const t=J1();return{getWidth(){return t.container[e].width},getItems(){var a;const i=(a=t.container)==null?void 0:a[e];return i==null?void 0:i.items},getItemAction(i){var u,l;const a=(u=t.container)==null?void 0:u[e];return(l=a==null?void 0:a.actions)==null?void 0:l[i]},getItemShows(){var a;const i=(a=t.container)==null?void 0:a[e];return i==null?void 0:i.show},getHeight(){const i=t.container[e];return i==null?void 0:i.height},initContainer:()=>{t.container[e]={items:[],sideBar:{left:{items:[],show:void 0},right:{items:[],show:void 0},top:{items:[],show:void 0},bottom:{items:[],show:void 0}},show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(){delete t.container[e]},setParentProps(i){const a=t.container[e]||{};a.width=i.width,a.height=i.height,a.isMobile=i.isMobile}}},dU={class:"menu-content"},fU=An({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(e,{expose:t}){const n=e,i=Kt(),a=Kt(!1),u=Kt({}),l=Kt(0),s=Kt(0),y=l4({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet");FB(i,()=>A());const x=Wt(()=>({position:"fixed",zIndex:String(n.zIndex),...u.value}));let b;Er(()=>{A(),i.value&&(b=new ResizeObserver(()=>{l.value=i.value.offsetWidth,s.value=i.value.offsetHeight}),b.observe(i.value))}),ha(()=>{b==null||b.disconnect()});function M(P){a.value=!0,fl(()=>{const L=i.value;if(L)if((!l.value||!s.value)&&(L.style.visibility="hidden",L.style.display="block",l.value=L.offsetWidth,s.value=L.offsetHeight,L.style.visibility="",L.style.display=""),y.value)u.value={top:"0",left:"0",right:"0",bottom:"0",background:"#00000085"};else{const O=P.pageX+l.value>=window.innerWidth?P.pageX-l.value+10:P.pageX-10,V=P.pageY+s.value>=window.innerHeight?P.pageY-s.value+10:P.pageY-10;u.value={left:`${O}px`,top:`${V}px`}}})}function A(){a.value=!1,u.value={}}return t({open:M,close:A}),(P,L)=>pl((xe(),et("div",{class:ii(["menu-container",{"menu-mobile":re(y)}]),ref_key:"target",ref:i,style:qr(x.value)},[Pe("div",dU,[Sn(P.$slots,"default",{},void 0,!0)]),a.value&&re(y)?(xe(),et("div",{key:0,onClick:A},L[0]||(L[0]=[Pe("button",{type:"button",class:"btn-close"},"Close",-1)]))):rn("",!0)],6)),[[Z1,a.value]])}}),nS=_n(fU,[["__scopeId","data-v-fde8c3ca"]]),pU={props:{height:{},width:{},highlight:{type:Boolean,default:!1}},name:"MapCard",data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},mU={class:"card-container"};function gU(e,t,n,i,a,u){return xe(),et("div",Qn({style:u.cardStyle},e.$attrs,{class:{"hungpvq-draggable-card":!0,highlight:n.highlight}}),[Pe("div",mU,[Sn(e.$slots,"default")]),t[0]||(t[0]=EA('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1))],16)}const yU=_n(pU,[["render",gU]]),vU={name:"MapHeader"},_U={class:"draggable-header"},bU={class:"draggable-header__content"},xU={class:"draggable-header__title"};function AU(e,t,n,i,a,u){return xe(),et(Fn,null,[t[1]||(t[1]=Pe("hr",{class:"map-divider"},null,-1)),Pe("div",_U,[Pe("div",bU,[Sn(e.$slots,"pre-title",{},void 0,!0),Pe("div",xU,[Sn(e.$slots,"title",{},void 0,!0)]),t[0]||(t[0]=Pe("div",{class:"map-spacer"},null,-1)),Sn(e.$slots,"extra-btn",{},void 0,!0)])]),t[2]||(t[2]=Pe("hr",{class:"map-divider"},null,-1))],64)}const wU=_n(vU,[["render",AU],["__scopeId","data-v-bf3d801f"]]);function KA(e){const t=X4(),n=Wt(()=>t.getComponentCard()||e.componentCard||yU),i=Wt(()=>t.getComponentCardHeader()||e.componentCardHeader||wU);return{componentCard:n,componentCardHeader:i}}const rS={componentCard:{type:[String,Object]},componentCardHeader:{type:[String,Object]}},CU={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},IU=["aria-hidden","aria-label"],MU=["fill","width","height"],SU={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},EU={key:0};function TU(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",SU,[n.title?(xe(),et("title",EU,an(n.title),1)):rn("",!0)])],8,MU))],16,IU)}const PU=_n(CU,[["render",TU]]),kU={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},LU=["aria-hidden","aria-label"],DU=["fill","width","height"],RU={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},OU={key:0};function zU(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",RU,[n.title?(xe(),et("title",OU,an(n.title),1)):rn("",!0)])],8,DU))],16,LU)}const FU=_n(kU,[["render",zU]]),BU={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},NU=["aria-hidden","aria-label"],VU=["fill","width","height"],jU={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},UU={key:0};function $U(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",jU,[n.title?(xe(),et("title",UU,an(n.title),1)):rn("",!0)])],8,VU))],16,NU)}const aP=_n(BU,[["render",$U]]),HU={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},GU=["aria-hidden","aria-label"],ZU=["fill","width","height"],WU={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},qU={key:0};function KU(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",WU,[n.title?(xe(),et("title",qU,an(n.title),1)):rn("",!0)])],8,ZU))],16,GU)}const oP=_n(HU,[["render",KU]]),YU={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},XU=["aria-hidden","aria-label"],QU=["fill","width","height"],JU={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},e$={key:0};function t$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",JU,[n.title?(xe(),et("title",e$,an(n.title),1)):rn("",!0)])],8,QU))],16,XU)}const n$=_n(YU,[["render",t$]]),r$={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},i$=["aria-hidden","aria-label"],s$=["fill","width","height"],a$={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},o$={key:0};function l$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",a$,[n.title?(xe(),et("title",o$,an(n.title),1)):rn("",!0)])],8,s$))],16,i$)}const u$=_n(r$,[["render",l$]]),c$={name:"EyeOffOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},h$=["aria-hidden","aria-label"],d$=["fill","width","height"],f$={d:"M2,5.27L3.28,4L20,20.72L18.73,22L15.65,18.92C14.5,19.3 13.28,19.5 12,19.5C7,19.5 2.73,16.39 1,12C1.69,10.24 2.79,8.69 4.19,7.46L2,5.27M12,9A3,3 0 0,1 15,12C15,12.35 14.94,12.69 14.83,13L11,9.17C11.31,9.06 11.65,9 12,9M12,4.5C17,4.5 21.27,7.61 23,12C22.18,14.08 20.79,15.88 19,17.19L17.58,15.76C18.94,14.82 20.06,13.54 20.82,12C19.17,8.64 15.76,6.5 12,6.5C10.91,6.5 9.84,6.68 8.84,7L7.3,5.47C8.74,4.85 10.33,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C12.69,17.5 13.37,17.43 14,17.29L11.72,15C10.29,14.85 9.15,13.71 9,12.28L5.6,8.87C4.61,9.72 3.78,10.78 3.18,12Z"},p$={key:0};function m$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon eye-off-outline-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",f$,[n.title?(xe(),et("title",p$,an(n.title),1)):rn("",!0)])],8,d$))],16,h$)}const g$=_n(c$,[["render",m$]]),y$={name:"EyeOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},v$=["aria-hidden","aria-label"],_$=["fill","width","height"],b$={d:"M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"},x$={key:0};function A$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon eye-outline-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",b$,[n.title?(xe(),et("title",x$,an(n.title),1)):rn("",!0)])],8,_$))],16,v$)}const w$=_n(y$,[["render",A$]]),C$={name:"MarkerIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},I$=["aria-hidden","aria-label"],M$=["fill","width","height"],S$={d:"M18.5,1.15C17.97,1.15 17.46,1.34 17.07,1.73L11.26,7.55L16.91,13.2L22.73,7.39C23.5,6.61 23.5,5.35 22.73,4.56L19.89,1.73C19.5,1.34 19,1.15 18.5,1.15M10.3,8.5L4.34,14.46C3.56,15.24 3.56,16.5 4.36,17.31C3.14,18.54 1.9,19.77 0.67,21H6.33L7.19,20.14C7.97,20.9 9.22,20.89 10,20.12L15.95,14.16"},E$={key:0};function T$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon marker-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",S$,[n.title?(xe(),et("title",E$,an(n.title),1)):rn("",!0)])],8,M$))],16,I$)}const P$=_n(C$,[["render",T$]]),k$={name:"MenuIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},L$=["aria-hidden","aria-label"],D$=["fill","width","height"],R$={d:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"},O$={key:0};function z$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",R$,[n.title?(xe(),et("title",O$,an(n.title),1)):rn("",!0)])],8,D$))],16,L$)}const F$=_n(k$,[["render",z$]]),B$={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},N$=["aria-hidden","aria-label"],V$=["fill","width","height"],j$={d:"M14,7L9,12L14,17V7Z"},U$={key:0};function $$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-left-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",j$,[n.title?(xe(),et("title",U$,an(n.title),1)):rn("",!0)])],8,V$))],16,N$)}const H$=_n(B$,[["render",$$]]),G$={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Z$=["aria-hidden","aria-label"],W$=["fill","width","height"],q$={d:"M10,17L15,12L10,7V17Z"},K$={key:0};function Y$(e,t,n,i,a,u){return xe(),et("span",Qn(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-right-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(xe(),et("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Pe("path",q$,[n.title?(xe(),et("title",K$,an(n.title),1)):rn("",!0)])],8,W$))],16,Z$)}const X$=_n(G$,[["render",Y$]]);function e_(){return{ShowIcon:w$,HideIcon:g$,CloseIcon:n$,HighlightIcon:P$,FullscreenIcon:aP,OffFullscreenIcon:oP,ToBackIcon:FU,ToFrontIcon:PU,ExpandedIcon:oP,CloseExpandedIcon:aP,DragIcon:u$,SidebarExpandedIcon:H$,SidebarCloseExpandedIcon:X$,SidebarOpenMenu:F$}}function YA(e,t,n){const i=qA(e);Er(()=>{i.registerOtherAction(t,n)})}function Q$(e,t){return t.length<1?!1:t[t.length-1]==e}function J$(e,t){return t.length<1?!1:t[0]==e}function iS(e,t,n={type:"draggable-item"}){const i=Kt(`draggable-item-${wu()}`),a=Kt(10);function u(f){a.value=f}function l(f){t.value=f}const s=qA(e);return Er(()=>{s.registerItem(i.value),s.registerAction(i.value,{...n,setZIndex:u,setShow:l}),t.value&&s.registerItemShow(i.value,t.value)}),ha(()=>{s.unRegisterItem(i.value)}),xi(t,f=>{s.registerItemShow(i.value,f)}),{itemId:i,zIndex:a}}function sS(e,t){const n=qA(e),i=Wt(()=>n.getItems()),a=Wt(()=>n.getItemsShow()),u=Wt(()=>Q$(t,a.value)),l=Wt(()=>J$(t,a.value)),s=Wt(()=>a.value.length>1);function f(){n.setToBack(t)}function y(){n.setToFront(t)}return{items:i,itemShows:a,isLast:u,isFirst:l,isHasItems:s,onToBack:f,onToFront:y}}function J4(e){const t=Q4(e),n=Wt(()=>t.getWidth()),i=Wt(()=>t.getHeight());return{containerWidth:n,containerHeight:i}}const XA={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""},...rS};function t_(e,t,n){const i=Kt(!!e.show||!1);xi(()=>e.show,s=>{i.value=s});const a=Wt({get(){return i.value},set(s){i.value=s,t&&t("update:show",s),s||t&&t("close")}});function u(){a.value=!0}function l(){a.value=!1}return{show:a,open:u,close:l}}const QA={show:Boolean},JA={"update:show":e=>Boolean,close:()=>Boolean};function ew(e,t,n){const i=Kt(!!n);xi(()=>e.expand,l=>{i.value=l});const a=Wt({get(){return i.value},set(l){i.value=l,t&&t("update:expand",l)}});function u(){a.value=!a.value}return{expand:a,toggle:u}}const aS={expand:Boolean},tw={"update:expand":e=>Boolean},oS=()=>{const e=Kt(!1);let t=null;return{isHighlight:e,setHighLight:i=>{const a=i!==void 0?i:!e.value;e.value=a,t&&(clearTimeout(t),t=null),a&&(t=setTimeout(()=>{e.value=!1,t=null},5e3))}}},eL=e=>{const t=qA(e);return{getShowForLocation:n=>t.getStoreContainer(e).sideBar[n].show,getItemsForLocation:n=>{const i=t.getStoreContainer(e);return i.sideBar[n].items.map(a=>({id:a,...i.actions[a]}))}}},eH={name:"MapButton",props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"hungpvq-draggable-button--disabled":this.disabled}}}},tH={class:"hungpvq-draggable-button__content"};function nH(e,t,n,i,a,u){return xe(),et("button",Qn({class:"hungpvq-draggable-button"},e.$attrs,{style:u.bindStyle,class:u.bindClass}),[Pe("span",tH,[Sn(e.$slots,"default",{},void 0,!0)])],16)}const Na=_n(eH,[["render",nH],["__scopeId","data-v-936404b8"]]),rH={name:"MapSidebarToggle"},iH=An({...rH,props:{location:String,expand:Boolean},setup(e){const{SidebarExpandedIcon:t,SidebarCloseExpandedIcon:n}=e_();return(i,a)=>(xe(),et("button",null,[e.expand?(xe(),Rt(re(t),{key:0,size:16})):(xe(),Rt(re(n),{key:1,size:16}))]))}}),sH=_n(iH,[["__scopeId","data-v-4a87de93"]]);function aH(e,t){const n=Wt(()=>e.location==="top"||e.location==="bottom"),i=Wt(()=>`sidebar-title-${t.value}-${e.location}`),a=Wt(()=>`sidebar-content-${t.value}-${e.location}`);return{isVertical:n,titleTo:i,contentTo:a}}function oH(e,t){const{show:n}=t_(e,null),{expand:i,toggle:a}=ew(e,null,!0),{isVertical:u,titleTo:l,contentTo:s}=aH(e,t);return{show:n,expand:i,toggleExpand:a,isVertical:u,titleTo:l,contentTo:s}}const lH={class:"sidebar-container--content"},uH={class:"draggable-sidebar"},cH={name:"title"},hH=["id"],dH=["id"],fH={key:0,class:"complex-button-close"},pH={class:"context-menu"},mH=["onClick"],gH=["innerHTML"],yH={name:"DraggableItemSideBar"},vH=An({...yH,props:{...rS,location:{type:String,default:"left"}},setup(e){const t=Kt(),{CloseIcon:n,SidebarOpenMenu:i}=e_(),a=e,u=X4(),l=ca("containerId");if(!l||!l.value)throw new Error("[DraggableItemSideBar] Missing containerId");const{containerWidth:s,containerHeight:f}=J4(l.value),y=Wt(()=>s.value<=600?"100%":s.value<=1264?"320px":"400px"),x=Wt(()=>{const K=f.value;return K<=400?"100%":K<=800?"40%":K<=1080?"320px":"400px"}),{getShowForLocation:b,getItemsForLocation:M}=eL(l.value),{show:A,expand:P,toggleExpand:L,isVertical:O,titleTo:V,contentTo:z}=oH(a,l),{componentCard:B,componentCardHeader:U}=KA({...a,containerId:l.value}),Z=Y4(l.value),te=Wt(()=>u.getComponentCardSidebarToggle()||sH);function Y(){A.value=!1;const K=b(a.location);K&&Z.registerSideBarShow(K,!1)}const W=Wt(()=>b(a.location));xi(W,K=>{A.value=!!K},{immediate:!0});function H(){t.value&&t.value.close()}const ne=Wt(()=>M(a.location)),le=Wt(()=>ne.value.filter(K=>K.id!==b(a.location)));function Q(K){t.value&&t.value.open(K)}function ce(K){Z.registerSideBarShow(K,!0)}return(K,Le)=>(xe(),et(Fn,null,[Pe("div",{class:ii(["sidebar-container auto-sidebar-container",{expand:re(P),show:re(A),"sidebar-horizontal-container":!re(O),"sidebar-vertical-container":re(O),[`${e.location}-sidebar-container`]:!!e.location}]),style:qr({"--sidebar-width":y.value,"--sidebar-height":x.value})},[Pe("div",lH,[(xe(),Rt(ps(re(B)),{width:"100%",height:"100%"},{default:nt(()=>[Pe("div",uH,[(xe(),Rt(ps(re(U)),null,{title:nt(()=>[Pe("div",cH,[Pe("span",{id:re(V)},null,8,hH)])]),"extra-btn":nt(()=>[Sn(K.$slots,"extra-btn",{},void 0,!0),le.value.length>0?(xe(),Rt(Na,{key:0,onClick:Q,"aria-label":"Open sidebar menu",role:"button"},{default:nt(()=>[je(re(i),{size:16})]),_:1})):rn("",!0),je(Na,{onClick:Y,"aria-label":"Close sidebar",role:"button"},{default:nt(()=>[je(re(n),{size:16})]),_:1})]),_:3})),Pe("div",{class:"draggable-sidebar-content",id:re(z)},[Sn(K.$slots,"default",{},void 0,!0)],8,dH)])]),_:3}))]),re(A)?(xe(),et("div",fH,[je(re(te),{onClick:re(L),expand:re(P),"aria-controls":"contentTo","aria-label":"Toggle expand",role:"button"},null,8,["onClick","expand"])])):rn("",!0)],6),je(re(nS),{ref_key:"contextMenuRef",ref:t},{default:nt(()=>[Pe("ul",pH,[(xe(!0),et(Fn,null,Or(le.value,(Ue,Be)=>(xe(),et("li",{key:Be,onClick:yr(tt=>{ce(Ue.id),H()},["stop"]),class:"context-menu__item clickable"},[Pe("span",{innerHTML:Ue.title},null,8,gH)],8,mH))),128))])]),_:1},512)],64))}}),Ub=_n(vH,[["__scopeId","data-v-4dd45bc8"]]),_H=["id"],bH=An({__name:"draggable-container",props:{containerId:{}},emits:{init:e=>!0,destroy:e=>!0,changeShow:e=>!0},setup(e,{emit:t}){const n=t,i=Kt(),a=Kt(e.containerId||`draggable-container-${wu()}`),u=Kt(!1),l=Q4(a.value);let s;const f=Om.debounce(()=>{fl(()=>{y()})},200);xi(()=>l.getItemShows(),x=>{const b=x.reduce((M,A)=>{const P=l.getItemAction(A),L=P.type.replace(/^item-/,"");if("location"in P&&typeof P.location=="string"){const O=`${P.location}Count`;M[L]??(M[L]={}),M[L][O]=(M[L][O]||0)+1}else{const O=`${L}Count`;M[O]=(M[O]||0)+1}return M},{});n("changeShow",{show:b,idsShow:x})},{deep:!0}),Er(()=>{l.initContainer(),window.addEventListener("resize",y),fl(()=>{y(),u.value=!0,n("init",a.value)}),i.value&&(s=new ResizeObserver(()=>{f()}),s.observe(i.value))}),ha(()=>{l.removeContainer(),window.removeEventListener("resize",y),n("destroy",a.value),s&&i.value&&(s.unobserve(i.value),s.disconnect())}),Uf("containerId",a);function y(){var b,M;const x=((b=i.value)==null?void 0:b.clientWidth)||0;l.setParentProps({width:x,height:((M=i.value)==null?void 0:M.clientHeight)||0,isMobile:x<600})}return(x,b)=>(xe(),et("div",{class:"draggable-container",ref_key:"box",ref:i,id:x.containerId},[a.value&&u.value?(xe(),et(Fn,{key:0},[je(Ub,{location:"left"}),je(Ub,{location:"right"}),je(Ub,{location:"top"}),je(Ub,{location:"bottom"})],64)):rn("",!0),a.value&&u.value?Sn(x.$slots,"default",{key:1,containerId:x.containerId},void 0,!0):rn("",!0)],8,_H))}}),xH=_n(bH,[["__scopeId","data-v-10398c69"]]);function AH(e,t,n){const i=Kt(`draggable-item-${wu()}`),a=Kt(0);function u(y){a.value=y}function l(y){t.value=y}const s=Y4(e);Er(()=>{s.registerSideBar(i.value,n.location),s.registerAction(i.value,{...n,setZIndex:u,setShow:l}),t.value&&s.registerSideBarShow(i.value,t.value)}),ha(()=>{s.unRegisterSideBar(i.value)}),xi(t,y=>{y&&s.registerSideBarShow(i.value,y)});const f=Wt(()=>n.location);return{itemId:i,zIndex:a,location:f}}const wH={key:0,class:"module-sidebar__container"},CH={name:"ModuleSidebarContainer"},IH=An({...CH,props:{containerId:{type:String,required:!0},itemId:{type:String,required:!0},location:{type:String,required:!0}},setup(e){const t=IM(),n=e,i=Wt(()=>n.containerId),{getShowForLocation:a}=eL(i.value),u=Wt(()=>`#sidebar-title-${i.value}-${n.location}`),l=Wt(()=>`#sidebar-content-${i.value}-${n.location}`),s=Wt(()=>!!t.title),f=Wt(()=>n.containerId&&n.itemId&&n.location&&n.itemId==a(n.location));return(y,x)=>f.value?(xe(),et("div",wH,[s.value?(xe(),Rt(g1,{key:0,to:u.value},[Sn(y.$slots,"title",{},void 0,!0)],8,["to"])):rn("",!0),(xe(),Rt(g1,{to:l.value},[Sn(y.$slots,"default",{},void 0,!0)],8,["to"]))])):rn("",!0)}}),MH=_n(IH,[["__scopeId","data-v-382a9258"]]),SH={name:"DraggableItemSideBar"},EH=An({...SH,props:{...QA,...rS,...XA,componentMapSidebarToggle:{type:[String,Object]},width:{type:[Number,String],default:"auto"},right:Boolean,location:{type:[String]}},emits:{...JA,...tw},setup(e,{emit:t}){const n=e,i=t,a=ca("containerId",Kt(n.containerId||""));if(!a.value)throw"Not set container id";const{show:u,open:l,close:s}=t_(n,i),f=n.location!=null?n.location:n.right?"right":"left",{location:y,itemId:x}=AH(a.value,u,{title:n.title,type:"item-sidebar",location:f});return YA(a.value,x.value,{open:l,close:s}),(b,M)=>(xe(),Rt(MH,{"container-id":re(a),location:re(y),"item-id":re(x)},{title:nt(()=>[Sn(b.$slots,"title",{},()=>[Wr(an(b.title),1)])]),default:nt(()=>[Sn(b.$slots,"default")]),_:3},8,["container-id","location","item-id"]))}});function lP(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function Yg(e,t,n,i=1){const[a,u]=typeof i=="number"?[i,i]:i,l=Math.round(t/a/e[0])*e[0],s=Math.round(n/u/e[1])*e[1];return[l,s]}function uC(e,t,n){return e-t-n}function cC(e,t,n){return e-t-n}function cu(e,t,n){return t!==null&&e<t?t:n!==null&&n<e?n:e}function uP(e,t,n){let i=e;const a=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(u=>lP(i[u]));if(!lP(i[a]))return!1;do{if(i[a](t))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1}function TH(e){const t=window.getComputedStyle(e);return[parseFloat(t.getPropertyValue("width"),10),parseFloat(t.getPropertyValue("height"),10)]}function dm(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function rd(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}const PH=(e,t)=>{const n=e.__vccOpts||e;for(const[i,a]of t)n[i]=a;return n},cx={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},kH={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},LH={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let id=cx.mouse;const DH={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:e=>typeof e=="number"?e>0:e==="auto"},h:{type:[Number,String],default:200,validator:e=>typeof e=="number"?e>0:e==="auto"},minWidth:{type:Number,default:0,validator:e=>e>=0},minHeight:{type:Number,default:0,validator:e=>e>=0},maxWidth:{type:Number,default:null,validator:e=>e>=0},maxHeight:{type:Number,default:null,validator:e=>e>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:e=>typeof e=="string"?e==="auto":e>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:e=>{const t=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(e.filter(n=>t.has(n))).size===e.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:e=>["x","y","both"].includes(e)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:e=>typeof e=="number"?e>0:e.length===2&&e[0]>0&&e[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[e,t]=this.getParentSize();this.parentWidth=e,this.parentHeight=t;const[n,i]=TH(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:n)/(this.h!=="auto"?this.h:i),this.width=this.w!=="auto"?this.w:n,this.height=this.h!=="auto"?this.h:i,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),dm(document.documentElement,"mousedown",this.deselect),dm(document.documentElement,"touchend touchcancel",this.deselect),dm(window,"resize",this.checkParentSize)},beforeUnmount:function(){rd(document.documentElement,"mousedown",this.deselect),rd(document.documentElement,"touchstart",this.handleUp),rd(document.documentElement,"mousemove",this.move),rd(document.documentElement,"touchmove",this.move),rd(document.documentElement,"mouseup",this.handleUp),rd(document.documentElement,"touchend touchcancel",this.deselect),rd(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[e,t]=this.getParentSize();this.parentWidth=e,this.parentHeight=t,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const e=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(e.getPropertyValue("width"),10),parseInt(e.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(e){id=cx.touch,this.elementDown(e)},elementMouseDown(e){id=cx.mouse,this.elementDown(e)},elementDown(e){if(e instanceof MouseEvent&&e.button!==0)return;const t=e.target||e.srcElement;if(this.$el.contains(t)){if(this.onDragStart(e)===!1)return;if(this.dragHandle&&!uP(t,this.dragHandle,this.$el)||this.dragCancel&&uP(t,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),dm(document.documentElement,id.move,this.move),dm(document.documentElement,id.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(e){const t=e.target||e.srcElement,n=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(t)&&!n.test(t.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),rd(document.documentElement,id.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(e,t){id=cx.touch,this.handleDown(e,t)},handleDown(e,t){t instanceof MouseEvent&&t.which!==1||this.onResizeStart(e,t)!==!1&&(t.stopPropagation&&t.stopPropagation(),this.lockAspectRatio&&!e.includes("m")?this.handle="m"+e.substring(1):this.handle=e,this.resizeEnable=!0,this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),dm(document.documentElement,id.move,this.handleResize),dm(document.documentElement,id.stop,this.handleUp))},calcResizeLimits(){let e=this.minW,t=this.minH,n=this.maxW,i=this.maxH;const a=this.aspectFactor,[u,l]=this.grid,s=this.width,f=this.height,y=this.left,x=this.top,b=this.right,M=this.bottom;this.lockAspectRatio&&(e/t>a?t=e/a:e=a*t,n&&i?(n=Math.min(n,a*i),i=Math.min(i,n/a)):n?i=n/a:i&&(n=a*i)),n=n-n%u,i=i-i%l;const A={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(A.minLeft=y%u,A.maxLeft=y+Math.floor((s-e)/u)*u,A.minTop=x%l,A.maxTop=x+Math.floor((f-t)/l)*l,A.minRight=b%u,A.maxRight=b+Math.floor((s-e)/u)*u,A.minBottom=M%l,A.maxBottom=M+Math.floor((f-t)/l)*l,n&&(A.minLeft=Math.max(A.minLeft,this.parentWidth-b-n),A.minRight=Math.max(A.minRight,this.parentWidth-y-n)),i&&(A.minTop=Math.max(A.minTop,this.parentHeight-M-i),A.minBottom=Math.max(A.minBottom,this.parentHeight-x-i)),this.lockAspectRatio&&(A.minLeft=Math.max(A.minLeft,y-x*a),A.minTop=Math.max(A.minTop,x-y/a),A.minRight=Math.max(A.minRight,b-M*a),A.minBottom=Math.max(A.minBottom,M-b/a))):(A.minLeft=null,A.maxLeft=y+Math.floor((s-e)/u)*u,A.minTop=null,A.maxTop=x+Math.floor((f-t)/l)*l,A.minRight=null,A.maxRight=b+Math.floor((s-e)/u)*u,A.minBottom=null,A.maxBottom=M+Math.floor((f-t)/l)*l,n&&(A.minLeft=-(b+n),A.minRight=-(y+n)),i&&(A.minTop=-(M+i),A.minBottom=-(x+i)),this.lockAspectRatio&&n&&i&&(A.minLeft=Math.min(A.minLeft,-(b+n)),A.minTop=Math.min(A.minTop,-(i+M)),A.minRight=Math.min(A.minRight,-y-n),A.minBottom=Math.min(A.minBottom,-x-i))),A},move(e){this.resizing?this.handleResize(e):this.dragEnable&&this.handleDrag(e)},handleDrag(e){const t=this.axis,n=this.grid,i=this.bounds,a=this.mouseClickPosition,u=t&&t!=="y"?a.mouseX-(e.touches?e.touches[0].pageX:e.pageX):0,l=t&&t!=="x"?a.mouseY-(e.touches?e.touches[0].pageY:e.pageY):0,[s,f]=Yg(n,u,l,this.scale),y=cu(a.left-s,i.minLeft,i.maxLeft),x=cu(a.top-f,i.minTop,i.maxTop);if(this.onDrag(y,x)===!1)return;const b=cu(a.right+s,i.minRight,i.maxRight),M=cu(a.bottom+f,i.minBottom,i.maxBottom);this.left=y,this.top=x,this.right=b,this.bottom=M,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(e){const[t,n]=Yg(this.grid,e,this.top,1),i=cu(t,this.bounds.minLeft,this.bounds.maxLeft);this.left=i,this.right=this.parentWidth-this.width-i},moveVertically(e){const[t,n]=Yg(this.grid,this.left,e,1),i=cu(n,this.bounds.minTop,this.bounds.maxTop);this.top=i,this.bottom=this.parentHeight-this.height-i},handleResize(e){let t=this.left,n=this.top,i=this.right,a=this.bottom;const u=this.mouseClickPosition,l=this.aspectFactor,s=u.mouseX-(e.touches?e.touches[0].pageX:e.pageX),f=u.mouseY-(e.touches?e.touches[0].pageY:e.pageY);!this.widthTouched&&s&&(this.widthTouched=!0),!this.heightTouched&&f&&(this.heightTouched=!0);const[y,x]=Yg(this.grid,s,f,this.scale);this.handle.includes("b")?(a=cu(u.bottom+x,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(i=this.right-(this.bottom-a)*l)):this.handle.includes("t")&&(n=cu(u.top-x,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(t=this.left-(this.top-n)*l)),this.handle.includes("r")?(i=cu(u.right+y,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(a=this.bottom-(this.right-i)/l)):this.handle.includes("l")&&(t=cu(u.left-y,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(n=this.top-(this.left-t)/l));const b=uC(this.parentWidth,t,i),M=cC(this.parentHeight,n,a);this.onResize(this.handle,t,n,b,M)!==!1&&(this.left=t,this.top=n,this.right=i,this.bottom=a,this.width=b,this.height=M,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(e){const[t,n]=Yg(this.grid,e,0,1),i=cu(this.parentWidth-t-this.left,this.bounds.minRight,this.bounds.maxRight);let a=this.bottom;this.lockAspectRatio&&(a=this.bottom-(this.right-i)/this.aspectFactor);const u=uC(this.parentWidth,this.left,i),l=cC(this.parentHeight,this.top,a);this.right=i,this.bottom=a,this.width=u,this.height=l},changeHeight(e){const[t,n]=Yg(this.grid,0,e,1),i=cu(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom);let a=this.right;this.lockAspectRatio&&(a=this.right-(this.bottom-i)*this.aspectFactor);const u=uC(this.parentWidth,this.left,a),l=cC(this.parentHeight,this.top,i);this.right=a,this.bottom=i,this.width=u,this.height=l},handleUp(e){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),rd(document.documentElement,id.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?kH:LH}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(e){this.enabled=e,e?this.$emit("activated"):this.$emit("deactivated")},z(e){(e>=0||e==="auto")&&(this.zIndex=e)},x(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(e))},y(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(e))},lockAspectRatio(e){e?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(e))},h(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(e))}}},RH=["onMousedown","onTouchstart"];function OH(e,t,n,i,a,u){return xe(),et("div",{style:qr(u.style),class:ii([{[n.classNameActive]:e.enabled,[n.classNameDragging]:e.dragging,[n.classNameResizing]:e.resizing,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:t[0]||(t[0]=(...l)=>u.elementMouseDown&&u.elementMouseDown(...l)),onTouchstart:t[1]||(t[1]=(...l)=>u.elementTouchDown&&u.elementTouchDown(...l))},[(xe(!0),et(Fn,null,Or(u.actualHandles,l=>(xe(),et("div",{key:l,class:ii([n.classNameHandle,n.classNameHandle+"-"+l]),style:qr({display:e.enabled?"block":"none"}),onMousedown:yr(s=>u.handleDown(l,s),["stop","prevent"]),onTouchstart:yr(s=>u.handleTouchDown(l,s),["stop","prevent"])},[Sn(e.$slots,l)],46,RH))),128)),Sn(e.$slots,"default")],38)}const tL=PH(DH,[["render",OH]]);function II(e){II.installed||(II.installed=!0,e.component("VueDraggableResizable",tL))}const zH={install:II};let Gx=null;typeof window<"u"?Gx=window.Vue:typeof global<"u"&&(Gx=global.Vue);Gx&&Gx.use(zH);const FH={class:"draggable-popup-desktop"},BH={class:"draggable-popup-drag-container"},NH={class:"draggable-popup-desktop-content"},VH={name:"DraggableItemPopup"},jH=An({...VH,props:{...QA,...aS,...XA,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...JA,...tw},setup(e,{emit:t}){const{CloseIcon:n,CloseExpandedIcon:i,DragIcon:a,ExpandedIcon:u,ToBackIcon:l,ToFrontIcon:s}=e_(),f=e,y=t,x=ca("containerId",Kt(f.containerId||""));if(!x.value)throw"Not set container id";const{show:b,open:M,close:A}=t_(f,y),{zIndex:P,itemId:L}=iS(x.value,b,{title:f.title,type:"item-popup"}),{isHighlight:O,setHighLight:V}=oS();YA(x.value,L.value,{setHighLight:V,open:M,close:A});const{containerWidth:z,containerHeight:B}=J4(x.value),{isLast:U,isFirst:Z,isHasItems:te,onToBack:Y,onToFront:W}=sS(x.value,L.value),H=Kt(!1),ne=Kt(!1),le=Kt(f.height||200),Q=Kt(le.value),ce=Kt(f.width||200),K=Kt(0),Le=Kt(0),{expand:Ue}=ew(f,y,!0);function Be(){ne.value=!0}function tt(){ne.value=!1}const{componentCard:ut,componentCardHeader:Tt}=KA({...f,containerId:x.value});function Ge(en,pt,ft,ot){ce.value=ft,le.value=ot}function Ne(){b.value=!1}xi(b,()=>{Dt()},{immediate:!0});function Dt(){H.value=!1,b&&(f.left!=null&&(K.value=f.left),f.top!=null&&(Le.value=f.top),f.right&&(K.value=z.value-f.right-ce.value),f.bottom&&(Le.value=B.value-f.bottom-le.value),(f.center||f.centerX)&&(K.value=(z.value-ce.value)/2),(f.center||f.centerY)&&(Le.value=(B.value-le.value)/2),H.value=!0)}function Bt(){Ue.value&&le.value>50&&(Q.value=le.value),Ue.value=!Ue.value,le.value=Ue.value?Q.value:50}function St(){var en;(en=window==null?void 0:window.getSelection())==null||en.removeAllRanges()}return(en,pt)=>re(b)&&H.value?(xe(),Rt(re(tL),Qn({key:0},en.$attrs,{dragHandle:".drag",parent:!0,handles:e.sticks,w:ce.value,h:le.value,x:K.value,y:Le.value,z:re(P),onResizing:Ge,active:ne.value,onActivated:pt[2]||(pt[2]=ft=>Be()),onDeactivated:pt[3]||(pt[3]=ft=>tt()),onDragging:St}),{default:nt(()=>[(xe(),Rt(ps(re(ut)),{width:ce.value,height:le.value,highlight:re(O)},{default:nt(()=>[Pe("div",FH,[en.disabledHeader?rn("",!0):(xe(),Rt(ps(re(Tt)),{key:0},{title:nt(()=>[Sn(en.$slots,"title",{},()=>[Wr(an(en.title),1)],!0)]),"pre-title":nt(()=>[Pe("div",BH,[je(re(a),{size:16}),pt[4]||(pt[4]=Pe("div",{class:"drag grabbing"},null,-1))])]),"extra-btn":nt(()=>[Sn(en.$slots,"extra-btn",{},void 0,!0),re(te)&&!en.disabledOrder?(xe(),et(Fn,{key:0},[je(Na,{disabled:re(Z),onClick:pt[0]||(pt[0]=ft=>re(Y)())},{default:nt(()=>[je(re(l),{size:16})]),_:1},8,["disabled"]),je(Na,{disabled:re(U),onClick:pt[1]||(pt[1]=ft=>re(W)())},{default:nt(()=>[je(re(s),{size:16})]),_:1},8,["disabled"])],64)):rn("",!0),je(Na,{onClick:Bt},{default:nt(()=>[re(Ue)?(xe(),Rt(re(u),{key:0,size:16})):(xe(),Rt(re(i),{key:1,size:16}))]),_:1}),en.disabledClose?rn("",!0):(xe(),Rt(Na,{key:1,onClick:Ne},{default:nt(()=>[je(re(n),{size:16})]),_:1}))]),_:3})),pl(Pe("div",NH,[Sn(en.$slots,"default",{},void 0,!0)],512),[[Z1,re(Ue)]])])]),_:3},8,["width","height","highlight"]))]),_:3},16,["handles","w","h","x","y","z","active"])):rn("",!0)}}),UH=_n(jH,[["__scopeId","data-v-2f7ca89c"]]),$H={class:"draggable-float"},HH={name:"DraggableItemFloat"},GH=An({...HH,props:{...QA,...aS,...XA,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(e){return["top","bottom"].includes(e)}}},emits:{...JA,...tw},setup(e,{emit:t}){const{CloseIcon:n,ToBackIcon:i,ToFrontIcon:a,ExpandedIcon:u,CloseExpandedIcon:l}=e_(),s=e,f=t,y=ca("containerId",Kt(s.containerId||""));if(!y.value)throw"Not set container id";const{show:x,open:b,close:M}=t_(s,f),{zIndex:A,itemId:P}=iS(y.value,x,{title:s.title,type:"item-float"}),{isHighlight:L,setHighLight:O}=oS();YA(y.value,P.value,{setHighLight:O,open:b,close:M});const{isLast:V,isFirst:z,isHasItems:B,onToBack:U,onToFront:Z}=sS(y.value,P.value),{expand:te,toggle:Y}=ew(s,f,!0),{componentCard:W,componentCardHeader:H}=KA({...s,containerId:y.value});function ne(){x.value=!1}const le=Wt(()=>{let K={};return K.zIndex=A.value,s.top&&(K.top=s.top+"px"),s.left&&(K.left=s.left+"px"),s.right&&(K.right=s.right+"px"),s.bottom&&(K.bottom=s.bottom+"px"),s.width&&s.width!="auto"&&(s.width&&!isNaN(+s.width)?K.width=s.width+"px":K.width=s.width),K}),Q=Wt(()=>{let K={};return K.maxHeight=s.maxHeight+"px",K}),ce=Wt(()=>!s.width||s.width=="auto");return(K,Le)=>re(x)?(xe(),et("div",{key:0,class:ii(["float-container",{"auto-float-container":ce.value}]),style:qr(le.value)},[(xe(),Rt(ps(re(W)),{highlight:re(L)},{default:nt(()=>[Pe("div",$H,[!K.disabledHeader&&e.headerLocation==="top"?(xe(),Rt(ps(re(H)),{key:0},{title:nt(()=>[Sn(K.$slots,"title",{},()=>[Wr(an(K.title),1)],!0)]),"extra-btn":nt(()=>[Sn(K.$slots,"extra-btn",{},void 0,!0),je(Na,{onClick:re(Y)},{default:nt(()=>[re(te)?(xe(),Rt(re(u),{key:0,size:16})):(xe(),Rt(re(l),{key:1,size:16}))]),_:1},8,["onClick"]),re(B)&&!K.disabledOrder?(xe(),et(Fn,{key:0},[je(Na,{disabled:re(z),onClick:Le[0]||(Le[0]=Ue=>re(U)())},{default:nt(()=>[je(re(i),{size:16})]),_:1},8,["disabled"]),je(Na,{disabled:re(V),onClick:Le[1]||(Le[1]=Ue=>re(Z)())},{default:nt(()=>[je(re(a),{size:16})]),_:1},8,["disabled"])],64)):rn("",!0),K.disabledClose?rn("",!0):(xe(),Rt(Na,{key:1,onClick:ne},{default:nt(()=>[je(re(n),{size:16})]),_:1}))]),_:3})):rn("",!0),pl(Pe("div",{class:"draggable-float-content",style:qr(Q.value)},[Sn(K.$slots,"default",{},void 0,!0)],4),[[Z1,re(te)]]),!K.disabledHeader&&e.headerLocation==="bottom"?(xe(),Rt(ps(re(H)),{key:1},{title:nt(()=>[Sn(K.$slots,"title",{},()=>[Wr(an(K.title),1)],!0)]),"extra-btn":nt(()=>[Sn(K.$slots,"extra-btn",{},void 0,!0),je(Na,{onClick:re(Y)},{default:nt(()=>[re(te)?(xe(),Rt(re(u),{key:0,size:16})):(xe(),Rt(re(l),{key:1,size:16}))]),_:1},8,["onClick"]),re(B)&&!K.disabledOrder?(xe(),et(Fn,{key:0},[je(Na,{disabled:re(z),onClick:Le[2]||(Le[2]=Ue=>re(U)())},{default:nt(()=>[je(re(i),{size:16})]),_:1},8,["disabled"]),je(Na,{disabled:re(V),onClick:Le[3]||(Le[3]=Ue=>re(Z)())},{default:nt(()=>[je(re(a),{size:16})]),_:1},8,["disabled"])],64)):rn("",!0),K.disabledClose?rn("",!0):(xe(),Rt(Na,{key:1,onClick:ne},{default:nt(()=>[je(re(n),{size:16})]),_:1}))]),_:3})):rn("",!0)])]),_:3},8,["highlight"]))],6)):rn("",!0)}}),ZH=_n(GH,[["__scopeId","data-v-6820132a"]]),WH={class:"draggable-bottom"},qH={class:"draggable-bottom-content"},KH={name:"DraggableItemBottom"},YH=An({...KH,props:{...QA,...aS,...XA},emits:{...JA,...tw},setup(e,{emit:t}){const{CloseIcon:n,ToBackIcon:i,FullscreenIcon:a,OffFullscreenIcon:u}=e_(),l=e,s=t,f=ca("containerId",Kt(l.containerId||""));if(!f.value)throw"Not set container id";const{show:y,open:x,close:b}=t_(l,s),{zIndex:M,itemId:A}=iS(f.value,y,{title:l.title,type:"item-bottom"}),{isHighlight:P,setHighLight:L}=oS();YA(f.value,A.value,{setHighLight:L,open:x,close:b});const{isFirst:O,isHasItems:V,onToBack:z}=sS(f.value,A.value),{expand:B,toggle:U}=ew(l,s,!1),{componentCard:Z,componentCardHeader:te}=KA({...l,containerId:f.value});function Y(){y.value=!1}const W=Wt(()=>{let H={};return H.zIndex=M.value,H.height=B.value?"100%":"45%",H});return(H,ne)=>re(y)?(xe(),et("div",{key:0,class:"popup-mobile-container",style:qr(W.value)},[(xe(),Rt(ps(re(Z)),{highlight:re(P)},{default:nt(()=>[Pe("div",WH,[H.disabledHeader?rn("",!0):(xe(),Rt(ps(re(te)),{key:0},{title:nt(()=>[Sn(H.$slots,"title",{},()=>[Wr(an(H.title),1)],!0)]),"extra-btn":nt(()=>[Sn(H.$slots,"extra-btn",{},void 0,!0),re(V)&&!H.disabledOrder?(xe(),Rt(Na,{key:0,disabled:re(O),onClick:ne[0]||(ne[0]=yr(le=>re(z)(),["prevent","stop"]))},{default:nt(()=>[je(re(i),{size:16})]),_:1},8,["disabled"])):rn("",!0),je(Na,{onClick:ne[1]||(ne[1]=le=>re(U)())},{default:nt(()=>[re(B)?(xe(),Rt(re(a),{key:0,size:16})):(xe(),Rt(re(u),{key:1,size:16}))]),_:1}),H.disabledClose?rn("",!0):(xe(),Rt(Na,{key:1,onClick:Y},{default:nt(()=>[je(re(n),{size:16})]),_:1}))]),_:3})),Pe("div",qH,[Sn(H.$slots,"default",{},void 0,!0)])])]),_:3},8,["highlight"]))],4)):rn("",!0)}}),lS=_n(YH,[["__scopeId","data-v-c4791739"]]);function uS(e,t){return An({name:"WithMobileHandle"+e.name,props:{containerId:String},setup(n){const i=ca("containerId",Kt(n.containerId||"")),a=hU(i.value),u=Wt(()=>a.getIsMobile());return{p_containerId:i,isMobile:u}},render(){return this.isMobile?ja(t,{...this.$attrs,containerId:this.p_containerId},this.$slots):ja(e,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const n_=uS(EH,lS),vc=uS(UH,lS);uS(ZH,lS);const XH={class:"module__container"},QH={name:"ModuleContainer"},JH=Object.assign(QH,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(e){return["top-left","top-right","bottom-left","bottom-right"].indexOf(e)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(e){const t=IM(),n=e,i=Wt(()=>!!t.btn),a=Wt(()=>!!t.draggable),u=ca("$map.dragId"),l=ca("$map.id"),s=Wt(()=>n.dragId||u),f=Wt(()=>n.mapId||l),y=Wt(()=>`#map-draggable-${f.value}`),x=Wt(()=>`#${n.position}-${f.value}`),b=Wt(()=>{let M={};return n.position.includes("left")&&(M.left=18+n.btnWidth),n.position.includes("right")&&(M.right=18+n.btnWidth),n.position.includes("top")&&(M.top=10),n.position.includes("bottom")&&(M.bottom=10),M.containerId=s.value,M});return(M,A)=>(xe(),et("div",XH,[e.controlVisible&&i.value?(xe(),Rt(g1,{key:0,to:x.value},[Sn(M.$slots,"btn",{},void 0,!0)],8,["to"])):rn("",!0),Sn(M.$slots,"default",{},void 0,!0),s.value&&a.value?(xe(),Rt(g1,{key:1,to:y.value},[Sn(M.$slots,"draggable",Ui(Di(b.value)),void 0,!0)],8,["to"])):rn("",!0)]))}}),$i=_n(JH,[["__scopeId","data-v-35db38a4"]]);var nL={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(e,t){(function(n,i){e.exports=i()})(la,function(){var n={},i={};function a(l,s,f){if(i[l]=f,l==="index"){var y="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",x={};return i.shared(x),i.index(n,x),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([y],{type:"text/javascript"}))),n}}a("shared",["exports"],function(l){function s(h,o,d,p){return new(d||(d=Promise))(function(_,S){function E(j){try{F(p.next(j))}catch(q){S(q)}}function k(j){try{F(p.throw(j))}catch(q){S(q)}}function F(j){var q;j.done?_(j.value):(q=j.value,q instanceof d?q:new d(function(ee){ee(q)})).then(E,k)}F((p=p.apply(h,o||[])).next())})}function f(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var y,x;function b(){if(x)return y;function h(o,d){this.x=o,this.y=d}return x=1,y=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,d){return this.clone()._rotateAround(o,d)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var d=o.x-this.x,p=o.y-this.y;return d*d+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,d){return Math.atan2(this.x*d-this.y*o,this.x*o+this.y*d)},_matMult:function(o){var d=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=d,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var d=Math.cos(o),p=Math.sin(o),_=p*this.x+d*this.y;return this.x=d*this.x-p*this.y,this.y=_,this},_rotateAround:function(o,d){var p=Math.cos(o),_=Math.sin(o),S=d.y+_*(this.x-d.x)+p*(this.y-d.y);return this.x=d.x+p*(this.x-d.x)-_*(this.y-d.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(o){return o instanceof h?o:Array.isArray(o)?new h(o[0],o[1]):o},y}typeof SuppressedError=="function"&&SuppressedError;var M,A,P=f(b()),L=function(){if(A)return M;function h(o,d,p,_){this.cx=3*o,this.bx=3*(p-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(_-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=d,this.p2x=p,this.p2y=_}return A=1,M=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,d){if(d===void 0&&(d=1e-6),o<0)return 0;if(o>1)return 1;for(var p=o,_=0;_<8;_++){var S=this.sampleCurveX(p)-o;if(Math.abs(S)<d)return p;var E=this.sampleCurveDerivativeX(p);if(Math.abs(E)<1e-6)break;p-=S/E}var k=0,F=1;for(p=o,_=0;_<20&&(S=this.sampleCurveX(p),!(Math.abs(S-o)<d));_++)o>S?k=p:F=p,p=.5*(F-k)+k;return p},solve:function(o,d){return this.sampleCurveY(this.solveCurveX(o,d))}},M}(),O=f(L);let V,z;function B(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function U(){if(z==null&&(z=!1,B())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let p=0;p<5*5;p++){const _=4*p;o.fillStyle=`rgb(${_},${_+1},${_+2})`,o.fillRect(p%5,Math.floor(p/5),1,1)}const d=o.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&d[p]!==p){z=!0;break}}}return z||!1}var Z=1e-6,te=typeof Float32Array<"u"?Float32Array:Array;function Y(){var h=new te(9);return te!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function W(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function H(){var h=new te(3);return te!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function ne(h){return Math.hypot(h[0],h[1],h[2])}function le(h,o,d){var p=new te(3);return p[0]=h,p[1]=o,p[2]=d,p}Math.hypot||(Math.hypot=function(){for(var h=0,o=arguments.length;o--;)h+=arguments[o]*arguments[o];return Math.sqrt(h)});var Q,ce=ne;function K(h,o,d){var p=o[0],_=o[1],S=o[2],E=o[3];return h[0]=d[0]*p+d[4]*_+d[8]*S+d[12]*E,h[1]=d[1]*p+d[5]*_+d[9]*S+d[13]*E,h[2]=d[2]*p+d[6]*_+d[10]*S+d[14]*E,h[3]=d[3]*p+d[7]*_+d[11]*S+d[15]*E,h}function Le(){var h=new te(4);return te!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Ue(){var h=new te(2);return te!=Float32Array&&(h[0]=0,h[1]=0),h}function Be(h,o){var d=new te(2);return d[0]=h,d[1]=o,d}H(),Q=new te(4),te!=Float32Array&&(Q[0]=0,Q[1]=0,Q[2]=0,Q[3]=0),H(),le(1,0,0),le(0,1,0),Le(),Le(),Y(),Ue();const tt=8192;function ut(h,o,d){return o*(tt/(h.tileSize*Math.pow(2,d-h.tileID.overscaledZ)))}function Tt(h,o){return(h%o+o)%o}function Ge(h,o,d){return h*(1-d)+o*d}function Ne(h){if(h<=0)return 0;if(h>=1)return 1;const o=h*h,d=o*h;return 4*(h<.5?d:3*(h-o)+d-.75)}function Dt(h,o,d,p){const _=new O(h,o,d,p);return S=>_.solve(S)}const Bt=Dt(.25,.1,.25,1);function St(h,o,d){return Math.min(d,Math.max(o,h))}function en(h,o,d){const p=d-o,_=((h-o)%p+p)%p+o;return _===o?d:_}function pt(h,...o){for(const d of o)for(const p in d)h[p]=d[p];return h}let ft=1;function ot(h,o,d){const p={};for(const _ in h)p[_]=o.call(this,h[_],_,h);return p}function Pt(h,o,d){const p={};for(const _ in h)o.call(this,h[_],_,h)&&(p[_]=h[_]);return p}function Lt(h){return Array.isArray(h)?h.map(Lt):typeof h=="object"&&h?ot(h,Lt):h}const un={};function Ie(h){un[h]||(typeof console<"u"&&console.warn(h),un[h]=!0)}function $(h,o,d){return(d.y-h.y)*(o.x-h.x)>(o.y-h.y)*(d.x-h.x)}function Te(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Oe=null;function ye(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Fe(h,o,d,p,_){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(h,{timestamp:0});try{const E=S==null?void 0:S.format;if(!E||!E.startsWith("BGR")&&!E.startsWith("RGB"))throw new Error(`Unrecognized format ${E}`);const k=E.startsWith("BGR"),F=new Uint8ClampedArray(p*_*4);if(yield S.copyTo(F,function(j,q,ee,oe,ue){const he=4*Math.max(1,0),be=(Math.max(0,ee)-ee)*oe*4+he,Me=4*oe,ze=Math.max(0,q),st=Math.max(0,ee);return{rect:{x:ze,y:st,width:Math.min(j.width,q+oe)-ze,height:Math.min(j.height,ee+ue)-st},layout:[{offset:be,stride:Me}]}}(h,o,d,p,_)),k)for(let j=0;j<F.length;j+=4){const q=F[j];F[j]=F[j+2],F[j+2]=q}return F}finally{S.close()}})}let rt,at;function Ve(h,o,d,p){return h.addEventListener(o,d,p),{unsubscribe:()=>{h.removeEventListener(o,d,p)}}}function Mt(h){return h/Math.PI*180}const wt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},At={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Gt="AbortError";function dn(){return new Error(Gt)}const pn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ct(h){return pn.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const mt="global-dispatcher";class _t extends Error{constructor(o,d,p,_){super(`AJAXError: ${d} (${o}): ${p}`),this.status=o,this.statusText=d,this.url=p,this.body=_}}const jt=()=>Te(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,qt=function(h,o){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const p=ct(h.url);if(p)return p(h,o);if(Te(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:mt},o)}if(!(/^file:/.test(d=h.url)||/^file:/.test(jt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,_){return s(this,void 0,void 0,function*(){const S=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:jt(),signal:_.signal});let E,k;p.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{E=yield fetch(S)}catch(j){throw new _t(0,j.message,p.url,new Blob)}if(!E.ok){const j=yield E.blob();throw new _t(E.status,E.statusText,p.url,j)}k=p.type==="arrayBuffer"||p.type==="image"?E.arrayBuffer():p.type==="json"?E.json():E.text();const F=yield k;if(_.signal.aborted)throw dn();return{data:F,cacheControl:E.headers.get("Cache-Control"),expires:E.headers.get("Expires")}})}(h,o);if(Te(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:mt},o)}var d;return function(p,_){return new Promise((S,E)=>{var k;const F=new XMLHttpRequest;F.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(F.responseType="arraybuffer");for(const j in p.headers)F.setRequestHeader(j,p.headers[j]);p.type==="json"&&(F.responseType="text",!((k=p.headers)===null||k===void 0)&&k.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=p.credentials==="include",F.onerror=()=>{E(new Error(F.statusText))},F.onload=()=>{if(!_.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let j=F.response;if(p.type==="json")try{j=JSON.parse(F.response)}catch(q){return void E(q)}S({data:j,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const j=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});E(new _t(F.status,F.statusText,p.url,j))}},_.signal.addEventListener("abort",()=>{F.abort(),E(dn())}),F.send(p.body)})}(h,o)};function Cn(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const o=new URL(h),d=window.location;return o.protocol===d.protocol&&o.host===d.host}function Xe(h,o,d){d[h]&&d[h].indexOf(o)!==-1||(d[h]=d[h]||[],d[h].push(o))}function de(h,o,d){if(d&&d[h]){const p=d[h].indexOf(o);p!==-1&&d[h].splice(p,1)}}class ge{constructor(o,d={}){pt(this,d),this.type=o}}class Ae extends ge{constructor(o,d={}){super("error",pt({error:o},d))}}class Se{on(o,d){return this._listeners=this._listeners||{},Xe(o,d,this._listeners),{unsubscribe:()=>{this.off(o,d)}}}off(o,d){return de(o,d,this._listeners),de(o,d,this._oneTimeListeners),this}once(o,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Xe(o,d,this._oneTimeListeners),this):new Promise(p=>this.once(o,p))}fire(o,d){typeof o=="string"&&(o=new ge(o,d||{}));const p=o.type;if(this.listens(p)){o.target=this;const _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const k of _)k.call(this,o);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const k of S)de(p,k,this._oneTimeListeners),k.call(this,o);const E=this._eventedParent;E&&(pt(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(o))}else o instanceof Ae&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,d){return this._eventedParent=o,this._eventedParentData=d,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Qe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function dt(h,o){const d={};for(const p in h)p!=="ref"&&(d[p]=h[p]);return Qe.forEach(p=>{p in o&&(d[p]=o[p])}),d}function We(h,o){if(Array.isArray(h)){if(!Array.isArray(o)||h.length!==o.length)return!1;for(let d=0;d<h.length;d++)if(!We(h[d],o[d]))return!1;return!0}if(typeof h=="object"&&h!==null&&o!==null){if(typeof o!="object"||Object.keys(h).length!==Object.keys(o).length)return!1;for(const d in h)if(!We(h[d],o[d]))return!1;return!0}return h===o}function Et(h,o){h.push(o)}function Ot(h,o,d){Et(d,{command:"addSource",args:[h,o[h]]})}function yt(h,o,d){Et(o,{command:"removeSource",args:[h]}),d[h]=!0}function Yt(h,o,d,p){yt(h,d,p),Ot(h,o,d)}function mn(h,o,d){let p;for(p in h[d])if(Object.prototype.hasOwnProperty.call(h[d],p)&&p!=="data"&&!We(h[d][p],o[d][p]))return!1;for(p in o[d])if(Object.prototype.hasOwnProperty.call(o[d],p)&&p!=="data"&&!We(h[d][p],o[d][p]))return!1;return!0}function gn(h,o,d,p,_,S){h=h||{},o=o||{};for(const E in h)Object.prototype.hasOwnProperty.call(h,E)&&(We(h[E],o[E])||d.push({command:S,args:[p,E,o[E],_]}));for(const E in o)Object.prototype.hasOwnProperty.call(o,E)&&!Object.prototype.hasOwnProperty.call(h,E)&&(We(h[E],o[E])||d.push({command:S,args:[p,E,o[E],_]}))}function Un(h){return h.id}function Jn(h,o){return h[o.id]=o,h}class Vt{constructor(o,d,p,_){this.message=(o?`${o}: `:"")+p,_&&(this.identifier=_),d!=null&&d.__line__&&(this.line=d.__line__)}}function $n(h,...o){for(const d of o)for(const p in d)h[p]=d[p];return h}class Ar extends Error{constructor(o,d){super(d),this.message=d,this.key=o}}class Ur{constructor(o,d=[]){this.parent=o,this.bindings={};for(const[p,_]of d)this.bindings[p]=_}concat(o){return new Ur(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const wr={kind:"null"},Ht={kind:"number"},bn={kind:"string"},Bn={kind:"boolean"},Ws={kind:"color"},Os={kind:"projectionDefinition"},oi={kind:"object"},Yn={kind:"value"},_h={kind:"collator"},Su={kind:"formatted"},Ad={kind:"padding"},$l={kind:"resolvedImage"},wd={kind:"variableAnchorOffsetCollection"};function Gi(h,o){return{kind:"array",itemType:h,N:o}}function li(h){if(h.kind==="array"){const o=li(h.itemType);return typeof h.N=="number"?`array<${o}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${o}>`}return h.kind}const Zi=[wr,Ht,bn,Bn,Ws,Os,Su,oi,Gi(Yn),Ad,$l,wd];function bh(h,o){if(o.kind==="error")return null;if(h.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!bh(h.itemType,o.itemType))&&(typeof h.N!="number"||h.N===o.N))return null}else{if(h.kind===o.kind)return null;if(h.kind==="value"){for(const d of Zi)if(!bh(d,o))return null}}return`Expected ${li(h)} but found ${li(o)} instead.`}function Cd(h,o){return o.some(d=>d.kind===h.kind)}function co(h,o){return o.some(d=>d==="null"?h===null:d==="array"?Array.isArray(h):d==="object"?h&&!Array.isArray(h)&&typeof h=="object":d===typeof h)}function Hl(h,o){return h.kind==="array"&&o.kind==="array"?h.itemType.kind===o.itemType.kind&&typeof h.N=="number":h.kind===o.kind}const op=.96422,lp=.82521,up=4/29,_c=6/29,cp=3*_c*_c,hv=_c*_c*_c,Wm=Math.PI/180,qm=180/Math.PI;function hp(h){return(h%=360)<0&&(h+=360),h}function Id([h,o,d,p]){let _,S;const E=Md((.2225045*(h=dp(h))+.7168786*(o=dp(o))+.0606169*(d=dp(d)))/1);h===o&&o===d?_=S=E:(_=Md((.4360747*h+.3850649*o+.1430804*d)/op),S=Md((.0139322*h+.0971045*o+.7141733*d)/lp));const k=116*E-16;return[k<0?0:k,500*(_-E),200*(E-S),p]}function dp(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Md(h){return h>hv?Math.pow(h,1/3):h/cp+up}function bc([h,o,d,p]){let _=(h+16)/116,S=isNaN(o)?_:_+o/500,E=isNaN(d)?_:_-d/200;return _=1*fp(_),S=op*fp(S),E=lp*fp(E),[Gl(3.1338561*S-1.6168667*_-.4906146*E),Gl(-.9787684*S+1.9161415*_+.033454*E),Gl(.0719453*S-.2289914*_+1.4052427*E),p]}function Gl(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function fp(h){return h>_c?h*h*h:cp*(h-up)}function xh(h){return parseInt(h.padEnd(2,h),16)/255}function Eu(h,o){return Zl(o?h/100:h,0,1)}function Zl(h,o,d){return Math.min(Math.max(o,h),d)}function Km(h){return!h.some(Number.isNaN)}const Ym={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ho(h,o,d){return h+d*(o-h)}function Wl(h,o,d){return h.map((p,_)=>ho(p,o[_],d))}class er{constructor(o,d,p,_=1,S=!0){this.r=o,this.g=d,this.b=p,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[o,d,p,_]))}static parse(o){if(o instanceof er)return o;if(typeof o!="string")return;const d=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=Ym[p];if(_){const[E,k,F]=_;return[E/255,k/255,F/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const E=p.length<6?1:2;let k=1;return[xh(p.slice(k,k+=E)),xh(p.slice(k,k+=E)),xh(p.slice(k,k+=E)),xh(p.slice(k,k+E)||"ff")]}if(p.startsWith("rgb")){const E=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[k,F,j,q,ee,oe,ue,he,be,Me,ze,st]=E,He=[q||" ",ue||" ",Me].join("");if(He==="  "||He==="  /"||He===",,"||He===",,,"){const ae=[j,oe,be].join(""),we=ae==="%%%"?100:ae===""?255:0;if(we){const Ze=[Zl(+F/we,0,1),Zl(+ee/we,0,1),Zl(+he/we,0,1),ze?Eu(+ze,st):1];if(Km(Ze))return Ze}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[E,k,F,j,q,ee,oe,ue,he]=S,be=[F||" ",q||" ",oe].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Me=[+k,Zl(+j,0,100),Zl(+ee,0,100),ue?Eu(+ue,he):1];if(Km(Me))return function([ze,st,He,ae]){function we(Ze){const It=(Ze+ze/30)%12,Qt=st*Math.min(He,1-He);return He-Qt*Math.max(-1,Math.min(It-3,9-It,1))}return ze=hp(ze),st/=100,He/=100,[we(0),we(8),we(4),ae]}(Me)}}}(o);return d?new er(...d,!1):void 0}get rgb(){const{r:o,g:d,b:p,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[o/S,d/S,p/S,_])}get hcl(){return this.overwriteGetter("hcl",function(o){const[d,p,_,S]=Id(o),E=Math.sqrt(p*p+_*_);return[Math.round(1e4*E)?hp(Math.atan2(_,p)*qm):NaN,E,d,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Id(this.rgb))}overwriteGetter(o,d){return Object.defineProperty(this,o,{value:d}),d}toString(){const[o,d,p,_]=this.rgb;return`rgba(${[o,d,p].map(S=>Math.round(255*S)).join(",")},${_})`}static interpolate(o,d,p,_="rgb"){switch(_){case"rgb":{const[S,E,k,F]=Wl(o.rgb,d.rgb,p);return new er(S,E,k,F,!1)}case"hcl":{const[S,E,k,F]=o.hcl,[j,q,ee,oe]=d.hcl;let ue,he;if(isNaN(S)||isNaN(j))isNaN(S)?isNaN(j)?ue=NaN:(ue=j,k!==1&&k!==0||(he=q)):(ue=S,ee!==1&&ee!==0||(he=E));else{let He=j-S;j>S&&He>180?He-=360:j<S&&S-j>180&&(He+=360),ue=S+p*He}const[be,Me,ze,st]=function([He,ae,we,Ze]){return He=isNaN(He)?0:He*Wm,bc([we,Math.cos(He)*ae,Math.sin(He)*ae,Ze])}([ue,he??ho(E,q,p),ho(k,ee,p),ho(F,oe,p)]);return new er(be,Me,ze,st,!1)}case"lab":{const[S,E,k,F]=bc(Wl(o.lab,d.lab,p));return new er(S,E,k,F,!1)}}}}er.black=new er(0,0,0,1),er.white=new er(1,1,1,1),er.transparent=new er(0,0,0,0),er.red=new er(1,0,0,1);class vr{constructor(o,d,p){this.sensitivity=o?d?"variant":"case":d?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,d){return this.collator.compare(o,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Tu=["bottom","center","top"];class $o{constructor(o,d,p,_,S,E){this.text=o,this.image=d,this.scale=p,this.fontStack=_,this.textColor=S,this.verticalAlign=E}}class qs{constructor(o){this.sections=o}static fromString(o){return new qs([new $o(o,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof qs?o:qs.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class Ss{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Ss)return o;if(typeof o=="number")return new Ss([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const d of o)if(typeof d!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Ss(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,d,p){return new Ss(Wl(o.values,d.values,p))}}class vi{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const xc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Es{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Es)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let d=0;d<o.length;d+=2){const p=o[d],_=o[d+1];if(typeof p!="string"||!xc.has(p)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Es(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,d,p){const _=o.values,S=d.values;if(_.length!==S.length)throw new vi(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${d.toString()}`);const E=[];for(let k=0;k<_.length;k+=2){if(_[k]!==S[k])throw new vi(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${_[k]}, to[${k}]: ${S[k]}`);E.push(_[k]);const[F,j]=_[k+1],[q,ee]=S[k+1];E.push([ho(F,q,p),ho(j,ee,p)])}return new Es(E)}}class Ia{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Ia({name:o,available:!1}):null}}class Ks{constructor(o,d,p){this.from=o,this.to=d,this.transition=p}static interpolate(o,d,p){return new Ks(o,d,p)}static parse(o){return o instanceof Ks?o:Array.isArray(o)&&o.length===3&&typeof o[0]=="string"&&typeof o[1]=="string"&&typeof o[2]=="number"?new Ks(o[0],o[1],o[2]):typeof o=="object"&&typeof o.from=="string"&&typeof o.to=="string"&&typeof o.transition=="number"?new Ks(o.from,o.to,o.transition):typeof o=="string"?new Ks(o,o,1):void 0}}function gl(h,o,d,p){return typeof h=="number"&&h>=0&&h<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof d=="number"&&d>=0&&d<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[h,o,d,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[h,o,d,p]:[h,o,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ah(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Ks||h instanceof er||h instanceof vr||h instanceof qs||h instanceof Ss||h instanceof Es||h instanceof Ia)return!0;if(Array.isArray(h)){for(const o of h)if(!Ah(o))return!1;return!0}if(typeof h=="object"){for(const o in h)if(!Ah(h[o]))return!1;return!0}return!1}function Ci(h){if(h===null)return wr;if(typeof h=="string")return bn;if(typeof h=="boolean")return Bn;if(typeof h=="number")return Ht;if(h instanceof er)return Ws;if(h instanceof Ks)return Os;if(h instanceof vr)return _h;if(h instanceof qs)return Su;if(h instanceof Ss)return Ad;if(h instanceof Es)return wd;if(h instanceof Ia)return $l;if(Array.isArray(h)){const o=h.length;let d;for(const p of h){const _=Ci(p);if(d){if(d===_)continue;d=Yn;break}d=_}return Gi(d||Yn,o)}return oi}function Ho(h){const o=typeof h;return h===null?"":o==="string"||o==="number"||o==="boolean"?String(h):h instanceof er||h instanceof Ks||h instanceof qs||h instanceof Ss||h instanceof Es||h instanceof Ia?h.toString():JSON.stringify(h)}class ql{constructor(o,d){this.type=o,this.value=d}static parse(o,d){if(o.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Ah(o[1]))return d.error("invalid value");const p=o[1];let _=Ci(p);const S=d.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new ql(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Pu={string:bn,number:Ht,boolean:Bn,object:oi};class Wa{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let p,_=1;const S=o[0];if(S==="array"){let k,F;if(o.length>2){const j=o[1];if(typeof j!="string"||!(j in Pu)||j==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);k=Pu[j],_++}else k=Yn;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return d.error('The length argument to "array" must be a positive integer literal',2);F=o[2],_++}p=Gi(k,F)}else{if(!Pu[S])throw new Error(`Types doesn't contain name = ${S}`);p=Pu[S]}const E=[];for(;_<o.length;_++){const k=d.parse(o[_],_,Yn);if(!k)return null;E.push(k)}return new Wa(p,E)}evaluate(o){for(let d=0;d<this.args.length;d++){const p=this.args[d].evaluate(o);if(!bh(this.type,Ci(p)))return p;if(d===this.args.length-1)throw new vi(`Expected value to be of type ${li(this.type)}, but found ${li(Ci(p))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const wh={"to-boolean":Bn,"to-color":Ws,"to-number":Ht,"to-string":bn};class Nr{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const p=o[0];if(!wh[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&o.length!==2)return d.error("Expected one argument.");const _=wh[p],S=[];for(let E=1;E<o.length;E++){const k=d.parse(o[E],E,Yn);if(!k)return null;S.push(k)}return new Nr(_,S)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let d,p;for(const _ of this.args){if(d=_.evaluate(o),p=null,d instanceof er)return d;if(typeof d=="string"){const S=o.parseColor(d);if(S)return S}else if(Array.isArray(d)&&(p=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:gl(d[0],d[1],d[2],d[3]),!p))return new er(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new vi(p||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const p of this.args){d=p.evaluate(o);const _=Ss.parse(d);if(_)return _}throw new vi(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const p of this.args){d=p.evaluate(o);const _=Es.parse(d);if(_)return _}throw new vi(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const p of this.args){if(d=p.evaluate(o),d===null)return 0;const _=Number(d);if(!isNaN(_))return _}throw new vi(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return qs.fromString(Ho(this.args[0].evaluate(o)));case"resolvedImage":return Ia.fromString(Ho(this.args[0].evaluate(o)));case"projectionDefinition":return this.args[0].evaluate(o);default:return Ho(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const pp=["Unknown","Point","LineString","Polygon"];class Pr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?pp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let d=this._parseColorCache[o];return d||(d=this._parseColorCache[o]=er.parse(o)),d}}class kn{constructor(o,d,p=[],_,S=new Ur,E=[]){this.registry=o,this.path=p,this.key=p.map(k=>`[${k}]`).join(""),this.scope=S,this.errors=E,this.expectedType=_,this._isConstant=d}parse(o,d,p,_,S={}){return d?this.concat(d,p,_)._parse(o,S):this._parse(o,S)}_parse(o,d){function p(_,S,E){return E==="assert"?new Wa(S,[_]):E==="coerce"?new Nr(S,[_]):_}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=o[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let E=S.parse(o,this);if(!E)return null;if(this.expectedType){const k=this.expectedType,F=E.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||F.kind!=="value")if(k.kind!=="projectionDefinition"||F.kind!=="string"&&F.kind!=="array")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||F.kind!=="value"&&F.kind!=="string")if(k.kind!=="padding"||F.kind!=="value"&&F.kind!=="number"&&F.kind!=="array")if(k.kind!=="variableAnchorOffsetCollection"||F.kind!=="value"&&F.kind!=="array"){if(this.checkSubtype(k,F))return null}else E=p(E,k,d.typeAnnotation||"coerce");else E=p(E,k,d.typeAnnotation||"coerce");else E=p(E,k,d.typeAnnotation||"coerce");else E=p(E,k,d.typeAnnotation||"coerce");else E=p(E,k,d.typeAnnotation||"assert")}if(!(E instanceof ql)&&E.type.kind!=="resolvedImage"&&this._isConstant(E)){const k=new Pr;try{E=new ql(E.type,E.evaluate(k))}catch(F){return this.error(F.message),null}}return E}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,d,p){const _=typeof o=="number"?this.path.concat(o):this.path,S=p?this.scope.concat(p):this.scope;return new kn(this.registry,this._isConstant,_,d||null,S,this.errors)}error(o,...d){const p=`${this.key}${d.map(_=>`[${_}]`).join("")}`;this.errors.push(new Ar(p,o))}checkSubtype(o,d){const p=bh(o,d);return p&&this.error(p),p}}class $r{constructor(o,d){this.type=d.type,this.bindings=[].concat(o),this.result=d}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const d of this.bindings)o(d[1]);o(this.result)}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const p=[];for(let S=1;S<o.length-1;S+=2){const E=o[S];if(typeof E!="string")return d.error(`Expected string, but found ${typeof E} instead.`,S);if(/[^a-zA-Z0-9_]/.test(E))return d.error("Variable names must contain only alphanumeric characters or '_'.",S);const k=d.parse(o[S+1],S+1);if(!k)return null;p.push([E,k])}const _=d.parse(o[o.length-1],o.length-1,d.expectedType,p);return _?new $r(p,_):null}outputDefined(){return this.result.outputDefined()}}class xr{constructor(o,d){this.type=d.type,this.name=o,this.boundExpression=d}static parse(o,d){if(o.length!==2||typeof o[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const p=o[1];return d.scope.has(p)?new xr(p,d.scope.get(p)):d.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Ch{constructor(o,d,p){this.type=o,this.index=d,this.input=p}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Ht),_=d.parse(o[2],2,Gi(d.expectedType||Yn));return p&&_?new Ch(_.type.itemType,p,_):null}evaluate(o){const d=this.index.evaluate(o),p=this.input.evaluate(o);if(d<0)throw new vi(`Array index out of bounds: ${d} < 0.`);if(d>=p.length)throw new vi(`Array index out of bounds: ${d} > ${p.length-1}.`);if(d!==Math.floor(d))throw new vi(`Array index must be an integer, but found ${d} instead.`);return p[d]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class fo{constructor(o,d){this.type=Bn,this.needle=o,this.haystack=d}static parse(o,d){if(o.length!==3)return d.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Yn),_=d.parse(o[2],2,Yn);return p&&_?Cd(p.type,[Bn,bn,Ht,wr,Yn])?new fo(p,_):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${li(p.type)} instead`):null}evaluate(o){const d=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!co(d,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${li(Ci(d))} instead.`);if(!co(p,["string","array"]))throw new vi(`Expected second argument to be of type array or string, but found ${li(Ci(p))} instead.`);return p.indexOf(d)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Ac{constructor(o,d,p){this.type=Ht,this.needle=o,this.haystack=d,this.fromIndex=p}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Yn),_=d.parse(o[2],2,Yn);if(!p||!_)return null;if(!Cd(p.type,[Bn,bn,Ht,wr,Yn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${li(p.type)} instead`);if(o.length===4){const S=d.parse(o[3],3,Ht);return S?new Ac(p,_,S):null}return new Ac(p,_)}evaluate(o){const d=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!co(d,["boolean","string","number","null"]))throw new vi(`Expected first argument to be of type boolean, string, number or null, but found ${li(Ci(d))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(o)),co(p,["string"])){const S=p.indexOf(d,_);return S===-1?-1:[...p.slice(0,S)].length}if(co(p,["array"]))return p.indexOf(d,_);throw new vi(`Expected second argument to be of type array or string, but found ${li(Ci(p))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Sd{constructor(o,d,p,_,S,E){this.inputType=o,this.type=d,this.input=p,this.cases=_,this.outputs=S,this.otherwise=E}static parse(o,d){if(o.length<5)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return d.error("Expected an even number of arguments.");let p,_;d.expectedType&&d.expectedType.kind!=="value"&&(_=d.expectedType);const S={},E=[];for(let j=2;j<o.length-1;j+=2){let q=o[j];const ee=o[j+1];Array.isArray(q)||(q=[q]);const oe=d.concat(j);if(q.length===0)return oe.error("Expected at least one branch label.");for(const he of q){if(typeof he!="number"&&typeof he!="string")return oe.error("Branch labels must be numbers or strings.");if(typeof he=="number"&&Math.abs(he)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof he=="number"&&Math.floor(he)!==he)return oe.error("Numeric branch labels must be integer values.");if(p){if(oe.checkSubtype(p,Ci(he)))return null}else p=Ci(he);if(S[String(he)]!==void 0)return oe.error("Branch labels must be unique.");S[String(he)]=E.length}const ue=d.parse(ee,j,_);if(!ue)return null;_=_||ue.type,E.push(ue)}const k=d.parse(o[1],1,Yn);if(!k)return null;const F=d.parse(o[o.length-1],o.length-1,_);return F?k.type.kind!=="value"&&d.concat(1).checkSubtype(p,k.type)?null:new Sd(p,_,k,S,E,F):null}evaluate(o){const d=this.input.evaluate(o);return(Ci(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ed{constructor(o,d,p){this.type=o,this.branches=d,this.otherwise=p}static parse(o,d){if(o.length<4)return d.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return d.error("Expected an odd number of arguments.");let p;d.expectedType&&d.expectedType.kind!=="value"&&(p=d.expectedType);const _=[];for(let E=1;E<o.length-1;E+=2){const k=d.parse(o[E],E,Bn);if(!k)return null;const F=d.parse(o[E+1],E+1,p);if(!F)return null;_.push([k,F]),p=p||F.type}const S=d.parse(o[o.length-1],o.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new Ed(p,_,S)}evaluate(o){for(const[d,p]of this.branches)if(d.evaluate(o))return p.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[d,p]of this.branches)o(d),o(p);o(this.otherwise)}outputDefined(){return this.branches.every(([o,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class ku{constructor(o,d,p,_){this.type=o,this.input=d,this.beginIndex=p,this.endIndex=_}static parse(o,d){if(o.length<=2||o.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=d.parse(o[1],1,Yn),_=d.parse(o[2],2,Ht);if(!p||!_)return null;if(!Cd(p.type,[Gi(Yn),bn,Yn]))return d.error(`Expected first argument to be of type array or string, but found ${li(p.type)} instead`);if(o.length===4){const S=d.parse(o[3],3,Ht);return S?new ku(p.type,p,_,S):null}return new ku(p.type,p,_)}evaluate(o){const d=this.input.evaluate(o),p=this.beginIndex.evaluate(o);let _;if(this.endIndex&&(_=this.endIndex.evaluate(o)),co(d,["string"]))return[...d].slice(p,_).join("");if(co(d,["array"]))return d.slice(p,_);throw new vi(`Expected first argument to be of type array or string, but found ${li(Ci(d))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Ih(h,o){const d=h.length-1;let p,_,S=0,E=d,k=0;for(;S<=E;)if(k=Math.floor((S+E)/2),p=h[k],_=h[k+1],p<=o){if(k===d||o<_)return k;S=k+1}else{if(!(p>o))throw new vi("Input is not a number.");E=k-1}return 0}class Wi{constructor(o,d,p){this.type=o,this.input=d,this.labels=[],this.outputs=[];for(const[_,S]of p)this.labels.push(_),this.outputs.push(S)}static parse(o,d){if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");const p=d.parse(o[1],1,Ht);if(!p)return null;const _=[];let S=null;d.expectedType&&d.expectedType.kind!=="value"&&(S=d.expectedType);for(let E=1;E<o.length;E+=2){const k=E===1?-1/0:o[E],F=o[E+1],j=E,q=E+1;if(typeof k!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(_.length&&_[_.length-1][0]>=k)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const ee=d.parse(F,q,S);if(!ee)return null;S=S||ee.type,_.push([k,ee])}return new Wi(S,p,_)}evaluate(o){const d=this.labels,p=this.outputs;if(d.length===1)return p[0].evaluate(o);const _=this.input.evaluate(o);if(_<=d[0])return p[0].evaluate(o);const S=d.length;return _>=d[S-1]?p[S-1].evaluate(o):p[Ih(d,_)].evaluate(o)}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Td(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Go,Lu,ms=function(){if(Lu)return Go;function h(o,d,p,_){this.cx=3*o,this.bx=3*(p-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(_-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=d,this.p2x=p,this.p2y=_}return Lu=1,Go=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,d){if(d===void 0&&(d=1e-6),o<0)return 0;if(o>1)return 1;for(var p=o,_=0;_<8;_++){var S=this.sampleCurveX(p)-o;if(Math.abs(S)<d)return p;var E=this.sampleCurveDerivativeX(p);if(Math.abs(E)<1e-6)break;p-=S/E}var k=0,F=1;for(p=o,_=0;_<20&&(S=this.sampleCurveX(p),!(Math.abs(S-o)<d));_++)o>S?k=p:F=p,p=.5*(F-k)+k;return p},solve:function(o,d){return this.sampleCurveY(this.solveCurveX(o,d))}},Go}(),Ys=Td(ms);class Xs{constructor(o,d,p,_,S){this.type=o,this.operator=d,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[E,k]of S)this.labels.push(E),this.outputs.push(k)}static interpolationFactor(o,d,p,_){let S=0;if(o.name==="exponential")S=Du(d,o.base,p,_);else if(o.name==="linear")S=Du(d,1,p,_);else if(o.name==="cubic-bezier"){const E=o.controlPoints;S=new Ys(E[0],E[1],E[2],E[3]).solve(Du(d,1,p,_))}return S}static parse(o,d){let[p,_,S,...E]=o;if(!Array.isArray(_)||_.length===0)return d.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const j=_[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:j}}else{if(_[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const j=_.slice(1);if(j.length!==4||j.some(q=>typeof q!="number"||q<0||q>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:j}}}if(o.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(S=d.parse(S,2,Ht),!S)return null;const k=[];let F=null;p==="interpolate-hcl"||p==="interpolate-lab"?F=Ws:d.expectedType&&d.expectedType.kind!=="value"&&(F=d.expectedType);for(let j=0;j<E.length;j+=2){const q=E[j],ee=E[j+1],oe=j+3,ue=j+4;if(typeof q!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(k.length&&k[k.length-1][0]>=q)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',oe);const he=d.parse(ee,ue,F);if(!he)return null;F=F||he.type,k.push([q,he])}return Hl(F,Ht)||Hl(F,Os)||Hl(F,Ws)||Hl(F,Ad)||Hl(F,wd)||Hl(F,Gi(Ht))?new Xs(F,p,_,S,k):d.error(`Type ${li(F)} is not interpolatable.`)}evaluate(o){const d=this.labels,p=this.outputs;if(d.length===1)return p[0].evaluate(o);const _=this.input.evaluate(o);if(_<=d[0])return p[0].evaluate(o);const S=d.length;if(_>=d[S-1])return p[S-1].evaluate(o);const E=Ih(d,_),k=Xs.interpolationFactor(this.interpolation,_,d[E],d[E+1]),F=p[E].evaluate(o),j=p[E+1].evaluate(o);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ho(F,j,k);case"color":return er.interpolate(F,j,k);case"padding":return Ss.interpolate(F,j,k);case"variableAnchorOffsetCollection":return Es.interpolate(F,j,k);case"array":return Wl(F,j,k);case"projectionDefinition":return Ks.interpolate(F,j,k)}case"interpolate-hcl":return er.interpolate(F,j,k,"hcl");case"interpolate-lab":return er.interpolate(F,j,k,"lab")}}eachChild(o){o(this.input);for(const d of this.outputs)o(d)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Du(h,o,d,p){const _=p-d,S=h-d;return _===0?0:o===1?S/_:(Math.pow(o,S)-1)/(Math.pow(o,_)-1)}const ei={color:er.interpolate,number:ho,padding:Ss.interpolate,variableAnchorOffsetCollection:Es.interpolate,array:Wl};class wc{constructor(o,d){this.type=o,this.args=d}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");let p=null;const _=d.expectedType;_&&_.kind!=="value"&&(p=_);const S=[];for(const k of o.slice(1)){const F=d.parse(k,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!F)return null;p=p||F.type,S.push(F)}if(!p)throw new Error("No output type");const E=_&&S.some(k=>bh(_,k.type));return new wc(E?Yn:p,S)}evaluate(o){let d,p=null,_=0;for(const S of this.args)if(_++,p=S.evaluate(o),p&&p instanceof Ia&&!p.available&&(d||(d=p.name),p=null,_===this.args.length&&(p=d)),p!==null)break;return p}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function Mh(h,o){return h==="=="||h==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Pd(h,o,d,p){return p.compare(o,d)===0}function gs(h,o,d){const p=h!=="=="&&h!=="!=";return class rL{constructor(S,E,k){this.type=Bn,this.lhs=S,this.rhs=E,this.collator=k,this.hasUntypedArgument=S.type.kind==="value"||E.type.kind==="value"}static parse(S,E){if(S.length!==3&&S.length!==4)return E.error("Expected two or three arguments.");const k=S[0];let F=E.parse(S[1],1,Yn);if(!F)return null;if(!Mh(k,F.type))return E.concat(1).error(`"${k}" comparisons are not supported for type '${li(F.type)}'.`);let j=E.parse(S[2],2,Yn);if(!j)return null;if(!Mh(k,j.type))return E.concat(2).error(`"${k}" comparisons are not supported for type '${li(j.type)}'.`);if(F.type.kind!==j.type.kind&&F.type.kind!=="value"&&j.type.kind!=="value")return E.error(`Cannot compare types '${li(F.type)}' and '${li(j.type)}'.`);p&&(F.type.kind==="value"&&j.type.kind!=="value"?F=new Wa(j.type,[F]):F.type.kind!=="value"&&j.type.kind==="value"&&(j=new Wa(F.type,[j])));let q=null;if(S.length===4){if(F.type.kind!=="string"&&j.type.kind!=="string"&&F.type.kind!=="value"&&j.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(q=E.parse(S[3],3,_h),!q)return null}return new rL(F,j,q)}evaluate(S){const E=this.lhs.evaluate(S),k=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const F=Ci(E),j=Ci(k);if(F.kind!==j.kind||F.kind!=="string"&&F.kind!=="number")throw new vi(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${F.kind}, ${j.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const F=Ci(E),j=Ci(k);if(F.kind!=="string"||j.kind!=="string")return o(S,E,k)}return this.collator?d(S,E,k,this.collator.evaluate(S)):o(S,E,k)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const kd=gs("==",function(h,o,d){return o===d},Pd),da=gs("!=",function(h,o,d){return o!==d},function(h,o,d,p){return!Pd(0,o,d,p)}),dv=gs("<",function(h,o,d){return o<d},function(h,o,d,p){return p.compare(o,d)<0}),Sh=gs(">",function(h,o,d){return o>d},function(h,o,d,p){return p.compare(o,d)>0}),po=gs("<=",function(h,o,d){return o<=d},function(h,o,d,p){return p.compare(o,d)<=0}),fa=gs(">=",function(h,o,d){return o>=d},function(h,o,d,p){return p.compare(o,d)>=0});class Ru{constructor(o,d,p){this.type=_h,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=d}static parse(o,d){if(o.length!==2)return d.error("Expected one argument.");const p=o[1];if(typeof p!="object"||Array.isArray(p))return d.error("Collator options argument must be an object.");const _=d.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,Bn);if(!_)return null;const S=d.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,Bn);if(!S)return null;let E=null;return p.locale&&(E=d.parse(p.locale,1,bn),!E)?null:new Ru(_,S,E)}evaluate(o){return new vr(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class Qr{constructor(o,d,p,_,S){this.type=bn,this.number=o,this.locale=d,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(o,d){if(o.length!==3)return d.error("Expected two arguments.");const p=d.parse(o[1],1,Ht);if(!p)return null;const _=o[2];if(typeof _!="object"||Array.isArray(_))return d.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=d.parse(_.locale,1,bn),!S))return null;let E=null;if(_.currency&&(E=d.parse(_.currency,1,bn),!E))return null;let k=null;if(_["min-fraction-digits"]&&(k=d.parse(_["min-fraction-digits"],1,Ht),!k))return null;let F=null;return _["max-fraction-digits"]&&(F=d.parse(_["max-fraction-digits"],1,Ht),!F)?null:new Qr(p,S,E,k,F)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class mo{constructor(o){this.type=Su,this.sections=o}static parse(o,d){if(o.length<2)return d.error("Expected at least one argument.");const p=o[1];if(!Array.isArray(p)&&typeof p=="object")return d.error("First argument must be an image or text section.");const _=[];let S=!1;for(let E=1;E<=o.length-1;++E){const k=o[E];if(S&&typeof k=="object"&&!Array.isArray(k)){S=!1;let F=null;if(k["font-scale"]&&(F=d.parse(k["font-scale"],1,Ht),!F))return null;let j=null;if(k["text-font"]&&(j=d.parse(k["text-font"],1,Gi(bn)),!j))return null;let q=null;if(k["text-color"]&&(q=d.parse(k["text-color"],1,Ws),!q))return null;let ee=null;if(k["vertical-align"]){if(typeof k["vertical-align"]=="string"&&!Tu.includes(k["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${k["vertical-align"]}' instead.`);if(ee=d.parse(k["vertical-align"],1,bn),!ee)return null}const oe=_[_.length-1];oe.scale=F,oe.font=j,oe.textColor=q,oe.verticalAlign=ee}else{const F=d.parse(o[E],1,Yn);if(!F)return null;const j=F.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new mo(_)}evaluate(o){return new qs(this.sections.map(d=>{const p=d.content.evaluate(o);return Ci(p)===$l?new $o("",p,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(o):null):new $o(Ho(p),null,d.scale?d.scale.evaluate(o):null,d.font?d.font.evaluate(o).join(","):null,d.textColor?d.textColor.evaluate(o):null,d.verticalAlign?d.verticalAlign.evaluate(o):null)}))}eachChild(o){for(const d of this.sections)o(d.content),d.scale&&o(d.scale),d.font&&o(d.font),d.textColor&&o(d.textColor),d.verticalAlign&&o(d.verticalAlign)}outputDefined(){return!1}}class Ou{constructor(o){this.type=$l,this.input=o}static parse(o,d){if(o.length!==2)return d.error("Expected two arguments.");const p=d.parse(o[1],1,bn);return p?new Ou(p):d.error("No image name provided.")}evaluate(o){const d=this.input.evaluate(o),p=Ia.fromString(d);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(d)>-1),p}eachChild(o){o(this.input)}outputDefined(){return!1}}class mp{constructor(o){this.type=Ht,this.input=o}static parse(o,d){if(o.length!==2)return d.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=d.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${li(p.type)} instead.`):new mp(p):null}evaluate(o){const d=this.input.evaluate(o);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new vi(`Expected value to be of type string or array, but found ${li(Ci(d))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const qa=8192;function fv(h,o){const d=(180+h[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,o.z);return[Math.round(d*_*qa),Math.round(p*_*qa)]}function gp(h,o){const d=Math.pow(2,o.z);return[(_=(h[0]/qa+o.x)/d,360*_-180),(p=(h[1]/qa+o.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,_}function Kl(h,o){h[0]=Math.min(h[0],o[0]),h[1]=Math.min(h[1],o[1]),h[2]=Math.max(h[2],o[0]),h[3]=Math.max(h[3],o[1])}function Cc(h,o){return!(h[0]<=o[0]||h[2]>=o[2]||h[1]<=o[1]||h[3]>=o[3])}function Eh(h,o,d){const p=h[0]-o[0],_=h[1]-o[1],S=h[0]-d[0],E=h[1]-d[1];return p*E-S*_==0&&p*S<=0&&_*E<=0}function Zo(h,o,d,p){return(_=[p[0]-d[0],p[1]-d[1]])[0]*(S=[o[0]-h[0],o[1]-h[1]])[1]-_[1]*S[0]!=0&&!(!vp(h,o,d,p)||!vp(d,p,h,o));var _,S}function pv(h,o,d){for(const p of d)for(let _=0;_<p.length-1;++_)if(Zo(h,o,p[_],p[_+1]))return!0;return!1}function Yl(h,o,d=!1){let p=!1;for(const k of o)for(let F=0;F<k.length-1;F++){if(Eh(h,k[F],k[F+1]))return d;(S=k[F])[1]>(_=h)[1]!=(E=k[F+1])[1]>_[1]&&_[0]<(E[0]-S[0])*(_[1]-S[1])/(E[1]-S[1])+S[0]&&(p=!p)}var _,S,E;return p}function Xm(h,o){for(const d of o)if(Yl(h,d))return!0;return!1}function Ld(h,o){for(const d of h)if(!Yl(d,o))return!1;for(let d=0;d<h.length-1;++d)if(pv(h[d],h[d+1],o))return!1;return!0}function yp(h,o){for(const d of o)if(Ld(h,d))return!0;return!1}function vp(h,o,d,p){const _=p[0]-d[0],S=p[1]-d[1],E=(h[0]-d[0])*S-_*(h[1]-d[1]),k=(o[0]-d[0])*S-_*(o[1]-d[1]);return E>0&&k<0||E<0&&k>0}function _p(h,o,d){const p=[];for(let _=0;_<h.length;_++){const S=[];for(let E=0;E<h[_].length;E++){const k=fv(h[_][E],d);Kl(o,k),S.push(k)}p.push(S)}return p}function Th(h,o,d){const p=[];for(let _=0;_<h.length;_++){const S=_p(h[_],o,d);p.push(S)}return p}function Ph(h,o,d,p){if(h[0]<d[0]||h[0]>d[2]){const _=.5*p;let S=h[0]-d[0]>_?-p:d[0]-h[0]>_?p:0;S===0&&(S=h[0]-d[2]>_?-p:d[2]-h[0]>_?p:0),h[0]+=S}Kl(o,h)}function bp(h,o,d,p){const _=Math.pow(2,p.z)*qa,S=[p.x*qa,p.y*qa],E=[];for(const k of h)for(const F of k){const j=[F.x+S[0],F.y+S[1]];Ph(j,o,d,_),E.push(j)}return E}function xp(h,o,d,p){const _=Math.pow(2,p.z)*qa,S=[p.x*qa,p.y*qa],E=[];for(const F of h){const j=[];for(const q of F){const ee=[q.x+S[0],q.y+S[1]];Kl(o,ee),j.push(ee)}E.push(j)}if(o[2]-o[0]<=_/2){(k=o)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const F of E)for(const j of F)Ph(j,o,d,_)}var k;return E}class ss{constructor(o,d){this.type=Bn,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ah(o[1])){const p=o[1];if(p.type==="FeatureCollection"){const _=[];for(const S of p.features){const{type:E,coordinates:k}=S.geometry;E==="Polygon"&&_.push(k),E==="MultiPolygon"&&_.push(...k)}if(_.length)return new ss(p,{type:"MultiPolygon",coordinates:_})}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ss(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new ss(p,p)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(d,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=d.canonicalID();if(p.type==="Polygon"){const k=_p(p.coordinates,S,E),F=bp(d.geometry(),_,S,E);if(!Cc(_,S))return!1;for(const j of F)if(!Yl(j,k))return!1}if(p.type==="MultiPolygon"){const k=Th(p.coordinates,S,E),F=bp(d.geometry(),_,S,E);if(!Cc(_,S))return!1;for(const j of F)if(!Xm(j,k))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(d,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=d.canonicalID();if(p.type==="Polygon"){const k=_p(p.coordinates,S,E),F=xp(d.geometry(),_,S,E);if(!Cc(_,S))return!1;for(const j of F)if(!Ld(j,k))return!1}if(p.type==="MultiPolygon"){const k=Th(p.coordinates,S,E),F=xp(d.geometry(),_,S,E);if(!Cc(_,S))return!1;for(const j of F)if(!yp(j,k))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Dd=class{constructor(h=[],o=(d,p)=>d<p?-1:d>p?1:0){if(this.data=h,this.length=this.data.length,this.compare=o,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:o,compare:d}=this,p=o[h];for(;h>0;){const _=h-1>>1,S=o[_];if(d(p,S)>=0)break;o[h]=S,h=_}o[h]=p}_down(h){const{data:o,compare:d}=this,p=this.length>>1,_=o[h];for(;h<p;){let S=1+(h<<1);const E=S+1;if(E<this.length&&d(o[E],o[S])<0&&(S=E),d(o[S],_)>=0)break;o[h]=o[S],h=S}o[h]=_}};function Xl(h,o,d=0,p=h.length-1,_=Qm){for(;p>d;){if(p-d>600){const F=p-d+1,j=o-d+1,q=Math.log(F),ee=.5*Math.exp(2*q/3),oe=.5*Math.sqrt(q*ee*(F-ee)/F)*(j-F/2<0?-1:1);Xl(h,o,Math.max(d,Math.floor(o-j*ee/F+oe)),Math.min(p,Math.floor(o+(F-j)*ee/F+oe)),_)}const S=h[o];let E=d,k=p;for(Ic(h,d,o),_(h[p],S)>0&&Ic(h,d,p);E<k;){for(Ic(h,E,k),E++,k--;_(h[E],S)<0;)E++;for(;_(h[k],S)>0;)k--}_(h[d],S)===0?Ic(h,d,k):(k++,Ic(h,k,p)),k<=o&&(d=k+1),o<=k&&(p=k-1)}}function Ic(h,o,d){const p=h[o];h[o]=h[d],h[d]=p}function Qm(h,o){return h<o?-1:h>o?1:0}function Rd(h,o){if(h.length<=1)return[h];const d=[];let p,_;for(const S of h){const E=eg(S);E!==0&&(S.area=Math.abs(E),_===void 0&&(_=E<0),_===E<0?(p&&d.push(p),p=[S]):p.push(S))}if(p&&d.push(p),o>1)for(let S=0;S<d.length;S++)d[S].length<=o||(Xl(d[S],o,1,d[S].length-1,Jm),d[S]=d[S].slice(0,o));return d}function Jm(h,o){return o.area-h.area}function eg(h){let o=0;for(let d,p,_=0,S=h.length,E=S-1;_<S;E=_++)d=h[_],p=h[E],o+=(p.x-d.x)*(d.y+p.y);return o}const tg=1/298.257223563,ng=tg*(2-tg),Ql=Math.PI/180;class Od{constructor(o){const d=6378.137*Ql*1e3,p=Math.cos(o*Ql),_=1/(1-ng*(1-p*p)),S=Math.sqrt(_);this.kx=d*S*p,this.ky=d*S*_*(1-ng)}distance(o,d){const p=this.wrap(o[0]-d[0])*this.kx,_=(o[1]-d[1])*this.ky;return Math.sqrt(p*p+_*_)}pointOnLine(o,d){let p,_,S,E,k=1/0;for(let F=0;F<o.length-1;F++){let j=o[F][0],q=o[F][1],ee=this.wrap(o[F+1][0]-j)*this.kx,oe=(o[F+1][1]-q)*this.ky,ue=0;ee===0&&oe===0||(ue=(this.wrap(d[0]-j)*this.kx*ee+(d[1]-q)*this.ky*oe)/(ee*ee+oe*oe),ue>1?(j=o[F+1][0],q=o[F+1][1]):ue>0&&(j+=ee/this.kx*ue,q+=oe/this.ky*ue)),ee=this.wrap(d[0]-j)*this.kx,oe=(d[1]-q)*this.ky;const he=ee*ee+oe*oe;he<k&&(k=he,p=j,_=q,S=F,E=ue)}return{point:[p,_],index:S,t:Math.max(0,Math.min(1,E))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function rg(h,o){return o[0]-h[0]}function Mc(h){return h[1]-h[0]+1}function Wo(h,o){return h[1]>=h[0]&&h[1]<o}function go(h,o){if(h[0]>h[1])return[null,null];const d=Mc(h);if(o){if(d===2)return[h,null];const _=Math.floor(d/2);return[[h[0],h[0]+_],[h[0]+_,h[1]]]}if(d===1)return[h,null];const p=Math.floor(d/2)-1;return[[h[0],h[0]+p],[h[0]+p+1,h[1]]]}function Sc(h,o){if(!Wo(o,h.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let p=o[0];p<=o[1];++p)Kl(d,h[p]);return d}function Ap(h){const o=[1/0,1/0,-1/0,-1/0];for(const d of h)for(const p of d)Kl(o,p);return o}function ig(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function wp(h,o,d){if(!ig(h)||!ig(o))return NaN;let p=0,_=0;return h[2]<o[0]&&(p=o[0]-h[2]),h[0]>o[2]&&(p=h[0]-o[2]),h[1]>o[3]&&(_=h[1]-o[3]),h[3]<o[1]&&(_=o[1]-h[3]),d.distance([0,0],[p,_])}function ar(h,o,d){const p=d.pointOnLine(o,h);return d.distance(h,p.point)}function Ma(h,o,d,p,_){const S=Math.min(ar(h,[d,p],_),ar(o,[d,p],_)),E=Math.min(ar(d,[h,o],_),ar(p,[h,o],_));return Math.min(S,E)}function sg(h,o,d,p,_){if(!Wo(o,h.length)||!Wo(p,d.length))return 1/0;let S=1/0;for(let E=o[0];E<o[1];++E){const k=h[E],F=h[E+1];for(let j=p[0];j<p[1];++j){const q=d[j],ee=d[j+1];if(Zo(k,F,q,ee))return 0;S=Math.min(S,Ma(k,F,q,ee,_))}}return S}function mv(h,o,d,p,_){if(!Wo(o,h.length)||!Wo(p,d.length))return NaN;let S=1/0;for(let E=o[0];E<=o[1];++E)for(let k=p[0];k<=p[1];++k)if(S=Math.min(S,_.distance(h[E],d[k])),S===0)return S;return S}function gv(h,o,d){if(Yl(h,o,!0))return 0;let p=1/0;for(const _ of o){const S=_[0],E=_[_.length-1];if(S!==E&&(p=Math.min(p,ar(h,[E,S],d)),p===0))return p;const k=d.pointOnLine(_,h);if(p=Math.min(p,d.distance(h,k.point)),p===0)return p}return p}function yv(h,o,d,p){if(!Wo(o,h.length))return NaN;for(let S=o[0];S<=o[1];++S)if(Yl(h[S],d,!0))return 0;let _=1/0;for(let S=o[0];S<o[1];++S){const E=h[S],k=h[S+1];for(const F of d)for(let j=0,q=F.length,ee=q-1;j<q;ee=j++){const oe=F[ee],ue=F[j];if(Zo(E,k,oe,ue))return 0;_=Math.min(_,Ma(E,k,oe,ue,p))}}return _}function ag(h,o){for(const d of h)for(const p of d)if(Yl(p,o,!0))return!0;return!1}function vv(h,o,d,p=1/0){const _=Ap(h),S=Ap(o);if(p!==1/0&&wp(_,S,d)>=p)return p;if(Cc(_,S)){if(ag(h,o))return 0}else if(ag(o,h))return 0;let E=1/0;for(const k of h)for(let F=0,j=k.length,q=j-1;F<j;q=F++){const ee=k[q],oe=k[F];for(const ue of o)for(let he=0,be=ue.length,Me=be-1;he<be;Me=he++){const ze=ue[Me],st=ue[he];if(Zo(ee,oe,ze,st))return 0;E=Math.min(E,Ma(ee,oe,ze,st,d))}}return E}function zu(h,o,d,p,_,S){if(!S)return;const E=wp(Sc(p,S),_,d);E<o&&h.push([E,S,[0,0]])}function gt(h,o,d,p,_,S,E){if(!S||!E)return;const k=wp(Sc(p,S),Sc(_,E),d);k<o&&h.push([k,S,E])}function Zt(h,o,d,p,_=1/0){let S=Math.min(p.distance(h[0],d[0][0]),_);if(S===0)return S;const E=new Dd([[0,[0,h.length-1],[0,0]]],rg),k=Ap(d);for(;E.length>0;){const F=E.pop();if(F[0]>=S)continue;const j=F[1],q=o?50:100;if(Mc(j)<=q){if(!Wo(j,h.length))return NaN;if(o){const ee=yv(h,j,d,p);if(isNaN(ee)||ee===0)return ee;S=Math.min(S,ee)}else for(let ee=j[0];ee<=j[1];++ee){const oe=gv(h[ee],d,p);if(S=Math.min(S,oe),S===0)return 0}}else{const ee=go(j,o);zu(E,S,p,h,k,ee[0]),zu(E,S,p,h,k,ee[1])}}return S}function zt(h,o,d,p,_,S=1/0){let E=Math.min(S,_.distance(h[0],d[0]));if(E===0)return E;const k=new Dd([[0,[0,h.length-1],[0,d.length-1]]],rg);for(;k.length>0;){const F=k.pop();if(F[0]>=E)continue;const j=F[1],q=F[2],ee=o?50:100,oe=p?50:100;if(Mc(j)<=ee&&Mc(q)<=oe){if(!Wo(j,h.length)&&Wo(q,d.length))return NaN;let ue;if(o&&p)ue=sg(h,j,d,q,_),E=Math.min(E,ue);else if(o&&!p){const he=h.slice(j[0],j[1]+1);for(let be=q[0];be<=q[1];++be)if(ue=ar(d[be],he,_),E=Math.min(E,ue),E===0)return E}else if(!o&&p){const he=d.slice(q[0],q[1]+1);for(let be=j[0];be<=j[1];++be)if(ue=ar(h[be],he,_),E=Math.min(E,ue),E===0)return E}else ue=mv(h,j,d,q,_),E=Math.min(E,ue)}else{const ue=go(j,o),he=go(q,p);gt(k,E,_,h,d,ue[0],he[0]),gt(k,E,_,h,d,ue[0],he[1]),gt(k,E,_,h,d,ue[1],he[0]),gt(k,E,_,h,d,ue[1],he[1])}}return E}function Ln(h){return h.type==="MultiPolygon"?h.coordinates.map(o=>({type:"Polygon",coordinates:o})):h.type==="MultiLineString"?h.coordinates.map(o=>({type:"LineString",coordinates:o})):h.type==="MultiPoint"?h.coordinates.map(o=>({type:"Point",coordinates:o})):[h]}class Kn{constructor(o,d){this.type=Ht,this.geojson=o,this.geometries=d}static parse(o,d){if(o.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ah(o[1])){const p=o[1];if(p.type==="FeatureCollection")return new Kn(p,p.features.map(_=>Ln(_.geometry)).flat());if(p.type==="Feature")return new Kn(p,Ln(p.geometry));if("type"in p&&"coordinates"in p)return new Kn(p,Ln(p))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(d,p){const _=d.geometry(),S=_.flat().map(F=>gp([F.x,F.y],d.canonical));if(_.length===0)return NaN;const E=new Od(S[0][1]);let k=1/0;for(const F of p){switch(F.type){case"Point":k=Math.min(k,zt(S,!1,[F.coordinates],!1,E,k));break;case"LineString":k=Math.min(k,zt(S,!1,F.coordinates,!0,E,k));break;case"Polygon":k=Math.min(k,Zt(S,!1,F.coordinates,E,k))}if(k===0)return k}return k}(o,this.geometries);if(o.geometryType()==="LineString")return function(d,p){const _=d.geometry(),S=_.flat().map(F=>gp([F.x,F.y],d.canonical));if(_.length===0)return NaN;const E=new Od(S[0][1]);let k=1/0;for(const F of p){switch(F.type){case"Point":k=Math.min(k,zt(S,!0,[F.coordinates],!1,E,k));break;case"LineString":k=Math.min(k,zt(S,!0,F.coordinates,!0,E,k));break;case"Polygon":k=Math.min(k,Zt(S,!0,F.coordinates,E,k))}if(k===0)return k}return k}(o,this.geometries);if(o.geometryType()==="Polygon")return function(d,p){const _=d.geometry();if(_.length===0||_[0].length===0)return NaN;const S=Rd(_,0).map(F=>F.map(j=>j.map(q=>gp([q.x,q.y],d.canonical)))),E=new Od(S[0][0][0][1]);let k=1/0;for(const F of p)for(const j of S){switch(F.type){case"Point":k=Math.min(k,Zt([F.coordinates],!1,j,E,k));break;case"LineString":k=Math.min(k,Zt(F.coordinates,!0,j,E,k));break;case"Polygon":k=Math.min(k,vv(j,F.coordinates,E,k))}if(k===0)return k}return k}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Cr={"==":kd,"!=":da,">":Sh,"<":dv,">=":fa,"<=":po,array:Wa,at:Ch,boolean:Wa,case:Ed,coalesce:wc,collator:Ru,format:mo,image:Ou,in:fo,"index-of":Ac,interpolate:Xs,"interpolate-hcl":Xs,"interpolate-lab":Xs,length:mp,let:$r,literal:ql,match:Sd,number:Wa,"number-format":Qr,object:Wa,slice:ku,step:Wi,string:Wa,"to-boolean":Nr,"to-color":Nr,"to-number":Nr,"to-string":Nr,var:xr,within:ss,distance:Kn};class Kr{constructor(o,d,p,_){this.name=o,this.type=d,this._evaluate=p,this.args=_}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,d){const p=o[0],_=Kr.definitions[p];if(!_)return d.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,E=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,k=E.filter(([j])=>!Array.isArray(j)||j.length===o.length-1);let F=null;for(const[j,q]of k){F=new kn(d.registry,Fu,d.path,null,d.scope);const ee=[];let oe=!1;for(let ue=1;ue<o.length;ue++){const he=o[ue],be=Array.isArray(j)?j[ue-1]:j.type,Me=F.parse(he,1+ee.length,be);if(!Me){oe=!0;break}ee.push(Me)}if(!oe)if(Array.isArray(j)&&j.length!==ee.length)F.error(`Expected ${j.length} arguments, but found ${ee.length} instead.`);else{for(let ue=0;ue<ee.length;ue++){const he=Array.isArray(j)?j[ue]:j.type,be=ee[ue];F.concat(ue+1).checkSubtype(he,be.type)}if(F.errors.length===0)return new Kr(p,S,q,ee)}}if(k.length===1)d.errors.push(...F.errors);else{const j=(k.length?k:E).map(([ee])=>{return oe=ee,Array.isArray(oe)?`(${oe.map(li).join(", ")})`:`(${li(oe.type)}...)`;var oe}).join(" | "),q=[];for(let ee=1;ee<o.length;ee++){const oe=d.parse(o[ee],1+q.length);if(!oe)return null;q.push(li(oe.type))}d.error(`Expected arguments of type ${j}, but found (${q.join(", ")}) instead.`)}return null}static register(o,d){Kr.definitions=d;for(const p in d)o[p]=Kr}}function ti(h,[o,d,p,_]){o=o.evaluate(h),d=d.evaluate(h),p=p.evaluate(h);const S=_?_.evaluate(h):1,E=gl(o,d,p,S);if(E)throw new vi(E);return new er(o/255,d/255,p/255,S,!1)}function zd(h,o){return h in o}function Cp(h,o){const d=o[h];return d===void 0?null:d}function ys(h){return{type:h}}function Fu(h){if(h instanceof xr)return Fu(h.boundExpression);if(h instanceof Kr&&h.name==="error"||h instanceof Ru||h instanceof ss||h instanceof Kn)return!1;const o=h instanceof Nr||h instanceof Wa;let d=!0;return h.eachChild(p=>{d=o?d&&Fu(p):d&&p instanceof ql}),!!d&&Fd(h)&&Bu(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Fd(h){if(h instanceof Kr&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof ss||h instanceof Kn)return!1;let o=!0;return h.eachChild(d=>{o&&!Fd(d)&&(o=!1)}),o}function qo(h){if(h instanceof Kr&&h.name==="feature-state")return!1;let o=!0;return h.eachChild(d=>{o&&!qo(d)&&(o=!1)}),o}function Bu(h,o){if(h instanceof Kr&&o.indexOf(h.name)>=0)return!1;let d=!0;return h.eachChild(p=>{d&&!Bu(p,o)&&(d=!1)}),d}function kh(h){return{result:"success",value:h}}function Dr(h){return{result:"error",value:h}}function Ec(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Ip(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Tc(h){return!!h.expression&&h.expression.interpolated}function kr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Bd(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function _v(h){return h}function Nu(h,o){const d=o.type==="color",p=h.stops&&typeof h.stops[0][0]=="object",_=p||!(p||h.property!==void 0),S=h.type||(Tc(o)?"exponential":"interval");if(d||o.type==="padding"){const q=d?er.parse:Ss.parse;(h=$n({},h)).stops&&(h.stops=h.stops.map(ee=>[ee[0],q(ee[1])])),h.default=q(h.default?h.default:o.default)}if(h.colorSpace&&(E=h.colorSpace)!=="rgb"&&E!=="hcl"&&E!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var E;let k,F,j;if(S==="exponential")k=Pc;else if(S==="interval")k=og;else if(S==="categorical"){k=Nd,F=Object.create(null);for(const q of h.stops)F[q[0]]=q[1];j=typeof h.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);k=lg}if(p){const q={},ee=[];for(let he=0;he<h.stops.length;he++){const be=h.stops[he],Me=be[0].zoom;q[Me]===void 0&&(q[Me]={zoom:Me,type:h.type,property:h.property,default:h.default,stops:[]},ee.push(Me)),q[Me].stops.push([be[0].value,be[1]])}const oe=[];for(const he of ee)oe.push([q[he].zoom,Nu(q[he],o)]);const ue={name:"linear"};return{kind:"composite",interpolationType:ue,interpolationFactor:Xs.interpolationFactor.bind(void 0,ue),zoomStops:oe.map(he=>he[0]),evaluate:({zoom:he},be)=>Pc({stops:oe,base:h.base},o,he).evaluate(he,be)}}if(_){const q=S==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:Xs.interpolationFactor.bind(void 0,q),zoomStops:h.stops.map(ee=>ee[0]),evaluate:({zoom:ee})=>k(h,o,ee,F,j)}}return{kind:"source",evaluate(q,ee){const oe=ee&&ee.properties?ee.properties[h.property]:void 0;return oe===void 0?Ka(h.default,o.default):k(h,o,oe,F,j)}}}function Ka(h,o,d){return h!==void 0?h:o!==void 0?o:d!==void 0?d:void 0}function Nd(h,o,d,p,_){return Ka(typeof d===_?p[d]:void 0,h.default,o.default)}function og(h,o,d){if(kr(d)!=="number")return Ka(h.default,o.default);const p=h.stops.length;if(p===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[p-1][0])return h.stops[p-1][1];const _=Ih(h.stops.map(S=>S[0]),d);return h.stops[_][1]}function Pc(h,o,d){const p=h.base!==void 0?h.base:1;if(kr(d)!=="number")return Ka(h.default,o.default);const _=h.stops.length;if(_===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[_-1][0])return h.stops[_-1][1];const S=Ih(h.stops.map(q=>q[0]),d),E=function(q,ee,oe,ue){const he=ue-oe,be=q-oe;return he===0?0:ee===1?be/he:(Math.pow(ee,be)-1)/(Math.pow(ee,he)-1)}(d,p,h.stops[S][0],h.stops[S+1][0]),k=h.stops[S][1],F=h.stops[S+1][1],j=ei[o.type]||_v;return typeof k.evaluate=="function"?{evaluate(...q){const ee=k.evaluate.apply(void 0,q),oe=F.evaluate.apply(void 0,q);if(ee!==void 0&&oe!==void 0)return j(ee,oe,E,h.colorSpace)}}:j(k,F,E,h.colorSpace)}function lg(h,o,d){switch(o.type){case"color":d=er.parse(d);break;case"formatted":d=qs.fromString(d.toString());break;case"resolvedImage":d=Ia.fromString(d.toString());break;case"padding":d=Ss.parse(d);break;default:kr(d)===o.type||o.type==="enum"&&o.values[d]||(d=void 0)}return Ka(d,h.default,o.default)}Kr.register(Cr,{error:[{kind:"error"},[bn],(h,[o])=>{throw new vi(o.evaluate(h))}],typeof:[bn,[Yn],(h,[o])=>li(Ci(o.evaluate(h)))],"to-rgba":[Gi(Ht,4),[Ws],(h,[o])=>{const[d,p,_,S]=o.evaluate(h).rgb;return[255*d,255*p,255*_,S]}],rgb:[Ws,[Ht,Ht,Ht],ti],rgba:[Ws,[Ht,Ht,Ht,Ht],ti],has:{type:Bn,overloads:[[[bn],(h,[o])=>zd(o.evaluate(h),h.properties())],[[bn,oi],(h,[o,d])=>zd(o.evaluate(h),d.evaluate(h))]]},get:{type:Yn,overloads:[[[bn],(h,[o])=>Cp(o.evaluate(h),h.properties())],[[bn,oi],(h,[o,d])=>Cp(o.evaluate(h),d.evaluate(h))]]},"feature-state":[Yn,[bn],(h,[o])=>Cp(o.evaluate(h),h.featureState||{})],properties:[oi,[],h=>h.properties()],"geometry-type":[bn,[],h=>h.geometryType()],id:[Yn,[],h=>h.id()],zoom:[Ht,[],h=>h.globals.zoom],"heatmap-density":[Ht,[],h=>h.globals.heatmapDensity||0],"line-progress":[Ht,[],h=>h.globals.lineProgress||0],accumulated:[Yn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ht,ys(Ht),(h,o)=>{let d=0;for(const p of o)d+=p.evaluate(h);return d}],"*":[Ht,ys(Ht),(h,o)=>{let d=1;for(const p of o)d*=p.evaluate(h);return d}],"-":{type:Ht,overloads:[[[Ht,Ht],(h,[o,d])=>o.evaluate(h)-d.evaluate(h)],[[Ht],(h,[o])=>-o.evaluate(h)]]},"/":[Ht,[Ht,Ht],(h,[o,d])=>o.evaluate(h)/d.evaluate(h)],"%":[Ht,[Ht,Ht],(h,[o,d])=>o.evaluate(h)%d.evaluate(h)],ln2:[Ht,[],()=>Math.LN2],pi:[Ht,[],()=>Math.PI],e:[Ht,[],()=>Math.E],"^":[Ht,[Ht,Ht],(h,[o,d])=>Math.pow(o.evaluate(h),d.evaluate(h))],sqrt:[Ht,[Ht],(h,[o])=>Math.sqrt(o.evaluate(h))],log10:[Ht,[Ht],(h,[o])=>Math.log(o.evaluate(h))/Math.LN10],ln:[Ht,[Ht],(h,[o])=>Math.log(o.evaluate(h))],log2:[Ht,[Ht],(h,[o])=>Math.log(o.evaluate(h))/Math.LN2],sin:[Ht,[Ht],(h,[o])=>Math.sin(o.evaluate(h))],cos:[Ht,[Ht],(h,[o])=>Math.cos(o.evaluate(h))],tan:[Ht,[Ht],(h,[o])=>Math.tan(o.evaluate(h))],asin:[Ht,[Ht],(h,[o])=>Math.asin(o.evaluate(h))],acos:[Ht,[Ht],(h,[o])=>Math.acos(o.evaluate(h))],atan:[Ht,[Ht],(h,[o])=>Math.atan(o.evaluate(h))],min:[Ht,ys(Ht),(h,o)=>Math.min(...o.map(d=>d.evaluate(h)))],max:[Ht,ys(Ht),(h,o)=>Math.max(...o.map(d=>d.evaluate(h)))],abs:[Ht,[Ht],(h,[o])=>Math.abs(o.evaluate(h))],round:[Ht,[Ht],(h,[o])=>{const d=o.evaluate(h);return d<0?-Math.round(-d):Math.round(d)}],floor:[Ht,[Ht],(h,[o])=>Math.floor(o.evaluate(h))],ceil:[Ht,[Ht],(h,[o])=>Math.ceil(o.evaluate(h))],"filter-==":[Bn,[bn,Yn],(h,[o,d])=>h.properties()[o.value]===d.value],"filter-id-==":[Bn,[Yn],(h,[o])=>h.id()===o.value],"filter-type-==":[Bn,[bn],(h,[o])=>h.geometryType()===o.value],"filter-<":[Bn,[bn,Yn],(h,[o,d])=>{const p=h.properties()[o.value],_=d.value;return typeof p==typeof _&&p<_}],"filter-id-<":[Bn,[Yn],(h,[o])=>{const d=h.id(),p=o.value;return typeof d==typeof p&&d<p}],"filter->":[Bn,[bn,Yn],(h,[o,d])=>{const p=h.properties()[o.value],_=d.value;return typeof p==typeof _&&p>_}],"filter-id->":[Bn,[Yn],(h,[o])=>{const d=h.id(),p=o.value;return typeof d==typeof p&&d>p}],"filter-<=":[Bn,[bn,Yn],(h,[o,d])=>{const p=h.properties()[o.value],_=d.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[Bn,[Yn],(h,[o])=>{const d=h.id(),p=o.value;return typeof d==typeof p&&d<=p}],"filter->=":[Bn,[bn,Yn],(h,[o,d])=>{const p=h.properties()[o.value],_=d.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[Bn,[Yn],(h,[o])=>{const d=h.id(),p=o.value;return typeof d==typeof p&&d>=p}],"filter-has":[Bn,[Yn],(h,[o])=>o.value in h.properties()],"filter-has-id":[Bn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Bn,[Gi(bn)],(h,[o])=>o.value.indexOf(h.geometryType())>=0],"filter-id-in":[Bn,[Gi(Yn)],(h,[o])=>o.value.indexOf(h.id())>=0],"filter-in-small":[Bn,[bn,Gi(Yn)],(h,[o,d])=>d.value.indexOf(h.properties()[o.value])>=0],"filter-in-large":[Bn,[bn,Gi(Yn)],(h,[o,d])=>function(p,_,S,E){for(;S<=E;){const k=S+E>>1;if(_[k]===p)return!0;_[k]>p?E=k-1:S=k+1}return!1}(h.properties()[o.value],d.value,0,d.value.length-1)],all:{type:Bn,overloads:[[[Bn,Bn],(h,[o,d])=>o.evaluate(h)&&d.evaluate(h)],[ys(Bn),(h,o)=>{for(const d of o)if(!d.evaluate(h))return!1;return!0}]]},any:{type:Bn,overloads:[[[Bn,Bn],(h,[o,d])=>o.evaluate(h)||d.evaluate(h)],[ys(Bn),(h,o)=>{for(const d of o)if(d.evaluate(h))return!0;return!1}]]},"!":[Bn,[Bn],(h,[o])=>!o.evaluate(h)],"is-supported-script":[Bn,[bn],(h,[o])=>{const d=h.globals&&h.globals.isSupportedScript;return!d||d(o.evaluate(h))}],upcase:[bn,[bn],(h,[o])=>o.evaluate(h).toUpperCase()],downcase:[bn,[bn],(h,[o])=>o.evaluate(h).toLowerCase()],concat:[bn,ys(Yn),(h,o)=>o.map(d=>Ho(d.evaluate(h))).join("")],"resolved-locale":[bn,[_h],(h,[o])=>o.evaluate(h).resolvedLocale()]});class Vd{constructor(o,d){var p;this.expression=o,this._warningHistory={},this._evaluator=new Pr,this._defaultValue=d?(p=d).type==="color"&&Bd(p.default)?new er(0,0,0,0):p.type==="color"?er.parse(p.default)||null:p.type==="padding"?Ss.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?Es.parse(p.default)||null:p.type==="projectionDefinition"?Ks.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(o,d,p,_,S,E){return this._evaluator.globals=o,this._evaluator.feature=d,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(o,d,p,_,S,E){this._evaluator.globals=o,this._evaluator.feature=d||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new vi(`Expected value to be one of ${Object.keys(this._enumValues).map(F=>JSON.stringify(F)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Ko(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in Cr}function kc(h,o){const d=new kn(Cr,Fu,[],o?function(_){const S={color:Ws,string:bn,number:Ht,enum:bn,boolean:Bn,formatted:Su,padding:Ad,projectionDefinition:Os,resolvedImage:$l,variableAnchorOffsetCollection:wd};return _.type==="array"?Gi(S[_.value]||Yn,_.length):S[_.type]}(o):void 0),p=d.parse(h,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?kh(new Vd(p,o)):Dr(d.errors)}class Vu{constructor(o,d){this.kind=o,this._styleExpression=d,this.isStateDependent=o!=="constant"&&!qo(d.expression)}evaluateWithoutErrorHandling(o,d,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(o,d,p,_,S,E)}evaluate(o,d,p,_,S,E){return this._styleExpression.evaluate(o,d,p,_,S,E)}}class yl{constructor(o,d,p,_){this.kind=o,this.zoomStops=p,this._styleExpression=d,this.isStateDependent=o!=="camera"&&!qo(d.expression),this.interpolationType=_}evaluateWithoutErrorHandling(o,d,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(o,d,p,_,S,E)}evaluate(o,d,p,_,S,E){return this._styleExpression.evaluate(o,d,p,_,S,E)}interpolationFactor(o,d,p){return this.interpolationType?Xs.interpolationFactor(this.interpolationType,o,d,p):0}}function Lh(h,o){const d=kc(h,o);if(d.result==="error")return d;const p=d.value.expression,_=Fd(p);if(!_&&!Ec(o))return Dr([new Ar("","data expressions not supported")]);const S=Bu(p,["zoom"]);if(!S&&!Ip(o))return Dr([new Ar("","zoom expressions not supported")]);const E=Ud(p);return E||S?E instanceof Ar?Dr([E]):E instanceof Xs&&!Tc(o)?Dr([new Ar("",'"interpolate" expressions cannot be used with this property')]):kh(E?new yl(_?"camera":"composite",d.value,E.labels,E instanceof Xs?E.interpolation:void 0):new Vu(_?"constant":"source",d.value)):Dr([new Ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class jd{constructor(o,d){this._parameters=o,this._specification=d,$n(this,Nu(this._parameters,this._specification))}static deserialize(o){return new jd(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ud(h){let o=null;if(h instanceof $r)o=Ud(h.result);else if(h instanceof wc){for(const d of h.args)if(o=Ud(d),o)break}else(h instanceof Wi||h instanceof Xs)&&h.input instanceof Kr&&h.input.name==="zoom"&&(o=h);return o instanceof Ar||h.eachChild(d=>{const p=Ud(d);p instanceof Ar?o=p:!o&&p?o=new Ar("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&p&&o!==p&&(o=new Ar("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function $d(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const o of h.slice(1))if(!$d(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Dh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Lc(h){if(h==null)return{filter:()=>!0,needGeometry:!1};$d(h)||(h=Dc(h));const o=kc(h,Dh);if(o.result==="error")throw new Error(o.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,p,_)=>o.value.evaluate(d,p,{},_),needGeometry:Sp(h)}}function Mp(h,o){return h<o?-1:h>o?1:0}function Sp(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let o=1;o<h.length;o++)if(Sp(h[o]))return!0;return!1}function Dc(h){if(!h)return!0;const o=h[0];return h.length<=1?o!=="any":o==="=="?Hd(h[1],h[2],"=="):o==="!="?qi(Hd(h[1],h[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Hd(h[1],h[2],o):o==="any"?(d=h.slice(1),["any"].concat(d.map(Dc))):o==="all"?["all"].concat(h.slice(1).map(Dc)):o==="none"?["all"].concat(h.slice(1).map(Dc).map(qi)):o==="in"?Ep(h[1],h.slice(2)):o==="!in"?qi(Ep(h[1],h.slice(2))):o==="has"?zi(h[1]):o!=="!has"||qi(zi(h[1]));var d}function Hd(h,o,d){switch(h){case"$type":return[`filter-type-${d}`,o];case"$id":return[`filter-id-${d}`,o];default:return[`filter-${d}`,h,o]}}function Ep(h,o){if(o.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(d=>typeof d!=typeof o[0])?["filter-in-large",h,["literal",o.sort(Mp)]]:["filter-in-small",h,["literal",o]]}}function zi(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function qi(h){return["!",h]}function Rh(h){const o=typeof h;if(o==="number"||o==="boolean"||o==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let _="[";for(const S of h)_+=`${Rh(S)},`;return`${_}]`}const d=Object.keys(h).sort();let p="{";for(let _=0;_<d.length;_++)p+=`${JSON.stringify(d[_])}:${Rh(h[d[_]])},`;return`${p}}`}function Gd(h){let o="";for(const d of Qe)o+=`/${Rh(h[d])}`;return o}function Tp(h){const o=h.value;return o?[new Vt(h.key,o,"constants have been deprecated as of v8")]:[]}function Fi(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function vl(h){if(Array.isArray(h))return h.map(vl);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const o={};for(const d in h)o[d]=vl(h[d]);return o}return Fi(h)}function zs(h){const o=h.key,d=h.value,p=h.valueSpec||{},_=h.objectElementValidators||{},S=h.style,E=h.styleSpec,k=h.validateSpec;let F=[];const j=kr(d);if(j!=="object")return[new Vt(o,d,`object expected, ${j} found`)];for(const q in d){const ee=q.split(".")[0],oe=p[ee]||p["*"];let ue;if(_[ee])ue=_[ee];else if(p[ee])ue=k;else if(_["*"])ue=_["*"];else{if(!p["*"]){F.push(new Vt(o,d[q],`unknown property "${q}"`));continue}ue=k}F=F.concat(ue({key:(o&&`${o}.`)+q,value:d[q],valueSpec:oe,style:S,styleSpec:E,object:d,objectKey:q,validateSpec:k},d))}for(const q in p)_[q]||p[q].required&&p[q].default===void 0&&d[q]===void 0&&F.push(new Vt(o,d,`missing required property "${q}"`));return F}function Oh(h){const o=h.value,d=h.valueSpec,p=h.style,_=h.styleSpec,S=h.key,E=h.arrayElementValidator||h.validateSpec;if(kr(o)!=="array")return[new Vt(S,o,`array expected, ${kr(o)} found`)];if(d.length&&o.length!==d.length)return[new Vt(S,o,`array length ${d.length} expected, length ${o.length} found`)];if(d["min-length"]&&o.length<d["min-length"])return[new Vt(S,o,`array length at least ${d["min-length"]} expected, length ${o.length} found`)];let k={type:d.value,values:d.values};_.$version<7&&(k.function=d.function),kr(d.value)==="object"&&(k=d.value);let F=[];for(let j=0;j<o.length;j++)F=F.concat(E({array:o,arrayIndex:j,value:o[j],valueSpec:k,validateSpec:h.validateSpec,style:p,styleSpec:_,key:`${S}[${j}]`}));return F}function Jl(h){const o=h.key,d=h.value,p=h.valueSpec;let _=kr(d);return _==="number"&&d!=d&&(_="NaN"),_!=="number"?[new Vt(o,d,`number expected, ${_} found`)]:"minimum"in p&&d<p.minimum?[new Vt(o,d,`${d} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&d>p.maximum?[new Vt(o,d,`${d} is greater than the maximum value ${p.maximum}`)]:[]}function ju(h){const o=h.valueSpec,d=Fi(h.value.type);let p,_,S,E={};const k=d!=="categorical"&&h.value.property===void 0,F=!k,j=kr(h.value.stops)==="array"&&kr(h.value.stops[0])==="array"&&kr(h.value.stops[0][0])==="object",q=zs({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ue){if(d==="identity")return[new Vt(ue.key,ue.value,'identity function may not have a "stops" property')];let he=[];const be=ue.value;return he=he.concat(Oh({key:ue.key,value:be,valueSpec:ue.valueSpec,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:ee})),kr(be)==="array"&&be.length===0&&he.push(new Vt(ue.key,be,"array must have at least one stop")),he},default:function(ue){return ue.validateSpec({key:ue.key,value:ue.value,valueSpec:o,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec})}}});return d==="identity"&&k&&q.push(new Vt(h.key,h.value,'missing required property "property"')),d==="identity"||h.value.stops||q.push(new Vt(h.key,h.value,'missing required property "stops"')),d==="exponential"&&h.valueSpec.expression&&!Tc(h.valueSpec)&&q.push(new Vt(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(F&&!Ec(h.valueSpec)?q.push(new Vt(h.key,h.value,"property functions not supported")):k&&!Ip(h.valueSpec)&&q.push(new Vt(h.key,h.value,"zoom functions not supported"))),d!=="categorical"&&!j||h.value.property!==void 0||q.push(new Vt(h.key,h.value,'"property" property is required')),q;function ee(ue){let he=[];const be=ue.value,Me=ue.key;if(kr(be)!=="array")return[new Vt(Me,be,`array expected, ${kr(be)} found`)];if(be.length!==2)return[new Vt(Me,be,`array length 2 expected, length ${be.length} found`)];if(j){if(kr(be[0])!=="object")return[new Vt(Me,be,`object expected, ${kr(be[0])} found`)];if(be[0].zoom===void 0)return[new Vt(Me,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new Vt(Me,be,"object stop key must have value")];if(S&&S>Fi(be[0].zoom))return[new Vt(Me,be[0].zoom,"stop zoom values must appear in ascending order")];Fi(be[0].zoom)!==S&&(S=Fi(be[0].zoom),_=void 0,E={}),he=he.concat(zs({key:`${Me}[0]`,value:be[0],valueSpec:{zoom:{}},validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:Jl,value:oe}}))}else he=he.concat(oe({key:`${Me}[0]`,value:be[0],validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec},be));return Ko(vl(be[1]))?he.concat([new Vt(`${Me}[1]`,be[1],"expressions are not allowed in function stops.")]):he.concat(ue.validateSpec({key:`${Me}[1]`,value:be[1],valueSpec:o,validateSpec:ue.validateSpec,style:ue.style,styleSpec:ue.styleSpec}))}function oe(ue,he){const be=kr(ue.value),Me=Fi(ue.value),ze=ue.value!==null?ue.value:he;if(p){if(be!==p)return[new Vt(ue.key,ze,`${be} stop domain type must match previous stop domain type ${p}`)]}else p=be;if(be!=="number"&&be!=="string"&&be!=="boolean")return[new Vt(ue.key,ze,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&d!=="categorical"){let st=`number expected, ${be} found`;return Ec(o)&&d===void 0&&(st+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vt(ue.key,ze,st)]}return d!=="categorical"||be!=="number"||isFinite(Me)&&Math.floor(Me)===Me?d!=="categorical"&&be==="number"&&_!==void 0&&Me<_?[new Vt(ue.key,ze,"stop domain values must appear in ascending order")]:(_=Me,d==="categorical"&&Me in E?[new Vt(ue.key,ze,"stop domain values must be unique")]:(E[Me]=!0,[])):[new Vt(ue.key,ze,`integer expected, found ${Me}`)]}}function yo(h){const o=(h.expressionContext==="property"?Lh:kc)(vl(h.value),h.valueSpec);if(o.result==="error")return o.value.map(p=>new Vt(`${h.key}${p.key}`,h.value,p.message));const d=o.value.expression||o.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!d.outputDefined())return[new Vt(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!qo(d))return[new Vt(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!qo(d))return[new Vt(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Bu(d,["zoom","feature-state"]))return[new Vt(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Fd(d))return[new Vt(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vo(h){const o=h.key,d=h.value,p=h.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(Fi(d))===-1&&_.push(new Vt(o,d,`expected one of [${p.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(p.values).indexOf(Fi(d))===-1&&_.push(new Vt(o,d,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(d)} found`)),_}function eu(h){return $d(vl(h.value))?yo($n({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Pp(h)}function Pp(h){const o=h.value,d=h.key;if(kr(o)!=="array")return[new Vt(d,o,`array expected, ${kr(o)} found`)];const p=h.styleSpec;let _,S=[];if(o.length<1)return[new Vt(d,o,"filter array must have at least 1 element")];switch(S=S.concat(vo({key:`${d}[0]`,value:o[0],valueSpec:p.filter_operator,style:h.style,styleSpec:h.styleSpec})),Fi(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Fi(o[1])==="$type"&&S.push(new Vt(d,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&S.push(new Vt(d,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(_=kr(o[1]),_!=="string"&&S.push(new Vt(`${d}[1]`,o[1],`string expected, ${_} found`)));for(let E=2;E<o.length;E++)_=kr(o[E]),Fi(o[1])==="$type"?S=S.concat(vo({key:`${d}[${E}]`,value:o[E],valueSpec:p.geometry_type,style:h.style,styleSpec:h.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new Vt(`${d}[${E}]`,o[E],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let E=1;E<o.length;E++)S=S.concat(Pp({key:`${d}[${E}]`,value:o[E],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":_=kr(o[1]),o.length!==2?S.push(new Vt(d,o,`filter array for "${o[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new Vt(`${d}[1]`,o[1],`string expected, ${_} found`))}return S}function kp(h,o){const d=h.key,p=h.validateSpec,_=h.style,S=h.styleSpec,E=h.value,k=h.objectKey,F=S[`${o}_${h.layerType}`];if(!F)return[];const j=k.match(/^(.*)-transition$/);if(o==="paint"&&j&&F[j[1]]&&F[j[1]].transition)return p({key:d,value:E,valueSpec:S.transition,style:_,styleSpec:S});const q=h.valueSpec||F[k];if(!q)return[new Vt(d,E,`unknown property "${k}"`)];let ee;if(kr(E)==="string"&&Ec(q)&&!q.tokens&&(ee=/^{([^}]+)}$/.exec(E)))return[new Vt(d,E,`"${k}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ee[1])} }\`.`)];const oe=[];return h.layerType==="symbol"&&(k==="text-field"&&_&&!_.glyphs&&oe.push(new Vt(d,E,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&Bd(vl(E))&&Fi(E.type)==="identity"&&oe.push(new Vt(d,E,'"text-font" does not support identity functions'))),oe.concat(p({key:h.key,value:E,valueSpec:q,style:_,styleSpec:S,expressionContext:"property",propertyType:o,propertyKey:k}))}function ug(h){return kp(h,"paint")}function Lp(h){return kp(h,"layout")}function Dp(h){let o=[];const d=h.value,p=h.key,_=h.style,S=h.styleSpec;d.type||d.ref||o.push(new Vt(p,d,'either "type" or "ref" is required'));let E=Fi(d.type);const k=Fi(d.ref);if(d.id){const F=Fi(d.id);for(let j=0;j<h.arrayIndex;j++){const q=_.layers[j];Fi(q.id)===F&&o.push(new Vt(p,d.id,`duplicate layer id "${d.id}", previously used at line ${q.id.__line__}`))}}if("ref"in d){let F;["type","source","source-layer","filter","layout"].forEach(j=>{j in d&&o.push(new Vt(p,d[j],`"${j}" is prohibited for ref layers`))}),_.layers.forEach(j=>{Fi(j.id)===k&&(F=j)}),F?F.ref?o.push(new Vt(p,d.ref,"ref cannot reference another ref layer")):E=Fi(F.type):o.push(new Vt(p,d.ref,`ref layer "${k}" not found`))}else if(E!=="background")if(d.source){const F=_.sources&&_.sources[d.source],j=F&&Fi(F.type);F?j==="vector"&&E==="raster"?o.push(new Vt(p,d.source,`layer "${d.id}" requires a raster source`)):j!=="raster-dem"&&E==="hillshade"?o.push(new Vt(p,d.source,`layer "${d.id}" requires a raster-dem source`)):j==="raster"&&E!=="raster"?o.push(new Vt(p,d.source,`layer "${d.id}" requires a vector source`)):j!=="vector"||d["source-layer"]?j==="raster-dem"&&E!=="hillshade"?o.push(new Vt(p,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!d.paint||!d.paint["line-gradient"]||j==="geojson"&&F.lineMetrics||o.push(new Vt(p,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Vt(p,d,`layer "${d.id}" must specify a "source-layer"`)):o.push(new Vt(p,d.source,`source "${d.source}" not found`))}else o.push(new Vt(p,d,'missing required property "source"'));return o=o.concat(zs({key:p,value:d,valueSpec:S.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${p}.type`,value:d.type,valueSpec:S.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:d,objectKey:"type"}),filter:eu,layout:F=>zs({layer:d,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":j=>Lp($n({layerType:E},j))}}),paint:F=>zs({layer:d,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":j=>ug($n({layerType:E},j))}})}})),o}function pa(h){const o=h.value,d=h.key,p=kr(o);return p!=="string"?[new Vt(d,o,`string expected, ${p} found`)]:[]}const Rc={promoteId:function({key:h,value:o}){if(kr(o)==="string")return pa({key:h,value:o});{const d=[];for(const p in o)d.push(...pa({key:`${h}.${p}`,value:o[p]}));return d}}};function Rp(h){const o=h.value,d=h.key,p=h.styleSpec,_=h.style,S=h.validateSpec;if(!o.type)return[new Vt(d,o,'"type" is required')];const E=Fi(o.type);let k;switch(E){case"vector":case"raster":return k=zs({key:d,value:o,valueSpec:p[`source_${E.replace("-","_")}`],style:h.style,styleSpec:p,objectElementValidators:Rc,validateSpec:S}),k;case"raster-dem":return k=function(F){var j;const q=(j=F.sourceName)!==null&&j!==void 0?j:"",ee=F.value,oe=F.styleSpec,ue=oe.source_raster_dem,he=F.style;let be=[];const Me=kr(ee);if(ee===void 0)return be;if(Me!=="object")return be.push(new Vt("source_raster_dem",ee,`object expected, ${Me} found`)),be;const ze=Fi(ee.encoding)==="custom",st=["redFactor","greenFactor","blueFactor","baseShift"],He=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const ae in ee)!ze&&st.includes(ae)?be.push(new Vt(ae,ee[ae],`In "${q}": "${ae}" is only valid when "encoding" is set to "custom". ${He} encoding found`)):ue[ae]?be=be.concat(F.validateSpec({key:ae,value:ee[ae],valueSpec:ue[ae],validateSpec:F.validateSpec,style:he,styleSpec:oe})):be.push(new Vt(ae,ee[ae],`unknown property "${ae}"`));return be}({sourceName:d,value:o,style:h.style,styleSpec:p,validateSpec:S}),k;case"geojson":if(k=zs({key:d,value:o,valueSpec:p.source_geojson,style:_,styleSpec:p,validateSpec:S,objectElementValidators:Rc}),o.cluster)for(const F in o.clusterProperties){const[j,q]=o.clusterProperties[F],ee=typeof j=="string"?[j,["accumulated"],["get",F]]:j;k.push(...yo({key:`${d}.${F}.map`,value:q,expressionContext:"cluster-map"})),k.push(...yo({key:`${d}.${F}.reduce`,value:ee,expressionContext:"cluster-reduce"}))}return k;case"video":return zs({key:d,value:o,valueSpec:p.source_video,style:_,validateSpec:S,styleSpec:p});case"image":return zs({key:d,value:o,valueSpec:p.source_image,style:_,validateSpec:S,styleSpec:p});case"canvas":return[new Vt(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vo({key:`${d}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ce(h){const o=h.value,d=h.styleSpec,p=d.light,_=h.style;let S=[];const E=kr(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new Vt("light",o,`object expected, ${E} found`)]),S;for(const k in o){const F=k.match(/^(.*)-transition$/);S=S.concat(F&&p[F[1]]&&p[F[1]].transition?h.validateSpec({key:k,value:o[k],valueSpec:d.transition,validateSpec:h.validateSpec,style:_,styleSpec:d}):p[k]?h.validateSpec({key:k,value:o[k],valueSpec:p[k],validateSpec:h.validateSpec,style:_,styleSpec:d}):[new Vt(k,o[k],`unknown property "${k}"`)])}return S}function Uu(h){const o=h.value,d=h.styleSpec,p=d.sky,_=h.style,S=kr(o);if(o===void 0)return[];if(S!=="object")return[new Vt("sky",o,`object expected, ${S} found`)];let E=[];for(const k in o)E=E.concat(p[k]?h.validateSpec({key:k,value:o[k],valueSpec:p[k],style:_,styleSpec:d}):[new Vt(k,o[k],`unknown property "${k}"`)]);return E}function zh(h){const o=h.value,d=h.styleSpec,p=d.terrain,_=h.style;let S=[];const E=kr(o);if(o===void 0)return S;if(E!=="object")return S=S.concat([new Vt("terrain",o,`object expected, ${E} found`)]),S;for(const k in o)S=S.concat(p[k]?h.validateSpec({key:k,value:o[k],valueSpec:p[k],validateSpec:h.validateSpec,style:_,styleSpec:d}):[new Vt(k,o[k],`unknown property "${k}"`)]);return S}function Sa(h){let o=[];const d=h.value,p=h.key;if(Array.isArray(d)){const _=[],S=[];for(const E in d)d[E].id&&_.includes(d[E].id)&&o.push(new Vt(p,d,`all the sprites' ids must be unique, but ${d[E].id} is duplicated`)),_.push(d[E].id),d[E].url&&S.includes(d[E].url)&&o.push(new Vt(p,d,`all the sprites' URLs must be unique, but ${d[E].url} is duplicated`)),S.push(d[E].url),o=o.concat(zs({key:`${p}[${E}]`,value:d[E],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return o}return pa({key:p,value:d})}const ur={"*":()=>[],array:Oh,boolean:function(h){const o=h.value,d=h.key,p=kr(o);return p!=="boolean"?[new Vt(d,o,`boolean expected, ${p} found`)]:[]},number:Jl,color:function(h){const o=h.key,d=h.value,p=kr(d);return p!=="string"?[new Vt(o,d,`color expected, ${p} found`)]:er.parse(String(d))?[]:[new Vt(o,d,`color expected, "${d}" found`)]},constants:Tp,enum:vo,filter:eu,function:ju,layer:Dp,object:zs,source:Rp,light:Ce,sky:Uu,terrain:zh,projection:function(h){const o=h.value,d=h.styleSpec,p=d.projection,_=h.style,S=kr(o);if(o===void 0)return[];if(S!=="object")return[new Vt("projection",o,`object expected, ${S} found`)];let E=[];for(const k in o)E=E.concat(p[k]?h.validateSpec({key:k,value:o[k],valueSpec:p[k],style:_,styleSpec:d}):[new Vt(k,o[k],`unknown property "${k}"`)]);return E},projectionDefinition:function(h){const o=h.key;let d=h.value;d=d instanceof String?d.valueOf():d;const p=kr(d);return p!=="array"||function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"}(d)||function(_){return!!["interpolate","step","literal"].includes(_[0])}(d)?["array","string"].includes(p)?[]:[new Vt(o,d,`projection expected, invalid type "${p}" found`)]:[new Vt(o,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:pa,formatted:function(h){return pa(h).length===0?[]:yo(h)},resolvedImage:function(h){return pa(h).length===0?[]:yo(h)},padding:function(h){const o=h.key,d=h.value;if(kr(d)==="array"){if(d.length<1||d.length>4)return[new Vt(o,d,`padding requires 1 to 4 values; ${d.length} values found`)];const p={type:"number"};let _=[];for(let S=0;S<d.length;S++)_=_.concat(h.validateSpec({key:`${o}[${S}]`,value:d[S],validateSpec:h.validateSpec,valueSpec:p}));return _}return Jl({key:o,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const o=h.key,d=h.value,p=kr(d),_=h.styleSpec;if(p!=="array"||d.length<1||d.length%2!=0)return[new Vt(o,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let E=0;E<d.length;E+=2)S=S.concat(vo({key:`${o}[${E}]`,value:d[E],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(Oh({key:`${o}[${E+1}]`,value:d[E+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:_}));return S},sprite:Sa};function tu(h){const o=h.value,d=h.valueSpec,p=h.styleSpec;return h.validateSpec=tu,d.expression&&Bd(Fi(o))?ju(h):d.expression&&Ko(vl(o))?yo(h):d.type&&ur[d.type]?ur[d.type](h):zs($n({},h,{valueSpec:d.type?p[d.type]:d}))}function ma(h){const o=h.value,d=h.key,p=pa(h);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new Vt(d,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new Vt(d,o,'"glyphs" url must include a "{range}" token'))),p}function Qs(h,o=ve){let d=[];return d=d.concat(tu({key:"",value:h,valueSpec:o.$root,styleSpec:o,style:h,validateSpec:tu,objectElementValidators:{glyphs:ma,"*":()=>[]}})),h.constants&&(d=d.concat(Tp({key:"constants",value:h.constants}))),cg(d)}function Ts(h){return function(o){return h({...o,validateSpec:tu})}}function cg(h){return[].concat(h).sort((o,d)=>o.line-d.line)}function Yo(h){return function(...o){return cg(h.apply(this,o))}}Qs.source=Yo(Ts(Rp)),Qs.sprite=Yo(Ts(Sa)),Qs.glyphs=Yo(Ts(ma)),Qs.light=Yo(Ts(Ce)),Qs.sky=Yo(Ts(Uu)),Qs.terrain=Yo(Ts(zh)),Qs.layer=Yo(Ts(Dp)),Qs.filter=Yo(Ts(eu)),Qs.paintProperty=Yo(Ts(ug)),Qs.layoutProperty=Yo(Ts(Lp));const Xo=Qs,hg=Xo.light,Op=Xo.sky,_l=Xo.paintProperty,zp=Xo.layoutProperty;function dg(h,o){let d=!1;if(o&&o.length)for(const p of o)h.fire(new Ae(new Error(p.message))),d=!0;return d}class bl{constructor(o,d,p){const _=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const E=new Int32Array(this.arrayBuffer);o=E[0],this.d=(d=E[1])+2*(p=E[2]);for(let F=0;F<this.d*this.d;F++){const j=E[3+F],q=E[3+F+1];_.push(j===q?null:E.subarray(j,q))}const k=E[3+_.length+1];this.keys=E.subarray(E[3+_.length],k),this.bboxes=E.subarray(k),this.insert=this._insertReadonly}else{this.d=d+2*p;for(let E=0;E<this.d*this.d;E++)_.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=o,this.padding=p,this.scale=d/o,this.uid=0;const S=p/d*o;this.min=-S,this.max=o+S}insert(o,d,p,_,S){this._forEachCell(d,p,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,d,p,_,S,E){this.cells[S].push(E)}query(o,d,p,_,S){const E=this.min,k=this.max;if(o<=E&&d<=E&&k<=p&&k<=_&&!S)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(o,d,p,_,this._queryCell,F,{},S),F}}_queryCell(o,d,p,_,S,E,k,F){const j=this.cells[S];if(j!==null){const q=this.keys,ee=this.bboxes;for(let oe=0;oe<j.length;oe++){const ue=j[oe];if(k[ue]===void 0){const he=4*ue;(F?F(ee[he+0],ee[he+1],ee[he+2],ee[he+3]):o<=ee[he+2]&&d<=ee[he+3]&&p>=ee[he+0]&&_>=ee[he+1])?(k[ue]=!0,E.push(q[ue])):k[ue]=!1}}}}_forEachCell(o,d,p,_,S,E,k,F){const j=this._convertToCellCoord(o),q=this._convertToCellCoord(d),ee=this._convertToCellCoord(p),oe=this._convertToCellCoord(_);for(let ue=j;ue<=ee;ue++)for(let he=q;he<=oe;he++){const be=this.d*he+ue;if((!F||F(this._convertFromCellCoord(ue),this._convertFromCellCoord(he),this._convertFromCellCoord(ue+1),this._convertFromCellCoord(he+1)))&&S.call(this,o,d,p,_,be,E,k,F))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,d=3+this.cells.length+1+1;let p=0;for(let E=0;E<this.cells.length;E++)p+=this.cells[E].length;const _=new Int32Array(d+p+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=d;for(let E=0;E<o.length;E++){const k=o[E];_[3+E]=S,_.set(k,S),S+=k.length}return _[3+o.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+o.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(o,d){const p=o.toArrayBuffer();return d&&d.push(p),{buffer:p}}static deserialize(o){return new bl(o.buffer)}}const xl={};function yn(h,o,d={}){if(xl[h])throw new Error(`${h} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:h,writeable:!1}),xl[h]={klass:o,omit:d.omit||[],shallow:d.shallow||[]}}yn("Object",Object),yn("TransferableGridIndex",bl),yn("Color",er),yn("Error",Error),yn("AJAXError",_t),yn("ResolvedImage",Ia),yn("StylePropertyFunction",jd),yn("StyleExpression",Vd,{omit:["_evaluator"]}),yn("ZoomDependentExpression",yl),yn("ZoomConstantExpression",Vu),yn("CompoundExpression",Kr,{omit:["_evaluate"]});for(const h in Cr)Cr[h]._classRegistryKey||yn(`Expression_${h}`,Cr[h]);function Qo(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Fp(h){return h.$name||h.constructor._classRegistryKey}function Fh(h){return!function(o){if(o===null||typeof o!="object")return!1;const d=Fp(o);return!(!d||d==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Qo(h)||ye(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Bh(h,o){if(Fh(h))return(Qo(h)||ye(h))&&o&&o.push(h),ArrayBuffer.isView(h)&&o&&o.push(h.buffer),h instanceof ImageData&&o&&o.push(h.data.buffer),h;if(Array.isArray(h)){const S=[];for(const E of h)S.push(Bh(E,o));return S}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const d=Fp(h);if(!d)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!xl[d])throw new Error(`${d} is not registered.`);const{klass:p}=xl[d],_=p.serialize?p.serialize(h,o):{};if(p.serialize){if(o&&_===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in h){if(!h.hasOwnProperty(S)||xl[d].omit.indexOf(S)>=0)continue;const E=h[S];_[S]=xl[d].shallow.indexOf(S)>=0?E:Bh(E,o)}h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(_.$name=d),_}function $u(h){if(Fh(h))return h;if(Array.isArray(h))return h.map($u);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const o=Fp(h)||"Object";if(!xl[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:d}=xl[o];if(!d)throw new Error(`can't deserialize unregistered class ${o}`);if(d.deserialize)return d.deserialize(h);const p=Object.create(d.prototype);for(const _ of Object.keys(h)){if(_==="$name")continue;const S=h[_];p[_]=xl[o].shallow.indexOf(_)>=0?S:$u(S)}return p}class Nh{constructor(){this.first=!0}update(o,d){const p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=d),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=p,!0))}}const tr={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Zd(h){for(const o of h)if(Wd(o.charCodeAt(0)))return!0;return!1}function fg(h){for(const o of h)if(!pg(o.charCodeAt(0)))return!1;return!0}function ga(h){const o=h.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}}).filter(d=>d);return new RegExp(o.join("|"),"u")}const Bp=ga(["Arab","Dupl","Mong","Ougr","Syrc"]);function pg(h){return!Bp.test(String.fromCodePoint(h))}const mg=ga(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Wd(h){return!(h!==746&&h!==747&&(h<4352||!(tr["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||tr["CJK Compatibility"](h)||tr["CJK Strokes"](h)||!(!tr["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||tr["Enclosed CJK Letters and Months"](h)||tr["Ideographic Description Characters"](h)||tr.Kanbun(h)||tr.Katakana(h)&&h!==12540||!(!tr["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!tr["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||tr["Vertical Forms"](h)||tr["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||mg.test(String.fromCodePoint(h)))))}function gg(h){return!(Wd(h)||function(o){return!!(tr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||tr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||tr["Letterlike Symbols"](o)||tr["Number Forms"](o)||tr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||tr["Control Pictures"](o)&&o!==9251||tr["Optical Character Recognition"](o)||tr["Enclosed Alphanumerics"](o)||tr["Geometric Shapes"](o)||tr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||tr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||tr["CJK Symbols and Punctuation"](o)||tr.Katakana(o)||tr["Private Use Area"](o)||tr["CJK Compatibility Forms"](o)||tr["Small Form Variants"](o)||tr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(h))}const Np=ga(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function qd(h){return Np.test(String.fromCodePoint(h))}function yg(h,o){return!(!o&&qd(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||tr.Khmer(h))}function bv(h){for(const o of h)if(qd(o.charCodeAt(0)))return!0;return!1}const Jo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Jo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,o){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const d=h.pluginURL,p=new Promise(S=>{this.loadScriptResolve=S});o(d);const _=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([p,_]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:d};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)})}};class Yr{constructor(o,d){this.zoom=o,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Nh,this.transition={})}isSupportedScript(o){return function(d,p){for(const _ of d)if(!yg(_.charCodeAt(0),p))return!1;return!0}(o,Jo.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,d=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*d}}}class nu{constructor(o,d){this.property=o,this.value=d,this.expression=function(p,_){if(Bd(p))return new jd(p,_);if(Ko(p)){const S=Lh(p,_);if(S.result==="error")throw new Error(S.value.map(E=>`${E.key}: ${E.message}`).join(", "));return S.value}{let S=p;return _.type==="color"&&typeof p=="string"?S=er.parse(p):_.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?S=Es.parse(p):_.type==="projectionDefinition"&&typeof p=="string"&&(S=Ks.parse(p)):S=Ss.parse(p),{kind:"constant",evaluate:()=>S}}}(d===void 0?o.specification.default:d,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,d,p){return this.property.possiblyEvaluate(this,o,d,p)}}class Kd{constructor(o){this.property=o,this.value=new nu(o,void 0)}transitioned(o,d){return new Vh(this.property,this.value,d,pt({},o.transition,this.transition),o.now)}untransitioned(){return new Vh(this.property,this.value,null,{},0)}}class Yd{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Lt(this._values[o].value.value)}setValue(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Kd(this._values[o].property)),this._values[o].value=new nu(this._values[o].property,d===null?void 0:Lt(d))}getTransition(o){return Lt(this._values[o].transition)}setTransition(o,d){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Kd(this._values[o].property)),this._values[o].transition=Lt(d)||void 0}serialize(){const o={};for(const d of Object.keys(this._values)){const p=this.getValue(d);p!==void 0&&(o[d]=p);const _=this.getTransition(d);_!==void 0&&(o[`${d}-transition`]=_)}return o}transitioned(o,d){const p=new el(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(o,d._values[_]);return p}untransitioned(){const o=new el(this._properties);for(const d of Object.keys(this._values))o._values[d]=this._values[d].untransitioned();return o}}class Vh{constructor(o,d,p,_,S){this.property=o,this.value=d,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,o.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(o,d,p){const _=o.now||0,S=this.value.possiblyEvaluate(o,d,p),E=this.prior;if(E){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return E.possiblyEvaluate(o,d,p);{const k=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(o,d,p),S,Ne(k))}}return S}}class el{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,d,p){const _=new Js(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(o,d,p);return _}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class jh{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Lt(this._values[o].value)}setValue(o,d){this._values[o]=new nu(this._values[o].property,d===null?void 0:Lt(d))}serialize(){const o={};for(const d of Object.keys(this._values)){const p=this.getValue(d);p!==void 0&&(o[d]=p)}return o}possiblyEvaluate(o,d,p){const _=new Js(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(o,d,p);return _}}class Fs{constructor(o,d,p){this.property=o,this.value=d,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,d,p,_){return this.property.evaluate(this.value,this.parameters,o,d,p,_)}}class Js{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class On{constructor(o){this.specification=o}possiblyEvaluate(o,d){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(d)}interpolate(o,d,p){const _=ei[this.specification.type];return _?_(o,d,p):o}}class Nn{constructor(o,d){this.specification=o,this.overrides=d}possiblyEvaluate(o,d,p,_){return new Fs(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(d,null,{},p,_)}:o.expression,d)}interpolate(o,d,p){if(o.value.kind!=="constant"||d.value.kind!=="constant")return o;if(o.value.value===void 0||d.value.value===void 0)return new Fs(this,{kind:"constant",value:void 0},o.parameters);const _=ei[this.specification.type];if(_){const S=_(o.value.value,d.value.value,p);return new Fs(this,{kind:"constant",value:S},o.parameters)}return o}evaluate(o,d,p,_,S,E){return o.kind==="constant"?o.value:o.evaluate(d,p,_,S,E)}}class Oc extends Nn{possiblyEvaluate(o,d,p,_){if(o.value===void 0)return new Fs(this,{kind:"constant",value:void 0},d);if(o.expression.kind==="constant"){const S=o.expression.evaluate(d,null,{},p,_),E=o.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,k=this._calculate(E,E,E,d);return new Fs(this,{kind:"constant",value:k},d)}if(o.expression.kind==="camera"){const S=this._calculate(o.expression.evaluate({zoom:d.zoom-1}),o.expression.evaluate({zoom:d.zoom}),o.expression.evaluate({zoom:d.zoom+1}),d);return new Fs(this,{kind:"constant",value:S},d)}return new Fs(this,o.expression,d)}evaluate(o,d,p,_,S,E){if(o.kind==="source"){const k=o.evaluate(d,p,_,S,E);return this._calculate(k,k,k,d)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(d.zoom)-1},p,_),o.evaluate({zoom:Math.floor(d.zoom)},p,_),o.evaluate({zoom:Math.floor(d.zoom)+1},p,_),d):o.value}_calculate(o,d,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:p,to:d}}interpolate(o){return o}}class Hu{constructor(o){this.specification=o}possiblyEvaluate(o,d,p,_){if(o.value!==void 0){if(o.expression.kind==="constant"){const S=o.expression.evaluate(d,null,{},p,_);return this._calculate(S,S,S,d)}return this._calculate(o.expression.evaluate(new Yr(Math.floor(d.zoom-1),d)),o.expression.evaluate(new Yr(Math.floor(d.zoom),d)),o.expression.evaluate(new Yr(Math.floor(d.zoom+1),d)),d)}}_calculate(o,d,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:o,to:d}:{from:p,to:d}}interpolate(o){return o}}class tl{constructor(o){this.specification=o}possiblyEvaluate(o,d,p,_){return!!o.expression.evaluate(d,null,{},p,_)}interpolate(){return!1}}class ea{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in o){const p=o[d];p.specification.overridable&&this.overridableProperties.push(d);const _=this.defaultPropertyValues[d]=new nu(p,void 0),S=this.defaultTransitionablePropertyValues[d]=new Kd(p);this.defaultTransitioningPropertyValues[d]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=_.possiblyEvaluate({})}}}yn("DataDrivenProperty",Nn),yn("DataConstantProperty",On),yn("CrossFadedDataDrivenProperty",Oc),yn("CrossFadedProperty",Hu),yn("ColorRampProperty",tl);const vg="-transition";class Ea extends Se{constructor(o,d){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),d.layout&&(this._unevaluatedLayout=new jh(d.layout)),d.paint)){this._transitionablePaint=new Yd(d.paint);for(const p in o.paint)this.setPaintProperty(p,o.paint[p],{validate:!1});for(const p in o.layout)this.setLayoutProperty(p,o.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Js(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,d,p={}){d!=null&&this._validate(zp,`layers.${this.id}.layout.${o}`,o,d,p)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,d):this.visibility=d)}getPaintProperty(o){return o.endsWith(vg)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,d,p={}){if(d!=null&&this._validate(_l,`layers.${this.id}.paint.${o}`,o,d,p))return!1;if(o.endsWith(vg))return this._transitionablePaint.setTransition(o.slice(0,-11),d||void 0),!1;{const _=this._transitionablePaint._values[o],S=_.property.specification["property-type"]==="cross-faded-data-driven",E=_.value.isDataDriven(),k=_.value;this._transitionablePaint.setValue(o,d),this._handleSpecialPaintPropertyUpdate(o);const F=this._transitionablePaint._values[o].value;return F.isDataDriven()||E||S||this._handleOverridablePaintPropertyUpdate(o,k,F)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,d,p){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,d){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,d)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Pt(o,(d,p)=>!(d===void 0||p==="layout"&&!Object.keys(d).length||p==="paint"&&!Object.keys(d).length))}_validate(o,d,p,_,S={}){return(!S||S.validate!==!1)&&dg(this,o.call(Xo,{key:d,layerType:this.type,objectKey:p,value:_,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const d=this.paint.get(o);if(d instanceof Fs&&Ec(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const zc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Fc{constructor(o,d){this._structArray=o,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,d){return o._trim(),d&&(o.isTransferred=!0,d.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const d=Object.create(this.prototype);return d.arrayBuffer=o.arrayBuffer,d.length=o.length,d.capacity=o.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ii(h,o=1){let d=0,p=0;return{members:h.map(_=>{const S=zc[_.type].BYTES_PER_ELEMENT,E=d=Xd(d,Math.max(o,S)),k=_.components||1;return p=Math.max(p,S),d+=S*k,{name:_.name,type:_.type,components:k,offset:E}}),size:Xd(d,Math.max(p,o)),alignment:o}}function Xd(h,o){return Math.ceil(h/o)*o}class ya extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,d)}emplace(o,d,p){const _=2*o;return this.int16[_+0]=d,this.int16[_+1]=p,o}}ya.prototype.bytesPerElement=4,yn("StructArrayLayout2i4",ya);class Bc extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,d,p)}emplace(o,d,p,_){const S=3*o;return this.int16[S+0]=d,this.int16[S+1]=p,this.int16[S+2]=_,o}}Bc.prototype.bytesPerElement=6,yn("StructArrayLayout3i6",Bc);class Ya extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,o,d,p,_)}emplace(o,d,p,_,S){const E=4*o;return this.int16[E+0]=d,this.int16[E+1]=p,this.int16[E+2]=_,this.int16[E+3]=S,o}}Ya.prototype.bytesPerElement=8,yn("StructArrayLayout4i8",Ya);class nl extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E){const k=this.length;return this.resize(k+1),this.emplace(k,o,d,p,_,S,E)}emplace(o,d,p,_,S,E,k){const F=6*o;return this.int16[F+0]=d,this.int16[F+1]=p,this.int16[F+2]=_,this.int16[F+3]=S,this.int16[F+4]=E,this.int16[F+5]=k,o}}nl.prototype.bytesPerElement=12,yn("StructArrayLayout2i4i12",nl);class Nc extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E){const k=this.length;return this.resize(k+1),this.emplace(k,o,d,p,_,S,E)}emplace(o,d,p,_,S,E,k){const F=4*o,j=8*o;return this.int16[F+0]=d,this.int16[F+1]=p,this.uint8[j+4]=_,this.uint8[j+5]=S,this.uint8[j+6]=E,this.uint8[j+7]=k,o}}Nc.prototype.bytesPerElement=8,yn("StructArrayLayout2i4ub8",Nc);class Yi extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,d)}emplace(o,d,p){const _=2*o;return this.float32[_+0]=d,this.float32[_+1]=p,o}}Yi.prototype.bytesPerElement=8,yn("StructArrayLayout2f8",Yi);class Gu extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E,k,F,j,q){const ee=this.length;return this.resize(ee+1),this.emplace(ee,o,d,p,_,S,E,k,F,j,q)}emplace(o,d,p,_,S,E,k,F,j,q,ee){const oe=10*o;return this.uint16[oe+0]=d,this.uint16[oe+1]=p,this.uint16[oe+2]=_,this.uint16[oe+3]=S,this.uint16[oe+4]=E,this.uint16[oe+5]=k,this.uint16[oe+6]=F,this.uint16[oe+7]=j,this.uint16[oe+8]=q,this.uint16[oe+9]=ee,o}}Gu.prototype.bytesPerElement=20,yn("StructArrayLayout10ui20",Gu);class Vp extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E,k,F,j,q,ee,oe){const ue=this.length;return this.resize(ue+1),this.emplace(ue,o,d,p,_,S,E,k,F,j,q,ee,oe)}emplace(o,d,p,_,S,E,k,F,j,q,ee,oe,ue){const he=12*o;return this.int16[he+0]=d,this.int16[he+1]=p,this.int16[he+2]=_,this.int16[he+3]=S,this.uint16[he+4]=E,this.uint16[he+5]=k,this.uint16[he+6]=F,this.uint16[he+7]=j,this.int16[he+8]=q,this.int16[he+9]=ee,this.int16[he+10]=oe,this.int16[he+11]=ue,o}}Vp.prototype.bytesPerElement=24,yn("StructArrayLayout4i4ui4i24",Vp);class Vc extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,d,p)}emplace(o,d,p,_){const S=3*o;return this.float32[S+0]=d,this.float32[S+1]=p,this.float32[S+2]=_,o}}Vc.prototype.bytesPerElement=12,yn("StructArrayLayout3f12",Vc);class Zu extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint32[1*o+0]=d,o}}Zu.prototype.bytesPerElement=4,yn("StructArrayLayout1ul4",Zu);class Uh extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E,k,F,j){const q=this.length;return this.resize(q+1),this.emplace(q,o,d,p,_,S,E,k,F,j)}emplace(o,d,p,_,S,E,k,F,j,q){const ee=10*o,oe=5*o;return this.int16[ee+0]=d,this.int16[ee+1]=p,this.int16[ee+2]=_,this.int16[ee+3]=S,this.int16[ee+4]=E,this.int16[ee+5]=k,this.uint32[oe+3]=F,this.uint16[ee+8]=j,this.uint16[ee+9]=q,o}}Uh.prototype.bytesPerElement=20,yn("StructArrayLayout6i1ul2ui20",Uh);class Qd extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E){const k=this.length;return this.resize(k+1),this.emplace(k,o,d,p,_,S,E)}emplace(o,d,p,_,S,E,k){const F=6*o;return this.int16[F+0]=d,this.int16[F+1]=p,this.int16[F+2]=_,this.int16[F+3]=S,this.int16[F+4]=E,this.int16[F+5]=k,o}}Qd.prototype.bytesPerElement=12,yn("StructArrayLayout2i2i2i12",Qd);class _o extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S){const E=this.length;return this.resize(E+1),this.emplace(E,o,d,p,_,S)}emplace(o,d,p,_,S,E){const k=4*o,F=8*o;return this.float32[k+0]=d,this.float32[k+1]=p,this.float32[k+2]=_,this.int16[F+6]=S,this.int16[F+7]=E,o}}_o.prototype.bytesPerElement=16,yn("StructArrayLayout2f1f2i16",_o);class Jd extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E){const k=this.length;return this.resize(k+1),this.emplace(k,o,d,p,_,S,E)}emplace(o,d,p,_,S,E,k){const F=16*o,j=4*o,q=8*o;return this.uint8[F+0]=d,this.uint8[F+1]=p,this.float32[j+1]=_,this.float32[j+2]=S,this.int16[q+6]=E,this.int16[q+7]=k,o}}Jd.prototype.bytesPerElement=16,yn("StructArrayLayout2ub2f2i16",Jd);class ef extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,d,p)}emplace(o,d,p,_){const S=3*o;return this.uint16[S+0]=d,this.uint16[S+1]=p,this.uint16[S+2]=_,o}}ef.prototype.bytesPerElement=6,yn("StructArrayLayout3ui6",ef);class tf extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze){const st=this.length;return this.resize(st+1),this.emplace(st,o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze)}emplace(o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze,st){const He=24*o,ae=12*o,we=48*o;return this.int16[He+0]=d,this.int16[He+1]=p,this.uint16[He+2]=_,this.uint16[He+3]=S,this.uint32[ae+2]=E,this.uint32[ae+3]=k,this.uint32[ae+4]=F,this.uint16[He+10]=j,this.uint16[He+11]=q,this.uint16[He+12]=ee,this.float32[ae+7]=oe,this.float32[ae+8]=ue,this.uint8[we+36]=he,this.uint8[we+37]=be,this.uint8[we+38]=Me,this.uint32[ae+10]=ze,this.int16[He+22]=st,o}}tf.prototype.bytesPerElement=48,yn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",tf);class Wu extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze,st,He,ae,we,Ze,It,Qt,kt,Ft,sn,Jt){const ln=this.length;return this.resize(ln+1),this.emplace(ln,o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze,st,He,ae,we,Ze,It,Qt,kt,Ft,sn,Jt)}emplace(o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze,st,He,ae,we,Ze,It,Qt,kt,Ft,sn,Jt,ln){const Ut=32*o,wn=16*o;return this.int16[Ut+0]=d,this.int16[Ut+1]=p,this.int16[Ut+2]=_,this.int16[Ut+3]=S,this.int16[Ut+4]=E,this.int16[Ut+5]=k,this.int16[Ut+6]=F,this.int16[Ut+7]=j,this.uint16[Ut+8]=q,this.uint16[Ut+9]=ee,this.uint16[Ut+10]=oe,this.uint16[Ut+11]=ue,this.uint16[Ut+12]=he,this.uint16[Ut+13]=be,this.uint16[Ut+14]=Me,this.uint16[Ut+15]=ze,this.uint16[Ut+16]=st,this.uint16[Ut+17]=He,this.uint16[Ut+18]=ae,this.uint16[Ut+19]=we,this.uint16[Ut+20]=Ze,this.uint16[Ut+21]=It,this.uint16[Ut+22]=Qt,this.uint32[wn+12]=kt,this.float32[wn+13]=Ft,this.float32[wn+14]=sn,this.uint16[Ut+30]=Jt,this.uint16[Ut+31]=ln,o}}Wu.prototype.bytesPerElement=64,yn("StructArrayLayout8i15ui1ul2f2ui64",Wu);class w extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.float32[1*o+0]=d,o}}w.prototype.bytesPerElement=4,yn("StructArrayLayout1f4",w);class r extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,d,p)}emplace(o,d,p,_){const S=3*o;return this.uint16[6*o+0]=d,this.float32[S+1]=p,this.float32[S+2]=_,o}}r.prototype.bytesPerElement=12,yn("StructArrayLayout1ui2f12",r);class c extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,d,p)}emplace(o,d,p,_){const S=4*o;return this.uint32[2*o+0]=d,this.uint16[S+2]=p,this.uint16[S+3]=_,o}}c.prototype.bytesPerElement=8,yn("StructArrayLayout1ul2ui8",c);class m extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,d){const p=this.length;return this.resize(p+1),this.emplace(p,o,d)}emplace(o,d,p){const _=2*o;return this.uint16[_+0]=d,this.uint16[_+1]=p,o}}m.prototype.bytesPerElement=4,yn("StructArrayLayout2ui4",m);class v extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const d=this.length;return this.resize(d+1),this.emplace(d,o)}emplace(o,d){return this.uint16[1*o+0]=d,o}}v.prototype.bytesPerElement=2,yn("StructArrayLayout1ui2",v);class I extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,d,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,o,d,p,_)}emplace(o,d,p,_,S){const E=4*o;return this.float32[E+0]=d,this.float32[E+1]=p,this.float32[E+2]=_,this.float32[E+3]=S,o}}I.prototype.bytesPerElement=16,yn("StructArrayLayout4f16",I);class T extends Fc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class D extends Uh{get(o){return new T(this,o)}}yn("CollisionBoxArray",D);class N extends Fc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}N.prototype.size=48;class G extends tf{get(o){return new N(this,o)}}yn("PlacedSymbolArray",G);class X extends Fc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}X.prototype.size=64;class ie extends Wu{get(o){return new X(this,o)}}yn("SymbolInstanceArray",ie);class se extends w{getoffsetX(o){return this.float32[1*o+0]}}yn("GlyphOffsetArray",se);class fe extends Bc{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}yn("SymbolLineVertexArray",fe);class _e extends Fc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_e.prototype.size=12;class De extends r{get(o){return new _e(this,o)}}yn("TextAnchorOffsetArray",De);class ke extends Fc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ke.prototype.size=8;class Re extends c{get(o){return new ke(this,o)}}yn("FeatureIndexArray",Re);class $e extends ya{}class qe extends ya{}class Ke extends ya{}class Je extends nl{}class lt extends Nc{}class it extends Yi{}class xt extends Gu{}class Ct extends Vp{}class vt extends Vc{}class $t extends Zu{}class Nt extends Qd{}class hn extends Jd{}class on extends ef{}class Xt extends m{}const Dn=Ii([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zn}=Dn;class Wn{constructor(o=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=o}prepareSegment(o,d,p,_){const S=this.segments[this.segments.length-1];return o>Wn.MAX_VERTEX_ARRAY_LENGTH&&Ie(`Max vertices per segment is ${Wn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Wn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+o>Wn.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_?this.createNewSegment(d,p,_):S}createNewSegment(o,d,p){const _={vertexOffset:o.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return p!==void 0&&(_.sortKey=p),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(o,d,p){return this.prepareSegment(0,o,d,p)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const o of this.segments)for(const d in o.vaos)o.vaos[d].destroy()}static simpleSegment(o,d,p,_){return new Wn([{vertexOffset:o,primitiveOffset:d,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function ni(h,o){return 256*(h=St(Math.floor(h),0,255))+St(Math.floor(o),0,255)}Wn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yn("SegmentVector",Wn);const zr=Ii([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ui,si,or,pr={exports:{}},Xi={exports:{}},Qi={exports:{}},Ji=function(){if(or)return pr.exports;or=1;var h=(ui||(ui=1,Xi.exports=function(d,p){var _,S,E,k,F,j,q,ee;for(S=d.length-(_=3&d.length),E=p,F=3432918353,j=461845907,ee=0;ee<S;)q=255&d.charCodeAt(ee)|(255&d.charCodeAt(++ee))<<8|(255&d.charCodeAt(++ee))<<16|(255&d.charCodeAt(++ee))<<24,++ee,E=27492+(65535&(k=5*(65535&(E=(E^=q=(65535&(q=(q=(65535&q)*F+(((q>>>16)*F&65535)<<16)&4294967295)<<15|q>>>17))*j+(((q>>>16)*j&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(k>>>16)&65535)<<16);switch(q=0,_){case 3:q^=(255&d.charCodeAt(ee+2))<<16;case 2:q^=(255&d.charCodeAt(ee+1))<<8;case 1:E^=q=(65535&(q=(q=(65535&(q^=255&d.charCodeAt(ee)))*F+(((q>>>16)*F&65535)<<16)&4294967295)<<15|q>>>17))*j+(((q>>>16)*j&65535)<<16)&4294967295}return E^=d.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0}),Xi.exports),o=(si||(si=1,Qi.exports=function(d,p){for(var _,S=d.length,E=p^S,k=0;S>=4;)_=1540483477*(65535&(_=255&d.charCodeAt(k)|(255&d.charCodeAt(++k))<<8|(255&d.charCodeAt(++k))<<16|(255&d.charCodeAt(++k))<<24))+((1540483477*(_>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),S-=4,++k;switch(S){case 3:E^=(255&d.charCodeAt(k+2))<<16;case 2:E^=(255&d.charCodeAt(k+1))<<8;case 1:E=1540483477*(65535&(E^=255&d.charCodeAt(k)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0}),Qi.exports);return pr.exports=h,pr.exports.murmur3=h,pr.exports.murmur2=o,pr.exports}(),Ps=f(Ji);class Xa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,d,p,_){this.ids.push(Al(o)),this.positions.push(d,p,_)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=Al(o);let p=0,_=this.ids.length-1;for(;p<_;){const E=p+_>>1;this.ids[E]>=d?_=E:p=E+1}const S=[];for(;this.ids[p]===d;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(o,d){const p=new Float64Array(o.ids),_=new Uint32Array(o.positions);return bo(p,_,0,p.length-1),d&&d.push(p.buffer,_.buffer),{ids:p,positions:_}}static deserialize(o){const d=new Xa;return d.ids=o.ids,d.positions=o.positions,d.indexed=!0,d}}function Al(h){const o=+h;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Ps(String(h))}function bo(h,o,d,p){for(;d<p;){const _=h[d+p>>1];let S=d-1,E=p+1;for(;;){do S++;while(h[S]<_);do E--;while(h[E]>_);if(S>=E)break;xo(h,S,E),xo(o,3*S,3*E),xo(o,3*S+1,3*E+1),xo(o,3*S+2,3*E+2)}E-d<p-E?(bo(h,o,d,E),d=E+1):(bo(h,o,E+1,p),p=E)}}function xo(h,o,d){const p=h[o];h[o]=h[d],h[d]=p}yn("FeaturePositionMap",Xa);class ks{constructor(o,d){this.gl=o.gl,this.location=d}}class qu extends ks{constructor(o,d){super(o,d),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class va extends ks{constructor(o,d){super(o,d),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class _a extends ks{constructor(o,d){super(o,d),this.current=er.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const wl=new Float32Array(16);function Ao(h){return[ni(255*h.r,255*h.g),ni(255*h.b,255*h.a)]}class Cl{constructor(o,d,p){this.value=o,this.uniformNames=d.map(_=>`u_${_}`),this.type=p}setUniform(o,d,p){o.set(p.constantOr(this.value))}getBinding(o,d,p){return this.type==="color"?new _a(o,d):new qu(o,d)}}class _i{constructor(o,d){this.uniformNames=d.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=o.tlbr}setUniform(o,d,p,_){const S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&o.set(S)}getBinding(o,d,p){return p.substr(0,9)==="u_pattern"?new va(o,d):new qu(o,d)}}class ci{constructor(o,d,p,_){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=d.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(o,d,p,_,S){const E=this.paintVertexArray.length,k=this.expression.evaluate(new Yr(0),d,{},_,[],S);this.paintVertexArray.resize(o),this._setPaintValue(E,o,k)}updatePaintArray(o,d,p,_){const S=this.expression.evaluate({zoom:0},p,_);this._setPaintValue(o,d,S)}_setPaintValue(o,d,p){if(this.type==="color"){const _=Ao(p);for(let S=o;S<d;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=o;_<d;_++)this.paintVertexArray.emplace(_,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Mi{constructor(o,d,p,_,S,E){this.expression=o,this.uniformNames=d.map(k=>`u_${k}_t`),this.type=p,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=d.map(k=>({name:`a_${k}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(o,d,p,_,S){const E=this.expression.evaluate(new Yr(this.zoom),d,{},_,[],S),k=this.expression.evaluate(new Yr(this.zoom+1),d,{},_,[],S),F=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(F,o,E,k)}updatePaintArray(o,d,p,_){const S=this.expression.evaluate({zoom:this.zoom},p,_),E=this.expression.evaluate({zoom:this.zoom+1},p,_);this._setPaintValue(o,d,S,E)}_setPaintValue(o,d,p,_){if(this.type==="color"){const S=Ao(p),E=Ao(_);for(let k=o;k<d;k++)this.paintVertexArray.emplace(k,S[0],S[1],E[0],E[1])}else{for(let S=o;S<d;S++)this.paintVertexArray.emplace(S,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,d){const p=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,_=St(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(_)}getBinding(o,d,p){return new qu(o,d)}}class hi{constructor(o,d,p,_,S,E){this.expression=o,this.type=d,this.useIntegerZoom=p,this.zoom=_,this.layerId=E,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(o,d,p){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(_,o,d.patterns&&d.patterns[this.layerId],p)}updatePaintArray(o,d,p,_,S){this._setPaintValues(o,d,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(o,d,p,_){if(!_||!p)return;const{min:S,mid:E,max:k}=p,F=_[S],j=_[E],q=_[k];if(F&&j&&q)for(let ee=o;ee<d;ee++)this.zoomInPaintVertexArray.emplace(ee,j.tl[0],j.tl[1],j.br[0],j.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],j.pixelRatio,F.pixelRatio),this.zoomOutPaintVertexArray.emplace(ee,j.tl[0],j.tl[1],j.br[0],j.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],j.pixelRatio,q.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,zr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,zr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _g{constructor(o,d,p){this.binders={},this._buffers=[];const _=[];for(const S in o.paint._values){if(!p(S))continue;const E=o.paint.get(S);if(!(E instanceof Fs&&Ec(E.property.specification)))continue;const k=bg(S,o.type),F=E.value,j=E.property.specification.type,q=E.property.useIntegerZoom,ee=E.property.specification["property-type"],oe=ee==="cross-faded"||ee==="cross-faded-data-driven";if(F.kind==="constant")this.binders[S]=oe?new _i(F.value,k):new Cl(F.value,k,j),_.push(`/u_${S}`);else if(F.kind==="source"||oe){const ue=ta(S,j,"source");this.binders[S]=oe?new hi(F,j,q,d,ue,o.id):new ci(F,k,j,ue),_.push(`/a_${S}`)}else{const ue=ta(S,j,"composite");this.binders[S]=new Mi(F,k,j,q,d,ue),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(o){const d=this.binders[o];return d instanceof ci||d instanceof Mi?d.maxValue:0}populatePaintArrays(o,d,p,_,S){for(const E in this.binders){const k=this.binders[E];(k instanceof ci||k instanceof Mi||k instanceof hi)&&k.populatePaintArray(o,d,p,_,S)}}setConstantPatternPositions(o,d){for(const p in this.binders){const _=this.binders[p];_ instanceof _i&&_.setConstantPatternPositions(o,d)}}updatePaintArrays(o,d,p,_,S){let E=!1;for(const k in o){const F=d.getPositions(k);for(const j of F){const q=p.feature(j.index);for(const ee in this.binders){const oe=this.binders[ee];if((oe instanceof ci||oe instanceof Mi||oe instanceof hi)&&oe.expression.isStateDependent===!0){const ue=_.paint.get(ee);oe.expression=ue.value,oe.updatePaintArray(j.start,j.end,q,o[k],S),E=!0}}}}return E}defines(){const o=[];for(const d in this.binders){const p=this.binders[d];(p instanceof Cl||p instanceof _i)&&o.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return o}getBinderAttributes(){const o=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof ci||p instanceof Mi)for(let _=0;_<p.paintVertexAttributes.length;_++)o.push(p.paintVertexAttributes[_].name);else if(p instanceof hi)for(let _=0;_<zr.members.length;_++)o.push(zr.members[_].name)}return o}getBinderUniforms(){const o=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof Cl||p instanceof _i||p instanceof Mi)for(const _ of p.uniformNames)o.push(_)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,d){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof Cl||S instanceof _i||S instanceof Mi){for(const E of S.uniformNames)if(d[E]){const k=S.getBinding(o,d[E],E);p.push({name:E,property:_,binding:k})}}}return p}setUniforms(o,d,p,_){for(const{name:S,property:E,binding:k}of d)this.binders[E].setUniform(k,_,p.get(E),S)}updatePaintBuffers(o){this._buffers=[];for(const d in this.binders){const p=this.binders[d];if(o&&p instanceof hi){const _=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof ci||p instanceof Mi)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(o){for(const d in this.binders){const p=this.binders[d];(p instanceof ci||p instanceof Mi||p instanceof hi)&&p.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const d=this.binders[o];(d instanceof ci||d instanceof Mi||d instanceof hi)&&d.destroy()}}}class ru{constructor(o,d,p=()=>!0){this.programConfigurations={};for(const _ of o)this.programConfigurations[_.id]=new _g(_,d,p);this.needsUpload=!1,this._featureMap=new Xa,this._bufferOffset=0}populatePaintArrays(o,d,p,_,S,E){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(o,d,_,S,E);d.id!==void 0&&this._featureMap.add(d.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,d,p,_){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(o,this._featureMap,d,S,_)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function bg(h,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${o}-`,"").replace(/-/g,"_")]}function ta(h,o,d){const p={color:{source:Yi,composite:I},number:{source:w,composite:Yi}},_=function(S){return{"line-pattern":{source:xt,composite:xt},"fill-pattern":{source:xt,composite:xt},"fill-extrusion-pattern":{source:xt,composite:xt}}[S]}(h);return _&&_[d]||p[o][d]}yn("ConstantBinder",Cl),yn("CrossFadedConstantBinder",_i),yn("SourceExpressionBinder",ci),yn("CrossFadedCompositeBinder",hi),yn("CompositeExpressionBinder",Mi),yn("ProgramConfiguration",_g,{omit:["_buffers"]}),yn("ProgramConfigurationSet",ru);const Qa=Math.pow(2,14)-1,xg=-Qa-1;function Ta(h){const o=tt/h.extent,d=h.loadGeometry();for(let p=0;p<d.length;p++){const _=d[p];for(let S=0;S<_.length;S++){const E=_[S],k=Math.round(E.x*o),F=Math.round(E.y*o);E.x=St(k,xg,Qa),E.y=St(F,xg,Qa),(k<E.x||k>E.x+1||F<E.y||F>E.y+1)&&Ie("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function wo(h,o){return{type:h.type,id:h.id,properties:h.properties,geometry:o?Ta(h):[]}}const iu=-32768;function jp(h,o,d,p,_){h.emplaceBack(iu+8*o+p,iu+8*d+_)}class jc{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new qe,this.indexArray=new on,this.segments=new Wn,this.programConfigurations=new ru(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){const _=this.layers[0],S=[];let E=null,k=!1,F=_.type==="heatmap";if(_.type==="circle"){const q=_;E=q.layout.get("circle-sort-key"),k=!E.isConstant(),F=F||q.paint.get("circle-pitch-alignment")==="map"}const j=F?d.subdivisionGranularity.circle:1;for(const{feature:q,id:ee,index:oe,sourceLayerIndex:ue}of o){const he=this.layers[0]._featureFilter.needGeometry,be=wo(q,he);if(!this.layers[0]._featureFilter.filter(new Yr(this.zoom),be,p))continue;const Me=k?E.evaluate(be,{},p):void 0,ze={id:ee,properties:q.properties,type:q.type,sourceLayerIndex:ue,index:oe,geometry:he?be.geometry:Ta(q),patterns:{},sortKey:Me};S.push(ze)}k&&S.sort((q,ee)=>q.sortKey-ee.sortKey);for(const q of S){const{geometry:ee,index:oe,sourceLayerIndex:ue}=q,he=o[oe].feature;this.addFeature(q,ee,oe,p,j),d.featureIndex.insert(he,ee,oe,ue,this.index)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Zn),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,d,p,_,S=1){let E;switch(S){case 1:E=[0,7];break;case 3:E=[0,2,5,7];break;case 5:E=[0,1,3,4,6,7];break;case 7:E=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const k=E.length;for(const F of d)for(const j of F){const q=j.x,ee=j.y;if(q<0||q>=tt||ee<0||ee>=tt)continue;const oe=this.segments.prepareSegment(k*k,this.layoutVertexArray,this.indexArray,o.sortKey),ue=oe.vertexLength;for(let he=0;he<k;he++)for(let be=0;be<k;be++)jp(this.layoutVertexArray,q,ee,E[be],E[he]);for(let he=0;he<k-1;he++)for(let be=0;be<k-1;be++){const Me=ue+he*k+be,ze=ue+(he+1)*k+be;this.indexArray.emplaceBack(Me,ze+1,Me+1),this.indexArray.emplaceBack(Me,ze,ze+1)}oe.vertexLength+=k*k,oe.primitiveLength+=(k-1)*(k-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},_)}}function Up(h,o){for(let d=0;d<h.length;d++)if(su(o,h[d]))return!0;for(let d=0;d<o.length;d++)if(su(h,o[d]))return!0;return!!xv(h,o)}function nf(h,o,d){return!!su(h,o)||!!Ag(o,h,d)}function $h(h,o){if(h.length===1)return Av(o,h[0]);for(let d=0;d<o.length;d++){const p=o[d];for(let _=0;_<p.length;_++)if(su(h,p[_]))return!0}for(let d=0;d<h.length;d++)if(Av(o,h[d]))return!0;for(let d=0;d<o.length;d++)if(xv(h,o[d]))return!0;return!1}function $p(h,o,d){if(h.length>1){if(xv(h,o))return!0;for(let p=0;p<o.length;p++)if(Ag(o[p],h,d))return!0}for(let p=0;p<h.length;p++)if(Ag(h[p],o,d))return!0;return!1}function xv(h,o){if(h.length===0||o.length===0)return!1;for(let d=0;d<h.length-1;d++){const p=h[d],_=h[d+1];for(let S=0;S<o.length-1;S++)if(y_(p,_,o[S],o[S+1]))return!0}return!1}function y_(h,o,d,p){return $(h,d,p)!==$(o,d,p)&&$(h,o,d)!==$(h,o,p)}function Ag(h,o,d){const p=d*d;if(o.length===1)return h.distSqr(o[0])<p;for(let _=1;_<o.length;_++)if(Hp(h,o[_-1],o[_])<p)return!0;return!1}function Hp(h,o,d){const p=o.distSqr(d);if(p===0)return h.distSqr(o);const _=((h.x-o.x)*(d.x-o.x)+(h.y-o.y)*(d.y-o.y))/p;return h.distSqr(_<0?o:_>1?d:d.sub(o)._mult(_)._add(o))}function Av(h,o){for(let d=0;d<h.length;d++)if(su(h[d],o))return!0;return!1}function su(h,o){let d=!1;for(let p=0,_=h.length-1;p<h.length;_=p++){const S=h[p],E=h[_];S.y>o.y!=E.y>o.y&&o.x<(E.x-S.x)*(o.y-S.y)/(E.y-S.y)+S.x&&(d=!d)}return d}function wv(h,o,d){const p=d[0],_=d[2];if(h.x<p.x&&o.x<p.x||h.x>_.x&&o.x>_.x||h.y<p.y&&o.y<p.y||h.y>_.y&&o.y>_.y)return!1;const S=$(h,o,d[0]);return S!==$(h,o,d[1])||S!==$(h,o,d[2])||S!==$(h,o,d[3])}function Uc(h,o,d){const p=o.paint.get(h).value;return p.kind==="constant"?p.value:d.programConfigurations.get(o.id).getMaxValue(h)}function wg(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Gp(h,o,d,p,_){if(!o[0]&&!o[1])return h;const S=P.convert(o)._mult(_);d==="viewport"&&S._rotate(-p);const E=[];for(let k=0;k<h.length;k++)E.push(h[k].sub(S));return E}let Zp,Cv;yn("CircleBucket",jc,{omit:["layers"]});var Iv={get paint(){return Cv=Cv||new ea({"circle-radius":new Nn(ve.paint_circle["circle-radius"]),"circle-color":new Nn(ve.paint_circle["circle-color"]),"circle-blur":new Nn(ve.paint_circle["circle-blur"]),"circle-opacity":new Nn(ve.paint_circle["circle-opacity"]),"circle-translate":new On(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new On(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new On(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new On(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Nn(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Nn(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Nn(ve.paint_circle["circle-stroke-opacity"])})},get layout(){return Zp=Zp||new ea({"circle-sort-key":new Nn(ve.layout_circle["circle-sort-key"])})}};class kw extends Ea{constructor(o){super(o,Iv)}createBucket(o){return new jc(o)}queryRadius(o){const d=o;return Uc("circle-radius",this,d)+Uc("circle-stroke-width",this,d)+wg(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:o,feature:d,featureState:p,geometry:_,transform:S,pixelsToTileUnits:E,unwrappedTileID:k,getElevation:F}){const j=Gp(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,E),q=this.paint.get("circle-radius").evaluate(d,p)+this.paint.get("circle-stroke-width").evaluate(d,p),ee=this.paint.get("circle-pitch-alignment")==="map",oe=ee?j:function(he,be,Me,ze){return he.map(st=>Mv(st,be,Me,ze))}(j,S,k,F),ue=ee?q*E:q;for(const he of _)for(const be of he){const Me=ee?be:Mv(be,S,k,F);let ze=ue;const st=S.projectTileCoordinates(be.x,be.y,k,F).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=st/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=S.cameraToCenterDistance/st),nf(oe,Me,ze))return!0}return!1}}function Mv(h,o,d,p){const _=o.projectTileCoordinates(h.x,h.y,d,p).point;return new P((.5*_.x+.5)*o.width,(.5*-_.y+.5)*o.height)}class au extends jc{}let Sv;yn("HeatmapBucket",au,{omit:["layers"]});var v_={get paint(){return Sv=Sv||new ea({"heatmap-radius":new Nn(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Nn(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new On(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tl(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new On(ve.paint_heatmap["heatmap-opacity"])})}};function Ev(h,{width:o,height:d},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==o*d*p)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${o*d*p}`)}else _=new Uint8Array(o*d*p);return h.width=o,h.height=d,h.data=_,h}function Tv(h,{width:o,height:d},p){if(o===h.width&&d===h.height)return;const _=Ev({},{width:o,height:d},p);Pv(h,_,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,o),height:Math.min(h.height,d)},p),h.width=o,h.height=d,h.data=_.data}function Pv(h,o,d,p,_,S){if(_.width===0||_.height===0)return o;if(_.width>h.width||_.height>h.height||d.x>h.width-_.width||d.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>o.width||_.height>o.height||p.x>o.width-_.width||p.y>o.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const E=h.data,k=o.data;if(E===k)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<_.height;F++){const j=((d.y+F)*h.width+d.x)*S,q=((p.y+F)*o.width+p.x)*S;for(let ee=0;ee<_.width*S;ee++)k[q+ee]=E[j+ee]}return o}class Wp{constructor(o,d){Ev(this,o,1,d)}resize(o){Tv(this,o,1)}clone(){return new Wp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,p,_,S){Pv(o,d,p,_,S,1)}}class as{constructor(o,d){Ev(this,o,4,d)}resize(o){Tv(this,o,4)}replace(o,d){d?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new as({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,d,p,_,S){Pv(o,d,p,_,S,4)}}function Cg(h){const o={},d=h.resolution||256,p=h.clips?h.clips.length:1,_=h.image||new as({width:d,height:p});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const S=(E,k,F)=>{o[h.evaluationKey]=F;const j=h.expression.evaluate(o);_.data[E+k+0]=Math.floor(255*j.r/j.a),_.data[E+k+1]=Math.floor(255*j.g/j.a),_.data[E+k+2]=Math.floor(255*j.b/j.a),_.data[E+k+3]=Math.floor(255*j.a)};if(h.clips)for(let E=0,k=0;E<p;++E,k+=4*d)for(let F=0,j=0;F<d;F++,j+=4){const q=F/(d-1),{start:ee,end:oe}=h.clips[E];S(k,j,ee*(1-q)+oe*q)}else for(let E=0,k=0;E<d;E++,k+=4)S(0,k,E/(d-1));return _}yn("AlphaImage",Wp),yn("RGBAImage",as);const qp="big-fb";class kv extends Ea{createBucket(o){return new au(o)}constructor(o){super(o,v_),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Cg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(qp)&&this.heatmapFbos.delete(qp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Kp;var rf={get paint(){return Kp=Kp||new ea({"hillshade-illumination-direction":new On(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new On(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new On(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new On(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new On(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new On(ve.paint_hillshade["hillshade-accent-color"])})}};class Xn extends Ea{constructor(o){super(o,rf)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Ig=Ii([{name:"a_pos",components:2,type:"Int16"}],4),{members:Lv}=Ig;function Ku(h,o,d){const p=d.patternDependencies;let _=!1;for(const S of o){const E=S.paint.get(`${h}-pattern`);E.isConstant()||(_=!0);const k=E.constantOr(null);k&&(_=!0,p[k.to]=!0,p[k.from]=!0)}return _}function Dv(h,o,d,p,_){const S=_.patternDependencies;for(const E of o){const k=E.paint.get(`${h}-pattern`).value;if(k.kind!=="constant"){let F=k.evaluate({zoom:p-1},d,{},_.availableImages),j=k.evaluate({zoom:p},d,{},_.availableImages),q=k.evaluate({zoom:p+1},d,{},_.availableImages);F=F&&F.name?F.name:F,j=j&&j.name?j.name:j,q=q&&q.name?q.name:q,S[F]=!0,S[j]=!0,S[q]=!0,d.patterns[E.id]={min:F,mid:j,max:q}}}return d}function Mg(h,o,d,p,_){let S;if(_===function(E,k,F,j){let q=0;for(let ee=k,oe=F-j;ee<F;ee+=j)q+=(E[oe]-E[ee])*(E[ee+1]+E[oe+1]),oe=ee;return q}(h,o,d,p)>0)for(let E=o;E<d;E+=p)S=w_(E/p|0,h[E],h[E+1],S);else for(let E=d-p;E>=o;E-=p)S=w_(E/p|0,h[E],h[E+1],S);return S&&sf(S,S.next)&&(Xp(S),S=S.next),S}function $c(h,o){if(!h)return h;o||(o=h);let d,p=h;do if(d=!1,p.steiner||!sf(p,p.next)&&Si(p.prev,p,p.next)!==0)p=p.next;else{if(Xp(p),p=o=p.prev,p===p.next)break;d=!0}while(d||p!==o);return o}function vs(h,o,d,p,_,S,E){if(!h)return;!E&&S&&function(F,j,q,ee){let oe=F;do oe.z===0&&(oe.z=Rv(oe.x,oe.y,j,q,ee)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==F);oe.prevZ.nextZ=null,oe.prevZ=null,function(ue){let he,be=1;do{let Me,ze=ue;ue=null;let st=null;for(he=0;ze;){he++;let He=ze,ae=0;for(let Ze=0;Ze<be&&(ae++,He=He.nextZ,He);Ze++);let we=be;for(;ae>0||we>0&&He;)ae!==0&&(we===0||!He||ze.z<=He.z)?(Me=ze,ze=ze.nextZ,ae--):(Me=He,He=He.nextZ,we--),st?st.nextZ=Me:ue=Me,Me.prevZ=st,st=Me;ze=He}st.nextZ=null,be*=2}while(he>1)}(oe)}(h,p,_,S);let k=h;for(;h.prev!==h.next;){const F=h.prev,j=h.next;if(S?Dw(h,p,_,S):Lw(h))o.push(F.i,h.i,j.i),Xp(h),h=j.next,k=j.next;else if((h=j)===k){E?E===1?vs(h=__($c(h),o),o,d,p,_,S,2):E===2&&Rw(h,o,d,p,_,S):vs($c(h),o,d,p,_,S,1);break}}}function Lw(h){const o=h.prev,d=h,p=h.next;if(Si(o,d,p)>=0)return!1;const _=o.x,S=d.x,E=p.x,k=o.y,F=d.y,j=p.y,q=Math.min(_,S,E),ee=Math.min(k,F,j),oe=Math.max(_,S,E),ue=Math.max(k,F,j);let he=p.next;for(;he!==o;){if(he.x>=q&&he.x<=oe&&he.y>=ee&&he.y<=ue&&Hh(_,k,S,F,E,j,he.x,he.y)&&Si(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function Dw(h,o,d,p){const _=h.prev,S=h,E=h.next;if(Si(_,S,E)>=0)return!1;const k=_.x,F=S.x,j=E.x,q=_.y,ee=S.y,oe=E.y,ue=Math.min(k,F,j),he=Math.min(q,ee,oe),be=Math.max(k,F,j),Me=Math.max(q,ee,oe),ze=Rv(ue,he,o,d,p),st=Rv(be,Me,o,d,p);let He=h.prevZ,ae=h.nextZ;for(;He&&He.z>=ze&&ae&&ae.z<=st;){if(He.x>=ue&&He.x<=be&&He.y>=he&&He.y<=Me&&He!==_&&He!==E&&Hh(k,q,F,ee,j,oe,He.x,He.y)&&Si(He.prev,He,He.next)>=0||(He=He.prevZ,ae.x>=ue&&ae.x<=be&&ae.y>=he&&ae.y<=Me&&ae!==_&&ae!==E&&Hh(k,q,F,ee,j,oe,ae.x,ae.y)&&Si(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;He&&He.z>=ze;){if(He.x>=ue&&He.x<=be&&He.y>=he&&He.y<=Me&&He!==_&&He!==E&&Hh(k,q,F,ee,j,oe,He.x,He.y)&&Si(He.prev,He,He.next)>=0)return!1;He=He.prevZ}for(;ae&&ae.z<=st;){if(ae.x>=ue&&ae.x<=be&&ae.y>=he&&ae.y<=Me&&ae!==_&&ae!==E&&Hh(k,q,F,ee,j,oe,ae.x,ae.y)&&Si(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function __(h,o){let d=h;do{const p=d.prev,_=d.next.next;!sf(p,_)&&x_(p,d,d.next,_)&&af(p,_)&&af(_,p)&&(o.push(p.i,d.i,_.i),Xp(d),Xp(d.next),d=h=_),d=d.next}while(d!==h);return $c(d)}function Rw(h,o,d,p,_,S){let E=h;do{let k=E.next.next;for(;k!==E.prev;){if(E.i!==k.i&&Fw(E,k)){let F=A_(E,k);return E=$c(E,E.next),F=$c(F,F.next),vs(E,o,d,p,_,S,0),void vs(F,o,d,p,_,S,0)}k=k.next}E=E.next}while(E!==h)}function b_(h,o){let d=h.x-o.x;return d===0&&(d=h.y-o.y,d===0)&&(d=(h.next.y-h.y)/(h.next.x-h.x)-(o.next.y-o.y)/(o.next.x-o.x)),d}function Ow(h,o){const d=function(_,S){let E=S;const k=_.x,F=_.y;let j,q=-1/0;if(sf(_,E))return E;do{if(sf(_,E.next))return E.next;if(F<=E.y&&F>=E.next.y&&E.next.y!==E.y){const be=E.x+(F-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(be<=k&&be>q&&(q=be,j=E.x<E.next.x?E:E.next,be===k))return j}E=E.next}while(E!==S);if(!j)return null;const ee=j,oe=j.x,ue=j.y;let he=1/0;E=j;do{if(k>=E.x&&E.x>=oe&&k!==E.x&&ba(F<ue?k:q,F,oe,ue,F<ue?q:k,F,E.x,E.y)){const be=Math.abs(F-E.y)/(k-E.x);af(E,_)&&(be<he||be===he&&(E.x>j.x||E.x===j.x&&zw(j,E)))&&(j=E,he=be)}E=E.next}while(E!==ee);return j}(h,o);if(!d)return o;const p=A_(d,h);return $c(p,p.next),$c(d,d.next)}function zw(h,o){return Si(h.prev,h,o.prev)<0&&Si(o.next,h,h.next)<0}function Rv(h,o,d,p,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-d)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-p)*_|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function Yu(h){let o=h,d=h;do(o.x<d.x||o.x===d.x&&o.y<d.y)&&(d=o),o=o.next;while(o!==h);return d}function ba(h,o,d,p,_,S,E,k){return(_-E)*(o-k)>=(h-E)*(S-k)&&(h-E)*(p-k)>=(d-E)*(o-k)&&(d-E)*(S-k)>=(_-E)*(p-k)}function Hh(h,o,d,p,_,S,E,k){return!(h===E&&o===k)&&ba(h,o,d,p,_,S,E,k)}function Fw(h,o){return h.next.i!==o.i&&h.prev.i!==o.i&&!function(d,p){let _=d;do{if(_.i!==d.i&&_.next.i!==d.i&&_.i!==p.i&&_.next.i!==p.i&&x_(_,_.next,d,p))return!0;_=_.next}while(_!==d);return!1}(h,o)&&(af(h,o)&&af(o,h)&&function(d,p){let _=d,S=!1;const E=(d.x+p.x)/2,k=(d.y+p.y)/2;do _.y>k!=_.next.y>k&&_.next.y!==_.y&&E<(_.next.x-_.x)*(k-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==d);return S}(h,o)&&(Si(h.prev,h,o.prev)||Si(h,o.prev,o))||sf(h,o)&&Si(h.prev,h,h.next)>0&&Si(o.prev,o,o.next)>0)}function Si(h,o,d){return(o.y-h.y)*(d.x-o.x)-(o.x-h.x)*(d.y-o.y)}function sf(h,o){return h.x===o.x&&h.y===o.y}function x_(h,o,d,p){const _=Yp(Si(h,o,d)),S=Yp(Si(h,o,p)),E=Yp(Si(d,p,h)),k=Yp(Si(d,p,o));return _!==S&&E!==k||!(_!==0||!Hc(h,d,o))||!(S!==0||!Hc(h,p,o))||!(E!==0||!Hc(d,h,p))||!(k!==0||!Hc(d,o,p))}function Hc(h,o,d){return o.x<=Math.max(h.x,d.x)&&o.x>=Math.min(h.x,d.x)&&o.y<=Math.max(h.y,d.y)&&o.y>=Math.min(h.y,d.y)}function Yp(h){return h>0?1:h<0?-1:0}function af(h,o){return Si(h.prev,h,h.next)<0?Si(h,o,h.next)>=0&&Si(h,h.prev,o)>=0:Si(h,o,h.prev)<0||Si(h,h.next,o)<0}function A_(h,o){const d=Ov(h.i,h.x,h.y),p=Ov(o.i,o.x,o.y),_=h.next,S=o.prev;return h.next=o,o.prev=h,d.next=_,_.prev=d,p.next=d,d.prev=p,S.next=p,p.prev=S,p}function w_(h,o,d,p){const _=Ov(h,o,d);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function Xp(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Ov(h,o,d){return{i:h,x:o,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Gh{constructor(o,d){if(d>o)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=o,this._minGranularity=d}getGranularityForZoomLevel(o){return Math.max(Math.floor(this._baseZoomGranularity/(1<<o)),this._minGranularity,1)}}class Qp{constructor(o){this.fill=o.fill,this.line=o.line,this.tile=o.tile,this.stencil=o.stencil,this.circle=o.circle}}Qp.noSubdivision=new Qp({fill:new Gh(0,0),line:new Gh(0,0),tile:new Gh(0,0),stencil:new Gh(0,0),circle:1}),yn("SubdivisionGranularityExpression",Gh),yn("SubdivisionGranularitySetting",Qp);const of=-32768,Zh=32767;class C_{constructor(o,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=o,this._granularityCellSize=tt/o,this._canonical=d}_getKey(o,d){return(o+=32768)<<16|(d+=32768)<<0}_vertexToIndex(o,d){if(o<-32768||d<-32768||o>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const p=0|Math.round(o),_=0|Math.round(d),S=this._getKey(p,_);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const E=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,E),this._vertexBuffer.push(p,_),E}_subdivideTrianglesScanline(o){if(this._granularity<2)return function(_,S){const E=[];for(let k=0;k<S.length;k+=3){const F=S[k],j=S[k+1],q=S[k+2],ee=_[2*F],oe=_[2*F+1];(_[2*j]-ee)*(_[2*q+1]-oe)-(_[2*j+1]-oe)*(_[2*q]-ee)>0?(E.push(F),E.push(q),E.push(j)):(E.push(F),E.push(j),E.push(q))}return E}(this._vertexBuffer,o);const d=[],p=o.length;for(let _=0;_<p;_+=3){const S=[o[_+0],o[_+1],o[_+2]],E=[this._vertexBuffer[2*o[_+0]+0],this._vertexBuffer[2*o[_+0]+1],this._vertexBuffer[2*o[_+1]+0],this._vertexBuffer[2*o[_+1]+1],this._vertexBuffer[2*o[_+2]+0],this._vertexBuffer[2*o[_+2]+1]];let k=1/0,F=1/0,j=-1/0,q=-1/0;for(let be=0;be<3;be++){const Me=E[2*be],ze=E[2*be+1];k=Math.min(k,Me),j=Math.max(j,Me),F=Math.min(F,ze),q=Math.max(q,ze)}if(k===j||F===q)continue;const ee=Math.floor(k/this._granularityCellSize),oe=Math.ceil(j/this._granularityCellSize),ue=Math.floor(F/this._granularityCellSize),he=Math.ceil(q/this._granularityCellSize);if(ee!==oe||ue!==he)for(let be=ue;be<he;be++){const Me=this._scanlineGenerateVertexRingForCellRow(be,E,S);I_(this._vertexBuffer,Me,d)}else d.push(...S)}return d}_scanlineGenerateVertexRingForCellRow(o,d,p){const _=o*this._granularityCellSize,S=_+this._granularityCellSize,E=[];for(let k=0;k<3;k++){const F=d[2*k],j=d[2*k+1],q=d[2*(k+1)%6],ee=d[(2*(k+1)+1)%6],oe=d[2*(k+2)%6],ue=d[(2*(k+2)+1)%6],he=q-F,be=ee-j,Me=he===0,ze=be===0,st=(_-j)/be,He=(S-j)/be,ae=Math.min(st,He),we=Math.max(st,He);if(!ze&&(ae>=1||we<=0)||ze&&(j<_||j>S)){ee>=_&&ee<=S&&E.push(p[(k+1)%3]);continue}!ze&&ae>0&&E.push(this._vertexToIndex(F+he*ae,j+be*ae));const Ze=F+he*Math.max(ae,0),It=F+he*Math.min(we,1);Me||this._generateIntraEdgeVertices(E,F,j,q,ee,Ze,It),!ze&&we<1&&E.push(this._vertexToIndex(F+he*we,j+be*we)),(ze||ee>=_&&ee<=S)&&E.push(p[(k+1)%3]),!ze&&(ee<=_||ee>=S)&&this._generateInterEdgeVertices(E,F,j,q,ee,oe,ue,It,_,S)}return E}_generateIntraEdgeVertices(o,d,p,_,S,E,k){const F=_-d,j=S-p,q=j===0,ee=q?Math.min(d,_):Math.min(E,k),oe=q?Math.max(d,_):Math.max(E,k),ue=Math.floor(ee/this._granularityCellSize)+1,he=Math.ceil(oe/this._granularityCellSize)-1;if(q?d<_:E<k)for(let be=ue;be<=he;be++){const Me=be*this._granularityCellSize;o.push(this._vertexToIndex(Me,p+j*(Me-d)/F))}else for(let be=he;be>=ue;be--){const Me=be*this._granularityCellSize;o.push(this._vertexToIndex(Me,p+j*(Me-d)/F))}}_generateInterEdgeVertices(o,d,p,_,S,E,k,F,j,q){const ee=S-p,oe=E-_,ue=k-S,he=(j-S)/ue,be=(q-S)/ue,Me=Math.min(he,be),ze=Math.max(he,be),st=_+oe*Me;let He=Math.floor(Math.min(st,F)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(st,F)/this._granularityCellSize)-1,we=F<st;const Ze=ue===0;if(Ze&&(k===j||k===q))return;if(Ze||Me>=1||ze<=0){const Qt=p-k,kt=E+(d-E)*Math.min((j-k)/Qt,(q-k)/Qt);He=Math.floor(Math.min(kt,F)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(kt,F)/this._granularityCellSize)-1,we=F<kt}const It=ee>0?q:j;if(we)for(let Qt=He;Qt<=ae;Qt++)o.push(this._vertexToIndex(Qt*this._granularityCellSize,It));else for(let Qt=ae;Qt>=He;Qt--)o.push(this._vertexToIndex(Qt*this._granularityCellSize,It))}_generateOutline(o){const d=[];for(const p of o){const _=Xu(p,this._granularity,!0),S=this._pointArrayToIndices(_),E=[];for(let k=1;k<S.length;k++)E.push(S[k-1]),E.push(S[k]);d.push(E)}return d}_handlePoles(o){let d=!1,p=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(p=!0)),(d||p)&&this._fillPoles(o,d,p)}_ensureNoPoleVertices(){const o=this._vertexBuffer;for(let d=0;d<o.length;d+=2){const p=o[d+1];p===of&&(o[d+1]=-32767),p===Zh&&(o[d+1]=32766)}}_generatePoleQuad(o,d,p,_,S,E){_>S!=(E===of)?(o.push(d),o.push(p),o.push(this._vertexToIndex(_,E)),o.push(p),o.push(this._vertexToIndex(S,E)),o.push(this._vertexToIndex(_,E))):(o.push(p),o.push(d),o.push(this._vertexToIndex(_,E)),o.push(this._vertexToIndex(S,E)),o.push(p),o.push(this._vertexToIndex(_,E)))}_fillPoles(o,d,p){const _=this._vertexBuffer,S=tt,E=o.length;for(let k=2;k<E;k+=3){const F=o[k-2],j=o[k-1],q=o[k],ee=_[2*F],oe=_[2*F+1],ue=_[2*j],he=_[2*j+1],be=_[2*q],Me=_[2*q+1];d&&(oe===0&&he===0&&this._generatePoleQuad(o,F,j,ee,ue,of),he===0&&Me===0&&this._generatePoleQuad(o,j,q,ue,be,of),Me===0&&oe===0&&this._generatePoleQuad(o,q,F,be,ee,of)),p&&(oe===S&&he===S&&this._generatePoleQuad(o,F,j,ee,ue,Zh),he===S&&Me===S&&this._generatePoleQuad(o,j,q,ue,be,Zh),Me===S&&oe===S&&this._generatePoleQuad(o,q,F,be,ee,Zh))}}_initializeVertices(o){for(let d=0;d<o.length;d+=2)this._vertexToIndex(o[d],o[d+1])}subdividePolygonInternal(o,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:p,holeIndices:_}=function(k){const F=[],j=[];for(const q of k)if(q.length!==0){q!==k[0]&&F.push(j.length/2);for(let ee=0;ee<q.length;ee++)j.push(q[ee].x),j.push(q[ee].y)}return{flattened:j,holeIndices:F}}(o);let S;this._initializeVertices(p);try{const k=function(j,q,ee=2){const oe=q&&q.length,ue=oe?q[0]*ee:j.length;let he=Mg(j,0,ue,ee,!0);const be=[];if(!he||he.next===he.prev)return be;let Me,ze,st;if(oe&&(he=function(He,ae,we,Ze){const It=[];for(let Qt=0,kt=ae.length;Qt<kt;Qt++){const Ft=Mg(He,ae[Qt]*Ze,Qt<kt-1?ae[Qt+1]*Ze:He.length,Ze,!1);Ft===Ft.next&&(Ft.steiner=!0),It.push(Yu(Ft))}It.sort(b_);for(let Qt=0;Qt<It.length;Qt++)we=Ow(It[Qt],we);return we}(j,q,he,ee)),j.length>80*ee){Me=1/0,ze=1/0;let He=-1/0,ae=-1/0;for(let we=ee;we<ue;we+=ee){const Ze=j[we],It=j[we+1];Ze<Me&&(Me=Ze),It<ze&&(ze=It),Ze>He&&(He=Ze),It>ae&&(ae=It)}st=Math.max(He-Me,ae-ze),st=st!==0?32767/st:0}return vs(he,be,ee,Me,ze,st,0),be}(p,_),F=this._convertIndices(p,k);S=this._subdivideTrianglesScanline(F)}catch(k){console.error(k)}let E=[];return d&&(E=this._generateOutline(o)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:E}}_convertIndices(o,d){const p=[];for(let _=0;_<d.length;_++)p.push(this._vertexToIndex(o[2*d[_]],o[2*d[_]+1]));return p}_pointArrayToIndices(o){const d=[];for(let p=0;p<o.length;p++){const _=o[p];d.push(this._vertexToIndex(_.x,_.y))}return d}}function lf(h,o,d,p=!0){return new C_(d,o).subdividePolygonInternal(h,p)}function Xu(h,o,d=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const p=h[0],_=h[h.length-1],S=d&&(p.x!==_.x||p.y!==_.y);if(o<2)return S?[...h,h[0]]:[...h];const E=Math.floor(tt/o),k=[];k.push(new P(h[0].x,h[0].y));const F=h.length,j=S?F:F-1;for(let q=0;q<j;q++){const ee=h[q],oe=q<F-1?h[q+1]:h[0],ue=ee.x,he=ee.y,be=oe.x,Me=oe.y,ze=ue!==be,st=he!==Me;if(!ze&&!st)continue;const He=be-ue,ae=Me-he,we=Math.abs(He),Ze=Math.abs(ae);let It=ue,Qt=he;for(;;){const Ft=He>0?(Math.floor(It/E)+1)*E:(Math.ceil(It/E)-1)*E,sn=ae>0?(Math.floor(Qt/E)+1)*E:(Math.ceil(Qt/E)-1)*E,Jt=Math.abs(It-Ft),ln=Math.abs(Qt-sn),Ut=Math.abs(It-be),wn=Math.abs(Qt-Me),Vn=ze?Jt/we:Number.POSITIVE_INFINITY,zn=st?ln/Ze:Number.POSITIVE_INFINITY;if((Ut<=Jt||!ze)&&(wn<=ln||!st))break;if(Vn<zn&&ze||!st){It=Ft,Qt+=ae*Vn;const Tn=new P(It,Math.round(Qt));k[k.length-1].x===Tn.x&&k[k.length-1].y===Tn.y||k.push(Tn)}else{It+=He*zn,Qt=sn;const Tn=new P(Math.round(It),Qt);k[k.length-1].x===Tn.x&&k[k.length-1].y===Tn.y||k.push(Tn)}}const kt=new P(be,Me);k[k.length-1].x===kt.x&&k[k.length-1].y===kt.y||k.push(kt)}return k}function I_(h,o,d){if(o.length===0)throw new Error("Subdivision vertex ring is empty.");let p=0,_=h[2*o[0]];for(let F=1;F<o.length;F++){const j=h[2*o[F]];j<_&&(_=j,p=F)}const S=o.length;let E=p,k=(E+1)%S;for(;;){const F=E-1>=0?E-1:S-1,j=(k+1)%S,q=h[2*o[F]],ee=h[2*o[j]],oe=h[2*o[E]],ue=h[2*o[E]+1],he=h[2*o[k]+1];let be=!1;if(q<ee)be=!0;else if(q>ee)be=!1;else{const Me=he-ue,ze=-(h[2*o[k]]-oe),st=ue<he?1:-1;((q-oe)*Me+(h[2*o[F]+1]-ue)*ze)*st>((ee-oe)*Me+(h[2*o[j]+1]-ue)*ze)*st&&(be=!0)}if(be){const Me=o[F],ze=o[E],st=o[k];Me!==ze&&Me!==st&&ze!==st&&d.push(st,ze,Me),E--,E<0&&(E=S-1)}else{const Me=o[j],ze=o[E],st=o[k];Me!==ze&&Me!==st&&ze!==st&&d.push(st,ze,Me),k++,k>=S&&(k=0)}if(F===j)break}}function zv(h,o,d,p,_,S,E,k,F){const j=_.length/2,q=E&&k&&F;if(j<Wn.MAX_VERTEX_ARRAY_LENGTH){const ee=o.prepareSegment(j,d,p),oe=ee.vertexLength;for(let be=0;be<S.length;be+=3)p.emplaceBack(oe+S[be],oe+S[be+1],oe+S[be+2]);let ue,he;ee.vertexLength+=j,ee.primitiveLength+=S.length/3,q&&(he=E.prepareSegment(j,d,k),ue=he.vertexLength,he.vertexLength+=j);for(let be=0;be<_.length;be+=2)h(_[be],_[be+1]);if(q)for(let be=0;be<F.length;be++){const Me=F[be];for(let ze=1;ze<Me.length;ze+=2)k.emplaceBack(ue+Me[ze-1],ue+Me[ze]);he.primitiveLength+=Me.length/2}}else(function(ee,oe,ue,he,be,Me){const ze=[];for(let Ze=0;Ze<he.length/2;Ze++)ze.push(-1);const st={count:0};let He=0,ae=ee.getOrCreateLatestSegment(oe,ue),we=ae.vertexLength;for(let Ze=2;Ze<be.length;Ze+=3){const It=be[Ze-2],Qt=be[Ze-1],kt=be[Ze];let Ft=ze[It]<He,sn=ze[Qt]<He,Jt=ze[kt]<He;ae.vertexLength+((Ft?1:0)+(sn?1:0)+(Jt?1:0))>Wn.MAX_VERTEX_ARRAY_LENGTH&&(ae=ee.createNewSegment(oe,ue),He=st.count,Ft=!0,sn=!0,Jt=!0,we=0);const ln=Gc(ze,he,Me,st,It,Ft,ae),Ut=Gc(ze,he,Me,st,Qt,sn,ae),wn=Gc(ze,he,Me,st,kt,Jt,ae);ue.emplaceBack(we+ln-He,we+Ut-He,we+wn-He),ae.primitiveLength++}})(o,d,p,_,S,h),q&&function(ee,oe,ue,he,be,Me){const ze=[];for(let Ze=0;Ze<he.length/2;Ze++)ze.push(-1);const st={count:0};let He=0,ae=ee.getOrCreateLatestSegment(oe,ue),we=ae.vertexLength;for(let Ze=0;Ze<be.length;Ze++){const It=be[Ze];for(let Qt=1;Qt<be[Ze].length;Qt+=2){const kt=It[Qt-1],Ft=It[Qt];let sn=ze[kt]<He,Jt=ze[Ft]<He;ae.vertexLength+((sn?1:0)+(Jt?1:0))>Wn.MAX_VERTEX_ARRAY_LENGTH&&(ae=ee.createNewSegment(oe,ue),He=st.count,sn=!0,Jt=!0,we=0);const ln=Gc(ze,he,Me,st,kt,sn,ae),Ut=Gc(ze,he,Me,st,Ft,Jt,ae);ue.emplaceBack(we+ln-He,we+Ut-He),ae.primitiveLength++}}}(E,d,k,_,F,h),o.forceNewSegmentOnNextPrepare(),E==null||E.forceNewSegmentOnNextPrepare()}function Gc(h,o,d,p,_,S,E){if(S){const k=p.count;return d(o[2*_],o[2*_+1]),h[_]=p.count,p.count++,E.vertexLength++,k}return h[_]}class Sg{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ke,this.indexArray=new on,this.indexArray2=new Xt,this.programConfigurations=new ru(o.layers,o.zoom),this.segments=new Wn,this.segments2=new Wn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){this.hasPattern=Ku("fill",this.layers,d);const _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),E=[];for(const{feature:k,id:F,index:j,sourceLayerIndex:q}of o){const ee=this.layers[0]._featureFilter.needGeometry,oe=wo(k,ee);if(!this.layers[0]._featureFilter.filter(new Yr(this.zoom),oe,p))continue;const ue=S?_.evaluate(oe,{},p,d.availableImages):void 0,he={id:F,properties:k.properties,type:k.type,sourceLayerIndex:q,index:j,geometry:ee?oe.geometry:Ta(k),patterns:{},sortKey:ue};E.push(he)}S&&E.sort((k,F)=>k.sortKey-F.sortKey);for(const k of E){const{geometry:F,index:j,sourceLayerIndex:q}=k;if(this.hasPattern){const ee=Dv("fill",this.layers,k,this.zoom,d);this.patternFeatures.push(ee)}else this.addFeature(k,F,j,p,{},d.subdivisionGranularity);d.featureIndex.insert(o[j].feature,F,j,q,this.index)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}addFeatures(o,d,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,d,p,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Lv),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,d,p,_,S,E){for(const k of Rd(d,500)){const F=lf(k,_,E.fill.getGranularityForZoomLevel(_.z)),j=this.layoutVertexArray;zv((q,ee)=>{j.emplaceBack(q,ee)},this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,S,_)}}let Il,Zc;yn("FillBucket",Sg,{omit:["layers","patternFeatures"]});var Bw={get paint(){return Zc=Zc||new ea({"fill-antialias":new On(ve.paint_fill["fill-antialias"]),"fill-opacity":new Nn(ve.paint_fill["fill-opacity"]),"fill-color":new Nn(ve.paint_fill["fill-color"]),"fill-outline-color":new Nn(ve.paint_fill["fill-outline-color"]),"fill-translate":new On(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new On(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Oc(ve.paint_fill["fill-pattern"])})},get layout(){return Il=Il||new ea({"fill-sort-key":new Nn(ve.layout_fill["fill-sort-key"])})}};class M_ extends Ea{constructor(o){super(o,Bw)}recalculate(o,d){super.recalculate(o,d);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new Sg(o)}queryRadius(){return wg(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:o,geometry:d,transform:p,pixelsToTileUnits:_}){return $h(Gp(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-p.bearingInRadians,_),d)}isTileClipped(){return!0}}const Nw=Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Vw=Ii([{name:"a_centroid",components:2,type:"Int16"}],4),{members:jw}=Nw;var Fv,S_,Bv,E_,Nv,T_,P_,Eg={};function Vv(){if(S_)return Fv;S_=1;var h=b();function o(_,S,E,k,F){this.properties={},this.extent=E,this.type=0,this._pbf=_,this._geometry=-1,this._keys=k,this._values=F,_.readFields(d,this,S)}function d(_,S,E){_==1?S.id=E.readVarint():_==2?function(k,F){for(var j=k.readVarint()+k.pos;k.pos<j;){var q=F._keys[k.readVarint()],ee=F._values[k.readVarint()];F.properties[q]=ee}}(E,S):_==3?S.type=E.readVarint():_==4&&(S._geometry=E.pos)}function p(_){for(var S,E,k=0,F=0,j=_.length,q=j-1;F<j;q=F++)k+=((E=_[q]).x-(S=_[F]).x)*(S.y+E.y);return k}return Fv=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var S,E=_.readVarint()+_.pos,k=1,F=0,j=0,q=0,ee=[];_.pos<E;){if(F<=0){var oe=_.readVarint();k=7&oe,F=oe>>3}if(F--,k===1||k===2)j+=_.readSVarint(),q+=_.readSVarint(),k===1&&(S&&ee.push(S),S=[]),S.push(new h(j,q));else{if(k!==7)throw new Error("unknown command "+k);S&&S.push(S[0].clone())}}return S&&ee.push(S),ee},o.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var S=_.readVarint()+_.pos,E=1,k=0,F=0,j=0,q=1/0,ee=-1/0,oe=1/0,ue=-1/0;_.pos<S;){if(k<=0){var he=_.readVarint();E=7&he,k=he>>3}if(k--,E===1||E===2)(F+=_.readSVarint())<q&&(q=F),F>ee&&(ee=F),(j+=_.readSVarint())<oe&&(oe=j),j>ue&&(ue=j);else if(E!==7)throw new Error("unknown command "+E)}return[q,oe,ee,ue]},o.prototype.toGeoJSON=function(_,S,E){var k,F,j=this.extent*Math.pow(2,E),q=this.extent*_,ee=this.extent*S,oe=this.loadGeometry(),ue=o.types[this.type];function he(ze){for(var st=0;st<ze.length;st++){var He=ze[st];ze[st]=[360*(He.x+q)/j-180,360/Math.PI*Math.atan(Math.exp((180-360*(He.y+ee)/j)*Math.PI/180))-90]}}switch(this.type){case 1:var be=[];for(k=0;k<oe.length;k++)be[k]=oe[k][0];he(oe=be);break;case 2:for(k=0;k<oe.length;k++)he(oe[k]);break;case 3:for(oe=function(ze){var st=ze.length;if(st<=1)return[ze];for(var He,ae,we=[],Ze=0;Ze<st;Ze++){var It=p(ze[Ze]);It!==0&&(ae===void 0&&(ae=It<0),ae===It<0?(He&&we.push(He),He=[ze[Ze]]):He.push(ze[Ze]))}return He&&we.push(He),we}(oe),k=0;k<oe.length;k++)for(F=0;F<oe[k].length;F++)he(oe[k][F])}oe.length===1?oe=oe[0]:ue="Multi"+ue;var Me={type:"Feature",geometry:{type:ue,coordinates:oe},properties:this.properties};return"id"in this&&(Me.id=this.id),Me},Fv}function jv(){if(E_)return Bv;E_=1;var h=Vv();function o(p,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(d,this,_),this.length=this._features.length}function d(p,_,S){p===15?_.version=S.readVarint():p===1?_.name=S.readString():p===5?_.extent=S.readVarint():p===2?_._features.push(S.pos):p===3?_._keys.push(S.readString()):p===4&&_._values.push(function(E){for(var k=null,F=E.readVarint()+E.pos;E.pos<F;){var j=E.readVarint()>>3;k=j===1?E.readString():j===2?E.readFloat():j===3?E.readDouble():j===4?E.readVarint64():j===5?E.readVarint():j===6?E.readSVarint():j===7?E.readBoolean():null}return k}(S))}return Bv=o,o.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var _=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,_,this.extent,this._keys,this._values)},Bv}function Uv(){return P_||(P_=1,Eg.VectorTile=function(){if(T_)return Nv;T_=1;var h=jv();function o(d,p,_){if(d===3){var S=new h(_,_.readVarint()+_.pos);S.length&&(p[S.name]=S)}}return Nv=function(d,p){this.layers=d.readFields(o,{},p)},Nv}(),Eg.VectorTileFeature=Vv(),Eg.VectorTileLayer=jv()),Eg}var Jp=f(Uv());const Uw=Jp.VectorTileFeature.types,$v=Math.pow(2,13);function uf(h,o,d,p,_,S,E,k){h.emplaceBack(o,d,2*Math.floor(p*$v)+E,_*$v*2,S*$v*2,Math.round(k))}class Hv{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Je,this.centroidVertexArray=new $e,this.indexArray=new on,this.programConfigurations=new ru(o.layers,o.zoom),this.segments=new Wn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){this.features=[],this.hasPattern=Ku("fill-extrusion",this.layers,d);for(const{feature:_,id:S,index:E,sourceLayerIndex:k}of o){const F=this.layers[0]._featureFilter.needGeometry,j=wo(_,F);if(!this.layers[0]._featureFilter.filter(new Yr(this.zoom),j,p))continue;const q={id:S,sourceLayerIndex:k,index:E,geometry:F?j.geometry:Ta(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(Dv("fill-extrusion",this.layers,q,this.zoom,d)):this.addFeature(q,q.geometry,E,p,{},d.subdivisionGranularity),d.featureIndex.insert(_,q.geometry,E,k,this.index,!0)}}addFeatures(o,d,p){for(const _ of this.features){const{geometry:S}=_;this.addFeature(_,S,_.index,d,p,o.subdivisionGranularity)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,jw),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,Vw.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,d,p,_,S,E){for(const k of Rd(d,500)){const F={x:0,y:0,sampleCount:0},j=this.layoutVertexArray.length;this.processPolygon(F,_,o,k,E);const q=this.layoutVertexArray.length-j,ee=Math.floor(F.x/F.sampleCount),oe=Math.floor(F.y/F.sampleCount);for(let ue=0;ue<q;ue++)this.centroidVertexArray.emplaceBack(ee,oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,S,_)}processPolygon(o,d,p,_,S){if(_.length<1||k_(_[0]))return;for(const ee of _)ee.length!==0&&$w(o,ee);const E={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},k=S.fill.getGranularityForZoomLevel(d.z),F=Uw[p.type]==="Polygon";for(const ee of _){if(ee.length===0||k_(ee))continue;const oe=Xu(ee,k,F);this._generateSideFaces(oe,E)}if(!F)return;const j=lf(_,d,k,!1),q=this.layoutVertexArray;zv((ee,oe)=>{uf(q,ee,oe,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles)}_generateSideFaces(o,d){let p=0;for(let _=1;_<o.length;_++){const S=o[_],E=o[_-1];if(Hw(S,E))continue;d.segment.vertexLength+4>Wn.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const k=S.sub(E)._perp()._unit(),F=E.dist(S);p+F>32768&&(p=0),uf(this.layoutVertexArray,S.x,S.y,k.x,k.y,0,0,p),uf(this.layoutVertexArray,S.x,S.y,k.x,k.y,0,1,p),p+=F,uf(this.layoutVertexArray,E.x,E.y,k.x,k.y,0,0,p),uf(this.layoutVertexArray,E.x,E.y,k.x,k.y,0,1,p);const j=d.segment.vertexLength;this.indexArray.emplaceBack(j,j+2,j+1),this.indexArray.emplaceBack(j+1,j+2,j+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function $w(h,o){for(let d=0;d<o.length;d++){const p=o[d];d===o.length-1&&o[0].x===p.x&&o[0].y===p.y||(h.x+=p.x,h.y+=p.y,h.sampleCount++)}}function Hw(h,o){return h.x===o.x&&(h.x<0||h.x>tt)||h.y===o.y&&(h.y<0||h.y>tt)}function k_(h){return h.every(o=>o.x<0)||h.every(o=>o.x>tt)||h.every(o=>o.y<0)||h.every(o=>o.y>tt)}let L_;yn("FillExtrusionBucket",Hv,{omit:["layers","features"]});var Gw={get paint(){return L_=L_||new ea({"fill-extrusion-opacity":new On(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Nn(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new On(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new On(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Oc(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Nn(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Nn(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new On(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class rl extends Ea{constructor(o){super(o,Gw)}createBucket(o){return new Hv(o)}queryRadius(){return wg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:o,feature:d,featureState:p,geometry:_,transform:S,pixelsToTileUnits:E,pixelPosMatrix:k}){const F=Gp(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,E),j=this.paint.get("fill-extrusion-height").evaluate(d,p),q=this.paint.get("fill-extrusion-base").evaluate(d,p),ee=function(ue,he,be){const Me=[];for(const ze of ue){const st=[ze.x,ze.y,0,1];K(st,st,he),Me.push(new P(st[0]/st[3],st[1]/st[3]))}return Me}(F,k),oe=function(ue,he,be,Me){const ze=[],st=[],He=Me[8]*he,ae=Me[9]*he,we=Me[10]*he,Ze=Me[11]*he,It=Me[8]*be,Qt=Me[9]*be,kt=Me[10]*be,Ft=Me[11]*be;for(const sn of ue){const Jt=[],ln=[];for(const Ut of sn){const wn=Ut.x,Vn=Ut.y,zn=Me[0]*wn+Me[4]*Vn+Me[12],Tn=Me[1]*wn+Me[5]*Vn+Me[13],mr=Me[2]*wn+Me[6]*Vn+Me[14],Ti=Me[3]*wn+Me[7]*Vn+Me[15],us=mr+we,Ns=Ti+Ze,Vs=zn+It,Ra=Tn+Qt,Ls=mr+kt,bi=Ti+Ft,_s=new P((zn+He)/Ns,(Tn+ae)/Ns);_s.z=us/Ns,Jt.push(_s);const Ds=new P(Vs/bi,Ra/bi);Ds.z=Ls/bi,ln.push(Ds)}ze.push(Jt),st.push(ln)}return[ze,st]}(_,q,j,k);return function(ue,he,be){let Me=1/0;$h(be,he)&&(Me=D_(be,he[0]));for(let ze=0;ze<he.length;ze++){const st=he[ze],He=ue[ze];for(let ae=0;ae<st.length-1;ae++){const we=st[ae],Ze=[we,st[ae+1],He[ae+1],He[ae],we];Up(be,Ze)&&(Me=Math.min(Me,D_(be,Ze)))}}return Me!==1/0&&Me}(oe[0],oe[1],ee)}}function em(h,o){return h.x*o.x+h.y*o.y}function D_(h,o){if(h.length===1){let d=0;const p=o[d++];let _;for(;!_||p.equals(_);)if(_=o[d++],!_)return 1/0;for(;d<o.length;d++){const S=o[d],E=h[0],k=_.sub(p),F=S.sub(p),j=E.sub(p),q=em(k,k),ee=em(k,F),oe=em(F,F),ue=em(j,k),he=em(j,F),be=q*oe-ee*ee,Me=(oe*ue-ee*he)/be,ze=(q*he-ee*ue)/be,st=p.z*(1-Me-ze)+_.z*Me+S.z*ze;if(isFinite(st))return st}return 1/0}{let d=1/0;for(const p of o)d=Math.min(d,p.z);return d}}const Zw=Ii([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:R_}=Zw,Ww=Ii([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:qw}=Ww,Kw=Jp.VectorTileFeature.types,Yw=Math.cos(Math.PI/180*37.5),Tg=Math.pow(2,14)/.5;class Gv{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(d=>d.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new lt,this.layoutVertexArray2=new it,this.indexArray=new on,this.programConfigurations=new ru(o.layers,o.zoom),this.segments=new Wn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(o,d,p){this.hasPattern=Ku("line",this.layers,d);const _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),E=[];for(const{feature:k,id:F,index:j,sourceLayerIndex:q}of o){const ee=this.layers[0]._featureFilter.needGeometry,oe=wo(k,ee);if(!this.layers[0]._featureFilter.filter(new Yr(this.zoom),oe,p))continue;const ue=S?_.evaluate(oe,{},p):void 0,he={id:F,properties:k.properties,type:k.type,sourceLayerIndex:q,index:j,geometry:ee?oe.geometry:Ta(k),patterns:{},sortKey:ue};E.push(he)}S&&E.sort((k,F)=>k.sortKey-F.sortKey);for(const k of E){const{geometry:F,index:j,sourceLayerIndex:q}=k;if(this.hasPattern){const ee=Dv("line",this.layers,k,this.zoom,d);this.patternFeatures.push(ee)}else this.addFeature(k,F,j,p,{},d.subdivisionGranularity);d.featureIndex.insert(o[j].feature,F,j,q,this.index)}}update(o,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,d,this.stateDependentLayers,p)}addFeatures(o,d,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,d,p,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,qw)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,R_),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,d,p,_,S,E){const k=this.layers[0].layout,F=k.get("line-join").evaluate(o,{}),j=k.get("line-cap"),q=k.get("line-miter-limit"),ee=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const oe of d)this.addLine(oe,o,F,j,q,ee,_,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,S,_)}addLine(o,d,p,_,S,E,k,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o=Xu(o,k?F.line.getGranularityForZoomLevel(k.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let He=0;He<o.length-1;He++)this.totalDistance+=o[He].dist(o[He+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=Kw[d.type]==="Polygon";let q=o.length;for(;q>=2&&o[q-1].equals(o[q-2]);)q--;let ee=0;for(;ee<q-1&&o[ee].equals(o[ee+1]);)ee++;if(q<(j?3:2))return;p==="bevel"&&(S=1.05);const oe=this.overscaling<=16?15*tt/(512*this.overscaling):0,ue=this.segments.prepareSegment(10*q,this.layoutVertexArray,this.indexArray);let he,be,Me,ze,st;this.e1=this.e2=-1,j&&(he=o[q-2],st=o[ee].sub(he)._unit()._perp());for(let He=ee;He<q;He++){if(Me=He===q-1?j?o[ee+1]:void 0:o[He+1],Me&&o[He].equals(Me))continue;st&&(ze=st),he&&(be=he),he=o[He],st=Me?Me.sub(he)._unit()._perp():ze,ze=ze||st;let ae=ze.add(st);ae.x===0&&ae.y===0||ae._unit();const we=ze.x*st.x+ze.y*st.y,Ze=ae.x*st.x+ae.y*st.y,It=Ze!==0?1/Ze:1/0,Qt=2*Math.sqrt(2-2*Ze),kt=Ze<Yw&&be&&Me,Ft=ze.x*st.y-ze.y*st.x>0;if(kt&&He>ee){const ln=he.dist(be);if(ln>2*oe){const Ut=he.sub(he.sub(be)._mult(oe/ln)._round());this.updateDistance(be,Ut),this.addCurrentVertex(Ut,ze,0,0,ue),be=Ut}}const sn=be&&Me;let Jt=sn?p:j?"butt":_;if(sn&&Jt==="round"&&(It<E?Jt="miter":It<=2&&(Jt="fakeround")),Jt==="miter"&&It>S&&(Jt="bevel"),Jt==="bevel"&&(It>2&&(Jt="flipbevel"),It<S&&(Jt="miter")),be&&this.updateDistance(be,he),Jt==="miter")ae._mult(It),this.addCurrentVertex(he,ae,0,0,ue);else if(Jt==="flipbevel"){if(It>100)ae=st.mult(-1);else{const ln=It*ze.add(st).mag()/ze.sub(st).mag();ae._perp()._mult(ln*(Ft?-1:1))}this.addCurrentVertex(he,ae,0,0,ue),this.addCurrentVertex(he,ae.mult(-1),0,0,ue)}else if(Jt==="bevel"||Jt==="fakeround"){const ln=-Math.sqrt(It*It-1),Ut=Ft?ln:0,wn=Ft?0:ln;if(be&&this.addCurrentVertex(he,ze,Ut,wn,ue),Jt==="fakeround"){const Vn=Math.round(180*Qt/Math.PI/20);for(let zn=1;zn<Vn;zn++){let Tn=zn/Vn;if(Tn!==.5){const Ti=Tn-.5;Tn+=Tn*Ti*(Tn-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Ti*Ti+(.848013+we*(.215638*we-1.06021)))}const mr=st.sub(ze)._mult(Tn)._add(ze)._unit()._mult(Ft?-1:1);this.addHalfVertex(he,mr.x,mr.y,!1,Ft,0,ue)}}Me&&this.addCurrentVertex(he,st,-Ut,-wn,ue)}else if(Jt==="butt")this.addCurrentVertex(he,ae,0,0,ue);else if(Jt==="square"){const ln=be?1:-1;this.addCurrentVertex(he,ae,ln,ln,ue)}else Jt==="round"&&(be&&(this.addCurrentVertex(he,ze,0,0,ue),this.addCurrentVertex(he,ze,1,1,ue,!0)),Me&&(this.addCurrentVertex(he,st,-1,-1,ue,!0),this.addCurrentVertex(he,st,0,0,ue)));if(kt&&He<q-1){const ln=he.dist(Me);if(ln>2*oe){const Ut=he.add(Me.sub(he)._mult(oe/ln)._round());this.updateDistance(he,Ut),this.addCurrentVertex(Ut,st,0,0,ue),he=Ut}}}}addCurrentVertex(o,d,p,_,S,E=!1){const k=d.y*_-d.x,F=-d.y-d.x*_;this.addHalfVertex(o,d.x+d.y*p,d.y-d.x*p,E,!1,p,S),this.addHalfVertex(o,k,F,E,!0,-_,S),this.distance>Tg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,d,p,_,S,E))}addHalfVertex({x:o,y:d},p,_,S,E,k,F){const j=.5*(this.lineClips?this.scaledDistance*(Tg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(S?1:0),(d<<1)+(E?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(k===0?0:k<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const q=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,q,this.e2),F.primitiveLength++),E?this.e2=q:this.e1=q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,d){this.distance+=o.dist(d),this.updateScaledDistance()}}let O_,z_;yn("LineBucket",Gv,{omit:["layers","patternFeatures"]});var F_={get paint(){return z_=z_||new ea({"line-opacity":new Nn(ve.paint_line["line-opacity"]),"line-color":new Nn(ve.paint_line["line-color"]),"line-translate":new On(ve.paint_line["line-translate"]),"line-translate-anchor":new On(ve.paint_line["line-translate-anchor"]),"line-width":new Nn(ve.paint_line["line-width"]),"line-gap-width":new Nn(ve.paint_line["line-gap-width"]),"line-offset":new Nn(ve.paint_line["line-offset"]),"line-blur":new Nn(ve.paint_line["line-blur"]),"line-dasharray":new Hu(ve.paint_line["line-dasharray"]),"line-pattern":new Oc(ve.paint_line["line-pattern"]),"line-gradient":new tl(ve.paint_line["line-gradient"])})},get layout(){return O_=O_||new ea({"line-cap":new On(ve.layout_line["line-cap"]),"line-join":new Nn(ve.layout_line["line-join"]),"line-miter-limit":new On(ve.layout_line["line-miter-limit"]),"line-round-limit":new On(ve.layout_line["line-round-limit"]),"line-sort-key":new Nn(ve.layout_line["line-sort-key"])})}};class Xw extends Nn{possiblyEvaluate(o,d){return d=new Yr(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(o,d)}evaluate(o,d,p,_){return d=pt({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(o,d,p,_)}}let Pg;class Qw extends Ea{constructor(o){super(o,F_),this.gradientVersion=0,Pg||(Pg=new Xw(F_.paint.properties["line-width"].specification),Pg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof Wi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,d){super.recalculate(o,d),this.paint._values["line-floorwidth"]=Pg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Gv(o)}queryRadius(o){const d=o,p=B_(Uc("line-width",this,d),Uc("line-gap-width",this,d)),_=Uc("line-offset",this,d);return p/2+Math.abs(_)+wg(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:o,feature:d,featureState:p,geometry:_,transform:S,pixelsToTileUnits:E}){const k=Gp(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,E),F=E/2*B_(this.paint.get("line-width").evaluate(d,p),this.paint.get("line-gap-width").evaluate(d,p)),j=this.paint.get("line-offset").evaluate(d,p);return j&&(_=function(q,ee){const oe=[];for(let ue=0;ue<q.length;ue++){const he=q[ue],be=[];for(let Me=0;Me<he.length;Me++){const ze=he[Me-1],st=he[Me],He=he[Me+1],ae=Me===0?new P(0,0):st.sub(ze)._unit()._perp(),we=Me===he.length-1?new P(0,0):He.sub(st)._unit()._perp(),Ze=ae._add(we)._unit(),It=Ze.x*we.x+Ze.y*we.y;It!==0&&Ze._mult(1/It),be.push(Ze._mult(ee)._add(st))}oe.push(be)}return oe}(_,j*E)),function(q,ee,oe){for(let ue=0;ue<ee.length;ue++){const he=ee[ue];if(q.length>=3){for(let be=0;be<he.length;be++)if(su(q,he[be]))return!0}if($p(q,he,oe))return!0}return!1}(k,_,F)}isTileClipped(){return!0}}function B_(h,o){return o>0?o+2*h:h}const Jw=Ii([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),e2=Ii([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ii([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const t2=Ii([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ii([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const N_=Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),n2=Ii([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function r2(h,o,d){return h.sections.forEach(p=>{p.text=function(_,S,E){const k=S.layout.get("text-transform").evaluate(E,{});return k==="uppercase"?_=_.toLocaleUpperCase():k==="lowercase"&&(_=_.toLocaleLowerCase()),Jo.applyArabicShaping&&(_=Jo.applyArabicShaping(_)),_}(p.text,o,d)}),h}Ii([{name:"triangle",components:3,type:"Uint16"}]),Ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ii([{type:"Float32",name:"offsetX"}]),Ii([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ii([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const tm={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var V_,Zv,j_,os=24,Wv={};function qv(){return V_||(V_=1,Wv.read=function(h,o,d,p,_){var S,E,k=8*_-p-1,F=(1<<k)-1,j=F>>1,q=-7,ee=d?_-1:0,oe=d?-1:1,ue=h[o+ee];for(ee+=oe,S=ue&(1<<-q)-1,ue>>=-q,q+=k;q>0;S=256*S+h[o+ee],ee+=oe,q-=8);for(E=S&(1<<-q)-1,S>>=-q,q+=p;q>0;E=256*E+h[o+ee],ee+=oe,q-=8);if(S===0)S=1-j;else{if(S===F)return E?NaN:1/0*(ue?-1:1);E+=Math.pow(2,p),S-=j}return(ue?-1:1)*E*Math.pow(2,S-p)},Wv.write=function(h,o,d,p,_,S){var E,k,F,j=8*S-_-1,q=(1<<j)-1,ee=q>>1,oe=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=p?0:S-1,he=p?1:-1,be=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(k=isNaN(o)?1:0,E=q):(E=Math.floor(Math.log(o)/Math.LN2),o*(F=Math.pow(2,-E))<1&&(E--,F*=2),(o+=E+ee>=1?oe/F:oe*Math.pow(2,1-ee))*F>=2&&(E++,F/=2),E+ee>=q?(k=0,E=q):E+ee>=1?(k=(o*F-1)*Math.pow(2,_),E+=ee):(k=o*Math.pow(2,ee-1)*Math.pow(2,_),E=0));_>=8;h[d+ue]=255&k,ue+=he,k/=256,_-=8);for(E=E<<_|k,j+=_;j>0;h[d+ue]=255&E,ue+=he,E/=256,j-=8);h[d+ue-he]|=128*be}),Wv}function Kv(){if(j_)return Zv;j_=1,Zv=o;var h=qv();function o(ae){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ae)?ae:new Uint8Array(ae||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var d=4294967296,p=1/d,_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function S(ae){return ae.type===o.Bytes?ae.readVarint()+ae.pos:ae.pos+1}function E(ae,we,Ze){return Ze?4294967296*we+(ae>>>0):4294967296*(we>>>0)+(ae>>>0)}function k(ae,we,Ze){var It=we<=16383?1:we<=2097151?2:we<=268435455?3:Math.floor(Math.log(we)/(7*Math.LN2));Ze.realloc(It);for(var Qt=Ze.pos-1;Qt>=ae;Qt--)Ze.buf[Qt+It]=Ze.buf[Qt]}function F(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeVarint(ae[Ze])}function j(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeSVarint(ae[Ze])}function q(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeFloat(ae[Ze])}function ee(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeDouble(ae[Ze])}function oe(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeBoolean(ae[Ze])}function ue(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeFixed32(ae[Ze])}function he(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeSFixed32(ae[Ze])}function be(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeFixed64(ae[Ze])}function Me(ae,we){for(var Ze=0;Ze<ae.length;Ze++)we.writeSFixed64(ae[Ze])}function ze(ae,we){return(ae[we]|ae[we+1]<<8|ae[we+2]<<16)+16777216*ae[we+3]}function st(ae,we,Ze){ae[Ze]=we,ae[Ze+1]=we>>>8,ae[Ze+2]=we>>>16,ae[Ze+3]=we>>>24}function He(ae,we){return(ae[we]|ae[we+1]<<8|ae[we+2]<<16)+(ae[we+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(ae,we,Ze){for(Ze=Ze||this.length;this.pos<Ze;){var It=this.readVarint(),Qt=It>>3,kt=this.pos;this.type=7&It,ae(Qt,we,this),this.pos===kt&&this.skip(It)}return we},readMessage:function(ae,we){return this.readFields(ae,we,this.readVarint()+this.pos)},readFixed32:function(){var ae=ze(this.buf,this.pos);return this.pos+=4,ae},readSFixed32:function(){var ae=He(this.buf,this.pos);return this.pos+=4,ae},readFixed64:function(){var ae=ze(this.buf,this.pos)+ze(this.buf,this.pos+4)*d;return this.pos+=8,ae},readSFixed64:function(){var ae=ze(this.buf,this.pos)+He(this.buf,this.pos+4)*d;return this.pos+=8,ae},readFloat:function(){var ae=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ae},readDouble:function(){var ae=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ae},readVarint:function(ae){var we,Ze,It=this.buf;return we=127&(Ze=It[this.pos++]),Ze<128?we:(we|=(127&(Ze=It[this.pos++]))<<7,Ze<128?we:(we|=(127&(Ze=It[this.pos++]))<<14,Ze<128?we:(we|=(127&(Ze=It[this.pos++]))<<21,Ze<128?we:function(Qt,kt,Ft){var sn,Jt,ln=Ft.buf;if(sn=(112&(Jt=ln[Ft.pos++]))>>4,Jt<128||(sn|=(127&(Jt=ln[Ft.pos++]))<<3,Jt<128)||(sn|=(127&(Jt=ln[Ft.pos++]))<<10,Jt<128)||(sn|=(127&(Jt=ln[Ft.pos++]))<<17,Jt<128)||(sn|=(127&(Jt=ln[Ft.pos++]))<<24,Jt<128)||(sn|=(1&(Jt=ln[Ft.pos++]))<<31,Jt<128))return E(Qt,sn,kt);throw new Error("Expected varint not more than 10 bytes")}(we|=(15&(Ze=It[this.pos]))<<28,ae,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ae=this.readVarint();return ae%2==1?(ae+1)/-2:ae/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ae=this.readVarint()+this.pos,we=this.pos;return this.pos=ae,ae-we>=12&&_?function(Ze,It,Qt){return _.decode(Ze.subarray(It,Qt))}(this.buf,we,ae):function(Ze,It,Qt){for(var kt="",Ft=It;Ft<Qt;){var sn,Jt,ln,Ut=Ze[Ft],wn=null,Vn=Ut>239?4:Ut>223?3:Ut>191?2:1;if(Ft+Vn>Qt)break;Vn===1?Ut<128&&(wn=Ut):Vn===2?(192&(sn=Ze[Ft+1]))==128&&(wn=(31&Ut)<<6|63&sn)<=127&&(wn=null):Vn===3?(Jt=Ze[Ft+2],(192&(sn=Ze[Ft+1]))==128&&(192&Jt)==128&&((wn=(15&Ut)<<12|(63&sn)<<6|63&Jt)<=2047||wn>=55296&&wn<=57343)&&(wn=null)):Vn===4&&(Jt=Ze[Ft+2],ln=Ze[Ft+3],(192&(sn=Ze[Ft+1]))==128&&(192&Jt)==128&&(192&ln)==128&&((wn=(15&Ut)<<18|(63&sn)<<12|(63&Jt)<<6|63&ln)<=65535||wn>=1114112)&&(wn=null)),wn===null?(wn=65533,Vn=1):wn>65535&&(wn-=65536,kt+=String.fromCharCode(wn>>>10&1023|55296),wn=56320|1023&wn),kt+=String.fromCharCode(wn),Ft+=Vn}return kt}(this.buf,we,ae)},readBytes:function(){var ae=this.readVarint()+this.pos,we=this.buf.subarray(this.pos,ae);return this.pos=ae,we},readPackedVarint:function(ae,we){if(this.type!==o.Bytes)return ae.push(this.readVarint(we));var Ze=S(this);for(ae=ae||[];this.pos<Ze;)ae.push(this.readVarint(we));return ae},readPackedSVarint:function(ae){if(this.type!==o.Bytes)return ae.push(this.readSVarint());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readSVarint());return ae},readPackedBoolean:function(ae){if(this.type!==o.Bytes)return ae.push(this.readBoolean());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readBoolean());return ae},readPackedFloat:function(ae){if(this.type!==o.Bytes)return ae.push(this.readFloat());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readFloat());return ae},readPackedDouble:function(ae){if(this.type!==o.Bytes)return ae.push(this.readDouble());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readDouble());return ae},readPackedFixed32:function(ae){if(this.type!==o.Bytes)return ae.push(this.readFixed32());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readFixed32());return ae},readPackedSFixed32:function(ae){if(this.type!==o.Bytes)return ae.push(this.readSFixed32());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readSFixed32());return ae},readPackedFixed64:function(ae){if(this.type!==o.Bytes)return ae.push(this.readFixed64());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readFixed64());return ae},readPackedSFixed64:function(ae){if(this.type!==o.Bytes)return ae.push(this.readSFixed64());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readSFixed64());return ae},skip:function(ae){var we=7&ae;if(we===o.Varint)for(;this.buf[this.pos++]>127;);else if(we===o.Bytes)this.pos=this.readVarint()+this.pos;else if(we===o.Fixed32)this.pos+=4;else{if(we!==o.Fixed64)throw new Error("Unimplemented type: "+we);this.pos+=8}},writeTag:function(ae,we){this.writeVarint(ae<<3|we)},realloc:function(ae){for(var we=this.length||16;we<this.pos+ae;)we*=2;if(we!==this.length){var Ze=new Uint8Array(we);Ze.set(this.buf),this.buf=Ze,this.length=we}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ae){this.realloc(4),st(this.buf,ae,this.pos),this.pos+=4},writeSFixed32:function(ae){this.realloc(4),st(this.buf,ae,this.pos),this.pos+=4},writeFixed64:function(ae){this.realloc(8),st(this.buf,-1&ae,this.pos),st(this.buf,Math.floor(ae*p),this.pos+4),this.pos+=8},writeSFixed64:function(ae){this.realloc(8),st(this.buf,-1&ae,this.pos),st(this.buf,Math.floor(ae*p),this.pos+4),this.pos+=8},writeVarint:function(ae){(ae=+ae||0)>268435455||ae<0?function(we,Ze){var It,Qt;if(we>=0?(It=we%4294967296|0,Qt=we/4294967296|0):(Qt=~(-we/4294967296),4294967295^(It=~(-we%4294967296))?It=It+1|0:(It=0,Qt=Qt+1|0)),we>=18446744073709552e3||we<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ze.realloc(10),function(kt,Ft,sn){sn.buf[sn.pos++]=127&kt|128,kt>>>=7,sn.buf[sn.pos++]=127&kt|128,kt>>>=7,sn.buf[sn.pos++]=127&kt|128,kt>>>=7,sn.buf[sn.pos++]=127&kt|128,sn.buf[sn.pos]=127&(kt>>>=7)}(It,0,Ze),function(kt,Ft){var sn=(7&kt)<<4;Ft.buf[Ft.pos++]|=sn|((kt>>>=3)?128:0),kt&&(Ft.buf[Ft.pos++]=127&kt|((kt>>>=7)?128:0),kt&&(Ft.buf[Ft.pos++]=127&kt|((kt>>>=7)?128:0),kt&&(Ft.buf[Ft.pos++]=127&kt|((kt>>>=7)?128:0),kt&&(Ft.buf[Ft.pos++]=127&kt|((kt>>>=7)?128:0),kt&&(Ft.buf[Ft.pos++]=127&kt)))))}(Qt,Ze)}(ae,this):(this.realloc(4),this.buf[this.pos++]=127&ae|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=ae>>>7&127))))},writeSVarint:function(ae){this.writeVarint(ae<0?2*-ae-1:2*ae)},writeBoolean:function(ae){this.writeVarint(!!ae)},writeString:function(ae){ae=String(ae),this.realloc(4*ae.length),this.pos++;var we=this.pos;this.pos=function(It,Qt,kt){for(var Ft,sn,Jt=0;Jt<Qt.length;Jt++){if((Ft=Qt.charCodeAt(Jt))>55295&&Ft<57344){if(!sn){Ft>56319||Jt+1===Qt.length?(It[kt++]=239,It[kt++]=191,It[kt++]=189):sn=Ft;continue}if(Ft<56320){It[kt++]=239,It[kt++]=191,It[kt++]=189,sn=Ft;continue}Ft=sn-55296<<10|Ft-56320|65536,sn=null}else sn&&(It[kt++]=239,It[kt++]=191,It[kt++]=189,sn=null);Ft<128?It[kt++]=Ft:(Ft<2048?It[kt++]=Ft>>6|192:(Ft<65536?It[kt++]=Ft>>12|224:(It[kt++]=Ft>>18|240,It[kt++]=Ft>>12&63|128),It[kt++]=Ft>>6&63|128),It[kt++]=63&Ft|128)}return kt}(this.buf,ae,this.pos);var Ze=this.pos-we;Ze>=128&&k(we,Ze,this),this.pos=we-1,this.writeVarint(Ze),this.pos+=Ze},writeFloat:function(ae){this.realloc(4),h.write(this.buf,ae,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ae){this.realloc(8),h.write(this.buf,ae,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ae){var we=ae.length;this.writeVarint(we),this.realloc(we);for(var Ze=0;Ze<we;Ze++)this.buf[this.pos++]=ae[Ze]},writeRawMessage:function(ae,we){this.pos++;var Ze=this.pos;ae(we,this);var It=this.pos-Ze;It>=128&&k(Ze,It,this),this.pos=Ze-1,this.writeVarint(It),this.pos+=It},writeMessage:function(ae,we,Ze){this.writeTag(ae,o.Bytes),this.writeRawMessage(we,Ze)},writePackedVarint:function(ae,we){we.length&&this.writeMessage(ae,F,we)},writePackedSVarint:function(ae,we){we.length&&this.writeMessage(ae,j,we)},writePackedBoolean:function(ae,we){we.length&&this.writeMessage(ae,oe,we)},writePackedFloat:function(ae,we){we.length&&this.writeMessage(ae,q,we)},writePackedDouble:function(ae,we){we.length&&this.writeMessage(ae,ee,we)},writePackedFixed32:function(ae,we){we.length&&this.writeMessage(ae,ue,we)},writePackedSFixed32:function(ae,we){we.length&&this.writeMessage(ae,he,we)},writePackedFixed64:function(ae,we){we.length&&this.writeMessage(ae,be,we)},writePackedSFixed64:function(ae,we){we.length&&this.writeMessage(ae,Me,we)},writeBytesField:function(ae,we){this.writeTag(ae,o.Bytes),this.writeBytes(we)},writeFixed32Field:function(ae,we){this.writeTag(ae,o.Fixed32),this.writeFixed32(we)},writeSFixed32Field:function(ae,we){this.writeTag(ae,o.Fixed32),this.writeSFixed32(we)},writeFixed64Field:function(ae,we){this.writeTag(ae,o.Fixed64),this.writeFixed64(we)},writeSFixed64Field:function(ae,we){this.writeTag(ae,o.Fixed64),this.writeSFixed64(we)},writeVarintField:function(ae,we){this.writeTag(ae,o.Varint),this.writeVarint(we)},writeSVarintField:function(ae,we){this.writeTag(ae,o.Varint),this.writeSVarint(we)},writeStringField:function(ae,we){this.writeTag(ae,o.Bytes),this.writeString(we)},writeFloatField:function(ae,we){this.writeTag(ae,o.Fixed32),this.writeFloat(we)},writeDoubleField:function(ae,we){this.writeTag(ae,o.Fixed64),this.writeDouble(we)},writeBooleanField:function(ae,we){this.writeVarintField(ae,!!we)}},Zv}var Yv=f(Kv());const Xv=3;function i2(h,o,d){h===1&&d.readMessage(s2,o)}function s2(h,o,d){if(h===3){const{id:p,bitmap:_,width:S,height:E,left:k,top:F,advance:j}=d.readMessage(a2,{});o.push({id:p,bitmap:new Wp({width:S+2*Xv,height:E+2*Xv},_),metrics:{width:S,height:E,left:k,top:F,advance:j}})}}function a2(h,o,d){h===1?o.id=d.readVarint():h===2?o.bitmap=d.readBytes():h===3?o.width=d.readVarint():h===4?o.height=d.readVarint():h===5?o.left=d.readSVarint():h===6?o.top=d.readSVarint():h===7&&(o.advance=d.readVarint())}const o2=Xv;function U_(h){let o=0,d=0;for(const E of h)o+=E.w*E.h,d=Math.max(d,E.w);h.sort((E,k)=>k.h-E.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),d),h:1/0}];let _=0,S=0;for(const E of h)for(let k=p.length-1;k>=0;k--){const F=p[k];if(!(E.w>F.w||E.h>F.h)){if(E.x=F.x,E.y=F.y,S=Math.max(S,E.y+E.h),_=Math.max(_,E.x+E.w),E.w===F.w&&E.h===F.h){const j=p.pop();k<p.length&&(p[k]=j)}else E.h===F.h?(F.x+=E.w,F.w-=E.w):E.w===F.w?(F.y+=E.h,F.h-=E.h):(p.push({x:F.x+E.w,y:F.y,w:F.w-E.w,h:E.h}),F.y+=E.h,F.h-=E.h);break}}return{w:_,h:S,fill:o/(_*S)||0}}const Pa=1;class kg{constructor(o,{pixelRatio:d,version:p,stretchX:_,stretchY:S,content:E,textFitWidth:k,textFitHeight:F}){this.paddedRect=o,this.pixelRatio=d,this.stretchX=_,this.stretchY=S,this.content=E,this.version=p,this.textFitWidth=k,this.textFitHeight=F}get tl(){return[this.paddedRect.x+Pa,this.paddedRect.y+Pa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Pa,this.paddedRect.y+this.paddedRect.h-Pa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Pa)/this.pixelRatio,(this.paddedRect.h-2*Pa)/this.pixelRatio]}}class $_{constructor(o,d){const p={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(o,p,S),this.addImages(d,_,S);const{w:E,h:k}=U_(S),F=new as({width:E||1,height:k||1});for(const j in o){const q=o[j],ee=p[j].paddedRect;as.copy(q.data,F,{x:0,y:0},{x:ee.x+Pa,y:ee.y+Pa},q.data)}for(const j in d){const q=d[j],ee=_[j].paddedRect,oe=ee.x+Pa,ue=ee.y+Pa,he=q.data.width,be=q.data.height;as.copy(q.data,F,{x:0,y:0},{x:oe,y:ue},q.data),as.copy(q.data,F,{x:0,y:be-1},{x:oe,y:ue-1},{width:he,height:1}),as.copy(q.data,F,{x:0,y:0},{x:oe,y:ue+be},{width:he,height:1}),as.copy(q.data,F,{x:he-1,y:0},{x:oe-1,y:ue},{width:1,height:be}),as.copy(q.data,F,{x:0,y:0},{x:oe+he,y:ue},{width:1,height:be})}this.image=F,this.iconPositions=p,this.patternPositions=_}addImages(o,d,p){for(const _ in o){const S=o[_],E={x:0,y:0,w:S.data.width+2*Pa,h:S.data.height+2*Pa};p.push(E),d[_]=new kg(E,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(o,d){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),d),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),d)}patchUpdatedImage(o,d,p){if(!o||!d||o.version===d.version)return;o.version=d.version;const[_,S]=o.tl;p.update(d.data,void 0,{x:_,y:S})}}var Ml;yn("ImagePosition",kg),yn("ImageAtlas",$_),l.al=void 0,(Ml=l.al||(l.al={}))[Ml.none=0]="none",Ml[Ml.horizontal=1]="horizontal",Ml[Ml.vertical=2]="vertical",Ml[Ml.horizontalOnly=3]="horizontalOnly";const Lg=-17;class nm{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(o,d,p){const _=new nm;return _.scale=o||1,_.fontStack=d,_.verticalAlign=p||"bottom",_}static forImage(o,d){const p=new nm;return p.imageName=o,p.verticalAlign=d||"bottom",p}}class cf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,d){const p=new cf;for(let _=0;_<o.sections.length;_++){const S=o.sections[_];S.image?p.addImageSection(S):p.addTextSection(S,d)}return p}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let d="";for(let p=0;p<o.length;p++){const _=o.charCodeAt(p+1)||null,S=o.charCodeAt(p-1)||null;d+=_&&gg(_)&&!tm[o[p+1]]||S&&gg(S)&&!tm[o[p-1]]||!tm[o[p]]?o[p]:tm[o[p]]}return d}(this.text)}trim(){let o=0;for(let p=0;p<this.text.length&&Rg[this.text.charCodeAt(p)];p++)o++;let d=this.text.length;for(let p=this.text.length-1;p>=0&&p>=o&&Rg[this.text.charCodeAt(p)];p--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)}substring(o,d){const p=new cf;return p.text=this.text.substring(o,d),p.sectionIndex=this.sectionIndex.slice(o,d),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,d)=>Math.max(o,this.sections[d].scale),0)}getMaxImageSize(o){let d=0,p=0;for(let _=0;_<this.length();_++){const S=this.getSection(_);if(S.imageName){const E=o[S.imageName];if(!E)continue;const k=E.displaySize;d=Math.max(d,k[0]),p=Math.max(p,k[1])}}return{maxImageWidth:d,maxImageHeight:p}}addTextSection(o,d){this.text+=o.text,this.sections.push(nm.forText(o.scale,o.fontStack||d,o.verticalAlign));const p=this.sections.length-1;for(let _=0;_<o.text.length;++_)this.sectionIndex.push(p)}addImageSection(o){const d=o.image?o.image.name:"";if(d.length===0)return void Ie("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(nm.forImage(d,o.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ie("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Dg(h,o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he){const be=cf.fromFeature(h,_);let Me;ee===l.al.vertical&&be.verticalizePunctuation();const{processBidirectionalText:ze,processStyledBidirectionalText:st}=Jo;if(ze&&be.sections.length===1){Me=[];const we=ze(be.toString(),Qv(be,j,S,o,p,ue));for(const Ze of we){const It=new cf;It.text=Ze,It.sections=be.sections;for(let Qt=0;Qt<Ze.length;Qt++)It.sectionIndex.push(0);Me.push(It)}}else if(st){Me=[];const we=st(be.text,be.sectionIndex,Qv(be,j,S,o,p,ue));for(const Ze of we){const It=new cf;It.text=Ze[0],It.sectionIndex=Ze[1],It.sections=be.sections,Me.push(It)}}else Me=function(we,Ze){const It=[],Qt=we.text;let kt=0;for(const Ft of Ze)It.push(we.substring(kt,Ft)),kt=Ft;return kt<Qt.length&&It.push(we.substring(kt,Qt.length)),It}(be,Qv(be,j,S,o,p,ue));const He=[],ae={positionedLines:He,text:be.toString(),top:q[1],bottom:q[1],left:q[0],right:q[0],writingMode:ee,iconsInText:!1,verticalizable:!1};return function(we,Ze,It,Qt,kt,Ft,sn,Jt,ln,Ut,wn,Vn){let zn=0,Tn=0,mr=0,Ti=0;const us=Jt==="right"?1:Jt==="left"?0:.5,Ns=os/Vn;let Vs=0;for(const bi of kt){bi.trim();const _s=bi.getMaxScale(),Ds={positionedGlyphs:[],lineOffset:0};we.positionedLines[Vs]=Ds;const bs=Ds.positionedGlyphs;let na=0;if(!bi.length()){Tn+=Ft,++Vs;continue}const Mo=h2(Qt,bi,Ns);for(let Oa=0;Oa<bi.length();Oa++){const cs=bi.getSection(Oa),As=bi.getSectionIndex(Oa),ws=bi.getCharCode(Oa),es=K_(ln,wn,ws);let di;if(cs.imageName){if(we.iconsInText=!0,cs.scale=cs.scale*Ns,di=d2(cs,es,_s,Mo,Qt),!di)continue;na=Math.max(na,di.imageOffset)}else if(di=Y_(cs,ws,es,Mo,Ze,It),!di)continue;const{rect:El,metrics:gf,baselineOffset:Tl}=di;bs.push({glyph:ws,imageName:cs.imageName,x:zn,y:Tn+Tl+Lg,vertical:es,scale:cs.scale,fontStack:cs.fontStack,sectionIndex:As,metrics:gf,rect:El}),es?(we.verticalizable=!0,zn+=(cs.imageName?gf.advance:os)*cs.scale+Ut):zn+=gf.advance*cs.scale+Ut}bs.length!==0&&(mr=Math.max(zn-Ut,mr),f2(bs,0,bs.length-1,us)),zn=0,Ds.lineOffset=Math.max(na,(_s-1)*os);const xs=Ft*_s+na;Tn+=xs,Ti=Math.max(xs,Ti),++Vs}const{horizontalAlign:Ra,verticalAlign:Ls}=Jv(sn);(function(bi,_s,Ds,bs,na,Mo,xs,Oa,cs){const As=(_s-Ds)*na;let ws=0;ws=Mo!==xs?-Oa*bs-Lg:-bs*cs*xs+.5*xs;for(const es of bi)for(const di of es.positionedGlyphs)di.x+=As,di.y+=ws})(we.positionedLines,us,Ra,Ls,mr,Ti,Ft,Tn,kt.length),we.top+=-Ls*Tn,we.bottom=we.top+Tn,we.left+=-Ra*mr,we.right=we.left+mr}(ae,o,d,p,Me,E,k,F,ee,j,oe,he),!function(we){for(const Ze of we)if(Ze.positionedGlyphs.length!==0)return!1;return!0}(He)&&ae}const Rg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},l2={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},u2={40:!0};function H_(h,o,d,p,_,S){if(o.imageName){const E=p[o.imageName];return E?E.displaySize[0]*o.scale*os/S+_:0}{const E=d[o.fontStack],k=E&&E[h];return k?k.metrics.advance*o.scale+_:0}}function G_(h,o,d,p){const _=Math.pow(h-o,2);return p?h<o?_/2:2*_:_+Math.abs(d)*d}function c2(h,o,d){let p=0;return h===10&&(p-=1e4),d&&(p+=150),h!==40&&h!==65288||(p+=50),o!==41&&o!==65289||(p+=50),p}function Z_(h,o,d,p,_,S){let E=null,k=G_(o,d,_,S);for(const F of p){const j=G_(o-F.x,d,_,S)+F.badness;j<=k&&(E=F,k=j)}return{index:h,x:o,priorBreak:E,badness:k}}function W_(h){return h?W_(h.priorBreak).concat(h.index):[]}function Qv(h,o,d,p,_,S){if(!h)return[];const E=[],k=function(ee,oe,ue,he,be,Me){let ze=0;for(let st=0;st<ee.length();st++){const He=ee.getSection(st);ze+=H_(ee.getCharCode(st),He,he,be,oe,Me)}return ze/Math.max(1,Math.ceil(ze/ue))}(h,o,d,p,_,S),F=h.text.indexOf("")>=0;let j=0;for(let ee=0;ee<h.length();ee++){const oe=h.getSection(ee),ue=h.getCharCode(ee);if(Rg[ue]||(j+=H_(ue,oe,p,_,o,S)),ee<h.length()-1){const he=!((q=ue)<11904)&&(!!tr["CJK Compatibility Forms"](q)||!!tr["CJK Compatibility"](q)||!!tr["CJK Strokes"](q)||!!tr["CJK Symbols and Punctuation"](q)||!!tr["Enclosed CJK Letters and Months"](q)||!!tr["Halfwidth and Fullwidth Forms"](q)||!!tr["Ideographic Description Characters"](q)||!!tr["Vertical Forms"](q)||mg.test(String.fromCodePoint(q)));(l2[ue]||he||oe.imageName||ee!==h.length()-2&&u2[h.getCharCode(ee+1)])&&E.push(Z_(ee+1,j,k,E,c2(ue,h.getCharCode(ee+1),he&&F),!1))}}var q;return W_(Z_(h.length(),j,k,E,0,!0))}function Jv(h){let o=.5,d=.5;switch(h){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:o,verticalAlign:d}}function h2(h,o,d){const p=o.getMaxScale()*os,{maxImageWidth:_,maxImageHeight:S}=o.getMaxImageSize(h),E=Math.max(p,S*d);return{verticalLineContentWidth:Math.max(p,_*d),horizontalLineContentHeight:E}}function q_(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function K_(h,o,d){return!(h===l.al.horizontal||!o&&!Wd(d)||o&&(Rg[d]||(p=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(p)))));var p}function Y_(h,o,d,p,_,S){const E=S[h.fontStack],k=function(j,q,ee,oe){if(j&&j.rect)return j;const ue=q[ee.fontStack],he=ue&&ue[oe];return he?{rect:null,metrics:he.metrics}:null}(E&&E[o],_,h,o);if(k===null)return null;let F;if(d)F=p.verticalLineContentWidth-h.scale*os;else{const j=q_(h.verticalAlign);F=(p.horizontalLineContentHeight-h.scale*os)*j}return{rect:k.rect,metrics:k.metrics,baselineOffset:F}}function d2(h,o,d,p,_){const S=_[h.imageName];if(!S)return null;const E=S.paddedRect,k=S.displaySize,F={width:k[0],height:k[1],left:Pa,top:-3,advance:o?k[1]:k[0]};let j;if(o)j=p.verticalLineContentWidth-k[1]*h.scale;else{const q=q_(h.verticalAlign);j=(p.horizontalLineContentHeight-k[1]*h.scale)*q}return{rect:E,metrics:F,baselineOffset:j,imageOffset:(o?k[0]:k[1])*h.scale-os*d}}function f2(h,o,d,p){if(p===0)return;const _=h[d],S=(h[d].x+_.metrics.advance*_.scale)*p;for(let E=o;E<=d;E++)h[E].x-=S}function p2(h,o,d){const{horizontalAlign:p,verticalAlign:_}=Jv(d),S=o[0]-h.displaySize[0]*p,E=o[1]-h.displaySize[1]*_;return{image:h,top:E,bottom:E+h.displaySize[1],left:S,right:S+h.displaySize[0]}}function X_(h){var o,d;let p=h.left,_=h.top,S=h.right-p,E=h.bottom-_;const k=(o=h.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",F=(d=h.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",j=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(F==="proportional"){if(k==="stretchOnly"&&S/E<j||k==="proportional"){const q=Math.ceil(E*j);p*=q/S,S=q}}else if(k==="proportional"&&F==="stretchOnly"&&j!==0&&S/E>j){const q=Math.ceil(S/j);_*=q/E,E=q}return{x1:p,y1:_,x2:p+S,y2:_+E}}function rm(h,o,d,p,_,S){const E=h.image;let k;if(E.content){const Me=E.content,ze=E.pixelRatio||1;k=[Me[0]/ze,Me[1]/ze,E.displaySize[0]-Me[2]/ze,E.displaySize[1]-Me[3]/ze]}const F=o.left*S,j=o.right*S;let q,ee,oe,ue;d==="width"||d==="both"?(ue=_[0]+F-p[3],ee=_[0]+j+p[1]):(ue=_[0]+(F+j-E.displaySize[0])/2,ee=ue+E.displaySize[0]);const he=o.top*S,be=o.bottom*S;return d==="height"||d==="both"?(q=_[1]+he-p[0],oe=_[1]+be+p[2]):(q=_[1]+(he+be-E.displaySize[1])/2,oe=q+E.displaySize[1]),{image:E,top:q,right:ee,bottom:oe,left:ue,collisionPadding:k}}const im=255,ou=128,Wc=im*ou;function Q_(h,o){const{expression:d}=o;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Yr(h+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=d;let S=0;for(;S<p.length&&p[S]<=h;)S++;S=Math.max(0,S-1);let E=S;for(;E<p.length&&p[E]<h+1;)E++;E=Math.min(p.length-1,E);const k=p[S],F=p[E];return d.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:F,interpolationType:_}:{kind:"camera",minZoom:k,maxZoom:F,minSize:d.evaluate(new Yr(k)),maxSize:d.evaluate(new Yr(F)),interpolationType:_}}}function e0(h,o,d){let p="never";const _=h.get(o);return _?p=_:h.get(d)&&(p="always"),p}const m2=Jp.VectorTileFeature.types,g2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Og(h,o,d,p,_,S,E,k,F,j,q,ee,oe){const ue=k?Math.min(Wc,Math.round(k[0])):0,he=k?Math.min(Wc,Math.round(k[1])):0;h.emplaceBack(o,d,Math.round(32*p),Math.round(32*_),S,E,(ue<<1)+(F?1:0),he,16*j,16*q,256*ee,256*oe)}function t0(h,o,d){h.emplaceBack(o.x,o.y,d),h.emplaceBack(o.x,o.y,d),h.emplaceBack(o.x,o.y,d),h.emplaceBack(o.x,o.y,d)}function y2(h){for(const o of h.sections)if(bv(o.text))return!0;return!1}class n0{constructor(o){this.layoutVertexArray=new Ct,this.indexArray=new on,this.programConfigurations=o,this.segments=new Wn,this.dynamicLayoutVertexArray=new vt,this.opacityVertexArray=new $t,this.hasVisibleVertices=!1,this.placedSymbolArray=new G}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,d,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Jw.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,e2.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,g2,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}yn("SymbolBuffers",n0);class hf{constructor(o,d,p){this.layoutVertexArray=new o,this.layoutAttributes=d,this.indexArray=new p,this.segments=new Wn,this.collisionVertexArray=new hn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,t2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}yn("CollisionBuffers",hf);class df{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(E=>E.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Q_(this.zoom,d["text-size"]),this.iconSizeData=Q_(this.zoom,d["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=e0(p,"text-overlap","text-allow-overlap")!=="never"||e0(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(E=>l.al[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=o.sourceID}createArrays(){this.text=new n0(new ru(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new n0(new ru(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new se,this.lineVertexArray=new fe,this.symbolInstances=new ie,this.textAnchorOffsets=new De}calculateGlyphDependencies(o,d,p,_,S){for(let E=0;E<o.length;E++)if(d[o.charCodeAt(E)]=!0,(p||_)&&S){const k=tm[o.charAt(E)];k&&(d[k.charCodeAt(0)]=!0)}}populate(o,d,p){const _=this.layers[0],S=_.layout,E=S.get("text-font"),k=S.get("text-field"),F=S.get("icon-image"),j=(k.value.kind!=="constant"||k.value.value instanceof qs&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),q=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,ee=S.get("symbol-sort-key");if(this.features=[],!j&&!q)return;const oe=d.iconDependencies,ue=d.glyphDependencies,he=d.availableImages,be=new Yr(this.zoom);for(const{feature:Me,id:ze,index:st,sourceLayerIndex:He}of o){const ae=_._featureFilter.needGeometry,we=wo(Me,ae);if(!_._featureFilter.filter(be,we,p))continue;let Ze,It;if(ae||(we.geometry=Ta(Me)),j){const kt=_.getValueAndResolveTokens("text-field",we,p,he),Ft=qs.factory(kt),sn=this.hasRTLText=this.hasRTLText||y2(Ft);(!sn||Jo.getRTLTextPluginStatus()==="unavailable"||sn&&Jo.isParsed())&&(Ze=r2(Ft,_,we))}if(q){const kt=_.getValueAndResolveTokens("icon-image",we,p,he);It=kt instanceof Ia?kt:Ia.fromString(kt)}if(!Ze&&!It)continue;const Qt=this.sortFeaturesByKey?ee.evaluate(we,{},p):void 0;if(this.features.push({id:ze,text:Ze,icon:It,index:st,sourceLayerIndex:He,geometry:we.geometry,properties:Me.properties,type:m2[Me.type],sortKey:Qt}),It&&(oe[It.name]=!0),Ze){const kt=E.evaluate(we,{},p).join(","),Ft=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.al.vertical)>=0;for(const sn of Ze.sections)if(sn.image)oe[sn.image.name]=!0;else{const Jt=Zd(Ze.toString()),ln=sn.fontStack||kt,Ut=ue[ln]=ue[ln]||{};this.calculateGlyphDependencies(sn.text,Ut,Ft,this.allowVerticalPlacement,Jt)}}}S.get("symbol-placement")==="line"&&(this.features=function(Me){const ze={},st={},He=[];let ae=0;function we(kt){He.push(Me[kt]),ae++}function Ze(kt,Ft,sn){const Jt=st[kt];return delete st[kt],st[Ft]=Jt,He[Jt].geometry[0].pop(),He[Jt].geometry[0]=He[Jt].geometry[0].concat(sn[0]),Jt}function It(kt,Ft,sn){const Jt=ze[Ft];return delete ze[Ft],ze[kt]=Jt,He[Jt].geometry[0].shift(),He[Jt].geometry[0]=sn[0].concat(He[Jt].geometry[0]),Jt}function Qt(kt,Ft,sn){const Jt=sn?Ft[0][Ft[0].length-1]:Ft[0][0];return`${kt}:${Jt.x}:${Jt.y}`}for(let kt=0;kt<Me.length;kt++){const Ft=Me[kt],sn=Ft.geometry,Jt=Ft.text?Ft.text.toString():null;if(!Jt){we(kt);continue}const ln=Qt(Jt,sn),Ut=Qt(Jt,sn,!0);if(ln in st&&Ut in ze&&st[ln]!==ze[Ut]){const wn=It(ln,Ut,sn),Vn=Ze(ln,Ut,He[wn].geometry);delete ze[ln],delete st[Ut],st[Qt(Jt,He[Vn].geometry,!0)]=Vn,He[wn].geometry=null}else ln in st?Ze(ln,Ut,sn):Ut in ze?It(ln,Ut,sn):(we(kt),ze[ln]=ae-1,st[Ut]=ae-1)}return He.filter(kt=>kt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Me,ze)=>Me.sortKey-ze.sortKey)}update(o,d,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,d,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,d,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,d){const p=this.lineVertexArray.length;if(o.segment!==void 0){let _=o.dist(d[o.segment+1]),S=o.dist(d[o.segment]);const E={};for(let k=o.segment+1;k<d.length;k++)E[k]={x:d[k].x,y:d[k].y,tileUnitDistanceFromAnchor:_},k<d.length-1&&(_+=d[k+1].dist(d[k]));for(let k=o.segment||0;k>=0;k--)E[k]={x:d[k].x,y:d[k].y,tileUnitDistanceFromAnchor:S},k>0&&(S+=d[k-1].dist(d[k]));for(let k=0;k<d.length;k++){const F=E[k];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(o,d,p,_,S,E,k,F,j,q,ee,oe){const ue=o.indexArray,he=o.layoutVertexArray,be=o.segments.prepareSegment(4*d.length,he,ue,this.canOverlap?E.sortKey:void 0),Me=this.glyphOffsetArray.length,ze=be.vertexLength,st=this.allowVerticalPlacement&&k===l.al.vertical?Math.PI/2:0,He=E.text&&E.text.sections;for(let ae=0;ae<d.length;ae++){const{tl:we,tr:Ze,bl:It,br:Qt,tex:kt,pixelOffsetTL:Ft,pixelOffsetBR:sn,minFontScaleX:Jt,minFontScaleY:ln,glyphOffset:Ut,isSDF:wn,sectionIndex:Vn}=d[ae],zn=be.vertexLength,Tn=Ut[1];Og(he,F.x,F.y,we.x,Tn+we.y,kt.x,kt.y,p,wn,Ft.x,Ft.y,Jt,ln),Og(he,F.x,F.y,Ze.x,Tn+Ze.y,kt.x+kt.w,kt.y,p,wn,sn.x,Ft.y,Jt,ln),Og(he,F.x,F.y,It.x,Tn+It.y,kt.x,kt.y+kt.h,p,wn,Ft.x,sn.y,Jt,ln),Og(he,F.x,F.y,Qt.x,Tn+Qt.y,kt.x+kt.w,kt.y+kt.h,p,wn,sn.x,sn.y,Jt,ln),t0(o.dynamicLayoutVertexArray,F,st),ue.emplaceBack(zn,zn+2,zn+1),ue.emplaceBack(zn+1,zn+2,zn+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ut[0]),ae!==d.length-1&&Vn===d[ae+1].sectionIndex||o.programConfigurations.populatePaintArrays(he.length,E,E.index,{},oe,He&&He[Vn])}o.placedSymbolArray.emplaceBack(F.x,F.y,Me,this.glyphOffsetArray.length-Me,ze,j,q,F.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],k,0,!1,0,ee)}_addCollisionDebugVertex(o,d,p,_,S,E){return d.emplaceBack(0,0),o.emplaceBack(p.x,p.y,_,S,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(o,d,p,_,S,E,k){const F=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),j=F.vertexLength,q=S.layoutVertexArray,ee=S.collisionVertexArray,oe=k.anchorX,ue=k.anchorY;this._addCollisionDebugVertex(q,ee,E,oe,ue,new P(o,d)),this._addCollisionDebugVertex(q,ee,E,oe,ue,new P(p,d)),this._addCollisionDebugVertex(q,ee,E,oe,ue,new P(p,_)),this._addCollisionDebugVertex(q,ee,E,oe,ue,new P(o,_)),F.vertexLength+=4;const he=S.indexArray;he.emplaceBack(j,j+1),he.emplaceBack(j+1,j+2),he.emplaceBack(j+2,j+3),he.emplaceBack(j+3,j),F.primitiveLength+=4}addDebugCollisionBoxes(o,d,p,_){for(let S=o;S<d;S++){const E=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,_?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hf(Nt,N_.members,Xt),this.iconCollisionBox=new hf(Nt,N_.members,Xt);for(let o=0;o<this.symbolInstances.length;o++){const d=this.symbolInstances.get(o);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(o,d,p,_,S,E,k,F,j){const q={};for(let ee=d;ee<p;ee++){const oe=o.get(ee);q.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.textFeatureIndex=oe.featureIndex;break}for(let ee=_;ee<S;ee++){const oe=o.get(ee);q.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.verticalTextFeatureIndex=oe.featureIndex;break}for(let ee=E;ee<k;ee++){const oe=o.get(ee);q.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.iconFeatureIndex=oe.featureIndex;break}for(let ee=F;ee<j;ee++){const oe=o.get(ee);q.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},q.verticalIconFeatureIndex=oe.featureIndex;break}return q}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const p=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,d){const p=o.placedSymbolArray.get(d),_=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<_;S+=4)o.indexArray.emplaceBack(S,S+2,S+1),o.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(o),p=Math.cos(o),_=[],S=[],E=[];for(let k=0;k<this.symbolInstances.length;++k){E.push(k);const F=this.symbolInstances.get(k);_.push(0|Math.round(d*F.anchorX+p*F.anchorY)),S.push(F.featureIndex)}return E.sort((k,F)=>_[k]-_[F]||S[F]-S[k]),E}addToSortKeyRanges(o,d){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===d?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const p=this.symbolInstances.get(d);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((_,S,E)=>{_>=0&&E.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let r0,i0;yn("SymbolBucket",df,{omit:["layers","collisionBoxArray","features","compareText"]}),df.MAX_GLYPHS=65535,df.addDynamicAttributes=t0;var sm={get paint(){return i0=i0||new ea({"icon-opacity":new Nn(ve.paint_symbol["icon-opacity"]),"icon-color":new Nn(ve.paint_symbol["icon-color"]),"icon-halo-color":new Nn(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Nn(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Nn(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new On(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new On(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Nn(ve.paint_symbol["text-opacity"]),"text-color":new Nn(ve.paint_symbol["text-color"],{runtimeType:Ws,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Nn(ve.paint_symbol["text-halo-color"]),"text-halo-width":new Nn(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Nn(ve.paint_symbol["text-halo-blur"]),"text-translate":new On(ve.paint_symbol["text-translate"]),"text-translate-anchor":new On(ve.paint_symbol["text-translate-anchor"])})},get layout(){return r0=r0||new ea({"symbol-placement":new On(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new On(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new On(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Nn(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new On(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new On(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new On(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new On(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new On(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new On(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Nn(ve.layout_symbol["icon-size"]),"icon-text-fit":new On(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new On(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Nn(ve.layout_symbol["icon-image"]),"icon-rotate":new Nn(ve.layout_symbol["icon-rotate"]),"icon-padding":new Nn(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new On(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Nn(ve.layout_symbol["icon-offset"]),"icon-anchor":new Nn(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new On(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new On(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new On(ve.layout_symbol["text-rotation-alignment"]),"text-field":new Nn(ve.layout_symbol["text-field"]),"text-font":new Nn(ve.layout_symbol["text-font"]),"text-size":new Nn(ve.layout_symbol["text-size"]),"text-max-width":new Nn(ve.layout_symbol["text-max-width"]),"text-line-height":new On(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Nn(ve.layout_symbol["text-letter-spacing"]),"text-justify":new Nn(ve.layout_symbol["text-justify"]),"text-radial-offset":new Nn(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new On(ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Nn(ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Nn(ve.layout_symbol["text-anchor"]),"text-max-angle":new On(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new On(ve.layout_symbol["text-writing-mode"]),"text-rotate":new Nn(ve.layout_symbol["text-rotate"]),"text-padding":new On(ve.layout_symbol["text-padding"]),"text-keep-upright":new On(ve.layout_symbol["text-keep-upright"]),"text-transform":new Nn(ve.layout_symbol["text-transform"]),"text-offset":new Nn(ve.layout_symbol["text-offset"]),"text-allow-overlap":new On(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new On(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new On(ve.layout_symbol["text-ignore-placement"]),"text-optional":new On(ve.layout_symbol["text-optional"])})}};class s0{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:wr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(o.formattedSection))return d.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yn("FormatSectionOverride",s0,{omit:["defaultValue"]});class am extends Ea{constructor(o){super(o,sm)}recalculate(o,d){if(super.recalculate(o,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const S of p)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,d,p,_){const S=this.layout.get(o).evaluate(d,{},p,_),E=this._unevaluatedLayout._values[o];return E.isDataDriven()||Ko(E.value)||!S?S:function(k,F){return F.replace(/{([^{}]+)}/g,(j,q)=>k&&q in k?String(k[q]):"")}(d.properties,S)}createBucket(o){return new df(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of sm.paint.overridableProperties){if(!am.hasPaintOverride(this.layout,o))continue;const d=this.paint.get(o),p=new s0(d),_=new Vd(p,d.property.specification);let S=null;S=d.value.kind==="constant"||d.value.kind==="source"?new Vu("source",_):new yl("composite",_,d.value.zoomStops),this.paint._values[o]=new Fs(d.property,S,d.parameters)}}_handleOverridablePaintPropertyUpdate(o,d,p){return!(!this.layout||d.isDataDriven()||p.isDataDriven())&&am.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,d){const p=o.get("text-field"),_=sm.paint.properties[d];let S=!1;const E=k=>{for(const F of k)if(_.overrides&&_.overrides.hasOverride(F))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof qs)E(p.value.value.sections);else if(p.value.kind==="source"){const k=j=>{S||(j instanceof ql&&Ci(j.value)===Su?E(j.value.sections):j instanceof mo?E(j.sections):j.eachChild(k))},F=p.value;F._styleExpression&&k(F._styleExpression.expression)}return S}}let a0;var J_={get paint(){return a0=a0||new ea({"background-color":new On(ve.paint_background["background-color"]),"background-pattern":new Hu(ve.paint_background["background-pattern"]),"background-opacity":new On(ve.paint_background["background-opacity"])})}};class v2 extends Ea{constructor(o){super(o,J_)}}let eb;var _2={get paint(){return eb=eb||new ea({"raster-opacity":new On(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new On(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new On(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new On(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new On(ve.paint_raster["raster-saturation"]),"raster-contrast":new On(ve.paint_raster["raster-contrast"]),"raster-resampling":new On(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new On(ve.paint_raster["raster-fade-duration"])})}};class zg extends Ea{constructor(o){super(o,_2)}}class Fg extends Ea{constructor(o){super(o,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class b2{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const x2={once:!0},om=63710088e-1;class Qu{constructor(o,d){if(isNaN(o)||isNaN(d))throw new Error(`Invalid LngLat object: (${o}, ${d})`);if(this.lng=+o,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Qu(en(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const d=Math.PI/180,p=this.lat*d,_=o.lat*d,S=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((o.lng-this.lng)*d);return om*Math.acos(Math.min(S,1))}static convert(o){if(o instanceof Qu)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Qu(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Qu(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const tb=2*Math.PI*om;function nb(h){return tb*Math.cos(h*Math.PI/180)}function rb(h){return(180+h)/360}function ib(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function sb(h,o){return h/nb(o)}function o0(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function ab(h,o){return h*nb(o0(o))}class lm{constructor(o,d,p=0){this.x=+o,this.y=+d,this.z=+p}static fromLngLat(o,d=0){const p=Qu.convert(o);return new lm(rb(p.lng),ib(p.lat),sb(d,p.lat))}toLngLat(){return new Qu(360*this.x-180,o0(this.y))}toAltitude(){return ab(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/tb*(o=o0(this.y),1/Math.cos(o*Math.PI/180));var o}}function ob(h,o,d){var p=2*Math.PI*6378137/256/Math.pow(2,d);return[h*p-2*Math.PI*6378137/2,o*p-2*Math.PI*6378137/2]}class l0{constructor(o,d,p){if(!function(_,S,E){return!(_<0||_>25||E<0||E>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(o,d,p))throw new Error(`x=${d}, y=${p}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=d,this.y=p,this.key=xa(0,o,o,d,p)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,d,p){const _=(E=this.y,k=this.z,F=ob(256*(S=this.x),256*(E=Math.pow(2,k)-E-1),k),j=ob(256*(S+1),256*(E+1),k),F[0]+","+F[1]+","+j[0]+","+j[1]);var S,E,k,F,j;const q=function(ee,oe,ue){let he,be="";for(let Me=ee;Me>0;Me--)he=1<<Me-1,be+=(oe&he?1:0)+(ue&he?2:0);return be}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,q).replace(/{bbox-epsg-3857}/g,_)}isChildOf(o){const d=this.z-o.z;return d>0&&o.x===this.x>>d&&o.y===this.y>>d}getTilePoint(o){const d=Math.pow(2,this.z);return new P((o.x*d-this.x)*tt,(o.y*d-this.y)*tt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lb{constructor(o,d){this.wrap=o,this.canonical=d,this.key=xa(o,d.z,d.z,d.x,d.y)}}class Co{constructor(o,d,p,_,S){if(this.terrainRttPosMatrix32f=null,o<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${p}`);this.overscaledZ=o,this.wrap=d,this.canonical=new l0(p,+_,+S),this.key=xa(d,o,p,_,S)}clone(){return new Co(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?new Co(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Co(o,this.wrap,o,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(o,d){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-o;return o>this.canonical.z?xa(this.wrap*+d,o,this.canonical.z,this.canonical.x,this.canonical.y):xa(this.wrap*+d,o,o,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const d=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>d&&o.canonical.y===this.canonical.y>>d}children(o){if(this.overscaledZ>=o)return[new Co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new Co(d,this.wrap,d,p,_),new Co(d,this.wrap,d,p+1,_),new Co(d,this.wrap,d,p,_+1),new Co(d,this.wrap,d,p+1,_+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Co(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lb(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new lm(o.x-this.wrap,o.y))}}function xa(h,o,d,p,_){(h*=2)<0&&(h=-1*h-1);const S=1<<d;return(S*S*h+S*_+p).toString(36)+d.toString(36)+o.toString(36)}yn("CanonicalTileID",l0),yn("OverscaledTileID",Co,{omit:["terrainRttPosMatrix32f"]});class ub{constructor(o,d,p,_=1,S=1,E=1,k=0){if(this.uid=o,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void Ie(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const F=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=E,this.baseShift=k;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<F;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(F,j)]=this.data[this._idx(F-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,F)]=this.data[this._idx(j,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<F;j++)for(let q=0;q<F;q++){const ee=this.get(j,q);ee>this.max&&(this.max=ee),ee<this.min&&(this.min=ee)}}get(o,d){const p=new Uint8Array(this.data.buffer),_=4*this._idx(o,d);return this.unpack(p[_],p[_+1],p[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,d){if(o<-1||o>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(o+1)}unpack(o,d,p){return o*this.redFactor+d*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new as({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,d,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let _=d*this.dim,S=d*this.dim+this.dim,E=p*this.dim,k=p*this.dim+this.dim;switch(d){case-1:_=S-1;break;case 1:S=_+1}switch(p){case-1:E=k-1;break;case 1:k=E+1}const F=-d*this.dim,j=-p*this.dim;for(let q=E;q<k;q++)for(let ee=_;ee<S;ee++)this.data[this._idx(ee,q)]=o.data[this._idx(ee+F,q+j)]}}yn("DEMData",ub);class cb{constructor(o){this._stringToNumber={},this._numberToString=[];for(let d=0;d<o.length;d++){const p=o[d];this._stringToNumber[p]=d,this._numberToString[d]=p}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class qc{constructor(o,d,p,_,S){this.type="Feature",this._vectorTileFeature=o,o._z=d,o._x=p,o._y=_,this.properties=o.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(o[d]=this[d]);return o}}class lr{constructor(o,d){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new bl(tt,16,0),this.grid3D=new bl(tt,16,0),this.featureIndexArray=new Re,this.promoteId=d}insert(o,d,p,_,S,E){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,S);const F=E?this.grid3D:this.grid;for(let j=0;j<d.length;j++){const q=d[j],ee=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<q.length;oe++){const ue=q[oe];ee[0]=Math.min(ee[0],ue.x),ee[1]=Math.min(ee[1],ue.y),ee[2]=Math.max(ee[2],ue.x),ee[3]=Math.max(ee[3],ue.y)}ee[0]<tt&&ee[1]<tt&&ee[2]>=0&&ee[3]>=0&&F.insert(k,ee[0],ee[1],ee[2],ee[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jp.VectorTile(new Yv(this.rawTileData)).layers,this.sourceLayerCoder=new cb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,d,p,_){this.loadVTLayers();const S=o.params,E=tt/o.tileSize/o.scale,k=Lc(S.filter),F=o.queryGeometry,j=o.queryPadding*E,q=ka(F),ee=this.grid.query(q.minX-j,q.minY-j,q.maxX+j,q.maxY+j),oe=ka(o.cameraQueryGeometry),ue=this.grid3D.query(oe.minX-j,oe.minY-j,oe.maxX+j,oe.maxY+j,(Me,ze,st,He)=>function(ae,we,Ze,It,Qt){for(const Ft of ae)if(we<=Ft.x&&Ze<=Ft.y&&It>=Ft.x&&Qt>=Ft.y)return!0;const kt=[new P(we,Ze),new P(we,Qt),new P(It,Qt),new P(It,Ze)];if(ae.length>2){for(const Ft of kt)if(su(ae,Ft))return!0}for(let Ft=0;Ft<ae.length-1;Ft++)if(wv(ae[Ft],ae[Ft+1],kt))return!0;return!1}(o.cameraQueryGeometry,Me-j,ze-j,st+j,He+j));for(const Me of ue)ee.push(Me);ee.sort(ls);const he={};let be;for(let Me=0;Me<ee.length;Me++){const ze=ee[Me];if(ze===be)continue;be=ze;const st=this.featureIndexArray.get(ze);let He=null;this.loadMatchingFeature(he,st.bucketIndex,st.sourceLayerIndex,st.featureIndex,k,S.layers,S.availableImages,d,p,_,(ae,we,Ze)=>(He||(He=Ta(ae)),we.queryIntersectsFeature({queryGeometry:F,feature:ae,featureState:Ze,geometry:He,zoom:this.z,transform:o.transform,pixelsToTileUnits:E,pixelPosMatrix:o.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:o.getElevation})))}return he}loadMatchingFeature(o,d,p,_,S,E,k,F,j,q,ee){const oe=this.bucketLayerIDs[d];if(E&&!oe.some(Me=>E.has(Me)))return;const ue=this.sourceLayerCoder.decode(p),he=this.vtLayers[ue].feature(_);if(S.needGeometry){const Me=wo(he,!0);if(!S.filter(new Yr(this.tileID.overscaledZ),Me,this.tileID.canonical))return}else if(!S.filter(new Yr(this.tileID.overscaledZ),he))return;const be=this.getId(he,ue);for(let Me=0;Me<oe.length;Me++){const ze=oe[Me];if(E&&!E.has(ze))continue;const st=F[ze];if(!st)continue;let He={};be&&q&&(He=q.getState(st.sourceLayer||"_geojsonTileLayer",be));const ae=pt({},j[ze]);ae.paint=hb(ae.paint,st.paint,he,He,k),ae.layout=hb(ae.layout,st.layout,he,He,k);const we=!ee||ee(he,st,He);if(!we)continue;const Ze=new qc(he,this.z,this.x,this.y,be);Ze.layer=ae;let It=o[ze];It===void 0&&(It=o[ze]=[]),It.push({featureIndex:_,feature:Ze,intersectionZ:we})}}lookupSymbolFeatures(o,d,p,_,S,E,k,F){const j={};this.loadVTLayers();const q=Lc(S);for(const ee of o)this.loadMatchingFeature(j,p,_,ee,q,E,k,F,d);return j}hasLayer(o){for(const d of this.bucketLayerIDs)for(const p of d)if(o===p)return!0;return!1}getId(o,d){var p;let _=o.id;return this.promoteId&&(_=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((p=o.properties)===null||p===void 0)&&p.cluster)&&this.promoteId&&(_=Number(o.properties.cluster_id))),_}}function hb(h,o,d,p,_){return ot(h,(S,E)=>{const k=o instanceof Js?o.get(E):null;return k&&k.evaluate?k.evaluate(d,p,_):k})}function ka(h){let o=1/0,d=1/0,p=-1/0,_=-1/0;for(const S of h)o=Math.min(o,S.x),d=Math.min(d,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return{minX:o,minY:d,maxX:p,maxY:_}}function ls(h,o){return o-h}function db(h,o,d,p,_){const S=[];for(let E=0;E<h.length;E++){const k=h[E];let F;for(let j=0;j<k.length-1;j++){let q=k[j],ee=k[j+1];q.x<o&&ee.x<o||(q.x<o?q=new P(o,q.y+(o-q.x)/(ee.x-q.x)*(ee.y-q.y))._round():ee.x<o&&(ee=new P(o,q.y+(o-q.x)/(ee.x-q.x)*(ee.y-q.y))._round()),q.y<d&&ee.y<d||(q.y<d?q=new P(q.x+(d-q.y)/(ee.y-q.y)*(ee.x-q.x),d)._round():ee.y<d&&(ee=new P(q.x+(d-q.y)/(ee.y-q.y)*(ee.x-q.x),d)._round()),q.x>=p&&ee.x>=p||(q.x>=p?q=new P(p,q.y+(p-q.x)/(ee.x-q.x)*(ee.y-q.y))._round():ee.x>=p&&(ee=new P(p,q.y+(p-q.x)/(ee.x-q.x)*(ee.y-q.y))._round()),q.y>=_&&ee.y>=_||(q.y>=_?q=new P(q.x+(_-q.y)/(ee.y-q.y)*(ee.x-q.x),_)._round():ee.y>=_&&(ee=new P(q.x+(_-q.y)/(ee.y-q.y)*(ee.x-q.x),_)._round()),F&&q.equals(F[F.length-1])||(F=[q],S.push(F)),F.push(ee)))))}}return S}yn("FeatureIndex",lr,{omit:["rawTileData","sourceLayerCoder"]});class La extends P{constructor(o,d,p,_){super(o,d),this.angle=p,_!==void 0&&(this.segment=_)}clone(){return new La(this.x,this.y,this.angle,this.segment)}}function fb(h,o,d,p,_){if(o.segment===void 0||d===0)return!0;let S=o,E=o.segment+1,k=0;for(;k>-d/2;){if(E--,E<0)return!1;k-=h[E].dist(S),S=h[E]}k+=h[E].dist(h[E+1]),E++;const F=[];let j=0;for(;k<d/2;){const q=h[E],ee=h[E+1];if(!ee)return!1;let oe=h[E-1].angleTo(q)-q.angleTo(ee);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:k,angleDelta:oe}),j+=oe;k-F[0].distance>p;)j-=F.shift().angleDelta;if(j>_)return!1;E++,k+=q.dist(ee)}return!0}function pb(h){let o=0;for(let d=0;d<h.length-1;d++)o+=h[d].dist(h[d+1]);return o}function mb(h,o,d){return h?.6*o*d:0}function gb(h,o){return Math.max(h?h.right-h.left:0,o?o.right-o.left:0)}function A2(h,o,d,p,_,S){const E=mb(d,_,S),k=gb(d,p)*S;let F=0;const j=pb(h)/2;for(let q=0;q<h.length-1;q++){const ee=h[q],oe=h[q+1],ue=ee.dist(oe);if(F+ue>j){const he=(j-F)/ue,be=ei.number(ee.x,oe.x,he),Me=ei.number(ee.y,oe.y,he),ze=new La(be,Me,oe.angleTo(ee),q);return ze._round(),!E||fb(h,ze,k,E,o)?ze:void 0}F+=ue}}function u0(h,o,d,p,_,S,E,k,F){const j=mb(p,S,E),q=gb(p,_),ee=q*E,oe=h[0].x===0||h[0].x===F||h[0].y===0||h[0].y===F;return o-ee<o/4&&(o=ee+o/4),yb(h,oe?o/2*k%o:(q/2+2*S)*E*k%o,o,j,d,ee,oe,!1,F)}function yb(h,o,d,p,_,S,E,k,F){const j=S/2,q=pb(h);let ee=0,oe=o-d,ue=[];for(let he=0;he<h.length-1;he++){const be=h[he],Me=h[he+1],ze=be.dist(Me),st=Me.angleTo(be);for(;oe+d<ee+ze;){oe+=d;const He=(oe-ee)/ze,ae=ei.number(be.x,Me.x,He),we=ei.number(be.y,Me.y,He);if(ae>=0&&ae<F&&we>=0&&we<F&&oe-j>=0&&oe+j<=q){const Ze=new La(ae,we,st,he);Ze._round(),p&&!fb(h,Ze,S,p,_)||ue.push(Ze)}}ee+=ze}return k||ue.length||E||(ue=yb(h,ee/2,d,p,_,S,E,!0,F)),ue}yn("Anchor",La);const Io=Pa;function c0(h,o,d,p){const _=[],S=h.image,E=S.pixelRatio,k=S.paddedRect.w-2*Io,F=S.paddedRect.h-2*Io;let j={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const q=S.stretchX||[[0,k]],ee=S.stretchY||[[0,F]],oe=(Ut,wn)=>Ut+wn[1]-wn[0],ue=q.reduce(oe,0),he=ee.reduce(oe,0),be=k-ue,Me=F-he;let ze=0,st=ue,He=0,ae=he,we=0,Ze=be,It=0,Qt=Me;if(S.content&&p){const Ut=S.content,wn=Ut[2]-Ut[0],Vn=Ut[3]-Ut[1];(S.textFitWidth||S.textFitHeight)&&(j=X_(h)),ze=Wh(q,0,Ut[0]),He=Wh(ee,0,Ut[1]),st=Wh(q,Ut[0],Ut[2]),ae=Wh(ee,Ut[1],Ut[3]),we=Ut[0]-ze,It=Ut[1]-He,Ze=wn-st,Qt=Vn-ae}const kt=j.x1,Ft=j.y1,sn=j.x2-kt,Jt=j.y2-Ft,ln=(Ut,wn,Vn,zn)=>{const Tn=Ei(Ut.stretch-ze,st,sn,kt),mr=um(Ut.fixed-we,Ze,Ut.stretch,ue),Ti=Ei(wn.stretch-He,ae,Jt,Ft),us=um(wn.fixed-It,Qt,wn.stretch,he),Ns=Ei(Vn.stretch-ze,st,sn,kt),Vs=um(Vn.fixed-we,Ze,Vn.stretch,ue),Ra=Ei(zn.stretch-He,ae,Jt,Ft),Ls=um(zn.fixed-It,Qt,zn.stretch,he),bi=new P(Tn,Ti),_s=new P(Ns,Ti),Ds=new P(Ns,Ra),bs=new P(Tn,Ra),na=new P(mr/E,us/E),Mo=new P(Vs/E,Ls/E),xs=o*Math.PI/180;if(xs){const As=Math.sin(xs),ws=Math.cos(xs),es=[ws,-As,As,ws];bi._matMult(es),_s._matMult(es),bs._matMult(es),Ds._matMult(es)}const Oa=Ut.stretch+Ut.fixed,cs=wn.stretch+wn.fixed;return{tl:bi,tr:_s,bl:bs,br:Ds,tex:{x:S.paddedRect.x+Io+Oa,y:S.paddedRect.y+Io+cs,w:Vn.stretch+Vn.fixed-Oa,h:zn.stretch+zn.fixed-cs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:na,pixelOffsetBR:Mo,minFontScaleX:Ze/E/sn,minFontScaleY:Qt/E/Jt,isSDF:d}};if(p&&(S.stretchX||S.stretchY)){const Ut=Bi(q,be,ue),wn=Bi(ee,Me,he);for(let Vn=0;Vn<Ut.length-1;Vn++){const zn=Ut[Vn],Tn=Ut[Vn+1];for(let mr=0;mr<wn.length-1;mr++)_.push(ln(zn,wn[mr],Tn,wn[mr+1]))}}else _.push(ln({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:F+1}));return _}function Wh(h,o,d){let p=0;for(const _ of h)p+=Math.max(o,Math.min(d,_[1]))-Math.max(o,Math.min(d,_[0]));return p}function Bi(h,o,d){const p=[{fixed:-1,stretch:0}];for(const[_,S]of h){const E=p[p.length-1];p.push({fixed:_-E.stretch,stretch:E.stretch}),p.push({fixed:_-E.stretch,stretch:E.stretch+(S-_)})}return p.push({fixed:o+Io,stretch:d}),p}function Ei(h,o,d,p){return h/o*d+p}function um(h,o,d,p){return h-o*d/p}class Bg{constructor(o,d,p,_,S,E,k,F,j,q){var ee;if(this.boxStartIndex=o.length,j){let oe=E.top,ue=E.bottom;const he=E.collisionPadding;he&&(oe-=he[1],ue+=he[3]);let be=ue-oe;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{const oe=!((ee=E.image)===null||ee===void 0)&&ee.content&&(E.image.textFitWidth||E.image.textFitHeight)?X_(E):{x1:E.left,y1:E.top,x2:E.right,y2:E.bottom};oe.y1=oe.y1*k-F[0],oe.y2=oe.y2*k+F[2],oe.x1=oe.x1*k-F[3],oe.x2=oe.x2*k+F[1];const ue=E.collisionPadding;if(ue&&(oe.x1-=ue[0]*k,oe.y1-=ue[1]*k,oe.x2+=ue[2]*k,oe.y2+=ue[3]*k),q){const he=new P(oe.x1,oe.y1),be=new P(oe.x2,oe.y1),Me=new P(oe.x1,oe.y2),ze=new P(oe.x2,oe.y2),st=q*Math.PI/180;he._rotate(st),be._rotate(st),Me._rotate(st),ze._rotate(st),oe.x1=Math.min(he.x,be.x,Me.x,ze.x),oe.x2=Math.max(he.x,be.x,Me.x,ze.x),oe.y1=Math.min(he.y,be.y,Me.y,ze.y),oe.y2=Math.max(he.y,be.y,Me.y,ze.y)}o.emplaceBack(d.x,d.y,oe.x1,oe.y1,oe.x2,oe.y2,p,_,S)}this.boxEndIndex=o.length}}class w2{constructor(o=[],d=(p,_)=>p<_?-1:p>_?1:0){if(this.data=o,this.length=this.data.length,this.compare=d,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:d,compare:p}=this,_=d[o];for(;o>0;){const S=o-1>>1,E=d[S];if(p(_,E)>=0)break;d[o]=E,o=S}d[o]=_}_down(o){const{data:d,compare:p}=this,_=this.length>>1,S=d[o];for(;o<_;){let E=1+(o<<1);const k=E+1;if(k<this.length&&p(d[k],d[E])<0&&(E=k),p(d[E],S)>=0)break;d[o]=d[E],o=E}d[o]=S}}function C2(h,o=1,d=!1){let p=1/0,_=1/0,S=-1/0,E=-1/0;const k=h[0];for(let ue=0;ue<k.length;ue++){const he=k[ue];(!ue||he.x<p)&&(p=he.x),(!ue||he.y<_)&&(_=he.y),(!ue||he.x>S)&&(S=he.x),(!ue||he.y>E)&&(E=he.y)}const F=Math.min(S-p,E-_);let j=F/2;const q=new w2([],I2);if(F===0)return new P(p,_);for(let ue=p;ue<S;ue+=F)for(let he=_;he<E;he+=F)q.push(new ff(ue+j,he+j,j,h));let ee=function(ue){let he=0,be=0,Me=0;const ze=ue[0];for(let st=0,He=ze.length,ae=He-1;st<He;ae=st++){const we=ze[st],Ze=ze[ae],It=we.x*Ze.y-Ze.x*we.y;be+=(we.x+Ze.x)*It,Me+=(we.y+Ze.y)*It,he+=3*It}return new ff(be/he,Me/he,0,ue)}(h),oe=q.length;for(;q.length;){const ue=q.pop();(ue.d>ee.d||!ee.d)&&(ee=ue,d&&console.log("found best %d after %d probes",Math.round(1e4*ue.d)/1e4,oe)),ue.max-ee.d<=o||(j=ue.h/2,q.push(new ff(ue.p.x-j,ue.p.y-j,j,h)),q.push(new ff(ue.p.x+j,ue.p.y-j,j,h)),q.push(new ff(ue.p.x-j,ue.p.y+j,j,h)),q.push(new ff(ue.p.x+j,ue.p.y+j,j,h)),oe+=4)}return d&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${ee.d}`)),ee.p}function I2(h,o){return o.max-h.max}function ff(h,o,d,p){this.p=new P(h,o),this.h=d,this.d=function(_,S){let E=!1,k=1/0;for(let F=0;F<S.length;F++){const j=S[F];for(let q=0,ee=j.length,oe=ee-1;q<ee;oe=q++){const ue=j[q],he=j[oe];ue.y>_.y!=he.y>_.y&&_.x<(he.x-ue.x)*(_.y-ue.y)/(he.y-ue.y)+ue.x&&(E=!E),k=Math.min(k,Hp(_,ue,he))}}return(E?1:-1)*Math.sqrt(k)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var Bs;l.aB=void 0,(Bs=l.aB||(l.aB={}))[Bs.center=1]="center",Bs[Bs.left=2]="left",Bs[Bs.right=3]="right",Bs[Bs.top=4]="top",Bs[Bs.bottom=5]="bottom",Bs[Bs["top-left"]=6]="top-left",Bs[Bs["top-right"]=7]="top-right",Bs[Bs["bottom-left"]=8]="bottom-left",Bs[Bs["bottom-right"]=9]="bottom-right";const Ju=7,qh=Number.POSITIVE_INFINITY;function Ng(h,o){return o[1]!==qh?function(d,p,_){let S=0,E=0;switch(p=Math.abs(p),_=Math.abs(_),d){case"top-right":case"top-left":case"top":E=_-Ju;break;case"bottom-right":case"bottom-left":case"bottom":E=-_+Ju}switch(d){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,E]}(h,o[0],o[1]):function(d,p){let _=0,S=0;p<0&&(p=0);const E=p/Math.SQRT2;switch(d){case"top-right":case"top-left":S=E-Ju;break;case"bottom-right":case"bottom-left":S=-E+Ju;break;case"bottom":S=-p+Ju;break;case"top":S=p-Ju}switch(d){case"top-right":case"bottom-right":_=-E;break;case"top-left":case"bottom-left":_=E;break;case"left":_=p;break;case"right":_=-p}return[_,S]}(h,o[0])}function vb(h,o,d){var p;const _=h.layout,S=(p=_.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(o,{},d);if(S){const k=S.values,F=[];for(let j=0;j<k.length;j+=2){const q=F[j]=k[j],ee=k[j+1].map(oe=>oe*os);q.startsWith("top")?ee[1]-=Ju:q.startsWith("bottom")&&(ee[1]+=Ju),F[j+1]=ee}return new Es(F)}const E=_.get("text-variable-anchor");if(E){let k;k=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(o,{},d)*os,qh]:_.get("text-offset").evaluate(o,{},d).map(j=>j*os);const F=[];for(const j of E)F.push(j,Ng(j,k));return new Es(F)}return null}function Vg(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jg(h,o,d,p,_,S,E,k,F,j,q,ee){let oe=S.textMaxSize.evaluate(o,{});oe===void 0&&(oe=E);const ue=h.layers[0].layout,he=ue.get("icon-offset").evaluate(o,{},q),be=Kh(d.horizontal),Me=E/24,ze=h.tilePixelRatio*Me,st=h.tilePixelRatio*oe/24,He=h.tilePixelRatio*k,ae=h.tilePixelRatio*ue.get("symbol-spacing"),we=ue.get("text-padding")*h.tilePixelRatio,Ze=function(Vn,zn,Tn,mr=1){const Ti=Vn.get("icon-padding").evaluate(zn,{},Tn),us=Ti&&Ti.values;return[us[0]*mr,us[1]*mr,us[2]*mr,us[3]*mr]}(ue,o,q,h.tilePixelRatio),It=ue.get("text-max-angle")/180*Math.PI,Qt=ue.get("text-rotation-alignment")!=="viewport"&&ue.get("symbol-placement")!=="point",kt=ue.get("icon-rotation-alignment")==="map"&&ue.get("symbol-placement")!=="point",Ft=ue.get("symbol-placement"),sn=ae/2,Jt=ue.get("icon-text-fit");let ln;p&&Jt!=="none"&&(h.allowVerticalPlacement&&d.vertical&&(ln=rm(p,d.vertical,Jt,ue.get("icon-text-fit-padding"),he,Me)),be&&(p=rm(p,be,Jt,ue.get("icon-text-fit-padding"),he,Me)));const Ut=q?ee.line.getGranularityForZoomLevel(q.z):1,wn=(Vn,zn)=>{zn.x<0||zn.x>=tt||zn.y<0||zn.y>=tt||function(Tn,mr,Ti,us,Ns,Vs,Ra,Ls,bi,_s,Ds,bs,na,Mo,xs,Oa,cs,As,ws,es,di,El,gf,Tl,S2){const yf=Tn.addToLineVertexArray(mr,Ti);let Yh,vf,_f,bf,Ab=0,wb=0,Cb=0,Ib=0,m0=-1,g0=-1;const ec={};let Mb=Ps("");if(Tn.allowVerticalPlacement&&us.vertical){const ia=Ls.layout.get("text-rotate").evaluate(di,{},Tl)+90;_f=new Bg(bi,mr,_s,Ds,bs,us.vertical,na,Mo,xs,ia),Ra&&(bf=new Bg(bi,mr,_s,Ds,bs,Ra,cs,As,xs,ia))}if(Ns){const ia=Ls.layout.get("icon-rotate").evaluate(di,{}),za=Ls.layout.get("icon-text-fit")!=="none",Xh=c0(Ns,ia,gf,za),So=Ra?c0(Ra,ia,gf,za):void 0;vf=new Bg(bi,mr,_s,Ds,bs,Ns,cs,As,!1,ia),Ab=4*Xh.length;const Qh=Tn.iconSizeData;let lu=null;Qh.kind==="source"?(lu=[ou*Ls.layout.get("icon-size").evaluate(di,{})],lu[0]>Wc&&Ie(`${Tn.layerIds[0]}: Value for "icon-size" is >= ${im}. Reduce your "icon-size".`)):Qh.kind==="composite"&&(lu=[ou*El.compositeIconSizes[0].evaluate(di,{},Tl),ou*El.compositeIconSizes[1].evaluate(di,{},Tl)],(lu[0]>Wc||lu[1]>Wc)&&Ie(`${Tn.layerIds[0]}: Value for "icon-size" is >= ${im}. Reduce your "icon-size".`)),Tn.addSymbols(Tn.icon,Xh,lu,es,ws,di,l.al.none,mr,yf.lineStartIndex,yf.lineLength,-1,Tl),m0=Tn.icon.placedSymbolArray.length-1,So&&(wb=4*So.length,Tn.addSymbols(Tn.icon,So,lu,es,ws,di,l.al.vertical,mr,yf.lineStartIndex,yf.lineLength,-1,Tl),g0=Tn.icon.placedSymbolArray.length-1)}const $g=Object.keys(us.horizontal);for(const ia of $g){const za=us.horizontal[ia];if(!Yh){Mb=Ps(za.text);const So=Ls.layout.get("text-rotate").evaluate(di,{},Tl);Yh=new Bg(bi,mr,_s,Ds,bs,za,na,Mo,xs,So)}const Xh=za.positionedLines.length===1;if(Cb+=Ja(Tn,mr,za,Vs,Ls,xs,di,Oa,yf,us.vertical?l.al.horizontal:l.al.horizontalOnly,Xh?$g:[ia],ec,m0,El,Tl),Xh)break}us.vertical&&(Ib+=Ja(Tn,mr,us.vertical,Vs,Ls,xs,di,Oa,yf,l.al.vertical,["vertical"],ec,g0,El,Tl));const Sb=Yh?Yh.boxStartIndex:Tn.collisionBoxArray.length,Eb=Yh?Yh.boxEndIndex:Tn.collisionBoxArray.length,E2=_f?_f.boxStartIndex:Tn.collisionBoxArray.length,T2=_f?_f.boxEndIndex:Tn.collisionBoxArray.length,P2=vf?vf.boxStartIndex:Tn.collisionBoxArray.length,y0=vf?vf.boxEndIndex:Tn.collisionBoxArray.length,k2=bf?bf.boxStartIndex:Tn.collisionBoxArray.length,L2=bf?bf.boxEndIndex:Tn.collisionBoxArray.length;let Pl=-1;const ra=(ia,za)=>ia&&ia.circleDiameter?Math.max(ia.circleDiameter,za):za;Pl=ra(Yh,Pl),Pl=ra(_f,Pl),Pl=ra(vf,Pl),Pl=ra(bf,Pl);const Hg=Pl>-1?1:0;Hg&&(Pl*=S2/os),Tn.glyphOffsetArray.length>=df.MAX_GLYPHS&&Ie("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),di.sortKey!==void 0&&Tn.addToSortKeyRanges(Tn.symbolInstances.length,di.sortKey);const D2=vb(Ls,di,Tl),[R2,O2]=function(ia,za){const Xh=ia.length,So=za==null?void 0:za.values;if((So==null?void 0:So.length)>0)for(let Qh=0;Qh<So.length;Qh+=2){const lu=So[Qh+1];ia.emplaceBack(l.aB[So[Qh]],lu[0],lu[1])}return[Xh,ia.length]}(Tn.textAnchorOffsets,D2);Tn.symbolInstances.emplaceBack(mr.x,mr.y,ec.right>=0?ec.right:-1,ec.center>=0?ec.center:-1,ec.left>=0?ec.left:-1,ec.vertical||-1,m0,g0,Mb,Sb,Eb,E2,T2,P2,y0,k2,L2,_s,Cb,Ib,Ab,wb,Hg,0,na,Pl,R2,O2)}(h,zn,Vn,d,p,_,ln,h.layers[0],h.collisionBoxArray,o.index,o.sourceLayerIndex,h.index,ze,[we,we,we,we],Qt,F,He,Ze,kt,he,o,S,j,q,E)};if(Ft==="line")for(const Vn of db(o.geometry,0,0,tt,tt)){const zn=Xu(Vn,Ut),Tn=u0(zn,ae,It,d.vertical||be,p,24,st,h.overscaling,tt);for(const mr of Tn)be&&M2(h,be.text,sn,mr)||wn(zn,mr)}else if(Ft==="line-center"){for(const Vn of o.geometry)if(Vn.length>1){const zn=Xu(Vn,Ut),Tn=A2(zn,It,d.vertical||be,p,24,st);Tn&&wn(zn,Tn)}}else if(o.type==="Polygon")for(const Vn of Rd(o.geometry,0)){const zn=C2(Vn,16);wn(Xu(Vn[0],Ut,!0),new La(zn.x,zn.y,0))}else if(o.type==="LineString")for(const Vn of o.geometry){const zn=Xu(Vn,Ut);wn(zn,new La(zn[0].x,zn[0].y,0))}else if(o.type==="Point")for(const Vn of o.geometry)for(const zn of Vn)wn([zn],new La(zn.x,zn.y,0))}function Ja(h,o,d,p,_,S,E,k,F,j,q,ee,oe,ue,he){const be=function(st,He,ae,we,Ze,It,Qt,kt){const Ft=we.layout.get("text-rotate").evaluate(It,{})*Math.PI/180,sn=[];for(const Jt of He.positionedLines)for(const ln of Jt.positionedGlyphs){if(!ln.rect)continue;const Ut=ln.rect||{};let wn=o2+1,Vn=!0,zn=1,Tn=0;const mr=(Ze||kt)&&ln.vertical,Ti=ln.metrics.advance*ln.scale/2;if(kt&&He.verticalizable&&(Tn=Jt.lineOffset/2-(ln.imageName?-(os-ln.metrics.width*ln.scale)/2:(ln.scale-1)*os)),ln.imageName){const As=Qt[ln.imageName];Vn=As.sdf,zn=As.pixelRatio,wn=Pa/zn}const us=Ze?[ln.x+Ti,ln.y]:[0,0];let Ns=Ze?[0,0]:[ln.x+Ti+ae[0],ln.y+ae[1]-Tn],Vs=[0,0];mr&&(Vs=Ns,Ns=[0,0]);const Ra=ln.metrics.isDoubleResolution?2:1,Ls=(ln.metrics.left-wn)*ln.scale-Ti+Ns[0],bi=(-ln.metrics.top-wn)*ln.scale+Ns[1],_s=Ls+Ut.w/Ra*ln.scale/zn,Ds=bi+Ut.h/Ra*ln.scale/zn,bs=new P(Ls,bi),na=new P(_s,bi),Mo=new P(Ls,Ds),xs=new P(_s,Ds);if(mr){const As=new P(-Ti,Ti-Lg),ws=-Math.PI/2,es=os/2-Ti,di=new P(5-Lg-es,-(ln.imageName?es:0)),El=new P(...Vs);bs._rotateAround(ws,As)._add(di)._add(El),na._rotateAround(ws,As)._add(di)._add(El),Mo._rotateAround(ws,As)._add(di)._add(El),xs._rotateAround(ws,As)._add(di)._add(El)}if(Ft){const As=Math.sin(Ft),ws=Math.cos(Ft),es=[ws,-As,As,ws];bs._matMult(es),na._matMult(es),Mo._matMult(es),xs._matMult(es)}const Oa=new P(0,0),cs=new P(0,0);sn.push({tl:bs,tr:na,bl:Mo,br:xs,tex:Ut,writingMode:He.writingMode,glyphOffset:us,sectionIndex:ln.sectionIndex,isSDF:Vn,pixelOffsetTL:Oa,pixelOffsetBR:cs,minFontScaleX:0,minFontScaleY:0})}return sn}(0,d,k,_,S,E,p,h.allowVerticalPlacement),Me=h.textSizeData;let ze=null;Me.kind==="source"?(ze=[ou*_.layout.get("text-size").evaluate(E,{})],ze[0]>Wc&&Ie(`${h.layerIds[0]}: Value for "text-size" is >= ${im}. Reduce your "text-size".`)):Me.kind==="composite"&&(ze=[ou*ue.compositeTextSizes[0].evaluate(E,{},he),ou*ue.compositeTextSizes[1].evaluate(E,{},he)],(ze[0]>Wc||ze[1]>Wc)&&Ie(`${h.layerIds[0]}: Value for "text-size" is >= ${im}. Reduce your "text-size".`)),h.addSymbols(h.text,be,ze,k,S,E,j,o,F.lineStartIndex,F.lineLength,oe,he);for(const st of q)ee[st]=h.text.placedSymbolArray.length-1;return 4*be.length}function Kh(h){for(const o in h)return h[o];return null}function M2(h,o,d,p){const _=h.compareText;if(o in _){const S=_[o];for(let E=S.length-1;E>=0;E--)if(p.dist(S[E])<d)return!0}else _[o]=[];return _[o].push(p),!1}const _b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class h0{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,p]=new Uint8Array(o,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const S=_b[15&p];if(!S)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(o,2,1),[k]=new Uint32Array(o,4,1);return new h0(k,E,S,o)}constructor(o,d=64,p=Float64Array,_){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=p,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const S=_b.indexOf(this.ArrayType),E=2*o*this.ArrayType.BYTES_PER_ELEMENT,k=o*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-k%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+k+F,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+E+k+F),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+k+F,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=o)}add(o,d){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=o,this.coords[this._pos++]=d,p}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return d0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,d,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:E,nodeSize:k}=this,F=[0,S.length-1,0],j=[];for(;F.length;){const q=F.pop()||0,ee=F.pop()||0,oe=F.pop()||0;if(ee-oe<=k){for(let Me=oe;Me<=ee;Me++){const ze=E[2*Me],st=E[2*Me+1];ze>=o&&ze<=p&&st>=d&&st<=_&&j.push(S[Me])}continue}const ue=oe+ee>>1,he=E[2*ue],be=E[2*ue+1];he>=o&&he<=p&&be>=d&&be<=_&&j.push(S[ue]),(q===0?o<=he:d<=be)&&(F.push(oe),F.push(ue-1),F.push(1-q)),(q===0?p>=he:_>=be)&&(F.push(ue+1),F.push(ee),F.push(1-q))}return j}within(o,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:E}=this,k=[0,_.length-1,0],F=[],j=p*p;for(;k.length;){const q=k.pop()||0,ee=k.pop()||0,oe=k.pop()||0;if(ee-oe<=E){for(let Me=oe;Me<=ee;Me++)hr(S[2*Me],S[2*Me+1],o,d)<=j&&F.push(_[Me]);continue}const ue=oe+ee>>1,he=S[2*ue],be=S[2*ue+1];hr(he,be,o,d)<=j&&F.push(_[ue]),(q===0?o-p<=he:d-p<=be)&&(k.push(oe),k.push(ue-1),k.push(1-q)),(q===0?o+p>=he:d+p>=be)&&(k.push(ue+1),k.push(ee),k.push(1-q))}return F}}function d0(h,o,d,p,_,S){if(_-p<=d)return;const E=p+_>>1;bb(h,o,E,p,_,S),d0(h,o,d,p,E-1,1-S),d0(h,o,d,E+1,_,1-S)}function bb(h,o,d,p,_,S){for(;_>p;){if(_-p>600){const j=_-p+1,q=d-p+1,ee=Math.log(j),oe=.5*Math.exp(2*ee/3),ue=.5*Math.sqrt(ee*oe*(j-oe)/j)*(q-j/2<0?-1:1);bb(h,o,d,Math.max(p,Math.floor(d-q*oe/j+ue)),Math.min(_,Math.floor(d+(j-q)*oe/j+ue)),S)}const E=o[2*d+S];let k=p,F=_;for(pf(h,o,p,d),o[2*_+S]>E&&pf(h,o,p,_);k<F;){for(pf(h,o,k,F),k++,F--;o[2*k+S]<E;)k++;for(;o[2*F+S]>E;)F--}o[2*p+S]===E?pf(h,o,p,F):(F++,pf(h,o,F,_)),F<=d&&(p=F+1),d<=F&&(_=F-1)}}function pf(h,o,d,p){Sl(h,d,p),Sl(o,2*d,2*p),Sl(o,2*d+1,2*p+1)}function Sl(h,o,d){const p=h[o];h[o]=h[d],h[d]=p}function hr(h,o,d,p){const _=h-d,S=o-p;return _*_+S*S}var Ug;l.cm=void 0,(Ug=l.cm||(l.cm={})).create="create",Ug.load="load",Ug.fullLoad="fullLoad";let Da=null,mf=[];const f0=1e3/60,Xr="loadTime",p0="fullLoadTime",xb={mark(h){performance.mark(h)},frame(h){const o=h;Da!=null&&mf.push(o-Da),Da=o},clearMetrics(){Da=null,mf=[],performance.clearMeasures(Xr),performance.clearMeasures(p0);for(const h in l.cm)performance.clearMarks(l.cm[h])},getPerformanceMetrics(){performance.measure(Xr,l.cm.create,l.cm.load),performance.measure(p0,l.cm.create,l.cm.fullLoad);const h=performance.getEntriesByName(Xr)[0].duration,o=performance.getEntriesByName(p0)[0].duration,d=mf.length,p=1/(mf.reduce((S,E)=>S+E,0)/d/1e3),_=mf.filter(S=>S>f0).reduce((S,E)=>S+(E-f0)/f0,0);return{loadTime:h,fullLoadTime:o,fps:p,percentDroppedFrames:_/(d+_)*100,totalFrames:d}}};l.$=lm,l.A=te,l.B=ei,l.C=Yr,l.D=On,l.E=Se,l.F=Op,l.G=function(h){if(Oe==null){const o=h.navigator?h.navigator.userAgent:null;Oe=!!h.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Oe},l.H=class{constructor(h,o){this.target=h,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new b2(()=>this.process()),this.subscription=Ve(this.target,"message",d=>this.receive(d),!1),this.globalScope=Te(self)?h:window}registerMessageHandler(h,o){this.messageHandlers[h]=o}sendAsync(h,o){return new Promise((d,p)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=o?Ve(o.signal,"abort",()=>{S==null||S.unsubscribe(),delete this.resolveRejects[_];const F={id:_,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)},x2):null;this.resolveRejects[_]={resolve:F=>{S==null||S.unsubscribe(),d(F)},reject:F=>{S==null||S.unsubscribe(),p(F)}};const E=[],k=Object.assign(Object.assign({},h),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Bh(h.data,E)});this.target.postMessage(k,{transfer:E})})}receive(h){const o=h.data,d=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[d];const p=this.abortControllers[d];return delete this.abortControllers[d],void(p&&p.abort())}if(Te(self)||o.mustQueue)return this.tasks[d]=o,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,o)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),o=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(h,o)}processTask(h,o){return s(this,void 0,void 0,function*(){if(o.type==="<response>"){const _=this.resolveRejects[h];return delete this.resolveRejects[h],_?void(o.error?_.reject($u(o.error)):_.resolve($u(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=$u(o.data),p=new AbortController;this.abortControllers[h]=p;try{const _=yield this.messageHandlers[o.type](o.sourceMapId,d,p);this.completeTask(h,null,_)}catch(_){this.completeTask(h,_)}})}completeTask(h,o,d){const p=[];delete this.abortControllers[h];const _={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Bh(o):null,data:Bh(d,p)};this.target.postMessage(_,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=kg,l.J=mt,l.K=function(){var h=new te(16);return te!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},l.L=function(h,o,d){var p,_,S,E,k,F,j,q,ee,oe,ue,he,be=d[0],Me=d[1],ze=d[2];return o===h?(h[12]=o[0]*be+o[4]*Me+o[8]*ze+o[12],h[13]=o[1]*be+o[5]*Me+o[9]*ze+o[13],h[14]=o[2]*be+o[6]*Me+o[10]*ze+o[14],h[15]=o[3]*be+o[7]*Me+o[11]*ze+o[15]):(_=o[1],S=o[2],E=o[3],k=o[4],F=o[5],j=o[6],q=o[7],ee=o[8],oe=o[9],ue=o[10],he=o[11],h[0]=p=o[0],h[1]=_,h[2]=S,h[3]=E,h[4]=k,h[5]=F,h[6]=j,h[7]=q,h[8]=ee,h[9]=oe,h[10]=ue,h[11]=he,h[12]=p*be+k*Me+ee*ze+o[12],h[13]=_*be+F*Me+oe*ze+o[13],h[14]=S*be+j*Me+ue*ze+o[14],h[15]=E*be+q*Me+he*ze+o[15]),h},l.M=function(h,o,d){var p=d[0],_=d[1],S=d[2];return h[0]=o[0]*p,h[1]=o[1]*p,h[2]=o[2]*p,h[3]=o[3]*p,h[4]=o[4]*_,h[5]=o[5]*_,h[6]=o[6]*_,h[7]=o[7]*_,h[8]=o[8]*S,h[9]=o[9]*S,h[10]=o[10]*S,h[11]=o[11]*S,h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},l.N=function(h,o,d){var p=o[0],_=o[1],S=o[2],E=o[3],k=o[4],F=o[5],j=o[6],q=o[7],ee=o[8],oe=o[9],ue=o[10],he=o[11],be=o[12],Me=o[13],ze=o[14],st=o[15],He=d[0],ae=d[1],we=d[2],Ze=d[3];return h[0]=He*p+ae*k+we*ee+Ze*be,h[1]=He*_+ae*F+we*oe+Ze*Me,h[2]=He*S+ae*j+we*ue+Ze*ze,h[3]=He*E+ae*q+we*he+Ze*st,h[4]=(He=d[4])*p+(ae=d[5])*k+(we=d[6])*ee+(Ze=d[7])*be,h[5]=He*_+ae*F+we*oe+Ze*Me,h[6]=He*S+ae*j+we*ue+Ze*ze,h[7]=He*E+ae*q+we*he+Ze*st,h[8]=(He=d[8])*p+(ae=d[9])*k+(we=d[10])*ee+(Ze=d[11])*be,h[9]=He*_+ae*F+we*oe+Ze*Me,h[10]=He*S+ae*j+we*ue+Ze*ze,h[11]=He*E+ae*q+we*he+Ze*st,h[12]=(He=d[12])*p+(ae=d[13])*k+(we=d[14])*ee+(Ze=d[15])*be,h[13]=He*_+ae*F+we*oe+Ze*Me,h[14]=He*S+ae*j+we*ue+Ze*ze,h[15]=He*E+ae*q+we*he+Ze*st,h},l.O=function(h,o){const d={};for(let p=0;p<o.length;p++){const _=o[p];_ in h&&(d[_]=h[_])}return d},l.P=P,l.Q=Qu,l.R=as,l.S=ib,l.T=Yd,l.U=rb,l.V=B,l.W=U,l.X=Fe,l.Y=Co,l.Z=tt,l._=s,l.a=pn,l.a$=function(h,o,d){var p=Math.sin(d),_=Math.cos(d),S=o[4],E=o[5],k=o[6],F=o[7],j=o[8],q=o[9],ee=o[10],oe=o[11];return o!==h&&(h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[4]=S*_+j*p,h[5]=E*_+q*p,h[6]=k*_+ee*p,h[7]=F*_+oe*p,h[8]=j*_-S*p,h[9]=q*_-E*p,h[10]=ee*_-k*p,h[11]=oe*_-F*p,h},l.a0=25,l.a1=l0,l.a2=h=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(d=>{o.onloadstart=()=>{d(o)};for(const p of h){const _=window.document.createElement("source");Cn(p)||(o.crossOrigin="Anonymous"),_.src=p,o.appendChild(_)}})},l.a3=Vt,l.a4=function(){return ft++},l.a5=D,l.a6=df,l.a7=Lc,l.a8=wo,l.a9=qc,l.aA=function(h,o,d,p,_=!1){if(!d[0]&&!d[1])return[0,0];const S=_?p==="map"?-h.bearingInRadians:0:p==="viewport"?h.bearingInRadians:0;if(S){const E=Math.sin(S),k=Math.cos(S);d=[d[0]*k-d[1]*E,d[0]*E+d[1]*k]}return[_?d[0]:ut(o,d[0],h.zoom),_?d[1]:ut(o,d[1],h.zoom)]},l.aC=e0,l.aD=Vg,l.aE=Jv,l.aF=h0,l.aG=Ii,l.aH=Qp,l.aI=$e,l.aJ=Wn,l.aK=on,l.aL=en,l.aM=Mt,l.aN=ab,l.aO=function(h,o,d){return h[0]=o[0]*d,h[1]=o[1]*d,h[2]=o[2]*d,h},l.aP=function(h,o,d){return h[0]=o[0]+d[0],h[1]=o[1]+d[1],h[2]=o[2]+d[2],h},l.aQ=function(h){var o=new te(3);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o},l.aR=function(h,o,d){return h[0]=o[0]*d[0],h[1]=o[1]*d[1],h[2]=o[2]*d[2],h[3]=o[3]*d[3],h},l.aS=function(h,o,d){return h[0]=o[0]-d[0],h[1]=o[1]-d[1],h[2]=o[2]-d[2],h},l.aT=function(h,o){var d=o[0],p=o[1],_=o[2],S=d*d+p*p+_*_;return S>0&&(S=1/Math.sqrt(S)),h[0]=o[0]*S,h[1]=o[1]*S,h[2]=o[2]*S,h},l.aU=function(h,o,d){var p=o[0],_=o[1],S=o[2],E=d[0],k=d[1],F=d[2];return h[0]=_*F-S*k,h[1]=S*E-p*F,h[2]=p*k-_*E,h},l.aV=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]},l.aW=lb,l.aX=xa,l.aY=function(h,o,d,p,_){var S,E=1/Math.tan(o/2);return h[0]=E/d,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=E,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,_!=null&&_!==1/0?(h[10]=(_+p)*(S=1/(p-_)),h[14]=2*_*p*S):(h[10]=-1,h[14]=-2*p),h},l.aZ=function(h){var o=new te(16);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o},l.a_=function(h,o,d){var p=Math.sin(d),_=Math.cos(d),S=o[0],E=o[1],k=o[2],F=o[3],j=o[4],q=o[5],ee=o[6],oe=o[7];return o!==h&&(h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=S*_+j*p,h[1]=E*_+q*p,h[2]=k*_+ee*p,h[3]=F*_+oe*p,h[4]=j*_-S*p,h[5]=q*_-E*p,h[6]=ee*_-k*p,h[7]=oe*_-F*p,h},l.aa=function(h){const o={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,p,_,S)=>{const E=_||S;return o[p]=!E||E.toLowerCase(),""}),o["max-age"]){const d=parseInt(o["max-age"],10);isNaN(d)?delete o["max-age"]:o["max-age"]=d}return o},l.ab=function(h){return h*Math.PI/180},l.ac=function(h){return Math.pow(2,h)},l.ad=W,l.ae=St,l.af=85.051129,l.ag=sb,l.ah=function(h){return Math.log(h)/Math.LN2},l.ai=function(h){var o=h[0],d=h[1];return o*o+d*d},l.aj=function(h,o){const d=[];for(const p in h)p in o||d.push(p);return d},l.ak=function(h,o){let d=0,p=0;if(h.kind==="constant")p=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:_,minZoom:S,maxZoom:E}=h,k=_?St(Xs.interpolationFactor(_,o,S,E),0,1):0;h.kind==="camera"?p=ei.number(h.minSize,h.maxSize,k):d=k}return{uSizeT:d,uSize:p}},l.am=function(h,{uSize:o,uSizeT:d},{lowerSize:p,upperSize:_}){return h.kind==="source"?p/ou:h.kind==="composite"?ei.number(p/ou,_/ou,d):o},l.an=function(h,o){var d=o[0],p=o[1],_=o[2],S=o[3],E=o[4],k=o[5],F=o[6],j=o[7],q=o[8],ee=o[9],oe=o[10],ue=o[11],he=o[12],be=o[13],Me=o[14],ze=o[15],st=d*k-p*E,He=d*F-_*E,ae=d*j-S*E,we=p*F-_*k,Ze=p*j-S*k,It=_*j-S*F,Qt=q*be-ee*he,kt=q*Me-oe*he,Ft=q*ze-ue*he,sn=ee*Me-oe*be,Jt=ee*ze-ue*be,ln=oe*ze-ue*Me,Ut=st*ln-He*Jt+ae*sn+we*Ft-Ze*kt+It*Qt;return Ut?(h[0]=(k*ln-F*Jt+j*sn)*(Ut=1/Ut),h[1]=(_*Jt-p*ln-S*sn)*Ut,h[2]=(be*It-Me*Ze+ze*we)*Ut,h[3]=(oe*Ze-ee*It-ue*we)*Ut,h[4]=(F*Ft-E*ln-j*kt)*Ut,h[5]=(d*ln-_*Ft+S*kt)*Ut,h[6]=(Me*ae-he*It-ze*He)*Ut,h[7]=(q*It-oe*ae+ue*He)*Ut,h[8]=(E*Jt-k*Ft+j*Qt)*Ut,h[9]=(p*Ft-d*Jt-S*Qt)*Ut,h[10]=(he*Ze-be*ae+ze*st)*Ut,h[11]=(ee*ae-q*Ze-ue*st)*Ut,h[12]=(k*kt-E*sn-F*Qt)*Ut,h[13]=(d*sn-p*kt+_*Qt)*Ut,h[14]=(be*He-he*we-Me*st)*Ut,h[15]=(q*we-ee*He+oe*st)*Ut,h):null},l.ao=Ue,l.ap=function(h){return Math.hypot(h[0],h[1])},l.aq=function(h){return h[0]=0,h[1]=0,h},l.ar=function(h,o,d){return h[0]=o[0]*d,h[1]=o[1]*d,h},l.as=t0,l.at=K,l.au=function(h,o,d,p){const _=o.y-h.y,S=o.x-h.x,E=p.y-d.y,k=p.x-d.x,F=E*S-k*_;if(F===0)return null;const j=(k*(h.y-d.y)-E*(h.x-d.x))/F;return new P(h.x+j*S,h.y+j*_)},l.av=db,l.aw=Up,l.ax=function(h){let o=1/0,d=1/0,p=-1/0,_=-1/0;for(const S of h)o=Math.min(o,S.x),d=Math.min(d,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return[o,d,p,_]},l.ay=os,l.az=ut,l.b=ye,l.b$=function(h,o){var d=h[0],p=h[1],_=h[2],S=h[3],E=h[4],k=h[5],F=h[6],j=h[7],q=h[8],ee=h[9],oe=h[10],ue=h[11],he=h[12],be=h[13],Me=h[14],ze=h[15],st=o[0],He=o[1],ae=o[2],we=o[3],Ze=o[4],It=o[5],Qt=o[6],kt=o[7],Ft=o[8],sn=o[9],Jt=o[10],ln=o[11],Ut=o[12],wn=o[13],Vn=o[14],zn=o[15];return Math.abs(d-st)<=Z*Math.max(1,Math.abs(d),Math.abs(st))&&Math.abs(p-He)<=Z*Math.max(1,Math.abs(p),Math.abs(He))&&Math.abs(_-ae)<=Z*Math.max(1,Math.abs(_),Math.abs(ae))&&Math.abs(S-we)<=Z*Math.max(1,Math.abs(S),Math.abs(we))&&Math.abs(E-Ze)<=Z*Math.max(1,Math.abs(E),Math.abs(Ze))&&Math.abs(k-It)<=Z*Math.max(1,Math.abs(k),Math.abs(It))&&Math.abs(F-Qt)<=Z*Math.max(1,Math.abs(F),Math.abs(Qt))&&Math.abs(j-kt)<=Z*Math.max(1,Math.abs(j),Math.abs(kt))&&Math.abs(q-Ft)<=Z*Math.max(1,Math.abs(q),Math.abs(Ft))&&Math.abs(ee-sn)<=Z*Math.max(1,Math.abs(ee),Math.abs(sn))&&Math.abs(oe-Jt)<=Z*Math.max(1,Math.abs(oe),Math.abs(Jt))&&Math.abs(ue-ln)<=Z*Math.max(1,Math.abs(ue),Math.abs(ln))&&Math.abs(he-Ut)<=Z*Math.max(1,Math.abs(he),Math.abs(Ut))&&Math.abs(be-wn)<=Z*Math.max(1,Math.abs(be),Math.abs(wn))&&Math.abs(Me-Vn)<=Z*Math.max(1,Math.abs(Me),Math.abs(Vn))&&Math.abs(ze-zn)<=Z*Math.max(1,Math.abs(ze),Math.abs(zn))},l.b0=function(){const h=new Float32Array(16);return W(h),h},l.b1=function(){const h=new Float64Array(16);return W(h),h},l.b2=function(){return new Float64Array(16)},l.b3=function(h,o,d){const p=new Float64Array(4);return function(_,S,E,k){var F=.5*Math.PI/180;S*=F,E*=F,k*=F;var j=Math.sin(S),q=Math.cos(S),ee=Math.sin(E),oe=Math.cos(E),ue=Math.sin(k),he=Math.cos(k);_[0]=j*oe*he-q*ee*ue,_[1]=q*ee*he+j*oe*ue,_[2]=q*oe*ue-j*ee*he,_[3]=q*oe*he+j*ee*ue}(p,h,o-90,d),p},l.b4=function(h,o,d,p){var _,S,E,k,F,j=o[0],q=o[1],ee=o[2],oe=o[3],ue=d[0],he=d[1],be=d[2],Me=d[3];return(S=j*ue+q*he+ee*be+oe*Me)<0&&(S=-S,ue=-ue,he=-he,be=-be,Me=-Me),1-S>Z?(_=Math.acos(S),E=Math.sin(_),k=Math.sin((1-p)*_)/E,F=Math.sin(p*_)/E):(k=1-p,F=p),h[0]=k*j+F*ue,h[1]=k*q+F*he,h[2]=k*ee+F*be,h[3]=k*oe+F*Me,h},l.b5=function(h){const o=new Float64Array(9);var d,p,_,S,E,k,F,j,q,ee,oe,ue,he,be,Me,ze,st,He;ee=(_=(p=h)[0])*(F=_+_),oe=(S=p[1])*F,he=(E=p[2])*F,be=E*(j=S+S),ze=(k=p[3])*F,st=k*j,He=k*(q=E+E),(d=o)[0]=1-(ue=S*j)-(Me=E*q),d[3]=oe-He,d[6]=he+st,d[1]=oe+He,d[4]=1-ee-Me,d[7]=be-ze,d[2]=he-st,d[5]=be+ze,d[8]=1-ee-ue;const ae=Mt(-Math.asin(St(o[2],-1,1)));let we,Ze;return Math.hypot(o[5],o[8])<.001?(we=0,Ze=-Mt(Math.atan2(o[3],o[4]))):(we=Mt(o[5]===0&&o[8]===0?0:Math.atan2(o[5],o[8])),Ze=Mt(o[1]===0&&o[0]===0?0:Math.atan2(o[1],o[0]))),{roll:we,pitch:ae+90,bearing:Ze}},l.b6=function(h,o){return h.roll==o.roll&&h.pitch==o.pitch&&h.bearing==o.bearing},l.b7=er,l.b8=qu,l.b9=of,l.bA=function(h){if(h.type==="custom")return new Fg(h);switch(h.type){case"background":return new v2(h);case"circle":return new kw(h);case"fill":return new M_(h);case"fill-extrusion":return new rl(h);case"heatmap":return new kv(h);case"hillshade":return new Xn(h);case"line":return new Qw(h);case"raster":return new zg(h);case"symbol":return new am(h)}},l.bB=Lt,l.bC=function(h,o){if(!h)return[{command:"setStyle",args:[o]}];let d=[];try{if(!We(h.version,o.version))return[{command:"setStyle",args:[o]}];We(h.center,o.center)||d.push({command:"setCenter",args:[o.center]}),We(h.centerAltitude,o.centerAltitude)||d.push({command:"setCenterAltitude",args:[o.centerAltitude]}),We(h.zoom,o.zoom)||d.push({command:"setZoom",args:[o.zoom]}),We(h.bearing,o.bearing)||d.push({command:"setBearing",args:[o.bearing]}),We(h.pitch,o.pitch)||d.push({command:"setPitch",args:[o.pitch]}),We(h.roll,o.roll)||d.push({command:"setRoll",args:[o.roll]}),We(h.sprite,o.sprite)||d.push({command:"setSprite",args:[o.sprite]}),We(h.glyphs,o.glyphs)||d.push({command:"setGlyphs",args:[o.glyphs]}),We(h.transition,o.transition)||d.push({command:"setTransition",args:[o.transition]}),We(h.light,o.light)||d.push({command:"setLight",args:[o.light]}),We(h.terrain,o.terrain)||d.push({command:"setTerrain",args:[o.terrain]}),We(h.sky,o.sky)||d.push({command:"setSky",args:[o.sky]}),We(h.projection,o.projection)||d.push({command:"setProjection",args:[o.projection]});const p={},_=[];(function(E,k,F,j){let q;for(q in k=k||{},E=E||{})Object.prototype.hasOwnProperty.call(E,q)&&(Object.prototype.hasOwnProperty.call(k,q)||yt(q,F,j));for(q in k)Object.prototype.hasOwnProperty.call(k,q)&&(Object.prototype.hasOwnProperty.call(E,q)?We(E[q],k[q])||(E[q].type==="geojson"&&k[q].type==="geojson"&&mn(E,k,q)?Et(F,{command:"setGeoJSONSourceData",args:[q,k[q].data]}):Yt(q,k,F,j)):Ot(q,k,F))})(h.sources,o.sources,_,p);const S=[];h.layers&&h.layers.forEach(E=>{"source"in E&&p[E.source]?d.push({command:"removeLayer",args:[E.id]}):S.push(E)}),d=d.concat(_),function(E,k,F){k=k||[];const j=(E=E||[]).map(Un),q=k.map(Un),ee=E.reduce(Jn,{}),oe=k.reduce(Jn,{}),ue=j.slice(),he=Object.create(null);let be,Me,ze,st,He;for(let ae=0,we=0;ae<j.length;ae++)be=j[ae],Object.prototype.hasOwnProperty.call(oe,be)?we++:(Et(F,{command:"removeLayer",args:[be]}),ue.splice(ue.indexOf(be,we),1));for(let ae=0,we=0;ae<q.length;ae++)be=q[q.length-1-ae],ue[ue.length-1-ae]!==be&&(Object.prototype.hasOwnProperty.call(ee,be)?(Et(F,{command:"removeLayer",args:[be]}),ue.splice(ue.lastIndexOf(be,ue.length-we),1)):we++,st=ue[ue.length-ae],Et(F,{command:"addLayer",args:[oe[be],st]}),ue.splice(ue.length-ae,0,be),he[be]=!0);for(let ae=0;ae<q.length;ae++)if(be=q[ae],Me=ee[be],ze=oe[be],!he[be]&&!We(Me,ze))if(We(Me.source,ze.source)&&We(Me["source-layer"],ze["source-layer"])&&We(Me.type,ze.type)){for(He in gn(Me.layout,ze.layout,F,be,null,"setLayoutProperty"),gn(Me.paint,ze.paint,F,be,null,"setPaintProperty"),We(Me.filter,ze.filter)||Et(F,{command:"setFilter",args:[be,ze.filter]}),We(Me.minzoom,ze.minzoom)&&We(Me.maxzoom,ze.maxzoom)||Et(F,{command:"setLayerZoomRange",args:[be,ze.minzoom,ze.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?gn(Me[He],ze[He],F,be,He.slice(6),"setPaintProperty"):We(Me[He],ze[He])||Et(F,{command:"setLayerProperty",args:[be,He,ze[He]]}));for(He in ze)Object.prototype.hasOwnProperty.call(ze,He)&&!Object.prototype.hasOwnProperty.call(Me,He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&(He.indexOf("paint.")===0?gn(Me[He],ze[He],F,be,He.slice(6),"setPaintProperty"):We(Me[He],ze[He])||Et(F,{command:"setLayerProperty",args:[be,He,ze[He]]}))}else Et(F,{command:"removeLayer",args:[be]}),st=ue[ue.lastIndexOf(be)+1],Et(F,{command:"addLayer",args:[ze,st]})}(S,o.layers,d)}catch(p){console.warn("Unable to compute style diff:",p),d=[{command:"setStyle",args:[o]}]}return d},l.bD=function(h){const o=[],d=h.id;return d===void 0&&o.push({message:`layers.${d}: missing required property "id"`}),h.render===void 0&&o.push({message:`layers.${d}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&o.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),o},l.bE=function h(o,d){if(Array.isArray(o)){if(!Array.isArray(d)||o.length!==d.length)return!1;for(let p=0;p<o.length;p++)if(!h(o[p],d[p]))return!1;return!0}if(typeof o=="object"&&o!==null&&d!==null){if(typeof d!="object"||Object.keys(o).length!==Object.keys(d).length)return!1;for(const p in o)if(!h(o[p],d[p]))return!1;return!0}return o===d},l.bF=ot,l.bG=Pt,l.bH=class extends ks{constructor(h,o){super(h,o),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},l.bI=_a,l.bJ=class extends ks{constructor(h,o){super(h,o),this.current=wl}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let o=1;o<16;o++)if(h[o]!==this.current[o]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},l.bK=va,l.bL=class extends ks{constructor(h,o){super(h,o),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},l.bM=class extends ks{constructor(h,o){super(h,o),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},l.bN=Y,l.bO=function(h,o){var d=Math.sin(o),p=Math.cos(o);return h[0]=p,h[1]=d,h[2]=0,h[3]=-d,h[4]=p,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},l.bP=function(h,o,d){var p=o[0],_=o[1],S=o[2];return h[0]=p*d[0]+_*d[3]+S*d[6],h[1]=p*d[1]+_*d[4]+S*d[7],h[2]=p*d[2]+_*d[5]+S*d[8],h},l.bQ=function(h,o,d,p,_,S,E){var k=1/(o-d),F=1/(p-_),j=1/(S-E);return h[0]=-2*k,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*F,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*j,h[11]=0,h[12]=(o+d)*k,h[13]=(_+p)*F,h[14]=(E+S)*j,h[15]=1,h},l.bR=class extends _o{},l.bS=n2,l.bT=class extends ef{},l.bU=qp,l.bV=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},l.bW=Cg,l.bX=function(h,o,d){var p=o[0],_=o[1],S=o[2],E=d[3]*p+d[7]*_+d[11]*S+d[15];return h[0]=(d[0]*p+d[4]*_+d[8]*S+d[12])/(E=E||1),h[1]=(d[1]*p+d[5]*_+d[9]*S+d[13])/E,h[2]=(d[2]*p+d[6]*_+d[10]*S+d[14])/E,h},l.bY=class extends Ya{},l.bZ=class extends v{},l.b_=function(h,o){return h[0]===o[0]&&h[1]===o[1]&&h[2]===o[2]&&h[3]===o[3]&&h[4]===o[4]&&h[5]===o[5]&&h[6]===o[6]&&h[7]===o[7]&&h[8]===o[8]&&h[9]===o[9]&&h[10]===o[10]&&h[11]===o[11]&&h[12]===o[12]&&h[13]===o[13]&&h[14]===o[14]&&h[15]===o[15]},l.ba=Zh,l.bb=Gh,l.bc=Ge,l.bd=Ne,l.be=Ks,l.bf=function(h,o,d,p,_){return Ge(p,_,St((h-o)/(d-o),0,1))},l.bg=Tt,l.bh=function(){return new Float64Array(3)},l.bi=function(h,o,d,p){return h[0]=o[0]+d[0]*p,h[1]=o[1]+d[1]*p,h[2]=o[2]+d[2]*p,h},l.bj=ce,l.bk=function(){return new Float64Array(4)},l.bl=function(h,o,d,p){var _=[],S=[];return _[0]=o[0]-d[0],_[1]=o[1]-d[1],_[2]=o[2]-d[2],S[0]=_[0]*Math.cos(p)-_[1]*Math.sin(p),S[1]=_[0]*Math.sin(p)+_[1]*Math.cos(p),S[2]=_[2],h[0]=S[0]+d[0],h[1]=S[1]+d[1],h[2]=S[2]+d[2],h},l.bm=function(h,o,d,p){var _=[],S=[];return _[0]=o[0]-d[0],_[1]=o[1]-d[1],_[2]=o[2]-d[2],S[0]=_[0],S[1]=_[1]*Math.cos(p)-_[2]*Math.sin(p),S[2]=_[1]*Math.sin(p)+_[2]*Math.cos(p),h[0]=S[0]+d[0],h[1]=S[1]+d[1],h[2]=S[2]+d[2],h},l.bn=function(h,o,d,p){var _=[],S=[];return _[0]=o[0]-d[0],_[1]=o[1]-d[1],_[2]=o[2]-d[2],S[0]=_[2]*Math.sin(p)+_[0]*Math.cos(p),S[1]=_[1],S[2]=_[2]*Math.cos(p)-_[0]*Math.sin(p),h[0]=S[0]+d[0],h[1]=S[1]+d[1],h[2]=S[2]+d[2],h},l.bo=ne,l.bp=function(h,o,d){var p=Math.sin(d),_=Math.cos(d),S=o[0],E=o[1],k=o[2],F=o[3],j=o[8],q=o[9],ee=o[10],oe=o[11];return o!==h&&(h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=S*_-j*p,h[1]=E*_-q*p,h[2]=k*_-ee*p,h[3]=F*_-oe*p,h[8]=S*p+j*_,h[9]=E*p+q*_,h[10]=k*p+ee*_,h[11]=F*p+oe*_,h},l.bq=function(h,o){const d=Tt(h,360),p=Tt(o,360),_=p-d,S=p>d?_-360:_+360;return Math.abs(_)<Math.abs(S)?_:S},l.br=function(h){return h[0]=0,h[1]=0,h[2]=0,h},l.bs=function(h,o,d,p){const _=Math.sqrt(h*h+o*o),S=Math.sqrt(d*d+p*p);h/=_,o/=_,d/=S,p/=S;const E=Math.acos(h*d+o*p);return-o*d+h*p>0?E:-E},l.bt=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]+h[3]},l.bu=om,l.bv=function(h,o){const d=Tt(h,2*Math.PI),p=Tt(o,2*Math.PI);return Math.min(Math.abs(d-p),Math.abs(d-p+2*Math.PI),Math.abs(d-p-2*Math.PI))},l.bw=function(){const h={},o=ve.$version;for(const d in ve.$root){const p=ve.$root[d];if(p.required){let _=null;_=d==="version"?o:p.type==="array"?[]:{},_!=null&&(h[d]=_)}}return h},l.bx=Nh,l.by=jt,l.bz=function(h){h=h.slice();const o=Object.create(null);for(let d=0;d<h.length;d++)o[h[d].id]=h[d];for(let d=0;d<h.length;d++)"ref"in h[d]&&(h[d]=dt(h[d],o[h[d].ref]));return h},l.c=dn,l.c0=function(h,o){return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},l.c1=h=>h.type==="symbol",l.c2=h=>h.type==="circle",l.c3=h=>h.type==="heatmap",l.c4=h=>h.type==="line",l.c5=h=>h.type==="fill",l.c6=h=>h.type==="fill-extrusion",l.c7=h=>h.type==="hillshade",l.c8=h=>h.type==="raster",l.c9=h=>h.type==="background",l.cA=Jp,l.cB=Yv,l.cC=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},l.cD=function(h,o,d,p,_){return s(this,void 0,void 0,function*(){if(U())try{return yield Fe(h,o,d,p,_)}catch{}return function(S,E,k,F,j){const q=S.width,ee=S.height;rt&&at||(rt=new OffscreenCanvas(q,ee),at=rt.getContext("2d",{willReadFrequently:!0})),rt.width=q,rt.height=ee,at.drawImage(S,0,0,q,ee);const oe=at.getImageData(E,k,F,j);return at.clearRect(0,0,q,ee),oe.data}(h,o,d,p,_)})},l.cE=ub,l.cF=f,l.cG=b,l.cH=Uv,l.cI=Kv,l.cJ=kc,l.cK=Jo,l.ca=h=>h.type==="custom",l.cb=Dt,l.cc=function(h,o,d){const p=Be(o.x-d.x,o.y-d.y),_=Be(h.x-d.x,h.y-d.y);var S,E;return Mt(Math.atan2(p[0]*_[1]-p[1]*_[0],(S=p)[0]*(E=_)[0]+S[1]*E[1]))},l.cd=Bt,l.ce=function(h,o){return At[o]&&(h instanceof MouseEvent||h instanceof WheelEvent)},l.cf=function(h,o){return wt[o]&&"touches"in h},l.cg=function(h){return wt[h]||At[h]},l.ch=function(h,o,d){var p=o[0],_=o[1];return h[0]=d[0]*p+d[4]*_+d[12],h[1]=d[1]*p+d[5]*_+d[13],h},l.ci=function(h,o){const{x:d,y:p}=lm.fromLngLat(o);return!(h<0||h>25||p<0||p>=1||d<0||d>=1)},l.cj=function(h,o){return h[0]=o[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=o[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=o[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},l.ck=class extends Bc{},l.cl=xb,l.cn=function(h){return h.message===Gt},l.co=_t,l.cp=function(h,o){pn.REGISTERED_PROTOCOLS[h]=o},l.cq=function(h){delete pn.REGISTERED_PROTOCOLS[h]},l.cr=function(h,o){const d={};for(let _=0;_<h.length;_++){const S=o&&o[h[_].id]||Gd(h[_]);o&&(o[h[_].id]=S);let E=d[S];E||(E=d[S]=[]),E.push(h[_])}const p=[];for(const _ in d)p.push(d[_]);return p},l.cs=yn,l.ct=cb,l.cu=lr,l.cv=$_,l.cw=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=tt/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const o=h.bucket.layers[0],d=o.layout,p=o._unevaluatedLayout._values,_={layoutIconSize:p["icon-size"].possiblyEvaluate(new Yr(h.bucket.zoom+1),h.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Yr(h.bucket.zoom+1),h.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Yr(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:q}=h.bucket.textSizeData;_.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Yr(j),h.canonical),p["text-size"].possiblyEvaluate(new Yr(q),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:q}=h.bucket.iconSizeData;_.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Yr(j),h.canonical),p["icon-size"].possiblyEvaluate(new Yr(q),h.canonical)]}const S=d.get("text-line-height")*os,E=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",k=d.get("text-keep-upright"),F=d.get("text-size");for(const j of h.bucket.features){const q=d.get("text-font").evaluate(j,{},h.canonical).join(","),ee=F.evaluate(j,{},h.canonical),oe=_.layoutTextSize.evaluate(j,{},h.canonical),ue=_.layoutIconSize.evaluate(j,{},h.canonical),he={horizontal:{},vertical:void 0},be=j.text;let Me,ze=[0,0];if(be){const ae=be.toString(),we=d.get("text-letter-spacing").evaluate(j,{},h.canonical)*os,Ze=fg(ae)?we:0,It=d.get("text-anchor").evaluate(j,{},h.canonical),Qt=vb(o,j,h.canonical);if(!Qt){const Jt=d.get("text-radial-offset").evaluate(j,{},h.canonical);ze=Jt?Ng(It,[Jt*os,qh]):d.get("text-offset").evaluate(j,{},h.canonical).map(ln=>ln*os)}let kt=E?"center":d.get("text-justify").evaluate(j,{},h.canonical);const Ft=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(j,{},h.canonical)*os:1/0,sn=()=>{h.bucket.allowVerticalPlacement&&Zd(ae)&&(he.vertical=Dg(be,h.glyphMap,h.glyphPositions,h.imagePositions,q,Ft,S,It,"left",Ze,ze,l.al.vertical,!0,oe,ee))};if(!E&&Qt){const Jt=new Set;if(kt==="auto")for(let Ut=0;Ut<Qt.values.length;Ut+=2)Jt.add(Vg(Qt.values[Ut]));else Jt.add(kt);let ln=!1;for(const Ut of Jt)if(!he.horizontal[Ut])if(ln)he.horizontal[Ut]=he.horizontal[0];else{const wn=Dg(be,h.glyphMap,h.glyphPositions,h.imagePositions,q,Ft,S,"center",Ut,Ze,ze,l.al.horizontal,!1,oe,ee);wn&&(he.horizontal[Ut]=wn,ln=wn.positionedLines.length===1)}sn()}else{kt==="auto"&&(kt=Vg(It));const Jt=Dg(be,h.glyphMap,h.glyphPositions,h.imagePositions,q,Ft,S,It,kt,Ze,ze,l.al.horizontal,!1,oe,ee);Jt&&(he.horizontal[kt]=Jt),sn(),Zd(ae)&&E&&k&&(he.vertical=Dg(be,h.glyphMap,h.glyphPositions,h.imagePositions,q,Ft,S,It,kt,Ze,ze,l.al.vertical,!1,oe,ee))}}let st=!1;if(j.icon&&j.icon.name){const ae=h.imageMap[j.icon.name];ae&&(Me=p2(h.imagePositions[j.icon.name],d.get("icon-offset").evaluate(j,{},h.canonical),d.get("icon-anchor").evaluate(j,{},h.canonical)),st=!!ae.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=st:h.bucket.sdfIcons!==st&&Ie("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ae.pixelRatio!==h.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const He=Kh(he.horizontal)||he.vertical;h.bucket.iconsInText=!!He&&He.iconsInText,(He||Me)&&jg(h.bucket,j,he,Me,h.imageMap,_,oe,ue,ze,st,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},l.cx=Gv,l.cy=Sg,l.cz=Hv,l.d=Cn,l.e=pt,l.f=h=>s(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(o)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=ct,l.h=h=>new Promise((o,d)=>{const p=new Image;p.onload=()=>{o(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=pe})},p.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(h)],{type:"image/png"});p.src=h.byteLength?URL.createObjectURL(_):pe}),l.i=Te,l.j=(h,o)=>qt(pt(h,{type:"json"}),o),l.k=Ae,l.l=ge,l.m=qt,l.n=(h,o)=>qt(pt(h,{type:"arrayBuffer"}),o),l.o=function(h){return new Yv(h).readFields(i2,[])},l.p=U_,l.q=Wp,l.r=ea,l.s=Ve,l.t=hg,l.u=tr,l.v=ve,l.w=Ie,l.x=dg,l.y=Xo,l.z=function([h,o,d]){return o+=90,o*=Math.PI/180,d*=Math.PI/180,{x:h*Math.cos(o)*Math.sin(d),y:h*Math.sin(o)*Math.sin(d),z:h*Math.cos(d)}}}),a("worker",["./shared"],function(l){class s{constructor(de){this.keyCache={},de&&this.replace(de)}replace(de){this._layerConfigs={},this._layers={},this.update(de,[])}update(de,ge){for(const Se of de){this._layerConfigs[Se.id]=Se;const ve=this._layers[Se.id]=l.bA(Se);ve._featureFilter=l.a7(ve.filter),this.keyCache[Se.id]&&delete this.keyCache[Se.id]}for(const Se of ge)delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se];this.familiesBySource={};const Ae=l.cr(Object.values(this._layerConfigs),this.keyCache);for(const Se of Ae){const ve=Se.map(yt=>this._layers[yt.id]),Qe=ve[0];if(Qe.visibility==="none")continue;const dt=Qe.source||"";let We=this.familiesBySource[dt];We||(We=this.familiesBySource[dt]={});const Et=Qe.sourceLayer||"_geojsonTileLayer";let Ot=We[Et];Ot||(Ot=We[Et]=[]),Ot.push(ve)}}}class f{constructor(de){const ge={},Ae=[];for(const dt in de){const We=de[dt],Et=ge[dt]={};for(const Ot in We){const yt=We[+Ot];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const Yt={x:0,y:0,w:yt.bitmap.width+2,h:yt.bitmap.height+2};Ae.push(Yt),Et[Ot]={rect:Yt,metrics:yt.metrics}}}const{w:Se,h:ve}=l.p(Ae),Qe=new l.q({width:Se||1,height:ve||1});for(const dt in de){const We=de[dt];for(const Et in We){const Ot=We[+Et];if(!Ot||Ot.bitmap.width===0||Ot.bitmap.height===0)continue;const yt=ge[dt][Et].rect;l.q.copy(Ot.bitmap,Qe,{x:0,y:0},{x:yt.x+1,y:yt.y+1},Ot.bitmap)}}this.image=Qe,this.positions=ge}}l.cs("GlyphAtlas",f);class y{constructor(de){this.tileID=new l.Y(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId,this.inFlightDependencies=[]}parse(de,ge,Ae,Se,ve){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=de,this.collisionBoxArray=new l.a5;const Qe=new l.ct(Object.keys(de.layers).sort()),dt=new l.cu(this.tileID,this.promoteId);dt.bucketLayerIDs=[];const We={},Et={featureIndex:dt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ae,subdivisionGranularity:ve},Ot=ge.familiesBySource[this.source];for(const Ht in Ot){const bn=de.layers[Ht];if(!bn)continue;bn.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ht}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Bn=Qe.encode(Ht),Ws=[];for(let Os=0;Os<bn.length;Os++){const oi=bn.feature(Os),Yn=dt.getId(oi,Ht);Ws.push({feature:oi,id:Yn,index:Os,sourceLayerIndex:Bn})}for(const Os of Ot[Ht]){const oi=Os[0];oi.source!==this.source&&l.w(`layer.source = ${oi.source} does not equal this.source = ${this.source}`),oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(x(Os,this.zoom,Ae),(We[oi.id]=oi.createBucket({index:dt.bucketLayerIDs.length,layers:Os,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Bn,sourceID:this.source})).populate(Ws,Et,this.tileID.canonical),dt.bucketLayerIDs.push(Os.map(Yn=>Yn.id)))}}const yt=l.bF(Et.glyphDependencies,Ht=>Object.keys(Ht).map(Number));this.inFlightDependencies.forEach(Ht=>Ht==null?void 0:Ht.abort()),this.inFlightDependencies=[];let Yt=Promise.resolve({});if(Object.keys(yt).length){const Ht=new AbortController;this.inFlightDependencies.push(Ht),Yt=Se.sendAsync({type:"GG",data:{stacks:yt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ht)}const mn=Object.keys(Et.iconDependencies);let gn=Promise.resolve({});if(mn.length){const Ht=new AbortController;this.inFlightDependencies.push(Ht),gn=Se.sendAsync({type:"GI",data:{icons:mn,source:this.source,tileID:this.tileID,type:"icons"}},Ht)}const Un=Object.keys(Et.patternDependencies);let Jn=Promise.resolve({});if(Un.length){const Ht=new AbortController;this.inFlightDependencies.push(Ht),Jn=Se.sendAsync({type:"GI",data:{icons:Un,source:this.source,tileID:this.tileID,type:"patterns"}},Ht)}const[Vt,$n,Ar]=yield Promise.all([Yt,gn,Jn]),Ur=new f(Vt),wr=new l.cv($n,Ar);for(const Ht in We){const bn=We[Ht];bn instanceof l.a6?(x(bn.layers,this.zoom,Ae),l.cw({bucket:bn,glyphMap:Vt,glyphPositions:Ur.positions,imageMap:$n,imagePositions:wr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Et.subdivisionGranularity})):bn.hasPattern&&(bn instanceof l.cx||bn instanceof l.cy||bn instanceof l.cz)&&(x(bn.layers,this.zoom,Ae),bn.addFeatures(Et,this.tileID.canonical,wr.patternPositions))}return this.status="done",{buckets:Object.values(We).filter(Ht=>!Ht.isEmpty()),featureIndex:dt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ur.image,imageAtlas:wr,glyphMap:this.returnDependencies?Vt:null,iconMap:this.returnDependencies?$n:null,glyphPositions:this.returnDependencies?Ur.positions:null}})}}function x(Xe,de,ge){const Ae=new l.C(de);for(const Se of Xe)Se.recalculate(Ae,ge)}class b{constructor(de,ge,Ae){this.actor=de,this.layerIndex=ge,this.availableImages=Ae,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(de,ge){return l._(this,void 0,void 0,function*(){const Ae=yield l.n(de.request,ge);try{return{vectorTile:new l.cA.VectorTile(new l.cB(Ae.data)),rawData:Ae.data,cacheControl:Ae.cacheControl,expires:Ae.expires}}catch(Se){const ve=new Uint8Array(Ae.data);let Qe=`Unable to parse the tile at ${de.request.url}, `;throw Qe+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Se.message}`,new Error(Qe)}})}loadTile(de){return l._(this,void 0,void 0,function*(){const ge=de.uid,Ae=!!(de&&de.request&&de.request.collectResourceTiming)&&new l.cC(de.request),Se=new y(de);this.loading[ge]=Se;const ve=new AbortController;Se.abort=ve;try{const Qe=yield this.loadVectorTile(de,ve);if(delete this.loading[ge],!Qe)return null;const dt=Qe.rawData,We={};Qe.expires&&(We.expires=Qe.expires),Qe.cacheControl&&(We.cacheControl=Qe.cacheControl);const Et={};if(Ae){const yt=Ae.finish();yt&&(Et.resourceTiming=JSON.parse(JSON.stringify(yt)))}Se.vectorTile=Qe.vectorTile;const Ot=Se.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);this.loaded[ge]=Se,this.fetching[ge]={rawTileData:dt,cacheControl:We,resourceTiming:Et};try{const yt=yield Ot;return l.e({rawTileData:dt.slice(0)},yt,We,Et)}finally{delete this.fetching[ge]}}catch(Qe){throw delete this.loading[ge],Se.status="done",this.loaded[ge]=Se,Qe}})}reloadTile(de){return l._(this,void 0,void 0,function*(){const ge=de.uid;if(!this.loaded||!this.loaded[ge])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Ae=this.loaded[ge];if(Ae.showCollisionBoxes=de.showCollisionBoxes,Ae.status==="parsing"){const Se=yield Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);let ve;if(this.fetching[ge]){const{rawTileData:Qe,cacheControl:dt,resourceTiming:We}=this.fetching[ge];delete this.fetching[ge],ve=l.e({rawTileData:Qe.slice(0)},Se,dt,We)}else ve=Se;return ve}if(Ae.status==="done"&&Ae.vectorTile)return Ae.parse(Ae.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity)})}abortTile(de){return l._(this,void 0,void 0,function*(){const ge=this.loading,Ae=de.uid;ge&&ge[Ae]&&ge[Ae].abort&&(ge[Ae].abort.abort(),delete ge[Ae])})}removeTile(de){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[de.uid]&&delete this.loaded[de.uid]})}}class M{constructor(){this.loaded={}}loadTile(de){return l._(this,void 0,void 0,function*(){const{uid:ge,encoding:Ae,rawImageData:Se,redFactor:ve,greenFactor:Qe,blueFactor:dt,baseShift:We}=de,Et=Se.width+2,Ot=Se.height+2,yt=l.b(Se)?new l.R({width:Et,height:Ot},yield l.cD(Se,-1,-1,Et,Ot)):Se,Yt=new l.cE(ge,yt,Ae,ve,Qe,dt,We);return this.loaded=this.loaded||{},this.loaded[ge]=Yt,Yt})}removeTile(de){const ge=this.loaded,Ae=de.uid;ge&&ge[Ae]&&delete ge[Ae]}}var A,P,L=function(){if(P)return A;function Xe(ge,Ae){if(ge.length!==0){de(ge[0],Ae);for(var Se=1;Se<ge.length;Se++)de(ge[Se],!Ae)}}function de(ge,Ae){for(var Se=0,ve=0,Qe=0,dt=ge.length,We=dt-1;Qe<dt;We=Qe++){var Et=(ge[Qe][0]-ge[We][0])*(ge[We][1]+ge[Qe][1]),Ot=Se+Et;ve+=Math.abs(Se)>=Math.abs(Et)?Se-Ot+Et:Et-Ot+Se,Se=Ot}Se+ve>=0!=!!Ae&&ge.reverse()}return P=1,A=function ge(Ae,Se){var ve,Qe=Ae&&Ae.type;if(Qe==="FeatureCollection")for(ve=0;ve<Ae.features.length;ve++)ge(Ae.features[ve],Se);else if(Qe==="GeometryCollection")for(ve=0;ve<Ae.geometries.length;ve++)ge(Ae.geometries[ve],Se);else if(Qe==="Feature")ge(Ae.geometry,Se);else if(Qe==="Polygon")Xe(Ae.coordinates,Se);else if(Qe==="MultiPolygon")for(ve=0;ve<Ae.coordinates.length;ve++)Xe(Ae.coordinates[ve],Se);return Ae}}(),O=l.cF(L);const V=l.cA.VectorTileFeature.prototype.toGeoJSON;class z{constructor(de){this._feature=de,this.extent=l.Z,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))}loadGeometry(){if(this._feature.type===1){const de=[];for(const ge of this._feature.geometry)de.push([new l.P(ge[0],ge[1])]);return de}{const de=[];for(const ge of this._feature.geometry){const Ae=[];for(const Se of ge)Ae.push(new l.P(Se[0],Se[1]));de.push(Ae)}return de}}toGeoJSON(de,ge,Ae){return V.call(this,de,ge,Ae)}}class B{constructor(de){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=de.length,this._features=de}feature(de){return new z(this._features[de])}}var U,Z,te,Y={exports:{}},W=function(){if(te)return Y.exports;te=1;var Xe=l.cI(),de=function(){if(Z)return U;Z=1;var Ot=l.cG(),yt=l.cH().VectorTileFeature;function Yt(gn,Un){this.options=Un||{},this.features=gn,this.length=gn.length}function mn(gn,Un){this.id=typeof gn.id=="number"?gn.id:void 0,this.type=gn.type,this.rawGeometry=gn.type===1?[gn.geometry]:gn.geometry,this.properties=gn.tags,this.extent=Un||4096}return U=Yt,Yt.prototype.feature=function(gn){return new mn(this.features[gn],this.options.extent)},mn.prototype.loadGeometry=function(){var gn=this.rawGeometry;this.geometry=[];for(var Un=0;Un<gn.length;Un++){for(var Jn=gn[Un],Vt=[],$n=0;$n<Jn.length;$n++)Vt.push(new Ot(Jn[$n][0],Jn[$n][1]));this.geometry.push(Vt)}return this.geometry},mn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var gn=this.geometry,Un=1/0,Jn=-1/0,Vt=1/0,$n=-1/0,Ar=0;Ar<gn.length;Ar++)for(var Ur=gn[Ar],wr=0;wr<Ur.length;wr++){var Ht=Ur[wr];Un=Math.min(Un,Ht.x),Jn=Math.max(Jn,Ht.x),Vt=Math.min(Vt,Ht.y),$n=Math.max($n,Ht.y)}return[Un,Vt,Jn,$n]},mn.prototype.toGeoJSON=yt.prototype.toGeoJSON,U}();function ge(Ot){var yt=new Xe;return function(Yt,mn){for(var gn in Yt.layers)mn.writeMessage(3,Ae,Yt.layers[gn])}(Ot,yt),yt.finish()}function Ae(Ot,yt){var Yt;yt.writeVarintField(15,Ot.version||1),yt.writeStringField(1,Ot.name||""),yt.writeVarintField(5,Ot.extent||4096);var mn={keys:[],values:[],keycache:{},valuecache:{}};for(Yt=0;Yt<Ot.length;Yt++)mn.feature=Ot.feature(Yt),yt.writeMessage(2,Se,mn);var gn=mn.keys;for(Yt=0;Yt<gn.length;Yt++)yt.writeStringField(3,gn[Yt]);var Un=mn.values;for(Yt=0;Yt<Un.length;Yt++)yt.writeMessage(4,Et,Un[Yt])}function Se(Ot,yt){var Yt=Ot.feature;Yt.id!==void 0&&yt.writeVarintField(1,Yt.id),yt.writeMessage(2,ve,Ot),yt.writeVarintField(3,Yt.type),yt.writeMessage(4,We,Yt)}function ve(Ot,yt){var Yt=Ot.feature,mn=Ot.keys,gn=Ot.values,Un=Ot.keycache,Jn=Ot.valuecache;for(var Vt in Yt.properties){var $n=Yt.properties[Vt],Ar=Un[Vt];if($n!==null){Ar===void 0&&(mn.push(Vt),Un[Vt]=Ar=mn.length-1),yt.writeVarint(Ar);var Ur=typeof $n;Ur!=="string"&&Ur!=="boolean"&&Ur!=="number"&&($n=JSON.stringify($n));var wr=Ur+":"+$n,Ht=Jn[wr];Ht===void 0&&(gn.push($n),Jn[wr]=Ht=gn.length-1),yt.writeVarint(Ht)}}}function Qe(Ot,yt){return(yt<<3)+(7&Ot)}function dt(Ot){return Ot<<1^Ot>>31}function We(Ot,yt){for(var Yt=Ot.loadGeometry(),mn=Ot.type,gn=0,Un=0,Jn=Yt.length,Vt=0;Vt<Jn;Vt++){var $n=Yt[Vt],Ar=1;mn===1&&(Ar=$n.length),yt.writeVarint(Qe(1,Ar));for(var Ur=mn===3?$n.length-1:$n.length,wr=0;wr<Ur;wr++){wr===1&&mn!==1&&yt.writeVarint(Qe(2,Ur-1));var Ht=$n[wr].x-gn,bn=$n[wr].y-Un;yt.writeVarint(dt(Ht)),yt.writeVarint(dt(bn)),gn+=Ht,Un+=bn}mn===3&&yt.writeVarint(Qe(7,1))}}function Et(Ot,yt){var Yt=typeof Ot;Yt==="string"?yt.writeStringField(1,Ot):Yt==="boolean"?yt.writeBooleanField(7,Ot):Yt==="number"&&(Ot%1!=0?yt.writeDoubleField(3,Ot):Ot<0?yt.writeSVarintField(6,Ot):yt.writeVarintField(5,Ot))}return Y.exports=ge,Y.exports.fromVectorTileJs=ge,Y.exports.fromGeojsonVt=function(Ot,yt){yt=yt||{};var Yt={};for(var mn in Ot)Yt[mn]=new de(Ot[mn].features,yt),Yt[mn].name=mn,Yt[mn].version=yt.version,Yt[mn].extent=yt.extent;return ge({layers:Yt})},Y.exports.GeoJSONWrapper=de,Y.exports}(),H=l.cF(W);const ne={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xe=>Xe},le=Math.fround||(Q=new Float32Array(1),Xe=>(Q[0]=+Xe,Q[0]));var Q;const ce=3,K=5,Le=6;class Ue{constructor(de){this.options=Object.assign(Object.create(ne),de),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(de){const{log:ge,minZoom:Ae,maxZoom:Se}=this.options;ge&&console.time("total time");const ve=`prepare ${de.length} points`;ge&&console.time(ve),this.points=de;const Qe=[];for(let We=0;We<de.length;We++){const Et=de[We];if(!Et.geometry)continue;const[Ot,yt]=Et.geometry.coordinates,Yt=le(ut(Ot)),mn=le(Tt(yt));Qe.push(Yt,mn,1/0,We,-1,1),this.options.reduce&&Qe.push(0)}let dt=this.trees[Se+1]=this._createTree(Qe);ge&&console.timeEnd(ve);for(let We=Se;We>=Ae;We--){const Et=+Date.now();dt=this.trees[We]=this._createTree(this._cluster(dt,We)),ge&&console.log("z%d: %d clusters in %dms",We,dt.numItems,+Date.now()-Et)}return ge&&console.timeEnd("total time"),this}getClusters(de,ge){let Ae=((de[0]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,de[1]));let ve=de[2]===180?180:((de[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,de[3]));if(de[2]-de[0]>=360)Ae=-180,ve=180;else if(Ae>ve){const yt=this.getClusters([Ae,Se,180,Qe],ge),Yt=this.getClusters([-180,Se,ve,Qe],ge);return yt.concat(Yt)}const dt=this.trees[this._limitZoom(ge)],We=dt.range(ut(Ae),Tt(Qe),ut(ve),Tt(Se)),Et=dt.data,Ot=[];for(const yt of We){const Yt=this.stride*yt;Ot.push(Et[Yt+K]>1?Be(Et,Yt,this.clusterProps):this.points[Et[Yt+ce]])}return Ot}getChildren(de){const ge=this._getOriginId(de),Ae=this._getOriginZoom(de),Se="No cluster with the specified id.",ve=this.trees[Ae];if(!ve)throw new Error(Se);const Qe=ve.data;if(ge*this.stride>=Qe.length)throw new Error(Se);const dt=this.options.radius/(this.options.extent*Math.pow(2,Ae-1)),We=ve.within(Qe[ge*this.stride],Qe[ge*this.stride+1],dt),Et=[];for(const Ot of We){const yt=Ot*this.stride;Qe[yt+4]===de&&Et.push(Qe[yt+K]>1?Be(Qe,yt,this.clusterProps):this.points[Qe[yt+ce]])}if(Et.length===0)throw new Error(Se);return Et}getLeaves(de,ge,Ae){const Se=[];return this._appendLeaves(Se,de,ge=ge||10,Ae=Ae||0,0),Se}getTile(de,ge,Ae){const Se=this.trees[this._limitZoom(de)],ve=Math.pow(2,de),{extent:Qe,radius:dt}=this.options,We=dt/Qe,Et=(Ae-We)/ve,Ot=(Ae+1+We)/ve,yt={features:[]};return this._addTileFeatures(Se.range((ge-We)/ve,Et,(ge+1+We)/ve,Ot),Se.data,ge,Ae,ve,yt),ge===0&&this._addTileFeatures(Se.range(1-We/ve,Et,1,Ot),Se.data,ve,Ae,ve,yt),ge===ve-1&&this._addTileFeatures(Se.range(0,Et,We/ve,Ot),Se.data,-1,Ae,ve,yt),yt.features.length?yt:null}getClusterExpansionZoom(de){let ge=this._getOriginZoom(de)-1;for(;ge<=this.options.maxZoom;){const Ae=this.getChildren(de);if(ge++,Ae.length!==1)break;de=Ae[0].properties.cluster_id}return ge}_appendLeaves(de,ge,Ae,Se,ve){const Qe=this.getChildren(ge);for(const dt of Qe){const We=dt.properties;if(We&&We.cluster?ve+We.point_count<=Se?ve+=We.point_count:ve=this._appendLeaves(de,We.cluster_id,Ae,Se,ve):ve<Se?ve++:de.push(dt),de.length===Ae)break}return ve}_createTree(de){const ge=new l.aF(de.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ae=0;Ae<de.length;Ae+=this.stride)ge.add(de[Ae],de[Ae+1]);return ge.finish(),ge.data=de,ge}_addTileFeatures(de,ge,Ae,Se,ve,Qe){for(const dt of de){const We=dt*this.stride,Et=ge[We+K]>1;let Ot,yt,Yt;if(Et)Ot=tt(ge,We,this.clusterProps),yt=ge[We],Yt=ge[We+1];else{const Un=this.points[ge[We+ce]];Ot=Un.properties;const[Jn,Vt]=Un.geometry.coordinates;yt=ut(Jn),Yt=Tt(Vt)}const mn={type:1,geometry:[[Math.round(this.options.extent*(yt*ve-Ae)),Math.round(this.options.extent*(Yt*ve-Se))]],tags:Ot};let gn;gn=Et||this.options.generateId?ge[We+ce]:this.points[ge[We+ce]].id,gn!==void 0&&(mn.id=gn),Qe.features.push(mn)}}_limitZoom(de){return Math.max(this.options.minZoom,Math.min(Math.floor(+de),this.options.maxZoom+1))}_cluster(de,ge){const{radius:Ae,extent:Se,reduce:ve,minPoints:Qe}=this.options,dt=Ae/(Se*Math.pow(2,ge)),We=de.data,Et=[],Ot=this.stride;for(let yt=0;yt<We.length;yt+=Ot){if(We[yt+2]<=ge)continue;We[yt+2]=ge;const Yt=We[yt],mn=We[yt+1],gn=de.within(We[yt],We[yt+1],dt),Un=We[yt+K];let Jn=Un;for(const Vt of gn){const $n=Vt*Ot;We[$n+2]>ge&&(Jn+=We[$n+K])}if(Jn>Un&&Jn>=Qe){let Vt,$n=Yt*Un,Ar=mn*Un,Ur=-1;const wr=((yt/Ot|0)<<5)+(ge+1)+this.points.length;for(const Ht of gn){const bn=Ht*Ot;if(We[bn+2]<=ge)continue;We[bn+2]=ge;const Bn=We[bn+K];$n+=We[bn]*Bn,Ar+=We[bn+1]*Bn,We[bn+4]=wr,ve&&(Vt||(Vt=this._map(We,yt,!0),Ur=this.clusterProps.length,this.clusterProps.push(Vt)),ve(Vt,this._map(We,bn)))}We[yt+4]=wr,Et.push($n/Jn,Ar/Jn,1/0,wr,-1,Jn),ve&&Et.push(Ur)}else{for(let Vt=0;Vt<Ot;Vt++)Et.push(We[yt+Vt]);if(Jn>1)for(const Vt of gn){const $n=Vt*Ot;if(!(We[$n+2]<=ge)){We[$n+2]=ge;for(let Ar=0;Ar<Ot;Ar++)Et.push(We[$n+Ar])}}}}return Et}_getOriginId(de){return de-this.points.length>>5}_getOriginZoom(de){return(de-this.points.length)%32}_map(de,ge,Ae){if(de[ge+K]>1){const Qe=this.clusterProps[de[ge+Le]];return Ae?Object.assign({},Qe):Qe}const Se=this.points[de[ge+ce]].properties,ve=this.options.map(Se);return Ae&&ve===Se?Object.assign({},ve):ve}}function Be(Xe,de,ge){return{type:"Feature",id:Xe[de+ce],properties:tt(Xe,de,ge),geometry:{type:"Point",coordinates:[(Ae=Xe[de],360*(Ae-.5)),Ge(Xe[de+1])]}};var Ae}function tt(Xe,de,ge){const Ae=Xe[de+K],Se=Ae>=1e4?`${Math.round(Ae/1e3)}k`:Ae>=1e3?Math.round(Ae/100)/10+"k":Ae,ve=Xe[de+Le],Qe=ve===-1?{}:Object.assign({},ge[ve]);return Object.assign(Qe,{cluster:!0,cluster_id:Xe[de+ce],point_count:Ae,point_count_abbreviated:Se})}function ut(Xe){return Xe/360+.5}function Tt(Xe){const de=Math.sin(Xe*Math.PI/180),ge=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return ge<0?0:ge>1?1:ge}function Ge(Xe){const de=(180-360*Xe)*Math.PI/180;return 360*Math.atan(Math.exp(de))/Math.PI-90}function Ne(Xe,de,ge,Ae){let Se=Ae;const ve=de+(ge-de>>1);let Qe,dt=ge-de;const We=Xe[de],Et=Xe[de+1],Ot=Xe[ge],yt=Xe[ge+1];for(let Yt=de+3;Yt<ge;Yt+=3){const mn=Dt(Xe[Yt],Xe[Yt+1],We,Et,Ot,yt);if(mn>Se)Qe=Yt,Se=mn;else if(mn===Se){const gn=Math.abs(Yt-ve);gn<dt&&(Qe=Yt,dt=gn)}}Se>Ae&&(Qe-de>3&&Ne(Xe,de,Qe,Ae),Xe[Qe+2]=Se,ge-Qe>3&&Ne(Xe,Qe,ge,Ae))}function Dt(Xe,de,ge,Ae,Se,ve){let Qe=Se-ge,dt=ve-Ae;if(Qe!==0||dt!==0){const We=((Xe-ge)*Qe+(de-Ae)*dt)/(Qe*Qe+dt*dt);We>1?(ge=Se,Ae=ve):We>0&&(ge+=Qe*We,Ae+=dt*We)}return Qe=Xe-ge,dt=de-Ae,Qe*Qe+dt*dt}function Bt(Xe,de,ge,Ae){const Se={id:Xe??null,type:de,geometry:ge,tags:Ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(de==="Point"||de==="MultiPoint"||de==="LineString")St(Se,ge);else if(de==="Polygon")St(Se,ge[0]);else if(de==="MultiLineString")for(const ve of ge)St(Se,ve);else if(de==="MultiPolygon")for(const ve of ge)St(Se,ve[0]);return Se}function St(Xe,de){for(let ge=0;ge<de.length;ge+=3)Xe.minX=Math.min(Xe.minX,de[ge]),Xe.minY=Math.min(Xe.minY,de[ge+1]),Xe.maxX=Math.max(Xe.maxX,de[ge]),Xe.maxY=Math.max(Xe.maxY,de[ge+1])}function en(Xe,de,ge,Ae){if(!de.geometry)return;const Se=de.geometry.coordinates;if(Se&&Se.length===0)return;const ve=de.geometry.type,Qe=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2);let dt=[],We=de.id;if(ge.promoteId?We=de.properties[ge.promoteId]:ge.generateId&&(We=Ae||0),ve==="Point")pt(Se,dt);else if(ve==="MultiPoint")for(const Et of Se)pt(Et,dt);else if(ve==="LineString")ft(Se,dt,Qe,!1);else if(ve==="MultiLineString"){if(ge.lineMetrics){for(const Et of Se)dt=[],ft(Et,dt,Qe,!1),Xe.push(Bt(We,"LineString",dt,de.properties));return}ot(Se,dt,Qe,!1)}else if(ve==="Polygon")ot(Se,dt,Qe,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Et of de.geometry.geometries)en(Xe,{id:We,geometry:Et,properties:de.properties},ge,Ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Et of Se){const Ot=[];ot(Et,Ot,Qe,!0),dt.push(Ot)}}Xe.push(Bt(We,ve,dt,de.properties))}function pt(Xe,de){de.push(Pt(Xe[0]),Lt(Xe[1]),0)}function ft(Xe,de,ge,Ae){let Se,ve,Qe=0;for(let We=0;We<Xe.length;We++){const Et=Pt(Xe[We][0]),Ot=Lt(Xe[We][1]);de.push(Et,Ot,0),We>0&&(Qe+=Ae?(Se*Ot-Et*ve)/2:Math.sqrt(Math.pow(Et-Se,2)+Math.pow(Ot-ve,2))),Se=Et,ve=Ot}const dt=de.length-3;de[2]=1,Ne(de,0,dt,ge),de[dt+2]=1,de.size=Math.abs(Qe),de.start=0,de.end=de.size}function ot(Xe,de,ge,Ae){for(let Se=0;Se<Xe.length;Se++){const ve=[];ft(Xe[Se],ve,ge,Ae),de.push(ve)}}function Pt(Xe){return Xe/360+.5}function Lt(Xe){const de=Math.sin(Xe*Math.PI/180),ge=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return ge<0?0:ge>1?1:ge}function un(Xe,de,ge,Ae,Se,ve,Qe,dt){if(Ae/=de,ve>=(ge/=de)&&Qe<Ae)return Xe;if(Qe<ge||ve>=Ae)return null;const We=[];for(const Et of Xe){const Ot=Et.geometry;let yt=Et.type;const Yt=Se===0?Et.minX:Et.minY,mn=Se===0?Et.maxX:Et.maxY;if(Yt>=ge&&mn<Ae){We.push(Et);continue}if(mn<ge||Yt>=Ae)continue;let gn=[];if(yt==="Point"||yt==="MultiPoint")Ie(Ot,gn,ge,Ae,Se);else if(yt==="LineString")$(Ot,gn,ge,Ae,Se,!1,dt.lineMetrics);else if(yt==="MultiLineString")Oe(Ot,gn,ge,Ae,Se,!1);else if(yt==="Polygon")Oe(Ot,gn,ge,Ae,Se,!0);else if(yt==="MultiPolygon")for(const Un of Ot){const Jn=[];Oe(Un,Jn,ge,Ae,Se,!0),Jn.length&&gn.push(Jn)}if(gn.length){if(dt.lineMetrics&&yt==="LineString"){for(const Un of gn)We.push(Bt(Et.id,yt,Un,Et.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(gn.length===1?(yt="LineString",gn=gn[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=gn.length===3?"Point":"MultiPoint"),We.push(Bt(Et.id,yt,gn,Et.tags))}}return We.length?We:null}function Ie(Xe,de,ge,Ae,Se){for(let ve=0;ve<Xe.length;ve+=3){const Qe=Xe[ve+Se];Qe>=ge&&Qe<=Ae&&ye(de,Xe[ve],Xe[ve+1],Xe[ve+2])}}function $(Xe,de,ge,Ae,Se,ve,Qe){let dt=Te(Xe);const We=Se===0?pe:Fe;let Et,Ot,yt=Xe.start;for(let Jn=0;Jn<Xe.length-3;Jn+=3){const Vt=Xe[Jn],$n=Xe[Jn+1],Ar=Xe[Jn+2],Ur=Xe[Jn+3],wr=Xe[Jn+4],Ht=Se===0?Vt:$n,bn=Se===0?Ur:wr;let Bn=!1;Qe&&(Et=Math.sqrt(Math.pow(Vt-Ur,2)+Math.pow($n-wr,2))),Ht<ge?bn>ge&&(Ot=We(dt,Vt,$n,Ur,wr,ge),Qe&&(dt.start=yt+Et*Ot)):Ht>Ae?bn<Ae&&(Ot=We(dt,Vt,$n,Ur,wr,Ae),Qe&&(dt.start=yt+Et*Ot)):ye(dt,Vt,$n,Ar),bn<ge&&Ht>=ge&&(Ot=We(dt,Vt,$n,Ur,wr,ge),Bn=!0),bn>Ae&&Ht<=Ae&&(Ot=We(dt,Vt,$n,Ur,wr,Ae),Bn=!0),!ve&&Bn&&(Qe&&(dt.end=yt+Et*Ot),de.push(dt),dt=Te(Xe)),Qe&&(yt+=Et)}let Yt=Xe.length-3;const mn=Xe[Yt],gn=Xe[Yt+1],Un=Se===0?mn:gn;Un>=ge&&Un<=Ae&&ye(dt,mn,gn,Xe[Yt+2]),Yt=dt.length-3,ve&&Yt>=3&&(dt[Yt]!==dt[0]||dt[Yt+1]!==dt[1])&&ye(dt,dt[0],dt[1],dt[2]),dt.length&&de.push(dt)}function Te(Xe){const de=[];return de.size=Xe.size,de.start=Xe.start,de.end=Xe.end,de}function Oe(Xe,de,ge,Ae,Se,ve){for(const Qe of Xe)$(Qe,de,ge,Ae,Se,ve,!1)}function ye(Xe,de,ge,Ae){Xe.push(de,ge,Ae)}function pe(Xe,de,ge,Ae,Se,ve){const Qe=(ve-de)/(Ae-de);return ye(Xe,ve,ge+(Se-ge)*Qe,1),Qe}function Fe(Xe,de,ge,Ae,Se,ve){const Qe=(ve-ge)/(Se-ge);return ye(Xe,de+(Ae-de)*Qe,ve,1),Qe}function rt(Xe,de){const ge=[];for(let Ae=0;Ae<Xe.length;Ae++){const Se=Xe[Ae],ve=Se.type;let Qe;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Qe=at(Se.geometry,de);else if(ve==="MultiLineString"||ve==="Polygon"){Qe=[];for(const dt of Se.geometry)Qe.push(at(dt,de))}else if(ve==="MultiPolygon"){Qe=[];for(const dt of Se.geometry){const We=[];for(const Et of dt)We.push(at(Et,de));Qe.push(We)}}ge.push(Bt(Se.id,ve,Qe,Se.tags))}return ge}function at(Xe,de){const ge=[];ge.size=Xe.size,Xe.start!==void 0&&(ge.start=Xe.start,ge.end=Xe.end);for(let Ae=0;Ae<Xe.length;Ae+=3)ge.push(Xe[Ae]+de,Xe[Ae+1],Xe[Ae+2]);return ge}function Ve(Xe,de){if(Xe.transformed)return Xe;const ge=1<<Xe.z,Ae=Xe.x,Se=Xe.y;for(const ve of Xe.features){const Qe=ve.geometry,dt=ve.type;if(ve.geometry=[],dt===1)for(let We=0;We<Qe.length;We+=2)ve.geometry.push(Mt(Qe[We],Qe[We+1],de,ge,Ae,Se));else for(let We=0;We<Qe.length;We++){const Et=[];for(let Ot=0;Ot<Qe[We].length;Ot+=2)Et.push(Mt(Qe[We][Ot],Qe[We][Ot+1],de,ge,Ae,Se));ve.geometry.push(Et)}}return Xe.transformed=!0,Xe}function Mt(Xe,de,ge,Ae,Se,ve){return[Math.round(ge*(Xe*Ae-Se)),Math.round(ge*(de*Ae-ve))]}function wt(Xe,de,ge,Ae,Se){const ve=de===Se.maxZoom?0:Se.tolerance/((1<<de)*Se.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:Xe.length,source:null,x:ge,y:Ae,z:de,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const dt of Xe)At(Qe,dt,ve,Se);return Qe}function At(Xe,de,ge,Ae){const Se=de.geometry,ve=de.type,Qe=[];if(Xe.minX=Math.min(Xe.minX,de.minX),Xe.minY=Math.min(Xe.minY,de.minY),Xe.maxX=Math.max(Xe.maxX,de.maxX),Xe.maxY=Math.max(Xe.maxY,de.maxY),ve==="Point"||ve==="MultiPoint")for(let dt=0;dt<Se.length;dt+=3)Qe.push(Se[dt],Se[dt+1]),Xe.numPoints++,Xe.numSimplified++;else if(ve==="LineString")Gt(Qe,Se,Xe,ge,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let dt=0;dt<Se.length;dt++)Gt(Qe,Se[dt],Xe,ge,ve==="Polygon",dt===0);else if(ve==="MultiPolygon")for(let dt=0;dt<Se.length;dt++){const We=Se[dt];for(let Et=0;Et<We.length;Et++)Gt(Qe,We[Et],Xe,ge,!0,Et===0)}if(Qe.length){let dt=de.tags||null;if(ve==="LineString"&&Ae.lineMetrics){dt={};for(const Et in de.tags)dt[Et]=de.tags[Et];dt.mapbox_clip_start=Se.start/Se.size,dt.mapbox_clip_end=Se.end/Se.size}const We={geometry:Qe,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:dt};de.id!==null&&(We.id=de.id),Xe.features.push(We)}}function Gt(Xe,de,ge,Ae,Se,ve){const Qe=Ae*Ae;if(Ae>0&&de.size<(Se?Qe:Ae))return void(ge.numPoints+=de.length/3);const dt=[];for(let We=0;We<de.length;We+=3)(Ae===0||de[We+2]>Qe)&&(ge.numSimplified++,dt.push(de[We],de[We+1])),ge.numPoints++;Se&&function(We,Et){let Ot=0;for(let yt=0,Yt=We.length,mn=Yt-2;yt<Yt;mn=yt,yt+=2)Ot+=(We[yt]-We[mn])*(We[yt+1]+We[mn+1]);if(Ot>0===Et)for(let yt=0,Yt=We.length;yt<Yt/2;yt+=2){const mn=We[yt],gn=We[yt+1];We[yt]=We[Yt-2-yt],We[yt+1]=We[Yt-1-yt],We[Yt-2-yt]=mn,We[Yt-1-yt]=gn}}(dt,ve),Xe.push(dt)}const dn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class pn{constructor(de,ge){const Ae=(ge=this.options=function(ve,Qe){for(const dt in Qe)ve[dt]=Qe[dt];return ve}(Object.create(dn),ge)).debug;if(Ae&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");let Se=function(ve,Qe){const dt=[];if(ve.type==="FeatureCollection")for(let We=0;We<ve.features.length;We++)en(dt,ve.features[We],Qe,We);else en(dt,ve.type==="Feature"?ve:{geometry:ve},Qe);return dt}(de,ge);this.tiles={},this.tileCoords=[],Ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Se=function(ve,Qe){const dt=Qe.buffer/Qe.extent;let We=ve;const Et=un(ve,1,-1-dt,dt,0,-1,2,Qe),Ot=un(ve,1,1-dt,2+dt,0,-1,2,Qe);return(Et||Ot)&&(We=un(ve,1,-dt,1+dt,0,-1,2,Qe)||[],Et&&(We=rt(Et,1).concat(We)),Ot&&(We=We.concat(rt(Ot,-1)))),We}(Se,ge),Se.length&&this.splitTile(Se,0,0,0),Ae&&(Se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(de,ge,Ae,Se,ve,Qe,dt){const We=[de,ge,Ae,Se],Et=this.options,Ot=Et.debug;for(;We.length;){Se=We.pop(),Ae=We.pop(),ge=We.pop(),de=We.pop();const yt=1<<ge,Yt=ct(ge,Ae,Se);let mn=this.tiles[Yt];if(!mn&&(Ot>1&&console.time("creation"),mn=this.tiles[Yt]=wt(de,ge,Ae,Se,Et),this.tileCoords.push({z:ge,x:Ae,y:Se}),Ot)){Ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,Ae,Se,mn.numFeatures,mn.numPoints,mn.numSimplified),console.timeEnd("creation"));const Bn=`z${ge}`;this.stats[Bn]=(this.stats[Bn]||0)+1,this.total++}if(mn.source=de,ve==null){if(ge===Et.indexMaxZoom||mn.numPoints<=Et.indexMaxPoints)continue}else{if(ge===Et.maxZoom||ge===ve)continue;if(ve!=null){const Bn=ve-ge;if(Ae!==Qe>>Bn||Se!==dt>>Bn)continue}}if(mn.source=null,de.length===0)continue;Ot>1&&console.time("clipping");const gn=.5*Et.buffer/Et.extent,Un=.5-gn,Jn=.5+gn,Vt=1+gn;let $n=null,Ar=null,Ur=null,wr=null,Ht=un(de,yt,Ae-gn,Ae+Jn,0,mn.minX,mn.maxX,Et),bn=un(de,yt,Ae+Un,Ae+Vt,0,mn.minX,mn.maxX,Et);de=null,Ht&&($n=un(Ht,yt,Se-gn,Se+Jn,1,mn.minY,mn.maxY,Et),Ar=un(Ht,yt,Se+Un,Se+Vt,1,mn.minY,mn.maxY,Et),Ht=null),bn&&(Ur=un(bn,yt,Se-gn,Se+Jn,1,mn.minY,mn.maxY,Et),wr=un(bn,yt,Se+Un,Se+Vt,1,mn.minY,mn.maxY,Et),bn=null),Ot>1&&console.timeEnd("clipping"),We.push($n||[],ge+1,2*Ae,2*Se),We.push(Ar||[],ge+1,2*Ae,2*Se+1),We.push(Ur||[],ge+1,2*Ae+1,2*Se),We.push(wr||[],ge+1,2*Ae+1,2*Se+1)}}getTile(de,ge,Ae){de=+de,ge=+ge,Ae=+Ae;const Se=this.options,{extent:ve,debug:Qe}=Se;if(de<0||de>24)return null;const dt=1<<de,We=ct(de,ge=ge+dt&dt-1,Ae);if(this.tiles[We])return Ve(this.tiles[We],ve);Qe>1&&console.log("drilling down to z%d-%d-%d",de,ge,Ae);let Et,Ot=de,yt=ge,Yt=Ae;for(;!Et&&Ot>0;)Ot--,yt>>=1,Yt>>=1,Et=this.tiles[ct(Ot,yt,Yt)];return Et&&Et.source?(Qe>1&&(console.log("found parent tile z%d-%d-%d",Ot,yt,Yt),console.time("drilling down")),this.splitTile(Et.source,Ot,yt,Yt,de,ge,Ae),Qe>1&&console.timeEnd("drilling down"),this.tiles[We]?Ve(this.tiles[We],ve):null):null}}function ct(Xe,de,ge){return 32*((1<<Xe)*ge+de)+Xe}function mt(Xe,de){return de?Xe.properties[de]:Xe.id}function _t(Xe,de){if(Xe==null)return!0;if(Xe.type==="Feature")return mt(Xe,de)!=null;if(Xe.type==="FeatureCollection"){const ge=new Set;for(const Ae of Xe.features){const Se=mt(Ae,de);if(Se==null||ge.has(Se))return!1;ge.add(Se)}return!0}return!1}function jt(Xe,de){const ge=new Map;if(Xe!=null)if(Xe.type==="Feature")ge.set(mt(Xe,de),Xe);else for(const Ae of Xe.features)ge.set(mt(Ae,de),Ae);return ge}class qt extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(de,ge){return l._(this,void 0,void 0,function*(){const Ae=de.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Se=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);if(!Se)return null;const ve=new B(Se.features);let Qe=H(ve);return Qe.byteOffset===0&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),{vectorTile:ve,rawData:Qe.buffer}})}loadData(de){return l._(this,void 0,void 0,function*(){var ge;(ge=this._pendingRequest)===null||ge===void 0||ge.abort();const Ae=!!(de&&de.request&&de.request.collectResourceTiming)&&new l.cC(de.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(de,this._pendingRequest),this._geoJSONIndex=de.cluster?new Ue(function({superclusterOptions:Qe,clusterProperties:dt}){if(!dt||!Qe)return Qe;const We={},Et={},Ot={accumulated:null,zoom:0},yt={properties:null},Yt=Object.keys(dt);for(const mn of Yt){const[gn,Un]=dt[mn],Jn=l.cJ(Un),Vt=l.cJ(typeof gn=="string"?[gn,["accumulated"],["get",mn]]:gn);We[mn]=Jn.value,Et[mn]=Vt.value}return Qe.map=mn=>{yt.properties=mn;const gn={};for(const Un of Yt)gn[Un]=We[Un].evaluate(Ot,yt);return gn},Qe.reduce=(mn,gn)=>{yt.properties=gn;for(const Un of Yt)Ot.accumulated=mn[Un],mn[Un]=Et[Un].evaluate(Ot,yt)},Qe}(de)).load((yield this._pendingData).features):(Se=yield this._pendingData,new pn(Se,de.geojsonVtOptions)),this.loaded={};const ve={};if(Ae){const Qe=Ae.finish();Qe&&(ve.resourceTiming={},ve.resourceTiming[de.source]=JSON.parse(JSON.stringify(Qe)))}return ve}catch(ve){if(delete this._pendingRequest,l.cn(ve))return{abandoned:!0};throw ve}var Se})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(de){const ge=this.loaded;return ge&&ge[de.uid]?super.reloadTile(de):this.loadTile(de)}loadAndProcessGeoJSON(de,ge){return l._(this,void 0,void 0,function*(){let Ae=yield this.loadGeoJSON(de,ge);if(delete this._pendingRequest,typeof Ae!="object")throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(O(Ae,!0),de.filter){const Se=l.cJ(de.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Se.result==="error")throw new Error(Se.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter(Qe=>Se.value.evaluate({zoom:0},Qe))}}return Ae})}loadGeoJSON(de,ge){return l._(this,void 0,void 0,function*(){const{promoteId:Ae}=de;if(de.request){const Se=yield l.j(de.request,ge);return this._dataUpdateable=_t(Se.data,Ae)?jt(Se.data,Ae):void 0,Se.data}if(typeof de.data=="string")try{const Se=JSON.parse(de.data);return this._dataUpdateable=_t(Se,Ae)?jt(Se,Ae):void 0,Se}catch{throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`)}if(!de.dataDiff)throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${de.source}`);return function(Se,ve,Qe){var dt,We,Et,Ot;if(ve.removeAll&&Se.clear(),ve.remove)for(const yt of ve.remove)Se.delete(yt);if(ve.add)for(const yt of ve.add){const Yt=mt(yt,Qe);Yt!=null&&Se.set(Yt,yt)}if(ve.update)for(const yt of ve.update){let Yt=Se.get(yt.id);if(Yt==null)continue;const mn=!yt.removeAllProperties&&(((dt=yt.removeProperties)===null||dt===void 0?void 0:dt.length)>0||((We=yt.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0);if((yt.newGeometry||yt.removeAllProperties||mn)&&(Yt=Object.assign({},Yt),Se.set(yt.id,Yt),mn&&(Yt.properties=Object.assign({},Yt.properties))),yt.newGeometry&&(Yt.geometry=yt.newGeometry),yt.removeAllProperties)Yt.properties={};else if(((Et=yt.removeProperties)===null||Et===void 0?void 0:Et.length)>0)for(const gn of yt.removeProperties)Object.prototype.hasOwnProperty.call(Yt.properties,gn)&&delete Yt.properties[gn];if(((Ot=yt.addOrUpdateProperties)===null||Ot===void 0?void 0:Ot.length)>0)for(const{key:gn,value:Un}of yt.addOrUpdateProperties)Yt.properties[gn]=Un}}(this._dataUpdateable,de.dataDiff,Ae),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(de){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(de){return this._geoJSONIndex.getClusterExpansionZoom(de.clusterId)}getClusterChildren(de){return this._geoJSONIndex.getChildren(de.clusterId)}getClusterLeaves(de){return this._geoJSONIndex.getLeaves(de.clusterId,de.limit,de.offset)}}class Cn{constructor(de){this.self=de,this.actor=new l.H(de),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ge,Ae)=>{if(this.externalWorkerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.externalWorkerSourceTypes[ge]=Ae},this.self.addProtocol=l.cp,this.self.removeProtocol=l.cq,this.self.registerRTLTextPlugin=ge=>{l.cK.setMethods(ge)},this.actor.registerMessageHandler("LDT",(ge,Ae)=>this._getDEMWorkerSource(ge,Ae.source).loadTile(Ae)),this.actor.registerMessageHandler("RDT",(ge,Ae)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ge,Ae.source).removeTile(Ae)})),this.actor.registerMessageHandler("GCEZ",(ge,Ae)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,Ae.type,Ae.source).getClusterExpansionZoom(Ae)})),this.actor.registerMessageHandler("GCC",(ge,Ae)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,Ae.type,Ae.source).getClusterChildren(Ae)})),this.actor.registerMessageHandler("GCL",(ge,Ae)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,Ae.type,Ae.source).getClusterLeaves(Ae)})),this.actor.registerMessageHandler("LD",(ge,Ae)=>this._getWorkerSource(ge,Ae.type,Ae.source).loadData(Ae)),this.actor.registerMessageHandler("GD",(ge,Ae)=>this._getWorkerSource(ge,Ae.type,Ae.source).getData()),this.actor.registerMessageHandler("LT",(ge,Ae)=>this._getWorkerSource(ge,Ae.type,Ae.source).loadTile(Ae)),this.actor.registerMessageHandler("RT",(ge,Ae)=>this._getWorkerSource(ge,Ae.type,Ae.source).reloadTile(Ae)),this.actor.registerMessageHandler("AT",(ge,Ae)=>this._getWorkerSource(ge,Ae.type,Ae.source).abortTile(Ae)),this.actor.registerMessageHandler("RMT",(ge,Ae)=>this._getWorkerSource(ge,Ae.type,Ae.source).removeTile(Ae)),this.actor.registerMessageHandler("RS",(ge,Ae)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[ge]||!this.workerSources[ge][Ae.type]||!this.workerSources[ge][Ae.type][Ae.source])return;const Se=this.workerSources[ge][Ae.type][Ae.source];delete this.workerSources[ge][Ae.type][Ae.source],Se.removeSource!==void 0&&Se.removeSource(Ae)})),this.actor.registerMessageHandler("RM",ge=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[ge],delete this.availableImages[ge],delete this.workerSources[ge],delete this.demWorkerSources[ge]})),this.actor.registerMessageHandler("SR",(ge,Ae)=>l._(this,void 0,void 0,function*(){this.referrer=Ae})),this.actor.registerMessageHandler("SRPS",(ge,Ae)=>this._syncRTLPluginState(ge,Ae)),this.actor.registerMessageHandler("IS",(ge,Ae)=>l._(this,void 0,void 0,function*(){this.self.importScripts(Ae)})),this.actor.registerMessageHandler("SI",(ge,Ae)=>this._setImages(ge,Ae)),this.actor.registerMessageHandler("UL",(ge,Ae)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ge).update(Ae.layers,Ae.removedIds)})),this.actor.registerMessageHandler("SL",(ge,Ae)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ge).replace(Ae)}))}_setImages(de,ge){return l._(this,void 0,void 0,function*(){this.availableImages[de]=ge;for(const Ae in this.workerSources[de]){const Se=this.workerSources[de][Ae];for(const ve in Se)Se[ve].availableImages=ge}})}_syncRTLPluginState(de,ge){return l._(this,void 0,void 0,function*(){return yield l.cK.syncState(ge,this.self.importScripts)})}_getAvailableImages(de){let ge=this.availableImages[de];return ge||(ge=[]),ge}_getLayerIndex(de){let ge=this.layerIndexes[de];return ge||(ge=this.layerIndexes[de]=new s),ge}_getWorkerSource(de,ge,Ae){if(this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][ge]||(this.workerSources[de][ge]={}),!this.workerSources[de][ge][Ae]){const Se={sendAsync:(ve,Qe)=>(ve.targetMapId=de,this.actor.sendAsync(ve,Qe))};switch(ge){case"vector":this.workerSources[de][ge][Ae]=new b(Se,this._getLayerIndex(de),this._getAvailableImages(de));break;case"geojson":this.workerSources[de][ge][Ae]=new qt(Se,this._getLayerIndex(de),this._getAvailableImages(de));break;default:this.workerSources[de][ge][Ae]=new this.externalWorkerSourceTypes[ge](Se,this._getLayerIndex(de),this._getAvailableImages(de))}}return this.workerSources[de][ge][Ae]}_getDEMWorkerSource(de,ge){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][ge]||(this.demWorkerSources[de][ge]=new M),this.demWorkerSources[de][ge]}}return l.i(self)&&(self.worker=new Cn(self)),Cn}),a("index",["exports","./shared"],function(l,s){var f="5.4.0";function y(){var w=new s.A(4);return s.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let x,b;const M={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,r,c){const m=requestAnimationFrame(I=>{v(),r(I)}),{unsubscribe:v}=s.s(w.signal,"abort",()=>{v(),cancelAnimationFrame(m),c(s.c())},!1)},frameAsync(w){return new Promise((r,c)=>{this.frame(w,r,c)})},getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(x||(x=document.createElement("a")),x.href=w,x.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(b==null&&(b=matchMedia("(prefers-reduced-motion: reduce)")),b.matches)}};class A{static testProp(r){if(!A.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in A.docStyle)return r[c];return r[0]}static create(r,c,m){const v=window.document.createElement(r);return c!==void 0&&(v.className=c),m&&m.appendChild(v),v}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(r,c){r.style[A.transformProp]=c}static addEventListener(r,c,m,v={}){r.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(r,c,m,v={}){r.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,m){const v=c.boundingClientRect;return new s.P((m.clientX-v.left)/c.x-r.clientLeft,(m.clientY-v.top)/c.y-r.clientTop)}static mousePos(r,c){const m=A.getScale(r);return A.getPoint(r,m,c)}static touchPos(r,c){const m=[],v=A.getScale(r);for(let I=0;I<c.length;I++)m.push(A.getPoint(r,v,c[I]));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),m=c.querySelectorAll("script");for(const v of m)v.remove();return A.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const m=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!m.includes("javascript:")&&!m.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const m of c)A.removeAttributes(m),A.clean(m)}static removeAttributes(r){for(const{name:c,value:m}of r.attributes)A.isPossiblyDangerous(c,m)&&r.removeAttribute(c)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(w){!V&&O&&(z?B(w):L=w)}};let L,O,V=!1,z=!1;function B(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,O),w.isContextLost())return;P.supported=!0}catch{}w.deleteTexture(r),V=!0}var U;typeof document<"u"&&(O=document.createElement("img"),O.onload=()=>{L&&B(L),L=null,z=!0},O.onerror=()=>{V=!0,L=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let r,c,m,v;w.resetRequestQueue=()=>{r=[],c=0,m=0,v={}},w.addThrottleControl=N=>{const G=m++;return v[G]=N,G},w.removeThrottleControl=N=>{delete v[N],T()},w.getImage=(N,G,X=!0)=>new Promise((ie,se)=>{P.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),s.e(N,{type:"image"}),r.push({abortController:G,requestParameters:N,supportImageRefresh:X,state:"queued",onError:fe=>{se(fe)},onSuccess:fe=>{ie(fe)}}),T()});const I=N=>s._(this,void 0,void 0,function*(){N.state="running";const{requestParameters:G,supportImageRefresh:X,onError:ie,onSuccess:se,abortController:fe}=N,_e=X===!1&&!s.i(self)&&!s.g(G.url)&&(!G.headers||Object.keys(G.headers).reduce((Re,$e)=>Re&&$e==="accept",!0));c++;const De=_e?D(G,fe):s.m(G,fe);try{const Re=yield De;delete N.abortController,N.state="completed",Re.data instanceof HTMLImageElement||s.b(Re.data)?se(Re):Re.data&&se({data:yield(ke=Re.data,typeof createImageBitmap=="function"?s.f(ke):s.h(ke)),cacheControl:Re.cacheControl,expires:Re.expires})}catch(Re){delete N.abortController,ie(Re)}finally{c--,T()}var ke}),T=()=>{const N=(()=>{for(const G of Object.keys(v))if(v[G]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=c;G<N&&r.length>0;G++){const X=r.shift();X.abortController.signal.aborted?G--:I(X)}},D=(N,G)=>new Promise((X,ie)=>{const se=new Image,fe=N.url,_e=N.credentials;_e&&_e==="include"?se.crossOrigin="use-credentials":(_e&&_e==="same-origin"||!s.d(fe))&&(se.crossOrigin="anonymous"),G.signal.addEventListener("abort",()=>{se.src="",ie(s.c())}),se.fetchPriority="high",se.onload=()=>{se.onerror=se.onload=null,X({data:se})},se.onerror=()=>{se.onerror=se.onload=null,G.signal.aborted||ie(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},se.src=fe})}(U||(U={})),U.resetRequestQueue();class Z{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function te(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:m,url:v}of w){const I=`${m}${v}`;c.indexOf(I)===-1&&(c.push(I),r.push({id:m,url:v}))}}return r}function Y(w,r,c){try{const m=new URL(w);return m.pathname+=`${r}${c}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class W{constructor(r,c,m,v){this.context=r,this.format=m,this.texture=r.gl.createTexture(),this.update(c,v)}update(r,c,m){const{width:v,height:I}=r,T=!(this.size&&this.size[0]===v&&this.size[1]===I||m),{context:D}=this,{gl:N}=D;if(this.useMipmap=!!(c&&c.useMipmap),N.bindTexture(N.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===N.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[v,I],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?N.texImage2D(N.TEXTURE_2D,0,this.format,this.format,N.UNSIGNED_BYTE,r):N.texImage2D(N.TEXTURE_2D,0,this.format,v,I,0,this.format,N.UNSIGNED_BYTE,r.data);else{const{x:G,y:X}=m||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?N.texSubImage2D(N.TEXTURE_2D,0,G,X,N.RGBA,N.UNSIGNED_BYTE,r):N.texSubImage2D(N.TEXTURE_2D,0,G,X,v,I,N.RGBA,N.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&N.generateMipmap(N.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,c,m){const{context:v}=this,{gl:I}=v;I.bindTexture(I.TEXTURE_2D,this.texture),m!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=I.LINEAR),r!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,r),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,m||r),this.filter=r),c!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,c),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function H(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class ne extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:m}of this.requestors)m(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new s.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let m=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "content" value`))),m=!1),m}_validateStretch(r,c){if(!r)return!0;let m=0;for(const v of r){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const m=c.spriteData,v=m&&m.width||c.data.width,I=m&&m.height||c.data.height;return!(r[0]<0||v<r[0]||r[1]<0||I<r[1]||r[2]<0||v<r[2]||r[3]<0||I<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,m=!0){const v=this.getImage(r);if(m&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,m)=>{let v=!0;if(!this.isLoaded())for(const I of r)this.images[I]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const m of r){let v=this.getImage(m);v||(this.fire(new s.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?c[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],m=this.getImage(r);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},I=new s.I(v,m);this.patterns[r]={bin:v,position:I}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new W(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const I in this.patterns)r.push(this.patterns[I].bin);const{w:c,h:m}=s.p(r),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const I in this.patterns){const{bin:T}=this.patterns[I],D=T.x+1,N=T.y+1,G=this.getImage(I).data,X=G.width,ie=G.height;s.R.copy(G,v,{x:0,y:0},{x:D,y:N},{width:X,height:ie}),s.R.copy(G,v,{x:0,y:ie-1},{x:D,y:N-1},{width:X,height:1}),s.R.copy(G,v,{x:0,y:0},{x:D,y:N+ie},{width:X,height:1}),s.R.copy(G,v,{x:X-1,y:0},{x:D-1,y:N},{width:1,height:ie}),s.R.copy(G,v,{x:0,y:0},{x:D+X,y:N},{width:1,height:ie})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||s.w(`Image with ID: "${c}" was not found`),H(m)&&this.updateImage(c,m)}}}const le=1e20;function Q(w,r,c,m,v,I,T,D,N){for(let G=r;G<r+m;G++)ce(w,c*I+G,I,v,T,D,N);for(let G=c;G<c+v;G++)ce(w,G*I+r,1,m,T,D,N)}function ce(w,r,c,m,v,I,T){I[0]=0,T[0]=-1e20,T[1]=le,v[0]=w[r];for(let D=1,N=0,G=0;D<m;D++){v[D]=w[r+D*c];const X=D*D;do{const ie=I[N];G=(v[D]-v[ie]+X-ie*ie)/(D-ie)/2}while(G<=T[N]&&--N>-1);N++,I[N]=D,T[N]=G,T[N+1]=le}for(let D=0,N=0;D<m;D++){for(;T[N+1]<D;)N++;const G=I[N],X=D-G;w[r+D*c]=v[G]+X*X}}class K{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return s._(this,void 0,void 0,function*(){const c=[];for(const I in r)for(const T of r[I])c.push(this._getAndCacheGlyphsPromise(I,T));const m=yield Promise.all(c),v={};for(const{stack:I,id:T,glyph:D}of m)v[I]||(v[I]={}),v[I][T]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return v})}_getAndCacheGlyphsPromise(r,c){return s._(this,void 0,void 0,function*(){let m=this.entries[r];m||(m=this.entries[r]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[c];if(v!==void 0)return{stack:r,id:c,glyph:v};if(v=this._tinySDF(m,r,c),v)return m.glyphs[c]=v,{stack:r,id:c,glyph:v};const I=Math.floor(c/256);if(256*I>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[I])return{stack:r,id:c,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[I]){const D=K.loadGlyphRange(r,I,this.url,this.requestManager);m.requests[I]=D}const T=yield m.requests[I];for(const D in T)this._doesCharSupportLocalGlyph(+D)||(m.glyphs[+D]=T[+D]);return m.ranges[I]=!0,{stack:r,id:c,glyph:T[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||s.u["CJK Unified Ideographs"](r)||s.u["Hangul Syllables"](r)||s.u.Hiragana(r)||s.u.Katakana(r)||s.u["CJK Symbols and Punctuation"](r)||s.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let I=r.tinySDF;if(!I){let D="400";/bold/i.test(c)?D="900":/medium/i.test(c)?D="500":/light/i.test(c)&&(D="200"),I=r.tinySDF=new K.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:D})}const T=I.draw(String.fromCharCode(m));return{id:m,bitmap:new s.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}K.loadGlyphRange=function(w,r,c,m){return s._(this,void 0,void 0,function*(){const v=256*r,I=v+255,T=m.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${v}-${I}`),"Glyphs"),D=yield s.n(T,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${r}, ${v}-${I}`);const N={};for(const G of s.o(D.data))N[G.id]=G;return N})},K.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:I="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=m,this.radius=c;const D=this.size=w+4*r,N=this._createCanvas(D),G=this.ctx=N.getContext("2d",{willReadFrequently:!0});G.font=`${T} ${I} ${w}px ${v}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:I}=this.ctx.measureText(w),T=Math.ceil(c),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-v))),N=Math.min(this.size-this.buffer,T+Math.ceil(m)),G=D+2*this.buffer,X=N+2*this.buffer,ie=Math.max(G*X,0),se=new Uint8ClampedArray(ie),fe={data:se,width:G,height:X,glyphWidth:D,glyphHeight:N,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(D===0||N===0)return fe;const{ctx:_e,buffer:De,gridInner:ke,gridOuter:Re}=this;_e.clearRect(De,De,D,N),_e.fillText(w,De,De+T);const $e=_e.getImageData(De,De,D,N);Re.fill(le,0,ie),ke.fill(0,0,ie);for(let qe=0;qe<N;qe++)for(let Ke=0;Ke<D;Ke++){const Je=$e.data[4*(qe*D+Ke)+3]/255;if(Je===0)continue;const lt=(qe+De)*G+Ke+De;if(Je===1)Re[lt]=0,ke[lt]=le;else{const it=.5-Je;Re[lt]=it>0?it*it:0,ke[lt]=it<0?it*it:0}}Q(Re,0,0,G,X,G,this.f,this.v,this.z),Q(ke,De,De,D,N,G,this.f,this.v,this.z);for(let qe=0;qe<ie;qe++){const Ke=Math.sqrt(Re[qe])-Math.sqrt(ke[qe]);se[qe]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return fe}};class Le{constructor(){this.specification=s.v.light.position}possiblyEvaluate(r,c){return s.z(r.expression.evaluate(c))}interpolate(r,c,m){return{x:s.B.number(r.x,c.x,m),y:s.B.number(r.y,c.y,m),z:s.B.number(r.z,c.z,m)}}}let Ue;class Be extends s.E{constructor(r){super(),Ue=Ue||new s.r({anchor:new s.D(s.v.light.anchor),position:new Le,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Ue),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(s.t,r,c))for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m){return(!m||m.validate!==!1)&&s.x(this,r.call(s.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const tt=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class ut extends s.E{constructor(r){super(),this._transitionable=new s.T(tt),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(r,c={}){if(!this._validate(s.F,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m={}){return(m==null?void 0:m.validate)!==!1&&s.x(this,r.call(s.y,s.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Tt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const m=r.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(r,c)),this.dashEntry[m]}getDashRanges(r,c,m){const v=[];let I=r.length%2==1?-r[r.length-1]*m:0,T=r[0]*m,D=!0;v.push({left:I,right:T,isDash:D,zeroLength:r[0]===0});let N=r[0];for(let G=1;G<r.length;G++){D=!D;const X=r[G];I=N*m,N+=X,T=N*m,v.push({left:I,right:T,isDash:D,zeroLength:X===0})}return v}addRoundDash(r,c,m){const v=c/2;for(let I=-m;I<=m;I++){const T=this.width*(this.nextRow+m+I);let D=0,N=r[D];for(let G=0;G<this.width;G++){G/N.right>1&&(N=r[++D]);const X=Math.abs(G-N.left),ie=Math.abs(G-N.right),se=Math.min(X,ie);let fe;const _e=I/m*(v+1);if(N.isDash){const De=v-Math.abs(_e);fe=Math.sqrt(se*se+De*De)}else fe=v-Math.sqrt(se*se+_e*_e);this.data[T+G]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(r){for(let D=r.length-1;D>=0;--D){const N=r[D],G=r[D+1];N.zeroLength?r.splice(D,1):G&&G.isDash===N.isDash&&(G.left=N.left,r.splice(D,1))}const c=r[0],m=r[r.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let I=0,T=r[I];for(let D=0;D<this.width;D++){D/T.right>1&&(T=r[++I]);const N=Math.abs(D-T.left),G=Math.abs(D-T.right),X=Math.min(N,G);this.data[v+D]=Math.max(0,Math.min(255,(T.isDash?X:-X)+128))}}addDash(r,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return s.w("LineAtlas out of space"),null;let I=0;for(let D=0;D<r.length;D++)I+=r[D];if(I!==0){const D=this.width/I,N=this.getDashRanges(r,this.width,D);c?this.addRoundDash(N,D,m):this.addRegularDash(N)}const T={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:I};return this.nextRow+=v,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ge="maplibre_preloaded_worker_pool";class Ne{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ne.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ge]}numActive(){return Object.keys(this.active).length}}const Dt=Math.floor(M.hardwareConcurrency/2);let Bt,St;function en(){return Bt||(Bt=new Ne),Bt}Ne.workerCount=s.G(globalThis)?Math.max(Math.min(Dt,3),1):1;class pt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const m=this.workerPool.acquire(c);for(let v=0;v<m.length;v++){const I=new s.H(m[v],c);I.name=`Worker ${v}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const m=[];for(const v of this.actors)m.push(v.sendAsync({type:r,data:c}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const m of this.actors)m.registerMessageHandler(r,c)}}function ft(){return St||(St=new pt(en(),s.J),St.registerMessageHandler("GR",(w,r,c)=>s.m(r,c))),St}function ot(w,r){const c=s.K();return s.L(c,c,[1,1,0]),s.M(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?s.N(c,c,w.calculatePosMatrix(r.toUnwrapped())):c}function Pt(w,r,c,m,v,I,T){var D;const N=function(se,fe,_e){if(se)for(const De of se){const ke=fe[De];if(ke&&ke.source===_e&&ke.type==="fill-extrusion")return!0}else for(const De in fe){const ke=fe[De];if(ke.source===_e&&ke.type==="fill-extrusion")return!0}return!1}((D=v==null?void 0:v.layers)!==null&&D!==void 0?D:null,r,w.id),G=I.maxPitchScaleFactor(),X=w.tilesIn(m,G,N);X.sort(Lt);const ie=[];for(const se of X)ie.push({wrappedTileID:se.tileID.wrapped().key,queryResults:se.tile.queryRenderedFeatures(r,c,w._state,se.queryGeometry,se.cameraQueryGeometry,se.scale,v,I,G,ot(w.transform,se.tileID),T?(fe,_e)=>T(se.tileID,fe,_e):void 0)});return function(se,fe){for(const _e in se)for(const De of se[_e])un(De,fe);return se}(function(se){const fe={},_e={};for(const De of se){const ke=De.queryResults,Re=De.wrappedTileID,$e=_e[Re]=_e[Re]||{};for(const qe in ke){const Ke=ke[qe],Je=$e[qe]=$e[qe]||{},lt=fe[qe]=fe[qe]||[];for(const it of Ke)Je[it.featureIndex]||(Je[it.featureIndex]=!0,lt.push(it))}}return fe}(ie),w)}function Lt(w,r){const c=w.tileID,m=r.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function un(w,r){const c=w.feature,m=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=m}function Ie(w,r,c){return s._(this,void 0,void 0,function*(){let m=w;if(w.url?m=(yield s.j(r.transformRequest(w.url,"Source"),c)).data:yield M.frameAsync(c),!m)return null;const v=s.O(s.e(m,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(v.vectorLayerIds=m.vector_layers.map(I=>I.id)),v})}class ${constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof s.Q?new s.Q(r.lng,r.lat):s.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof s.Q?new s.Q(r.lng,r.lat):s.Q.convert(r),this}extend(r){const c=this._sw,m=this._ne;let v,I;if(r instanceof s.Q)v=r,I=r;else{if(!(r instanceof $))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend($.convert(r)):this.extend(s.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(s.Q.convert(r)):this;if(v=r._sw,I=r._ne,!v||!I)return this}return c||m?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),m.lng=Math.max(I.lng,m.lng),m.lat=Math.max(I.lat,m.lat)):(this._sw=new s.Q(v.lng,v.lat),this._ne=new s.Q(I.lng,I.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:m}=s.Q.convert(r);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}static convert(r){return r instanceof $?r:r&&new $(r)}static fromLngLat(r,c=0){const m=360*c/40075017,v=m/Math.cos(Math.PI/180*r.lat);return new $(new s.Q(r.lng-v,r.lat-m),new s.Q(r.lng+v,r.lat+m))}adjustAntiMeridian(){const r=new s.Q(this._sw.lng,this._sw.lat),c=new s.Q(this._ne.lng,this._ne.lat);return new $(r,r.lng>c.lng?new s.Q(c.lng+360,c.lat):c)}}class Te{constructor(r,c,m){this.bounds=$.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),m=Math.floor(s.U(this.bounds.getWest())*c),v=Math.floor(s.S(this.bounds.getNorth())*c),I=Math.ceil(s.U(this.bounds.getEast())*c),T=Math.ceil(s.S(this.bounds.getSouth())*c);return r.x>=m&&r.x<I&&r.y>=v&&r.y<T}}class Oe extends s.E{constructor(r,c,m,v){if(super(),this.id=r,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(c,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(s.e(this,r),r.bounds&&(this.tileBounds=new Te(r.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new s.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((I,T)=>{r.reloadPromise={resolve:I,reject:T}})}else r.actor=this.dispatcher.getActor(),v="LT";r.abortController=new AbortController;try{const I=yield r.actor.sendAsync({type:v,data:m},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,I)}catch(I){if(delete r.abortController,r.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const m=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(m.resolve).catch(m.reject)}}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ye extends s.E{constructor(r,c,m,v){super(),this.id=r,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},c),s.e(this,s.O(c,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(s.e(this,c),c.bounds&&(this.tileBounds=new Te(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this.fire(new s.k(c))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return s.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const m=yield U.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const v=this.map.painter.context,I=v.gl,T=m.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new W(v,T,I.RGBA,{useMipmap:!0}),r.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class pe extends ye{constructor(r,c,m,v){super(r,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const v=yield U.getImage(m,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(v&&v.data){const I=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&r.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const T=s.b(I)&&s.V()?I:yield this.readImageNow(I),D={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const N=yield r.actor.sendAsync({type:"LDT",data:D});r.dem=N,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(v){if(delete r.abortController,r.aborted)r.state="unloaded";else if(v)throw r.state="errored",v}})}readImageNow(r){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){const c=r.width+2,m=r.height+2;try{return new s.R({width:c,height:m},yield s.X(r,-1,-1,c,m))}catch{}}return M.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,I=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+m)%m,D=c.x+1===m?r.wrap+1:r.wrap,N={};return N[new s.Y(r.overscaledZ,I,c.z,v,c.y).key]={backfilled:!1},N[new s.Y(r.overscaledZ,D,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(N[new s.Y(r.overscaledZ,I,c.z,v,c.y-1).key]={backfilled:!1},N[new s.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new s.Y(r.overscaledZ,D,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<m&&(N[new s.Y(r.overscaledZ,I,c.z,v,c.y+1).key]={backfilled:!1},N[new s.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new s.Y(r.overscaledZ,D,c.z,T,c.y+1).key]={backfilled:!1}),N}unloadTile(r){return s._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Fe extends s.E{constructor(r,c,m,v){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=c.data,this._options=s.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return s._(this,void 0,void 0,function*(){const r=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(c=>c.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const r=new $,c=yield this.getData();let m;switch(c.type){case"FeatureCollection":m=c.features.map(v=>this.getCoordinatesFromGeometry(v.geometry)).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(c.geometry);break;default:m=this.getCoordinatesFromGeometry(c)}if(m.length==0)return r;for(let v=0;v<m.length-1;v+=2)r.extend([m[v],m[v+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:m}})}_updateWorkerData(r){return s._(this,void 0,void 0,function*(){const c=s.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(M.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let v=null;m.resourceTiming&&m.resourceTiming[this.id]&&(v=m.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&s.e(I,{resourceTiming:v}),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(m))}})}loaded(){return this._pendingLoads===0}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:m},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(v,this.map.painter,c==="RT")})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class rt extends s.E{constructor(r,c,m,v){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(r){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new s.k(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(s.$.fromLngLat);var m;return this.tileID=function(v){let I=1/0,T=1/0,D=-1/0,N=-1/0;for(const se of v)I=Math.min(I,se.x),T=Math.min(T,se.y),D=Math.max(D,se.x),N=Math.max(N,se.y);const G=Math.max(D-I,N-T),X=Math.max(0,Math.floor(-Math.log(G)/Math.LN2)),ie=Math.pow(2,X);return new s.a1(X,Math.floor((I+D)/2*ie),Math.floor((T+N)/2*ie))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(v=>this.tileID.getTilePoint(v)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new W(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const I=this.tiles[v];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let c=1/0,m=1/0,v=-1/0,I=-1/0;for(const D of r)c=Math.min(c,D.x),m=Math.min(m,D.y),v=Math.max(v,D.x),I=Math.max(I,D.y);const T={};for(let D=0;D<=s.a0;D++){const N=Math.pow(2,D),G=Math.floor(c*N),X=Math.floor(m*N),ie=Math.floor(v*N),se=Math.floor(I*N);T[D]={minTileX:G,minTileY:X,maxTileX:ie,maxTileY:se}}return T}}class at extends rt{constructor(r,c,m,v){super(r,c,m,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield s.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new s.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new W(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const I=this.tiles[v];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ve extends rt{constructor(r,c,m,v){super(r,c,m,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(I=>!Array.isArray(I)||I.length!==2||I.some(T=>typeof T!="number"))||this.fire(new s.k(new s.a3(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,m=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new W(c,this.canvas,m.RGBA,{premultiply:!0});let v=!1;for(const I in this.tiles){const T=this.tiles[I];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Mt={},wt=w=>{switch(w){case"geojson":return Fe;case"image":return rt;case"raster":return ye;case"raster-dem":return pe;case"vector":return Oe;case"video":return at;case"canvas":return Ve}return Mt[w]},At="RTLPluginLoaded";class Gt extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ft()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return s._(this,arguments,void 0,function*(c,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(At))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let dn=null;function pn(){return dn||(dn=new Gt),dn}class ct{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=s.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(v,I){const T={};if(!I)return T;for(const D of v){const N=D.layerIds.map(G=>I.getLayer(G)).filter(Boolean);if(N.length!==0){D.layers=N,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(G=>N.filter(X=>X.id===G)[0]));for(const G of N)T[G.id]=D}}return T}(r.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const I=this.buckets[v];if(I instanceof s.a6){if(this.hasSymbolBuckets=!0,!m)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const I=this.buckets[v];if(I instanceof s.a6&&I.hasRTLText){this.hasRTLText=!0,pn().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const I=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(I))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new W(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new W(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,m,v,I,T,D,N,G,X,ie){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:I,scale:T,tileSize:this.tileSize,pixelPosMatrix:X,transform:N,params:D,queryPadding:this.queryPadding*G,getElevation:ie},r,c,m):{}}querySourceFeatures(r,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),I=c&&c.sourceLayer?c.sourceLayer:"",T=v._geojsonTileLayer||v[I];if(!T)return;const D=s.a7(c&&c.filter),{z:N,x:G,y:X}=this.tileID.canonical,ie={z:N,x:G,y:X};for(let se=0;se<T.length;se++){const fe=T.feature(se);if(D.needGeometry){const ke=s.a8(fe,!0);if(!D.filter(new s.C(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!D.filter(new s.C(this.tileID.overscaledZ),fe))continue;const _e=m.getId(fe,I),De=new s.a9(fe,N,G,X,_e);De.tile=ie,r.push(De)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const m=s.aa(r.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const I=this.expirationTime-c;I?this.expirationTime=m+Math.max(I,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const I=this.buckets[v],T=I.layers[0].sourceLayer||"_geojsonTileLayer",D=m[T],N=r[T];if(!D||!N||Object.keys(N).length===0)continue;I.update(N,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const G=c&&c.style&&c.style.getLayer(v);G&&(this.queryPadding=Math.max(this.queryPadding,G.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=M.now()+r}setDependencies(r,c){const m={};for(const v of c)m[v]=!0;this.dependencies[r]=m}hasDependency(r,c){for(const m of r){const v=this.dependencies[m];if(v){for(const I of c)if(v[I])return!0}}return!1}}class mt{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,m){const v=r.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const I={value:c,timeout:void 0};if(m!==void 0&&(I.timeout=setTimeout(()=>{this.remove(r,I)},m)),this.data[v].push(I),this.order.push(v),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const m=r.wrapped().key,v=c===void 0?0:this.data[m].indexOf(c),I=this.data[m][v];return this.data[m].splice(v,1),I.timeout&&clearTimeout(I.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(I.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const m in this.data)for(const v of this.data[m])r(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class _t{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,m){const v=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},s.e(this.stateChanges[r][v],m),this.deletedStates[r]===null){this.deletedStates[r]={};for(const I in this.state[r])I!==v&&(this.deletedStates[r][I]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][v]===null){this.deletedStates[r][v]={};for(const I in this.state[r][v])m[I]||(this.deletedStates[r][v][I]=null)}else for(const I in m)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][I]===null&&delete this.deletedStates[r][v][I]}removeFeatureState(r,c,m){if(this.deletedStates[r]===null)return;const v=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},m&&c!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][m]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(m in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][m]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}getState(r,c){const m=String(c),v=s.e({},(this.state[r]||{})[m],(this.stateChanges[r]||{})[m]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const I=this.deletedStates[r][c];if(I===null)return{};for(const T in I)delete v[T]}return v}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const I={};for(const T in this.stateChanges[v])this.state[v][T]||(this.state[v][T]={}),s.e(this.state[v][T],this.stateChanges[v][T]),I[T]=this.state[v][T];m[v]=I}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const I={};if(this.deletedStates[v]===null)for(const T in this.state[v])I[T]={},this.state[v][T]={};else for(const T in this.deletedStates[v]){if(this.deletedStates[v][T]===null)this.state[v][T]={};else for(const D of Object.keys(this.deletedStates[v][T]))delete this.state[v][T][D];I[T]=this.state[v][T]}m[v]=m[v]||{},s.e(m[v],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in r)r[v].setFeatureState(m,c)}}const jt=89.25;function qt(w,r){const c=s.ae(r.lat,-85.051129,s.af);return new s.P(s.U(r.lng)*w,s.S(c)*w)}function Cn(w,r){return new s.$(r.x/w,r.y/w).toLngLat()}function Xe(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-w.pitch)),Math.tan(s.ab(jt-w.pitch)))}function de(w,r){const c=w.canonical,m=r/s.ac(c.z),v=c.x+Math.pow(2,c.z)*w.wrap,I=s.ad(new Float64Array(16));return s.L(I,I,[v*m,c.y*m,0]),s.M(I,I,[m/s.Z,m/s.Z,1]),I}function ge(w,r,c,m,v){const I=s.$.fromLngLat(w,r),T=v*s.ag(1,w.lat),D=T*Math.cos(s.ab(c)),N=Math.sqrt(T*T-D*D),G=N*Math.sin(s.ab(-m)),X=N*Math.cos(s.ab(-m));return new s.$(I.x+G,I.y+X,I.z+D)}function Ae(w,r,c){const m=r.intersectsFrustum(w);if(!c)return m;const v=r.intersectsPlane(c);return m===0||v===0?0:m===2&&v===2?2:1}function Se(w,r,c){let m=0;const v=(c-r)/10;for(let I=0;I<10;I++)m+=v*Math.pow(Math.cos(r+(I+.5)/10*(c-r)),w);return m}function ve(w,r){return function(c,m,v,I,T){const D=2*((w-1)/s.ah(Math.cos(s.ab(jt-T))/Math.cos(s.ab(jt)))-1),N=Math.acos(v/I),G=2*Se(D-1,0,s.ab(T/2)),X=Math.min(s.ab(jt),N+s.ab(T/2)),ie=Se(D-1,Math.min(X,N-s.ab(T/2)),X),se=Math.atan(m/v),fe=Math.hypot(m,v);let _e=c;return _e+=s.ah(I/fe/Math.max(.5,Math.cos(s.ab(T/2)))),_e+=D*s.ah(Math.cos(se))/2,_e-=s.ah(Math.max(1,ie/G/r))/2,_e}}const Qe=ve(9.314,3);function dt(w,r){const c=(r.roundZoom?Math.round:Math.floor)(w.zoom+s.ah(w.tileSize/r.tileSize));return Math.max(0,c)}function We(w,r){const c=w.getCameraFrustum(),m=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),I=s.$.fromLngLat(w.center,w.elevation);v.z=I.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const T=w.getCoveringTilesDetailsProvider(),D=T.allowVariableZoom(w,r),N=dt(w,r),G=r.minzoom||0,X=r.maxzoom!==void 0?r.maxzoom:w.maxZoom,ie=Math.min(Math.max(0,N),X),se=Math.pow(2,ie),fe=[se*v.x,se*v.y,0],_e=[se*I.x,se*I.y,0],De=Math.hypot(I.x-v.x,I.y-v.y),ke=Math.abs(I.z-v.z),Re=Math.hypot(De,ke),$e=Je=>({zoom:0,x:0,y:0,wrap:Je,fullyVisible:!1}),qe=[],Ke=[];if(w.renderWorldCopies&&T.allowWorldCopies())for(let Je=1;Je<=3;Je++)qe.push($e(-Je)),qe.push($e(Je));for(qe.push($e(0));qe.length>0;){const Je=qe.pop(),lt=Je.x,it=Je.y;let xt=Je.fullyVisible;const Ct={x:lt,y:it,z:Je.zoom},vt=T.getTileAABB(Ct,Je.wrap,w.elevation,r);if(!xt){const on=Ae(c,vt,m);if(on===0)continue;xt=on===2}const $t=T.distanceToTile2d(v.x,v.y,Ct,vt);let Nt=N;D&&(Nt=(r.calculateTileZoom||Qe)(w.zoom+s.ah(w.tileSize/r.tileSize),$t,ke,Re,w.fov)),Nt=(r.roundZoom?Math.round:Math.floor)(Nt),Nt=Math.max(0,Nt);const hn=Math.min(Nt,X);if(Je.wrap=T.getWrap(I,Ct,Je.wrap),Je.zoom>=hn){if(Je.zoom<G)continue;const on=ie-Je.zoom,Xt=fe[0]-.5-(lt<<on),Dn=fe[1]-.5-(it<<on),Zn=r.reparseOverscaled?Math.max(Je.zoom,Nt):Je.zoom;Ke.push({tileID:new s.Y(Je.zoom===X?Zn:Je.zoom,Je.wrap,Je.zoom,lt,it),distanceSq:s.ai([_e[0]-.5-lt,_e[1]-.5-it]),tileDistanceToCamera:Math.sqrt(Xt*Xt+Dn*Dn)})}else for(let on=0;on<4;on++)qe.push({zoom:Je.zoom+1,x:(lt<<1)+on%2,y:(it<<1)+(on>>1),wrap:Je.wrap,fullyVisible:xt})}return Ke.sort((Je,lt)=>Je.distanceSq-lt.distanceSq).map(Je=>Je.tileID)}class Et extends s.E{constructor(r,c,m){super(),this.id=r,this.dispatcher=m,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,I,T,D)=>{const N=new(wt(I.type))(v,I,T,D);if(N.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${N.id}`);return N})(r,c,m,this),this._tiles={},this._cache=new mt(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new _t,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,m){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,m)}catch(v){r.state="errored",v.status!==404?this._source.fire(new s.k(v,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new s.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(r),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ot).map(r=>r.key)}getRenderableIds(r){const c=[];for(const m in this._tiles)this._isIdRenderable(m,r)&&c.push(this._tiles[m]);return r?c.sort((m,v)=>{const I=m.tileID,T=v.tileID,D=new s.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians),N=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return I.overscaledZ-T.overscaledZ||N.y-D.y||N.x-D.x}).map(m=>m.tileID.key):c.map(m=>m.tileID).sort(Ot).map(m=>m.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(r||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return s._(this,void 0,void 0,function*(){const m=this._tiles[r];m&&(m.state!=="loading"&&(m.state=c),yield this._loadTile(m,r,c))})}_tileLoaded(r,c,m){r.timeAdded=M.now(),m==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const I=c[v];if(r.neighboringTiles&&r.neighboringTiles[I]){const T=this.getTileByID(I);m(r,T),m(T,r)}}function m(v,I){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let T=I.tileID.canonical.x-v.tileID.canonical.x;const D=I.tileID.canonical.y-v.tileID.canonical.y,N=Math.pow(2,v.tileID.canonical.z),G=I.tileID.key;T===0&&D===0||Math.abs(D)>1||(Math.abs(T)>1&&(Math.abs(T+N)===1?T+=N:Math.abs(T-N)===1&&(T-=N)),I.dem&&v.dem&&(v.dem.backfillBorder(I.dem,T,D),v.neighboringTiles&&v.neighboringTiles[G]&&(v.neighboringTiles[G].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,m,v){for(const I in this._tiles){let T=this._tiles[I];if(v[I]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>m)continue;let D=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const G=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[G.key],T&&T.hasData()&&(D=G)}let N=D;for(;N.overscaledZ>c;)if(N=N.scaledTo(N.overscaledZ-1),r[N.key]||r[N.canonical.key]){v[D.key]=D;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const m=this._loadedParentTiles[r.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=r.overscaledZ-1;m>=c;m--){const v=r.scaledTo(m),I=this._getLoadedTile(v);if(I)return I}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,m=Math.ceil(r.height/this._source.tileSize)+1,v=Math.floor(c*m*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(I)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const m={};for(const v in this._tiles){const I=this._tiles[v];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+c),m[I.tileID.key]=I}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(r,c,m,v,I,T){const D={},N={},G=Object.keys(r),X=M.now();for(const ie of G){const se=r[ie],fe=this._tiles[ie];if(!fe||fe.fadeEndTime!==0&&fe.fadeEndTime<=X)continue;const _e=this.findLoadedParent(se,c),De=this.findLoadedSibling(se),ke=_e||De||null;ke&&(this._addTile(ke.tileID),D[ke.tileID.key]=ke.tileID),N[ie]=se}this._retainLoadedChildren(N,v,m,r);for(const ie in D)r[ie]||(this._coveredTiles[ie]=!0,r[ie]=D[ie]);if(T){const ie={},se={};for(const fe of I)this._tiles[fe.key].hasData()?ie[fe.key]=fe:se[fe.key]=fe;for(const fe in se){const _e=se[fe].children(this._source.maxzoom);this._tiles[_e[0].key]&&this._tiles[_e[1].key]&&this._tiles[_e[2].key]&&this._tiles[_e[3].key]&&(ie[_e[0].key]=r[_e[0].key]=_e[0],ie[_e[1].key]=r[_e[1].key]=_e[1],ie[_e[2].key]=r[_e[2].key]=_e[2],ie[_e[3].key]=r[_e[3].key]=_e[3],delete se[fe])}for(const fe in se){const _e=se[fe],De=this.findLoadedParent(_e,this._source.minzoom),ke=this.findLoadedSibling(_e),Re=De||ke||null;if(Re){ie[Re.tileID.key]=r[Re.tileID.key]=Re.tileID;for(const $e in ie)ie[$e].isChildOf(Re.tileID)&&delete ie[$e]}}for(const fe in this._tiles)ie[fe]||(this._coveredTiles[fe]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let m;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(X=>new s.Y(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)):(m=We(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(X=>this._source.hasTile(X)))):m=[];const v=dt(r,this._source),I=Math.max(v-Et.maxOverzooming,this._source.minzoom),T=Math.max(v+Et.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const X={};for(const ie of m)if(ie.canonical.z>this._source.minzoom){const se=ie.scaledTo(ie.canonical.z-1);X[se.key]=se;const fe=ie.scaledTo(Math.max(this._source.minzoom,Math.min(ie.canonical.z,5)));X[fe.key]=fe}m=m.concat(Object.values(X))}const D=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,D&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const N=this._updateRetainedTiles(m,v);yt(this._source.type)&&this._updateCoveredAndRetainedTiles(N,I,T,v,m,c);for(const X in N)this._tiles[X].clearFadeHold();const G=s.aj(this._tiles,N);for(const X of G){const ie=this._tiles[X];ie.hasSymbolBuckets&&!ie.holdingForFade()?ie.setHoldDuration(this.map._fadeDuration):ie.hasSymbolBuckets&&!ie.symbolFadeFinished()||this._removeTile(X)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var m;const v={},I={},T=Math.max(c-Et.maxOverzooming,this._source.minzoom),D=Math.max(c+Et.maxUnderzooming,this._source.minzoom),N={};for(const G of r){const X=this._addTile(G);v[G.key]=G,X.hasData()||c<this._source.maxzoom&&(N[G.key]=G)}this._retainLoadedChildren(N,c,D,v);for(const G of r){let X=this._tiles[G.key];if(X.hasData())continue;if(c+1>this._source.maxzoom){const se=G.children(this._source.maxzoom)[0],fe=this.getTile(se);if(fe&&fe.hasData()){v[se.key]=se;continue}}else{const se=G.children(this._source.maxzoom);if(v[se[0].key]&&v[se[1].key]&&v[se[2].key]&&v[se[3].key])continue}let ie=X.wasRequested();for(let se=G.overscaledZ-1;se>=T;--se){const fe=G.scaledTo(se);if(I[fe.key])break;if(I[fe.key]=!0,X=this.getTile(fe),!X&&ie&&(X=this._addTile(fe)),X){const _e=X.hasData();if((_e||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||ie)&&(v[fe.key]=fe),ie=X.wasRequested(),_e)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let m,v=this._tiles[r].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const I=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(I),m)break;v=I}for(const I of c)this._loadedParentTiles[I]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,m=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=m}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const m=c;return c||(c=new ct(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,m||this._source.fire(new s.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const m=c.getExpiryTimeout();m&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},m))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,m){const v=[],I=this.transform;if(!I)return v;const T=m?I.getCameraQueryGeometry(r):r,D=r.map(_e=>I.screenPointToMercatorCoordinate(_e,this.terrain)),N=T.map(_e=>I.screenPointToMercatorCoordinate(_e,this.terrain)),G=this.getIds();let X=1/0,ie=1/0,se=-1/0,fe=-1/0;for(const _e of N)X=Math.min(X,_e.x),ie=Math.min(ie,_e.y),se=Math.max(se,_e.x),fe=Math.max(fe,_e.y);for(let _e=0;_e<G.length;_e++){const De=this._tiles[G[_e]];if(De.holdingForFade())continue;const ke=I.getCoveringTilesDetailsProvider().allowWorldCopies()?De.tileID:De.tileID.unwrapTo(0),Re=Math.pow(2,I.zoom-De.tileID.overscaledZ),$e=c*De.queryPadding*s.Z/De.tileSize/Re,qe=[ke.getTilePoint(new s.$(X,ie)),ke.getTilePoint(new s.$(se,fe))];if(qe[0].x-$e<s.Z&&qe[0].y-$e<s.Z&&qe[1].x+$e>=0&&qe[1].y+$e>=0){const Ke=D.map(lt=>ke.getTilePoint(lt)),Je=N.map(lt=>ke.getTilePoint(lt));v.push({tile:De,tileID:ke,queryGeometry:Ke,cameraQueryGeometry:Je,scale:Re})}}return v}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(yt(this._source.type)){const r=M.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,m){this._state.updateState(r=r||"_geojsonTileLayer",c,m)}removeFeatureState(r,c,m){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,m)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,m){const v=this._tiles[r];v&&v.setDependencies(c,m)}reloadTilesForDependencies(r,c){for(const m in this._tiles)this._tiles[m].hasDependency(r,c)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(r,c))}}function Ot(w,r){const c=Math.abs(2*w.wrap)-+(w.wrap<0),m=Math.abs(2*r.wrap)-+(r.wrap<0);return w.overscaledZ-r.overscaledZ||m-c||r.canonical.y-w.canonical.y||r.canonical.x-w.canonical.x}function yt(w){return w==="raster"||w==="image"||w==="video"}Et.maxOverzooming=10,Et.maxUnderzooming=3;class Yt{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=s.ae(r,0,1);let c=1,m=this._distances[c];const v=r*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const I=c-1,T=this._distances[I],D=m-T,N=D>0?(v-T)/D:0;return this.points[I].mult(1-N).add(this.points[c].mult(N))}}function mn(w,r){let c=!0;return w==="always"||w!=="never"&&r!=="never"||(c=!1),c}class gn{constructor(r,c,m){const v=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(r/m),this.yCellCount=Math.ceil(c/m);for(let T=0;T<this.xCellCount*this.yCellCount;T++)v.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,m,v,I){this._forEachCell(c,m,v,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(I)}insertCircle(r,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(r,c,m,v,I,T){this.boxCells[I].push(T)}_insertCircleCell(r,c,m,v,I,T){this.circleCells[I].push(T)}_query(r,c,m,v,I,T,D){if(m<0||r>this.width||v<0||c>this.height)return[];const N=[];if(r<=0&&c<=0&&this.width<=m&&this.height<=v){if(I)return[{key:null,x1:r,y1:c,x2:m,y2:v}];for(let G=0;G<this.boxKeys.length;G++)N.push({key:this.boxKeys[G],x1:this.bboxes[4*G],y1:this.bboxes[4*G+1],x2:this.bboxes[4*G+2],y2:this.bboxes[4*G+3]});for(let G=0;G<this.circleKeys.length;G++){const X=this.circles[3*G],ie=this.circles[3*G+1],se=this.circles[3*G+2];N.push({key:this.circleKeys[G],x1:X-se,y1:ie-se,x2:X+se,y2:ie+se})}}else this._forEachCell(r,c,m,v,this._queryCell,N,{hitTest:I,overlapMode:T,seenUids:{box:{},circle:{}}},D);return N}query(r,c,m,v){return this._query(r,c,m,v,!1,null)}hitTest(r,c,m,v,I,T){return this._query(r,c,m,v,!0,I,T).length>0}hitTestCircle(r,c,m,v,I){const T=r-m,D=r+m,N=c-m,G=c+m;if(D<0||T>this.width||G<0||N>this.height)return!1;const X=[];return this._forEachCell(T,N,D,G,this._queryCellCircle,X,{hitTest:!0,overlapMode:v,circle:{x:r,y:c,radius:m},seenUids:{box:{},circle:{}}},I),X.length>0}_queryCell(r,c,m,v,I,T,D,N){const{seenUids:G,hitTest:X,overlapMode:ie}=D,se=this.boxCells[I];if(se!==null){const _e=this.bboxes;for(const De of se)if(!G.box[De]){G.box[De]=!0;const ke=4*De,Re=this.boxKeys[De];if(r<=_e[ke+2]&&c<=_e[ke+3]&&m>=_e[ke+0]&&v>=_e[ke+1]&&(!N||N(Re))&&(!X||!mn(ie,Re.overlapMode))&&(T.push({key:Re,x1:_e[ke],y1:_e[ke+1],x2:_e[ke+2],y2:_e[ke+3]}),X))return!0}}const fe=this.circleCells[I];if(fe!==null){const _e=this.circles;for(const De of fe)if(!G.circle[De]){G.circle[De]=!0;const ke=3*De,Re=this.circleKeys[De];if(this._circleAndRectCollide(_e[ke],_e[ke+1],_e[ke+2],r,c,m,v)&&(!N||N(Re))&&(!X||!mn(ie,Re.overlapMode))){const $e=_e[ke],qe=_e[ke+1],Ke=_e[ke+2];if(T.push({key:Re,x1:$e-Ke,y1:qe-Ke,x2:$e+Ke,y2:qe+Ke}),X)return!0}}}return!1}_queryCellCircle(r,c,m,v,I,T,D,N){const{circle:G,seenUids:X,overlapMode:ie}=D,se=this.boxCells[I];if(se!==null){const _e=this.bboxes;for(const De of se)if(!X.box[De]){X.box[De]=!0;const ke=4*De,Re=this.boxKeys[De];if(this._circleAndRectCollide(G.x,G.y,G.radius,_e[ke+0],_e[ke+1],_e[ke+2],_e[ke+3])&&(!N||N(Re))&&!mn(ie,Re.overlapMode))return T.push(!0),!0}}const fe=this.circleCells[I];if(fe!==null){const _e=this.circles;for(const De of fe)if(!X.circle[De]){X.circle[De]=!0;const ke=3*De,Re=this.circleKeys[De];if(this._circlesCollide(_e[ke],_e[ke+1],_e[ke+2],G.x,G.y,G.radius)&&(!N||N(Re))&&!mn(ie,Re.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,m,v,I,T,D,N){const G=this._convertToXCellCoord(r),X=this._convertToYCellCoord(c),ie=this._convertToXCellCoord(m),se=this._convertToYCellCoord(v);for(let fe=G;fe<=ie;fe++)for(let _e=X;_e<=se;_e++)if(I.call(this,r,c,m,v,this.xCellCount*_e+fe,T,D,N))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,m,v,I,T){const D=v-r,N=I-c,G=m+T;return G*G>D*D+N*N}_circleAndRectCollide(r,c,m,v,I,T,D){const N=(T-v)/2,G=Math.abs(r-(v+N));if(G>N+m)return!1;const X=(D-I)/2,ie=Math.abs(c-(I+X));if(ie>X+m)return!1;if(G<=N||ie<=X)return!0;const se=G-N,fe=ie-X;return se*se+fe*fe<=m*m}}function Un(w,r,c){const m=s.K();if(!w){const{vecSouth:ie,vecEast:se}=Vt(r),fe=y();fe[0]=se[0],fe[1]=se[1],fe[2]=ie[0],fe[3]=ie[1],v=fe,(X=(T=(I=fe)[0])*(G=I[3])-(N=I[2])*(D=I[1]))&&(v[0]=G*(X=1/X),v[1]=-D*X,v[2]=-N*X,v[3]=T*X),m[0]=fe[0],m[1]=fe[1],m[4]=fe[2],m[5]=fe[3]}var v,I,T,D,N,G,X;return s.M(m,m,[1/c,1/c,1]),m}function Jn(w,r,c,m){if(w){const v=s.K();if(!r){const{vecSouth:I,vecEast:T}=Vt(c);v[0]=T[0],v[1]=T[1],v[4]=I[0],v[5]=I[1]}return s.M(v,v,[m,m,1]),v}return c.pixelsToClipSpaceMatrix}function Vt(w){const r=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),m=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),I=Math.sin(w.bearingInRadians),T=s.ao();T[0]=-v*m*c-I*r,T[1]=-I*m*c+v*r;const D=s.ap(T);D<1e-9?s.aq(T):s.ar(T,T,1/D);const N=s.ao();N[0]=v*m*r-I*c,N[1]=I*m*r+v*c;const G=s.ap(N);return G<1e-9?s.aq(N):s.ar(N,N,1/G),{vecEast:N,vecSouth:T}}function $n(w,r,c,m){let v;m?(v=[w,r,m(w,r),1],s.at(v,v,c)):(v=[w,r,0,1],li(v,v,c));const I=v[3];return{point:new s.P(v[0]/I,v[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function Ar(w,r){return .5+w/r*.5}function Ur(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function wr(w,r,c,m,v,I,T,D,N,G,X,ie,se){const fe=c?w.textSizeData:w.iconSizeData,_e=s.ak(fe,r.transform.zoom),De=[256/r.width*2+1,256/r.height*2+1],ke=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ke.clear();const Re=w.lineVertexArray,$e=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,qe=r.transform.width/r.transform.height;let Ke=!1;for(let Je=0;Je<$e.length;Je++){const lt=$e.get(Je);if(lt.hidden||lt.writingMode===s.al.vertical&&!Ke){Gi(lt.numGlyphs,ke);continue}Ke=!1;const it=new s.P(lt.anchorX,lt.anchorY),xt={getElevation:se,pitchedLabelPlaneMatrix:m,lineVertexArray:Re,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:it,unwrappedTileID:N,width:G,height:X,translation:ie},Ct=_h(lt.anchorX,lt.anchorY,xt);if(!Ur(Ct.point,De)){Gi(lt.numGlyphs,ke);continue}const vt=Ar(r.transform.cameraToCenterDistance,Ct.signedDistanceFromCamera),$t=s.am(fe,_e,lt),Nt=I?$t*r.transform.getPitchedTextCorrection(lt.anchorX,lt.anchorY,N)/vt:$t*vt,hn=Bn({projectionContext:xt,pitchedLabelPlaneMatrixInverse:v,symbol:lt,fontSize:Nt,flip:!1,keepUpright:T,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ke,aspectRatio:qe,rotateToLine:D});Ke=hn.useVertical,(hn.notEnoughRoom||Ke||hn.needsFlipping&&Bn({projectionContext:xt,pitchedLabelPlaneMatrixInverse:v,symbol:lt,fontSize:Nt,flip:!0,keepUpright:T,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ke,aspectRatio:qe,rotateToLine:D}).notEnoughRoom)&&Gi(lt.numGlyphs,ke)}c?w.text.dynamicLayoutVertexBuffer.updateData(ke):w.icon.dynamicLayoutVertexBuffer.updateData(ke)}function Ht(w,r,c,m,v,I,T,D){const N=I.glyphStartIndex+I.numGlyphs,G=I.lineStartIndex,X=I.lineStartIndex+I.lineLength,ie=r.getoffsetX(I.glyphStartIndex),se=r.getoffsetX(N-1),fe=$l(w*ie,c,m,v,I.segment,G,X,D,T);if(!fe)return null;const _e=$l(w*se,c,m,v,I.segment,G,X,D,T);return _e?D.projectionCache.anyProjectionOccluded?null:{first:fe,last:_e}:null}function bn(w,r,c,m){return w===s.al.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*m?{useVertical:!0}:(w===s.al.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function Bn(w){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:m,fontSize:v,flip:I,keepUpright:T,glyphOffsetArray:D,dynamicLayoutVertexArray:N,aspectRatio:G,rotateToLine:X}=w,ie=v/24,se=m.lineOffsetX*ie,fe=m.lineOffsetY*ie;let _e;if(m.numGlyphs>1){const De=m.glyphStartIndex+m.numGlyphs,ke=m.lineStartIndex,Re=m.lineStartIndex+m.lineLength,$e=Ht(ie,D,se,fe,I,m,X,r);if(!$e)return{notEnoughRoom:!0};const qe=Yn($e.first.point.x,$e.first.point.y,r,c),Ke=Yn($e.last.point.x,$e.last.point.y,r,c);if(T&&!I){const Je=bn(m.writingMode,qe,Ke,G);if(Je)return Je}_e=[$e.first];for(let Je=m.glyphStartIndex+1;Je<De-1;Je++)_e.push($l(ie*D.getoffsetX(Je),se,fe,I,m.segment,ke,Re,r,X));_e.push($e.last)}else{if(T&&!I){const ke=oi(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,Re=m.lineStartIndex+m.segment+1,$e=new s.P(r.lineVertexArray.getx(Re),r.lineVertexArray.gety(Re)),qe=oi($e.x,$e.y,r),Ke=qe.signedDistanceFromCamera>0?qe.point:Ws(r.tileAnchorPoint,$e,ke,1,r),Je=Yn(ke.x,ke.y,r,c),lt=Yn(Ke.x,Ke.y,r,c),it=bn(m.writingMode,Je,lt,G);if(it)return it}const De=$l(ie*D.getoffsetX(m.glyphStartIndex),se,fe,I,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,r,X);if(!De||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};_e=[De]}for(const De of _e)s.as(N,De.point,De.angle);return{}}function Ws(w,r,c,m,v){const I=w.add(w.sub(r)._unit()),T=oi(I.x,I.y,v).point,D=c.sub(T);return c.add(D._mult(m/D.mag()))}function Os(w,r,c){const m=r.projectionCache;if(m.projections[w])return m.projections[w];const v=new s.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),I=oi(v.x,v.y,r);if(I.signedDistanceFromCamera>0)return m.projections[w]=I.point,m.anyProjectionOccluded=m.anyProjectionOccluded||I.isOccluded,I.point;const T=w-c.direction;return Ws(c.distanceFromAnchor===0?r.tileAnchorPoint:new s.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function oi(w,r,c){const m=w+c.translation[0],v=r+c.translation[1];let I;return c.pitchWithMap?(I=$n(m,v,c.pitchedLabelPlaneMatrix,c.getElevation),I.isOccluded=!1):(I=c.transform.projectTileCoordinates(m,v,c.unwrappedTileID,c.getElevation),I.point.x=(.5*I.point.x+.5)*c.width,I.point.y=(.5*-I.point.y+.5)*c.height),I}function Yn(w,r,c,m){if(c.pitchWithMap){const v=[w,r,0,1];return s.at(v,v,m),c.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:r/c.height*2-1}}function _h(w,r,c){return c.transform.projectTileCoordinates(w,r,c.unwrappedTileID,c.getElevation)}function Su(w,r,c){return w._unit()._perp()._mult(r*c)}function Ad(w,r,c,m,v,I,T,D,N){if(D.projectionCache.offsets[w])return D.projectionCache.offsets[w];const G=c.add(r);if(w+N.direction<m||w+N.direction>=v)return D.projectionCache.offsets[w]=G,G;const X=Os(w+N.direction,D,N),ie=Su(X.sub(c),T,N.direction),se=c.add(ie),fe=X.add(ie);return D.projectionCache.offsets[w]=s.au(I,G,se,fe)||G,D.projectionCache.offsets[w]}function $l(w,r,c,m,v,I,T,D,N){const G=m?w-r:w+r;let X=G>0?1:-1,ie=0;m&&(X*=-1,ie=Math.PI),X<0&&(ie+=Math.PI);let se,fe=X>0?I+v:I+v+1;D.projectionCache.cachedAnchorPoint?se=D.projectionCache.cachedAnchorPoint:(se=oi(D.tileAnchorPoint.x,D.tileAnchorPoint.y,D).point,D.projectionCache.cachedAnchorPoint=se);let _e,De,ke=se,Re=se,$e=0,qe=0;const Ke=Math.abs(G),Je=[];let lt;for(;$e+qe<=Ke;){if(fe+=X,fe<I||fe>=T)return null;$e+=qe,Re=ke,De=_e;const Ct={absOffsetX:Ke,direction:X,distanceFromAnchor:$e,previousVertex:Re};if(ke=Os(fe,D,Ct),c===0)Je.push(Re),lt=ke.sub(Re);else{let vt;const $t=ke.sub(Re);vt=$t.mag()===0?Su(Os(fe+X,D,Ct).sub(ke),c,X):Su($t,c,X),De||(De=Re.add(vt)),_e=Ad(fe,vt,ke,I,T,De,c,D,Ct),Je.push(De),lt=_e.sub(De)}qe=lt.mag()}const it=lt._mult((Ke-$e)/qe)._add(De||Re),xt=ie+Math.atan2(ke.y-Re.y,ke.x-Re.x);return Je.push(it),{point:it,angle:N?xt:0,path:Je}}const wd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Gi(w,r){for(let c=0;c<w;c++){const m=r.length;r.resize(m+4),r.float32.set(wd,3*m)}}function li(w,r,c){const m=r[0],v=r[1];return w[0]=c[0]*m+c[4]*v+c[12],w[1]=c[1]*m+c[5]*v+c[13],w[3]=c[3]*m+c[7]*v+c[15],w}const Zi=100;class bh{constructor(r,c=new gn(r.width+200,r.height+200,25),m=new gn(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=m,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Zi,this.screenBottomBoundary=r.height+Zi,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,m,v,I,T,D,N,G,X,ie,se){const fe=this.projectAndGetPerspectiveRatio(r.anchorPointX+N[0],r.anchorPointY+N[1],I,X,se),_e=m*fe.perspectiveRatio;let De;if(T||D)De=this._projectCollisionBox(r,_e,v,I,T,D,N,fe,X,ie,se);else{const lt=fe.x+(ie?ie.x*_e:0),it=fe.y+(ie?ie.y*_e:0);De={allPointsOccluded:!1,box:[lt+r.x1*_e,it+r.y1*_e,lt+r.x2*_e,it+r.y2*_e]}}const[ke,Re,$e,qe]=De.box,Ke=T?De.allPointsOccluded:fe.isOccluded;let Je=Ke;return Je||(Je=fe.perspectiveRatio<this.perspectiveRatioCutoff),Je||(Je=!this.isInsideGrid(ke,Re,$e,qe)),Je||c!=="always"&&this.grid.hitTest(ke,Re,$e,qe,c,G)?{box:[ke,Re,$e,qe],placeable:!1,offscreen:!1,occluded:Ke}:{box:[ke,Re,$e,qe],placeable:!0,offscreen:this.isOffscreen(ke,Re,$e,qe),occluded:Ke}}placeCollisionCircles(r,c,m,v,I,T,D,N,G,X,ie,se,fe,_e){const De=[],ke=new s.P(c.anchorX,c.anchorY),Re=this.getPerspectiveRatio(ke.x,ke.y,T,_e),$e=(G?I*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,T)/Re:I*Re)/s.ay,qe={getElevation:_e,pitchedLabelPlaneMatrix:D,lineVertexArray:m,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ke,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:fe},Ke=Ht($e,v,c.lineOffsetX*$e,c.lineOffsetY*$e,!1,c,!1,qe);let Je=!1,lt=!1,it=!0;if(Ke){const xt=.5*ie*Re+se,Ct=new s.P(-100,-100),vt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),$t=new Yt,Nt=Ke.first,hn=Ke.last;let on=[];for(let Zn=Nt.path.length-1;Zn>=1;Zn--)on.push(Nt.path[Zn]);for(let Zn=1;Zn<hn.path.length;Zn++)on.push(hn.path[Zn]);const Xt=2.5*xt;if(G){const Zn=this.projectPathToScreenSpace(on,qe);on=Zn.some(Wn=>Wn.signedDistanceFromCamera<=0)?[]:Zn.map(Wn=>Wn.point)}let Dn=[];if(on.length>0){const Zn=on[0].clone(),Wn=on[0].clone();for(let ni=1;ni<on.length;ni++)Zn.x=Math.min(Zn.x,on[ni].x),Zn.y=Math.min(Zn.y,on[ni].y),Wn.x=Math.max(Wn.x,on[ni].x),Wn.y=Math.max(Wn.y,on[ni].y);Dn=Zn.x>=Ct.x&&Wn.x<=vt.x&&Zn.y>=Ct.y&&Wn.y<=vt.y?[on]:Wn.x<Ct.x||Zn.x>vt.x||Wn.y<Ct.y||Zn.y>vt.y?[]:s.av([on],Ct.x,Ct.y,vt.x,vt.y)}for(const Zn of Dn){$t.reset(Zn,.25*xt);let Wn=0;Wn=$t.length<=.5*xt?1:Math.ceil($t.paddedLength/Xt)+1;for(let ni=0;ni<Wn;ni++){const zr=ni/Math.max(Wn-1,1),ui=$t.lerp(zr),si=ui.x+Zi,or=ui.y+Zi;De.push(si,or,xt,0);const pr=si-xt,Xi=or-xt,Qi=si+xt,Ji=or+xt;if(it=it&&this.isOffscreen(pr,Xi,Qi,Ji),lt=lt||this.isInsideGrid(pr,Xi,Qi,Ji),r!=="always"&&this.grid.hitTestCircle(si,or,xt,r,X)&&(Je=!0,!N))return{circles:[],offscreen:!1,collisionDetected:Je}}}}return{circles:!N&&Je||!lt||Re<this.perspectiveRatioCutoff?[]:De,offscreen:it,collisionDetected:Je}}projectPathToScreenSpace(r,c){const m=function(v,I){const T=s.K();return s.an(T,I.pitchedLabelPlaneMatrix),v.map(D=>{const N=$n(D.x,D.y,T,I.getElevation),G=I.transform.projectTileCoordinates(N.point.x,N.point.y,I.unwrappedTileID,I.getElevation);return G.point.x=(.5*G.point.x+.5)*I.width,G.point.y=(.5*-G.point.y+.5)*I.height,G})}(r,c);return function(v){let I=0,T=0,D=0,N=0;for(let G=0;G<v.length;G++)v[G].isOccluded?(D=G+1,N=0):(N++,N>T&&(T=N,I=D));return v.slice(I,I+T)}(m)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,v=1/0,I=-1/0,T=-1/0;for(const X of r){const ie=new s.P(X.x+Zi,X.y+Zi);m=Math.min(m,ie.x),v=Math.min(v,ie.y),I=Math.max(I,ie.x),T=Math.max(T,ie.y),c.push(ie)}const D=this.grid.query(m,v,I,T).concat(this.ignoredGrid.query(m,v,I,T)),N={},G={};for(const X of D){const ie=X.key;if(N[ie.bucketInstanceId]===void 0&&(N[ie.bucketInstanceId]={}),N[ie.bucketInstanceId][ie.featureIndex])continue;const se=[new s.P(X.x1,X.y1),new s.P(X.x2,X.y1),new s.P(X.x2,X.y2),new s.P(X.x1,X.y2)];s.aw(c,se)&&(N[ie.bucketInstanceId][ie.featureIndex]=!0,G[ie.bucketInstanceId]===void 0&&(G[ie.bucketInstanceId]=[]),G[ie.bucketInstanceId].push(ie.featureIndex))}return G}insertCollisionBox(r,c,m,v,I,T){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:I,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,m,v,I,T){const D=m?this.ignoredGrid:this.grid,N={bucketInstanceId:v,featureIndex:I,collisionGroupID:T,overlapMode:c};for(let G=0;G<r.length;G+=4)D.insertCircle(N,r[G],r[G+1],r[G+2])}projectAndGetPerspectiveRatio(r,c,m,v,I){if(I){let T;v?(T=[r,c,v(r,c),1],s.at(T,T,I)):(T=[r,c,0,1],li(T,T,I));const D=T[3];return{x:(T[0]/D+1)/2*this.transform.width+Zi,y:(-T[1]/D+1)/2*this.transform.height+Zi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/D*.5,isOccluded:!1,signedDistanceFromCamera:D}}{const T=this.transform.projectTileCoordinates(r,c,m,v);return{x:(T.point.x+1)/2*this.transform.width+Zi,y:(1-T.point.y)/2*this.transform.height+Zi,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,m,v){const I=this.transform.projectTileCoordinates(r,c,m,v);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(r,c,m,v){return m<Zi||r>=this.screenRightBoundary||v<Zi||c>this.screenBottomBoundary}isInsideGrid(r,c,m,v){return m>=0&&r<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=s.ad([]);return s.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,m,v,I,T,D,N,G,X,ie){let se=1,fe=0,_e=0,De=1;const ke=r.anchorPointX+D[0],Re=r.anchorPointY+D[1];if(T&&!I){const on=this.projectAndGetPerspectiveRatio(ke+1,Re,v,G,ie),Xt=on.x-N.x,Dn=Math.atan((on.y-N.y)/Xt)+(Xt<0?Math.PI:0),Zn=Math.sin(Dn),Wn=Math.cos(Dn);se=Wn,fe=Zn,_e=-Zn,De=Wn}else if(!T&&I){const on=Vt(this.transform);se=on.vecEast[0],fe=on.vecEast[1],_e=on.vecSouth[0],De=on.vecSouth[1]}let $e=N.x,qe=N.y,Ke=c;I&&($e=ke,qe=Re,Ke=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Ke*=this.transform.getPitchedTextCorrection(ke,Re,v),X||(Ke*=s.ae(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),X&&($e+=se*X.x*Ke+_e*X.y*Ke,qe+=fe*X.x*Ke+De*X.y*Ke);const Je=r.x1*Ke,lt=r.x2*Ke,it=(Je+lt)/2,xt=r.y1*Ke,Ct=r.y2*Ke,vt=(xt+Ct)/2,$t=[{offsetX:Je,offsetY:xt},{offsetX:it,offsetY:xt},{offsetX:lt,offsetY:xt},{offsetX:lt,offsetY:vt},{offsetX:lt,offsetY:Ct},{offsetX:it,offsetY:Ct},{offsetX:Je,offsetY:Ct},{offsetX:Je,offsetY:vt}];let Nt=[];for(const{offsetX:on,offsetY:Xt}of $t)Nt.push(new s.P($e+se*on+_e*Xt,qe+fe*on+De*Xt));let hn=!1;if(I){const on=Nt.map(Xt=>this.projectAndGetPerspectiveRatio(Xt.x,Xt.y,v,G,ie));hn=on.some(Xt=>!Xt.isOccluded),Nt=on.map(Xt=>new s.P(Xt.x,Xt.y))}else hn=!0;return{box:s.ax(Nt),allPointsOccluded:!hn}}}class Cd{constructor(r,c,m,v){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class co{constructor(r,c,m,v,I){this.text=new Cd(r?r.text:null,c,m,I),this.icon=new Cd(r?r.icon:null,c,v,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Hl{constructor(r,c,m){this.text=r,this.icon=c,this.skipFade=m}}class op{constructor(r,c,m,v,I){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=I}}class lp{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[r]}}function up(w,r,c,m,v){const{horizontalAlign:I,verticalAlign:T}=s.aE(w);return new s.P(-(I-.5)*r+m[0]*v,-(T-.5)*c+m[1]*v)}class _c{constructor(r,c,m,v,I){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new bh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new lp(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(m,v)=>c.getElevation(r,m,v):null}getBucketParts(r,c,m,v){const I=m.getBucket(c),T=m.latestFeatureIndex;if(!I||!T||c.id!==I.layerIds[0])return;const D=m.collisionBoxArray,N=I.layers[0].layout,G=I.layers[0].paint,X=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),ie=m.tileSize/s.Z,se=m.tileID.toUnwrapped(),fe=N.get("text-rotation-alignment")==="map",_e=s.az(m,1,this.transform.zoom),De=s.aA(this.collisionIndex.transform,m,G.get("text-translate"),G.get("text-translate-anchor")),ke=s.aA(this.collisionIndex.transform,m,G.get("icon-translate"),G.get("icon-translate-anchor")),Re=Un(fe,this.transform,_e);this.retainedQueryData[I.bucketInstanceId]=new op(I.bucketInstanceId,T,I.sourceLayerIndex,I.index,m.tileID);const $e={bucket:I,layout:N,translationText:De,translationIcon:ke,unwrappedTileID:se,pitchedLabelPlaneMatrix:Re,scale:X,textPixelRatio:ie,holdingForFade:m.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:s.ak(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(v)for(const qe of I.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:Je,symbolInstanceEnd:lt}=qe;r.push({sortKey:Ke,symbolInstanceStart:Je,symbolInstanceEnd:lt,parameters:$e})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:$e})}attemptAnchorPlacement(r,c,m,v,I,T,D,N,G,X,ie,se,fe,_e,De,ke,Re,$e,qe,Ke){const Je=s.aB[r.textAnchor],lt=[r.textOffset0,r.textOffset1],it=up(Je,m,v,lt,I),xt=this.collisionIndex.placeCollisionBox(c,se,N,G,X,D,T,ke,ie.predicate,qe,it,Ke);if((!$e||this.collisionIndex.placeCollisionBox($e,se,N,G,X,D,T,Re,ie.predicate,qe,it,Ke).placeable)&&xt.placeable){let Ct;if(this.prevPlacement&&this.prevPlacement.variableOffsets[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID].text&&(Ct=this.prevPlacement.variableOffsets[fe.crossTileID].anchor),fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[fe.crossTileID]={textOffset:lt,width:m,height:v,anchor:Je,textBoxScale:I,prevAnchor:Ct},this.markUsedJustification(_e,Je,fe,De),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,De,fe),this.placedOrientations[fe.crossTileID]=De),{shift:it,placedGlyphBoxes:xt}}}placeLayerBucketPart(r,c,m){const{bucket:v,layout:I,translationText:T,translationIcon:D,unwrappedTileID:N,pitchedLabelPlaneMatrix:G,textPixelRatio:X,holdingForFade:ie,collisionBoxArray:se,partiallyEvaluatedTextSize:fe,collisionGroup:_e}=r.parameters,De=I.get("text-optional"),ke=I.get("icon-optional"),Re=s.aC(I,"text-overlap","text-allow-overlap"),$e=Re==="always",qe=s.aC(I,"icon-overlap","icon-allow-overlap"),Ke=qe==="always",Je=I.get("text-rotation-alignment")==="map",lt=I.get("text-pitch-alignment")==="map",it=I.get("icon-text-fit")!=="none",xt=I.get("symbol-z-order")==="viewport-y",Ct=$e&&(Ke||!v.hasIconData()||ke),vt=Ke&&($e||!v.hasTextData()||De);!v.collisionArrays&&se&&v.deserializeCollisionBoxes(se);const $t=this.retainedQueryData[v.bucketInstanceId].tileID,Nt=this._getTerrainElevationFunc($t),hn=this.transform.getFastPathSimpleProjectionMatrix($t),on=(Xt,Dn,Zn)=>{var Wn,ni;if(c[Xt.crossTileID])return;if(ie)return void(this.placements[Xt.crossTileID]=new Hl(!1,!1,!1));let zr=!1,ui=!1,si=!0,or=null,pr={box:null,placeable:!1,offscreen:null,occluded:!1},Xi={placeable:!1},Qi=null,Ji=null,Ps=null,Xa=0,Al=0,bo=0;Dn.textFeatureIndex?Xa=Dn.textFeatureIndex:Xt.useRuntimeCollisionCircles&&(Xa=Xt.featureIndex),Dn.verticalTextFeatureIndex&&(Al=Dn.verticalTextFeatureIndex);const xo=Dn.textBox;if(xo){const _a=_i=>{let ci=s.al.horizontal;if(v.allowVerticalPlacement&&!_i&&this.prevPlacement){const Mi=this.prevPlacement.placedOrientations[Xt.crossTileID];Mi&&(this.placedOrientations[Xt.crossTileID]=Mi,ci=Mi,this.markUsedOrientation(v,ci,Xt))}return ci},wl=(_i,ci)=>{if(v.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&Dn.verticalTextBox){for(const Mi of v.writingModes)if(Mi===s.al.vertical?(pr=ci(),Xi=pr):pr=_i(),pr&&pr.placeable)break}else pr=_i()},Ao=Xt.textAnchorOffsetStartIndex,Cl=Xt.textAnchorOffsetEndIndex;if(Cl===Ao){const _i=(ci,Mi)=>{const hi=this.collisionIndex.placeCollisionBox(ci,Re,X,$t,N,lt,Je,T,_e.predicate,Nt,void 0,hn);return hi&&hi.placeable&&(this.markUsedOrientation(v,Mi,Xt),this.placedOrientations[Xt.crossTileID]=Mi),hi};wl(()=>_i(xo,s.al.horizontal),()=>{const ci=Dn.verticalTextBox;return v.allowVerticalPlacement&&Xt.numVerticalGlyphVertices>0&&ci?_i(ci,s.al.vertical):{box:null,offscreen:null}}),_a(pr&&pr.placeable)}else{let _i=s.aB[(ni=(Wn=this.prevPlacement)===null||Wn===void 0?void 0:Wn.variableOffsets[Xt.crossTileID])===null||ni===void 0?void 0:ni.anchor];const ci=(hi,_g,ru)=>{const bg=hi.x2-hi.x1,ta=hi.y2-hi.y1,Qa=Xt.textBoxScale,xg=it&&qe==="never"?_g:null;let Ta=null,wo=Re==="never"?1:2,iu="never";_i&&wo++;for(let jp=0;jp<wo;jp++){for(let jc=Ao;jc<Cl;jc++){const Up=v.textAnchorOffsets.get(jc);if(_i&&Up.textAnchor!==_i)continue;const nf=this.attemptAnchorPlacement(Up,hi,bg,ta,Qa,Je,lt,X,$t,N,_e,iu,Xt,v,ru,T,D,xg,Nt);if(nf&&(Ta=nf.placedGlyphBoxes,Ta&&Ta.placeable))return zr=!0,or=nf.shift,Ta}_i?_i=null:iu=Re}return m&&!Ta&&(Ta={box:this.collisionIndex.placeCollisionBox(xo,"always",X,$t,N,lt,Je,T,_e.predicate,Nt,void 0,hn).box,offscreen:!1,placeable:!1,occluded:!1}),Ta};wl(()=>ci(xo,Dn.iconBox,s.al.horizontal),()=>{const hi=Dn.verticalTextBox;return v.allowVerticalPlacement&&(!pr||!pr.placeable)&&Xt.numVerticalGlyphVertices>0&&hi?ci(hi,Dn.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),pr&&(zr=pr.placeable,si=pr.offscreen);const Mi=_a(pr&&pr.placeable);if(!zr&&this.prevPlacement){const hi=this.prevPlacement.variableOffsets[Xt.crossTileID];hi&&(this.variableOffsets[Xt.crossTileID]=hi,this.markUsedJustification(v,hi.anchor,Xt,Mi))}}}if(Qi=pr,zr=Qi&&Qi.placeable,si=Qi&&Qi.offscreen,Xt.useRuntimeCollisionCircles){const _a=v.text.placedSymbolArray.get(Xt.centerJustifiedTextSymbolIndex),wl=s.am(v.textSizeData,fe,_a),Ao=I.get("text-padding");Ji=this.collisionIndex.placeCollisionCircles(Re,_a,v.lineVertexArray,v.glyphOffsetArray,wl,N,G,m,lt,_e.predicate,Xt.collisionCircleDiameter,Ao,T,Nt),Ji.circles.length&&Ji.collisionDetected&&!m&&s.w("Collisions detected, but collision boxes are not shown"),zr=$e||Ji.circles.length>0&&!Ji.collisionDetected,si=si&&Ji.offscreen}if(Dn.iconFeatureIndex&&(bo=Dn.iconFeatureIndex),Dn.iconBox){const _a=wl=>this.collisionIndex.placeCollisionBox(wl,qe,X,$t,N,lt,Je,D,_e.predicate,Nt,it&&or?or:void 0,hn);Xi&&Xi.placeable&&Dn.verticalIconBox?(Ps=_a(Dn.verticalIconBox),ui=Ps.placeable):(Ps=_a(Dn.iconBox),ui=Ps.placeable),si=si&&Ps.offscreen}const ks=De||Xt.numHorizontalGlyphVertices===0&&Xt.numVerticalGlyphVertices===0,qu=ke||Xt.numIconVertices===0;ks||qu?qu?ks||(ui=ui&&zr):zr=ui&&zr:ui=zr=ui&&zr;const va=ui&&Ps.placeable;if(zr&&Qi.placeable&&this.collisionIndex.insertCollisionBox(Qi.box,Re,I.get("text-ignore-placement"),v.bucketInstanceId,Xi&&Xi.placeable&&Al?Al:Xa,_e.ID),va&&this.collisionIndex.insertCollisionBox(Ps.box,qe,I.get("icon-ignore-placement"),v.bucketInstanceId,bo,_e.ID),Ji&&zr&&this.collisionIndex.insertCollisionCircles(Ji.circles,Re,I.get("text-ignore-placement"),v.bucketInstanceId,Xa,_e.ID),m&&this.storeCollisionData(v.bucketInstanceId,Zn,Dn,Qi,Ps,Ji),Xt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xt.crossTileID]=new Hl((zr||Ct)&&!(Qi!=null&&Qi.occluded),(ui||vt)&&!(Ps!=null&&Ps.occluded),si||v.justReloaded),c[Xt.crossTileID]=!0};if(xt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xt=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Dn=Xt.length-1;Dn>=0;--Dn){const Zn=Xt[Dn];on(v.symbolInstances.get(Zn),v.collisionArrays[Zn],Zn)}}else for(let Xt=r.symbolInstanceStart;Xt<r.symbolInstanceEnd;Xt++)on(v.symbolInstances.get(Xt),v.collisionArrays[Xt],Xt);v.justReloaded=!1}storeCollisionData(r,c,m,v,I,T){if(m.textBox||m.iconBox){let D,N;this.collisionBoxArrays.has(r)?D=this.collisionBoxArrays.get(r):(D=new Map,this.collisionBoxArrays.set(r,D)),D.has(c)?N=D.get(c):(N={text:null,icon:null},D.set(c,N)),m.textBox&&(N.text=v.box),m.iconBox&&(N.icon=I.box)}if(T){let D=this.collisionCircleArrays[r];D===void 0&&(D=this.collisionCircleArrays[r]=[]);for(let N=0;N<T.circles.length;N+=4)D.push(T.circles[N+0]-Zi),D.push(T.circles[N+1]-Zi),D.push(T.circles[N+2]),D.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,m,v){let I;I=v===s.al.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[s.aD(c)];const T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const D of T)D>=0&&(r.text.placedSymbolArray.get(D).crossTileID=I>=0&&D!==I?0:m.crossTileID)}markUsedOrientation(r,c,m){const v=c===s.al.horizontal||c===s.al.horizontalOnly?c:0,I=c===s.al.vertical?c:0,T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const D of T)r.text.placedSymbolArray.get(D).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(r):1,I=c?c.opacities:{},T=c?c.variableOffsets:{},D=c?c.placedOrientations:{};for(const N in this.placements){const G=this.placements[N],X=I[N];X?(this.opacities[N]=new co(X,v,G.text,G.icon),m=m||G.text!==X.text.placed||G.icon!==X.icon.placed):(this.opacities[N]=new co(null,v,G.text,G.icon,G.skipFade),m=m||G.text||G.icon)}for(const N in I){const G=I[N];if(!this.opacities[N]){const X=new co(G,v,!1,!1);X.isHidden()||(this.opacities[N]=X,m=m||G.text.placed||G.icon.placed)}}for(const N in T)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=T[N]);for(const N in D)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=D[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const m={};for(const v of c){const I=v.getBucket(r);I&&v.latestFeatureIndex&&r.id===I.layerIds[0]&&this.updateBucketOpacities(I,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(r,c,m,v){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const I=r.layers[0],T=I.layout,D=new co(null,0,!1,!1,!0),N=T.get("text-allow-overlap"),G=T.get("icon-allow-overlap"),X=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ie=T.get("text-rotation-alignment")==="map",se=T.get("text-pitch-alignment")==="map",fe=T.get("icon-text-fit")!=="none",_e=new co(null,0,N&&(G||!r.hasIconData()||T.get("icon-optional")),G&&(N||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&v&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(v);const De=(Re,$e,qe)=>{for(let Ke=0;Ke<$e/4;Ke++)Re.opacityVertexArray.emplaceBack(qe);Re.hasVisibleVertices=Re.hasVisibleVertices||qe!==Gl},ke=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Re=0;Re<r.symbolInstances.length;Re++){const $e=r.symbolInstances.get(Re),{numHorizontalGlyphVertices:qe,numVerticalGlyphVertices:Ke,crossTileID:Je}=$e;let lt=this.opacities[Je];m[Je]?lt=D:lt||(lt=_e,this.opacities[Je]=lt),m[Je]=!0;const it=$e.numIconVertices>0,xt=this.placedOrientations[$e.crossTileID],Ct=xt===s.al.vertical,vt=xt===s.al.horizontal||xt===s.al.horizontalOnly;if(qe>0||Ke>0){const Nt=bc(lt.text);De(r.text,qe,Ct?Gl:Nt),De(r.text,Ke,vt?Gl:Nt);const hn=lt.text.isHidden();[$e.rightJustifiedTextSymbolIndex,$e.centerJustifiedTextSymbolIndex,$e.leftJustifiedTextSymbolIndex].forEach(Dn=>{Dn>=0&&(r.text.placedSymbolArray.get(Dn).hidden=hn||Ct?1:0)}),$e.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get($e.verticalPlacedTextSymbolIndex).hidden=hn||vt?1:0);const on=this.variableOffsets[$e.crossTileID];on&&this.markUsedJustification(r,on.anchor,$e,xt);const Xt=this.placedOrientations[$e.crossTileID];Xt&&(this.markUsedJustification(r,"left",$e,Xt),this.markUsedOrientation(r,Xt,$e))}if(it){const Nt=bc(lt.icon),hn=!(fe&&$e.verticalPlacedIconSymbolIndex&&Ct);$e.placedIconSymbolIndex>=0&&(De(r.icon,$e.numIconVertices,hn?Nt:Gl),r.icon.placedSymbolArray.get($e.placedIconSymbolIndex).hidden=lt.icon.isHidden()),$e.verticalPlacedIconSymbolIndex>=0&&(De(r.icon,$e.numVerticalIconVertices,hn?Gl:Nt),r.icon.placedSymbolArray.get($e.verticalPlacedIconSymbolIndex).hidden=lt.icon.isHidden())}const $t=ke&&ke.has(Re)?ke.get(Re):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Nt=r.collisionArrays[Re];if(Nt){let hn=new s.P(0,0);if(Nt.textBox||Nt.verticalTextBox){let on=!0;if(X){const Xt=this.variableOffsets[Je];Xt?(hn=up(Xt.anchor,Xt.width,Xt.height,Xt.textOffset,Xt.textBoxScale),ie&&hn._rotate(se?-this.transform.bearingInRadians:this.transform.bearingInRadians)):on=!1}if(Nt.textBox||Nt.verticalTextBox){let Xt;Nt.textBox&&(Xt=Ct),Nt.verticalTextBox&&(Xt=vt),cp(r.textCollisionBox.collisionVertexArray,lt.text.placed,!on||Xt,$t.text,hn.x,hn.y)}}if(Nt.iconBox||Nt.verticalIconBox){const on=!!(!vt&&Nt.verticalIconBox);let Xt;Nt.iconBox&&(Xt=on),Nt.verticalIconBox&&(Xt=!on),cp(r.iconCollisionBox.collisionVertexArray,lt.icon.placed,Xt,$t.icon,fe?hn.x:0,fe?hn.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>r}setStale(){this.stale=!0}}function cp(w,r,c,m,v,I){m&&m.length!==0||(m=[0,0,0,0]);const T=m[0]-Zi,D=m[1]-Zi,N=m[2]-Zi,G=m[3]-Zi;w.emplaceBack(r?1:0,c?1:0,v||0,I||0,T,D),w.emplaceBack(r?1:0,c?1:0,v||0,I||0,N,D),w.emplaceBack(r?1:0,c?1:0,v||0,I||0,N,G),w.emplaceBack(r?1:0,c?1:0,v||0,I||0,T,G)}const hv=Math.pow(2,25),Wm=Math.pow(2,24),qm=Math.pow(2,17),hp=Math.pow(2,16),Id=Math.pow(2,9),dp=Math.pow(2,8),Md=Math.pow(2,1);function bc(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,c=Math.floor(127*w.opacity);return c*hv+r*Wm+c*qm+r*hp+c*Id+r*dp+c*Md+r}const Gl=0;class fp{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,m,v,I){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,v,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((D,N)=>D.sortKey-N.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,I())return!0;return!1}}class xh{constructor(r,c,m,v,I,T,D,N){this.placement=new _c(r,c,T,D,N),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(r,c,m){const v=M.now(),I=()=>!this._forceFullPlacement&&M.now()-v>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=D)&&(!T.maxzoom||T.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new fp(T)),this._inProgressLayer.continuePlacement(m[T.source],this.placement,this._showCollisionBoxes,T,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Eu=512/s.Z/2;class Zl{constructor(r,c,m){this.tileID=r,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let I=0;I<c.length;I++){const T=c.get(I),D=T.key,N=v.get(D);N?N.push(T):v.set(D,[T])}for(const[I,T]of v){const D={positions:T.map(N=>({x:Math.floor(N.anchorX*Eu),y:Math.floor(N.anchorY*Eu)})),crossTileIDs:T.map(N=>N.crossTileID)};if(D.positions.length>128){const N=new s.aF(D.positions.length,16,Uint16Array);for(const{x:G,y:X}of D.positions)N.add(G,X);N.finish(),delete D.positions,D.index=N}this._symbolsByKey[I]=D}}getScaledCoordinates(r,c){const{x:m,y:v,z:I}=this.tileID.canonical,{x:T,y:D,z:N}=c.canonical,G=Eu/Math.pow(2,N-I),X=(D*s.Z+r.anchorY)*G,ie=v*s.Z*Eu;return{x:Math.floor((T*s.Z+r.anchorX)*G-m*s.Z*Eu),y:Math.floor(X-ie)}}findMatches(r,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let I=0;I<r.length;I++){const T=r.get(I);if(T.crossTileID)continue;const D=this._symbolsByKey[T.key];if(!D)continue;const N=this.getScaledCoordinates(T,c);if(D.index){const G=D.index.range(N.x-v,N.y-v,N.x+v,N.y+v).sort();for(const X of G){const ie=D.crossTileIDs[X];if(!m[ie]){m[ie]=!0,T.crossTileID=ie;break}}}else if(D.positions)for(let G=0;G<D.positions.length;G++){const X=D.positions[G],ie=D.crossTileIDs[G];if(Math.abs(X.x-N.x)<=v&&Math.abs(X.y-N.y)<=v&&!m[ie]){m[ie]=!0,T.crossTileID=ie;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Km{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ym{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],I={};for(const T in v){const D=v[T];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+c),I[D.tileID.key]=D}this.indexes[m]=I}this.lng=r}addBucket(r,c,m){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let I=0;I<c.symbolInstances.length;I++)c.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const v=this.usedCrossTileIDs[r.overscaledZ];for(const I in this.indexes){const T=this.indexes[I];if(Number(I)>r.overscaledZ)for(const D in T){const N=T[D];N.tileID.isChildOf(r)&&N.findMatches(c.symbolInstances,r,v)}else{const D=T[r.scaledTo(Number(I)).key];D&&D.findMatches(c.symbolInstances,r,v)}}for(let I=0;I<c.symbolInstances.length;I++){const T=c.symbolInstances.get(I);T.crossTileID||(T.crossTileID=m.generate(),v[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Zl(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const m of c.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[r][v]}removeStaleBuckets(r){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const I in v)r[v[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[I]),delete v[I],c=!0)}return c}}class ho{constructor(){this.layerIndexes={},this.crossTileIDs=new Km,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,m){let v=this.layerIndexes[r.id];v===void 0&&(v=this.layerIndexes[r.id]=new Ym);let I=!1;const T={};v.handleWrapJump(m);for(const D of c){const N=D.getBucket(r);N&&r.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(D.tileID,N,this.crossTileIDs)&&(I=!0),T[N.bucketInstanceId]=!0)}return v.removeStaleBuckets(T)&&(I=!0),I}pruneUnusedLayers(r){const c={};r.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}var Wl="void main() {fragColor=vec4(1.0);}";const er={prelude:vr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:vr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:vr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:vr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:vr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:vr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:vr(Wl,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:vr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:vr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:vr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:vr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:vr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:vr(Wl,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:vr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:vr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:vr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:vr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:vr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:vr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:vr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:vr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:vr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:vr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:vr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:vr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:vr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:vr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:vr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:vr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:vr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:vr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:vr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function vr(w,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=r.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=I?I.concat(v):v,D={};return{fragmentSource:w=w.replace(c,(N,G,X,ie,se)=>(D[se]=!0,G==="define"?`
#ifndef HAS_UNIFORM_u_${se}
in ${X} ${ie} ${se};
#else
uniform ${X} ${ie} u_${se};
#endif
`:`
#ifdef HAS_UNIFORM_u_${se}
    ${X} ${ie} ${se} = u_${se};
#endif
`)),vertexSource:r=r.replace(c,(N,G,X,ie,se)=>{const fe=ie==="float"?"vec2":"vec4",_e=se.match(/color/)?"color":fe;return D[se]?G==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
in ${X} ${fe} a_${se};
out ${X} ${ie} ${se};
#else
uniform ${X} ${ie} u_${se};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = a_${se};
#else
    ${X} ${ie} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${se} = unpack_mix_${_e}(a_${se}, u_${se}_t);
#else
    ${X} ${ie} ${se} = u_${se};
#endif
`:G==="define"?`
#ifndef HAS_UNIFORM_u_${se}
uniform lowp float u_${se}_t;
in ${X} ${fe} a_${se};
#else
uniform ${X} ${ie} u_${se};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${se}
    ${X} ${ie} ${se} = a_${se};
#else
    ${X} ${ie} ${se} = u_${se};
#endif
`:`
#ifndef HAS_UNIFORM_u_${se}
    ${X} ${ie} ${se} = unpack_mix_${_e}(a_${se}, u_${se}_t);
#else
    ${X} ${ie} ${se} = u_${se};
#endif
`}),staticAttributes:m,staticUniforms:T}}class Tu{constructor(r,c,m){this.vertexBuffer=r,this.indexBuffer=c,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var $o=s.aG([{name:"a_pos",type:"Int16",components:2}]);const qs="#define PROJECTION_MERCATOR",Ss="mercator";class vi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ss}get shaderDefine(){return qs}get shaderPreludeCode(){return er.projectionMercator}get vertexShaderPreludeCode(){return er.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,m,v,I){if(this._cachedMesh)return this._cachedMesh;const T=new s.aI;T.emplaceBack(0,0),T.emplaceBack(s.Z,0),T.emplaceBack(0,s.Z),T.emplaceBack(s.Z,s.Z);const D=r.createVertexBuffer(T,$o.members),N=s.aJ.simpleSegment(0,0,4,2),G=new s.aK;G.emplaceBack(1,0,2),G.emplaceBack(1,2,3);const X=r.createIndexBuffer(G);return this._cachedMesh=new Tu(D,X,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class xc{constructor(r=0,c=0,m=0,v=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=m,this.right=v}interpolate(r,c,m){return c.top!=null&&r.top!=null&&(this.top=s.B.number(r.top,c.top,m)),c.bottom!=null&&r.bottom!=null&&(this.bottom=s.B.number(r.bottom,c.bottom,m)),c.left!=null&&r.left!=null&&(this.left=s.B.number(r.left,c.left,m)),c.right!=null&&r.right!=null&&(this.right=s.B.number(r.right,c.right,m)),this}getCenter(r,c){const m=s.ae((this.left+r-this.right)/2,0,r),v=s.ae((this.top+c-this.bottom)/2,0,c);return new s.P(m,v)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new xc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Es(w,r){if(!w.renderWorldCopies||w.lngRange)return;const c=r.lng-w.center.lng;r.lng+=c>180?-360:c<-180?360:0}function Ia(w){return Math.max(0,Math.floor(w))}class Ks{constructor(r,c,m,v,I,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=c||0,this._maxZoom=m||22,this._minPitch=v??0,this._maxPitch=I??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Ia(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new xc,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,m){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=Ia(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new xc(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!m&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=s.aL(r,-180,180)*Math.PI/180;var m,v,I,T,D,N,G,X,ie;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=y(),m=this._rotationMatrix,I=-this._bearingInRadians,T=(v=this._rotationMatrix)[0],D=v[1],N=v[2],G=v[3],X=Math.sin(I),ie=Math.cos(I),m[0]=T*ie+N*X,m[1]=D*ie+G*X,m[2]=T*-X+N*ie,m[3]=D*-X+G*ie)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=s.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(r){r=s.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=s.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=s.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,m){this._unmodified=!1,this._edgeInsets.interpolate(r,c,m),this._constrain(),this._calcMatrices()}resize(r,c,m=!0){this._width=r,this._height=c,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new $([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{let m=r.x,v=r.y,I=r.x,T=r.y;for(const D of c)m=Math.min(m,D.x),v=Math.min(v,D.y),I=Math.max(I,D.x),T=Math.max(T,D.y);return[new s.P(m,v),new s.P(I,v),new s.P(I,T),new s.P(m,T),new s.P(m,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(m),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=s.ad(new Float64Array(16));s.M(r,r,[this._width/2,-this._height/2,1]),s.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=s.ad(new Float64Array(16)),s.M(r,r,[1,-1,1]),s.L(r,r,[-1,-1,0]),s.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,m,v){const I=m!==void 0?m:this.bearing,T=v=v!==void 0?v:this.pitch,D=s.$.fromLngLat(r,c),N=-Math.cos(s.ab(T)),G=Math.sin(s.ab(T)),X=G*Math.sin(s.ab(I)),ie=-G*Math.cos(s.ab(I));let se=this.elevation;const fe=c-se;let _e;N*fe>=0||Math.abs(N)<.1?(_e=1e4,se=c+_e*N):_e=-fe/N;let De,ke,Re=s.aN(1,D.y),$e=0;do{if($e+=1,$e>10)break;ke=_e/Re,De=new s.$(D.x+X*ke,D.y+ie*ke),Re=1/De.meterInMercatorCoordinateUnits()}while(Math.abs(_e-ke*Re)>1e-12);return{center:De.toLngLat(),elevation:se,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/ke/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=s.ag(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/c,v=s.$.fromLngLat(this.center,this.elevation),I=ge(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(I.toLngLat(),s.aN(I.z,v.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=s.ag(1,this.center.lat)*this.worldSize;return ge(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/s.Z,1/c/s.Z]}}class gl{constructor(r,c){this.min=r,this.max=c,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],m=s.aQ(this.min),v=s.aQ(this.max);for(let I=0;I<c.length;I++)m[I]=c[I]?this.min[I]:this.center[I],v[I]=c[I]?this.center[I]:this.max[I];return v[2]=this.max[2],new gl(m,v)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let m=0;m<r.planes.length;m++){const v=this.intersectsPlane(r.planes[m]);if(v===0)return 0;v===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],m=r[3];for(let v=0;v<3;v++)r[v]>0?(c+=r[v]*this.min[v],m+=r[v]*this.max[v]):(m+=r[v]*this.min[v],c+=r[v]*this.max[v]);return c>=0?2:m<0?0:1}}class Ah{distanceToTile2d(r,c,m,v){const I=v.distanceX([r,c]),T=v.distanceY([r,c]);return Math.hypot(I,T)}getWrap(r,c,m){return m}getTileAABB(r,c,m,v){var I,T;let D=m,N=m;if(v.terrain){const X=new s.Y(r.z,c,r.z,r.x,r.y),ie=v.terrain.getMinMaxElevation(X);D=(I=ie.minElevation)!==null&&I!==void 0?I:m,N=(T=ie.maxElevation)!==null&&T!==void 0?T:m}const G=1<<r.z;return new gl([c+r.x/G,r.y/G,D],[c+(r.x+1)/G,(r.y+1)/G,N])}allowVariableZoom(r,c){const m=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,v=s.ae(78.5-m/2,0,60);return!!c.terrain||r.pitch>v}allowWorldCopies(){return!0}recalculateCache(){}}class Ci{constructor(r,c,m){this.points=r,this.planes=c,this.aabb=m}static fromInvProjectionMatrix(r,c=1,m=0){const v=Math.pow(2,m),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(G=>{const X=1/(G=s.at([],G,r))[3]/c*v;return s.aR(G,G,[X,X,1/G[3],X])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(G=>{const X=s.aS([],I[G[0]],I[G[1]]),ie=s.aS([],I[G[2]],I[G[1]]),se=s.aT([],s.aU([],X,ie)),fe=-s.aV(se,I[G[1]]);return se.concat(fe)}),D=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const G of I)for(let X=0;X<3;X++)D[X]=Math.min(D[X],G[X]),N[X]=Math.max(N[X],G[X]);return new Ci(I,T,new gl(D,N))}}class Ho{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,m=!0){this._helper.resize(r,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,m,v,I){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ks({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,D)=>this.getConstrained(T,D)},r,c,m,v,I),this._coveringTilesDetailsProvider=new Ah}clone(){const r=new Ho;return r.apply(this),r}apply(r,c,m){this._helper.apply(r,c,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new s.aW(0,r)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new s.P(0,0)),v=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),D=Math.floor(Math.min(m.x,v.x,I.x,T.x)),N=Math.floor(Math.max(m.x,v.x,I.x,T.x)),G=1;for(let X=D-G;X<=N+G;X++)X!==0&&c.push(new s.aW(X,r))}return c}getCameraFrustum(){return Ci.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),m=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(r,c){const m=s.ag(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(c,m),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),T=s.$.fromLngLat(r),D=new s.$(T.x-(v.x-I.x),T.y-(v.y-I.y));this.setCenter(D==null?void 0:D.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(s.$.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(r))}screenPointToLocation(r,c){var m;return(m=this.screenPointToMercatorCoordinate(r,c))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const m=c.pointCoordinate(r);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const m=c||0,v=[r.x,r.y,0,1],I=[r.x,r.y,1,1];s.at(v,v,this._pixelMatrixInverse),s.at(I,I,this._pixelMatrixInverse);const T=v[3],D=I[3],N=v[1]/T,G=I[1]/D,X=v[2]/T,ie=I[2]/D,se=X===ie?0:(m-X)/(ie-X);return new s.$(s.B.number(v[0]/T,I[0]/D,se)/this.worldSize,s.B.number(N,G,se)/this.worldSize,m)}coordinatePoint(r,c=0,m=this._pixelMatrix){const v=[r.x*this.worldSize,r.y*this.worldSize,c,1];return s.at(v,v,m),new s.P(v[0]/v[3],v[1]/v[3])}getBounds(){const r=Math.max(0,this._helper._height/2-Xe(this));return new $().extend(this.screenPointToLocation(new s.P(0,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-Xe(this)}calculatePosMatrix(r,c=!1,m){var v;const I=(v=r.key)!==null&&v!==void 0?v:s.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=c?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(I)){const G=T.get(I);return m?G.f32:G.f64}const D=de(r,this.worldSize);s.N(D,c?this._alignedProjMatrix:this._viewProjMatrix,D);const N={f64:D,f32:new Float32Array(D)};return T.set(I,N),m?N.f32:N.f64}calculateFogMatrix(r){const c=r.key,m=this._fogMatrixCacheF32;if(m.has(c))return m.get(c);const v=de(r,this.worldSize);return s.N(v,this._fogMatrix,v),m.set(c,new Float32Array(v)),m.get(c)}getConstrained(r,c){c=s.ae(+c,this.minZoom,this.maxZoom);const m={center:new s.Q(r.lng,r.lat),zoom:c};let v=this._helper._lngRange;this._helper._renderWorldCopies||v!==null||(v=[-179.9999999999,180-1e-10]);const I=this.tileSize*s.ac(m.zoom);let T=0,D=I,N=0,G=I,X=0,ie=0;const{x:se,y:fe}=this.size;if(this._helper._latRange){const qe=this._helper._latRange;T=s.S(qe[1])*I,D=s.S(qe[0])*I,D-T<fe&&(X=fe/(D-T))}v&&(N=s.aL(s.U(v[0])*I,0,I),G=s.aL(s.U(v[1])*I,0,I),G<N&&(G+=I),G-N<se&&(ie=se/(G-N)));const{x:_e,y:De}=qt(I,r);let ke,Re;const $e=Math.max(ie||0,X||0);if($e){const qe=new s.P(ie?(G+N)/2:_e,X?(D+T)/2:De);return m.center=Cn(I,qe).wrap(),m.zoom+=s.ah($e),m}if(this._helper._latRange){const qe=fe/2;De-qe<T&&(Re=T+qe),De+qe>D&&(Re=D-qe)}if(v){const qe=(N+G)/2;let Ke=_e;this._helper._renderWorldCopies&&(Ke=s.aL(_e,qe-I/2,qe+I/2));const Je=se/2;Ke-Je<N&&(ke=N+Je),Ke+Je>G&&(ke=G-Je)}if(ke!==void 0||Re!==void 0){const qe=new s.P(ke??_e,Re??De);m.center=Cn(I,qe).wrap()}return m}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}_calculateNearFarZIfNeeded(r,c,m){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=r-v*this._helper._pixelPerMeter/Math.cos(c),T=v<0?I:r,D=Math.PI/2+this.pitchInRadians,N=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+m.y/this.height),G=Math.sin(N)*T/Math.sin(s.ae(Math.PI-D-N,.01,Math.PI-.01)),X=Xe(this),ie=Math.atan(X/this._helper.cameraToCenterDistance),se=s.ab(.75),fe=ie>se?2*ie*(.5+m.y/(2*X)):se,_e=Math.sin(fe)*T/Math.sin(s.ae(Math.PI-D-fe,.01,Math.PI-.01)),De=Math.min(G,_e);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*De+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=qt(this.worldSize,this.center),m=c.x,v=c.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;const I=s.ab(Math.min(this.pitch,jt)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let D;this._calculateNearFarZIfNeeded(T,I,r),D=new Float64Array(16),s.aY(D,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,D),D[8]=2*-r.x/this._helper._width,D[9]=2*r.y/this._helper._height,this._projectionMatrix=s.aZ(D),s.M(D,D,[1,-1,1]),s.L(D,D,[0,0,-this._helper.cameraToCenterDistance]),s.a_(D,D,-this.rollInRadians),s.a$(D,D,this.pitchInRadians),s.a_(D,D,-this.bearingInRadians),s.L(D,D,[-m,-v,0]),this._mercatorMatrix=s.M([],D,[this.worldSize,this.worldSize,this.worldSize]),s.M(D,D,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,D),s.L(D,D,[0,0,-this.elevation]),this._viewProjMatrix=D,this._invViewProjMatrix=s.an([],D);const N=[0,0,-1,1];s.at(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-m,-v,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,D);const G=this._helper._width%2/2,X=this._helper._height%2/2,ie=Math.cos(this.bearingInRadians),se=Math.sin(-this.bearingInRadians),fe=m-Math.round(m)+ie*G+se*X,_e=v-Math.round(v)+ie*X+se*G,De=new Float64Array(D);if(s.L(De,De,[fe>.5?fe-1:fe,_e>.5?_e-1:_e,0]),this._alignedProjMatrix=De,D=s.an(new Float64Array(16),this._pixelMatrix),!D)throw new Error("failed to invert matrix");this._pixelMatrixInverse=D,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new s.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return s.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=s.ag(1,this.center.lat)*this.worldSize;return ge(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const m=s.$.fromLngLat(r),v=[m.x*this.worldSize,m.y*this.worldSize,c,1];return s.at(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(r){const{overscaledTileID:c,aligned:m,applyTerrainMatrix:v}=r,I=this._helper.getMercatorTileCoordinates(c),T=c?this.calculatePosMatrix(c,m,!0):null;let D;return D=c&&c.terrainRttPosMatrix32f&&v?c.terrainRttPosMatrix32f:T||s.b0(),{mainMatrix:D,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:D}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,m){return 1}transformLightDirection(r){return s.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,m,v){const I=this.calculatePosMatrix(m);let T;v?(T=[r,c,v(r,c),1],s.at(T,T,I)):(T=[r,c,0,1],li(T,T,I));const D=T[3];return{point:new s.P(T[0]/D,T[1]/D),signedDistanceFromCamera:D,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const m=s.$.fromLngLat(r,c),v=m.meterInMercatorCoordinateUnits(),I=s.b1();return s.L(I,I,[m.x,m.y,m.z]),s.a_(I,I,Math.PI),s.a$(I,I,Math.PI/2),s.M(I,I,[-v,v,v]),I}getProjectionDataForCustomLayer(r=!0){const c=new s.Y(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),v=de(c,this.worldSize);s.N(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];const I=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],T=s.b2();return s.M(T,v,I),m.fallbackMatrix=T,m.mainMatrix=T,m}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function ql(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Pu(w){if(w.useSlerp)if(w.k<1){const r=s.b3(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=s.b3(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),m=new Float64Array(4);s.b4(m,r,c,w.k);const v=s.b5(m);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(s.B.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(s.B.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(s.B.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Wa(w,r,c,m,v){const I=v.padding,T=qt(v.worldSize,c.getNorthWest()),D=qt(v.worldSize,c.getNorthEast()),N=qt(v.worldSize,c.getSouthEast()),G=qt(v.worldSize,c.getSouthWest()),X=s.ab(-m),ie=T.rotate(X),se=D.rotate(X),fe=N.rotate(X),_e=G.rotate(X),De=new s.P(Math.max(ie.x,se.x,_e.x,fe.x),Math.max(ie.y,se.y,_e.y,fe.y)),ke=new s.P(Math.min(ie.x,se.x,_e.x,fe.x),Math.min(ie.y,se.y,_e.y,fe.y)),Re=De.sub(ke),$e=(v.width-(I.left+I.right+r.left+r.right))/Re.x,qe=(v.height-(I.top+I.bottom+r.top+r.bottom))/Re.y;if(qe<0||$e<0)return void ql();const Ke=Math.min(s.ah(v.scale*Math.min($e,qe)),w.maxZoom),Je=s.P.convert(w.offset),lt=new s.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(s.ab(m)),it=Je.add(lt).mult(v.scale/s.ac(Ke));return{center:Cn(v.worldSize,T.add(N).div(2).sub(it)),zoom:Ke,bearing:m}}class wh{get useGlobeControls(){return!1}handlePanInertia(r,c){return{easingOffset:r,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,m){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(m,r.around)}cameraForBoxAndBearing(r,c,m,v,I){return Wa(r,c,m,v,I)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(s.Q.convert(c.center))}handleEaseTo(r,c){const m=r.zoom,v=r.padding,I={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},D=c.zoom!==void 0,N=!r.isPaddingEqual(c.padding);let G=!1;const X=D?+c.zoom:r.zoom;let ie=r.centerPoint.add(c.offsetAsPoint);const se=r.screenPointToLocation(ie),{center:fe,zoom:_e}=r.getConstrained(s.Q.convert(c.center||se),X??m);Es(r,fe);const De=qt(r.worldSize,se),ke=qt(r.worldSize,fe).sub(De),Re=s.ac(_e-m);return G=_e!==m,{easeFunc:$e=>{if(G&&r.setZoom(s.B.number(m,_e,$e)),s.b6(I,T)||Pu({startEulerAngles:I,endEulerAngles:T,tr:r,k:$e,useSlerp:I.roll!=T.roll}),N&&(r.interpolatePadding(v,c.padding,$e),ie=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const qe=s.ac(r.zoom-m),Ke=_e>m?Math.min(2,Re):Math.max(.5,Re),Je=Math.pow(Ke,1-$e),lt=Cn(r.worldSize,De.add(ke.mult($e*Je)).mult(qe));r.setLocationAtPoint(r.renderWorldCopies?lt.wrap():lt,ie)}},isZooming:G,elevationCenter:fe}}handleFlyTo(r,c){const m=c.zoom!==void 0,v=r.zoom,I=r.getConstrained(s.Q.convert(c.center||c.locationAtOffset),m?+c.zoom:v),T=I.center,D=I.zoom;Es(r,T);const N=qt(r.worldSize,c.locationAtOffset),G=qt(r.worldSize,T).sub(N),X=G.mag(),ie=s.ac(D-v);let se;if(c.minZoom!==void 0){const fe=Math.min(+c.minZoom,v,D),_e=r.getConstrained(T,fe).zoom;se=s.ac(_e-v)}return{easeFunc:(fe,_e,De,ke)=>{r.setZoom(fe===1?D:v+s.ah(_e));const Re=fe===1?T:Cn(r.worldSize,N.add(G.mult(De)).mult(_e));r.setLocationAtPoint(r.renderWorldCopies?Re.wrap():Re,ke)},scaleOfZoom:ie,targetCenter:T,scaleOfMinZoom:se,pixelPathLength:X}}}class Nr{constructor(r,c,m){this.blendFunction=r,this.blendColor=c,this.mask=m}}Nr.Replace=[1,0],Nr.disabled=new Nr(Nr.Replace,s.b7.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,s.b7.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,771],s.b7.transparent,[!0,!0,!0,!0]);const pp=2305;class Pr{constructor(r,c,m){this.enable=r,this.mode=c,this.frontFace=m}}Pr.disabled=new Pr(!1,1029,pp),Pr.backCCW=new Pr(!0,1029,pp),Pr.frontCCW=new Pr(!0,1028,pp);class kn{constructor(r,c,m){this.func=r,this.mask=c,this.range=m}}kn.ReadOnly=!1,kn.ReadWrite=!0,kn.disabled=new kn(519,kn.ReadOnly,[0,1]);const $r=7680;class xr{constructor(r,c,m,v,I,T){this.test=r,this.ref=c,this.mask=m,this.fail=v,this.depthFail=I,this.pass=T}}xr.disabled=new xr({func:519,mask:0},0,0,$r,$r,$r);const Ch=new WeakMap;function fo(w){var r;if(Ch.has(w))return Ch.get(w);{const c=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ch.set(w,c),c}}class Ac{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,m=c.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const v=new s.aI;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const I=new s.aK;I.emplaceBack(0,1,2),this._fullscreenTriangle=new Tu(c.createVertexBuffer(v,$o.members),c.createIndexBuffer(I),s.aJ.simpleSegment(0,0,v.length,I.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(m.TEXTURE1);const T=m.createTexture();m.bindTexture(m.TEXTURE_2D,T),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),fo(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,kn.disabled,xr.disabled,Nr.unblended,Pr.disabled,((I,T)=>({u_input:I,u_output_expected:T}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&fo(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const I=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&fo(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Ac._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const Sd=s.Z/128;function Ed(w,r){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,m=c+(w.generateBorders?2:0),v=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),I=m+1,T=v+1,D=w.generateBorders?-1:0,N=w.generateBorders||w.extendToNorthPole?-1:0,G=c+(w.generateBorders?1:0),X=c+(w.generateBorders||w.extendToSouthPole?1:0),ie=I*T,se=m*v*6,fe=I*T>65536;if(fe&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const _e=fe||r==="32bit",De=new Int16Array(2*ie);let ke=0;for(let qe=N;qe<=X;qe++)for(let Ke=D;Ke<=G;Ke++){let Je=Ke/c*s.Z;Ke===-1&&(Je=-64),Ke===c+1&&(Je=s.Z+Sd);let lt=qe/c*s.Z;qe===-1&&(lt=w.extendToNorthPole?s.b9:-64),qe===c+1&&(lt=w.extendToSouthPole?s.ba:s.Z+Sd),De[ke++]=Je,De[ke++]=lt}const Re=_e?new Uint32Array(se):new Uint16Array(se);let $e=0;for(let qe=0;qe<v;qe++)for(let Ke=0;Ke<m;Ke++){const Je=Ke+1+qe*I,lt=Ke+(qe+1)*I,it=Ke+1+(qe+1)*I;Re[$e++]=Ke+qe*I,Re[$e++]=lt,Re[$e++]=Je,Re[$e++]=Je,Re[$e++]=lt,Re[$e++]=it}return{vertices:De.buffer.slice(0),indices:Re.buffer.slice(0),uses32bitIndices:_e}}const ku=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class Ih{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return er.projectionGlobe}get vertexShaderPreludeCode(){return er.projectionMercator.vertexSource}get subdivisionGranularity(){return ku}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Ac(r));const c=s.S(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(c,m),I=M.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=I);const T=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,m,v,I){const T=(I==="stencil"?ku.stencil:ku.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:T,generateBorders:m,extendToNorthPole:c.y===0&&v,extendToSouthPole:c.y===(1<<c.z)-1&&v})}_getMesh(r,c){const m=this._getMeshKey(c);if(m in this._tileMeshCache)return this._tileMeshCache[m];const v=function(I,T){const D=Ed(T,"16bit"),N=s.aI.deserialize({arrayBuffer:D.vertices,length:D.vertices.byteLength/2/2}),G=s.aK.deserialize({arrayBuffer:D.indices,length:D.indices.byteLength/2/3});return new Tu(I.createVertexBuffer(N,$o.members),I.createIndexBuffer(G),s.aJ.simpleSegment(0,0,N.length,G.length))}(r,c);return this._tileMeshCache[m]=v,v}recalculate(r){}hasTransition(){const r=M.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Wi=new s.r({type:new s.D(s.v.projection.type)});class Td extends s.E{constructor(r){super(),this._transitionable=new s.T(Wi),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new vi,this._verticalPerspectiveProjection=new Ih}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof s.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,m,v,I){return this.currentProjection.getMeshFromTileID(r,c,m,v,I)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Go(w){const r=Ys(w.worldSize,w.center.lat);return 2*Math.PI*r}function Lu(w,r,c,m,v){const I=1/(1<<v),T=r/s.Z*I+m*I,D=s.bg((w/s.Z*I+c*I)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,G=Math.cos(N),X=new Float64Array(3);return X[0]=Math.sin(D)*G,X[1]=Math.sin(N),X[2]=Math.cos(D)*G,X}function ms(w){return function(r,c){const m=Math.cos(c),v=new Float64Array(3);return v[0]=Math.sin(r)*m,v[1]=Math.sin(c),v[2]=Math.cos(r)*m,v}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Ys(w,r){return w/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Xs(w){const r=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const m=w[0]/c,v=Math.acos(w[2]/c),I=(m>0?v:-v)/Math.PI*180;return new s.Q(s.aL(I,-180,180),r)}return new s.Q(0,r)}function Du(w){return Math.cos(w*Math.PI/180)}function ei(w,r){const c=Du(w),m=Du(r);return s.ah(m/c)}function wc(w,r){const c=w.rotate(r.bearingInRadians),m=r.zoom+ei(r.center.lat,0),v=s.bc(1/Du(r.center.lat),1/Du(Math.min(Math.abs(r.center.lat),60)),s.bf(m,7,3,0,1)),I=360/Go({worldSize:r.worldSize,center:{lat:r.center.lat}});return new s.Q(r.center.lng-c.x*I*v,s.ae(r.center.lat+c.y*I,-85.051129,s.af))}function Mh(w){const r=.5*w,c=Math.sin(r),m=Math.cos(r);return Math.log(c+m)-Math.log(m-c)}function Pd(w,r,c,m){const v=w.lat+c*m;if(Math.abs(c)>1){const I=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,T=Math.abs(w.lat+c)*Math.PI/180,D=Mh(I+m*(T-I)),N=Mh(I),G=Mh(T);return new s.Q(w.lng+r*((D-N)/(G-N)),v)}return new s.Q(w.lng+r*m,v)}class gs{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,c,m,v){const I=`${r.z}_${r.x}_${r.y}`,T=this._cache.get(I);if(T)return T;const D=this._cachePrevious.get(I);if(D)return this._cache.set(I,D),D;const N=this._aabbFactory(r,c,m,v);return this._cache.set(I,N),this._hadAnyChanges=!0,N}}function kd(w,r,c){const m=w-r;return m<0?-m:Math.max(0,m-c)}function da(w,r,c,m,v){const I=w-c;let T;return T=I<0?Math.min(-I,1+I-v):I>1?Math.min(Math.max(I-v,0),1-I):0,Math.max(T,kd(r,m,v))}class dv{constructor(){this._aabbCache=new gs(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,c,m,v){const I=1<<m.z,T=1/I,D=m.x/I,N=m.y/I;let G=2;return G=Math.min(G,da(r,c,D,N,T)),G=Math.min(G,da(r,c,D+.5,-N-T,T)),G=Math.min(G,da(r,c,D+.5,2-N-T,T)),G}getWrap(r,c,m){const v=1<<c.z,I=1/v,T=c.x/v,D=kd(r.x,T,I),N=kd(r.x,T-1,I),G=kd(r.x,T+1,I),X=Math.min(D,N,G);return X===G?1:X===N?-1:0}allowVariableZoom(r,c){return dt(r,c)>4}allowWorldCopies(){return!1}getTileAABB(r,c,m,v){return this._aabbCache.getTileAABB(r,c,m,v)}_computeTileAABB(r,c,m,v){if(r.z<=0)return new gl([-1,-1,-1],[1,1,1]);if(r.z===1)return new gl([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{const I=[Lu(0,0,r.x,r.y,r.z),Lu(s.Z,0,r.x,r.y,r.z),Lu(s.Z,s.Z,r.x,r.y,r.z),Lu(0,s.Z,r.x,r.y,r.z)],T=[1,1,1],D=[-1,-1,-1];for(const N of I)for(let G=0;G<3;G++)T[G]=Math.min(T[G],N[G]),D[G]=Math.max(D[G],N[G]);if(r.y===0||r.y===(1<<r.z)-1){const N=[0,r.y===0?1:-1,0];for(let G=0;G<3;G++)T[G]=Math.min(T[G],N[G]),D[G]=Math.max(D[G],N[G])}return new gl(T,D)}}}class Sh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ks({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new dv}clone(){const r=new Sh;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=s.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:m}=r,v=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,m=this.cameraToCenterDistance/r,v=Math.sin(c)*m,I=Math.cos(c)*m+1,T=1/Math.sqrt(v*v+I*I)*1;let D=-v,N=I;const G=Math.sqrt(D*D+N*N);D/=G,N/=G;const X=[0,D,N];s.bl(X,X,[0,0,0],-this.bearingInRadians),s.bm(X,X,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(X,X,[0,0,0],this.center.lng*Math.PI/180);const ie=1/s.bo(X);return s.aO(X,X,ie),[...X,-T*ie]}isLocationOccluded(r){return!this.isSurfacePointVisible(ms(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),I=[Math.sin(c)*v,Math.sin(m),Math.cos(c)*v],T=[I[2],0,-I[0]],D=[0,0,0];s.aU(D,T,I),s.aT(T,T),s.aT(D,D);const N=[0,0,0];return s.aT(N,[T[0]*r[0]+D[0]*r[1]+I[0]*r[2],T[1]*r[0]+D[1]*r[1]+I[1]*r[2],T[2]*r[0]+D[2]*r[1]+I[2]*r[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,m){const v=function(D,N,G){const X=1/(1<<G.z);return new s.$(D/s.Z*X+G.x*X,N/s.Z*X+G.y*X)}(r,c,m.canonical),I=(T=v.y,[s.bg(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(r,c,m,v){const I=m.canonical,T=Lu(r,c,I.x,I.y,I.z),D=1+(v?v(r,c):0)/s.bu,N=[T[0]*D,T[1]*D,T[2]*D,1];s.at(N,N,this._globeViewProjMatrixNoCorrection);const G=this._cachedClippingPlane,X=G[0]*T[0]+G[1]*T[1]+G[2]*T[2]+G[3]<0;return{point:new s.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:X}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Ys(this.worldSize,this.center.lat),c=s.b2(),m=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),s.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;c[8]=2*-v.x/this._helper._width,c[9]=2*v.y/this._helper._height,this._projectionMatrix=s.aZ(c),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,c),s.L(c,c,[0,0,-this.cameraToCenterDistance]),s.a_(c,c,this.rollInRadians),s.a$(c,c,-this.pitchInRadians),s.a_(c,c,this.bearingInRadians),s.L(c,c,[0,0,-r]);const I=s.bh();I[0]=r,I[1]=r,I[2]=r,s.a$(m,c,this.center.lat*Math.PI/180),s.bp(m,m,-this.center.lng*Math.PI/180),s.M(m,m,I),this._globeViewProjMatrixNoCorrection=m,s.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(c,c,-this.center.lng*Math.PI/180),s.M(c,c,I),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,m);const T=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,s.bl(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const D=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(D,D,[1,1,-1]),this._cachedFrustum=Ci.fromInvProjectionMatrix(D)}calculateFogMatrix(r){s.w("calculateFogMatrix is not supported on globe projection.");const c=s.b2();return s.ad(c),c}getVisibleUnwrappedCoordinates(r){return[new s.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=ms(r);s.aO(m,m,1+c/s.bu);const v=s.bk();return s.at(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,m=[new s.P(0,0),new s.P(r,0),new s.P(this.width,0),new s.P(this.width,c),new s.P(this.width,this.height),new s.P(r,this.height),new s.P(0,this.height),new s.P(0,c)],v=[];for(const ie of m)v.push(this.unprojectScreenPoint(ie));let I=0,T=0,D=0,N=0;const G=this.center;for(const ie of v){const se=s.bq(G.lng,ie.lng),fe=s.bq(G.lat,ie.lat);se<T&&(T=se),se>I&&(I=se),fe<N&&(N=fe),fe>D&&(D=fe)}const X=[G.lng+T,G.lat+N,G.lng+I,G.lat+D];return this.isSurfacePointOnScreen([0,1,0])&&(X[3]=90,X[0]=-180,X[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(X[1]=-90,X[0]=-180,X[2]=180),new $(X)}getConstrained(r,c){const m=s.ae(r.lat,-85.051129,s.af),v=s.ae(+c,this.minZoom+ei(0,m),this.maxZoom);return{center:new s.Q(r.lng,m),zoom:v}}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}setLocationAtPoint(r,c){const m=ms(this.unprojectScreenPoint(c)),v=ms(r),I=s.bh();s.br(I);const T=s.bh();s.bn(T,m,I,-this.center.lng*Math.PI/180),s.bm(T,T,I,this.center.lat*Math.PI/180);const D=v[0]*v[0]+v[2]*v[2],N=T[0]*T[0];if(D<N)return;const G=Math.sqrt(D-N),X=-G,ie=s.bs(v[0],v[2],T[0],G),se=s.bs(v[0],v[2],T[0],X),fe=s.bh();s.bn(fe,v,I,-ie);const _e=s.bs(fe[1],fe[2],T[1],T[2]),De=s.bh();s.bn(De,v,I,-se);const ke=s.bs(De[1],De[2],T[1],T[2]),Re=.5*Math.PI,$e=_e>=-Re&&_e<=Re,qe=ke>=-Re&&ke<=Re;let Ke,Je;if($e&&qe){const Ct=this.center.lng*Math.PI/180,vt=this.center.lat*Math.PI/180;s.bv(ie,Ct)+s.bv(_e,vt)<s.bv(se,Ct)+s.bv(ke,vt)?(Ke=ie,Je=_e):(Ke=se,Je=ke)}else if($e)Ke=ie,Je=_e;else{if(!qe)return;Ke=se,Je=ke}const lt=Ke/Math.PI*180,it=Je/Math.PI*180,xt=this.center.lat;this.setCenter(new s.Q(lt,s.ae(it,-90,90))),this.setZoom(this.zoom+ei(xt,this.center.lat))}locationToScreenPoint(r,c){const m=ms(r);if(c){const v=c.getElevationForLngLatZoom(r,this._helper._tileZoom);s.aO(m,m,1+v/s.bu)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(r){const c=s.bk();return s.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new s.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const m=c.pointCoordinate(r);if(m)return m}return s.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var m;return(m=this.screenPointToMercatorCoordinate(r,c))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(r,c){const m=this._cameraPosition,v=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(r){const c=s.bk();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,s.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const m=s.bh();m[0]=c[0]-this._cameraPosition[0],m[1]=c[1]-this._cameraPosition[1],m[2]=c[2]-this._cameraPosition[2];const v=s.bh();return s.aT(v,m),v}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=s.bk();return s.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const m=s.aV(r,c),v=s.bh(),I=s.bh();s.aO(I,c,m),s.aS(v,r,I);const T=1-s.aV(v,v);if(T<0)return null;const D=s.aV(r,r)-1,N=-m+(m<0?1:-1)*Math.sqrt(T),G=D/N,X=N;return{tMin:Math.min(G,X),tMax:Math.max(G,X)}}unprojectScreenPoint(r){const c=this._cameraPosition,m=this.getRayDirectionFromPixel(r),v=this.rayPlanetIntersection(c,m);if(v){const X=s.bh();s.aP(X,c,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);const ie=s.bh();return s.aT(ie,X),Xs(ie)}const I=this._cachedClippingPlane,T=I[0]*m[0]+I[1]*m[1]+I[2]*m[2],D=-s.bt(I,c)/T,N=s.bh();if(D>0)s.aP(N,c,[m[0]*D,m[1]*D,m[2]*D]);else{const X=s.bh();s.aP(X,c,[2*m[0],2*m[1],2*m[2]]);const ie=s.bt(this._cachedClippingPlane,X);s.aS(N,X,[this._cachedClippingPlane[0]*ie,this._cachedClippingPlane[1]*ie,this._cachedClippingPlane[2]*ie])}const G=function(X){const ie=s.bh();return ie[0]=X[0]*-X[3],ie[1]=X[1]*-X[3],ie[2]=X[2]*-X[3],{center:ie,radius:Math.sqrt(1-X[3]*X[3])}}(I);return Xs(function(X,ie,se){const fe=s.bh();s.aS(fe,se,X);const _e=s.bh();return s.bi(_e,X,fe,ie/s.bj(fe)),_e}(G.center,G.radius,N))}getMatrixForModel(r,c){const m=s.Q.convert(r),v=1/s.bu,I=s.b1();return s.bp(I,I,m.lng/180*Math.PI),s.a$(I,I,-m.lat/180*Math.PI),s.L(I,I,[0,0,1+c/s.bu]),s.a$(I,I,.5*Math.PI),s.M(I,I,[v,v,v]),I}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class po{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,m=!0){this._helper.resize(r,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ks({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new Ho,this._verticalPerspectiveTransform=new Sh}clone(){const r=new po;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),m=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:c.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,m){const v=this._mercatorTransform.getPitchedTextCorrection(r,c,m),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,m);return s.bc(v,I,this._globeness)}projectTileCoordinates(r,c,m,v){return this.currentTransform.projectTileCoordinates(r,c,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return m.fallbackMatrix=c.mainMatrix,m}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class fa{get useGlobeControls(){return!0}handlePanInertia(r,c){const m=wc(r,c);return Math.abs(m.lng-c.center.lng)>180&&(m.lng=c.center.lng+179.5*Math.sign(m.lng-c.center.lng)),{easingCenter:m,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const m=r.around,v=c.screenPointToLocation(m);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const I=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const T=c.zoom-I;if(T===0)return;const D=s.bq(c.center.lng,v.lng),N=D/(Math.abs(D/180)+1),G=s.bq(c.center.lat,v.lat),X=c.getRayDirectionFromPixel(m),ie=c.cameraPosition,se=-1*s.aV(ie,X),fe=s.bh();s.aP(fe,ie,[X[0]*se,X[1]*se,X[2]*se]);const _e=s.bo(fe)-1,De=Math.exp(.5*-Math.max(_e-.3,0)),ke=Ys(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Re=s.bf(ke,.9,.5,1,.25),$e=(1-s.ac(-T))*Math.min(De,Re),qe=c.center.lat,Ke=c.zoom,Je=new s.Q(c.center.lng+N*$e,s.ae(c.center.lat+G*$e,-85.051129,s.af));c.setLocationAtPoint(v,m);const lt=c.center,it=s.bf(Math.abs(D),45,85,0,1),xt=s.bf(ke,.75,.35,0,1),Ct=Math.pow(Math.max(it,xt),.25),vt=s.bq(lt.lng,Je.lng),$t=s.bq(lt.lat,Je.lat);c.setCenter(new s.Q(lt.lng+vt*Ct,lt.lat+$t*Ct).wrap()),c.setZoom(Ke+ei(qe,c.center.lat))}handleMapControlsPan(r,c,m){if(!r.panDelta)return;const v=c.center.lat,I=c.zoom;c.setCenter(wc(r.panDelta,c).wrap()),c.setZoom(I+ei(v,c.center.lat))}cameraForBoxAndBearing(r,c,m,v,I){const T=Wa(r,c,m,v,I),D=c.left/I.width*2-1,N=(I.width-c.right)/I.width*2-1,G=c.top/I.height*-2+1,X=(I.height-c.bottom)/I.height*-2+1,ie=s.bq(m.getWest(),m.getEast())<0,se=ie?m.getEast():m.getWest(),fe=ie?m.getWest():m.getEast(),_e=Math.max(m.getNorth(),m.getSouth()),De=Math.min(m.getNorth(),m.getSouth()),ke=se+.5*s.bq(se,fe),Re=_e+.5*s.bq(_e,De),$e=I.clone();$e.setCenter(T.center),$e.setBearing(T.bearing),$e.setPitch(0),$e.setRoll(0),$e.setZoom(T.zoom);const qe=$e.modelViewProjectionMatrix,Ke=[ms(m.getNorthWest()),ms(m.getNorthEast()),ms(m.getSouthWest()),ms(m.getSouthEast()),ms(new s.Q(fe,Re)),ms(new s.Q(se,Re)),ms(new s.Q(ke,_e)),ms(new s.Q(ke,De))],Je=ms(T.center);let lt=Number.POSITIVE_INFINITY;for(const it of Ke)D<0&&(lt=fa.getLesserNonNegativeNonNull(lt,fa.solveVectorScale(it,Je,qe,"x",D))),N>0&&(lt=fa.getLesserNonNegativeNonNull(lt,fa.solveVectorScale(it,Je,qe,"x",N))),G>0&&(lt=fa.getLesserNonNegativeNonNull(lt,fa.solveVectorScale(it,Je,qe,"y",G))),X<0&&(lt=fa.getLesserNonNegativeNonNull(lt,fa.solveVectorScale(it,Je,qe,"y",X)));if(Number.isFinite(lt)&&lt!==0)return T.zoom=$e.zoom+s.ah(lt),T;ql()}handleJumpToCenterZoom(r,c){const m=r.center.lat,v=r.getConstrained(c.center?s.Q.convert(c.center):r.center,r.zoom).center;r.setCenter(v.wrap());const I=c.zoom!==void 0?+c.zoom:r.zoom+ei(m,v.lat);r.zoom!==I&&r.setZoom(I)}handleEaseTo(r,c){const m=r.zoom,v=r.center,I=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},D={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},N=c.zoom!==void 0,G=!r.isPaddingEqual(c.padding);let X=!1;const ie=c.center?s.Q.convert(c.center):v,se=r.getConstrained(ie,m).center;Es(r,se);const fe=r.clone();fe.setCenter(se),fe.setZoom(N?+c.zoom:m+ei(v.lat,ie.lat)),fe.setBearing(c.bearing);const _e=new s.P(s.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),s.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));fe.setLocationAtPoint(se,_e);const De=(c.offset&&c.offsetAsPoint.mag())>0?fe.center:se,ke=N?+c.zoom:m+ei(v.lat,De.lat),Re=m+ei(v.lat,0),$e=ke+ei(De.lat,0),qe=s.bq(v.lng,De.lng),Ke=s.bq(v.lat,De.lat),Je=s.ac($e-Re);return X=ke!==m,{easeFunc:lt=>{if(s.b6(T,D)||Pu({startEulerAngles:T,endEulerAngles:D,tr:r,k:lt,useSlerp:T.roll!=D.roll}),G&&r.interpolatePadding(I,c.padding,lt),c.around)s.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const it=$e>Re?Math.min(2,Je):Math.max(.5,Je),xt=Math.pow(it,1-lt),Ct=Pd(v,qe,Ke,lt*xt);r.setCenter(Ct.wrap())}if(X){const it=s.B.number(Re,$e,lt)+ei(0,r.center.lat);r.setZoom(it)}},isZooming:X,elevationCenter:De}}handleFlyTo(r,c){const m=c.zoom!==void 0,v=r.center,I=r.zoom,T=r.padding,D=!r.isPaddingEqual(c.padding),N=r.getConstrained(s.Q.convert(c.center||c.locationAtOffset),I).center,G=m?+c.zoom:r.zoom+ei(r.center.lat,N.lat),X=r.clone();X.setCenter(N),X.setZoom(G),X.setBearing(c.bearing);const ie=new s.P(s.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),s.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));X.setLocationAtPoint(N,ie);const se=X.center;Es(r,se);const fe=function(Ke,Je,lt){const it=ms(Je),xt=ms(lt),Ct=s.aV(it,xt),vt=Math.acos(Ct),$t=Go(Ke);return vt/(2*Math.PI)*$t}(r,v,se),_e=I+ei(v.lat,0),De=G+ei(se.lat,0),ke=s.ac(De-_e);let Re;if(typeof c.minZoom=="number"){const Ke=+c.minZoom+ei(se.lat,0),Je=Math.min(Ke,_e,De)+ei(0,se.lat),lt=r.getConstrained(se,Je).zoom+ei(se.lat,0);Re=s.ac(lt-_e)}const $e=s.bq(v.lng,se.lng),qe=s.bq(v.lat,se.lat);return{easeFunc:(Ke,Je,lt,it)=>{const xt=Pd(v,$e,qe,lt);D&&r.interpolatePadding(T,c.padding,Ke);const Ct=Ke===1?se:xt;r.setCenter(Ct.wrap());const vt=_e+s.ah(Je);r.setZoom(Ke===1?G:vt+ei(0,Ct.lat))},scaleOfZoom:ke,targetCenter:se,scaleOfMinZoom:Re,pixelPathLength:fe}}static solveVectorScale(r,c,m,v,I){const T=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],D=[m[3],m[7],m[11],m[15]],N=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],G=r[0]*D[0]+r[1]*D[1]+r[2]*D[2],X=c[0]*T[0]+c[1]*T[1]+c[2]*T[2],ie=c[0]*D[0]+c[1]*D[1]+c[2]*D[2];return X+I*G===N+I*ie||D[3]*(N-X)+T[3]*(ie-G)+N*ie==X*G?null:(X+T[3]-I*ie-I*D[3])/(X-N-I*ie+I*G)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class Ru{constructor(r){this._globe=r,this._mercatorCameraHelper=new wh,this._verticalPerspectiveCameraHelper=new fa}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,m){this.currentHelper.handleMapControlsPan(r,c,m)}cameraForBoxAndBearing(r,c,m,v,I){return this.currentHelper.cameraForBoxAndBearing(r,c,m,v,I)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const Qr=(w,r)=>s.x(w,r&&r.filter(c=>c.identifier!=="source.canvas")),mo=s.bw();class Ou extends s.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const m in this.sourceCaches){const v=this.sourceCaches[m].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[m].reload()}},this.map=r,this.dispatcher=new pt(en(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,v)=>this.getGlyphs(m,v)),this.dispatcher.registerMessageHandler("GI",(m,v)=>this.getImages(m,v)),this.imageManager=new ne,this.imageManager.setEventedParent(this),this.glyphManager=new K(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Tt(256,512),this.crossTileSymbolIndex=new ho,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),pn().on(At,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const v=this.sourceCaches[m.sourceId];if(!v)return;const I=v.getSource();if(I&&I.vectorLayerIds)for(const T in this._layers){const D=this._layers[T];D.source===I.id&&this._validateLayer(D)}})}loadURL(r,c={},m){this.fire(new s.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;s.j(v,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,c,m)}).catch(T=>{this._loadStyleRequest=null,T&&!I.signal.aborted&&this.fire(new s.k(T))})}loadJSON(r,c={},m){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,m)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(mo,{validate:!1})}_load(r,c,m){var v,I;const T=c.transformStyle?c.transformStyle(m,r):r;if(!c.validate||!Qr(this,s.y(T))){this._loaded=!0,this.stylesheet=T;for(const D in T.sources)this.addSource(D,T.sources[D],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new Be(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new ut(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const r=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const m=s.bA(c);m.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=m}}_loadSprite(r,c=!1,m=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(I,T,D,N){return s._(this,void 0,void 0,function*(){const G=te(I),X=D>1?"@2x":"",ie={},se={};for(const{id:fe,url:_e}of G){const De=T.transformRequest(Y(_e,X,".json"),"SpriteJSON");ie[fe]=s.j(De,N);const ke=T.transformRequest(Y(_e,X,".png"),"SpriteImage");se[fe]=U.getImage(ke,N)}return yield Promise.all([...Object.values(ie),...Object.values(se)]),function(fe,_e){return s._(this,void 0,void 0,function*(){const De={};for(const ke in fe){De[ke]={};const Re=M.getImageCanvasContext((yield _e[ke]).data),$e=(yield fe[ke]).data;for(const qe in $e){const{width:Ke,height:Je,x:lt,y:it,sdf:xt,pixelRatio:Ct,stretchX:vt,stretchY:$t,content:Nt,textFitWidth:hn,textFitHeight:on}=$e[qe];De[ke][qe]={data:null,pixelRatio:Ct,sdf:xt,stretchX:vt,stretchY:$t,content:Nt,textFitWidth:hn,textFitHeight:on,spriteData:{width:Ke,height:Je,x:lt,y:it,context:Re}}}}return De})}(ie,se)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(I=>{if(this._spriteRequest=null,I)for(const T in I){this._spritesImagesIds[T]=[];const D=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(N=>!(N in I)):[];for(const N of D)this.imageManager.removeImage(N),this._changedImages[N]=!0;for(const N in I[T]){const G=T==="default"?N:`${T}:${N}`;this._spritesImagesIds[T].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,I[T][N],!1):this.imageManager.addImage(G,I[T][N]),c&&(this._changedImages[G]=!0)}}}).catch(I=>{this._spriteRequest=null,v=I,this.fire(new s.k(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),m&&m(v)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const m=r.sourceLayer;if(!m)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const m=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?s.bB(m):m);const v=[];for(const I of r)if(m[I]){const T=c?s.bB(m[I]):m[I];v.push(T)}return v}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const v=this._layers[m];v.type!=="custom"&&(r[m]=v.serialize())}return r}hasTransitions(){var r,c,m;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(v.length||I.length)&&this._updateWorkerLayers(v,I);for(const T in this._updatedSources){const D=this._updatedSources[T];if(D==="reload")this._reloadSource(T);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const I=this.sourceCaches[v];m[v]=I.used,I.used=!1}for(const v of this._order){const I=this._layers[v];I.recalculate(r,this._availableImages),!I.isHidden(r.zoom)&&I.source&&(this.sourceCaches[I.source].used=!0)}for(const v in m){const I=this.sourceCaches[v];!!m[v]!=!!I.used&&I.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var m;this._checkLoaded();const v=this.serialize();if(r=c.transformStyle?c.transformStyle(v,r):r,((m=c.validate)===null||m===void 0||m)&&Qr(this,s.y(r)))return!1;(r=s.bB(r)).layers=s.bz(r.layers);const I=s.bC(v,r),T=this._getOperationsToPerform(I);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const D of T.operations)D();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],m=[];for(const v of r)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":c.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":c.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setSky":c.push(()=>this.setSky.apply(this,v.args));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setTransition":c.push(()=>{});break;default:m.push(v.command)}return{operations:c,unimplemented:m}}addImage(r,c){if(this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,m={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.y.source,`sources.${r}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[r]=new Et(r,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:r})),v.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===r)return this.fire(new s.k(new Error(`Source "${r}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const m=this.sourceCaches[r].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,m={}){this._checkLoaded();const v=r.id;if(this.getLayer(v))return void this.fire(new s.k(new Error(`Layer "${v}" already exists on this map.`)));let I;if(r.type==="custom"){if(Qr(this,s.bD(r)))return;I=s.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(v,r.source),r=s.bB(r),r=s.e(r,{source:v})),this._validate(s.y.layer,`layers.${v}`,r,{arrayIndex:-1},m))return;I=s.bA(r),this._validateLayer(I),I.setEventedParent(this,{layer:{id:v}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new s.k(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,v),this._layerOrderChanged=!0,this._layers[v]=I,this._removedLayers[v]&&I.source&&I.type!=="custom"){const D=this._removedLayers[v];delete this._removedLayers[v],D.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new s.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const m=this._order.indexOf(r);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new s.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(v,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const m=this._order.indexOf(r);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,m){this._checkLoaded();const v=this.getLayer(r);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,m={}){this._checkLoaded();const v=this.getLayer(r);if(v){if(!s.bE(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(s.y.filter,`layers.${v.id}.filter`,c,null,m)||(v.filter=s.bB(c),this._updateLayer(v)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return s.bB(this.getLayer(r).filter)}setLayoutProperty(r,c,m,v={}){this._checkLoaded();const I=this.getLayer(r);I?s.bE(I.getLayoutProperty(c),m)||(I.setLayoutProperty(c,m,v),this._updateLayer(I)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const m=this.getLayer(r);if(m)return m.getLayoutProperty(c);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,m,v={}){this._checkLoaded();const I=this.getLayer(r);I?s.bE(I.getPaintProperty(c),m)||(I.setPaintProperty(c,m,v)&&this._updateLayer(I),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const m=r.source,v=r.sourceLayer,I=this.sourceCaches[m];if(I===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const T=I.getSource().type;T==="geojson"&&v?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||v?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(v,r.id,c)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const m=r.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const I=v.getSource().type,T=I==="vector"?r.sourceLayer:void 0;I!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(T,r.id,c):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,m=r.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||m?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,r.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=s.bF(this.sourceCaches,I=>I.serialize()),c=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return s.bG({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:r,layers:c,terrain:m},I=>I!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",m={},v=[];for(let T=this._order.length-1;T>=0;T--){const D=this._order[T];if(c(D)){m[D]=T;for(const N of r){const G=N[D];if(G)for(const X of G)v.push(X)}}}v.sort((T,D)=>D.intersectionZ-T.intersectionZ);const I=[];for(let T=this._order.length-1;T>=0;T--){const D=this._order[T];if(c(D))for(let N=v.length-1;N>=0;N--){const G=v[N].feature;if(m[G.layer.id]<T)break;I.push(G),v.pop()}else for(const N of r){const G=N[D];if(G)for(const X of G)I.push(X.feature)}}return I}queryRenderedFeatures(r,c,m){c&&c.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const G of c.layers){const X=this._layers[G];if(!X)return this.fire(new s.k(new Error(`The layer '${G}' does not exist in the map's style and cannot be queried for features.`))),[];v[X.source]=!0}}const I=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers(),D=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:D});for(const G in this.sourceCaches)c.layers&&!v[G]||I.push(Pt(this.sourceCaches[G],this._layers,T,r,N,m,this.map.terrain?(X,ie,se)=>this.map.terrain.getElevation(X,ie,se):void 0));return this.placement&&I.push(function(G,X,ie,se,fe,_e,De){const ke={},Re=_e.queryRenderedSymbols(se),$e=[];for(const qe of Object.keys(Re).map(Number))$e.push(De[qe]);$e.sort(Lt);for(const qe of $e){const Ke=qe.featureIndex.lookupSymbolFeatures(Re[qe.bucketInstanceId],X,qe.bucketIndex,qe.sourceLayerIndex,fe.filter,fe.layers,fe.availableImages,G);for(const Je in Ke){const lt=ke[Je]=ke[Je]||[],it=Ke[Je];it.sort((xt,Ct)=>{const vt=qe.featureSortOrder;if(vt){const $t=vt.indexOf(xt.featureIndex);return vt.indexOf(Ct.featureIndex)-$t}return Ct.featureIndex-xt.featureIndex});for(const xt of it)lt.push(xt)}}return function(qe,Ke,Je){for(const lt in qe)for(const it of qe[lt])un(it,Je[Ke[lt].source]);return qe}(ke,G,ie)}(this._layers,T,this.sourceCaches,r,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(r,c){c&&c.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[r];return m?function(v,I){const T=v.getRenderableIds().map(G=>v.getTileByID(G)),D=[],N={};for(let G=0;G<T.length;G++){const X=T[G],ie=X.tileID.canonical.key;N[ie]||(N[ie]=!0,X.querySourceFeatures(D,I))}return D}(m,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const T in r)if(!s.bE(r[T],m[T])){v=!0;break}if(!v)return;const I={now:M.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(I)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const m=this.getSky();let v=!1;if(!r&&!m)return;if(r&&!m)v=!0;else if(!r&&m)v=!0;else for(const T in r)if(!s.bE(r[T],m[T])){v=!0;break}if(!v)return;const I={now:M.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(I)}_setProjectionInternal(r){const c=function(m){if(Array.isArray(m)){const v=new Td({type:m});return{projection:v,transform:new po,cameraHelper:new Ru(v)}}switch(m){case"mercator":return{projection:new vi,transform:new Ho,cameraHelper:new wh};case"globe":{const v=new Td({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new po,cameraHelper:new Ru(v)}}case"vertical-perspective":return{projection:new Ih,transform:new Sh,cameraHelper:new fa};default:return s.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new vi,transform:new Ho,cameraHelper:new wh}}}(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(r,c,m,v,I={}){return(!I||I.validate!==!1)&&Qr(this,r.call(s.y,s.e({key:c,style:this.serialize(),value:m,styleSpec:s.v},v)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pn().off(At,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const m=this.sourceCaches[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,m,v,I=!1){let T=!1,D=!1;const N={};for(const G of this._order){const X=this._layers[G];if(X.type!=="symbol")continue;if(!N[X.source]){const se=this.sourceCaches[X.source];N[X.source]=se.getRenderableIds(!0).map(fe=>se.getTileByID(fe)).sort((fe,_e)=>_e.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(_e.tileID)?-1:1))}const ie=this.crossTileSymbolIndex.addLayer(X,N[X.source],r.center.lng);T=T||ie}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),r.zoom))&&(this.pauseablePlacement=new xh(r,this.map.terrain,this._order,I,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),D=!0),T&&this.pauseablePlacement.placement.setStale()),D||T)for(const G of this._order){const X=this._layers[G];X.type==="symbol"&&this.placement.updateLayerOpacities(X,N[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return s._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),m})}getGlyphs(r,c){return s._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(c.stacks),v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(s.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,m={},v){this._checkLoaded();const I=[{id:r,url:c}],T=[...te(this.stylesheet.sprite),...I];this._validate(s.y.sprite,"sprite",T,null,m)||(this.stylesheet.sprite=T,this._loadSprite(I,!0,v))}removeSprite(r){this._checkLoaded();const c=te(this.stylesheet.sprite);if(c.find(m=>m.id===r)){if(this._spritesImagesIds[r])for(const m of this._spritesImagesIds[r])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex(m=>m.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return te(this.stylesheet.sprite)}setSprite(r,c={},m){this._checkLoaded(),r&&this._validate(s.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,m):(this._unloadSprite(),m&&m(null)))}}var mp=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class qa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,m,v,I,T,D,N,G){this.context=r;let X=this.boundPaintVertexBuffers.length!==v.length;for(let ie=0;!X&&ie<v.length;ie++)this.boundPaintVertexBuffers[ie]!==v[ie]&&(X=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||X||this.boundIndexBuffer!==I||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==G?this.freshBind(c,m,v,I,T,D,N,G):(r.bindVertexArray.set(this.vao),D&&D.bind(),I&&I.dynamicDraw&&I.bind(),N&&N.bind(),G&&G.bind())}freshBind(r,c,m,v,I,T,D,N){const G=r.numAttributes,X=this.context,ie=X.gl;this.vao&&this.destroy(),this.vao=X.createVertexArray(),X.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=N,c.enableAttributes(ie,r);for(const se of m)se.enableAttributes(ie,r);T&&T.enableAttributes(ie,r),D&&D.enableAttributes(ie,r),N&&N.enableAttributes(ie,r),c.bind(),c.setVertexAttribPointers(ie,r,I);for(const se of m)se.bind(),se.setVertexAttribPointers(ie,r,I);T&&(T.bind(),T.setVertexAttribPointers(ie,r,I)),v&&v.bind(),D&&(D.bind(),D.setVertexAttribPointers(ie,r,I)),N&&(N.bind(),N.setVertexAttribPointers(ie,r,I)),X.currentNumAttributes=G}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const fv=(w,r,c,m,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:c?c.calculateFogBlendOpacity(m):0,u_horizon_color:c?c.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),gp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Kl(w){const r=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const m=w[c].split(" ");r.push(m.pop())}return r}class Cc{constructor(r,c,m,v,I,T,D,N){const G=r.gl;this.program=G.createProgram();const X=Kl(c.staticAttributes),ie=m?m.getBinderAttributes():[],se=X.concat(ie),fe=er.prelude.staticUniforms?Kl(er.prelude.staticUniforms):[],_e=D.staticUniforms?Kl(D.staticUniforms):[],De=c.staticUniforms?Kl(c.staticUniforms):[],ke=m?m.getBinderUniforms():[],Re=fe.concat(_e).concat(De).concat(ke),$e=[];for(const Ct of Re)$e.indexOf(Ct)<0&&$e.push(Ct);const qe=m?m.defines():[];fo(G)&&qe.unshift("#version 300 es"),I&&qe.push("#define OVERDRAW_INSPECTOR;"),T&&qe.push("#define TERRAIN3D;"),N&&qe.push(N);let Ke=qe.concat(er.prelude.fragmentSource,D.fragmentSource,c.fragmentSource).join(`
`),Je=qe.concat(er.prelude.vertexSource,D.vertexSource,c.vertexSource).join(`
`);fo(G)||(Ke=function(Ct){return Ct.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ke),Je=function(Ct){return Ct.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Je));const lt=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(lt,Ke),G.compileShader(lt),!G.getShaderParameter(lt,G.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${G.getShaderInfoLog(lt)}`);G.attachShader(this.program,lt);const it=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(it,Je),G.compileShader(it),!G.getShaderParameter(it,G.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${G.getShaderInfoLog(it)}`);G.attachShader(this.program,it),this.attributes={};const xt={};this.numAttributes=se.length;for(let Ct=0;Ct<this.numAttributes;Ct++)se[Ct]&&(G.bindAttribLocation(this.program,Ct,se[Ct]),this.attributes[se[Ct]]=Ct);if(G.linkProgram(this.program),!G.getProgramParameter(this.program,G.LINK_STATUS))throw new Error(`Program failed to link: ${G.getProgramInfoLog(this.program)}`);G.deleteShader(it),G.deleteShader(lt);for(let Ct=0;Ct<$e.length;Ct++){const vt=$e[Ct];if(vt&&!xt[vt]){const $t=G.getUniformLocation(this.program,vt);$t&&(xt[vt]=$t)}}this.fixedUniforms=v(r,xt),this.terrainUniforms=((Ct,vt)=>({u_depth:new s.bH(Ct,vt.u_depth),u_terrain:new s.bH(Ct,vt.u_terrain),u_terrain_dim:new s.b8(Ct,vt.u_terrain_dim),u_terrain_matrix:new s.bJ(Ct,vt.u_terrain_matrix),u_terrain_unpack:new s.bK(Ct,vt.u_terrain_unpack),u_terrain_exaggeration:new s.b8(Ct,vt.u_terrain_exaggeration)}))(r,xt),this.projectionUniforms=((Ct,vt)=>({u_projection_matrix:new s.bJ(Ct,vt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(Ct,vt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(Ct,vt.u_projection_clipping_plane),u_projection_transition:new s.b8(Ct,vt.u_projection_transition),u_projection_fallback_matrix:new s.bJ(Ct,vt.u_projection_fallback_matrix)}))(r,xt),this.binderUniforms=m?m.getUniforms(r,xt):[]}draw(r,c,m,v,I,T,D,N,G,X,ie,se,fe,_e,De,ke,Re,$e,qe){const Ke=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(m),r.setStencilMode(v),r.setColorMode(I),r.setCullFace(T),N){r.activeTexture.set(Ke.TEXTURE2),Ke.bindTexture(Ke.TEXTURE_2D,N.depthTexture),r.activeTexture.set(Ke.TEXTURE3),Ke.bindTexture(Ke.TEXTURE_2D,N.texture);for(const lt in this.terrainUniforms)this.terrainUniforms[lt].set(N[lt])}if(G)for(const lt in G)this.projectionUniforms[gp[lt]].set(G[lt]);if(D)for(const lt in this.fixedUniforms)this.fixedUniforms[lt].set(D[lt]);ke&&ke.setUniforms(r,this.binderUniforms,_e,{zoom:De});let Je=0;switch(c){case Ke.LINES:Je=2;break;case Ke.TRIANGLES:Je=3;break;case Ke.LINE_STRIP:Je=1}for(const lt of fe.get()){const it=lt.vaos||(lt.vaos={});(it[X]||(it[X]=new qa)).bind(r,this,ie,ke?ke.getPaintVertexBuffers():[],se,lt.vertexOffset,Re,$e,qe),Ke.drawElements(c,lt.primitiveLength*Je,Ke.UNSIGNED_SHORT,lt.primitiveOffset*Je*2)}}}function Eh(w,r,c){const m=1/s.az(c,1,r.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),I=c.tileSize*Math.pow(2,r.transform.tileZoom)/v,T=I*(c.tileID.canonical.x+c.tileID.wrap*v),D=I*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[T>>16,D>>16],u_pixel_coord_lower:[65535&T,65535&D]}}const Zo=(w,r,c,m)=>{const v=w.style.light,I=v.properties.get("position"),T=[I.x,I.y,I.z],D=s.bN();v.properties.get("anchor")==="viewport"&&s.bO(D,w.transform.bearingInRadians),s.bP(T,T,D);const N=w.transform.transformLightDirection(T),G=v.properties.get("color");return{u_lightpos:T,u_lightpos_globe:N,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[G.r,G.g,G.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:m}},pv=(w,r,c,m,v,I,T)=>s.e(Zo(w,r,c,m),Eh(I,w,T),{u_height_factor:-Math.pow(2,v.overscaledZ)/T.tileSize/8}),Yl=(w,r,c,m)=>s.e(Eh(r,w,c),{u_fill_translate:m}),Xm=(w,r)=>({u_world:w,u_fill_translate:r}),Ld=(w,r,c,m,v)=>s.e(Yl(w,r,c,v),{u_world:m}),yp=(w,r,c,m,v)=>{const I=w.transform;let T,D,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const G=s.az(r,1,I.zoom);T=!0,D=[G,G],N=G/(s.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*v}else T=!1,D=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:D,u_globe_extrude_scale:N,u_translate:m}},vp=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),_p=w=>({u_viewport_size:[w.width,w.height]}),Th=(w,r=1)=>({u_color:w,u_overlay:0,u_overlay_scale:r}),Ph=(w,r,c,m)=>{const v=s.az(w,1,r)/(s.Z*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:s.az(w,1,r),u_intensity:c,u_globe_extrude_scale:v}},bp=(w,r,c,m)=>{const v=s.K();s.bQ(v,0,w.width,w.height,0,0,1);const I=w.context.gl;return{u_matrix:v,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:c,u_color_ramp:m,u_opacity:r.paint.get("heatmap-opacity")}},xp=(w,r,c)=>{const m=c.paint.get("hillshade-shadow-color"),v=c.paint.get("hillshade-highlight-color"),I=c.paint.get("hillshade-accent-color");let T=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(T+=w.transform.bearingInRadians),{u_image:0,u_latrange:Dd(0,r.tileID),u_light:[c.paint.get("hillshade-exaggeration"),T],u_shadow:m,u_highlight:v,u_accent:I}},ss=(w,r)=>{const c=r.stride,m=s.K();return s.bQ(m,0,s.Z,-8192,0,0,1),s.L(m,m,[0,-8192,0]),{u_matrix:m,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:r.getUnpackVector()}};function Dd(w,r){const c=Math.pow(2,r.canonical.z),m=r.canonical.y;return[new s.$(0,m/c).toLngLat().lat,new s.$(0,(m+1)/c).toLngLat().lat]}const Xl=(w,r,c,m)=>{const v=w.transform;return{u_translation:eg(w,r,c),u_ratio:m/s.az(r,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Ic=(w,r,c,m,v)=>s.e(Xl(w,r,c,m),{u_image:0,u_image_height:v}),Qm=(w,r,c,m,v)=>{const I=w.transform,T=Jm(r,I);return{u_translation:eg(w,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:m/s.az(r,1,I.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[T,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Rd=(w,r,c,m,v,I)=>{const T=w.lineAtlas,D=Jm(r,w.transform),N=c.layout.get("line-cap")==="round",G=T.getDash(v.from,N),X=T.getDash(v.to,N),ie=G.width*I.fromScale,se=X.width*I.toScale;return s.e(Xl(w,r,c,m),{u_patternscale_a:[D/ie,-G.height/2],u_patternscale_b:[D/se,-X.height/2],u_sdfgamma:T.width/(256*Math.min(ie,se)*w.pixelRatio)/2,u_image:0,u_tex_y_a:G.y,u_tex_y_b:X.y,u_mix:I.t})};function Jm(w,r){return 1/s.az(w,1,r.tileZoom)}function eg(w,r,c){return s.aA(w.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const tg=(w,r,c,m,v)=>{return{u_tl_parent:w,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(I=m.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:ng(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var I,T};function ng(w){w*=Math.PI/180;const r=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Ql=(w,r,c,m,v,I,T,D,N,G,X,ie,se)=>{const fe=T.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:fe.width/fe.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:D,u_coord_matrix:N,u_is_text:+X,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:I,u_texsize:ie,u_texture:0,u_translation:G,u_pitched_scale:se}},Od=(w,r,c,m,v,I,T,D,N,G,X,ie,se,fe)=>{const _e=T.transform;return s.e(Ql(w,r,c,m,v,I,T,D,N,G,X,ie,fe),{u_gamma_scale:m?Math.cos(_e.pitch*Math.PI/180)*_e.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},rg=(w,r,c,m,v,I,T,D,N,G,X,ie,se)=>s.e(Od(w,r,c,m,v,I,T,D,N,G,!0,X,0,se),{u_texsize_icon:ie,u_texture_icon:1}),Mc=(w,r)=>({u_opacity:w,u_color:r}),Wo=(w,r,c,m,v)=>s.e(function(I,T,D,N){const G=D.imageManager.getPattern(I.from.toString()),X=D.imageManager.getPattern(I.to.toString()),{width:ie,height:se}=D.imageManager.getPixelSize(),fe=Math.pow(2,N.tileID.overscaledZ),_e=N.tileSize*Math.pow(2,D.transform.tileZoom)/fe,De=_e*(N.tileID.canonical.x+N.tileID.wrap*fe),ke=_e*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[ie,se],u_mix:T.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/s.az(N,1,D.transform.tileZoom),u_pixel_coord_upper:[De>>16,ke>>16],u_pixel_coord_lower:[65535&De,65535&ke]}}(c,v,r,m),{u_opacity:w}),go=(w,r)=>{},Sc={fillExtrusion:(w,r)=>({u_lightpos:new s.bL(w,r.u_lightpos),u_lightpos_globe:new s.bL(w,r.u_lightpos_globe),u_lightintensity:new s.b8(w,r.u_lightintensity),u_lightcolor:new s.bL(w,r.u_lightcolor),u_vertical_gradient:new s.b8(w,r.u_vertical_gradient),u_opacity:new s.b8(w,r.u_opacity),u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillExtrusionPattern:(w,r)=>({u_lightpos:new s.bL(w,r.u_lightpos),u_lightpos_globe:new s.bL(w,r.u_lightpos_globe),u_lightintensity:new s.b8(w,r.u_lightintensity),u_lightcolor:new s.bL(w,r.u_lightcolor),u_vertical_gradient:new s.b8(w,r.u_vertical_gradient),u_height_factor:new s.b8(w,r.u_height_factor),u_opacity:new s.b8(w,r.u_opacity),u_fill_translate:new s.bM(w,r.u_fill_translate),u_image:new s.bH(w,r.u_image),u_texsize:new s.bM(w,r.u_texsize),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade)}),fill:(w,r)=>({u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillPattern:(w,r)=>({u_image:new s.bH(w,r.u_image),u_texsize:new s.bM(w,r.u_texsize),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade),u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillOutline:(w,r)=>({u_world:new s.bM(w,r.u_world),u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillOutlinePattern:(w,r)=>({u_world:new s.bM(w,r.u_world),u_image:new s.bH(w,r.u_image),u_texsize:new s.bM(w,r.u_texsize),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade),u_fill_translate:new s.bM(w,r.u_fill_translate)}),circle:(w,r)=>({u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_scale_with_map:new s.bH(w,r.u_scale_with_map),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_extrude_scale:new s.bM(w,r.u_extrude_scale),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(w,r.u_globe_extrude_scale),u_translate:new s.bM(w,r.u_translate)}),collisionBox:(w,r)=>({u_pixel_extrude_scale:new s.bM(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_viewport_size:new s.bM(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new s.bI(w,r.u_color),u_overlay:new s.bH(w,r.u_overlay),u_overlay_scale:new s.b8(w,r.u_overlay_scale)}),depth:go,clippingMask:go,heatmap:(w,r)=>({u_extrude_scale:new s.b8(w,r.u_extrude_scale),u_intensity:new s.b8(w,r.u_intensity),u_globe_extrude_scale:new s.b8(w,r.u_globe_extrude_scale)}),heatmapTexture:(w,r)=>({u_matrix:new s.bJ(w,r.u_matrix),u_world:new s.bM(w,r.u_world),u_image:new s.bH(w,r.u_image),u_color_ramp:new s.bH(w,r.u_color_ramp),u_opacity:new s.b8(w,r.u_opacity)}),hillshade:(w,r)=>({u_image:new s.bH(w,r.u_image),u_latrange:new s.bM(w,r.u_latrange),u_light:new s.bM(w,r.u_light),u_shadow:new s.bI(w,r.u_shadow),u_highlight:new s.bI(w,r.u_highlight),u_accent:new s.bI(w,r.u_accent)}),hillshadePrepare:(w,r)=>({u_matrix:new s.bJ(w,r.u_matrix),u_image:new s.bH(w,r.u_image),u_dimension:new s.bM(w,r.u_dimension),u_zoom:new s.b8(w,r.u_zoom),u_unpack:new s.bK(w,r.u_unpack)}),line:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels),u_image:new s.bH(w,r.u_image),u_image_height:new s.b8(w,r.u_image_height)}),linePattern:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_texsize:new s.bM(w,r.u_texsize),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_image:new s.bH(w,r.u_image),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade)}),lineSDF:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels),u_patternscale_a:new s.bM(w,r.u_patternscale_a),u_patternscale_b:new s.bM(w,r.u_patternscale_b),u_sdfgamma:new s.b8(w,r.u_sdfgamma),u_image:new s.bH(w,r.u_image),u_tex_y_a:new s.b8(w,r.u_tex_y_a),u_tex_y_b:new s.b8(w,r.u_tex_y_b),u_mix:new s.b8(w,r.u_mix)}),raster:(w,r)=>({u_tl_parent:new s.bM(w,r.u_tl_parent),u_scale_parent:new s.b8(w,r.u_scale_parent),u_buffer_scale:new s.b8(w,r.u_buffer_scale),u_fade_t:new s.b8(w,r.u_fade_t),u_opacity:new s.b8(w,r.u_opacity),u_image0:new s.bH(w,r.u_image0),u_image1:new s.bH(w,r.u_image1),u_brightness_low:new s.b8(w,r.u_brightness_low),u_brightness_high:new s.b8(w,r.u_brightness_high),u_saturation_factor:new s.b8(w,r.u_saturation_factor),u_contrast_factor:new s.b8(w,r.u_contrast_factor),u_spin_weights:new s.bL(w,r.u_spin_weights),u_coords_top:new s.bK(w,r.u_coords_top),u_coords_bottom:new s.bK(w,r.u_coords_bottom)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new s.bH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(w,r.u_is_size_feature_constant),u_size_t:new s.b8(w,r.u_size_t),u_size:new s.b8(w,r.u_size),u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_pitch:new s.b8(w,r.u_pitch),u_rotate_symbol:new s.bH(w,r.u_rotate_symbol),u_aspect_ratio:new s.b8(w,r.u_aspect_ratio),u_fade_change:new s.b8(w,r.u_fade_change),u_label_plane_matrix:new s.bJ(w,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(w,r.u_coord_matrix),u_is_text:new s.bH(w,r.u_is_text),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_is_along_line:new s.bH(w,r.u_is_along_line),u_is_variable_anchor:new s.bH(w,r.u_is_variable_anchor),u_texsize:new s.bM(w,r.u_texsize),u_texture:new s.bH(w,r.u_texture),u_translation:new s.bM(w,r.u_translation),u_pitched_scale:new s.b8(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new s.bH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(w,r.u_is_size_feature_constant),u_size_t:new s.b8(w,r.u_size_t),u_size:new s.b8(w,r.u_size),u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_pitch:new s.b8(w,r.u_pitch),u_rotate_symbol:new s.bH(w,r.u_rotate_symbol),u_aspect_ratio:new s.b8(w,r.u_aspect_ratio),u_fade_change:new s.b8(w,r.u_fade_change),u_label_plane_matrix:new s.bJ(w,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(w,r.u_coord_matrix),u_is_text:new s.bH(w,r.u_is_text),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_is_along_line:new s.bH(w,r.u_is_along_line),u_is_variable_anchor:new s.bH(w,r.u_is_variable_anchor),u_texsize:new s.bM(w,r.u_texsize),u_texture:new s.bH(w,r.u_texture),u_gamma_scale:new s.b8(w,r.u_gamma_scale),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_is_halo:new s.bH(w,r.u_is_halo),u_translation:new s.bM(w,r.u_translation),u_pitched_scale:new s.b8(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new s.bH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(w,r.u_is_size_feature_constant),u_size_t:new s.b8(w,r.u_size_t),u_size:new s.b8(w,r.u_size),u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_pitch:new s.b8(w,r.u_pitch),u_rotate_symbol:new s.bH(w,r.u_rotate_symbol),u_aspect_ratio:new s.b8(w,r.u_aspect_ratio),u_fade_change:new s.b8(w,r.u_fade_change),u_label_plane_matrix:new s.bJ(w,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(w,r.u_coord_matrix),u_is_text:new s.bH(w,r.u_is_text),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_is_along_line:new s.bH(w,r.u_is_along_line),u_is_variable_anchor:new s.bH(w,r.u_is_variable_anchor),u_texsize:new s.bM(w,r.u_texsize),u_texsize_icon:new s.bM(w,r.u_texsize_icon),u_texture:new s.bH(w,r.u_texture),u_texture_icon:new s.bH(w,r.u_texture_icon),u_gamma_scale:new s.b8(w,r.u_gamma_scale),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_is_halo:new s.bH(w,r.u_is_halo),u_translation:new s.bM(w,r.u_translation),u_pitched_scale:new s.b8(w,r.u_pitched_scale)}),background:(w,r)=>({u_opacity:new s.b8(w,r.u_opacity),u_color:new s.bI(w,r.u_color)}),backgroundPattern:(w,r)=>({u_opacity:new s.b8(w,r.u_opacity),u_image:new s.bH(w,r.u_image),u_pattern_tl_a:new s.bM(w,r.u_pattern_tl_a),u_pattern_br_a:new s.bM(w,r.u_pattern_br_a),u_pattern_tl_b:new s.bM(w,r.u_pattern_tl_b),u_pattern_br_b:new s.bM(w,r.u_pattern_br_b),u_texsize:new s.bM(w,r.u_texsize),u_mix:new s.b8(w,r.u_mix),u_pattern_size_a:new s.bM(w,r.u_pattern_size_a),u_pattern_size_b:new s.bM(w,r.u_pattern_size_b),u_scale_a:new s.b8(w,r.u_scale_a),u_scale_b:new s.b8(w,r.u_scale_b),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_texture:new s.bH(w,r.u_texture),u_ele_delta:new s.b8(w,r.u_ele_delta),u_fog_matrix:new s.bJ(w,r.u_fog_matrix),u_fog_color:new s.bI(w,r.u_fog_color),u_fog_ground_blend:new s.b8(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(w,r.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(w,r.u_horizon_color),u_horizon_fog_blend:new s.b8(w,r.u_horizon_fog_blend),u_is_globe_mode:new s.b8(w,r.u_is_globe_mode)}),terrainDepth:(w,r)=>({u_ele_delta:new s.b8(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_texture:new s.bH(w,r.u_texture),u_terrain_coords_id:new s.b8(w,r.u_terrain_coords_id),u_ele_delta:new s.b8(w,r.u_ele_delta)}),projectionErrorMeasurement:(w,r)=>({u_input:new s.b8(w,r.u_input),u_output_expected:new s.b8(w,r.u_output_expected)}),atmosphere:(w,r)=>({u_sun_pos:new s.bL(w,r.u_sun_pos),u_atmosphere_blend:new s.b8(w,r.u_atmosphere_blend),u_globe_position:new s.bL(w,r.u_globe_position),u_globe_radius:new s.b8(w,r.u_globe_radius),u_inv_proj_matrix:new s.bJ(w,r.u_inv_proj_matrix)}),sky:(w,r)=>({u_sky_color:new s.bI(w,r.u_sky_color),u_horizon_color:new s.bI(w,r.u_horizon_color),u_horizon:new s.bM(w,r.u_horizon),u_horizon_normal:new s.bM(w,r.u_horizon_normal),u_sky_horizon_blend:new s.b8(w,r.u_sky_horizon_blend),u_sky_blend:new s.b8(w,r.u_sky_blend)})};class Ap{constructor(r,c,m){this.context=r;const v=r.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ig={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wp{constructor(r,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=r;const I=r.gl;this.buffer=I.createBuffer(),r.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&r.enableVertexAttribArray(v)}}setVertexAttribPointers(r,c,m){for(let v=0;v<this.attributes.length;v++){const I=this.attributes[v],T=c.attributes[I.name];T!==void 0&&r.vertexAttribPointer(T,I.components,r[ig[I.type]],!1,this.itemSize,I.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class ar{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ma extends ar{getDefault(){return s.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class sg extends ar{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class mv extends ar{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class gv extends ar{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class yv extends ar{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class ag extends ar{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class vv extends ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class zu extends ar{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class gt extends ar{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Zt extends ar{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class zt extends ar{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Ln extends ar{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Kn extends ar{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Cr extends ar{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Kr extends ar{getDefault(){return s.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ti extends ar{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class zd extends ar{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Cp extends ar{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ys extends ar{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Fu extends ar{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Fd extends ar{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class qo extends ar{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Bu extends ar{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class kh extends ar{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Dr extends ar{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ec extends ar{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ip extends ar{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Tc extends ar{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const m=this.gl;fo(m)?m.bindVertexArray(r):(c=m.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class kr extends ar{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Bd extends ar{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class _v extends ar{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Nu extends ar{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Ka extends Nu{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Nd extends Nu{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class og extends Nu{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Pc="Framebuffer is not complete";class lg{constructor(r,c,m,v,I){this.context=r,this.width=c,this.height=m;const T=r.gl,D=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Ka(r,D),v)this.depthAttachment=I?new og(r,D):new Nd(r,D);else if(I)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Pc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&r.deleteRenderbuffer(m)}r.deleteFramebuffer(this.framebuffer)}}class Vd{constructor(r){var c,m;if(this.gl=r,this.clearColor=new Ma(this),this.clearDepth=new sg(this),this.clearStencil=new mv(this),this.colorMask=new gv(this),this.depthMask=new yv(this),this.stencilMask=new ag(this),this.stencilFunc=new vv(this),this.stencilOp=new zu(this),this.stencilTest=new gt(this),this.depthRange=new Zt(this),this.depthTest=new zt(this),this.depthFunc=new Ln(this),this.blend=new Kn(this),this.blendFunc=new Cr(this),this.blendColor=new Kr(this),this.blendEquation=new ti(this),this.cullFace=new zd(this),this.cullFaceSide=new Cp(this),this.frontFace=new ys(this),this.program=new Fu(this),this.activeTexture=new Fd(this),this.viewport=new qo(this),this.bindFramebuffer=new Bu(this),this.bindRenderbuffer=new kh(this),this.bindTexture=new Dr(this),this.bindVertexBuffer=new Ec(this),this.bindElementBuffer=new Ip(this),this.bindVertexArray=new Tc(this),this.pixelStoreUnpack=new kr(this),this.pixelStoreUnpackPremultiplyAlpha=new Bd(this),this.pixelStoreUnpackFlipY=new _v(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),fo(r)){this.HALF_FLOAT=r.HALF_FLOAT;const v=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(m=r.RGB16F)!==null&&m!==void 0?m:v==null?void 0:v.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const v=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new Ap(this,r,c)}createVertexBuffer(r,c,m){return new wp(this,r,c,m)}createRenderbuffer(r,c,m){const v=this.gl,I=v.createRenderbuffer();return this.bindRenderbuffer.set(I),v.renderbufferStorage(v.RENDERBUFFER,r,c,m),this.bindRenderbuffer.set(null),I}createFramebuffer(r,c,m,v){return new lg(this,r,c,m,v)}clear({color:r,depth:c,stencil:m}){const v=this.gl;let I=0;r&&(I|=v.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(I|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(I|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(I)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){s.bE(r.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return fo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return fo(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Ko;function kc(w,r,c,m,v){const I=w.context,T=w.transform,D=I.gl,N=w.useProgram("collisionBox"),G=[];let X=0,ie=0;for(let Re=0;Re<m.length;Re++){const $e=m[Re],qe=r.getTile($e).getBucket(c);if(!qe)continue;const Ke=v?qe.textCollisionBox:qe.iconCollisionBox,Je=qe.collisionCircleArray;Je.length>0&&(G.push({circleArray:Je,circleOffset:ie,coord:$e}),X+=Je.length/4,ie=X),Ke&&N.draw(I,D.LINES,kn.disabled,xr.disabled,w.colorModeForRenderPass(),Pr.disabled,vp(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData($e),T.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,w.transform.zoom,null,null,Ke.collisionVertexBuffer)}if(!v||!G.length)return;const se=w.useProgram("collisionCircle"),fe=new s.bR;fe.resize(4*X),fe._trim();let _e=0;for(const Re of G)for(let $e=0;$e<Re.circleArray.length/4;$e++){const qe=4*$e,Ke=Re.circleArray[qe+0],Je=Re.circleArray[qe+1],lt=Re.circleArray[qe+2],it=Re.circleArray[qe+3];fe.emplace(_e++,Ke,Je,lt,it,0),fe.emplace(_e++,Ke,Je,lt,it,1),fe.emplace(_e++,Ke,Je,lt,it,2),fe.emplace(_e++,Ke,Je,lt,it,3)}(!Ko||Ko.length<2*X)&&(Ko=function(Re){const $e=2*Re,qe=new s.bT;qe.resize($e),qe._trim();for(let Ke=0;Ke<$e;Ke++){const Je=6*Ke;qe.uint16[Je+0]=4*Ke+0,qe.uint16[Je+1]=4*Ke+1,qe.uint16[Je+2]=4*Ke+2,qe.uint16[Je+3]=4*Ke+2,qe.uint16[Je+4]=4*Ke+3,qe.uint16[Je+5]=4*Ke+0}return qe}(X));const De=I.createIndexBuffer(Ko,!0),ke=I.createVertexBuffer(fe,s.bS.members,!0);for(const Re of G){const $e=_p(w.transform);se.draw(I,D.TRIANGLES,kn.disabled,xr.disabled,w.colorModeForRenderPass(),Pr.disabled,$e,w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re.coord),null,c.id,ke,De,s.aJ.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,w.transform.zoom,null,null,null)}ke.destroy(),De.destroy()}const Vu=s.ad(new Float32Array(16));function yl(w,r,c,m,v,I){const{horizontalAlign:T,verticalAlign:D}=s.aE(w);return new s.P((-(T-.5)*r/v+m[0])*I,(-(D-.5)*c/v+m[1])*I)}function Lh(w,r,c,m,v,I){const T=r.tileAnchorPoint.add(new s.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let D=m.mult(I);c||(D=D.rotate(-v));const N=T.add(D);return $n(N.x,N.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const D=oi(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),N=Math.atan(D.y/D.x)+(D.x<0?Math.PI:0);return w.add(m.rotate(N))}return w.add(m)}function jd(w,r,c,m,v,I,T,D,N,G,X,ie){const se=w.text.placedSymbolArray,fe=w.text.dynamicLayoutVertexArray,_e=w.icon.dynamicLayoutVertexArray,De={};fe.clear();for(let ke=0;ke<se.length;ke++){const Re=se.get(ke),$e=Re.hidden||!Re.crossTileID||w.allowVerticalPlacement&&!Re.placedOrientation?null:m[Re.crossTileID];if($e){const qe=new s.P(Re.anchorX,Re.anchorY),Ke={getElevation:ie,width:v.width,height:v.height,pitchedLabelPlaneMatrix:I,pitchWithMap:c,transform:v,tileAnchorPoint:qe,translation:G,unwrappedTileID:X},Je=c?_h(qe.x,qe.y,Ke):oi(qe.x,qe.y,Ke),lt=Ar(v.cameraToCenterDistance,Je.signedDistanceFromCamera);let it=s.am(w.textSizeData,D,Re)*lt/s.ay;c&&(it*=w.tilePixelRatio/T);const{width:xt,height:Ct,anchor:vt,textOffset:$t,textBoxScale:Nt}=$e,hn=yl(vt,xt,Ct,$t,Nt,it),on=v.getPitchedTextCorrection(qe.x+G[0],qe.y+G[1],X),Xt=Lh(Je.point,Ke,r,hn,-v.bearingInRadians,on),Dn=w.allowVerticalPlacement&&Re.placedOrientation===s.al.vertical?Math.PI/2:0;for(let Zn=0;Zn<Re.numGlyphs;Zn++)s.as(fe,Xt,Dn);N&&Re.associatedIconIndex>=0&&(De[Re.associatedIconIndex]={shiftedAnchor:Xt,angle:Dn})}else Gi(Re.numGlyphs,fe)}if(N){_e.clear();const ke=w.icon.placedSymbolArray;for(let Re=0;Re<ke.length;Re++){const $e=ke.get(Re);if($e.hidden)Gi($e.numGlyphs,_e);else{const qe=De[Re];if(qe)for(let Ke=0;Ke<$e.numGlyphs;Ke++)s.as(_e,qe.shiftedAnchor,qe.angle);else Gi($e.numGlyphs,_e)}}w.icon.dynamicLayoutVertexBuffer.updateData(_e)}w.text.dynamicLayoutVertexBuffer.updateData(fe)}function Ud(w,r,c){return c.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function $d(w,r,c,m,v,I,T,D,N,G,X,ie,se){const fe=w.context,_e=fe.gl,De=w.transform,ke=D==="map",Re=N==="map",$e=D!=="viewport"&&c.layout.get("symbol-placement")!=="point",qe=ke&&!Re&&!$e,Ke=!c.layout.get("symbol-sort-key").isConstant();let Je=!1;const lt=w.getDepthModeForSublayer(0,kn.ReadOnly),it=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),xt=[],Ct=De.getCircleRadiusCorrection();for(const vt of m){const $t=r.getTile(vt),Nt=$t.getBucket(c);if(!Nt)continue;const hn=v?Nt.text:Nt.icon;if(!hn||!hn.segments.get().length||!hn.hasVisibleVertices)continue;const on=hn.programConfigurations.get(c.id),Xt=v||Nt.sdfIcons,Dn=v?Nt.textSizeData:Nt.iconSizeData,Zn=Re||De.pitch!==0,Wn=w.useProgram(Ud(Xt,v,Nt),on),ni=s.ak(Dn,De.zoom),zr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(vt);let ui,si,or,pr,Xi=[0,0],Qi=null;if(v)si=$t.glyphAtlasTexture,or=_e.LINEAR,ui=$t.glyphAtlasTexture.size,Nt.iconsInText&&(Xi=$t.imageAtlasTexture.size,Qi=$t.imageAtlasTexture,pr=Zn||w.options.rotating||w.options.zooming||Dn.kind==="composite"||Dn.kind==="camera"?_e.LINEAR:_e.NEAREST);else{const _i=c.layout.get("icon-size").constantOr(0)!==1||Nt.iconsNeedLinear;si=$t.imageAtlasTexture,or=Xt||w.options.rotating||w.options.zooming||_i||Zn?_e.LINEAR:_e.NEAREST,ui=$t.imageAtlasTexture.size}const Ji=s.az($t,1,w.transform.zoom),Ps=Un(ke,w.transform,Ji),Xa=s.K();s.an(Xa,Ps);const Al=Jn(Re,ke,w.transform,Ji),bo=s.aA(De,$t,I,T),xo=De.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),ks=it&&Nt.hasTextData(),qu=c.layout.get("icon-text-fit")!=="none"&&ks&&Nt.hasIconData();if($e){const _i=w.style.map.terrain?(Mi,hi)=>w.style.map.terrain.getElevation(vt,Mi,hi):null,ci=c.layout.get("text-rotation-alignment")==="map";wr(Nt,w,v,Ps,Xa,Re,G,ci,vt.toUnwrapped(),De.width,De.height,bo,_i)}const va=v&&it||qu,_a=$e||va?Vu:Re?Ps:w.transform.clipSpaceToPixelsMatrix,wl=Xt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ao;Ao=Xt?Nt.iconsInText?rg(Dn.kind,ni,qe,Re,$e,va,w,_a,Al,bo,ui,Xi,Ct):Od(Dn.kind,ni,qe,Re,$e,va,w,_a,Al,bo,v,ui,0,Ct):Ql(Dn.kind,ni,qe,Re,$e,va,w,_a,Al,bo,v,ui,Ct);const Cl={program:Wn,buffers:hn,uniformValues:Ao,projectionData:xo,atlasTexture:si,atlasTextureIcon:Qi,atlasInterpolation:or,atlasInterpolationIcon:pr,isSDF:Xt,hasHalo:wl};if(Ke&&Nt.canOverlap){Je=!0;const _i=hn.segments.get();for(const ci of _i)xt.push({segments:new s.aJ([ci]),sortKey:ci.sortKey,state:Cl,terrainData:zr})}else xt.push({segments:hn.segments,sortKey:0,state:Cl,terrainData:zr})}Je&&xt.sort((vt,$t)=>vt.sortKey-$t.sortKey);for(const vt of xt){const $t=vt.state;if(fe.activeTexture.set(_e.TEXTURE0),$t.atlasTexture.bind($t.atlasInterpolation,_e.CLAMP_TO_EDGE),$t.atlasTextureIcon&&(fe.activeTexture.set(_e.TEXTURE1),$t.atlasTextureIcon&&$t.atlasTextureIcon.bind($t.atlasInterpolationIcon,_e.CLAMP_TO_EDGE)),$t.isSDF){const Nt=$t.uniformValues;$t.hasHalo&&(Nt.u_is_halo=1,Dh($t.buffers,vt.segments,c,w,$t.program,lt,X,ie,Nt,$t.projectionData,vt.terrainData)),Nt.u_is_halo=0}Dh($t.buffers,vt.segments,c,w,$t.program,lt,X,ie,$t.uniformValues,$t.projectionData,vt.terrainData)}}function Dh(w,r,c,m,v,I,T,D,N,G,X){const ie=m.context;v.draw(ie,ie.gl.TRIANGLES,I,T,D,Pr.backCCW,N,X,G,c.id,w.layoutVertexBuffer,w.indexBuffer,r,c.paint,m.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Lc(w,r,c,m,v){const I=w.context,T=I.gl,D=xr.disabled,N=new Nr([T.ONE,T.ONE],s.b7.transparent,[!0,!0,!0,!0]),G=r.getBucket(c);if(!G)return;const X=m.key;let ie=c.heatmapFbos.get(X);ie||(ie=Sp(I,r.tileSize,r.tileSize),c.heatmapFbos.set(X,ie)),I.bindFramebuffer.set(ie.framebuffer),I.viewport.set([0,0,r.tileSize,r.tileSize]),I.clear({color:s.b7.transparent});const se=G.programConfigurations.get(c.id),fe=w.useProgram("heatmap",se,!v),_e=w.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),De=w.style.map.terrain.getTerrainData(m);fe.draw(I,T.TRIANGLES,kn.disabled,D,N,Pr.disabled,Ph(r,w.transform.zoom,c.paint.get("heatmap-intensity"),1),De,_e,c.id,G.layoutVertexBuffer,G.indexBuffer,G.segments,c.paint,w.transform.zoom,se)}function Mp(w,r,c,m,v){const I=w.context,T=I.gl,D=w.transform;I.setColorMode(w.colorModeForRenderPass());const N=Dc(I,r),G=c.key,X=r.heatmapFbos.get(G);if(!X)return;I.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,X.colorAttachment.get()),I.activeTexture.set(T.TEXTURE1),N.bind(T.LINEAR,T.CLAMP_TO_EDGE);const ie=D.getProjectionData({overscaledTileID:c,applyTerrainMatrix:v,applyGlobeMatrix:!m});w.useProgram("heatmapTexture").draw(I,T.TRIANGLES,kn.disabled,xr.disabled,w.colorModeForRenderPass(),Pr.disabled,bp(w,r,0,1),null,ie,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,D.zoom),X.destroy(),r.heatmapFbos.delete(G)}function Sp(w,r,c){var m,v;const I=w.gl,T=I.createTexture();I.bindTexture(I.TEXTURE_2D,T),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const D=(m=w.HALF_FLOAT)!==null&&m!==void 0?m:I.UNSIGNED_BYTE,N=(v=w.RGBA16F)!==null&&v!==void 0?v:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,N,r,c,0,I.RGBA,D,null);const G=w.createFramebuffer(r,c,!1,!1);return G.colorAttachment.set(T),G}function Dc(w,r){return r.colorRampTexture||(r.colorRampTexture=new W(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function Hd(w,r,c,m,v){if(!c||!m||!m.imageAtlas)return;const I=m.imageAtlas.patternPositions;let T=I[c.to.toString()],D=I[c.from.toString()];if(!T&&D&&(T=D),!D&&T&&(D=T),!T||!D){const N=v.getPaintProperty(r);T=I[N],D=I[N]}T&&D&&w.setConstantPatternPositions(T,D)}function Ep(w,r,c,m,v,I,T,D){const N=w.context.gl,G="fill-pattern",X=c.paint.get(G),ie=X&&X.constantOr(1),se=c.getCrossfadeParameters();let fe,_e,De,ke,Re;const $e=w.transform,qe=c.paint.get("fill-translate"),Ke=c.paint.get("fill-translate-anchor");T?(_e=ie&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=N.LINES):(_e=ie?"fillPattern":"fill",fe=N.TRIANGLES);const Je=X.constantOr(null);for(const lt of m){const it=r.getTile(lt);if(ie&&!it.patternsLoaded())continue;const xt=it.getBucket(c);if(!xt)continue;const Ct=xt.programConfigurations.get(c.id),vt=w.useProgram(_e,Ct),$t=w.style.map.terrain&&w.style.map.terrain.getTerrainData(lt);ie&&(w.context.activeTexture.set(N.TEXTURE0),it.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Ct.updatePaintBuffers(se)),Hd(Ct,G,Je,it,c);const Nt=$e.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!D,applyTerrainMatrix:!0}),hn=s.aA($e,it,qe,Ke);if(T){ke=xt.indexBuffer2,Re=xt.segments2;const Xt=[N.drawingBufferWidth,N.drawingBufferHeight];De=_e==="fillOutlinePattern"&&ie?Ld(w,se,it,Xt,hn):Xm(Xt,hn)}else ke=xt.indexBuffer,Re=xt.segments,De=ie?Yl(w,se,it,hn):{u_fill_translate:hn};let on;if(w.renderPass==="translucent"&&D){const[Xt]=w.getStencilConfigForOverlapAndUpdateStencilID(m);on=Xt[lt.overscaledZ]}else on=w.stencilModeForClipping(lt);vt.draw(w.context,fe,v,on,I,Pr.backCCW,De,$t,Nt,c.id,xt.layoutVertexBuffer,ke,Re,c.paint,w.transform.zoom,Ct)}}function zi(w,r,c,m,v,I,T,D){const N=w.context,G=N.gl,X="fill-extrusion-pattern",ie=c.paint.get(X),se=ie.constantOr(1),fe=c.getCrossfadeParameters(),_e=c.paint.get("fill-extrusion-opacity"),De=ie.constantOr(null),ke=w.transform;for(const Re of m){const $e=r.getTile(Re),qe=$e.getBucket(c);if(!qe)continue;const Ke=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),Je=qe.programConfigurations.get(c.id),lt=w.useProgram(se?"fillExtrusionPattern":"fillExtrusion",Je);se&&(w.context.activeTexture.set(G.TEXTURE0),$e.imageAtlasTexture.bind(G.LINEAR,G.CLAMP_TO_EDGE),Je.updatePaintBuffers(fe));const it=ke.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!D,applyTerrainMatrix:!0});Hd(Je,X,De,$e,c);const xt=s.aA(ke,$e,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ct=c.paint.get("fill-extrusion-vertical-gradient"),vt=se?pv(w,Ct,_e,xt,Re,fe,$e):Zo(w,Ct,_e,xt);lt.draw(N,N.gl.TRIANGLES,v,I,T,Pr.backCCW,vt,Ke,it,c.id,qe.layoutVertexBuffer,qe.indexBuffer,qe.segments,c.paint,w.transform.zoom,Je,w.style.map.terrain&&qe.centroidVertexBuffer)}}function qi(w,r,c,m,v,I,T,D,N){var G;const X=w.style.projection,ie=w.context,se=w.transform,fe=ie.gl,_e=w.useProgram("hillshade"),De=!w.options.moving;for(const ke of m){const Re=r.getTile(ke),$e=Re.fbo;if(!$e)continue;const qe=X.getMeshFromTileID(ie,ke.canonical,D,!0,"raster"),Ke=(G=w.style.map.terrain)===null||G===void 0?void 0:G.getTerrainData(ke);ie.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,$e.colorAttachment.get());const Je=se.getProjectionData({overscaledTileID:ke,aligned:De,applyGlobeMatrix:!N,applyTerrainMatrix:!0});_e.draw(ie,fe.TRIANGLES,I,v[ke.overscaledZ],T,Pr.backCCW,xp(w,Re,c),Ke,Je,c.id,qe.vertexBuffer,qe.indexBuffer,qe.segments)}}const Rh=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function Gd(w,r,c,m,v,I,T,D,N=!1,G=!1){const X=m[m.length-1].overscaledZ,ie=w.context,se=ie.gl,fe=w.useProgram("raster"),_e=w.transform,De=w.style.projection,ke=w.colorModeForRenderPass(),Re=!w.options.moving;for(const $e of m){const qe=w.getDepthModeForSublayer($e.overscaledZ-X,c.paint.get("raster-opacity")===1?kn.ReadWrite:kn.ReadOnly,se.LESS),Ke=r.getTile($e);Ke.registerFadeDuration(c.paint.get("raster-fade-duration"));const Je=r.findLoadedParent($e,0),lt=r.findLoadedSibling($e),it=Tp(Ke,Je||lt||null,r,c,w.transform,w.style.map.terrain);let xt,Ct;const vt=c.paint.get("raster-resampling")==="nearest"?se.NEAREST:se.LINEAR;ie.activeTexture.set(se.TEXTURE0),Ke.texture.bind(vt,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),ie.activeTexture.set(se.TEXTURE1),Je?(Je.texture.bind(vt,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),xt=Math.pow(2,Je.tileID.overscaledZ-Ke.tileID.overscaledZ),Ct=[Ke.tileID.canonical.x*xt%1,Ke.tileID.canonical.y*xt%1]):Ke.texture.bind(vt,se.CLAMP_TO_EDGE,se.LINEAR_MIPMAP_NEAREST),Ke.texture.useMipmap&&ie.extTextureFilterAnisotropic&&w.transform.pitch>20&&se.texParameterf(se.TEXTURE_2D,ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ie.extTextureFilterAnisotropicMax);const $t=w.style.map.terrain&&w.style.map.terrain.getTerrainData($e),Nt=_e.getProjectionData({overscaledTileID:$e,aligned:Re,applyGlobeMatrix:!G,applyTerrainMatrix:!0}),hn=tg(Ct||[0,0],xt||1,it,c,D),on=De.getMeshFromTileID(ie,$e.canonical,I,T,"raster");fe.draw(ie,se.TRIANGLES,qe,v?v[$e.overscaledZ]:xr.disabled,ke,N?Pr.frontCCW:Pr.backCCW,hn,$t,Nt,c.id,on.vertexBuffer,on.indexBuffer,on.segments)}}function Tp(w,r,c,m,v,I){const T=m.paint.get("raster-fade-duration");if(!I&&T>0){const D=M.now(),N=(D-w.timeAdded)/T,G=r?(D-r.timeAdded)/T:-1,X=c.getSource(),ie=dt(v,{tileSize:X.tileSize,roundZoom:X.roundZoom}),se=!r||Math.abs(r.tileID.overscaledZ-ie)>Math.abs(w.tileID.overscaledZ-ie),fe=se&&w.refreshedUponExpiration?1:s.ae(se?N:1-G,0,1);return w.refreshedUponExpiration&&N>=1&&(w.refreshedUponExpiration=!1),r?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const Fi=new s.b7(1,0,0,1),vl=new s.b7(0,1,0,1),zs=new s.b7(0,0,1,1),Oh=new s.b7(1,0,1,1),Jl=new s.b7(0,1,1,1);function ju(w,r,c,m){vo(w,0,r+c/2,w.transform.width,c,m)}function yo(w,r,c,m){vo(w,r-c/2,0,c,w.transform.height,m)}function vo(w,r,c,m,v,I){const T=w.context,D=T.gl;D.enable(D.SCISSOR_TEST),D.scissor(r*w.pixelRatio,c*w.pixelRatio,m*w.pixelRatio,v*w.pixelRatio),T.clear({color:I}),D.disable(D.SCISSOR_TEST)}function eu(w,r,c){const m=w.context,v=m.gl,I=w.useProgram("debug"),T=kn.disabled,D=xr.disabled,N=w.colorModeForRenderPass(),G="$debug",X=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);m.activeTexture.set(v.TEXTURE0);const ie=r.getTileByID(c.key).latestRawTileData,se=Math.floor((ie&&ie.byteLength||0)/1024),fe=r.getTile(c).tileSize,_e=512/Math.min(fe,512)*(c.overscaledZ/w.transform.zoom)*.5;let De=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(De+=` => ${c.overscaledZ}`),function(Re,$e){Re.initDebugOverlayCanvas();const qe=Re.debugOverlayCanvas,Ke=Re.context.gl,Je=Re.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,qe.width,qe.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText($e,5,5),Je.strokeText($e,5,5),Re.debugOverlayTexture.update(qe),Re.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(w,`${De} ${se}kB`);const ke=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(m,v.TRIANGLES,T,D,Nr.alphaBlended,Pr.disabled,Th(s.b7.transparent,_e),null,ke,G,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),I.draw(m,v.LINE_STRIP,T,D,N,Pr.disabled,Th(s.b7.red),X,ke,G,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Pp(w,r,c,m){const{isRenderingGlobe:v}=m,I=w.context,T=I.gl,D=w.transform,N=w.colorModeForRenderPass(),G=w.getDepthModeFor3D(),X=w.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height]);for(const ie of c){const se=r.getTerrainMesh(ie.tileID),fe=w.renderToTexture.getTexture(ie),_e=r.getTerrainData(ie.tileID);I.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,fe.texture);const De=r.getMeshFrameDelta(D.zoom),ke=D.calculateFogMatrix(ie.tileID.toUnwrapped()),Re=fv(De,ke,w.style.sky,D.pitch,v),$e=D.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});X.draw(I,T.TRIANGLES,G,xr.disabled,N,Pr.backCCW,Re,_e,$e,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}}function kp(w,r){if(!r.mesh){const c=new s.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const m=new s.aK;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),r.mesh=new Tu(w.createVertexBuffer(c,$o.members),w.createIndexBuffer(m),s.aJ.simpleSegment(0,0,c.length,m.length))}return r.mesh}class ug{constructor(r,c){this.context=new Vd(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Et.maxUnderzooming+Et.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ho}resize(r,c,m){if(this.width=Math.floor(r*m),this.height=Math.floor(c*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const r=this.context,c=new s.aI;c.emplaceBack(0,0),c.emplaceBack(s.Z,0),c.emplaceBack(0,s.Z),c.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=r.createVertexBuffer(c,$o.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);const m=new s.aI;m.emplaceBack(0,0),m.emplaceBack(s.Z,0),m.emplaceBack(0,s.Z),m.emplaceBack(s.Z,s.Z),this.debugBuffer=r.createVertexBuffer(m,$o.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);const v=new s.bY;v.emplaceBack(0,0,0,0),v.emplaceBack(s.Z,0,s.Z,0),v.emplaceBack(0,s.Z,0,s.Z),v.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=r.createVertexBuffer(v,mp.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);const I=new s.aI;I.emplaceBack(0,0),I.emplaceBack(s.Z,0),I.emplaceBack(0,s.Z),I.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(I,$o.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);const T=new s.aI;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,$o.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);const D=new s.bZ;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(D);const N=new s.aK;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(N);const G=this.context.gl;this.stencilClearMode=new xr({func:G.ALWAYS,mask:0},0,255,G.ZERO,G.ZERO,G.ZERO),this.tileExtentMesh=new Tu(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=s.K();s.bQ(m,0,this.width,this.height,0,0,1),s.M(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,kn.disabled,this.stencilClearMode,Nr.disabled,Pr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,m){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const v=this.context;v.setColorMode(Nr.disabled),v.setDepthMode(kn.disabled);const I={};for(const T of c)I[T.key]=this.nextStencilID++;this._renderTileMasks(I,c,m,!0),this._renderTileMasks(I,c,m,!1),this._tileClippingMaskIDs=I}_renderTileMasks(r,c,m,v){const I=this.context,T=I.gl,D=this.style.projection,N=this.transform,G=this.useProgram("clippingMask");for(const X of c){const ie=r[X.key],se=this.style.map.terrain&&this.style.map.terrain.getTerrainData(X),fe=D.getMeshFromTileID(this.context,X.canonical,v,!0,"stencil"),_e=N.getProjectionData({overscaledTileID:X,applyGlobeMatrix:!0,applyTerrainMatrix:!0});G.draw(I,T.TRIANGLES,kn.disabled,new xr({func:T.ALWAYS,mask:0},ie,255,T.KEEP,T.KEEP,T.REPLACE),Nr.disabled,m?Pr.disabled:Pr.backCCW,null,se,_e,"$clipping",fe.vertexBuffer,fe.indexBuffer,fe.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,m=this.style.projection,v=this.transform,I=this.useProgram("depth"),T=this.getDepthModeFor3D(),D=We(v,{tileSize:v.tileSize});for(const N of D){const G=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),X=m.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),ie=v.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(r,c.TRIANGLES,T,xr.disabled,Nr.disabled,Pr.backCCW,null,G,ie,"$clipping",X.vertexBuffer,X.indexBuffer,X.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new xr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new xr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,m=r.sort((T,D)=>D.overscaledZ-T.overscaledZ),v=m[m.length-1].overscaledZ,I=m[0].overscaledZ-v+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const T={};for(let D=0;D<I;D++)T[D+v]=new xr({func:c.GEQUAL,mask:255},D+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=I,[T,m]}return[{[v]:xr.disabled},m]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,m=r.sort((T,D)=>D.overscaledZ-T.overscaledZ),v=m[m.length-1].overscaledZ,I=m[0].overscaledZ-v+1;if(this.clearStencil(),I>1){const T={},D={};for(let N=0;N<I;N++)T[N+v]=new xr({func:c.GREATER,mask:255},I+1+N,255,c.KEEP,c.KEEP,c.REPLACE),D[N+v]=new xr({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*I+1,[T,D,m]}return this.nextStencilID=3,[{[v]:new xr({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[v]:new xr({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},m]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Nr([r.CONSTANT_COLOR,r.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}getDepthModeForSublayer(r,c,m){if(!this.opaquePassEnabledForLayer())return kn.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new kn(m||this.context.gl.LEQUAL,c,[v,v])}getDepthModeFor3D(){return new kn(this.context.gl.LEQUAL,kn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var m,v;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();const I=this.style._order,T=this.style.sourceCaches,D={},N={},G={},X={isRenderingToTexture:!1,isRenderingGlobe:((m=r.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const se in T){const fe=T[se];fe.used&&fe.prepare(this.context),D[se]=fe.getVisibleCoordinates(!1),N[se]=D[se].slice().reverse(),G[se]=fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let se=0;se<I.length;se++)if(this.style._layers[I[se]].is3D()){this.opaquePassCutoff=se;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const se of I){const fe=this.style._layers[se];if(!fe.hasOffscreenPass()||fe.isHidden(this.transform.zoom))continue;const _e=N[fe.source];(fe.type==="custom"||_e.length)&&this.renderLayer(this,T[fe.source],fe,_e,X)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:se=>this.useProgram(se)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(se,fe){const _e=se.context,De=_e.gl,ke=((lt,it,xt)=>{const Ct=Math.cos(it.rollInRadians),vt=Math.sin(it.rollInRadians),$t=Xe(it),Nt=it.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:lt.properties.get("sky-color"),u_horizon_color:lt.properties.get("horizon-color"),u_horizon:[(it.width/2-$t*vt)*xt,(it.height/2+$t*Ct)*xt],u_horizon_normal:[-vt,Ct],u_sky_horizon_blend:lt.properties.get("sky-horizon-blend")*it.height/2*xt,u_sky_blend:Nt}})(fe,se.style.map.transform,se.pixelRatio),Re=new kn(De.LEQUAL,kn.ReadWrite,[0,1]),$e=xr.disabled,qe=se.colorModeForRenderPass(),Ke=se.useProgram("sky"),Je=kp(_e,fe);Ke.draw(_e,De.TRIANGLES,Re,$e,qe,Pr.disabled,ke,null,void 0,"sky",Je.vertexBuffer,Je.indexBuffer,Je.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const se=this.style._layers[I[this.currentLayer]],fe=T[se.source],_e=D[se.source];this._renderTileClippingMasks(se,_e,!1),this.renderLayer(this,fe,se,_e,X)}this.renderPass="translucent";let ie=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const se=this.style._layers[I[this.currentLayer]],fe=T[se.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(se,X))continue;this.opaquePassEnabledForLayer()||ie||(ie=!0,X.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const _e=(se.type==="symbol"?G:N)[se.source];this._renderTileClippingMasks(se,D[se.source],!1),this.renderLayer(this,fe,se,_e,X)}if(X.isRenderingGlobe&&function(se,fe,_e){const De=se.context,ke=De.gl,Re=se.useProgram("atmosphere"),$e=new kn(ke.LEQUAL,kn.ReadOnly,[0,1]),qe=se.transform,Ke=function(Nt,hn){const on=Nt.properties.get("position"),Xt=[-on.x,-on.y,-on.z],Dn=s.ad(new Float64Array(16));return Nt.properties.get("anchor")==="map"&&(s.a_(Dn,Dn,hn.rollInRadians),s.a$(Dn,Dn,-hn.pitchInRadians),s.a_(Dn,Dn,hn.bearingInRadians),s.a$(Dn,Dn,hn.center.lat*Math.PI/180),s.bp(Dn,Dn,-hn.center.lng*Math.PI/180)),s.bX(Xt,Xt,Dn),Xt}(_e,se.transform),Je=qe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),lt=fe.properties.get("atmosphere-blend")*Je.projectionTransition;if(lt===0)return;const it=Ys(qe.worldSize,qe.center.lat),xt=qe.inverseProjectionMatrix,Ct=new Float64Array(4);Ct[3]=1,s.at(Ct,Ct,qe.modelViewProjectionMatrix),Ct[0]/=Ct[3],Ct[1]/=Ct[3],Ct[2]/=Ct[3],Ct[3]=1,s.at(Ct,Ct,xt),Ct[0]/=Ct[3],Ct[1]/=Ct[3],Ct[2]/=Ct[3],Ct[3]=1;const vt=((Nt,hn,on,Xt,Dn)=>({u_sun_pos:Nt,u_atmosphere_blend:hn,u_globe_position:on,u_globe_radius:Xt,u_inv_proj_matrix:Dn}))(Ke,lt,[Ct[0],Ct[1],Ct[2]],it,xt),$t=kp(De,fe);Re.draw(De,ke.TRIANGLES,$e,xr.disabled,Nr.alphaBlended,Pr.disabled,vt,null,null,"atmosphere",$t.vertexBuffer,$t.indexBuffer,$t.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const se=function(fe,_e){let De=null;const ke=Object.values(fe._layers).flatMap(Ke=>Ke.source&&!Ke.isHidden(_e)?[fe.sourceCaches[Ke.source]]:[]),Re=ke.filter(Ke=>Ke.getSource().type==="vector"),$e=ke.filter(Ke=>Ke.getSource().type!=="vector"),qe=Ke=>{(!De||De.getSource().maxzoom<Ke.getSource().maxzoom)&&(De=Ke)};return Re.forEach(Ke=>qe(Ke)),De||$e.forEach(Ke=>qe(Ke)),De}(this.style,this.transform.zoom);se&&function(fe,_e,De){for(let ke=0;ke<De.length;ke++)eu(fe,_e,De[ke])}(this,se,se.getVisibleCoordinates())}this.options.showPadding&&function(se){const fe=se.transform.padding;ju(se,se.transform.height-(fe.top||0),3,Fi),ju(se,fe.bottom||0,3,vl),yo(se,fe.left||0,3,zs),yo(se,se.transform.width-(fe.right||0),3,Oh);const _e=se.transform.centerPoint;(function(De,ke,Re,$e){vo(De,ke-1,Re-10,2,20,$e),vo(De,ke-10,Re-1,20,2,$e)})(se,_e.x,se.transform.height-_e.y,Jl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=r?!s.b_(c,m):!s.b$(c,m)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(s.c0(c,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(I,T){const D=I.context,N=D.gl,G=I.transform,X=Nr.unblended,ie=new kn(N.LEQUAL,kn.ReadWrite,[0,1]),se=T.sourceCache.getRenderableTiles(),fe=I.useProgram("terrainDepth");D.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),D.clear({color:s.b7.transparent,depth:1});for(const _e of se){const De=T.getTerrainMesh(_e.tileID),ke=T.getTerrainData(_e.tileID),Re=G.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),$e={u_ele_delta:T.getMeshFrameDelta(G.zoom)};fe.draw(D,N.TRIANGLES,ie,xr.disabled,X,Pr.backCCW,$e,ke,Re,"terrain",De.vertexBuffer,De.indexBuffer,De.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain),function(I,T){const D=I.context,N=D.gl,G=I.transform,X=Nr.unblended,ie=new kn(N.LEQUAL,kn.ReadWrite,[0,1]),se=T.getCoordsTexture(),fe=T.sourceCache.getRenderableTiles(),_e=I.useProgram("terrainCoords");D.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),D.clear({color:s.b7.transparent,depth:1}),T.coordsIndex=[];for(const De of fe){const ke=T.getTerrainMesh(De.tileID),Re=T.getTerrainData(De.tileID);D.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,se.texture);const $e={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(G.zoom)},qe=G.getProjectionData({overscaledTileID:De.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});_e.draw(D,N.TRIANGLES,ie,xr.disabled,X,Pr.backCCW,$e,Re,qe,"terrain",ke.vertexBuffer,ke.indexBuffer,ke.segments),T.coordsIndex.push(De.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain))}renderLayer(r,c,m,v,I){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,s.c1(m)?function(T,D,N,G,X,ie){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:se}=ie,fe=xr.disabled,_e=T.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(De,ke,Re,$e,qe,Ke,Je,lt,it){const xt=ke.transform,Ct=ke.style.map.terrain,vt=qe==="map",$t=Ke==="map";for(const Nt of De){const hn=$e.getTile(Nt),on=hn.getBucket(Re);if(!on||!on.text||!on.text.segments.get().length)continue;const Xt=s.ak(on.textSizeData,xt.zoom),Dn=s.az(hn,1,ke.transform.zoom),Zn=Un(vt,ke.transform,Dn),Wn=Re.layout.get("icon-text-fit")!=="none"&&on.hasIconData();if(Xt){const ni=Math.pow(2,xt.zoom-hn.tileID.overscaledZ),zr=Ct?(ui,si)=>Ct.getElevation(Nt,ui,si):null;jd(on,vt,$t,it,xt,Zn,ni,Xt,Wn,s.aA(xt,hn,Je,lt),Nt.toUnwrapped(),zr)}}}(G,T,N,D,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),X),N.paint.get("icon-opacity").constantOr(1)!==0&&$d(T,D,N,G,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),fe,_e,se),N.paint.get("text-opacity").constantOr(1)!==0&&$d(T,D,N,G,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),fe,_e,se),D.map.showCollisionBoxes&&(kc(T,D,N,G,!0),kc(T,D,N,G,!1))}(r,c,m,v,this.style.placement.variableOffsets,I):s.c2(m)?function(T,D,N,G,X){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:ie}=X,se=N.paint.get("circle-opacity"),fe=N.paint.get("circle-stroke-width"),_e=N.paint.get("circle-stroke-opacity"),De=!N.layout.get("circle-sort-key").isConstant();if(se.constantOr(1)===0&&(fe.constantOr(1)===0||_e.constantOr(1)===0))return;const ke=T.context,Re=ke.gl,$e=T.transform,qe=T.getDepthModeForSublayer(0,kn.ReadOnly),Ke=xr.disabled,Je=T.colorModeForRenderPass(),lt=[],it=$e.getCircleRadiusCorrection();for(let xt=0;xt<G.length;xt++){const Ct=G[xt],vt=D.getTile(Ct),$t=vt.getBucket(N);if(!$t)continue;const Nt=N.paint.get("circle-translate"),hn=N.paint.get("circle-translate-anchor"),on=s.aA($e,vt,Nt,hn),Xt=$t.programConfigurations.get(N.id),Dn=T.useProgram("circle",Xt),Zn=$t.layoutVertexBuffer,Wn=$t.indexBuffer,ni=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ct),zr={programConfiguration:Xt,program:Dn,layoutVertexBuffer:Zn,indexBuffer:Wn,uniformValues:yp(T,vt,N,on,it),terrainData:ni,projectionData:$e.getProjectionData({overscaledTileID:Ct,applyGlobeMatrix:!ie,applyTerrainMatrix:!0})};if(De){const ui=$t.segments.get();for(const si of ui)lt.push({segments:new s.aJ([si]),sortKey:si.sortKey,state:zr})}else lt.push({segments:$t.segments,sortKey:0,state:zr})}De&&lt.sort((xt,Ct)=>xt.sortKey-Ct.sortKey);for(const xt of lt){const{programConfiguration:Ct,program:vt,layoutVertexBuffer:$t,indexBuffer:Nt,uniformValues:hn,terrainData:on,projectionData:Xt}=xt.state;vt.draw(ke,Re.TRIANGLES,qe,Ke,Je,Pr.backCCW,hn,on,Xt,N.id,$t,Nt,xt.segments,N.paint,T.transform.zoom,Ct)}}(r,c,m,v,I):s.c3(m)?function(T,D,N,G,X){if(N.paint.get("heatmap-opacity")===0)return;const ie=T.context,{isRenderingToTexture:se,isRenderingGlobe:fe}=X;if(T.style.map.terrain){for(const _e of G){const De=D.getTile(_e);D.hasRenderableParent(_e)||(T.renderPass==="offscreen"?Lc(T,De,N,_e,fe):T.renderPass==="translucent"&&Mp(T,N,_e,se,fe))}ie.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(_e,De,ke,Re){const $e=_e.context,qe=$e.gl,Ke=_e.transform,Je=xr.disabled,lt=new Nr([qe.ONE,qe.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(it,xt,Ct){const vt=it.gl;it.activeTexture.set(vt.TEXTURE1),it.viewport.set([0,0,xt.width/4,xt.height/4]);let $t=Ct.heatmapFbos.get(s.bU);$t?(vt.bindTexture(vt.TEXTURE_2D,$t.colorAttachment.get()),it.bindFramebuffer.set($t.framebuffer)):($t=Sp(it,xt.width/4,xt.height/4),Ct.heatmapFbos.set(s.bU,$t))})($e,_e,ke),$e.clear({color:s.b7.transparent});for(let it=0;it<Re.length;it++){const xt=Re[it];if(De.hasRenderableParent(xt))continue;const Ct=De.getTile(xt),vt=Ct.getBucket(ke);if(!vt)continue;const $t=vt.programConfigurations.get(ke.id),Nt=_e.useProgram("heatmap",$t),hn=Ke.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),on=Ke.getCircleRadiusCorrection();Nt.draw($e,qe.TRIANGLES,kn.disabled,Je,lt,Pr.backCCW,Ph(Ct,Ke.zoom,ke.paint.get("heatmap-intensity"),on),null,hn,ke.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,ke.paint,Ke.zoom,$t)}$e.viewport.set([0,0,_e.width,_e.height])}(T,D,N,G):T.renderPass==="translucent"&&function(_e,De){const ke=_e.context,Re=ke.gl;ke.setColorMode(_e.colorModeForRenderPass());const $e=De.heatmapFbos.get(s.bU);$e&&(ke.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,$e.colorAttachment.get()),ke.activeTexture.set(Re.TEXTURE1),Dc(ke,De).bind(Re.LINEAR,Re.CLAMP_TO_EDGE),_e.useProgram("heatmapTexture").draw(ke,Re.TRIANGLES,kn.disabled,xr.disabled,_e.colorModeForRenderPass(),Pr.disabled,bp(_e,De,0,1),null,null,De.id,_e.viewportBuffer,_e.quadTriangleIndexBuffer,_e.viewportSegments,De.paint,_e.transform.zoom))}(T,N)}(r,c,m,v,I):s.c4(m)?function(T,D,N,G,X){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:ie}=X,se=N.paint.get("line-opacity"),fe=N.paint.get("line-width");if(se.constantOr(1)===0||fe.constantOr(1)===0)return;const _e=T.getDepthModeForSublayer(0,kn.ReadOnly),De=T.colorModeForRenderPass(),ke=N.paint.get("line-dasharray"),Re=N.paint.get("line-pattern"),$e=Re.constantOr(1),qe=N.paint.get("line-gradient"),Ke=N.getCrossfadeParameters(),Je=$e?"linePattern":ke?"lineSDF":qe?"lineGradient":"line",lt=T.context,it=lt.gl,xt=T.transform;let Ct=!0;for(const vt of G){const $t=D.getTile(vt);if($e&&!$t.patternsLoaded())continue;const Nt=$t.getBucket(N);if(!Nt)continue;const hn=Nt.programConfigurations.get(N.id),on=T.context.program.get(),Xt=T.useProgram(Je,hn),Dn=Ct||Xt.program!==on,Zn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(vt),Wn=Re.constantOr(null);if(Wn&&$t.imageAtlas){const or=$t.imageAtlas,pr=or.patternPositions[Wn.to.toString()],Xi=or.patternPositions[Wn.from.toString()];pr&&Xi&&hn.setConstantPatternPositions(pr,Xi)}const ni=xt.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!ie,applyTerrainMatrix:!0}),zr=xt.getPixelScale(),ui=$e?Qm(T,$t,N,zr,Ke):ke?Rd(T,$t,N,zr,ke,Ke):qe?Ic(T,$t,N,zr,Nt.lineClipsArray.length):Xl(T,$t,N,zr);if($e)lt.activeTexture.set(it.TEXTURE0),$t.imageAtlasTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE),hn.updatePaintBuffers(Ke);else if(ke&&(Dn||T.lineAtlas.dirty))lt.activeTexture.set(it.TEXTURE0),T.lineAtlas.bind(lt);else if(qe){const or=Nt.gradients[N.id];let pr=or.texture;if(N.gradientVersion!==or.version){let Xi=256;if(N.stepInterpolant){const Qi=D.getSource().maxzoom,Ji=vt.canonical.z===Qi?Math.ceil(1<<T.transform.maxZoom-vt.canonical.z):1;Xi=s.ae(s.bV(Nt.maxLineLength/s.Z*1024*Ji),256,lt.maxTextureSize)}or.gradient=s.bW({expression:N.gradientExpression(),evaluationKey:"lineProgress",resolution:Xi,image:or.gradient||void 0,clips:Nt.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new W(lt,or.gradient,it.RGBA),or.version=N.gradientVersion,pr=or.texture}lt.activeTexture.set(it.TEXTURE0),pr.bind(N.stepInterpolant?it.NEAREST:it.LINEAR,it.CLAMP_TO_EDGE)}let si;if(ie){const[or]=T.getStencilConfigForOverlapAndUpdateStencilID(G);si=or[vt.overscaledZ]}else si=T.stencilModeForClipping(vt);Xt.draw(lt,it.TRIANGLES,_e,si,De,Pr.disabled,ui,Zn,ni,N.id,Nt.layoutVertexBuffer,Nt.indexBuffer,Nt.segments,N.paint,T.transform.zoom,hn,Nt.layoutVertexBuffer2),Ct=!1}}(r,c,m,v,I):s.c5(m)?function(T,D,N,G,X){const ie=N.paint.get("fill-color"),se=N.paint.get("fill-opacity");if(se.constantOr(1)===0)return;const{isRenderingToTexture:fe}=X,_e=T.colorModeForRenderPass(),De=N.paint.get("fill-pattern"),ke=T.opaquePassEnabledForLayer()&&!De.constantOr(1)&&ie.constantOr(s.b7.transparent).a===1&&se.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===ke){const Re=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?kn.ReadWrite:kn.ReadOnly);Ep(T,D,N,G,Re,_e,!1,fe)}if(T.renderPass==="translucent"&&N.paint.get("fill-antialias")){const Re=T.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,kn.ReadOnly);Ep(T,D,N,G,Re,_e,!0,fe)}}(r,c,m,v,I):s.c6(m)?function(T,D,N,G,X){const ie=N.paint.get("fill-extrusion-opacity");if(ie===0)return;const{isRenderingToTexture:se}=X;if(T.renderPass==="translucent"){const fe=new kn(T.context.gl.LEQUAL,kn.ReadWrite,T.depthRangeFor3D);if(ie!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))zi(T,D,N,G,fe,xr.disabled,Nr.disabled,se),zi(T,D,N,G,fe,T.stencilModeFor3D(),T.colorModeForRenderPass(),se);else{const _e=T.colorModeForRenderPass();zi(T,D,N,G,fe,xr.disabled,_e,se)}}}(r,c,m,v,I):s.c7(m)?function(T,D,N,G,X){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:ie}=X,se=T.context,fe=T.style.projection.useSubdivision,_e=T.getDepthModeForSublayer(0,kn.ReadOnly),De=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(ke,Re,$e,qe,Ke,Je,lt){const it=ke.context,xt=it.gl;for(const Ct of $e){const vt=Re.getTile(Ct),$t=vt.dem;if(!$t||!$t.data||!vt.needsHillshadePrepare)continue;const Nt=$t.dim,hn=$t.stride,on=$t.getPixels();if(it.activeTexture.set(xt.TEXTURE1),it.pixelStoreUnpackPremultiplyAlpha.set(!1),vt.demTexture=vt.demTexture||ke.getTileTexture(hn),vt.demTexture){const Dn=vt.demTexture;Dn.update(on,{premultiply:!1}),Dn.bind(xt.NEAREST,xt.CLAMP_TO_EDGE)}else vt.demTexture=new W(it,on,xt.RGBA,{premultiply:!1}),vt.demTexture.bind(xt.NEAREST,xt.CLAMP_TO_EDGE);it.activeTexture.set(xt.TEXTURE0);let Xt=vt.fbo;if(!Xt){const Dn=new W(it,{width:Nt,height:Nt,data:null},xt.RGBA);Dn.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Xt=vt.fbo=it.createFramebuffer(Nt,Nt,!0,!1),Xt.colorAttachment.set(Dn.texture)}it.bindFramebuffer.set(Xt.framebuffer),it.viewport.set([0,0,Nt,Nt]),ke.useProgram("hillshadePrepare").draw(it,xt.TRIANGLES,Ke,Je,lt,Pr.disabled,ss(vt.tileID,$t),null,null,qe.id,ke.rasterBoundsBuffer,ke.quadTriangleIndexBuffer,ke.rasterBoundsSegments),vt.needsHillshadePrepare=!1}})(T,D,G,N,_e,xr.disabled,De),se.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(fe){const[ke,Re,$e]=T.stencilConfigForOverlapTwoPass(G);qi(T,D,N,$e,ke,_e,De,!1,ie),qi(T,D,N,$e,Re,_e,De,!0,ie)}else{const[ke,Re]=T.getStencilConfigForOverlapAndUpdateStencilID(G);qi(T,D,N,Re,ke,_e,De,!1,ie)}}(r,c,m,v,I):s.c8(m)?function(T,D,N,G,X){if(T.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!G.length)return;const{isRenderingToTexture:ie}=X,se=D.getSource(),fe=T.style.projection.useSubdivision;if(se instanceof rt)Gd(T,D,N,G,null,!1,!1,se.tileCoords,se.flippedWindingOrder,ie);else if(fe){const[_e,De,ke]=T.stencilConfigForOverlapTwoPass(G);Gd(T,D,N,ke,_e,!1,!0,Rh,!1,ie),Gd(T,D,N,ke,De,!0,!0,Rh,!1,ie)}else{const[_e,De]=T.getStencilConfigForOverlapAndUpdateStencilID(G);Gd(T,D,N,De,_e,!1,!0,Rh,!1,ie)}}(r,c,m,v,I):s.c9(m)?function(T,D,N,G,X){const ie=N.paint.get("background-color"),se=N.paint.get("background-opacity");if(se===0)return;const{isRenderingToTexture:fe}=X,_e=T.context,De=_e.gl,ke=T.style.projection,Re=T.transform,$e=Re.tileSize,qe=N.paint.get("background-pattern");if(T.isPatternMissing(qe))return;const Ke=!qe&&ie.a===1&&se===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==Ke)return;const Je=xr.disabled,lt=T.getDepthModeForSublayer(0,Ke==="opaque"?kn.ReadWrite:kn.ReadOnly),it=T.colorModeForRenderPass(),xt=T.useProgram(qe?"backgroundPattern":"background"),Ct=G||We(Re,{tileSize:$e,terrain:T.style.map.terrain});qe&&(_e.activeTexture.set(De.TEXTURE0),T.imageManager.bind(T.context));const vt=N.getCrossfadeParameters();for(const $t of Ct){const Nt=Re.getProjectionData({overscaledTileID:$t,applyGlobeMatrix:!fe,applyTerrainMatrix:!0}),hn=qe?Wo(se,T,qe,{tileID:$t,tileSize:$e},vt):Mc(se,ie),on=T.style.map.terrain&&T.style.map.terrain.getTerrainData($t),Xt=ke.getMeshFromTileID(_e,$t.canonical,!1,!0,"raster");xt.draw(_e,De.TRIANGLES,lt,Je,it,Pr.backCCW,hn,on,Nt,N.id,Xt.vertexBuffer,Xt.indexBuffer,Xt.segments)}}(r,0,m,v,I):s.ca(m)&&function(T,D,N,G){const{isRenderingGlobe:X}=G,ie=T.context,se=N.implementation,fe=T.style.projection,_e=T.transform,De=_e.getProjectionDataForCustomLayer(X),ke={farZ:_e.farZ,nearZ:_e.nearZ,fov:_e.fov*Math.PI/180,modelViewProjectionMatrix:_e.modelViewProjectionMatrix,projectionMatrix:_e.projectionMatrix,shaderData:{variantName:fe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${fe.shaderPreludeCode.vertexSource}`,define:fe.shaderDefine},defaultProjectionData:De},Re=se.renderingMode?se.renderingMode:"2d";if(T.renderPass==="offscreen"){const $e=se.prerender;$e&&(T.setCustomLayerDefaults(),ie.setColorMode(T.colorModeForRenderPass()),$e.call(se,ie.gl,ke),ie.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),ie.setColorMode(T.colorModeForRenderPass()),ie.setStencilMode(xr.disabled);const $e=Re==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,kn.ReadOnly);ie.setDepthMode($e),se.render(ie.gl,ke),ie.setDirty(),T.setBaseState(),ie.bindFramebuffer.set(null)}}(r,0,m,I))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),m=this.imageManager.getPattern(r.to.toString());return!c||!m}useProgram(r,c,m=!1){this.cache=this.cache||{};const v=!!this.style.map.terrain,I=this.style.projection,T=r+(c?c.cacheKey:"")+`/${m?Ss:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"");return this.cache[T]||(this.cache[T]=new Cc(this.context,er[r],c,Sc[r],this._showOverdrawInspector,v,m?er.projectionMercator:I.shaderPreludeCode,m?qs:I.shaderDefine)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new W(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function Lp(w,r){let c,m=!1,v=null,I=null;const T=()=>{v=null,m&&(w.apply(I,c),v=setTimeout(T,r),m=!1)};return(...D)=>(m=!0,I=this,c=D,v||T(),v)}class Dp{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(m=v)}),(m&&m[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const m=c.join("/");let v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let I=window.location.hash.replace(v,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let T=window.location.href.replace(/(#.+)?$/,I);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=Lp(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,v),T=Math.round(c.lng*I)/I,D=Math.round(c.lat*I)/I,N=this._map.getBearing(),G=this._map.getPitch();let X="";if(X+=r?`/${T}/${D}/${m}`:`${m}/${D}/${T}`,(N||G)&&(X+="/"+Math.round(10*N)/10),G&&(X+=`/${Math.round(G)}`),this._hashName){const ie=this._hashName;let se=!1;const fe=window.location.hash.slice(1).split("&").map(_e=>{const De=_e.split("=")[0];return De===ie?(se=!0,`${De}=${X}`):_e}).filter(_e=>_e);return se||fe.push(`${ie}=${X}`),`#${fe.join("&")}`}return`#${X}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new s.Q(+r[2],+r[1])}catch{return!1}const c=+r[0],m=+(r[3]||0),v=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const pa={linearity:.3,easing:s.cb(0,0,.3,1)},Rc=s.e({deceleration:2500,maxSpeed:1400},pa),Rp=s.e({deceleration:20,maxSpeed:1400},pa),Ce=s.e({deceleration:1e3,maxSpeed:360},pa),Uu=s.e({deceleration:1e3,maxSpeed:90},pa),zh=s.e({deceleration:1e3,maxSpeed:360},pa);class Sa{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=M.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)c.zoom+=I.zoomDelta||0,c.bearing+=I.bearingDelta||0,c.pitch+=I.pitchDelta||0,c.roll+=I.rollDelta||0,I.panDelta&&c.pan._add(I.panDelta),I.around&&(c.around=I.around),I.pinchAround&&(c.pinchAround=I.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const I=tu(c.pan.mag(),m,s.e({},Rc,r||{})),T=c.pan.mult(I.amount/c.pan.mag()),D=this._map.cameraHelper.handlePanInertia(T,this._map.transform);v.center=D.easingCenter,v.offset=D.easingOffset,ur(v,I)}if(c.zoom){const I=tu(c.zoom,m,Rp);v.zoom=this._map.transform.zoom+I.amount,ur(v,I)}if(c.bearing){const I=tu(c.bearing,m,Ce);v.bearing=this._map.transform.bearing+s.ae(I.amount,-179,179),ur(v,I)}if(c.pitch){const I=tu(c.pitch,m,Uu);v.pitch=this._map.transform.pitch+I.amount,ur(v,I)}if(c.roll){const I=tu(c.roll,m,zh);v.roll=this._map.transform.roll+s.ae(I.amount,-179,179),ur(v,I)}if(v.zoom||v.bearing){const I=c.pinchAround===void 0?c.around:c.pinchAround;v.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),s.e(v,{noMoveStart:!0})}}function ur(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function tu(w,r,c){const{maxSpeed:m,linearity:v,deceleration:I}=c,T=s.ae(w*v/(r/1e3),-m,m),D=Math.abs(T)/(I*v);return{easing:c.easing,duration:1e3*D,amount:T*(D/2)}}class ma extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(r,m);const I=A.mousePos(c.getCanvas(),m),T=c.unproject(I);super(r,s.e({point:I,lngLat:T,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class Qs extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){const v=r==="touchend"?m.changedTouches:m.touches,I=A.touchPos(c.getCanvasContainer(),v),T=I.map(N=>c.unproject(N)),D=I.reduce((N,G,X,ie)=>N.add(G.div(ie.length)),new s.P(0,0));super(r,{points:I,point:D,lngLats:T,lngLat:c.unproject(D),originalEvent:m}),this._defaultPrevented=!1}}class Ts extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){super(r,{originalEvent:m}),this._defaultPrevented=!1}}class cg{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Ts(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new ma(r.type,this._map,r))}mouseup(r){this._map.fire(new ma(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ma(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ma(r.type,this._map,r))}mouseover(r){this._map.fire(new ma(r.type,this._map,r))}mouseout(r){this._map.fire(new ma(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Qs(r.type,this._map,r))}touchmove(r){this._map.fire(new Qs(r.type,this._map,r))}touchend(r){this._map.fire(new Qs(r.type,this._map,r))}touchcancel(r){this._map.fire(new Qs(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yo{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ma(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ma("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ma(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xo{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(s.P.convert(r),this._map.terrain)}}class hg{constructor(r,c){this._map=r,this._tr=new Xo(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(A.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const I=Math.min(v.x,m.x),T=Math.max(v.x,m.x),D=Math.min(v.y,m.y),N=Math.max(v.y,m.y);A.setTransform(this._box,`translate(${I}px,${D}px)`),this._box.style.width=T-I+"px",this._box.style.height=N-D+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const m=this._startPos,v=c;if(this.reset(),A.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:r})),{cameraAnimation:I=>I.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new s.l(r,{originalEvent:c}))}}function Op(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const c={};for(let m=0;m<w.length;m++)c[w[m].identifier]=r[m];return c}class _l{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const I=new s.P(0,0);for(const T of v)I._add(T);return I.div(v.length)}(c),this.touches=Op(m,c)))}touchmove(r,c,m){if(this.aborted||!this.centroid)return;const v=Op(m,c);for(const I in this.touches){const T=v[I];(!T||T.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(r,c,m){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class zp{constructor(r){this.singleTap=new _l(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,m){this.singleTap.touchstart(r,c,m)}touchmove(r,c,m){this.singleTap.touchmove(r,c,m)}touchend(r,c,m){const v=this.singleTap.touchend(r,c,m);if(v){const I=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(v)<30;if(I&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class dg{constructor(r){this._tr=new Xo(r),this._zoomIn=new zp({numTouches:1,numTaps:2}),this._zoomOut=new zp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,m){this._zoomIn.touchstart(r,c,m),this._zoomOut.touchstart(r,c,m)}touchmove(r,c,m){this._zoomIn.touchmove(r,c,m),this._zoomOut.touchmove(r,c,m)}touchend(r,c,m){const v=this._zoomIn.touchend(r,c,m),I=this._zoomOut.touchend(r,c,m),T=this._tr;return v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(v)},{originalEvent:r})}):I?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(I)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class bl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const v=Array.isArray(c)?c[0]:c;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&A.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const xl={0:1,2:2};class yn{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=A.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,m){const v=xl[m];return c.buttons===void 0||(c.buttons&v)!==v}(r,this._eventButton)}isValidEndEvent(r){return A.mouseButton(r)===this._eventButton}}class Qo{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Fp{constructor(r=new yn({checkCorrectEvent:()=>!0}),c=new Qo){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,m){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?m(r):void 0}startMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Fh=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}};class Bh{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,m){return this._calculateTransform(r,c,m)}touchmove(r,c,m){if(this._active){if(!this._shouldBePrevented(m.length))return r.preventDefault(),this._calculateTransform(r,c,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,m){this._calculateTransform(r,c,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,m){m.length>0&&(this._active=!0);const v=Op(m,c),I=new s.P(0,0),T=new s.P(0,0);let D=0;for(const G in v){const X=v[G],ie=this._touches[G];ie&&(I._add(X),T._add(X.sub(ie)),D++,v[G]=X)}if(this._touches=v,this._shouldBePrevented(D)||!T.mag())return;const N=T.div(D);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(D),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $u{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,m){if(!this._firstTwoTouches)return;r.preventDefault();const[v,I]=this._firstTwoTouches,T=Nh(m,c,v),D=Nh(m,c,I);if(!T||!D)return;const N=this._aroundCenter?null:T.add(D).div(2);return this._move([T,D],N,r)}touchend(r,c,m){if(!this._firstTwoTouches)return;const[v,I]=this._firstTwoTouches,T=Nh(m,c,v),D=Nh(m,c,I);T&&D||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Nh(w,r,c){for(let m=0;m<w.length;m++)if(w[m].identifier===c)return r[m]}function tr(w,r){return Math.log(w/r)/Math.LN2}class Zd extends $u{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const m=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(tr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tr(this._distance,m),pinchAround:c}}}function fg(w,r){return 180*w.angleWith(r)/Math.PI}class ga extends $u{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,m){const v=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fg(this._vector,v),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,m=fg(r,this._startVector);return Math.abs(m)<c}}function Bp(w){return Math.abs(w.y)>Math.abs(w.x)}class pg extends $u{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,m){super.touchstart(r,c,m),this._currentTouchCount=m.length}_start(r){this._lastPoints=r,Bp(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=r[0].sub(this._lastPoints[0]),I=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,I,m.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(v.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,m){if(this._valid!==void 0)return this._valid;const v=r.mag()>=2,I=c.mag()>=2;if(!v&&!I)return;if(!v||!I)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Bp(r)&&Bp(c)&&T}}const mg={panStep:100,bearingStep:15,pitchStep:10};class Wd{constructor(r){this._tr=new Xo(r);const c=mg;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,m=0,v=0,I=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?m=-1:(r.preventDefault(),I=-1);break;case 39:r.shiftKey?m=1:(r.preventDefault(),I=1);break;case 38:r.shiftKey?v=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?v=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:D=>{const N=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:gg,zoom:c?Math.round(N.zoom)+c*(r.shiftKey?2:1):N.zoom,bearing:N.bearing+m*this._bearingStep,pitch:N.pitch+v*this._pitchStep,offset:[-I*this._panStep,-T*this._panStep],center:N.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gg(w){return w*(2-w)}const Np=4.000244140625;class qd{constructor(r,c){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=r,this._tr=new Xo(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const m=M.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%Np==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=A.mousePos(this._map.getCanvas(),r),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(s.Q.convert(m.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const D=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=D),typeof this._targetZoom=="number"&&(this._targetZoom+=D)}if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>Np?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&N!==0&&(N=1/N);const G=typeof this._targetZoom!="number"?r.scale:s.ac(this._targetZoom);this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,s.ah(G*N))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,m=this._startZoom,v=this._easing;let I,T=!1;if(this._type==="wheel"&&m&&v){const D=M.now()-this._lastWheelEventTime,N=Math.min((D+5)/200,1),G=v(N);I=s.B.number(m,c,G),N<1?this._frameId||(this._frameId=!0):T=!0}else I=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!T,zoomDelta:I-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=s.cd;if(this._prevEase){const m=this._prevEase,v=(M.now()-m.start)/m.duration,I=m.easing(v+.01)-m.easing(v),T=.27/Math.sqrt(I*I+1e-4)*.01,D=Math.sqrt(.0729-T*T);c=s.cb(T,D,.25,1)}return this._prevEase={start:M.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yg{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class bv{constructor(r){this._tr=new Xo(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jo{constructor(){this._tap=new zp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,m){if(!this._swipePoint)if(this._tapTime){const v=c[0],I=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(v)<30;I&&T?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(r,c,m)}touchmove(r,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],I=v.y-this._swipePoint.y;return this._swipePoint=v,r.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(r,c,m)}touchend(r,c,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(r,c,m);v&&(this._tapTime=r.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yr{constructor(r,c,m){this._el=r,this._mousePan=c,this._touchPan=m}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class nu{constructor(r,c,m,v){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Kd{constructor(r,c,m,v){this._el=r,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Yd{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=m,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Vh=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class el extends s.l{}function jh(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Fs{constructor(r,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,I)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=v.type==="renderFrame"?void 0:v,D={needsRenderFrame:!1},N={},G={};for(const{handlerName:se,handler:fe,allowed:_e}of this._handlers){if(!fe.isEnabled())continue;let De;if(this._blockedByActive(G,_e,se))fe.reset();else if(fe[I||v.type]){if(s.ce(v,I||v.type)){const ke=A.mousePos(this._map.getCanvas(),v);De=fe[I||v.type](v,ke)}else if(s.cf(v,I||v.type)){const ke=this._getMapTouches(v.touches),Re=A.touchPos(this._map.getCanvas(),ke);De=fe[I||v.type](v,Re,ke)}else s.cg(I||v.type)||(De=fe[I||v.type](v));this.mergeHandlerResult(D,N,De,se,T),De&&De.needsRenderFrame&&this._triggerRenderFrame()}(De||fe.isActive())&&(G[se]=fe)}const X={};for(const se in this._previousActiveHandlers)G[se]||(X[se]=T);this._previousActiveHandlers=G,(Object.keys(X).length||jh(D))&&(this._changes.push([D,N,X]),this._triggerRenderFrame()),(Object.keys(G).length||jh(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ie}=D;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sa(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,I,T]of this._listeners)A.addEventListener(v,I,v===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,m]of this._listeners)A.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(r){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new cg(c,r));const v=c.boxZoom=new hg(c,r);this._add("boxZoom",v),r.interactive&&r.boxZoom&&v.enable();const I=c.cooperativeGestures=new Yd(c,r.cooperativeGestures);this._add("cooperativeGestures",I),r.cooperativeGestures&&I.enable();const T=new dg(c),D=new bv(c);c.doubleClickZoom=new yg(D,T),this._add("tapZoom",T),this._add("clickZoom",D),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const N=new Jo;this._add("tapDragZoom",N);const G=c.touchPitch=new pg(c);this._add("touchPitch",G),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const X=()=>c.project(c.getCenter()),ie=function({enable:Ke,clickTolerance:Je,aroundCenter:lt=!0,minPixelCenterThreshold:it=100,rotateDegreesPerPixelMoved:xt=.8},Ct){const vt=new yn({checkCorrectEvent:$t=>A.mouseButton($t)===0&&$t.ctrlKey||A.mouseButton($t)===2&&!$t.ctrlKey});return new bl({clickTolerance:Je,move:($t,Nt)=>{const hn=Ct();if(lt&&Math.abs(hn.y-$t.y)>it)return{bearingDelta:s.cc(new s.P($t.x,Nt.y),Nt,hn)};let on=(Nt.x-$t.x)*xt;return lt&&Nt.y<hn.y&&(on=-on),{bearingDelta:on}},moveStateManager:vt,enable:Ke,assignEvents:Fh})}(r,X),se=function({enable:Ke,clickTolerance:Je,pitchDegreesPerPixelMoved:lt=-.5}){const it=new yn({checkCorrectEvent:xt=>A.mouseButton(xt)===0&&xt.ctrlKey||A.mouseButton(xt)===2});return new bl({clickTolerance:Je,move:(xt,Ct)=>({pitchDelta:(Ct.y-xt.y)*lt}),moveStateManager:it,enable:Ke,assignEvents:Fh})}(r),fe=function({enable:Ke,clickTolerance:Je,rollDegreesPerPixelMoved:lt=.3},it){const xt=new yn({checkCorrectEvent:Ct=>A.mouseButton(Ct)===2&&Ct.ctrlKey});return new bl({clickTolerance:Je,move:(Ct,vt)=>{const $t=it();let Nt=(vt.x-Ct.x)*lt;return vt.y<$t.y&&(Nt=-Nt),{rollDelta:Nt}},moveStateManager:xt,enable:Ke,assignEvents:Fh})}(r,X);c.dragRotate=new nu(r,ie,se,fe),this._add("mouseRotate",ie,["mousePitch"]),this._add("mousePitch",se,["mouseRotate","mouseRoll"]),this._add("mouseRoll",fe,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const _e=function({enable:Ke,clickTolerance:Je}){const lt=new yn({checkCorrectEvent:it=>A.mouseButton(it)===0&&!it.ctrlKey});return new bl({clickTolerance:Je,move:(it,xt)=>({around:xt,panDelta:xt.sub(it)}),activateOnStart:!0,moveStateManager:lt,enable:Ke,assignEvents:Fh})}(r),De=new Bh(r,c);c.dragPan=new Yr(m,_e,De),this._add("mousePan",_e),this._add("touchPan",De,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const ke=new ga,Re=new Zd;c.touchZoomRotate=new Kd(m,Re,ke,N),this._add("touchRotate",ke,["touchPan","touchZoom"]),this._add("touchZoom",Re,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const $e=c.scrollZoom=new qd(c,()=>this._triggerRenderFrame());this._add("scrollZoom",$e,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const qe=c.keyboard=new Wd(c);this._add("keyboard",qe),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Yo(c))}_add(r,c,m){this._handlers.push({handlerName:r,handler:c,allowed:m}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vh(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,m){for(const v in r)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const m of r)this._el.contains(m.target)&&c.push(m);return c}mergeHandlerResult(r,c,m,v,I){if(!m)return;s.e(r,m);const T={handlerName:v,originalEvent:m.originalEvent||I};m.zoomDelta!==void 0&&(c.zoom=T),m.panDelta!==void 0&&(c.drag=T),m.rollDelta!==void 0&&(c.roll=T),m.pitchDelta!==void 0&&(c.pitch=T),m.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},m={};for(const[v,I,T]of this._changes)v.panDelta&&(r.panDelta=(r.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(r.rollDelta=(r.rollDelta||0)+v.rollDelta),v.around!==void 0&&(r.around=v.around),v.pinchAround!==void 0&&(r.pinchAround=v.pinchAround),v.noInertia&&(r.noInertia=v.noInertia),s.e(c,I),s.e(m,T);this._updateMapTransform(r,c,m),this._changes=[]}_updateMapTransform(r,c,m){const v=this._map,I=v._getTransformForUpdate(),T=v.terrain;if(!(jh(r)||T&&this._terrainMovement))return this._fireEvents(c,m,!0);v._stop(!0);let{panDelta:D,zoomDelta:N,bearingDelta:G,pitchDelta:X,rollDelta:ie,around:se,pinchAround:fe}=r;fe!==void 0&&(se=fe),se=se||v.transform.centerPoint,T&&!I.isPointOnMapSurface(se)&&(se=I.centerPoint);const _e={panDelta:D,zoomDelta:N,rollDelta:ie,pitchDelta:X,bearingDelta:G,around:se};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(se)&&(se=I.centerPoint);const De=se.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(D?se.sub(D):se);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(_e,I),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?I.setCenter(I.screenPointToLocation(I.centerPoint.sub(D))):this._map.cameraHelper.handleMapControlsPan(_e,I,De):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(_e,I,De))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(_e,I),this._map.cameraHelper.handleMapControlsPan(_e,I,De)),v._applyUpdatedTransform(I),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,m,!0)}_fireEvents(r,c,m){const v=Vh(this._eventsInProgress),I=Vh(r),T={};for(const ie in r){const{originalEvent:se}=r[ie];this._eventsInProgress[ie]||(T[`${ie}start`]=se),this._eventsInProgress[ie]=r[ie]}!v&&I&&this._fireEvent("movestart",I.originalEvent);for(const ie in T)this._fireEvent(ie,T[ie]);I&&this._fireEvent("move",I.originalEvent);for(const ie in r){const{originalEvent:se}=r[ie];this._fireEvent(ie,se)}const D={};let N;for(const ie in this._eventsInProgress){const{handlerName:se,originalEvent:fe}=this._eventsInProgress[ie];this._handlersById[se].isActive()||(delete this._eventsInProgress[ie],N=c[se]||fe,D[`${ie}end`]=N)}for(const ie in D)this._fireEvent(ie,D[ie]);const G=Vh(this._eventsInProgress),X=(v||I)&&!G;if(X&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ie=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ie.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ie)}if(m&&X){this._updatingCamera=!0;const ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),se=fe=>fe!==0&&-this._bearingSnap<fe&&fe<this._bearingSnap;!ie||!ie.essential&&M.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:N})),se(this._map.getBearing())&&this._map.resetNorth()):(se(ie.bearing||this._map.getBearing())&&(ie.bearing=0),ie.freezeElevation=!0,this._map.easeTo(ie,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new s.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new el("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Js extends s.E{constructor(r,c,m){super(),this._renderFrameCallback=()=>{const v=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=m.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,m){return r=s.P.convert(r).mult(-1),this.panTo(this.transform.center,s.e({offset:r},c),m)}panTo(r,c,m){return this.easeTo(s.e({center:r},c),m)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,m){return this.easeTo(s.e({zoom:r},c),m)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new s.l("movestart",c)).fire(new s.l("move",c)).fire(new s.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,m){return this.easeTo(s.e({bearing:r},c),m)}resetNorth(r,c){return this.rotateTo(0,s.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=$.convert(r).adjustAntiMeridian();const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),m,c)}_cameraForBoxAndBearing(r,c,m,v){const I={top:0,bottom:0,right:0,left:0};if(typeof(v=s.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const G=v.padding;v.padding={top:G,bottom:G,right:G,left:G}}const T=s.e(I,v.padding);v.padding=T;const D=this.transform,N=new $(r,c);return this.cameraHelper.cameraForBoxAndBearing(v,T,N,m,D)}fitBounds(r,c,m){return this._fitInternal(this.cameraForBounds(r,c),c,m)}fitScreenCoordinates(r,c,m,v,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(r)),this.transform.screenPointToLocation(s.P.convert(c)),m,v),v,I)}_fitInternal(r,c,m){return r?(delete(c=s.e(r,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(r,c){this.stop();const m=this._getTransformForUpdate();let v=!1,I=!1,T=!1;const D=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,r);const N=m.zoom!==D;return"elevation"in r&&m.elevation!==+r.elevation&&m.setElevation(+r.elevation),"bearing"in r&&m.bearing!==+r.bearing&&(v=!0,m.setBearing(+r.bearing)),"pitch"in r&&m.pitch!==+r.pitch&&(I=!0,m.setPitch(+r.pitch)),"roll"in r&&m.roll!==+r.roll&&(T=!0,m.setRoll(+r.roll)),r.padding==null||m.isPaddingEqual(r.padding)||m.setPadding(r.padding),this._applyUpdatedTransform(m),this.fire(new s.l("movestart",c)).fire(new s.l("move",c)),N&&this.fire(new s.l("zoomstart",c)).fire(new s.l("zoom",c)).fire(new s.l("zoomend",c)),v&&this.fire(new s.l("rotatestart",c)).fire(new s.l("rotate",c)).fire(new s.l("rotateend",c)),I&&this.fire(new s.l("pitchstart",c)).fire(new s.l("pitch",c)).fire(new s.l("pitchend",c)),T&&this.fire(new s.l("rollstart",c)).fire(new s.l("roll",c)).fire(new s.l("rollend",c)),this.fire(new s.l("moveend",c))}calculateCameraOptionsFromTo(r,c,m,v=0){const I=s.$.fromLngLat(r,c),T=s.$.fromLngLat(m,v),D=T.x-I.x,N=T.y-I.y,G=T.z-I.z,X=Math.hypot(D,N,G);if(X===0)throw new Error("Can't calculate camera options with same From and To");const ie=Math.hypot(D,N),se=s.ah(this.transform.cameraToCenterDistance/X/this.transform.tileSize),fe=180*Math.atan2(D,-N)/Math.PI;let _e=180*Math.acos(ie/X)/Math.PI;return _e=G<0?90-_e:90+_e,{center:T.toLngLat(),elevation:v,zoom:se,pitch:_e,bearing:fe}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,m,v,I){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,c,m,v);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:m,pitch:v,roll:I}}easeTo(r,c){this._stop(!1,r.easeId),((r=s.e({offset:[0,0],duration:500,easing:s.cd},r)).animate===!1||!r.essential&&M.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),v=this.getBearing(),I=m.pitch,T=m.roll,D="bearing"in r?this._normalizeBearing(r.bearing,v):v,N="pitch"in r?+r.pitch:I,G="roll"in r?this._normalizeBearing(r.roll,T):T,X="padding"in r?r.padding:m.padding,ie=s.P.convert(r.offset);let se,fe;r.around&&(se=s.Q.convert(r.around),fe=m.locationToScreenPoint(se));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},De=this.cameraHelper.handleEaseTo(m,{bearing:D,pitch:N,roll:G,padding:X,around:se,aroundPoint:fe,offsetAsPoint:ie,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||v!==D,this._pitching=this._pitching||N!==I,this._rolling=this._rolling||G!==T,this._padding=!m.isPaddingEqual(X),this._zooming=this._zooming||De.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,_e),this.terrain&&this._prepareElevation(De.elevationCenter),this._ease(ke=>{De.easeFunc(ke),this.terrain&&!r.freezeElevation&&this._updateElevation(ke),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},ke=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ke)},r),this}_prepareEase(r,c,m={}){this._moving=!0,c||m.moving||this.fire(new s.l("movestart",r)),this._zooming&&!m.zooming&&this.fire(new s.l("zoomstart",r)),this._rotating&&!m.rotating&&this.fire(new s.l("rotatestart",r)),this._pitching&&!m.pitching&&this.fire(new s.l("pitchstart",r)),this._rolling&&!m.rolling&&this.fire(new s.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(m-(c-(m*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),m=r.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(m<v){const I=this.calculateCameraOptionsFromTo(c,v,r.center,r.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&c.push(v=>this.transformCameraUpdate(v)),!c.length)return;const m=r.clone();for(const v of c){const I=m.clone(),{center:T,zoom:D,roll:N,pitch:G,bearing:X,elevation:ie}=v(I);T&&I.setCenter(T),ie!==void 0&&I.setElevation(ie),D!==void 0&&I.setZoom(D),N!==void 0&&I.setRoll(N),G!==void 0&&I.setPitch(G),X!==void 0&&I.setBearing(X),m.apply(I)}this.transform.apply(m)}_fireMoveEvents(r){this.fire(new s.l("move",r)),this._zooming&&this.fire(new s.l("zoom",r)),this._rotating&&this.fire(new s.l("rotate",r)),this._pitching&&this.fire(new s.l("pitch",r)),this._rolling&&this.fire(new s.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,I=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new s.l("zoomend",r)),v&&this.fire(new s.l("rotateend",r)),I&&this.fire(new s.l("pitchend",r)),T&&this.fire(new s.l("rollend",r)),this.fire(new s.l("moveend",r))}flyTo(r,c){if(!r.essential&&M.prefersReducedMotion){const Nt=s.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Nt,c)}this.stop(),r=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cd},r);const m=this._getTransformForUpdate(),v=m.bearing,I=m.pitch,T=m.roll,D=m.padding,N="bearing"in r?this._normalizeBearing(r.bearing,v):v,G="pitch"in r?+r.pitch:I,X="roll"in r?this._normalizeBearing(r.roll,T):T,ie="padding"in r?r.padding:m.padding,se=s.P.convert(r.offset);let fe=m.centerPoint.add(se);const _e=m.screenPointToLocation(fe),De=this.cameraHelper.handleFlyTo(m,{bearing:N,pitch:G,roll:X,padding:ie,locationAtOffset:_e,offsetAsPoint:se,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let ke=r.curve;const Re=Math.max(m.width,m.height),$e=Re/De.scaleOfZoom,qe=De.pixelPathLength;typeof De.scaleOfMinZoom=="number"&&(ke=Math.sqrt(Re/De.scaleOfMinZoom/qe*2));const Ke=ke*ke;function Je(Nt){const hn=($e*$e-Re*Re+(Nt?-1:1)*Ke*Ke*qe*qe)/(2*(Nt?$e:Re)*Ke*qe);return Math.log(Math.sqrt(hn*hn+1)-hn)}function lt(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function it(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const xt=Je(!1);let Ct=function(Nt){return it(xt)/it(xt+ke*Nt)},vt=function(Nt){return Re*((it(xt)*(lt(hn=xt+ke*Nt)/it(hn))-lt(xt))/Ke)/qe;var hn},$t=(Je(!0)-xt)/ke;if(Math.abs(qe)<2e-6||!isFinite($t)){if(Math.abs(Re-$e)<1e-6)return this.easeTo(r,c);const Nt=$e<Re?-1:1;$t=Math.abs(Math.log($e/Re))/ke,vt=()=>0,Ct=hn=>Math.exp(Nt*ke*hn)}return r.duration="duration"in r?+r.duration:1e3*$t/("screenSpeed"in r?+r.screenSpeed/ke:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==N,this._pitching=G!==I,this._rolling=X!==T,this._padding=!m.isPaddingEqual(ie),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(De.targetCenter),this._ease(Nt=>{const hn=Nt*$t,on=1/Ct(hn),Xt=vt(hn);this._rotating&&m.setBearing(s.B.number(v,N,Nt)),this._pitching&&m.setPitch(s.B.number(I,G,Nt)),this._rolling&&m.setRoll(s.B.number(T,X,Nt)),this._padding&&(m.interpolatePadding(D,ie,Nt),fe=m.centerPoint.add(se)),De.easeFunc(Nt,on,Xt,fe),this.terrain&&!r.freezeElevation&&this._updateElevation(Nt),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return r||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(r,c,m){m.animate===!1||m.duration===0?(r(1),c()):(this._easeStart=M.now(),this._easeOptions=m,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=s.aL(r,-180,180);const m=Math.abs(r-c);return Math.abs(r-360-c)<m&&(r-=360),Math.abs(r+360-c)<m&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(r),this.transform.tileZoom):null}}const On={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Nn{constructor(r=On){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const m=this._map._getUIString(`AttributionControl.${c}`);r.title=m,r.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const I=c[v];if(I.used||I.usedForTerrain){const T=I.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(v=>String(v).trim()),r.sort((v,I)=>v.length-I.length),r=r.filter((v,I)=>{for(let T=I+1;T<r.length;T++)if(r[T].indexOf(v)>=0)return!1;return!0});const m=r.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,r.length?(this._innerContainer.innerHTML=A.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Oc{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const c=A.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===r)return void(v.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var tl=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class ea extends s.E{constructor(r){super(),this._lastTilesetChange=M.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const m={};for(const v of We(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(v.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[v.key]=new ct(v,this.tileSize),this._lastTilesetChange=M.now());for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(r){for(const c in this._tiles){const m=this._tiles[c];(!r||m.tileID.equals(r)||m.tileID.isChildOf(r)||r.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID,I=r.clone(),T=s.b2();if(v.canonical.equals(r.canonical))s.bQ(T,0,s.Z,s.Z,0,0,1);else if(v.canonical.isChildOf(r.canonical)){const D=v.canonical.z-r.canonical.z,N=v.canonical.x-(v.canonical.x>>D<<D),G=v.canonical.y-(v.canonical.y>>D<<D),X=s.Z>>D;s.bQ(T,0,X,X,0,0,1),s.L(T,T,[-N*X,-G*X,0])}else{if(!r.canonical.isChildOf(v.canonical))continue;{const D=r.canonical.z-v.canonical.z,N=r.canonical.x-(r.canonical.x>>D<<D),G=r.canonical.y-(r.canonical.y>>D<<D),X=s.Z>>D;s.bQ(T,0,s.Z,s.Z,0,0,1),s.L(T,T,[N*X,G*X,0]),s.M(T,T,[1/2**D,1/2**D,0])}}I.terrainRttPosMatrix32f=new Float32Array(T),c[m]=I}return c}_getTerrainCoordsForTileRanges(r,c){const m={};for(const v of this._renderableTilesKeys){const I=this._tiles[v].tileID;if(!this._isWithinTileRanges(I,c))continue;const T=r.clone(),D=s.b2();if(I.canonical.z===r.canonical.z){const N=r.canonical.x-I.canonical.x,G=r.canonical.y-I.canonical.y;s.bQ(D,0,s.Z,s.Z,0,0,1),s.L(D,D,[N*s.Z,G*s.Z,0])}else if(I.canonical.z>r.canonical.z){const N=I.canonical.z-r.canonical.z,G=I.canonical.x-(I.canonical.x>>N<<N),X=I.canonical.y-(I.canonical.y>>N<<N),ie=r.canonical.x-(I.canonical.x>>N),se=r.canonical.y-(I.canonical.y>>N),fe=s.Z>>N;s.bQ(D,0,fe,fe,0,0,1),s.L(D,D,[-G*fe+ie*s.Z,-X*fe+se*s.Z,0])}else{const N=r.canonical.z-I.canonical.z,G=r.canonical.x-(r.canonical.x>>N<<N),X=r.canonical.y-(r.canonical.y>>N<<N),ie=(r.canonical.x>>N)-I.canonical.x,se=(r.canonical.y>>N)-I.canonical.y,fe=s.Z<<N;s.bQ(D,0,fe,fe,0,0,1),s.L(D,D,[G*s.Z+ie*fe,X*s.Z+se*fe,0])}T.terrainRttPosMatrix32f=new Float32Array(D),m[v]=T}return m}getSourceTile(r,c){const m=this.sourceCache._source;let v=r.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(v).key);let I=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!I||!I.dem)&&c)for(;v>=m.minzoom&&(!I||!I.dem);)I=this.sourceCache.getTileByID(r.scaledTo(v--).key);return I}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class vg{constructor(r,c,m){this._meshCache={},this.painter=r,this.sourceCache=new ea(c),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,m,v=s.Z){var I;if(!(c>=0&&c<v&&m>=0&&m<v))return 0;const T=this.getTerrainData(r),D=(I=T.tile)===null||I===void 0?void 0:I.dem;if(!D)return 0;const N=s.ch([],[c/v*s.Z,m/v*s.Z],T.u_terrain_matrix),G=[N[0]*D.dim,N[1]*D.dim],X=Math.floor(G[0]),ie=Math.floor(G[1]),se=G[0]-X,fe=G[1]-ie;return D.get(X,ie)*(1-se)*(1-fe)+D.get(X+1,ie)*se*(1-fe)+D.get(X,ie+1)*(1-se)*fe+D.get(X+1,ie+1)*se*fe}getElevationForLngLatZoom(r,c){if(!s.ci(c,r.wrap()))return 0;const{tileID:m,mercatorX:v,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(m,v%s.Z,I%s.Z,s.Z)}getElevation(r,c,m,v=s.Z){return this.getDEMElevation(r,c,m,v)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const v=this.painter.context,I=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new W(v,I,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new W(v,new s.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new W(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c+c.tileID.key+r.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let I=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=v?I=r.canonical.z-v:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>I<<I),D=r.canonical.y-(r.canonical.y>>I<<I),N=s.cj(new Float64Array(16),[1/(s.Z<<I),1/(s.Z<<I),0]);s.L(N,N,[T*s.Z,D*s.Z,0]),this._demMatrixCache[r.key]={matrix:N,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,m=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new W(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new W(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,T=0;I<this._coordsTextureSize;I++)for(let D=0;D<this._coordsTextureSize;D++,T+=4)c[T+0]=255&D,c[T+1]=255&I,c[T+2]=D>>8<<4|I>>8,c[T+3]=0;const m=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new W(r,m,r.gl.RGBA,{premultiply:!1});return v.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),m=this.painter.context,v=m.gl,I=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(I,D-T-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),G=c[1]+((15&c[2])<<8),X=this.coordsIndex[255-c[3]],ie=X&&this.sourceCache.getTileByID(X);if(!ie)return null;const se=this._coordsTextureSize,fe=(1<<ie.tileID.canonical.z)*se;return new s.$((ie.tileID.canonical.x*se+N)/fe+ie.tileID.wrap,(ie.tileID.canonical.y*se+G)/fe,this.getElevation(ie.tileID,N,G,se))}depthAtPoint(r){const c=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const m=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,v=m&&r.canonical.y===0,I=m&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${v?"n":""}_${I?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const D=this.painter.context,N=new s.ck,G=new s.aK,X=this.meshSize,ie=s.Z/X,se=X*X;for(let it=0;it<=X;it++)for(let xt=0;xt<=X;xt++)N.emplaceBack(xt*ie,it*ie,0);for(let it=0;it<se;it+=X+1)for(let xt=0;xt<X;xt++)G.emplaceBack(xt+it,X+xt+it+1,X+xt+it+2),G.emplaceBack(xt+it,X+xt+it+2,xt+it+1);const fe=N.length,_e=fe+(X+1),De=(X+1)*X,ke=v?s.b9:0,Re=v?0:1,$e=I?s.ba:s.Z,qe=I?0:1;for(let it=0;it<=X;it++)N.emplaceBack(it*ie,ke,Re);for(let it=0;it<=X;it++)N.emplaceBack(it*ie,$e,qe);for(let it=0;it<X;it++)G.emplaceBack(De+it,_e+it,_e+it+1),G.emplaceBack(De+it,_e+it+1,De+it+1),G.emplaceBack(0+it,fe+it+1,fe+it),G.emplaceBack(0+it,0+it+1,fe+it+1);const Ke=N.length,Je=Ke+2*(X+1);for(const it of[0,1])for(let xt=0;xt<=X;xt++)for(const Ct of[0,1])N.emplaceBack(it*s.Z,xt*ie,Ct);for(let it=0;it<2*X;it+=2)G.emplaceBack(Ke+it,Ke+it+1,Ke+it+3),G.emplaceBack(Ke+it,Ke+it+3,Ke+it+2),G.emplaceBack(Je+it,Je+it+3,Je+it+1),G.emplaceBack(Je+it,Je+it+2,Je+it+3);const lt=new Tu(D.createVertexBuffer(N,tl.members),D.createIndexBuffer(G),s.aJ.simpleSegment(0,0,N.length,G.length));return this._meshCache[T]=lt,lt}getMeshFrameDelta(r){return 2*Math.PI*s.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var m;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(r,c){const m=s.$.fromLngLat(r.wrap()),v=(1<<c)*s.Z,I=m.x*v,T=m.y*v,D=Math.floor(I/s.Z),N=Math.floor(T/s.Z);return{tileID:new s.Y(c,0,c,D,N),mercatorX:I,mercatorY:T}}}class Ea{constructor(r,c,m){this._context=r,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new W(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:r,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const zc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Fc{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Ea(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(m=>!r._layers[m].isHidden(c)),this._coordsAscending={};for(const m in r.sourceCaches){this._coordsAscending[m]={};const v=r.sourceCaches[m].getVisibleCoordinates(),I=r.sourceCaches[m].getSource(),T=I instanceof rt?I.terrainTileRanges:null;for(const D of v){const N=this.terrain.sourceCache.getTerrainCoords(D,T);for(const G in N)this._coordsAscending[m][G]||(this._coordsAscending[m][G]=[]),this._coordsAscending[m][G].push(N[G])}}this._coordsAscendingStr={};for(const m of r._order){const v=r._layers[m],I=v.source;if(zc[v.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const T in this._coordsAscending[I])this._coordsAscendingStr[I][T]=this._coordsAscending[I][T].map(D=>D.key).sort().join()}}for(const m of this._renderableTiles)for(const v in this._coordsAscendingStr){const I=this._coordsAscendingStr[v][m.tileID.key];I&&I!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),v=r.type,I=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(zc[v]&&(this._prevType&&zc[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(zc[this._prevType]||zc[v]&&T){this._prevType=v;const D=this._stacks.length-1,N=this._stacks[D]||[];for(const G of this._renderableTiles){if(this.pool.isFull()&&(Pp(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(G),G.rtt[D]){const ie=this.pool.getObjectForId(G.rtt[D].id);if(ie.stamp===G.rtt[D].stamp){this.pool.useObject(ie);continue}}const X=this.pool.getOrCreateFreeObject();this.pool.useObject(X),this.pool.stampObject(X),G.rtt[D]={id:X.id,stamp:X.stamp},I.context.bindFramebuffer.set(X.fbo.framebuffer),I.context.clear({color:s.b7.transparent,stencil:0}),I.currentStencilSource=void 0;for(let ie=0;ie<N.length;ie++){const se=I.style._layers[N[ie]],fe=se.source?this._coordsAscending[se.source][G.tileID.key]:[G.tileID];I.context.viewport.set([0,0,X.fbo.width,X.fbo.height]),I._renderTileClippingMasks(se,fe,!0),I.renderLayer(I,I.style.sourceCaches[se.source],se,fe,m),se.source&&(G.rttCoords[se.source]=this._coordsAscendingStr[se.source][G.tileID.key])}}return Pp(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),zc[v]}return!1}}const fr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ii=f,Xd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:On,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ya={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Bc{constructor(r,c,m=!1){this.mousedown=I=>{this.startMove(I,A.mousePos(this.element,I)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,A.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHanlder.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const v=new Fp;this._rotatePitchHanlder=new bl({clickTolerance:3,move:(I,T)=>{const D=c.getBoundingClientRect(),N=new s.P((D.bottom-D.top)/2,(D.right-D.left)/2);return{bearingDelta:s.cc(new s.P(I.x,T.y),T,N),pitchDelta:m?-.5*(T.y-I.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=r,A.addEventListener(c,"mousedown",this.mousedown),A.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHanlder.dragStart(r,c),A.disableDrag()}move(r,c){const m=this.map,{bearingDelta:v,pitchDelta:I}=this._rotatePitchHanlder.dragMove(r,c)||{};v&&m.setBearing(m.getBearing()+v),I&&m.setPitch(m.getPitch()+I)}off(){const r=this.element;A.removeEventListener(r,"mousedown",this.mousedown),A.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let Ya;function nl(w,r,c,m=!1){if(m||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();const v=new s.Q(w.lng,w.lat);if(w=new s.Q(w.lng,w.lat),r){const I=new s.Q(w.lng-360,w.lat),T=new s.Q(w.lng+360,w.lat),D=c.locationToScreenPoint(w).distSqr(r);c.locationToScreenPoint(I).distSqr(r)<D?w=I:c.locationToScreenPoint(T).distSqr(r)<D&&(w=T)}for(;Math.abs(w.lng-c.center.lng)>180;){const I=c.locationToScreenPoint(w);if(I.x>=0&&I.y>=0&&I.x<=c.width&&I.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:v}const Nc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Yi(w,r,c){const m=w.classList;for(const v in Nc)m.remove(`maplibregl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${r}`)}class Gu extends s.E{constructor(r){if(super(),this._onKeyPress=c=>{const m=c.code,v=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const m=c.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=nl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${Nc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${v}`),M.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=s.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const c=A.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${m}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const I=A.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const T=A.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const D=A.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Re of N){const $e=A.createNS("http://www.w3.org/2000/svg","ellipse");$e.setAttributeNS(null,"opacity","0.04"),$e.setAttributeNS(null,"cx","10.5"),$e.setAttributeNS(null,"cy","5.80029008"),$e.setAttributeNS(null,"rx",Re.rx),$e.setAttributeNS(null,"ry",Re.ry),D.appendChild($e)}const G=A.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill",this._color);const X=A.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),G.appendChild(X);const ie=A.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"opacity","0.25"),ie.setAttributeNS(null,"fill","#000000");const se=A.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ie.appendChild(se);const fe=A.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const _e=A.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(8.0, 8.0)");const De=A.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#000000"),De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962");const ke=A.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#FFFFFF"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962"),_e.appendChild(De),_e.appendChild(ke),T.appendChild(D),T.appendChild(G),T.appendChild(ie),T.appendChild(fe),T.appendChild(_e),c.appendChild(T),c.setAttributeNS(null,"height",m*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=s.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Yi(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=s.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const v=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,m;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const ie=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ie&&(this._element.style.opacity=ie))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const v=this._map,I=v.terrain.depthAtPoint(this._pos),T=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,T)-I<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/v.transform.pixelsPerMeter,N=Math.sin(v.getPitch()*Math.PI/180)*D,G=v.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),X=v.transform.lngLatToCameraDepth(this._lngLat,T+N)-G>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&X&&this._popup.remove(),this._element.style.opacity=X?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=s.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Vp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vc=0,Zu=!1;const Uh={maxWidth:100,unit:"metric"};function Qd(w,r,c){const m=c&&c.maxWidth||100,v=w._container.clientHeight/2,I=w._container.clientWidth/2,T=w.unproject([I-m/2,v]),D=w.unproject([I+m/2,v]),N=Math.round(w.project(D).x-w.project(T).x),G=Math.min(m,N,w._container.clientWidth),X=T.distanceTo(D);if(c&&c.unit==="imperial"){const ie=3.2808*X;ie>5280?_o(r,G,ie/5280,w._getUIString("ScaleControl.Miles")):_o(r,G,ie,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?_o(r,G,X/1852,w._getUIString("ScaleControl.NauticalMiles")):X>=1e3?_o(r,G,X/1e3,w._getUIString("ScaleControl.Kilometers")):_o(r,G,X,w._getUIString("ScaleControl.Meters"))}function _o(w,r,c,m){const v=function(I){const T=Math.pow(10,`${Math.floor(I)}`.length-1);let D=I/T;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(N){const G=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*G)/G}(D),T*D}(c);w.style.width=r*(v/c)+"px",w.innerHTML=`${v}&nbsp;${m}`}const Jd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},ef=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function tf(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,w),"top-left":new s.P(r,r),"top-right":new s.P(-r,r),bottom:new s.P(0,-w),"bottom-left":new s.P(r,-r),"bottom-right":new s.P(-r,-r),left:new s.P(w,0),right:new s.P(-w,0)}}if(w instanceof s.P||Array.isArray(w)){const r=s.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:s.P.convert(w.center||[0,0]),top:s.P.convert(w.top||[0,0]),"top-left":s.P.convert(w["top-left"]||[0,0]),"top-right":s.P.convert(w["top-right"]||[0,0]),bottom:s.P.convert(w.bottom||[0,0]),"bottom-left":s.P.convert(w["bottom-left"]||[0,0]),"bottom-right":s.P.convert(w["bottom-right"]||[0,0]),left:s.P.convert(w.left||[0,0]),right:s.P.convert(w.right||[0,0])}}return tf(new s.P(0,0))}const Wu=f;l.AJAXError=s.co,l.Event=s.l,l.Evented=s.E,l.LngLat=s.Q,l.MercatorCoordinate=s.$,l.Point=s.P,l.addProtocol=s.cp,l.config=s.a,l.removeProtocol=s.cq,l.AttributionControl=Nn,l.BoxZoomHandler=hg,l.CanvasSource=Ve,l.CooperativeGesturesHandler=Yd,l.DoubleClickZoomHandler=yg,l.DragPanHandler=Yr,l.DragRotateHandler=nu,l.EdgeInsets=xc,l.FullscreenControl=class extends s.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Fe,l.GeolocateControl=class extends s.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new s.Q(r.coords.longitude,r.coords.latitude),m=r.coords.accuracy,v=this._map.getBearing(),I=s.e({bearing:v},this.options.fitBoundsOptions),T=$.fromLngLat(c,m);this._map.fitBounds(T,I,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new s.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Zu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Gu({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Gu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Vp,w)}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(r=!1){if(Ya!==void 0&&!r)return Ya;if(window.navigator.permissions===void 0)return Ya=!!window.navigator.geolocation,Ya;try{Ya=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ya=!!window.navigator.geolocation}return Ya})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vc=0,Zu=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),c=w.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),r=w.getSouthEast(),c=w.getNorthEast(),m=r.distanceTo(c),v=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vc--,Zu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vc++,Vc>1?(w={maximumAge:6e5,timeout:0},Zu=!0):(w=this.options.positionOptions,Zu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const r=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=A.create("button","maplibregl-ctrl-globe",this._container),A.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=Dp,l.ImageSource=rt,l.KeyboardHandler=Wd,l.LngLatBounds=$,l.LogoControl=Oc,l.Map=class extends Js{constructor(w){var r,c;s.cl.mark(s.cm.create);const m=Object.assign(Object.assign(Object.assign({},Xd),w),{canvasContextAttributes:Object.assign(Object.assign({},Xd.canvasContextAttributes),w.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new Ho,I=new wh;if(m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),super(v,I,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hu,this._controls=[],this._mapId=s.a4(),this._contextLost=D=>{D.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:D}))},this._contextRestored=D=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:D}))},this._onMapScroll=D=>{if(D.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},fr),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new Z(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let D=!1;const N=Lp(G=>{this._trackResize&&!this._removed&&(this.resize(G),this.redraw())},50);this._resizeObserver=new ResizeObserver(G=>{D?N(G):D=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Fs(this,m),this._hash=m.hash&&new Dp(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.e({},m.fitBoundsOptions,{duration:0}))));const T=typeof m.style=="string"||((c=(r=m.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Nn(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new Oc,m.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const D=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(D)}}),this.on("data",D=>{this._update(D.dataType==="style"),this.fire(new s.l(`${D.dataType}data`,D))}),this.on("dataloading",D=>{this.fire(new s.l(`${D.dataType}dataloading`,D))}),this.on("dataabort",D=>{this.fire(new s.l("sourcedataabort",D))})}_getMapId(){return this._mapId}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const m=this._controlPositions[r];return r.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,r,c,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,r,c,m)}resize(w,r=!0){const[c,m]=this._containerDimensions(),v=this._getClampedPixelRatio(c,m);if(this._resizeCanvas(c,m,v),this.painter.resize(c,m,v),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const D=this._getClampedPixelRatio(c,m);this._resizeCanvas(c,m,D),this.painter.resize(c,m,D)}this._resizeTransform(r);const I=!this._moving;return I&&(this.stop(),this.fire(new s.l("movestart",w)).fire(new s.l("move",w))),this.fire(new s.l("resize",w)),I&&this.fire(new s.l("moveend",w)),this}_resizeTransform(w=!0){var r;const[c,m]=this._containerDimensions();this.transform.resize(c,m,w),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,m,w)}_getClampedPixelRatio(w,r){const{0:c,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),I=w*v,T=r*v;return Math.min(I>c?c/I:1,T>m?m/T:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds($.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(s.Q.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(s.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,c){if(w==="mouseenter"||w==="mouseover"){let m=!1;return{layers:r,listener:c,delegates:{mousemove:I=>{const T=r.filter(N=>this.getLayer(N)),D=T.length!==0?this.queryRenderedFeatures(I.point,{layers:T}):[];D.length?m||(m=!0,c.call(this,new ma(w,this,I.originalEvent,{features:D}))):m=!1},mouseout:()=>{m=!1}}}}if(w==="mouseleave"||w==="mouseout"){let m=!1;return{layers:r,listener:c,delegates:{mousemove:T=>{const D=r.filter(N=>this.getLayer(N));(D.length!==0?this.queryRenderedFeatures(T.point,{layers:D}):[]).length?m=!0:m&&(m=!1,c.call(this,new ma(w,this,T.originalEvent)))},mouseout:T=>{m&&(m=!1,c.call(this,new ma(w,this,T.originalEvent)))}}}}{const m=v=>{const I=r.filter(D=>this.getLayer(D)),T=I.length!==0?this.queryRenderedFeatures(v.point,{layers:I}):[];T.length&&(v.features=T,c.call(this,v),delete v.features)};return{layers:r,listener:c,delegates:{[w]:m}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const m=this._delegatedListeners[w];for(let v=0;v<m.length;v++){const I=m[v];if(I.listener===c&&I.layers.length===r.length&&I.layers.every(T=>r.includes(T))){for(const T in I.delegates)this.off(T,I.delegates[T]);return void m.splice(v,1)}}}on(w,r,c){if(c===void 0)return super.on(w,r);const m=typeof r=="string"?[r]:r,v=this._createDelegatedListener(w,m,c);this._saveDelegatedListener(w,v);for(const I in v.delegates)this.on(I,v.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(w,m,c)}}}once(w,r,c){if(c===void 0)return super.once(w,r);const m=typeof r=="string"?[r]:r,v=this._createDelegatedListener(w,m,c);for(const I in v.delegates){const T=v.delegates[I];v.delegates[I]=(...D)=>{this._removeDelegatedListener(w,m,c),T(...D)}}this._saveDelegatedListener(w,v);for(const I in v.delegates)this.once(I,v.delegates[I]);return this}off(w,r,c){return c===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let c;const m=w instanceof s.P||Array.isArray(w),v=m?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(m?{}:w)||{},v instanceof s.P||typeof v[0]=="number")c=[s.P.convert(v)];else{const I=s.P.convert(v[0]),T=s.P.convert(v[1]);c=[I,new s.P(T.x,I.y),T,new s.P(I.x,T.y),I]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){var c,m;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,r));const v=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Ou(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,v):this.style.loadJSON(w,r,v),this):((m=(c=this.style)===null||c===void 0?void 0:c.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ou(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");s.j(c,new AbortController).then(m=>{this._updateDiff(m.data,r)}).catch(m=>{m&&this.fire(new s.k(m))})}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(c){s.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.sourceCaches[w];if(r!==void 0)return r.loaded();this.fire(new s.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.sourceCaches[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const m=this.style._layers[c];m.type==="hillshade"&&m.source===w.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vg(this.painter,r,w),this.painter.renderToTexture=new Fc(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var m;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=c.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const r in w){const c=w[r]._tiles;for(const m in c){const v=c[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,r,c){if(c){const m=this.getSource(c);if(!m)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);m.calculateTileZoom=ve(Math.max(1,w),Math.max(1,r))}else for(const m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=ve(Math.max(1,w),Math.max(1,r));return this._update(!0),this}addImage(w,r,c={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:I,stretchY:T,content:D,textFitWidth:N,textFitHeight:G}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||s.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:X,height:ie,data:se}=r,fe=r;return this.style.addImage(w,{data:new s.R({width:X,height:ie},new Uint8Array(se)),pixelRatio:m,stretchX:I,stretchY:T,content:D,textFitWidth:N,textFitHeight:G,sdf:v,version:0,userImage:fe}),fe.onAdd&&fe.onAdd(this,w),this}}{const{width:X,height:ie,data:se}=M.getImageData(r);this.style.addImage(w,{data:new s.R({width:X,height:ie},se),pixelRatio:m,stretchX:I,stretchY:T,content:D,textFitWidth:N,textFitHeight:G,sdf:v,version:0})}}updateImage(w,r){const c=this.style.getImage(w);if(!c)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=r instanceof HTMLImageElement||s.b(r)?M.getImageData(r):r,{width:v,height:I,data:T}=m;if(v===void 0||I===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||I!==c.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(r instanceof HTMLImageElement||s.b(r));return c.data.replace(T,D),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return U.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,c){return this.style.setLayerZoomRange(w,r,c),this._update(!0)}setFilter(w,r,c={}){return this.style.setFilter(w,r,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,c,m={}){return this.style.setPaintProperty(w,r,c,m),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,c,m={}){return this.style.setLayoutProperty(w,r,c,m),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,c,m=>{m||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,c=>{c||this._update(!0)}),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=A.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),m=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],m);const v=this._controlContainer=A.create("div","maplibregl-control-container",w),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{I[T]=A.create("div",`maplibregl-ctrl-${T} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{r={requestedAttributes:w},m&&(r.statusMessage=m.statusMessage,r.type=m.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const m="Failed to initialize WebGL";throw r?(r.message=m,new Error(JSON.stringify(r))):new Error(m)}this.painter=new ug(c,this.transform),P.testSupport(c)}migrateProjection(w,r){super.migrateProjection(w,r),this.painter.transform=w,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var r,c,m,v,I;const T=this._idleTriggered?this._fadeDuration:0,D=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ie=this.transform.zoom,se=M.now();this.style.zoomHistory.update(ie,se);const fe=new s.C(ie,{now:se,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_e=fe.crossFadingFactor();_e===1&&_e===this._crossFadingFactor||(N=!0,this._crossFadingFactor=_e),this.style.update(fe)}const G=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==D;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||G)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,G),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cl.mark(s.cm.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const X=this._sourcesDirty||this._styleDirty||this._placementDirty;return X||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||X||(this._fullyLoaded=!0,s.cl.mark(s.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cl.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frame(this._frameRequest,w=>{s.cl.frame(w),this._frameRequest=null;try{this._render(w)}catch(r){if(!s.cn(r)&&!function(c){return c.message===Pc}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return Ii}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},l.MapMouseEvent=ma,l.MapTouchEvent=Qs,l.MapWheelEvent=Ts,l.Marker=Gu,l.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),m=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const m=this._map._getUIString(`NavigationControl.${c}`);r.title=m,r.setAttribute("aria-label",m)},this.options=s.e({},ya,w),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const c=A.create("button",w,this._container);return c.type="button",c.addEventListener("click",r),c}},l.Popup=class extends s.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=nl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const v=tf(this.options.offset);if(!m){const T=this._container.offsetWidth,D=this._container.offsetHeight;let N;N=c.y+v.bottom.y<D?["top"]:c.y>this._map.transform.height-D?["bottom"]:[],c.x<T/2?N.push("left"):c.x>this._map.transform.width-T/2&&N.push("right"),m=N.length===0?"bottom":N.join("-")}let I=c.add(v[m]);this.options.subpixelPositioning||(I=I.round()),A.setTransform(this._container,`${Nc[m]} translate(${I.x}px,${I.y}px)`),Yi(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Jd),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=s.Q.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=w;m=c.firstChild,m;)r.appendChild(m);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(ef);w&&w.focus()}},l.RasterDEMTileSource=pe,l.RasterTileSource=ye,l.ScaleControl=class{constructor(w){this._onMove=()=>{Qd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Qd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Uh),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=qd,l.Style=Ou,l.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=pg,l.TwoFingersTouchRotateHandler=ga,l.TwoFingersTouchZoomHandler=Zd,l.TwoFingersTouchZoomRotateHandler=Kd,l.VectorTileSource=Oe,l.VideoSource=at,l.addSourceType=(w,r)=>s._(void 0,void 0,void 0,function*(){if(wt(w))throw new Error(`A source type called "${w}" already exists.`);((c,m)=>{Mt[c]=m})(w,r)}),l.clearPrewarmedResources=function(){const w=Bt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Ge),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=Ed,l.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return pn().getRTLTextPluginStatus()},l.getVersion=function(){return Wu},l.getWorkerCount=function(){return Ne.workerCount},l.getWorkerUrl=function(){return s.a.WORKER_URL},l.importScriptInWorkers=function(w){return ft().broadcast("IS",w)},l.prewarm=function(){en().acquire(Ge)},l.setMaxParallelImageRequests=function(w){s.a.MAX_PARALLEL_IMAGE_REQUESTS=w},l.setRTLTextPlugin=function(w,r){return pn().setRTLTextPlugin(w,r)},l.setWorkerCount=function(w){Ne.workerCount=w},l.setWorkerUrl=function(w){s.a.WORKER_URL=w}});var u=n;return u})})(nL);var zm=nL.exports;const cP=vd(zm),Fm=Vo.createLogger().setNamespace("map:"+Mu.EVENT,2),cS=e=>jl(["map:core",e,Mu.EVENT],()=>(Mn(Fm,e,"store").debug("init"),{items:[],current:{}}))(),ac={setCurrent:"map:event:set-current",add:"map:event:add",remove:"map:event:remove",setItems:"map:event:set-items"};function eG(){const e=Za();return(e==null?void 0:e.type.name)||"unknown-component"}function Bm(e,t,n=!1){const{add:i,remove:a,isActive:u}=tG(e,t);return yh(()=>{a()}),n&&Er(()=>{i()}),{add:i,remove:a,isActive:u}}function tG(e,t){const n=eG();t.from=t.from||n;const i=cS(e),a=fh(e);Er(()=>{a.on(ac.setCurrent,s)}),ha(()=>{a.off(ac.setCurrent,s)});const u=()=>{Mn(Fm,e,"hook","useEventMap").debug("add",t),i.items.unshift(t),a.emit(ac.add,t),a.emit(ac.setItems,i.items)},l=()=>{if(Mn(Fm,e,"hook","useEventMap").debug("remove",t),!i||!i.items||i.items.length<1)return;const b=i.items.findIndex(M=>M.id===t.id);b<0||(i.items.splice(b,1),a.emit(ac.remove,t),a.emit(ac.setItems,i.items))};function s(x){f.value=x}const f=Ca(),y=Wt(()=>!!f.value&&f.value.id===t.id);return{add:u,remove:l,isActive:y}}function hP(e,t,n,i=!0){const a={},u=()=>{Mn(Fm,e,"hook","useEventListener").debug("add",t),lo(e,s=>{const f=y=>n(s,y);a[s.id]=f,s.on(t,f)})},l=()=>{Mn(Fm,e,"hook","useEventListener").debug("remove",t),lo(e,s=>{const f=a==null?void 0:a[s.id];f&&s.off(t,f)})};return Er(()=>{i&&u()}),yh(()=>{l()}),{add:u,remove:l}}const iL=(e,{onChange:t}={})=>{const n=cS(e);function i(){return n.items}function a(){return n.current}const u=Ca(i()),l=fh(e);function s(f){u.value=f,Mn(Fm,e,"hook","useEventMapItems").debug("updateItems",f),t&&t(f)}return Er(()=>{l.on(ac.setItems,s),t&&t(i())}),ha(()=>{l.off(ac.setItems,s)}),{items:u,getCurrent:a}},nG={name:"action-control"},rG=An({...nG,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=e,{callMap:n,mapId:i}=Lr(t),a=cS(i.value),u=fh(i.value),l={},{items:s}=iL(i.value,{onChange:x=>{y(x)}});Er(()=>{y(s.value)});function f(x,b,M){Mn(Fm,x,"store").debug("setCurrentEvent",b,M),a.current[b]=M,u.emit(ac.setCurrent,M)}function y(x){const b=Om.groupBy(x,M=>M.event_map_type);n(M=>{const A=[];l[M.id]||(l[M.id]={});for(const P in b)if(A.push(P),Object.prototype.hasOwnProperty.call(b,P)){const L=b[P],O=l[M.id][P],V=L[0];if(O&&O.id===V.id)return;O&&O.removeFromMap(M),l[M.id][P]=V,V&&V.addToMap(M),f(i.value,P,V)}for(const P in l[M.id])if(Object.prototype.hasOwnProperty.call(l[M.id],P)){const L=l[M.id][P];!A.includes(P)&&L&&(L.removeFromMap(M),f(i.value,P,void 0),l[M.id][P]=void 0)}})}return(x,b)=>(xe(),et("div"))}}),iG={key:0,class:""},sG=["mapId"],aG={class:"map-viewer"},oG=["id"],lG=["id"],uG=["id"],cG=["id"],hG=["id"],dG=An({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(e,{emit:t}){if(!cP)throw new Error("mapboxgl is not installed.");const n=l4({mobile:0,tablet:640,laptop:1024,desktop:1280}),i={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},a=e,u=t;function l(){if(window.WebGLRenderingContext){const Z=document.createElement("canvas");try{const te=Z.getContext("webgl2")||Z.getContext("webgl");if(te&&typeof te.getParameter=="function")return!0}catch{}return!1}return!1}const s=Kt(),f=Kt(l()),y=Kt(!1);let x;const b=Kt(wu()),M=aU(b.value);Er(()=>{const Z=Object.assign({},i,a.initOptions);x=new cP.Map({container:s.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.mattech.vn/styles/basic/sprite",glyphs:"https://tiles.mattech.vn/fonts/{fontstack}/{range}.pbf",layers:[]},...Z}),x.id=b.value,M.initMap(x),x.once("load",()=>{u("map-loaded",x),y.value=!0})}),ha(()=>{y.value=!1,x&&(x.remove(),u("map-destroy",x)),x=void 0,M.removeMap()});const A=Wt(()=>`map-draggable-${b.value}`),P=Wt(()=>`bottom-right-${b.value}`),L=Wt(()=>`bottom-left-${b.value}`),O=Wt(()=>`top-right-${b.value}`),V=Wt(()=>`top-left-${b.value}`);Uf("$map.dragId",a.dragId||A.value),Uf("$map.id",b.value);const z=n.smallerOrEqual("tablet"),B=Kt(!1);function U(Z){B.value=!0}return(Z,te)=>f.value?(xe(),et("div",{key:1,class:ii(["map-container",{"map-mobile-container":re(z)}]),mapId:b.value},[Pe("div",aG,[Pe("div",{ref_key:"mapContainer",ref:s,class:"map-content",id:b.value},null,8,oG),a.dragId?rn("",!0):(xe(),et(Fn,{key:0},[Pe("div",{class:"right-bottom-container",id:P.value},null,8,lG),Pe("div",{class:"left-bottom-container",id:L.value},null,8,uG),Pe("div",{class:"right-top-container",id:O.value},null,8,cG),Pe("div",{class:"left-top-container",id:V.value},null,8,hG),y.value?(xe(),Rt(re(xH),{key:0,class:"drag-container","container-id":A.value,onInit:U},null,8,["container-id"])):rn("",!0)],64)),y.value&&B.value?Sn(Z.$slots,"default",{key:1},void 0,!0):rn("",!0),y.value&&B.value?(xe(),Rt(rG,{key:2})):rn("",!0)])],10,sG)):(xe(),et("div",iG,te[0]||(te[0]=[Pe("div",{class:"not-support-map"},[Pe("p",{class:""}," Trnh duyt ca bn khng h tr hin th bn , vui lng i trnh duyt hoc cp nht bn mi  xem. ")],-1)])))}}),fG=_n(dG,[["__scopeId","data-v-0bbf8247"]]);function pG(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var Nm=1,Vm=2,Ey=3,mG=4,MI=5,dP=6378137,gG=6356752314e-3,fP=.0066943799901413165,X0=484813681109536e-20,fn=Math.PI/2,yG=.16666666666666666,vG=.04722222222222222,_G=.022156084656084655,En=1e-10,Ba=.017453292519943295,sh=57.29577951308232,pi=Math.PI/4,T1=Math.PI*2,Va=3.14159265359,ml={};ml.greenwich=0;ml.lisbon=-9.131906111111;ml.paris=2.337229166667;ml.bogota=-74.080916666667;ml.madrid=-3.687938888889;ml.rome=12.452333333333;ml.bern=7.439583333333;ml.jakarta=106.807719444444;ml.ferro=-17.666666666667;ml.brussels=4.367975;ml.stockholm=18.058277777778;ml.athens=23.7163375;ml.oslo=10.722916666667;const bG={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var pP=/[\s_\-\/\(\)]/g;function Xf(e,t){if(e[t])return e[t];for(var n=Object.keys(e),i=t.toLowerCase().replace(pP,""),a=-1,u,l;++a<n.length;)if(u=n[a],l=u.toLowerCase().replace(pP,""),l===i)return e[u]}function SI(e){var t={},n=e.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,f){var y=f.split("=");return y.push(!0),s[y[0].toLowerCase()]=y[1],s},{}),i,a,u,l={proj:"projName",datum:"datumCode",rf:function(s){t.rf=parseFloat(s)},lat_0:function(s){t.lat0=s*Ba},lat_1:function(s){t.lat1=s*Ba},lat_2:function(s){t.lat2=s*Ba},lat_ts:function(s){t.lat_ts=s*Ba},lon_0:function(s){t.long0=s*Ba},lon_1:function(s){t.long1=s*Ba},lon_2:function(s){t.long2=s*Ba},alpha:function(s){t.alpha=parseFloat(s)*Ba},gamma:function(s){t.rectified_grid_angle=parseFloat(s)},lonc:function(s){t.longc=s*Ba},x_0:function(s){t.x0=parseFloat(s)},y_0:function(s){t.y0=parseFloat(s)},k_0:function(s){t.k0=parseFloat(s)},k:function(s){t.k0=parseFloat(s)},a:function(s){t.a=parseFloat(s)},b:function(s){t.b=parseFloat(s)},r:function(s){t.a=t.b=parseFloat(s)},r_a:function(){t.R_A=!0},zone:function(s){t.zone=parseInt(s,10)},south:function(){t.utmSouth=!0},towgs84:function(s){t.datum_params=s.split(",").map(function(f){return parseFloat(f)})},to_meter:function(s){t.to_meter=parseFloat(s)},units:function(s){t.units=s;var f=Xf(bG,s);f&&(t.to_meter=f.to_meter)},from_greenwich:function(s){t.from_greenwich=s*Ba},pm:function(s){var f=Xf(ml,s);t.from_greenwich=(f||parseFloat(s))*Ba},nadgrids:function(s){s==="@null"?t.datumCode="none":t.nadgrids=s},axis:function(s){var f="ewnsud";s.length===3&&f.indexOf(s.substr(0,1))!==-1&&f.indexOf(s.substr(1,1))!==-1&&f.indexOf(s.substr(2,1))!==-1&&(t.axis=s)},approx:function(){t.approx=!0}};for(i in n)a=n[i],i in l?(u=l[i],typeof u=="function"?u(a):t[u]=a):t[i]=a;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var P1=1,sL=2,aL=3,Zx=4,oL=5,hS=-1,xG=/\s/,AG=/[A-Za-z]/,wG=/[A-Za-z84_]/,nw=/[,\]]/,lL=/[\d\.E\-\+]/;function _d(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=P1}_d.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Zx)for(;xG.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case P1:return this.neutral(e);case sL:return this.keyword(e);case Zx:return this.quoted(e);case oL:return this.afterquote(e);case aL:return this.number(e);case hS:return}};_d.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Zx;return}if(nw.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};_d.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=P1;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=P1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=hS);return}};_d.prototype.number=function(e){if(lL.test(e)){this.word+=e;return}if(nw.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};_d.prototype.quoted=function(e){if(e==='"'){this.state=oL;return}this.word+=e};_d.prototype.keyword=function(e){if(wG.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=P1;return}if(nw.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};_d.prototype.neutral=function(e){if(AG.test(e)){this.word=e,this.state=sL;return}if(e==='"'){this.word="",this.state=Zx;return}if(lL.test(e)){this.word=e,this.state=aL;return}if(nw.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};_d.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===hS)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function CG(e){var t=new _d(e);return t.output()}function hC(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,a=n.reduce(function(u,l){return gy(l,u),u},i);t&&(e[t]=a)}function gy(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n=e.shift();if(n==="PARAMETER"&&(n=e.shift()),e.length===1){if(Array.isArray(e[0])){t[n]={},gy(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=!0;return}if(n==="TOWGS84"){t[n]=e;return}if(n==="AXIS"){n in t||(t[n]=[]),t[n].push(e);return}Array.isArray(n)||(t[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&gy(e[2],t[n]);return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]},e.length===4&&gy(e[3],t[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],hC(t,n,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],hC(t,n,e),t[n].type=n;return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return gy(e,t[n]);return hC(t,n,e)}}var IG=.017453292519943295,MG=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function SG(e,t){var n=t[0],i=t[1];!(n in e)&&i in e&&(e[n]=e[i],t.length===3&&(e[n]=t[2](e[n])))}function Yc(e){return e*IG}function uL(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;++n){var a=t[n];MG.indexOf(a)!==-1&&EG(e[a]),typeof e[a]=="object"&&uL(e[a])}}function EG(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var n="",i=0,a=e.AXIS.length;i<a;++i){var u=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];u[0].indexOf("north")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="north"?n+="n":u[0].indexOf("south")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="south"?n+="s":u[0].indexOf("east")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="east"?n+="e":(u[0].indexOf("west")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(e.axis=n)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var l=e.GEOGCS;e.type==="GEOGCS"&&(l=e),l&&(l.DATUM?e.datumCode=l.DATUM.name.toLowerCase():e.datumCode=l.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(e.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=l.DATUM.SPHEROID.a,e.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(e.datum_params=l.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function s(x){var b=e.to_meter||1;return x*b}var f=function(x){return SG(e,x)},y=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Yc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Yc],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Yc],["lat0","latitude_of_origin",Yc],["lat0","standard_parallel_1",Yc],["lat1","standard_parallel_1",Yc],["lat2","standard_parallel_2",Yc],["azimuth","Azimuth"],["alpha","azimuth",Yc],["srsCode","name"]];y.forEach(f),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=Yc(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=Yc(e.lat0>0?90:-90))}function cL(e){var t=CG(e),n=t[0],i={};return gy(t,i),uL(i),i[n]}function ko(e){var t=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?ko[e]=SI(arguments[1]):ko[e]=cL(arguments[1]):ko[e]=n}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?ko.apply(t,i):ko(i)});if(typeof e=="string"){if(e in ko)return ko[e]}else"EPSG"in e?ko["EPSG:"+e.EPSG]=e:"ESRI"in e?ko["ESRI:"+e.ESRI]=e:"IAU2000"in e?ko["IAU2000:"+e.IAU2000]=e:console.log(e);return}}pG(ko);function TG(e){return typeof e=="string"}function PG(e){return e in ko}var kG=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function LG(e){return kG.some(function(t){return e.indexOf(t)>-1})}var DG=["3857","900913","3785","102113"];function RG(e){var t=Xf(e,"authority");if(t){var n=Xf(t,"epsg");return n&&DG.indexOf(n)>-1}}function OG(e){var t=Xf(e,"extension");if(t)return Xf(t,"proj4")}function zG(e){return e[0]==="+"}function FG(e){if(TG(e)){if(PG(e))return ko[e];if(LG(e)){var t=cL(e);if(RG(t))return ko["EPSG:3857"];var n=OG(t);return n?SI(n):t}if(zG(e))return SI(e)}else return e}function mP(e,t){e=e||{};var n,i;if(!t)return e;for(i in t)n=t[i],n!==void 0&&(e[i]=n);return e}function ph(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}function r_(e){return e<0?-1:1}function Rn(e){return Math.abs(e)<=Va?e:e-r_(e)*T1}function dc(e,t,n){var i=e*n,a=.5*e;return i=Math.pow((1-i)/(1+i),a),Math.tan(.5*(fn-t))/i}function k1(e,t){for(var n=.5*e,i,a,u=fn-2*Math.atan(t),l=0;l<=15;l++)if(i=e*Math.sin(u),a=fn-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-u,u+=a,Math.abs(a)<=1e-10)return u;return-9999}function BG(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ph(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function NG(e){var t=e.x,n=e.y;if(n*sh>90&&n*sh<-90&&t*sh>180&&t*sh<-180)return null;var i,a;if(Math.abs(Math.abs(n)-fn)<=En)return null;if(this.sphere)i=this.x0+this.a*this.k0*Rn(t-this.long0),a=this.y0+this.a*this.k0*Math.log(Math.tan(pi+.5*n));else{var u=Math.sin(n),l=dc(this.e,n,u);i=this.x0+this.a*this.k0*Rn(t-this.long0),a=this.y0-this.a*this.k0*Math.log(l)}return e.x=i,e.y=a,e}function VG(e){var t=e.x-this.x0,n=e.y-this.y0,i,a;if(this.sphere)a=fn-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var u=Math.exp(-n/(this.a*this.k0));if(a=k1(this.e,u),a===-9999)return null}return i=Rn(this.long0+t/(this.a*this.k0)),e.x=i,e.y=a,e}var jG=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const UG={init:BG,forward:NG,inverse:VG,names:jG};function $G(){}function gP(e){return e}var HG=["longlat","identity"];const GG={init:$G,forward:gP,inverse:gP,names:HG};var ZG=[UG,GG],hx={},Wx=[];function hL(e,t){var n=Wx.length;return e.names?(Wx[n]=e,e.names.forEach(function(i){hx[i.toLowerCase()]=n}),this):(console.log(t),!0)}function WG(e){if(!e)return!1;var t=e.toLowerCase();if(typeof hx[t]<"u"&&Wx[hx[t]])return Wx[hx[t]]}function qG(){ZG.forEach(hL)}const KG={start:qG,add:hL,get:WG};var cr={};cr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};cr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};cr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};cr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};cr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};cr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};cr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};cr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};cr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};cr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};cr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};cr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};cr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};cr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};cr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};cr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};cr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};cr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};cr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};cr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};cr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};cr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};cr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};cr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};cr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};cr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};cr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};cr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};cr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};cr.hough={a:6378270,rf:297,ellipseName:"Hough"};cr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};cr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};cr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};cr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};cr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};cr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};cr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};cr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};cr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};cr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};cr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};cr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var YG=cr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};cr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function XG(e,t,n,i){var a=e*e,u=t*t,l=(a-u)/a,s=0;i?(e*=1-l*(yG+l*(vG+l*_G)),a=e*e,l=0):s=Math.sqrt(l);var f=(a-u)/u;return{es:l,e:s,ep2:f}}function QG(e,t,n,i,a){if(!e){var u=Xf(cr,i);u||(u=YG),e=u.a,t=u.b,n=u.rf}return n&&!t&&(t=(1-1/n)*e),(n===0||Math.abs(e-t)<En)&&(a=!0,t=e),{a:e,b:t,rf:n,sphere:a}}var dx={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var JG in dx){var yP=dx[JG];dx[yP.datumName]=yP}function eZ(e,t,n,i,a,u,l){var s={};return e===void 0||e==="none"?s.datum_type=MI:s.datum_type=mG,t&&(s.datum_params=t.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=Nm),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=Vm,s.datum_params[3]*=X0,s.datum_params[4]*=X0,s.datum_params[5]*=X0,s.datum_params[6]=s.datum_params[6]/1e6+1)),l&&(s.datum_type=Ey,s.grids=l),s.a=n,s.b=i,s.es=a,s.ep2=u,s}var dL={};function tZ(e,t){var n=new DataView(t),i=iZ(n),a=sZ(n,i),u=aZ(n,a,i),l={header:a,subgrids:u};return dL[e]=l,l}function nZ(e){if(e===void 0)return null;var t=e.split(",");return t.map(rZ)}function rZ(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:dL[e]||null,isNull:!1}}function yy(e){return e/3600*Math.PI/180}function iZ(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function sZ(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:EI(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function EI(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function aZ(e,t,n){for(var i=176,a=[],u=0;u<t.nSubgrids;u++){var l=lZ(e,i,n),s=uZ(e,i,l,n),f=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),y=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);a.push({ll:[yy(l.lowerLongitude),yy(l.lowerLatitude)],del:[yy(l.longitudeInterval),yy(l.latitudeInterval)],lim:[f,y],count:l.gridNodeCount,cvs:oZ(s)}),i+=176+l.gridNodeCount*16}return a}function oZ(e){return e.map(function(t){return[yy(t.longitudeShift),yy(t.latitudeShift)]})}function lZ(e,t,n){return{name:EI(e,t+8,t+16).trim(),parent:EI(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function uZ(e,t,n,i){for(var a=t+176,u=16,l=[],s=0;s<n.gridNodeCount;s++){var f={latitudeShift:e.getFloat32(a+s*u,i),longitudeShift:e.getFloat32(a+s*u+4,i),latitudeAccuracy:e.getFloat32(a+s*u+8,i),longitudeAccuracy:e.getFloat32(a+s*u+12,i)};l.push(f)}return l}function ah(e,t){if(!(this instanceof ah))return new ah(e);t=t||function(y){if(y)throw y};var n=FG(e);if(typeof n!="object"){t("Could not parse to valid json: "+e);return}var i=ah.projections.get(n.projName);if(!i){t("Could not get projection name from: "+e);return}if(n.datumCode&&n.datumCode!=="none"){var a=Xf(dx,n.datumCode);a&&(n.datum_params=n.datum_params||(a.towgs84?a.towgs84.split(","):null),n.ellps=a.ellipse,n.datumName=a.datumName?a.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var u=QG(n.a,n.b,n.rf,n.ellps,n.sphere),l=XG(u.a,u.b,u.rf,n.R_A),s=nZ(n.nadgrids),f=n.datum||eZ(n.datumCode,n.datum_params,u.a,u.b,l.es,l.ep2,s);mP(this,n),mP(this,i),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=f,this.init(),t(null,this)}ah.projections=KG;ah.projections.start();function cZ(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===Nm?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Vm?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function fL(e,t,n){var i=e.x,a=e.y,u=e.z?e.z:0,l,s,f,y;if(a<-fn&&a>-1.001*fn)a=-fn;else if(a>fn&&a<1.001*fn)a=fn;else{if(a<-fn)return{x:-1/0,y:-1/0,z:e.z};if(a>fn)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),s=Math.sin(a),y=Math.cos(a),f=s*s,l=n/Math.sqrt(1-t*f),{x:(l+u)*y*Math.cos(i),y:(l+u)*y*Math.sin(i),z:(l*(1-t)+u)*s}}function pL(e,t,n,i){var a=1e-12,u=a*a,l=30,s,f,y,x,b,M,A,P,L,O,V,z,B,U=e.x,Z=e.y,te=e.z?e.z:0,Y,W,H;if(s=Math.sqrt(U*U+Z*Z),f=Math.sqrt(U*U+Z*Z+te*te),s/n<a){if(Y=0,f/n<a)return W=fn,H=-i,{x:e.x,y:e.y,z:e.z}}else Y=Math.atan2(Z,U);y=te/f,x=s/f,b=1/Math.sqrt(1-t*(2-t)*x*x),P=x*(1-t)*b,L=y*b,B=0;do B++,A=n/Math.sqrt(1-t*L*L),H=s*P+te*L-A*(1-t*L*L),M=t*A/(A+H),b=1/Math.sqrt(1-M*(2-M)*x*x),O=x*(1-M)*b,V=y*b,z=V*P-O*L,P=O,L=V;while(z*z>u&&B<l);return W=Math.atan(V/Math.abs(O)),{x:Y,y:W,z:H}}function hZ(e,t,n){if(t===Nm)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===Vm){var i=n[0],a=n[1],u=n[2],l=n[3],s=n[4],f=n[5],y=n[6];return{x:y*(e.x-f*e.y+s*e.z)+i,y:y*(f*e.x+e.y-l*e.z)+a,z:y*(-s*e.x+l*e.y+e.z)+u}}}function dZ(e,t,n){if(t===Nm)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===Vm){var i=n[0],a=n[1],u=n[2],l=n[3],s=n[4],f=n[5],y=n[6],x=(e.x-i)/y,b=(e.y-a)/y,M=(e.z-u)/y;return{x:x+f*b-s*M,y:-f*x+b+l*M,z:s*x-l*b+M}}}function $b(e){return e===Nm||e===Vm}function fZ(e,t,n){if(cZ(e,t)||e.datum_type===MI||t.datum_type===MI)return n;var i=e.a,a=e.es;if(e.datum_type===Ey){var u=vP(e,!1,n);if(u!==0)return;i=dP,a=fP}var l=t.a,s=t.b,f=t.es;if(t.datum_type===Ey&&(l=dP,s=gG,f=fP),a===f&&i===l&&!$b(e.datum_type)&&!$b(t.datum_type))return n;if(n=fL(n,a,i),$b(e.datum_type)&&(n=hZ(n,e.datum_type,e.datum_params)),$b(t.datum_type)&&(n=dZ(n,t.datum_type,t.datum_params)),n=pL(n,f,l,s),t.datum_type===Ey){var y=vP(t,!0,n);if(y!==0)return}return n}function vP(e,t,n){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},a={x:Number.NaN,y:Number.NaN},u=[];e:for(var l=0;l<e.grids.length;l++){var s=e.grids[l];if(u.push(s.name),s.isNull){a=i;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var f=s.grid.subgrids,y=0,x=f.length;y<x;y++){var b=f[y],M=(Math.abs(b.del[1])+Math.abs(b.del[0]))/1e4,A=b.ll[0]-M,P=b.ll[1]-M,L=b.ll[0]+(b.lim[0]-1)*b.del[0]+M,O=b.ll[1]+(b.lim[1]-1)*b.del[1]+M;if(!(P>i.y||A>i.x||O<i.y||L<i.x)&&(a=pZ(i,t,b),!isNaN(a.x)))break e}}return isNaN(a.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*sh+" "+i.y*sh+" tried: '"+u+"'"),-1):(n.x=-a.x,n.y=a.y,0)}function pZ(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var a={x:e.x,y:e.y};a.x-=n.ll[0],a.y-=n.ll[1],a.x=Rn(a.x-Math.PI)+Math.PI;var u=_P(a,n);if(t){if(isNaN(u.x))return i;u.x=a.x-u.x,u.y=a.y-u.y;var l=9,s=1e-12,f,y;do{if(y=_P(u,n),isNaN(y.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}f={x:a.x-(y.x+u.x),y:a.y-(y.y+u.y)},u.x+=f.x,u.y+=f.y}while(l--&&Math.abs(f.x)>s&&Math.abs(f.y)>s);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Rn(u.x+n.ll[0]),i.y=u.y+n.ll[1]}else isNaN(u.x)||(i.x=e.x+u.x,i.y=e.y+u.y);return i}function _P(e,t){var n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},a={x:n.x-1*i.x,y:n.y-1*i.y},u={x:Number.NaN,y:Number.NaN},l;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return u;l=i.y*t.lim[0]+i.x;var s={x:t.cvs[l][0],y:t.cvs[l][1]};l++;var f={x:t.cvs[l][0],y:t.cvs[l][1]};l+=t.lim[0];var y={x:t.cvs[l][0],y:t.cvs[l][1]};l--;var x={x:t.cvs[l][0],y:t.cvs[l][1]},b=a.x*a.y,M=a.x*(1-a.y),A=(1-a.x)*(1-a.y),P=(1-a.x)*a.y;return u.x=A*s.x+M*f.x+P*x.x+b*y.x,u.y=A*s.y+M*f.y+P*x.y+b*y.y,u}function bP(e,t,n){var i=n.x,a=n.y,u=n.z||0,l,s,f,y={};for(f=0;f<3;f++)if(!(t&&f===2&&n.z===void 0))switch(f===0?(l=i,"ew".indexOf(e.axis[f])!==-1?s="x":s="y"):f===1?(l=a,"ns".indexOf(e.axis[f])!==-1?s="y":s="x"):(l=u,s="z"),e.axis[f]){case"e":y[s]=l;break;case"w":y[s]=-l;break;case"n":y[s]=l;break;case"s":y[s]=-l;break;case"u":n[s]!==void 0&&(y.z=l);break;case"d":n[s]!==void 0&&(y.z=-l);break;default:return null}return y}function mL(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function mZ(e){xP(e.x),xP(e.y)}function xP(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function gZ(e,t){return(e.datum.datum_type===Nm||e.datum.datum_type===Vm||e.datum.datum_type===Ey)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Nm||t.datum.datum_type===Vm||t.datum.datum_type===Ey)&&e.datumCode!=="WGS84"}function qx(e,t,n,i){var a;Array.isArray(n)?n=mL(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var u=n.z!==void 0;if(mZ(n),e.datum&&t.datum&&gZ(e,t)&&(a=new ah("WGS84"),n=qx(e,a,n,i),e=a),i&&e.axis!=="enu"&&(n=bP(e,!1,n)),e.projName==="longlat")n={x:n.x*Ba,y:n.y*Ba,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),n=e.inverse(n),!n)return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=fZ(e.datum,t.datum,n),!!n)return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),t.projName==="longlat"?n={x:n.x*sh,y:n.y*sh,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&t.axis!=="enu"?bP(t,!0,n):(n&&!u&&delete n.z,n)}var AP=ah("WGS84");function dC(e,t,n,i){var a,u,l;return Array.isArray(n)?(a=qx(e,t,n,i)||{x:NaN,y:NaN},n.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof a.z=="number"?[a.x,a.y,a.z].concat(n.slice(3)):[a.x,a.y,n[2]].concat(n.slice(3)):[a.x,a.y].concat(n.slice(2)):[a.x,a.y]):(u=qx(e,t,n,i),l=Object.keys(n),l.length===2||l.forEach(function(s){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;u[s]=n[s]}),u)}function wP(e){return e instanceof ah?e:e.oProj?e.oProj:ah(e)}function Nl(e,t,n){e=wP(e);var i=!1,a;return typeof t>"u"?(t=e,e=AP,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(n=t,t=e,e=AP,i=!0),t=wP(t),n?dC(e,t,n):(a={forward:function(u,l){return dC(e,t,u,l)},inverse:function(u,l){return dC(t,e,u,l)}},i&&(a.oProj=t),a)}var CP=6,gL="AJSAJS",yL="AFAFAF",vy=65,al=73,du=79,L0=86,D0=90;const yZ={forward:vL,inverse:vZ,toPoint:_L};function vL(e,t){return t=t||5,xZ(_Z({lat:e[1],lon:e[0]}),t)}function vZ(e){var t=dS(xL(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function _L(e){var t=dS(xL(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function fC(e){return e*(Math.PI/180)}function IP(e){return 180*(e/Math.PI)}function _Z(e){var t=e.lat,n=e.lon,i=6378137,a=.00669438,u=.9996,l,s,f,y,x,b,M,A=fC(t),P=fC(n),L,O;O=Math.floor((n+180)/6)+1,n===180&&(O=60),t>=56&&t<64&&n>=3&&n<12&&(O=32),t>=72&&t<84&&(n>=0&&n<9?O=31:n>=9&&n<21?O=33:n>=21&&n<33?O=35:n>=33&&n<42&&(O=37)),l=(O-1)*6-180+3,L=fC(l),s=a/(1-a),f=i/Math.sqrt(1-a*Math.sin(A)*Math.sin(A)),y=Math.tan(A)*Math.tan(A),x=s*Math.cos(A)*Math.cos(A),b=Math.cos(A)*(P-L),M=i*((1-a/4-3*a*a/64-5*a*a*a/256)*A-(3*a/8+3*a*a/32+45*a*a*a/1024)*Math.sin(2*A)+(15*a*a/256+45*a*a*a/1024)*Math.sin(4*A)-35*a*a*a/3072*Math.sin(6*A));var V=u*f*(b+(1-y+x)*b*b*b/6+(5-18*y+y*y+72*x-58*s)*b*b*b*b*b/120)+5e5,z=u*(M+f*Math.tan(A)*(b*b/2+(5-y+9*x+4*x*x)*b*b*b*b/24+(61-58*y+y*y+600*x-330*s)*b*b*b*b*b*b/720));return t<0&&(z+=1e7),{northing:Math.round(z),easting:Math.round(V),zoneNumber:O,zoneLetter:bZ(t)}}function dS(e){var t=e.northing,n=e.easting,i=e.zoneLetter,a=e.zoneNumber;if(a<0||a>60)return null;var u=.9996,l=6378137,s=.00669438,f,y=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),x,b,M,A,P,L,O,V,z,B=n-5e5,U=t;i<"N"&&(U-=1e7),O=(a-1)*6-180+3,f=s/(1-s),L=U/u,V=L/(l*(1-s/4-3*s*s/64-5*s*s*s/256)),z=V+(3*y/2-27*y*y*y/32)*Math.sin(2*V)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*V)+151*y*y*y/96*Math.sin(6*V),x=l/Math.sqrt(1-s*Math.sin(z)*Math.sin(z)),b=Math.tan(z)*Math.tan(z),M=f*Math.cos(z)*Math.cos(z),A=l*(1-s)/Math.pow(1-s*Math.sin(z)*Math.sin(z),1.5),P=B/(x*u);var Z=z-x*Math.tan(z)/A*(P*P/2-(5+3*b+10*M-4*M*M-9*f)*P*P*P*P/24+(61+90*b+298*M+45*b*b-252*f-3*M*M)*P*P*P*P*P*P/720);Z=IP(Z);var te=(P-(1+2*b+M)*P*P*P/6+(5-2*M+28*b-3*M*M+8*f+24*b*b)*P*P*P*P*P/120)/Math.cos(z);te=O+IP(te);var Y;if(e.accuracy){var W=dS({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});Y={top:W.lat,right:W.lon,bottom:Z,left:te}}else Y={lat:Z,lon:te};return Y}function bZ(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function xZ(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+AZ(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+i.substr(i.length-5,t)}function AZ(e,t,n){var i=bL(n),a=Math.floor(e/1e5),u=Math.floor(t/1e5)%20;return wZ(a,u,i)}function bL(e){var t=e%CP;return t===0&&(t=CP),t}function wZ(e,t,n){var i=n-1,a=gL.charCodeAt(i),u=yL.charCodeAt(i),l=a+e-1,s=u+t,f=!1;l>D0&&(l=l-D0+vy-1,f=!0),(l===al||a<al&&l>al||(l>al||a<al)&&f)&&l++,(l===du||a<du&&l>du||(l>du||a<du)&&f)&&(l++,l===al&&l++),l>D0&&(l=l-D0+vy-1),s>L0?(s=s-L0+vy-1,f=!0):f=!1,(s===al||u<al&&s>al||(s>al||u<al)&&f)&&s++,(s===du||u<du&&s>du||(s>du||u<du)&&f)&&(s++,s===al&&s++),s>L0&&(s=s-L0+vy-1);var y=String.fromCharCode(l)+String.fromCharCode(s);return y}function xL(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,n=null,i="",a,u=0;!/[A-Z]/.test(a=e.charAt(u));){if(u>=2)throw"MGRSPoint bad conversion from: "+e;i+=a,u++}var l=parseInt(i,10);if(u===0||u+3>t)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(u++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+e;n=e.substring(u,u+=2);for(var f=bL(l),y=CZ(n.charAt(0),f),x=IZ(n.charAt(1),f);x<MZ(s);)x+=2e6;var b=t-u;if(b%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var M=b/2,A=0,P=0,L,O,V,z,B;return M>0&&(L=1e5/Math.pow(10,M),O=e.substring(u,u+M),A=parseFloat(O)*L,V=e.substring(u+M),P=parseFloat(V)*L),z=A+y,B=P+x,{easting:z,northing:B,zoneLetter:s,zoneNumber:l,accuracy:L}}function CZ(e,t){for(var n=gL.charCodeAt(t-1),i=1e5,a=!1;n!==e.charCodeAt(0);){if(n++,n===al&&n++,n===du&&n++,n>D0){if(a)throw"Bad character: "+e;n=vy,a=!0}i+=1e5}return i}function IZ(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=yL.charCodeAt(t-1),i=0,a=!1;n!==e.charCodeAt(0);){if(n++,n===al&&n++,n===du&&n++,n>L0){if(a)throw"Bad character: "+e;n=vy,a=!0}i+=1e5}return i}function MZ(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function $y(e,t,n){if(!(this instanceof $y))return new $y(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}$y.fromMGRS=function(e){return new $y(_L(e))};$y.prototype.toMGRS=function(e){return vL([this.x,this.y],e)};var SZ=1,EZ=.25,MP=.046875,SP=.01953125,EP=.01068115234375,TZ=.75,PZ=.46875,kZ=.013020833333333334,LZ=.007120768229166667,DZ=.3645833333333333,RZ=.005696614583333333,OZ=.3076171875;function fS(e){var t=[];t[0]=SZ-e*(EZ+e*(MP+e*(SP+e*EP))),t[1]=e*(TZ-e*(MP+e*(SP+e*EP)));var n=e*e;return t[2]=n*(PZ-e*(kZ+e*LZ)),n*=e,t[3]=n*(DZ-e*RZ),t[4]=n*e*OZ,t}function ov(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var zZ=20;function pS(e,t,n){for(var i=1/(1-t),a=e,u=zZ;u;--u){var l=Math.sin(a),s=1-t*l*l;if(s=(ov(a,l,Math.cos(a),n)-e)*(s*Math.sqrt(s))*i,a-=s,Math.abs(s)<En)return a}return a}function FZ(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=fS(this.es),this.ml0=ov(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function BZ(e){var t=e.x,n=e.y,i=Rn(t-this.long0),a,u,l,s=Math.sin(n),f=Math.cos(n);if(this.es){var x=f*i,b=Math.pow(x,2),M=this.ep2*Math.pow(f,2),A=Math.pow(M,2),P=Math.abs(f)>En?Math.tan(n):0,L=Math.pow(P,2),O=Math.pow(L,2);a=1-this.es*Math.pow(s,2),x=x/Math.sqrt(a);var V=ov(n,s,f,this.en);u=this.a*(this.k0*x*(1+b/6*(1-L+M+b/20*(5-18*L+O+14*M-58*L*M+b/42*(61+179*O-O*L-479*L)))))+this.x0,l=this.a*(this.k0*(V-this.ml0+s*i*x/2*(1+b/12*(5-L+9*M+4*A+b/30*(61+O-58*L+270*M-330*L*M+b/56*(1385+543*O-O*L-3111*L))))))+this.y0}else{var y=f*Math.sin(i);if(Math.abs(Math.abs(y)-1)<En)return 93;if(u=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,l=f*Math.cos(i)/Math.sqrt(1-Math.pow(y,2)),y=Math.abs(l),y>=1){if(y-1>En)return 93;l=0}else l=Math.acos(l);n<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return e.x=u,e.y=l,e}function NZ(e){var t,n,i,a,u=(e.x-this.x0)*(1/this.a),l=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+l/this.k0,n=pS(t,this.es,this.en),Math.abs(n)<fn){var b=Math.sin(n),M=Math.cos(n),A=Math.abs(M)>En?Math.tan(n):0,P=this.ep2*Math.pow(M,2),L=Math.pow(P,2),O=Math.pow(A,2),V=Math.pow(O,2);t=1-this.es*Math.pow(b,2);var z=u*Math.sqrt(t)/this.k0,B=Math.pow(z,2);t=t*A,i=n-t*B/(1-this.es)*.5*(1-B/12*(5+3*O-9*P*O+P-4*L-B/30*(61+90*O-252*P*O+45*V+46*P-B/56*(1385+3633*O+4095*V+1574*V*O)))),a=Rn(this.long0+z*(1-B/6*(1+2*O+P-B/20*(5+28*O+24*V+8*P*O+6*P-B/42*(61+662*O+1320*V+720*V*O))))/M)}else i=fn*r_(l),a=0;else{var s=Math.exp(u/this.k0),f=.5*(s-1/s),y=this.lat0+l/this.k0,x=Math.cos(y);t=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(f,2))),i=Math.asin(t),l<0&&(i=-i),f===0&&x===0?a=0:a=Rn(Math.atan2(f,x)+this.long0)}return e.x=a,e.y=i,e}var VZ=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const fx={init:FZ,forward:BZ,inverse:NZ,names:VZ};function AL(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function dl(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function jZ(e){var t=1+e,n=t-1;return n===0?e:e*Math.log(t)/n}function UZ(e){var t=Math.abs(e);return t=jZ(t*(1+t/(dl(1,t)+1))),e<0?-t:t}function mS(e,t){for(var n=2*Math.cos(2*t),i=e.length-1,a=e[i],u=0,l;--i>=0;)l=-u+n*a+e[i],u=a,a=l;return t+l*Math.sin(2*t)}function $Z(e,t){for(var n=2*Math.cos(t),i=e.length-1,a=e[i],u=0,l;--i>=0;)l=-u+n*a+e[i],u=a,a=l;return Math.sin(t)*l}function HZ(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function wL(e,t,n){for(var i=Math.sin(t),a=Math.cos(t),u=AL(n),l=HZ(n),s=2*a*l,f=-2*i*u,y=e.length-1,x=e[y],b=0,M=0,A=0,P,L;--y>=0;)P=M,L=b,M=x,b=A,x=-P+s*M-f*b+e[y],A=-L+f*M+s*b;return s=i*l,f=a*u,[s*x-f*A,s*A+f*x]}function GZ(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(fx.init.apply(this),this.forward=fx.forward,this.inverse=fx.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),n=n*t,this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n=n*t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),n=n*t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175))),n=n*t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n=n*t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),n=n*t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n=n*t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n=n*t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n=n*t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=mS(this.cbg,this.lat0);this.Zb=-this.Qn*(i+$Z(this.gtu,2*i))}function ZZ(e){var t=Rn(e.x-this.long0),n=e.y;n=mS(this.cbg,n);var i=Math.sin(n),a=Math.cos(n),u=Math.sin(t),l=Math.cos(t);n=Math.atan2(i,l*a),t=Math.atan2(u*a,dl(i,a*l)),t=UZ(Math.tan(t));var s=wL(this.gtu,2*n,2*t);n=n+s[0],t=t+s[1];var f,y;return Math.abs(t)<=2.623395162778?(f=this.a*(this.Qn*t)+this.x0,y=this.a*(this.Qn*n+this.Zb)+this.y0):(f=1/0,y=1/0),e.x=f,e.y=y,e}function WZ(e){var t=(e.x-this.x0)*(1/this.a),n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,t=t/this.Qn;var i,a;if(Math.abs(t)<=2.623395162778){var u=wL(this.utg,2*n,2*t);n=n+u[0],t=t+u[1],t=Math.atan(AL(t));var l=Math.sin(n),s=Math.cos(n),f=Math.sin(t),y=Math.cos(t);n=Math.atan2(l*y,dl(f,y*s)),t=Math.atan2(f,y*s),i=Rn(t+this.long0),a=mS(this.cgb,n)}else i=1/0,a=1/0;return e.x=i,e.y=a,e}var qZ=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const px={init:GZ,forward:ZZ,inverse:WZ,names:qZ};function KZ(e,t){if(e===void 0){if(e=Math.floor((Rn(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var YZ="etmerc";function XZ(){var e=KZ(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Ba,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,px.init.apply(this),this.forward=px.forward,this.inverse=px.inverse}var QZ=["Universal Transverse Mercator System","utm"];const JZ={init:XZ,names:QZ,dependsOn:YZ};function gS(e,t){return Math.pow((1-e)/(1+e),t)}var eW=20;function tW(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+pi)/(Math.pow(Math.tan(.5*this.lat0+pi),this.C)*gS(this.e*e,this.ratexp))}function nW(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+pi),this.C)*gS(this.e*Math.sin(n),this.ratexp))-fn,e.x=this.C*t,e}function rW(e){for(var t=1e-14,n=e.x/this.C,i=e.y,a=Math.pow(Math.tan(.5*i+pi)/this.K,1/this.C),u=eW;u>0&&(i=2*Math.atan(a*gS(this.e*Math.sin(e.y),-.5*this.e))-fn,!(Math.abs(i-e.y)<t));--u)e.y=i;return u?(e.x=n,e.y=i,e):null}const yS={init:tW,forward:nW,inverse:rW};function iW(){yS.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function sW(e){var t,n,i,a;return e.x=Rn(e.x-this.long0),yS.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),a=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=a*n*Math.sin(e.x),e.y=a*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function aW(e){var t,n,i,a,u;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,u=dl(e.x,e.y)){var l=2*Math.atan2(u,this.R2);t=Math.sin(l),n=Math.cos(l),a=Math.asin(n*this.sinc0+e.y*t*this.cosc0/u),i=Math.atan2(e.x*t,u*this.cosc0*n-e.y*this.sinc0*t)}else a=this.phic0,i=0;return e.x=i,e.y=a,yS.inverse.apply(this,[e]),e.x=Rn(e.x+this.long0),e}var oW=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const lW={init:iW,forward:sW,inverse:aW,names:oW};function uW(e,t,n){return t*=n,Math.tan(.5*(fn+e))*Math.pow((1-t)/(1+t),.5*n)}function cW(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=En&&(this.k0=.5*(1+r_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=En&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=En&&Math.abs(Math.cos(this.lat_ts))>En&&(this.k0=.5*this.cons*ph(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/dc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ph(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-fn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function hW(e){var t=e.x,n=e.y,i=Math.sin(n),a=Math.cos(n),u,l,s,f,y,x,b=Rn(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=En&&Math.abs(n+this.lat0)<=En?(e.x=NaN,e.y=NaN,e):this.sphere?(u=2*this.k0/(1+this.sinlat0*i+this.coslat0*a*Math.cos(b)),e.x=this.a*u*a*Math.sin(b)+this.x0,e.y=this.a*u*(this.coslat0*i-this.sinlat0*a*Math.cos(b))+this.y0,e):(l=2*Math.atan(this.ssfn_(n,i,this.e))-fn,f=Math.cos(l),s=Math.sin(l),Math.abs(this.coslat0)<=En?(y=dc(this.e,n*this.con,this.con*i),x=2*this.a*this.k0*y/this.cons,e.x=this.x0+x*Math.sin(t-this.long0),e.y=this.y0-this.con*x*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<En?(u=2*this.a*this.k0/(1+f*Math.cos(b)),e.y=u*s):(u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*f*Math.cos(b))),e.y=u*(this.cosX0*s-this.sinX0*f*Math.cos(b))+this.y0),e.x=u*f*Math.sin(b)+this.x0,e))}function dW(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,a,u,l=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(l/(2*this.a*this.k0));return t=this.long0,n=this.lat0,l<=En?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/l),Math.abs(this.coslat0)<En?this.lat0>0?t=Rn(this.long0+Math.atan2(e.x,-1*e.y)):t=Rn(this.long0+Math.atan2(e.x,e.y)):t=Rn(this.long0+Math.atan2(e.x*Math.sin(s),l*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=n,e)}else if(Math.abs(this.coslat0)<=En){if(l<=En)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*k1(this.e,i),t=this.con*Rn(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else a=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,l<=En?u=this.X0:(u=Math.asin(Math.cos(a)*this.sinX0+e.y*Math.sin(a)*this.cosX0/l),t=Rn(this.long0+Math.atan2(e.x*Math.sin(a),l*this.cosX0*Math.cos(a)-e.y*this.sinX0*Math.sin(a)))),n=-1*k1(this.e,Math.tan(.5*(fn+u)));return e.x=t,e.y=n,e}var fW=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const pW={init:cW,forward:hW,inverse:dW,names:fW,ssfn_:uW};function mW(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=this.rf,a=1/i,u=2*a-Math.pow(a,2),l=this.e=Math.sqrt(u);this.R=this.k0*n*Math.sqrt(1-u)/(1-u*Math.pow(t,2)),this.alpha=Math.sqrt(1+u/(1-u)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),f=Math.log(Math.tan(Math.PI/4+e/2)),y=Math.log((1+l*t)/(1-l*t));this.K=s-this.alpha*f+this.alpha*l/2*y}function gW(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,a=2*(Math.atan(Math.exp(i))-Math.PI/4),u=this.alpha*(e.x-this.lambda0),l=Math.atan(Math.sin(u)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(u))),s=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(u));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*l+this.x0,e}function yW(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,a=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(i)),l=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(a))),s=this.lambda0+l/this.alpha,f=0,y=u,x=-1e3,b=0;Math.abs(y-x)>1e-7;){if(++b>20)return;f=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(y))/2)),x=y,y=2*Math.atan(Math.exp(f))-Math.PI/2}return e.x=s,e.y=y,e}var vW=["somerc"];const _W={init:mW,forward:gW,inverse:yW,names:vW};var sy=1e-7;function bW(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(n)!==-1}function xW(){var e,t,n,i,a,u,l,s,f,y,x=0,b,M=0,A=0,P=0,L=0,O=0,V=0;this.no_off=bW(this),this.no_rot="no_rot"in this;var z=!1;"alpha"in this&&(z=!0);var B=!1;if("rectified_grid_angle"in this&&(B=!0),z&&(V=this.alpha),B&&(x=this.rectified_grid_angle*Ba),z||B)M=this.longc;else if(A=this.long1,L=this.lat1,P=this.long2,O=this.lat2,Math.abs(L-O)<=sy||(e=Math.abs(L))<=sy||Math.abs(e-fn)<=sy||Math.abs(Math.abs(this.lat0)-fn)<=sy||Math.abs(Math.abs(O)-fn)<=sy)throw new Error;var U=1-this.es;t=Math.sqrt(U),Math.abs(this.lat0)>En?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/U),this.A=this.B*this.k0*t/e,i=this.B*t/(n*Math.sqrt(e)),a=i*i-1,a<=0?a=0:(a=Math.sqrt(a),this.lat0<0&&(a=-a)),this.E=a+=i,this.E*=Math.pow(dc(this.e,this.lat0,s),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=a=1),z||B?(z?(b=Math.asin(Math.sin(V)/i),B||(x=V)):(b=x,V=Math.asin(i*Math.sin(b))),this.lam0=M-Math.asin(.5*(a-1/a)*Math.tan(b))/this.B):(u=Math.pow(dc(this.e,L,Math.sin(L)),this.B),l=Math.pow(dc(this.e,O,Math.sin(O)),this.B),a=this.E/u,f=(l-u)/(l+u),y=this.E*this.E,y=(y-l*u)/(y+l*u),e=A-P,e<-Math.pi?P-=T1:e>Math.pi&&(P+=T1),this.lam0=Rn(.5*(A+P)-Math.atan(y*Math.tan(.5*this.B*(A-P))/f)/this.B),b=Math.atan(2*Math.sin(this.B*Rn(A-this.lam0))/(a-1/a)),x=V=Math.asin(i*Math.sin(b))),this.singam=Math.sin(b),this.cosgam=Math.cos(b),this.sinrot=Math.sin(x),this.cosrot=Math.cos(x),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(V))),this.lat0<0&&(this.u_0=-this.u_0)),a=.5*b,this.v_pole_n=this.ArB*Math.log(Math.tan(pi-a)),this.v_pole_s=this.ArB*Math.log(Math.tan(pi+a))}function AW(e){var t={},n,i,a,u,l,s,f,y;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-fn)>En){if(l=this.E/Math.pow(dc(this.e,e.y,Math.sin(e.y)),this.B),s=1/l,n=.5*(l-s),i=.5*(l+s),u=Math.sin(this.B*e.x),a=(n*this.singam-u*this.cosgam)/i,Math.abs(Math.abs(a)-1)<En)throw new Error;y=.5*this.ArB*Math.log((1-a)/(1+a)),s=Math.cos(this.B*e.x),Math.abs(s)<sy?f=this.A*e.x:f=this.ArB*Math.atan2(n*this.cosgam+u*this.singam,s)}else y=e.y>0?this.v_pole_n:this.v_pole_s,f=this.ArB*e.y;return this.no_rot?(t.x=f,t.y=y):(f-=this.u_0,t.x=y*this.cosrot+f*this.sinrot,t.y=f*this.cosrot-y*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function wW(e){var t,n,i,a,u,l,s,f={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),a=.5*(i-1/i),u=.5*(i+1/i),l=Math.sin(this.BrA*t),s=(l*this.cosgam+a*this.singam)/u,Math.abs(Math.abs(s)-1)<En)f.x=0,f.y=s<0?-fn:fn;else{if(f.y=this.E/Math.sqrt((1+s)/(1-s)),f.y=k1(this.e,Math.pow(f.y,1/this.B)),f.y===1/0)throw new Error;f.x=-this.rB*Math.atan2(a*this.cosgam-l*this.singam,Math.cos(this.BrA*t))}return f.x+=this.lam0,f}var CW=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const IW={init:xW,forward:AW,inverse:wW,names:CW};function MW(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<En)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=ph(this.e,t,n),a=dc(this.e,this.lat1,t),u=Math.sin(this.lat2),l=Math.cos(this.lat2),s=ph(this.e,u,l),f=dc(this.e,this.lat2,u),y=dc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>En?this.ns=Math.log(i/s)/Math.log(a/f):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(y,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function SW(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=En&&(n=r_(n)*(fn-2*En));var i=Math.abs(Math.abs(n)-fn),a,u;if(i>En)a=dc(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(a,this.ns);else{if(i=n*this.ns,i<=0)return null;u=0}var l=this.ns*Rn(t-this.long0);return e.x=this.k0*(u*Math.sin(l))+this.x0,e.y=this.k0*(this.rh-u*Math.cos(l))+this.y0,e}function EW(e){var t,n,i,a,u,l=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(l*l+s*s),n=1):(t=-Math.sqrt(l*l+s*s),n=-1);var f=0;if(t!==0&&(f=Math.atan2(n*l,n*s)),t!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),a=k1(this.e,i),a===-9999)return null}else a=-fn;return u=Rn(f/this.ns+this.long0),e.x=u,e.y=a,e}var TW=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const PW={init:MW,forward:SW,inverse:EW,names:TW};function kW(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function LW(e){var t,n,i,a,u,l,s,f=e.x,y=e.y,x=Rn(f-this.long0);return t=Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(y/2+this.s45),this.alfa)/t)-this.s45),i=-x*this.alfa,a=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),u=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(a)),l=this.n*u,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(a/2+this.s45),this.n),e.y=s*Math.cos(l)/1,e.x=s*Math.sin(l)/1,this.czech||(e.y*=-1,e.x*=-1),e}function DW(e){var t,n,i,a,u,l,s,f,y=e.x;e.x=e.y,e.y=y,this.czech||(e.y*=-1,e.x*=-1),l=Math.sqrt(e.x*e.x+e.y*e.y),u=Math.atan2(e.y,e.x),a=u/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),n=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(t)),e.x=this.long0-n/this.alfa,s=t,f=0;var x=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-e.y)<1e-10&&(f=1),s=e.y,x+=1;while(f===0&&x<15);return x>=15?null:e}var RW=["Krovak","krovak"];const OW={init:kW,forward:LW,inverse:DW,names:RW};function Oo(e,t,n,i,a){return e*a-t*Math.sin(2*a)+n*Math.sin(4*a)-i*Math.sin(6*a)}function i_(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function s_(e){return .375*e*(1+.25*e*(1+.46875*e))}function a_(e){return .05859375*e*e*(1+.75*e)}function o_(e){return e*e*e*(35/3072)}function Hy(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}function sp(e){return Math.abs(e)<fn?e:e-r_(e)*Math.PI}function Kx(e,t,n,i,a){var u,l;u=e/t;for(var s=0;s<15;s++)if(l=(e-(t*u-n*Math.sin(2*u)+i*Math.sin(4*u)-a*Math.sin(6*u)))/(t-2*n*Math.cos(2*u)+4*i*Math.cos(4*u)-6*a*Math.cos(6*u)),u+=l,Math.abs(l)<=1e-10)return u;return NaN}function zW(){this.sphere||(this.e0=i_(this.es),this.e1=s_(this.es),this.e2=a_(this.es),this.e3=o_(this.es),this.ml0=this.a*Oo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function FW(e){var t,n,i=e.x,a=e.y;if(i=Rn(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(a)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(a),Math.cos(i))-this.lat0);else{var u=Math.sin(a),l=Math.cos(a),s=Hy(this.a,this.e,u),f=Math.tan(a)*Math.tan(a),y=i*Math.cos(a),x=y*y,b=this.es*l*l/(1-this.es),M=this.a*Oo(this.e0,this.e1,this.e2,this.e3,a);t=s*y*(1-x*f*(1/6-(8-f+8*b)*x/120)),n=M-this.ml0+s*u/l*x*(.5+(5-f+6*b)*x/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function BW(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,a;if(this.sphere){var u=n+this.lat0;i=Math.asin(Math.sin(u)*Math.cos(t)),a=Math.atan2(Math.tan(t),Math.cos(u))}else{var l=this.ml0/this.a+n,s=Kx(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-fn)<=En)return e.x=this.long0,e.y=fn,n<0&&(e.y*=-1),e;var f=Hy(this.a,this.e,Math.sin(s)),y=f*f*f/this.a/this.a*(1-this.es),x=Math.pow(Math.tan(s),2),b=t*this.a/f,M=b*b;i=s-f*Math.tan(s)/y*b*b*(.5-(1+3*x)*b*b/24),a=b*(1-M*(x/3+(1+3*x)*x*M/15))/Math.cos(s)}return e.x=Rn(a+this.long0),e.y=sp(i),e}var NW=["Cassini","Cassini_Soldner","cass"];const VW={init:zW,forward:FW,inverse:BW,names:NW};function Hf(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}var jW=1,UW=2,$W=3,HW=4;function GW(){var e=Math.abs(this.lat0);if(Math.abs(e-fn)<En?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<En?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Hf(this.e,1),this.mmf=.5/(1-this.es),this.apa=eq(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Hf(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ZW(e){var t,n,i,a,u,l,s,f,y,x,b=e.x,M=e.y;if(b=Rn(b-this.long0),this.sphere){if(u=Math.sin(M),x=Math.cos(M),i=Math.cos(b),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+x*i:1+this.sinph0*u+this.cosph0*x*i,n<=En)return null;n=Math.sqrt(2/n),t=n*x*Math.sin(b),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*x*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(M+this.lat0)<En)return null;n=pi-M*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),t=n*Math.sin(b),n*=i}}else{switch(s=0,f=0,y=0,i=Math.cos(b),a=Math.sin(b),u=Math.sin(M),l=Hf(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=l/this.qp,f=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:y=1+this.sinb1*s+this.cosb1*f*i;break;case this.EQUIT:y=1+f*i;break;case this.N_POLE:y=fn+M,l=this.qp-l;break;case this.S_POLE:y=M-fn,l=this.qp+l;break}if(Math.abs(y)<En)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:y=Math.sqrt(2/y),this.mode===this.OBLIQ?n=this.ymf*y*(this.cosb1*s-this.sinb1*f*i):n=(y=Math.sqrt(2/(1+f*i)))*s*this.ymf,t=this.xmf*y*f*a;break;case this.N_POLE:case this.S_POLE:l>=0?(t=(y=Math.sqrt(l))*a,n=i*(this.mode===this.S_POLE?y:-y)):t=n=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function WW(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,a,u,l,s,f,y;if(this.sphere){var x=0,b,M=0;if(b=Math.sqrt(t*t+n*n),a=b*.5,a>1)return null;switch(a=2*Math.asin(a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(M=Math.sin(a),x=Math.cos(a)),this.mode){case this.EQUIT:a=Math.abs(b)<=En?0:Math.asin(n*M/b),t*=M,n=x*b;break;case this.OBLIQ:a=Math.abs(b)<=En?this.lat0:Math.asin(x*this.sinph0+n*M*this.cosph0/b),t*=M*this.cosph0,n=(x-Math.sin(a)*this.sinph0)*b;break;case this.N_POLE:n=-n,a=fn-a;break;case this.S_POLE:a-=fn;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{if(y=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,n*=this.dd,f=Math.sqrt(t*t+n*n),f<En)return e.x=this.long0,e.y=this.lat0,e;l=2*Math.asin(.5*f/this.rq),u=Math.cos(l),t*=l=Math.sin(l),this.mode===this.OBLIQ?(y=u*this.sinb1+n*l*this.cosb1/f,s=this.qp*y,n=f*this.cosb1*u-n*this.sinb1*l):(y=n*l/f,s=this.qp*y,n=f*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),s=t*t+n*n,!s)return e.x=this.long0,e.y=this.lat0,e;y=1-s/this.qp,this.mode===this.S_POLE&&(y=-y)}i=Math.atan2(t,n),a=tq(Math.asin(y),this.apa)}return e.x=Rn(this.long0+i),e.y=a,e}var qW=.3333333333333333,KW=.17222222222222222,YW=.10257936507936508,XW=.06388888888888888,QW=.0664021164021164,JW=.016415012942191543;function eq(e){var t,n=[];return n[0]=e*qW,t=e*e,n[0]+=t*KW,n[1]=t*XW,t*=e,n[0]+=t*YW,n[1]+=t*QW,n[2]=t*JW,n}function tq(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var nq=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const rq={init:GW,forward:ZW,inverse:WW,names:nq,S_POLE:jW,N_POLE:UW,EQUIT:$W,OBLIQ:HW};function Qf(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function iq(){Math.abs(this.lat1+this.lat2)<En||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ph(this.e3,this.sin_po,this.cos_po),this.qs1=Hf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ph(this.e3,this.sin_po,this.cos_po),this.qs2=Hf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Hf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>En?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function sq(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Hf(this.e3,this.sin_phi),a=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,u=this.ns0*Rn(t-this.long0),l=a*Math.sin(u)+this.x0,s=this.rh-a*Math.cos(u)+this.y0;return e.x=l,e.y=s,e}function aq(e){var t,n,i,a,u,l;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),a=0,t!==0&&(a=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?l=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,l=this.phi1z(this.e3,n)),u=Rn(a/this.ns0+this.long0),e.x=u,e.y=l,e}function oq(e,t){var n,i,a,u,l,s=Qf(.5*t);if(e<En)return s;for(var f=e*e,y=1;y<=25;y++)if(n=Math.sin(s),i=Math.cos(s),a=e*n,u=1-a*a,l=.5*u*u/i*(t/(1-f)-n/u+.5/e*Math.log((1-a)/(1+a))),s=s+l,Math.abs(l)<=1e-7)return s;return null}var lq=["Albers_Conic_Equal_Area","Albers","aea"];const uq={init:iq,forward:sq,inverse:aq,names:lq,phi1z:oq};function cq(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function hq(e){var t,n,i,a,u,l,s,f,y=e.x,x=e.y;return i=Rn(y-this.long0),t=Math.sin(x),n=Math.cos(x),a=Math.cos(i),l=this.sin_p14*t+this.cos_p14*n*a,u=1,l>0||Math.abs(l)<=En?(s=this.x0+this.a*u*n*Math.sin(i)/l,f=this.y0+this.a*u*(this.cos_p14*t-this.sin_p14*n*a)/l):(s=this.x0+this.infinity_dist*n*Math.sin(i),f=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*a)),e.x=s,e.y=f,e}function dq(e){var t,n,i,a,u,l;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(a=Math.atan2(t,this.rc),n=Math.sin(a),i=Math.cos(a),l=Qf(i*this.sin_p14+e.y*n*this.cos_p14/t),u=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),u=Rn(this.long0+u)):(l=this.phic0,u=0),e.x=u,e.y=l,e}var fq=["gnom"];const pq={init:cq,forward:hq,inverse:dq,names:fq};function mq(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*fn:fn;for(var i=Math.asin(.5*t),a,u,l,s,f=0;f<30;f++)if(u=Math.sin(i),l=Math.cos(i),s=e*u,a=Math.pow(1-s*s,2)/(2*l)*(t/(1-e*e)-u/(1-s*s)+.5/e*Math.log((1-s)/(1+s))),i+=a,Math.abs(a)<=1e-10)return i;return NaN}function gq(){this.sphere||(this.k0=ph(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function yq(e){var t=e.x,n=e.y,i,a,u=Rn(t-this.long0);if(this.sphere)i=this.x0+this.a*u*Math.cos(this.lat_ts),a=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var l=Hf(this.e,Math.sin(n));i=this.x0+this.a*this.k0*u,a=this.y0+this.a*l*.5/this.k0}return e.x=i,e.y=a,e}function vq(e){e.x-=this.x0,e.y-=this.y0;var t,n;return this.sphere?(t=Rn(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=mq(this.e,2*e.y*this.k0/this.a),t=Rn(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e}var _q=["cea"];const bq={init:gq,forward:yq,inverse:vq,names:_q};function xq(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Aq(e){var t=e.x,n=e.y,i=Rn(t-this.long0),a=sp(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*a,e}function wq(e){var t=e.x,n=e.y;return e.x=Rn(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=sp(this.lat0+(n-this.y0)/this.a),e}var Cq=["Equirectangular","Equidistant_Cylindrical","eqc"];const Iq={init:xq,forward:Aq,inverse:wq,names:Cq};var TP=20;function Mq(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i_(this.es),this.e1=s_(this.es),this.e2=a_(this.es),this.e3=o_(this.es),this.ml0=this.a*Oo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Sq(e){var t=e.x,n=e.y,i,a,u,l=Rn(t-this.long0);if(u=l*Math.sin(n),this.sphere)Math.abs(n)<=En?(i=this.a*l,a=-1*this.a*this.lat0):(i=this.a*Math.sin(u)/Math.tan(n),a=this.a*(sp(n-this.lat0)+(1-Math.cos(u))/Math.tan(n)));else if(Math.abs(n)<=En)i=this.a*l,a=-1*this.ml0;else{var s=Hy(this.a,this.e,Math.sin(n))/Math.tan(n);i=s*Math.sin(u),a=this.a*Oo(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+s*(1-Math.cos(u))}return e.x=i+this.x0,e.y=a+this.y0,e}function Eq(e){var t,n,i,a,u,l,s,f,y;if(i=e.x-this.x0,a=e.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=En)t=Rn(i/this.a+this.long0),n=0;else{l=this.lat0+a/this.a,s=i*i/this.a/this.a+l*l,f=l;var x;for(u=TP;u;--u)if(x=Math.tan(f),y=-1*(l*(f*x+1)-f-.5*(f*f+s)*x)/((f-l)/x-1),f+=y,Math.abs(y)<=En){n=f;break}t=Rn(this.long0+Math.asin(i*Math.tan(f)/this.a)/Math.sin(n))}else if(Math.abs(a+this.ml0)<=En)n=0,t=Rn(this.long0+i/this.a);else{l=(this.ml0+a)/this.a,s=i*i/this.a/this.a+l*l,f=l;var b,M,A,P,L;for(u=TP;u;--u)if(L=this.e*Math.sin(f),b=Math.sqrt(1-L*L)*Math.tan(f),M=this.a*Oo(this.e0,this.e1,this.e2,this.e3,f),A=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),P=M/this.a,y=(l*(b*P+1)-P-.5*b*(P*P+s))/(this.es*Math.sin(2*f)*(P*P+s-2*l*P)/(4*b)+(l-P)*(b*A-2/Math.sin(2*f))-A),f-=y,Math.abs(y)<=En){n=f;break}b=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=Rn(this.long0+Math.asin(i*b/this.a)/Math.sin(n))}return e.x=t,e.y=n,e}var Tq=["Polyconic","poly"];const Pq={init:Mq,forward:Sq,inverse:Eq,names:Tq};function kq(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Lq(e){var t,n=e.x,i=e.y,a=i-this.lat0,u=n-this.long0,l=a/X0*1e-5,s=u,f=1,y=0;for(t=1;t<=10;t++)f=f*l,y=y+this.A[t]*f;var x=y,b=s,M=1,A=0,P,L,O=0,V=0;for(t=1;t<=6;t++)P=M*x-A*b,L=A*x+M*b,M=P,A=L,O=O+this.B_re[t]*M-this.B_im[t]*A,V=V+this.B_im[t]*M+this.B_re[t]*A;return e.x=V*this.a+this.x0,e.y=O*this.a+this.y0,e}function Dq(e){var t,n=e.x,i=e.y,a=n-this.x0,u=i-this.y0,l=u/this.a,s=a/this.a,f=1,y=0,x,b,M=0,A=0;for(t=1;t<=6;t++)x=f*l-y*s,b=y*l+f*s,f=x,y=b,M=M+this.C_re[t]*f-this.C_im[t]*y,A=A+this.C_im[t]*f+this.C_re[t]*y;for(var P=0;P<this.iterations;P++){var L=M,O=A,V,z,B=l,U=s;for(t=2;t<=6;t++)V=L*M-O*A,z=O*M+L*A,L=V,O=z,B=B+(t-1)*(this.B_re[t]*L-this.B_im[t]*O),U=U+(t-1)*(this.B_im[t]*L+this.B_re[t]*O);L=1,O=0;var Z=this.B_re[1],te=this.B_im[1];for(t=2;t<=6;t++)V=L*M-O*A,z=O*M+L*A,L=V,O=z,Z=Z+t*(this.B_re[t]*L-this.B_im[t]*O),te=te+t*(this.B_im[t]*L+this.B_re[t]*O);var Y=Z*Z+te*te;M=(B*Z+U*te)/Y,A=(U*Z-B*te)/Y}var W=M,H=A,ne=1,le=0;for(t=1;t<=9;t++)ne=ne*W,le=le+this.D[t]*ne;var Q=this.lat0+le*X0*1e5,ce=this.long0+H;return e.x=ce,e.y=Q,e}var Rq=["New_Zealand_Map_Grid","nzmg"];const Oq={init:kq,forward:Lq,inverse:Dq,names:Rq};function zq(){}function Fq(e){var t=e.x,n=e.y,i=Rn(t-this.long0),a=this.x0+this.a*i,u=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=a,e.y=u,e}function Bq(e){e.x-=this.x0,e.y-=this.y0;var t=Rn(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var Nq=["Miller_Cylindrical","mill"];const Vq={init:zq,forward:Fq,inverse:Bq,names:Nq};var jq=20;function Uq(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=fS(this.es)}function $q(e){var t,n,i=e.x,a=e.y;if(i=Rn(i-this.long0),this.sphere){if(!this.m)a=this.n!==1?Math.asin(this.n*Math.sin(a)):a;else for(var u=this.n*Math.sin(a),l=jq;l;--l){var s=(this.m*a+Math.sin(a)-u)/(this.m+Math.cos(a));if(a-=s,Math.abs(s)<En)break}t=this.a*this.C_x*i*(this.m+Math.cos(a)),n=this.a*this.C_y*a}else{var f=Math.sin(a),y=Math.cos(a);n=this.a*ov(a,f,y,this.en),t=this.a*i*y/Math.sqrt(1-this.es*f*f)}return e.x=t,e.y=n,e}function Hq(e){var t,n,i,a;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=Qf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Qf(Math.sin(t)/this.n)),i=Rn(i+this.long0),t=sp(t)):(t=pS(e.y/this.a,this.es,this.en),a=Math.abs(t),a<fn?(a=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(t)),i=Rn(n)):a-En<fn&&(i=this.long0)),e.x=i,e.y=t,e}var Gq=["Sinusoidal","sinu"];const Zq={init:Uq,forward:$q,inverse:Hq,names:Gq};function Wq(){}function qq(e){for(var t=e.x,n=e.y,i=Rn(t-this.long0),a=n,u=Math.PI*Math.sin(n);;){var l=-(a+Math.sin(a)-u)/(1+Math.cos(a));if(a+=l,Math.abs(l)<En)break}a/=2,Math.PI/2-Math.abs(n)<En&&(i=0);var s=.900316316158*this.a*i*Math.cos(a)+this.x0,f=1.4142135623731*this.a*Math.sin(a)+this.y0;return e.x=s,e.y=f,e}function Kq(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=Rn(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var a=Math.asin(n);return e.x=i,e.y=a,e}var Yq=["Mollweide","moll"];const Xq={init:Wq,forward:qq,inverse:Kq,names:Yq};function Qq(){Math.abs(this.lat1+this.lat2)<En||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=i_(this.es),this.e1=s_(this.es),this.e2=a_(this.es),this.e3=o_(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ph(this.e,this.sinphi,this.cosphi),this.ml1=Oo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<En?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ph(this.e,this.sinphi,this.cosphi),this.ml2=Oo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Oo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Jq(e){var t=e.x,n=e.y,i;if(this.sphere)i=this.a*(this.g-n);else{var a=Oo(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-a)}var u=this.ns*Rn(t-this.long0),l=this.x0+i*Math.sin(u),s=this.y0+this.rh-i*Math.cos(u);return e.x=l,e.y=s,e}function eK(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,n,i,a;this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var u=0;if(n!==0&&(u=Math.atan2(t*e.x,t*e.y)),this.sphere)return a=Rn(this.long0+u/this.ns),i=sp(this.g-n/this.a),e.x=a,e.y=i,e;var l=this.g-n/this.a;return i=Kx(l,this.e0,this.e1,this.e2,this.e3),a=Rn(this.long0+u/this.ns),e.x=a,e.y=i,e}var tK=["Equidistant_Conic","eqdc"];const nK={init:Qq,forward:Jq,inverse:eK,names:tK};function rK(){this.R=this.a}function iK(e){var t=e.x,n=e.y,i=Rn(t-this.long0),a,u;Math.abs(n)<=En&&(a=this.x0+this.R*i,u=this.y0);var l=Qf(2*Math.abs(n/Math.PI));(Math.abs(i)<=En||Math.abs(Math.abs(n)-fn)<=En)&&(a=this.x0,n>=0?u=this.y0+Math.PI*this.R*Math.tan(.5*l):u=this.y0+Math.PI*this.R*-Math.tan(.5*l));var s=.5*Math.abs(Math.PI/i-i/Math.PI),f=s*s,y=Math.sin(l),x=Math.cos(l),b=x/(y+x-1),M=b*b,A=b*(2/y-1),P=A*A,L=Math.PI*this.R*(s*(b-P)+Math.sqrt(f*(b-P)*(b-P)-(P+f)*(M-P)))/(P+f);i<0&&(L=-L),a=this.x0+L;var O=f+b;return L=Math.PI*this.R*(A*O-s*Math.sqrt((P+f)*(f+1)-O*O))/(P+f),n>=0?u=this.y0+L:u=this.y0-L,e.x=a,e.y=u,e}function sK(e){var t,n,i,a,u,l,s,f,y,x,b,M,A;return e.x-=this.x0,e.y-=this.y0,b=Math.PI*this.R,i=e.x/b,a=e.y/b,u=i*i+a*a,l=-Math.abs(a)*(1+u),s=l-2*a*a+i*i,f=-2*l+1+2*a*a+u*u,A=a*a/f+(2*s*s*s/f/f/f-9*l*s/f/f)/27,y=(l-s*s/3/f)/f,x=2*Math.sqrt(-y/3),b=3*A/y/x,Math.abs(b)>1&&(b>=0?b=1:b=-1),M=Math.acos(b)/3,e.y>=0?n=(-x*Math.cos(M+Math.PI/3)-s/3/f)*Math.PI:n=-(-x*Math.cos(M+Math.PI/3)-s/3/f)*Math.PI,Math.abs(i)<En?t=this.long0:t=Rn(this.long0+Math.PI*(u-1+Math.sqrt(1+2*(i*i-a*a)+u*u))/2/i),e.x=t,e.y=n,e}var aK=["Van_der_Grinten_I","VanDerGrinten","vandg"];const oK={init:rK,forward:iK,inverse:sK,names:aK};function lK(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function uK(e){var t=e.x,n=e.y,i=Math.sin(e.y),a=Math.cos(e.y),u=Rn(t-this.long0),l,s,f,y,x,b,M,A,P,L,O,V,z,B,U,Z,te,Y,W,H,ne,le,Q;return this.sphere?Math.abs(this.sin_p12-1)<=En?(e.x=this.x0+this.a*(fn-n)*Math.sin(u),e.y=this.y0-this.a*(fn-n)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=En?(e.x=this.x0+this.a*(fn+n)*Math.sin(u),e.y=this.y0+this.a*(fn+n)*Math.cos(u),e):(Y=this.sin_p12*i+this.cos_p12*a*Math.cos(u),Z=Math.acos(Y),te=Z?Z/Math.sin(Z):1,e.x=this.x0+this.a*te*a*Math.sin(u),e.y=this.y0+this.a*te*(this.cos_p12*i-this.sin_p12*a*Math.cos(u)),e):(l=i_(this.es),s=s_(this.es),f=a_(this.es),y=o_(this.es),Math.abs(this.sin_p12-1)<=En?(x=this.a*Oo(l,s,f,y,fn),b=this.a*Oo(l,s,f,y,n),e.x=this.x0+(x-b)*Math.sin(u),e.y=this.y0-(x-b)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=En?(x=this.a*Oo(l,s,f,y,fn),b=this.a*Oo(l,s,f,y,n),e.x=this.x0+(x+b)*Math.sin(u),e.y=this.y0+(x+b)*Math.cos(u),e):(M=i/a,A=Hy(this.a,this.e,this.sin_p12),P=Hy(this.a,this.e,i),L=Math.atan((1-this.es)*M+this.es*A*this.sin_p12/(P*a)),O=Math.atan2(Math.sin(u),this.cos_p12*Math.tan(L)-this.sin_p12*Math.cos(u)),O===0?W=Math.asin(this.cos_p12*Math.sin(L)-this.sin_p12*Math.cos(L)):Math.abs(Math.abs(O)-Math.PI)<=En?W=-Math.asin(this.cos_p12*Math.sin(L)-this.sin_p12*Math.cos(L)):W=Math.asin(Math.sin(u)*Math.cos(L)/Math.sin(O)),V=this.e*this.sin_p12/Math.sqrt(1-this.es),z=this.e*this.cos_p12*Math.cos(O)/Math.sqrt(1-this.es),B=V*z,U=z*z,H=W*W,ne=H*W,le=ne*W,Q=le*W,Z=A*W*(1-H*U*(1-U)/6+ne/8*B*(1-2*U)+le/120*(U*(4-7*U)-3*V*V*(1-7*U))-Q/48*B),e.x=this.x0+Z*Math.sin(O),e.y=this.y0+Z*Math.cos(O),e))}function cK(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,a,u,l,s,f,y,x,b,M,A,P,L,O,V,z,B,U,Z,te,Y,W;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*fn*this.a?void 0:(n=t/this.a,i=Math.sin(n),a=Math.cos(n),u=this.long0,Math.abs(t)<=En?l=this.lat0:(l=Qf(a*this.sin_p12+e.y*i*this.cos_p12/t),s=Math.abs(this.lat0)-fn,Math.abs(s)<=En?this.lat0>=0?u=Rn(this.long0+Math.atan2(e.x,-e.y)):u=Rn(this.long0-Math.atan2(-e.x,e.y)):u=Rn(this.long0+Math.atan2(e.x*i,t*this.cos_p12*a-e.y*this.sin_p12*i))),e.x=u,e.y=l,e)):(f=i_(this.es),y=s_(this.es),x=a_(this.es),b=o_(this.es),Math.abs(this.sin_p12-1)<=En?(M=this.a*Oo(f,y,x,b,fn),t=Math.sqrt(e.x*e.x+e.y*e.y),A=M-t,l=Kx(A/this.a,f,y,x,b),u=Rn(this.long0+Math.atan2(e.x,-1*e.y)),e.x=u,e.y=l,e):Math.abs(this.sin_p12+1)<=En?(M=this.a*Oo(f,y,x,b,fn),t=Math.sqrt(e.x*e.x+e.y*e.y),A=t-M,l=Kx(A/this.a,f,y,x,b),u=Rn(this.long0+Math.atan2(e.x,e.y)),e.x=u,e.y=l,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),O=Math.atan2(e.x,e.y),P=Hy(this.a,this.e,this.sin_p12),V=Math.cos(O),z=this.e*this.cos_p12*V,B=-z*z/(1-this.es),U=3*this.es*(1-B)*this.sin_p12*this.cos_p12*V/(1-this.es),Z=t/P,te=Z-B*(1+B)*Math.pow(Z,3)/6-U*(1+3*B)*Math.pow(Z,4)/24,Y=1-B*te*te/2-Z*te*te*te/6,L=Math.asin(this.sin_p12*Math.cos(te)+this.cos_p12*Math.sin(te)*V),u=Rn(this.long0+Math.asin(Math.sin(O)*Math.sin(te)/Math.cos(L))),W=Math.sin(L),l=Math.atan2((W-this.es*Y*this.sin_p12)*Math.tan(L),W*(1-this.es)),e.x=u,e.y=l,e))}var hK=["Azimuthal_Equidistant","aeqd"];const dK={init:lK,forward:uK,inverse:cK,names:hK};function fK(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function pK(e){var t,n,i,a,u,l,s,f,y=e.x,x=e.y;return i=Rn(y-this.long0),t=Math.sin(x),n=Math.cos(x),a=Math.cos(i),l=this.sin_p14*t+this.cos_p14*n*a,u=1,(l>0||Math.abs(l)<=En)&&(s=this.a*u*n*Math.sin(i),f=this.y0+this.a*u*(this.cos_p14*t-this.sin_p14*n*a)),e.x=s,e.y=f,e}function mK(e){var t,n,i,a,u,l,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=Qf(t/this.a),i=Math.sin(n),a=Math.cos(n),l=this.long0,Math.abs(t)<=En?(s=this.lat0,e.x=l,e.y=s,e):(s=Qf(a*this.sin_p14+e.y*i*this.cos_p14/t),u=Math.abs(this.lat0)-fn,Math.abs(u)<=En?(this.lat0>=0?l=Rn(this.long0+Math.atan2(e.x,-e.y)):l=Rn(this.long0-Math.atan2(-e.x,e.y)),e.x=l,e.y=s,e):(l=Rn(this.long0+Math.atan2(e.x*i,t*this.cos_p14*a-e.y*this.sin_p14*i)),e.x=l,e.y=s,e))}var gK=["ortho"];const yK={init:fK,forward:pK,inverse:mK,names:gK};var ds={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},mi={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function vK(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=fn-pi/2?this.face=ds.TOP:this.lat0<=-(fn-pi/2)?this.face=ds.BOTTOM:Math.abs(this.long0)<=pi?this.face=ds.FRONT:Math.abs(this.long0)<=fn+pi?this.face=this.long0>0?ds.RIGHT:ds.LEFT:this.face=ds.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function _K(e){var t={x:0,y:0},n,i,a,u,l,s,f={value:0};if(e.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):n=e.y,i=e.x,this.face===ds.TOP)u=fn-n,i>=pi&&i<=fn+pi?(f.value=mi.AREA_0,a=i-fn):i>fn+pi||i<=-(fn+pi)?(f.value=mi.AREA_1,a=i>0?i-Va:i+Va):i>-(fn+pi)&&i<=-pi?(f.value=mi.AREA_2,a=i+fn):(f.value=mi.AREA_3,a=i);else if(this.face===ds.BOTTOM)u=fn+n,i>=pi&&i<=fn+pi?(f.value=mi.AREA_0,a=-i+fn):i<pi&&i>=-pi?(f.value=mi.AREA_1,a=-i):i<-pi&&i>=-(fn+pi)?(f.value=mi.AREA_2,a=-i-fn):(f.value=mi.AREA_3,a=i>0?-i+Va:-i-Va);else{var y,x,b,M,A,P,L;this.face===ds.RIGHT?i=Ty(i,+fn):this.face===ds.BACK?i=Ty(i,3.14159265359):this.face===ds.LEFT&&(i=Ty(i,-fn)),M=Math.sin(n),A=Math.cos(n),P=Math.sin(i),L=Math.cos(i),y=A*L,x=A*P,b=M,this.face===ds.FRONT?(u=Math.acos(y),a=Hb(u,b,x,f)):this.face===ds.RIGHT?(u=Math.acos(x),a=Hb(u,b,-y,f)):this.face===ds.BACK?(u=Math.acos(-y),a=Hb(u,b,-x,f)):this.face===ds.LEFT?(u=Math.acos(-x),a=Hb(u,b,y,f)):(u=a=0,f.value=mi.AREA_0)}return s=Math.atan(12/Va*(a+Math.acos(Math.sin(a)*Math.cos(pi))-fn)),l=Math.sqrt((1-Math.cos(u))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(a))))),f.value===mi.AREA_1?s+=fn:f.value===mi.AREA_2?s+=Va:f.value===mi.AREA_3&&(s+=1.5*Va),t.x=l*Math.cos(s),t.y=l*Math.sin(s),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function bK(e){var t={lam:0,phi:0},n,i,a,u,l,s,f,y,x,b={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),n=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?b.value=mi.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(b.value=mi.AREA_1,n-=fn):e.x<0&&-e.x>=Math.abs(e.y)?(b.value=mi.AREA_2,n=n<0?n+Va:n-Va):(b.value=mi.AREA_3,n+=fn),x=Va/12*Math.tan(n),l=Math.sin(x)/(Math.cos(x)-1/Math.sqrt(2)),s=Math.atan(l),a=Math.cos(n),u=Math.tan(i),f=1-a*a*u*u*(1-Math.cos(Math.atan(1/Math.cos(s)))),f<-1?f=-1:f>1&&(f=1),this.face===ds.TOP)y=Math.acos(f),t.phi=fn-y,b.value===mi.AREA_0?t.lam=s+fn:b.value===mi.AREA_1?t.lam=s<0?s+Va:s-Va:b.value===mi.AREA_2?t.lam=s-fn:t.lam=s;else if(this.face===ds.BOTTOM)y=Math.acos(f),t.phi=y-fn,b.value===mi.AREA_0?t.lam=-s+fn:b.value===mi.AREA_1?t.lam=-s:b.value===mi.AREA_2?t.lam=-s-fn:t.lam=s<0?-s-Va:-s+Va;else{var M,A,P;M=f,x=M*M,x>=1?P=0:P=Math.sqrt(1-x)*Math.sin(s),x+=P*P,x>=1?A=0:A=Math.sqrt(1-x),b.value===mi.AREA_1?(x=A,A=-P,P=x):b.value===mi.AREA_2?(A=-A,P=-P):b.value===mi.AREA_3&&(x=A,A=P,P=-x),this.face===ds.RIGHT?(x=M,M=-A,A=x):this.face===ds.BACK?(M=-M,A=-A):this.face===ds.LEFT&&(x=M,M=A,A=-x),t.phi=Math.acos(-P)-fn,t.lam=Math.atan2(A,M),this.face===ds.RIGHT?t.lam=Ty(t.lam,-fn):this.face===ds.BACK?t.lam=Ty(t.lam,-3.14159265359):this.face===ds.LEFT&&(t.lam=Ty(t.lam,+fn))}if(this.es!==0){var L,O,V;L=t.phi<0?1:0,O=Math.tan(t.phi),V=this.b/Math.sqrt(O*O+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-V*V)/(this.one_minus_f*V)),L&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Hb(e,t,n,i){var a;return e<En?(i.value=mi.AREA_0,a=0):(a=Math.atan2(t,n),Math.abs(a)<=pi?i.value=mi.AREA_0:a>pi&&a<=fn+pi?(i.value=mi.AREA_1,a-=fn):a>fn+pi||a<=-(fn+pi)?(i.value=mi.AREA_2,a=a>=0?a-Va:a+Va):(i.value=mi.AREA_3,a+=fn)),a}function Ty(e,t){var n=e+t;return n<-3.14159265359?n+=T1:n>3.14159265359&&(n-=T1),n}var xK=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const AK={init:vK,forward:_K,inverse:bK,names:xK};var TI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],R0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],CL=.8487,IL=1.3523,ML=sh/5,wK=1/ML,_y=18,Yx=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},CK=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function IK(e,t,n,i){for(var a=t;i;--i){var u=e(a);if(a-=u,Math.abs(u)<n)break}return a}function MK(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function SK(e){var t=Rn(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*ML);i<0?i=0:i>=_y&&(i=_y-1),n=sh*(n-wK*i);var a={x:Yx(TI[i],n)*t,y:Yx(R0[i],n)};return e.y<0&&(a.y=-a.y),a.x=a.x*this.a*CL+this.x0,a.y=a.y*this.a*IL+this.y0,a}function EK(e){var t={x:(e.x-this.x0)/(this.a*CL),y:Math.abs(e.y-this.y0)/(this.a*IL)};if(t.y>=1)t.x/=TI[_y][0],t.y=e.y<0?-fn:fn;else{var n=Math.floor(t.y*_y);for(n<0?n=0:n>=_y&&(n=_y-1);;)if(R0[n][0]>t.y)--n;else if(R0[n+1][0]<=t.y)++n;else break;var i=R0[n],a=5*(t.y-i[0])/(R0[n+1][0]-i[0]);a=IK(function(u){return(Yx(i,u)-t.y)/CK(i,u)},a,En,100),t.x/=Yx(TI[n],a),t.y=(5*n+a)*Ba,e.y<0&&(t.y=-t.y)}return t.x=Rn(t.x+this.long0),t}var TK=["Robinson","robin"];const PK={init:MK,forward:SK,inverse:EK,names:TK};function kK(){this.name="geocent"}function LK(e){var t=fL(e,this.es,this.a);return t}function DK(e){var t=pL(e,this.es,this.a,this.b);return t}var RK=["Geocentric","geocentric","geocent","Geocent"];const OK={init:kK,forward:LK,inverse:DK,names:RK};var no={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},C0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function zK(){if(Object.keys(C0).forEach((function(n){if(typeof this[n]>"u")this[n]=C0[n].def;else{if(C0[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);C0[n].num&&(this[n]=parseFloat(this[n]))}C0[n].degrees&&(this[n]=this[n]*Ba)}).bind(this)),Math.abs(Math.abs(this.lat0)-fn)<En?this.mode=this.lat0<0?no.S_POLE:no.N_POLE:Math.abs(this.lat0)<En?this.mode=no.EQUIT:(this.mode=no.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function FK(e){e.x-=this.long0;var t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),a,u;switch(this.mode){case no.OBLIQ:u=this.sinph0*t+this.cosph0*n*i;break;case no.EQUIT:u=n*i;break;case no.S_POLE:u=-t;break;case no.N_POLE:u=t;break}switch(u=this.pn1/(this.p-u),a=u*n*Math.sin(e.x),this.mode){case no.OBLIQ:u*=this.cosph0*t-this.sinph0*n*i;break;case no.EQUIT:u*=t;break;case no.N_POLE:u*=-(n*i);break;case no.S_POLE:u*=n*i;break}var l,s;return l=u*this.cg+a*this.sg,s=1/(l*this.sw*this.h1+this.cw),a=(a*this.cg-u*this.sg)*this.cw*s,u=l*s,e.x=a*this.a,e.y=u*this.a,e}function BK(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},n,i,a;a=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*a,i=this.pn1*e.y*this.cw*a,e.x=n*this.cg+i*this.sg,e.y=i*this.cg-n*this.sg;var u=dl(e.x,e.y);if(Math.abs(u)<En)t.x=0,t.y=e.y;else{var l,s;switch(s=1-u*u*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/u+u/this.pn1),l=Math.sqrt(1-s*s),this.mode){case no.OBLIQ:t.y=Math.asin(l*this.sinph0+e.y*s*this.cosph0/u),e.y=(l-this.sinph0*Math.sin(t.y))*u,e.x*=s*this.cosph0;break;case no.EQUIT:t.y=Math.asin(e.y*s/u),e.y=l*u,e.x*=s;break;case no.N_POLE:t.y=Math.asin(l),e.y=-e.y;break;case no.S_POLE:t.y=-Math.asin(l);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var NK=["Tilted_Perspective","tpers"];const VK={init:zK,forward:FK,inverse:BK,names:NK};function jK(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function UK(e){var t=e.x,n=e.y,i,a,u,l;if(t=t-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var s=this.radius_p/dl(this.radius_p*Math.cos(n),Math.sin(n));if(a=s*Math.cos(t)*Math.cos(n),u=s*Math.sin(t)*Math.cos(n),l=s*Math.sin(n),(this.radius_g-a)*a-u*u-l*l*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-a,this.flip_axis?(e.x=this.radius_g_1*Math.atan(u/dl(l,i)),e.y=this.radius_g_1*Math.atan(l/i)):(e.x=this.radius_g_1*Math.atan(u/i),e.y=this.radius_g_1*Math.atan(l/dl(u,i)))}else this.shape==="sphere"&&(i=Math.cos(n),a=Math.cos(t)*i,u=Math.sin(t)*i,l=Math.sin(n),i=this.radius_g-a,this.flip_axis?(e.x=this.radius_g_1*Math.atan(u/dl(l,i)),e.y=this.radius_g_1*Math.atan(l/i)):(e.x=this.radius_g_1*Math.atan(u/i),e.y=this.radius_g_1*Math.atan(l/dl(u,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function $K(e){var t=-1,n=0,i=0,a,u,l,s;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*dl(1,i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*dl(1,n));var f=i/this.radius_p;if(a=n*n+f*f+t*t,u=2*this.radius_g*t,l=u*u-4*a*this.C,l<0)return e.x=Number.NaN,e.y=Number.NaN,e;s=(-u-Math.sqrt(l))/(2*a),t=this.radius_g+s*t,n*=s,i*=s,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+n*n)),a=n*n+i*i+t*t,u=2*this.radius_g*t,l=u*u-4*a*this.C,l<0)return e.x=Number.NaN,e.y=Number.NaN,e;s=(-u-Math.sqrt(l))/(2*a),t=this.radius_g+s*t,n*=s,i*=s,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var HK=["Geostationary Satellite View","Geostationary_Satellite","geos"];const GK={init:jK,forward:UK,inverse:$K,names:HK};var Q0=1.340264,J0=-.081106,e1=893e-6,t1=.003796,Xx=Math.sqrt(3)/2;function ZK(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function WK(e){var t=Rn(e.x-this.long0),n=e.y,i=Math.asin(Xx*Math.sin(n)),a=i*i,u=a*a*a;return e.x=t*Math.cos(i)/(Xx*(Q0+3*J0*a+u*(7*e1+9*t1*a))),e.y=i*(Q0+J0*a+u*(e1+t1*a)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function qK(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,n=12,i=e.y,a,u,l,s,f,y;for(y=0;y<n&&(a=i*i,u=a*a*a,l=i*(Q0+J0*a+u*(e1+t1*a))-e.y,s=Q0+3*J0*a+u*(7*e1+9*t1*a),i-=f=l/s,!(Math.abs(f)<t));++y);return a=i*i,u=a*a*a,e.x=Xx*e.x*(Q0+3*J0*a+u*(7*e1+9*t1*a))/Math.cos(i),e.y=Math.asin(Math.sin(i)/Xx),e.x=Rn(e.x+this.long0),e}var KK=["eqearth","Equal Earth","Equal_Earth"];const YK={init:ZK,forward:WK,inverse:qK,names:KK};var L1=1e-10;function XK(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<L1)throw new Error;this.es?(this.en=fS(this.es),this.m1=ov(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=JK,this.forward=QK):(Math.abs(this.phi1)+L1>=fn?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=tY,this.forward=eY)}function QK(e){var t=Rn(e.x-(this.long0||0)),n=e.y,i,a,u;return i=this.am1+this.m1-ov(n,a=Math.sin(n),u=Math.cos(n),this.en),a=u*t/(i*Math.sqrt(1-this.es*a*a)),e.x=i*Math.sin(a),e.y=this.am1-i*Math.cos(a),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function JK(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i,a;if(n=dl(e.x,e.y=this.am1-e.y),a=pS(this.am1+this.m1-n,this.es,this.en),(t=Math.abs(a))<fn)t=Math.sin(a),i=n*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(a);else if(Math.abs(t-fn)<=L1)i=0;else throw new Error;return e.x=Rn(i+(this.long0||0)),e.y=sp(a),e}function eY(e){var t=Rn(e.x-(this.long0||0)),n=e.y,i,a;return a=this.cphi1+this.phi1-n,Math.abs(a)>L1?(e.x=a*Math.sin(i=t*Math.cos(n)/a),e.y=this.cphi1-a*Math.cos(i)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function tY(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i=dl(e.x,e.y=this.cphi1-e.y);if(n=this.cphi1+this.phi1-i,Math.abs(n)>fn)throw new Error;return Math.abs(Math.abs(n)-fn)<=L1?t=0:t=i*Math.atan2(e.x,e.y)/Math.cos(n),e.x=Rn(t+(this.long0||0)),e.y=sp(n),e}var nY=["bonne","Bonne (Werner lat_1=90)"];const rY={init:XK,names:nY};function iY(e){e.Proj.projections.add(fx),e.Proj.projections.add(px),e.Proj.projections.add(JZ),e.Proj.projections.add(lW),e.Proj.projections.add(pW),e.Proj.projections.add(_W),e.Proj.projections.add(IW),e.Proj.projections.add(PW),e.Proj.projections.add(OW),e.Proj.projections.add(VW),e.Proj.projections.add(rq),e.Proj.projections.add(uq),e.Proj.projections.add(pq),e.Proj.projections.add(bq),e.Proj.projections.add(Iq),e.Proj.projections.add(Pq),e.Proj.projections.add(Oq),e.Proj.projections.add(Vq),e.Proj.projections.add(Zq),e.Proj.projections.add(Xq),e.Proj.projections.add(nK),e.Proj.projections.add(oK),e.Proj.projections.add(dK),e.Proj.projections.add(yK),e.Proj.projections.add(AK),e.Proj.projections.add(PK),e.Proj.projections.add(OK),e.Proj.projections.add(VK),e.Proj.projections.add(GK),e.Proj.projections.add(YK),e.Proj.projections.add(rY)}Nl.defaultDatum="WGS84";Nl.Proj=ah;Nl.WGS84=new Nl.Proj("WGS84");Nl.Point=$y;Nl.toPoint=mL;Nl.defs=ko;Nl.nadgrid=tZ;Nl.transform=qx;Nl.mgrs=yZ;Nl.version="__VERSION__";iY(Nl);const vS=Vo.createLogger().setNamespace("map:"+Mu.CRS,2),PP=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}],_S=e=>jl(["map:core",e,Mu.CRS],()=>(Mn(vS,e,"store").debug("init"),{crs:"4326",items:PP.slice(),item:PP[0]}))();function SL(e){const t=_S(e);function n({longitude:i,latitude:a},u=!1){const l=t.item||{default:!0,unit:"degree"};return PI({longitude:i,latitude:a},l,u)}return{format:n}}function PI({longitude:e,latitude:t},n,i=!1){const a={longitude:"0",latitude:"0"};return!e||!t||(n&&!n.default&&n.proj4js&&([e,t]=Nl(n.proj4js,[e,t])),n&&n.unit==="meter"?(a.longitude=e.toFixed(0),a.latitude=t.toFixed(0)):i?(a.longitude=aY(+e),a.latitude=sY(+t)):(a.longitude=e.toFixed(6),a.latitude=t.toFixed(6))),a}const sY=e=>`${bS(e)} ${xS(e)}' ${parseFloat(EL(e).toFixed(2))}" ${e>0?"N":"S"}`,aY=e=>`${bS(e)} ${xS(e)}' ${parseFloat(EL(e).toFixed(2))}" ${e>0?"E":"W"}`,bS=e=>e===0?0:Math.floor(Math.abs(e)),xS=e=>e===0?0:Math.floor((Math.abs(e)-Math.floor(Math.abs(e)))*60),EL=e=>e===0?0:(Math.abs(e)-bS(e)-xS(e)/60)*3600,Py={setItems:"map:crs:set-items",setCurrent:"map:crs:set-current"},AS=(e,{onChange:t}={})=>{const n=fh(e),i=_S(e),a=Ca(i.items);function u(s){Mn(vS,e,"store").debug("setCrsItems",a),i.items=s,n.emit(Py.setItems,s),a.value=[...s]}function l(s){a.value=s,t&&t(s)}return Er(()=>{n.on(Py.setItems,l)}),ha(()=>{n.off(Py.setItems,l)}),{items:a,setItems:u}},oY=(e,{onChange:t}={})=>{const n=fh(e),i=_S(e),a=Ca(i.item);function u(f){Mn(vS,e,"store").debug("setCrs",f),i.crs=f||"4326";const y=i.items.find(x=>x.epsg==f);i.item=y,n.emit(Py.setCurrent,y)}function l(f){a.value=f,t&&t(f)}Er(()=>{n.on(Py.setCurrent,l)}),ha(()=>{n.off(Py.setCurrent,l)});const s=Wt(()=>{var f;return((f=a.value)==null?void 0:f.unit)==="degree"});return{item:a,setItem:u,isCrsDegree:s}},lY={class:"crs-container"},uY={class:"grow"},cY={class:"crs-item-header"},hY={class:"crs-item-header__title"},dY={class:"crs-item-header__action"},fY=["onClick"],pY={class:"crs-item"},mY={key:0},gY={key:1},yY={class:"crs-item__add"},vY=An({__name:"CrsControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean}},{...Ri}),setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Lr(t),{trans:a,setLocaleDefault:u}=Oi(n.value);u({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[l,s]=Bl(t.show);function f(){s(!l.value)}const{items:y,setItems:x}=AS(n.value),b=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],M={delete:rp,plus:ip},A=L=>{x(y.value.filter(O=>O.epsg!==L.epsg))},P=()=>{y.value.push({name:"",unit:"degree",epsg:""}),x(y.value)};return(L,O)=>(xe(),Rt($i,Ui(Di(re(i))),{btn:nt(()=>[je(ri,{onClick:yr(f,["stop"]),tooltip:re(a)("map.crs-control.title")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(_9)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:nt(V=>[re(l)?(xe(),Rt(re(vc),Qn({key:0,height:200,width:400},V,{show:re(l),"onUpdate:show":O[1]||(O[1]=z=>yi(l)?l.value=z:null),title:re(a)("map.crs-control.title")}),{default:nt(()=>[Pe("div",lY,[Pe("div",uY,[(xe(!0),et(Fn,null,Or(re(y),z=>(xe(),Rt(re(_I),{key:z.epsg,selected:!1},{header:nt(()=>[Pe("div",cY,[Pe("div",hY,an(z.name),1),Pe("div",dY,[z.default?rn("",!0):(xe(),et("button",{key:0,class:"clickable",onClick:yr(B=>A(z),["stop"])},[je(re(Pn),{size:"16",type:"mdi",path:M.delete},null,8,["path"])],8,fY))])])]),default:nt(()=>[Pe("div",pY,[Pe("div",null,[je(re(gi),{readonly:z.default,modelValue:z.name,"onUpdate:modelValue":B=>z.name=B,label:re(a)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),Pe("div",null,[je(re(gi),{readonly:z.default,modelValue:z.epsg,"onUpdate:modelValue":B=>z.epsg=B,label:re(a)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),z.default?rn("",!0):(xe(),et("div",mY,[je(re(gi),{modelValue:z.proj4js,"onUpdate:modelValue":B=>z.proj4js=B,label:re(a)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),z.default?rn("",!0):(xe(),et("div",gY,[je(re(Kf),{modelValue:z.unit,"onUpdate:modelValue":B=>z.unit=B,label:re(a)("map.crs-control.field.unit"),items:b},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),Pe("div",yY,[Pe("button",{class:"layer-item__button clickable",onClick:O[0]||(O[0]=yr(z=>P(),["stop"]))},[je(re(Pn),{size:"16",type:"mdi",path:M.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):rn("",!0)]),default:nt(()=>[Sn(L.$slots,"default",{},void 0,!0)]),_:3},16))}}),_Y=_n(vY,[["__scopeId","data-v-e3b977f7"]]);let bY=class{get id(){return this._id}constructor(){this._id=`${wu()}`}},wS=class extends bY{constructor(t,n="map"){super(),this.event_map_type=t,this.type_select=n,this.options={}}setHandler(t){return this.handler=t,this}addToMap(t){return this.handler&&t.on(this.event_map_type,this.handler),this}removeFromMap(t){return this.handler&&t.off(this.event_map_type,this.handler),this}};class xY extends wS{constructor(){super("click","map"),this._originalHandlers={},this.setClassPointer("pointer")}get name(){return"EventBboxRanger"}setClassPointer(t){this.options.classPointer=t}setHandler(t){return this.handler=t,this}addToMap(t){if(!this.handler)return this;this.options.classPointer&&t.getCanvas().classList.add(this.options.classPointer);try{this._originalHandlers={scrollZoom:t.scrollZoom.isEnabled(),dragRotate:t.dragRotate.isEnabled(),touchZoomRotate:t.touchZoomRotate.isEnabled(),doubleClickZoom:t.doubleClickZoom.isEnabled(),dragPan:t.dragPan.isEnabled(),boxZoom:t.boxZoom.isEnabled()},t.scrollZoom.isEnabled()&&t.scrollZoom.disable(),t.dragRotate.isEnabled()&&t.dragRotate.disable(),t.touchZoomRotate.isEnabled()&&t.touchZoomRotate.disable(),t.doubleClickZoom.isEnabled()&&t.doubleClickZoom.disable(),t.dragPan.isEnabled()&&t.dragPan.disable(),t.boxZoom.isEnabled()&&t.boxZoom.disable(),this.map_ranger=AY(t.getCanvasContainer(),this.handler)}catch(n){console.error("Error disabling map controls:",n)}return this}removeFromMap(t){this.options.classPointer&&t.getCanvas().classList.remove(this.options.classPointer);try{this._originalHandlers.scrollZoom!==!1&&t.scrollZoom.enable(),this._originalHandlers.dragRotate!==!1&&t.dragRotate.enable(),this._originalHandlers.touchZoomRotate!==!1&&t.touchZoomRotate.enable(),this._originalHandlers.doubleClickZoom!==!1&&t.doubleClickZoom.enable(),this._originalHandlers.dragPan!==!1&&t.dragPan.enable(),this._originalHandlers.boxZoom!==!1&&t.boxZoom.enable()}catch(n){console.error("Error re-enabling map controls:",n)}return this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),this}}function AY(e,t){let n,i,a;function u(M){const A=e.getBoundingClientRect();return{x:M.clientX-A.left-e.clientLeft,y:M.clientY-A.top-e.clientTop}}function l(M){M.preventDefault(),M.stopPropagation(),n=u(M),document.addEventListener("mousemove",s),document.addEventListener("mouseup",f),document.addEventListener("keydown",y)}function s(M){M.preventDefault(),M.stopPropagation(),i=u(M),a||(a=document.createElement("div"),a.classList.add("boxdraw"),e.appendChild(a));const A=Math.min(n.x,i.x),P=Math.max(n.x,i.x),L=Math.min(n.y,i.y),O=Math.max(n.y,i.y);a.style.transform=`translate(${A}px, ${L}px)`,a.style.width=P-A+"px",a.style.height=O-L+"px"}function f(M){M.preventDefault(),M.stopPropagation(),x([n,u(M)])}function y(M){M.keyCode===27&&x()}function x(M){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",f),document.removeEventListener("keydown",y),a&&(a.parentNode&&a.parentNode.removeChild(a),a=void 0),M&&t&&t(M)}function b(){e.removeEventListener("mousedown",l,!0),t=void 0,x()}return e.addEventListener("mousedown",l,!0),e.style.cursor="crosshair",{destroy:b}}class l_ extends wS{get name(){return"EventClick"}constructor(t="map"){super("click",t),this.setClassPointer("pointer")}setClassPointer(t){this.options.classPointer=t}addToMap(t){return this.options.classPointer&&t.getCanvas().classList.add(this.options.classPointer),this.handler&&(t.on("click",this.handler),t.on("touchstart",this.handler)),this}removeFromMap(t){return this.options.classPointer&&t.getCanvas().classList.remove(this.options.classPointer),this.handler&&(t.off("click",this.handler),t.off("touchstart",this.handler)),this}}class wY extends wS{get name(){return"EventMouseMove"}constructor(t="map"){super("mousemove",t),this.setClassPointer("pointer")}setClassPointer(t){this.options.classPointer=t}addToMap(t){return this.options.classPointer&&t.getCanvas().classList.add(this.options.classPointer),this.handler&&t.on("mousemove",this.handler),this}removeFromMap(t){return this.options.classPointer&&t.getCanvas().classList.remove(this.options.classPointer),this.handler&&t.off("mousemove",this.handler),this}}const CY={class:"event-group-container"},IY={class:"group-title"},MY={class:"event-list"},SY={class:"status"},EY={key:0,class:"status-icon active"},TY={key:1,class:"status-icon inactive"},PY={name:"event-management-control"},kY=An({...PY,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean}},{...Ri}),setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Lr(t),{trans:a,setLocaleDefault:u}=Oi(n.value),l=Ca([]),s=Ca({}),f=fh(n.value);Er(()=>{f.on(ac.setCurrent,x)}),ha(()=>{f.off(ac.setCurrent,x)});const{getCurrent:y}=iL(n.value,{onChange:(O=[])=>{l.value=O.slice()}});function x(){s.value=y()}u({map:{"event-control":{title:"Event Control",field:{name:"Name",id:"ID",from:"From"}}}});const b={icon:n9},[M,A]=Bl(t.show);function P(O,V){const z=O[V.event_map_type];return z&&z.id===V.id}const L=Wt(()=>{const O={};for(const V of l.value){const z=V.event_map_type;O[z]||(O[z]=[]),O[z].push(V)}return O});return(O,V)=>(xe(),Rt($i,Ui(Di(re(i))),{btn:nt(()=>[re(M)?rn("",!0):(xe(),Rt(ri,{key:0,onClick:V[0]||(V[0]=yr(z=>re(A)(),["stop"])),active:re(M),tooltip:re(a)("map.event-control.title")},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:b.icon},null,8,["path"])]),_:1},8,["active","tooltip"]))]),draggable:nt(z=>[je(re(n_),{containerId:z.containerId,show:re(M),"onUpdate:show":V[1]||(V[1]=B=>yi(M)?M.value=B:null),title:re(a)("map.event-control.title")},{title:nt(()=>[Wr(an(re(a)("map.event-control.title")),1)]),default:nt(()=>[Pe("div",CY,[(xe(!0),et(Fn,null,Or(L.value,(B,U)=>(xe(),et("div",{key:U,class:"event-group"},[Pe("h2",IY,an(U),1),Pe("ul",MY,[(xe(!0),et(Fn,null,Or(B,Z=>(xe(),et("li",{key:Z.id,class:ii(["event-item",{active:P(s.value,Z)}])},[Pe("div",null,[Pe("strong",null,an(re(a)("map.event-control.field.id"))+":",1),Wr(" "+an(Z.id),1)]),Pe("div",null,[Pe("strong",null,an(re(a)("map.event-control.field.name"))+":",1),Wr(" "+an(Z.name||"N/A"),1)]),Pe("div",null,[Pe("strong",null,an(re(a)("map.event-control.field.from"))+":",1),Wr(" "+an(Z.from||"N/A"),1)]),Pe("div",SY,[P(s.value,Z)?(xe(),et("span",EY," ang kch hot")):(xe(),et("span",TY," Khng kch hot"))])],2))),128))])]))),128))])]),_:2},1032,["containerId","show","title"])]),default:nt(()=>[Sn(O.$slots,"default",{},void 0,!0)]),_:3},16))}}),LY=_n(kY,[["__scopeId","data-v-8e4843fd"]]),pC={};function DY(e){const t=Ca({}),n=f=>{if(!f)return;const y=f.listImages(),x={};y.forEach(b=>{const M=f.getImage(b);M&&(x[b]=M)}),t.value=x};let i;const a=f=>{f&&(i=()=>n(f),f.on("styledata",i),f.on("idle",i))},u=f=>{f&&i&&(f.off("styledata",i),f.off("idle",i))};Er(()=>{lo(e,f=>{n(f),a(f)})}),yh(()=>{lo(e,f=>{u(f)})});const l=()=>{lo(e,f=>{n(f),a(f)})};function s(f,y){if(pC[f])return pC[f];const x=y.data,b=RY(x),M=document.createElement("canvas"),A=M.getContext("2d");M.width=x.width,M.height=x.height,A.putImageData(b,0,0);const P=M.toDataURL("image/png");return pC[f]=P,P}return{images:t,reload:l,toDataURL:s}}function RY(e){const{width:t,height:n,data:i}=e,a=new Uint8ClampedArray(i);return new ImageData(a,t,n)}async function OY(e,t,n,i={}){const a=await e.loadImage(n);return e.hasImage(t)||e.addImage(t,a.data,i),!0}const TL=Vo.createLogger().setNamespace("map:"+Mu.IMAGE,2),zY=e=>jl(["map:core",e,Mu.IMAGE],()=>(Mn(TL,e,"store").debug("init"),{images:{}}))(),FY=e=>{const t=zY(e),n=wI(e);return{async addImage(i,a,u,l={}){return Mn(TL,i,"store").debug("addImage",a,u,l),t.images[a]={path:u,id:a,name:a,is_sprite:!1,category:"custom"},n.getMap(async f=>OY(f,a,u,l))}}},BY=An({__name:"FullScreenControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},type:{}},{...Ri,type:"body"}),setup(e){const t={fullscreen:m9,exitFullscreen:g9},n=e,{callMap:i,mapId:a,moduleContainerProps:u}=Lr(n),{trans:l,setLocaleDefault:s}=Oi(a.value);s({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:f,toggle:y}=jB(n.type=="body"?document.querySelector("body"):x());function x(b){return i(M=>{if(b||(b=M.getContainer()),b.classList.contains("map-container")||b.tagName==="BODY")return b;b=x(b.parentElement)}),b}return(b,M)=>(xe(),Rt($i,Ui(Di(re(u))),{btn:nt(()=>[je(ri,{icon:"",title:re(f)?re(l)("map.action.fullscreen-control-exit"):re(l)("map.action.fullscreen-control-enter"),onClick:M[0]||(M[0]=A=>re(y)())},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(f)?t.exitFullscreen:t.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:nt(()=>[Sn(b.$slots,"default")]),_:3},16))}}),NY=An({__name:"GeoLocateControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const{coords:t,error:n,resume:i,pause:a}=UB({immediate:!1}),u=e,{mapId:l,callMap:s,moduleContainerProps:f}=Lr(u),{trans:y,setLocaleDefault:x}=Oi(l.value);x({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const b=Kt(!1),M=Kt(),A=Kt(0);let P,L,O=Kt(void 0),V=Kt(void 0);const z=Wt(()=>n.value?l9:rv),B=Wt(()=>n.value?n.value.message||y.value("map.action.geolocate-control-location-not-available"):y.value("map.action.geolocate-control-find-my-location"));xi(t,le=>{le.longitude==Number.POSITIVE_INFINITY||le.latitude==Number.POSITIVE_INFINITY||(M.value=[le.longitude,le.latitude],A.value=le.accuracy,M.value&&te())});async function U(){s(le=>{if(!b.value){b.value=!0,i().then(Q=>{if(Q){const ce=Q.coords,K=[ce.longitude,ce.latitude];le.flyTo({center:K,zoom:14})}});return}if(ne(le,Rm(t))){le.flyTo({center:M.value,zoom:14});return}a(),b.value=!1,M.value=void 0,Z()})}RB(()=>{Z()});function Z(){s(le=>{le.off("zoom",W)}),O.value&&O.value.remove(),V.value&&V.value.remove()}zB(()=>{P||(P=H("div","mapboxgl-user-location"),P.classList.add("mapboxgl-user-location"),P.appendChild(H("div","mapboxgl-user-location-dot")),P.appendChild(H("div","mapboxgl-user-location-heading"))),L||(L=H("div","mapboxgl-user-location-accuracy-circle"))});function te(){s(le=>{O.value?O.value.setLngLat(M.value).addTo(le):O.value=new zm.Marker({element:P,rotationAlignment:"map",pitchAlignment:"map"}).setLngLat(M.value).addTo(le),V.value?V.value.setLngLat(M.value).addTo(le):V.value=new zm.Marker({element:L,pitchAlignment:"map"}).setLngLat(M.value).addTo(le),le.on("zoom",W),Y(le)})}function Y(le){if(!A.value||A.value<=1){L.style.width="1px",L.style.height="1px";return}const Q=le.getContainer().getBoundingClientRect().height/2,ce=le.unproject([0,Q]),K=le.unproject([100,Q]),Le=ce.distanceTo(K)/100,Ue=Math.ceil(2*A.value/Le);L.style.width=`${Ue}px`,L.style.height=`${Ue}px`}function W(le){Y(le.target)}const H=function(le,Q,ce){const K=window.document.createElement(le);return Q!==void 0&&(K.className=Q),K};function ne(le,Q){const ce=le.getBounds();return ce&&(Q.longitude<ce.getWest()||Q.longitude>ce.getEast()||Q.latitude<ce.getSouth()||Q.latitude>ce.getNorth())}return(le,Q)=>(xe(),Rt($i,Ui(Di(re(f))),{btn:nt(()=>[je(ri,{disabled:!!re(n),icon:z.value,tooltip:B.value,active:b.value,onClick:yr(U,["stop"])},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:z.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:nt(()=>[Sn(le.$slots,"default")]),_:3},16))}}),VY=An({__name:"GlobeControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=e,n=Kt("mercator"),{callMap:i,mapId:a,moduleContainerProps:u}=Lr(t,x,b),{trans:l,setLocaleDefault:s}=Oi(a.value);s({map:{"global-control":{title:"Toggle projection"}}});function f(){i(M=>{var A;n.value==="mercator"||!n.value?M.setProjection({type:"globe"}):M.setProjection({type:"mercator"}),n.value=(A=M.getProjection())==null?void 0:A.type})}let y;function x(M){y=()=>{var A;n.value=(A=M.getProjection())==null?void 0:A.type},M.on("styledata",y)}function b(M){y&&M.off("styledata",y)}return(M,A)=>(xe(),Rt($i,Ui(Di(re(u))),{btn:nt(()=>[je(ri,{onClick:yr(f,["stop"]),active:n.value==="globe",tooltip:re(l)("map.global-control.title")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(F9)},null,8,["path"])]),_:1},8,["active","tooltip"])]),default:nt(()=>[Sn(M.$slots,"default")]),_:3},16))}}),jY={class:"setting-container"},UY={class:"setting-field-container"},$Y={class:"setting-center-container"},HY=An({__name:"GotoControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean}},{...Ri}),setup(e){const t=e,[n,i]=Bl(t.show),{callMap:a,mapId:u,moduleContainerProps:l}=Lr(t),{trans:s,setLocaleDefault:f}=Oi(u.value);f({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center"},btn:{apply:"Go to"}}}});function y(){i(!n.value),n.value&&a(M=>{x.value.zoom=M.getZoom(),x.value.center=[+M.getCenter().lng.toFixed(6),+M.getCenter().lat.toFixed(6)]})}const x=Kt({center:[0,0]}),b=()=>{a(M=>{x.value.zoom&&M.setZoom(x.value.zoom),x.value.center&&M.setCenter(x.value.center)})};return(M,A)=>(xe(),Rt($i,Ui(Di(re(l))),{btn:nt(()=>[je(ri,{onClick:A[0]||(A[0]=yr(P=>y(),["stop"])),tooltip:re(s)("map.goto-control.title")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(GM)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:nt(P=>[re(n)?(xe(),Rt(re(vc),Qn({key:0,height:300,width:400},P,{show:re(n),"onUpdate:show":A[5]||(A[5]=L=>yi(n)?n.value=L:null),title:re(s)("map.goto-control.title")}),{default:nt(()=>[Pe("div",jY,[Pe("div",UY,[Pe("div",null,[Pe("label",null,an(re(s)("map.goto-control.field.center")),1),Pe("div",$Y,[je(re(gi),{modelValue:x.value.center[0],"onUpdate:modelValue":A[1]||(A[1]=L=>x.value.center[0]=L),type:"number",step:"0.0000001"},null,8,["modelValue"]),je(re(gi),{modelValue:x.value.center[1],"onUpdate:modelValue":A[2]||(A[2]=L=>x.value.center[1]=L),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),Pe("div",null,[je(re(gi),{label:re(s)("map.goto-control.field.zoom"),modelValue:x.value.zoom,"onUpdate:modelValue":A[3]||(A[3]=L=>x.value.zoom=L),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),je(re(Br),{class:"btn-container",onClick:A[4]||(A[4]=L=>b())},{default:nt(()=>[Wr(an(re(s)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):rn("",!0)]),default:nt(()=>[Sn(M.$slots,"default")]),_:3},16))}}),GY=An({__name:"HomeControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},zoom:{},center:{}},{...Ri}),setup(e){const t=e,n=Kt({lat:0,lng:0}),i=Kt(t.zoom||0),{callMap:a,mapId:u,moduleContainerProps:l}=Lr(t,x),{trans:s,setLocaleDefault:f}=Oi(u.value);f({map:{home:{title:"Default view"}}});function y(){a(b=>{b.setZoom(i.value),b.setCenter(n.value)})}function x(b){t.zoom!=null?i.value=t.zoom:i.value=b.getZoom(),t.center!=null?(n.value.lat=t.center[1],n.value.lng=t.center[0]):n.value=b.getCenter()}return(b,M)=>(xe(),Rt($i,Ui(Di(re(l))),{btn:nt(()=>[je(ri,{onClick:y,tooltip:re(s)("map.home.title")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(v9)},null,8,["path"])]),_:1},8,["tooltip"])]),default:nt(()=>[Sn(b.$slots,"default")]),_:3},16))}}),ZY={class:"button-container mouse-coordinates-container"},WY={key:0,class:"mouse-coordinates-part zoom-part"},qY={class:"mouse-coordinates-zoom"},KY={title:"Current Zoom",class:"icon"},YY={style:{"margin-left":"4px"}},XY={key:1,class:"mouse-coordinates-part coordinates-part"},QY={class:"mouse-coordinates-point"},JY=["innerHTML"],eX=["title"],tX={key:2,class:"mouse-coordinates-part crs-part"},nX={class:"mouse-coordinates-point"},rX=["value"],iX={key:3,class:"mouse-coordinates-part scale-part"},sX=An({__name:"MouseCoordinatesControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},hideZoom:{type:Boolean},hideCrsSelect:{type:Boolean},hideScale:{type:Boolean},hideCoordinates:{type:Boolean}},{...Ri,hideZoom:!1,hideCrsSelect:!1,hideScale:!1,hideCoordinates:!1}),setup(e){const t=e,n={icon:GM,zoom:x9,change:t9},i=Kt(),a=Kt(""),u=Kt({latitude:0,longitude:0}),l=Kt(0),s=Kt(!1),{callMap:f,mapId:y,moduleContainerProps:x}=Lr(t,V,z),{format:b}=SL(y.value),{items:M}=AS(y.value),{item:A,setItem:P,isCrsDegree:L}=oY(y.value,{onChange:()=>{te()}}),O=Wt({get(){var Q;return(Q=A.value)==null?void 0:Q.epsg},set(Q){return P(Q)}});function V(Q){l.value=+Q.getZoom().toFixed(2),Q.on("zoomend",Y),Q.on("mousemove",U),Q.on("move",B),l.value=+Q.getZoom().toFixed(2);let ce=Q.getCenter();u.value.latitude=ce.lat,u.value.longitude=ce.lng,te(),fl(()=>{W(Q,i.value)})}function z(Q){Q.off("zoomend",Y),Q.off("mousemove",U),Q.off("move",B)}function B(){f(Q=>{W(Q,i.value)})}const U=Om.debounce(function(Q){let ce=[Q.lngLat.lng,Q.lngLat.lat];u.value.latitude=ce[1],u.value.longitude=ce[0],te()},15);function Z(){s.value=!s.value,te()}function te(){const Q=b(u.value,s.value);a.value=Q.longitude+", &nbsp;"+Q.latitude}function Y(){f(Q=>{l.value=+Q.getZoom().toFixed(2)})}function W(Q,ce){if(t.hideScale)return;const K=100,Le=Q.getContainer().clientHeight/2,Ue=Q.unproject([0,Le]),Be=Q.unproject([K,Le]),tt=Ue.distanceTo(Be);tt>=1e3?H(ce,tt/1e3,"km"):H(ce,tt,"m")}function H(Q,ce,K){const Le=le(ce);Q&&(Q.innerHTML=`${Le}&nbsp;${K}`)}function ne(Q){const ce=Math.pow(10,Math.ceil(-Math.log(Q)/Math.LN10));return Math.round(Q*ce)/ce}function le(Q){const ce=Math.pow(10,`${Math.floor(Q)}`.length-1);let K=Q/ce;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:ne(K),ce*K}return(Q,ce)=>(xe(),Rt($i,Ui(Di(re(x))),{btn:nt(()=>[Pe("div",ZY,[Q.hideZoom?rn("",!0):(xe(),et("div",WY,[Pe("div",qY,[Pe("span",KY,[je(re(Pn),{size:16,type:"mdi",path:n.zoom},null,8,["path"])]),Pe("div",YY,an(l.value),1)])])),Q.hideCoordinates?rn("",!0):(xe(),et("div",XY,[Pe("div",QY,[Pe("div",{style:qr([{"margin-left":"4px"},{"min-width":s.value?"220px":"100px"}]),class:"selectable",innerHTML:a.value},null,12,JY),re(L)?(xe(),et("i",{key:0,title:s.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:Z,class:"icon icon-clickable"},[je(re(Pn),{size:16,type:"mdi",path:n.change},null,8,["path"])],8,eX)):rn("",!0)])])),Q.hideCrsSelect?rn("",!0):(xe(),et("div",tX,[Pe("div",nX,[pl(Pe("select",{"onUpdate:modelValue":ce[0]||(ce[0]=K=>O.value=K),class:"crs-select",style:{width:"70px"}},[(xe(!0),et(Fn,null,Or(re(M),K=>(xe(),et("option",{value:K.epsg,key:K.epsg},an(K.name||K.epsg),9,rX))),128))],512),[[kA,O.value]])])])),Q.hideScale?rn("",!0):(xe(),et("div",iX,[Pe("div",{ref_key:"scale",ref:i,class:"scale-custom"},null,512)]))])]),_:1},16))}}),aX=_n(sX,[["__scopeId","data-v-980131b6"]]),oX={class:"setting-container"},lX={class:"setting-field-container"},uX={class:"setting-center-container"},cX=An({__name:"SettingControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean}},{...Ri}),setup(e){const t=e,[n,i]=Bl(t.show),{callMap:a,mapId:u,moduleContainerProps:l}=Lr(t),{trans:s,setLocaleDefault:f}=Oi(u.value);f({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function y(){i(!n.value),n.value&&a(M=>{x.value.zoom=M.getZoom(),x.value.center=[+M.getCenter().lng.toFixed(6),+M.getCenter().lat.toFixed(6)],x.value.sprite=M.getStyle().sprite,x.value.glyphs=M.getStyle().glyphs})}const x=Kt({zoom:void 0,center:[0,0],sprite:void 0,glyphs:void 0}),b=()=>{a(M=>{x.value.zoom&&M.setZoom(x.value.zoom),x.value.center&&M.setCenter(x.value.center);const A=M.getStyle();x.value.sprite&&(A.sprite=x.value.sprite),x.value.glyphs&&(A.glyphs=x.value.glyphs),M.setStyle(A)})};return(M,A)=>(xe(),Rt($i,Ui(Di(re(l))),{btn:nt(()=>[je(ri,{onClick:A[0]||(A[0]=yr(P=>y(),["stop"])),tooltip:re(s)("map.setting-control.title")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(s9)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:nt(P=>[re(n)?(xe(),Rt(re(vc),Qn({key:0,height:400,width:400},P,{show:re(n),"onUpdate:show":A[7]||(A[7]=L=>yi(n)?n.value=L:null),title:re(s)("map.setting-control.title")}),{default:nt(()=>[Pe("div",oX,[Pe("div",lX,[Pe("div",null,[Pe("label",null,an(re(s)("map.setting-control.field.center")),1),Pe("div",uX,[je(re(gi),{modelValue:x.value.center[0],"onUpdate:modelValue":A[1]||(A[1]=L=>x.value.center[0]=L),type:"number",step:"0.0000001"},null,8,["modelValue"]),je(re(gi),{modelValue:x.value.center[1],"onUpdate:modelValue":A[2]||(A[2]=L=>x.value.center[1]=L),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),Pe("div",null,[je(re(gi),{label:re(s)("map.setting-control.field.zoom"),modelValue:x.value.zoom,"onUpdate:modelValue":A[3]||(A[3]=L=>x.value.zoom=L)},null,8,["label","modelValue"])]),Pe("div",null,[je(re(gi),{label:re(s)("map.setting-control.field.sprite"),modelValue:x.value.sprite,"onUpdate:modelValue":A[4]||(A[4]=L=>x.value.sprite=L)},null,8,["label","modelValue"])]),Pe("div",null,[je(re(gi),{label:re(s)("map.setting-control.field.glyphs"),modelValue:x.value.glyphs,"onUpdate:modelValue":A[5]||(A[5]=L=>x.value.glyphs=L)},null,8,["label","modelValue"])])]),je(re(Br),{class:"btn-container",onClick:A[6]||(A[6]=L=>b())},{default:nt(()=>[Wr(an(re(s)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):rn("",!0)]),default:nt(()=>[Sn(M.$slots,"default")]),_:3},16))}}),hX=An({__name:"ZoomControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},showCompass:{type:Boolean},showZoom:{type:Boolean}},{...Ri,showCompass:!0,showZoom:!0}),setup(e){const t={plus:ip,minus:E9},n=e,i=Kt("rotate(0deg)"),{callMap:a,mapId:u,moduleContainerProps:l}=Lr(n,x,b),{trans:s,setLocaleDefault:f}=Oi(u.value);f({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let y=null;function x(O){y=L.bind(null,O),O.on("rotate",y)}function b(O){O.off("rotate",y)}function M(O){a(V=>{V.zoomIn({},{originalEvent:O})})}function A(O){a(V=>{V.zoomOut({},{originalEvent:O})})}function P(){a(O=>{O.easeTo({bearing:0,pitch:0})})}function L(O){const V=O.getBearing()*-1;i.value=`rotate(${V}deg)`}return(O,V)=>(xe(),Rt($i,Ui(Di(re(l))),{btn:nt(()=>[je(jy,null,{default:nt(()=>[O.showCompass?(xe(),Rt(ri,{key:0,onClick:P,title:re(s)("map.action.navigation-control-reset-bearing")},{default:nt(()=>[(xe(),et("svg",{height:"22",style:qr({transform:i.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},V[0]||(V[0]=[Pe("g",{fill:"none","fill-rule":"evenodd"},[Pe("path",{d:"M0 0h24v24H0z"}),Pe("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),Pe("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1)]),4))]),_:1},8,["title"])):rn("",!0),O.showZoom?(xe(),Rt(ri,{key:1,onClick:M,title:re(s)("map.action.navigation-control-zoom-in")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:t.plus},null,8,["path"])]),_:1},8,["title"])):rn("",!0),O.showZoom?(xe(),Rt(ri,{key:2,onClick:A,title:re(s)("map.action.navigation-control-zoom-out")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:t.minus},null,8,["path"])]),_:1},8,["title"])):rn("",!0)]),_:1})]),default:nt(()=>[Sn(O.$slots,"default")]),_:3},16))}});function rh(){const e=Math.floor(Math.random()*kP.length);return kP[e]}const kP=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"],n1="base_map_control_";class dX{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(t){if(this._baseMap&&this._baseMap.id===t.id)return;this._baseMap=t;const{sources:n,layers:i}=await fX(t.type)(t);this.layers=i,this.sources=n}addToMap(t,n){for(const i in this.sources)if(Object.hasOwnProperty.call(this.sources,i)){const a=this.sources[i];t.getSource(i)||t.addSource(i,a)}this.layers.forEach(i=>{t.getLayer(i.id)||t.addLayer(i,n)})}removeFromMap(t){this.layers.forEach(n=>{t.getLayer(n.id)&&t.removeLayer(n.id)});for(const n in this.sources)t.getSource(n)&&t.removeSource(n)}}function fX(e){switch(e){case"vector":return mX;case"raster":return gX;case"no-basemap":return pX;default:throw new Error(`Not support ${e}`)}}async function pX(){return{layers:[],sources:{}}}async function mX(e){const t=await fetch(e.links[0]).then(l=>l.json()),n=[],i={};for(const l in t.sources){const s=n1+l;i[s]=t.sources[l]}for(const l of t.layers){const s=n1+l.id,f=n1+l.source;n.push(Object.assign(l,{id:s,source:f,metadata:{...l.metadata,"maplibregl-legend:disable":!0}}))}const a=t.glyphs,u=t.sprite;return{layers:n,sources:i,glyphs:a,sprite:u}}async function gX(e){if(!e)throw new Error("Not found item");const t=`${n1}layer`,n=`${n1}source`,i={};return i[n]={type:"raster",tiles:e.links,scheme:e.scheme||"xyz",maxzoom:e.maxzoom||22,minzoom:e.minzoom||0,tileSize:e.tileSize||256},{layers:[{id:t,type:"raster",source:n,metadata:{"maplibregl-legend:disable":!0}}],sources:i}}class yX{getCurrent(){return this.current}async setCurrent(t,n){this.current=n,await this.onApplyBaseMap(t,n)}getIndexDefault(t,n){return t.find(i=>i.default||i.title===n)??t[0]}}class vX extends yX{async onApplyBaseMap(t,n){if(!n)return;let i=this.layer;i&&lo(t,a=>{i&&i.removeFromMap(a)}),i||(i=new dX),lo(t,a=>{i.removeFromMap(a)}),await i.setBaseMap(n),lo(t,a=>{i.addToMap(a,_X(a))}),this.layer=i}}function _X(e){const t=e.getStyle().layers;return t.length>0?t[0].id:void 0}const by=Vo.createLogger().setNamespace("map:basemap",2),bX="basemap",xX=e=>jl(["map:core",e,bX],()=>({baseMaps:[],defaultBaseMap:"",current:void 0,loading:!1,adapter:new vX}))(),Xg={set:"map:base-map:set",setCurrent:"map:base-map:set-current"};function PL(e){const t=xX(e),n=fh(e);function i(M){Mn(by,e,"hook","useBaseMap").debug("setBaseMaps",M),t.baseMaps=M,n.emit(Xg.set,M)}function a(M){Mn(by,e,"hook","useBaseMap").debug("setDefaultBaseMap",M),t.defaultBaseMap=M||"";const A=t.adapter.getIndexDefault(t.baseMaps,t.defaultBaseMap);!t.current&&A&&u(A)}async function u(M){Mn(by,e,"hook","useBaseMap").debug("setCurrent",M),!t.loading&&(t.current=M,n.emit(Xg.setCurrent,t.current),t.loading=!0,await t.adapter.setCurrent(e,M),t.loading=!1)}const l=Kt(t.baseMaps),s=Kt(t.current),f=M=>{l.value=M,a(t.defaultBaseMap)},y=M=>{s.value=M};return n.on(Xg.set,f),n.on(Xg.setCurrent,y),{setBaseMaps:i,baseMaps:l,setDefaultBaseMap:a,setCurrent:u,currentBaseMap:s,remove:()=>{n.off(Xg.set,f),n.off(Xg.setCurrent,y)},init:(M,A)=>{Mn(by,e,"hook","useBaseMap").debug("init",M,A),a(A),i(M)}}}const AX={class:"base-map-card"},wX={class:"base-map-card__image"},CX={class:"base-map-card__content"},IX={class:"base-map-card__title"},MX=An({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(e){const t=e,{mapId:n}=Lr(t),{trans:i}=Oi(n.value),{baseMaps:a,setCurrent:u,currentBaseMap:l,remove:s}=PL(n.value),f=y=>{Mn(by,n.value,"control","BaseMapCard").debug("onClick",y),u(y)};return yh(()=>{s()}),(y,x)=>(xe(),et("div",AX,[Pe("div",wX,[re(l)?(xe(),Rt(re(vI),{key:0,src:re(l).thumbnail},null,8,["src"])):rn("",!0)]),Pe("div",CX,[Pe("div",IX,an(e.title||re(i)("map.basemap.title")),1),Pe("div",null,[je(re(Kf),{modelValue:re(l),items:re(a),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":f},null,8,["modelValue","items"])])])]))}}),SX=_n(MX,[["__scopeId","data-v-2cffe2fb"]]),EX=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],TX={class:"base-map-button__content"},PX={class:"base-map-button__title"},kX={class:""},LX={key:1},DX={class:"base-map-control-setting"},RX=["title","onClick"],OX=An({__name:"BaseMapControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},baseMaps:{},title:{},defaultBaseMap:{},controlIcon:{}},{...Ri,baseMaps:()=>EX,title:"",defaultBaseMap:"Open Street Map",controlIcon:""}),setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Lr(t),{trans:a,setLocaleDefault:u}=Oi(n.value),{setBaseMaps:l,baseMaps:s,setDefaultBaseMap:f,setCurrent:y,currentBaseMap:x,remove:b,init:M}=PL(n.value);xi(()=>t.baseMaps,z=>{l(z)}),xi(()=>t.defaultBaseMap,z=>{f(z)}),u({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const A=Wt(()=>70),P={layer:b9},L=Kt(!1);function O(z){Mn(by,n.value,"control","BaseMapControl").debug("onClick",z),y(z)}function V(){L.value=!L.value}return Er(()=>{M(t.baseMaps,t.defaultBaseMap)}),yh(()=>{b()}),(z,B)=>(xe(),Rt(re($i),Qn(re(i),{btnWidth:70}),{btn:nt(()=>[re(x)?(xe(),Rt(re(ri),{key:0,tooltip:z.title},{content:nt(()=>[je(re(H9),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:V},{default:nt(()=>[Pe("div",TX,[je(re(vI),{src:re(x).thumbnail},{default:nt(()=>[Pe("div",PX,[z.controlIcon?(xe(),Rt(re(ZM),{key:0,dark:"",small:""},{default:nt(()=>[Wr(an(z.controlIcon),1)]),_:1})):(xe(),Rt(re(Pn),{key:1,type:"mdi",path:P.layer},null,8,["path"])),Pe("div",kX,an(z.title||re(a)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(xe(),et("div",LX))]),draggable:nt(U=>[L.value?(xe(),Rt(re(vc),Qn({key:0},U,{height:A.value*(Math.floor(re(s).length/3)+1)+48+10,show:L.value,"onUpdate:show":B[0]||(B[0]=Z=>L.value=Z),"is-resizable":!1,title:re(a)("map.basemap.setting"),width:A.value*3+24}),{default:nt(()=>[Pe("div",DX,[(xe(!0),et(Fn,null,Or(re(s),Z=>(xe(),et("div",{key:Z.id,class:"clickable base-map-control-setting-item",style:qr({width:A.value+"px"}),title:Z.title,onClick:te=>O(Z)},[Pe("div",{style:qr({width:A.value-34+"px",height:A.value-34+"px"})},[je(re(vI),{src:Z.thumbnail},null,8,["src"])],4),Pe("div",{class:ii(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":re(x)&&Z.id==re(x).id}]),style:{"font-size":"14px"}},an(Z.title),3)],12,RX))),128))])]),_:2},1040,["height","show","title","width"])):rn("",!0)]),default:nt(()=>[Sn(z.$slots,"default",{},void 0,!0)]),_:3},16))}}),zX=_n(OX,[["__scopeId","data-v-ff2ca322"]]);function O0(e){return"removeFromMap"in e&&"addToMap"in e}function FX(e){return"removeFromMap"in e&&"addToMap"in e}function md(e){return"toggleShow"in e&&"setOpacity"in e&&"moveLayer"in e&&"getBeforeId"in e}function kL(e){return e.isComposite()}function BX(e){return"identifyGroupId"in e}function kI(e){return(e==null?void 0:e.type)==="dataManagement"&&typeof e.showDetail=="function"&&typeof e.getList=="function"}function NX(e){return"toggleShow"in e}function VX(e){return"setOpacity"in e}function jX(e,t,{check:n,direction:i="ltr"}={}){const a=[{node:e,level:0,path:[1]}];for(;a.length>0;){const{node:u,level:l,path:s}=a.shift();if(DL(u,l,s,t)===!1||n!=null&&n(u,l))return!0;if("getChildren"in u&&typeof u.getChildren=="function"){const f=u.getChildren()||[],y=i==="rtl"?[...f].reverse():f;for(let x=0;x<y.length;x++){const b=y[x];a.push({node:b,level:l+1,path:[...s,x+1]})}}}return!1}function LL(e,t,{level:n=0,path:i=[],check:a,direction:u="ltr"}={}){if(DL(e,n,i,t)===!1||a!=null&&a(e,n))return!0;if("getChildren"in e&&typeof e.getChildren=="function"){const l=e.getChildren()||[],s=u==="rtl"?[...l].reverse():l;for(let f=0;f<s.length;f++){const y=s[f],x=[...i,f+1];if(LL(y,t,{level:n+1,path:x,check:a,direction:u}))return!0}}return!1}function jm(e,t,{check:n,direction:i="ltr",strategy:a="dfs"}={}){return a==="bfs"?jX(e,t,{check:n,direction:i}):LL(e,t,{check:n,direction:i,path:[1]})}function DL(e,t,n,i){var u;return typeof i=="function"?i(e,t,n):t===0?i.visitRoot(e):!("getChildren"in e)||typeof e.getChildren!="function"||(((u=e.getChildren())==null?void 0:u.length)??0)===0?i.visitLeaf(e):i.visitComposite(e)}function UX(e,t,n){if(e===n)return null;let i=null;return jm(e,a=>{if(a===n)return;if(("getChildren"in a&&typeof a.getChildren=="function"?a.getChildren():[]).length===0&&t(a))return i=a,!1},{strategy:"bfs",direction:"ltr",check:()=>i!==null}),i}function Vl(e,t){var a;let n=e,i=null;for(;n;){const u=UX(n,t,i);if(u)return u;i=n,n=(a=n.getParent)==null?void 0:a.call(n)}}function mx(e,t){return Vl(e,n=>n.type===t)}function $X(e,t,n){const i=[];return jm(e,a=>{a!==n&&t(a)&&i.push(a)},{strategy:"bfs",direction:"ltr",check:a=>a===n}),i}function LI(e,t){return $X(e,n=>n.type===t)}function RL(e,t=[]){const n=new Map;return jm(e,i=>{if(kL(i))return;const a=t.map(u=>u(i));n.set(i.getName(),a)}),n}function Jf(e,t,n=[]){const i=new Map;return jm(e,a=>{if(!t(a))return;const u=n.map(l=>l(a));i.set(a.getName(),u)}),i}const HX={key:0,class:"toggle-buttons-container"},GX=An({__name:"toggle-show",props:{item:{},data:{},mapId:{},disabled:{type:Boolean}},setup(e){const t={show:jM,hide:UM},n=e,i=Kt(n.data.show),{callMap:a,mapId:u}=Lr(n),l=()=>{const b=!i.value;a(M=>{Jf(n.data.getParent(),A=>NX(A),[A=>{A.toggleShow(M,b)}])})};function s(b){const A=W4(u.value)[b],P=x(b);let L=n.data;L.shows[b]=!P,Jf(n.data.getParent(),O=>md(O),[O=>{O.toggleShow(A,L.shows[b])}])}const f=Kt(!1);Er(()=>{f.value=Z4(u.value)});function y(b){const{show:M}=b;i.value=M}Er(()=>{n.data.on("toggleShow",y)}),ha(()=>{n.data.off("toggleShow",y)});function x(b){let M=n.data;if(n.data.shows==null||n.data.shows.length<1){const A=n.data.show==null?!0:n.data.show;M.shows=[A,A]}return n.data.shows[b]}return(b,M)=>f.value?(xe(),et("div",HX,[je(re(Br),{class:ii({_active:x(0)}),onClick:M[0]||(M[0]=yr(A=>s(0),["stop"]))},{default:nt(()=>M[2]||(M[2]=[Pe("span",null,"#1",-1)])),_:1},8,["class"]),je(re(Br),{onClick:M[1]||(M[1]=yr(A=>s(1),["stop"])),class:ii({_active:x(1)})},{default:nt(()=>M[3]||(M[3]=[Pe("span",null,"#2",-1)])),_:1},8,["class"])])):(xe(),Rt(re(Br),{key:1,onClick:yr(l,["stop"])},{default:nt(()=>[i.value?(xe(),Rt(re(Pn),{key:0,size:"14",type:"mdi",path:t.show},null,8,["path"])):(xe(),Rt(re(Pn),{key:1,size:"14",type:"mdi",path:t.hide},null,8,["path"]))]),_:1}))}});class ZX{get id(){return this._id}constructor(){this._id=`${wu()}`}}function WX(){const e=wu();return{get id(){return e}}}function jo(e,t){try{let n;if(typeof e=="string")n=new Function(`return function ${e}() {}`)();else if(typeof e=="function")n=e;else throw new Error("Invalid prototype source");const i=Object.create(n.prototype);return Object.assign(i,t)}catch{return{...t}}}function qX(e,t){let n;return{...WX(),type:"base",getName(){return e},setName(a){e=a},getData(){return t},setData(a){t=a},setParent(a){n=a},getParent(){return n},isComposite(){return!1}}}function Gm(e,t){return{...qX(e,t),type:"leaf"}}function KX(e){const t=[];return Object.assign(e,{add(n){var i;t.push(n),(i=n.setParent)==null||i.call(n,e)},remove(n){var a;const i=t.findIndex(u=>u===n||u.id===n.id);i!==-1&&(t.splice(i,1),(a=n.setParent)==null||a.call(n,void 0))},getChildren(){return[...t]}})}function YX(e,t={}){const n=Gm(e,t);return jo("DataManagementComponent",{...n,get type(){return"dataManagement"},get fields(){return t.fields},showDetail(i,a){throw new Error("Method showDetail not implemented.")},getList(i){throw new Error("Method getList not implemented.")}})}const OL=zf.getInstance(),zL="dataset-action";function mC(e,t){OL.set([zL,e],t)}function gC(e){return OL.get([zL,e])}function CS(e,t,n,i){if(e.type!=="item")return;const a=e.click;IS(a,t,n,i)}function IS(e,t,n,i){if(e)if(typeof e=="function")e(t,n,i);else if(typeof e=="string"){const a=gC(e);a==null||a(t,n,i)}else if(Array.isArray(e))for(const a of e)if(typeof a=="string"){const u=gC(a);u==null||u(t,n,i)}else if(Array.isArray(a)&&typeof a[0]=="string"){const[u,l]=a;let s;if(Array.isArray(l)?s=l:typeof l=="function"&&(s=l(t,n,i)),!s)console.warn(`[handleMenuAction] result for key: ${u}`,t,n,i);else{const[f,y,x]=s,b=gC(u);b?b(f,y,x):console.warn(`[handleMenuAction] No handler found for key: ${u}`)}}else console.warn("[handleMenuAction] Invalid entry in click array:",a);else console.warn("[onMenuAction] Invalid menu click handler:",e)}const cd=Vo.createLogger().setNamespace("map:dataset",2),$s=Vo.createLogger().setNamespace("map:identify",2),XX="dataset-component";function QX(e="component"){return`${e}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const JX=e=>jl(["map:core",e,XX],()=>{Mn(cd,e,"store").debug("init");const t=[],n=Kt([]);return{components:t,componentIds:n}})(),FL=e=>{const t=JX(e);function n(){return t}function i(){return t.componentIds}function a(l){if(!t)return;if(Mn(cd,e,"store-component").debug("addComponent",{component:l,store:t}),l.check){const f=t.components.findIndex(y=>y.check==l.check);if(f>=0){const y=t.components[f].id;return Object.assign(t.components[f],l),t.componentIds.value.splice(f,1),t.componentIds.value.push(y),y}}const s=QX();return t.components.push({...l,id:s}),t.componentIds.value.push(s),s}function u(l){t&&(Mn(cd,e,"store-component").debug("removeComponent",{id:l,store:t}),t.components=t.components.filter(s=>s.id!==l),t.componentIds.value=t.componentIds.value.filter(s=>s!==l))}return{getStore:n,getAllComponentIds:i,addComponent:a,removeComponent:u}},eQ=e=>jl(["map:core",e,"store-highlight"],()=>(Mn(cd,e,"store").debug("init"),{feature:Kt(void 0),source:Kt(void 0),dataset:void 0}))(),rw=e=>{const t=eQ(e);function n(){return t}function i(s,f,y){if(t){if(Mn(cd,e,"store-highlight").debug("setFeatureHighlight",{store:t,feature:s,source:f,dataset:y}),!s&&t.source.value===f&&t.feature.value){t.feature.value=void 0,t.source.value=void 0,t.dataset=void 0;return}t.dataset=y,t.feature.value=s,t.source.value=f}}function a(){if(t)return t.feature}function u(){if(t)return t.source}function l(){if(t)return t.dataset}return{getStore:n,setFeatureHighlight:i,getHighlightSource:u,getDatesetHighlight:l,getFeatureHighlight:a}},tQ="dataset",LP=e=>jl(["map:core",e,tQ],()=>(Mn(cd,e,"store").debug("init"),{datasets:{},datasetIds:Kt([])}))(),lv=e=>{let t=e??"",n=LP(e??""),{getMap:i}=wI(e??"");async function a(b){if(!n)return;const M=f("list"),A=LI(b,"list");n.datasets[b.id]=b,A.forEach((P,L)=>{P.index=L+1+M.length}),n.datasetIds.value.push(b.id),i(async P=>{jm(b,L=>{O0(L)&&L.addToMap(P)},{})}),Mn(cd,t,"store").debug("addDataset",{store:n,dataset:b})}function u(b){n&&(delete n.datasets[b.id],n.datasetIds.value=n.datasetIds.value.filter(M=>M!==b.id),i(async M=>{jm(b,A=>{O0(A)&&A.removeFromMap(M)},{direction:"rtl"})}),Mn(cd,t,"store").debug("removeDataset",{store:n,dataset:b}))}function l(b){Mn(cd,t,"store").debug("removeComponent",b);const M=b.getParent()||b;i(async A=>{O0(b)&&b.removeFromMap(A),RL(M,[P=>{O0(P)&&P.removeFromMap(A)}])}),M&&kL(M)&&M.remove(b)}function s(){return n}function f(b){if(!n)return[];const M=[];return(Object.values(n.datasets||{})||[]).forEach(A=>{const P=LI(A,b);M.push(...P)}),M}function y(){return n.datasetIds}function x(){return n.datasetIds.value.map(b=>n.datasets[b])}return{setMapId(b){t=b,n=LP(b),i=wI(b).getMap},getDatasets:x,addDataset:a,getDatasetIds:y,removeComponent:l,removeDataset:u,getStoreDataset:s,getAllComponentsByType:f}},nQ={class:"row-container"},rQ={class:"btn-copy"},iQ={__name:"table-td-copy",props:{value:{}},setup(e){const{copy:t}=NB({}),n={copy:a9};return(i,a)=>(xe(),et("div",nQ,[Pe("div",rQ,[je(re(Br),{onClick:a[0]||(a[0]=u=>re(t)(e.value))},{default:nt(()=>[je(re(Pn),{path:n.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})]),Sn(i.$slots,"default",{},void 0,!0)]))}},sQ=_n(iQ,[["__scopeId","data-v-94841ed8"]]),aQ={key:0,class:"grid-row"},oQ=["title"],lQ={class:"value-cell"},uQ={key:1,class:"grid-row grid-row-full"},cQ={__name:"table-td-layer",props:{item:{},view:{},field:{},label:{}},setup(e){const t=e,n=Wt(()=>t.item?t.item[t.field.value]:"");return(i,a)=>(xe(),Rt(sQ,{value:n.value},{default:nt(()=>[e.field.inline?(xe(),et("div",uQ,[je(re(T4),{readonly:"",rows:"10",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),label:e.label},null,8,["modelValue","label"])])):(xe(),et("div",aQ,[Pe("div",{class:"label-cell",title:e.label},an(e.label),9,oQ),Pe("div",lQ,an(n.value),1)]))]),_:1},8,["value"]))}},hQ=_n(cQ,[["__scopeId","data-v-b9f907c8"]]),dQ={class:"table-show-info"},fQ={class:"table-content"},pQ={name:"detail-layer-info"},BL=Object.assign(pQ,{props:{item:{},view:{},fields:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const{mapId:n}=Lr(),{setFeatureHighlight:i}=rw(n.value),{trans:a}=Oi(n.value),u=t;function l(f){f||u("close")}function s(){i(void 0,"detail")}return(f,y)=>(xe(),Rt(re($i),Ui(Di(f.$attrs)),{draggable:nt(x=>[je(re(vc),Qn(x,{show:"",onClose:s,"onUpdate:show":l,width:400}),{title:nt(()=>[Wr(an(re(a)("map.layer-control.info.title")),1)]),default:nt(()=>[Pe("div",dQ,[Pe("div",fQ,[(xe(!0),et(Fn,null,Or(e.fields,(b,M)=>(xe(),Rt(hQ,{field:b,label:b.trans?re(a)(b.trans):b.text,item:e.item,view:e.view,key:M},null,8,["field","label","item","view"]))),128))])])]),_:2},1040)]),_:1},16))}}),mQ="Style Control",gQ={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},yQ={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},vQ={title:"Style"},_Q={title:mQ,add:gQ,"back-to-default":"Back to default value",layer:yQ,style:vQ},bQ={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity",translate:"Translate"},xQ={setting:bQ},AQ={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},wQ={setting:AQ},CQ={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},IQ={setting:CQ},MQ={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},SQ={setting:MQ},EQ={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},TQ={"text-font":"Font","text-color":"Color","text-field":"Content",image:"Image",color:"Color",opacity:"Opacity",font:"Font","letter-spacing":"Letter spacing","line-height":"Line height","max-width":"Max width",transform:"Transform","halo-color":"Halo color","halo-width":"Halo width","halo-blur":"Halo blur","fit-icon":"Fit icon to text",size:"Size","icon-opacity":"Icon opacity","icon-size":"Icon size","icon-text-fit":"Fit icon to text","icon-text-fit-padding":"Icon-text padding","icon-image":"Icon image","text-justify":"Text justification","text-anchor":"Text anchor","text-offset":"Text offset","text-radial-offset":"Text radial offset","text-translate":"Text translation","text-rotate":"Text rotation","text-pitch-alignment":"Text pitch alignment","icon-offset":"Icon offset","icon-translate":"Icon translation","icon-rotate":"Icon rotation","symbol-placement":"Symbol placement","symbol-spacing":"Symbol spacing","text-max-angle":"Max text angle","avoid-edges":"Avoid edges","sort-key":"Sort key","text-orientation":"Text orientation","text-padding":"Text padding","allow-text-overlap":"Allow text overlap","text-ignore-placement":"Text ignore placement","text-optional":"Text optional","icon-padding":"Icon padding","allow-icon-overlap":"Allow icon overlap","icon-ignore-placement":"Icon ignore placement","icon-optional":"Icon optional"},PQ={tab:EQ,setting:TQ},kQ={class:"layer-control__title"},LQ={class:"style-control"},DQ=An({__name:"style-control",props:{item:{}},emits:["close"],setup(e,{emit:t}){const n=t,i=e,{mapId:a,callMap:u}=Lr(),{trans:l,setLocaleDefault:s}=Oi(a.value);s({map:{"style-control":_Q},"circle-style":xQ,"line-style":IQ,"fill-style":wQ,"symbol-style":PQ,"raster-style":SQ});const[f,y]=Bl(!1),x=Kt(),b=Kt(void 0);let M=Ca("");Er(()=>{y(!0),b.value=void 0,L()});const A=()=>{b.value=void 0,x.value=void 0,n("close")},P=O=>{u(V=>{b.value&&b.value.updateValue(V,O)}),L()},L=()=>{const O=Vl(i.item,V=>md(V));O&&md(O)&&(b.value=O||void 0,M.value=O.getComponentUpdate(),x.value=w1(O.getData()))};return(O,V)=>(xe(),Rt(re($i),Ui(Di(O.$attrs)),{draggable:nt(z=>[re(M)?(xe(),Rt(re(n_),Qn({key:0},z,{right:"",show:re(f),"onUpdate:show":V[1]||(V[1]=B=>yi(f)?f.value=B:null),onClose:A,title:re(l)("map.style-control.title")}),{title:nt(()=>[Pe("span",kQ,an(re(l)("map.style-control.title")),1)]),default:nt(()=>[Pe("div",LQ,[(xe(),Rt(ps(re(M)()),{modelValue:x.value,"onUpdate:modelValue":V[0]||(V[0]=B=>x.value=B),onUpdateStyle:P,trans:re(l),mapId:re(a)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show","title"])):rn("",!0)]),_:1},16))}});function MS(){const e=[];return{getMenus(){return e},addMenu(t){t.id&&e.some(n=>n.id===t.id)||e.push(t)},addMenus(t){for(const n of t)n.id&&e.some(i=>i.id===n.id)||e.push(n)},removeMenu(t){const n=e.findIndex(i=>i.id===t);n!==-1&&e.splice(n,1)},getMenu(t){return e.find(n=>n.id===t)},hasMenu(t){return e.some(n=>n.id===t)},updateMenu(t,n){const i=e.findIndex(a=>a.id===t);i!==-1&&(e[i]=n(e[i]))}}}function DP(){return{location:"extra",type:"item",name:"Fly to",icon:rv,click:(e,t)=>{const n=Vl(e,i=>i.type=="metadata");lo(t,i=>{var a;WA(i,(a=n==null?void 0:n.metadata)==null?void 0:a.bbox)})}}}function ay(){return{type:"item",name:"Fly to",icon:rv,click:[["fitBounds",(e,t,n)=>[e,t,n.geometry]],["highlight",(e,t,n)=>{const{geometry:i,...a}=n;return[e,t,{detail:{type:"Feature",geometry:i,properties:a},key:"identify"}]}]]}}function oy(){return{type:"item",name:"Detail",id:"show-detail",icon:$M,click:(e,t,n)=>{const i=Vl(e,a=>a.type=="dataManagement");i==null||i.showDetail(t,n)}}}function Gb(){return{type:"item",name:"Info",icon:$M,click:[["addComponent",(e,t)=>{const n=Vl(e,i=>i.type=="source");if(n)return[e,t,{component:()=>BL,attr:{item:n.getDataInfo(),fields:n.getFieldsInfo(),view:e},check:"detail"}]}]]}}function yC(){return{type:"item",name:"Edit style",icon:p9,click:[["addComponent",(e,t)=>[e,t,{component:()=>DQ,attr:{item:e}}]]]}}function Cf(e={}){return{type:"item",location:"extra",name:"ToggleShow",component:()=>GX,...e}}function RQ(e={}){return{type:"item",location:"prebottom",name:"SetOpacity",component:()=>wee,...e}}function DI(e){return{id:e.id,...e.properties,geometry:e.geometry}}function vC(e){const{geometry:t,...n}=e;return{id:e.id,type:"Feature",geometry:t,properties:n}}function gx(e,t={}){const n=YX(e,t);let i=[];const a=f=>f?Promise.resolve(i.filter(y=>f.includes(y.id))):Promise.resolve(i),s=jo("DataManagementMapboxComponent",{...n,addToMap:f=>{a().then(y=>{var b;const x=Vl(n,M=>M.type==="source");x&&FX(x)&&((b=x.updateData)==null||b.call(x,f,{type:"FeatureCollection",features:y.map(M=>vC(M))}))})},removeFromMap:f=>{console.warn("removeFromMap not supported")},getList:a,setItems(f){i=f},showDetail:(f,y)=>{IS([["addComponent",[s,f,{component:()=>BL,attr:{item:y,fields:t.fields,view:s},check:"detail"}]],["highlight",[s,f,{detail:vC(y),key:"detail"}]]],s,f,y)},async addFeatures(f=[]){i.push(...f.map(DI)),i=w1(i)},async updateFeatures(f=[]){const y=f.reduce((x,b)=>(x[b.properties.id]=b,x),{});i=i.map(x=>y[x.id]?DI(y[x.id]):x)},async deleteFeatures(f=[]){const y=f.map(x=>x.properties.id);i=i.filter(x=>!y.includes(x.id))},async getFeatures(f){return i.filter(y=>Kj(y.geometry,Aa(f))).map(vC)}});return s}class NL extends ZX{constructor(t,n){super(),this.name=t,this.data=n}setParent(t){this.parent=t}getParent(){return this.parent}accept(t){return t.visitLeaf(this)}isComposite(){return!1}getName(){return this.name}setName(t){this.name=t}getData(){return this.data}setData(t){this.data=t}}class OQ extends NL{get type(){return"leaf"}constructor(t,n){super(t,n)}accept(t){return t.visitLeaf(this)}}class zQ extends NL{constructor(t){super(t),this.children=[]}get type(){return"composite"}isComposite(){return!0}getData(){return this.children.map(t=>t.getData())}add(t){this.children.push(t),typeof(t==null?void 0:t.setParent)=="function"&&t.setParent(this)}remove(t){const n=this.children.findIndex(i=>i===t||i.id===t.id);n!==-1&&(this.children.splice(n,1),typeof(t==null?void 0:t.setParent)=="function"&&t.setParent(void 0))}getChildren(){return[...this.children]}}function sa(e,t,n=!1){return n?new zQ(e):new OQ(e,t)}function FQ(e){const t=Gm("",e);return jo("HighlightComponent",{...t,get type(){return"highlight"},highlight:n=>{const i=mx(t,"source"),a=i==null?void 0:i.getSourceId();if(n!=null&&n.id)return{source:a,filter:n?["==","id",n==null?void 0:n.id]:void 0,...t.getData()}}})}function BQ(e){const t=new Set;return e.filter(({identifyId:n,rawId:i})=>{const a=`${n}_${i}`;return t.has(a)?!1:(t.add(a),!0)})}function RP(e,t){return e.map(({identify:n,identifyId:i,feature:a,rawId:u})=>{var l;return{identify:n,identifyId:i,feature:{id:u,name:((l=a.properties)==null?void 0:l[n.config.field_name||"name"])??"",data:t.get(u)||{...a.properties,geometry:a.geometry}}}})}function NQ(e){return new Map(e.map(t=>[String(t.id),t]))}async function VQ(e,t){return new Promise(n=>{const i=t.layerIdMap;lo(t.mapId,a=>{const u=Object.keys(i),l=a.queryRenderedFeatures(t.pointOrBox,{layers:u}),s=[],f=new Set;l.forEach(A=>{var z;const P=A.layer.id,L=i[P],O=((z=A.properties)==null?void 0:z[L.config.field_id||"id"])??A.id;if(!O)return;const V=String(O);f.add(V),s.push({identify:L,identifyId:L.id,feature:A,rawId:V})});const y=BQ(s),x=e[0],b=Vl(x,A=>A.type==="dataManagement");if(!kI(b)){const A=RP(y,new Map);n(A);return}b.getList([...f]).then(A=>{const P=NQ(A),L=RP(y,P);n(L)})})})}const jQ=(e,t,n)=>{const i=new Map;return n.forEach(({identifyId:a,identify:u,feature:l})=>{i.has(a)||i.set(a,{identify:u,features:[]});const s=i.get(a);s&&"features"in s&&s.features.push(l)}),Array.from(i.values())},UQ=(e,t,n)=>{const i={};return e.forEach(a=>{const u=Jf(a.getParent()||a,s=>md(s),[s=>s.getAllLayerIds()]);Array.from(u.values()).flat(2).forEach(s=>{i[s]=a})}),{identifies:e,mapId:t,pointOrBox:n,layerIdMap:i}};function VL(e,t){const n=Gm(e,t),i=MS();return jo("IdentifyComponent",{get config(){return{}},...n,...i,get type(){return"identify"},getFeatures(a,u){throw new Error("Method not implemented.")}})}function yx(e,t){const n=VL(e,t);return jo("IdentifyMapboxComponent",{...n,getFeatures:async(a,u)=>new Promise(l=>{const s=Jf(n.getParent()||n,y=>md(y),[y=>y.getAllLayerIds()]),f=Array.from(s.values()).flat(2);Mn($s,a,"model").debug("start",f,u),lo(a,y=>{const x=y.queryRenderedFeatures(u,{layers:f.filter(P=>y.getLayer(P))}),b=new Set,M=Vl(n,P=>P.type=="dataManagement");x.forEach(P=>{var O;const L=((O=P.properties)==null?void 0:O[n.config.field_id||"id"])??P.id;b.has(L)||b.add(L)});const A=[...b];if(!A||A.length<1){l([]);return}M.getList([...A]).then(P=>{const L=P.map((O,V)=>({id:O.id??V,name:O[n.config.field_name||"name"]??"",data:O}));Mn($s,a,"model").debug("end",s),l(L)})})})})}function OP(e,t){const n=VL(e,t);return jo("IdentifyMapboxMergedComponent",{...n,identifyGroupId:"mapbox-group",mergePayload:UQ,getMergedFeatures:VQ,splitResponse:jQ})}function jL(e,t,n){return e.getFeatures(t,n).then(i=>({identify:e,features:i}))}function $Q(e,t,n){const i=e[0];if(e.length===1)return jL(i,t,n).then(u=>[u]);const a=i.mergePayload(e,t,n);return i.getMergedFeatures(e,a).then(u=>i.splitResponse(e,a,u))}async function HQ(e,t,n,i={selectThreshold:5}){Mn($s,t,"multi").debug("start",e,i.selectThreshold,n);const a=[],u={};if(n&&UL(n)){const s=$L(n);n=[[s.x-i.selectThreshold,s.y+i.selectThreshold],[s.x+i.selectThreshold,s.y-i.selectThreshold]],Mn($s,t,"multi").debug("convert",s,s.x,s.y,i.selectThreshold,n)}e.forEach(s=>{if(!BX(s)){a.push(jL(s,t,n));return}const f=s.identifyGroupId;u[f]||(u[f]=[]),u[f].push(s)});for(const s in u){const f=u[s];a.push($Q(f,t,n))}const l=await Promise.all(a).then(s=>s.flat());return Mn($s,t,"getFirst").debug("end",l),l}async function GQ(e,t,n,i={selectThreshold:5}){const a=[],u={};return e.forEach(l=>{const s=Jf(l.getParent()||l,y=>md(y),[y=>y.getAllLayerIds()]),f=Array.from(s.values()).flat(2);f.forEach(y=>{u[y]=l}),a.push(...f)}),Mn($s,t,"getFirst").debug("start",a,n),new Promise(l=>{lo(t,s=>{var y,x,b,M;if(n&&UL(n)){const A=$L(n);n=[[A.x-i.selectThreshold,A.y+i.selectThreshold],[A.x+i.selectThreshold,A.y-i.selectThreshold]],Mn($s,t,"getFirst").debug("convert",A,A.x,A.y,i.selectThreshold,n)}const f=s.queryRenderedFeatures(n,{layers:a.filter(A=>s.getLayer(A))});if(Mn($s,t,"getFirst").debug("current",a.filter(A=>s.getLayer(A)),f,n),f.length>0){const A=f[0],P=u[A.layer.id],L=((x=A.properties)==null?void 0:x[((y=P==null?void 0:P.config)==null?void 0:y.field_id)||"id"])??A.id,O=((M=A.properties)==null?void 0:M[((b=P==null?void 0:P.config)==null?void 0:b.field_name)||"id"])??A.id,V={identify:P,layer:A.layer,feature:{id:L,name:O,data:DI(A)}};Mn($s,t,"getFirst").debug("end",V),l(V)}})})}function UL(e){if(Array.isArray(e))return e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number";if(typeof e=="object"&&e!==null&&"x"in e&&"y"in e){const t=e;return typeof t.x=="number"&&typeof t.y=="number"}return!1}function ZQ(e){return e&&typeof e.x=="number"&&typeof e.y=="number"}function $L(e){return e instanceof zm.Point||ZQ(e)?{x:e.x,y:e.y}:{x:e[0],y:e[1]}}function WQ(e,t){const n=Gm(e,t),i=MS();return jo("DatasetPartMapboxLayerComponent",{...n,...i,get type(){return"layer"},getBeforeId(){throw new Error("Method not implemented.")},getAllLayerIds(){throw new Error("Method not implemented.")},addToMap(a,u){throw new Error("Method not implemented.")},removeFromMap(a){throw new Error("Method not implemented.")},moveLayer(a,u){throw new Error("Method not implemented.")},toggleShow(a,u){throw new Error("Method not implemented.")},setOpacity(a,u){throw new Error("Method not implemented.")},updateValue(a,u){throw new Error("Method not implemented.")},getComponentUpdate(){throw new Error("Method not implemented.")}})}class eh{constructor(){this.type="point"}setColor(t){return this.color=t,this}setStyleType(t){return this.type=t,this}setOpacity(t){return this.opacity=t,this}build(){return qQ(this.type,this.color,this.opacity)}}const qQ=(e,t,n)=>{switch(e){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":t||rh(),"circle-radius":6,"circle-opacity":n||1}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":t||rh(),"line-width":4,"line-opacity":n||1}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":t||rh(),"fill-opacity":n||1}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+e)}},KQ={class:"tab-item"},YQ={key:0,class:"tab-item-content"},XQ={key:2,class:"full-width"},QQ=An({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(e,{emit:t}){const n=e,i=t,a=Wt({get(){return n.value!=null?n.value:n.default_value!=null?w1(n.default_value):void 0},set(s){i("input",s)}}),u=Wt(()=>!n.item||!n.item.props||!n.item.props.content?{}:typeof n.item.props.content=="function"?n.item.props.content(n.item):n.item.props.content),l=()=>{a.value=n.default_value!=null?w1(n.default_value):void 0};return(s,f)=>(xe(),et("div",KQ,[!e.item.component||!e.item.component.content?(xe(),et("div",YQ,[Pe("p",null,an(e.value||e.default_value),1)])):(xe(),Rt(ps(e.item.component.content()),Qn({key:1},u.value,{modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=y=>a.value=y),mapId:e.mapId,class:"tab-item-content"}),null,16,["modelValue","mapId"])),e.default_value!=null?(xe(),et("div",XQ,[f[2]||(f[2]=Pe("hr",{class:"map-divider"},null,-1)),je(re(Br),{onClick:f[1]||(f[1]=y=>l()),disabled:a.value==null||a.value==e.default_value,class:"map-button text-center full-width"},{default:nt(()=>[Wr(an(e.trans("map.style-control.back-to-default")),1)]),_:1},8,["disabled"])])):rn("",!0)]))}}),JQ=_n(QQ,[["__scopeId","data-v-a57c9606"]]),eJ=["title"],tJ=["title"],nJ={key:0},rJ=An({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(e){const t=e,n=Wt(()=>!t.item||!t.item.props||!t.item.props.label?{}:typeof t.item.props.label=="function"?t.item.props.label(t.item):t.item.props.label),i=Wt(()=>t.value!=null&&t.value!=""?t.value:t.default_value!=null&&t.default_value!=""?t.default_value:"None");return(a,u)=>(xe(),Rt(re(Br),Qn({class:["tab-item",{"tab-item-active":e.active,"tab-item-disabled":e.disabled}],disabled:e.disabled},a.$attrs),{default:nt(()=>[Pe("div",{class:"tab-item-title",title:e.text},an(e.text),9,eJ),Pe("div",{class:"tab-item-sub-title",title:i.value},[!e.item.component||!e.item.component.label?(xe(),et("p",nJ,an(i.value),1)):(xe(),Rt(ps(e.item.component.label()),Qn({key:1},n.value,{tab:e.item,value:e.value,default_value:e.default_value}),null,16,["tab","value","default_value"]))],8,tJ)]),_:1},16,["class","disabled"]))}}),iJ=_n(rJ,[["__scopeId","data-v-fcf59ae1"]]),HL={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.translate",key:"circle-translate",type:"array-x-y"}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map","circle-translate":[0,0]}}},sJ=An({__name:"InputArrayIndex",props:Ki({mapId:{type:String,required:!0},items:{type:Array,required:!0,default:()=>[]}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:Ki(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Zs(e,"modelValue"),i=t;function a(u,l){n.value[l]=u,i("update:modelValue",n.value)}return(u,l)=>(xe(),et("div",Qn(u.$attrs,{class:"input-array-index"}),[(xe(!0),et(Fn,null,Or(e.items,(s,f)=>(xe(),et("div",{class:"input-array-item",key:`array_${f}`},[Pe("span",null,an(s.text)+": ",1),je(re(gi),{modelValue:n.value[f],type:s.type,onChange:y=>a(+y.target.value,f)},null,8,["modelValue","type","onChange"])]))),128))],16))}}),aJ=_n(sJ,[["__scopeId","data-v-ca2d240f"]]),oJ={class:"input-array-item"},lJ={class:"input-array-item"},uJ=An({__name:"InputArrayXY",props:Ki({mapId:{type:String,required:!0}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:Ki(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Zs(e,"modelValue"),i=t;function a(u,l){n.value[l]=u,i("update:modelValue",n.value)}return(u,l)=>(xe(),et("div",Qn(u.$attrs,{class:"input-array-x-y"}),[Pe("div",oJ,[l[2]||(l[2]=Pe("span",null," x: ",-1)),je(re(gi),{modelValue:n.value[0],type:"number",onChange:l[0]||(l[0]=s=>a(+s.target.value,0))},null,8,["modelValue"])]),Pe("div",lJ,[l[3]||(l[3]=Pe("span",null," y: ",-1)),je(re(gi),{modelValue:n.value[1],type:"number",onChange:l[1]||(l[1]=s=>a(+s.target.value,1))},null,8,["modelValue"])])],16))}}),cJ=_n(uJ,[["__scopeId","data-v-e33f0aac"]]),hJ={class:"fill-canvas"},dJ={class:"item-image"},fJ=["src","onClick"],pJ=An({__name:"InputImage",props:Ki({mapId:{type:String,required:!0}},{modelValue:{default:void 0},modelModifiers:{}}),emits:Ki(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Zs(e,"modelValue"),i=t,a=e,{images:u,toDataURL:l}=DY(a.mapId);function s(f){i("update:modelValue",f==n.value?void 0:f)}return(f,y)=>(xe(),et("div",Qn(f.$attrs,{class:"input-image"}),[Pe("div",null,[je(re(gi),{modelValue:n.value,onChange:y[0]||(y[0]=x=>s(x.target.value))},null,8,["modelValue"])]),Pe("div",hJ,[(xe(!0),et(Fn,null,Or(re(u),(x,b)=>(xe(),et("div",{key:b,class:ii(["item-icon",{"item-icon-active":b==n.value}])},[Pe("div",dJ,[Pe("img",{src:re(l)(b,x),alt:"Map image",onClick:M=>s(b)},null,8,fJ)])],2))),128))])],16))}}),mJ=_n(pJ,[["__scopeId","data-v-78b9f451"]]),gJ={class:"input-array-item__action"},yJ=An({__name:"InputMultiple",props:Ki({mapId:{type:String,required:!0}},{modelValue:{default:()=>[0,0]},modelModifiers:{}}),emits:Ki(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Zs(e,"modelValue"),i=t,a={delete:rp};function u(f,y){n.value[y]=f,i("update:modelValue",n.value)}function l(f,y){f&&f.splice(y,1),n.value=f,i("update:modelValue",f)}function s(){n.value.push(0),i("update:modelValue",n.value)}return(f,y)=>(xe(),et("div",Qn(f.$attrs,{class:"input-array-index"}),[(xe(!0),et(Fn,null,Or(n.value,(x,b)=>(xe(),et("div",{class:"input-array-item",key:`array_${b}`},[je(re(gi),{modelValue:n.value[b],type:x.type,onChange:M=>u(+M.target.value,b)},null,8,["modelValue","type","onChange"]),Pe("div",gJ,[n.value.length>2?(xe(),Rt(re(Br),{key:0,onClick:M=>l(n.value,b)},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:a.delete},null,8,["path"])]),_:2},1032,["onClick"])):rn("",!0)])]))),128)),je(re(Br),{onClick:y[0]||(y[0]=x=>s())},{default:nt(()=>y[1]||(y[1]=[Wr(" Add")])),_:1})],16))}}),vJ=_n(yJ,[["__scopeId","data-v-5b1e3d5d"]]),_J={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function bJ(e,t,n,i,a,u){return xe(),et("div",{style:qr(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${n.value||n.default_value||"transparent"} ;
              border-radius: 5px `),class:ii({"fill-canvas":!n.value&&!n.default_value})},null,6)}const xJ=_n(_J,[["render",bJ]]),AJ={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function wJ(e,t,n,i,a,u){return xe(),et("div",null,an(n.value||n.default_value||"0")+" "+an(n.tab.unit||""),1)}const CJ=_n(AJ,[["render",wJ]]),IJ={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function MJ(e,t,n,i,a,u){return xe(),et("div",null,an(n.format(u.c_value||"0")),1)}const _C=_n(IJ,[["render",MJ]]),zP={"array-index":{component:{content:()=>aJ},props:{content:e=>({items:e.data})}},multiple:{component:{content:()=>vJ},props:{}},select:{component:{content:()=>Kf},props:{content:e=>({items:e.items})}},image:{component:{content:()=>mJ},props:{content:{}}},color:{component:{content:()=>tj,label:()=>xJ},props:{content:{disableAlpha:!0,class:"tab-content-no-padding"}}},boolean:{component:{content:()=>P4},props:{content:{}}},chose:{component:{content:()=>H7,label:()=>_C},props:{content:e=>({items:e.menu,class:"tab-content-padding"}),label:e=>({format(t){var n;return(n=e.menu.find(i=>i.value==t))==null?void 0:n.text}})}},opacity:{component:{content:()=>jx,label:()=>_C},props:{content:{min:0,max:1,step:.01},label:{format:e=>`${(+e*100).toFixed(0)} %`}},format:e=>+e},minMax:{component:{content:()=>jx,label:()=>_C},props:{content:{min:0,max:1,step:.01},label:{format:e=>`${(+e).toFixed(2)}`}},format:e=>+e},unit:{component:{content:()=>gi,label:()=>CJ},props:{content:{type:"number",min:0}},format:e=>+e},number:{component:{content:()=>gi},props:{content:{type:"number",min:0}},format:e=>+e},text:{component:{content:()=>gi},props:{content:{}}},"array-x-y":{component:{content:()=>cJ},props:{}},default:{component:{content:()=>gi},props:{content:{}}}},GL={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color",disabled:e=>{var t;return!!((t=e.paint)!=null&&t["fill-pattern"])}},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image",format:e=>{if(e)return e}},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color",disabled:e=>{var t,n;return!!((t=e.paint)!=null&&t["fill-pattern"])||((n=e.paint)==null?void 0:n["fill-antialias"])===!1}},{trans:"fill-style.setting.translate",key:"fill-translate",type:"array-x-y"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},ZL={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color",disabled:e=>{var t;return!!((t=e.paint)!=null&&t["line-pattern"])}},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image",format:e=>{if(e)return e}},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}],part:"layout"},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}],part:"layout"},{trans:"line-style.setting.round-limit",key:"line-round-limit",type:"unit",part:"layout",unit:"px",disabled:e=>{var t;return((t=e.layout)==null?void 0:t["line-join"])!="round"}},{trans:"line-style.setting.miter-limit",key:"line-miter-limit",type:"unit",part:"layout",unit:"px"},{type:"divider"},{trans:"line-style.setting.dash-array",key:"line-dasharray",type:"multiple",disabled:e=>{var t;return!!((t=e.paint)!=null&&t["line-pattern"])}},{trans:"line-style.setting.grap-width",key:"line-gap-width",type:"unit",unit:"px"},{trans:"line-style.setting.blur",key:"line-blur",type:"unit",unit:"px"},{trans:"line-style.setting.offset",key:"line-offset",type:"unit",unit:"px"},{trans:"line-style.setting.translate",key:"line-translate",type:"array-x-y"}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},WL={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},SJ=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"text"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{type:"divider"},{trans:"symbol-style.setting.halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.halo-blur",key:"text-halo-blur",type:"unit"},{trans:"symbol-style.setting.halo-width",key:"text-halo-width",type:"unit"}],EJ=[{trans:"symbol-style.setting.icon-image",key:"icon-image",part:"layout",type:"image"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",part:"layout",type:"unit"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]},{trans:"symbol-style.setting.icon-text-fit-padding",key:"icon-text-fit-padding",part:"layout",type:"array-index",data:[{text:"top",type:"number",value:0},{text:"right",type:"number",value:0},{text:"bottom",type:"number",value:0},{text:"left",type:"number",value:0}]}],TJ=[{trans:"symbol-style.setting.symbol-placement",key:"symbol-placement",type:"chose",menu:[{text:"point",value:"point"},{text:"line",value:"line"},{text:"line-center",value:"line-center"}],part:"layout"},{trans:"symbol-style.setting.symbol-spacing",key:"symbol-spacing",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.text-max-angle",key:"text-max-angle",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.avoid-edges",key:"symbol-avoid-edges",type:"boolean",part:"layout"},{trans:"symbol-style.setting.sort-key",key:"symbol-sort-key",type:"text",part:"layout"},{trans:"symbol-style.setting.text-orientation",key:"icon-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"},{text:"auto",value:"auto"}],text:"Text orientation",part:"layout"},{trans:"symbol-style.setting.text-padding",key:"text-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-text-overlap",key:"text-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-ignore-placement",key:"text-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-optional",key:"text-optional",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-padding",key:"icon-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-icon-overlap",key:"icon-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-ignore-placement",key:"icon-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-optional",key:"icon-optional",type:"boolean",part:"layout"}],PJ=[{trans:"symbol-style.setting.text-justify",key:"text-justify",type:"chose",menu:[{text:"auto",value:"auto"},{text:"left",subtitle:"symbol-style.translate.left",value:"left"},{text:"center",value:"center"},{text:"right",value:"right"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.text-anchor",key:"text-anchor",type:"select",items:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],part:"layout"},{trans:"symbol-style.setting.text-offset",key:"text-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-radial-offset",key:"text-radial-offset",type:"unit",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-translate",key:"text-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.text-rotate",key:"text-rotate",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.text-pitch-alignment",key:"text-pitch-alignment",type:"chose",menu:[{text:"auto",value:"auto"},{text:"map",value:"map"},{text:"viewport",value:"viewport"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.icon-offset",key:"icon-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.icon-translate",key:"icon-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.icon-rotate",key:"icon-rotate",type:"unit",unit:"deg",part:"layout"}],qL={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:SJ},{trans:"symbol-style.tab.icon",items:EJ},{trans:"symbol-style.tab.position",items:TJ},{trans:"symbol-style.tab.placement",items:PJ}]},DEFAULT:{type:"symbol",paint:{"icon-color":void 0,"icon-halo-blur":0,"icon-halo-color":"rgba(0, 0, 0, 0)","icon-halo-width":0,"icon-opacity":1,"icon-translate":[0,0],"icon-translate-anchor":"map","text-color":"#000000","text-halo-blur":0,"text-halo-color":"rgba(0, 0, 0, 0)","text-halo-width":0,"text-opacity":1,"text-translate":[0,0],"text-translate-anchor":"map"},layout:{"symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"symbol-sort-key":void 0,"icon-allow-overlap":!1,"icon-anchor":"center","icon-image":void 0,"icon-offset":[0,0],"icon-optional":!1,"icon-padding":2,"icon-pitch-alignment":"auto","icon-rotate":0,"icon-rotation-alignment":"auto","icon-size":1,"icon-text-fit":"none","icon-text-fit-padding":[0,0,0,0],"icon-keep-upright":!1,"text-allow-overlap":!1,"text-anchor":"center","text-field":"","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-justify":"center","text-letter-spacing":0,"text-line-height":1.2,"text-max-angle":45,"text-max-width":10,"text-offset":[0,0],"text-optional":!1,"text-padding":2,"text-pitch-alignment":"auto","text-rotate":0,"text-rotation-alignment":"auto","text-size":16,"text-transform":"none","text-variable-anchor":void 0,"text-writing-mode":void 0,"text-keep-upright":!0,visibility:"visible"}}},kJ={circle:HL.TAB,line:ZL.TAB,fill:GL.TAB,raster:WL.TAB,symbol:qL.TAB},LJ={circle:HL.DEFAULT,line:ZL.DEFAULT,fill:GL.DEFAULT,raster:WL.DEFAULT,symbol:qL.DEFAULT};function FP(e,t=zP){return e.map(n=>{if(n.type==="divider")return n;const i=Object.assign({},t.default,t[n.type]||{},n);return t[n.type]||console.log("type","missing",n.type),i.props=Om.merge({},i.props,(zP[n.type]||{}).props,n.props),i})}const DJ={class:"style-edit-container"},RJ={class:"label-config-container"},OJ={class:"label-config-item"},zJ={class:"label-config-item__label"},FJ={class:"label-config-item__input"},BJ={class:"label-config-item"},NJ={class:"label-config-item__label"},VJ={class:"label-config-item__input"},jJ={class:"label-config-item"},UJ={class:"label-config-item__label"},$J={class:"label-config-item__input"},HJ={class:"label-config-item"},GJ={class:"label-config-item__label"},ZJ={class:"label-config-item__input"},WJ={key:0,class:"tab-group-label"},qJ=["onClick"],KJ={class:"tab-group-container"},YJ={class:"label-container"},XJ={key:0},QJ=["onClick"],JJ={key:0,class:"tab-divider"},eee={class:"value-container"},tee={key:0,class:"value-container__label"},nee=An({__name:"single-style",props:Ki({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ki(["input","update-style"],["update:modelValue"]),setup(e,{emit:t}){const n=e,i=t,a=Zs(e,"modelValue"),u=Wt(()=>{const P=kJ[a.value.type];return P.type==="multi"?P.tabs.map(L=>({...L,items:FP(L.items)})):[{type:"single",text:"style",items:FP(P.items)}]}),l=Wt(()=>LJ[a.value.type]),s=Kt(void 0),f=Kt(void 0),y=P=>{f.value=P,f.value&&f.value.menu&&(f.value.menu=f.value.menu.map(L=>({...L,text:L.text||n.trans(L.text_trans||"")||"",subtitle:L.subtitle||n.trans(L.subtitle_trans||"")||""})))},x=P=>{s.value=P,s.value&&s.value.items&&y(s.value.items[0])},b=(P,L,O)=>{L.type!=="divider"&&(L.format&&(P=L.format(P)),"key"in L&&(L.format&&(P=L.format(P)),O[L.part||"paint"][L.key]=P),i("update-style",O))};Er(()=>{u.value&&x(u.value[0])});const M=(P,L)=>{L["min-zoom"]=P,i("update-style",L)},A=(P,L)=>{L["max-zoom"]=P,i("update-style",L)};return(P,L)=>(xe(),et("div",DJ,[je(re(_I),null,{header:nt(()=>[Wr(an(e.trans("map.style-control.layer.title")),1)]),default:nt(()=>[Pe("div",RJ,[Pe("div",OJ,[Pe("div",zJ,an(e.trans("map.style-control.layer.id")),1),Pe("div",FJ,an(a.value.id),1)]),Pe("div",BJ,[Pe("div",NJ,an(e.trans("map.style-control.layer.type")),1),Pe("div",VJ,an(a.value.type),1)]),Pe("div",jJ,[Pe("div",UJ,an(e.trans("map.style-control.layer.min-zoom")),1),Pe("div",$J,[je(re(jx),{modelValue:a.value["min-zoom"]!=null?a.value["min-zoom"]:0,"onUpdate:modelValue":L[0]||(L[0]=O=>M(O,a.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),Pe("div",HJ,[Pe("div",GJ,an(e.trans("map.style-control.layer.max-zoom")),1),Pe("div",ZJ,[je(re(jx),{modelValue:a.value["max-zoom"]!=null?a.value["max-zoom"]:24,"onUpdate:modelValue":L[1]||(L[1]=O=>A(O,a.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),je(re(_I),null,{header:nt(()=>[Wr(an(e.trans("map.style-control.style.title")),1)]),default:nt(()=>[u.value&&u.value.length>1?(xe(),et("div",WJ,[(xe(!0),et(Fn,null,Or(u.value,O=>(xe(),et("div",{key:O.key,class:ii(["tab clickable",{"tab-active":s.value&&s.value.trans==O.trans}]),onClick:yr(V=>x(O),["stop"])},an(O.text||e.trans(O.trans)),11,qJ))),128))])):rn("",!0),Pe("div",KJ,[Pe("div",YJ,[s.value?(xe(),et("div",XJ,[(xe(!0),et(Fn,null,Or(s.value.items,O=>(xe(),et("div",{key:O.key,class:"clickable",onClick:yr(V=>y(O),["stop"])},[O.type==="divider"?(xe(),et("div",JJ)):(xe(),Rt(iJ,{key:1,value:a.value[O.part||"paint"][O.key],item:O,text:O.text||e.trans(O.trans),default_value:l.value[O.part||"paint"][O.key],active:f.value&&f.value.key===O.key,disabled:O.disabled&&O.disabled(a.value)},null,8,["value","item","text","default_value","active","disabled"]))],8,QJ))),128))])):rn("",!0)]),Pe("div",eee,[Pe("div",null,[f.value?(xe(),et("div",tee,an(f.value.text||e.trans(f.value.trans)),1)):rn("",!0),f.value?(xe(),Rt(JQ,{key:1,item:f.value,value:a.value[f.value.part||"paint"][f.value.key],onInput:L[2]||(L[2]=O=>b(O,f.value,a.value)),default_value:l.value[f.value.part||"paint"][f.value.key],trans:e.trans,mapId:e.mapId},null,8,["item","value","default_value","trans","mapId"])):rn("",!0)])])])]),_:1})]))}}),BP=_n(nee,[["__scopeId","data-v-e1d4f1a9"]]),ree={class:"multi-style-edit-container"},iee={class:"tab-container"},see={class:"tab-item"},aee={key:0,class:"style-container"},oee={class:"add-style-container"},lee={key:1,class:"style-container"},uee=An({__name:"multi-style",props:Ki({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:Ki(["input","update-style","close"],["update:modelValue"]),setup(e,{expose:t,emit:n}){t({SvgIcon:Pn,SingleStyle:BP,BaseButton:Br,InputSelect:Kf});const i=n,a=Zs(e,"modelValue");xi(a,()=>{!y.value&&a.value.length>0&&(y.value=a.value[a.value.length-1].id)});const u=O=>{y.value=void 0,fl(()=>{y.value=O})},l=(O,V)=>{i("update-style",{type:"update-one-layer",layer:O,index:a.value.findIndex(z=>z.id===V)})},s=O=>{y.value=void 0,i("update-style",{type:"add-one-layer",layer:new eh().setStyleType(O).setColor("#fff").build()}),L(!1)},f=O=>{var z;let V=a.value.findIndex(B=>B.id===O);a.value[V]&&(y.value=void 0,i("update-style",{type:"remove-one-layer",index:V,layer:a.value[V]}),a.value.splice(V,1),a.value.length===0?(y.value=void 0,L(!0)):y.value=(z=a.value[a.value.length-1])==null?void 0:z.id,a.value[0]&&u(a.value[0].id))},y=Kt(a.value[0].id),x=Wt(()=>a.value.map((O,V)=>({text:`#${V+1}`,value:O.id}))),b=Wt(()=>a.value.find(O=>O.id===y.value)),M={delete:rp,create:ip,close:Vy},[A,P]=Bl(!1),L=O=>{P(O)};return(O,V)=>(xe(),et("div",ree,[Pe("div",iee,[Pe("div",see,[je(re(Kf),{modelValue:y.value,"onUpdate:modelValue":u,items:x.value},null,8,["modelValue","items"])]),je(re(Br),{class:"tab-item tab-add clickable",onClick:V[0]||(V[0]=z=>f(y.value)),disabled:!y.value},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:M.delete,disabled:!y.value},null,8,["path","disabled"])]),_:1},8,["disabled"]),je(re(Br),{class:"tab-item tab-add clickable",onClick:V[1]||(V[1]=z=>L(!re(A)))},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:re(A)?M.close:M.create},null,8,["path"])]),_:1})]),re(A)?(xe(),et("div",aee,[Pe("div",oee,[je(re(Br),{onClick:V[2]||(V[2]=z=>s("area"))},{default:nt(()=>[Wr(an(e.trans("map.style-control.add.area")),1)]),_:1}),je(re(Br),{onClick:V[3]||(V[3]=z=>s("line"))},{default:nt(()=>[Wr(an(e.trans("map.style-control.add.line")),1)]),_:1}),je(re(Br),{onClick:V[4]||(V[4]=z=>s("point"))},{default:nt(()=>[Wr(an(e.trans("map.style-control.add.point")),1)]),_:1}),je(re(Br),{onClick:V[5]||(V[5]=z=>s("symbol"))},{default:nt(()=>[Wr(an(e.trans("map.style-control.add.symbol")),1)]),_:1})])])):y.value?(xe(),et("div",lee,[(xe(),Rt(BP,{modelValue:b.value,trans:e.trans,mapId:e.mapId,key:y.value,onUpdateStyle:V[6]||(V[6]=z=>l(z,y.value))},null,8,["modelValue","trans","mapId"]))])):rn("",!0)]))}});function th(e,t=[]){const n=WQ(e,t),i={};return n.getData().forEach(a=>{var l;const u=a.id||wu();a.id=u,a.metadata||(a.metadata={}),a.metadata["maplibregl-legend:name"]=e,i[u]=((l=a.paint)==null?void 0:l[bC(a)])??1}),jo("MultiMapboxLayerComponent",{...n,setData(a){n.setData(a.map(u=>{var s;const l=u.id||wu();return u.id=l,u.metadata||(u.metadata={}),u.metadata["maplibregl-legend:name"]=e,i[l]=((s=u.paint)==null?void 0:s[bC(u)])??1,u}))},getBeforeId(){var a;return(a=n.getData()[0])==null?void 0:a.id},getAllLayerIds(){return n.getData().map(a=>a.id)},getComponentUpdate(){return()=>uee},addToMap(a,u){const l=mx(n,"source");n.getData().forEach(s=>{a.getLayer(s.id)||(!s.source&&l&&(s.source=l.getSourceId()),a.addLayer(s,u))})},removeFromMap(a){a.getLayer(n.id+"-hightLight")&&a.removeLayer(n.id+"-hightLight"),n.getData().forEach(u=>{a.getLayer(u.id)&&a.removeLayer(u.id)})},moveLayer(a,u){n.getData().forEach(l=>{a.getLayer(l.id)&&a.moveLayer(l.id,u)})},toggleShow(a,u){n.getData().forEach(l=>{a.getLayer(l.id)&&a.setLayoutProperty(l.id,"visibility",u?"visible":"none")})},setOpacity(a,u){n.getData().forEach(l=>{a.getLayer(l.id)&&a.setPaintProperty(l.id,bC(l),u*(i[l.id]??1))})},updateValue(a,u){const{type:l,index:s}=u;let{layer:f}=u;const y=mx(n,"source");switch(l){case"update-one-layer":cee(a,n.getData()[s],f),n.getData()[s]=w1({...n.getData()[s],...f});break;case"add-one-layer":f={...f,id:`${n.id}-${n.getData().length}`,source:y.getSourceId()},a.addLayer(f),n.getData().push(f);break;case"remove-one-layer":a.getLayer(f.id)&&a.removeLayer(f.id),n.getData().splice(s,1);break}},hightLight(a,u){var s,f;if(a.getLayer(n.id+"-hightLight"))a.setFilter(n.id+"-hightLight",["==",["get","id"],((f=u==null?void 0:u.properties)==null?void 0:f.id)||null]);else{const y=mx(n,"source");if(y){const x=y.getSourceId();x&&a.addLayer({id:n.id+"-hightLight",source:x,type:"line",metadata:{"maplibregl-legend:disable":!0},filter:["==",["get","id"],((s=u==null?void 0:u.properties)==null?void 0:s.id)||null],paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}})}}a.moveLayer(n.id+"-hightLight")}})}function cee(e,t,n){var i,a;e.setLayerZoomRange(t.id,n["min-zoom"]??t["min-zoom"]??0,n["max-zoom"]??t["max-zoom"]??24);for(const u in n.paint)n.paint[u]!==((i=t.paint)==null?void 0:i[u])&&e.setPaintProperty(t.id,u,n.paint[u]);for(const u in n.layout)n.layout[u]!==((a=t.layout)==null?void 0:a[u])&&e.setLayoutProperty(t.id,u,n.layout[u])}function bC(e){return e.type==="symbol"?"icon-opacity":`${e.type}-opacity`}const hee={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(e){const t={loading:HM,layer:VA};return(n,i)=>(xe(),et("div",null,[e.loading?(xe(),Rt(re(Pn),{key:0,size:"14",type:"mdi",path:t.loading,class:"spin"},null,8,["path"])):(xe(),Rt(re(Pn),{key:1,size:"14",type:"mdi",path:t.layer},null,8,["path"]))]))}};function dee(){const e=K4();return{emit:e.emit,on:e.on,off:e.off}}function fee(e,t){this.show=!!t,this.emit&&this.emit("toggleShow",{show:t,dataset:this})}function pee(e,t){this.opacity=t,this.emit&&this.emit("changeOpacity",{opacity:t,dataset:this})}function SS(e,t={}){const n={config:{disabled_delete:!1,disabled_opacity:!1,component:void 0,init_show_legend:!1},index:0};return{state:n,setColor(a){return n.color=a,this},setOpacity(a){return n.opacity=a,this},setIndex(a){return n.index=a,this},setGroup(a){return n.group=a,this},setLegend(a){return n.legend=a,this},configDisabledOpacity(a){return n.config.disabled_opacity=a??!0,this},configDisabledDelete(a){return n.config.disabled_delete=a??!0,this},configInitShowLegend(a){return n.config.init_show_legend=a??!0,this},build(){const a=Gm(e),u=MS(),l=dee(),s={...a,...u,...l,get type(){return"list"},opacity:n.opacity??1,selected:n.selected??!1,color:n.color,index:n.index??0,...t,group:n.group,show:n.show??!0,shows:n.shows??[],legend:n.legend,icon:n.icon,config:{disabled_delete:!1,disabled_opacity:!1,component:void 0,...n.config},toggleShow(f,y){return fee.call(this,f,y)},setOpacity(f,y){return pee.call(this,f,y)}};return n.icon||(s.icon=()=>hee),s.config.disabled_opacity||s.addMenu(RQ()),s}}}function ES(e,t){const n={...e,...t};return new Proxy(n,{get(a,u,l){const s=n[u];return typeof s=="function"?(...f)=>{const y=s.apply(l,f);return y===n||y===e||y===t?l:y}:s}})}function KL(e){const t=SS(e),n=t.build.bind(t),a=ES(t,{build(){const u=n();return jo("ListViewUIComponent",u)}});return a.state=t.state,a}function mee(e){const t=SS(e,{config:{disabled_delete:!1,disabled_opacity:!1,component:void 0,init_show_legend:!1,init_show_children:!1}}),n=t.build.bind(t),a=ES(t,{configInitShowChildren(u){return t.state.config.init_show_children=u??!0,a},build(){const u=n();return jo("GroupSubListViewUIComponent",KX(u))}});return a.state=t.state,a}function gee(e){const t=SS(e,{get type(){return"list-item"}});t.configDisabledOpacity();const n=t.build.bind(t),a=ES(t,{build(){const u=n();return jo("ListViewUIComponent",u)}});return a.state=t.state,a}function bm(e){return KL(e).build()}function NP(e){return gee(e).build()}function VP(e,t){const n=Gm(e,t);return jo("MetadataComponent",{...n,type:"metadata",metadata:t})}function YL(e,t){const n=Gm(e,t);return jo("DatasetPartMapboxSourceComponent",{...n,get type(){return"source"},getSourceId(){return this.getMapboxSource().id||n.id},addToMap(i){const a=this.getSourceId();a&&!i.getSource(a)&&i.addSource(a,this.getMapboxSource())},removeFromMap(i){const a=this.getSourceId();a&&i.getSource(a)&&i.removeSource(a)},getMapboxSource(){throw new Error("Method not implemented.")},getFieldsInfo(){throw new Error("Method not implemented.")},getDataInfo(){throw new Error("Method not implemented.")}})}function ly(e,t){const n=YL(e,t);return jo("GeojsonSourceComponent",{...n,getMapboxSource:()=>({type:"geojson",data:n.getData()||{type:"FeatureCollection",features:[]}}),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.geojson",value:"geojson",inline:!0}],getDataInfo:()=>{var a;const i=Vl(n,u=>u.type==="metadata");return{name:n.getName(),bbox:(a=i==null?void 0:i.metadata)==null?void 0:a.bbox,geojson:JSON.stringify(n.getData(),void 0,2)}},updateData(i,a){const u=i.getSource(n.id);u&&u.setData(a),n.setData(a)}})}function XL(e,t){const n=YL(e,t);return jo("RasterSourceComponent",{...n,getMapboxSource:()=>n.getData(),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.tiles",value:"tiles"}],getDataInfo:()=>{var u,l;const i=Vl(n,s=>s.type==="metadata"),a=n.getData();return{name:n.getName(),bbox:((u=i==null?void 0:i.metadata)==null?void 0:u.bbox)||(a==null?void 0:a.bounds),tiles:(l=a==null?void 0:a.tiles)==null?void 0:l.join(`,
`)}}})}const yee={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},vee=["value","min","max","step","disabled"];function _ee(e,t,n,i,a,u){return xe(),et("input",{value:u.form,onChange:t[0]||(t[0]=({target:l})=>u.form=parseFloat(l.value)),type:"range",min:n.min,max:n.max,step:n.step,style:qr({backgroundSize:u.backgroundSize}),disabled:n.disabled},null,44,vee)}const bee=_n(yee,[["render",_ee],["__scopeId","data-v-b3e24612"]]),xee={class:"layer-item__opacity"},Aee=An({__name:"set-opacity",props:{item:{},data:{},mapId:{},disabled:{type:Boolean}},setup(e){const t=e,{callMap:n}=Lr(t),i=Kt(t.data.opacity);function a(s){i.value=s,u(t.data,s)}function u(s,f){const y=s.getParent()||s;n(x=>{Jf(y,b=>VX(b),[b=>{b.setOpacity(x,f)}])})}function l(s){const{opacity:f}=s;i.value=f}return Er(()=>{t.data.on("changeOpacity",l)}),ha(()=>{t.data.off("changeOpacity",l)}),(s,f)=>(xe(),et("div",xee,[je(bee,Qn(s.$attrs,{"model-value":i.value,"onUpdate:modelValue":a}),null,16,["model-value"])]))}}),wee=_n(Aee,[["__scopeId","data-v-891e0a8c"]]),Cee=An({__name:"ComponentManagementControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=Za(),n=e,{mapId:i}=Lr(n),{getAllComponentIds:a,getStore:u,removeComponent:l}=FL(i.value),s=u();function f(b){l(b.id)}const y=Wt(()=>{var b;return((b=a())==null?void 0:b.value)||[]}),x=Kt([]);return xi(y,()=>{var b;x.value=(s==null?void 0:s.components)||[],(b=t==null?void 0:t.proxy)==null||b.$forceUpdate()},{deep:!0}),(b,M)=>(xe(!0),et(Fn,null,Or(x.value,A=>(xe(),Rt(ps(A.component()),Qn({key:A.id,ref_for:!0},A.attr,{onClose:P=>f(A)}),null,16,["onClose"]))),128))}}),Iee={},Mee={class:"map-row"};function See(e,t,n,i,a,u){return xe(),et("div",Mee,[Sn(e.$slots,"default")])}const QL=_n(Iee,[["render",See]]),Eee={class:"map-row"},Tee={class:"map-col-12"},Pee={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue"),{mapId:n}=Lr(),{trans:i}=Oi(n.value);return(a,u)=>(xe(),et("div",Eee,[Sn(a.$slots,"default"),Pe("div",Tee,[je(re(gi),{modelValue:t.value.url,"onUpdate:modelValue":u[0]||(u[0]=l=>t.value.url=l),label:re(i)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},kee={class:"map-row"},Lee={class:"map-col-12"},Dee={class:"map-col-6"},Ree={class:"map-col-6"},Oee={class:"map-col-6"},zee={class:"map-col-6"},Fee={class:"map-col-6"},Bee={class:"map-col-6"},Nee={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Zs(e,"modelValue"),{mapId:n}=Lr(),{trans:i}=Oi(n.value);return(a,u)=>(xe(),et("div",kee,[Sn(a.$slots,"default"),Pe("div",Lee,[je(re(gi),{modelValue:t.value.url,"onUpdate:modelValue":u[0]||(u[0]=l=>t.value.url=l),label:re(i)("map.layer-control.field.url")},null,8,["modelValue","label"])]),Pe("div",Dee,[je(re(gi),{modelValue:t.value.minzoom,"onUpdate:modelValue":u[1]||(u[1]=l=>t.value.minzoom=l),label:re(i)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),Pe("div",Ree,[je(re(gi),{modelValue:t.value.maxzoom,"onUpdate:modelValue":u[2]||(u[2]=l=>t.value.maxzoom=l),label:re(i)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),t.value.bounds?(xe(),et(Fn,{key:0},[Pe("div",Oee,[je(re(gi),{modelValue:t.value.bounds[0],"onUpdate:modelValue":u[3]||(u[3]=l=>t.value.bounds[0]=l),label:re(i)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),Pe("div",zee,[je(re(gi),{modelValue:t.value.bounds[1],"onUpdate:modelValue":u[4]||(u[4]=l=>t.value.bounds[1]=l),label:re(i)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),Pe("div",Fee,[je(re(gi),{modelValue:t.value.bounds[2],"onUpdate:modelValue":u[5]||(u[5]=l=>t.value.bounds[2]=l),label:re(i)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),Pe("div",Bee,[je(re(gi),{modelValue:t.value.bounds[3],"onUpdate:modelValue":u[6]||(u[6]=l=>t.value.bounds[3]=l),label:re(i)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):rn("",!0)]))}},Vee={class:"map-row"},jee={class:"map-col-12"},Uee={class:"map-col-12"},$ee={key:0,class:"map-col-12"},Hee={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const{read:t}=JB(),n=["point","line","area"],i=Zs(e,"modelValue"),a=Kt(null),{mapId:u}=Lr(),{trans:l}=Oi(u.value);function s(f){t(f).then(y=>{i.value.geojson=y,a.value=y?JSON.stringify(y,null,2):""})}return(f,y)=>(xe(),et("div",Vee,[Sn(f.$slots,"default"),Pe("div",jee,[je(re(Kf),{modelValue:i.value.type,"onUpdate:modelValue":y[0]||(y[0]=x=>i.value.type=x),items:n,label:re(l)("map.layer-control.field.type")},null,8,["modelValue","label"])]),Pe("div",Uee,[je(re(ZB),{onChange:s,accept:".json,.geojson"})]),a.value?(xe(),et("div",$ee,[je(re(T4),{modelValue:a.value,rows:"4",readonly:""},null,8,["modelValue"])])):rn("",!0)]))}};function Gee(e){const t=sa(e.name,null,!0),n=bm(e.name);n.color=e.color||rh();const i=sa(e.name,null,!0),a=th(e.name,[new eh().setStyleType(e.type).setColor(n.color).setOpacity(n.opacity).build()]);i.add(a),i.add(n);const u=Zee(e.geojson),l=gx(e.name,{fields:u.fields});l.setItems(u.items);const s=yx(e.name);s.addMenus([ay(),oy()]);const f=ly(e.name,{type:"FeatureCollection",features:[]});return t.add(f),t.add(l),t.add(i),t.add(s),t}function Zee(e){const t=[],n=new Set,i=u=>{const{properties:l={},geometry:s}=u;return Object.keys(l).forEach(f=>n.add(f)),{...l,geometry:s}};if(e.type==="FeatureCollection")for(const u of e.features)t.push(i(u));else e.type==="Feature"&&t.push(i(e));const a=Array.from(n).map(u=>({text:u,value:u}));return{items:t,fields:a}}function JL(e){const t=sa(e.name,null,!0),n=XL(e.name,{type:"raster",tiles:e.tiles,maxzoom:e.maxZoom,minzoom:e.minZoom,bounds:e.bounds}),i=th(e.name,[{type:"raster"}]),a=bm(e.name),u=sa(e.name,null,!0);return t.add(n),u.add(a),u.add(i),t.add(u),t}class TS{get default_value(){return{}}validate(t){return!!t.name}}class Wee extends TS{get component(){return()=>Pee}validate(t){return!(!t.name||!t.url)}get create(){return t=>JL({...t})}}class qee extends TS{get component(){return()=>Nee}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(t){return!(!t.name||!t.url)}get create(){return t=>JL({...t,tiles:[t.url]})}}class Kee extends TS{get component(){return()=>Hee}get default_value(){return{type:"point",geojson:null}}validate(t){return!(!t.name||!t.geojson||!t.type)}get create(){return t=>Gee({...t})}}const jP={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class Yee{constructor(t){this.setType(t)}setType(t){this.helper=Xee.create(t)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||QL}validate(t){return this.helper.validate(t)}}const Xee={create(e){switch(e){case"raster-url":return new qee;case"raster-json":return new Wee;case"geojson":return new Kee;default:throw new Error("not support type: "+e)}}},Qee={class:"create-control-container"},Jee={class:"form-container"},ete={class:"map-col-12"},tte={class:"map-col-12"},nte={name:"create-layer-control"},rte=Object.assign(nte,{props:{show:Boolean},emits:["update:show"],setup(e,{emit:t}){const n=e,{mapId:i,moduleContainerProps:a}=Lr(n),{trans:u}=Oi(i.value),{addDataset:l}=lv(i.value),s=t,f=Wt({get(){return n.show},set(B){s("update:show",B)}}),y={type:"geojson"},x=Kt(1),b=Kt(()=>QL),M=new Yee(y.type),A=Kt({...y,config:{name:"",...M.default_value}}),P=Object.keys(jP).map(B=>({value:B,text:jP[B]}));function L(B){M.setType(B),b.value=M.component,A.value={config:{name:A.value.config.name,...M.default_value},type:A.value.type}}function O(B){const U=M.create;if(!U||!M.validate(B.config))return;let Z=U(B.config);l(Z),V(),f.value=!1}function V(){M.setType(y.type),A.value={...y,config:{name:"",...M.default_value}},x.value++}function z(){V()}return Er(()=>{L(A.value.type)}),(B,U)=>(xe(),Rt(re($i),Ui(Di(re(a))),{draggable:nt(Z=>[je(re(vc),Qn({show:f.value,"onUpdate:show":U[4]||(U[4]=te=>f.value=te)},Z,{width:400,height:300,onClose:z,title:re(u)("map.layer-control.create.title")}),{default:nt(()=>[Pe("div",Qee,[Pe("div",Jee,[(xe(),Rt(ps(b.value()),{modelValue:A.value.config,"onUpdate:modelValue":U[2]||(U[2]=te=>A.value.config=te),class:"create-control-form",key:x.value},{default:nt(()=>[Pe("div",ete,[je(re(gi),{modelValue:A.value.config.name,"onUpdate:modelValue":U[0]||(U[0]=te=>A.value.config.name=te),label:re(u)("map.layer-control.field.name")},null,8,["modelValue","label"])]),Pe("div",tte,[je(re(Kf),{modelValue:A.value.type,"onUpdate:modelValue":[U[1]||(U[1]=te=>A.value.type=te),L],items:re(P),label:re(u)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),je(re(Br),{onClick:U[3]||(U[3]=te=>O(A.value)),class:"btn-container"},{default:nt(()=>[Wr(an(re(u)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),ite=_n(rte,[["__scopeId","data-v-f9c3c4b0"]]),ste={class:"dataset-list"},ate={name:"detail-dataset-info"},ote=An({...ate,props:{dataset:{}},emits:["close"],setup(e,{emit:t}){const n=e,i=t;function a(l){l||i("close")}const u=Ca([]);return xi(()=>n.dataset,l=>{jm(n.dataset,(s,f,y)=>{u.value.push({node:s,level:f,path:y})})},{immediate:!0}),(l,s)=>(xe(),Rt(re($i),Ui(Di(l.$attrs)),{draggable:nt(f=>[je(re(vc),Qn(f,{show:"","onUpdate:show":a,width:400,height:400}),{title:nt(()=>[Wr(an(l.dataset.getName()),1)]),default:nt(()=>[Pe("ul",ste,[(xe(!0),et(Fn,null,Or(u.value,(y,x)=>(xe(),et("li",{key:x,class:"dataset-list-item",style:qr({paddingLeft:`${y.level*.5}rem`})},[Pe("span",null,an(y.path.join(".")),1),Pe("span",null,"("+an(y.node.type)+")",1),Pe("span",null,an(y.node.getName()),1)],4))),128))])]),_:2},1040)]),_:1},16))}}),lte=_n(ote,[["__scopeId","data-v-8dd7ec05"]]),ute={class:"dataset-control"},cte={class:"dataset-item"},hte={class:"dataset-item__title"},dte={class:"dataset-item__title-action"},fte={name:"dataset-control"},pte=An({...fte,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean}},{...Ri}),setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Lr(t),{trans:a,setLocaleDefault:u}=Oi(n.value);u({map:{"dataset-control":{title:"Dataset Control"}}});const l={icon:c9,detail:$M,delete:rp},[s,f]=Bl(t.show),{getDatasets:y,getDatasetIds:x,removeDataset:b}=lv(n.value),M=Wt(()=>x().value);xi(M,()=>{A()},{deep:!0});function A(){L()}const P=Ca([]);function L(){P.value=y()}function O(z){IS([["addComponent",[z,n.value,{component:()=>lte,attr:{dataset:z},check:"detail-dataset"}]]],z,n.value,z)}function V(z){b(z)}return Er(()=>{A()}),(z,B)=>(xe(),Rt(re($i),Ui(Di(re(i))),{btn:nt(()=>[re(s)?rn("",!0):(xe(),Rt(re(ri),{key:0,onClick:B[0]||(B[0]=yr(U=>re(f)(),["stop"])),active:re(s),tooltip:re(a)("map.dataset-control.title")},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:l.icon},null,8,["path"])]),_:1},8,["active","tooltip"]))]),draggable:nt(U=>[je(re(n_),{containerId:U.containerId,show:re(s),"onUpdate:show":B[1]||(B[1]=Z=>yi(s)?s.value=Z:null),title:re(a)("map.dataset-control.title")},{title:nt(()=>[Wr(an(re(a)("map.dataset-control.title")),1)]),default:nt(()=>[Pe("div",ute,[(xe(!0),et(Fn,null,Or(P.value,Z=>(xe(),et("div",{key:Z.id},[Sn(z.$slots,"item",{item:Z},()=>[Pe("div",cte,[Pe("span",hte,an(Z.getName()),1),Pe("div",dte,[je(re(Br),{onClick:yr(te=>O(Z),["stop"])},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:l.detail},null,8,["path"])]),_:2},1032,["onClick"]),je(re(Br),{onClick:yr(te=>V(Z),["stop"])},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:l.delete},null,8,["path"])]),_:2},1032,["onClick"])])])],!0)]))),128))])]),_:2},1032,["containerId","show","title"])]),default:nt(()=>[Sn(z.$slots,"default",{},void 0,!0)]),_:3},16))}}),mte=_n(pte,[["__scopeId","data-v-eb4f9a5f"]]),gte={class:"menu-divider"},yte=An({__name:"menu-divider",props:{item:{},data:{}},setup(e){return(t,n)=>(xe(),et("div",gte))}}),vte=_n(yte,[["__scopeId","data-v-e88ddb4e"]]),_te=An({__name:"menu-item",props:{item:{},data:{},mapId:{}},setup(e){return(t,n)=>(xe(),Rt(re(Br),Qn(t.$attrs,{class:"menu-item",title:t.item.name}),{default:nt(()=>[t.item.icon?(xe(),Rt(re(Pn),{key:0,size:"14",type:"mdi",path:t.item.icon},null,8,["path"])):rn("",!0)]),_:1},16,["title"]))}}),bte=An({__name:"index",props:{item:{},data:{},mapId:{}},setup(e){const t=e,n=Wt(()=>{switch(t.item.type){case"divider":return vte}return _te});return(i,a)=>(xe(),Rt(ps(n.value),Qn({item:i.item,data:i.data},i.$attrs,{mapId:i.mapId}),null,16,["item","data","mapId"]))}}),xte={class:"identify-control-container"},Ate={class:"identify-control-header"},wte=["innerHTML"],Cte={class:"identify-control-body"},Ite={key:0,class:"identify-control-state"},Mte={class:"identify-control-state__content"},Ste={key:1,class:"identify-control-state"},Ete={class:"identify-control-state__content"},Tte={key:2,class:"identify-control-state"},Pte={class:"identify-control-state__content"},kte={class:"identify-control-list-item__container"},Lte=["title"],Dte={class:"identify-control-list-item__child-container"},Rte={class:"identify-control-child-item__action"},Ote={name:"inspect-control"},zte=An({...Ote,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean},immediately:{type:Boolean}},{...Ri}),setup(e){const t={icon:y9,boxSelect:R9,mapClick:u9},n=e,{mapId:i,moduleContainerProps:a}=Lr(n),{getAllComponentsByType:u,getDatasetIds:l}=lv(i.value),{setFeatureHighlight:s}=rw(i.value),{trans:f,setLocaleDefault:y}=Oi(i.value),{format:x}=SL(i.value);y({map:{identify:{title:"Identify",point:"Point",no_selection:"Please select a point on the map",no_data:"No data found",loading:"Loading..."}}});const b=Kt([]),M=Wt(()=>l().value);xi(M,()=>{P()},{deep:!0}),Er(()=>{P()});const A=Wt(()=>b.value);function P(){L()}function L(){b.value=u("identify")||[]}const O=Wt(()=>b.value.length>0),{add:V,remove:z,isActive:B}=Bm(i.value,new l_().setHandler(W)),{add:U,remove:Z,isActive:te}=Bm(i.value,new xY().setHandler(H)),Y=xu({latitude:0,longitude:0});function W(ft){te.value||(Mn($s,i.value,"multi").debug("onMapClick",ft),Y.latitude=ft.lngLat.lat,Y.longitude=ft.lngLat.lng,K(ft.point))}function H(ft){B.value||(Mn($s,i.value,"multi").debug("onBboxSelect",ft),en(),ft&&K(ft))}const ne=xu({items:[],loading:!1}),le=Wt(()=>{if(!Y)return"";const ft=x(Y);return ft.longitude+", &nbsp;"+ft.latitude}),Q=Wt(()=>Y.latitude!==0||Y.longitude!==0);function ce(ft){if(Mn($s,i.value,"multi").debug("onSelectFeatures",ft),ne.items=ft,n.immediately&&ft&&ft[0]&&ft[0].features&&ft[0].features[0]){const ot=ft[0].identify.getMenu("show-detail");ot&&pt(ft[0].identify,ot,ft[0].features[0].data)}}async function K(ft){ne.loading=!0;try{Mn($s,i.value,"multi").debug("onGetFeatures",ft);const ot=Date.now(),Pt=await HQ(A.value,i.value,ft),Lt=Date.now()-ot;Lt<500&&await new Promise(un=>setTimeout(un,500-Lt)),Mn($s,i.value,"multi").debug("onGetFeatures",Pt),ce(Pt.filter(un=>"features"in un&&un.features.length>0))}finally{ne.loading=!1}}const Le=Kt(n.show);function Ue(){Le.value=!Le.value,Tt()}function Be(){tt(),s(void 0,"identify"),ce([])}function tt(){n.immediately||(Ne(),en())}const ut=Kt(!1);function Tt(){ut.value?Ne():Ge()}function Ge(){ut.value=!0,V()}function Ne(){ut.value=!1,z()}const Dt=Kt(!1);function Bt(){Dt.value?en():St()}function St(){Dt.value=!0,U()}function en(){Dt.value=!1,setTimeout(()=>{Z()},500)}function pt(ft,ot,Pt){CS(ot,ft,i.value,Pt)}return Er(()=>{n.immediately&&Tt()}),(ft,ot)=>(xe(),Rt(re($i),Ui(Di(re(a))),{btn:nt(()=>[O.value?(xe(),Rt(re(ri),{key:0,tooltip:re(f)("map.identify.title"),onClick:ot[0]||(ot[0]=yr(Pt=>Ue(),["stop"])),active:Le.value},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:t.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):rn("",!0)]),draggable:nt(Pt=>[Le.value?(xe(),Rt(re(vc),Qn({key:0,show:Le.value,"onUpdate:show":ot[3]||(ot[3]=Lt=>Le.value=Lt)},Pt,{width:400,height:300,onClose:Be,title:re(f)("map.identify.title")}),{"extra-btn":nt(()=>[je(re(Br),{onClick:ot[1]||(ot[1]=yr(Lt=>Tt(),["stop"])),active:re(B),disabled:re(B)},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:t.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),je(re(Br),{onClick:ot[2]||(ot[2]=yr(Lt=>Bt(),["stop"])),active:re(te),disabled:re(te)},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:t.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:nt(()=>[Pe("div",xte,[Pe("div",Ate,[Pe("b",null,an(re(f)("map.identify.point"))+":",1),Pe("span",{innerHTML:le.value},null,8,wte)]),ot[6]||(ot[6]=Pe("hr",{class:"identify-control-separator"},null,-1)),Pe("div",Cte,[ne.loading?(xe(),et("div",Ite,[Pe("div",Mte,[ot[4]||(ot[4]=Pe("div",{class:"identify-control-state__loading"},null,-1)),Pe("span",null,an(re(f)("map.identify.loading")),1)])])):Q.value?ne.items.length===0?(xe(),et("div",Tte,[Pe("div",Pte,[Pe("span",null,an(re(f)("map.identify.no_data")),1)])])):(xe(!0),et(Fn,{key:3},Or(ne.items,Lt=>(xe(),et("div",{key:Lt.identify.id,class:"identify-control-list-item"},[Pe("div",kte,[Pe("div",{class:"identify-control-list-item__header",title:Lt.identify.getName()},an(Lt.identify.getName()||"---"),9,Lte),Pe("div",Dte,[(xe(!0),et(Fn,null,Or(Lt.features,un=>(xe(),et("div",{class:"identify-control-child-item",key:un.id},[Pe("span",null,an(un.name),1),ot[5]||(ot[5]=Pe("div",{class:"identify-control-child-item__spacer"},null,-1)),Pe("div",Rte,[(xe(!0),et(Fn,null,Or(Lt.identify.getMenus(),(Ie,$)=>(xe(),Rt(bte,{key:$,item:Ie,data:un,mapId:re(i),onClick:Te=>pt(Lt.identify,Ie,un.data)},null,8,["item","data","mapId","onClick"]))),128))])]))),128))])])]))),128)):(xe(),et("div",Ste,[Pe("div",Ete,[Pe("span",null,an(re(f)("map.identify.no_selection")),1)])]))])])]),_:2},1040,["show","title"])):rn("",!0)]),_:1},16))}}),Fte=_n(zte,[["__scopeId","data-v-eca66096"]]),Bte={name:"inspect-show-first-control"},Nte=An({...Bte,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=e,{mapId:n}=Lr(t),{getAllComponentsByType:i,getDatasetIds:a}=lv(n.value),u=Kt([]),l=Wt(()=>a().value);xi(l,()=>{s()},{deep:!0}),Er(()=>{s()});function s(){f()}function f(){u.value=i("identify")||[]}const{add:y}=Bm(n.value,new l_().setHandler(x));function x(O){Mn($s,n.value,"getFirst").debug("onMapClick",O),P(O.point)}Mn($s,n.value,"getFirst").debug("init");const b=xu({items:[],loading:!1});function M(O){if(Mn($s,n.value,"getFirst").debug("onSelectFeatures",O),O&&"feature"in O&&O.feature){const V=O.identify.getMenu("show-detail");Mn($s,n.value,"getFirst").debug("onSelectFeatures",O,V),V&&L(O.identify,V,O.feature.data)}}const A=Wt(()=>u.value);async function P(O){Mn($s,n.value,"getFirst").debug("onGetFeatures",O),b.loading=!0;try{const V=await GQ(A.value,n.value,O);Mn($s,n.value,"getFirst").debug("onGetFeatures",V),M(V)}finally{b.loading=!1}}function L(O,V,z){CS(V,O,n.value,z)}return Er(()=>{y()}),(O,V)=>(xe(),et("div"))}}),Vte=An({__name:"LayerMenuDefaultHandle",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=e,{mapId:n,callMap:i}=Lr(t),{addComponent:a}=FL(n.value),{setFeatureHighlight:u}=rw(n.value);return mC("addComponent",(l,s,f)=>{a(f)}),mC("fitBounds",(l,s,f)=>{i(y=>{WA(y,f)})}),mC("highlight",(l,s,f)=>{u(f.detail,f.key,l)}),(l,s)=>(xe(),et("div"))}}),jte={key:0,class:"toggle-buttons-container"},Ute=An({__name:"ButtonToggleAllShow",props:{items:{}},setup(e,{expose:t}){const n=Kt(!0),i=Kt([!0,!0]);t({SvgIcon:Pn});const a=e,{callMap:u,mapId:l}=Lr(a),s=x=>{n.value=x;const b=n.value;u(M=>{a.items.forEach(A=>{A.show=b,Jf(A.getParent(),P=>md(P),[P=>{P.toggleShow(M,b)}])})})};function f(x,b){i.value[x]=b;const A=W4(l.value)[x];a.items.forEach(P=>{P.shows==null&&(P.shows=[!0,!0]),P.shows[x]=b,Jf(P.getParent(),L=>md(L),[L=>{L.toggleShow(A,b)}])})}const y=Kt(!1);return Er(()=>{y.value=Z4(l.value)}),(x,b)=>y.value?(xe(),et("div",jte,[je(re(Br),{class:ii({_active:i.value[0]}),onClick:b[0]||(b[0]=yr(M=>f(0,!i.value[0]),["stop"]))},{default:nt(()=>b[3]||(b[3]=[Pe("span",null,"#1",-1)])),_:1},8,["class"]),je(re(Br),{onClick:b[1]||(b[1]=yr(M=>f(1,!i.value[1]),["stop"])),class:ii({_active:i.value[1]})},{default:nt(()=>b[4]||(b[4]=[Pe("span",null,"#2",-1)])),_:1},8,["class"])])):(xe(),Rt(re(Br),{key:1,onClick:b[2]||(b[2]=yr(M=>s(!n.value),["stop"])),title:n.value?"Hin ton b cc lp":"n ton b cc lp"},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:n.value?re(UM):re(jM)},null,8,["path"])]),_:1},8,["title"]))}});var e6={exports:{}};const $te=q1(iz);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function mh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(n),!0).forEach(function(i){Hte(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function vx(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vx=function(t){return typeof t}:vx=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}function Hte(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iu(){return Iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Iu.apply(this,arguments)}function Gte(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,u;for(u=0;u<i.length;u++)a=i[u],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Zte(e,t){if(e==null)return{};var n=Gte(e,t),i,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)i=u[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Wte(e){return qte(e)||Kte(e)||Yte(e)||Xte()}function qte(e){if(Array.isArray(e))return RI(e)}function Kte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yte(e,t){if(e){if(typeof e=="string")return RI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RI(e,t)}}function RI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Xte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qte="1.14.0";function hd(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var bd=hd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u_=hd(/Edge/i),$P=hd(/firefox/i),r1=hd(/safari/i)&&!hd(/chrome/i)&&!hd(/android/i),t6=hd(/iP(ad|od|hone)/i),Jte=hd(/chrome/i)&&hd(/android/i),n6={capture:!1,passive:!1};function Vr(e,t,n){e.addEventListener(t,n,!bd&&n6)}function Rr(e,t,n){e.removeEventListener(t,n,!bd&&n6)}function Qx(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function ene(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function sc(e,t,n,i){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Qx(e,t):Qx(e,t))||i&&e===n)return e;if(e===n)break}while(e=ene(e))}return null}var HP=/\s+/g;function hs(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(HP," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(HP," ")}}function Hn(e,t,n){var i=e&&e.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=n+(typeof n=="string"?"":"px")}}function Sm(e,t){var n="";if(typeof e=="string")n=e;else do{var i=Hn(e,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function r6(e,t,n){if(e){var i=e.getElementsByTagName(t),a=0,u=i.length;if(n)for(;a<u;a++)n(i[a],a);return i}return[]}function oh(){var e=document.scrollingElement;return e||document.documentElement}function ns(e,t,n,i,a){if(!(!e.getBoundingClientRect&&e!==window)){var u,l,s,f,y,x,b;if(e!==window&&e.parentNode&&e!==oh()?(u=e.getBoundingClientRect(),l=u.top,s=u.left,f=u.bottom,y=u.right,x=u.height,b=u.width):(l=0,s=0,f=window.innerHeight,y=window.innerWidth,x=window.innerHeight,b=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!bd))do if(a&&a.getBoundingClientRect&&(Hn(a,"transform")!=="none"||n&&Hn(a,"position")!=="static")){var M=a.getBoundingClientRect();l-=M.top+parseInt(Hn(a,"border-top-width")),s-=M.left+parseInt(Hn(a,"border-left-width")),f=l+u.height,y=s+u.width;break}while(a=a.parentNode);if(i&&e!==window){var A=Sm(a||e),P=A&&A.a,L=A&&A.d;A&&(l/=L,s/=P,b/=P,x/=L,f=l+x,y=s+b)}return{top:l,left:s,bottom:f,right:y,width:b,height:x}}}function GP(e,t,n){for(var i=Ff(e,!0),a=ns(e)[t];i;){var u=ns(i)[n],l=void 0;if(l=a>=u,!l)return i;if(i===oh())break;i=Ff(i,!1)}return!1}function Gy(e,t,n,i){for(var a=0,u=0,l=e.children;u<l.length;){if(l[u].style.display!=="none"&&l[u]!==sr.ghost&&(i||l[u]!==sr.dragged)&&sc(l[u],n.draggable,e,!1)){if(a===t)return l[u];a++}u++}return null}function PS(e,t){for(var n=e.lastElementChild;n&&(n===sr.ghost||Hn(n,"display")==="none"||t&&!Qx(n,t));)n=n.previousElementSibling;return n||null}function Ms(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==sr.clone&&(!t||Qx(e,t))&&n++;return n}function ZP(e){var t=0,n=0,i=oh();if(e)do{var a=Sm(e),u=a.a,l=a.d;t+=e.scrollLeft*u,n+=e.scrollTop*l}while(e!==i&&(e=e.parentNode));return[t,n]}function tne(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n)}return-1}function Ff(e,t){if(!e||!e.getBoundingClientRect)return oh();var n=e,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=Hn(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return oh();if(i||t)return n;i=!0}}while(n=n.parentNode);return oh()}function nne(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function xC(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var i1;function i6(e,t){return function(){if(!i1){var n=arguments,i=this;n.length===1?e.call(i,n[0]):e.apply(i,n),i1=setTimeout(function(){i1=void 0},t)}}}function rne(){clearTimeout(i1),i1=void 0}function s6(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function kS(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function WP(e,t){Hn(e,"position","absolute"),Hn(e,"top",t.top),Hn(e,"left",t.left),Hn(e,"width",t.width),Hn(e,"height",t.height)}function AC(e){Hn(e,"position",""),Hn(e,"top",""),Hn(e,"left",""),Hn(e,"width",""),Hn(e,"height","")}var so="Sortable"+new Date().getTime();function ine(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(a){if(!(Hn(a,"display")==="none"||a===sr.ghost)){e.push({target:a,rect:ns(a)});var u=mh({},e[e.length-1].rect);if(a.thisAnimationDuration){var l=Sm(a,!0);l&&(u.top-=l.f,u.left-=l.e)}a.fromRect=u}})}},addAnimationState:function(i){e.push(i)},removeAnimationState:function(i){e.splice(tne(e,{target:i}),1)},animateAll:function(i){var a=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var u=!1,l=0;e.forEach(function(s){var f=0,y=s.target,x=y.fromRect,b=ns(y),M=y.prevFromRect,A=y.prevToRect,P=s.rect,L=Sm(y,!0);L&&(b.top-=L.f,b.left-=L.e),y.toRect=b,y.thisAnimationDuration&&xC(M,b)&&!xC(x,b)&&(P.top-b.top)/(P.left-b.left)===(x.top-b.top)/(x.left-b.left)&&(f=ane(P,M,A,a.options)),xC(b,x)||(y.prevFromRect=x,y.prevToRect=b,f||(f=a.options.animation),a.animate(y,P,b,f)),f&&(u=!0,l=Math.max(l,f),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0,y.prevFromRect=null,y.fromRect=null,y.prevToRect=null,y.thisAnimationDuration=null},f),y.thisAnimationDuration=f)}),clearTimeout(t),u?t=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),e=[]},animate:function(i,a,u,l){if(l){Hn(i,"transition",""),Hn(i,"transform","");var s=Sm(this.el),f=s&&s.a,y=s&&s.d,x=(a.left-u.left)/(f||1),b=(a.top-u.top)/(y||1);i.animatingX=!!x,i.animatingY=!!b,Hn(i,"transform","translate3d("+x+"px,"+b+"px,0)"),this.forRepaintDummy=sne(i),Hn(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),Hn(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Hn(i,"transition",""),Hn(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function sne(e){return e.offsetWidth}function ane(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}var Qg=[],wC={initializeByDefault:!0},c_={mount:function(t){for(var n in wC)wC.hasOwnProperty(n)&&!(n in t)&&(t[n]=wC[n]);Qg.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Qg.push(t)},pluginEvent:function(t,n,i){var a=this;this.eventCanceled=!1,i.cancel=function(){a.eventCanceled=!0};var u=t+"Global";Qg.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][u]&&n[l.pluginName][u](mh({sortable:n},i)),n.options[l.pluginName]&&n[l.pluginName][t]&&n[l.pluginName][t](mh({sortable:n},i)))})},initializePlugins:function(t,n,i,a){Qg.forEach(function(s){var f=s.pluginName;if(!(!t.options[f]&&!s.initializeByDefault)){var y=new s(t,n,t.options);y.sortable=t,y.options=t.options,t[f]=y,Iu(i,y.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var l=this.modifyOption(t,u,t.options[u]);typeof l<"u"&&(t.options[u]=l)}},getEventProperties:function(t,n){var i={};return Qg.forEach(function(a){typeof a.eventProperties=="function"&&Iu(i,a.eventProperties.call(n[a.pluginName],t))}),i},modifyOption:function(t,n,i){var a;return Qg.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[n]=="function"&&(a=u.optionListeners[n].call(t[u.pluginName],i))}),a}};function z0(e){var t=e.sortable,n=e.rootEl,i=e.name,a=e.targetEl,u=e.cloneEl,l=e.toEl,s=e.fromEl,f=e.oldIndex,y=e.newIndex,x=e.oldDraggableIndex,b=e.newDraggableIndex,M=e.originalEvent,A=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[so],!!t){var L,O=t.options,V="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!bd&&!u_?L=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(i,!0,!0)),L.to=l||n,L.from=s||n,L.item=a||n,L.clone=u,L.oldIndex=f,L.newIndex=y,L.oldDraggableIndex=x,L.newDraggableIndex=b,L.originalEvent=M,L.pullMode=A?A.lastPutMode:void 0;var z=mh(mh({},P),c_.getEventProperties(i,t));for(var B in z)L[B]=z[B];n&&n.dispatchEvent(L),O[V]&&O[V].call(t,L)}}var one=["evt"],il=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.evt,u=Zte(i,one);c_.pluginEvent.bind(sr)(t,n,mh({dragEl:xn,parentEl:Cs,ghostEl:_r,rootEl:ts,nextEl:vm,lastDownEl:_x,cloneEl:Is,cloneHidden:Rf,dragStarted:F0,putSortable:Fa,activeSortable:sr.active,originalEvent:a,oldIndex:xy,oldDraggableIndex:s1,newIndex:Ol,newDraggableIndex:Df,hideGhostForTarget:u6,unhideGhostForTarget:c6,cloneNowHidden:function(){Rf=!0},cloneNowShown:function(){Rf=!1},dispatchSortableEvent:function(s){Po({sortable:n,name:s,originalEvent:a})}},u))};function Po(e){z0(mh({putSortable:Fa,cloneEl:Is,targetEl:xn,rootEl:ts,oldIndex:xy,oldDraggableIndex:s1,newIndex:Ol,newDraggableIndex:Df},e))}var xn,Cs,_r,ts,vm,_x,Is,Rf,xy,Ol,s1,Df,Zb,Fa,uy=!1,Jx=!1,eA=[],fm,nc,CC,IC,qP,KP,F0,Jg,a1,o1=!1,Wb=!1,bx,eo,MC=[],OI=!1,tA=[],iw=typeof document<"u",qb=t6,YP=u_||bd?"cssFloat":"float",lne=iw&&!Jte&&!t6&&"draggable"in document.createElement("div"),a6=function(){if(iw){if(bd)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),o6=function(t,n){var i=Hn(t),a=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),u=Gy(t,0,n),l=Gy(t,1,n),s=u&&Hn(u),f=l&&Hn(l),y=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ns(u).width,x=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+ns(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&s.float&&s.float!=="none"){var b=s.float==="left"?"left":"right";return l&&(f.clear==="both"||f.clear===b)?"vertical":"horizontal"}return u&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||y>=a&&i[YP]==="none"||l&&i[YP]==="none"&&y+x>a)?"vertical":"horizontal"},une=function(t,n,i){var a=i?t.left:t.top,u=i?t.right:t.bottom,l=i?t.width:t.height,s=i?n.left:n.top,f=i?n.right:n.bottom,y=i?n.width:n.height;return a===s||u===f||a+l/2===s+y/2},cne=function(t,n){var i;return eA.some(function(a){var u=a[so].options.emptyInsertThreshold;if(!(!u||PS(a))){var l=ns(a),s=t>=l.left-u&&t<=l.right+u,f=n>=l.top-u&&n<=l.bottom+u;if(s&&f)return i=a}}),i},l6=function(t){function n(u,l){return function(s,f,y,x){var b=s.options.group.name&&f.options.group.name&&s.options.group.name===f.options.group.name;if(u==null&&(l||b))return!0;if(u==null||u===!1)return!1;if(l&&u==="clone")return u;if(typeof u=="function")return n(u(s,f,y,x),l)(s,f,y,x);var M=(l?s:f).options.group.name;return u===!0||typeof u=="string"&&u===M||u.join&&u.indexOf(M)>-1}}var i={},a=t.group;(!a||vx(a)!="object")&&(a={name:a}),i.name=a.name,i.checkPull=n(a.pull,!0),i.checkPut=n(a.put),i.revertClone=a.revertClone,t.group=i},u6=function(){!a6&&_r&&Hn(_r,"display","none")},c6=function(){!a6&&_r&&Hn(_r,"display","")};iw&&document.addEventListener("click",function(e){if(Jx)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Jx=!1,!1},!0);var pm=function(t){if(xn){t=t.touches?t.touches[0]:t;var n=cne(t.clientX,t.clientY);if(n){var i={};for(var a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[so]._onDragOver(i)}}},hne=function(t){xn&&xn.parentNode[so]._isOutsideThisEl(t.target)};function sr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Iu({},t),e[so]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return o6(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,s){l.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:sr.supportPointer!==!1&&"PointerEvent"in window&&!r1,emptyInsertThreshold:5};c_.initializePlugins(this,e,n);for(var i in n)!(i in t)&&(t[i]=n[i]);l6(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:lne,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Vr(e,"pointerdown",this._onTapStart):(Vr(e,"mousedown",this._onTapStart),Vr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Vr(e,"dragover",this),Vr(e,"dragenter",this)),eA.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Iu(this,ine())}sr.prototype={constructor:sr,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Jg=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,xn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,i=this.el,a=this.options,u=a.preventOnFilter,l=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(s||t).target,y=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,x=a.filter;if(_ne(i),!xn&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||a.disabled)&&!y.isContentEditable&&!(!this.nativeDraggable&&r1&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=sc(f,a.draggable,i,!1),!(f&&f.animated)&&_x!==f)){if(xy=Ms(f),s1=Ms(f,a.draggable),typeof x=="function"){if(x.call(this,t,f,this)){Po({sortable:n,rootEl:y,name:"filter",targetEl:f,toEl:i,fromEl:i}),il("filter",n,{evt:t}),u&&t.cancelable&&t.preventDefault();return}}else if(x&&(x=x.split(",").some(function(b){if(b=sc(y,b.trim(),i,!1),b)return Po({sortable:n,rootEl:b,name:"filter",targetEl:f,fromEl:i,toEl:i}),il("filter",n,{evt:t}),!0}),x)){u&&t.cancelable&&t.preventDefault();return}a.handle&&!sc(y,a.handle,i,!1)||this._prepareDragStart(t,s,f)}}},_prepareDragStart:function(t,n,i){var a=this,u=a.el,l=a.options,s=u.ownerDocument,f;if(i&&!xn&&i.parentNode===u){var y=ns(i);if(ts=u,xn=i,Cs=xn.parentNode,vm=xn.nextSibling,_x=i,Zb=l.group,sr.dragged=xn,fm={target:xn,clientX:(n||t).clientX,clientY:(n||t).clientY},qP=fm.clientX-y.left,KP=fm.clientY-y.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,xn.style["will-change"]="all",f=function(){if(il("delayEnded",a,{evt:t}),sr.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!$P&&a.nativeDraggable&&(xn.draggable=!0),a._triggerDragStart(t,n),Po({sortable:a,name:"choose",originalEvent:t}),hs(xn,l.chosenClass,!0)},l.ignore.split(",").forEach(function(x){r6(xn,x.trim(),SC)}),Vr(s,"dragover",pm),Vr(s,"mousemove",pm),Vr(s,"touchmove",pm),Vr(s,"mouseup",a._onDrop),Vr(s,"touchend",a._onDrop),Vr(s,"touchcancel",a._onDrop),$P&&this.nativeDraggable&&(this.options.touchStartThreshold=4,xn.draggable=!0),il("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(u_||bd))){if(sr.eventCanceled){this._onDrop();return}Vr(s,"mouseup",a._disableDelayedDrag),Vr(s,"touchend",a._disableDelayedDrag),Vr(s,"touchcancel",a._disableDelayedDrag),Vr(s,"mousemove",a._delayedDragTouchMoveHandler),Vr(s,"touchmove",a._delayedDragTouchMoveHandler),l.supportPointer&&Vr(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(f,l.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){xn&&SC(xn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Rr(t,"mouseup",this._disableDelayedDrag),Rr(t,"touchend",this._disableDelayedDrag),Rr(t,"touchcancel",this._disableDelayedDrag),Rr(t,"mousemove",this._delayedDragTouchMoveHandler),Rr(t,"touchmove",this._delayedDragTouchMoveHandler),Rr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Vr(document,"pointermove",this._onTouchMove):n?Vr(document,"touchmove",this._onTouchMove):Vr(document,"mousemove",this._onTouchMove):(Vr(xn,"dragend",this),Vr(ts,"dragstart",this._onDragStart));try{document.selection?xx(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(uy=!1,ts&&xn){il("dragStarted",this,{evt:n}),this.nativeDraggable&&Vr(document,"dragover",hne);var i=this.options;!t&&hs(xn,i.dragClass,!1),hs(xn,i.ghostClass,!0),sr.active=this,t&&this._appendGhost(),Po({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(nc){this._lastX=nc.clientX,this._lastY=nc.clientY,u6();for(var t=document.elementFromPoint(nc.clientX,nc.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(nc.clientX,nc.clientY),t!==n);)n=t;if(xn.parentNode[so]._isOutsideThisEl(t),n)do{if(n[so]){var i=void 0;if(i=n[so]._onDragOver({clientX:nc.clientX,clientY:nc.clientY,target:t,rootEl:n}),i&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);c6()}},_onTouchMove:function(t){if(fm){var n=this.options,i=n.fallbackTolerance,a=n.fallbackOffset,u=t.touches?t.touches[0]:t,l=_r&&Sm(_r,!0),s=_r&&l&&l.a,f=_r&&l&&l.d,y=qb&&eo&&ZP(eo),x=(u.clientX-fm.clientX+a.x)/(s||1)+(y?y[0]-MC[0]:0)/(s||1),b=(u.clientY-fm.clientY+a.y)/(f||1)+(y?y[1]-MC[1]:0)/(f||1);if(!sr.active&&!uy){if(i&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(_r){l?(l.e+=x-(CC||0),l.f+=b-(IC||0)):l={a:1,b:0,c:0,d:1,e:x,f:b};var M="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");Hn(_r,"webkitTransform",M),Hn(_r,"mozTransform",M),Hn(_r,"msTransform",M),Hn(_r,"transform",M),CC=x,IC=b,nc=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!_r){var t=this.options.fallbackOnBody?document.body:ts,n=ns(xn,!0,qb,!0,t),i=this.options;if(qb){for(eo=t;Hn(eo,"position")==="static"&&Hn(eo,"transform")==="none"&&eo!==document;)eo=eo.parentNode;eo!==document.body&&eo!==document.documentElement?(eo===document&&(eo=oh()),n.top+=eo.scrollTop,n.left+=eo.scrollLeft):eo=oh(),MC=ZP(eo)}_r=xn.cloneNode(!0),hs(_r,i.ghostClass,!1),hs(_r,i.fallbackClass,!0),hs(_r,i.dragClass,!0),Hn(_r,"transition",""),Hn(_r,"transform",""),Hn(_r,"box-sizing","border-box"),Hn(_r,"margin",0),Hn(_r,"top",n.top),Hn(_r,"left",n.left),Hn(_r,"width",n.width),Hn(_r,"height",n.height),Hn(_r,"opacity","0.8"),Hn(_r,"position",qb?"absolute":"fixed"),Hn(_r,"zIndex","100000"),Hn(_r,"pointerEvents","none"),sr.ghost=_r,t.appendChild(_r),Hn(_r,"transform-origin",qP/parseInt(_r.style.width)*100+"% "+KP/parseInt(_r.style.height)*100+"%")}},_onDragStart:function(t,n){var i=this,a=t.dataTransfer,u=i.options;if(il("dragStart",this,{evt:t}),sr.eventCanceled){this._onDrop();return}il("setupClone",this),sr.eventCanceled||(Is=kS(xn),Is.draggable=!1,Is.style["will-change"]="",this._hideClone(),hs(Is,this.options.chosenClass,!1),sr.clone=Is),i.cloneId=xx(function(){il("clone",i),!sr.eventCanceled&&(i.options.removeCloneOnHide||ts.insertBefore(Is,xn),i._hideClone(),Po({sortable:i,name:"clone"}))}),!n&&hs(xn,u.dragClass,!0),n?(Jx=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Rr(document,"mouseup",i._onDrop),Rr(document,"touchend",i._onDrop),Rr(document,"touchcancel",i._onDrop),a&&(a.effectAllowed="move",u.setData&&u.setData.call(i,a,xn)),Vr(document,"drop",i),Hn(xn,"transform","translateZ(0)")),uy=!0,i._dragStartId=xx(i._dragStarted.bind(i,n,t)),Vr(document,"selectstart",i),F0=!0,r1&&Hn(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,i=t.target,a,u,l,s=this.options,f=s.group,y=sr.active,x=Zb===f,b=s.sort,M=Fa||y,A,P=this,L=!1;if(OI)return;function O(tt,ut){il(tt,P,mh({evt:t,isOwner:x,axis:A?"vertical":"horizontal",revert:l,dragRect:a,targetRect:u,canSort:b,fromSortable:M,target:i,completed:z,onMove:function(Ge,Ne){return Kb(ts,n,xn,a,Ge,ns(Ge),t,Ne)},changed:B},ut))}function V(){O("dragOverAnimationCapture"),P.captureAnimationState(),P!==M&&M.captureAnimationState()}function z(tt){return O("dragOverCompleted",{insertion:tt}),tt&&(x?y._hideClone():y._showClone(P),P!==M&&(hs(xn,Fa?Fa.options.ghostClass:y.options.ghostClass,!1),hs(xn,s.ghostClass,!0)),Fa!==P&&P!==sr.active?Fa=P:P===sr.active&&Fa&&(Fa=null),M===P&&(P._ignoreWhileAnimating=i),P.animateAll(function(){O("dragOverAnimationComplete"),P._ignoreWhileAnimating=null}),P!==M&&(M.animateAll(),M._ignoreWhileAnimating=null)),(i===xn&&!xn.animated||i===n&&!i.animated)&&(Jg=null),!s.dragoverBubble&&!t.rootEl&&i!==document&&(xn.parentNode[so]._isOutsideThisEl(t.target),!tt&&pm(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),L=!0}function B(){Ol=Ms(xn),Df=Ms(xn,s.draggable),Po({sortable:P,name:"change",toEl:n,newIndex:Ol,newDraggableIndex:Df,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=sc(i,s.draggable,n,!0),O("dragOver"),sr.eventCanceled)return L;if(xn.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||P._ignoreWhileAnimating===i)return z(!1);if(Jx=!1,y&&!s.disabled&&(x?b||(l=Cs!==ts):Fa===this||(this.lastPutMode=Zb.checkPull(this,y,xn,t))&&f.checkPut(this,y,xn,t))){if(A=this._getDirection(t,i)==="vertical",a=ns(xn),O("dragOverValid"),sr.eventCanceled)return L;if(l)return Cs=ts,V(),this._hideClone(),O("revert"),sr.eventCanceled||(vm?ts.insertBefore(xn,vm):ts.appendChild(xn)),z(!0);var U=PS(n,s.draggable);if(!U||mne(t,A,this)&&!U.animated){if(U===xn)return z(!1);if(U&&n===t.target&&(i=U),i&&(u=ns(i)),Kb(ts,n,xn,a,i,u,t,!!i)!==!1)return V(),n.appendChild(xn),Cs=n,B(),z(!0)}else if(U&&pne(t,A,this)){var Z=Gy(n,0,s,!0);if(Z===xn)return z(!1);if(i=Z,u=ns(i),Kb(ts,n,xn,a,i,u,t,!1)!==!1)return V(),n.insertBefore(xn,Z),Cs=n,B(),z(!0)}else if(i.parentNode===n){u=ns(i);var te=0,Y,W=xn.parentNode!==n,H=!une(xn.animated&&xn.toRect||a,i.animated&&i.toRect||u,A),ne=A?"top":"left",le=GP(i,"top","top")||GP(xn,"top","top"),Q=le?le.scrollTop:void 0;Jg!==i&&(Y=u[ne],o1=!1,Wb=!H&&s.invertSwap||W),te=gne(t,i,u,A,H?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Wb,Jg===i);var ce;if(te!==0){var K=Ms(xn);do K-=te,ce=Cs.children[K];while(ce&&(Hn(ce,"display")==="none"||ce===_r))}if(te===0||ce===i)return z(!1);Jg=i,a1=te;var Le=i.nextElementSibling,Ue=!1;Ue=te===1;var Be=Kb(ts,n,xn,a,i,u,t,Ue);if(Be!==!1)return(Be===1||Be===-1)&&(Ue=Be===1),OI=!0,setTimeout(fne,30),V(),Ue&&!Le?n.appendChild(xn):i.parentNode.insertBefore(xn,Ue?Le:i),le&&s6(le,0,Q-le.scrollTop),Cs=xn.parentNode,Y!==void 0&&!Wb&&(bx=Math.abs(Y-ns(i)[ne])),B(),z(!0)}if(n.contains(xn))return z(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Rr(document,"mousemove",this._onTouchMove),Rr(document,"touchmove",this._onTouchMove),Rr(document,"pointermove",this._onTouchMove),Rr(document,"dragover",pm),Rr(document,"mousemove",pm),Rr(document,"touchmove",pm)},_offUpEvents:function(){var t=this.el.ownerDocument;Rr(t,"mouseup",this._onDrop),Rr(t,"touchend",this._onDrop),Rr(t,"pointerup",this._onDrop),Rr(t,"touchcancel",this._onDrop),Rr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,i=this.options;if(Ol=Ms(xn),Df=Ms(xn,i.draggable),il("drop",this,{evt:t}),Cs=xn&&xn.parentNode,Ol=Ms(xn),Df=Ms(xn,i.draggable),sr.eventCanceled){this._nulling();return}uy=!1,Wb=!1,o1=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),zI(this.cloneId),zI(this._dragStartId),this.nativeDraggable&&(Rr(document,"drop",this),Rr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),r1&&Hn(document.body,"user-select",""),Hn(xn,"transform",""),t&&(F0&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),_r&&_r.parentNode&&_r.parentNode.removeChild(_r),(ts===Cs||Fa&&Fa.lastPutMode!=="clone")&&Is&&Is.parentNode&&Is.parentNode.removeChild(Is),xn&&(this.nativeDraggable&&Rr(xn,"dragend",this),SC(xn),xn.style["will-change"]="",F0&&!uy&&hs(xn,Fa?Fa.options.ghostClass:this.options.ghostClass,!1),hs(xn,this.options.chosenClass,!1),Po({sortable:this,name:"unchoose",toEl:Cs,newIndex:null,newDraggableIndex:null,originalEvent:t}),ts!==Cs?(Ol>=0&&(Po({rootEl:Cs,name:"add",toEl:Cs,fromEl:ts,originalEvent:t}),Po({sortable:this,name:"remove",toEl:Cs,originalEvent:t}),Po({rootEl:Cs,name:"sort",toEl:Cs,fromEl:ts,originalEvent:t}),Po({sortable:this,name:"sort",toEl:Cs,originalEvent:t})),Fa&&Fa.save()):Ol!==xy&&Ol>=0&&(Po({sortable:this,name:"update",toEl:Cs,originalEvent:t}),Po({sortable:this,name:"sort",toEl:Cs,originalEvent:t})),sr.active&&((Ol==null||Ol===-1)&&(Ol=xy,Df=s1),Po({sortable:this,name:"end",toEl:Cs,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){il("nulling",this),ts=xn=Cs=_r=vm=Is=_x=Rf=fm=nc=F0=Ol=Df=xy=s1=Jg=a1=Fa=Zb=sr.dragged=sr.ghost=sr.clone=sr.active=null,tA.forEach(function(t){t.checked=!0}),tA.length=CC=IC=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":xn&&(this._onDragOver(t),dne(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,i=this.el.children,a=0,u=i.length,l=this.options;a<u;a++)n=i[a],sc(n,l.draggable,this.el,!1)&&t.push(n.getAttribute(l.dataIdAttr)||vne(n));return t},sort:function(t,n){var i={},a=this.el;this.toArray().forEach(function(u,l){var s=a.children[l];sc(s,this.options.draggable,a,!1)&&(i[u]=s)},this),n&&this.captureAnimationState(),t.forEach(function(u){i[u]&&(a.removeChild(i[u]),a.appendChild(i[u]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return sc(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var i=this.options;if(n===void 0)return i[t];var a=c_.modifyOption(this,t,n);typeof a<"u"?i[t]=a:i[t]=n,t==="group"&&l6(i)},destroy:function(){il("destroy",this);var t=this.el;t[so]=null,Rr(t,"mousedown",this._onTapStart),Rr(t,"touchstart",this._onTapStart),Rr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Rr(t,"dragover",this),Rr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),eA.splice(eA.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Rf){if(il("hideClone",this),sr.eventCanceled)return;Hn(Is,"display","none"),this.options.removeCloneOnHide&&Is.parentNode&&Is.parentNode.removeChild(Is),Rf=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Rf){if(il("showClone",this),sr.eventCanceled)return;xn.parentNode==ts&&!this.options.group.revertClone?ts.insertBefore(Is,xn):vm?ts.insertBefore(Is,vm):ts.appendChild(Is),this.options.group.revertClone&&this.animate(xn,Is),Hn(Is,"display",""),Rf=!1}}};function dne(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Kb(e,t,n,i,a,u,l,s){var f,y=e[so],x=y.options.onMove,b;return window.CustomEvent&&!bd&&!u_?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=i,f.related=a||t,f.relatedRect=u||ns(t),f.willInsertAfter=s,f.originalEvent=l,e.dispatchEvent(f),x&&(b=x.call(y,f,l)),b}function SC(e){e.draggable=!1}function fne(){OI=!1}function pne(e,t,n){var i=ns(Gy(n.el,0,n.options,!0)),a=10;return t?e.clientX<i.left-a||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-a||e.clientY<i.bottom&&e.clientX<i.left}function mne(e,t,n){var i=ns(PS(n.el,n.options.draggable)),a=10;return t?e.clientX>i.right+a||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+a}function gne(e,t,n,i,a,u,l,s){var f=i?e.clientY:e.clientX,y=i?n.height:n.width,x=i?n.top:n.left,b=i?n.bottom:n.right,M=!1;if(!l){if(s&&bx<y*a){if(!o1&&(a1===1?f>x+y*u/2:f<b-y*u/2)&&(o1=!0),o1)M=!0;else if(a1===1?f<x+bx:f>b-bx)return-a1}else if(f>x+y*(1-a)/2&&f<b-y*(1-a)/2)return yne(t)}return M=M||l,M&&(f<x+y*u/2||f>b-y*u/2)?f>x+y/2?1:-1:0}function yne(e){return Ms(xn)<Ms(e)?1:-1}function vne(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function _ne(e){tA.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&tA.push(i)}}function xx(e){return setTimeout(e,0)}function zI(e){return clearTimeout(e)}iw&&Vr(document,"touchmove",function(e){(sr.active||uy)&&e.cancelable&&e.preventDefault()});sr.utils={on:Vr,off:Rr,css:Hn,find:r6,is:function(t,n){return!!sc(t,n,t,!1)},extend:nne,throttle:i6,closest:sc,toggleClass:hs,clone:kS,index:Ms,nextTick:xx,cancelNextTick:zI,detectDirection:o6,getChild:Gy};sr.get=function(e){return e[so]};sr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(sr.utils=mh(mh({},sr.utils),i.utils)),c_.mount(i)})};sr.create=function(e,t){return new sr(e,t)};sr.version=Qte;var js=[],B0,FI,BI=!1,EC,TC,nA,N0;function bne(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?Vr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Vr(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Vr(document,"touchmove",this._handleFallbackAutoScroll):Vr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Rr(document,"dragover",this._handleAutoScroll):(Rr(document,"pointermove",this._handleFallbackAutoScroll),Rr(document,"touchmove",this._handleFallbackAutoScroll),Rr(document,"mousemove",this._handleFallbackAutoScroll)),XP(),Ax(),rne()},nulling:function(){nA=FI=B0=BI=N0=EC=TC=null,js.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var a=this,u=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(u,l);if(nA=n,i||this.options.forceAutoScrollFallback||u_||bd||r1){PC(n,this.options,s,i);var f=Ff(s,!0);BI&&(!N0||u!==EC||l!==TC)&&(N0&&XP(),N0=setInterval(function(){var y=Ff(document.elementFromPoint(u,l),!0);y!==f&&(f=y,Ax()),PC(n,a.options,y,i)},10),EC=u,TC=l)}else{if(!this.options.bubbleScroll||Ff(s,!0)===oh()){Ax();return}PC(n,this.options,Ff(s,!1),!1)}}},Iu(e,{pluginName:"scroll",initializeByDefault:!0})}function Ax(){js.forEach(function(e){clearInterval(e.pid)}),js=[]}function XP(){clearInterval(N0)}var PC=i6(function(e,t,n,i){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,f=oh(),y=!1,x;FI!==n&&(FI=n,Ax(),B0=t.scroll,x=t.scrollFn,B0===!0&&(B0=Ff(n,!0)));var b=0,M=B0;do{var A=M,P=ns(A),L=P.top,O=P.bottom,V=P.left,z=P.right,B=P.width,U=P.height,Z=void 0,te=void 0,Y=A.scrollWidth,W=A.scrollHeight,H=Hn(A),ne=A.scrollLeft,le=A.scrollTop;A===f?(Z=B<Y&&(H.overflowX==="auto"||H.overflowX==="scroll"||H.overflowX==="visible"),te=U<W&&(H.overflowY==="auto"||H.overflowY==="scroll"||H.overflowY==="visible")):(Z=B<Y&&(H.overflowX==="auto"||H.overflowX==="scroll"),te=U<W&&(H.overflowY==="auto"||H.overflowY==="scroll"));var Q=Z&&(Math.abs(z-a)<=l&&ne+B<Y)-(Math.abs(V-a)<=l&&!!ne),ce=te&&(Math.abs(O-u)<=l&&le+U<W)-(Math.abs(L-u)<=l&&!!le);if(!js[b])for(var K=0;K<=b;K++)js[K]||(js[K]={});(js[b].vx!=Q||js[b].vy!=ce||js[b].el!==A)&&(js[b].el=A,js[b].vx=Q,js[b].vy=ce,clearInterval(js[b].pid),(Q!=0||ce!=0)&&(y=!0,js[b].pid=setInterval((function(){i&&this.layer===0&&sr.active._onTouchMove(nA);var Le=js[this.layer].vy?js[this.layer].vy*s:0,Ue=js[this.layer].vx?js[this.layer].vx*s:0;typeof x=="function"&&x.call(sr.dragged.parentNode[so],Ue,Le,e,nA,js[this.layer].el)!=="continue"||s6(js[this.layer].el,Ue,Le)}).bind({layer:b}),24))),b++}while(t.bubbleScroll&&M!==f&&(M=Ff(M,!1)));BI=y}},30),h6=function(t){var n=t.originalEvent,i=t.putSortable,a=t.dragEl,u=t.activeSortable,l=t.dispatchSortableEvent,s=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var y=i||u;s();var x=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,b=document.elementFromPoint(x.clientX,x.clientY);f(),y&&!y.el.contains(b)&&(l("spill"),this.onSpill({dragEl:a,putSortable:i}))}};function LS(){}LS.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var a=Gy(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:h6};Iu(LS,{pluginName:"revertOnSpill"});function DS(){}DS.prototype={onSpill:function(t){var n=t.dragEl,i=t.putSortable,a=i||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:h6};Iu(DS,{pluginName:"removeOnSpill"});var hu;function xne(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var i=n.dragEl;hu=i},dragOverValid:function(n){var i=n.completed,a=n.target,u=n.onMove,l=n.activeSortable,s=n.changed,f=n.cancel;if(l.options.swap){var y=this.sortable.el,x=this.options;if(a&&a!==y){var b=hu;u(a)!==!1?(hs(a,x.swapClass,!0),hu=a):hu=null,b&&b!==hu&&hs(b,x.swapClass,!1)}s(),i(!0),f()}},drop:function(n){var i=n.activeSortable,a=n.putSortable,u=n.dragEl,l=a||this.sortable,s=this.options;hu&&hs(hu,s.swapClass,!1),hu&&(s.swap||a&&a.options.swap)&&u!==hu&&(l.captureAnimationState(),l!==i&&i.captureAnimationState(),Ane(u,hu),l.animateAll(),l!==i&&i.animateAll())},nulling:function(){hu=null}},Iu(e,{pluginName:"swap",eventProperties:function(){return{swapItem:hu}}})}function Ane(e,t){var n=e.parentNode,i=t.parentNode,a,u;!n||!i||n.isEqualNode(t)||i.isEqualNode(e)||(a=Ms(e),u=Ms(t),n.isEqualNode(i)&&a<u&&u++,n.insertBefore(t,n.children[a]),i.insertBefore(e,i.children[u]))}var dr=[],Rl=[],I0,rc,M0=!1,sl=!1,ey=!1,Ni,S0,Yb;function wne(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?Vr(document,"pointerup",this._deselectMultiDrag):(Vr(document,"mouseup",this._deselectMultiDrag),Vr(document,"touchend",this._deselectMultiDrag)),Vr(document,"keydown",this._checkKeyDown),Vr(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(a,u){var l="";dr.length&&rc===t?dr.forEach(function(s,f){l+=(f?", ":"")+s.textContent}):l=u.textContent,a.setData("Text",l)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var i=n.dragEl;Ni=i},delayEnded:function(){this.isMultiDrag=~dr.indexOf(Ni)},setupClone:function(n){var i=n.sortable,a=n.cancel;if(this.isMultiDrag){for(var u=0;u<dr.length;u++)Rl.push(kS(dr[u])),Rl[u].sortableIndex=dr[u].sortableIndex,Rl[u].draggable=!1,Rl[u].style["will-change"]="",hs(Rl[u],this.options.selectedClass,!1),dr[u]===Ni&&hs(Rl[u],this.options.chosenClass,!1);i._hideClone(),a()}},clone:function(n){var i=n.sortable,a=n.rootEl,u=n.dispatchSortableEvent,l=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||dr.length&&rc===i&&(QP(!0,a),u("clone"),l()))},showClone:function(n){var i=n.cloneNowShown,a=n.rootEl,u=n.cancel;this.isMultiDrag&&(QP(!1,a),Rl.forEach(function(l){Hn(l,"display","")}),i(),Yb=!1,u())},hideClone:function(n){var i=this;n.sortable;var a=n.cloneNowHidden,u=n.cancel;this.isMultiDrag&&(Rl.forEach(function(l){Hn(l,"display","none"),i.options.removeCloneOnHide&&l.parentNode&&l.parentNode.removeChild(l)}),a(),Yb=!0,u())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&rc&&rc.multiDrag._deselectMultiDrag(),dr.forEach(function(i){i.sortableIndex=Ms(i)}),dr=dr.sort(function(i,a){return i.sortableIndex-a.sortableIndex}),ey=!0},dragStarted:function(n){var i=this,a=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){dr.forEach(function(l){l!==Ni&&Hn(l,"position","absolute")});var u=ns(Ni,!1,!0,!0);dr.forEach(function(l){l!==Ni&&WP(l,u)}),sl=!0,M0=!0}a.animateAll(function(){sl=!1,M0=!1,i.options.animation&&dr.forEach(function(l){AC(l)}),i.options.sort&&Xb()})}},dragOver:function(n){var i=n.target,a=n.completed,u=n.cancel;sl&&~dr.indexOf(i)&&(a(!1),u())},revert:function(n){var i=n.fromSortable,a=n.rootEl,u=n.sortable,l=n.dragRect;dr.length>1&&(dr.forEach(function(s){u.addAnimationState({target:s,rect:sl?ns(s):l}),AC(s),s.fromRect=l,i.removeAnimationState(s)}),sl=!1,Cne(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(n){var i=n.sortable,a=n.isOwner,u=n.insertion,l=n.activeSortable,s=n.parentEl,f=n.putSortable,y=this.options;if(u){if(a&&l._hideClone(),M0=!1,y.animation&&dr.length>1&&(sl||!a&&!l.options.sort&&!f)){var x=ns(Ni,!1,!0,!0);dr.forEach(function(M){M!==Ni&&(WP(M,x),s.appendChild(M))}),sl=!0}if(!a)if(sl||Xb(),dr.length>1){var b=Yb;l._showClone(i),l.options.animation&&!Yb&&b&&Rl.forEach(function(M){l.addAnimationState({target:M,rect:S0}),M.fromRect=S0,M.thisAnimationDuration=null})}else l._showClone(i)}},dragOverAnimationCapture:function(n){var i=n.dragRect,a=n.isOwner,u=n.activeSortable;if(dr.forEach(function(s){s.thisAnimationDuration=null}),u.options.animation&&!a&&u.multiDrag.isMultiDrag){S0=Iu({},i);var l=Sm(Ni,!0);S0.top-=l.f,S0.left-=l.e}},dragOverAnimationComplete:function(){sl&&(sl=!1,Xb())},drop:function(n){var i=n.originalEvent,a=n.rootEl,u=n.parentEl,l=n.sortable,s=n.dispatchSortableEvent,f=n.oldIndex,y=n.putSortable,x=y||this.sortable;if(i){var b=this.options,M=u.children;if(!ey)if(b.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),hs(Ni,b.selectedClass,!~dr.indexOf(Ni)),~dr.indexOf(Ni))dr.splice(dr.indexOf(Ni),1),I0=null,z0({sortable:l,rootEl:a,name:"deselect",targetEl:Ni});else{if(dr.push(Ni),z0({sortable:l,rootEl:a,name:"select",targetEl:Ni}),i.shiftKey&&I0&&l.el.contains(I0)){var A=Ms(I0),P=Ms(Ni);if(~A&&~P&&A!==P){var L,O;for(P>A?(O=A,L=P):(O=P,L=A+1);O<L;O++)~dr.indexOf(M[O])||(hs(M[O],b.selectedClass,!0),dr.push(M[O]),z0({sortable:l,rootEl:a,name:"select",targetEl:M[O]}))}}else I0=Ni;rc=x}if(ey&&this.isMultiDrag){if(sl=!1,(u[so].options.sort||u!==a)&&dr.length>1){var V=ns(Ni),z=Ms(Ni,":not(."+this.options.selectedClass+")");if(!M0&&b.animation&&(Ni.thisAnimationDuration=null),x.captureAnimationState(),!M0&&(b.animation&&(Ni.fromRect=V,dr.forEach(function(U){if(U.thisAnimationDuration=null,U!==Ni){var Z=sl?ns(U):V;U.fromRect=Z,x.addAnimationState({target:U,rect:Z})}})),Xb(),dr.forEach(function(U){M[z]?u.insertBefore(U,M[z]):u.appendChild(U),z++}),f===Ms(Ni))){var B=!1;dr.forEach(function(U){if(U.sortableIndex!==Ms(U)){B=!0;return}}),B&&s("update")}dr.forEach(function(U){AC(U)}),x.animateAll()}rc=x}(a===u||y&&y.lastPutMode!=="clone")&&Rl.forEach(function(U){U.parentNode&&U.parentNode.removeChild(U)})}},nullingGlobal:function(){this.isMultiDrag=ey=!1,Rl.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Rr(document,"pointerup",this._deselectMultiDrag),Rr(document,"mouseup",this._deselectMultiDrag),Rr(document,"touchend",this._deselectMultiDrag),Rr(document,"keydown",this._checkKeyDown),Rr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof ey<"u"&&ey)&&rc===this.sortable&&!(n&&sc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;dr.length;){var i=dr[0];hs(i,this.options.selectedClass,!1),dr.shift(),z0({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:i})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Iu(e,{pluginName:"multiDrag",utils:{select:function(n){var i=n.parentNode[so];!i||!i.options.multiDrag||~dr.indexOf(n)||(rc&&rc!==i&&(rc.multiDrag._deselectMultiDrag(),rc=i),hs(n,i.options.selectedClass,!0),dr.push(n))},deselect:function(n){var i=n.parentNode[so],a=dr.indexOf(n);!i||!i.options.multiDrag||!~a||(hs(n,i.options.selectedClass,!1),dr.splice(a,1))}},eventProperties:function(){var n=this,i=[],a=[];return dr.forEach(function(u){i.push({multiDragElement:u,index:u.sortableIndex});var l;sl&&u!==Ni?l=-1:sl?l=Ms(u,":not(."+n.options.selectedClass+")"):l=Ms(u),a.push({multiDragElement:u,index:l})}),{items:Wte(dr),clones:[].concat(Rl),oldIndicies:i,newIndicies:a}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function Cne(e,t){dr.forEach(function(n,i){var a=t.children[n.sortableIndex+(e?Number(i):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function QP(e,t){Rl.forEach(function(n,i){var a=t.children[n.sortableIndex+(e?Number(i):0)];a?t.insertBefore(n,a):t.appendChild(n)})}function Xb(){dr.forEach(function(e){e!==Ni&&e.parentNode&&e.parentNode.removeChild(e)})}sr.mount(new bne);sr.mount(DS,LS);const Ine=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:wne,Sortable:sr,Swap:xne,default:sr},Symbol.toStringTag,{value:"Module"})),Mne=q1(Ine);(function(e,t){(function(i,a){e.exports=a($te,Mne)})(typeof self<"u"?self:la,function(n,i){return function(a){var u={};function l(s){if(u[s])return u[s].exports;var f=u[s]={i:s,l:!1,exports:{}};return a[s].call(f.exports,f,f.exports,l),f.l=!0,f.exports}return l.m=a,l.c=u,l.d=function(s,f,y){l.o(s,f)||Object.defineProperty(s,f,{enumerable:!0,get:y})},l.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},l.t=function(s,f){if(f&1&&(s=l(s)),f&8||f&4&&typeof s=="object"&&s&&s.__esModule)return s;var y=Object.create(null);if(l.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:s}),f&2&&typeof s!="string")for(var x in s)l.d(y,x,(function(b){return s[b]}).bind(null,x));return y},l.n=function(s){var f=s&&s.__esModule?function(){return s.default}:function(){return s};return l.d(f,"a",f),f},l.o=function(s,f){return Object.prototype.hasOwnProperty.call(s,f)},l.p="",l(l.s="fb15")}({"00ee":function(a,u,l){var s=l("b622"),f=s("toStringTag"),y={};y[f]="z",a.exports=String(y)==="[object z]"},"0366":function(a,u,l){var s=l("1c0b");a.exports=function(f,y,x){if(s(f),y===void 0)return f;switch(x){case 0:return function(){return f.call(y)};case 1:return function(b){return f.call(y,b)};case 2:return function(b,M){return f.call(y,b,M)};case 3:return function(b,M,A){return f.call(y,b,M,A)}}return function(){return f.apply(y,arguments)}}},"057f":function(a,u,l){var s=l("fc6a"),f=l("241c").f,y={}.toString,x=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],b=function(M){try{return f(M)}catch{return x.slice()}};a.exports.f=function(A){return x&&y.call(A)=="[object Window]"?b(A):f(s(A))}},"06cf":function(a,u,l){var s=l("83ab"),f=l("d1e7"),y=l("5c6c"),x=l("fc6a"),b=l("c04e"),M=l("5135"),A=l("0cfb"),P=Object.getOwnPropertyDescriptor;u.f=s?P:function(O,V){if(O=x(O),V=b(V,!0),A)try{return P(O,V)}catch{}if(M(O,V))return y(!f.f.call(O,V),O[V])}},"0cfb":function(a,u,l){var s=l("83ab"),f=l("d039"),y=l("cc12");a.exports=!s&&!f(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(a,u,l){var s=l("23e7"),f=l("d58f").left,y=l("a640"),x=l("ae40"),b=y("reduce"),M=x("reduce",{1:0});s({target:"Array",proto:!0,forced:!b||!M},{reduce:function(P){return f(this,P,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(a,u,l){var s=l("c6b6"),f=l("9263");a.exports=function(y,x){var b=y.exec;if(typeof b=="function"){var M=b.call(y,x);if(typeof M!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return M}if(s(y)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(y,x)}},"159b":function(a,u,l){var s=l("da84"),f=l("fdbc"),y=l("17c2"),x=l("9112");for(var b in f){var M=s[b],A=M&&M.prototype;if(A&&A.forEach!==y)try{x(A,"forEach",y)}catch{A.forEach=y}}},"17c2":function(a,u,l){var s=l("b727").forEach,f=l("a640"),y=l("ae40"),x=f("forEach"),b=y("forEach");a.exports=!x||!b?function(A){return s(this,A,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(a,u,l){var s=l("d066");a.exports=s("document","documentElement")},"1c0b":function(a,u){a.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},"1c7e":function(a,u,l){var s=l("b622"),f=s("iterator"),y=!1;try{var x=0,b={next:function(){return{done:!!x++}},return:function(){y=!0}};b[f]=function(){return this},Array.from(b,function(){throw 2})}catch{}a.exports=function(M,A){if(!A&&!y)return!1;var P=!1;try{var L={};L[f]=function(){return{next:function(){return{done:P=!0}}}},M(L)}catch{}return P}},"1d80":function(a,u){a.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},"1dde":function(a,u,l){var s=l("d039"),f=l("b622"),y=l("2d00"),x=f("species");a.exports=function(b){return y>=51||!s(function(){var M=[],A=M.constructor={};return A[x]=function(){return{foo:1}},M[b](Boolean).foo!==1})}},"23cb":function(a,u,l){var s=l("a691"),f=Math.max,y=Math.min;a.exports=function(x,b){var M=s(x);return M<0?f(M+b,0):y(M,b)}},"23e7":function(a,u,l){var s=l("da84"),f=l("06cf").f,y=l("9112"),x=l("6eeb"),b=l("ce4e"),M=l("e893"),A=l("94ca");a.exports=function(P,L){var O=P.target,V=P.global,z=P.stat,B,U,Z,te,Y,W;if(V?U=s:z?U=s[O]||b(O,{}):U=(s[O]||{}).prototype,U)for(Z in L){if(Y=L[Z],P.noTargetGet?(W=f(U,Z),te=W&&W.value):te=U[Z],B=A(V?Z:O+(z?".":"#")+Z,P.forced),!B&&te!==void 0){if(typeof Y==typeof te)continue;M(Y,te)}(P.sham||te&&te.sham)&&y(Y,"sham",!0),x(U,Z,Y,P)}}},"241c":function(a,u,l){var s=l("ca84"),f=l("7839"),y=f.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(b){return s(b,y)}},"25f0":function(a,u,l){var s=l("6eeb"),f=l("825a"),y=l("d039"),x=l("ad6d"),b="toString",M=RegExp.prototype,A=M[b],P=y(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),L=A.name!=b;(P||L)&&s(RegExp.prototype,b,function(){var V=f(this),z=String(V.source),B=V.flags,U=String(B===void 0&&V instanceof RegExp&&!("flags"in M)?x.call(V):B);return"/"+z+"/"+U},{unsafe:!0})},"2ca0":function(a,u,l){var s=l("23e7"),f=l("06cf").f,y=l("50c4"),x=l("5a34"),b=l("1d80"),M=l("ab13"),A=l("c430"),P="".startsWith,L=Math.min,O=M("startsWith"),V=!A&&!O&&!!function(){var z=f(String.prototype,"startsWith");return z&&!z.writable}();s({target:"String",proto:!0,forced:!V&&!O},{startsWith:function(B){var U=String(b(this));x(B);var Z=y(L(arguments.length>1?arguments[1]:void 0,U.length)),te=String(B);return P?P.call(U,te,Z):U.slice(Z,Z+te.length)===te}})},"2d00":function(a,u,l){var s=l("da84"),f=l("342f"),y=s.process,x=y&&y.versions,b=x&&x.v8,M,A;b?(M=b.split("."),A=M[0]+M[1]):f&&(M=f.match(/Edge\/(\d+)/),(!M||M[1]>=74)&&(M=f.match(/Chrome\/(\d+)/),M&&(A=M[1]))),a.exports=A&&+A},"342f":function(a,u,l){var s=l("d066");a.exports=s("navigator","userAgent")||""},"35a1":function(a,u,l){var s=l("f5df"),f=l("3f8c"),y=l("b622"),x=y("iterator");a.exports=function(b){if(b!=null)return b[x]||b["@@iterator"]||f[s(b)]}},"37e8":function(a,u,l){var s=l("83ab"),f=l("9bf2"),y=l("825a"),x=l("df75");a.exports=s?Object.defineProperties:function(M,A){y(M);for(var P=x(A),L=P.length,O=0,V;L>O;)f.f(M,V=P[O++],A[V]);return M}},"3bbe":function(a,u,l){var s=l("861d");a.exports=function(f){if(!s(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(a,u,l){var s=l("6547").charAt,f=l("69f3"),y=l("7dd0"),x="String Iterator",b=f.set,M=f.getterFor(x);y(String,"String",function(A){b(this,{type:x,string:String(A),index:0})},function(){var P=M(this),L=P.string,O=P.index,V;return O>=L.length?{value:void 0,done:!0}:(V=s(L,O),P.index+=V.length,{value:V,done:!1})})},"3f8c":function(a,u){a.exports={}},4160:function(a,u,l){var s=l("23e7"),f=l("17c2");s({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(a,u,l){var s=l("da84");a.exports=s},"44ad":function(a,u,l){var s=l("d039"),f=l("c6b6"),y="".split;a.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(x){return f(x)=="String"?y.call(x,""):Object(x)}:Object},"44d2":function(a,u,l){var s=l("b622"),f=l("7c73"),y=l("9bf2"),x=s("unscopables"),b=Array.prototype;b[x]==null&&y.f(b,x,{configurable:!0,value:f(null)}),a.exports=function(M){b[x][M]=!0}},"44e7":function(a,u,l){var s=l("861d"),f=l("c6b6"),y=l("b622"),x=y("match");a.exports=function(b){var M;return s(b)&&((M=b[x])!==void 0?!!M:f(b)=="RegExp")}},4930:function(a,u,l){var s=l("d039");a.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"4d64":function(a,u,l){var s=l("fc6a"),f=l("50c4"),y=l("23cb"),x=function(b){return function(M,A,P){var L=s(M),O=f(L.length),V=y(P,O),z;if(b&&A!=A){for(;O>V;)if(z=L[V++],z!=z)return!0}else for(;O>V;V++)if((b||V in L)&&L[V]===A)return b||V||0;return!b&&-1}};a.exports={includes:x(!0),indexOf:x(!1)}},"4de4":function(a,u,l){var s=l("23e7"),f=l("b727").filter,y=l("1dde"),x=l("ae40"),b=y("filter"),M=x("filter");s({target:"Array",proto:!0,forced:!b||!M},{filter:function(P){return f(this,P,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(a,u,l){var s=l("0366"),f=l("7b0b"),y=l("9bdd"),x=l("e95a"),b=l("50c4"),M=l("8418"),A=l("35a1");a.exports=function(L){var O=f(L),V=typeof this=="function"?this:Array,z=arguments.length,B=z>1?arguments[1]:void 0,U=B!==void 0,Z=A(O),te=0,Y,W,H,ne,le,Q;if(U&&(B=s(B,z>2?arguments[2]:void 0,2)),Z!=null&&!(V==Array&&x(Z)))for(ne=Z.call(O),le=ne.next,W=new V;!(H=le.call(ne)).done;te++)Q=U?y(ne,B,[H.value,te],!0):H.value,M(W,te,Q);else for(Y=b(O.length),W=new V(Y);Y>te;te++)Q=U?B(O[te],te):O[te],M(W,te,Q);return W.length=te,W}},"4fad":function(a,u,l){var s=l("23e7"),f=l("6f53").entries;s({target:"Object",stat:!0},{entries:function(x){return f(x)}})},"50c4":function(a,u,l){var s=l("a691"),f=Math.min;a.exports=function(y){return y>0?f(s(y),9007199254740991):0}},5135:function(a,u){var l={}.hasOwnProperty;a.exports=function(s,f){return l.call(s,f)}},5319:function(a,u,l){var s=l("d784"),f=l("825a"),y=l("7b0b"),x=l("50c4"),b=l("a691"),M=l("1d80"),A=l("8aa5"),P=l("14c3"),L=Math.max,O=Math.min,V=Math.floor,z=/\$([$&'`]|\d\d?|<[^>]*>)/g,B=/\$([$&'`]|\d\d?)/g,U=function(Z){return Z===void 0?Z:String(Z)};s("replace",2,function(Z,te,Y,W){var H=W.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,ne=W.REPLACE_KEEPS_$0,le=H?"$":"$0";return[function(K,Le){var Ue=M(this),Be=K==null?void 0:K[Z];return Be!==void 0?Be.call(K,Ue,Le):te.call(String(Ue),K,Le)},function(ce,K){if(!H&&ne||typeof K=="string"&&K.indexOf(le)===-1){var Le=Y(te,ce,this,K);if(Le.done)return Le.value}var Ue=f(ce),Be=String(this),tt=typeof K=="function";tt||(K=String(K));var ut=Ue.global;if(ut){var Tt=Ue.unicode;Ue.lastIndex=0}for(var Ge=[];;){var Ne=P(Ue,Be);if(Ne===null||(Ge.push(Ne),!ut))break;var Dt=String(Ne[0]);Dt===""&&(Ue.lastIndex=A(Be,x(Ue.lastIndex),Tt))}for(var Bt="",St=0,en=0;en<Ge.length;en++){Ne=Ge[en];for(var pt=String(Ne[0]),ft=L(O(b(Ne.index),Be.length),0),ot=[],Pt=1;Pt<Ne.length;Pt++)ot.push(U(Ne[Pt]));var Lt=Ne.groups;if(tt){var un=[pt].concat(ot,ft,Be);Lt!==void 0&&un.push(Lt);var Ie=String(K.apply(void 0,un))}else Ie=Q(pt,Be,ft,ot,Lt,K);ft>=St&&(Bt+=Be.slice(St,ft)+Ie,St=ft+pt.length)}return Bt+Be.slice(St)}];function Q(ce,K,Le,Ue,Be,tt){var ut=Le+ce.length,Tt=Ue.length,Ge=B;return Be!==void 0&&(Be=y(Be),Ge=z),te.call(tt,Ge,function(Ne,Dt){var Bt;switch(Dt.charAt(0)){case"$":return"$";case"&":return ce;case"`":return K.slice(0,Le);case"'":return K.slice(ut);case"<":Bt=Be[Dt.slice(1,-1)];break;default:var St=+Dt;if(St===0)return Ne;if(St>Tt){var en=V(St/10);return en===0?Ne:en<=Tt?Ue[en-1]===void 0?Dt.charAt(1):Ue[en-1]+Dt.charAt(1):Ne}Bt=Ue[St-1]}return Bt===void 0?"":Bt})}})},5692:function(a,u,l){var s=l("c430"),f=l("c6cd");(a.exports=function(y,x){return f[y]||(f[y]=x!==void 0?x:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(a,u,l){var s=l("d066"),f=l("241c"),y=l("7418"),x=l("825a");a.exports=s("Reflect","ownKeys")||function(M){var A=f.f(x(M)),P=y.f;return P?A.concat(P(M)):A}},"5a34":function(a,u,l){var s=l("44e7");a.exports=function(f){if(s(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(a,u){a.exports=function(l,s){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:s}}},"5db7":function(a,u,l){var s=l("23e7"),f=l("a2bf"),y=l("7b0b"),x=l("50c4"),b=l("1c0b"),M=l("65f0");s({target:"Array",proto:!0},{flatMap:function(P){var L=y(this),O=x(L.length),V;return b(P),V=M(L,0),V.length=f(V,L,L,O,0,1,P,arguments.length>1?arguments[1]:void 0),V}})},6547:function(a,u,l){var s=l("a691"),f=l("1d80"),y=function(x){return function(b,M){var A=String(f(b)),P=s(M),L=A.length,O,V;return P<0||P>=L?x?"":void 0:(O=A.charCodeAt(P),O<55296||O>56319||P+1===L||(V=A.charCodeAt(P+1))<56320||V>57343?x?A.charAt(P):O:x?A.slice(P,P+2):(O-55296<<10)+(V-56320)+65536)}};a.exports={codeAt:y(!1),charAt:y(!0)}},"65f0":function(a,u,l){var s=l("861d"),f=l("e8b5"),y=l("b622"),x=y("species");a.exports=function(b,M){var A;return f(b)&&(A=b.constructor,typeof A=="function"&&(A===Array||f(A.prototype))?A=void 0:s(A)&&(A=A[x],A===null&&(A=void 0))),new(A===void 0?Array:A)(M===0?0:M)}},"69f3":function(a,u,l){var s=l("7f9a"),f=l("da84"),y=l("861d"),x=l("9112"),b=l("5135"),M=l("f772"),A=l("d012"),P=f.WeakMap,L,O,V,z=function(H){return V(H)?O(H):L(H,{})},B=function(H){return function(ne){var le;if(!y(ne)||(le=O(ne)).type!==H)throw TypeError("Incompatible receiver, "+H+" required");return le}};if(s){var U=new P,Z=U.get,te=U.has,Y=U.set;L=function(H,ne){return Y.call(U,H,ne),ne},O=function(H){return Z.call(U,H)||{}},V=function(H){return te.call(U,H)}}else{var W=M("state");A[W]=!0,L=function(H,ne){return x(H,W,ne),ne},O=function(H){return b(H,W)?H[W]:{}},V=function(H){return b(H,W)}}a.exports={set:L,get:O,has:V,enforce:z,getterFor:B}},"6eeb":function(a,u,l){var s=l("da84"),f=l("9112"),y=l("5135"),x=l("ce4e"),b=l("8925"),M=l("69f3"),A=M.get,P=M.enforce,L=String(String).split("String");(a.exports=function(O,V,z,B){var U=B?!!B.unsafe:!1,Z=B?!!B.enumerable:!1,te=B?!!B.noTargetGet:!1;if(typeof z=="function"&&(typeof V=="string"&&!y(z,"name")&&f(z,"name",V),P(z).source=L.join(typeof V=="string"?V:"")),O===s){Z?O[V]=z:x(V,z);return}else U?!te&&O[V]&&(Z=!0):delete O[V];Z?O[V]=z:f(O,V,z)})(Function.prototype,"toString",function(){return typeof this=="function"&&A(this).source||b(this)})},"6f53":function(a,u,l){var s=l("83ab"),f=l("df75"),y=l("fc6a"),x=l("d1e7").f,b=function(M){return function(A){for(var P=y(A),L=f(P),O=L.length,V=0,z=[],B;O>V;)B=L[V++],(!s||x.call(P,B))&&z.push(M?[B,P[B]]:P[B]);return z}};a.exports={entries:b(!0),values:b(!1)}},"73d9":function(a,u,l){var s=l("44d2");s("flatMap")},7418:function(a,u){u.f=Object.getOwnPropertySymbols},"746f":function(a,u,l){var s=l("428f"),f=l("5135"),y=l("e538"),x=l("9bf2").f;a.exports=function(b){var M=s.Symbol||(s.Symbol={});f(M,b)||x(M,b,{value:y.f(b)})}},7839:function(a,u){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(a,u,l){var s=l("1d80");a.exports=function(f){return Object(s(f))}},"7c73":function(a,u,l){var s=l("825a"),f=l("37e8"),y=l("7839"),x=l("d012"),b=l("1be4"),M=l("cc12"),A=l("f772"),P=">",L="<",O="prototype",V="script",z=A("IE_PROTO"),B=function(){},U=function(H){return L+V+P+H+L+"/"+V+P},Z=function(H){H.write(U("")),H.close();var ne=H.parentWindow.Object;return H=null,ne},te=function(){var H=M("iframe"),ne="java"+V+":",le;return H.style.display="none",b.appendChild(H),H.src=String(ne),le=H.contentWindow.document,le.open(),le.write(U("document.F=Object")),le.close(),le.F},Y,W=function(){try{Y=document.domain&&new ActiveXObject("htmlfile")}catch{}W=Y?Z(Y):te();for(var H=y.length;H--;)delete W[O][y[H]];return W()};x[z]=!0,a.exports=Object.create||function(ne,le){var Q;return ne!==null?(B[O]=s(ne),Q=new B,B[O]=null,Q[z]=ne):Q=W(),le===void 0?Q:f(Q,le)}},"7dd0":function(a,u,l){var s=l("23e7"),f=l("9ed3"),y=l("e163"),x=l("d2bb"),b=l("d44e"),M=l("9112"),A=l("6eeb"),P=l("b622"),L=l("c430"),O=l("3f8c"),V=l("ae93"),z=V.IteratorPrototype,B=V.BUGGY_SAFARI_ITERATORS,U=P("iterator"),Z="keys",te="values",Y="entries",W=function(){return this};a.exports=function(H,ne,le,Q,ce,K,Le){f(le,ne,Q);var Ue=function(en){if(en===ce&&Ge)return Ge;if(!B&&en in ut)return ut[en];switch(en){case Z:return function(){return new le(this,en)};case te:return function(){return new le(this,en)};case Y:return function(){return new le(this,en)}}return function(){return new le(this)}},Be=ne+" Iterator",tt=!1,ut=H.prototype,Tt=ut[U]||ut["@@iterator"]||ce&&ut[ce],Ge=!B&&Tt||Ue(ce),Ne=ne=="Array"&&ut.entries||Tt,Dt,Bt,St;if(Ne&&(Dt=y(Ne.call(new H)),z!==Object.prototype&&Dt.next&&(!L&&y(Dt)!==z&&(x?x(Dt,z):typeof Dt[U]!="function"&&M(Dt,U,W)),b(Dt,Be,!0,!0),L&&(O[Be]=W))),ce==te&&Tt&&Tt.name!==te&&(tt=!0,Ge=function(){return Tt.call(this)}),(!L||Le)&&ut[U]!==Ge&&M(ut,U,Ge),O[ne]=Ge,ce)if(Bt={values:Ue(te),keys:K?Ge:Ue(Z),entries:Ue(Y)},Le)for(St in Bt)(B||tt||!(St in ut))&&A(ut,St,Bt[St]);else s({target:ne,proto:!0,forced:B||tt},Bt);return Bt}},"7f9a":function(a,u,l){var s=l("da84"),f=l("8925"),y=s.WeakMap;a.exports=typeof y=="function"&&/native code/.test(f(y))},"825a":function(a,u,l){var s=l("861d");a.exports=function(f){if(!s(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(a,u,l){var s=l("d039");a.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(a,u,l){var s=l("c04e"),f=l("9bf2"),y=l("5c6c");a.exports=function(x,b,M){var A=s(b);A in x?f.f(x,A,y(0,M)):x[A]=M}},"861d":function(a,u){a.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},8875:function(a,u,l){var s,f,y;(function(x,b){f=[],s=b,y=typeof s=="function"?s.apply(u,f):s,y!==void 0&&(a.exports=y)})(typeof self<"u"?self:this,function(){function x(){var b=Object.getOwnPropertyDescriptor(document,"currentScript");if(!b&&"currentScript"in document&&document.currentScript||b&&b.get!==x&&document.currentScript)return document.currentScript;try{throw new Error}catch(Y){var M=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,A=/@([^@]*):(\d+):(\d+)\s*$/ig,P=M.exec(Y.stack)||A.exec(Y.stack),L=P&&P[1]||!1,O=P&&P[2]||!1,V=document.location.href.replace(document.location.hash,""),z,B,U,Z=document.getElementsByTagName("script");L===V&&(z=document.documentElement.outerHTML,B=new RegExp("(?:[^\\n]+?\\n){0,"+(O-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),U=z.replace(B,"$1").trim());for(var te=0;te<Z.length;te++)if(Z[te].readyState==="interactive"||Z[te].src===L||L===V&&Z[te].innerHTML&&Z[te].innerHTML.trim()===U)return Z[te];return null}}return x})},8925:function(a,u,l){var s=l("c6cd"),f=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(y){return f.call(y)}),a.exports=s.inspectSource},"8aa5":function(a,u,l){var s=l("6547").charAt;a.exports=function(f,y,x){return y+(x?s(f,y).length:1)}},"8bbf":function(a,u){a.exports=n},"90e3":function(a,u){var l=0,s=Math.random();a.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++l+s).toString(36)}},9112:function(a,u,l){var s=l("83ab"),f=l("9bf2"),y=l("5c6c");a.exports=s?function(x,b,M){return f.f(x,b,y(1,M))}:function(x,b,M){return x[b]=M,x}},9263:function(a,u,l){var s=l("ad6d"),f=l("9f7f"),y=RegExp.prototype.exec,x=String.prototype.replace,b=y,M=function(){var O=/a/,V=/b*/g;return y.call(O,"a"),y.call(V,"a"),O.lastIndex!==0||V.lastIndex!==0}(),A=f.UNSUPPORTED_Y||f.BROKEN_CARET,P=/()??/.exec("")[1]!==void 0,L=M||P||A;L&&(b=function(V){var z=this,B,U,Z,te,Y=A&&z.sticky,W=s.call(z),H=z.source,ne=0,le=V;return Y&&(W=W.replace("y",""),W.indexOf("g")===-1&&(W+="g"),le=String(V).slice(z.lastIndex),z.lastIndex>0&&(!z.multiline||z.multiline&&V[z.lastIndex-1]!==`
`)&&(H="(?: "+H+")",le=" "+le,ne++),U=new RegExp("^(?:"+H+")",W)),P&&(U=new RegExp("^"+H+"$(?!\\s)",W)),M&&(B=z.lastIndex),Z=y.call(Y?U:z,le),Y?Z?(Z.input=Z.input.slice(ne),Z[0]=Z[0].slice(ne),Z.index=z.lastIndex,z.lastIndex+=Z[0].length):z.lastIndex=0:M&&Z&&(z.lastIndex=z.global?Z.index+Z[0].length:B),P&&Z&&Z.length>1&&x.call(Z[0],U,function(){for(te=1;te<arguments.length-2;te++)arguments[te]===void 0&&(Z[te]=void 0)}),Z}),a.exports=b},"94ca":function(a,u,l){var s=l("d039"),f=/#|\.prototype\./,y=function(P,L){var O=b[x(P)];return O==A?!0:O==M?!1:typeof L=="function"?s(L):!!L},x=y.normalize=function(P){return String(P).replace(f,".").toLowerCase()},b=y.data={},M=y.NATIVE="N",A=y.POLYFILL="P";a.exports=y},"99af":function(a,u,l){var s=l("23e7"),f=l("d039"),y=l("e8b5"),x=l("861d"),b=l("7b0b"),M=l("50c4"),A=l("8418"),P=l("65f0"),L=l("1dde"),O=l("b622"),V=l("2d00"),z=O("isConcatSpreadable"),B=9007199254740991,U="Maximum allowed index exceeded",Z=V>=51||!f(function(){var H=[];return H[z]=!1,H.concat()[0]!==H}),te=L("concat"),Y=function(H){if(!x(H))return!1;var ne=H[z];return ne!==void 0?!!ne:y(H)},W=!Z||!te;s({target:"Array",proto:!0,forced:W},{concat:function(ne){var le=b(this),Q=P(le,0),ce=0,K,Le,Ue,Be,tt;for(K=-1,Ue=arguments.length;K<Ue;K++)if(tt=K===-1?le:arguments[K],Y(tt)){if(Be=M(tt.length),ce+Be>B)throw TypeError(U);for(Le=0;Le<Be;Le++,ce++)Le in tt&&A(Q,ce,tt[Le])}else{if(ce>=B)throw TypeError(U);A(Q,ce++,tt)}return Q.length=ce,Q}})},"9bdd":function(a,u,l){var s=l("825a");a.exports=function(f,y,x,b){try{return b?y(s(x)[0],x[1]):y(x)}catch(A){var M=f.return;throw M!==void 0&&s(M.call(f)),A}}},"9bf2":function(a,u,l){var s=l("83ab"),f=l("0cfb"),y=l("825a"),x=l("c04e"),b=Object.defineProperty;u.f=s?b:function(A,P,L){if(y(A),P=x(P,!0),y(L),f)try{return b(A,P,L)}catch{}if("get"in L||"set"in L)throw TypeError("Accessors not supported");return"value"in L&&(A[P]=L.value),A}},"9ed3":function(a,u,l){var s=l("ae93").IteratorPrototype,f=l("7c73"),y=l("5c6c"),x=l("d44e"),b=l("3f8c"),M=function(){return this};a.exports=function(A,P,L){var O=P+" Iterator";return A.prototype=f(s,{next:y(1,L)}),x(A,O,!1,!0),b[O]=M,A}},"9f7f":function(a,u,l){var s=l("d039");function f(y,x){return RegExp(y,x)}u.UNSUPPORTED_Y=s(function(){var y=f("a","y");return y.lastIndex=2,y.exec("abcd")!=null}),u.BROKEN_CARET=s(function(){var y=f("^r","gy");return y.lastIndex=2,y.exec("str")!=null})},a2bf:function(a,u,l){var s=l("e8b5"),f=l("50c4"),y=l("0366"),x=function(b,M,A,P,L,O,V,z){for(var B=L,U=0,Z=V?y(V,z,3):!1,te;U<P;){if(U in A){if(te=Z?Z(A[U],U,M):A[U],O>0&&s(te))B=x(b,M,te,f(te.length),B,O-1)-1;else{if(B>=9007199254740991)throw TypeError("Exceed the acceptable array length");b[B]=te}B++}U++}return B};a.exports=x},a352:function(a,u){a.exports=i},a434:function(a,u,l){var s=l("23e7"),f=l("23cb"),y=l("a691"),x=l("50c4"),b=l("7b0b"),M=l("65f0"),A=l("8418"),P=l("1dde"),L=l("ae40"),O=P("splice"),V=L("splice",{ACCESSORS:!0,0:0,1:2}),z=Math.max,B=Math.min,U=9007199254740991,Z="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!O||!V},{splice:function(Y,W){var H=b(this),ne=x(H.length),le=f(Y,ne),Q=arguments.length,ce,K,Le,Ue,Be,tt;if(Q===0?ce=K=0:Q===1?(ce=0,K=ne-le):(ce=Q-2,K=B(z(y(W),0),ne-le)),ne+ce-K>U)throw TypeError(Z);for(Le=M(H,K),Ue=0;Ue<K;Ue++)Be=le+Ue,Be in H&&A(Le,Ue,H[Be]);if(Le.length=K,ce<K){for(Ue=le;Ue<ne-K;Ue++)Be=Ue+K,tt=Ue+ce,Be in H?H[tt]=H[Be]:delete H[tt];for(Ue=ne;Ue>ne-K+ce;Ue--)delete H[Ue-1]}else if(ce>K)for(Ue=ne-K;Ue>le;Ue--)Be=Ue+K-1,tt=Ue+ce-1,Be in H?H[tt]=H[Be]:delete H[tt];for(Ue=0;Ue<ce;Ue++)H[Ue+le]=arguments[Ue+2];return H.length=ne-K+ce,Le}})},a4d3:function(a,u,l){var s=l("23e7"),f=l("da84"),y=l("d066"),x=l("c430"),b=l("83ab"),M=l("4930"),A=l("fdbf"),P=l("d039"),L=l("5135"),O=l("e8b5"),V=l("861d"),z=l("825a"),B=l("7b0b"),U=l("fc6a"),Z=l("c04e"),te=l("5c6c"),Y=l("7c73"),W=l("df75"),H=l("241c"),ne=l("057f"),le=l("7418"),Q=l("06cf"),ce=l("9bf2"),K=l("d1e7"),Le=l("9112"),Ue=l("6eeb"),Be=l("5692"),tt=l("f772"),ut=l("d012"),Tt=l("90e3"),Ge=l("b622"),Ne=l("e538"),Dt=l("746f"),Bt=l("d44e"),St=l("69f3"),en=l("b727").forEach,pt=tt("hidden"),ft="Symbol",ot="prototype",Pt=Ge("toPrimitive"),Lt=St.set,un=St.getterFor(ft),Ie=Object[ot],$=f.Symbol,Te=y("JSON","stringify"),Oe=Q.f,ye=ce.f,pe=ne.f,Fe=K.f,rt=Be("symbols"),at=Be("op-symbols"),Ve=Be("string-to-symbol-registry"),Mt=Be("symbol-to-string-registry"),wt=Be("wks"),At=f.QObject,Gt=!At||!At[ot]||!At[ot].findChild,dn=b&&P(function(){return Y(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a!=7})?function(Ae,Se,ve){var Qe=Oe(Ie,Se);Qe&&delete Ie[Se],ye(Ae,Se,ve),Qe&&Ae!==Ie&&ye(Ie,Se,Qe)}:ye,pn=function(Ae,Se){var ve=rt[Ae]=Y($[ot]);return Lt(ve,{type:ft,tag:Ae,description:Se}),b||(ve.description=Se),ve},ct=A?function(Ae){return typeof Ae=="symbol"}:function(Ae){return Object(Ae)instanceof $},mt=function(Se,ve,Qe){Se===Ie&&mt(at,ve,Qe),z(Se);var dt=Z(ve,!0);return z(Qe),L(rt,dt)?(Qe.enumerable?(L(Se,pt)&&Se[pt][dt]&&(Se[pt][dt]=!1),Qe=Y(Qe,{enumerable:te(0,!1)})):(L(Se,pt)||ye(Se,pt,te(1,{})),Se[pt][dt]=!0),dn(Se,dt,Qe)):ye(Se,dt,Qe)},_t=function(Se,ve){z(Se);var Qe=U(ve),dt=W(Qe).concat(de(Qe));return en(dt,function(We){(!b||qt.call(Qe,We))&&mt(Se,We,Qe[We])}),Se},jt=function(Se,ve){return ve===void 0?Y(Se):_t(Y(Se),ve)},qt=function(Se){var ve=Z(Se,!0),Qe=Fe.call(this,ve);return this===Ie&&L(rt,ve)&&!L(at,ve)?!1:Qe||!L(this,ve)||!L(rt,ve)||L(this,pt)&&this[pt][ve]?Qe:!0},Cn=function(Se,ve){var Qe=U(Se),dt=Z(ve,!0);if(!(Qe===Ie&&L(rt,dt)&&!L(at,dt))){var We=Oe(Qe,dt);return We&&L(rt,dt)&&!(L(Qe,pt)&&Qe[pt][dt])&&(We.enumerable=!0),We}},Xe=function(Se){var ve=pe(U(Se)),Qe=[];return en(ve,function(dt){!L(rt,dt)&&!L(ut,dt)&&Qe.push(dt)}),Qe},de=function(Se){var ve=Se===Ie,Qe=pe(ve?at:U(Se)),dt=[];return en(Qe,function(We){L(rt,We)&&(!ve||L(Ie,We))&&dt.push(rt[We])}),dt};if(M||($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor");var Se=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ve=Tt(Se),Qe=function(dt){this===Ie&&Qe.call(at,dt),L(this,pt)&&L(this[pt],ve)&&(this[pt][ve]=!1),dn(this,ve,te(1,dt))};return b&&Gt&&dn(Ie,ve,{configurable:!0,set:Qe}),pn(ve,Se)},Ue($[ot],"toString",function(){return un(this).tag}),Ue($,"withoutSetter",function(Ae){return pn(Tt(Ae),Ae)}),K.f=qt,ce.f=mt,Q.f=Cn,H.f=ne.f=Xe,le.f=de,Ne.f=function(Ae){return pn(Ge(Ae),Ae)},b&&(ye($[ot],"description",{configurable:!0,get:function(){return un(this).description}}),x||Ue(Ie,"propertyIsEnumerable",qt,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!M,sham:!M},{Symbol:$}),en(W(wt),function(Ae){Dt(Ae)}),s({target:ft,stat:!0,forced:!M},{for:function(Ae){var Se=String(Ae);if(L(Ve,Se))return Ve[Se];var ve=$(Se);return Ve[Se]=ve,Mt[ve]=Se,ve},keyFor:function(Se){if(!ct(Se))throw TypeError(Se+" is not a symbol");if(L(Mt,Se))return Mt[Se]},useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),s({target:"Object",stat:!0,forced:!M,sham:!b},{create:jt,defineProperty:mt,defineProperties:_t,getOwnPropertyDescriptor:Cn}),s({target:"Object",stat:!0,forced:!M},{getOwnPropertyNames:Xe,getOwnPropertySymbols:de}),s({target:"Object",stat:!0,forced:P(function(){le.f(1)})},{getOwnPropertySymbols:function(Se){return le.f(B(Se))}}),Te){var ge=!M||P(function(){var Ae=$();return Te([Ae])!="[null]"||Te({a:Ae})!="{}"||Te(Object(Ae))!="{}"});s({target:"JSON",stat:!0,forced:ge},{stringify:function(Se,ve,Qe){for(var dt=[Se],We=1,Et;arguments.length>We;)dt.push(arguments[We++]);if(Et=ve,!(!V(ve)&&Se===void 0||ct(Se)))return O(ve)||(ve=function(Ot,yt){if(typeof Et=="function"&&(yt=Et.call(this,Ot,yt)),!ct(yt))return yt}),dt[1]=ve,Te.apply(null,dt)}})}$[ot][Pt]||Le($[ot],Pt,$[ot].valueOf),Bt($,ft),ut[pt]=!0},a630:function(a,u,l){var s=l("23e7"),f=l("4df4"),y=l("1c7e"),x=!y(function(b){Array.from(b)});s({target:"Array",stat:!0,forced:x},{from:f})},a640:function(a,u,l){var s=l("d039");a.exports=function(f,y){var x=[][f];return!!x&&s(function(){x.call(null,y||function(){throw 1},1)})}},a691:function(a,u){var l=Math.ceil,s=Math.floor;a.exports=function(f){return isNaN(f=+f)?0:(f>0?s:l)(f)}},ab13:function(a,u,l){var s=l("b622"),f=s("match");a.exports=function(y){var x=/./;try{"/./"[y](x)}catch{try{return x[f]=!1,"/./"[y](x)}catch{}}return!1}},ac1f:function(a,u,l){var s=l("23e7"),f=l("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(a,u,l){var s=l("825a");a.exports=function(){var f=s(this),y="";return f.global&&(y+="g"),f.ignoreCase&&(y+="i"),f.multiline&&(y+="m"),f.dotAll&&(y+="s"),f.unicode&&(y+="u"),f.sticky&&(y+="y"),y}},ae40:function(a,u,l){var s=l("83ab"),f=l("d039"),y=l("5135"),x=Object.defineProperty,b={},M=function(A){throw A};a.exports=function(A,P){if(y(b,A))return b[A];P||(P={});var L=[][A],O=y(P,"ACCESSORS")?P.ACCESSORS:!1,V=y(P,0)?P[0]:M,z=y(P,1)?P[1]:void 0;return b[A]=!!L&&!f(function(){if(O&&!s)return!0;var B={length:-1};O?x(B,1,{enumerable:!0,get:M}):B[1]=1,L.call(B,V,z)})}},ae93:function(a,u,l){var s=l("e163"),f=l("9112"),y=l("5135"),x=l("b622"),b=l("c430"),M=x("iterator"),A=!1,P=function(){return this},L,O,V;[].keys&&(V=[].keys(),"next"in V?(O=s(s(V)),O!==Object.prototype&&(L=O)):A=!0),L==null&&(L={}),!b&&!y(L,M)&&f(L,M,P),a.exports={IteratorPrototype:L,BUGGY_SAFARI_ITERATORS:A}},b041:function(a,u,l){var s=l("00ee"),f=l("f5df");a.exports=s?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(a,u,l){var s=l("83ab"),f=l("9bf2").f,y=Function.prototype,x=y.toString,b=/^\s*function ([^ (]*)/,M="name";s&&!(M in y)&&f(y,M,{configurable:!0,get:function(){try{return x.call(this).match(b)[1]}catch{return""}}})},b622:function(a,u,l){var s=l("da84"),f=l("5692"),y=l("5135"),x=l("90e3"),b=l("4930"),M=l("fdbf"),A=f("wks"),P=s.Symbol,L=M?P:P&&P.withoutSetter||x;a.exports=function(O){return y(A,O)||(b&&y(P,O)?A[O]=P[O]:A[O]=L("Symbol."+O)),A[O]}},b64b:function(a,u,l){var s=l("23e7"),f=l("7b0b"),y=l("df75"),x=l("d039"),b=x(function(){y(1)});s({target:"Object",stat:!0,forced:b},{keys:function(A){return y(f(A))}})},b727:function(a,u,l){var s=l("0366"),f=l("44ad"),y=l("7b0b"),x=l("50c4"),b=l("65f0"),M=[].push,A=function(P){var L=P==1,O=P==2,V=P==3,z=P==4,B=P==6,U=P==5||B;return function(Z,te,Y,W){for(var H=y(Z),ne=f(H),le=s(te,Y,3),Q=x(ne.length),ce=0,K=W||b,Le=L?K(Z,Q):O?K(Z,0):void 0,Ue,Be;Q>ce;ce++)if((U||ce in ne)&&(Ue=ne[ce],Be=le(Ue,ce,H),P)){if(L)Le[ce]=Be;else if(Be)switch(P){case 3:return!0;case 5:return Ue;case 6:return ce;case 2:M.call(Le,Ue)}else if(z)return!1}return B?-1:V||z?z:Le}};a.exports={forEach:A(0),map:A(1),filter:A(2),some:A(3),every:A(4),find:A(5),findIndex:A(6)}},c04e:function(a,u,l){var s=l("861d");a.exports=function(f,y){if(!s(f))return f;var x,b;if(y&&typeof(x=f.toString)=="function"&&!s(b=x.call(f))||typeof(x=f.valueOf)=="function"&&!s(b=x.call(f))||!y&&typeof(x=f.toString)=="function"&&!s(b=x.call(f)))return b;throw TypeError("Can't convert object to primitive value")}},c430:function(a,u){a.exports=!1},c6b6:function(a,u){var l={}.toString;a.exports=function(s){return l.call(s).slice(8,-1)}},c6cd:function(a,u,l){var s=l("da84"),f=l("ce4e"),y="__core-js_shared__",x=s[y]||f(y,{});a.exports=x},c740:function(a,u,l){var s=l("23e7"),f=l("b727").findIndex,y=l("44d2"),x=l("ae40"),b="findIndex",M=!0,A=x(b);b in[]&&Array(1)[b](function(){M=!1}),s({target:"Array",proto:!0,forced:M||!A},{findIndex:function(L){return f(this,L,arguments.length>1?arguments[1]:void 0)}}),y(b)},c8ba:function(a,u){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}a.exports=l},c975:function(a,u,l){var s=l("23e7"),f=l("4d64").indexOf,y=l("a640"),x=l("ae40"),b=[].indexOf,M=!!b&&1/[1].indexOf(1,-0)<0,A=y("indexOf"),P=x("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:M||!A||!P},{indexOf:function(O){return M?b.apply(this,arguments)||0:f(this,O,arguments.length>1?arguments[1]:void 0)}})},ca84:function(a,u,l){var s=l("5135"),f=l("fc6a"),y=l("4d64").indexOf,x=l("d012");a.exports=function(b,M){var A=f(b),P=0,L=[],O;for(O in A)!s(x,O)&&s(A,O)&&L.push(O);for(;M.length>P;)s(A,O=M[P++])&&(~y(L,O)||L.push(O));return L}},caad:function(a,u,l){var s=l("23e7"),f=l("4d64").includes,y=l("44d2"),x=l("ae40"),b=x("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!b},{includes:function(A){return f(this,A,arguments.length>1?arguments[1]:void 0)}}),y("includes")},cc12:function(a,u,l){var s=l("da84"),f=l("861d"),y=s.document,x=f(y)&&f(y.createElement);a.exports=function(b){return x?y.createElement(b):{}}},ce4e:function(a,u,l){var s=l("da84"),f=l("9112");a.exports=function(y,x){try{f(s,y,x)}catch{s[y]=x}return x}},d012:function(a,u){a.exports={}},d039:function(a,u){a.exports=function(l){try{return!!l()}catch{return!0}}},d066:function(a,u,l){var s=l("428f"),f=l("da84"),y=function(x){return typeof x=="function"?x:void 0};a.exports=function(x,b){return arguments.length<2?y(s[x])||y(f[x]):s[x]&&s[x][b]||f[x]&&f[x][b]}},d1e7:function(a,u,l){var s={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,y=f&&!s.call({1:2},1);u.f=y?function(b){var M=f(this,b);return!!M&&M.enumerable}:s},d28b:function(a,u,l){var s=l("746f");s("iterator")},d2bb:function(a,u,l){var s=l("825a"),f=l("3bbe");a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var y=!1,x={},b;try{b=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,b.call(x,[]),y=x instanceof Array}catch{}return function(A,P){return s(A),f(P),y?b.call(A,P):A.__proto__=P,A}}():void 0)},d3b7:function(a,u,l){var s=l("00ee"),f=l("6eeb"),y=l("b041");s||f(Object.prototype,"toString",y,{unsafe:!0})},d44e:function(a,u,l){var s=l("9bf2").f,f=l("5135"),y=l("b622"),x=y("toStringTag");a.exports=function(b,M,A){b&&!f(b=A?b:b.prototype,x)&&s(b,x,{configurable:!0,value:M})}},d58f:function(a,u,l){var s=l("1c0b"),f=l("7b0b"),y=l("44ad"),x=l("50c4"),b=function(M){return function(A,P,L,O){s(P);var V=f(A),z=y(V),B=x(V.length),U=M?B-1:0,Z=M?-1:1;if(L<2)for(;;){if(U in z){O=z[U],U+=Z;break}if(U+=Z,M?U<0:B<=U)throw TypeError("Reduce of empty array with no initial value")}for(;M?U>=0:B>U;U+=Z)U in z&&(O=P(O,z[U],U,V));return O}};a.exports={left:b(!1),right:b(!0)}},d784:function(a,u,l){l("ac1f");var s=l("6eeb"),f=l("d039"),y=l("b622"),x=l("9263"),b=l("9112"),M=y("species"),A=!f(function(){var z=/./;return z.exec=function(){var B=[];return B.groups={a:"7"},B},"".replace(z,"$<a>")!=="7"}),P=function(){return"a".replace(/./,"$0")==="$0"}(),L=y("replace"),O=function(){return/./[L]?/./[L]("a","$0")==="":!1}(),V=!f(function(){var z=/(?:)/,B=z.exec;z.exec=function(){return B.apply(this,arguments)};var U="ab".split(z);return U.length!==2||U[0]!=="a"||U[1]!=="b"});a.exports=function(z,B,U,Z){var te=y(z),Y=!f(function(){var ce={};return ce[te]=function(){return 7},""[z](ce)!=7}),W=Y&&!f(function(){var ce=!1,K=/a/;return z==="split"&&(K={},K.constructor={},K.constructor[M]=function(){return K},K.flags="",K[te]=/./[te]),K.exec=function(){return ce=!0,null},K[te](""),!ce});if(!Y||!W||z==="replace"&&!(A&&P&&!O)||z==="split"&&!V){var H=/./[te],ne=U(te,""[z],function(ce,K,Le,Ue,Be){return K.exec===x?Y&&!Be?{done:!0,value:H.call(K,Le,Ue)}:{done:!0,value:ce.call(Le,K,Ue)}:{done:!1}},{REPLACE_KEEPS_$0:P,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:O}),le=ne[0],Q=ne[1];s(String.prototype,z,le),s(RegExp.prototype,te,B==2?function(ce,K){return Q.call(ce,this,K)}:function(ce){return Q.call(ce,this)})}Z&&b(RegExp.prototype[te],"sham",!0)}},d81d:function(a,u,l){var s=l("23e7"),f=l("b727").map,y=l("1dde"),x=l("ae40"),b=y("map"),M=x("map");s({target:"Array",proto:!0,forced:!b||!M},{map:function(P){return f(this,P,arguments.length>1?arguments[1]:void 0)}})},da84:function(a,u,l){(function(s){var f=function(y){return y&&y.Math==Math&&y};a.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof s=="object"&&s)||Function("return this")()}).call(this,l("c8ba"))},dbb4:function(a,u,l){var s=l("23e7"),f=l("83ab"),y=l("56ef"),x=l("fc6a"),b=l("06cf"),M=l("8418");s({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(P){for(var L=x(P),O=b.f,V=y(L),z={},B=0,U,Z;V.length>B;)Z=O(L,U=V[B++]),Z!==void 0&&M(z,U,Z);return z}})},dbf1:function(a,u,l){(function(s){l.d(u,"a",function(){return y});function f(){return typeof window<"u"?window.console:s.console}var y=f()}).call(this,l("c8ba"))},ddb0:function(a,u,l){var s=l("da84"),f=l("fdbc"),y=l("e260"),x=l("9112"),b=l("b622"),M=b("iterator"),A=b("toStringTag"),P=y.values;for(var L in f){var O=s[L],V=O&&O.prototype;if(V){if(V[M]!==P)try{x(V,M,P)}catch{V[M]=P}if(V[A]||x(V,A,L),f[L]){for(var z in y)if(V[z]!==y[z])try{x(V,z,y[z])}catch{V[z]=y[z]}}}}},df75:function(a,u,l){var s=l("ca84"),f=l("7839");a.exports=Object.keys||function(x){return s(x,f)}},e01a:function(a,u,l){var s=l("23e7"),f=l("83ab"),y=l("da84"),x=l("5135"),b=l("861d"),M=l("9bf2").f,A=l("e893"),P=y.Symbol;if(f&&typeof P=="function"&&(!("description"in P.prototype)||P().description!==void 0)){var L={},O=function(){var te=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Y=this instanceof O?new P(te):te===void 0?P():P(te);return te===""&&(L[Y]=!0),Y};A(O,P);var V=O.prototype=P.prototype;V.constructor=O;var z=V.toString,B=String(P("test"))=="Symbol(test)",U=/^Symbol\((.*)\)[^)]+$/;M(V,"description",{configurable:!0,get:function(){var te=b(this)?this.valueOf():this,Y=z.call(te);if(x(L,te))return"";var W=B?Y.slice(7,-1):Y.replace(U,"$1");return W===""?void 0:W}}),s({global:!0,forced:!0},{Symbol:O})}},e163:function(a,u,l){var s=l("5135"),f=l("7b0b"),y=l("f772"),x=l("e177"),b=y("IE_PROTO"),M=Object.prototype;a.exports=x?Object.getPrototypeOf:function(A){return A=f(A),s(A,b)?A[b]:typeof A.constructor=="function"&&A instanceof A.constructor?A.constructor.prototype:A instanceof Object?M:null}},e177:function(a,u,l){var s=l("d039");a.exports=!s(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(a,u,l){var s=l("fc6a"),f=l("44d2"),y=l("3f8c"),x=l("69f3"),b=l("7dd0"),M="Array Iterator",A=x.set,P=x.getterFor(M);a.exports=b(Array,"Array",function(L,O){A(this,{type:M,target:s(L),index:0,kind:O})},function(){var L=P(this),O=L.target,V=L.kind,z=L.index++;return!O||z>=O.length?(L.target=void 0,{value:void 0,done:!0}):V=="keys"?{value:z,done:!1}:V=="values"?{value:O[z],done:!1}:{value:[z,O[z]],done:!1}},"values"),y.Arguments=y.Array,f("keys"),f("values"),f("entries")},e439:function(a,u,l){var s=l("23e7"),f=l("d039"),y=l("fc6a"),x=l("06cf").f,b=l("83ab"),M=f(function(){x(1)}),A=!b||M;s({target:"Object",stat:!0,forced:A,sham:!b},{getOwnPropertyDescriptor:function(L,O){return x(y(L),O)}})},e538:function(a,u,l){var s=l("b622");u.f=s},e893:function(a,u,l){var s=l("5135"),f=l("56ef"),y=l("06cf"),x=l("9bf2");a.exports=function(b,M){for(var A=f(M),P=x.f,L=y.f,O=0;O<A.length;O++){var V=A[O];s(b,V)||P(b,V,L(M,V))}}},e8b5:function(a,u,l){var s=l("c6b6");a.exports=Array.isArray||function(y){return s(y)=="Array"}},e95a:function(a,u,l){var s=l("b622"),f=l("3f8c"),y=s("iterator"),x=Array.prototype;a.exports=function(b){return b!==void 0&&(f.Array===b||x[y]===b)}},f5df:function(a,u,l){var s=l("00ee"),f=l("c6b6"),y=l("b622"),x=y("toStringTag"),b=f(function(){return arguments}())=="Arguments",M=function(A,P){try{return A[P]}catch{}};a.exports=s?f:function(A){var P,L,O;return A===void 0?"Undefined":A===null?"Null":typeof(L=M(P=Object(A),x))=="string"?L:b?f(P):(O=f(P))=="Object"&&typeof P.callee=="function"?"Arguments":O}},f772:function(a,u,l){var s=l("5692"),f=l("90e3"),y=s("keys");a.exports=function(x){return y[x]||(y[x]=f(x))}},fb15:function(a,u,l){if(l.r(u),typeof window<"u"){var s=window.document.currentScript;{var f=l("8875");s=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var y=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);y&&(l.p=y[1])}l("99af"),l("4de4"),l("4160"),l("c975"),l("d81d"),l("a434"),l("159b"),l("a4d3"),l("e439"),l("dbb4"),l("b64b");function x(ct,mt,_t){return mt in ct?Object.defineProperty(ct,mt,{value:_t,enumerable:!0,configurable:!0,writable:!0}):ct[mt]=_t,ct}function b(ct,mt){var _t=Object.keys(ct);if(Object.getOwnPropertySymbols){var jt=Object.getOwnPropertySymbols(ct);mt&&(jt=jt.filter(function(qt){return Object.getOwnPropertyDescriptor(ct,qt).enumerable})),_t.push.apply(_t,jt)}return _t}function M(ct){for(var mt=1;mt<arguments.length;mt++){var _t=arguments[mt]!=null?arguments[mt]:{};mt%2?b(Object(_t),!0).forEach(function(jt){x(ct,jt,_t[jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ct,Object.getOwnPropertyDescriptors(_t)):b(Object(_t)).forEach(function(jt){Object.defineProperty(ct,jt,Object.getOwnPropertyDescriptor(_t,jt))})}return ct}function A(ct){if(Array.isArray(ct))return ct}l("e01a"),l("d28b"),l("e260"),l("d3b7"),l("3ca3"),l("ddb0");function P(ct,mt){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ct)))){var _t=[],jt=!0,qt=!1,Cn=void 0;try{for(var Xe=ct[Symbol.iterator](),de;!(jt=(de=Xe.next()).done)&&(_t.push(de.value),!(mt&&_t.length===mt));jt=!0);}catch(ge){qt=!0,Cn=ge}finally{try{!jt&&Xe.return!=null&&Xe.return()}finally{if(qt)throw Cn}}return _t}}l("a630"),l("fb6a"),l("b0c0"),l("25f0");function L(ct,mt){(mt==null||mt>ct.length)&&(mt=ct.length);for(var _t=0,jt=new Array(mt);_t<mt;_t++)jt[_t]=ct[_t];return jt}function O(ct,mt){if(ct){if(typeof ct=="string")return L(ct,mt);var _t=Object.prototype.toString.call(ct).slice(8,-1);if(_t==="Object"&&ct.constructor&&(_t=ct.constructor.name),_t==="Map"||_t==="Set")return Array.from(ct);if(_t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_t))return L(ct,mt)}}function V(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z(ct,mt){return A(ct)||P(ct,mt)||O(ct,mt)||V()}function B(ct){if(Array.isArray(ct))return L(ct)}function U(ct){if(typeof Symbol<"u"&&Symbol.iterator in Object(ct))return Array.from(ct)}function Z(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function te(ct){return B(ct)||U(ct)||O(ct)||Z()}var Y=l("a352"),W=l.n(Y);function H(ct){ct.parentElement!==null&&ct.parentElement.removeChild(ct)}function ne(ct,mt,_t){var jt=_t===0?ct.children[0]:ct.children[_t-1].nextSibling;ct.insertBefore(mt,jt)}var le=l("dbf1");l("13d5"),l("4fad"),l("ac1f"),l("5319");function Q(ct){var mt=Object.create(null);return function(jt){var qt=mt[jt];return qt||(mt[jt]=ct(jt))}}var ce=/-(\w)/g,K=Q(function(ct){return ct.replace(ce,function(mt,_t){return _t.toUpperCase()})});l("5db7"),l("73d9");var Le=["Start","Add","Remove","Update","End"],Ue=["Choose","Unchoose","Sort","Filter","Clone"],Be=["Move"],tt=[Be,Le,Ue].flatMap(function(ct){return ct}).map(function(ct){return"on".concat(ct)}),ut={manage:Be,manageAndEmit:Le,emit:Ue};function Tt(ct){return tt.indexOf(ct)!==-1}l("caad"),l("2ca0");var Ge=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Ne(ct){return Ge.includes(ct)}function Dt(ct){return["transition-group","TransitionGroup"].includes(ct)}function Bt(ct){return["id","class","role","style"].includes(ct)||ct.startsWith("data-")||ct.startsWith("aria-")||ct.startsWith("on")}function St(ct){return ct.reduce(function(mt,_t){var jt=z(_t,2),qt=jt[0],Cn=jt[1];return mt[qt]=Cn,mt},{})}function en(ct){var mt=ct.$attrs,_t=ct.componentData,jt=_t===void 0?{}:_t,qt=St(Object.entries(mt).filter(function(Cn){var Xe=z(Cn,2),de=Xe[0];return Xe[1],Bt(de)}));return M(M({},qt),jt)}function pt(ct){var mt=ct.$attrs,_t=ct.callBackBuilder,jt=St(ft(mt));Object.entries(_t).forEach(function(Cn){var Xe=z(Cn,2),de=Xe[0],ge=Xe[1];ut[de].forEach(function(Ae){jt["on".concat(Ae)]=ge(Ae)})});var qt="[data-draggable]".concat(jt.draggable||"");return M(M({},jt),{},{draggable:qt})}function ft(ct){return Object.entries(ct).filter(function(mt){var _t=z(mt,2),jt=_t[0];return _t[1],!Bt(jt)}).map(function(mt){var _t=z(mt,2),jt=_t[0],qt=_t[1];return[K(jt),qt]}).filter(function(mt){var _t=z(mt,2),jt=_t[0];return _t[1],!Tt(jt)})}l("c740");function ot(ct,mt){if(!(ct instanceof mt))throw new TypeError("Cannot call a class as a function")}function Pt(ct,mt){for(var _t=0;_t<mt.length;_t++){var jt=mt[_t];jt.enumerable=jt.enumerable||!1,jt.configurable=!0,"value"in jt&&(jt.writable=!0),Object.defineProperty(ct,jt.key,jt)}}function Lt(ct,mt,_t){return mt&&Pt(ct.prototype,mt),ct}var un=function(mt){var _t=mt.el;return _t},Ie=function(mt,_t){return mt.__draggable_context=_t},$=function(mt){return mt.__draggable_context},Te=function(){function ct(mt){var _t=mt.nodes,jt=_t.header,qt=_t.default,Cn=_t.footer,Xe=mt.root,de=mt.realList;ot(this,ct),this.defaultNodes=qt,this.children=[].concat(te(jt),te(qt),te(Cn)),this.externalComponent=Xe.externalComponent,this.rootTransition=Xe.transition,this.tag=Xe.tag,this.realList=de}return Lt(ct,[{key:"render",value:function(_t,jt){var qt=this.tag,Cn=this.children,Xe=this._isRootComponent,de=Xe?{default:function(){return Cn}}:Cn;return _t(qt,jt,de)}},{key:"updated",value:function(){var _t=this.defaultNodes,jt=this.realList;_t.forEach(function(qt,Cn){Ie(un(qt),{element:jt[Cn],index:Cn})})}},{key:"getUnderlyingVm",value:function(_t){return $(_t)}},{key:"getVmIndexFromDomIndex",value:function(_t,jt){var qt=this.defaultNodes,Cn=qt.length,Xe=jt.children,de=Xe.item(_t);if(de===null)return Cn;var ge=$(de);if(ge)return ge.index;if(Cn===0)return 0;var Ae=un(qt[0]),Se=te(Xe).findIndex(function(ve){return ve===Ae});return _t<Se?0:Cn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),ct}(),Oe=l("8bbf");function ye(ct,mt){var _t=ct[mt];return _t?_t():[]}function pe(ct){var mt=ct.$slots,_t=ct.realList,jt=ct.getKey,qt=_t||[],Cn=["header","footer"].map(function(ve){return ye(mt,ve)}),Xe=z(Cn,2),de=Xe[0],ge=Xe[1],Ae=mt.item;if(!Ae)throw new Error("draggable element must have an item slot");var Se=qt.flatMap(function(ve,Qe){return Ae({element:ve,index:Qe}).map(function(dt){return dt.key=jt(ve),dt.props=M(M({},dt.props||{}),{},{"data-draggable":!0}),dt})});if(Se.length!==qt.length)throw new Error("Item slot must have only one child");return{header:de,footer:ge,default:Se}}function Fe(ct){var mt=Dt(ct),_t=!Ne(ct)&&!mt;return{transition:mt,externalComponent:_t,tag:_t?Object(Oe.resolveComponent)(ct):mt?Oe.TransitionGroup:ct}}function rt(ct){var mt=ct.$slots,_t=ct.tag,jt=ct.realList,qt=ct.getKey,Cn=pe({$slots:mt,realList:jt,getKey:qt}),Xe=Fe(_t);return new Te({nodes:Cn,root:Xe,realList:jt})}function at(ct,mt){var _t=this;Object(Oe.nextTick)(function(){return _t.$emit(ct.toLowerCase(),mt)})}function Ve(ct){var mt=this;return function(_t,jt){if(mt.realList!==null)return mt["onDrag".concat(ct)](_t,jt)}}function Mt(ct){var mt=this,_t=Ve.call(this,ct);return function(jt,qt){_t.call(mt,jt,qt),at.call(mt,ct,jt)}}var wt=null,At={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(mt){return mt}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Gt=["update:modelValue","change"].concat(te([].concat(te(ut.manageAndEmit),te(ut.emit)).map(function(ct){return ct.toLowerCase()}))),dn=Object(Oe.defineComponent)({name:"draggable",inheritAttrs:!1,props:At,emits:Gt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var mt=this.$slots,_t=this.$attrs,jt=this.tag,qt=this.componentData,Cn=this.realList,Xe=this.getKey,de=rt({$slots:mt,tag:jt,realList:Cn,getKey:Xe});this.componentStructure=de;var ge=en({$attrs:_t,componentData:qt});return de.render(Oe.h,ge)}catch(Ae){return this.error=!0,Object(Oe.h)("pre",{style:{color:"red"}},Ae.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&le.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var mt=this;if(!this.error){var _t=this.$attrs,jt=this.$el,qt=this.componentStructure;qt.updated();var Cn=pt({$attrs:_t,callBackBuilder:{manageAndEmit:function(ge){return Mt.call(mt,ge)},emit:function(ge){return at.bind(mt,ge)},manage:function(ge){return Ve.call(mt,ge)}}}),Xe=jt.nodeType===1?jt:jt.parentElement;this._sortable=new W.a(Xe,Cn),this.targetDomElement=Xe,Xe.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var mt=this.list;return mt||this.modelValue},getKey:function(){var mt=this.itemKey;return typeof mt=="function"?mt:function(_t){return _t[mt]}}},watch:{$attrs:{handler:function(mt){var _t=this._sortable;_t&&ft(mt).forEach(function(jt){var qt=z(jt,2),Cn=qt[0],Xe=qt[1];_t.option(Cn,Xe)})},deep:!0}},methods:{getUnderlyingVm:function(mt){return this.componentStructure.getUnderlyingVm(mt)||null},getUnderlyingPotencialDraggableComponent:function(mt){return mt.__draggable_component__},emitChanges:function(mt){var _t=this;Object(Oe.nextTick)(function(){return _t.$emit("change",mt)})},alterList:function(mt){if(this.list){mt(this.list);return}var _t=te(this.modelValue);mt(_t),this.$emit("update:modelValue",_t)},spliceList:function(){var mt=arguments,_t=function(qt){return qt.splice.apply(qt,te(mt))};this.alterList(_t)},updatePosition:function(mt,_t){var jt=function(Cn){return Cn.splice(_t,0,Cn.splice(mt,1)[0])};this.alterList(jt)},getRelatedContextFromMoveEvent:function(mt){var _t=mt.to,jt=mt.related,qt=this.getUnderlyingPotencialDraggableComponent(_t);if(!qt)return{component:qt};var Cn=qt.realList,Xe={list:Cn,component:qt};if(_t!==jt&&Cn){var de=qt.getUnderlyingVm(jt)||{};return M(M({},de),Xe)}return Xe},getVmIndexFromDomIndex:function(mt){return this.componentStructure.getVmIndexFromDomIndex(mt,this.targetDomElement)},onDragStart:function(mt){this.context=this.getUnderlyingVm(mt.item),mt.item._underlying_vm_=this.clone(this.context.element),wt=mt.item},onDragAdd:function(mt){var _t=mt.item._underlying_vm_;if(_t!==void 0){H(mt.item);var jt=this.getVmIndexFromDomIndex(mt.newIndex);this.spliceList(jt,0,_t);var qt={element:_t,newIndex:jt};this.emitChanges({added:qt})}},onDragRemove:function(mt){if(ne(this.$el,mt.item,mt.oldIndex),mt.pullMode==="clone"){H(mt.clone);return}var _t=this.context,jt=_t.index,qt=_t.element;this.spliceList(jt,1);var Cn={element:qt,oldIndex:jt};this.emitChanges({removed:Cn})},onDragUpdate:function(mt){H(mt.item),ne(mt.from,mt.item,mt.oldIndex);var _t=this.context.index,jt=this.getVmIndexFromDomIndex(mt.newIndex);this.updatePosition(_t,jt);var qt={element:this.context.element,oldIndex:_t,newIndex:jt};this.emitChanges({moved:qt})},computeFutureIndex:function(mt,_t){if(!mt.element)return 0;var jt=te(_t.to.children).filter(function(de){return de.style.display!=="none"}),qt=jt.indexOf(_t.related),Cn=mt.component.getVmIndexFromDomIndex(qt),Xe=jt.indexOf(wt)!==-1;return Xe||!_t.willInsertAfter?Cn:Cn+1},onDragMove:function(mt,_t){var jt=this.move,qt=this.realList;if(!jt||!qt)return!0;var Cn=this.getRelatedContextFromMoveEvent(mt),Xe=this.computeFutureIndex(Cn,mt),de=M(M({},this.context),{},{futureIndex:Xe}),ge=M(M({},mt),{},{relatedContext:Cn,draggedContext:de});return jt(ge,_t)},onDragEnd:function(){wt=null}}}),pn=dn;u.default=pn},fb6a:function(a,u,l){var s=l("23e7"),f=l("861d"),y=l("e8b5"),x=l("23cb"),b=l("50c4"),M=l("fc6a"),A=l("8418"),P=l("b622"),L=l("1dde"),O=l("ae40"),V=L("slice"),z=O("slice",{ACCESSORS:!0,0:0,1:2}),B=P("species"),U=[].slice,Z=Math.max;s({target:"Array",proto:!0,forced:!V||!z},{slice:function(Y,W){var H=M(this),ne=b(H.length),le=x(Y,ne),Q=x(W===void 0?ne:W,ne),ce,K,Le;if(y(H)&&(ce=H.constructor,typeof ce=="function"&&(ce===Array||y(ce.prototype))?ce=void 0:f(ce)&&(ce=ce[B],ce===null&&(ce=void 0)),ce===Array||ce===void 0))return U.call(H,le,Q);for(K=new(ce===void 0?Array:ce)(Z(Q-le,0)),Le=0;le<Q;le++,Le++)le in H&&A(K,Le,H[le]);return K.length=Le,K}})},fc6a:function(a,u,l){var s=l("44ad"),f=l("1d80");a.exports=function(y){return s(f(y))}},fdbc:function(a,u){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(a,u,l){var s=l("4930");a.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(e6);var Sne=e6.exports;const JP=vd(Sne),Ene={components:{SvgIcon:Pn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:e9}}}},Tne={class:"draggable-handle__icon"},Pne={class:"draggale-item__info"};function kne(e,t,n,i,a,u){const l=Us("SvgIcon");return xe(),et("div",{class:ii(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?rn("",!0):(xe(),et("div",{key:0,class:"draggable-handle",style:qr({background:n.item.color})},[Pe("div",Tne,[je(l,{size:"14",type:"mdi",path:u.path.draggable},null,8,["path"])])],4)),Pe("div",Pne,[Sn(e.$slots,"default",{},void 0,!0)])],2)}const NI=_n(Ene,[["render",kne],["__scopeId","data-v-4edf7736"]]),Lne={class:"draggable-group__info"},Dne=["title"],Rne={class:"draggable-group__action"},One={key:0,class:"draggable-group__divider"},zne={key:0,class:"draggable-group__nodata"},Fne=An({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},readonly:Boolean},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group"],setup(e,{emit:t}){const n=t,i={group:{open:i9,close:r9,unGroup:z9,delete:rp,show:jM,hide:UM}},a=Kt(!0);function u(){a.value=!a.value}function l(){n("click:delete")}function s(){n("click:un-group")}return(f,y)=>(xe(),Rt(NI,{disabledDrag:e.disabledDrag,class:"draggable-group__item"},{default:nt(()=>[Pe("div",Lne,[Pe("span",{class:"draggable-group__title",title:e.layerGroup.name},an(e.layerGroup.name),9,Dne),Pe("div",Rne,[!e.readonly&&e.layerGroup.children&&e.layerGroup.children.length>0?(xe(),et("span",{key:0,onClick:y[0]||(y[0]=x=>s())},[je(re(Pn),{size:"14",type:"mdi",path:i.group.unGroup},null,8,["path"])])):rn("",!0),e.readonly?rn("",!0):(xe(),et("span",{key:1,onClick:y[1]||(y[1]=x=>l())},[je(re(Pn),{size:"14",type:"mdi",path:i.group.delete},null,8,["path"])])),Pe("span",{onClick:y[2]||(y[2]=x=>u())},[a.value?(xe(),Rt(re(Pn),{key:0,size:"14",type:"mdi",path:i.group.close},null,8,["path"])):(xe(),Rt(re(Pn),{key:1,size:"14",type:"mdi",path:i.group.open},null,8,["path"]))])])]),a.value?(xe(),et("div",One)):rn("",!0),Pe("div",{class:ii({"draggable-group__children-container":!0,_show:a.value})},[Sn(f.$slots,"item",{group:e.layerGroup},()=>[!f.p_children||f.p_children.length<1?(xe(),et("div",zne," Drag layer inside this group ")):rn("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),Bne=_n(Fne,[["__scopeId","data-v-465facc7"]]),Nne={class:"draggable__item item"},Vne={class:"draggable__item"},jne=An({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(e,{expose:t,emit:n}){const i=e,a=n,u=Kt([]),l=Kt({}),s=Wt({get(){return i.selected},set(U){a("update:selected",U)}}),f=U=>U&&U.isGroup,y=U=>{var H;const Z=U.draggedContext.element,te=(H=U.to.__vue__)==null?void 0:H.element,Y=f(Z),W=te&&f(te);return Y&&W?!1:(!Y&&!te||!Y&&te&&!f(te),!0)};Er(()=>{x(i.items)});function x(U=[]){(U==null||U.length===0)&&(U=i.items),u.value=b(U)}function b(U){let Z=[];if(!U||U.length==0)return Z;let te={};return U.forEach(Y=>{if(!Y.group){Z.push(Y);return}te[Y.group.id]||(te[Y.group.id]=B(Y.group),Z.push(te[Y.group.id])),te[Y.group.id].children.push(Y)}),Z}function M(U){return U.reduce((Z,te)=>(te.isGroup?te.children.length>0&&Z.push(...te.children.map(Y=>(Y.group={id:te.id,name:te.name},Y))):(te.group=void 0,Z.push(te)),Z),[])}function A(U){i.disabledSelect||(s.value.includes(U.id)?s.value=s.value.filter(Z=>Z!=U.id):(s.value.push(U.id),l.value[U.id]=U))}function P(U){let Z=[];s.value&&s.value.length>0&&(u.value=u.value.filter(Y=>!s.value.includes(Y.id)).map(Y=>("isGroup"in Y&&Y.isGroup&&(Y.children=Y.children.filter(W=>!s.value.includes(W.id))),Y)),Z=s.value.map(Y=>l.value[Y]),s.value=[],l.value={});let te=B({name:U||"New Group",children:Z});u.value.unshift(te),te.children.length>0&&V()}function L(U,Z){u.value.splice(Z,1),U.children.length>0&&u.value.splice(Z,0,...U.children)}function O(U,Z){u.value[Z]={...u.value[Z],...U}}function V(){fl(()=>{a("update:items",M(u.value)),a("click-drag:done")})}function z(U,Z){u.value.splice(Z,1),a("click-group:remove",U)}function B(U){let Z={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return Z=Object.assign({},Z,U),Z}return t({update:x,addNewGroup:P}),(U,Z)=>(xe(),Rt(re(JP),{modelValue:u.value,"onUpdate:modelValue":Z[0]||(Z[0]=te=>u.value=te),group:"layers","item-key":"id",animation:200,move:y,handle:".draggable-handle",class:"draggable-group-container",onEnd:V},{item:nt(({element:te,index:Y})=>[Pe("div",Nne,[te.isGroup?(xe(),Rt(Bne,{key:te.id,"layer-group":te,"onUpdate:layerGroup":W=>O(W,Y),disabledDrag:e.disabledDrag,"onClick:delete":W=>z(te,Y),"onClick:unGroup":W=>L(te,Y),onDragDone:V,"onClick:select":A,onEnd:V},{item:nt(()=>[je(re(JP),{modelValue:te.children,"onUpdate:modelValue":W=>te.children=W,group:"layers",handle:".draggable-handle","item-key":"id",animation:200,move:y,class:"draggable-group-container"},{item:nt(({element:W,index:H})=>[Pe("div",Vne,[(xe(),Rt(NI,{disabledDrag:e.disabledDrag,isSelected:s.value.includes(W.id),item:W,key:W.id+"-child"},{default:nt(()=>[Sn(U.$slots,"item",{isSelected:s.value.includes(W.id),item:W,index:H,toggleSelect:A},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup"])):(xe(),Rt(NI,{disabledDrag:e.disabledDrag,isSelected:s.value.includes(te.id),item:te,key:te.id+"-child"},{default:nt(()=>[Sn(U.$slots,"item",{isSelected:s.value.includes(te.id),item:te,index:Y,toggleSelect:A},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:3},8,["modelValue"]))}}),Une=_n(jne,[["__scopeId","data-v-f4c80f65"]]),$ne={class:"menu-divider"},Hne=An({__name:"menu-divider",props:{item:{},data:{}},setup(e){return(t,n)=>(xe(),et("div",$ne))}}),Gne=_n(Hne,[["__scopeId","data-v-330a9492"]]),Zne=An({__name:"menu-item",props:{item:{}},setup(e){return(t,n)=>(xe(),Rt(re(Br),Qn(t.$attrs,{class:"menu-item",title:t.item.name}),{default:nt(()=>[t.item.icon?(xe(),Rt(re(Pn),{key:0,size:"14",type:"mdi",path:t.item.icon},null,8,["path"])):rn("",!0)]),_:1},16,["title"]))}}),V0=An({__name:"index",props:{item:{},data:{},mapId:{}},setup(e){const t=e,n=Wt(()=>{switch(t.item.type){case"divider":return Gne}return t.item.type=="item"&&"component"in t.item?t.item.component():Zne});return(i,a)=>(xe(),Rt(ps(n.value),Qn({item:i.item,data:i.data,mapId:i.mapId},i.$attrs),null,16,["item","data","mapId"]))}}),Wne={class:"layer-sub-item-container"},qne={class:"layer-sub-item__info"},Kne={key:0,class:"layer-sub-item__icon"},Yne=["title"],Xne={class:"layer-sub-item__title-action"},Qne=An({__name:"layer-sub-item",props:{item:{},mapId:{}},emits:["click:action","click:content-menu"],setup(e,{emit:t}){const n={menu:NA},i=e,a=Wt(()=>i.item&&i.item.icon),u=t,l=Wt(()=>i.item?i.item.getMenus()||[]:[]),s=Wt(()=>l.value.filter(b=>b.location!=="menu").sort((b,M)=>(b.order||0)-(M.order||0))),f=Wt(()=>l.value.filter(b=>b.location=="menu").sort((b,M)=>(b.order||0)-(M.order||0)));function y(b){u("click:action",{action:b,item:i.item})}function x(b){u("click:content-menu",{event:b,actions:f.value,item:i.item})}return(b,M)=>(xe(),et("div",Wne,[Pe("div",qne,[a.value?(xe(),et("div",Kne,[(xe(),Rt(ps(i.item.icon()),{data:b.item,mapId:b.mapId},null,8,["data","mapId"]))])):rn("",!0),Pe("span",{class:"layer-sub-item__title",title:b.item.getName()},[Pe("span",null,an(b.item.getName()),1)],8,Yne),Pe("div",Xne,[Sn(b.$slots,"pre-btn",{},void 0,!0),(xe(!0),et(Fn,null,Or(s.value,(A,P)=>(xe(),Rt(V0,{key:P,item:A,data:b.item,mapId:b.mapId,onClick:L=>y(A)},null,8,["item","data","mapId","onClick"]))),128)),f.value.length>0?(xe(),Rt(re(Br),{key:0,onClick:yr(x,["prevent","stop"])},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:n.menu},null,8,["path"])]),_:1})):rn("",!0)])])]))}}),Jne=_n(Qne,[["__scopeId","data-v-2d66b779"]]),ere={class:"layer-item-container"},tre={class:"layer-item__info"},nre={key:0,class:"layer-item__icon"},rre=["title"],ire={class:"layer-item__title-action"},sre={key:0,class:"layer-item__action"},are={key:1},ore={key:2,class:"layer-item__children"},lre=An({__name:"layer-item",props:{item:{},mapId:{},readonly:{type:Boolean}},emits:["update:item","click","click:remove","click:action","click:content-menu"],setup(e,{emit:t}){const n=e,i=t;Lr(n);const a={menu:NA,loading:HM,layer:VA,flyTo:rv,delete:rp,edit:T9,legendOpen:M9,legendClose:M4},u=Kt(!1),l=()=>{i("click:remove",n.item)},s=Wt(()=>n.item?n.item.getMenus()||[]:[]),f=Wt(()=>s.value.filter(Y=>!Y.location||Y.location=="extra").sort((Y,W)=>(Y.order||0)-(W.order||0))),y=Wt(()=>s.value.filter(Y=>Y.location=="prebottom").sort((Y,W)=>(Y.order||0)-(W.order||0))),x=Wt(()=>s.value.filter(Y=>Y.location=="bottom").sort((Y,W)=>(Y.order||0)-(W.order||0))),b=Wt(()=>s.value.filter(Y=>Y.location=="menu").sort((Y,W)=>(Y.order||0)-(W.order||0))),M=Wt(()=>!n.readonly&&(!n.item.config.disabled_opacity||x.value.length>0));function A(Y){i("click:action",{action:Y,item:n.item})}function P(Y){i("click:content-menu",{event:Y,actions:b.value,item:n.item})}const L=Wt(()=>n.item&&n.item.icon),O=Wt(()=>n.item&&!!n.item.legend),[V,z]=Bl(n.item.config.init_show_children??!1),[B,U]=Bl(n.item.config.init_show_legend??!1),Z=Kt(!1),te=Kt([]);return Er(()=>{const Y=LI(n.item,"list-item");Z.value=Y.length>0,te.value=Y.slice().reverse()}),(Y,W)=>(xe(),et("div",ere,[Pe("div",tre,[L.value?(xe(),et("div",nre,[(xe(),Rt(ps(n.item.icon()),{data:Y.item,mapId:Y.mapId},null,8,["data","mapId"]))])):rn("",!0),Pe("span",{class:"layer-item__title",title:Y.item.getName(),onClick:W[0]||(W[0]=H=>i("click",Y.item))},[Pe("span",null,an(Y.item.getName()),1)],8,rre),W[4]||(W[4]=Pe("div",{class:"v-spacer"},null,-1)),Pe("div",ire,[Sn(Y.$slots,"pre-btn",{loading:u.value},void 0,!0),(xe(!0),et(Fn,null,Or(f.value,(H,ne)=>(xe(),Rt(V0,{key:ne,item:H,data:Y.item,disabled:u.value,mapId:Y.mapId,onClick:le=>A(H)},null,8,["item","data","disabled","mapId","onClick"]))),128)),!Y.item.config.disabled_delete&&!n.readonly?(xe(),Rt(re(Br),{key:0,disabled:u.value,onClick:yr(l,["stop"])},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:a.delete},null,8,["path"])]),_:1},8,["disabled"])):rn("",!0),Sn(Y.$slots,"extra-btn",{loading:u.value},void 0,!0),b.value.length>0?(xe(),Rt(re(Br),{key:1,disabled:u.value,onClick:yr(P,["prevent","stop"])},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:a.menu},null,8,["path"])]),_:1},8,["disabled"])):rn("",!0),M.value?rn("",!0):(xe(),et(Fn,{key:2},[(xe(!0),et(Fn,null,Or(x.value,(H,ne)=>(xe(),Rt(V0,{key:ne,item:H,data:Y.item,disabled:u.value,mapId:Y.mapId,onClick:le=>A(H)},null,8,["item","data","disabled","mapId","onClick"]))),128)),O.value?(xe(),Rt(re(Br),{key:0,onClick:W[1]||(W[1]=yr(H=>re(U)(),["stop"]))},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:re(B)?a.legendClose:a.legendOpen},null,8,["path"])]),_:1})):rn("",!0)],64))])]),M.value?(xe(),et("div",sre,[(xe(!0),et(Fn,null,Or(y.value,(H,ne)=>(xe(),Rt(V0,{key:ne,item:H,data:Y.item,disabled:u.value,mapId:Y.mapId,onClick:le=>A(H)},null,8,["item","data","disabled","mapId","onClick"]))),128)),W[5]||(W[5]=Pe("div",{class:"v-spacer"},null,-1)),(xe(!0),et(Fn,null,Or(x.value,(H,ne)=>(xe(),Rt(V0,{key:ne,item:H,data:Y.item,disabled:u.value,mapId:Y.mapId,onClick:le=>A(H)},null,8,["item","data","disabled","mapId","onClick"]))),128)),Z.value?(xe(),Rt(re(Br),{key:0,onClick:W[2]||(W[2]=yr(H=>re(z)(),["stop"]))},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:re(V)?a.legendClose:a.legendOpen},null,8,["path"])]),_:1})):rn("",!0),O.value?(xe(),Rt(re(Br),{key:1,onClick:W[3]||(W[3]=yr(H=>re(U)(),["stop"]))},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:re(B)?a.legendClose:a.legendOpen},null,8,["path"])]),_:1})):rn("",!0)])):rn("",!0),O.value&&re(B)?(xe(),et("div",are,[(xe(),Rt(ps(n.item.legend())))])):rn("",!0),Z.value&&re(V)?(xe(),et("div",ore,[(xe(!0),et(Fn,null,Or(te.value,H=>(xe(),Rt(Jne,{key:H.id,item:H,mapId:Y.mapId},null,8,["item","mapId"]))),128))])):rn("",!0)]))}}),ure=_n(lre,[["__scopeId","data-v-7504d55b"]]),cre={class:"layer-control-container"},hre={class:"layer-control__header"},dre={class:"layer-control__list"},fre={class:"layer-context-menu"},pre=["onClick"],mre={class:"layer-context-menu__item-icon"},gre=["innerHTML"],yre=An({__name:"LayerList",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},disabledDrag:{type:Boolean},disabled:{type:Boolean},disabledCreateGroup:{type:Boolean}},{...Ri,disabledDrag:!1,disabled:!1,disabledCreateGroup:!1}),setup(e){const t=e,n={icon:VA,menu:NA,group:{create:I4},deleteAll:rp,layer:{create:ip}},{callMap:i,mapId:a}=Lr(t),{getAllComponentsByType:u,getDatasetIds:l,removeComponent:s}=lv(a.value),f=Kt([]),y=Wt(()=>l().value);xi(y,()=>{L()},{deep:!0}),Er(()=>{L()});const x=Kt(void 0),b=Kt([]);function M(){i(H=>{let ne="";f.value.slice().forEach((le,Q,ce)=>{le.index=ce.length-Q,RL(le.getParent(),[K=>{md(K)&&(K.moveLayer(H,ne),ne=K.getBeforeId())}])})})}function A(H){H&&typeof H!="string"&&(!H||!H.children||H.children.length===0||H.children.forEach(ne=>{s(ne)}))}function P(H){H&&(s(H),L())}function L(){V(),fl(()=>{O()})}function O(){x.value&&x.value.update(f.value)}function V(){const H=u("list");f.value=H.sort((ne,le)=>le.index-ne.index)||[]}function z(){x.value&&x.value.addNewGroup("")}function B(){!f.value||f.value.length===0||(f.value.forEach(H=>{s(H)}),L())}const U=Kt(),Z=xu({items:[],view:void 0});function te({event:H,item:ne,actions:le}){Z.items=le?[...le]:[],Z.view=ne,U.value&&U.value.open(H,ne)}function Y(){Z.items=[],Z.view=void 0,U.value&&U.value.close()}function W({action:H,item:ne}){CS(H,ne,a.value,ne)}return(H,ne)=>(xe(),et("div",cre,[Pe("div",hre,[Sn(H.$slots,"title",{},void 0,!0),ne[4]||(ne[4]=Pe("div",{class:"v-spacer"},null,-1)),je(Ute,{items:f.value},null,8,["items"]),H.disabledCreateGroup?rn("",!0):(xe(),Rt(re(Br),{key:0,onClick:ne[0]||(ne[0]=le=>z())},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:n.group.create},null,8,["path"])]),_:1})),je(re(Br),{onClick:B},{default:nt(()=>[je(re(Pn),{size:"16",type:"mdi",path:n.deleteAll},null,8,["path"])]),_:1})]),Pe("div",dre,[je(Une,{ref_key:"groupRef",ref:x,items:f.value,"onUpdate:items":ne[1]||(ne[1]=le=>f.value=le),selected:b.value,"onUpdate:selected":ne[2]||(ne[2]=le=>b.value=le),disabled:H.disabled,disabledDrag:H.disabledDrag,"onClickDrag:done":ne[3]||(ne[3]=le=>M()),"onClickGroup:remove":A},{item:nt(({isSelected:le,item:Q,toggleSelect:ce})=>[Sn(H.$slots,"item",{item:Q,isSelected:le,toggleSelect:ce},()=>[(xe(),Rt(ps(Q.component||ure),{item:Q,isSelected:le,onClick:K=>ce(Q),"onClick:remove":P,"onClick:contentMenu":te,"onClick:action":W,mapId:re(a),readonly:!1},null,40,["item","isSelected","onClick","mapId"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),je(re(nS),{ref_key:"contextMenuRef",ref:U},{default:nt(()=>[Pe("ul",fre,[(xe(!0),et(Fn,null,Or(Z.items,(le,Q)=>(xe(),et("li",{key:Q,onClick:yr(ce=>{W({action:le,item:Z.view}),Y()},["stop"]),class:ii(["layer-context-menu__item",[le.class,le.type==="divider"?"layer-context-menu__divider":""]])},[Pe("div",mre,[je(re(Pn),{size:"16",type:"mdi",path:le.icon||H.mdiCircleSmall},null,8,["path"])]),Pe("span",{innerHTML:le.name},null,8,gre)],10,pre))),128))])]),_:1},512)]))}}),vre=_n(yre,[["__scopeId","data-v-e6820d84"]]),_re={class:"layer-control__title"},bre={class:"layer-control"},xre={class:"base-map-card-container"},Are={name:"layer-control"},wre=An({...Are,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},show:{type:Boolean},disabledCreate:{type:Boolean},disabledCreateGroup:{type:Boolean}},{...Ri,disabledCreate:!1,disabledCreateGroup:!1}),setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Lr(t),{trans:a,setLocaleDefault:u}=Oi(n.value);u({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const l={icon:VA,menu:NA,group:{create:I4},deleteAll:rp,layer:{create:ip}},[s,f]=Bl(t.show),[y,x]=Bl();function b(){x()}return(M,A)=>(xe(),Rt(re($i),Ui(Di(re(i))),{btn:nt(()=>[re(s)?rn("",!0):(xe(),Rt(re(ri),{key:0,tooltip:re(a)("map.layer-control.title"),onClick:A[0]||(A[0]=yr(P=>re(f)(),["stop"])),active:re(s)},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:l.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:nt(P=>[je(re(n_),{containerId:P.containerId,show:re(s),"onUpdate:show":A[2]||(A[2]=L=>yi(s)?s.value=L:null),title:re(a)("map.layer-control.title")},{title:nt(()=>[Pe("span",_re,an(re(a)("map.layer-control.title")),1)]),default:nt(()=>[Pe("div",bre,[je(vre,{mapId:re(n),disabledCreateGroup:M.disabledCreateGroup},{title:nt(()=>[Sn(M.$slots,"titleList",{mapId:re(n)},()=>[M.disabledCreate?rn("",!0):(xe(),Rt(re(Br),{key:0,onClick:A[1]||(A[1]=yr(L=>b(),["stop"]))},{default:nt(()=>[je(re(Pn),{size:"14",type:"mdi",path:l.layer.create},null,8,["path"])]),_:1}))],!0)]),_:3},8,["mapId","disabledCreateGroup"]),Pe("div",xre,[Sn(M.$slots,"endList",{mapId:re(n)},void 0,!0)])])]),_:2},1032,["containerId","show","title"])]),default:nt(()=>[je(ite,{show:re(y),"onUpdate:show":A[3]||(A[3]=P=>yi(y)?y.value=P:null)},null,8,["show"]),Sn(M.$slots,"default",{},void 0,!0),je(Vte)]),_:3},16))}}),Cre=_n(wre,[["__scopeId","data-v-c59a45f3"]]),mm="source-highlighted",kC="layer-highlighted",Ire=An({__name:"LayerHighlight",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=e,n=Kt({point:`${kC}-point`,line:`${kC}-line`,polygon:`${kC}-polygon`}),i=Kt({point:{type:"circle",filter:["==","$type","Point"],paint:{"circle-radius":6,"circle-color":"#004E98","circle-opacity":.7,"circle-stroke-width":2,"circle-stroke-color":"#fff"}},line:{type:"line",filter:["==","$type","LineString"],paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,4]}},polygon:{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":"#004E98","fill-opacity":.4}}}),{mapId:a,callMap:u}=Lr(t,y,x),{getFeatureHighlight:l,setFeatureHighlight:s,getDatesetHighlight:f}=rw(a.value);function y(le){le.addSource(mm,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),Object.keys(n.value).forEach(Q=>{const ce=n.value[Q];le.getLayer(ce)||le.addLayer({...i.value[Q],id:ce,source:mm})})}function x(le){Object.values(n.value).forEach(Q=>{le.getLayer(Q)&&le.removeLayer(Q)}),le.getSource(mm)&&le.removeSource(mm)}const b=Wt(()=>l()),M=(le,Q,ce)=>{Object.keys(n.value).forEach(K=>{const Le=n.value[K];le.getLayer(Le)&&le.removeLayer(Le);const Ue=Gr(i.value[K]),Be=(Q==null?void 0:Q.highlight(ce))||{};le.addLayer({...Ue,id:Le,source:mm,...Be,filter:Qj(Ue.filter,Be.filter)})})},A=(le,Q)=>{const ce=le.getSource(mm);ce&&ce.setData(Q||{type:"FeatureCollection",features:[]})},P=Kt({}),L=(le,Q=5e3)=>{Object.values(n.value).forEach(ce=>{le.getLayer(ce)&&le.moveLayer(ce)}),W(le),Q>0&&(clearTimeout(P.value[le.id]),P.value[le.id]=setTimeout(()=>{ne(le)},Q))},O=Kt({});function V(le){const Q=f();let ce;Q&&(ce=Vl(Q,K=>K.type=="highlight")),u(K=>{M(K,ce,le),ce||A(K,le),le&&L(K)})}xi(b,()=>{var le;V((le=b.value)==null?void 0:le.value)},{deep:!0});let z=6,B=!0,U=0,Z=.4,te=1;function Y(le){z+=B?.2:-.2,z>=12&&(B=!1),z<=6&&(B=!0),le.setPaintProperty(n.value.point,"circle-radius",z),U+=.1,U=+U.toFixed(1),U>=6&&(U=0);const ce=[2,4].map(K=>K+U);le.setPaintProperty(n.value.line,"line-dasharray",ce),Z+=te*.05,Z>.8&&(te=-1),Z<.2&&(te=1),le.setPaintProperty(n.value.polygon,"fill-opacity",Z),O.value[le.id]=requestAnimationFrame(()=>Y(le))}function W(le){O.value[le.id]==null&&Y(le)}function H(le){const Q=O.value[le.id];Q!=null&&(cancelAnimationFrame(Q),O.value[le.id]=null)}function ne(le){le.getSource(mm).setData({type:"FeatureCollection",features:[]}),s(void 0,"",void 0),H(le)}return(le,Q)=>(xe(),et("div"))}}),Mre={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value},items(){return this.value.items||[]},colors(){return this.items.map(e=>e.color)}}},Sre={class:"legend-item"},Ere={class:"legend-text"},Tre={class:"legend-value-container"};function Pre(e,t,n,i,a,u){return xe(),et("div",Sre,[Pe("div",Ere,an(u.item.text)+":",1),Pe("div",Tre,[(xe(!0),et(Fn,null,Or(u.items,(l,s)=>(xe(),et("div",{class:"legend-value",key:s},an(l.value),1))),128))]),Pe("div",null,[Pe("div",{style:qr({background:`linear-gradient(to right,${u.colors.join(",")})`}),class:"legend-item-color"},null,4)])])}const kre=_n(Mre,[["render",Pre],["__scopeId","data-v-38b04422"]]),Lre={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},Dre={class:"legend-item"},Rre={class:"legend-text"},Ore={class:"legend-value"};function zre(e,t,n,i,a,u){return xe(),et("div",Dre,[Pe("div",Rre,an(u.item.text)+":",1),Pe("div",{style:qr({background:`${u.item.color}`}),class:"legend-item-color"},null,4),Pe("div",Ore,an(u.item.value),1)])}const Fre=_n(Lre,[["render",zre],["__scopeId","data-v-261080ab"]]),Bre={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},Nre={class:"legend-item"},Vre={class:"legend-text"},jre={class:"legend-value"};function Ure(e,t,n,i,a,u){return xe(),et("div",Nre,[Pe("div",Vre,an(u.item.text)+":",1),Pe("div",jre,an(u.item.value),1)])}const $re=_n(Bre,[["render",Ure],["__scopeId","data-v-81e4c2e4"]]),d6={linear:kre,color:Fre,text:$re};function Hre(e,t){const n=d6[e];return()=>ja(n,{value:t})}function e3(e){return()=>An({name:"MultiLegend",setup(){return()=>e.map(t=>{const n=d6[t.type];return ja(n,{value:t.value})})}})}const VI=function(e,t){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},i={on(u,l,s){if(n[u]===void 0)throw new Error(`Invalid event type: ${u}`);n[u].push({selector:l,fn:s})},render(u){t.store.featureChanged(u)}},a=function(u,l){const s=n[u];let f=s.length;for(;f--;){const y=s[f];if(y.selector(l)){y.fn.call(i,l)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(i),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(u){a("drag",u)},click(u){a("click",u)},mousemove(u){a("mousemove",u)},mousedown(u){a("mousedown",u)},mouseup(u){a("mouseup",u)},mouseout(u){a("mouseout",u)},keydown(u){a("keydown",u)},keyup(u){a("keyup",u)},touchstart(u){a("touchstart",u)},touchmove(u){a("touchmove",u)},touchend(u){a("touchend",u)},tap(u){a("tap",u)}}};var RS={},sw={};sw.RADIUS=6378137;sw.FLATTENING=1/298.257223563;sw.POLAR_RADIUS=63567523142e-4;var t3=sw;RS.geometry=f6;RS.ring=jI;function f6(e){var t=0,n;switch(e.type){case"Polygon":return n3(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=n3(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)t+=f6(e.geometries[n]);return t}}function n3(e){var t=0;if(e&&e.length>0){t+=Math.abs(jI(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(jI(e[n]))}return t}function jI(e){var t,n,i,a,u,l,s,f=0,y=e.length;if(y>2){for(s=0;s<y;s++)s===y-2?(a=y-2,u=y-1,l=0):s===y-1?(a=y-1,u=0,l=1):(a=s,u=s+1,l=s+2),t=e[a],n=e[u],i=e[l],f+=(LC(i[0])-LC(t[0]))*Math.sin(LC(n[1]));f=f*t3.RADIUS*t3.RADIUS/2}return f}function LC(e){return e*Math.PI/180}const ol={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},pu={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},rs={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},ul={POLYGON:"polygon",LINE:"line_string",POINT:"point"},qn={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},jr={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},No={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},h_={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},uo={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},wa={ACTIVE:"true",INACTIVE:"false"},p6=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Gre=-90,UI=-85,Zre=90,$I=85,Wre=-270,qre=270,m6=Object.freeze(Object.defineProperty({__proto__:null,LAT_MAX:Zre,LAT_MIN:Gre,LAT_RENDERED_MAX:$I,LAT_RENDERED_MIN:UI,LNG_MAX:qre,LNG_MIN:Wre,activeStates:wa,classes:ol,cursors:rs,events:No,geojsonTypes:qn,interactions:p6,meta:uo,modes:jr,sources:pu,types:ul,updateActions:h_},Symbol.toStringTag,{value:"Module"})),r3={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Kre(e,t){const n=r3[e.geometry.type]-r3[t.geometry.type];return n===0&&e.geometry.type===qn.POLYGON?e.area-t.area:n}function g6(e){return e.map(t=>(t.geometry.type===qn.POLYGON&&(t.area=RS.geometry({type:qn.FEATURE,property:{},geometry:t.geometry})),t)).sort(Kre).map(t=>(delete t.area,t))}function y6(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function vu(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}vu.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};vu.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};vu.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};vu.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,n)=>t.v-n.v).map(t=>t.k)};vu.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const Yre=[uo.FEATURE,uo.MIDPOINT,uo.VERTEX],Zy={click:Xre,touch:Qre};function Xre(e,t,n){return v6(e,t,n,n.options.clickBuffer)}function Qre(e,t,n){return v6(e,t,n,n.options.touchBuffer)}function v6(e,t,n,i){if(n.map===null)return[];const a=e?y6(e,i):t,u={};n.options.styles&&(u.layers=n.options.styles.map(y=>y.id).filter(y=>n.map.getLayer(y)!=null));const l=n.map.queryRenderedFeatures(a,u).filter(y=>Yre.indexOf(y.properties.meta)!==-1),s=new vu,f=[];return l.forEach(y=>{const x=y.properties.id;s.has(x)||(s.add(x),f.push(y))}),g6(f)}function wx(e,t){const n=Zy.click(e,null,t),i={mouse:rs.NONE};return n[0]&&(i.mouse=n[0].properties.active===wa.ACTIVE?rs.MOVE:rs.POINTER,i.feature=n[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(i.mouse=rs.ADD),t.ui.queueMapClasses(i),t.ui.updateMapClasses(),n[0]}function OS(e,t){const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}const Jre=4,eie=12,tie=500;function HI(e,t,n={}){const i=n.fineTolerance!=null?n.fineTolerance:Jre,a=n.grossTolerance!=null?n.grossTolerance:eie,u=n.interval!=null?n.interval:tie;e.point=e.point||t.point,e.time=e.time||t.time;const l=OS(e.point,t.point);return l<i||l<a&&t.time-e.time<u}const nie=25,rie=250;function GI(e,t,n={}){const i=n.tolerance!=null?n.tolerance:nie,a=n.interval!=null?n.interval:rie;return e.point=e.point||t.point,e.time=e.time||t.time,OS(e.point,t.point)<i&&t.time-e.time<a}let iie=(e,t=21)=>(n=t)=>{let i="",a=n|0;for(;a--;)i+=e[Math.random()*e.length|0];return i};const sie=iie("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function zS(){return sie()}const Uo=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||zS(),this.type=t.geometry.type};Uo.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};Uo.prototype.incomingCoords=function(e){this.setCoordinates(e)};Uo.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Uo.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};Uo.prototype.setProperty=function(e,t){this.properties[e]=t};Uo.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:qn.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};Uo.prototype.internal=function(e){const t={id:this.id,meta:uo.FEATURE,"meta:type":this.type,active:wa.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t[`user_${n}`]=this.properties[n];return{type:qn.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const ap=function(e,t){Uo.call(this,e,t)};ap.prototype=Object.create(Uo.prototype);ap.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};ap.prototype.updateCoordinate=function(e,t,n){arguments.length===3?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()};ap.prototype.getCoordinate=function(){return this.getCoordinates()};const vh=function(e,t){Uo.call(this,e,t)};vh.prototype=Object.create(Uo.prototype);vh.prototype.isValid=function(){return this.coordinates.length>1};vh.prototype.addCoordinate=function(e,t,n){this.changed();const i=parseInt(e,10);this.coordinates.splice(i,0,[t,n])};vh.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};vh.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};vh.prototype.updateCoordinate=function(e,t,n){const i=parseInt(e,10);this.coordinates[i]=[t,n],this.changed()};const Ul=function(e,t){Uo.call(this,e,t),this.coordinates=this.coordinates.map(n=>n.slice(0,-1))};Ul.prototype=Object.create(Uo.prototype);Ul.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Ul.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Ul.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Ul.prototype.addCoordinate=function(e,t,n){this.changed();const i=e.split(".").map(u=>parseInt(u,10));this.coordinates[i[0]].splice(i[1],0,[t,n])};Ul.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(i=>parseInt(i,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))};Ul.prototype.getCoordinate=function(e){const t=e.split(".").map(i=>parseInt(i,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))};Ul.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Ul.prototype.updateCoordinate=function(e,t,n){this.changed();const i=e.split("."),a=parseInt(i[0],10),u=parseInt(i[1],10);this.coordinates[a]===void 0&&(this.coordinates[a]=[]),this.coordinates[a][u]=[t,n]};const aie={MultiPoint:ap,MultiLineString:vh,MultiPolygon:Ul},aw=(e,t,n,i,a)=>{const u=n.split("."),l=parseInt(u[0],10),s=u[1]?u.slice(1).join("."):null;return e[l][t](s,i,a)},Bo=function(e,t){if(Uo.call(this,e,t),delete this.coordinates,this.model=aie[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};Bo.prototype=Object.create(Uo.prototype);Bo.prototype._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(n=>new t(this.ctx,{id:zS(),type:qn.FEATURE,properties:{},geometry:{coordinates:n,type:this.type.replace("Multi","")}}))};Bo.prototype.isValid=function(){return this.features.every(e=>e.isValid())};Bo.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};Bo.prototype.getCoordinate=function(e){return aw(this.features,"getCoordinate",e)};Bo.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===qn.POLYGON?e.getCoordinates():e.coordinates)))};Bo.prototype.updateCoordinate=function(e,t,n){aw(this.features,"updateCoordinate",e,t,n),this.changed()};Bo.prototype.addCoordinate=function(e,t,n){aw(this.features,"addCoordinate",e,t,n),this.changed()};Bo.prototype.removeCoordinate=function(e){aw(this.features,"removeCoordinate",e),this.changed()};Bo.prototype.getFeatures=function(){return this.features};function Tr(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}Tr.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};Tr.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,n)=>(t[n.feature_id]===void 0&&(t[n.feature_id]=!0,this._ctx.store.get(n.feature_id).changed()),t),{})};Tr.prototype.getSelected=function(){return this._ctx.store.getSelected()};Tr.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};Tr.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};Tr.prototype.getFeature=function(e){return this._ctx.store.get(e)};Tr.prototype.select=function(e){return this._ctx.store.select(e)};Tr.prototype.deselect=function(e){return this._ctx.store.deselect(e)};Tr.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};Tr.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};Tr.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};Tr.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};Tr.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};Tr.prototype.changeMode=function(e,t={},n={}){return this._ctx.events.changeMode(e,t,n)};Tr.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};Tr.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};Tr.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};Tr.prototype.featuresAt=function(e,t,n="click"){if(n!=="click"&&n!=="touch")throw new Error("invalid buffer type");return Zy[n](e,t,this._ctx)};Tr.prototype.newFeature=function(e){const t=e.geometry.type;return t===qn.POINT?new ap(this._ctx,e):t===qn.LINE_STRING?new vh(this._ctx,e):t===qn.POLYGON?new Ul(this._ctx,e):new Bo(this._ctx,e)};Tr.prototype.isInstanceOf=function(e,t){if(e===qn.POINT)return t instanceof ap;if(e===qn.LINE_STRING)return t instanceof vh;if(e===qn.POLYGON)return t instanceof Ul;if(e==="MultiFeature")return t instanceof Bo;throw new Error(`Unknown feature class: ${e}`)};Tr.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};Tr.prototype.onSetup=function(){};Tr.prototype.onDrag=function(){};Tr.prototype.onClick=function(){};Tr.prototype.onMouseMove=function(){};Tr.prototype.onMouseDown=function(){};Tr.prototype.onMouseUp=function(){};Tr.prototype.onMouseOut=function(){};Tr.prototype.onKeyUp=function(){};Tr.prototype.onKeyDown=function(){};Tr.prototype.onTouchStart=function(){};Tr.prototype.onTouchMove=function(){};Tr.prototype.onTouchEnd=function(){};Tr.prototype.onTap=function(){};Tr.prototype.onStop=function(){};Tr.prototype.onTrash=function(){};Tr.prototype.onCombineFeature=function(){};Tr.prototype.onUncombineFeature=function(){};Tr.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const _6={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},oie=Object.keys(_6);function lie(e){const t=Object.keys(e);return function(n,i={}){let a={};const u=t.reduce((s,f)=>(s[f]=e[f],s),new Tr(n));function l(s){return f=>u[s](a,f)}return{start(){a=u.onSetup(i),oie.forEach(s=>{const f=_6[s];let y=()=>!1;e[f]&&(y=()=>!0),this.on(s,y,l(f))})},stop(){u.onStop(a)},trash(){u.onTrash(a)},combineFeatures(){u.onCombineFeatures(a)},uncombineFeatures(){u.onUncombineFeatures(a)},render(s,f){u.toDisplayFeatures(a,s,f)}}}}function uie(e){const t=Object.keys(e.options.modes).reduce((M,A)=>(M[A]=lie(e.options.modes[A]),M),{});let n={},i={};const a={};let u=null,l=null;a.drag=function(M,A){A({point:M.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:rs.DRAG}),l.drag(M)):M.originalEvent.stopPropagation()},a.mousedrag=function(M){a.drag(M,A=>!HI(n,A))},a.touchdrag=function(M){a.drag(M,A=>!GI(i,A))},a.mousemove=function(M){if((M.originalEvent.buttons!==void 0?M.originalEvent.buttons:M.originalEvent.which)===1)return a.mousedrag(M);const P=wx(M,e);M.featureTarget=P,l.mousemove(M)},a.mousedown=function(M){n={time:new Date().getTime(),point:M.point};const A=wx(M,e);M.featureTarget=A,l.mousedown(M)},a.mouseup=function(M){const A=wx(M,e);M.featureTarget=A,HI(n,{point:M.point,time:new Date().getTime()})?l.click(M):l.mouseup(M)},a.mouseout=function(M){l.mouseout(M)},a.touchstart=function(M){if(!e.options.touchEnabled)return;i={time:new Date().getTime(),point:M.point};const A=Zy.touch(M,null,e)[0];M.featureTarget=A,l.touchstart(M)},a.touchmove=function(M){if(e.options.touchEnabled)return l.touchmove(M),a.touchdrag(M)},a.touchend=function(M){if(M.originalEvent.preventDefault(),!e.options.touchEnabled)return;const A=Zy.touch(M,null,e)[0];M.featureTarget=A,GI(i,{time:new Date().getTime(),point:M.point})?l.tap(M):l.touchend(M)};const s=M=>!(M===8||M===46||M>=48&&M<=57);a.keydown=function(M){(M.srcElement||M.target).classList.contains(ol.CANVAS)&&((M.keyCode===8||M.keyCode===46)&&e.options.controls.trash?(M.preventDefault(),l.trash()):s(M.keyCode)?l.keydown(M):M.keyCode===49&&e.options.controls.point?f(jr.DRAW_POINT):M.keyCode===50&&e.options.controls.line_string?f(jr.DRAW_LINE_STRING):M.keyCode===51&&e.options.controls.polygon&&f(jr.DRAW_POLYGON))},a.keyup=function(M){s(M.keyCode)&&l.keyup(M)},a.zoomend=function(){e.store.changeZoom()},a.data=function(M){if(M.dataType==="style"){const{setup:A,map:P,options:L,store:O}=e;L.styles.some(z=>P.getLayer(z.id))||(A.addLayers(),O.setDirty(),O.render())}};function f(M,A,P={}){l.stop();const L=t[M];if(L===void 0)throw new Error(`${M} is not valid`);u=M;const O=L(e,A);l=VI(O,e),P.silent||e.map.fire(No.MODE_CHANGE,{mode:M}),e.store.setDirty(),e.store.render()}const y={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function x(M){let A=!1;Object.keys(M).forEach(P=>{if(y[P]===void 0)throw new Error("Invalid action type");y[P]!==M[P]&&(A=!0),y[P]=M[P]}),A&&e.map.fire(No.ACTIONABLE,{actions:y})}return{start(){u=e.options.defaultMode,l=VI(t[u](e),e)},changeMode:f,actionable:x,currentModeName(){return u},currentModeRender(M,A){return l.render(M,A)},fire(M,A){e.map&&e.map.fire(M,A)},addEventListeners(){e.map.on("mousemove",a.mousemove),e.map.on("mousedown",a.mousedown),e.map.on("mouseup",a.mouseup),e.map.on("data",a.data),e.map.on("touchmove",a.touchmove),e.map.on("touchstart",a.touchstart),e.map.on("touchend",a.touchend),e.container.addEventListener("mouseout",a.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",a.keydown),e.container.addEventListener("keyup",a.keyup))},removeEventListeners(){e.map.off("mousemove",a.mousemove),e.map.off("mousedown",a.mousedown),e.map.off("mouseup",a.mouseup),e.map.off("data",a.data),e.map.off("touchmove",a.touchmove),e.map.off("touchstart",a.touchstart),e.map.off("touchend",a.touchend),e.container.removeEventListener("mouseout",a.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",a.keydown),e.container.removeEventListener("keyup",a.keyup))},trash(M){l.trash(M)},combineFeatures(){l.combineFeatures()},uncombineFeatures(){l.uncombineFeatures()},getMode(){return u}}}function d_(e){return[].concat(e).filter(t=>t!==void 0)}function cie(){const e=this;if(!(e.ctx.map&&e.ctx.map.getSource(pu.HOT)!==void 0))return f();const n=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:n});let i=[],a=[];e.isDirty?a=e.getAllIds():(i=e.getChangedIds().filter(y=>e.get(y)!==void 0),a=e.sources.hot.filter(y=>y.properties.id&&i.indexOf(y.properties.id)===-1&&e.get(y.properties.id)!==void 0).map(y=>y.properties.id)),e.sources.hot=[];const u=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(y=>{const x=y.properties.id||y.properties.parent;return i.indexOf(x)===-1});const l=u!==e.sources.cold.length||a.length>0;i.forEach(y=>s(y,"hot")),a.forEach(y=>s(y,"cold"));function s(y,x){const M=e.get(y).internal(n);e.ctx.events.currentModeRender(M,A=>{A.properties.mode=n,e.sources[x].push(A)})}l&&e.ctx.map.getSource(pu.COLD).setData({type:qn.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(pu.HOT).setData({type:qn.FEATURE_COLLECTION,features:e.sources.hot}),f();function f(){e.isDirty=!1,e.clearChangedIds()}}function Hi(e){this._features={},this._featureIds=new vu,this._selectedFeatureIds=new vu,this._selectedCoordinates=[],this._changedFeatureIds=new vu,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,cie.call(this),this._emitSelectionChange&&(this.ctx.events.fire(No.SELECTION_CHANGE,{features:this.getSelected().map(n=>n.toGeoJSON()),points:this.getSelectedCoordinates().map(n=>({type:qn.FEATURE,properties:{},geometry:{type:qn.POINT,coordinates:n.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(No.RENDER,{})}))},this.isDirty=!1}Hi.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Hi.prototype.setDirty=function(){return this.isDirty=!0,this};Hi.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){const i=this.get(e);this.ctx.events.fire(No.CREATE,{features:[i.toGeoJSON()]})}return this};Hi.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(No.UPDATE,{action:t.action?t.action:h_.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Hi.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Hi.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Hi.prototype.getAllIds=function(){return this._featureIds.values()};Hi.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Hi.prototype.delete=function(e,t={}){const n=[];return d_(e).forEach(i=>{this._featureIds.has(i)&&(this._featureIds.delete(i),this._selectedFeatureIds.delete(i),t.silent||n.indexOf(this._features[i])===-1&&n.push(this._features[i].toGeoJSON()),delete this._features[i],this.isDirty=!0)}),n.length&&this.ctx.events.fire(No.DELETE,{features:n}),b6(this,t),this};Hi.prototype.get=function(e){return this._features[e]};Hi.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Hi.prototype.select=function(e,t={}){return d_(e).forEach(n=>{this._selectedFeatureIds.has(n)||(this._selectedFeatureIds.add(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),this};Hi.prototype.deselect=function(e,t={}){return d_(e).forEach(n=>{this._selectedFeatureIds.has(n)&&(this._selectedFeatureIds.delete(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),b6(this,t),this};Hi.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Hi.prototype.setSelected=function(e,t={}){return e=d_(e),this.deselect(this._selectedFeatureIds.values().filter(n=>e.indexOf(n)===-1),{silent:t.silent}),this.select(e.filter(n=>!this._selectedFeatureIds.has(n)),{silent:t.silent}),this};Hi.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Hi.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Hi.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Hi.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Hi.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Hi.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Hi.prototype.setFeatureProperty=function(e,t,n,i={}){this.get(e).setProperty(t,n),this.featureChanged(e,{silent:i.silent,action:h_.CHANGE_PROPERTIES})};function b6(e,t={}){const n=e._selectedCoordinates.filter(i=>e._selectedFeatureIds.has(i.feature_id));e._selectedCoordinates.length!==n.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=n}Hi.prototype.storeMapConfig=function(){p6.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Hi.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Hi.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};const hie=["mode","feature","mouse"];function die(e){const t={};let n=null,i={mode:null,feature:null,mouse:null},a={mode:null,feature:null,mouse:null};function u(){l({mode:null,feature:null,mouse:null}),s()}function l(A){a=Object.assign(a,A)}function s(){if(!e.container)return;const A=[],P=[];hie.forEach(L=>{a[L]!==i[L]&&(A.push(`${L}-${i[L]}`),a[L]!==null&&P.push(`${L}-${a[L]}`))}),A.length>0&&e.container.classList.remove(...A),P.length>0&&e.container.classList.add(...P),i=Object.assign(i,a)}function f(A,P={}){const L=document.createElement("button");return L.className=`${ol.CONTROL_BUTTON} ${P.className}`,L.setAttribute("title",P.title),P.container.appendChild(L),L.addEventListener("click",O=>{if(O.preventDefault(),O.stopPropagation(),O.target===n){y(),P.onDeactivate();return}x(A),P.onActivate()},!0),L}function y(){n&&(n.classList.remove(ol.ACTIVE_BUTTON),n=null)}function x(A){y();const P=t[A];P&&P&&A!=="trash"&&(P.classList.add(ol.ACTIVE_BUTTON),n=P)}function b(){const A=e.options.controls,P=document.createElement("div");return P.className=`${ol.CONTROL_GROUP} ${ol.CONTROL_BASE}`,A&&(A[ul.LINE]&&(t[ul.LINE]=f(ul.LINE,{container:P,className:ol.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(jr.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),A[ul.POLYGON]&&(t[ul.POLYGON]=f(ul.POLYGON,{container:P,className:ol.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(jr.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),A[ul.POINT]&&(t[ul.POINT]=f(ul.POINT,{container:P,className:ol.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(jr.DRAW_POINT),onDeactivate:()=>e.events.trash()})),A.trash&&(t.trash=f("trash",{container:P,className:ol.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),A.combine_features&&(t.combine_features=f("combineFeatures",{container:P,className:ol.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),A.uncombine_features&&(t.uncombine_features=f("uncombineFeatures",{container:P,className:ol.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),P}function M(){Object.keys(t).forEach(A=>{const P=t[A];P.parentNode&&P.parentNode.removeChild(P),delete t[A]})}return{setActiveButton:x,queueMapClasses:l,updateMapClasses:s,clearMapClasses:u,addButtons:b,removeButtons:M}}function fie(e){let t=null,n=null;const i={onRemove(){return e.map.off("load",i.connect),clearInterval(n),i.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",i.connect),clearInterval(n),i.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(a){if(e.map=a,e.events=uie(e),e.ui=die(e),e.container=a.getContainer(),e.store=new Hi(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=a.boxZoom.isEnabled(),a.boxZoom.disable();const u=a.dragPan.isEnabled();a.dragPan.disable(),a.dragPan.enable(),u||a.dragPan.disable()}return a.loaded()?i.connect():(a.on("load",i.connect),n=setInterval(()=>{a.loaded()&&i.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(pu.COLD,{data:{type:qn.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(pu.HOT,{data:{type:qn.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(a=>{e.map.addLayer(a)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(a=>{e.map.getLayer(a.id)&&e.map.removeLayer(a.id)}),e.map.getSource(pu.COLD)&&e.map.removeSource(pu.COLD),e.map.getSource(pu.HOT)&&e.map.removeSource(pu.HOT)}};return e.setup=i,i}const DC="#3bb2d0",E0="#fbb03b",i3="#fff",x6=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],E0,DC],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],E0,DC],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":i3}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],E0,DC]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":i3}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":E0}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":E0}}];function ow(e){return function(t){const n=t.featureTarget;return!n||!n.properties?!1:n.properties.meta===e}}function A6(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function Zm(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===wa.ACTIVE&&e.featureTarget.properties.meta===uo.FEATURE}function FS(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===wa.INACTIVE&&e.featureTarget.properties.meta===uo.FEATURE}function lw(e){return e.featureTarget===void 0}function BS(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===uo.FEATURE}function f_(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===uo.VERTEX}function rA(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function uw(e){return e.keyCode===27}function cw(e){return e.keyCode===13}function pie(){return!0}const mie=Object.freeze(Object.defineProperty({__proto__:null,isActiveFeature:Zm,isEnterKey:cw,isEscapeKey:uw,isFeature:BS,isInactiveFeature:FS,isOfMetaType:ow,isShiftDown:rA,isShiftMousedown:A6,isTrue:pie,isVertex:f_,noTarget:lw},Symbol.toStringTag,{value:"Module"}));function Bf(e,t){this.x=e,this.y=t}Bf.prototype={clone(){return new Bf(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),i=t*this.x-n*this.y,a=n*this.x+t*this.y;return this.x=i,this.y=a,this},_rotateAround(e,t){const n=Math.cos(e),i=Math.sin(e),a=t.x+n*(this.x-t.x)-i*(this.y-t.y),u=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=a,this.y=u,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Bf};Bf.convert=function(e){if(e instanceof Bf)return e;if(Array.isArray(e))return new Bf(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Bf(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function NS(e,t){const n=t.getBoundingClientRect();return new Bf(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function Wy(e,t,n,i){return{type:qn.FEATURE,properties:{meta:uo.VERTEX,parent:e,coord_path:n,active:i?wa.ACTIVE:wa.INACTIVE},geometry:{type:qn.POINT,coordinates:t}}}function w6(e,t,n){const i=t.geometry.coordinates,a=n.geometry.coordinates;if(i[1]>$I||i[1]<UI||a[1]>$I||a[1]<UI)return null;const u={lng:(i[0]+a[0])/2,lat:(i[1]+a[1])/2};return{type:qn.FEATURE,properties:{meta:uo.MIDPOINT,parent:e,lng:u.lng,lat:u.lat,coord_path:n.properties.coord_path},geometry:{type:qn.POINT,coordinates:[u.lng,u.lat]}}}function hw(e,t={},n=null){const{type:i,coordinates:a}=e.geometry,u=e.properties&&e.properties.id;let l=[];i===qn.POINT?l.push(Wy(u,a,n,f(n))):i===qn.POLYGON?a.forEach((x,b)=>{s(x,n!==null?`${n}.${b}`:String(b))}):i===qn.LINE_STRING?s(a,n):i.indexOf(qn.MULTI_PREFIX)===0&&y();function s(x,b){let M="",A=null;x.forEach((P,L)=>{const O=b!=null?`${b}.${L}`:String(L),V=Wy(u,P,O,f(O));if(t.midpoints&&A){const B=w6(u,A,V);B&&l.push(B)}A=V;const z=JSON.stringify(P);M!==z&&l.push(V),L===0&&(M=z)})}function f(x){return t.selectedPaths?t.selectedPaths.indexOf(x)!==-1:!1}function y(){const x=i.replace(qn.MULTI_PREFIX,"");a.forEach((b,M)=>{const A={type:qn.FEATURE,properties:e.properties,geometry:{type:x,coordinates:b}};l=l.concat(hw(A,t,M))})}return l}const mc={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},{LAT_MIN:Qb,LAT_MAX:Jb,LAT_RENDERED_MIN:s3,LAT_RENDERED_MAX:a3,LNG_MIN:o3,LNG_MAX:l3}=m6;function gie(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],n=[e.geometry.coordinates].flat(t),i=n.map(s=>s[0]),a=n.map(s=>s[1]),u=s=>Math.min.apply(null,s),l=s=>Math.max.apply(null,s);return[u(i),u(a),l(i),l(a)]}function VS(e,t){let n=Qb,i=Jb,a=Qb,u=Jb,l=l3,s=o3;e.forEach(y=>{const x=gie(y),b=x[1],M=x[3],A=x[0],P=x[2];b>n&&(n=b),M<i&&(i=M),M>a&&(a=M),b<u&&(u=b),A<l&&(l=A),P>s&&(s=P)});const f=t;return n+f.lat>a3&&(f.lat=a3-n),a+f.lat>Jb&&(f.lat=Jb-a),i+f.lat<s3&&(f.lat=s3-i),u+f.lat<Qb&&(f.lat=Qb-u),l+f.lng<=o3&&(f.lng+=Math.ceil(Math.abs(f.lng)/360)*360),s+f.lng>=l3&&(f.lng-=Math.ceil(Math.abs(f.lng)/360)*360),f}function jS(e,t){const n=VS(e.map(i=>i.toGeoJSON()),t);e.forEach(i=>{const a=i.getCoordinates(),u=y=>{const x={lng:y[0]+n.lng,lat:y[1]+n.lat};return[x.lng,x.lat]},l=y=>y.map(x=>u(x)),s=y=>y.map(x=>l(x));let f;i.type===qn.POINT?f=u(a):i.type===qn.LINE_STRING||i.type===qn.MULTI_POINT?f=a.map(u):i.type===qn.POLYGON||i.type===qn.MULTI_LINE_STRING?f=a.map(l):i.type===qn.MULTI_POLYGON&&(f=a.map(s)),i.incomingCoords(f)})}const ki={};ki.onSetup=function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(n=>this.getFeature(n)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};ki.fireUpdate=function(){this.fire(No.UPDATE,{action:h_.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};ki.fireActionable=function(){const e=this.getSelected(),t=e.filter(u=>this.isInstanceOf("MultiFeature",u));let n=!1;if(e.length>1){n=!0;const u=e[0].type.replace("Multi","");e.forEach(l=>{l.type.replace("Multi","")!==u&&(n=!1)})}const i=t.length>0,a=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:i,trash:a})};ki.getUniqueIds=function(e){return e.length?e.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,i)=>(n.add(i),n),new vu).values():[]};ki.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};ki.onStop=function(){mc.enable(this)};ki.onMouseMove=function(e,t){return BS(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};ki.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};ki.onTap=ki.onClick=function(e,t){if(lw(t))return this.clickAnywhere(e,t);if(ow(uo.VERTEX)(t))return this.clickOnVertex(e,t);if(BS(t))return this.clickOnFeature(e,t)};ki.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(n=>this.doRender(n))),mc.enable(this),this.stopExtendedInteractions(e)};ki.clickOnVertex=function(e,t){this.changeMode(jr.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:rs.MOVE})};ki.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};ki.clickOnFeature=function(e,t){mc.disable(this),this.stopExtendedInteractions(e);const n=rA(t),i=this.getSelectedIds(),a=t.featureTarget.properties.id,u=this.isSelected(a);if(!n&&u&&this.getFeature(a).type!==qn.POINT)return this.changeMode(jr.DIRECT_SELECT,{featureId:a});u&&n?(this.deselect(a),this.updateUIClasses({mouse:rs.POINTER}),i.length===1&&mc.enable(this)):!u&&n?(this.select(a),this.updateUIClasses({mouse:rs.MOVE})):!u&&!n&&(i.forEach(l=>this.doRender(l)),this.setSelected(a),this.updateUIClasses({mouse:rs.MOVE})),this.doRender(a)};ki.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),Zm(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&A6(t))return this.startBoxSelect(e,t)};ki.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=NS(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};ki.onTouchStart=function(e,t){if(Zm(t))return this.startOnActiveFeature(e,t)};ki.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};ki.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:rs.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(ol.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=NS(t.originalEvent,this.map.getContainer()),i=Math.min(e.boxSelectStartLocation.x,n.x),a=Math.max(e.boxSelectStartLocation.x,n.x),u=Math.min(e.boxSelectStartLocation.y,n.y),l=Math.max(e.boxSelectStartLocation.y,n.y),s=`translate(${i}px, ${u}px)`;e.boxSelectElement.style.transform=s,e.boxSelectElement.style.WebkitTransform=s,e.boxSelectElement.style.width=`${a-i}px`,e.boxSelectElement.style.height=`${l-u}px`};ki.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};jS(this.getSelected(),n),e.dragMoveLocation=t.lngLat};ki.onTouchEnd=ki.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,NS(t.originalEvent,this.map.getContainer())],i=this.featuresAt(null,n,"click"),a=this.getUniqueIds(i).filter(u=>!this.isSelected(u));a.length&&(this.select(a),a.forEach(u=>this.doRender(u)),this.updateUIClasses({mouse:rs.MOVE}))}this.stopExtendedInteractions(e)};ki.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?wa.ACTIVE:wa.INACTIVE,n(t),this.fireActionable(),!(t.properties.active!==wa.ACTIVE||t.geometry.type===qn.POINT)&&hw(t).forEach(n)};ki.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};ki.onCombineFeatures=function(){const e=this.getSelected();if(e.length===0||e.length<2)return;const t=[],n=[],i=e[0].type.replace("Multi","");for(let a=0;a<e.length;a++){const u=e[a];if(u.type.replace("Multi","")!==i)return;u.type.includes("Multi")?u.getCoordinates().forEach(l=>{t.push(l)}):t.push(u.getCoordinates()),n.push(u.toGeoJSON())}if(n.length>1){const a=this.newFeature({type:qn.FEATURE,properties:n[0].properties,geometry:{type:`Multi${i}`,coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.fire(No.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:n})}this.fireActionable()};ki.onUncombineFeatures=function(){const e=this.getSelected();if(e.length===0)return;const t=[],n=[];for(let i=0;i<e.length;i++){const a=e[i];this.isInstanceOf("MultiFeature",a)&&(a.getFeatures().forEach(u=>{this.addFeature(u),u.properties=a.properties,t.push(u.toGeoJSON()),this.select([u.id])}),this.deleteFeature(a.id,{silent:!0}),n.push(a.toGeoJSON()))}t.length>1&&this.fire(No.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const C6=ow(uo.VERTEX),I6=ow(uo.MIDPOINT),Li={};Li.fireUpdate=function(){this.fire(No.UPDATE,{action:h_.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};Li.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};Li.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Li.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};Li.onVertex=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,i=e.selectedCoordPaths.indexOf(n.coord_path);!rA(t)&&i===-1?e.selectedCoordPaths=[n.coord_path]:rA(t)&&i===-1&&e.selectedCoordPaths.push(n.coord_path);const a=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(a)};Li.onMidpoint=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]};Li.pathsToCoordinates=function(e,t){return t.map(n=>({feature_id:e,coord_path:n}))};Li.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};Li.dragFeature=function(e,t,n){jS(this.getSelected(),n),e.dragMoveLocation=t.lngLat};Li.dragVertex=function(e,t,n){const i=e.selectedCoordPaths.map(l=>e.feature.getCoordinate(l)),a=i.map(l=>({type:qn.FEATURE,properties:{},geometry:{type:qn.POINT,coordinates:l}})),u=VS(a,n);for(let l=0;l<i.length;l++){const s=i[l];e.feature.updateCoordinate(e.selectedCoordPaths[l],s[0]+u.lng,s[1]+u.lat)}};Li.clickNoTarget=function(){this.changeMode(jr.SIMPLE_SELECT)};Li.clickInactive=function(){this.changeMode(jr.SIMPLE_SELECT)};Li.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};Li.onSetup=function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===qn.POINT)throw new TypeError("direct_select mode doesn't handle point features");const i={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,i.selectedCoordPaths)),this.setSelected(t),mc.disable(this),this.setActionableState({trash:!0}),i};Li.onStop=function(){mc.enable(this),this.clearSelectedCoordinates()};Li.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=wa.ACTIVE,n(t),hw(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=wa.INACTIVE,n(t)),this.fireActionable(e)};Li.onTrash=function(e){e.selectedCoordPaths.sort((t,n)=>n.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(jr.SIMPLE_SELECT,{}))};Li.onMouseMove=function(e,t){const n=Zm(t),i=C6(t),a=I6(t),u=e.selectedCoordPaths.length===0;return n&&u?this.updateUIClasses({mouse:rs.MOVE}):i&&!u?this.updateUIClasses({mouse:rs.MOVE}):this.updateUIClasses({mouse:rs.NONE}),(i||n||a)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};Li.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};Li.onTouchStart=Li.onMouseDown=function(e,t){if(C6(t))return this.onVertex(e,t);if(Zm(t))return this.onFeature(e,t);if(I6(t))return this.onMidpoint(e,t)};Li.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat};Li.onClick=function(e,t){if(lw(t))return this.clickNoTarget(e,t);if(Zm(t))return this.clickActiveFeature(e,t);if(FS(t))return this.clickInactive(e,t);this.stopDragging(e)};Li.onTap=function(e,t){if(lw(t))return this.clickNoTarget(e,t);if(Zm(t))return this.clickActiveFeature(e,t);if(FS(t))return this.clickInactive(e,t)};Li.onTouchEnd=Li.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const gh={};gh.onSetup=function(){const e=this.newFeature({type:qn.FEATURE,properties:{},geometry:{type:qn.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:rs.ADD}),this.activateUIButton(ul.POINT),this.setActionableState({trash:!0}),{point:e}};gh.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT)};gh.onTap=gh.onClick=function(e,t){this.updateUIClasses({mouse:rs.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(No.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.point.id]})};gh.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};gh.toDisplayFeatures=function(e,t,n){const i=t.properties.id===e.point.id;if(t.properties.active=i?wa.ACTIVE:wa.INACTIVE,!i)return n(t)};gh.onTrash=gh.stopDrawingAndRemove;gh.onKeyUp=function(e,t){if(uw(t)||cw(t))return this.stopDrawingAndRemove(e,t)};function iA(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}const gc={};gc.onSetup=function(){const e=this.newFeature({type:qn.FEATURE,properties:{},geometry:{type:qn.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),mc.disable(this),this.updateUIClasses({mouse:rs.ADD}),this.activateUIButton(ul.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};gc.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&iA(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:rs.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};gc.clickOnVertex=function(e){return this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};gc.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),f_(t)&&this.updateUIClasses({mouse:rs.POINTER})};gc.onTap=gc.onClick=function(e,t){return f_(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};gc.onKeyUp=function(e,t){uw(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT)):cw(t)&&this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};gc.onStop=function(e){this.updateUIClasses({mouse:rs.NONE}),mc.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(No.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT,{},{silent:!0})))};gc.toDisplayFeatures=function(e,t,n){const i=t.properties.id===e.polygon.id;if(t.properties.active=i?wa.ACTIVE:wa.INACTIVE,!i)return n(t);if(t.geometry.coordinates.length===0)return;const a=t.geometry.coordinates[0].length;if(!(a<3)){if(t.properties.meta=uo.FEATURE,n(Wy(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),a>3){const u=t.geometry.coordinates[0].length-3;n(Wy(e.polygon.id,t.geometry.coordinates[0][u],`0.${u}`,!1))}if(a<=4){const u=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:qn.FEATURE,properties:t.properties,geometry:{coordinates:u,type:qn.LINE_STRING}}),a===3)return}return n(t)}};gc.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT)};const yc={};yc.onSetup=function(e){e=e||{};const t=e.featureId;let n,i,a="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let u=e.from;if(u&&u.type==="Feature"&&u.geometry&&u.geometry.type==="Point"&&(u=u.geometry),u&&u.type==="Point"&&u.coordinates&&u.coordinates.length===2&&(u=u.coordinates),!u||!Array.isArray(u))throw new Error("Please use the `from` property to indicate which point to continue the line from");const l=n.coordinates.length-1;if(n.coordinates[l][0]===u[0]&&n.coordinates[l][1]===u[1])i=l+1,n.addCoordinate(i,...n.coordinates[l]);else if(n.coordinates[0][0]===u[0]&&n.coordinates[0][1]===u[1])a="backwards",i=0,n.addCoordinate(i,...n.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else n=this.newFeature({type:qn.FEATURE,properties:{},geometry:{type:qn.LINE_STRING,coordinates:[]}}),i=0,this.addFeature(n);return this.clearSelectedFeatures(),mc.disable(this),this.updateUIClasses({mouse:rs.ADD}),this.activateUIButton(ul.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:i,direction:a}};yc.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&iA(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&iA(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:rs.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};yc.clickOnVertex=function(e){return this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.line.id]})};yc.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),f_(t)&&this.updateUIClasses({mouse:rs.POINTER})};yc.onTap=yc.onClick=function(e,t){if(f_(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};yc.onKeyUp=function(e,t){cw(t)?this.changeMode(jr.SIMPLE_SELECT,{featureIds:[e.line.id]}):uw(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT))};yc.onStop=function(e){mc.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(No.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT,{},{silent:!0})))};yc.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(jr.SIMPLE_SELECT)};yc.toDisplayFeatures=function(e,t,n){const i=t.properties.id===e.line.id;if(t.properties.active=i?wa.ACTIVE:wa.INACTIVE,!i)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=uo.FEATURE,n(Wy(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),n(t))};const M6={simple_select:ki,direct_select:Li,draw_point:gh,draw_polygon:gc,draw_line_string:yc},yie={defaultMode:jr.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:x6,modes:M6,controls:{},userProperties:!1,suppressAPIEvents:!0},vie={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},_ie={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function u3(e,t){return e.map(n=>n.source?n:Object.assign({},n,{id:`${n.id}.${t}`,source:t==="hot"?pu.HOT:pu.COLD}))}function bie(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},_ie,e.controls):t.controls=Object.assign({},vie,e.controls),t=Object.assign({},yie,t),t.styles=u3(t.styles,"cold").concat(u3(t.styles,"hot")),t}var xie=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,a,u;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(a=i;a--!==0;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(u=Object.keys(t),i=u.length,i!==Object.keys(n).length)return!1;for(a=i;a--!==0;)if(!Object.prototype.hasOwnProperty.call(n,u[a]))return!1;for(a=i;a--!==0;){var l=u[a];if(!e(t[l],n[l]))return!1}return!0}return t!==t&&n!==n};const c3=vd(xie);var Aie=Cie,wie={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Cie(e){if(!e||!e.type)return null;var t=wie[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}const Iie=vd(Aie);function S6(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(n=>n).sort())===JSON.stringify(t.map(n=>n).sort())}const Mie={Polygon:Ul,LineString:vh,Point:ap,MultiPolygon:Bo,MultiLineString:Bo,MultiPoint:Bo};function Sie(e,t){t.modes=jr;const n=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(i){return Zy.click({point:i},null,e).map(u=>u.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:qn.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(i=>e.store.get(i)).map(i=>i.toGeoJSON())}},t.getSelectedPoints=function(){return{type:qn.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(i=>({type:qn.FEATURE,properties:{},geometry:{type:qn.POINT,coordinates:i.coordinates}}))}},t.set=function(i){if(i.type===void 0||i.type!==qn.FEATURE_COLLECTION||!Array.isArray(i.features))throw new Error("Invalid FeatureCollection");const a=e.store.createRenderBatch();let u=e.store.getAllIds().slice();const l=t.add(i),s=new vu(l);return u=u.filter(f=>!s.has(f)),u.length&&t.delete(u),a(),l},t.add=function(i){const u=JSON.parse(JSON.stringify(Iie(i))).features.map(l=>{if(l.id=l.id||zS(),l.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(l.id)===void 0||e.store.get(l.id).type!==l.geometry.type){const s=Mie[l.geometry.type];if(s===void 0)throw new Error(`Invalid geometry type: ${l.geometry.type}.`);const f=new s(e,l);e.store.add(f,{silent:n})}else{const s=e.store.get(l.id),f=s.properties;s.properties=l.properties,c3(f,l.properties)||e.store.featureChanged(s.id,{silent:n}),c3(s.getCoordinates(),l.geometry.coordinates)||s.incomingCoords(l.geometry.coordinates)}return l.id});return e.store.render(),u},t.get=function(i){const a=e.store.get(i);if(a)return a.toGeoJSON()},t.getAll=function(){return{type:qn.FEATURE_COLLECTION,features:e.store.getAll().map(i=>i.toGeoJSON())}},t.delete=function(i){return e.store.delete(i,{silent:n}),t.getMode()===jr.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(jr.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:n}),t.getMode()===jr.DIRECT_SELECT?e.events.changeMode(jr.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.changeMode=function(i,a={}){return i===jr.SIMPLE_SELECT&&t.getMode()===jr.SIMPLE_SELECT?(S6(a.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(a.featureIds,{silent:n}),e.store.render()),t):(i===jr.DIRECT_SELECT&&t.getMode()===jr.DIRECT_SELECT&&a.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(i,a,{silent:n}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:n}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:n}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:n}),t},t.setFeatureProperty=function(i,a,u){return e.store.setFeatureProperty(i,a,u,{silent:n}),t},t}const Eie=Object.freeze(Object.defineProperty({__proto__:null,CommonSelectors:mie,ModeHandler:VI,StringSet:vu,constrainFeatureMovement:VS,createMidPoint:w6,createSupplementaryPoints:hw,createVertex:Wy,doubleClickZoom:mc,euclideanDistance:OS,featuresAt:Zy,getFeatureAtAndSetCursors:wx,isClick:HI,isEventAtCoordinates:iA,isTap:GI,mapEventToBoundingBox:y6,moveFeatures:jS,sortFeatures:g6,stringSetsAreEqual:S6,theme:x6,toDenseArray:d_},Symbol.toStringTag,{value:"Module"})),Tie=function(e,t){e=bie(e);const n={options:e};t=Sie(n,t),n.api=t;const i=fie(n);return t.onAdd=i.onAdd,t.onRemove=i.onRemove,t.types=ul,t.options=e,t};function dw(e){Tie(e,this)}dw.modes=M6;dw.constants=m6;dw.lib=Eie;const Qc=Vo.createLogger().setNamespace("map:draw",2),Pie="draw",kie=e=>jl(["map:core",e,Pie],()=>(Mn(Qc,e,"store").debug("init"),{control:null,state:xu({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}}))(),US=e=>{const t=kie(e),n=U=>{Mn(Qc,e,"store").debug("initDrawControl",U),t.control=U},i=(U,Z)=>{if(!U)throw new Error("Need register id");Mn(Qc,e,"store").debug("activateDraw",U,Z);const te=t.state,Y=t.control;te.register_id=U,te.activated=!0,Y.changeMode("simple_select"),Z&&Y.add(Z)},a=()=>{Mn(Qc,e,"store").debug("deactivateDraw");const U=t.control,Z=s(t);t.action.save&&t.action.save(Z.geojson),t.action.close&&t.action.close(),t.state.draw_support=[];const te=t.state;te.show=!1,t.action={},te.register_id=void 0,te.activated=!1,t.callback=void 0,t.featuresAdded={},t.featuresUpdated={},t.featuresDeleted={},U==null||U.deleteAll()};function u(U){const Z=t.state;if(!Z.activated)throw new Error("Need to call activateDraw first");if(Z.register_id&&Z.register_id!==U)throw new Error("register id not match")}const l=(U,Z,te,Y)=>{Mn(Qc,e,"store").debug("draw",{register_id:U,type:Z,callback:te,options:Y}),u(U);const W=t.control;t.callback=te,W.changeMode(Z,Y)};function s(U){const Z=U.control,te=U.featuresDeleted,Y=U.featuresAdded,W=U.featuresUpdated,H={added:{},updated:{},deleted:te,geojson:{type:"FeatureCollection",features:[]}},ne=Z.getAll();return ne.features.forEach(le=>{const Q=le.id;Y[Q]?(H.added[Q]=le,le.properties||(le.properties={}),le.properties.id=le.id):W[Q]&&(H.updated[Q]=le)}),H.geojson=ne,H}const f=(U,Z)=>{const te=t.state,Y=t.action;if(u(U),Z&&!(Z instanceof Function))throw new Error("Callback is not available");const W=s(t);Mn(Qc,e,"store").debug("saveDraw",{register_id:U,result:W}),Y.deleteFeatures&&Y.deleteFeatures(Object.values(W.deleted)),Y.addFeatures&&Y.addFeatures(Object.values(W.added)),Y.updateFeatures&&Y.updateFeatures(Object.values(W.updated)),Y.reset&&Y.reset(),Z&&Z(W),te.activated=!1,x()};function y(){Mn(Qc,e,"store").debug("cancelDraw");const U=t.state;x(),U.activated=!1}const x=()=>{Mn(Qc,e,"store").debug("clearDraw");const U=t.state;t.featuresAdded={},t.featuresAdded={},t.featuresDeleted={},U.cleanAfterDone&&t.control.deleteAll(),t.control.changeMode("simple_select")};function b(U,Z){switch(Mn(Qc,e,"store").debug("setFeature",{type:U,feature:Z}),U){case"added":t.featuresAdded[Z.id]=!0;break;case"updated":if(t.featuresAdded[Z.id])return;t.featuresUpdated[Z.id]=!0;break;case"deleted":if(t.featuresAdded[Z.id])return;t.featuresDeleted[Z.id]=Z;break}}function M(U){t.callback&&(f(U,t.callback),t.callback=void 0)}function A(U){Mn(Qc,e,"store").debug("callDraw",{option:U});const Z=wu(),te=t.state,Y=t.action;return te.register_id=Z,te.show=!0,te.cleanAfterDone=!!U.cleanAfterDone,te.draw_support=U.draw_support,Y.addFeatures=U.addFeatures,Y.updateFeatures=U.updateFeatures,Y.deleteFeatures=U.deleteFeatures,Y.getFeatures=U.getFeatures,Y.reset=U.reset,Y.save=U.save,Z}return{initDrawControl:n,activateDraw:i,deactivateDraw:a,callDraw:A,setFeature:b,checkAndCallDone:M,getDrawSupport:()=>t.state.draw_support,cancelDraw:y,draw:l,saveDraw:f,getDrawIsActivated:()=>t.state.activated,getDrawIsRegisterId:()=>t.state.register_id,getDrawIsShow:()=>t.state.show,getDrawAction:()=>t.action,getDrawControl:()=>t.control}},RC="#3bb2d0",T0="#fbb03b",h3="#fff",Lie=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],T0,RC],"fill-opacity":.1}},{id:"gl-draw-lines-active",type:"line",filter:["all",["any",["==","$type","LineString"],["==","$type","Polygon"]],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":T0,"line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-lines-inactive",type:"line",filter:["all",["any",["==","$type","LineString"],["==","$type","Polygon"]],["!=","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":RC,"line-dasharray":[2,0],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":h3}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],T0,RC]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":h3}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":T0}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":T0}}],Die={key:0,class:"d-flex button-custom-container"},Rie={key:1,class:"d-flex button-custom-container"},Oie={class:"context-menu"},zie=["onClick"],Fie=["innerHTML"],Bie={name:"draw-control"},Nie=An({...Bie,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},drawOptions:{}},{...Ri,drawOptions:void 0}),setup(e){const t=e,n=t.drawOptions,{mapId:i,moduleContainerProps:a,callMap:u}=Lr(t),{initDrawControl:l,activateDraw:s,deactivateDraw:f,callDraw:y,cancelDraw:x,checkAndCallDone:b,draw:M,getDrawAction:A,getDrawControl:P,getDrawIsActivated:L,getDrawIsRegisterId:O,getDrawIsShow:V,getDrawSupport:z,saveDraw:B,setFeature:U}=US(i.value),Z=Wt(()=>V());xi(Z,ot=>{u(Pt=>{ot?(K("select"),Pt.on("draw.create",H),Pt.on("draw.update",ne),Pt.on("draw.delete",le),Pt.addControl(W)):(Pt.off("draw.create",H),Pt.off("draw.update",ne),Pt.off("draw.delete",le),Pt.removeControl(W))})});const{add:te,remove:Y}=Bm(i.value,new l_().setHandler(Dt));let W=new dw({displayControlsDefault:!1,boxSelect:!1,styles:Lie});function H(ot){for(const Pt of ot.features)U("added",Pt);b(Le.value),K("select")}function ne(ot){for(const Pt of ot.features)U("updated",Pt);b(Le.value),K("select")}function le(ot){for(const Pt of ot.features)U("deleted",Pt);b(Le.value),K("select")}l(W);const Q={add:ip,delete:VM,update:S4,save:o9,discard:Vy,close:Vy,draw:f9},ce=Kt("");function K(ot){switch(Y(),ce.value=ot,ot){case"select":case"delete":te();break}}const Le=Wt(()=>O());function Ue(ot){s(Le.value),M(Le.value,ot)}const Be=Wt(()=>L()),tt=Wt(()=>z()),ut=Wt(()=>Be.value);function Tt(){B(Le.value)}function Ge(){x()}function Ne(){f(),Y()}async function Dt(ot){const Pt=A(),Lt=P(),un=await(Pt.getFeatures&&Pt.getFeatures([ot.lngLat.lng,ot.lngLat.lat]))||[];switch(ce.value){case"select":{const Ie=Lt==null?void 0:Lt.add({type:"FeatureCollection",features:un});Ie&&Ie.length>0&&(s(Le.value),M(Le.value,"direct_select",void 0,{featureId:Ie[0]}));break}case"delete":{Lt==null||Lt.delete(Lt.getSelectedIds()),Pt.deleteFeatures&&Pt.deleteFeatures(un),Pt.reset&&Pt.reset();break}}}const Bt=Kt(),St=Wt(()=>tt.value.map(ot=>typeof ot=="string"?{id:ot,name:tse[ot]||ot}:ot));function en(){Bt.value&&Bt.value.close()}function pt(ot){if(tt.value.length>1){Bt.value&&Bt.value.open(ot);return}K("create"),Ue(tt.value[0])}function ft(){n&&y(n)}return(ot,Pt)=>(xe(),Rt(re($i),Ui(Di(re(a))),{btn:nt(()=>[Z.value?(xe(),et("div",Die,[ut.value?(xe(),Rt(re(jy),{key:0,row:""},{default:nt(()=>[je(re(ri),{onClick:Pt[0]||(Pt[0]=Lt=>Ge())},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.discard},null,8,["path"])]),_:1}),je(re(ri),{onClick:Pt[1]||(Pt[1]=Lt=>Tt())},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.save},null,8,["path"])]),_:1})]),_:1})):(xe(),Rt(re(jy),{key:1,row:""},{default:nt(()=>[je(re(ri),{onClick:Pt[2]||(Pt[2]=Lt=>Ne())},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.close},null,8,["path"])]),_:1}),je(re(ri),{active:ce.value==="create",onClick:pt},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.add},null,8,["path"])]),_:1},8,["active"]),je(re(ri),{active:ce.value==="select",onClick:Pt[3]||(Pt[3]=Lt=>K("select"))},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.update},null,8,["path"])]),_:1},8,["active"]),je(re(ri),{active:ce.value==="delete",onClick:Pt[4]||(Pt[4]=Lt=>K("delete"))},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):re(n)?(xe(),et("div",Rie,[je(re(ri),null,{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Q.draw,onClick:ft},null,8,["path"])]),_:1})])):rn("",!0)]),default:nt(()=>[je(re(nS),{ref_key:"contextMenuRef",ref:Bt},{default:nt(()=>[Pe("ul",Oie,[(xe(!0),et(Fn,null,Or(St.value,(Lt,un)=>(xe(),et("li",{key:un,onClick:yr(Ie=>{K("create"),Ue(Lt.id),en()},["stop"]),class:"context-menu__item"},[Pe("span",{innerHTML:Lt.name},null,8,Fie)],8,zie))),128))])]),_:1},512)]),_:1},16))}});var ZI={exports:{}};(function(e,t){(function(n,i){{var a=i();e&&e.exports&&(t=e.exports=a),t.randomColor=a}})(la,function(){var n=null,i={};V();var a=[],u=function(Y){if(Y=Y||{},Y.seed!==void 0&&Y.seed!==null&&Y.seed===parseInt(Y.seed,10))n=Y.seed;else if(typeof Y.seed=="string")n=Z(Y.seed);else{if(Y.seed!==void 0&&Y.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var W,H,ne;if(Y.count!==null&&Y.count!==void 0){for(var le=Y.count,Q=[],ce=0;ce<Y.count;ce++)a.push(!1);for(Y.count=null;le>Q.length;){var K=u(Y);n!==null&&(Y.seed=n),Q.push(K)}return Y.count=le,Q}return W=l(Y),H=s(W,Y),ne=f(W,H,Y),y([W,H,ne],Y)};function l(Y){if(a.length>0){var W=te(Y.hue),H=P(W),ne=(W[1]-W[0])/a.length,le=parseInt((H-W[0])/ne);a[le]===!0?le=(le+2)%a.length:a[le]=!0;var Q=(W[0]+le*ne)%359,ce=(W[0]+(le+1)*ne)%359;return W=[Q,ce],H=P(W),H<0&&(H=360+H),H}else{var W=b(Y.hue);return H=P(W),H<0&&(H=360+H),H}}function s(Y,W){if(W.hue==="monochrome")return 0;if(W.luminosity==="random")return P([0,100]);var H=M(Y),ne=H[0],le=H[1];switch(W.luminosity){case"bright":ne=55;break;case"dark":ne=le-10;break;case"light":le=55;break}return P([ne,le])}function f(Y,W,H){var ne=x(Y,W),le=100;switch(H.luminosity){case"dark":le=ne+20;break;case"light":ne=(le+ne)/2;break;case"random":ne=0,le=100;break}return P([ne,le])}function y(Y,W){switch(W.format){case"hsvArray":return Y;case"hslArray":return U(Y);case"hsl":var H=U(Y);return"hsl("+H[0]+", "+H[1]+"%, "+H[2]+"%)";case"hsla":var ne=U(Y),ce=W.alpha||Math.random();return"hsla("+ne[0]+", "+ne[1]+"%, "+ne[2]+"%, "+ce+")";case"rgbArray":return z(Y);case"rgb":var le=z(Y);return"rgb("+le.join(", ")+")";case"rgba":var Q=z(Y),ce=W.alpha||Math.random();return"rgba("+Q.join(", ")+", "+ce+")";default:return L(Y)}}function x(Y,W){for(var H=A(Y).lowerBounds,ne=0;ne<H.length-1;ne++){var le=H[ne][0],Q=H[ne][1],ce=H[ne+1][0],K=H[ne+1][1];if(W>=le&&W<=ce){var Le=(K-Q)/(ce-le),Ue=Q-Le*le;return Le*W+Ue}}return 0}function b(Y){if(typeof parseInt(Y)=="number"){var W=parseInt(Y);if(W<360&&W>0)return[W,W]}if(typeof Y=="string"){if(i[Y]){var H=i[Y];if(H.hueRange)return H.hueRange}else if(Y.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ne=B(Y)[0];return[ne,ne]}}return[0,360]}function M(Y){return A(Y).saturationRange}function A(Y){Y>=334&&Y<=360&&(Y-=360);for(var W in i){var H=i[W];if(H.hueRange&&Y>=H.hueRange[0]&&Y<=H.hueRange[1])return i[W]}return"Color not found"}function P(Y){if(n===null){var W=.618033988749895,H=Math.random();return H+=W,H%=1,Math.floor(Y[0]+H*(Y[1]+1-Y[0]))}else{var ne=Y[1]||1,le=Y[0]||0;n=(n*9301+49297)%233280;var Q=n/233280;return Math.floor(le+Q*(ne-le))}}function L(Y){var W=z(Y);function H(le){var Q=le.toString(16);return Q.length==1?"0"+Q:Q}var ne="#"+H(W[0])+H(W[1])+H(W[2]);return ne}function O(Y,W,H){var ne=H[0][0],le=H[H.length-1][0],Q=H[H.length-1][1],ce=H[0][1];i[Y]={hueRange:W,lowerBounds:H,saturationRange:[ne,le],brightnessRange:[Q,ce]}}function V(){O("monochrome",null,[[0,0],[100,0]]),O("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),O("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),O("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),O("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),O("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),O("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),O("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function z(Y){var W=Y[0];W===0&&(W=1),W===360&&(W=359),W=W/360;var H=Y[1]/100,ne=Y[2]/100,le=Math.floor(W*6),Q=W*6-le,ce=ne*(1-H),K=ne*(1-Q*H),Le=ne*(1-(1-Q)*H),Ue=256,Be=256,tt=256;switch(le){case 0:Ue=ne,Be=Le,tt=ce;break;case 1:Ue=K,Be=ne,tt=ce;break;case 2:Ue=ce,Be=ne,tt=Le;break;case 3:Ue=ce,Be=K,tt=ne;break;case 4:Ue=Le,Be=ce,tt=ne;break;case 5:Ue=ne,Be=ce,tt=K;break}var ut=[Math.floor(Ue*255),Math.floor(Be*255),Math.floor(tt*255)];return ut}function B(Y){Y=Y.replace(/^#/,""),Y=Y.length===3?Y.replace(/(.)/g,"$1$1"):Y;var W=parseInt(Y.substr(0,2),16)/255,H=parseInt(Y.substr(2,2),16)/255,ne=parseInt(Y.substr(4,2),16)/255,le=Math.max(W,H,ne),Q=le-Math.min(W,H,ne),ce=le?Q/le:0;switch(le){case W:return[60*((H-ne)/Q%6)||0,ce,le];case H:return[60*((ne-W)/Q+2)||0,ce,le];case ne:return[60*((W-H)/Q+4)||0,ce,le]}}function U(Y){var W=Y[0],H=Y[1]/100,ne=Y[2]/100,le=(2-H)*ne;return[W,Math.round(H*ne/(le<1?le:2-le)*1e4)/100,le/2*100]}function Z(Y){for(var W=0,H=0;H!==Y.length&&!(W>=Number.MAX_SAFE_INTEGER);H++)W+=Y.charCodeAt(H);return W}function te(Y){if(isNaN(Y)){if(typeof Y=="string"){if(i[Y]){var H=i[Y];if(H.hueRange)return H.hueRange}else if(Y.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ne=B(Y)[0];return A(ne).hueRange}}}else{var W=parseInt(Y);if(W<360&&W>0)return A(Y).hueRange}return[0,360]}return u})})(ZI,ZI.exports);var Vie=ZI.exports;const jie=vd(Vie);function Uie(e,t){let n="bright",i;return/water|ocean|lake|sea|river/.test(e)&&(i="blue"),/state|country|place/.test(e)&&(i="pink"),/road|highway|transport|streets/.test(e)&&(i="orange"),/contour|building|earth/.test(e)&&(i="monochrome"),/building/.test(e)&&(n="dark"),/earth/.test(e)&&(n="light"),/contour|landuse/.test(e)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(e)&&(i="green"),`rgba(${jie({luminosity:n,hue:i,seed:e,format:"rgbArray"}).join(", ")}, ${t||"1"})`}function $ie(e){return e.metadata&&e.metadata["maplibregl-inspect:inspect"]}function Hie(e){const t={};return Object.keys(e.style.sourceCaches).forEach(n=>{const i=e.style.sourceCaches[n]||{_source:{}},a=i._source.vectorLayerIds;a?t[n]=a:i._source.type==="geojson"&&(t[n]=[])}),t}function Gie(e){return Object.assign(e,{metadata:Object.assign({},e.metadata,{"maplibregl-inspect:inspect":!0})})}function Zie(e){return typeof e>"u"||e===null?e:e instanceof Date?e.toLocaleString():typeof e=="object"||typeof e=="number"||typeof e=="string"?e.toString():e}function OC(e,t){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${e}</div><div class="maplibregl-inspect_property-value">${Zie(t)}</div></div>`}function Wie(e){return`<div class="maplibregl-inspect_layer">${e}</div>`}function qie(e){const t=Wie(e.layer["source-layer"]||e.layer.source),n=OC("$id",e.id),i=OC("$type",e.geometry.type),a=Object.keys(e.properties).map(u=>OC(u,e.properties[u]));return[t,n,i].concat(a).join("")}function Kie(e){return e.map(t=>`<div class="maplibregl-inspect_feature">${qie(t)}</div>`).join("")}function Yie(e){return`<div class="maplibregl-inspect_popup-container"><div class="maplibregl-inspect_popup" style="max-height: 200px; overflow-y: auto;">${Kie(e)}</div></div>`}function d3(e,t,n){const i={id:[t,n,"circle"].join("_"),source:t,type:"circle",paint:{"circle-color":e,"circle-radius":2},filter:["==","$type","Point"]};return n&&(i["source-layer"]=n),i}function f3(e,t,n,i){const a={id:[n,i,"polygon"].join("_"),source:n,type:"fill",paint:{"fill-color":e,"fill-antialias":!0,"fill-outline-color":e},filter:["==","$type","Polygon"]};return i&&(a["source-layer"]=i),a}function p3(e,t,n){const i={id:[t,n,"line"].join("_"),source:t,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":e},filter:["==","$type","LineString"]};return n&&(i["source-layer"]=n),i}function Xie(e,t){const n=[],i=[],a=[];function u(l){return{circle:t(l,.8),line:t(l,.6),polygon:t(l,.3),polygonOutline:t(l,.6),default:t(l,1)}}return Object.keys(e).forEach(l=>{const s=e[l];if(!s||s.length===0){const f=u(l);i.push(d3(f.circle,l)),a.push(p3(f.line,l)),n.push(f3(f.polygon,f.polygonOutline,l))}else s.forEach(f=>{const y=u(f);i.push(d3(y.circle,l,f)),a.push(p3(y.line,l,f)),n.push(f3(y.polygon,y.polygonOutline,l,f))})}),n.concat(a).concat(i)}function Qie(e,t,n){n=Object.assign({backgroundColor:"#fff"},n);const i={id:"background",type:"background",paint:{"background-color":n.backgroundColor}},a={};return Object.keys(e.sources).forEach(u=>{const l=e.sources[u];(l.type==="vector"||l.type==="geojson")&&(a[u]=l)}),Object.assign(e,{layers:[i].concat(t),sources:a})}const Jie={name:"inspect-control"},ese=An({...Jie,props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},showInspectDefault:{type:Boolean},useInspectStyle:{type:Boolean},showInspectMapPopup:{type:Boolean},showInspectMapPopupOnHover:{type:Boolean},showMapPopup:{type:Boolean},showMapPopupOnHover:{type:Boolean},blockHoverPopupOnClick:{type:Boolean},buildInspectStyle:{type:Function},backgroundColor:{},assignLayerColor:{type:Function},renderPopup:{type:Function},selectThreshold:{},queryParameters:{}},{...Ri,showInspectDefault:!1,useInspectStyle:!0,showInspectMapPopup:!0,showInspectMapPopupOnHover:!1,showMapPopup:!1,showMapPopupOnHover:!0,blockHoverPopupOnClick:!1,buildInspectStyle:Qie,backgroundColor:"#fff",assignLayerColor:Uie,renderPopup:Yie,selectThreshold:5,queryParameters:()=>({})}),setup(e){const t=e,n=Ca(new zm.Popup({closeButton:!1,closeOnClick:!1})),{callMap:i,mapId:a,moduleContainerProps:u}=Lr(t,ne,le),{getDrawIsShow:l}=US(a.value),{trans:s,setLocaleDefault:f}=Oi(a.value),y=Kt(t.showInspectDefault);f({map:{"inspect-control":{button:"Toggle inspect"}}});const x=new l_().setHandler(V),b=new wY().setHandler(V),M=Kt(!1),{add:A,remove:P}=Bm(a.value,x),{add:L,remove:O}=Bm(a.value,b);function V(Le){if(y.value){if(!t.showInspectMapPopup||Le.type==="mousemove"&&!t.showInspectMapPopupOnHover)return;Le.type==="click"&&t.showInspectMapPopupOnHover&&t.blockHoverPopupOnClick&&(M.value=!M.value)}else{if(!t.showMapPopup||Le.type==="mousemove"&&!t.showMapPopupOnHover)return;Le.type==="click"&&t.showMapPopupOnHover&&t.blockHoverPopupOnClick&&(M.value=!M.value)}if(!M.value&&n.value){let Ue;t.selectThreshold===0?Ue=Le.point:Ue=[[Le.point.x-t.selectThreshold,Le.point.y+t.selectThreshold],[Le.point.x+t.selectThreshold,Le.point.y-t.selectThreshold]],i(Be=>{const tt=Be.queryRenderedFeatures(Ue,t.queryParameters)||[];if(Be.getCanvas().style.cursor=tt.length?"pointer":"",!tt.length)n.value.remove();else{n.value.setLngLat(Le.lngLat);const ut=t.renderPopup(tt);typeof ut=="string"?n.value.setHTML(ut):n.value.setDOMContent(ut),n.value.addTo(Be)}})}}function z(){var Le;y.value=!y.value,y.value?(A(),L()):((Le=n.value)==null||Le.remove(),P(),O()),i(Ue=>Q(Ue))}const B={map:A9,inspect:C9};let U={},Z;const te=(Le,Ue)=>{if(Le.sourceDataType==="visibility"||!Le.isSourceLoaded)return;const Be=Object.assign({},U);U=Hie(Ue),!Om.isEqual(Be,U)&&Object.keys(U).length>0&&setTimeout(()=>Q(Ue),1e3)},Y=Le=>{const Ue=Le.getStyle();$ie(Ue)||(Z=Ue)};let W,H;function ne(Le){W=Ue=>te(Ue,Le),H=()=>Y(Le),Object.keys(U).length===0&&(Le.on("tiledata",W),Le.on("sourcedata",W)),Le.on("styledata",H),Le.on("load",H)}function le(Le){y.value=!1,Le.off("styledata",W),Le.off("load",W),Le.off("tiledata",H),Le.off("sourcedata",H),P(),O(),Q(Le)}function Q(Le){y.value?t.useInspectStyle&&Le.setStyle(Gie(ce(Le))):Z&&t.useInspectStyle&&Le.setStyle(Z)}function ce(Le){const Ue=Xie(U,t.assignLayerColor);return t.buildInspectStyle(Le.getStyle(),Ue,{backgroundColor:t.backgroundColor})}const K=Wt(()=>l());return(Le,Ue)=>(xe(),Rt(re($i),Ui(Di(re(u))),{btn:nt(()=>[K.value?rn("",!0):(xe(),Rt(re(ri),{key:0,tooltip:re(s)("map.inspect-control.button")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",onClick:Ue[0]||(Ue[0]=Be=>z()),path:y.value?B.inspect:B.map},null,8,["path"])]),_:1},8,["tooltip"]))]),default:nt(()=>[Sn(Le.$slots,"default")]),_:3},16))}}),ky={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},tse={[ky.POINT]:"draw point",[ky.LINE_STRING]:"draw line string",[ky.POLYGON]:"draw polygon"};function nse(e){const{expr:t,layer:n}=e,i=Math.min(t(n,"paint","circle-radius"),8),a=Math.min(t(n,"paint","circle-stroke-width"),4),u=t(n,"paint","circle-color"),l=t(n,"paint","circle-opacity"),s=t(n,"paint","circle-stroke-color"),f=t(n,"paint","circle-stroke-opacity"),y=t(n,"paint","circle-blur"),x=i-a/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:`blur(${y*x}px)`}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:l,r:x}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:f,r:i,"stroke-width":a,stroke:s}}]}}function rse(e){const{image:t,expr:n,layer:i}=e,a=n(i,"paint","fill-pattern"),u=t(a);return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:a?`url(${u})`:void 0,backgroundColor:a?void 0:n(i,"paint","fill-color"),opacity:n(i,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function ise(e){const{layer:t,image:n,expr:i}=e,a=n(i(t,"paint","line-pattern")),u={stroke:a?"url(#img1)":i(t,"paint","line-color"),strokeWidth:Math.max(2,Math.min(i(t,"paint","line-width"),8)),strokeOpacity:i(t,"paint","line-opacity"),strokeDasharray:i(t,"paint","line-dasharray")},l=u.strokeWidth;let s=`stroke: ${u.stroke};`;return u.strokeOpacity&&(s+=`stroke-opacity: ${u.strokeOpacity};`),u.strokeDasharray&&(s+=`stroke-dasharray: ${u.strokeDasharray};`),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:u.strokeWidth,height:u.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:`translate(${-(l/2)} ${-(l/2)}) rotate(45)`},children:[{element:"image",attributes:{key:"img","xlink:href":a,x:0,y:0,width:u.strokeWidth,height:u.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:s,d:"M0 20 L 20 0"}}]}}function sse({expr:e,layer:t,image:n}){const i=e(t,"layout","icon-image");if(!i)return null;const a=n(i);return a?{element:"div",attributes:{style:{backgroundImage:`url(${a})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}function ase({expr:e,layer:t}){const n=e(t,"paint","text-color"),i=e(t,"paint","text-opacity"),a=e(t,"paint","text-halo-color"),u=e(t,"paint","text-halo-width"),l="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z";return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:l,stroke:a,"stroke-width":u*2,fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:l,fill:"white"}},{element:"path",attributes:{key:"l3",d:l,fill:n,opacity:i}}]}}function ose(e){return sse(e)||ase(e)}var lse=8,use={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},cse={"*":{type:"source"}},hse=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],dse={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},fse={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},pse={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},mse={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},gse={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},yse={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},vse={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},_se=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],bse={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xse={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ase={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wse={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cse={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ise={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Mse={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Sse={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ese={type:"array",value:"*"},Tse={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},Pse={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},kse={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Lse={type:"array",value:"*",minimum:1},Dse={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Rse={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Ose={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},zse={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},Fse=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Bse={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Nse={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Vse={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},jse={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Use={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},$se={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Hse={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Gse={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Zse={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Wse={"*":{type:"string"}},qse={$version:lse,$root:use,sources:cse,source:hse,source_vector:dse,source_raster:fse,source_raster_dem:pse,source_geojson:mse,source_video:gse,source_image:yse,layer:vse,layout:_se,layout_background:bse,layout_fill:xse,layout_circle:Ase,layout_heatmap:wse,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Cse,layout_symbol:Ise,layout_raster:Mse,layout_hillshade:Sse,filter:Ese,filter_operator:Tse,geometry_type:Pse,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:kse,expression:Lse,light:Dse,sky:Rse,terrain:Ose,projection:zse,paint:Fse,paint_fill:Bse,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Nse,paint_circle:Vse,paint_heatmap:jse,paint_symbol:Use,paint_raster:$se,paint_hillshade:Hse,paint_background:Gse,transition:Zse,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Wse};function E6(e,...t){for(const n of t)for(const i in n)e[i]=n[i];return e}class ih extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class $S{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[i,a]of n)this.bindings[i]=a}concat(t){return new $S(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const fw={kind:"null"},vn={kind:"number"},Mr={kind:"string"},br={kind:"boolean"},lh={kind:"color"},pw={kind:"projectionDefinition"},Em={kind:"object"},gr={kind:"value"},Kse={kind:"error"},mw={kind:"collator"},gw={kind:"formatted"},yw={kind:"padding"},D1={kind:"colorArray"},vw={kind:"numberArray"},p_={kind:"resolvedImage"},_w={kind:"variableAnchorOffsetCollection"};function zl(e,t){return{kind:"array",itemType:e,N:t}}function is(e){if(e.kind==="array"){const t=is(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const Yse=[fw,vn,Mr,br,lh,pw,gw,Em,zl(gr),yw,vw,D1,p_,_w];function R1(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!R1(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of Yse)if(!R1(n,t))return null}}return`Expected ${is(e)} but found ${is(t)} instead.`}function HS(e,t){return t.some(n=>n.kind===e.kind)}function Tm(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function If(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const T6=.96422,P6=1,k6=.82521,L6=4/29,Ly=6/29,D6=3*Ly*Ly,Xse=Ly*Ly*Ly,Qse=Math.PI/180,Jse=180/Math.PI;function R6(e){return e=e%360,e<0&&(e+=360),e}function O6([e,t,n,i]){e=zC(e),t=zC(t),n=zC(n);let a,u;const l=FC((.2225045*e+.7168786*t+.0606169*n)/P6);e===t&&t===n?a=u=l:(a=FC((.4360747*e+.3850649*t+.1430804*n)/T6),u=FC((.0139322*e+.0971045*t+.7141733*n)/k6));const s=116*l-16;return[s<0?0:s,500*(a-l),200*(l-u),i]}function zC(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function FC(e){return e>Xse?Math.pow(e,1/3):e/D6+L6}function z6([e,t,n,i]){let a=(e+16)/116,u=isNaN(t)?a:a+t/500,l=isNaN(n)?a:a-n/200;return a=P6*NC(a),u=T6*NC(u),l=k6*NC(l),[BC(3.1338561*u-1.6168667*a-.4906146*l),BC(-.9787684*u+1.9161415*a+.033454*l),BC(.0719453*u-.2289914*a+1.4052427*l),i]}function BC(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function NC(e){return e>Ly?e*e*e:D6*(e-L6)}function eae(e){const[t,n,i,a]=O6(e),u=Math.sqrt(n*n+i*i);return[Math.round(u*1e4)?R6(Math.atan2(i,n)*Jse):NaN,u,t,a]}function tae([e,t,n,i]){return e=isNaN(e)?0:e*Qse,z6([n,Math.cos(e)*t,Math.sin(e)*t,i])}function nae([e,t,n,i]){e=R6(e),t/=100,n/=100;function a(u){const l=(u+e/30)%12,s=t*Math.min(n,1-n);return n-s*Math.max(-1,Math.min(l-3,9-l,1))}return[a(0),a(8),a(4),i]}const rae=Object.hasOwn||function(t,n){return Object.prototype.hasOwnProperty.call(t,n)};function F6(e,t){return rae(e,t)?e[t]:void 0}function iae(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=F6(sae,e);if(t){const[a,u,l]=t;return[a/255,u/255,l/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const u=e.length<6?1:2;let l=1;return[ex(e.slice(l,l+=u)),ex(e.slice(l,l+=u)),ex(e.slice(l,l+=u)),ex(e.slice(l,l+u)||"ff")]}if(e.startsWith("rgb")){const a=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,u=e.match(a);if(u){const[l,s,f,y,x,b,M,A,P,L,O,V]=u,z=[y||" ",M||" ",L].join("");if(z==="  "||z==="  /"||z===",,"||z===",,,"){const B=[f,b,P].join(""),U=B==="%%%"?100:B===""?255:0;if(U){const Z=[cy(+s/U,0,1),cy(+x/U,0,1),cy(+A/U,0,1),O?m3(+O,V):1];if(g3(Z))return Z}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=e.match(n);if(i){const[a,u,l,s,f,y,x,b,M]=i,A=[l||" ",f||" ",x].join("");if(A==="  "||A==="  /"||A===",,"||A===",,,"){const P=[+u,cy(+s,0,100),cy(+y,0,100),b?m3(+b,M):1];if(g3(P))return nae(P)}}}function ex(e){return parseInt(e.padEnd(2,e),16)/255}function m3(e,t){return cy(t?e/100:e,0,1)}function cy(e,t,n){return Math.min(Math.max(t,e),n)}function g3(e){return!e.some(Number.isNaN)}const sae={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Gf(e,t,n){return e+n*(t-e)}function qy(e,t,n){return e.map((i,a)=>Gf(i,t[a],n))}function aae(e){return e==="rgb"||e==="hcl"||e==="lab"}class Jr{constructor(t,n,i,a=1,u=!0){this.r=t,this.g=n,this.b=i,this.a=a,u||(this.r*=a,this.g*=a,this.b*=a,a||this.overwriteGetter("rgb",[t,n,i,a]))}static parse(t){if(t instanceof Jr)return t;if(typeof t!="string")return;const n=iae(t);if(n)return new Jr(...n,!1)}get rgb(){const{r:t,g:n,b:i,a}=this,u=a||1/0;return this.overwriteGetter("rgb",[t/u,n/u,i/u,a])}get hcl(){return this.overwriteGetter("hcl",eae(this.rgb))}get lab(){return this.overwriteGetter("lab",O6(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,i,a]=this.rgb;return`rgba(${[t,n,i].map(u=>Math.round(u*255)).join(",")},${a})`}static interpolate(t,n,i,a="rgb"){switch(a){case"rgb":{const[u,l,s,f]=qy(t.rgb,n.rgb,i);return new Jr(u,l,s,f,!1)}case"hcl":{const[u,l,s,f]=t.hcl,[y,x,b,M]=n.hcl;let A,P;if(!isNaN(u)&&!isNaN(y)){let B=y-u;y>u&&B>180?B-=360:y<u&&u-y>180&&(B+=360),A=u+i*B}else isNaN(u)?isNaN(y)?A=NaN:(A=y,(s===1||s===0)&&(P=x)):(A=u,(b===1||b===0)&&(P=l));const[L,O,V,z]=tae([A,P??Gf(l,x,i),Gf(s,b,i),Gf(f,M,i)]);return new Jr(L,O,V,z,!1)}case"lab":{const[u,l,s,f]=z6(qy(t.lab,n.lab,i));return new Jr(u,l,s,f,!1)}}}}Jr.black=new Jr(0,0,0,1);Jr.white=new Jr(1,1,1,1);Jr.transparent=new Jr(0,0,0,0);Jr.red=new Jr(1,0,0,1);class GS{constructor(t,n,i){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const oae=["bottom","center","top"];class WI{constructor(t,n,i,a,u,l){this.text=t,this.image=n,this.scale=i,this.fontStack=a,this.textColor=u,this.verticalAlign=l}}class uh{constructor(t){this.sections=t}static fromString(t){return new uh([new WI(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof uh?t:uh.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class zo{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof zo)return t;if(typeof t=="number")return new zo([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new zo(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i){return new zo(qy(t.values,n.values,i))}}class Fo{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Fo)return t;if(typeof t=="number")return new Fo([t]);if(Array.isArray(t)){for(const n of t)if(typeof n!="number")return;return new Fo(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i){return new Fo(qy(t.values,n.values,i))}}class $a{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof $a)return t;if(typeof t=="string"){const i=Jr.parse(t);return i?new $a([i]):void 0}if(!Array.isArray(t))return;const n=[];for(const i of t){if(typeof i!="string")return;const a=Jr.parse(i);if(!a)return;n.push(a)}return new $a(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i,a="rgb"){const u=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let l=0;l<t.values.length;l++)u.push(Jr.interpolate(t.values[l],n.values[l],i,a));return new $a(u)}}class fs extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const lae=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class _u{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof _u)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const i=t[n],a=t[n+1];if(typeof i!="string"||!lae.has(i)||!Array.isArray(a)||a.length!==2||typeof a[0]!="number"||typeof a[1]!="number")return}return new _u(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i){const a=t.values,u=n.values;if(a.length!==u.length)throw new fs(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const l=[];for(let s=0;s<a.length;s+=2){if(a[s]!==u[s])throw new fs(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${a[s]}, to[${s}]: ${u[s]}`);l.push(a[s]);const[f,y]=a[s+1],[x,b]=u[s+1];l.push([Gf(f,x,i),Gf(y,b,i)])}return new _u(l)}}class xd{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new xd({name:t,available:!1}):null}}class mu{constructor(t,n,i){this.from=t,this.to=n,this.transition=i}static interpolate(t,n,i){return new mu(t,n,i)}static parse(t){if(t instanceof mu)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new mu(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new mu(t.from,t.to,t.transition);if(typeof t=="string")return new mu(t,t,1)}}function B6(e,t,n,i){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[e,t,n,i]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function O1(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof mu||e instanceof Jr||e instanceof GS||e instanceof uh||e instanceof zo||e instanceof Fo||e instanceof $a||e instanceof _u||e instanceof xd)return!0;if(Array.isArray(e)){for(const t of e)if(!O1(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!O1(e[t]))return!1;return!0}else return!1}function Gs(e){if(e===null)return fw;if(typeof e=="string")return Mr;if(typeof e=="boolean")return br;if(typeof e=="number")return vn;if(e instanceof Jr)return lh;if(e instanceof mu)return pw;if(e instanceof GS)return mw;if(e instanceof uh)return gw;if(e instanceof zo)return yw;if(e instanceof Fo)return vw;if(e instanceof $a)return D1;if(e instanceof _u)return _w;if(e instanceof xd)return p_;if(Array.isArray(e)){const t=e.length;let n;for(const i of e){const a=Gs(i);if(!n)n=a;else{if(n===a)continue;n=gr;break}}return zl(n||gr,t)}else return Em}function l1(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Jr||e instanceof mu||e instanceof uh||e instanceof zo||e instanceof Fo||e instanceof $a||e instanceof _u||e instanceof xd?e.toString():JSON.stringify(e)}class Ky{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!O1(t[1]))return n.error("invalid value");const i=t[1];let a=Gs(i);const u=n.expectedType;return a.kind==="array"&&a.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(a=u),new Ky(a,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const tx={string:Mr,number:vn,boolean:br,object:Em};class lc{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let i=1,a;const u=t[0];if(u==="array"){let s;if(t.length>2){const y=t[1];if(typeof y!="string"||!(y in tx)||y==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);s=tx[y],i++}else s=gr;let f;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);f=t[2],i++}a=zl(s,f)}else{if(!tx[u])throw new Error(`Types doesn't contain name = ${u}`);a=tx[u]}const l=[];for(;i<t.length;i++){const s=n.parse(t[i],i,gr);if(!s)return null;l.push(s)}return new lc(a,l)}evaluate(t){for(let n=0;n<this.args.length;n++){const i=this.args[n].evaluate(t);if(R1(this.type,Gs(i))){if(n===this.args.length-1)throw new fs(`Expected value to be of type ${is(this.type)}, but found ${is(Gs(i))} instead.`)}else return i}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const y3={"to-boolean":br,"to-color":lh,"to-number":vn,"to-string":Mr};class Nf{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const i=t[0];if(!y3[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&t.length!==2)return n.error("Expected one argument.");const a=y3[i],u=[];for(let l=1;l<t.length;l++){const s=n.parse(t[l],l,gr);if(!s)return null;u.push(s)}return new Nf(a,u)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,i;for(const a of this.args){if(n=a.evaluate(t),i=null,n instanceof Jr)return n;if(typeof n=="string"){const u=t.parseColor(n);if(u)return u}else if(Array.isArray(n)&&(n.length<3||n.length>4?i=`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:i=B6(n[0],n[1],n[2],n[3]),!i))return new Jr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new fs(i||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const i of this.args){n=i.evaluate(t);const a=zo.parse(n);if(a)return a}throw new fs(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const i of this.args){n=i.evaluate(t);const a=Fo.parse(n);if(a)return a}throw new fs(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const i of this.args){n=i.evaluate(t);const a=$a.parse(n);if(a)return a}throw new fs(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const i of this.args){n=i.evaluate(t);const a=_u.parse(n);if(a)return a}throw new fs(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const i of this.args){if(n=i.evaluate(t),n===null)return 0;const a=Number(n);if(!isNaN(a))return a}throw new fs(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return uh.fromString(l1(this.args[0].evaluate(t)));case"resolvedImage":return xd.fromString(l1(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return l1(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const uae=["Unknown","Point","LineString","Polygon"];class N6{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?uae[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=Jr.parse(t),this._parseColorCache.set(t,n)),n}}class bw{constructor(t,n,i=[],a,u=new $S,l=[]){this.registry=t,this.path=i,this.key=i.map(s=>`[${s}]`).join(""),this.scope=u,this.errors=l,this.expectedType=a,this._isConstant=n}parse(t,n,i,a,u={}){return n?this.concat(n,i,a)._parse(t,u):this._parse(t,u)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function i(a,u,l){return l==="assert"?new lc(u,[a]):l==="coerce"?new Nf(u,[a]):a}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=t[0];if(typeof a!="string")return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[a];if(u){let l=u.parse(t,this);if(!l)return null;if(this.expectedType){const s=this.expectedType,f=l.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&f.kind==="value")l=i(l,s,n.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&["string","array"].includes(f.kind)||["color","formatted","resolvedImage"].includes(s.kind)&&["value","string"].includes(f.kind)||["padding","numberArray"].includes(s.kind)&&["value","number","array"].includes(f.kind)||s.kind==="colorArray"&&["value","string","array"].includes(f.kind)||s.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(f.kind))l=i(l,s,n.typeAnnotation||"coerce");else if(this.checkSubtype(s,f))return null}if(!(l instanceof Ky)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const s=new N6;try{l=new Ky(l.type,l.evaluate(s))}catch(f){return this.error(f.message),null}}return l}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,i){const a=typeof t=="number"?this.path.concat(t):this.path,u=i?this.scope.concat(i):this.scope;return new bw(this.registry,this._isConstant,a,n||null,u,this.errors)}error(t,...n){const i=`${this.key}${n.map(a=>`[${a}]`).join("")}`;this.errors.push(new ih(i,t))}checkSubtype(t,n){const i=R1(t,n);return i&&this.error(i),i}}class xw{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let u=1;u<t.length-1;u+=2){const l=t[u];if(typeof l!="string")return n.error(`Expected string, but found ${typeof l} instead.`,u);if(/[^a-zA-Z0-9_]/.test(l))return n.error("Variable names must contain only alphanumeric characters or '_'.",u);const s=n.parse(t[u+1],u+1);if(!s)return null;i.push([l,s])}const a=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return a?new xw(i,a):null}outputDefined(){return this.result.outputDefined()}}class Aw{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const i=t[1];return n.scope.has(i)?new Aw(i,n.scope.get(i)):n.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class ZS{constructor(t,n,i){this.type=t,this.index=n,this.input=i}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,vn),a=n.parse(t[2],2,zl(n.expectedType||gr));if(!i||!a)return null;const u=a.type;return new ZS(u.itemType,i,a)}evaluate(t){const n=this.index.evaluate(t),i=this.input.evaluate(t);if(n<0)throw new fs(`Array index out of bounds: ${n} < 0.`);if(n>=i.length)throw new fs(`Array index out of bounds: ${n} > ${i.length-1}.`);if(n!==Math.floor(n))throw new fs(`Array index must be an integer, but found ${n} instead.`);return i[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class WS{constructor(t,n){this.type=br,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,gr),a=n.parse(t[2],2,gr);return!i||!a?null:HS(i.type,[br,Mr,vn,fw,gr])?new WS(i,a):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${is(i.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Tm(n,["boolean","string","number","null"]))throw new fs(`Expected first argument to be of type boolean, string, number or null, but found ${is(Gs(n))} instead.`);if(!Tm(i,["string","array"]))throw new fs(`Expected second argument to be of type array or string, but found ${is(Gs(i))} instead.`);return i.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class sA{constructor(t,n,i){this.type=vn,this.needle=t,this.haystack=n,this.fromIndex=i}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,gr),a=n.parse(t[2],2,gr);if(!i||!a)return null;if(!HS(i.type,[br,Mr,vn,fw,gr]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${is(i.type)} instead`);if(t.length===4){const u=n.parse(t[3],3,vn);return u?new sA(i,a,u):null}else return new sA(i,a)}evaluate(t){const n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Tm(n,["boolean","string","number","null"]))throw new fs(`Expected first argument to be of type boolean, string, number or null, but found ${is(Gs(n))} instead.`);let a;if(this.fromIndex&&(a=this.fromIndex.evaluate(t)),Tm(i,["string"])){const u=i.indexOf(n,a);return u===-1?-1:[...i.slice(0,u)].length}else{if(Tm(i,["array"]))return i.indexOf(n,a);throw new fs(`Expected second argument to be of type array or string, but found ${is(Gs(i))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class qS{constructor(t,n,i,a,u,l){this.inputType=t,this.type=n,this.input=i,this.cases=a,this.outputs=u,this.otherwise=l}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let i,a;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);const u={},l=[];for(let y=2;y<t.length-1;y+=2){let x=t[y];const b=t[y+1];Array.isArray(x)||(x=[x]);const M=n.concat(y);if(x.length===0)return M.error("Expected at least one branch label.");for(const P of x){if(typeof P!="number"&&typeof P!="string")return M.error("Branch labels must be numbers or strings.");if(typeof P=="number"&&Math.abs(P)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof P=="number"&&Math.floor(P)!==P)return M.error("Numeric branch labels must be integer values.");if(!i)i=Gs(P);else if(M.checkSubtype(i,Gs(P)))return null;if(typeof u[String(P)]<"u")return M.error("Branch labels must be unique.");u[String(P)]=l.length}const A=n.parse(b,y,a);if(!A)return null;a=a||A.type,l.push(A)}const s=n.parse(t[1],1,gr);if(!s)return null;const f=n.parse(t[t.length-1],t.length-1,a);return!f||s.type.kind!=="value"&&n.concat(1).checkSubtype(i,s.type)?null:new qS(i,a,s,u,l,f)}evaluate(t){const n=this.input.evaluate(t);return(Gs(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class KS{constructor(t,n,i){this.type=t,this.branches=n,this.otherwise=i}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let i;n.expectedType&&n.expectedType.kind!=="value"&&(i=n.expectedType);const a=[];for(let l=1;l<t.length-1;l+=2){const s=n.parse(t[l],l,br);if(!s)return null;const f=n.parse(t[l+1],l+1,i);if(!f)return null;a.push([s,f]),i=i||f.type}const u=n.parse(t[t.length-1],t.length-1,i);if(!u)return null;if(!i)throw new Error("Can't infer output type");return new KS(i,a,u)}evaluate(t){for(const[n,i]of this.branches)if(n.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,i]of this.branches)t(n),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class aA{constructor(t,n,i,a){this.type=t,this.input=n,this.beginIndex=i,this.endIndex=a}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,gr),a=n.parse(t[2],2,vn);if(!i||!a)return null;if(!HS(i.type,[zl(gr),Mr,gr]))return n.error(`Expected first argument to be of type array or string, but found ${is(i.type)} instead`);if(t.length===4){const u=n.parse(t[3],3,vn);return u?new aA(i.type,i,a,u):null}else return new aA(i.type,i,a)}evaluate(t){const n=this.input.evaluate(t),i=this.beginIndex.evaluate(t);let a;if(this.endIndex&&(a=this.endIndex.evaluate(t)),Tm(n,["string"]))return[...n].slice(i,a).join("");if(Tm(n,["array"]))return n.slice(i,a);throw new fs(`Expected first argument to be of type array or string, but found ${is(Gs(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ww(e,t){const n=e.length-1;let i=0,a=n,u=0,l,s;for(;i<=a;)if(u=Math.floor((i+a)/2),l=e[u],s=e[u+1],l<=t){if(u===n||t<s)return u;i=u+1}else if(l>t)a=u-1;else throw new fs("Input is not a number.");return 0}class Cw{constructor(t,n,i){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[a,u]of i)this.labels.push(a),this.outputs.push(u)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const i=n.parse(t[1],1,vn);if(!i)return null;const a=[];let u=null;n.expectedType&&n.expectedType.kind!=="value"&&(u=n.expectedType);for(let l=1;l<t.length;l+=2){const s=l===1?-1/0:t[l],f=t[l+1],y=l,x=l+1;if(typeof s!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(a.length&&a[a.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const b=n.parse(f,x,u);if(!b)return null;u=u||b.type,a.push([s,b])}return new Cw(u,i,a)}evaluate(t){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return i[0].evaluate(t);const u=n.length;if(a>=n[u-1])return i[u-1].evaluate(t);const l=ww(n,a);return i[l].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function cae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var VC,v3;function hae(){if(v3)return VC;v3=1,VC=e;function e(t,n,i,a){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(a-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=a}return e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,a=0;a<8;a++){var u=this.sampleCurveX(i)-t;if(Math.abs(u)<n)return i;var l=this.sampleCurveDerivativeX(i);if(Math.abs(l)<1e-6)break;i=i-u/l}var s=0,f=1;for(i=t,a=0;a<20&&(u=this.sampleCurveX(i),!(Math.abs(u-t)<n));a++)t>u?s=i:f=i,i=(f-s)*.5+s;return i},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},VC}var dae=hae(),fae=cae(dae);class bu{constructor(t,n,i,a,u){this.type=t,this.operator=n,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(const[l,s]of u)this.labels.push(l),this.outputs.push(s)}static interpolationFactor(t,n,i,a){let u=0;if(t.name==="exponential")u=jC(n,t.base,i,a);else if(t.name==="linear")u=jC(n,1,i,a);else if(t.name==="cubic-bezier"){const l=t.controlPoints;u=new fae(l[0],l[1],l[2],l[3]).solve(jC(n,1,i,a))}return u}static parse(t,n){let[i,a,u,...l]=t;if(!Array.isArray(a)||a.length===0)return n.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){const y=a[1];if(typeof y!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:y}}else if(a[0]==="cubic-bezier"){const y=a.slice(1);if(y.length!==4||y.some(x=>typeof x!="number"||x<0||x>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:y}}else return n.error(`Unknown interpolation type ${String(a[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(u=n.parse(u,2,vn),!u)return null;const s=[];let f=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&n.expectedType!=D1?f=lh:n.expectedType&&n.expectedType.kind!=="value"&&(f=n.expectedType);for(let y=0;y<l.length;y+=2){const x=l[y],b=l[y+1],M=y+3,A=y+4;if(typeof x!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(s.length&&s[s.length-1][0]>=x)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const P=n.parse(b,A,f);if(!P)return null;f=f||P.type,s.push([x,P])}return!If(f,vn)&&!If(f,pw)&&!If(f,lh)&&!If(f,yw)&&!If(f,vw)&&!If(f,D1)&&!If(f,_w)&&!If(f,zl(vn))?n.error(`Type ${is(f)} is not interpolatable.`):new bu(f,i,a,u,s)}evaluate(t){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return i[0].evaluate(t);const u=n.length;if(a>=n[u-1])return i[u-1].evaluate(t);const l=ww(n,a),s=n[l],f=n[l+1],y=bu.interpolationFactor(this.interpolation,a,s,f),x=i[l].evaluate(t),b=i[l+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Gf(x,b,y);case"color":return Jr.interpolate(x,b,y);case"padding":return zo.interpolate(x,b,y);case"colorArray":return $a.interpolate(x,b,y);case"numberArray":return Fo.interpolate(x,b,y);case"variableAnchorOffsetCollection":return _u.interpolate(x,b,y);case"array":return qy(x,b,y);case"projectionDefinition":return mu.interpolate(x,b,y)}case"interpolate-hcl":switch(this.type.kind){case"color":return Jr.interpolate(x,b,y,"hcl");case"colorArray":return $a.interpolate(x,b,y,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Jr.interpolate(x,b,y,"lab");case"colorArray":return $a.interpolate(x,b,y,"lab")}}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function jC(e,t,n,i){const a=i-n,u=e-n;return a===0?0:t===1?u/a:(Math.pow(t,u)-1)/(Math.pow(t,a)-1)}const pae={color:Jr.interpolate,number:Gf,padding:zo.interpolate,numberArray:Fo.interpolate,colorArray:$a.interpolate,variableAnchorOffsetCollection:_u.interpolate,array:qy};class z1{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let i=null;const a=n.expectedType;a&&a.kind!=="value"&&(i=a);const u=[];for(const s of t.slice(1)){const f=n.parse(s,1+u.length,i,void 0,{typeAnnotation:"omit"});if(!f)return null;i=i||f.type,u.push(f)}if(!i)throw new Error("No output type");return a&&u.some(s=>R1(a,s.type))?new z1(gr,u):new z1(i,u)}evaluate(t){let n=null,i=0,a;for(const u of this.args)if(i++,n=u.evaluate(t),n&&n instanceof xd&&!n.available&&(a||(a=n.name),n=null,i===this.args.length&&(n=a)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function _3(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function mae(e,t,n){return t===n}function gae(e,t,n){return t!==n}function yae(e,t,n){return t<n}function vae(e,t,n){return t>n}function _ae(e,t,n){return t<=n}function bae(e,t,n){return t>=n}function V6(e,t,n,i){return i.compare(t,n)===0}function xae(e,t,n,i){return!V6(e,t,n,i)}function Aae(e,t,n,i){return i.compare(t,n)<0}function wae(e,t,n,i){return i.compare(t,n)>0}function Cae(e,t,n,i){return i.compare(t,n)<=0}function Iae(e,t,n,i){return i.compare(t,n)>=0}function uv(e,t,n){const i=e!=="=="&&e!=="!=";return class j6{constructor(u,l,s){this.type=br,this.lhs=u,this.rhs=l,this.collator=s,this.hasUntypedArgument=u.type.kind==="value"||l.type.kind==="value"}static parse(u,l){if(u.length!==3&&u.length!==4)return l.error("Expected two or three arguments.");const s=u[0];let f=l.parse(u[1],1,gr);if(!f)return null;if(!_3(s,f.type))return l.concat(1).error(`"${s}" comparisons are not supported for type '${is(f.type)}'.`);let y=l.parse(u[2],2,gr);if(!y)return null;if(!_3(s,y.type))return l.concat(2).error(`"${s}" comparisons are not supported for type '${is(y.type)}'.`);if(f.type.kind!==y.type.kind&&f.type.kind!=="value"&&y.type.kind!=="value")return l.error(`Cannot compare types '${is(f.type)}' and '${is(y.type)}'.`);i&&(f.type.kind==="value"&&y.type.kind!=="value"?f=new lc(y.type,[f]):f.type.kind!=="value"&&y.type.kind==="value"&&(y=new lc(f.type,[y])));let x=null;if(u.length===4){if(f.type.kind!=="string"&&y.type.kind!=="string"&&f.type.kind!=="value"&&y.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(x=l.parse(u[3],3,mw),!x)return null}return new j6(f,y,x)}evaluate(u){const l=this.lhs.evaluate(u),s=this.rhs.evaluate(u);if(i&&this.hasUntypedArgument){const f=Gs(l),y=Gs(s);if(f.kind!==y.kind||!(f.kind==="string"||f.kind==="number"))throw new fs(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${f.kind}, ${y.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const f=Gs(l),y=Gs(s);if(f.kind!=="string"||y.kind!=="string")return t(u,l,s)}return this.collator?n(u,l,s,this.collator.evaluate(u)):t(u,l,s)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}}}const Mae=uv("==",mae,V6),Sae=uv("!=",gae,xae),Eae=uv("<",yae,Aae),Tae=uv(">",vae,wae),Pae=uv("<=",_ae,Cae),kae=uv(">=",bae,Iae);class Iw{constructor(t,n,i){this.type=mw,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const i=t[1];if(typeof i!="object"||Array.isArray(i))return n.error("Collator options argument must be an object.");const a=n.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,br);if(!a)return null;const u=n.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,br);if(!u)return null;let l=null;return i.locale&&(l=n.parse(i.locale,1,Mr),!l)?null:new Iw(a,u,l)}evaluate(t){return new GS(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class YS{constructor(t,n,i,a,u){this.type=Mr,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=u}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const i=n.parse(t[1],1,vn);if(!i)return null;const a=t[2];if(typeof a!="object"||Array.isArray(a))return n.error("NumberFormat options argument must be an object.");let u=null;if(a.locale&&(u=n.parse(a.locale,1,Mr),!u))return null;let l=null;if(a.currency&&(l=n.parse(a.currency,1,Mr),!l))return null;let s=null;if(a["min-fraction-digits"]&&(s=n.parse(a["min-fraction-digits"],1,vn),!s))return null;let f=null;return a["max-fraction-digits"]&&(f=n.parse(a["max-fraction-digits"],1,vn),!f)?null:new YS(i,u,l,s,f)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class XS{constructor(t){this.type=gw,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&typeof i=="object")return n.error("First argument must be an image or text section.");const a=[];let u=!1;for(let l=1;l<=t.length-1;++l){const s=t[l];if(u&&typeof s=="object"&&!Array.isArray(s)){u=!1;let f=null;if(s["font-scale"]&&(f=n.parse(s["font-scale"],1,vn),!f))return null;let y=null;if(s["text-font"]&&(y=n.parse(s["text-font"],1,zl(Mr)),!y))return null;let x=null;if(s["text-color"]&&(x=n.parse(s["text-color"],1,lh),!x))return null;let b=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!oae.includes(s["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(b=n.parse(s["vertical-align"],1,Mr),!b)return null}const M=a[a.length-1];M.scale=f,M.font=y,M.textColor=x,M.verticalAlign=b}else{const f=n.parse(t[l],1,gr);if(!f)return null;const y=f.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,a.push({content:f,scale:null,font:null,textColor:null,verticalAlign:null})}}return new XS(a)}evaluate(t){const n=i=>{const a=i.content.evaluate(t);return Gs(a)===p_?new WI("",a,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(t):null):new WI(l1(a),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null,i.verticalAlign?i.verticalAlign.evaluate(t):null)};return new uh(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class QS{constructor(t){this.type=p_,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const i=n.parse(t[1],1,Mr);return i?new QS(i):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),i=xd.fromString(n);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(n)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}}class JS{constructor(t){this.type=vn,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=n.parse(t[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${is(i.type)} instead.`):new JS(i):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new fs(`Expected value to be of type string or array, but found ${is(Gs(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ch=8192;function Lae(e,t){const n=Dae(e[0]),i=Oae(e[1]),a=Math.pow(2,t.z);return[Math.round(n*a*ch),Math.round(i*a*ch)]}function eE(e,t){const n=Math.pow(2,t.z),i=(e[0]/ch+t.x)/n,a=(e[1]/ch+t.y)/n;return[Rae(i),zae(a)]}function Dae(e){return(180+e)/360}function Rae(e){return e*360-180}function Oae(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function zae(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function m_(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function F1(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Fae(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function Bae(e,t,n){const i=e[0]-t[0],a=e[1]-t[1],u=e[0]-n[0],l=e[1]-n[1];return i*l-u*a===0&&i*u<=0&&a*l<=0}function Mw(e,t,n,i){const a=[t[0]-e[0],t[1]-e[1]],u=[i[0]-n[0],i[1]-n[1]];return Uae(u,a)===0?!1:!!(b3(e,t,n,i)&&b3(n,i,e,t))}function Nae(e,t,n){for(const i of n)for(let a=0;a<i.length-1;++a)if(Mw(e,t,i[a],i[a+1]))return!0;return!1}function cv(e,t,n=!1){let i=!1;for(const a of t)for(let u=0;u<a.length-1;u++){if(Bae(e,a[u],a[u+1]))return n;Fae(e,a[u],a[u+1])&&(i=!i)}return i}function Vae(e,t){for(const n of t)if(cv(e,n))return!0;return!1}function U6(e,t){for(const n of e)if(!cv(n,t))return!1;for(let n=0;n<e.length-1;++n)if(Nae(e[n],e[n+1],t))return!1;return!0}function jae(e,t){for(const n of t)if(U6(e,n))return!0;return!1}function Uae(e,t){return e[0]*t[1]-e[1]*t[0]}function b3(e,t,n,i){const a=e[0]-n[0],u=e[1]-n[1],l=t[0]-n[0],s=t[1]-n[1],f=i[0]-n[0],y=i[1]-n[1],x=a*y-f*u,b=l*y-f*s;return x>0&&b<0||x<0&&b>0}function tE(e,t,n){const i=[];for(let a=0;a<e.length;a++){const u=[];for(let l=0;l<e[a].length;l++){const s=Lae(e[a][l],n);m_(t,s),u.push(s)}i.push(u)}return i}function $6(e,t,n){const i=[];for(let a=0;a<e.length;a++){const u=tE(e[a],t,n);i.push(u)}return i}function H6(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const a=i*.5;let u=e[0]-n[0]>a?-i:n[0]-e[0]>a?i:0;u===0&&(u=e[0]-n[2]>a?-i:n[2]-e[0]>a?i:0),e[0]+=u}m_(t,e)}function $ae(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function x3(e,t,n,i){const a=Math.pow(2,i.z)*ch,u=[i.x*ch,i.y*ch],l=[];for(const s of e)for(const f of s){const y=[f.x+u[0],f.y+u[1]];H6(y,t,n,a),l.push(y)}return l}function A3(e,t,n,i){const a=Math.pow(2,i.z)*ch,u=[i.x*ch,i.y*ch],l=[];for(const s of e){const f=[];for(const y of s){const x=[y.x+u[0],y.y+u[1]];m_(t,x),f.push(x)}l.push(f)}if(t[2]-t[0]<=a/2){$ae(t);for(const s of l)for(const f of s)H6(f,t,n,a)}return l}function Hae(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const u=tE(t.coordinates,i,a),l=x3(e.geometry(),n,i,a);if(!F1(n,i))return!1;for(const s of l)if(!cv(s,u))return!1}if(t.type==="MultiPolygon"){const u=$6(t.coordinates,i,a),l=x3(e.geometry(),n,i,a);if(!F1(n,i))return!1;for(const s of l)if(!Vae(s,u))return!1}return!0}function Gae(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const u=tE(t.coordinates,i,a),l=A3(e.geometry(),n,i,a);if(!F1(n,i))return!1;for(const s of l)if(!U6(s,u))return!1}if(t.type==="MultiPolygon"){const u=$6(t.coordinates,i,a),l=A3(e.geometry(),n,i,a);if(!F1(n,i))return!1;for(const s of l)if(!jae(s,u))return!1}return!0}class Pm{constructor(t,n){this.type=br,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(O1(t[1])){const i=t[1];if(i.type==="FeatureCollection"){const a=[];for(const u of i.features){const{type:l,coordinates:s}=u.geometry;l==="Polygon"&&a.push(s),l==="MultiPolygon"&&a.push(...s)}if(a.length){const u={type:"MultiPolygon",coordinates:a};return new Pm(i,u)}}else if(i.type==="Feature"){const a=i.geometry.type;if(a==="Polygon"||a==="MultiPolygon")return new Pm(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Pm(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return Hae(t,this.geometries);if(t.geometryType()==="LineString")return Gae(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class G6{constructor(t=[],n=(i,a)=>i<a?-1:i>a?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,a=n[t];for(;t>0;){const u=t-1>>1,l=n[u];if(i(a,l)>=0)break;n[t]=l,t=u}n[t]=a}_down(t){const{data:n,compare:i}=this,a=this.length>>1,u=n[t];for(;t<a;){let l=(t<<1)+1;const s=l+1;if(s<this.length&&i(n[s],n[l])<0&&(l=s),i(n[l],u)>=0)break;n[t]=n[l],t=l}n[t]=u}}function Zae(e,t){if(e.length<=1)return[e];const i=[];let a,u;for(const l of e){const s=Wae(l);s!==0&&(l.area=Math.abs(s),u===void 0&&(u=s<0),u===s<0?(a&&i.push(a),a=[l]):a.push(l))}return a&&i.push(a),i}function Wae(e){let t=0;for(let n=0,i=e.length,a=i-1,u,l;n<i;a=n++)u=e[n],l=e[a],t+=(l.x-u.x)*(u.y+l.y);return t}const qae=6378.137,w3=1/298.257223563,C3=w3*(2-w3),I3=Math.PI/180;class nE{constructor(t){const n=I3*qae*1e3,i=Math.cos(t*I3),a=1/(1-C3*(1-i*i)),u=Math.sqrt(a);this.kx=n*u*i,this.ky=n*u*a*(1-C3)}distance(t,n){const i=this.wrap(t[0]-n[0])*this.kx,a=(t[1]-n[1])*this.ky;return Math.sqrt(i*i+a*a)}pointOnLine(t,n){let i=1/0,a,u,l,s;for(let f=0;f<t.length-1;f++){let y=t[f][0],x=t[f][1],b=this.wrap(t[f+1][0]-y)*this.kx,M=(t[f+1][1]-x)*this.ky,A=0;(b!==0||M!==0)&&(A=(this.wrap(n[0]-y)*this.kx*b+(n[1]-x)*this.ky*M)/(b*b+M*M),A>1?(y=t[f+1][0],x=t[f+1][1]):A>0&&(y+=b/this.kx*A,x+=M/this.ky*A)),b=this.wrap(n[0]-y)*this.kx,M=(n[1]-x)*this.ky;const P=b*b+M*M;P<i&&(i=P,a=y,u=x,l=f,s=A)}return{point:[a,u],index:l,t:Math.max(0,Math.min(1,s))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const qI=100,KI=50;function Z6(e,t){return t[0]-e[0]}function oA(e){return e[1]-e[0]+1}function gd(e,t){return e[1]>=e[0]&&e[1]<t}function YI(e,t){if(e[0]>e[1])return[null,null];const n=oA(e);if(t){if(n===2)return[e,null];const a=Math.floor(n/2);return[[e[0],e[0]+a],[e[0]+a,e[1]]]}if(n===1)return[e,null];const i=Math.floor(n/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function XI(e,t){if(!gd(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)m_(n,e[i]);return n}function QI(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const i of n)m_(t,i);return t}function M3(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function rE(e,t,n){if(!M3(e)||!M3(t))return NaN;let i=0,a=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(a=e[1]-t[3]),e[3]<t[1]&&(a=t[1]-e[3]),n.distance([0,0],[i,a])}function wm(e,t,n){const i=n.pointOnLine(t,e);return n.distance(e,i.point)}function iE(e,t,n,i,a){const u=Math.min(wm(e,[n,i],a),wm(t,[n,i],a)),l=Math.min(wm(n,[e,t],a),wm(i,[e,t],a));return Math.min(u,l)}function Kae(e,t,n,i,a){if(!(gd(t,e.length)&&gd(i,n.length)))return 1/0;let l=1/0;for(let s=t[0];s<t[1];++s){const f=e[s],y=e[s+1];for(let x=i[0];x<i[1];++x){const b=n[x],M=n[x+1];if(Mw(f,y,b,M))return 0;l=Math.min(l,iE(f,y,b,M,a))}}return l}function Yae(e,t,n,i,a){if(!(gd(t,e.length)&&gd(i,n.length)))return NaN;let l=1/0;for(let s=t[0];s<=t[1];++s)for(let f=i[0];f<=i[1];++f)if(l=Math.min(l,a.distance(e[s],n[f])),l===0)return l;return l}function Xae(e,t,n){if(cv(e,t,!0))return 0;let i=1/0;for(const a of t){const u=a[0],l=a[a.length-1];if(u!==l&&(i=Math.min(i,wm(e,[l,u],n)),i===0))return i;const s=n.pointOnLine(a,e);if(i=Math.min(i,n.distance(e,s.point)),i===0)return i}return i}function Qae(e,t,n,i){if(!gd(t,e.length))return NaN;for(let u=t[0];u<=t[1];++u)if(cv(e[u],n,!0))return 0;let a=1/0;for(let u=t[0];u<t[1];++u){const l=e[u],s=e[u+1];for(const f of n)for(let y=0,x=f.length,b=x-1;y<x;b=y++){const M=f[b],A=f[y];if(Mw(l,s,M,A))return 0;a=Math.min(a,iE(l,s,M,A,i))}}return a}function S3(e,t){for(const n of e)for(const i of n)if(cv(i,t,!0))return!0;return!1}function Jae(e,t,n,i=1/0){const a=QI(e),u=QI(t);if(i!==1/0&&rE(a,u,n)>=i)return i;if(F1(a,u)){if(S3(e,t))return 0}else if(S3(t,e))return 0;let l=1/0;for(const s of e)for(let f=0,y=s.length,x=y-1;f<y;x=f++){const b=s[x],M=s[f];for(const A of t)for(let P=0,L=A.length,O=L-1;P<L;O=P++){const V=A[O],z=A[P];if(Mw(b,M,V,z))return 0;l=Math.min(l,iE(b,M,V,z,n))}}return l}function E3(e,t,n,i,a,u){if(!u)return;const l=rE(XI(i,u),a,n);l<t&&e.push([l,u,[0,0]])}function nx(e,t,n,i,a,u,l){if(!u||!l)return;const s=rE(XI(i,u),XI(a,l),n);s<t&&e.push([s,u,l])}function lA(e,t,n,i,a=1/0){let u=Math.min(i.distance(e[0],n[0][0]),a);if(u===0)return u;const l=new G6([[0,[0,e.length-1],[0,0]]],Z6),s=QI(n);for(;l.length>0;){const f=l.pop();if(f[0]>=u)continue;const y=f[1],x=t?KI:qI;if(oA(y)<=x){if(!gd(y,e.length))return NaN;if(t){const b=Qae(e,y,n,i);if(isNaN(b)||b===0)return b;u=Math.min(u,b)}else for(let b=y[0];b<=y[1];++b){const M=Xae(e[b],n,i);if(u=Math.min(u,M),u===0)return 0}}else{const b=YI(y,t);E3(l,u,i,e,s,b[0]),E3(l,u,i,e,s,b[1])}}return u}function uA(e,t,n,i,a,u=1/0){let l=Math.min(u,a.distance(e[0],n[0]));if(l===0)return l;const s=new G6([[0,[0,e.length-1],[0,n.length-1]]],Z6);for(;s.length>0;){const f=s.pop();if(f[0]>=l)continue;const y=f[1],x=f[2],b=t?KI:qI,M=i?KI:qI;if(oA(y)<=b&&oA(x)<=M){if(!gd(y,e.length)&&gd(x,n.length))return NaN;let A;if(t&&i)A=Kae(e,y,n,x,a),l=Math.min(l,A);else if(t&&!i){const P=e.slice(y[0],y[1]+1);for(let L=x[0];L<=x[1];++L)if(A=wm(n[L],P,a),l=Math.min(l,A),l===0)return l}else if(!t&&i){const P=n.slice(x[0],x[1]+1);for(let L=y[0];L<=y[1];++L)if(A=wm(e[L],P,a),l=Math.min(l,A),l===0)return l}else A=Yae(e,y,n,x,a),l=Math.min(l,A)}else{const A=YI(y,t),P=YI(x,i);nx(s,l,a,e,n,A[0],P[0]),nx(s,l,a,e,n,A[0],P[1]),nx(s,l,a,e,n,A[1],P[0]),nx(s,l,a,e,n,A[1],P[1])}}return l}function eoe(e,t){const n=e.geometry(),i=n.flat().map(l=>eE([l.x,l.y],e.canonical));if(n.length===0)return NaN;const a=new nE(i[0][1]);let u=1/0;for(const l of t){switch(l.type){case"Point":u=Math.min(u,uA(i,!1,[l.coordinates],!1,a,u));break;case"LineString":u=Math.min(u,uA(i,!1,l.coordinates,!0,a,u));break;case"Polygon":u=Math.min(u,lA(i,!1,l.coordinates,a,u));break}if(u===0)return u}return u}function toe(e,t){const n=e.geometry(),i=n.flat().map(l=>eE([l.x,l.y],e.canonical));if(n.length===0)return NaN;const a=new nE(i[0][1]);let u=1/0;for(const l of t){switch(l.type){case"Point":u=Math.min(u,uA(i,!0,[l.coordinates],!1,a,u));break;case"LineString":u=Math.min(u,uA(i,!0,l.coordinates,!0,a,u));break;case"Polygon":u=Math.min(u,lA(i,!0,l.coordinates,a,u));break}if(u===0)return u}return u}function noe(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const i=Zae(n).map(l=>l.map(s=>s.map(f=>eE([f.x,f.y],e.canonical)))),a=new nE(i[0][0][0][1]);let u=1/0;for(const l of t)for(const s of i){switch(l.type){case"Point":u=Math.min(u,lA([l.coordinates],!1,s,a,u));break;case"LineString":u=Math.min(u,lA(l.coordinates,!0,s,a,u));break;case"Polygon":u=Math.min(u,Jae(s,l.coordinates,a,u));break}if(u===0)return u}return u}function UC(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}class km{constructor(t,n){this.type=vn,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(O1(t[1])){const i=t[1];if(i.type==="FeatureCollection")return new km(i,i.features.map(a=>UC(a.geometry)).flat());if(i.type==="Feature")return new km(i,UC(i.geometry));if("type"in i&&"coordinates"in i)return new km(i,UC(i))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return eoe(t,this.geometries);if(t.geometryType()==="LineString")return toe(t,this.geometries);if(t.geometryType()==="Polygon")return noe(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Sw{constructor(t){this.type=gr,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=t[1];return i==null?n.error("Global state property must be defined."):typeof i!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Sw(i)}evaluate(t){var n;const i=(n=t.globals)===null||n===void 0?void 0:n.globalState;return!i||Object.keys(i).length===0?null:F6(i,this.key)}eachChild(){}outputDefined(){return!1}}const sE={"==":Mae,"!=":Sae,">":Tae,"<":Eae,">=":kae,"<=":Pae,array:lc,at:ZS,boolean:lc,case:KS,coalesce:z1,collator:Iw,format:XS,image:QS,in:WS,"index-of":sA,interpolate:bu,"interpolate-hcl":bu,"interpolate-lab":bu,length:JS,let:xw,literal:Ky,match:qS,number:lc,"number-format":YS,object:lc,slice:aA,step:Cw,string:lc,"to-boolean":Nf,"to-color":Nf,"to-number":Nf,"to-string":Nf,var:Aw,within:Pm,distance:km,"global-state":Sw};class cc{constructor(t,n,i,a){this.name=t,this.type=n,this._evaluate=i,this.args=a}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const i=t[0],a=cc.definitions[i];if(!a)return n.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,s=l.filter(([y])=>!Array.isArray(y)||y.length===t.length-1);let f=null;for(const[y,x]of s){f=new bw(n.registry,cA,n.path,null,n.scope);const b=[];let M=!1;for(let A=1;A<t.length;A++){const P=t[A],L=Array.isArray(y)?y[A-1]:y.type,O=f.parse(P,1+b.length,L);if(!O){M=!0;break}b.push(O)}if(!M){if(Array.isArray(y)&&y.length!==b.length){f.error(`Expected ${y.length} arguments, but found ${b.length} instead.`);continue}for(let A=0;A<b.length;A++){const P=Array.isArray(y)?y[A]:y.type,L=b[A];f.concat(A+1).checkSubtype(P,L.type)}if(f.errors.length===0)return new cc(i,u,x,b)}}if(s.length===1)n.errors.push(...f.errors);else{const x=(s.length?s:l).map(([M])=>ioe(M)).join(" | "),b=[];for(let M=1;M<t.length;M++){const A=n.parse(t[M],1+b.length);if(!A)return null;b.push(is(A.type))}n.error(`Expected arguments of type ${x}, but found (${b.join(", ")}) instead.`)}return null}static register(t,n){cc.definitions=n;for(const i in n)t[i]=cc}}function T3(e,[t,n,i,a]){t=t.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);const u=a?a.evaluate(e):1,l=B6(t,n,i,u);if(l)throw new fs(l);return new Jr(t/255,n/255,i/255,u,!1)}function P3(e,t){return e in t}function $C(e,t){const n=t[e];return typeof n>"u"?null:n}function roe(e,t,n,i){for(;n<=i;){const a=n+i>>1;if(t[a]===e)return!0;t[a]>e?i=a-1:n=a+1}return!1}function gm(e){return{type:e}}cc.register(sE,{error:[Kse,[Mr],(e,[t])=>{throw new fs(t.evaluate(e))}],typeof:[Mr,[gr],(e,[t])=>is(Gs(t.evaluate(e)))],"to-rgba":[zl(vn,4),[lh],(e,[t])=>{const[n,i,a,u]=t.evaluate(e).rgb;return[n*255,i*255,a*255,u]}],rgb:[lh,[vn,vn,vn],T3],rgba:[lh,[vn,vn,vn,vn],T3],has:{type:br,overloads:[[[Mr],(e,[t])=>P3(t.evaluate(e),e.properties())],[[Mr,Em],(e,[t,n])=>P3(t.evaluate(e),n.evaluate(e))]]},get:{type:gr,overloads:[[[Mr],(e,[t])=>$C(t.evaluate(e),e.properties())],[[Mr,Em],(e,[t,n])=>$C(t.evaluate(e),n.evaluate(e))]]},"feature-state":[gr,[Mr],(e,[t])=>$C(t.evaluate(e),e.featureState||{})],properties:[Em,[],e=>e.properties()],"geometry-type":[Mr,[],e=>e.geometryType()],id:[gr,[],e=>e.id()],zoom:[vn,[],e=>e.globals.zoom],"heatmap-density":[vn,[],e=>e.globals.heatmapDensity||0],"line-progress":[vn,[],e=>e.globals.lineProgress||0],accumulated:[gr,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[vn,gm(vn),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[vn,gm(vn),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:vn,overloads:[[[vn,vn],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[vn],(e,[t])=>-t.evaluate(e)]]},"/":[vn,[vn,vn],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[vn,[vn,vn],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[vn,[],()=>Math.LN2],pi:[vn,[],()=>Math.PI],e:[vn,[],()=>Math.E],"^":[vn,[vn,vn],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[vn,[vn],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[vn,[vn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[vn,[vn],(e,[t])=>Math.log(t.evaluate(e))],log2:[vn,[vn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[vn,[vn],(e,[t])=>Math.sin(t.evaluate(e))],cos:[vn,[vn],(e,[t])=>Math.cos(t.evaluate(e))],tan:[vn,[vn],(e,[t])=>Math.tan(t.evaluate(e))],asin:[vn,[vn],(e,[t])=>Math.asin(t.evaluate(e))],acos:[vn,[vn],(e,[t])=>Math.acos(t.evaluate(e))],atan:[vn,[vn],(e,[t])=>Math.atan(t.evaluate(e))],min:[vn,gm(vn),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[vn,gm(vn),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[vn,[vn],(e,[t])=>Math.abs(t.evaluate(e))],round:[vn,[vn],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[vn,[vn],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[vn,[vn],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[br,[Mr,gr],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[br,[gr],(e,[t])=>e.id()===t.value],"filter-type-==":[br,[Mr],(e,[t])=>e.geometryType()===t.value],"filter-<":[br,[Mr,gr],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[br,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<i}],"filter->":[br,[Mr,gr],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[br,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>i}],"filter-<=":[br,[Mr,gr],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[br,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<=i}],"filter->=":[br,[Mr,gr],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[br,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>=i}],"filter-has":[br,[gr],(e,[t])=>t.value in e.properties()],"filter-has-id":[br,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[br,[zl(Mr)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[br,[zl(gr)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[br,[Mr,zl(gr)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[br,[Mr,zl(gr)],(e,[t,n])=>roe(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:br,overloads:[[[br,br],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[gm(br),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:br,overloads:[[[br,br],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[gm(br),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[br,[br],(e,[t])=>!t.evaluate(e)],"is-supported-script":[br,[Mr],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[Mr,[Mr],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Mr,[Mr],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Mr,gm(gr),(e,t)=>t.map(n=>l1(n.evaluate(e))).join("")],"resolved-locale":[Mr,[mw],(e,[t])=>t.evaluate(e).resolvedLocale()]});function ioe(e){return Array.isArray(e)?`(${e.map(is).join(", ")})`:`(${is(e.type)}...)`}function cA(e){if(e instanceof Aw)return cA(e.boundExpression);if(e instanceof cc&&e.name==="error")return!1;if(e instanceof Iw)return!1;if(e instanceof Pm)return!1;if(e instanceof km)return!1;if(e instanceof Sw)return!1;const t=e instanceof Nf||e instanceof lc;let n=!0;return e.eachChild(i=>{t?n=n&&cA(i):n=n&&i instanceof Ky}),n?aE(e)&&lE(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function aE(e){if(e instanceof cc){if(e.name==="get"&&e.args.length===1)return!1;if(e.name==="feature-state")return!1;if(e.name==="has"&&e.args.length===1)return!1;if(e.name==="properties"||e.name==="geometry-type"||e.name==="id")return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Pm||e instanceof km)return!1;let t=!0;return e.eachChild(n=>{t&&!aE(n)&&(t=!1)}),t}function oE(e){if(e instanceof cc&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!oE(n)&&(t=!1)}),t}function lE(e,t){if(e instanceof cc&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(i=>{n&&!lE(i,t)&&(n=!1)}),n}function JI(e){return{result:"success",value:e}}function hy(e){return{result:"error",value:e}}function soe(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function aoe(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function W6(e){return!!e.expression&&e.expression.interpolated}function uE(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function cE(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&Gs(e)===Em}function ooe(e){return e}function loe(e){switch(e.type){case"color":return Jr.parse;case"padding":return zo.parse;case"numberArray":return Fo.parse;case"colorArray":return $a.parse;default:return null}}function uoe(e){switch(e){case"exponential":return q6;case"interval":return hoe;case"categorical":return coe;case"identity":return doe;default:throw new Error(`Unknown function type "${e}"`)}}function hE(e,t){const n=e.stops&&typeof e.stops[0][0]=="object",i=n||e.property!==void 0,a=n||!i,u=e.type||(W6(t)?"exponential":"interval"),l=loe(t);if(l&&(e=E6({},e),e.stops&&(e.stops=e.stops.map(x=>[x[0],l(x[1])])),e.default?e.default=l(e.default):e.default=l(t.default)),e.colorSpace&&!aae(e.colorSpace))throw new Error(`Unknown color space: "${e.colorSpace}"`);const s=uoe(u);let f,y;if(u==="categorical"){f=Object.create(null);for(const x of e.stops)f[x[0]]=x[1];y=typeof e.stops[0][0]}if(n){const x={},b=[];for(let P=0;P<e.stops.length;P++){const L=e.stops[P],O=L[0].zoom;x[O]===void 0&&(x[O]={zoom:O,type:e.type,property:e.property,default:e.default,stops:[]},b.push(O)),x[O].stops.push([L[0].value,L[1]])}const M=[];for(const P of b)M.push([x[P].zoom,hE(x[P],t)]);const A={name:"linear"};return{kind:"composite",interpolationType:A,interpolationFactor:bu.interpolationFactor.bind(void 0,A),zoomStops:M.map(P=>P[0]),evaluate({zoom:P},L){return q6({stops:M,base:e.base},t,P).evaluate(P,L)}}}else if(a){const x=u==="exponential"?{name:"exponential",base:e.base!==void 0?e.base:1}:null;return{kind:"camera",interpolationType:x,interpolationFactor:bu.interpolationFactor.bind(void 0,x),zoomStops:e.stops.map(b=>b[0]),evaluate:({zoom:b})=>s(e,t,b,f,y)}}else return{kind:"source",evaluate(x,b){const M=b&&b.properties?b.properties[e.property]:void 0;return M===void 0?g_(e.default,t.default):s(e,t,M,f,y)}}}function g_(e,t,n){if(e!==void 0)return e;if(t!==void 0)return t;if(n!==void 0)return n}function coe(e,t,n,i,a){const u=typeof n===a?i[n]:void 0;return g_(u,e.default,t.default)}function hoe(e,t,n){if(uE(n)!=="number")return g_(e.default,t.default);const i=e.stops.length;if(i===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const a=ww(e.stops.map(u=>u[0]),n);return e.stops[a][1]}function q6(e,t,n){const i=e.base!==void 0?e.base:1;if(uE(n)!=="number")return g_(e.default,t.default);const a=e.stops.length;if(a===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[a-1][0])return e.stops[a-1][1];const u=ww(e.stops.map(x=>x[0]),n),l=foe(n,i,e.stops[u][0],e.stops[u+1][0]),s=e.stops[u][1],f=e.stops[u+1][1],y=pae[t.type]||ooe;return typeof s.evaluate=="function"?{evaluate(...x){const b=s.evaluate.apply(void 0,x),M=f.evaluate.apply(void 0,x);if(!(b===void 0||M===void 0))return y(b,M,l,e.colorSpace)}}:y(s,f,l,e.colorSpace)}function doe(e,t,n){switch(t.type){case"color":n=Jr.parse(n);break;case"formatted":n=uh.fromString(n.toString());break;case"resolvedImage":n=xd.fromString(n.toString());break;case"padding":n=zo.parse(n);break;case"colorArray":n=$a.parse(n);break;case"numberArray":n=Fo.parse(n);break;default:uE(n)!==t.type&&(t.type!=="enum"||!t.values[n])&&(n=void 0)}return g_(n,e.default,t.default)}function foe(e,t,n,i){const a=i-n,u=e-n;return a===0?0:t===1?u/a:(Math.pow(t,u)-1)/(Math.pow(t,a)-1)}class K6{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new N6,this._defaultValue=n?yoe(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,i,a,u,l){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(t,n,i,a,u,l){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=l||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new fs(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function Y6(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in sE}function X6(e,t){const n=new bw(sE,cA,[],t?goe(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?JI(new K6(i,t)):hy(n.errors)}class eM{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!oE(n.expression)}evaluateWithoutErrorHandling(t,n,i,a,u,l){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,a,u,l)}evaluate(t,n,i,a,u,l){return this._styleExpression.evaluate(t,n,i,a,u,l)}}class tM{constructor(t,n,i,a){this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!oE(n.expression),this.interpolationType=a}evaluateWithoutErrorHandling(t,n,i,a,u,l){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,a,u,l)}evaluate(t,n,i,a,u,l){return this._styleExpression.evaluate(t,n,i,a,u,l)}interpolationFactor(t,n,i){return this.interpolationType?bu.interpolationFactor(this.interpolationType,t,n,i):0}}function poe(e){return e._styleExpression!==void 0}function Q6(e,t){const n=X6(e,t);if(n.result==="error")return n;const i=n.value.expression,a=aE(i);if(!a&&!soe(t))return hy([new ih("","data expressions not supported")]);const u=lE(i,["zoom"]);if(!u&&!aoe(t))return hy([new ih("","zoom expressions not supported")]);const l=Cx(i);if(!l&&!u)return hy([new ih("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof ih)return hy([l]);if(l instanceof bu&&!W6(t))return hy([new ih("",'"interpolate" expressions cannot be used with this property')]);if(!l)return JI(a?new eM("constant",n.value):new eM("source",n.value));const s=l instanceof bu?l.interpolation:void 0;return JI(a?new tM("camera",n.value,l.labels,s):new tM("composite",n.value,l.labels,s))}class Ew{constructor(t,n){this._parameters=t,this._specification=n,E6(this,hE(this._parameters,this._specification))}static deserialize(t){return new Ew(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function moe(e,t){if(cE(e))return new Ew(e,t);if(Y6(e)){const n=Q6(e,t);if(n.result==="error")throw new Error(n.value.map(i=>`${i.key}: ${i.message}`).join(", "));return n.value}else{let n=e;return t.type==="color"&&typeof e=="string"?n=Jr.parse(e):t.type==="padding"&&(typeof e=="number"||Array.isArray(e))?n=zo.parse(e):t.type==="numberArray"&&(typeof e=="number"||Array.isArray(e))?n=Fo.parse(e):t.type==="colorArray"&&(typeof e=="string"||Array.isArray(e))?n=$a.parse(e):t.type==="variableAnchorOffsetCollection"&&Array.isArray(e)?n=_u.parse(e):t.type==="projectionDefinition"&&typeof e=="string"&&(n=mu.parse(e)),{kind:"constant",evaluate:()=>n}}}function Cx(e){let t=null;if(e instanceof xw)t=Cx(e.result);else if(e instanceof z1){for(const n of e.args)if(t=Cx(n),t)break}else(e instanceof Cw||e instanceof bu)&&e.input instanceof cc&&e.input.name==="zoom"&&(t=e);return t instanceof ih||e.eachChild(n=>{const i=Cx(n);i instanceof ih?t=i:!t&&i?t=new ih("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new ih("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function goe(e){const t={color:lh,string:Mr,number:vn,enum:Mr,boolean:br,formatted:gw,padding:yw,numberArray:vw,colorArray:D1,projectionDefinition:pw,resolvedImage:p_,variableAnchorOffsetCollection:_w};return e.type==="array"?zl(t[e.value]||gr,e.length):t[e.type]}function yoe(e){if(e.type==="color"&&cE(e.default))return new Jr(0,0,0,0);switch(e.type){case"color":return Jr.parse(e.default)||null;case"padding":return zo.parse(e.default)||null;case"numberArray":return Fo.parse(e.default)||null;case"colorArray":return $a.parse(e.default)||null;case"variableAnchorOffsetCollection":return _u.parse(e.default)||null;case"projectionDefinition":return mu.parse(e.default)||null;default:return e.default===void 0?null:e.default}}function J6(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!J6(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function B1(e){return typeof e=="object"?["literal",e]:e}function voe(e,t){let n=e.stops;if(!n)return _oe(e,t);const i=n&&typeof n[0][0]=="object",a=i||e.property!==void 0,u=i||!a;return n=n.map(l=>!a&&t.tokens&&typeof l[1]=="string"?[l[0],woe(l[1])]:[l[0],B1(l[1])]),i?boe(e,t,n):u?Aoe(e,t,n):nM(e,t,n)}function _oe(e,t){const n=["get",e.property];if(e.default===void 0)return t.type==="string"?["string",n]:n;if(t.type==="enum")return["match",n,Object.keys(t.values),n,e.default];{const i=[t.type==="color"?"to-color":t.type,n,B1(e.default)];return t.type==="array"&&i.splice(1,0,t.value,t.length||null),i}}function dE(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function boe(e,t,n){const i={},a={},u=[];for(let s=0;s<n.length;s++){const f=n[s],y=f[0].zoom;i[y]===void 0&&(i[y]={zoom:y,type:e.type,property:e.property,default:e.default},a[y]=[],u.push(y)),a[y].push([f[0].value,f[1]])}if(pE({},t)==="exponential"){const s=[dE(e),["linear"],["zoom"]];for(const f of u){const y=nM(i[f],t,a[f]);Dy(s,f,y,!1)}return s}else{const s=["step",["zoom"]];for(const f of u){const y=nM(i[f],t,a[f]);Dy(s,f,y,!0)}return fE(s),s}}function xoe(e,t){if(e!==void 0)return e;if(t!==void 0)return t}function k3(e,t){const n=B1(xoe(e.default,t.default));return n===void 0&&t.type==="resolvedImage"?"":n}function nM(e,t,n){const i=pE(e,t),a=["get",e.property];if(i==="categorical"&&typeof n[0][0]=="boolean"){const u=["case"];for(const l of n)u.push(["==",a,l[0]],l[1]);return u.push(k3(e,t)),u}else if(i==="categorical"){const u=["match",a];for(const l of n)Dy(u,l[0],l[1],!1);return u.push(k3(e,t)),u}else if(i==="interval"){const u=["step",["number",a]];for(const l of n)Dy(u,l[0],l[1],!0);return fE(u),e.default===void 0?u:["case",["==",["typeof",a],"number"],u,B1(e.default)]}else if(i==="exponential"){const u=e.base!==void 0?e.base:1,l=[dE(e),u===1?["linear"]:["exponential",u],["number",a]];for(const s of n)Dy(l,s[0],s[1],!1);return e.default===void 0?l:["case",["==",["typeof",a],"number"],l,B1(e.default)]}else throw new Error(`Unknown property function type ${i}`)}function Aoe(e,t,n,i=["zoom"]){const a=pE(e,t);let u,l=!1;if(a==="interval")u=["step",i],l=!0;else if(a==="exponential"){const s=e.base!==void 0?e.base:1;u=[dE(e),s===1?["linear"]:["exponential",s],i]}else throw new Error(`Unknown zoom function type "${a}"`);for(const s of n)Dy(u,s[0],s[1],l);return fE(u),u}function fE(e){e[0]==="step"&&e.length===3&&(e.push(0),e.push(e[3]))}function Dy(e,t,n,i){e.length>3&&t===e[e.length-2]||(i&&e.length===2||e.push(t),e.push(n))}function pE(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function woe(e){const t=["concat"],n=/{([^{}]+)}/g;let i=0;for(let a=n.exec(e);a!==null;a=n.exec(e)){const u=e.slice(i,n.lastIndex-a[0].length);i=n.lastIndex,u.length>0&&t.push(u),t.push(["get",a[1]])}if(t.length===1)return e;if(i<e.length)t.push(e.slice(i));else if(t.length===2)return["to-string",t[1]];return t}const Coe={StyleExpression:K6,StylePropertyFunction:Ew,ZoomConstantExpression:eM,ZoomDependentExpression:tM,createExpression:X6,createPropertyExpression:Q6,isExpression:Y6,isExpressionFilter:J6,isZoomExpression:poe,normalizePropertyExpression:moe},Ioe={convertFunction:voe,createFunction:hE,isFunction:cE},Moe=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function Soe({zoom:e}){function t(n){const i=Moe.find(a=>{const u=a[0];return n.startsWith(u)});return i?i[1]||i[0]:null}return function(n,i,a){var y;const u=t(a);if(!u)return null;const l=(y=qse[`${i}_${u}`])==null?void 0:y[a];if(!l)return null;const s=l.default;if(!n[i])return s;const f=n[i][a];if(typeof f>"u")return s;if(typeof f=="object"){let x;if(Array.isArray(f)){if(l.type==="array")return f;x=Coe.createExpression(f).value}else x=Ioe.createFunction(f,l);if(!x.evaluate)return null;const b=x.evaluate({zoom:e},{});return(b==null?void 0:b.name)||b||null}else return f}}const HC={},Eoe=({map:e,zoom:t,layer:n})=>{const a={circle:nse,symbol:ose,line:ise,fill:rse}[n.type],u=Soe({zoom:t}),l=s=>{if(!s)return"";if(HC[s])return HC[s];const f=e.getImage(s);if(!f)return"";const y=f.data,x=Toe(y),b=document.createElement("canvas"),M=b.getContext("2d");b.width=y.width,b.height=y.height,M.putImageData(x,0,0);const A=b.toDataURL("image/png");return HC[s]=A,A};return a?a({layer:n,expr:u,image:l}):null};function Toe(e){const{width:t,height:n,data:i}=e,a=new Uint8ClampedArray(i);return new ImageData(a,t,n)}function Poe(){function e(t,n){const i=t==null?void 0:t.getZoom(),a=Eoe({map:t,zoom:i,layer:n}),u=a?a.element==="div"?[rM(a)]:a.element==="svg"?(a.attributes.style="height: 17px;",a.attributes.version="1.1",[rM(a)]):ja("div"):[ja("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"black",class:"post-icon"},[ja("path",{d:"M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),ja("path",{d:"M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],l=ja("div",{class:"legend-item",style:(a==null?void 0:a.element)==="div"?{backgroundColor:a.attributes.style.backgroundColor,backgroundPosition:a.attributes.style.backgroundPosition,backgroundSize:a.attributes.style.backgroundSize,backgroundRepeat:a.attributes.style.backgroundRepeat,opacity:a.attributes.style.opacity}:{}},u);return ja("div",{class:"legend-item-container"},[l])}return{getLayerLegendVNode:e}}function rM(e){var n;const t=((n=e.children)==null?void 0:n.map(rM))||[];return ja(e.element,{...e.attributes},t)}function koe(e){var n;const t=(n=e==null?void 0:e.metadata)==null?void 0:n["maplibregl-legend:disable"];return t===!0||t==="true"||t==="1"}function Loe(e){var n;return((n=e==null?void 0:e.metadata)==null?void 0:n["maplibregl-legend:name"])||e.id}function Doe(e){return["circle","fill","line","symbol"].includes(e.type)&&!koe(e)}const Roe={class:"legend-control-container"},Ooe={class:"legend-control"},zoe={class:"legend-control-item__icon"},Foe={class:"legend-action"},Boe=An({__name:"LegendControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri}),setup(e){const t=e,[n,i]=Bl(!1),{callMap:a,mapId:u,moduleContainerProps:l}=Lr(t),{trans:s,setLocaleDefault:f}=Oi(u.value),{getLayerLegendVNode:y}=Poe();f({map:{"legend-control":{title:"Legend",onlyRendered:"Only rendered"}}});function x(){i(!n.value)}const b=Kt(!1),M=Ca([]);function A(O){let V=O==null?void 0:O.getStyle().layers,z=null;if(b.value){z=new Set;const B=O.queryRenderedFeatures();for(const U of B)z.add(U.layer.id)}M.value=V.slice().reverse().filter(B=>(!z||z&&z.has(B.id))&&Doe(B)).map(B=>({icon:y(O,B),name:Loe(B)}))}hP(u.value,"styledata",A);const{add:P,remove:L}=hP(u.value,"moveend",A,!1);return xi(b,O=>{O?(P(),a(V=>{A(V)})):L()}),(O,V)=>(xe(),Rt(re($i),Ui(Di(re(l))),{btn:nt(()=>[je(re(ri),{onClick:V[0]||(V[0]=yr(z=>x(),["stop"])),tooltip:re(s)("map.legend-control.title")},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:re(w9)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:nt(z=>[re(n)?(xe(),Rt(re(vc),Qn({key:0,height:400,width:400},z,{show:re(n),"onUpdate:show":V[2]||(V[2]=B=>yi(n)?n.value=B:null),title:re(s)("map.legend-control.title")}),{default:nt(()=>[Pe("div",Roe,[Pe("div",Ooe,[(xe(!0),et(Fn,null,Or(M.value,(B,U)=>(xe(),et("div",{key:U,class:"legend-control-item"},[Pe("div",zoe,[(xe(),Rt(ps(B.icon)))]),Pe("span",null,an(B.name),1)]))),128))]),Pe("div",Foe,[je(re(P4),{label:re(s)("map.legend-control.onlyRendered"),modelValue:b.value,"onUpdate:modelValue":V[1]||(V[1]=B=>b.value=B)},null,8,["label","modelValue"])])])]),_:2},1040,["show","title"])):rn("",!0)]),default:nt(()=>[Sn(O.$slots,"default",{},void 0,!0)]),_:3},16))}}),Noe=_n(Boe,[["__scopeId","data-v-187ab091"]]),ym=Vo.createLogger().setNamespace("map:measurement",2),Voe={class:"field-container"},joe={class:"label-container"},Uoe={class:"label-field"},$oe=["disabled","title"],Hoe=["disabled"],Goe={class:"geometry-list-container"},Zoe={class:""},Woe=["onUpdate:modelValue","onChange"],qoe={class:""},Koe=["onUpdate:modelValue","onChange"],Yoe={class:""},Xoe=["onClick"],Qoe={__name:"field-geometry",props:Ki({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:Ki(["click:remove","click:fillbound"],["update:modelValue"]),setup(e,{emit:t}){const n=e,i=Zs(e,"modelValue"),a={add:ip,fillBound:rv,delete:VM,download:d9},u=t,l=P=>{i.value=P},s=()=>{i.value||(i.value=[]),i.value.push([null,null])},f=()=>{l(i)},y=P=>{i.value.splice(P,1),u("click:remove",P),l(i)},x=P=>{if(!(!P||!P.length))return P.length==1?Aa(P[0]):P.length==2?Ua(P):av([[...P,P[0]]])},b=()=>{let P={type:"FeatureCollection",features:[x(i.value)]};const L=new window.Blob([JSON.stringify(P)],{type:"text/plain;charset=utf-8"});xN.saveAs(L,"geojson.json")},M=()=>{u("click:fillbound",x(i.value))},A=Wt(()=>!n.maxLength||i.value.length<n.maxLength);return(P,L)=>(xe(),et("div",Voe,[Pe("div",joe,[Pe("div",Uoe,an(e.title),1),Pe("div",null,[Pe("button",{onClick:M,disabled:!e.modelValue||e.modelValue.length<1,class:"setting-button",title:e.titleActionFillBound},[je(re(Pn),{size:16,type:"mdi",path:a.fillBound,title:e.titleActionDownload},null,8,["path","title"])],8,$oe),Pe("button",{onClick:b,class:"setting-button",disabled:!e.modelValue||e.modelValue.length<1},[je(re(Pn),{size:16,type:"mdi",path:a.download,title:e.titleActionAddPoint},null,8,["path","title"])],8,Hoe),A.value?(xe(),et("button",{key:0,onClick:s,class:"setting-button"},[je(re(Pn),{size:16,type:"mdi",path:a.add},null,8,["path"])])):rn("",!0)])]),Pe("div",Goe,[(xe(!0),et(Fn,null,Or(e.modelValue,(O,V)=>(xe(),et("div",{class:"geometry-list-item",key:V},[Pe("div",null,"#"+an(V+1),1),Pe("div",Zoe,[pl(Pe("input",{class:"setting-input","onUpdate:modelValue":z=>i.value[V][0]=z,type:"number",step:"any",onChange:z=>f()},null,40,Woe),[[dh,i.value[V][0]]])]),Pe("div",qoe,[pl(Pe("input",{class:"setting-input","onUpdate:modelValue":z=>i.value[V][1]=z,type:"number",step:"any",onChange:z=>f()},null,40,Koe),[[dh,i.value[V][1]]])]),Pe("div",Yoe,[Pe("button",{onClick:z=>y(V),class:"setting-button"},[je(re(Pn),{size:16,type:"mdi",path:a.delete},null,8,["path"])],8,Xoe)])]))),128))])]))}},Joe=_n(Qoe,[["__scopeId","data-v-e28afdf9"]]),ele={class:"label-container"},tle={class:"label-field"},nle={class:"label-field-value"},rle={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(e){return(t,n)=>(xe(),et("div",null,[(xe(!0),et(Fn,null,Or(e.fields,(i,a)=>(xe(),et("div",{class:"field-container label-value",key:a},[Pe("div",ele,[Pe("div",tle,an(i.text),1),Pe("div",nle,an(i.value),1)])]))),128))]))}},ile=_n(rle,[["__scopeId","data-v-6556841c"]]),sle={class:"setting-container"},ale=An({__name:"MeasurementSettingPopup",props:Ki(wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},modelValue:{},maxLength:{},fields:{},popUpPosition:{}},{...Ri,maxLength:0,fields:()=>[{text:"Status",value:"waiting..."}],popUpPosition:()=>({top:50,right:40,width:350,height:300})}),{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:Ki(["update:modelValue"],["update:modelValue","update:show"]),setup(e,{emit:t}){const n=t,i=e,{callMap:a,moduleContainerProps:u,mapId:l}=Lr(i),{trans:s}=Oi(l.value),f=Zs(e,"modelValue"),y=Zs(e,"show"),x=M=>{a(A=>{WA(A,M)})};function b(M){n("update:modelValue",M.value)}return(M,A)=>(xe(),Rt(re($i),Ui(Di(re(u))),{draggable:nt(P=>[y.value?(xe(),Rt(re(vc),Qn({key:0},Object.assign(P,M.popUpPosition),{show:y.value,"onUpdate:show":A[0]||(A[0]=L=>y.value=L),title:re(s)("map.measurement.setting.title")}),{default:nt(()=>[Pe("div",sle,[je(ile,{fields:M.fields},null,8,["fields"]),je(Joe,{"onUpdate:modelValue":b,modelValue:f.value,maxLength:M.maxLength,"onClick:fillbound":x,title:re(s)("map.measurement.setting.field.data"),titleActionDownload:re(s)("map.measurement.action.download"),titleActionFillBound:re(s)("map.measurement.action.fly-to"),titleActionAddPoint:re(s)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):rn("",!0)]),default:nt(()=>[Sn(M.$slots,"default",{},void 0,!0)]),_:3},16))}}),ole=_n(ale,[["__scopeId","data-v-a3e59285"]]);class Tw{constructor(){this.value=[]}get coordinates(){return this.value.filter(t=>t[0]!=null&&t[1]!=null)}start(){}add(t){const n=lle(this.value);n>=0?this.value[n]=t:this.value.push(t)}init(t){this.value=t}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function lle(e=[]){return e.findIndex(t=>!t[0]||!t[1])}function hA(e,t="vi"){return new Intl.NumberFormat(t).format(e)}class ule extends Tw{get name(){return"Measure Area"}get type(){return"area"}getResult(){const a={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return a;if(this.coordinates.length==1)return a.features=[Aa(this.coordinates[0])],a;if(this.coordinates.length==2)return a.features=[Ua(this.coordinates)],a;const u=av([[...this.coordinates,this.coordinates[0]]]);return a.features=[u],a.value=Nj(u),a.format=GC(a.value),a.features_label=[Ej(u,{properties:{is_label:!0,is_center:!0,text:GC(a.value)}})],a.fields=[{trans:"map.measurement.setting.area",value:GC(a.value)}],a}}function GC(e=0){return e<1e6?`${hA(e.toFixed(2))} m`:`${hA((e/1e6).toFixed(2))} km`}class cle extends Tw{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(t){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(t)}getResult(){const a={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return a;if(this.coordinates.length==1)return a.features=[Aa(this.coordinates[0])],a;const u=this.coordinates[this.coordinates.length-1],l=this.coordinates[this.coordinates.length-2],s=Ua(this.coordinates);a.features=[s];const f=V4(l,u);return a.value=R4(f).toFixed(3),a.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:u},properties:{is_label:!0,text:`${a.value} `,rotation:f}}],a.fields=[{trans:"map.measurement.setting.azimuth",value:`${a.value} `}],a}}class hle extends Tw{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const a={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return a;if(this.coordinates.length==1)return a.features=[Aa(this.coordinates[0])],a;const u=Ua(this.coordinates);return a.features=[u],a.value=JT(u),a.format=ZC(a.value),a.features_label=this.coordinates.map((l,s,f)=>({type:"Feature",properties:{is_label:!0,text:ZC(s<1?0:JT(Ua(f.slice(0,s+1))))},geometry:{type:"Point",coordinates:l}})),a.fields=[{trans:"map.measurement.setting.distance",value:ZC(a.value)}],a}}function ZC(e=0){return e<1?`${hA((e*1e3).toFixed(2))} m`:`${hA(e.toFixed(2))} km`}class dle extends Tw{constructor(t=[]){super(),this.crs_items=t}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(t){this.value.length>0&&(this.value=[]),this.value.push(t)}getResult(){const a={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return a;a.features=[Aa(this.coordinates[0])];const u=this.coordinates[0][0],l=this.coordinates[0][1],s=PI({longitude:u,latitude:l},void 0,!1);if(s&&(a.value=`${s.longitude}, ${s.latitude}`),this.crs_items){const f=this.crs_items.find(y=>y.default);a.fields=[{trans:f==null?void 0:f.name,value:a.value}],this.crs_items.filter(y=>!y.default).forEach(y=>{var x;if(!y.default&&y.proj4js){const b=PI({longitude:u,latitude:l},y,!1);b&&((x=a.fields)==null||x.push({trans:y.name,value:`${b.longitude}, ${b.latitude}`}))}})}else a.fields=[{trans:"map.measurement.setting.point",value:a.value}];return a.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:a.value}}],a}}class mE{start(t){}view(t){}reset(){}destroy(){}}class fle extends mE{constructor(t){super(),this.layers=[],this.map=t}init(t,n){return n.id||(n.id=`measurment-control-${wu()}`),this.map.addSource(n.id,n.data),t.forEach(i=>{i.id||(i.id=`measurment-control-${wu()}`),i.metadata||(i.metadata={}),i.metadata["maplibregl-legend:disable"]=!0,i.source||(i.source=n.id),this.map.addLayer(i)}),this.source=n,this.layers=t,this}start(){this.onStart&&this.onStart(),this.layers.forEach(t=>{const n=t.id;this.map.getLayer(n)&&this.map.moveLayer(n)})}reset(){const t=this.map.getSource(this.source.id);t&&t.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(t=>{const n=t.id;this.map.getLayer(n)&&this.map.removeLayer(n),this.map.getSource(n)&&this.map.removeSource(n)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:t=[],features_label:n=[]}={}){const i=this.map.getSource(this.source.id);i&&i.setData({type:"FeatureCollection",features:[...t,...n]})}}class ple extends mE{constructor(t){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=t,this.markers=[]}setColor(t){return this.color=t,this}view({coordinates:t=[]}={}){const n=!!this.onDragMarker;if(t.length<this.markers.length)for(;t.length<this.markers.length;){const i=this.markers.pop();i&&i.remove()}t.forEach((i,a)=>{if(!i[0]||!i[1])return;let u=this.markers[a];u||(this.bindEvent[a]={},u=mle({color:this.color,draggable:n}),this.markers[a]=u),u.setLngLat({lng:i[0],lat:i[1]}).addTo(this.map),n&&(this.bindEvent[a].dragend&&u.off("dragend",this.bindEvent[a].dragend),this.bindEvent[a].dragend=()=>{const s=u.getLngLat(),f=[s.lng,s.lat],y=t.slice();y[a]=f,this.onDragMarker&&this.onDragMarker(y,f,a,u)},u.on("dragend",this.bindEvent[a].dragend));const l=u.getElement();this.onRightClickMarker&&(this.bindEvent[a].contextmenu&&l.removeEventListener("contextmenu",this.bindEvent[a].contextmenu),this.bindEvent[a].contextmenu=s=>{s.preventDefault();const f=u.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([f.lng,f.lat],a,u)},l.addEventListener("contextmenu",this.bindEvent[a].contextmenu))})}reset(){this.markers.forEach(t=>{t.remove()}),this.markers=[]}destroy(){this.reset()}}function mle({color:e,draggable:t=!1}={}){const n=document.createElement("div");return n.style.width="12px",n.style.height="12px",n.style.borderRadius="50%",n.style.background="#fff",n.style.boxSizing="border-box",n.style.border=`2px solid ${e}`,n.style.cursor="pointer",new zm.Marker({element:n,draggable:t})}const gle=function(){let e=null;const t=[],n=b=>{for(let M=0;M<t.length;M++)b(t[M])},i=b=>{e=b},a=b=>{t.push(b)},u=()=>{e&&e.start(),n(b=>{b.start&&b.start(f())})},l=()=>{e&&e.reset(),n(b=>{b.reset&&b.reset()})},s=()=>{e&&e.destroy(),n(b=>{b.destroy()})},f=()=>({coordinates:e.value,setting:e.setting,...e.getResult()});return{get type(){return e?e.type:null},get action(){return e},setAction:i,addView:a,start:u,reset:l,destroy:s,add:b=>{e&&e.add(b),n(M=>{M.view&&M.view(f())})},init:(b=[])=>{e&&e.init(b),n(M=>{M.view(f())})},getResult:f}};class yle extends mE{start({setting:t}={}){this.onChangeSetting&&this.onChangeSetting(t)}view({coordinates:t=[],setting:n={},fields:i=[]}={}){this.onChangeValue&&this.onChangeValue(t),this.onChangeSetting&&(n.fields=i,this.onChangeSetting(n))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const vle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",_le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",ble={name:"measurement-control"},xle=An({...ble,props:wi({actions:{},mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{}},{...Ri,actions:()=>[]}),setup(e){let t=gle();const n="#004E98",i={fillBound:rv,distance:L9,area:D9,azimuth:O9,point:GM,clear:VM,close:Vy,setting:w4},a=[{index:1,title:"map.measurement.tools.distance",handle:()=>le(),icon:i.distance,type:"distance",isActive:()=>x.value==="distance"},{index:2,title:"map.measurement.tools.area",handle:()=>Q(),icon:i.area,type:"area",isActive:()=>x.value==="area"},{index:3,title:"map.measurement.tools.azimuth",handle:()=>ce(),icon:i.azimuth,type:"azimuth",isActive:()=>x.value==="azimuth"},{index:4,title:"map.measurement.tools.point",handle:()=>K(),icon:i.point,type:"point",isActive:()=>x.value==="point"}],u=[{index:1,title:"map.measurement.action.setting",handle:()=>Le(),icon:i.setting,type:"setting",isActive:()=>M.value.show},{index:2,title:"map.measurement.action.fly-to",handle:()=>Ue(),icon:i.fillBound,disabled:Tt=>!Tt.coordinates||Tt.coordinates.length<1,type:"fly-to"},{index:3,title:"map.measurement.action.clear",handle:()=>Be(),icon:i.clear,type:"clear"},{index:4,title:"map.measurement.action.close",handle:()=>tt(),icon:i.close,type:"close"}],l=e;function s(Tt){Mn(ym,P.value,"control","MeasurementControl").debug("callAction",Tt),Tt.handle({handler:t,measurementType:x.value,coordinates:b.value,clear:tt,reset:Be,onFlyTo:Ue})}const f=Wt(()=>[...a,...(l.actions||[]).filter(Tt=>!Tt.show||Tt.show({handler:t,measurementType:x.value,status:"select"}))].sort((Tt,Ge)=>(Tt.index||0)-(Ge.index||0))),y=Wt(()=>[...u,...(l.actions||[]).filter(Tt=>!Tt.show||Tt.show({handler:t,measurementType:x.value,status:"handle"}))].sort((Tt,Ge)=>(Tt.index||0)-(Ge.index||0))),x=Kt(""),b=Kt([]),M=Kt({show:!0,maxLength:0,fields:[]}),{callMap:A,mapId:P,moduleContainerProps:L}=Lr(l,Y,W),O=AS(P.value),{trans:V,setLocaleDefault:z}=Oi(P.value),B=FY(P.value);z({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthi"},"no-data":{text:"Status",value:"Waiting..."}}}});const U=new l_().setHandler(H),{add:Z,remove:te}=Bm(P.value,U);function Y(Tt){B.addImage(Tt.id,"azimuth-arrow",vle,{sdf:!0}),B.addImage(Tt.id,"measurment-round",_le,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]});let Ge=new fle(Tt);Ge.init([{type:"line",paint:{"line-color":n,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":n,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":n},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":n,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}}),Ge.onStart=()=>{Tt&&Z()},Ge.onReset=()=>{te()};let Ne=new ple(Tt);Ne.setColor(n),Ne.onDragMarker=Bt=>{t.init(Bt)},Ne.onRightClickMarker=(Bt,St)=>{b.value.splice(St,1),t.init(b.value)};let Dt=new yle;Dt.onChangeValue=Bt=>{b.value=(Bt||[]).slice()},Dt.onChangeSetting=(Bt={})=>{M.value.maxLength=Bt.maxLength||0;let St=Bt.fields;(!St||St.length==0)&&(St=[{text:V.value("map.measurement.no-data.text"),value:V.value("map.measurement.no-data.value")}]),M.value.fields=St.map(en=>({...en,text:en.trans?V.value(en.trans):en.text}))},t.addView(Ge),t.addView(Ne),t.addView(Dt),Mn(ym,P.value,"control","MeasurementControl").debug("init",t)}function W(){t&&t.destroy(),tt()}function H(Tt){Mn(ym,P.value,"control","MeasurementControl").debug("onMapClick",Tt);const Ge=[Tt.lngLat.lng,Tt.lngLat.lat];t.action&&t.add(Ge)}function ne(Tt){return Be(!1),x.value==Tt?(x.value=void 0,t.setAction(null),!1):(x.value=Tt,!0)}function le(){ne("distance")&&(Mn(ym,P.value,"control","MeasurementControl").debug("setAction","distance"),t.setAction(new hle),t.start())}function Q(){ne("area")&&(Mn(ym,P.value,"control","MeasurementControl").debug("setAction","area"),t.setAction(new ule),t.start())}function ce(){ne("azimuth")&&(Mn(ym,P.value,"control","MeasurementControl").debug("setAction","azimuth"),t.setAction(new cle),t.start())}function K(){ne("point")&&(Mn(ym,P.value,"control","MeasurementControl").debug("setAction","point"),t.setAction(new dle(O.items.value)),t.start())}function Le(){M.value.show=!M.value.show}function Ue(){A(Tt=>{WA(Tt,Xj(b.value))})}function Be(Tt=!0){t&&(t.reset(),Tt&&fl(()=>{t.start()}))}function tt(){Be(!1),x.value=void 0,t&&t.setAction(null)}function ut(Tt=[]){t&&t.init(Tt)}return(Tt,Ge)=>(xe(),Rt(re($i),Ui(Di(re(L))),{btn:nt(()=>[x.value?(xe(),Rt(re(jy),{key:1,row:""},{default:nt(()=>[(xe(!0),et(Fn,null,Or(y.value,Ne=>(xe(),Rt(re(ri),{key:Ne.title,tooltip:re(V)(Ne.title),active:Ne.isActive?Ne.isActive():!1,disabled:Ne.disabled?Ne.disabled({coordinates:b.value}):!1,onClick:Dt=>s(Ne)},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Ne.icon},null,8,["path"])]),_:2},1032,["tooltip","active","disabled","onClick"]))),128))]),_:1})):(xe(),Rt(re(jy),{key:0,row:""},{default:nt(()=>[(xe(!0),et(Fn,null,Or(f.value,Ne=>(xe(),Rt(re(ri),{key:Ne.type,tooltip:re(V)(Ne.title),onClick:Dt=>s(Ne),active:Ne.isActive?Ne.isActive():!1,disabled:Ne.disabled?Ne.disabled({coordinates:b.value}):!1},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:Ne.icon},null,8,["path"])]),_:2},1032,["tooltip","onClick","active","disabled"]))),128))]),_:1}))]),default:nt(()=>[Sn(Tt.$slots,"default"),x.value?(xe(),Rt(ole,{key:0,modelValue:b.value,show:M.value.show,"onUpdate:show":Ge[0]||(Ge[0]=Ne=>M.value.show=Ne),position:Tt.position,"onUpdate:modelValue":ut,maxLength:M.value.maxLength,fields:M.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):rn("",!0)]),_:3},16))}});class Ale{constructor(t){this.mapCanvas=t,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const t=this.width/2,n=this.height/2;this.yLine.setAttribute("x1",`${t}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${t}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${n}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${n}px`)}}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${this.width}px`),n.setAttribute("height",`${this.height}px`);const i=this.width/2,a=this.height/2;this.yLine=n.appendChild(this.createLine(i,0,i,this.height,this.color,"2px")),this.xLine=n.appendChild(this.createLine(0,a,this.width,a,this.color,"2px")),t.appendChild(n),this.svgCanvas=n}}createLine(t,n,i,a,u,l){const s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",t+""),s.setAttribute("y1",n+""),s.setAttribute("x2",i+""),s.setAttribute("y2",a+""),s.setAttribute("stroke-dasharray","5,5"),s.setAttribute("stroke",u),s.setAttribute("stroke-width",l),s}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function eD(e){const{renderMap:t,hidden:n}=tD(e,i=>{const a=e.getCanvas();i.style.width=a.clientWidth+"px",i.style.height=a.clientHeight+"px"});return new Promise(i=>{t.once("idle",()=>{var u;const a=t.getCanvas();i(a.toDataURL()),t.remove(),(u=n.parentNode)==null||u.removeChild(n)})})}async function wle(e,t){const{renderMap:n,hidden:i}=tD(e,a=>{a.style.width=L3(+t.width,1),a.style.height=L3(+t.height,1)});return new Promise(a=>{n.once("idle",()=>{var l;const u=n.getCanvas();a(u.toDataURL()),n.remove(),(l=i.parentNode)==null||l.removeChild(i)})})}function L3(e,t=96){return`${t*e}px`}function tD(e,t){const n=document.createElement("div");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.padding="0",n.style.margin="0",n.style.background="transparent",n.style.zIndex="-1",document.body.appendChild(n);const i=document.createElement("div");t(i),n.appendChild(i);const a=new zm.Map({container:i,style:e.getStyle(),center:e.getCenter(),zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),interactive:!1,canvasContextAttributes:{preserveDrawingBuffer:!0},fadeDuration:0,transformRequest:e._requestManager._transformRequestFn}),u=(e.style.imageManager||{}).images||[];return Object.keys(u).forEach(l=>{u[l].data&&a.addImage(l,u[l].data)}),{renderMap:a,hidden:n}}class Cle{constructor(t,n){this.mapCanvas=t,this.setOption(n)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=this.mapCanvas.clientWidth,a=this.mapCanvas.clientHeight;n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${i}px`),n.setAttribute("height",`${a}px`);const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("style","fill:#888888;stroke-width:0"),u.setAttribute("fill-opacity","0.5"),n.append(u),t.appendChild(n),this.svgCanvas=n,this.svgPath=u}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const t=this.mapCanvas.clientWidth,n=this.mapCanvas.clientHeight,i=this.option.ratio;let a=n;a>t&&(a=t);let u=0,l=0;if(i>=1?(u=Math.floor(a*4/5-30),l=u/i):(l=Math.floor(a*4/5-30),u=Math.floor(l*i)),this.option.orientation!=="landscape"){if(u>l){const A=l;l=u,u=A}}else if(u<l){const A=l;l=u,u=A}this.cutStartX=t/2-u/2,this.cutStartY=n/2-l/2;const s=l,f=u;this.cutWidth=u,this.cutHeight=l;const y=this.cutStartX,x=y+f,b=this.cutStartY,M=b+s;this.svgCanvas.setAttribute("width",`${t}px`),this.svgCanvas.setAttribute("height",`${n}px`),this.svgPath.setAttribute("d",`M 0 0 L ${t} 0 L ${t} ${n} L 0 ${n} M ${y} ${b} L ${y} ${M} L ${x} ${M} L ${x} ${b}`)}setOption(t){this.option=t,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const Ile=An({__name:"PrintControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},fileName:{}},{...Ri,fileName:"map"}),setup(e){const t=e,n={print:k9,close:Vy,save:C4},{callMap:i,mapId:a,moduleContainerProps:u}=Lr(t),{trans:l,setLocaleDefault:s}=Oi(a.value);s({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const f=Kt({show:!1,loading:!1});function y(b){i(async M=>{f.value.loading=!0;try{let A=await eD(M);b?b(A):await x(A)}finally{f.value.loading=!1}})}async function x(b){BA.saveAs(b,`${t.fileName}.png`)}return(b,M)=>(xe(),Rt(re($i),Ui(Di(re(u))),{btn:nt(()=>[je(re(ri),{tooltip:re(l)("map.print.title"),onClick:M[0]||(M[0]=yr(A=>y(x),["stop"])),loading:f.value.loading},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),iM=Vo.createLogger().setNamespace("map:print",2),Mle="print",Sle=e=>jl(["map:core",e,Mle],()=>(Mn(iM,e,"store").debug("init"),{}))();function Ele(e){const t=Sle(e);function n({show:s,close:f,save:y,saveAll:x}){t.show=s,t.close=f,t.save=y,t.saveAll=x}function i(){var s;(s=t.close)==null||s.call(t)}function a(s={ratio:1,orientation:"portrait",format:"png"}){var f;(f=t.show)==null||f.call(t,s)}function u(s){var f;Mn(iM,e,"store").debug("savePrint",s),(f=t.save)==null||f.call(t,s)}function l(s){var f;Mn(iM,e,"store").debug("saveAllPrint",s),(f=t.saveAll)==null||f.call(t,s)}return{showPrint:a,closePrint:i,savePrint:u,saveAllPrint:l,initPrint:n}}const Tle={class:"setting-container"},Ple=An({__name:"PrintAdvancedControl",props:wi({mapId:{},dragId:{},btnWidth:{},position:{},controlVisible:{type:Boolean},order:{},disabledCrosshair:{type:Boolean},disabledPrintableArea:{type:Boolean},fileName:{}},{...Ri,disabledCrosshair:!1,disabledPrintableArea:!1,fileName:"map"}),setup(e){const t=e,n={print:P9,close:Vy,save:C4,setting:w4},{callMap:i,mapId:a,moduleContainerProps:u}=Lr(t,x),{trans:l,setLocaleDefault:s}=Oi(a.value);s({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const f=Kt({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});yh(()=>{A()});const{initPrint:y}=Ele(a.value);function x(){y({show:Y=>P(Y),close:()=>A(),save:Y=>M(Y),saveAll:Y=>b(Y)})}function b(Y){i(async W=>{f.value.loading=!0;try{let H=await eD(W);Y?Y(H):await L(H)}finally{f.value.loading=!1}})}async function M(Y){i(async W=>{if(V)try{f.value.loading=!0;let H=await wle(W,V.getCutSize());Y?Y(H):await L(H)}finally{f.value.loading=!1}})}function A(){f.value.loading=!1,f.value.show=!1,z(f.value.show),B(f.value.show,f.value.setting)}function P(Y){f.value.show=!0,z(f.value.show),B(f.value.show,Y)}async function L(Y){BA.saveAs(Y,`${t.fileName}.png`)}let O,V;function z(Y){t.disabledCrosshair||i(W=>{Y===!1?O!==void 0&&(O.destroy(),O=void 0):(O=new Ale(W.getCanvas()),O.create())})}function B(Y,W){t.disabledPrintableArea||i(H=>{Y===!1?(H.off("resize",U),V!==void 0&&(V.destroy(),V=void 0)):(H.on("resize",U),V=new Cle(H.getCanvas(),W),V.create())})}function U(){V&&V.mapResize(),O&&O.mapResize()}function Z(){f.value.setting_show=!f.value.setting_show}function te(){V&&V.setOption(f.value.setting)}return(Y,W)=>(xe(),Rt(re($i),Ui(Di(re(u))),{btn:nt(()=>[je(re(jy),{row:""},{default:nt(()=>[f.value.show?(xe(),et(Fn,{key:1},[je(re(ri),{disabled:f.value.loading,loading:f.value.loading,tooltip:re(l)("map.print.actions.save"),onClick:W[1]||(W[1]=H=>M())},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:n.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),je(re(ri),{disabled:f.value.loading,tooltip:re(l)("map.print.actions.clear"),onClick:W[2]||(W[2]=H=>A())},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:n.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(xe(),Rt(re(ri),{key:0,active:f.value.show,tooltip:re(l)("map.print.title"),onClick:W[0]||(W[0]=yr(H=>P(f.value.setting),["stop"])),loading:f.value.loading},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),je(re(ri),{tooltip:re(l)("map.print.actions.setting"),onClick:W[3]||(W[3]=H=>Z()),active:f.value.setting_show},{default:nt(()=>[je(re(Pn),{size:18,type:"mdi",path:n.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:nt(H=>[f.value.setting_show?(xe(),Rt(re(vc),Qn({key:0},H,{height:220,show:f.value.setting_show,"onUpdate:show":W[9]||(W[9]=ne=>f.value.setting_show=ne),title:re(l)("map.print.setting.title")}),{default:nt(()=>[Pe("div",Tle,[Pe("div",null,[je(re(gi),{modelValue:f.value.setting.ratio,"onUpdate:modelValue":W[4]||(W[4]=ne=>f.value.setting.ratio=ne),label:re(l)("map.print.field.ratio"),onChange:W[5]||(W[5]=ne=>te())},null,8,["modelValue","label"])]),Pe("div",null,[je(re(Kf),{modelValue:f.value.setting.orientation,"onUpdate:modelValue":W[6]||(W[6]=ne=>f.value.setting.orientation=ne),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:re(l)("map.print.field.orientation"),onChange:W[7]||(W[7]=ne=>te())},null,8,["modelValue","label"])]),W[10]||(W[10]=Pe("div",{class:"grow"},null,-1)),f.value.show?(xe(),Rt(re(Br),{key:0,class:"btn-container",onClick:W[8]||(W[8]=ne=>M())},{default:nt(()=>[Wr(an(re(l)("map.print.btn.apply")),1)]),_:1})):rn("",!0)])]),_:2},1040,["show","title"])):rn("",!0)]),_:1},16))}}),kle=_n(Ple,[["__scopeId","data-v-f689b067"]]),gE=np({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function u1(e=""){if(u1.cache.has(e))return u1.cache.get(e);const t=e.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return u1.cache.set(e,t),t}u1.cache=new Map;function D3(e,t,n="0"){return e+n.repeat(Math.max(0,t-e.length))}function Lle(e,t=1){const n=[];let i=0;for(;i<e.length;)n.push(e.substr(i,t)),i+=t;return n}function WC(e,t){return t.every(n=>Object.prototype.hasOwnProperty.call(e,n))}function nD(e){const t=xu({}),n=Wt(e);return TM(()=>{for(const i in n.value)t[i]=n.value[i]},{flush:"sync"}),p5(t)}function R3(e,t="px"){if(!(e==null||e===""))return isNaN(+e)?String(e):isFinite(+e)?`${Number(e)}${t}`:void 0}function Dle(e,t){const n=Za();if(!n)throw new Error(`[Vuetify] ${e} must be called from inside a setup function`);return n}function Pw(e="composables"){const t=Dle(e).type;return u1(t==null?void 0:t.name)}const Rle=np({loading:[Boolean,String]},"loader");function Ole(e,t=Pw()){return{loaderClasses:Wt(()=>({[`${t}--loading`]:e.loading}))}}const zle=np({rounded:{type:[Boolean,Number,String],default:"m"},tile:Boolean},"rounded");function Fle(e,t=Pw()){return{roundedClasses:Wt(()=>{const i=yi(e)?e.value:e.rounded,a=yi(e)?e.value:e.tile,u=[];if(i===!0||i==="")u.push(`${t}--rounded`);else if(typeof i=="string"||i===0)for(const l of String(i).split(" "))u.push(`rounded-${l}`);else(a||i===!1)&&u.push("rounded-0");return u})}}const Ble=["xs","s","m","l","xl"],rD=np({size:{type:[String,Number],default:"m"}},"size");function iD(e,t=Pw()){return nD(()=>{let n,i;return typeof e.size=="string"&&Ble.includes(e.size)?n=`${t}--size-${e.size}`:e.size&&(i={width:R3(e.size),height:R3(e.size)}),{sizeClasses:n,sizeStyles:i}})}const yE=np({tag:{type:String,default:"div"}},"tag"),ty=2.4,O3=.2126729,z3=.7151522,F3=.072175,Nle=.55,Vle=.58,jle=.57,Ule=.62,rx=.03,B3=1.45,$le=5e-4,Hle=1.25,Gle=1.25,Zle=.078,N3=12.82051282051282,ix=.06,Wle=.001;function V3(e,t){const n=(e.r/255)**ty,i=(e.g/255)**ty,a=(e.b/255)**ty,u=(t.r/255)**ty,l=(t.g/255)**ty,s=(t.b/255)**ty;let f=n*O3+i*z3+a*F3,y=u*O3+l*z3+s*F3;if(f<=rx&&(f+=(rx-f)**B3),y<=rx&&(y+=(rx-y)**B3),Math.abs(y-f)<$le)return 0;let x;if(y>f){const b=(y**Nle-f**Vle)*Hle;x=b<Wle?0:b<Zle?b-b*N3*ix:b-ix}else{const b=(y**Ule-f**jle)*Gle;x=b>-.001?0:b>-.078?b-b*N3*ix:b+ix}return x*100}function sM(e){return!!e&&/^(#|var\(--|(rgb|hsl)a?\()/.test(e)}function qle(e){return sM(e)&&!/^((rgb|hsl)a?\()?var\(--/.test(e)}const j3=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,Kle={rgb:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),rgba:(e,t,n,i)=>({r:e,g:t,b:n,a:i}),hsl:(e,t,n,i)=>U3({h:e,s:t,l:n,a:i}),hsla:(e,t,n,i)=>U3({h:e,s:t,l:n,a:i}),hsv:(e,t,n,i)=>N1({h:e,s:t,v:n,a:i}),hsva:(e,t,n,i)=>N1({h:e,s:t,v:n,a:i})};function j0(e){if(typeof e=="number")return{r:(e&16711680)>>16,g:(e&65280)>>8,b:e&255};if(typeof e=="string"&&j3.test(e)){const{groups:t}=e.match(j3),{fn:n,values:i}=t,a=i.split(/,\s*/).map(u=>u.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(n)?parseFloat(u)/100:parseFloat(u));return Kle[n](...a)}else if(typeof e=="string"){let t=e.startsWith("#")?e.slice(1):e;return[3,4].includes(t.length)?t=t.split("").map(n=>n+n).join(""):[6,8].includes(t.length),Yle(t)}else if(typeof e=="object"){if(WC(e,["r","g","b"]))return e;if(WC(e,["h","s","l"]))return N1(sD(e));if(WC(e,["h","s","v"]))return N1(e)}throw new TypeError(`Invalid color: ${e==null?e:String(e)||e.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function N1(e){const{h:t,s:n,v:i,a}=e,u=s=>{const f=(s+t/60)%6;return i-i*n*Math.max(Math.min(f,4-f,1),0)},l=[u(5),u(3),u(1)].map(s=>Math.round(s*255));return{r:l[0],g:l[1],b:l[2],a}}function U3(e){return N1(sD(e))}function sD(e){const{h:t,s:n,l:i,a}=e,u=i+n*Math.min(i,1-i),l=u===0?0:2-2*i/u;return{h:t,s:l,v:u,a}}function Yle(e){e=Xle(e);let[t,n,i,a]=Lle(e,2).map(u=>parseInt(u,16));return a=a===void 0?a:a/255,{r:t,g:n,b:i,a}}function Xle(e){return e.startsWith("#")&&(e=e.slice(1)),e=e.replace(/([^0-9a-f])/gi,"F"),(e.length===3||e.length===4)&&(e=e.split("").map(t=>t+t).join("")),e.length!==6&&(e=D3(D3(e,6),8,"F")),e}function Qle(e){const t=Math.abs(V3(j0(0),j0(e)));return Math.abs(V3(j0(16777215),j0(e)))>Math.min(t,50)?"#fff":"#000"}function Jle(e){return nD(()=>{const t=[],n={};if(e.value.background)if(sM(e.value.background)){if(n.backgroundColor=e.value.background,!e.value.text&&qle(e.value.background)){const i=j0(e.value.background);if(i.a==null||i.a===1){const a=Qle(i);n.color=a,n.caretColor=a}}}else t.push(`bg-${e.value.background}`);return e.value.text&&(sM(e.value.text)?(n.color=e.value.text,n.caretColor=e.value.text):t.push(`text-${e.value.text}`)),{colorClasses:t,colorStyles:n}})}const eue=["outlined","plain","filled"],tue=np({color:String,variant:{type:String,default:"filled",validator:e=>eue.includes(e)}},"variant");function nue(e,t=Pw()){const n=Wt(()=>{const{variant:u}=re(e);return`${t}--variant-${u}`}),{colorClasses:i,colorStyles:a}=Jle(Wt(()=>{const{variant:u,color:l}=re(e);return{[["elevated","flat"].includes(u)?"background":"text"]:l}}));return{colorClasses:i,colorStyles:a,variantClasses:n}}const rue={class:"v-btn__content","data-no-activator":""},iue={name:"VBtn"};({...iue,props:np({disabled:Boolean,readonly:Boolean,...gE(),...Rle(),...tue(),...rD(),...zle(),...yE({tag:"button"})},"VBtn")()});const sue=An({props:{...gE(),...yE({tag:"ul"}),...rD({size:"l"})},name:"v-list",setup(e,t){const{sizeClasses:n,sizeStyles:i}=iD(e);return()=>ja(e.tag,{class:["v-list",n.value,e.class],style:[i.value,e.style]},t.slots.default&&t.slots.default())}}),aue=An({props:{...gE(),...yE({tag:"li"})},name:"v-list-item",setup(e,t){return()=>ja(e.tag,{class:["v-list-item",e.class],style:e.style},t.slots.default&&t.slots.default())}}),oue={name:"AsideControl",components:{VList:sue,DraggableItemSideBar:n_,MapControlButton:ri,ModuleContainer:$i,SvgIcon:Pn,VListItem:aue,RouterLink:e4},props:{...oU,...lU({show:!1})},setup(e){const t={icon:I9},[n,i]=Bl(e.show),{mapId:a,moduleContainerProps:u}=Lr(e),{trans:l,setLocale:s}=Oi(a.value);return s({map:{"aside-control":{title:"Aside Control"}}}),{show:n,toggleShow:i,moduleContainerProps:u,trans:l,path:t}}},lue={class:"aside-control__title"};function uue(e,t,n,i,a,u){const l=Us("SvgIcon"),s=Us("MapControlButton"),f=Us("RouterLink"),y=Us("v-list-item"),x=Us("v-list"),b=Us("DraggableItemSideBar"),M=Us("ModuleContainer");return xe(),Rt(M,Qn(i.moduleContainerProps,{active:i.show}),{btn:nt(()=>[je(s,{onClick:t[0]||(t[0]=yr(A=>i.toggleShow(),["stop"])),tooltip:i.trans("map.aside-control.title")},{default:nt(()=>[je(l,{size:"16",type:"mdi",path:i.path.icon},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:nt(A=>[je(b,{containerId:A.containerId,show:i.show,"onUpdate:show":t[1]||(t[1]=P=>i.show=P),title:i.trans("map.aside-control.title")},{title:nt(()=>[Pe("span",lue,an(i.trans("map.aside-control.title")),1)]),default:nt(()=>[je(x,null,{default:nt(()=>[je(y,null,{default:nt(()=>[je(f,{to:"/"},{default:nt(()=>t[2]||(t[2]=[Wr("Home ")])),_:1})]),_:1}),je(y,null,{default:nt(()=>[je(f,{to:"/basemap"},{default:nt(()=>t[3]||(t[3]=[Wr("BaseMap ")])),_:1})]),_:1}),je(y,null,{default:nt(()=>[je(f,{to:"/draw"},{default:nt(()=>t[4]||(t[4]=[Wr("draw ")])),_:1})]),_:1}),je(y,null,{default:nt(()=>[je(f,{to:"/measurement"},{default:nt(()=>t[5]||(t[5]=[Wr("measurement ")])),_:1})]),_:1})]),_:1})]),_:2},1032,["containerId","show","title"])]),_:1},16,["active"])}const cue=_n(oue,[["render",uue]]),hue=An({__name:"AllMapView",setup(e){const{downloadFile:t}=QB(),n=Kt(),{convertList:i}=XB(),{convert:a}=KN(),u=Kt(""),l=lv(u.value);function s(O){u.value=O.id;const{addDataset:V,setMapId:z}=l;z(u.value);const B=sa("Group test",null,!0),U=XL("source",{type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),Z=th("layer raster",[{type:"raster"}]),te=bm("test raster");te.color="#0000FF";const Y=sa("Group layer 1",null,!0);B.add(U),Y.add(te),Y.add(Z),B.add(Y),te.addMenu(Gb());const W=sa("Group test",null,!0),H=ly("source",{type:"FeatureCollection",features:[]}),ne=sa("Group layer 1",null,!0),le=bm("test area");le.color="#0000FF",le.legend=e3([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const Q=th("layer area",[new eh().setStyleType("area").setColor(le.color).setOpacity(.5).build()]);ne.add(Q),ne.add(le);const ce=sa("Group layer 2",null,!0),K=bm("test point");K.color="#ff0000",K.legend=Hre("color",{text:"color-test",color:"#fff"});const Le=th("layer point",[new eh().setStyleType("point").setColor(K.color).setOpacity(K.opacity).build(),new eh().setStyleType("line").setColor(K.color).setOpacity(.5).build()]);le.addMenus([Cf(),DP(),Gb(),yC()]),K.addMenus([Cf(),DP(),b(),x()]);const Ue=VP("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),Be=VP("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),tt=yx("test identify"),ut=OP("test identify 1"),Tt=OP("test identify 2");tt.addMenus([ay(),oy()]),ut.addMenus([ay(),oy()]),Tt.addMenus([ay(),oy()]);const Ge={id:"test",name:"test"};le.group=Ge,ne.add(ut),K.group=Ge,ce.add(Le),ce.add(K),ce.add(Tt),ce.add(Ue);const Ne=gx("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});Ne.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),W.add(H),W.add(Ne),W.add(ne),W.add(ce),W.add(tt),W.add(Be),V(W),V(y()),V(f()),V(L())}function f(){const O=sa("Group DatasetLineString",null,!0),V=ly("source",{type:"FeatureCollection",features:[]}),z=sa("Group layer 1",null,!0),B=bm("test line string");B.color=rh();const U=th("layer area",[new eh().setStyleType("line").setColor(B.color).build()]);z.add(U),z.add(B),B.addMenus([Cf(),Gb(),yC()]);const Z=yx("test identify");Z.addMenus([ay(),oy()]),O.add(Z);const te=gx("data management",{fields:[{text:"Name",value:"name"}]});return te.setItems([{id:"2",name:"feature 2",geometry:{coordinates:[[104.3289285884349,21.35998263691249],[105.11257582166496,21.70421219227839],[105.16699576841705,21.35998263691249],[104.89489603465671,21.39038859819064]],type:"LineString"}}]),O.add(V),O.add(te),O.add(z),O}function y(){const O=sa("Group test",null,!0),V=ly("source",{type:"FeatureCollection",features:[]}),z=sa("Group layer 1",null,!0),B=bm("test point");B.color=rh();const U=th("layer area",[new eh().setStyleType("point").setColor(B.color).build()]),Z=FQ();z.add(U),z.add(Z),z.add(B),B.addMenus([Cf(),Gb(),yC()]);const te=yx("test identify");te.addMenus([ay(),oy()]),O.add(te);const Y=gx("data management",{fields:[{text:"Name",value:"name"}]});return Y.setItems([{id:"2",name:"feature 2",geometry:{coordinates:[106.26447460804093,20.9143362367018],type:"Point"}}]),O.add(V),O.add(Y),O.add(z),O}function x(){return{type:"item",name:"Download",icon:h9,click:async(O,V)=>{const z=Vl(O,B=>B.type==="dataManagement");if(kI(z)){const B=await a(i(await z.getList()||[]),{filename:"download.geojson"});B&&t(B,"download.geojson")}}}}function b(){return{type:"item",name:"Edit feature",icon:S4,click:(O,V)=>{const{callDraw:z}=US(V),B=Vl(O,U=>U.type==="dataManagement");kI(B)&&z({cleanAfterDone:!0,draw_support:[ky.POINT,ky.POLYGON,ky.LINE_STRING],getFeatures:B.getFeatures&&B.getFeatures.bind(B),addFeatures:B.addFeatures&&B.addFeatures.bind(B),updateFeatures:B.updateFeatures&&B.updateFeatures.bind(B),deleteFeatures:B.deleteFeatures&&B.deleteFeatures.bind(B),reset:async()=>{lo(V,U=>{O0(B)&&B.addToMap(U)})}})}}}const M=[{title:"add to layer",icon:ip,type:"add-to-layer",show:O=>!!O.measurementType,handle:O=>{const{addDataset:V}=l,z=O.coordinates;!z||z.length<1||(V(P(O.handler,O.measurementType||"")),O.clear())},disabled:O=>!O.coordinates||O.coordinates.length<1,index:0}];function A(O){switch(O){case"area":return"area";case"distance":case"line":return"line";case"point":return"point";default:return"line"}}function P(O,V){const z=O.getResult(),B=sa("Dataset Measure",null,!0),U=ly("source",{type:"FeatureCollection",features:z.features||[]}),Z=sa("Group layer 1",null,!0),te=KL("List Measure:"+V).setColor(rh()).configDisabledOpacity().configInitShowLegend().setLegend(e3([{type:"text",value:{text:"Measure",value:z.format||z.value}}])).build(),Y=[new eh().setStyleType(A(V||"line")).setColor(te.color).build()],W=th("Layer Measure",Y);return Z.add(W),Z.add(te),te.addMenus([Cf()]),B.add(U),B.add(Z),B}function L(){const O=sa("Example Group layer",null,!0),V=ly("source",{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{coordinates:[[[106.41291829184809,21.063188440081973],[106.41291829184809,20.717051166796367],[107.01740796748487,20.717051166796367],[107.01740796748487,21.063188440081973],[106.41291829184809,21.063188440081973]]],type:"Polygon"}}]});O.add(V);const z=sa("Group layer",null,!0),B=mee("Example Group list").setColor(rh()).configInitShowChildren().build();B.addMenus([Cf({location:"bottom"})]),z.add(B),O.add(z);const U=NP("Sub list 1");U.color=rh();const Z=sa("Group sub layer 1",null,!0),te=th("layer point",[new eh().setStyleType("point").setColor(U.color).build()]);Z.add(U),Z.add(te);const Y=NP("Sub list 2");Y.color=rh(),U.addMenus([Cf({location:"bottom"})]),Y.addMenus([Cf({location:"bottom"})]);const W=sa("Group sub layer 2",null,!0),H=th("layer line",[new eh().setStyleType("line").setColor(Y.color).build()]);return W.add(Y),W.add(H),B.add(Z),B.add(W),O}return(O,V)=>(xe(),Rt(re(fG),{ref_key:"mapRef",ref:n,onMapLoaded:s},{default:nt(()=>[je(re(Cee)),je(re(xle),{position:"top-right",actions:M}),je(re(Nie),{position:"top-right"}),je(re(ese),{position:"top-right"}),je(re(Cre),{position:"top-left",show:""},{endList:nt(({mapId:z})=>[je(re(SX),{mapId:z},null,8,["mapId"])]),_:1}),je(re(Fte),{position:"top-right"}),je(re(kle)),je(re(Ile)),je(re(HY),{position:"top-right"}),je(re(VY)),je(re(Noe)),je(re(_Y)),je(re(cX)),je(re(NY)),je(re(BY)),je(re(hX)),je(re(GY)),je(re(aX)),je(re(zX),{position:"bottom-left"}),je(re(Nte)),je(re(Ire)),je(re(mte),{position:"top-left"}),je(re(LY),{position:"top-left"}),je(cue,{position:"top-left"})]),_:1},512))}}),due=sF({history:zz("/demo-map/"),routes:[{path:"/",name:"home",component:hue},{path:"/legend/",component:()=>xf(()=>import("./legend-DEX229hQ.js"),__vite__mapDeps([0,1]))},{path:"/draw/",component:()=>xf(()=>import("./example-Hlpou9Se.js"),__vite__mapDeps([2,3]))},{path:"/inspect/",component:()=>xf(()=>import("./inspect-BmeCuVLx.js"),__vite__mapDeps([4,3]))},{path:"/compare/",component:()=>xf(()=>import("./AllMapCompareView-COOzl62-.js"),__vite__mapDeps([5,3]))},{path:"/basemap/",component:()=>xf(()=>import("./example-DQcspiqp.js"),__vite__mapDeps([6,7]))},{path:"/measurement/",component:()=>xf(()=>import("./example-Dl6mWBz-.js"),__vite__mapDeps([8,3]))},{path:"/story-telling/",component:()=>xf(()=>import("./example-CVxIcnqM.js"),__vite__mapDeps([9,10,11]))},{path:"/story-telling-gps/",component:()=>xf(()=>import("./example-gps-DxLZMi05.js"),__vite__mapDeps([12,10,11]))}]}),fue=An({__name:"App",setup(e){return(t,n)=>(xe(),Rt(re(t4)))}}),pue=_n(fue,[["__scopeId","data-v-b7680054"]]),vE=Nx(pue);vE.use(due);vE.use(tU());vE.mount("#root");export{s9 as $,cue as A,zX as B,Kt as C,ky as D,Er as E,Fn as F,ha as G,Lr as H,Oi as I,P4 as J,_n as K,eh as L,fG as M,wi as N,Bl as O,$i as P,Ui as Q,Di as R,Sn as S,rn as T,vc as U,Qn as V,yi as W,ri as X,yr as Y,Pn as Z,HY as _,je as a,Ua as a$,Ri as a0,vd as a1,l4 as a2,wu as a3,aU as a4,fl as a5,Wt as a6,Uf as a7,Om as a8,lo as a9,th as aA,bm as aB,Gb as aC,Cf as aD,ly as aE,e3 as aF,Hre as aG,yC as aH,VP as aI,yx as aJ,OP as aK,ay as aL,oy as aM,gx as aN,jy as aO,by as aP,SX as aQ,ip as aR,M1 as aS,ud as aT,YM as aU,Aa as aV,XM as aW,ZA as aX,V4 as aY,Mj as aZ,zm as a_,yh as aa,ii as ab,xH as ac,rG as ad,Uy as ae,PL as af,vI as ag,an as ah,Kf as ai,xi as aj,H9 as ak,ZM as al,Wr as am,b9 as an,EX as ao,qr as ap,Cee as aq,xle as ar,Cre as as,Fte as at,_Y as au,NY as av,Ire as aw,lv as ax,sa as ay,XL as az,Pe as b,JT as b0,Rt as c,An as d,VY as e,cX as f,BY as g,hX as h,GY as i,aX as j,et as k,ps as l,Poe as m,Nie as n,xe as o,ese as p,gue as q,Or as r,Ca as s,Mn as t,re as u,yue as v,nt as w,fh as x,Mu as y,mue as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/legend-DEX229hQ.js","assets/legend-B_YV6Ksu.css","assets/example-Hlpou9Se.js","assets/example-BRI0LJKA.css","assets/inspect-BmeCuVLx.js","assets/AllMapCompareView-COOzl62-.js","assets/example-DQcspiqp.js","assets/example-7vOpaiIK.css","assets/example-Dl6mWBz-.js","assets/example-CVxIcnqM.js","assets/useStorytelling-CV7B42S5.js","assets/example-Ca6w4nUQ.css","assets/example-gps-DxLZMi05.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
