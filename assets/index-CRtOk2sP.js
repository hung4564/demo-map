(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const l of u.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();const YD="modulepreload",XD=function(e){return"/demo-map/"+e},XS={},gf=function(t,n,i){let o=Promise.resolve();return n&&n.length>0&&(document.getElementsByTagName("link"),o=Promise.all(n.map(u=>{if(u=XD(u),u in XS)return;XS[u]=!0;const l=u.endsWith(".css"),s=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${s}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":YD,l||(f.as="script",f.crossOrigin=""),f.href=u,document.head.appendChild(f),l)return new Promise((y,b)=>{f.addEventListener("load",y),f.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))),o.then(()=>t()).catch(u=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=u,window.dispatchEvent(l),!l.defaultPrevented)throw u})};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function eA(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Hr={},dy=[],du=()=>{},QD=()=>!1,M_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qI=e=>e.startsWith("onUpdate:"),Mi=Object.assign,KI=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},JD=Object.prototype.hasOwnProperty,ri=(e,t)=>JD.call(e,t),Nn=Array.isArray,fy=e=>jy(e)==="[object Map]",Dm=e=>jy(e)==="[object Set]",QS=e=>jy(e)==="[object Date]",eR=e=>jy(e)==="[object RegExp]",rr=e=>typeof e=="function",Oi=e=>typeof e=="string",uc=e=>typeof e=="symbol",vi=e=>e!==null&&typeof e=="object",YI=e=>(vi(e)||rr(e))&&rr(e.then)&&rr(e.catch),l3=Object.prototype.toString,jy=e=>l3.call(e),tR=e=>jy(e).slice(8,-1),tA=e=>jy(e)==="[object Object]",XI=e=>Oi(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,py=eA(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nA=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},nR=/-(\w)/g,za=nA(e=>e.replace(nR,(t,n)=>n?n.toUpperCase():"")),rR=/\B([A-Z])/g,rl=nA(e=>e.replace(rR,"-$1").toLowerCase()),S_=nA(e=>e.charAt(0).toUpperCase()+e.slice(1)),k0=nA(e=>e?`on${S_(e)}`:""),Io=(e,t)=>!Object.is(e,t),my=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},u3=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},hx=e=>{const t=parseFloat(e);return isNaN(t)?e:t},dx=e=>{const t=Oi(e)?Number(e):NaN;return isNaN(t)?e:t};let JS;const rA=()=>JS||(JS=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),iR="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",sR=eA(iR);function Yr(e){if(Nn(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],o=Oi(i)?uR(i):Yr(i);if(o)for(const u in o)t[u]=o[u]}return t}else if(Oi(e)||vi(e))return e}const aR=/;(?![^(]*\))/g,oR=/:([^]+)/,lR=/\/\*[^]*?\*\//g;function uR(e){const t={};return e.replace(lR,"").split(aR).forEach(n=>{if(n){const i=n.split(oR);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function ei(e){let t="";if(Oi(e))t=e;else if(Nn(e))for(let n=0;n<e.length;n++){const i=ei(e[n]);i&&(t+=i+" ")}else if(vi(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function $i(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Oi(t)&&(e.class=ei(t)),n&&(e.style=Yr(n)),e}const cR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hR=eA(cR);function c3(e){return!!e||e===""}function dR(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Vf(e[i],t[i]);return n}function Vf(e,t){if(e===t)return!0;let n=QS(e),i=QS(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=uc(e),i=uc(t),n||i)return e===t;if(n=Nn(e),i=Nn(t),n||i)return n&&i?dR(e,t):!1;if(n=vi(e),i=vi(t),n||i){if(!n||!i)return!1;const o=Object.keys(e).length,u=Object.keys(t).length;if(o!==u)return!1;for(const l in e){const s=e.hasOwnProperty(l),f=t.hasOwnProperty(l);if(s&&!f||!s&&f||!Vf(e[l],t[l]))return!1}}return String(e)===String(t)}function iA(e,t){return e.findIndex(n=>Vf(n,t))}const h3=e=>!!(e&&e.__v_isRef===!0),gn=e=>Oi(e)?e:e==null?"":Nn(e)||vi(e)&&(e.toString===l3||!rr(e.toString))?h3(e)?gn(e.value):JSON.stringify(e,d3,2):String(e),d3=(e,t)=>h3(t)?d3(e,t.value):fy(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,o],u)=>(n[E2(i,u)+" =>"]=o,n),{})}:Dm(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>E2(n))}:uc(t)?E2(t):vi(t)&&!Nn(t)&&!tA(t)?String(t):t,E2=(e,t="")=>{var n;return uc(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Co;class QI{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Co,!t&&Co&&(this.index=(Co.scopes||(Co.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Co;try{return Co=this,t()}finally{Co=n}}}on(){Co=this}off(){Co=this.parent}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function fR(e){return new QI(e)}function JI(){return Co}function f3(e,t=!1){Co&&Co.cleanups.push(e)}let Ri;const T2=new WeakSet;class Q0{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Co&&Co.active&&Co.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,T2.has(this)&&(T2.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||m3(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,eE(this),g3(this);const t=Ri,n=oc;Ri=this,oc=!0;try{return this.fn()}finally{y3(this),Ri=t,oc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nM(t);this.deps=this.depsTail=void 0,eE(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?T2.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){BC(this)&&this.run()}get dirty(){return BC(this)}}let p3=0,L0,D0;function m3(e,t=!1){if(e.flags|=8,t){e.next=D0,D0=e;return}e.next=L0,L0=e}function eM(){p3++}function tM(){if(--p3>0)return;if(D0){let t=D0;for(D0=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;L0;){let t=L0;for(L0=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function g3(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function y3(e){let t,n=e.depsTail,i=n;for(;i;){const o=i.prevDep;i.version===-1?(i===n&&(n=o),nM(i),pR(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=o}e.deps=t,e.depsTail=n}function BC(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(v3(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function v3(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===J0))return;e.globalVersion=J0;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!BC(e)){e.flags&=-3;return}const n=Ri,i=oc;Ri=e,oc=!0;try{g3(e);const o=e.fn(e._value);(t.version===0||Io(o,e._value))&&(e._value=o,t.version++)}catch(o){throw t.version++,o}finally{Ri=n,oc=i,y3(e),e.flags&=-3}}function nM(e,t=!1){const{dep:n,prevSub:i,nextSub:o}=e;if(i&&(i.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let u=n.computed.deps;u;u=u.nextDep)nM(u,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function pR(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}function mR(e,t){e.effect instanceof Q0&&(e=e.effect.fn);const n=new Q0(e);t&&Mi(n,t);try{n.run()}catch(o){throw n.stop(),o}const i=n.run.bind(n);return i.effect=n,i}function gR(e){e.effect.stop()}let oc=!0;const _3=[];function Wf(){_3.push(oc),oc=!1}function qf(){const e=_3.pop();oc=e===void 0?!0:e}function eE(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Ri;Ri=void 0;try{t()}finally{Ri=n}}}let J0=0;class yR{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class sA{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ri||!oc||Ri===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ri)n=this.activeLink=new yR(Ri,this),Ri.deps?(n.prevDep=Ri.depsTail,Ri.depsTail.nextDep=n,Ri.depsTail=n):Ri.deps=Ri.depsTail=n,b3(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Ri.depsTail,n.nextDep=void 0,Ri.depsTail.nextDep=n,Ri.depsTail=n,Ri.deps===n&&(Ri.deps=i)}return n}trigger(t){this.version++,J0++,this.notify(t)}notify(t){eM();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{tM()}}}function b3(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)b3(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const fx=new WeakMap,vm=Symbol(""),NC=Symbol(""),e_=Symbol("");function qa(e,t,n){if(oc&&Ri){let i=fx.get(e);i||fx.set(e,i=new Map);let o=i.get(n);o||(i.set(n,o=new sA),o.map=i,o.key=n),o.track()}}function Jh(e,t,n,i,o,u){const l=fx.get(e);if(!l){J0++;return}const s=f=>{f&&f.trigger()};if(eM(),t==="clear")l.forEach(s);else{const f=Nn(e),y=f&&XI(n);if(f&&n==="length"){const b=Number(i);l.forEach((x,M)=>{(M==="length"||M===e_||!uc(M)&&M>=b)&&s(x)})}else switch((n!==void 0||l.has(void 0))&&s(l.get(n)),y&&s(l.get(e_)),t){case"add":f?y&&s(l.get("length")):(s(l.get(vm)),fy(e)&&s(l.get(NC)));break;case"delete":f||(s(l.get(vm)),fy(e)&&s(l.get(NC)));break;case"set":fy(e)&&s(l.get(vm));break}}tM()}function vR(e,t){const n=fx.get(e);return n&&n.get(t)}function zg(e){const t=$r(e);return t===e?t:(qa(t,"iterate",e_),Pl(e)?t:t.map(Ka))}function aA(e){return qa(e=$r(e),"iterate",e_),e}const _R={__proto__:null,[Symbol.iterator](){return P2(this,Symbol.iterator,Ka)},concat(...e){return zg(this).concat(...e.map(t=>Nn(t)?zg(t):t))},entries(){return P2(this,"entries",e=>(e[1]=Ka(e[1]),e))},every(e,t){return Wh(this,"every",e,t,void 0,arguments)},filter(e,t){return Wh(this,"filter",e,t,n=>n.map(Ka),arguments)},find(e,t){return Wh(this,"find",e,t,Ka,arguments)},findIndex(e,t){return Wh(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Wh(this,"findLast",e,t,Ka,arguments)},findLastIndex(e,t){return Wh(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Wh(this,"forEach",e,t,void 0,arguments)},includes(...e){return k2(this,"includes",e)},indexOf(...e){return k2(this,"indexOf",e)},join(e){return zg(this).join(e)},lastIndexOf(...e){return k2(this,"lastIndexOf",e)},map(e,t){return Wh(this,"map",e,t,void 0,arguments)},pop(){return l0(this,"pop")},push(...e){return l0(this,"push",e)},reduce(e,...t){return tE(this,"reduce",e,t)},reduceRight(e,...t){return tE(this,"reduceRight",e,t)},shift(){return l0(this,"shift")},some(e,t){return Wh(this,"some",e,t,void 0,arguments)},splice(...e){return l0(this,"splice",e)},toReversed(){return zg(this).toReversed()},toSorted(e){return zg(this).toSorted(e)},toSpliced(...e){return zg(this).toSpliced(...e)},unshift(...e){return l0(this,"unshift",e)},values(){return P2(this,"values",Ka)}};function P2(e,t,n){const i=aA(e),o=i[t]();return i!==e&&!Pl(e)&&(o._next=o.next,o.next=()=>{const u=o._next();return u.value&&(u.value=n(u.value)),u}),o}const bR=Array.prototype;function Wh(e,t,n,i,o,u){const l=aA(e),s=l!==e&&!Pl(e),f=l[t];if(f!==bR[t]){const x=f.apply(e,u);return s?Ka(x):x}let y=n;l!==e&&(s?y=function(x,M){return n.call(this,Ka(x),M,e)}:n.length>2&&(y=function(x,M){return n.call(this,x,M,e)}));const b=f.call(l,y,i);return s&&o?o(b):b}function tE(e,t,n,i){const o=aA(e);let u=n;return o!==e&&(Pl(e)?n.length>3&&(u=function(l,s,f){return n.call(this,l,s,f,e)}):u=function(l,s,f){return n.call(this,l,Ka(s),f,e)}),o[t](u,...i)}function k2(e,t,n){const i=$r(e);qa(i,"iterate",e_);const o=i[t](...n);return(o===-1||o===!1)&&uA(n[0])?(n[0]=$r(n[0]),i[t](...n)):o}function l0(e,t,n=[]){Wf(),eM();const i=$r(e)[t].apply(e,n);return tM(),qf(),i}const xR=eA("__proto__,__v_isRef,__isVue"),x3=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(uc));function AR(e){uc(e)||(e=String(e));const t=$r(this);return qa(t,"has",e),t.hasOwnProperty(e)}class A3{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,u=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return u;if(n==="__v_raw")return i===(o?u?E3:S3:u?M3:I3).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const l=Nn(t);if(!o){let f;if(l&&(f=_R[n]))return f;if(n==="hasOwnProperty")return AR}const s=Reflect.get(t,n,Ii(t)?t:i);return(uc(n)?x3.has(n):xR(n))||(o||qa(t,"get",n),u)?s:Ii(s)?l&&XI(n)?s:s.value:vi(s)?o?E_(s):yu(s):s}}class w3 extends A3{constructor(t=!1){super(!1,t)}set(t,n,i,o){let u=t[n];if(!this._isShallow){const f=jf(u);if(!Pl(i)&&!jf(i)&&(u=$r(u),i=$r(i)),!Nn(t)&&Ii(u)&&!Ii(i))return f?!1:(u.value=i,!0)}const l=Nn(t)&&XI(n)?Number(n)<t.length:ri(t,n),s=Reflect.set(t,n,i,Ii(t)?t:o);return t===$r(o)&&(l?Io(i,u)&&Jh(t,"set",n,i):Jh(t,"add",n,i)),s}deleteProperty(t,n){const i=ri(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&i&&Jh(t,"delete",n,void 0),o}has(t,n){const i=Reflect.has(t,n);return(!uc(n)||!x3.has(n))&&qa(t,"has",n),i}ownKeys(t){return qa(t,"iterate",Nn(t)?"length":vm),Reflect.ownKeys(t)}}class C3 extends A3{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const wR=new w3,CR=new C3,IR=new w3(!0),MR=new C3(!0),VC=e=>e,fb=e=>Reflect.getPrototypeOf(e);function SR(e,t,n){return function(...i){const o=this.__v_raw,u=$r(o),l=fy(u),s=e==="entries"||e===Symbol.iterator&&l,f=e==="keys"&&l,y=o[e](...i),b=n?VC:t?jC:Ka;return!t&&qa(u,"iterate",f?NC:vm),{next(){const{value:x,done:M}=y.next();return M?{value:x,done:M}:{value:s?[b(x[0]),b(x[1])]:b(x),done:M}},[Symbol.iterator](){return this}}}}function pb(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ER(e,t){const n={get(o){const u=this.__v_raw,l=$r(u),s=$r(o);e||(Io(o,s)&&qa(l,"get",o),qa(l,"get",s));const{has:f}=fb(l),y=t?VC:e?jC:Ka;if(f.call(l,o))return y(u.get(o));if(f.call(l,s))return y(u.get(s));u!==l&&u.get(o)},get size(){const o=this.__v_raw;return!e&&qa($r(o),"iterate",vm),Reflect.get(o,"size",o)},has(o){const u=this.__v_raw,l=$r(u),s=$r(o);return e||(Io(o,s)&&qa(l,"has",o),qa(l,"has",s)),o===s?u.has(o):u.has(o)||u.has(s)},forEach(o,u){const l=this,s=l.__v_raw,f=$r(s),y=t?VC:e?jC:Ka;return!e&&qa(f,"iterate",vm),s.forEach((b,x)=>o.call(u,y(b),y(x),l))}};return Mi(n,e?{add:pb("add"),set:pb("set"),delete:pb("delete"),clear:pb("clear")}:{add(o){!t&&!Pl(o)&&!jf(o)&&(o=$r(o));const u=$r(this);return fb(u).has.call(u,o)||(u.add(o),Jh(u,"add",o,o)),this},set(o,u){!t&&!Pl(u)&&!jf(u)&&(u=$r(u));const l=$r(this),{has:s,get:f}=fb(l);let y=s.call(l,o);y||(o=$r(o),y=s.call(l,o));const b=f.call(l,o);return l.set(o,u),y?Io(u,b)&&Jh(l,"set",o,u):Jh(l,"add",o,u),this},delete(o){const u=$r(this),{has:l,get:s}=fb(u);let f=l.call(u,o);f||(o=$r(o),f=l.call(u,o)),s&&s.call(u,o);const y=u.delete(o);return f&&Jh(u,"delete",o,void 0),y},clear(){const o=$r(this),u=o.size!==0,l=o.clear();return u&&Jh(o,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=SR(o,e,t)}),n}function oA(e,t){const n=ER(e,t);return(i,o,u)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?i:Reflect.get(ri(n,o)&&o in i?n:i,o,u)}const TR={get:oA(!1,!1)},PR={get:oA(!1,!0)},kR={get:oA(!0,!1)},LR={get:oA(!0,!0)},I3=new WeakMap,M3=new WeakMap,S3=new WeakMap,E3=new WeakMap;function DR(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RR(e){return e.__v_skip||!Object.isExtensible(e)?0:DR(tR(e))}function yu(e){return jf(e)?e:lA(e,!1,wR,TR,I3)}function rM(e){return lA(e,!1,IR,PR,M3)}function E_(e){return lA(e,!0,CR,kR,S3)}function OR(e){return lA(e,!0,MR,LR,E3)}function lA(e,t,n,i,o){if(!vi(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=o.get(e);if(u)return u;const l=RR(e);if(l===0)return e;const s=new Proxy(e,l===2?i:n);return o.set(e,s),s}function Rf(e){return jf(e)?Rf(e.__v_raw):!!(e&&e.__v_isReactive)}function jf(e){return!!(e&&e.__v_isReadonly)}function Pl(e){return!!(e&&e.__v_isShallow)}function uA(e){return e?!!e.__v_raw:!1}function $r(e){const t=e&&e.__v_raw;return t?$r(t):e}function T3(e){return!ri(e,"__v_skip")&&Object.isExtensible(e)&&u3(e,"__v_skip",!0),e}const Ka=e=>vi(e)?yu(e):e,jC=e=>vi(e)?E_(e):e;function Ii(e){return e?e.__v_isRef===!0:!1}function Qt(e){return P3(e,!1)}function Dl(e){return P3(e,!0)}function P3(e,t){return Ii(e)?e:new zR(e,t)}class zR{constructor(t,n){this.dep=new sA,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:$r(t),this._value=n?t:Ka(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Pl(t)||jf(t);t=i?t:$r(t),Io(t,n)&&(this._rawValue=t,this._value=i?t:Ka(t),this.dep.trigger())}}function FR(e){e.dep&&e.dep.trigger()}function se(e){return Ii(e)?e.value:e}function k3(e){return rr(e)?e():se(e)}const BR={get:(e,t,n)=>t==="__v_raw"?e:se(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const o=e[t];return Ii(o)&&!Ii(n)?(o.value=n,!0):Reflect.set(e,t,n,i)}};function iM(e){return Rf(e)?e:new Proxy(e,BR)}class NR{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new sA,{get:i,set:o}=t(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=o}get value(){return this._value=this._get()}set value(t){this._set(t)}}function L3(e){return new NR(e)}function VR(e){const t=Nn(e)?new Array(e.length):{};for(const n in e)t[n]=D3(e,n);return t}class jR{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return vR($r(this._object),this._key)}}class UR{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function $R(e,t,n){return Ii(e)?e:rr(e)?new UR(e):vi(e)&&arguments.length>1?D3(e,t,n):Qt(e)}function D3(e,t,n){const i=e[t];return Ii(i)?i:new jR(e,t,n)}class HR{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new sA(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=J0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Ri!==this)return m3(this,!0),!0}get value(){const t=this.dep.track();return v3(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function GR(e,t,n=!1){let i,o;return rr(e)?i=e:(i=e.get,o=e.set),new HR(i,o,n)}const ZR={GET:"get",HAS:"has",ITERATE:"iterate"},WR={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},mb={},px=new WeakMap;let xf;function qR(){return xf}function R3(e,t=!1,n=xf){if(n){let i=px.get(n);i||px.set(n,i=[]),i.push(e)}}function KR(e,t,n=Hr){const{immediate:i,deep:o,once:u,scheduler:l,augmentJob:s,call:f}=n,y=U=>o?U:Pl(U)||o===!1||o===0?ed(U,1):ed(U);let b,x,M,A,k=!1,L=!1;if(Ii(e)?(x=()=>e.value,k=Pl(e)):Rf(e)?(x=()=>y(e),k=!0):Nn(e)?(L=!0,k=e.some(U=>Rf(U)||Pl(U)),x=()=>e.map(U=>{if(Ii(U))return U.value;if(Rf(U))return y(U);if(rr(U))return f?f(U,2):U()})):rr(e)?t?x=f?()=>f(e,2):e:x=()=>{if(M){Wf();try{M()}finally{qf()}}const U=xf;xf=b;try{return f?f(e,3,[A]):e(A)}finally{xf=U}}:x=du,t&&o){const U=x,W=o===!0?1/0:o;x=()=>ed(U(),W)}const F=JI(),V=()=>{b.stop(),F&&F.active&&KI(F.effects,b)};if(u&&t){const U=t;t=(...W)=>{U(...W),V()}}let O=L?new Array(e.length).fill(mb):mb;const N=U=>{if(!(!(b.flags&1)||!b.dirty&&!U))if(t){const W=b.run();if(o||k||(L?W.some((ne,X)=>Io(ne,O[X])):Io(W,O))){M&&M();const ne=xf;xf=b;try{const X=[W,O===mb?void 0:L&&O[0]===mb?[]:O,A];f?f(t,3,X):t(...X),O=W}finally{xf=ne}}}else b.run()};return s&&s(N),b=new Q0(x),b.scheduler=l?()=>l(N,!1):N,A=U=>R3(U,!1,b),M=b.onStop=()=>{const U=px.get(b);if(U){if(f)f(U,4);else for(const W of U)W();px.delete(b)}},t?i?N(!0):O=b.run():l?l(N.bind(null,!0),!0):b.run(),V.pause=b.pause.bind(b),V.resume=b.resume.bind(b),V.stop=V,V}function ed(e,t=1/0,n){if(t<=0||!vi(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ii(e))ed(e.value,t,n);else if(Nn(e))for(let i=0;i<e.length;i++)ed(e[i],t,n);else if(Dm(e)||fy(e))e.forEach(i=>{ed(i,t,n)});else if(tA(e)){for(const i in e)ed(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&ed(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const O3=[];function YR(e){O3.push(e)}function XR(){O3.pop()}function QR(e,t){}const JR={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},e6={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Uy(e,t,n,i){try{return i?e(...i):e()}catch(o){Rm(o,t,n)}}function vu(e,t,n,i){if(rr(e)){const o=Uy(e,t,n,i);return o&&YI(o)&&o.catch(u=>{Rm(u,t,n)}),o}if(Nn(e)){const o=[];for(let u=0;u<e.length;u++)o.push(vu(e[u],t,n,i));return o}}function Rm(e,t,n,i=!0){const o=t?t.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Hr;if(t){let s=t.parent;const f=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const b=s.ec;if(b){for(let x=0;x<b.length;x++)if(b[x](e,f,y)===!1)return}s=s.parent}if(u){Wf(),Uy(u,null,10,[e,f,y]),qf();return}}t6(e,n,o,i,l)}function t6(e,t,n,i=!0,o=!1){if(o)throw e;console.error(e)}const Mo=[];let Kc=-1;const gy=[];let Af=null,Wg=0;const z3=Promise.resolve();let mx=null;function Rl(e){const t=mx||z3;return e?t.then(this?e.bind(this):e):t}function n6(e){let t=Kc+1,n=Mo.length;for(;t<n;){const i=t+n>>>1,o=Mo[i],u=n_(o);u<e||u===e&&o.flags&2?t=i+1:n=i}return t}function sM(e){if(!(e.flags&1)){const t=n_(e),n=Mo[Mo.length-1];!n||!(e.flags&2)&&t>=n_(n)?Mo.push(e):Mo.splice(n6(t),0,e),e.flags|=1,F3()}}function F3(){mx||(mx=z3.then(B3))}function t_(e){Nn(e)?gy.push(...e):Af&&e.id===-1?Af.splice(Wg+1,0,e):e.flags&1||(gy.push(e),e.flags|=1),F3()}function nE(e,t,n=Kc+1){for(;n<Mo.length;n++){const i=Mo[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Mo.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function gx(e){if(gy.length){const t=[...new Set(gy)].sort((n,i)=>n_(n)-n_(i));if(gy.length=0,Af){Af.push(...t);return}for(Af=t,Wg=0;Wg<Af.length;Wg++){const n=Af[Wg];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Af=null,Wg=0}}const n_=e=>e.id==null?e.flags&2?-1:1/0:e.id;function B3(e){try{for(Kc=0;Kc<Mo.length;Kc++){const t=Mo[Kc];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Uy(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Kc<Mo.length;Kc++){const t=Mo[Kc];t&&(t.flags&=-2)}Kc=-1,Mo.length=0,gx(),mx=null,(Mo.length||gy.length)&&B3()}}let qg,gb=[];function N3(e,t){var n,i;qg=e,qg?(qg.enabled=!0,gb.forEach(({event:o,args:u})=>qg.emit(o,...u)),gb=[]):typeof window<"u"&&window.HTMLElement&&!((i=(n=window.navigator)==null?void 0:n.userAgent)!=null&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(u=>{N3(u,t)}),setTimeout(()=>{qg||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,gb=[])},3e3)):gb=[]}let ia=null,cA=null;function r_(e){const t=ia;return ia=e,cA=e&&e.type.__scopeId||null,t}function r6(e){cA=e}function i6(){cA=null}const s6=e=>dt;function dt(e,t=ia,n){if(!t||e._n)return e;const i=(...o)=>{i._d&&YC(-1);const u=r_(t);let l;try{l=e(...o)}finally{r_(u),i._d&&YC(1)}return l};return i._n=!0,i._c=!0,i._d=!0,i}function kl(e,t){if(ia===null)return e;const n=k_(ia),i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[u,l,s,f=Hr]=t[o];u&&(rr(u)&&(u={mounted:u,updated:u}),u.deep&&ed(l),i.push({dir:u,instance:n,value:l,oldValue:void 0,arg:s,modifiers:f}))}return e}function Yc(e,t,n,i){const o=e.dirs,u=t&&t.dirs;for(let l=0;l<o.length;l++){const s=o[l];u&&(s.oldValue=u[l].value);let f=s.dir[i];f&&(Wf(),vu(f,n,8,[e.el,s,e,t]),qf())}}const V3=Symbol("_vte"),j3=e=>e.__isTeleport,R0=e=>e&&(e.disabled||e.disabled===""),rE=e=>e&&(e.defer||e.defer===""),iE=e=>typeof SVGElement<"u"&&e instanceof SVGElement,sE=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,UC=(e,t)=>{const n=e&&e.to;return Oi(n)?t?t(n):null:n},U3={name:"Teleport",__isTeleport:!0,process(e,t,n,i,o,u,l,s,f,y){const{mc:b,pc:x,pbc:M,o:{insert:A,querySelector:k,createText:L,createComment:F}}=y,V=R0(t.props);let{shapeFlag:O,children:N,dynamicChildren:U}=t;if(e==null){const W=t.el=L(""),ne=t.anchor=L("");A(W,n,i),A(ne,n,i);const X=(G,ee)=>{O&16&&(o&&o.isCE&&(o.ce._teleportTarget=G),b(N,G,ee,o,u,l,s,f))},q=()=>{const G=t.target=UC(t.props,k),ee=$3(G,t,L,A);G&&(l!=="svg"&&iE(G)?l="svg":l!=="mathml"&&sE(G)&&(l="mathml"),V||(X(G,ee),Ub(t,!1)))};V&&(X(n,ne),Ub(t,!0)),rE(t.props)?ta(()=>{q(),t.el.__isMounted=!0},u):q()}else{if(rE(t.props)&&!e.el.__isMounted){ta(()=>{U3.process(e,t,n,i,o,u,l,s,f,y),delete e.el.__isMounted},u);return}t.el=e.el,t.targetStart=e.targetStart;const W=t.anchor=e.anchor,ne=t.target=e.target,X=t.targetAnchor=e.targetAnchor,q=R0(e.props),G=q?n:ne,ee=q?W:X;if(l==="svg"||iE(ne)?l="svg":(l==="mathml"||sE(ne))&&(l="mathml"),U?(M(e.dynamicChildren,U,G,o,u,l,s),mM(e,t,!0)):f||x(e,t,G,ee,o,u,l,s,!1),V)q?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):yb(t,n,W,y,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ue=t.target=UC(t.props,k);ue&&yb(t,ue,null,y,0)}else q&&yb(t,ne,X,y,1);Ub(t,V)}},remove(e,t,n,{um:i,o:{remove:o}},u){const{shapeFlag:l,children:s,anchor:f,targetStart:y,targetAnchor:b,target:x,props:M}=e;if(x&&(o(y),o(b)),u&&o(f),l&16){const A=u||!R0(M);for(let k=0;k<s.length;k++){const L=s[k];i(L,t,n,A,!!L.dynamicChildren)}}},move:yb,hydrate:a6};function yb(e,t,n,{o:{insert:i},m:o},u=2){u===0&&i(e.targetAnchor,t,n);const{el:l,anchor:s,shapeFlag:f,children:y,props:b}=e,x=u===2;if(x&&i(l,t,n),(!x||R0(b))&&f&16)for(let M=0;M<y.length;M++)o(y[M],t,n,2);x&&i(s,t,n)}function a6(e,t,n,i,o,u,{o:{nextSibling:l,parentNode:s,querySelector:f,insert:y,createText:b}},x){const M=t.target=UC(t.props,f);if(M){const A=R0(t.props),k=M._lpa||M.firstChild;if(t.shapeFlag&16)if(A)t.anchor=x(l(e),t,s(e),n,i,o,u),t.targetStart=k,t.targetAnchor=k&&l(k);else{t.anchor=l(e);let L=k;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")t.targetStart=L;else if(L.data==="teleport anchor"){t.targetAnchor=L,M._lpa=t.targetAnchor&&l(t.targetAnchor);break}}L=l(L)}t.targetAnchor||$3(M,t,b,y),x(k&&l(k),t,M,n,i,o,u)}Ub(t,A)}return t.anchor&&l(t.anchor)}const $C=U3;function Ub(e,t){const n=e.ctx;if(n&&n.ut){let i,o;for(t?(i=e.el,o=e.anchor):(i=e.targetStart,o=e.targetAnchor);i&&i!==o;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function $3(e,t,n,i){const o=t.targetStart=n(""),u=t.targetAnchor=n("");return o[V3]=u,e&&(i(o,e),i(u,e)),u}const wf=Symbol("_leaveCb"),vb=Symbol("_enterCb");function aM(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ti(()=>{e.isMounted=!0}),uh(()=>{e.isUnmounting=!0}),e}const su=[Function,Array],oM={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:su,onEnter:su,onAfterEnter:su,onEnterCancelled:su,onBeforeLeave:su,onLeave:su,onAfterLeave:su,onLeaveCancelled:su,onBeforeAppear:su,onAppear:su,onAfterAppear:su,onAppearCancelled:su},H3=e=>{const t=e.subTree;return t.component?H3(t.component):t},o6={name:"BaseTransition",props:oM,setup(e,{slots:t}){const n=to(),i=aM();return()=>{const o=t.default&&hA(t.default(),!0);if(!o||!o.length)return;const u=G3(o),l=$r(e),{mode:s}=l;if(i.isLeaving)return L2(u);const f=aE(u);if(!f)return L2(u);let y=Cy(f,l,i,n,x=>y=x);f.type!==Vs&&sd(f,y);let b=n.subTree&&aE(n.subTree);if(b&&b.type!==Vs&&!rc(f,b)&&H3(n).type!==Vs){let x=Cy(b,l,i,n);if(sd(b,x),s==="out-in"&&f.type!==Vs)return i.isLeaving=!0,x.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete x.afterLeave,b=void 0},L2(u);s==="in-out"&&f.type!==Vs?x.delayLeave=(M,A,k)=>{const L=W3(i,b);L[String(b.key)]=b,M[wf]=()=>{A(),M[wf]=void 0,delete y.delayedLeave,b=void 0},y.delayedLeave=()=>{k(),delete y.delayedLeave,b=void 0}}:b=void 0}else b&&(b=void 0);return u}}};function G3(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Vs){t=n;break}}return t}const Z3=o6;function W3(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Cy(e,t,n,i,o){const{appear:u,mode:l,persisted:s=!1,onBeforeEnter:f,onEnter:y,onAfterEnter:b,onEnterCancelled:x,onBeforeLeave:M,onLeave:A,onAfterLeave:k,onLeaveCancelled:L,onBeforeAppear:F,onAppear:V,onAfterAppear:O,onAppearCancelled:N}=t,U=String(e.key),W=W3(n,e),ne=(G,ee)=>{G&&vu(G,i,9,ee)},X=(G,ee)=>{const ue=ee[1];ne(G,ee),Nn(G)?G.every(Y=>Y.length<=1)&&ue():G.length<=1&&ue()},q={mode:l,persisted:s,beforeEnter(G){let ee=f;if(!n.isMounted)if(u)ee=F||f;else return;G[wf]&&G[wf](!0);const ue=W[U];ue&&rc(e,ue)&&ue.el[wf]&&ue.el[wf](),ne(ee,[G])},enter(G){let ee=y,ue=b,Y=x;if(!n.isMounted)if(u)ee=V||y,ue=O||b,Y=N||x;else return;let ce=!1;const K=G[vb]=Se=>{ce||(ce=!0,Se?ne(Y,[G]):ne(ue,[G]),q.delayedLeave&&q.delayedLeave(),G[vb]=void 0)};ee?X(ee,[G,K]):K()},leave(G,ee){const ue=String(e.key);if(G[vb]&&G[vb](!0),n.isUnmounting)return ee();ne(M,[G]);let Y=!1;const ce=G[wf]=K=>{Y||(Y=!0,ee(),K?ne(L,[G]):ne(k,[G]),G[wf]=void 0,W[ue]===e&&delete W[ue])};W[ue]=e,A?X(A,[G,ce]):ce()},clone(G){const ee=Cy(G,t,n,i,o);return o&&o(ee),ee}};return q}function L2(e){if(T_(e))return e=ih(e),e.children=null,e}function aE(e){if(!T_(e))return j3(e.type)&&e.children?G3(e.children):e;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&rr(n.default))return n.default()}}function sd(e,t){e.shapeFlag&6&&e.component?(e.transition=t,sd(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function hA(e,t=!1,n){let i=[],o=0;for(let u=0;u<e.length;u++){let l=e[u];const s=n==null?l.key:String(n)+String(l.key!=null?l.key:u);l.type===Gn?(l.patchFlag&128&&o++,i=i.concat(hA(l.children,t,s))):(t||l.type!==Vs)&&i.push(s!=null?ih(l,{key:s}):l)}if(o>1)for(let u=0;u<i.length;u++)i[u].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Dn(e,t){return rr(e)?Mi({name:e.name},t,{setup:e}):e}function l6(){const e=to();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function lM(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function u6(e){const t=to(),n=Dl(null);if(t){const o=t.refs===Hr?t.refs={}:t.refs;Object.defineProperty(o,e,{enumerable:!0,get:()=>n.value,set:u=>n.value=u})}return n}function i_(e,t,n,i,o=!1){if(Nn(e)){e.forEach((k,L)=>i_(k,t&&(Nn(t)?t[L]:t),n,i,o));return}if(Of(i)&&!o){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&i_(e,t,n,i.component.subTree);return}const u=i.shapeFlag&4?k_(i.component):i.el,l=o?null:u,{i:s,r:f}=e,y=t&&t.r,b=s.refs===Hr?s.refs={}:s.refs,x=s.setupState,M=$r(x),A=x===Hr?()=>!1:k=>ri(M,k);if(y!=null&&y!==f&&(Oi(y)?(b[y]=null,A(y)&&(x[y]=null)):Ii(y)&&(y.value=null)),rr(f))Uy(f,s,12,[l,b]);else{const k=Oi(f),L=Ii(f);if(k||L){const F=()=>{if(e.f){const V=k?A(f)?x[f]:b[f]:f.value;o?Nn(V)&&KI(V,u):Nn(V)?V.includes(u)||V.push(u):k?(b[f]=[u],A(f)&&(x[f]=b[f])):(f.value=[u],e.k&&(b[e.k]=f.value))}else k?(b[f]=l,A(f)&&(x[f]=l)):L&&(f.value=l,e.k&&(b[e.k]=l))};l?(F.id=-1,ta(F,n)):F()}}}let oE=!1;const Fg=()=>{oE||(console.error("Hydration completed but contains mismatches."),oE=!0)},c6=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",h6=e=>e.namespaceURI.includes("MathML"),_b=e=>{if(e.nodeType===1){if(c6(e))return"svg";if(h6(e))return"mathml"}},ny=e=>e.nodeType===8;function d6(e){const{mt:t,p:n,o:{patchProp:i,createText:o,nextSibling:u,parentNode:l,remove:s,insert:f,createComment:y}}=e,b=(N,U)=>{if(!U.hasChildNodes()){n(null,N,U),gx(),U._vnode=N;return}x(U.firstChild,N,null,null,null),gx(),U._vnode=N},x=(N,U,W,ne,X,q=!1)=>{q=q||!!U.dynamicChildren;const G=ny(N)&&N.data==="[",ee=()=>L(N,U,W,ne,X,G),{type:ue,ref:Y,shapeFlag:ce,patchFlag:K}=U;let Se=N.nodeType;U.el=N,K===-2&&(q=!1,U.dynamicChildren=null);let Ve=null;switch(ue){case Ff:Se!==3?U.children===""?(f(U.el=o(""),l(N),N),Ve=N):Ve=ee():(N.data!==U.children&&(Fg(),N.data=U.children),Ve=u(N));break;case Vs:O(N)?(Ve=u(N),V(U.el=N.content.firstChild,N,W)):Se!==8||G?Ve=ee():Ve=u(N);break;case bm:if(G&&(N=u(N),Se=N.nodeType),Se===1||Se===3){Ve=N;const Ne=!U.children.length;for(let et=0;et<U.staticCount;et++)Ne&&(U.children+=Ve.nodeType===1?Ve.outerHTML:Ve.data),et===U.staticCount-1&&(U.anchor=Ve),Ve=u(Ve);return G?u(Ve):Ve}else ee();break;case Gn:G?Ve=k(N,U,W,ne,X,q):Ve=ee();break;default:if(ce&1)(Se!==1||U.type.toLowerCase()!==N.tagName.toLowerCase())&&!O(N)?Ve=ee():Ve=M(N,U,W,ne,X,q);else if(ce&6){U.slotScopeIds=X;const Ne=l(N);if(G?Ve=F(N):ny(N)&&N.data==="teleport start"?Ve=F(N,N.data,"teleport end"):Ve=u(N),t(U,Ne,null,W,ne,_b(Ne),q),Of(U)&&!U.type.__asyncResolved){let et;G?(et=He(Gn),et.anchor=Ve?Ve.previousSibling:Ne.lastChild):et=N.nodeType===3?Qi(""):He("div"),et.el=N,U.component.subTree=et}}else ce&64?Se!==8?Ve=ee():Ve=U.type.hydrate(N,U,W,ne,X,q,e,A):ce&128&&(Ve=U.type.hydrate(N,U,W,ne,_b(l(N)),X,q,e,x))}return Y!=null&&i_(Y,null,ne,U),Ve},M=(N,U,W,ne,X,q)=>{q=q||!!U.dynamicChildren;const{type:G,props:ee,patchFlag:ue,shapeFlag:Y,dirs:ce,transition:K}=U,Se=G==="input"||G==="option";if(Se||ue!==-1){ce&&Yc(U,null,W,"created");let Ve=!1;if(O(N)){Ve=_5(null,K)&&W&&W.vnode.props&&W.vnode.props.appear;const et=N.content.firstChild;Ve&&K.beforeEnter(et),V(et,N,W),U.el=N=et}if(Y&16&&!(ee&&(ee.innerHTML||ee.textContent))){let et=A(N.firstChild,U,N,W,ne,X,q);for(;et;){bb(N,1)||Fg();const ot=et;et=et.nextSibling,s(ot)}}else if(Y&8){let et=U.children;et[0]===`
`&&(N.tagName==="PRE"||N.tagName==="TEXTAREA")&&(et=et.slice(1)),N.textContent!==et&&(bb(N,0)||Fg(),N.textContent=U.children)}if(ee){if(Se||!q||ue&48){const et=N.tagName.includes("-");for(const ot in ee)(Se&&(ot.endsWith("value")||ot==="indeterminate")||M_(ot)&&!py(ot)||ot[0]==="."||et)&&i(N,ot,null,ee[ot],void 0,W)}else if(ee.onClick)i(N,"onClick",null,ee.onClick,void 0,W);else if(ue&4&&Rf(ee.style))for(const et in ee.style)ee.style[et]}let Ne;(Ne=ee&&ee.onVnodeBeforeMount)&&el(Ne,W,U),ce&&Yc(U,null,W,"beforeMount"),((Ne=ee&&ee.onVnodeMounted)||ce||Ve)&&T5(()=>{Ne&&el(Ne,W,U),Ve&&K.enter(N),ce&&Yc(U,null,W,"mounted")},ne)}return N.nextSibling},A=(N,U,W,ne,X,q,G)=>{G=G||!!U.dynamicChildren;const ee=U.children,ue=ee.length;for(let Y=0;Y<ue;Y++){const ce=G?ee[Y]:ee[Y]=nl(ee[Y]),K=ce.type===Ff;N?(K&&!G&&Y+1<ue&&nl(ee[Y+1]).type===Ff&&(f(o(N.data.slice(ce.children.length)),W,u(N)),N.data=ce.children),N=x(N,ce,ne,X,q,G)):K&&!ce.children?f(ce.el=o(""),W):(bb(W,1)||Fg(),n(null,ce,W,null,ne,X,_b(W),q))}return N},k=(N,U,W,ne,X,q)=>{const{slotScopeIds:G}=U;G&&(X=X?X.concat(G):G);const ee=l(N),ue=A(u(N),U,ee,W,ne,X,q);return ue&&ny(ue)&&ue.data==="]"?u(U.anchor=ue):(Fg(),f(U.anchor=y("]"),ee,ue),ue)},L=(N,U,W,ne,X,q)=>{if(bb(N.parentElement,1)||Fg(),U.el=null,q){const ue=F(N);for(;;){const Y=u(N);if(Y&&Y!==ue)s(Y);else break}}const G=u(N),ee=l(N);return s(N),n(null,U,ee,G,W,ne,_b(ee),X),W&&(W.vnode.el=U.el,mA(W,U.el)),G},F=(N,U="[",W="]")=>{let ne=0;for(;N;)if(N=u(N),N&&ny(N)&&(N.data===U&&ne++,N.data===W)){if(ne===0)return u(N);ne--}return N},V=(N,U,W)=>{const ne=U.parentNode;ne&&ne.replaceChild(N,U);let X=W;for(;X;)X.vnode.el===U&&(X.vnode.el=X.subTree.el=N),X=X.parent},O=N=>N.nodeType===1&&N.tagName==="TEMPLATE";return[b,x]}const lE="data-allow-mismatch",f6={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function bb(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(lE);)e=e.parentElement;const n=e&&e.getAttribute(lE);if(n==null)return!1;if(n==="")return!0;{const i=n.split(",");return t===0&&i.includes("children")?!0:n.split(",").includes(f6[t])}}const p6=rA().requestIdleCallback||(e=>setTimeout(e,1)),m6=rA().cancelIdleCallback||(e=>clearTimeout(e)),g6=(e=1e4)=>t=>{const n=p6(t,{timeout:e});return()=>m6(n)};function y6(e){const{top:t,left:n,bottom:i,right:o}=e.getBoundingClientRect(),{innerHeight:u,innerWidth:l}=window;return(t>0&&t<u||i>0&&i<u)&&(n>0&&n<l||o>0&&o<l)}const v6=e=>(t,n)=>{const i=new IntersectionObserver(o=>{for(const u of o)if(u.isIntersecting){i.disconnect(),t();break}},e);return n(o=>{if(o instanceof Element){if(y6(o))return t(),i.disconnect(),!1;i.observe(o)}}),()=>i.disconnect()},_6=e=>t=>{if(e){const n=matchMedia(e);if(n.matches)t();else return n.addEventListener("change",t,{once:!0}),()=>n.removeEventListener("change",t)}},b6=(e=[])=>(t,n)=>{Oi(e)&&(e=[e]);let i=!1;const o=l=>{i||(i=!0,u(),t(),l.target.dispatchEvent(new l.constructor(l.type,l)))},u=()=>{n(l=>{for(const s of e)l.removeEventListener(s,o)})};return n(l=>{for(const s of e)l.addEventListener(s,o,{once:!0})}),u};function x6(e,t){if(ny(e)&&e.data==="["){let n=1,i=e.nextSibling;for(;i;){if(i.nodeType===1){if(t(i)===!1)break}else if(ny(i))if(i.data==="]"){if(--n===0)break}else i.data==="["&&n++;i=i.nextSibling}}else t(e)}const Of=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function A6(e){rr(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:o=200,hydrate:u,timeout:l,suspensible:s=!0,onError:f}=e;let y=null,b,x=0;const M=()=>(x++,y=null,A()),A=()=>{let k;return y||(k=y=t().catch(L=>{if(L=L instanceof Error?L:new Error(String(L)),f)return new Promise((F,V)=>{f(L,()=>F(M()),()=>V(L),x+1)});throw L}).then(L=>k!==y&&y?y:(L&&(L.__esModule||L[Symbol.toStringTag]==="Module")&&(L=L.default),b=L,L)))};return Dn({name:"AsyncComponentWrapper",__asyncLoader:A,__asyncHydrate(k,L,F){const V=u?()=>{const O=u(F,N=>x6(k,N));O&&(L.bum||(L.bum=[])).push(O)}:F;b?V():A().then(()=>!L.isUnmounted&&V())},get __asyncResolved(){return b},setup(){const k=na;if(lM(k),b)return()=>D2(b,k);const L=N=>{y=null,Rm(N,k,13,!i)};if(s&&k.suspense||Iy)return A().then(N=>()=>D2(N,k)).catch(N=>(L(N),()=>i?He(i,{error:N}):null));const F=Qt(!1),V=Qt(),O=Qt(!!o);return o&&setTimeout(()=>{O.value=!1},o),l!=null&&setTimeout(()=>{if(!F.value&&!V.value){const N=new Error(`Async component timed out after ${l}ms.`);L(N),V.value=N}},l),A().then(()=>{F.value=!0,k.parent&&T_(k.parent.vnode)&&k.parent.update()}).catch(N=>{L(N),V.value=N}),()=>{if(F.value&&b)return D2(b,k);if(V.value&&i)return He(i,{error:V.value});if(n&&!O.value)return He(n)}}})}function D2(e,t){const{ref:n,props:i,children:o,ce:u}=t.vnode,l=He(e,i,o);return l.ref=n,l.ce=u,delete t.vnode.ce,l}const T_=e=>e.type.__isKeepAlive,w6={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=to(),i=n.ctx;if(!i.renderer)return()=>{const O=t.default&&t.default();return O&&O.length===1?O[0]:O};const o=new Map,u=new Set;let l=null;const s=n.suspense,{renderer:{p:f,m:y,um:b,o:{createElement:x}}}=i,M=x("div");i.activate=(O,N,U,W,ne)=>{const X=O.component;y(O,N,U,0,s),f(X.vnode,O,N,U,X,s,W,O.slotScopeIds,ne),ta(()=>{X.isDeactivated=!1,X.a&&my(X.a);const q=O.props&&O.props.onVnodeMounted;q&&el(q,X.parent,O)},s)},i.deactivate=O=>{const N=O.component;vx(N.m),vx(N.a),y(O,M,null,1,s),ta(()=>{N.da&&my(N.da);const U=O.props&&O.props.onVnodeUnmounted;U&&el(U,N.parent,O),N.isDeactivated=!0},s)};function A(O){R2(O),b(O,n,s,!0)}function k(O){o.forEach((N,U)=>{const W=tI(N.type);W&&!O(W)&&L(U)})}function L(O){const N=o.get(O);N&&(!l||!rc(N,l))?A(N):l&&R2(l),o.delete(O),u.delete(O)}hs(()=>[e.include,e.exclude],([O,N])=>{O&&k(U=>x0(O,U)),N&&k(U=>!x0(N,U))},{flush:"post",deep:!0});let F=null;const V=()=>{F!=null&&(_x(n.subTree.type)?ta(()=>{o.set(F,xb(n.subTree))},n.subTree.suspense):o.set(F,xb(n.subTree)))};return ti(V),fA(V),uh(()=>{o.forEach(O=>{const{subTree:N,suspense:U}=n,W=xb(N);if(O.type===W.type&&O.key===W.key){R2(W);const ne=W.component.da;ne&&ta(ne,U);return}A(O)})}),()=>{if(F=null,!t.default)return l=null;const O=t.default(),N=O[0];if(O.length>1)return l=null,O;if(!ad(N)||!(N.shapeFlag&4)&&!(N.shapeFlag&128))return l=null,N;let U=xb(N);if(U.type===Vs)return l=null,U;const W=U.type,ne=tI(Of(U)?U.type.__asyncResolved||{}:W),{include:X,exclude:q,max:G}=e;if(X&&(!ne||!x0(X,ne))||q&&ne&&x0(q,ne))return U.shapeFlag&=-257,l=U,N;const ee=U.key==null?W:U.key,ue=o.get(ee);return U.el&&(U=ih(U),N.shapeFlag&128&&(N.ssContent=U)),F=ee,ue?(U.el=ue.el,U.component=ue.component,U.transition&&sd(U,U.transition),U.shapeFlag|=512,u.delete(ee),u.add(ee)):(u.add(ee),G&&u.size>parseInt(G,10)&&L(u.values().next().value)),U.shapeFlag|=256,l=U,_x(N.type)?N:U}}},C6=w6;function x0(e,t){return Nn(e)?e.some(n=>x0(n,t)):Oi(e)?e.split(",").includes(t):eR(e)?(e.lastIndex=0,e.test(t)):!1}function q3(e,t){Y3(e,"a",t)}function K3(e,t){Y3(e,"da",t)}function Y3(e,t,n=na){const i=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(dA(t,i,n),n){let o=n.parent;for(;o&&o.parent;)T_(o.parent.vnode)&&I6(i,t,n,o),o=o.parent}}function I6(e,t,n,i){const o=dA(t,e,i,!0);Ol(()=>{KI(i[t],o)},n)}function R2(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function xb(e){return e.shapeFlag&128?e.ssContent:e}function dA(e,t,n=na,i=!1){if(n){const o=n[e]||(n[e]=[]),u=t.__weh||(t.__weh=(...l)=>{Wf();const s=Em(n),f=vu(t,n,e,l);return s(),qf(),f});return i?o.unshift(u):o.push(u),u}}const dd=e=>(t,n=na)=>{(!Iy||e==="sp")&&dA(e,(...i)=>t(...i),n)},X3=dd("bm"),ti=dd("m"),uM=dd("bu"),fA=dd("u"),uh=dd("bum"),Ol=dd("um"),Q3=dd("sp"),J3=dd("rtg"),e5=dd("rtc");function t5(e,t=na){dA("ec",e,t)}const cM="components",M6="directives";function Eo(e,t){return hM(cM,e,!0,t)||e}const n5=Symbol.for("v-ndc");function Ls(e){return Oi(e)?hM(cM,e,!1)||e:e||n5}function S6(e){return hM(M6,e)}function hM(e,t,n=!0,i=!1){const o=ia||na;if(o){const u=o.type;if(e===cM){const s=tI(u,!1);if(s&&(s===t||s===za(t)||s===S_(za(t))))return u}const l=uE(o[e]||u[e],t)||uE(o.appContext[e],t);return!l&&i?u:l}}function uE(e,t){return e&&(e[t]||e[za(t)]||e[S_(za(t))])}function ii(e,t,n,i){let o;const u=n&&n[i],l=Nn(e);if(l||Oi(e)){const s=l&&Rf(e);let f=!1;s&&(f=!Pl(e),e=aA(e)),o=new Array(e.length);for(let y=0,b=e.length;y<b;y++)o[y]=t(f?Ka(e[y]):e[y],y,void 0,u&&u[y])}else if(typeof e=="number"){o=new Array(e);for(let s=0;s<e;s++)o[s]=t(s+1,s,void 0,u&&u[s])}else if(vi(e))if(e[Symbol.iterator])o=Array.from(e,(s,f)=>t(s,f,void 0,u&&u[f]));else{const s=Object.keys(e);o=new Array(s.length);for(let f=0,y=s.length;f<y;f++){const b=s[f];o[f]=t(e[b],b,f,u&&u[f])}}else o=[];return n&&(n[i]=o),o}function E6(e,t){for(let n=0;n<t.length;n++){const i=t[n];if(Nn(i))for(let o=0;o<i.length;o++)e[i[o].name]=i[o].fn;else i&&(e[i.name]=i.key?(...o)=>{const u=i.fn(...o);return u&&(u.key=i.key),u}:i.fn)}return e}function In(e,t,n={},i,o){if(ia.ce||ia.parent&&Of(ia.parent)&&ia.parent.ce)return t!=="default"&&(n.name=t),Ae(),$t(Gn,null,[He("slot",n,i&&i())],64);let u=e[t];u&&u._c&&(u._d=!1),Ae();const l=u&&dM(u(n)),s=n.key||l&&l.key,f=$t(Gn,{key:(s&&!uc(s)?s:`_${t}`)+(!l&&i?"_fb":"")},l||(i?i():[]),l&&e._===1?64:-2);return!o&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),u&&u._c&&(u._d=!0),f}function dM(e){return e.some(t=>ad(t)?!(t.type===Vs||t.type===Gn&&!dM(t.children)):!0)?e:null}function T6(e,t){const n={};for(const i in e)n[t&&/[A-Z]/.test(i)?`on:${i}`:k0(i)]=e[i];return n}const HC=e=>e?R5(e)?k_(e):HC(e.parent):null,O0=Mi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>HC(e.parent),$root:e=>HC(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>fM(e),$forceUpdate:e=>e.f||(e.f=()=>{sM(e.update)}),$nextTick:e=>e.n||(e.n=Rl.bind(e.proxy)),$watch:e=>i8.bind(e)}),O2=(e,t)=>e!==Hr&&!e.__isScriptSetup&&ri(e,t),GC={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:o,props:u,accessCache:l,type:s,appContext:f}=e;let y;if(t[0]!=="$"){const A=l[t];if(A!==void 0)switch(A){case 1:return i[t];case 2:return o[t];case 4:return n[t];case 3:return u[t]}else{if(O2(i,t))return l[t]=1,i[t];if(o!==Hr&&ri(o,t))return l[t]=2,o[t];if((y=e.propsOptions[0])&&ri(y,t))return l[t]=3,u[t];if(n!==Hr&&ri(n,t))return l[t]=4,n[t];ZC&&(l[t]=0)}}const b=O0[t];let x,M;if(b)return t==="$attrs"&&qa(e.attrs,"get",""),b(e);if((x=s.__cssModules)&&(x=x[t]))return x;if(n!==Hr&&ri(n,t))return l[t]=4,n[t];if(M=f.config.globalProperties,ri(M,t))return M[t]},set({_:e},t,n){const{data:i,setupState:o,ctx:u}=e;return O2(o,t)?(o[t]=n,!0):i!==Hr&&ri(i,t)?(i[t]=n,!0):ri(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:o,propsOptions:u}},l){let s;return!!n[l]||e!==Hr&&ri(e,l)||O2(t,l)||(s=u[0])&&ri(s,l)||ri(i,l)||ri(O0,l)||ri(o.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ri(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},P6=Mi({},GC,{get(e,t){if(t!==Symbol.unscopables)return GC.get(e,t,e)},has(e,t){return t[0]!=="_"&&!sR(t)}});function k6(){return null}function L6(){return null}function D6(e){}function R6(e){}function O6(){return null}function z6(){}function F6(e,t){return null}function r5(){return i5().slots}function B6(){return i5().attrs}function i5(){const e=to();return e.setupContext||(e.setupContext=F5(e))}function s_(e){return Nn(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function N6(e,t){const n=s_(e);for(const i in t){if(i.startsWith("__skip"))continue;let o=n[i];o?Nn(o)||rr(o)?o=n[i]={type:o,default:t[i]}:o.default=t[i]:o===null&&(o=n[i]={default:t[i]}),o&&t[`__skip_${i}`]&&(o.skipFactory=!0)}return n}function Ui(e,t){return!e||!t?e||t:Nn(e)&&Nn(t)?e.concat(t):Mi({},s_(e),s_(t))}function V6(e,t){const n={};for(const i in e)t.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>e[i]});return n}function j6(e){const t=to();let n=e();return QC(),YI(n)&&(n=n.catch(i=>{throw Em(t),i})),[n,()=>Em(t)]}let ZC=!0;function U6(e){const t=fM(e),n=e.proxy,i=e.ctx;ZC=!1,t.beforeCreate&&cE(t.beforeCreate,e,"bc");const{data:o,computed:u,methods:l,watch:s,provide:f,inject:y,created:b,beforeMount:x,mounted:M,beforeUpdate:A,updated:k,activated:L,deactivated:F,beforeDestroy:V,beforeUnmount:O,destroyed:N,unmounted:U,render:W,renderTracked:ne,renderTriggered:X,errorCaptured:q,serverPrefetch:G,expose:ee,inheritAttrs:ue,components:Y,directives:ce,filters:K}=t;if(y&&$6(y,i,null),l)for(const Ne in l){const et=l[Ne];rr(et)&&(i[Ne]=et.bind(n))}if(o){const Ne=o.call(n,n);vi(Ne)&&(e.data=yu(Ne))}if(ZC=!0,u)for(const Ne in u){const et=u[Ne],ot=rr(et)?et.bind(n,n):rr(et.get)?et.get.bind(n,n):du,Zt=!rr(et)&&rr(et.set)?et.set.bind(n):du,qe=dn({get:ot,set:Zt});Object.defineProperty(i,Ne,{enumerable:!0,configurable:!0,get:()=>qe.value,set:Ue=>qe.value=Ue})}if(s)for(const Ne in s)s5(s[Ne],i,n,Ne);if(f){const Ne=rr(f)?f.call(n):f;Reflect.ownKeys(Ne).forEach(et=>{zf(et,Ne[et])})}b&&cE(b,e,"c");function Ve(Ne,et){Nn(et)?et.forEach(ot=>Ne(ot.bind(n))):et&&Ne(et.bind(n))}if(Ve(X3,x),Ve(ti,M),Ve(uM,A),Ve(fA,k),Ve(q3,L),Ve(K3,F),Ve(t5,q),Ve(e5,ne),Ve(J3,X),Ve(uh,O),Ve(Ol,U),Ve(Q3,G),Nn(ee))if(ee.length){const Ne=e.exposed||(e.exposed={});ee.forEach(et=>{Object.defineProperty(Ne,et,{get:()=>n[et],set:ot=>n[et]=ot})})}else e.exposed||(e.exposed={});W&&e.render===du&&(e.render=W),ue!=null&&(e.inheritAttrs=ue),Y&&(e.components=Y),ce&&(e.directives=ce),G&&lM(e)}function $6(e,t,n=du){Nn(e)&&(e=WC(e));for(const i in e){const o=e[i];let u;vi(o)?"default"in o?u=ya(o.from||i,o.default,!0):u=ya(o.from||i):u=ya(o),Ii(u)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:l=>u.value=l}):t[i]=u}}function cE(e,t,n){vu(Nn(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function s5(e,t,n,i){let o=i.includes(".")?I5(n,i):()=>n[i];if(Oi(e)){const u=t[e];rr(u)&&hs(o,u)}else if(rr(e))hs(o,e.bind(n));else if(vi(e))if(Nn(e))e.forEach(u=>s5(u,t,n,i));else{const u=rr(e.handler)?e.handler.bind(n):t[e.handler];rr(u)&&hs(o,u,e)}}function fM(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:o,optionsCache:u,config:{optionMergeStrategies:l}}=e.appContext,s=u.get(t);let f;return s?f=s:!o.length&&!n&&!i?f=t:(f={},o.length&&o.forEach(y=>yx(f,y,l,!0)),yx(f,t,l)),vi(t)&&u.set(t,f),f}function yx(e,t,n,i=!1){const{mixins:o,extends:u}=t;u&&yx(e,u,n,!0),o&&o.forEach(l=>yx(e,l,n,!0));for(const l in t)if(!(i&&l==="expose")){const s=H6[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const H6={data:hE,props:dE,emits:dE,methods:A0,computed:A0,beforeCreate:xo,created:xo,beforeMount:xo,mounted:xo,beforeUpdate:xo,updated:xo,beforeDestroy:xo,beforeUnmount:xo,destroyed:xo,unmounted:xo,activated:xo,deactivated:xo,errorCaptured:xo,serverPrefetch:xo,components:A0,directives:A0,watch:Z6,provide:hE,inject:G6};function hE(e,t){return t?e?function(){return Mi(rr(e)?e.call(this,this):e,rr(t)?t.call(this,this):t)}:t:e}function G6(e,t){return A0(WC(e),WC(t))}function WC(e){if(Nn(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function xo(e,t){return e?[...new Set([].concat(e,t))]:t}function A0(e,t){return e?Mi(Object.create(null),e,t):t}function dE(e,t){return e?Nn(e)&&Nn(t)?[...new Set([...e,...t])]:Mi(Object.create(null),s_(e),s_(t??{})):t}function Z6(e,t){if(!e)return t;if(!t)return e;const n=Mi(Object.create(null),e);for(const i in t)n[i]=xo(e[i],t[i]);return n}function a5(){return{app:null,config:{isNativeTag:QD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let W6=0;function q6(e,t){return function(i,o=null){rr(i)||(i=Mi({},i)),o!=null&&!vi(o)&&(o=null);const u=a5(),l=new WeakSet,s=[];let f=!1;const y=u.app={_uid:W6++,_component:i,_props:o,_container:null,_context:u,_instance:null,version:N5,get config(){return u.config},set config(b){},use(b,...x){return l.has(b)||(b&&rr(b.install)?(l.add(b),b.install(y,...x)):rr(b)&&(l.add(b),b(y,...x))),y},mixin(b){return u.mixins.includes(b)||u.mixins.push(b),y},component(b,x){return x?(u.components[b]=x,y):u.components[b]},directive(b,x){return x?(u.directives[b]=x,y):u.directives[b]},mount(b,x,M){if(!f){const A=y._ceVNode||He(i,o);return A.appContext=u,M===!0?M="svg":M===!1&&(M=void 0),x&&t?t(A,b):e(A,b,M),f=!0,y._container=b,b.__vue_app__=y,k_(A.component)}},onUnmount(b){s.push(b)},unmount(){f&&(vu(s,y._instance,16),e(null,y._container),delete y._container.__vue_app__)},provide(b,x){return u.provides[b]=x,y},runWithContext(b){const x=_m;_m=y;try{return b()}finally{_m=x}}};return y}}let _m=null;function zf(e,t){if(na){let n=na.provides;const i=na.parent&&na.parent.provides;i===n&&(n=na.provides=Object.create(i)),n[e]=t}}function ya(e,t,n=!1){const i=na||ia;if(i||_m){const o=_m?_m._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&rr(t)?t.call(i&&i.proxy):t}}function K6(){return!!(na||ia||_m)}const o5={},l5=()=>Object.create(o5),u5=e=>Object.getPrototypeOf(e)===o5;function Y6(e,t,n,i=!1){const o={},u=l5();e.propsDefaults=Object.create(null),c5(e,t,o,u);for(const l in e.propsOptions[0])l in o||(o[l]=void 0);n?e.props=i?o:rM(o):e.type.props?e.props=o:e.props=u,e.attrs=u}function X6(e,t,n,i){const{props:o,attrs:u,vnode:{patchFlag:l}}=e,s=$r(o),[f]=e.propsOptions;let y=!1;if((i||l>0)&&!(l&16)){if(l&8){const b=e.vnode.dynamicProps;for(let x=0;x<b.length;x++){let M=b[x];if(pA(e.emitsOptions,M))continue;const A=t[M];if(f)if(ri(u,M))A!==u[M]&&(u[M]=A,y=!0);else{const k=za(M);o[k]=qC(f,s,k,A,e,!1)}else A!==u[M]&&(u[M]=A,y=!0)}}}else{c5(e,t,o,u)&&(y=!0);let b;for(const x in s)(!t||!ri(t,x)&&((b=rl(x))===x||!ri(t,b)))&&(f?n&&(n[x]!==void 0||n[b]!==void 0)&&(o[x]=qC(f,s,x,void 0,e,!0)):delete o[x]);if(u!==s)for(const x in u)(!t||!ri(t,x))&&(delete u[x],y=!0)}y&&Jh(e.attrs,"set","")}function c5(e,t,n,i){const[o,u]=e.propsOptions;let l=!1,s;if(t)for(let f in t){if(py(f))continue;const y=t[f];let b;o&&ri(o,b=za(f))?!u||!u.includes(b)?n[b]=y:(s||(s={}))[b]=y:pA(e.emitsOptions,f)||(!(f in i)||y!==i[f])&&(i[f]=y,l=!0)}if(u){const f=$r(n),y=s||Hr;for(let b=0;b<u.length;b++){const x=u[b];n[x]=qC(o,f,x,y[x],e,!ri(y,x))}}return l}function qC(e,t,n,i,o,u){const l=e[n];if(l!=null){const s=ri(l,"default");if(s&&i===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&rr(f)){const{propsDefaults:y}=o;if(n in y)i=y[n];else{const b=Em(o);i=y[n]=f.call(null,t),b()}}else i=f;o.ce&&o.ce._setProp(n,i)}l[0]&&(u&&!s?i=!1:l[1]&&(i===""||i===rl(n))&&(i=!0))}return i}const Q6=new WeakMap;function h5(e,t,n=!1){const i=n?Q6:t.propsCache,o=i.get(e);if(o)return o;const u=e.props,l={},s=[];let f=!1;if(!rr(e)){const b=x=>{f=!0;const[M,A]=h5(x,t,!0);Mi(l,M),A&&s.push(...A)};!n&&t.mixins.length&&t.mixins.forEach(b),e.extends&&b(e.extends),e.mixins&&e.mixins.forEach(b)}if(!u&&!f)return vi(e)&&i.set(e,dy),dy;if(Nn(u))for(let b=0;b<u.length;b++){const x=za(u[b]);fE(x)&&(l[x]=Hr)}else if(u)for(const b in u){const x=za(b);if(fE(x)){const M=u[b],A=l[x]=Nn(M)||rr(M)?{type:M}:Mi({},M),k=A.type;let L=!1,F=!0;if(Nn(k))for(let V=0;V<k.length;++V){const O=k[V],N=rr(O)&&O.name;if(N==="Boolean"){L=!0;break}else N==="String"&&(F=!1)}else L=rr(k)&&k.name==="Boolean";A[0]=L,A[1]=F,(L||ri(A,"default"))&&s.push(x)}}const y=[l,s];return vi(e)&&i.set(e,y),y}function fE(e){return e[0]!=="$"&&!py(e)}const d5=e=>e[0]==="_"||e==="$stable",pM=e=>Nn(e)?e.map(nl):[nl(e)],J6=(e,t,n)=>{if(t._n)return t;const i=dt((...o)=>pM(t(...o)),n);return i._c=!1,i},f5=(e,t,n)=>{const i=e._ctx;for(const o in e){if(d5(o))continue;const u=e[o];if(rr(u))t[o]=J6(o,u,i);else if(u!=null){const l=pM(u);t[o]=()=>l}}},p5=(e,t)=>{const n=pM(t);e.slots.default=()=>n},m5=(e,t,n)=>{for(const i in t)(n||i!=="_")&&(e[i]=t[i])},e8=(e,t,n)=>{const i=e.slots=l5();if(e.vnode.shapeFlag&32){const o=t._;o?(m5(i,t,n),n&&u3(i,"_",o,!0)):f5(t,i)}else t&&p5(e,t)},t8=(e,t,n)=>{const{vnode:i,slots:o}=e;let u=!0,l=Hr;if(i.shapeFlag&32){const s=t._;s?n&&s===1?u=!1:m5(o,t,n):(u=!t.$stable,f5(t,o)),l=t}else t&&(p5(e,t),l={default:1});if(u)for(const s in o)!d5(s)&&l[s]==null&&delete o[s]},ta=T5;function g5(e){return v5(e)}function y5(e){return v5(e,d6)}function v5(e,t){const n=rA();n.__VUE__=!0;const{insert:i,remove:o,patchProp:u,createElement:l,createText:s,createComment:f,setText:y,setElementText:b,parentNode:x,nextSibling:M,setScopeId:A=du,insertStaticContent:k}=e,L=(Ie,$,Pe,Oe=null,ye=null,pe=null,Fe=void 0,tt=null,it=!!$.dynamicChildren)=>{if(Ie===$)return;Ie&&!rc(Ie,$)&&(Oe=gt(Ie),Ue(Ie,ye,pe,!0),Ie=null),$.patchFlag===-2&&(it=!1,$.dynamicChildren=null);const{type:Be,ref:Mt,shapeFlag:wt}=$;switch(Be){case Ff:F(Ie,$,Pe,Oe);break;case Vs:V(Ie,$,Pe,Oe);break;case bm:Ie==null&&O($,Pe,Oe,Fe);break;case Gn:Y(Ie,$,Pe,Oe,ye,pe,Fe,tt,it);break;default:wt&1?W(Ie,$,Pe,Oe,ye,pe,Fe,tt,it):wt&6?ce(Ie,$,Pe,Oe,ye,pe,Fe,tt,it):(wt&64||wt&128)&&Be.process(Ie,$,Pe,Oe,ye,pe,Fe,tt,it,Pt)}Mt!=null&&ye&&i_(Mt,Ie&&Ie.ref,pe,$||Ie,!$)},F=(Ie,$,Pe,Oe)=>{if(Ie==null)i($.el=s($.children),Pe,Oe);else{const ye=$.el=Ie.el;$.children!==Ie.children&&y(ye,$.children)}},V=(Ie,$,Pe,Oe)=>{Ie==null?i($.el=f($.children||""),Pe,Oe):$.el=Ie.el},O=(Ie,$,Pe,Oe)=>{[Ie.el,Ie.anchor]=k(Ie.children,$,Pe,Oe,Ie.el,Ie.anchor)},N=({el:Ie,anchor:$},Pe,Oe)=>{let ye;for(;Ie&&Ie!==$;)ye=M(Ie),i(Ie,Pe,Oe),Ie=ye;i($,Pe,Oe)},U=({el:Ie,anchor:$})=>{let Pe;for(;Ie&&Ie!==$;)Pe=M(Ie),o(Ie),Ie=Pe;o($)},W=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it)=>{$.type==="svg"?Fe="svg":$.type==="math"&&(Fe="mathml"),Ie==null?ne($,Pe,Oe,ye,pe,Fe,tt,it):G(Ie,$,ye,pe,Fe,tt,it)},ne=(Ie,$,Pe,Oe,ye,pe,Fe,tt)=>{let it,Be;const{props:Mt,shapeFlag:wt,transition:At,dirs:Ht}=Ie;if(it=Ie.el=l(Ie.type,pe,Mt&&Mt.is,Mt),wt&8?b(it,Ie.children):wt&16&&q(Ie.children,it,null,Oe,ye,z2(Ie,pe),Fe,tt),Ht&&Yc(Ie,null,Oe,"created"),X(it,Ie,Ie.scopeId,Fe,Oe),Mt){for(const fn in Mt)fn!=="value"&&!py(fn)&&u(it,fn,null,Mt[fn],pe,Oe);"value"in Mt&&u(it,"value",null,Mt.value,pe),(Be=Mt.onVnodeBeforeMount)&&el(Be,Oe,Ie)}Ht&&Yc(Ie,null,Oe,"beforeMount");const cn=_5(ye,At);cn&&At.beforeEnter(it),i(it,$,Pe),((Be=Mt&&Mt.onVnodeMounted)||cn||Ht)&&ta(()=>{Be&&el(Be,Oe,Ie),cn&&At.enter(it),Ht&&Yc(Ie,null,Oe,"mounted")},ye)},X=(Ie,$,Pe,Oe,ye)=>{if(Pe&&A(Ie,Pe),Oe)for(let pe=0;pe<Oe.length;pe++)A(Ie,Oe[pe]);if(ye){let pe=ye.subTree;if($===pe||_x(pe.type)&&(pe.ssContent===$||pe.ssFallback===$)){const Fe=ye.vnode;X(Ie,Fe,Fe.scopeId,Fe.slotScopeIds,ye.parent)}}},q=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it=0)=>{for(let Be=it;Be<Ie.length;Be++){const Mt=Ie[Be]=tt?Cf(Ie[Be]):nl(Ie[Be]);L(null,Mt,$,Pe,Oe,ye,pe,Fe,tt)}},G=(Ie,$,Pe,Oe,ye,pe,Fe)=>{const tt=$.el=Ie.el;let{patchFlag:it,dynamicChildren:Be,dirs:Mt}=$;it|=Ie.patchFlag&16;const wt=Ie.props||Hr,At=$.props||Hr;let Ht;if(Pe&&nm(Pe,!1),(Ht=At.onVnodeBeforeUpdate)&&el(Ht,Pe,$,Ie),Mt&&Yc($,Ie,Pe,"beforeUpdate"),Pe&&nm(Pe,!0),(wt.innerHTML&&At.innerHTML==null||wt.textContent&&At.textContent==null)&&b(tt,""),Be?ee(Ie.dynamicChildren,Be,tt,Pe,Oe,z2($,ye),pe):Fe||et(Ie,$,tt,null,Pe,Oe,z2($,ye),pe,!1),it>0){if(it&16)ue(tt,wt,At,Pe,ye);else if(it&2&&wt.class!==At.class&&u(tt,"class",null,At.class,ye),it&4&&u(tt,"style",wt.style,At.style,ye),it&8){const cn=$.dynamicProps;for(let fn=0;fn<cn.length;fn++){const ut=cn[fn],pt=wt[ut],_t=At[ut];(_t!==pt||ut==="value")&&u(tt,ut,pt,_t,ye,Pe)}}it&1&&Ie.children!==$.children&&b(tt,$.children)}else!Fe&&Be==null&&ue(tt,wt,At,Pe,ye);((Ht=At.onVnodeUpdated)||Mt)&&ta(()=>{Ht&&el(Ht,Pe,$,Ie),Mt&&Yc($,Ie,Pe,"updated")},Oe)},ee=(Ie,$,Pe,Oe,ye,pe,Fe)=>{for(let tt=0;tt<$.length;tt++){const it=Ie[tt],Be=$[tt],Mt=it.el&&(it.type===Gn||!rc(it,Be)||it.shapeFlag&70)?x(it.el):Pe;L(it,Be,Mt,null,Oe,ye,pe,Fe,!0)}},ue=(Ie,$,Pe,Oe,ye)=>{if($!==Pe){if($!==Hr)for(const pe in $)!py(pe)&&!(pe in Pe)&&u(Ie,pe,$[pe],null,ye,Oe);for(const pe in Pe){if(py(pe))continue;const Fe=Pe[pe],tt=$[pe];Fe!==tt&&pe!=="value"&&u(Ie,pe,tt,Fe,ye,Oe)}"value"in Pe&&u(Ie,"value",$.value,Pe.value,ye)}},Y=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it)=>{const Be=$.el=Ie?Ie.el:s(""),Mt=$.anchor=Ie?Ie.anchor:s("");let{patchFlag:wt,dynamicChildren:At,slotScopeIds:Ht}=$;Ht&&(tt=tt?tt.concat(Ht):Ht),Ie==null?(i(Be,Pe,Oe),i(Mt,Pe,Oe),q($.children||[],Pe,Mt,ye,pe,Fe,tt,it)):wt>0&&wt&64&&At&&Ie.dynamicChildren?(ee(Ie.dynamicChildren,At,Pe,ye,pe,Fe,tt),($.key!=null||ye&&$===ye.subTree)&&mM(Ie,$,!0)):et(Ie,$,Pe,Mt,ye,pe,Fe,tt,it)},ce=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it)=>{$.slotScopeIds=tt,Ie==null?$.shapeFlag&512?ye.ctx.activate($,Pe,Oe,Fe,it):K($,Pe,Oe,ye,pe,Fe,it):Se(Ie,$,it)},K=(Ie,$,Pe,Oe,ye,pe,Fe)=>{const tt=Ie.component=D5(Ie,Oe,ye);if(T_(Ie)&&(tt.ctx.renderer=Pt),O5(tt,!1,Fe),tt.asyncDep){if(ye&&ye.registerDep(tt,Ve,Fe),!Ie.el){const it=tt.subTree=He(Vs);V(null,it,$,Pe)}}else Ve(tt,Ie,$,Pe,ye,pe,Fe)},Se=(Ie,$,Pe)=>{const Oe=$.component=Ie.component;if(u8(Ie,$,Pe))if(Oe.asyncDep&&!Oe.asyncResolved){Ne(Oe,$,Pe);return}else Oe.next=$,Oe.update();else $.el=Ie.el,Oe.vnode=$},Ve=(Ie,$,Pe,Oe,ye,pe,Fe)=>{const tt=()=>{if(Ie.isMounted){let{next:wt,bu:At,u:Ht,parent:cn,vnode:fn}=Ie;{const Wt=b5(Ie);if(Wt){wt&&(wt.el=fn.el,Ne(Ie,wt,Fe)),Wt.asyncDep.then(()=>{Ie.isUnmounted||tt()});return}}let ut=wt,pt;nm(Ie,!1),wt?(wt.el=fn.el,Ne(Ie,wt,Fe)):wt=fn,At&&my(At),(pt=wt.props&&wt.props.onVnodeBeforeUpdate)&&el(pt,cn,wt,fn),nm(Ie,!0);const _t=$b(Ie),Nt=Ie.subTree;Ie.subTree=_t,L(Nt,_t,x(Nt.el),gt(Nt),Ie,ye,pe),wt.el=_t.el,ut===null&&mA(Ie,_t.el),Ht&&ta(Ht,ye),(pt=wt.props&&wt.props.onVnodeUpdated)&&ta(()=>el(pt,cn,wt,fn),ye)}else{let wt;const{el:At,props:Ht}=$,{bm:cn,m:fn,parent:ut,root:pt,type:_t}=Ie,Nt=Of($);if(nm(Ie,!1),cn&&my(cn),!Nt&&(wt=Ht&&Ht.onVnodeBeforeMount)&&el(wt,ut,$),nm(Ie,!0),At&&on){const Wt=()=>{Ie.subTree=$b(Ie),on(At,Ie.subTree,Ie,ye,null)};Nt&&_t.__asyncHydrate?_t.__asyncHydrate(At,Ie,Wt):Wt()}else{pt.ce&&pt.ce._injectChildStyle(_t);const Wt=Ie.subTree=$b(Ie);L(null,Wt,Pe,Oe,Ie,ye,pe),$.el=Wt.el}if(fn&&ta(fn,ye),!Nt&&(wt=Ht&&Ht.onVnodeMounted)){const Wt=$;ta(()=>el(wt,ut,Wt),ye)}($.shapeFlag&256||ut&&Of(ut.vnode)&&ut.vnode.shapeFlag&256)&&Ie.a&&ta(Ie.a,ye),Ie.isMounted=!0,$=Pe=Oe=null}};Ie.scope.on();const it=Ie.effect=new Q0(tt);Ie.scope.off();const Be=Ie.update=it.run.bind(it),Mt=Ie.job=it.runIfDirty.bind(it);Mt.i=Ie,Mt.id=Ie.uid,it.scheduler=()=>sM(Mt),nm(Ie,!0),Be()},Ne=(Ie,$,Pe)=>{$.component=Ie;const Oe=Ie.vnode.props;Ie.vnode=$,Ie.next=null,X6(Ie,$.props,Oe,Pe),t8(Ie,$.children,Pe),Wf(),nE(Ie),qf()},et=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it=!1)=>{const Be=Ie&&Ie.children,Mt=Ie?Ie.shapeFlag:0,wt=$.children,{patchFlag:At,shapeFlag:Ht}=$;if(At>0){if(At&128){Zt(Be,wt,Pe,Oe,ye,pe,Fe,tt,it);return}else if(At&256){ot(Be,wt,Pe,Oe,ye,pe,Fe,tt,it);return}}Ht&8?(Mt&16&&un(Be,ye,pe),wt!==Be&&b(Pe,wt)):Mt&16?Ht&16?Zt(Be,wt,Pe,Oe,ye,pe,Fe,tt,it):un(Be,ye,pe,!0):(Mt&8&&b(Pe,""),Ht&16&&q(wt,Pe,Oe,ye,pe,Fe,tt,it))},ot=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it)=>{Ie=Ie||dy,$=$||dy;const Be=Ie.length,Mt=$.length,wt=Math.min(Be,Mt);let At;for(At=0;At<wt;At++){const Ht=$[At]=it?Cf($[At]):nl($[At]);L(Ie[At],Ht,Pe,null,ye,pe,Fe,tt,it)}Be>Mt?un(Ie,ye,pe,!0,!1,wt):q($,Pe,Oe,ye,pe,Fe,tt,it,wt)},Zt=(Ie,$,Pe,Oe,ye,pe,Fe,tt,it)=>{let Be=0;const Mt=$.length;let wt=Ie.length-1,At=Mt-1;for(;Be<=wt&&Be<=At;){const Ht=Ie[Be],cn=$[Be]=it?Cf($[Be]):nl($[Be]);if(rc(Ht,cn))L(Ht,cn,Pe,null,ye,pe,Fe,tt,it);else break;Be++}for(;Be<=wt&&Be<=At;){const Ht=Ie[wt],cn=$[At]=it?Cf($[At]):nl($[At]);if(rc(Ht,cn))L(Ht,cn,Pe,null,ye,pe,Fe,tt,it);else break;wt--,At--}if(Be>wt){if(Be<=At){const Ht=At+1,cn=Ht<Mt?$[Ht].el:Oe;for(;Be<=At;)L(null,$[Be]=it?Cf($[Be]):nl($[Be]),Pe,cn,ye,pe,Fe,tt,it),Be++}}else if(Be>At)for(;Be<=wt;)Ue(Ie[Be],ye,pe,!0),Be++;else{const Ht=Be,cn=Be,fn=new Map;for(Be=cn;Be<=At;Be++){const de=$[Be]=it?Cf($[Be]):nl($[Be]);de.key!=null&&fn.set(de.key,Be)}let ut,pt=0;const _t=At-cn+1;let Nt=!1,Wt=0;const wn=new Array(_t);for(Be=0;Be<_t;Be++)wn[Be]=0;for(Be=Ht;Be<=wt;Be++){const de=Ie[Be];if(pt>=_t){Ue(de,ye,pe,!0);continue}let ge;if(de.key!=null)ge=fn.get(de.key);else for(ut=cn;ut<=At;ut++)if(wn[ut-cn]===0&&rc(de,$[ut])){ge=ut;break}ge===void 0?Ue(de,ye,pe,!0):(wn[ge-cn]=Be+1,ge>=Wt?Wt=ge:Nt=!0,L(de,$[ge],Pe,null,ye,pe,Fe,tt,it),pt++)}const Xe=Nt?n8(wn):dy;for(ut=Xe.length-1,Be=_t-1;Be>=0;Be--){const de=cn+Be,ge=$[de],xe=de+1<Mt?$[de+1].el:Oe;wn[Be]===0?L(null,ge,Pe,xe,ye,pe,Fe,tt,it):Nt&&(ut<0||Be!==Xe[ut]?qe(ge,Pe,xe,2):ut--)}}},qe=(Ie,$,Pe,Oe,ye=null)=>{const{el:pe,type:Fe,transition:tt,children:it,shapeFlag:Be}=Ie;if(Be&6){qe(Ie.component.subTree,$,Pe,Oe);return}if(Be&128){Ie.suspense.move($,Pe,Oe);return}if(Be&64){Fe.move(Ie,$,Pe,Pt);return}if(Fe===Gn){i(pe,$,Pe);for(let wt=0;wt<it.length;wt++)qe(it[wt],$,Pe,Oe);i(Ie.anchor,$,Pe);return}if(Fe===bm){N(Ie,$,Pe);return}if(Oe!==2&&Be&1&&tt)if(Oe===0)tt.beforeEnter(pe),i(pe,$,Pe),ta(()=>tt.enter(pe),ye);else{const{leave:wt,delayLeave:At,afterLeave:Ht}=tt,cn=()=>i(pe,$,Pe),fn=()=>{wt(pe,()=>{cn(),Ht&&Ht()})};At?At(pe,cn,fn):fn()}else i(pe,$,Pe)},Ue=(Ie,$,Pe,Oe=!1,ye=!1)=>{const{type:pe,props:Fe,ref:tt,children:it,dynamicChildren:Be,shapeFlag:Mt,patchFlag:wt,dirs:At,cacheIndex:Ht}=Ie;if(wt===-2&&(ye=!1),tt!=null&&i_(tt,null,Pe,Ie,!0),Ht!=null&&($.renderCache[Ht]=void 0),Mt&256){$.ctx.deactivate(Ie);return}const cn=Mt&1&&At,fn=!Of(Ie);let ut;if(fn&&(ut=Fe&&Fe.onVnodeBeforeUnmount)&&el(ut,$,Ie),Mt&6)kt(Ie.component,Pe,Oe);else{if(Mt&128){Ie.suspense.unmount(Pe,Oe);return}cn&&Yc(Ie,null,$,"beforeUnmount"),Mt&64?Ie.type.remove(Ie,$,Pe,Pt,Oe):Be&&!Be.hasOnce&&(pe!==Gn||wt>0&&wt&64)?un(Be,$,Pe,!1,!0):(pe===Gn&&wt&384||!ye&&Mt&16)&&un(it,$,Pe),Oe&&Tt(Ie)}(fn&&(ut=Fe&&Fe.onVnodeUnmounted)||cn)&&ta(()=>{ut&&el(ut,$,Ie),cn&&Yc(Ie,null,$,"unmounted")},Pe)},Tt=Ie=>{const{type:$,el:Pe,anchor:Oe,transition:ye}=Ie;if($===Gn){Bt(Pe,Oe);return}if($===bm){U(Ie);return}const pe=()=>{o(Pe),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(Ie.shapeFlag&1&&ye&&!ye.persisted){const{leave:Fe,delayLeave:tt}=ye,it=()=>Fe(Pe,pe);tt?tt(Ie.el,pe,it):it()}else pe()},Bt=(Ie,$)=>{let Pe;for(;Ie!==$;)Pe=M(Ie),o(Ie),Ie=Pe;o($)},kt=(Ie,$,Pe)=>{const{bum:Oe,scope:ye,job:pe,subTree:Fe,um:tt,m:it,a:Be}=Ie;vx(it),vx(Be),Oe&&my(Oe),ye.stop(),pe&&(pe.flags|=8,Ue(Fe,Ie,$,Pe)),tt&&ta(tt,$),ta(()=>{Ie.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&Ie.asyncDep&&!Ie.asyncResolved&&Ie.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},un=(Ie,$,Pe,Oe=!1,ye=!1,pe=0)=>{for(let Fe=pe;Fe<Ie.length;Fe++)Ue(Ie[Fe],$,Pe,Oe,ye)},gt=Ie=>{if(Ie.shapeFlag&6)return gt(Ie.component.subTree);if(Ie.shapeFlag&128)return Ie.suspense.next();const $=M(Ie.anchor||Ie.el),Pe=$&&$[V3];return Pe?M(Pe):$};let ft=!1;const lt=(Ie,$,Pe)=>{Ie==null?$._vnode&&Ue($._vnode,null,null,!0):L($._vnode||null,Ie,$,null,null,null,Pe),$._vnode=Ie,ft||(ft=!0,nE(),gx(),ft=!1)},Pt={p:L,um:Ue,m:qe,r:Tt,mt:K,mc:q,pc:et,pbc:ee,n:gt,o:e};let Lt,on;return t&&([Lt,on]=t(Pt)),{render:lt,hydrate:Lt,createApp:q6(lt,Lt)}}function z2({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function nm({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function _5(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function mM(e,t,n=!1){const i=e.children,o=t.children;if(Nn(i)&&Nn(o))for(let u=0;u<i.length;u++){const l=i[u];let s=o[u];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=o[u]=Cf(o[u]),s.el=l.el),!n&&s.patchFlag!==-2&&mM(l,s)),s.type===Ff&&(s.el=l.el)}}function n8(e){const t=e.slice(),n=[0];let i,o,u,l,s;const f=e.length;for(i=0;i<f;i++){const y=e[i];if(y!==0){if(o=n[n.length-1],e[o]<y){t[i]=o,n.push(i);continue}for(u=0,l=n.length-1;u<l;)s=u+l>>1,e[n[s]]<y?u=s+1:l=s;y<e[n[u]]&&(u>0&&(t[i]=n[u-1]),n[u]=i)}}for(u=n.length,l=n[u-1];u-- >0;)n[u]=l,l=t[l];return n}function b5(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:b5(t)}function vx(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const x5=Symbol.for("v-scx"),A5=()=>ya(x5);function w5(e,t){return P_(e,null,t)}function r8(e,t){return P_(e,null,{flush:"post"})}function C5(e,t){return P_(e,null,{flush:"sync"})}function hs(e,t,n){return P_(e,t,n)}function P_(e,t,n=Hr){const{immediate:i,deep:o,flush:u,once:l}=n,s=Mi({},n),f=t&&i||!t&&u!=="post";let y;if(Iy){if(u==="sync"){const A=A5();y=A.__watcherHandles||(A.__watcherHandles=[])}else if(!f){const A=()=>{};return A.stop=du,A.resume=du,A.pause=du,A}}const b=na;s.call=(A,k,L)=>vu(A,b,k,L);let x=!1;u==="post"?s.scheduler=A=>{ta(A,b&&b.suspense)}:u!=="sync"&&(x=!0,s.scheduler=(A,k)=>{k?A():sM(A)}),s.augmentJob=A=>{t&&(A.flags|=4),x&&(A.flags|=2,b&&(A.id=b.uid,A.i=b))};const M=KR(e,t,s);return Iy&&(y?y.push(M):f&&M()),M}function i8(e,t,n){const i=this.proxy,o=Oi(e)?e.includes(".")?I5(i,e):()=>i[e]:e.bind(i,i);let u;rr(t)?u=t:(u=t.handler,n=t);const l=Em(this),s=P_(o,u.bind(i),n);return l(),s}function I5(e,t){const n=t.split(".");return()=>{let i=e;for(let o=0;o<n.length&&i;o++)i=i[n[o]];return i}}function Us(e,t,n=Hr){const i=to(),o=za(t),u=rl(t),l=M5(e,o),s=L3((f,y)=>{let b,x=Hr,M;return C5(()=>{const A=e[o];Io(b,A)&&(b=A,y())}),{get(){return f(),n.get?n.get(b):b},set(A){const k=n.set?n.set(A):A;if(!Io(k,b)&&!(x!==Hr&&Io(A,x)))return;const L=i.vnode.props;L&&(t in L||o in L||u in L)&&(`onUpdate:${t}`in L||`onUpdate:${o}`in L||`onUpdate:${u}`in L)||(b=A,y()),i.emit(`update:${t}`,k),Io(A,k)&&Io(A,x)&&!Io(k,M)&&y(),x=A,M=k}}});return s[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?l||Hr:s,done:!1}:{done:!0}}}},s}const M5=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${za(t)}Modifiers`]||e[`${rl(t)}Modifiers`];function s8(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Hr;let o=n;const u=t.startsWith("update:"),l=u&&M5(i,t.slice(7));l&&(l.trim&&(o=n.map(b=>Oi(b)?b.trim():b)),l.number&&(o=n.map(hx)));let s,f=i[s=k0(t)]||i[s=k0(za(t))];!f&&u&&(f=i[s=k0(rl(t))]),f&&vu(f,e,6,o);const y=i[s+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,vu(y,e,6,o)}}function S5(e,t,n=!1){const i=t.emitsCache,o=i.get(e);if(o!==void 0)return o;const u=e.emits;let l={},s=!1;if(!rr(e)){const f=y=>{const b=S5(y,t,!0);b&&(s=!0,Mi(l,b))};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!u&&!s?(vi(e)&&i.set(e,null),null):(Nn(u)?u.forEach(f=>l[f]=null):Mi(l,u),vi(e)&&i.set(e,l),l)}function pA(e,t){return!e||!M_(t)?!1:(t=t.slice(2).replace(/Once$/,""),ri(e,t[0].toLowerCase()+t.slice(1))||ri(e,rl(t))||ri(e,t))}function $b(e){const{type:t,vnode:n,proxy:i,withProxy:o,propsOptions:[u],slots:l,attrs:s,emit:f,render:y,renderCache:b,props:x,data:M,setupState:A,ctx:k,inheritAttrs:L}=e,F=r_(e);let V,O;try{if(n.shapeFlag&4){const U=o||i,W=U;V=nl(y.call(W,U,b,x,A,M,k)),O=s}else{const U=t;V=nl(U.length>1?U(x,{attrs:s,slots:l,emit:f}):U(x,null)),O=t.props?s:o8(s)}}catch(U){z0.length=0,Rm(U,e,1),V=He(Vs)}let N=V;if(O&&L!==!1){const U=Object.keys(O),{shapeFlag:W}=N;U.length&&W&7&&(u&&U.some(qI)&&(O=l8(O,u)),N=ih(N,O,!1,!0))}return n.dirs&&(N=ih(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&sd(N,n.transition),V=N,r_(F),V}function a8(e,t=!0){let n;for(let i=0;i<e.length;i++){const o=e[i];if(ad(o)){if(o.type!==Vs||o.children==="v-if"){if(n)return;n=o}}else return}return n}const o8=e=>{let t;for(const n in e)(n==="class"||n==="style"||M_(n))&&((t||(t={}))[n]=e[n]);return t},l8=(e,t)=>{const n={};for(const i in e)(!qI(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function u8(e,t,n){const{props:i,children:o,component:u}=e,{props:l,children:s,patchFlag:f}=t,y=u.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return i?pE(i,l,y):!!l;if(f&8){const b=t.dynamicProps;for(let x=0;x<b.length;x++){const M=b[x];if(l[M]!==i[M]&&!pA(y,M))return!0}}}else return(o||s)&&(!s||!s.$stable)?!0:i===l?!1:i?l?pE(i,l,y):!0:!!l;return!1}function pE(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let o=0;o<i.length;o++){const u=i[o];if(t[u]!==e[u]&&!pA(n,u))return!0}return!1}function mA({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const _x=e=>e.__isSuspense;let KC=0;const c8={name:"Suspense",__isSuspense:!0,process(e,t,n,i,o,u,l,s,f,y){if(e==null)d8(t,n,i,o,u,l,s,f,y);else{if(u&&u.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}f8(e,t,n,i,o,l,s,f,y)}},hydrate:p8,normalize:m8},h8=c8;function a_(e,t){const n=e.props&&e.props[t];rr(n)&&n()}function d8(e,t,n,i,o,u,l,s,f){const{p:y,o:{createElement:b}}=f,x=b("div"),M=e.suspense=E5(e,o,i,t,x,n,u,l,s,f);y(null,M.pendingBranch=e.ssContent,x,null,i,M,u,l),M.deps>0?(a_(e,"onPending"),a_(e,"onFallback"),y(null,e.ssFallback,t,n,i,null,u,l),yy(M,e.ssFallback)):M.resolve(!1,!0)}function f8(e,t,n,i,o,u,l,s,{p:f,um:y,o:{createElement:b}}){const x=t.suspense=e.suspense;x.vnode=t,t.el=e.el;const M=t.ssContent,A=t.ssFallback,{activeBranch:k,pendingBranch:L,isInFallback:F,isHydrating:V}=x;if(L)x.pendingBranch=M,rc(M,L)?(f(L,M,x.hiddenContainer,null,o,x,u,l,s),x.deps<=0?x.resolve():F&&(V||(f(k,A,n,i,o,null,u,l,s),yy(x,A)))):(x.pendingId=KC++,V?(x.isHydrating=!1,x.activeBranch=L):y(L,o,x),x.deps=0,x.effects.length=0,x.hiddenContainer=b("div"),F?(f(null,M,x.hiddenContainer,null,o,x,u,l,s),x.deps<=0?x.resolve():(f(k,A,n,i,o,null,u,l,s),yy(x,A))):k&&rc(M,k)?(f(k,M,n,i,o,x,u,l,s),x.resolve(!0)):(f(null,M,x.hiddenContainer,null,o,x,u,l,s),x.deps<=0&&x.resolve()));else if(k&&rc(M,k))f(k,M,n,i,o,x,u,l,s),yy(x,M);else if(a_(t,"onPending"),x.pendingBranch=M,M.shapeFlag&512?x.pendingId=M.component.suspenseId:x.pendingId=KC++,f(null,M,x.hiddenContainer,null,o,x,u,l,s),x.deps<=0)x.resolve();else{const{timeout:O,pendingId:N}=x;O>0?setTimeout(()=>{x.pendingId===N&&x.fallback(A)},O):O===0&&x.fallback(A)}}function E5(e,t,n,i,o,u,l,s,f,y,b=!1){const{p:x,m:M,um:A,n:k,o:{parentNode:L,remove:F}}=y;let V;const O=g8(e);O&&t&&t.pendingBranch&&(V=t.pendingId,t.deps++);const N=e.props?dx(e.props.timeout):void 0,U=u,W={vnode:e,parent:t,parentComponent:n,namespace:l,container:i,hiddenContainer:o,deps:0,pendingId:KC++,timeout:typeof N=="number"?N:-1,activeBranch:null,pendingBranch:null,isInFallback:!b,isHydrating:b,isUnmounted:!1,effects:[],resolve(ne=!1,X=!1){const{vnode:q,activeBranch:G,pendingBranch:ee,pendingId:ue,effects:Y,parentComponent:ce,container:K}=W;let Se=!1;W.isHydrating?W.isHydrating=!1:ne||(Se=G&&ee.transition&&ee.transition.mode==="out-in",Se&&(G.transition.afterLeave=()=>{ue===W.pendingId&&(M(ee,K,u===U?k(G):u,0),t_(Y))}),G&&(L(G.el)===K&&(u=k(G)),A(G,ce,W,!0)),Se||M(ee,K,u,0)),yy(W,ee),W.pendingBranch=null,W.isInFallback=!1;let Ve=W.parent,Ne=!1;for(;Ve;){if(Ve.pendingBranch){Ve.effects.push(...Y),Ne=!0;break}Ve=Ve.parent}!Ne&&!Se&&t_(Y),W.effects=[],O&&t&&t.pendingBranch&&V===t.pendingId&&(t.deps--,t.deps===0&&!X&&t.resolve()),a_(q,"onResolve")},fallback(ne){if(!W.pendingBranch)return;const{vnode:X,activeBranch:q,parentComponent:G,container:ee,namespace:ue}=W;a_(X,"onFallback");const Y=k(q),ce=()=>{W.isInFallback&&(x(null,ne,ee,Y,G,null,ue,s,f),yy(W,ne))},K=ne.transition&&ne.transition.mode==="out-in";K&&(q.transition.afterLeave=ce),W.isInFallback=!0,A(q,G,null,!0),K||ce()},move(ne,X,q){W.activeBranch&&M(W.activeBranch,ne,X,q),W.container=ne},next(){return W.activeBranch&&k(W.activeBranch)},registerDep(ne,X,q){const G=!!W.pendingBranch;G&&W.deps++;const ee=ne.vnode.el;ne.asyncDep.catch(ue=>{Rm(ue,ne,0)}).then(ue=>{if(ne.isUnmounted||W.isUnmounted||W.pendingId!==ne.suspenseId)return;ne.asyncResolved=!0;const{vnode:Y}=ne;JC(ne,ue,!1),ee&&(Y.el=ee);const ce=!ee&&ne.subTree.el;X(ne,Y,L(ee||ne.subTree.el),ee?null:k(ne.subTree),W,l,q),ce&&F(ce),mA(ne,Y.el),G&&--W.deps===0&&W.resolve()})},unmount(ne,X){W.isUnmounted=!0,W.activeBranch&&A(W.activeBranch,n,ne,X),W.pendingBranch&&A(W.pendingBranch,n,ne,X)}};return W}function p8(e,t,n,i,o,u,l,s,f){const y=t.suspense=E5(t,i,n,e.parentNode,document.createElement("div"),null,o,u,l,s,!0),b=f(e,y.pendingBranch=t.ssContent,n,y,u,l);return y.deps===0&&y.resolve(!1,!0),b}function m8(e){const{shapeFlag:t,children:n}=e,i=t&32;e.ssContent=mE(i?n.default:n),e.ssFallback=i?mE(n.fallback):He(Vs)}function mE(e){let t;if(rr(e)){const n=Sm&&e._c;n&&(e._d=!1,Ae()),e=e(),n&&(e._d=!0,t=Xa,P5())}return Nn(e)&&(e=a8(e)),e=nl(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(n=>n!==e)),e}function T5(e,t){t&&t.pendingBranch?Nn(e)?t.effects.push(...e):t.effects.push(e):t_(e)}function yy(e,t){e.activeBranch=t;const{vnode:n,parentComponent:i}=e;let o=t.el;for(;!o&&t.component;)t=t.component.subTree,o=t.el;n.el=o,i&&i.subTree===n&&(i.vnode.el=o,mA(i,o))}function g8(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const Gn=Symbol.for("v-fgt"),Ff=Symbol.for("v-txt"),Vs=Symbol.for("v-cmt"),bm=Symbol.for("v-stc"),z0=[];let Xa=null;function Ae(e=!1){z0.push(Xa=e?null:[])}function P5(){z0.pop(),Xa=z0[z0.length-1]||null}let Sm=1;function YC(e,t=!1){Sm+=e,e<0&&Xa&&t&&(Xa.hasOnce=!0)}function k5(e){return e.dynamicChildren=Sm>0?Xa||dy:null,P5(),Sm>0&&Xa&&Xa.push(e),e}function st(e,t,n,i,o,u){return k5(Le(e,t,n,i,o,u,!0))}function $t(e,t,n,i,o){return k5(He(e,t,n,i,o,!0))}function ad(e){return e?e.__v_isVNode===!0:!1}function rc(e,t){return e.type===t.type&&e.key===t.key}function y8(e){}const L5=({key:e})=>e??null,Hb=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Oi(e)||Ii(e)||rr(e)?{i:ia,r:e,k:t,f:!!n}:e:null);function Le(e,t=null,n=null,i=0,o=null,u=e===Gn?0:1,l=!1,s=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&L5(t),ref:t&&Hb(t),scopeId:cA,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:ia};return s?(gM(f,n),u&128&&e.normalize(f)):n&&(f.shapeFlag|=Oi(n)?8:16),Sm>0&&!l&&Xa&&(f.patchFlag>0||u&6)&&f.patchFlag!==32&&Xa.push(f),f}const He=v8;function v8(e,t=null,n=null,i=0,o=null,u=!1){if((!e||e===n5)&&(e=Vs),ad(e)){const s=ih(e,t,!0);return n&&gM(s,n),Sm>0&&!u&&Xa&&(s.shapeFlag&6?Xa[Xa.indexOf(e)]=s:Xa.push(s)),s.patchFlag=-2,s}if(I8(e)&&(e=e.__vccOpts),t){t=zi(t);let{class:s,style:f}=t;s&&!Oi(s)&&(t.class=ei(s)),vi(f)&&(uA(f)&&!Nn(f)&&(f=Mi({},f)),t.style=Yr(f))}const l=Oi(e)?1:_x(e)?128:j3(e)?64:vi(e)?4:rr(e)?2:0;return Le(e,t,n,i,o,l,u,!0)}function zi(e){return e?uA(e)||u5(e)?Mi({},e):e:null}function ih(e,t,n=!1,i=!1){const{props:o,ref:u,patchFlag:l,children:s,transition:f}=e,y=t?ar(o||{},t):o,b={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&L5(y),ref:t&&t.ref?n&&u?Nn(u)?u.concat(Hb(t)):[u,Hb(t)]:Hb(t):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Gn?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ih(e.ssContent),ssFallback:e.ssFallback&&ih(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&i&&sd(b,f.clone(b)),b}function Qi(e=" ",t=0){return He(Ff,null,e,t)}function gA(e,t){const n=He(bm,null,e);return n.staticCount=t,n}function an(e="",t=!1){return t?(Ae(),$t(Vs,null,e)):He(Vs,null,e)}function nl(e){return e==null||typeof e=="boolean"?He(Vs):Nn(e)?He(Gn,null,e.slice()):ad(e)?Cf(e):He(Ff,null,String(e))}function Cf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ih(e)}function gM(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Nn(t))n=16;else if(typeof t=="object")if(i&65){const o=t.default;o&&(o._c&&(o._d=!1),gM(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!u5(t)?t._ctx=ia:o===3&&ia&&(ia.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else rr(t)?(t={default:t,_ctx:ia},n=32):(t=String(t),i&64?(n=16,t=[Qi(t)]):n=8);e.children=t,e.shapeFlag|=n}function ar(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const o in i)if(o==="class")t.class!==i.class&&(t.class=ei([t.class,i.class]));else if(o==="style")t.style=Yr([t.style,i.style]);else if(M_(o)){const u=t[o],l=i[o];l&&u!==l&&!(Nn(u)&&u.includes(l))&&(t[o]=u?[].concat(u,l):l)}else o!==""&&(t[o]=i[o])}return t}function el(e,t,n,i=null){vu(e,t,7,[n,i])}const _8=a5();let b8=0;function D5(e,t,n){const i=e.type,o=(t?t.appContext:e.appContext)||_8,u={uid:b8++,vnode:e,type:i,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new QI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:h5(i,o),emitsOptions:S5(i,o),emit:null,emitted:null,propsDefaults:Hr,inheritAttrs:i.inheritAttrs,ctx:Hr,data:Hr,props:Hr,attrs:Hr,slots:Hr,refs:Hr,setupState:Hr,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=s8.bind(null,u),e.ce&&e.ce(u),u}let na=null;const to=()=>na||ia;let bx,XC;{const e=rA(),t=(n,i)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(i),u=>{o.length>1?o.forEach(l=>l(u)):o[0](u)}};bx=t("__VUE_INSTANCE_SETTERS__",n=>na=n),XC=t("__VUE_SSR_SETTERS__",n=>Iy=n)}const Em=e=>{const t=na;return bx(e),e.scope.on(),()=>{e.scope.off(),bx(t)}},QC=()=>{na&&na.scope.off(),bx(null)};function R5(e){return e.vnode.shapeFlag&4}let Iy=!1;function O5(e,t=!1,n=!1){t&&XC(t);const{props:i,children:o}=e.vnode,u=R5(e);Y6(e,i,u,t),e8(e,o,n);const l=u?x8(e,t):void 0;return t&&XC(!1),l}function x8(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,GC);const{setup:i}=n;if(i){Wf();const o=e.setupContext=i.length>1?F5(e):null,u=Em(e),l=Uy(i,e,0,[e.props,o]),s=YI(l);if(qf(),u(),(s||e.sp)&&!Of(e)&&lM(e),s){if(l.then(QC,QC),t)return l.then(f=>{JC(e,f,t)}).catch(f=>{Rm(f,e,0)});e.asyncDep=l}else JC(e,l,t)}else z5(e,t)}function JC(e,t,n){rr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:vi(t)&&(e.setupState=iM(t)),z5(e,n)}let xx,eI;function A8(e){xx=e,eI=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,P6))}}const w8=()=>!xx;function z5(e,t,n){const i=e.type;if(!e.render){if(!t&&xx&&!i.render){const o=i.template||fM(e).template;if(o){const{isCustomElement:u,compilerOptions:l}=e.appContext.config,{delimiters:s,compilerOptions:f}=i,y=Mi(Mi({isCustomElement:u,delimiters:s},l),f);i.render=xx(o,y)}}e.render=i.render||du,eI&&eI(e)}{const o=Em(e);Wf();try{U6(e)}finally{qf(),o()}}}const C8={get(e,t){return qa(e,"get",""),e[t]}};function F5(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,C8),slots:e.slots,emit:e.emit,expose:t}}function k_(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(iM(T3(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in O0)return O0[n](e)},has(t,n){return n in t||n in O0}})):e.proxy}function tI(e,t=!0){return rr(e)?e.displayName||e.name:e.name||t&&e.__name}function I8(e){return rr(e)&&"__vccOpts"in e}const dn=(e,t)=>GR(e,t,Iy);function So(e,t,n){const i=arguments.length;return i===2?vi(t)&&!Nn(t)?ad(t)?He(e,null,[t]):He(e,t):He(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&ad(n)&&(n=[n]),He(e,t,n))}function M8(){}function S8(e,t,n,i){const o=n[i];if(o&&B5(o,e))return o;const u=t();return u.memo=e.slice(),u.cacheIndex=i,n[i]=u}function B5(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(Io(n[i],t[i]))return!1;return Sm>0&&Xa&&Xa.push(e),!0}const N5="3.5.13",E8=du,T8=e6,P8=qg,k8=N3,L8={createComponentInstance:D5,setupComponent:O5,renderComponentRoot:$b,setCurrentRenderingInstance:r_,isVNode:ad,normalizeVNode:nl,getComponentPublicInstance:k_,ensureValidVNode:dM,pushWarningContext:YR,popWarningContext:XR},D8=L8,R8=null,O8=null,z8=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nI;const gE=typeof window<"u"&&window.trustedTypes;if(gE)try{nI=gE.createPolicy("vue",{createHTML:e=>e})}catch{}const V5=nI?e=>nI.createHTML(e):e=>e,F8="http://www.w3.org/2000/svg",B8="http://www.w3.org/1998/Math/MathML",Qh=typeof document<"u"?document:null,yE=Qh&&Qh.createElement("template"),N8={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const o=t==="svg"?Qh.createElementNS(F8,e):t==="mathml"?Qh.createElementNS(B8,e):n?Qh.createElement(e,{is:n}):Qh.createElement(e);return e==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:e=>Qh.createTextNode(e),createComment:e=>Qh.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qh.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,o,u){const l=n?n.previousSibling:t.lastChild;if(o&&(o===u||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===u||!(o=o.nextSibling)););else{yE.innerHTML=V5(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const s=yE.content;if(i==="svg"||i==="mathml"){const f=s.firstChild;for(;f.firstChild;)s.appendChild(f.firstChild);s.removeChild(f)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},yf="transition",u0="animation",My=Symbol("_vtc"),j5={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},U5=Mi({},oM,j5),V8=e=>(e.displayName="Transition",e.props=U5,e),$5=V8((e,{slots:t})=>So(Z3,H5(e),t)),rm=(e,t=[])=>{Nn(e)?e.forEach(n=>n(...t)):e&&e(...t)},vE=e=>e?Nn(e)?e.some(t=>t.length>1):e.length>1:!1;function H5(e){const t={};for(const Y in e)Y in j5||(t[Y]=e[Y]);if(e.css===!1)return t;const{name:n="v",type:i,duration:o,enterFromClass:u=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:f=u,appearActiveClass:y=l,appearToClass:b=s,leaveFromClass:x=`${n}-leave-from`,leaveActiveClass:M=`${n}-leave-active`,leaveToClass:A=`${n}-leave-to`}=e,k=j8(o),L=k&&k[0],F=k&&k[1],{onBeforeEnter:V,onEnter:O,onEnterCancelled:N,onLeave:U,onLeaveCancelled:W,onBeforeAppear:ne=V,onAppear:X=O,onAppearCancelled:q=N}=t,G=(Y,ce,K,Se)=>{Y._enterCancelled=Se,bf(Y,ce?b:s),bf(Y,ce?y:l),K&&K()},ee=(Y,ce)=>{Y._isLeaving=!1,bf(Y,x),bf(Y,A),bf(Y,M),ce&&ce()},ue=Y=>(ce,K)=>{const Se=Y?X:O,Ve=()=>G(ce,Y,K);rm(Se,[ce,Ve]),_E(()=>{bf(ce,Y?f:u),Wc(ce,Y?b:s),vE(Se)||bE(ce,i,L,Ve)})};return Mi(t,{onBeforeEnter(Y){rm(V,[Y]),Wc(Y,u),Wc(Y,l)},onBeforeAppear(Y){rm(ne,[Y]),Wc(Y,f),Wc(Y,y)},onEnter:ue(!1),onAppear:ue(!0),onLeave(Y,ce){Y._isLeaving=!0;const K=()=>ee(Y,ce);Wc(Y,x),Y._enterCancelled?(Wc(Y,M),rI()):(rI(),Wc(Y,M)),_E(()=>{Y._isLeaving&&(bf(Y,x),Wc(Y,A),vE(U)||bE(Y,i,F,K))}),rm(U,[Y,K])},onEnterCancelled(Y){G(Y,!1,void 0,!0),rm(N,[Y])},onAppearCancelled(Y){G(Y,!0,void 0,!0),rm(q,[Y])},onLeaveCancelled(Y){ee(Y),rm(W,[Y])}})}function j8(e){if(e==null)return null;if(vi(e))return[F2(e.enter),F2(e.leave)];{const t=F2(e);return[t,t]}}function F2(e){return dx(e)}function Wc(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[My]||(e[My]=new Set)).add(t)}function bf(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[My];n&&(n.delete(t),n.size||(e[My]=void 0))}function _E(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let U8=0;function bE(e,t,n,i){const o=e._endId=++U8,u=()=>{o===e._endId&&i()};if(n!=null)return setTimeout(u,n);const{type:l,timeout:s,propCount:f}=G5(e,t);if(!l)return i();const y=l+"end";let b=0;const x=()=>{e.removeEventListener(y,M),u()},M=A=>{A.target===e&&++b>=f&&x()};setTimeout(()=>{b<f&&x()},s+1),e.addEventListener(y,M)}function G5(e,t){const n=window.getComputedStyle(e),i=k=>(n[k]||"").split(", "),o=i(`${yf}Delay`),u=i(`${yf}Duration`),l=xE(o,u),s=i(`${u0}Delay`),f=i(`${u0}Duration`),y=xE(s,f);let b=null,x=0,M=0;t===yf?l>0&&(b=yf,x=l,M=u.length):t===u0?y>0&&(b=u0,x=y,M=f.length):(x=Math.max(l,y),b=x>0?l>y?yf:u0:null,M=b?b===yf?u.length:f.length:0);const A=b===yf&&/\b(transform|all)(,|$)/.test(i(`${yf}Property`).toString());return{type:b,timeout:x,propCount:M,hasTransform:A}}function xE(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>AE(n)+AE(e[i])))}function AE(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function rI(){return document.body.offsetHeight}function $8(e,t,n){const i=e[My];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ax=Symbol("_vod"),Z5=Symbol("_vsh"),yA={beforeMount(e,{value:t},{transition:n}){e[Ax]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):c0(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),c0(e,!0),i.enter(e)):i.leave(e,()=>{c0(e,!1)}):c0(e,t))},beforeUnmount(e,{value:t}){c0(e,t)}};function c0(e,t){e.style.display=t?e[Ax]:"none",e[Z5]=!t}function H8(){yA.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const W5=Symbol("");function G8(e){const t=to();if(!t)return;const n=t.ut=(o=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(u=>wx(u,o))},i=()=>{const o=e(t.proxy);t.ce?wx(t.ce,o):iI(t.subTree,o),n(o)};uM(()=>{t_(i)}),ti(()=>{hs(i,du,{flush:"post"});const o=new MutationObserver(i);o.observe(t.subTree.el.parentNode,{childList:!0}),Ol(()=>o.disconnect())})}function iI(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{iI(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)wx(e.el,t);else if(e.type===Gn)e.children.forEach(n=>iI(n,t));else if(e.type===bm){let{el:n,anchor:i}=e;for(;n&&(wx(n,t),n!==i);)n=n.nextSibling}}function wx(e,t){if(e.nodeType===1){const n=e.style;let i="";for(const o in t)n.setProperty(`--${o}`,t[o]),i+=`--${o}: ${t[o]};`;n[W5]=i}}const Z8=/(^|;)\s*display\s*:/;function W8(e,t,n){const i=e.style,o=Oi(n);let u=!1;if(n&&!o){if(t)if(Oi(t))for(const l of t.split(";")){const s=l.slice(0,l.indexOf(":")).trim();n[s]==null&&Gb(i,s,"")}else for(const l in t)n[l]==null&&Gb(i,l,"");for(const l in n)l==="display"&&(u=!0),Gb(i,l,n[l])}else if(o){if(t!==n){const l=i[W5];l&&(n+=";"+l),i.cssText=n,u=Z8.test(n)}}else t&&e.removeAttribute("style");Ax in e&&(e[Ax]=u?i.display:"",e[Z5]&&(i.display="none"))}const wE=/\s*!important$/;function Gb(e,t,n){if(Nn(n))n.forEach(i=>Gb(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=q8(e,t);wE.test(n)?e.setProperty(rl(i),n.replace(wE,""),"important"):e[i]=n}}const CE=["Webkit","Moz","ms"],B2={};function q8(e,t){const n=B2[t];if(n)return n;let i=za(t);if(i!=="filter"&&i in e)return B2[t]=i;i=S_(i);for(let o=0;o<CE.length;o++){const u=CE[o]+i;if(u in e)return B2[t]=u}return t}const IE="http://www.w3.org/1999/xlink";function ME(e,t,n,i,o,u=hR(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(IE,t.slice(6,t.length)):e.setAttributeNS(IE,t,n):n==null||u&&!c3(n)?e.removeAttribute(t):e.setAttribute(t,u?"":uc(n)?String(n):n)}function SE(e,t,n,i,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?V5(n):n);return}const u=e.tagName;if(t==="value"&&u!=="PROGRESS"&&!u.includes("-")){const s=u==="OPTION"?e.getAttribute("value")||"":e.value,f=n==null?e.type==="checkbox"?"on":"":String(n);(s!==f||!("_value"in e))&&(e.value=f),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=c3(n):n==null&&s==="string"?(n="",l=!0):s==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(o||t)}function td(e,t,n,i){e.addEventListener(t,n,i)}function K8(e,t,n,i){e.removeEventListener(t,n,i)}const EE=Symbol("_vei");function Y8(e,t,n,i,o=null){const u=e[EE]||(e[EE]={}),l=u[t];if(i&&l)l.value=i;else{const[s,f]=X8(t);if(i){const y=u[t]=eO(i,o);td(e,s,y,f)}else l&&(K8(e,s,l,f),u[t]=void 0)}}const TE=/(?:Once|Passive|Capture)$/;function X8(e){let t;if(TE.test(e)){t={};let i;for(;i=e.match(TE);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):rl(e.slice(2)),t]}let N2=0;const Q8=Promise.resolve(),J8=()=>N2||(Q8.then(()=>N2=0),N2=Date.now());function eO(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;vu(tO(i,n.value),t,5,[i])};return n.value=e,n.attached=J8(),n}function tO(e,t){if(Nn(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>o=>!o._stopped&&i&&i(o))}else return t}const PE=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,nO=(e,t,n,i,o,u)=>{const l=o==="svg";t==="class"?$8(e,i,l):t==="style"?W8(e,n,i):M_(t)?qI(t)||Y8(e,t,n,i,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rO(e,t,i,l))?(SE(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ME(e,t,i,l,u,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Oi(i))?SE(e,za(t),i,u,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),ME(e,t,i,l))};function rO(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&PE(t)&&rr(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return PE(t)&&Oi(n)?!1:t in e}const kE={};/*! #__NO_SIDE_EFFECTS__ */function q5(e,t,n){const i=Dn(e,t);tA(i)&&Mi(i,t);class o extends vA{constructor(l){super(i,l,n)}}return o.def=i,o}/*! #__NO_SIDE_EFFECTS__ */const iO=(e,t)=>q5(e,t,ik),sO=typeof HTMLElement<"u"?HTMLElement:class{};class vA extends sO{constructor(t,n={},i=Ix){super(),this._def=t,this._props=n,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==Ix?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof vA){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,Rl(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(i=>{for(const o of i)this._setAttr(o.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(i,o=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:u,styles:l}=i;let s;if(u&&!Nn(u))for(const f in u){const y=u[f];(y===Number||y&&y.type===Number)&&(f in this._props&&(this._props[f]=dx(this._props[f])),(s||(s=Object.create(null)))[za(f)]=!0)}this._numberProps=s,o&&this._resolveProps(i),this.shadowRoot&&this._applyStyles(l),this._mount(i)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(i=>t(this._def=i,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const i in n)ri(this,i)||Object.defineProperty(this,i,{get:()=>se(n[i])})}_resolveProps(t){const{props:n}=t,i=Nn(n)?n:Object.keys(n||{});for(const o of Object.keys(this))o[0]!=="_"&&i.includes(o)&&this._setProp(o,this[o]);for(const o of i.map(za))Object.defineProperty(this,o,{get(){return this._getProp(o)},set(u){this._setProp(o,u,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const n=this.hasAttribute(t);let i=n?this.getAttribute(t):kE;const o=za(t);n&&this._numberProps&&this._numberProps[o]&&(i=dx(i)),this._setProp(o,i,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,n,i=!0,o=!1){if(n!==this._props[t]&&(n===kE?delete this._props[t]:(this._props[t]=n,t==="key"&&this._app&&(this._app._ceVNode.key=n)),o&&this._instance&&this._update(),i)){const u=this._ob;u&&u.disconnect(),n===!0?this.setAttribute(rl(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(rl(t),n+""):n||this.removeAttribute(rl(t)),u&&u.observe(this,{attributes:!0})}}_update(){rk(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const n=He(this._def,Mi(t,this._props));return this._instance||(n.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const o=(u,l)=>{this.dispatchEvent(new CustomEvent(u,tA(l[0])?Mi({detail:l},l[0]):{detail:l}))};i.emit=(u,...l)=>{o(u,l),rl(u)!==u&&o(rl(u),l)},this._setParent()}),n}_applyStyles(t,n){if(!t)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const i=this._nonce;for(let o=t.length-1;o>=0;o--){const u=document.createElement("style");i&&u.setAttribute("nonce",i),u.textContent=t[o],this.shadowRoot.prepend(u)}}_parseSlots(){const t=this._slots={};let n;for(;n=this.firstChild;){const i=n.nodeType===1&&n.getAttribute("slot")||"default";(t[i]||(t[i]=[])).push(n),this.removeChild(n)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let i=0;i<t.length;i++){const o=t[i],u=o.getAttribute("name")||"default",l=this._slots[u],s=o.parentNode;if(l)for(const f of l){if(n&&f.nodeType===1){const y=n+"-s",b=document.createTreeWalker(f,1);f.setAttribute(y,"");let x;for(;x=b.nextNode();)x.setAttribute(y,"")}s.insertBefore(f,o)}else for(;o.firstChild;)s.insertBefore(o.firstChild,o);s.removeChild(o)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function K5(e){const t=to(),n=t&&t.ce;return n||null}function aO(){const e=K5();return e&&e.shadowRoot}function oO(e="$style"){{const t=to();if(!t)return Hr;const n=t.type.__cssModules;if(!n)return Hr;const i=n[e];return i||Hr}}const Y5=new WeakMap,X5=new WeakMap,Cx=Symbol("_moveCb"),LE=Symbol("_enterCb"),lO=e=>(delete e.props.mode,e),uO=lO({name:"TransitionGroup",props:Mi({},U5,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=to(),i=aM();let o,u;return fA(()=>{if(!o.length)return;const l=e.moveClass||`${e.name||"v"}-move`;if(!pO(o[0].el,n.vnode.el,l))return;o.forEach(hO),o.forEach(dO);const s=o.filter(fO);rI(),s.forEach(f=>{const y=f.el,b=y.style;Wc(y,l),b.transform=b.webkitTransform=b.transitionDuration="";const x=y[Cx]=M=>{M&&M.target!==y||(!M||/transform$/.test(M.propertyName))&&(y.removeEventListener("transitionend",x),y[Cx]=null,bf(y,l))};y.addEventListener("transitionend",x)})}),()=>{const l=$r(e),s=H5(l);let f=l.tag||Gn;if(o=[],u)for(let y=0;y<u.length;y++){const b=u[y];b.el&&b.el instanceof Element&&(o.push(b),sd(b,Cy(b,s,i,n)),Y5.set(b,b.el.getBoundingClientRect()))}u=t.default?hA(t.default()):[];for(let y=0;y<u.length;y++){const b=u[y];b.key!=null&&sd(b,Cy(b,s,i,n))}return He(f,null,u)}}}),cO=uO;function hO(e){const t=e.el;t[Cx]&&t[Cx](),t[LE]&&t[LE]()}function dO(e){X5.set(e,e.el.getBoundingClientRect())}function fO(e){const t=Y5.get(e),n=X5.get(e),i=t.left-n.left,o=t.top-n.top;if(i||o){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${i}px,${o}px)`,u.transitionDuration="0s",e}}function pO(e,t,n){const i=e.cloneNode(),o=e[My];o&&o.forEach(s=>{s.split(/\s+/).forEach(f=>f&&i.classList.remove(f))}),n.split(/\s+/).forEach(s=>s&&i.classList.add(s)),i.style.display="none";const u=t.nodeType===1?t:t.parentNode;u.appendChild(i);const{hasTransform:l}=G5(i);return u.removeChild(i),l}const Uf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Nn(t)?n=>my(t,n):t};function mO(e){e.target.composing=!0}function DE(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const fu=Symbol("_assign"),sh={created(e,{modifiers:{lazy:t,trim:n,number:i}},o){e[fu]=Uf(o);const u=i||o.props&&o.props.type==="number";td(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n&&(s=s.trim()),u&&(s=hx(s)),e[fu](s)}),n&&td(e,"change",()=>{e.value=e.value.trim()}),t||(td(e,"compositionstart",mO),td(e,"compositionend",DE),td(e,"change",DE))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:o,number:u}},l){if(e[fu]=Uf(l),e.composing)return;const s=(u||e.type==="number")&&!/^0\d/.test(e.value)?hx(e.value):e.value,f=t??"";s!==f&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||o&&e.value.trim()===f)||(e.value=f))}},_A={deep:!0,created(e,t,n){e[fu]=Uf(n),td(e,"change",()=>{const i=e._modelValue,o=Sy(e),u=e.checked,l=e[fu];if(Nn(i)){const s=iA(i,o),f=s!==-1;if(u&&!f)l(i.concat(o));else if(!u&&f){const y=[...i];y.splice(s,1),l(y)}}else if(Dm(i)){const s=new Set(i);u?s.add(o):s.delete(o),l(s)}else l(Q5(e,u))})},mounted:RE,beforeUpdate(e,t,n){e[fu]=Uf(n),RE(e,t,n)}};function RE(e,{value:t,oldValue:n},i){e._modelValue=t;let o;if(Nn(t))o=iA(t,i.props.value)>-1;else if(Dm(t))o=t.has(i.props.value);else{if(t===n)return;o=Vf(t,Q5(e,!0))}e.checked!==o&&(e.checked=o)}const yM={created(e,{value:t},n){e.checked=Vf(t,n.props.value),e[fu]=Uf(n),td(e,"change",()=>{e[fu](Sy(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[fu]=Uf(i),t!==n&&(e.checked=Vf(t,i.props.value))}},bA={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const o=Dm(t);td(e,"change",()=>{const u=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?hx(Sy(l)):Sy(l));e[fu](e.multiple?o?new Set(u):u:u[0]),e._assigning=!0,Rl(()=>{e._assigning=!1})}),e[fu]=Uf(i)},mounted(e,{value:t}){OE(e,t)},beforeUpdate(e,t,n){e[fu]=Uf(n)},updated(e,{value:t}){e._assigning||OE(e,t)}};function OE(e,t){const n=e.multiple,i=Nn(t);if(!(n&&!i&&!Dm(t))){for(let o=0,u=e.options.length;o<u;o++){const l=e.options[o],s=Sy(l);if(n)if(i){const f=typeof s;f==="string"||f==="number"?l.selected=t.some(y=>String(y)===String(s)):l.selected=iA(t,s)>-1}else l.selected=t.has(s);else if(Vf(Sy(l),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Sy(e){return"_value"in e?e._value:e.value}function Q5(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const vM={created(e,t,n){Ab(e,t,n,null,"created")},mounted(e,t,n){Ab(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Ab(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Ab(e,t,n,i,"updated")}};function J5(e,t){switch(e){case"SELECT":return bA;case"TEXTAREA":return sh;default:switch(t){case"checkbox":return _A;case"radio":return yM;default:return sh}}}function Ab(e,t,n,i,o){const l=J5(e.tagName,n.props&&n.props.type)[o];l&&l(e,t,n,i)}function gO(){sh.getSSRProps=({value:e})=>({value:e}),yM.getSSRProps=({value:e},t)=>{if(t.props&&Vf(t.props.value,e))return{checked:!0}},_A.getSSRProps=({value:e},t)=>{if(Nn(e)){if(t.props&&iA(e,t.props.value)>-1)return{checked:!0}}else if(Dm(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},vM.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const n=J5(t.type.toUpperCase(),t.props&&t.props.type);if(n.getSSRProps)return n.getSSRProps(e,t)}}const yO=["ctrl","shift","alt","meta"],vO={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>yO.some(n=>e[`${n}Key`]&&!t.includes(n))},Rr=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(o,...u)=>{for(let l=0;l<t.length;l++){const s=vO[t[l]];if(s&&s(o,t))return}return e(o,...u)})},_O={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},bO=(e,t)=>{const n=e._withKeys||(e._withKeys={}),i=t.join(".");return n[i]||(n[i]=o=>{if(!("key"in o))return;const u=rl(o.key);if(t.some(l=>l===u||_O[l]===u))return e(o)})},ek=Mi({patchProp:nO},N8);let F0,zE=!1;function tk(){return F0||(F0=g5(ek))}function nk(){return F0=zE?F0:y5(ek),zE=!0,F0}const rk=(...e)=>{tk().render(...e)},xO=(...e)=>{nk().hydrate(...e)},Ix=(...e)=>{const t=tk().createApp(...e),{mount:n}=t;return t.mount=i=>{const o=ak(i);if(!o)return;const u=t._component;!rr(u)&&!u.render&&!u.template&&(u.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const l=n(o,!1,sk(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},t},ik=(...e)=>{const t=nk().createApp(...e),{mount:n}=t;return t.mount=i=>{const o=ak(i);if(o)return n(o,!0,sk(o))},t};function sk(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ak(e){return Oi(e)?document.querySelector(e):e}let FE=!1;const AO=()=>{FE||(FE=!0,gO(),H8())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const wO=()=>{},CO=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:Z3,BaseTransitionPropsValidators:oM,Comment:Vs,DeprecationTypes:z8,EffectScope:QI,ErrorCodes:JR,ErrorTypeStrings:T8,Fragment:Gn,KeepAlive:C6,ReactiveEffect:Q0,Static:bm,Suspense:h8,Teleport:$C,Text:Ff,TrackOpTypes:ZR,Transition:$5,TransitionGroup:cO,TriggerOpTypes:WR,VueElement:vA,assertNumber:QR,callWithAsyncErrorHandling:vu,callWithErrorHandling:Uy,camelize:za,capitalize:S_,cloneVNode:ih,compatUtils:O8,compile:wO,computed:dn,createApp:Ix,createBlock:$t,createCommentVNode:an,createElementBlock:st,createElementVNode:Le,createHydrationRenderer:y5,createPropsRestProxy:V6,createRenderer:g5,createSSRApp:ik,createSlots:E6,createStaticVNode:gA,createTextVNode:Qi,createVNode:He,customRef:L3,defineAsyncComponent:A6,defineComponent:Dn,defineCustomElement:q5,defineEmits:L6,defineExpose:D6,defineModel:z6,defineOptions:R6,defineProps:k6,defineSSRCustomElement:iO,defineSlots:O6,devtools:P8,effect:mR,effectScope:fR,getCurrentInstance:to,getCurrentScope:JI,getCurrentWatcher:qR,getTransitionRawChildren:hA,guardReactiveProps:zi,h:So,handleError:Rm,hasInjectionContext:K6,hydrate:xO,hydrateOnIdle:g6,hydrateOnInteraction:b6,hydrateOnMediaQuery:_6,hydrateOnVisible:v6,initCustomFormatter:M8,initDirectivesForSSR:AO,inject:ya,isMemoSame:B5,isProxy:uA,isReactive:Rf,isReadonly:jf,isRef:Ii,isRuntimeOnly:w8,isShallow:Pl,isVNode:ad,markRaw:T3,mergeDefaults:N6,mergeModels:Ui,mergeProps:ar,nextTick:Rl,normalizeClass:ei,normalizeProps:$i,normalizeStyle:Yr,onActivated:q3,onBeforeMount:X3,onBeforeUnmount:uh,onBeforeUpdate:uM,onDeactivated:K3,onErrorCaptured:t5,onMounted:ti,onRenderTracked:e5,onRenderTriggered:J3,onScopeDispose:f3,onServerPrefetch:Q3,onUnmounted:Ol,onUpdated:fA,onWatcherCleanup:R3,openBlock:Ae,popScopeId:i6,provide:zf,proxyRefs:iM,pushScopeId:r6,queuePostFlushCb:t_,reactive:yu,readonly:E_,ref:Qt,registerRuntimeCompiler:A8,render:rk,renderList:ii,renderSlot:In,resolveComponent:Eo,resolveDirective:S6,resolveDynamicComponent:Ls,resolveFilter:R8,resolveTransitionHooks:Cy,setBlockTracking:YC,setDevtoolsHook:k8,setTransitionHooks:sd,shallowReactive:rM,shallowReadonly:OR,shallowRef:Dl,ssrContextKey:x5,ssrUtils:D8,stop:gR,toDisplayString:gn,toHandlerKey:k0,toHandlers:T6,toRaw:$r,toRef:$R,toRefs:VR,toValue:k3,transformVNodeArgs:y8,triggerRef:FR,unref:se,useAttrs:B6,useCssModule:oO,useCssVars:G8,useHost:K5,useId:l6,useModel:Us,useSSRContext:A5,useShadowRoot:aO,useSlots:r5,useTemplateRef:u6,useTransitionState:aM,vModelCheckbox:_A,vModelDynamic:vM,vModelRadio:yM,vModelSelect:bA,vModelText:sh,vShow:yA,version:N5,warn:E8,watch:hs,watchEffect:w5,watchPostEffect:r8,watchSyncEffect:C5,withAsyncContext:j6,withCtx:dt,withDefaults:F6,withDirectives:kl,withKeys:bO,withMemo:S8,withModifiers:Rr,withScopeId:s6},Symbol.toStringTag,{value:"Module"}));/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Kg=typeof document<"u";function ok(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function IO(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ok(e.default)}const hi=Object.assign;function V2(e,t){const n={};for(const i in t){const o=t[i];n[i]=cc(o)?o.map(e):e(o)}return n}const B0=()=>{},cc=Array.isArray,lk=/#/g,MO=/&/g,SO=/\//g,EO=/=/g,TO=/\?/g,uk=/\+/g,PO=/%5B/g,kO=/%5D/g,ck=/%5E/g,LO=/%60/g,hk=/%7B/g,DO=/%7C/g,dk=/%7D/g,RO=/%20/g;function _M(e){return encodeURI(""+e).replace(DO,"|").replace(PO,"[").replace(kO,"]")}function OO(e){return _M(e).replace(hk,"{").replace(dk,"}").replace(ck,"^")}function sI(e){return _M(e).replace(uk,"%2B").replace(RO,"+").replace(lk,"%23").replace(MO,"%26").replace(LO,"`").replace(hk,"{").replace(dk,"}").replace(ck,"^")}function zO(e){return sI(e).replace(EO,"%3D")}function FO(e){return _M(e).replace(lk,"%23").replace(TO,"%3F")}function BO(e){return e==null?"":FO(e).replace(SO,"%2F")}function o_(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const NO=/\/$/,VO=e=>e.replace(NO,"");function j2(e,t,n="/"){let i,o={},u="",l="";const s=t.indexOf("#");let f=t.indexOf("?");return s<f&&s>=0&&(f=-1),f>-1&&(i=t.slice(0,f),u=t.slice(f+1,s>-1?s:t.length),o=e(u)),s>-1&&(i=i||t.slice(0,s),l=t.slice(s,t.length)),i=HO(i??t,n),{fullPath:i+(u&&"?")+u+l,path:i,query:o,hash:o_(l)}}function jO(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function BE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function UO(e,t,n){const i=t.matched.length-1,o=n.matched.length-1;return i>-1&&i===o&&Ey(t.matched[i],n.matched[o])&&fk(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ey(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function fk(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!$O(e[n],t[n]))return!1;return!0}function $O(e,t){return cc(e)?NE(e,t):cc(t)?NE(t,e):e===t}function NE(e,t){return cc(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function HO(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let u=n.length-1,l,s;for(l=0;l<i.length;l++)if(s=i[l],s!==".")if(s==="..")u>1&&u--;else break;return n.slice(0,u).join("/")+"/"+i.slice(l).join("/")}const vf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var l_;(function(e){e.pop="pop",e.push="push"})(l_||(l_={}));var N0;(function(e){e.back="back",e.forward="forward",e.unknown=""})(N0||(N0={}));function GO(e){if(!e)if(Kg){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),VO(e)}const ZO=/^[^#]+#/;function WO(e,t){return e.replace(ZO,"#")+t}function qO(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const xA=()=>({left:window.scrollX,top:window.scrollY});function KO(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=qO(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function VE(e,t){return(history.state?history.state.position-t:-1)+e}const aI=new Map;function YO(e,t){aI.set(e,t)}function XO(e){const t=aI.get(e);return aI.delete(e),t}let QO=()=>location.protocol+"//"+location.host;function pk(e,t){const{pathname:n,search:i,hash:o}=t,u=e.indexOf("#");if(u>-1){let s=o.includes(e.slice(u))?e.slice(u).length:1,f=o.slice(s);return f[0]!=="/"&&(f="/"+f),BE(f,"")}return BE(n,e)+i+o}function JO(e,t,n,i){let o=[],u=[],l=null;const s=({state:M})=>{const A=pk(e,location),k=n.value,L=t.value;let F=0;if(M){if(n.value=A,t.value=M,l&&l===k){l=null;return}F=L?M.position-L.position:0}else i(A);o.forEach(V=>{V(n.value,k,{delta:F,type:l_.pop,direction:F?F>0?N0.forward:N0.back:N0.unknown})})};function f(){l=n.value}function y(M){o.push(M);const A=()=>{const k=o.indexOf(M);k>-1&&o.splice(k,1)};return u.push(A),A}function b(){const{history:M}=window;M.state&&M.replaceState(hi({},M.state,{scroll:xA()}),"")}function x(){for(const M of u)M();u=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",b,{passive:!0}),{pauseListeners:f,listen:y,destroy:x}}function jE(e,t,n,i=!1,o=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:o?xA():null}}function ez(e){const{history:t,location:n}=window,i={value:pk(e,n)},o={value:t.state};o.value||u(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function u(f,y,b){const x=e.indexOf("#"),M=x>-1?(n.host&&document.querySelector("base")?e:e.slice(x))+f:QO()+e+f;try{t[b?"replaceState":"pushState"](y,"",M),o.value=y}catch(A){console.error(A),n[b?"replace":"assign"](M)}}function l(f,y){const b=hi({},t.state,jE(o.value.back,f,o.value.forward,!0),y,{position:o.value.position});u(f,b,!0),i.value=f}function s(f,y){const b=hi({},o.value,t.state,{forward:f,scroll:xA()});u(b.current,b,!0);const x=hi({},jE(i.value,f,null),{position:b.position+1},y);u(f,x,!1),i.value=f}return{location:i,state:o,push:s,replace:l}}function tz(e){e=GO(e);const t=ez(e),n=JO(e,t.state,t.location,t.replace);function i(u,l=!0){l||n.pauseListeners(),history.go(u)}const o=hi({location:"",base:e,go:i,createHref:WO.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function nz(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),tz(e)}function rz(e){return typeof e=="string"||e&&typeof e=="object"}function mk(e){return typeof e=="string"||typeof e=="symbol"}const gk=Symbol("");var UE;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(UE||(UE={}));function Ty(e,t){return hi(new Error,{type:e,[gk]:!0},t)}function qh(e,t){return e instanceof Error&&gk in e&&(t==null||!!(e.type&t))}const $E="[^/]+?",iz={sensitive:!1,strict:!1,start:!0,end:!0},sz=/[.+*?^${}()[\]/\\]/g;function az(e,t){const n=hi({},iz,t),i=[];let o=n.start?"^":"";const u=[];for(const y of e){const b=y.length?[]:[90];n.strict&&!y.length&&(o+="/");for(let x=0;x<y.length;x++){const M=y[x];let A=40+(n.sensitive?.25:0);if(M.type===0)x||(o+="/"),o+=M.value.replace(sz,"\\$&"),A+=40;else if(M.type===1){const{value:k,repeatable:L,optional:F,regexp:V}=M;u.push({name:k,repeatable:L,optional:F});const O=V||$E;if(O!==$E){A+=10;try{new RegExp(`(${O})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${k}" (${O}): `+U.message)}}let N=L?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;x||(N=F&&y.length<2?`(?:/${N})`:"/"+N),F&&(N+="?"),o+=N,A+=20,F&&(A+=-8),L&&(A+=-20),O===".*"&&(A+=-50)}b.push(A)}i.push(b)}if(n.strict&&n.end){const y=i.length-1;i[y][i[y].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,n.sensitive?"":"i");function s(y){const b=y.match(l),x={};if(!b)return null;for(let M=1;M<b.length;M++){const A=b[M]||"",k=u[M-1];x[k.name]=A&&k.repeatable?A.split("/"):A}return x}function f(y){let b="",x=!1;for(const M of e){(!x||!b.endsWith("/"))&&(b+="/"),x=!1;for(const A of M)if(A.type===0)b+=A.value;else if(A.type===1){const{value:k,repeatable:L,optional:F}=A,V=k in y?y[k]:"";if(cc(V)&&!L)throw new Error(`Provided param "${k}" is an array but it is not repeatable (* or + modifiers)`);const O=cc(V)?V.join("/"):V;if(!O)if(F)M.length<2&&(b.endsWith("/")?b=b.slice(0,-1):x=!0);else throw new Error(`Missing required param "${k}"`);b+=O}}return b||"/"}return{re:l,score:i,keys:u,parse:s,stringify:f}}function oz(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function yk(e,t){let n=0;const i=e.score,o=t.score;for(;n<i.length&&n<o.length;){const u=oz(i[n],o[n]);if(u)return u;n++}if(Math.abs(o.length-i.length)===1){if(HE(i))return 1;if(HE(o))return-1}return o.length-i.length}function HE(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const lz={type:0,value:""},uz=/[a-zA-Z0-9_]/;function cz(e){if(!e)return[[]];if(e==="/")return[[lz]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(A){throw new Error(`ERR (${n})/"${y}": ${A}`)}let n=0,i=n;const o=[];let u;function l(){u&&o.push(u),u=[]}let s=0,f,y="",b="";function x(){y&&(n===0?u.push({type:0,value:y}):n===1||n===2||n===3?(u.length>1&&(f==="*"||f==="+")&&t(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),u.push({type:1,value:y,regexp:b,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):t("Invalid state to consume buffer"),y="")}function M(){y+=f}for(;s<e.length;){if(f=e[s++],f==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:f==="/"?(y&&x(),l()):f===":"?(x(),n=1):M();break;case 4:M(),n=i;break;case 1:f==="("?n=2:uz.test(f)?M():(x(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&s--);break;case 2:f===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+f:n=3:b+=f;break;case 3:x(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&s--,b="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${y}"`),x(),l(),o}function hz(e,t,n){const i=az(cz(e.path),n),o=hi(i,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function dz(e,t){const n=[],i=new Map;t=qE({strict:!1,end:!0,sensitive:!1},t);function o(x){return i.get(x)}function u(x,M,A){const k=!A,L=ZE(x);L.aliasOf=A&&A.record;const F=qE(t,x),V=[L];if("alias"in x){const U=typeof x.alias=="string"?[x.alias]:x.alias;for(const W of U)V.push(ZE(hi({},L,{components:A?A.record.components:L.components,path:W,aliasOf:A?A.record:L})))}let O,N;for(const U of V){const{path:W}=U;if(M&&W[0]!=="/"){const ne=M.record.path,X=ne[ne.length-1]==="/"?"":"/";U.path=M.record.path+(W&&X+W)}if(O=hz(U,M,F),A?A.alias.push(O):(N=N||O,N!==O&&N.alias.push(O),k&&x.name&&!WE(O)&&l(x.name)),vk(O)&&f(O),L.children){const ne=L.children;for(let X=0;X<ne.length;X++)u(ne[X],O,A&&A.children[X])}A=A||O}return N?()=>{l(N)}:B0}function l(x){if(mk(x)){const M=i.get(x);M&&(i.delete(x),n.splice(n.indexOf(M),1),M.children.forEach(l),M.alias.forEach(l))}else{const M=n.indexOf(x);M>-1&&(n.splice(M,1),x.record.name&&i.delete(x.record.name),x.children.forEach(l),x.alias.forEach(l))}}function s(){return n}function f(x){const M=mz(x,n);n.splice(M,0,x),x.record.name&&!WE(x)&&i.set(x.record.name,x)}function y(x,M){let A,k={},L,F;if("name"in x&&x.name){if(A=i.get(x.name),!A)throw Ty(1,{location:x});F=A.record.name,k=hi(GE(M.params,A.keys.filter(N=>!N.optional).concat(A.parent?A.parent.keys.filter(N=>N.optional):[]).map(N=>N.name)),x.params&&GE(x.params,A.keys.map(N=>N.name))),L=A.stringify(k)}else if(x.path!=null)L=x.path,A=n.find(N=>N.re.test(L)),A&&(k=A.parse(L),F=A.record.name);else{if(A=M.name?i.get(M.name):n.find(N=>N.re.test(M.path)),!A)throw Ty(1,{location:x,currentLocation:M});F=A.record.name,k=hi({},M.params,x.params),L=A.stringify(k)}const V=[];let O=A;for(;O;)V.unshift(O.record),O=O.parent;return{name:F,path:L,params:k,matched:V,meta:pz(V)}}e.forEach(x=>u(x));function b(){n.length=0,i.clear()}return{addRoute:u,resolve:y,removeRoute:l,clearRoutes:b,getRoutes:s,getRecordMatcher:o}}function GE(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function ZE(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:fz(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function fz(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function WE(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function pz(e){return e.reduce((t,n)=>hi(t,n.meta),{})}function qE(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function mz(e,t){let n=0,i=t.length;for(;n!==i;){const u=n+i>>1;yk(e,t[u])<0?i=u:n=u+1}const o=gz(e);return o&&(i=t.lastIndexOf(o,i-1)),i}function gz(e){let t=e;for(;t=t.parent;)if(vk(t)&&yk(e,t)===0)return t}function vk({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function yz(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<i.length;++o){const u=i[o].replace(uk," "),l=u.indexOf("="),s=o_(l<0?u:u.slice(0,l)),f=l<0?null:o_(u.slice(l+1));if(s in t){let y=t[s];cc(y)||(y=t[s]=[y]),y.push(f)}else t[s]=f}return t}function KE(e){let t="";for(let n in e){const i=e[n];if(n=zO(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(cc(i)?i.map(u=>u&&sI(u)):[i&&sI(i)]).forEach(u=>{u!==void 0&&(t+=(t.length?"&":"")+n,u!=null&&(t+="="+u))})}return t}function vz(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=cc(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return t}const _z=Symbol(""),YE=Symbol(""),bM=Symbol(""),_k=Symbol(""),oI=Symbol("");function h0(){let e=[];function t(i){return e.push(i),()=>{const o=e.indexOf(i);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function If(e,t,n,i,o,u=l=>l()){const l=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((s,f)=>{const y=M=>{M===!1?f(Ty(4,{from:n,to:t})):M instanceof Error?f(M):rz(M)?f(Ty(2,{from:t,to:M})):(l&&i.enterCallbacks[o]===l&&typeof M=="function"&&l.push(M),s())},b=u(()=>e.call(i&&i.instances[o],t,n,y));let x=Promise.resolve(b);e.length<3&&(x=x.then(y)),x.catch(M=>f(M))})}function U2(e,t,n,i,o=u=>u()){const u=[];for(const l of e)for(const s in l.components){let f=l.components[s];if(!(t!=="beforeRouteEnter"&&!l.instances[s]))if(ok(f)){const b=(f.__vccOpts||f)[t];b&&u.push(If(b,n,i,l,s,o))}else{let y=f();u.push(()=>y.then(b=>{if(!b)throw new Error(`Couldn't resolve component "${s}" at "${l.path}"`);const x=IO(b)?b.default:b;l.mods[s]=b,l.components[s]=x;const A=(x.__vccOpts||x)[t];return A&&If(A,n,i,l,s,o)()}))}}return u}function XE(e){const t=ya(bM),n=ya(_k),i=dn(()=>{const f=se(e.to);return t.resolve(f)}),o=dn(()=>{const{matched:f}=i.value,{length:y}=f,b=f[y-1],x=n.matched;if(!b||!x.length)return-1;const M=x.findIndex(Ey.bind(null,b));if(M>-1)return M;const A=QE(f[y-2]);return y>1&&QE(b)===A&&x[x.length-1].path!==A?x.findIndex(Ey.bind(null,f[y-2])):M}),u=dn(()=>o.value>-1&&Cz(n.params,i.value.params)),l=dn(()=>o.value>-1&&o.value===n.matched.length-1&&fk(n.params,i.value.params));function s(f={}){if(wz(f)){const y=t[se(e.replace)?"replace":"push"](se(e.to)).catch(B0);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>y),y}return Promise.resolve()}return{route:i,href:dn(()=>i.value.href),isActive:u,isExactActive:l,navigate:s}}function bz(e){return e.length===1?e[0]:e}const xz=Dn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:XE,setup(e,{slots:t}){const n=yu(XE(e)),{options:i}=ya(bM),o=dn(()=>({[JE(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[JE(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const u=t.default&&bz(t.default(n));return e.custom?u:So("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},u)}}}),Az=xz;function wz(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Cz(e,t){for(const n in t){const i=t[n],o=e[n];if(typeof i=="string"){if(i!==o)return!1}else if(!cc(o)||o.length!==i.length||i.some((u,l)=>u!==o[l]))return!1}return!0}function QE(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const JE=(e,t,n)=>e??t??n,Iz=Dn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=ya(oI),o=dn(()=>e.route||i.value),u=ya(YE,0),l=dn(()=>{let y=se(u);const{matched:b}=o.value;let x;for(;(x=b[y])&&!x.components;)y++;return y}),s=dn(()=>o.value.matched[l.value]);zf(YE,dn(()=>l.value+1)),zf(_z,s),zf(oI,o);const f=Qt();return hs(()=>[f.value,s.value,e.name],([y,b,x],[M,A,k])=>{b&&(b.instances[x]=y,A&&A!==b&&y&&y===M&&(b.leaveGuards.size||(b.leaveGuards=A.leaveGuards),b.updateGuards.size||(b.updateGuards=A.updateGuards))),y&&b&&(!A||!Ey(b,A)||!M)&&(b.enterCallbacks[x]||[]).forEach(L=>L(y))},{flush:"post"}),()=>{const y=o.value,b=e.name,x=s.value,M=x&&x.components[b];if(!M)return eT(n.default,{Component:M,route:y});const A=x.props[b],k=A?A===!0?y.params:typeof A=="function"?A(y):A:null,F=So(M,hi({},k,t,{onVnodeUnmounted:V=>{V.component.isUnmounted&&(x.instances[b]=null)},ref:f}));return eT(n.default,{Component:F,route:y})||F}}});function eT(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const bk=Iz;function Mz(e){const t=dz(e.routes,e),n=e.parseQuery||yz,i=e.stringifyQuery||KE,o=e.history,u=h0(),l=h0(),s=h0(),f=Dl(vf);let y=vf;Kg&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=V2.bind(null,gt=>""+gt),x=V2.bind(null,BO),M=V2.bind(null,o_);function A(gt,ft){let lt,Pt;return mk(gt)?(lt=t.getRecordMatcher(gt),Pt=ft):Pt=gt,t.addRoute(Pt,lt)}function k(gt){const ft=t.getRecordMatcher(gt);ft&&t.removeRoute(ft)}function L(){return t.getRoutes().map(gt=>gt.record)}function F(gt){return!!t.getRecordMatcher(gt)}function V(gt,ft){if(ft=hi({},ft||f.value),typeof gt=="string"){const $=j2(n,gt,ft.path),Pe=t.resolve({path:$.path},ft),Oe=o.createHref($.fullPath);return hi($,Pe,{params:M(Pe.params),hash:o_($.hash),redirectedFrom:void 0,href:Oe})}let lt;if(gt.path!=null)lt=hi({},gt,{path:j2(n,gt.path,ft.path).path});else{const $=hi({},gt.params);for(const Pe in $)$[Pe]==null&&delete $[Pe];lt=hi({},gt,{params:x($)}),ft.params=x(ft.params)}const Pt=t.resolve(lt,ft),Lt=gt.hash||"";Pt.params=b(M(Pt.params));const on=jO(i,hi({},gt,{hash:OO(Lt),path:Pt.path})),Ie=o.createHref(on);return hi({fullPath:on,hash:Lt,query:i===KE?vz(gt.query):gt.query||{}},Pt,{redirectedFrom:void 0,href:Ie})}function O(gt){return typeof gt=="string"?j2(n,gt,f.value.path):hi({},gt)}function N(gt,ft){if(y!==gt)return Ty(8,{from:ft,to:gt})}function U(gt){return X(gt)}function W(gt){return U(hi(O(gt),{replace:!0}))}function ne(gt){const ft=gt.matched[gt.matched.length-1];if(ft&&ft.redirect){const{redirect:lt}=ft;let Pt=typeof lt=="function"?lt(gt):lt;return typeof Pt=="string"&&(Pt=Pt.includes("?")||Pt.includes("#")?Pt=O(Pt):{path:Pt},Pt.params={}),hi({query:gt.query,hash:gt.hash,params:Pt.path!=null?{}:gt.params},Pt)}}function X(gt,ft){const lt=y=V(gt),Pt=f.value,Lt=gt.state,on=gt.force,Ie=gt.replace===!0,$=ne(lt);if($)return X(hi(O($),{state:typeof $=="object"?hi({},Lt,$.state):Lt,force:on,replace:Ie}),ft||lt);const Pe=lt;Pe.redirectedFrom=ft;let Oe;return!on&&UO(i,Pt,lt)&&(Oe=Ty(16,{to:Pe,from:Pt}),qe(Pt,Pt,!0,!1)),(Oe?Promise.resolve(Oe):ee(Pe,Pt)).catch(ye=>qh(ye)?qh(ye,2)?ye:Zt(ye):et(ye,Pe,Pt)).then(ye=>{if(ye){if(qh(ye,2))return X(hi({replace:Ie},O(ye.to),{state:typeof ye.to=="object"?hi({},Lt,ye.to.state):Lt,force:on}),ft||Pe)}else ye=Y(Pe,Pt,!0,Ie,Lt);return ue(Pe,Pt,ye),ye})}function q(gt,ft){const lt=N(gt,ft);return lt?Promise.reject(lt):Promise.resolve()}function G(gt){const ft=Bt.values().next().value;return ft&&typeof ft.runWithContext=="function"?ft.runWithContext(gt):gt()}function ee(gt,ft){let lt;const[Pt,Lt,on]=Sz(gt,ft);lt=U2(Pt.reverse(),"beforeRouteLeave",gt,ft);for(const $ of Pt)$.leaveGuards.forEach(Pe=>{lt.push(If(Pe,gt,ft))});const Ie=q.bind(null,gt,ft);return lt.push(Ie),un(lt).then(()=>{lt=[];for(const $ of u.list())lt.push(If($,gt,ft));return lt.push(Ie),un(lt)}).then(()=>{lt=U2(Lt,"beforeRouteUpdate",gt,ft);for(const $ of Lt)$.updateGuards.forEach(Pe=>{lt.push(If(Pe,gt,ft))});return lt.push(Ie),un(lt)}).then(()=>{lt=[];for(const $ of on)if($.beforeEnter)if(cc($.beforeEnter))for(const Pe of $.beforeEnter)lt.push(If(Pe,gt,ft));else lt.push(If($.beforeEnter,gt,ft));return lt.push(Ie),un(lt)}).then(()=>(gt.matched.forEach($=>$.enterCallbacks={}),lt=U2(on,"beforeRouteEnter",gt,ft,G),lt.push(Ie),un(lt))).then(()=>{lt=[];for(const $ of l.list())lt.push(If($,gt,ft));return lt.push(Ie),un(lt)}).catch($=>qh($,8)?$:Promise.reject($))}function ue(gt,ft,lt){s.list().forEach(Pt=>G(()=>Pt(gt,ft,lt)))}function Y(gt,ft,lt,Pt,Lt){const on=N(gt,ft);if(on)return on;const Ie=ft===vf,$=Kg?history.state:{};lt&&(Pt||Ie?o.replace(gt.fullPath,hi({scroll:Ie&&$&&$.scroll},Lt)):o.push(gt.fullPath,Lt)),f.value=gt,qe(gt,ft,lt,Ie),Zt()}let ce;function K(){ce||(ce=o.listen((gt,ft,lt)=>{if(!kt.listening)return;const Pt=V(gt),Lt=ne(Pt);if(Lt){X(hi(Lt,{replace:!0,force:!0}),Pt).catch(B0);return}y=Pt;const on=f.value;Kg&&YO(VE(on.fullPath,lt.delta),xA()),ee(Pt,on).catch(Ie=>qh(Ie,12)?Ie:qh(Ie,2)?(X(hi(O(Ie.to),{force:!0}),Pt).then($=>{qh($,20)&&!lt.delta&&lt.type===l_.pop&&o.go(-1,!1)}).catch(B0),Promise.reject()):(lt.delta&&o.go(-lt.delta,!1),et(Ie,Pt,on))).then(Ie=>{Ie=Ie||Y(Pt,on,!1),Ie&&(lt.delta&&!qh(Ie,8)?o.go(-lt.delta,!1):lt.type===l_.pop&&qh(Ie,20)&&o.go(-1,!1)),ue(Pt,on,Ie)}).catch(B0)}))}let Se=h0(),Ve=h0(),Ne;function et(gt,ft,lt){Zt(gt);const Pt=Ve.list();return Pt.length?Pt.forEach(Lt=>Lt(gt,ft,lt)):console.error(gt),Promise.reject(gt)}function ot(){return Ne&&f.value!==vf?Promise.resolve():new Promise((gt,ft)=>{Se.add([gt,ft])})}function Zt(gt){return Ne||(Ne=!gt,K(),Se.list().forEach(([ft,lt])=>gt?lt(gt):ft()),Se.reset()),gt}function qe(gt,ft,lt,Pt){const{scrollBehavior:Lt}=e;if(!Kg||!Lt)return Promise.resolve();const on=!lt&&XO(VE(gt.fullPath,0))||(Pt||!lt)&&history.state&&history.state.scroll||null;return Rl().then(()=>Lt(gt,ft,on)).then(Ie=>Ie&&KO(Ie)).catch(Ie=>et(Ie,gt,ft))}const Ue=gt=>o.go(gt);let Tt;const Bt=new Set,kt={currentRoute:f,listening:!0,addRoute:A,removeRoute:k,clearRoutes:t.clearRoutes,hasRoute:F,getRoutes:L,resolve:V,options:e,push:U,replace:W,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:u.add,beforeResolve:l.add,afterEach:s.add,onError:Ve.add,isReady:ot,install(gt){const ft=this;gt.component("RouterLink",Az),gt.component("RouterView",bk),gt.config.globalProperties.$router=ft,Object.defineProperty(gt.config.globalProperties,"$route",{enumerable:!0,get:()=>se(f)}),Kg&&!Tt&&f.value===vf&&(Tt=!0,U(o.location).catch(Lt=>{}));const lt={};for(const Lt in vf)Object.defineProperty(lt,Lt,{get:()=>f.value[Lt],enumerable:!0});gt.provide(bM,ft),gt.provide(_k,rM(lt)),gt.provide(oI,f);const Pt=gt.unmount;Bt.add(gt),gt.unmount=function(){Bt.delete(gt),Bt.size<1&&(y=vf,ce&&ce(),ce=null,f.value=vf,Tt=!1,Ne=!1),Pt()}}};function un(gt){return gt.reduce((ft,lt)=>ft.then(()=>G(lt)),Promise.resolve())}return kt}function Sz(e,t){const n=[],i=[],o=[],u=Math.max(t.matched.length,e.matched.length);for(let l=0;l<u;l++){const s=t.matched[l];s&&(e.matched.find(y=>Ey(y,s))?i.push(s):n.push(s));const f=e.matched[l];f&&(t.matched.find(y=>Ey(y,f))||o.push(f))}return[n,i,o]}function $y(e){return JI()?(f3(e),!0):!1}function Ez(){const e=new Set,t=o=>{e.delete(o)};return{on:o=>{e.add(o);const u=()=>t(o);return $y(u),{off:u}},off:t,trigger:(...o)=>Promise.all(Array.from(e).map(u=>u(...o)))}}class ry{constructor(){if(this.state={},typeof window<"u"){const t=window;t.$_hungpv_store??(t.$_hungpv_store={}),this.state=t.$_hungpv_store}else this.state={}}static getInstance(){return ry.instance||(ry.instance=new ry),ry.instance}getState(){return this.state}updateWindowStore(){if(typeof window<"u"){const t=window;t.$_hungpv_store=this.state}}get(t){return this.updateWindowStore(),this.state[t]}set(t,n){return this.state[t]=n,this.updateWindowStore(),n}has(t){return t in this.state}delete(t){return delete this.state[t]}}function Tz(e,t){const n=ry.getInstance();return n.get(e)??n.set(e,t)}function Pz(e,t){return n=>Object.keys(e).reduce((i,o)=>{const l=typeof e[o]=="object"&&e[o]!=null&&!Array.isArray(e[o])?e[o]:{type:e[o]};return n&&o in n?i[o]={...l,default:n[o]}:i[o]=l,t&&!i[o].source&&(i[o].source=t),i},{})}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function xk(e){return typeof e>"u"||e===null}function kz(e){return typeof e=="object"&&e!==null}function Lz(e){return Array.isArray(e)?e:xk(e)?[]:[e]}function Dz(e,t){var n,i,o,u;if(t)for(u=Object.keys(t),n=0,i=u.length;n<i;n+=1)o=u[n],e[o]=t[o];return e}function Rz(e,t){var n="",i;for(i=0;i<t;i+=1)n+=e;return n}function Oz(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var zz=xk,Fz=kz,Bz=Lz,Nz=Rz,Vz=Oz,jz=Dz,xM={isNothing:zz,isObject:Fz,toArray:Bz,repeat:Nz,isNegativeZero:Vz,extend:jz};function Ak(e,t){var n="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+=`

`+e.mark.snippet),i+" "+n):i}function u_(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=Ak(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}u_.prototype=Object.create(Error.prototype);u_.prototype.constructor=u_;u_.prototype.toString=function(t){return this.name+": "+Ak(this,t)};var cm=u_,Uz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$z=["scalar","sequence","mapping"];function Hz(e){var t={};return e!==null&&Object.keys(e).forEach(function(n){e[n].forEach(function(i){t[String(i)]=n})}),t}function Gz(e,t){if(t=t||{},Object.keys(t).forEach(function(n){if(Uz.indexOf(n)===-1)throw new cm('Unknown option "'+n+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(n){return n},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=Hz(t.styleAliases||null),$z.indexOf(this.kind)===-1)throw new cm('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Qa=Gz;function tT(e,t){var n=[];return e[t].forEach(function(i){var o=n.length;n.forEach(function(u,l){u.tag===i.tag&&u.kind===i.kind&&u.multi===i.multi&&(o=l)}),n[o]=i}),n}function Zz(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,n;function i(o){o.multi?(e.multi[o.kind].push(o),e.multi.fallback.push(o)):e[o.kind][o.tag]=e.fallback[o.tag]=o}for(t=0,n=arguments.length;t<n;t+=1)arguments[t].forEach(i);return e}function lI(e){return this.extend(e)}lI.prototype.extend=function(t){var n=[],i=[];if(t instanceof Qa)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(n=n.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new cm("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(u){if(!(u instanceof Qa))throw new cm("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(u.loadKind&&u.loadKind!=="scalar")throw new cm("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(u.multi)throw new cm("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(u){if(!(u instanceof Qa))throw new cm("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(lI.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=tT(o,"implicit"),o.compiledExplicit=tT(o,"explicit"),o.compiledTypeMap=Zz(o.compiledImplicit,o.compiledExplicit),o};var Wz=lI,qz=new Qa("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Kz=new Qa("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Yz=new Qa("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Xz=new Wz({explicit:[qz,Kz,Yz]});function Qz(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function Jz(){return null}function eF(e){return e===null}var tF=new Qa("tag:yaml.org,2002:null",{kind:"scalar",resolve:Qz,construct:Jz,predicate:eF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function nF(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function rF(e){return e==="true"||e==="True"||e==="TRUE"}function iF(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var sF=new Qa("tag:yaml.org,2002:bool",{kind:"scalar",resolve:nF,construct:rF,predicate:iF,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function aF(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function oF(e){return 48<=e&&e<=55}function lF(e){return 48<=e&&e<=57}function uF(e){if(e===null)return!1;var t=e.length,n=0,i=!1,o;if(!t)return!1;if(o=e[n],(o==="-"||o==="+")&&(o=e[++n]),o==="0"){if(n+1===t)return!0;if(o=e[++n],o==="b"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;i=!0}return i&&o!=="_"}if(o==="x"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!aF(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}if(o==="o"){for(n++;n<t;n++)if(o=e[n],o!=="_"){if(!oF(e.charCodeAt(n)))return!1;i=!0}return i&&o!=="_"}}if(o==="_")return!1;for(;n<t;n++)if(o=e[n],o!=="_"){if(!lF(e.charCodeAt(n)))return!1;i=!0}return!(!i||o==="_")}function cF(e){var t=e,n=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return n*parseInt(t.slice(2),2);if(t[1]==="x")return n*parseInt(t.slice(2),16);if(t[1]==="o")return n*parseInt(t.slice(2),8)}return n*parseInt(t,10)}function hF(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!xM.isNegativeZero(e)}var dF=new Qa("tag:yaml.org,2002:int",{kind:"scalar",resolve:uF,construct:cF,predicate:hF,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),fF=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function pF(e){return!(e===null||!fF.test(e)||e[e.length-1]==="_")}function mF(e){var t,n;return t=e.replace(/_/g,"").toLowerCase(),n=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:n*parseFloat(t,10)}var gF=/^[-+]?[0-9]+e/;function yF(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(xM.isNegativeZero(e))return"-0.0";return n=e.toString(10),gF.test(n)?n.replace("e",".e"):n}function vF(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||xM.isNegativeZero(e))}var _F=new Qa("tag:yaml.org,2002:float",{kind:"scalar",resolve:pF,construct:mF,predicate:vF,represent:yF,defaultStyle:"lowercase"}),bF=Xz.extend({implicit:[tF,sF,dF,_F]}),xF=bF,wk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ck=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function AF(e){return e===null?!1:wk.exec(e)!==null||Ck.exec(e)!==null}function wF(e){var t,n,i,o,u,l,s,f=0,y=null,b,x,M;if(t=wk.exec(e),t===null&&(t=Ck.exec(e)),t===null)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,o=+t[3],!t[4])return new Date(Date.UTC(n,i,o));if(u=+t[4],l=+t[5],s=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(b=+t[10],x=+(t[11]||0),y=(b*60+x)*6e4,t[9]==="-"&&(y=-y)),M=new Date(Date.UTC(n,i,o,u,l,s,f)),y&&M.setTime(M.getTime()-y),M}function CF(e){return e.toISOString()}var IF=new Qa("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:AF,construct:wF,instanceOf:Date,represent:CF});function MF(e){return e==="<<"||e===null}var SF=new Qa("tag:yaml.org,2002:merge",{kind:"scalar",resolve:MF}),AM=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function EF(e){if(e===null)return!1;var t,n,i=0,o=e.length,u=AM;for(n=0;n<o;n++)if(t=u.indexOf(e.charAt(n)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function TF(e){var t,n,i=e.replace(/[\r\n=]/g,""),o=i.length,u=AM,l=0,s=[];for(t=0;t<o;t++)t%4===0&&t&&(s.push(l>>16&255),s.push(l>>8&255),s.push(l&255)),l=l<<6|u.indexOf(i.charAt(t));return n=o%4*6,n===0?(s.push(l>>16&255),s.push(l>>8&255),s.push(l&255)):n===18?(s.push(l>>10&255),s.push(l>>2&255)):n===12&&s.push(l>>4&255),new Uint8Array(s)}function PF(e){var t="",n=0,i,o,u=e.length,l=AM;for(i=0;i<u;i++)i%3===0&&i&&(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]),n=(n<<8)+e[i];return o=u%3,o===0?(t+=l[n>>18&63],t+=l[n>>12&63],t+=l[n>>6&63],t+=l[n&63]):o===2?(t+=l[n>>10&63],t+=l[n>>4&63],t+=l[n<<2&63],t+=l[64]):o===1&&(t+=l[n>>2&63],t+=l[n<<4&63],t+=l[64],t+=l[64]),t}function kF(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var LF=new Qa("tag:yaml.org,2002:binary",{kind:"scalar",resolve:EF,construct:TF,predicate:kF,represent:PF}),DF=Object.prototype.hasOwnProperty,RF=Object.prototype.toString;function OF(e){if(e===null)return!0;var t=[],n,i,o,u,l,s=e;for(n=0,i=s.length;n<i;n+=1){if(o=s[n],l=!1,RF.call(o)!=="[object Object]")return!1;for(u in o)if(DF.call(o,u))if(!l)l=!0;else return!1;if(!l)return!1;if(t.indexOf(u)===-1)t.push(u);else return!1}return!0}function zF(e){return e!==null?e:[]}var FF=new Qa("tag:yaml.org,2002:omap",{kind:"sequence",resolve:OF,construct:zF}),BF=Object.prototype.toString;function NF(e){if(e===null)return!0;var t,n,i,o,u,l=e;for(u=new Array(l.length),t=0,n=l.length;t<n;t+=1){if(i=l[t],BF.call(i)!=="[object Object]"||(o=Object.keys(i),o.length!==1))return!1;u[t]=[o[0],i[o[0]]]}return!0}function VF(e){if(e===null)return[];var t,n,i,o,u,l=e;for(u=new Array(l.length),t=0,n=l.length;t<n;t+=1)i=l[t],o=Object.keys(i),u[t]=[o[0],i[o[0]]];return u}var jF=new Qa("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:NF,construct:VF}),UF=Object.prototype.hasOwnProperty;function $F(e){if(e===null)return!0;var t,n=e;for(t in n)if(UF.call(n,t)&&n[t]!==null)return!1;return!0}function HF(e){return e!==null?e:{}}var GF=new Qa("tag:yaml.org,2002:set",{kind:"mapping",resolve:$F,construct:HF});xF.extend({implicit:[IF,SF],explicit:[LF,FF,jF,GF]});function nT(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}var ZF=new Array(256),WF=new Array(256);for(var Bg=0;Bg<256;Bg++)ZF[Bg]=nT(Bg)?1:0,WF[Bg]=nT(Bg);function Tm(e){return typeof e=="function"?e():se(e)}function c_(e){return JSON.parse(JSON.stringify(e))}const Hy=typeof window<"u"&&typeof document<"u",qF=e=>e!=null,KF=Object.prototype.toString,YF=e=>KF.call(e)==="[object Object]",Zb=()=>{},XF=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),QF=JF();function JF(){var e,t;return Hy&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const hc=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))};function Ik(e){return to()}function eB(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const i=t;t=void 0,i&&await i},n}function tB(e,t){var u;if(typeof e=="number")return e+t;const n=((u=e.match(/^-?\d+\.?\d*/))==null?void 0:u[0])||"",i=e.slice(n.length),o=Number.parseFloat(n)+t;return Number.isNaN(o)?e:o+i}function nB(e,t){Ik()&&Ol(e,t)}function pm(e){const t=Tm(e);return(t==null?void 0:t.$el)??t}function rB(e,t,n={}){const{immediate:i=!0}=n,o=Qt(!1);let u=null;function l(){u&&(clearTimeout(u),u=null)}function s(){o.value=!1,l()}function f(...y){l(),o.value=!0,u=setTimeout(()=>{o.value=!1,u=null,e(...y)},k3(t))}return i&&(o.value=!0,Hy&&f()),$y(s),{isPending:E_(o),start:f,stop:s}}function iB(e,t=!0,n){Ik()?ti(e,n):t?e():Rl(e)}const AA=Hy?window:void 0,Mk=Hy?window.document:void 0,wM=Hy?window.navigator:void 0;function sc(...e){let t,n,i,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,o]=e,t=AA):[t,n,i,o]=e,!t)return Zb;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const u=[],l=()=>{u.forEach(b=>b()),u.length=0},s=(b,x,M,A)=>(b.addEventListener(x,M,A),()=>b.removeEventListener(x,M,A)),f=hs(()=>[pm(t),Tm(o)],([b,x])=>{if(l(),!b)return;const M=YF(x)?{...x}:x;u.push(...n.flatMap(A=>i.map(k=>s(b,A,k,M))))},{immediate:!0,flush:"post"}),y=()=>{f(),l()};return $y(y),y}let rT=!1;function sB(e,t,n={}){const{window:i=AA,ignore:o=[],capture:u=!0,detectIframe:l=!1}=n;if(!i)return Zb;QF&&!rT&&(rT=!0,Array.from(i.document.body.children).forEach(M=>M.addEventListener("click",Zb)),i.document.documentElement.addEventListener("click",Zb));let s=!0;const f=M=>o.some(A=>{if(typeof A=="string")return Array.from(i.document.querySelectorAll(A)).some(k=>k===M.target||M.composedPath().includes(k));{const k=pm(A);return k&&(M.target===k||M.composedPath().includes(k))}}),b=[sc(i,"click",M=>{const A=pm(e);if(!(!A||A===M.target||M.composedPath().includes(A))){if(M.detail===0&&(s=!f(M)),!s){s=!0;return}t(M)}},{passive:!0,capture:u}),sc(i,"pointerdown",M=>{const A=pm(e);s=!f(M)&&!!(A&&!M.composedPath().includes(A))},{passive:!0}),l&&sc(i,"blur",M=>{setTimeout(()=>{var k;const A=pm(e);((k=i.document.activeElement)==null?void 0:k.tagName)==="IFRAME"&&!(A!=null&&A.contains(i.document.activeElement))&&t(M)},0)})].filter(Boolean);return()=>b.forEach(M=>M())}function aB(){const e=Qt(!1),t=to();return t&&ti(()=>{e.value=!0},t),e}function L_(e){const t=aB();return dn(()=>(t.value,!!e()))}function d0(e,t={}){const{window:n=AA}=t,i=L_(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let o;const u=Qt(!1),l=y=>{u.value=y.matches},s=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",l):o.removeListener(l))},f=w5(()=>{i.value&&(s(),o=n.matchMedia(Tm(e)),"addEventListener"in o?o.addEventListener("change",l):o.addListener(l),u.value=o.matches)});return $y(()=>{f(),s(),o=void 0}),u}function Sk(e,t={}){function n(b,x){let M=Tm(e[Tm(b)]);return x!=null&&(M=tB(M,x)),typeof M=="number"&&(M=`${M}px`),M}const{window:i=AA,strategy:o="min-width"}=t;function u(b){return i?i.matchMedia(b).matches:!1}const l=b=>d0(()=>`(min-width: ${n(b)})`,t),s=b=>d0(()=>`(max-width: ${n(b)})`,t),f=Object.keys(e).reduce((b,x)=>(Object.defineProperty(b,x,{get:()=>o==="min-width"?l(x):s(x),enumerable:!0,configurable:!0}),b),{});function y(){const b=Object.keys(e).map(x=>[x,l(x)]);return dn(()=>b.filter(([,x])=>x.value).map(([x])=>x))}return Object.assign(f,{greaterOrEqual:l,smallerOrEqual:s,greater(b){return d0(()=>`(min-width: ${n(b,.1)})`,t)},smaller(b){return d0(()=>`(max-width: ${n(b,-.1)})`,t)},between(b,x){return d0(()=>`(min-width: ${n(b)}) and (max-width: ${n(x,-.1)})`,t)},isGreater(b){return u(`(min-width: ${n(b,.1)})`)},isGreaterOrEqual(b){return u(`(min-width: ${n(b)})`)},isSmaller(b){return u(`(max-width: ${n(b,-.1)})`)},isSmallerOrEqual(b){return u(`(max-width: ${n(b)})`)},isInBetween(b,x){return u(`(min-width: ${n(b)}) and (max-width: ${n(x,-.1)})`)},current:y,active(){const b=y();return dn(()=>b.value.length===0?"":b.value[b.value.length-1])}})}function iT(e,t={}){const{controls:n=!1,navigator:i=wM}=t,o=L_(()=>i&&"permissions"in i);let u;const l=typeof e=="string"?{name:e}:e,s=Qt(),f=()=>{u&&(s.value=u.state)},y=eB(async()=>{if(o.value){if(!u)try{u=await i.permissions.query(l),sc(u,"change",f),f()}catch{s.value="prompt"}return u}});return y(),n?{state:s,isSupported:o,query:y}:s}function oB(e={}){const{navigator:t=wM,read:n=!1,source:i,copiedDuring:o=1500,legacy:u=!0}=e,l=L_(()=>t&&"clipboard"in t),s=iT("clipboard-read"),f=iT("clipboard-write"),y=dn(()=>l.value||u),b=Qt(""),x=Qt(!1),M=rB(()=>x.value=!1,o);function A(){l.value&&V(s.value)?t.clipboard.readText().then(O=>{b.value=O}):b.value=F()}y.value&&n&&sc(["copy","cut"],A);async function k(O=Tm(i)){y.value&&O!=null&&(l.value&&V(f.value)?await t.clipboard.writeText(O):L(O),b.value=O,x.value=!0,M.start())}function L(O){const N=document.createElement("textarea");N.value=O??"",N.style.position="absolute",N.style.opacity="0",document.body.appendChild(N),N.select(),document.execCommand("copy"),N.remove()}function F(){var O,N;return((N=(O=document==null?void 0:document.getSelection)==null?void 0:O.call(document))==null?void 0:N.toString())??""}function V(O){return O==="granted"||O==="prompt"}return{isSupported:y,text:b,copied:x,copy:k}}function lB(e,t={}){const n=Qt(!1),i=Dl(null);let o=0,u=!0;if(Hy){const l=typeof t=="function"?{onDrop:t}:t,s=f=>{var b;const y=Array.from(((b=f.dataTransfer)==null?void 0:b.files)??[]);return i.value=y.length===0?null:y};sc(e,"dragenter",f=>{var b,x;const y=Array.from(((b=f==null?void 0:f.dataTransfer)==null?void 0:b.items)||[]).map(M=>M.kind==="file"?M.type:null).filter(qF);if(l.dataTypes&&f.dataTransfer){const M=se(l.dataTypes);if(u=typeof M=="function"?M(y):M?M.some(A=>y.includes(A)):!0,!u)return}f.preventDefault(),o+=1,n.value=!0,(x=l.onEnter)==null||x.call(l,s(f),f)}),sc(e,"dragover",f=>{var y;u&&(f.preventDefault(),(y=l.onOver)==null||y.call(l,s(f),f))}),sc(e,"dragleave",f=>{var y;u&&(f.preventDefault(),o-=1,o===0&&(n.value=!1),(y=l.onLeave)==null||y.call(l,s(f),f))}),sc(e,"drop",f=>{var y;f.preventDefault(),o=0,n.value=!1,(y=l.onDrop)==null||y.call(l,s(f),f)})}return{files:i,isOverDropZone:n}}const sT=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function uB(e,t={}){const{document:n=Mk,autoExit:i=!1}=t,o=dn(()=>pm(e)??(n==null?void 0:n.querySelector("html"))),u=Qt(!1),l=dn(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(V=>n&&V in n||o.value&&V in o.value)),s=dn(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(V=>n&&V in n||o.value&&V in o.value)),f=dn(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(V=>n&&V in n||o.value&&V in o.value)),y=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(V=>n&&V in n),b=L_(()=>o.value&&n&&l.value!==void 0&&s.value!==void 0&&f.value!==void 0),x=()=>y?(n==null?void 0:n[y])===o.value:!1,M=()=>{if(f.value){if(n&&n[f.value]!=null)return n[f.value];{const V=o.value;if((V==null?void 0:V[f.value])!=null)return!!V[f.value]}}return!1};async function A(){if(!(!b.value||!u.value)){if(s.value)if((n==null?void 0:n[s.value])!=null)await n[s.value]();else{const V=o.value;(V==null?void 0:V[s.value])!=null&&await V[s.value]()}u.value=!1}}async function k(){if(!b.value||u.value)return;M()&&await A();const V=o.value;l.value&&(V==null?void 0:V[l.value])!=null&&(await V[l.value](),u.value=!0)}async function L(){await(u.value?A():k())}const F=()=>{const V=M();(!V||V&&x())&&(u.value=V)};return sc(n,sT,F,!1),sc(()=>pm(o),sT,F,!1),i&&$y(A),{isSupported:b,isFullscreen:u,enter:k,exit:A,toggle:L}}function cB(e={}){const{enableHighAccuracy:t=!0,maximumAge:n=3e4,timeout:i=27e3,navigator:o=wM,immediate:u=!0}=e,l=L_(()=>o&&"geolocation"in o),s=Qt(null),f=Dl(null),y=Qt({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function b(k){s.value=k.timestamp,y.value=k.coords,f.value=null}let x=null;function M(){return new Promise((k,L)=>{if(!l.value||!(o!=null&&o.geolocation)){L(new Error("Geolocation is not supported"));return}let F=!1;x=o.geolocation.watchPosition(V=>{b(V),F||(F=!0,k(V))},V=>{f.value=V,F||(F=!0,L(V))},{enableHighAccuracy:t,maximumAge:n,timeout:i})})}u&&M();function A(){x!=null&&(o!=null&&o.geolocation)&&(o.geolocation.clearWatch(x),x=null)}return $y(()=>{A()}),{isSupported:l,coords:y,locatedAt:s,error:f,resume:M,pause:A}}const hB={multiple:!0,accept:"*",reset:!1,directory:!1};function dB(e={}){const{document:t=Mk}=e,n=Qt(null),{on:i,trigger:o}=Ez();let u;t&&(u=t.createElement("input"),u.type="file",u.onchange=f=>{const y=f.target;n.value=y.files,o(n.value)});const l=()=>{n.value=null,u&&u.value&&(u.value="",o(null))},s=f=>{if(!u)return;const y={...hB,...e,...f};u.multiple=y.multiple,u.accept=y.accept,u.webkitdirectory=y.directory,XF(y,"capture")&&(u.capture=y.capture),y.reset&&l(),u.click()};return{files:E_(n),open:s,reset:l,onChange:i}}const fB=Dn({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(e,{emit:t}){const n=e,i=t,{onChange:o,open:u}=dB({multiple:n.multiple,accept:n.accept});o(y=>{y&&l(Array.from(y))});function l(y){y&&i("change",n.multiple?y:y[0])}const s=Qt(),{isOverDropZone:f}=lB(s,l);return(y,b)=>(Ae(),st("div",{class:ei(["ddf__area",{ddf__active:se(f)}]),ref_key:"dropZoneRef",ref:s,onClick:b[0]||(b[0]=x=>se(u)())},b[1]||(b[1]=[gA('<label class="ddf__label" for="upload-file" data-v-70127256><i class="ddf__label-inner" data-v-70127256><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-70127256><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-70127256></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-70127256></path></svg><span class="ddf__text" data-v-70127256> Drag and drop your files here </span><span class="ddf__subtext" data-v-70127256> or click to browse your files </span></i></label>',1)]),2))}}),Cn=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},pB=Cn(fB,[["__scopeId","data-v-70127256"]]);function Ek(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function Tk(e){return Array.isArray(e)&&e.every(Ek)}function Pk(e){return Array.isArray(e)&&e.every(Tk)}function mB(e){return Array.isArray(e)&&e.every(Pk)}function gB(e){return e&&typeof e=="object"&&"geometry"in e}function kk(e){return Array.isArray(e)?1+Math.max(0,...e.map(kk)):0}function yB(){return{detectGeoType:t=>{if(t!=null&&t.type&&(t!=null&&t.coordinates))return t.type;switch(kk(t)){case 1:return"Point";case 2:return"LineString";case 3:return"Polygon";case 4:return"MultiPolygon";default:throw new Error("Unsupported geometry depth")}}}}function vB(){const e=t=>{if(t.type==="GeometryCollection")return t.geometries.every(e);const n=t.coordinates;switch(t.type){case"Point":return Ek(n);case"MultiPoint":case"LineString":return Tk(n);case"Polygon":case"MultiLineString":return Pk(n);case"MultiPolygon":return mB(n);default:return!1}};return{validateGeometry:e}}function _B(){const{detectGeoType:e}=yB(),{validateGeometry:t}=vB(),n=o=>{if(!gB(o))throw new Error("Invalid input: not an InputFeature");const{geometry:u,...l}=o,s=u!=null&&u.type&&(u!=null&&u.coordinates)?u:{type:e(u),coordinates:u};if(!t(s))throw new Error("Invalid geometry");return{type:"Feature",geometry:s,properties:l}};return{convertFeature:n,convertList:o=>({type:"FeatureCollection",features:o.map(n)})}}const aT=e=>{if(typeof e=="string"){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://"))return"url";if(e.startsWith("data:"))return"base64"}else{if(e instanceof Blob||e instanceof File)return"blob";if(e instanceof ArrayBuffer||e instanceof Uint8Array)return"buffer"}throw new Error("Không thể xác định loại dữ liệu để tải")},oT=e=>{var i;const t=(i=e.split(".").pop())==null?void 0:i.toLowerCase();return{pdf:"application/pdf",txt:"text/plain",csv:"text/csv",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",html:"text/html"}[t||""]||"application/octet-stream"};function bB(){const e=Qt("idle"),t=Qt(null),n=()=>{e.value="idle",t.value=null},i=async(u,l,s,f)=>{n();try{e.value="downloading";const y=s||aT(u),b=l||"download",x=f||oT(b);let M;switch(y){case"url":{const A=await fetch(u);if(!A.ok)throw new Error(`Fetch failed: ${A.status} ${A.statusText}`);M=await A.blob();break}case"base64":{const A=u,k=atob(A.split(",")[1]||A),L=new ArrayBuffer(k.length),F=new Uint8Array(L);for(let V=0;V<k.length;V++)F[V]=k.charCodeAt(V);M=new Blob([L],{type:x});break}case"blob":{M=u;break}case"buffer":{if(u instanceof ArrayBuffer)M=new Blob([u],{type:x});else if(u instanceof Uint8Array)M=new Blob([u.buffer],{type:x});else throw new Error("Không thể chuyển buffer thành Blob");break}default:throw new Error("Loại dữ liệu không hợp lệ")}o(M,b),e.value="success"}catch(y){e.value="error",t.value=y.message||"Lỗi không xác định"}},o=(u,l)=>{const s=document.createElement("a"),f=URL.createObjectURL(u);s.href=f,s.download=l,s.click(),URL.revokeObjectURL(f)};return{status:e,error:t,downloadFile:i,detectType:aT,guessMimeType:oT}}function xB(e={}){const t=new AB;async function n(i,o={}){return t.read(i,Object.assign({},e,o))}return{read:n}}class AB{async read(t,n={}){const i=n.parser||this.getParser(t),o=n.type||"text",u=n.onSuccess,l=n.onError;try{let s=await lT.read(t,o);return i&&(s=await i.parse(s,t)),u&&u(s),s}catch(s){throw l&&l(s),s}}getParser(t){switch(lT.getExtension(t)){case"geojson":case"json":return new wB}}}class lT{static getExtension(t){return t.name.split(".").pop()}static async read(t,n){return new Promise((i,o)=>{const u=new window.FileReader;u.onload=l=>l.target&&i(l.target.result),u.onerror=l=>o(l),n==="text"?u.readAsText(t):n==="arraybuffer"?u.readAsArrayBuffer(t):n==="binary"?u.readAsDataURL(t):o(new Error(`Read file as ${n} is not available`))})}}class wB{parse(t,n){const i=JSON.parse(t);return Promise.resolve(this.toGeojson(i))}toGeojson(t){return t.crs,t}}var ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function D_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return e[i]}})}),n}var wA={},CM={};CM.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31};var Lk={},CB={C:254,L:1,D:8,N:18,M:18,F:18,B:8},CA={};CA.lpad=function(t,n,i){for(;t.length<n;)t=i+t;return t};CA.rpad=function(t,n,i){for(;t.length<n;)t=t+i;return t};CA.writeField=function(t,n,i,o){for(var u=0;u<n;u++)t.setUint8(o,i.charCodeAt(u)),o++;return o};var IA={},IB=CB,MB={string:"C",number:"N",boolean:"L",null:"C"};IA.multi=SB;IA.bytesPer=TB;IA.obj=Dk;function SB(e){var t={};e.forEach(n);function n(i){EB(t,i)}return Dk(t)}function EB(e,t){for(var n in t){var i=typeof t[n]<"u"&&t[n]!==null;(typeof e[n]>"u"||i)&&(e[n]=t[n])}return e}function Dk(e){var t={},n=[];for(var i in e)t[i]=e[i]===null?"null":typeof e[i];for(var o in t){var u=MB[t[o]];u&&n.push({name:o,type:u,size:IB[u]})}return n}function TB(e){return e.reduce(function(t,n){return t+n.size},1)}var Ng=CA,uT=IA,PB=function(t,n){var i=n||uT.multi(t),o=32*i.length+1,u=uT.bytesPer(i),l=new ArrayBuffer(o+32+u*t.length+1),s=new Date,f=new DataView(l);f.setUint8(0,3),f.setUint8(1,s.getFullYear()-1900),f.setUint8(2,s.getMonth()+1),f.setUint8(3,s.getDate()),f.setUint32(4,t.length,!0);var y=o+32;f.setUint16(8,y,!0),f.setUint16(10,u,!0),f.setInt8(32+o-1,13),i.forEach(function(x,M){x.name.split("").slice(0,10).forEach(function(A,k){f.setInt8(32+M*32+k,A.charCodeAt(0))}),f.setInt8(32+M*32+11,x.type.charCodeAt(0)),f.setInt8(32+M*32+16,x.size),x.type=="N"&&f.setInt8(32+M*32+17,3)});var b=o+32;return t.forEach(function(x,M){f.setUint8(b,32),b++,i.forEach(function(A){var k=x[A.name];switch((k===null||typeof k>"u")&&(k=""),A.type){case"L":f.setUint8(b,k?84:70),b++;break;case"D":b=Ng.writeField(f,8,Ng.lpad(k.toString(),8," "),b);break;case"N":b=Ng.writeField(f,A.size,Ng.lpad(k.toString(),A.size," ").substr(0,18),b);break;case"C":b=Ng.writeField(f,A.size,Ng.rpad(k.toString(),A.size," "),b);break;default:throw new Error("Unknown field type")}})}),f.setUint8(b,26),f};Lk.structure=PB;var Rk='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]',Gy={},R_={};R_.enlarge=function(t,n){return n[0]<t.xmin&&(t.xmin=n[0]),n[0]>t.xmax&&(t.xmax=n[0]),n[1]<t.ymin&&(t.ymin=n[1]),n[1]>t.ymax&&(t.ymax=n[1]),t};R_.enlargeExtent=function(t,n){return n.xmax>t.xmax&&(t.xmax=n.xmax),n.xmin<t.xmin&&(t.xmin=n.xmin),n.ymax>t.ymax&&(t.ymax=n.ymax),n.ymin<t.ymin&&(t.ymin=n.ymin),t};R_.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}};var cT=R_;Gy.write=function(t,n,i,o){var u=28,l=100,s=0,f=0;t.forEach(function(b,x){i.setInt32(s,x+1),i.setInt32(s+4,10),i.setInt32(s+8,1,!0),i.setFloat64(s+12,b[0],!0),i.setFloat64(s+20,b[1],!0),o.setInt32(f,l/2),o.setInt32(f+4,10),f+=8,s+=u,l+=u})};Gy.extent=function(e){return e.reduce(function(t,n){return cT.enlarge(t,n)},cT.blank())};Gy.parts=function(t,n){return t.length};Gy.shxLength=function(e){return e.length*8};Gy.shpLength=function(e){return e.length*28};var Zy={},Mx=R_,hT=CM;Zy.write=function(t,n,i,o,u){var l=0,s=0,f=100;t.forEach(y);function y(b,x){var M=MA(b),A=Ok([b],u),k=M.length*16+48+(A-1)*4,L=M.reduce(function(O,N){return Mx.enlarge(O,N)},Mx.blank());o.setInt32(s,f/2),o.setInt32(s+4,k/2),s+=8,f+=k+8,i.setInt32(l,x+1),i.setInt32(l+4,k/2),i.setInt32(l+8,u,!0),i.setFloat64(l+12,L.xmin,!0),i.setFloat64(l+20,L.ymin,!0),i.setFloat64(l+28,L.xmax,!0),i.setFloat64(l+36,L.ymax,!0),i.setInt32(l+44,A,!0),i.setInt32(l+48,M.length,!0),i.setInt32(l+52,0,!0);for(var F=b.reduce(function(O,N){return Array.isArray(N[0][0])?O=O.concat(N):O.push(N),O},[]),V=1;V<A;V++)i.setInt32(l+52+V*4,F.reduce(function(O,N,U){return U<V?O+N.length:O},0),!0);M.forEach(function(N,U){i.setFloat64(l+56+U*16+(A-1)*4,N[0],!0),i.setFloat64(l+56+U*16+(A-1)*4+8,N[1],!0)}),l+=k+8}};Zy.shpLength=function(e){return e.length*56+MA(e).length*16};Zy.shxLength=function(e){return e.length*8};Zy.extent=function(e){return MA(e).reduce(function(t,n){return Mx.enlarge(t,n)},Mx.blank())};function Ok(e,t){var n=1;return(t===hT.geometries.POLYGON||t===hT.geometries.POLYLINE)&&(n=e.reduce(function(i,o){return i+=o.length,Array.isArray(o[0][0][0])&&(i+=o.reduce(function(u,l){return u+l.length-1},0)),i},0)),n}Zy.parts=Ok;function MA(e,t){return t===void 0&&(t=[]),typeof e[0][0]=="object"?e.reduce(function(n,i){return n.concat(MA(i))},t):e}var kB=CM,LB=Lk,DB=Rk,RB=Gy,dT=Zy,OB={1:RB,5:dT,3:dT},zk=zB;function zB(e,t,n,i){var o=kB.geometries[t],u=OB[o],l=u.parts(n,o),s=100+(l-n.length)*4+u.shpLength(n),f=100+u.shxLength(n),y=new ArrayBuffer(s),b=new DataView(y),x=new ArrayBuffer(f),M=new DataView(x),A=u.extent(n);fT(b,o),fT(M,o),pT(A,b),pT(A,M),u.write(n,A,new DataView(y,100),new DataView(x,100),o),b.setInt32(24,s/2),M.setInt32(24,50+n.length*4);var k=LB.structure(e);i(null,{shp:b,shx:M,dbf:k,prj:DB})}function fT(e,t){e.setInt32(0,9994),e.setInt32(28,1e3,!0),e.setInt32(32,t,!0)}function pT(e,t){t.setFloat64(36,e.xmin,!0),t.setFloat64(44,e.ymin,!0),t.setFloat64(52,e.xmax,!0),t.setFloat64(60,e.ymax,!0)}var Wy={};Wy.point=O_("Point","POINT");Wy.line=O_("LineString","POLYLINE");Wy.multiline=O_("MultiLineString","POLYLINE");Wy.polygon=O_("Polygon","POLYGON");Wy.multipolygon=O_("MultiPolygon","POLYGON");function O_(e,t){return function(n){var i=n.features.filter(BB(e));return{geometries:t==="POLYLINE"?[i.map(mT)]:i.map(mT),properties:i.map(FB),type:t}}}function mT(e){return e.geometry.coordinates}function FB(e){return e.properties}function BB(e){return Array.isArray(e)?function(t){return e.includes(t.geometry.type)}:function(t){return t.geometry.type===e}}function wb(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fk={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(i,o,u){function l(y,b){if(!o[y]){if(!i[y]){var x=typeof wb=="function"&&wb;if(!b&&x)return x(y,!0);if(s)return s(y,!0);var M=new Error("Cannot find module '"+y+"'");throw M.code="MODULE_NOT_FOUND",M}var A=o[y]={exports:{}};i[y][0].call(A.exports,function(k){var L=i[y][1][k];return l(L||k)},A,A.exports,n,i,o,u)}return o[y].exports}for(var s=typeof wb=="function"&&wb,f=0;f<u.length;f++)l(u[f]);return l}({1:[function(n,i,o){var u=n("./utils"),l=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(f){for(var y,b,x,M,A,k,L,F=[],V=0,O=f.length,N=O,U=u.getTypeOf(f)!=="string";V<f.length;)N=O-V,x=U?(y=f[V++],b=V<O?f[V++]:0,V<O?f[V++]:0):(y=f.charCodeAt(V++),b=V<O?f.charCodeAt(V++):0,V<O?f.charCodeAt(V++):0),M=y>>2,A=(3&y)<<4|b>>4,k=1<N?(15&b)<<2|x>>6:64,L=2<N?63&x:64,F.push(s.charAt(M)+s.charAt(A)+s.charAt(k)+s.charAt(L));return F.join("")},o.decode=function(f){var y,b,x,M,A,k,L=0,F=0,V="data:";if(f.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");var O,N=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===s.charAt(64)&&N--,f.charAt(f.length-2)===s.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(O=l.uint8array?new Uint8Array(0|N):new Array(0|N);L<f.length;)y=s.indexOf(f.charAt(L++))<<2|(M=s.indexOf(f.charAt(L++)))>>4,b=(15&M)<<4|(A=s.indexOf(f.charAt(L++)))>>2,x=(3&A)<<6|(k=s.indexOf(f.charAt(L++))),O[F++]=y,A!==64&&(O[F++]=b),k!==64&&(O[F++]=x);return O}},{"./support":30,"./utils":32}],2:[function(n,i,o){var u=n("./external"),l=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),f=n("./stream/DataLengthProbe");function y(b,x,M,A,k){this.compressedSize=b,this.uncompressedSize=x,this.crc32=M,this.compression=A,this.compressedContent=k}y.prototype={getContentWorker:function(){var b=new l(u.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),x=this;return b.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new l(u.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(b,x,M){return b.pipe(new s).pipe(new f("uncompressedSize")).pipe(x.compressWorker(M)).pipe(new f("compressedSize")).withStreamInfo("compression",x)},i.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,o){var u=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new u("STORE compression")},uncompressWorker:function(){return new u("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,o){var u=n("./utils"),l=function(){for(var s,f=[],y=0;y<256;y++){s=y;for(var b=0;b<8;b++)s=1&s?3988292384^s>>>1:s>>>1;f[y]=s}return f}();i.exports=function(s,f){return s!==void 0&&s.length?u.getTypeOf(s)!=="string"?function(y,b,x,M){var A=l,k=M+x;y^=-1;for(var L=M;L<k;L++)y=y>>>8^A[255&(y^b[L])];return-1^y}(0|f,s,s.length,0):function(y,b,x,M){var A=l,k=M+x;y^=-1;for(var L=M;L<k;L++)y=y>>>8^A[255&(y^b.charCodeAt(L))];return-1^y}(0|f,s,s.length,0):0}},{"./utils":32}],5:[function(n,i,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,i,o){var u=null;u=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:u}},{lie:37}],7:[function(n,i,o){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),s=n("./utils"),f=n("./stream/GenericWorker"),y=u?"uint8array":"array";function b(x,M){f.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=M,this.meta={}}o.magic="\b\0",s.inherits(b,f),b.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(y,x.data),!1)},b.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(M){x.push({data:M,meta:x.meta})}},o.compressWorker=function(x){return new b("Deflate",x)},o.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,o){function u(A,k){var L,F="";for(L=0;L<k;L++)F+=String.fromCharCode(255&A),A>>>=8;return F}function l(A,k,L,F,V,O){var N,U,W=A.file,ne=A.compression,X=O!==y.utf8encode,q=s.transformTo("string",O(W.name)),G=s.transformTo("string",y.utf8encode(W.name)),ee=W.comment,ue=s.transformTo("string",O(ee)),Y=s.transformTo("string",y.utf8encode(ee)),ce=G.length!==W.name.length,K=Y.length!==ee.length,Se="",Ve="",Ne="",et=W.dir,ot=W.date,Zt={crc32:0,compressedSize:0,uncompressedSize:0};k&&!L||(Zt.crc32=A.crc32,Zt.compressedSize=A.compressedSize,Zt.uncompressedSize=A.uncompressedSize);var qe=0;k&&(qe|=8),X||!ce&&!K||(qe|=2048);var Ue=0,Tt=0;et&&(Ue|=16),V==="UNIX"?(Tt=798,Ue|=function(kt,un){var gt=kt;return kt||(gt=un?16893:33204),(65535&gt)<<16}(W.unixPermissions,et)):(Tt=20,Ue|=function(kt){return 63&(kt||0)}(W.dosPermissions)),N=ot.getUTCHours(),N<<=6,N|=ot.getUTCMinutes(),N<<=5,N|=ot.getUTCSeconds()/2,U=ot.getUTCFullYear()-1980,U<<=4,U|=ot.getUTCMonth()+1,U<<=5,U|=ot.getUTCDate(),ce&&(Ve=u(1,1)+u(b(q),4)+G,Se+="up"+u(Ve.length,2)+Ve),K&&(Ne=u(1,1)+u(b(ue),4)+Y,Se+="uc"+u(Ne.length,2)+Ne);var Bt="";return Bt+=`
\0`,Bt+=u(qe,2),Bt+=ne.magic,Bt+=u(N,2),Bt+=u(U,2),Bt+=u(Zt.crc32,4),Bt+=u(Zt.compressedSize,4),Bt+=u(Zt.uncompressedSize,4),Bt+=u(q.length,2),Bt+=u(Se.length,2),{fileRecord:x.LOCAL_FILE_HEADER+Bt+q+Se,dirRecord:x.CENTRAL_FILE_HEADER+u(Tt,2)+Bt+u(ue.length,2)+"\0\0\0\0"+u(Ue,4)+u(F,4)+q+Se+ue}}var s=n("../utils"),f=n("../stream/GenericWorker"),y=n("../utf8"),b=n("../crc32"),x=n("../signature");function M(A,k,L,F){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=L,this.encodeFileName=F,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(M,f),M.prototype.push=function(A){var k=A.meta.percent||0,L=this.entriesCount,F=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,f.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:L?(k+100*(L-F-1))/L:100}}))},M.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var k=this.streamFiles&&!A.file.dir;if(k){var L=l(A,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:L.fileRecord,meta:{percent:0}})}else this.accumulate=!0},M.prototype.closedSource=function(A){this.accumulate=!1;var k=this.streamFiles&&!A.file.dir,L=l(A,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(L.dirRecord),k)this.push({data:function(F){return x.DATA_DESCRIPTOR+u(F.crc32,4)+u(F.compressedSize,4)+u(F.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:L.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},M.prototype.flush=function(){for(var A=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var L=this.bytesWritten-A,F=function(V,O,N,U,W){var ne=s.transformTo("string",W(U));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(V,2)+u(V,2)+u(O,4)+u(N,4)+u(ne.length,2)+ne}(this.dirRecords.length,L,A,this.zipComment,this.encodeFileName);this.push({data:F,meta:{percent:100}})},M.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},M.prototype.registerPrevious=function(A){this._sources.push(A);var k=this;return A.on("data",function(L){k.processChunk(L)}),A.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),A.on("error",function(L){k.error(L)}),this},M.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},M.prototype.error=function(A){var k=this._sources;if(!f.prototype.error.call(this,A))return!1;for(var L=0;L<k.length;L++)try{k[L].error(A)}catch{}return!0},M.prototype.lock=function(){f.prototype.lock.call(this);for(var A=this._sources,k=0;k<A.length;k++)A[k].lock()},i.exports=M},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,o){var u=n("../compressions"),l=n("./ZipFileWorker");o.generateWorker=function(s,f,y){var b=new l(f.streamFiles,y,f.platform,f.encodeFileName),x=0;try{s.forEach(function(M,A){x++;var k=function(O,N){var U=O||N,W=u[U];if(!W)throw new Error(U+" is not a valid compression method !");return W}(A.options.compression,f.compression),L=A.options.compressionOptions||f.compressionOptions||{},F=A.dir,V=A.date;A._compressWorker(k,L).withStreamInfo("file",{name:M,dir:F,date:V,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(b)}),b.entriesCount=x}catch(M){b.error(M)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,o){function u(){if(!(this instanceof u))return new u;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new u;for(var s in this)typeof this[s]!="function"&&(l[s]=this[s]);return l}}(u.prototype=n("./object")).loadAsync=n("./load"),u.support=n("./support"),u.defaults=n("./defaults"),u.version="3.10.1",u.loadAsync=function(l,s){return new u().loadAsync(l,s)},u.external=n("./external"),i.exports=u},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,o){var u=n("./utils"),l=n("./external"),s=n("./utf8"),f=n("./zipEntries"),y=n("./stream/Crc32Probe"),b=n("./nodejsUtils");function x(M){return new l.Promise(function(A,k){var L=M.decompressed.getContentWorker().pipe(new y);L.on("error",function(F){k(F)}).on("end",function(){L.streamInfo.crc32!==M.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}i.exports=function(M,A){var k=this;return A=u.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),b.isNode&&b.isStream(M)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):u.prepareContent("the loaded zip file",M,!0,A.optimizedBinaryString,A.base64).then(function(L){var F=new f(A);return F.load(L),F}).then(function(L){var F=[l.Promise.resolve(L)],V=L.files;if(A.checkCRC32)for(var O=0;O<V.length;O++)F.push(x(V[O]));return l.Promise.all(F)}).then(function(L){for(var F=L.shift(),V=F.files,O=0;O<V.length;O++){var N=V[O],U=N.fileNameStr,W=u.resolve(N.fileNameStr);k.file(W,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:A.createFolders}),N.dir||(k.file(W).unsafeOriginalName=U)}return F.zipComment.length&&(k.comment=F.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,o){var u=n("../utils"),l=n("../stream/GenericWorker");function s(f,y){l.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(y)}u.inherits(s,l),s.prototype._bindStream=function(f){var y=this;(this._stream=f).pause(),f.on("data",function(b){y.push({data:b,meta:{percent:0}})}).on("error",function(b){y.isPaused?this.generatedError=b:y.error(b)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},s.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,o){var u=n("readable-stream").Readable;function l(s,f,y){u.call(this,f),this._helper=s;var b=this;s.on("data",function(x,M){b.push(x)||b._helper.pause(),y&&y(M)}).on("error",function(x){b.emit("error",x)}).on("end",function(){b.push(null)})}n("../utils").inherits(l,u),l.prototype._read=function(){this._helper.resume()},i.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,i,o){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(u,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(u,l);if(typeof u=="number")throw new Error('The "data" argument must not be a number');return new Buffer(u,l)},allocBuffer:function(u){if(Buffer.alloc)return Buffer.alloc(u);var l=new Buffer(u);return l.fill(0),l},isBuffer:function(u){return Buffer.isBuffer(u)},isStream:function(u){return u&&typeof u.on=="function"&&typeof u.pause=="function"&&typeof u.resume=="function"}}},{}],15:[function(n,i,o){function u(W,ne,X){var q,G=s.getTypeOf(ne),ee=s.extend(X||{},b);ee.date=ee.date||new Date,ee.compression!==null&&(ee.compression=ee.compression.toUpperCase()),typeof ee.unixPermissions=="string"&&(ee.unixPermissions=parseInt(ee.unixPermissions,8)),ee.unixPermissions&&16384&ee.unixPermissions&&(ee.dir=!0),ee.dosPermissions&&16&ee.dosPermissions&&(ee.dir=!0),ee.dir&&(W=V(W)),ee.createFolders&&(q=F(W))&&O.call(this,q,!0);var ue=G==="string"&&ee.binary===!1&&ee.base64===!1;X&&X.binary!==void 0||(ee.binary=!ue),(ne instanceof x&&ne.uncompressedSize===0||ee.dir||!ne||ne.length===0)&&(ee.base64=!1,ee.binary=!0,ne="",ee.compression="STORE",G="string");var Y=null;Y=ne instanceof x||ne instanceof f?ne:k.isNode&&k.isStream(ne)?new L(W,ne):s.prepareContent(W,ne,ee.binary,ee.optimizedBinaryString,ee.base64);var ce=new M(W,Y,ee);this.files[W]=ce}var l=n("./utf8"),s=n("./utils"),f=n("./stream/GenericWorker"),y=n("./stream/StreamHelper"),b=n("./defaults"),x=n("./compressedObject"),M=n("./zipObject"),A=n("./generate"),k=n("./nodejsUtils"),L=n("./nodejs/NodejsStreamInputAdapter"),F=function(W){W.slice(-1)==="/"&&(W=W.substring(0,W.length-1));var ne=W.lastIndexOf("/");return 0<ne?W.substring(0,ne):""},V=function(W){return W.slice(-1)!=="/"&&(W+="/"),W},O=function(W,ne){return ne=ne!==void 0?ne:b.createFolders,W=V(W),this.files[W]||u.call(this,W,null,{dir:!0,createFolders:ne}),this.files[W]};function N(W){return Object.prototype.toString.call(W)==="[object RegExp]"}var U={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(W){var ne,X,q;for(ne in this.files)q=this.files[ne],(X=ne.slice(this.root.length,ne.length))&&ne.slice(0,this.root.length)===this.root&&W(X,q)},filter:function(W){var ne=[];return this.forEach(function(X,q){W(X,q)&&ne.push(q)}),ne},file:function(W,ne,X){if(arguments.length!==1)return W=this.root+W,u.call(this,W,ne,X),this;if(N(W)){var q=W;return this.filter(function(ee,ue){return!ue.dir&&q.test(ee)})}var G=this.files[this.root+W];return G&&!G.dir?G:null},folder:function(W){if(!W)return this;if(N(W))return this.filter(function(G,ee){return ee.dir&&W.test(G)});var ne=this.root+W,X=O.call(this,ne),q=this.clone();return q.root=X.name,q},remove:function(W){W=this.root+W;var ne=this.files[W];if(ne||(W.slice(-1)!=="/"&&(W+="/"),ne=this.files[W]),ne&&!ne.dir)delete this.files[W];else for(var X=this.filter(function(G,ee){return ee.name.slice(0,W.length)===W}),q=0;q<X.length;q++)delete this.files[X[q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(W){var ne,X={};try{if((X=s.extend(W||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring"&&(X.type="string"),!X.type)throw new Error("No output type specified.");s.checkSupport(X.type),X.platform!=="darwin"&&X.platform!=="freebsd"&&X.platform!=="linux"&&X.platform!=="sunos"||(X.platform="UNIX"),X.platform==="win32"&&(X.platform="DOS");var q=X.comment||this.comment||"";ne=A.generateWorker(this,X,q)}catch(G){(ne=new f("error")).error(G)}return new y(ne,X.type||"string",X.mimeType)},generateAsync:function(W,ne){return this.generateInternalStream(W).accumulate(ne)},generateNodeStream:function(W,ne){return(W=W||{}).type||(W.type="nodebuffer"),this.generateInternalStream(W).toNodejsStream(ne)}};i.exports=U},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,o){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,o){var u=n("./DataReader");function l(s){u.call(this,s);for(var f=0;f<this.data.length;f++)s[f]=255&s[f]}n("../utils").inherits(l,u),l.prototype.byteAt=function(s){return this.data[this.zero+s]},l.prototype.lastIndexOfSignature=function(s){for(var f=s.charCodeAt(0),y=s.charCodeAt(1),b=s.charCodeAt(2),x=s.charCodeAt(3),M=this.length-4;0<=M;--M)if(this.data[M]===f&&this.data[M+1]===y&&this.data[M+2]===b&&this.data[M+3]===x)return M-this.zero;return-1},l.prototype.readAndCheckSignature=function(s){var f=s.charCodeAt(0),y=s.charCodeAt(1),b=s.charCodeAt(2),x=s.charCodeAt(3),M=this.readData(4);return f===M[0]&&y===M[1]&&b===M[2]&&x===M[3]},l.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,i,o){var u=n("../utils");function l(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var f,y=0;for(this.checkOffset(s),f=this.index+s-1;f>=this.index;f--)y=(y<<8)+this.byteAt(f);return this.index+=s,y},readString:function(s){return u.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},i.exports=l},{"../utils":32}],19:[function(n,i,o){var u=n("./Uint8ArrayReader");function l(s){u.call(this,s)}n("../utils").inherits(l,u),l.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,o){var u=n("./DataReader");function l(s){u.call(this,s)}n("../utils").inherits(l,u),l.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},l.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},l.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},l.prototype.readData=function(s){this.checkOffset(s);var f=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,i,o){var u=n("./ArrayReader");function l(s){u.call(this,s)}n("../utils").inherits(l,u),l.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,f},i.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,o){var u=n("../utils"),l=n("../support"),s=n("./ArrayReader"),f=n("./StringReader"),y=n("./NodeBufferReader"),b=n("./Uint8ArrayReader");i.exports=function(x){var M=u.getTypeOf(x);return u.checkSupport(M),M!=="string"||l.uint8array?M==="nodebuffer"?new y(x):l.uint8array?new b(u.transformTo("uint8array",x)):new s(u.transformTo("array",x)):new f(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,o){var u=n("./GenericWorker"),l=n("../utils");function s(f){u.call(this,"ConvertWorker to "+f),this.destType=f}l.inherits(s,u),s.prototype.processChunk=function(f){this.push({data:l.transformTo(this.destType,f.data),meta:f.meta})},i.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,o){var u=n("./GenericWorker"),l=n("../crc32");function s(){u.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,u),s.prototype.processChunk=function(f){this.streamInfo.crc32=l(f.data,this.streamInfo.crc32||0),this.push(f)},i.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,o){var u=n("../utils"),l=n("./GenericWorker");function s(f){l.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}u.inherits(s,l),s.prototype.processChunk=function(f){if(f){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+f.data.length}l.prototype.processChunk.call(this,f)},i.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,o){var u=n("../utils"),l=n("./GenericWorker");function s(f){l.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(b){y.dataIsReady=!0,y.data=b,y.max=b&&b.length||0,y.type=u.getTypeOf(b),y.isPaused||y._tickAndRepeat()},function(b){y.error(b)})}u.inherits(s,l),s.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,u.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(u.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,y);break;case"uint8array":f=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":f=this.data.slice(this.index,y)}return this.index=y,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,o){function u(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}u.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,s){return this._listeners[l].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,s){if(this._listeners[l])for(var f=0;f<this._listeners[l].length;f++)this._listeners[l][f].call(this,s)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var s=this;return l.on("data",function(f){s.processChunk(f)}),l.on("end",function(){s.end()}),l.on("error",function(f){s.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,s){return this.extraStreamInfo[l]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},i.exports=u},{}],29:[function(n,i,o){var u=n("../utils"),l=n("./ConvertWorker"),s=n("./GenericWorker"),f=n("../base64"),y=n("../support"),b=n("../external"),x=null;if(y.nodestream)try{x=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function M(k,L){return new b.Promise(function(F,V){var O=[],N=k._internalType,U=k._outputType,W=k._mimeType;k.on("data",function(ne,X){O.push(ne),L&&L(X)}).on("error",function(ne){O=[],V(ne)}).on("end",function(){try{var ne=function(X,q,G){switch(X){case"blob":return u.newBlob(u.transformTo("arraybuffer",q),G);case"base64":return f.encode(q);default:return u.transformTo(X,q)}}(U,function(X,q){var G,ee=0,ue=null,Y=0;for(G=0;G<q.length;G++)Y+=q[G].length;switch(X){case"string":return q.join("");case"array":return Array.prototype.concat.apply([],q);case"uint8array":for(ue=new Uint8Array(Y),G=0;G<q.length;G++)ue.set(q[G],ee),ee+=q[G].length;return ue;case"nodebuffer":return Buffer.concat(q);default:throw new Error("concat : unsupported type '"+X+"'")}}(N,O),W);F(ne)}catch(X){V(X)}O=[]}).resume()})}function A(k,L,F){var V=L;switch(L){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=L,this._mimeType=F,u.checkSupport(V),this._worker=k.pipe(new l(V)),k.lock()}catch(O){this._worker=new s("error"),this._worker.error(O)}}A.prototype={accumulate:function(k){return M(this,k)},on:function(k,L){var F=this;return k==="data"?this._worker.on(k,function(V){L.call(F,V.data,V.meta)}):this._worker.on(k,function(){u.delay(L,arguments,F)}),this},resume:function(){return u.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(u.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},k)}},i.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var u=new ArrayBuffer(0);try{o.blob=new Blob([u],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(u),o.blob=l.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,o){for(var u=n("./utils"),l=n("./support"),s=n("./nodejsUtils"),f=n("./stream/GenericWorker"),y=new Array(256),b=0;b<256;b++)y[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;y[254]=y[254]=1;function x(){f.call(this,"utf-8 decode"),this.leftOver=null}function M(){f.call(this,"utf-8 encode")}o.utf8encode=function(A){return l.nodebuffer?s.newBufferFrom(A,"utf-8"):function(k){var L,F,V,O,N,U=k.length,W=0;for(O=0;O<U;O++)(64512&(F=k.charCodeAt(O)))==55296&&O+1<U&&(64512&(V=k.charCodeAt(O+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),O++),W+=F<128?1:F<2048?2:F<65536?3:4;for(L=l.uint8array?new Uint8Array(W):new Array(W),O=N=0;N<W;O++)(64512&(F=k.charCodeAt(O)))==55296&&O+1<U&&(64512&(V=k.charCodeAt(O+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),O++),F<128?L[N++]=F:(F<2048?L[N++]=192|F>>>6:(F<65536?L[N++]=224|F>>>12:(L[N++]=240|F>>>18,L[N++]=128|F>>>12&63),L[N++]=128|F>>>6&63),L[N++]=128|63&F);return L}(A)},o.utf8decode=function(A){return l.nodebuffer?u.transformTo("nodebuffer",A).toString("utf-8"):function(k){var L,F,V,O,N=k.length,U=new Array(2*N);for(L=F=0;L<N;)if((V=k[L++])<128)U[F++]=V;else if(4<(O=y[V]))U[F++]=65533,L+=O-1;else{for(V&=O===2?31:O===3?15:7;1<O&&L<N;)V=V<<6|63&k[L++],O--;1<O?U[F++]=65533:V<65536?U[F++]=V:(V-=65536,U[F++]=55296|V>>10&1023,U[F++]=56320|1023&V)}return U.length!==F&&(U.subarray?U=U.subarray(0,F):U.length=F),u.applyFromCharCode(U)}(A=u.transformTo(l.uint8array?"uint8array":"array",A))},u.inherits(x,f),x.prototype.processChunk=function(A){var k=u.transformTo(l.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var L=k;(k=new Uint8Array(L.length+this.leftOver.length)).set(this.leftOver,0),k.set(L,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var F=function(O,N){var U;for((N=N||O.length)>O.length&&(N=O.length),U=N-1;0<=U&&(192&O[U])==128;)U--;return U<0||U===0?N:U+y[O[U]]>N?U:N}(k),V=k;F!==k.length&&(l.uint8array?(V=k.subarray(0,F),this.leftOver=k.subarray(F,k.length)):(V=k.slice(0,F),this.leftOver=k.slice(F,k.length))),this.push({data:o.utf8decode(V),meta:A.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=x,u.inherits(M,f),M.prototype.processChunk=function(A){this.push({data:o.utf8encode(A.data),meta:A.meta})},o.Utf8EncodeWorker=M},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,o){var u=n("./support"),l=n("./base64"),s=n("./nodejsUtils"),f=n("./external");function y(L){return L}function b(L,F){for(var V=0;V<L.length;++V)F[V]=255&L.charCodeAt(V);return F}n("setimmediate"),o.newBlob=function(L,F){o.checkSupport("blob");try{return new Blob([L],{type:F})}catch{try{var V=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return V.append(L),V.getBlob(F)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(L,F,V){var O=[],N=0,U=L.length;if(U<=V)return String.fromCharCode.apply(null,L);for(;N<U;)F==="array"||F==="nodebuffer"?O.push(String.fromCharCode.apply(null,L.slice(N,Math.min(N+V,U)))):O.push(String.fromCharCode.apply(null,L.subarray(N,Math.min(N+V,U)))),N+=V;return O.join("")},stringifyByChar:function(L){for(var F="",V=0;V<L.length;V++)F+=String.fromCharCode(L[V]);return F},applyCanBeUsed:{uint8array:function(){try{return u.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return u.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function M(L){var F=65536,V=o.getTypeOf(L),O=!0;if(V==="uint8array"?O=x.applyCanBeUsed.uint8array:V==="nodebuffer"&&(O=x.applyCanBeUsed.nodebuffer),O)for(;1<F;)try{return x.stringifyByChunk(L,V,F)}catch{F=Math.floor(F/2)}return x.stringifyByChar(L)}function A(L,F){for(var V=0;V<L.length;V++)F[V]=L[V];return F}o.applyFromCharCode=M;var k={};k.string={string:y,array:function(L){return b(L,new Array(L.length))},arraybuffer:function(L){return k.string.uint8array(L).buffer},uint8array:function(L){return b(L,new Uint8Array(L.length))},nodebuffer:function(L){return b(L,s.allocBuffer(L.length))}},k.array={string:M,array:y,arraybuffer:function(L){return new Uint8Array(L).buffer},uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return s.newBufferFrom(L)}},k.arraybuffer={string:function(L){return M(new Uint8Array(L))},array:function(L){return A(new Uint8Array(L),new Array(L.byteLength))},arraybuffer:y,uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return s.newBufferFrom(new Uint8Array(L))}},k.uint8array={string:M,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return L.buffer},uint8array:y,nodebuffer:function(L){return s.newBufferFrom(L)}},k.nodebuffer={string:M,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return k.nodebuffer.uint8array(L).buffer},uint8array:function(L){return A(L,new Uint8Array(L.length))},nodebuffer:y},o.transformTo=function(L,F){if(F=F||"",!L)return F;o.checkSupport(L);var V=o.getTypeOf(F);return k[V][L](F)},o.resolve=function(L){for(var F=L.split("/"),V=[],O=0;O<F.length;O++){var N=F[O];N==="."||N===""&&O!==0&&O!==F.length-1||(N===".."?V.pop():V.push(N))}return V.join("/")},o.getTypeOf=function(L){return typeof L=="string"?"string":Object.prototype.toString.call(L)==="[object Array]"?"array":u.nodebuffer&&s.isBuffer(L)?"nodebuffer":u.uint8array&&L instanceof Uint8Array?"uint8array":u.arraybuffer&&L instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(L){if(!u[L.toLowerCase()])throw new Error(L+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(L){var F,V,O="";for(V=0;V<(L||"").length;V++)O+="\\x"+((F=L.charCodeAt(V))<16?"0":"")+F.toString(16).toUpperCase();return O},o.delay=function(L,F,V){setImmediate(function(){L.apply(V||null,F||[])})},o.inherits=function(L,F){function V(){}V.prototype=F.prototype,L.prototype=new V},o.extend=function(){var L,F,V={};for(L=0;L<arguments.length;L++)for(F in arguments[L])Object.prototype.hasOwnProperty.call(arguments[L],F)&&V[F]===void 0&&(V[F]=arguments[L][F]);return V},o.prepareContent=function(L,F,V,O,N){return f.Promise.resolve(F).then(function(U){return u.blob&&(U instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(U))!==-1)&&typeof FileReader<"u"?new f.Promise(function(W,ne){var X=new FileReader;X.onload=function(q){W(q.target.result)},X.onerror=function(q){ne(q.target.error)},X.readAsArrayBuffer(U)}):U}).then(function(U){var W=o.getTypeOf(U);return W?(W==="arraybuffer"?U=o.transformTo("uint8array",U):W==="string"&&(N?U=l.decode(U):V&&O!==!0&&(U=function(ne){return b(ne,u.uint8array?new Uint8Array(ne.length):new Array(ne.length))}(U))),U):f.Promise.reject(new Error("Can't read the data of '"+L+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,o){var u=n("./reader/readerFor"),l=n("./utils"),s=n("./signature"),f=n("./zipEntry"),y=n("./support");function b(x){this.files=[],this.loadOptions=x}b.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var M=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(M)+", expected "+l.pretty(x)+")")}},isSignature:function(x,M){var A=this.reader.index;this.reader.setIndex(x);var k=this.reader.readString(4)===M;return this.reader.setIndex(A),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),M=y.uint8array?"uint8array":"array",A=l.transformTo(M,x);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,M,A,k=this.zip64EndOfCentralSize-44;0<k;)x=this.reader.readInt(2),M=this.reader.readInt(4),A=this.reader.readData(M),this.zip64ExtensibleData[x]={id:x,length:M,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,M;for(x=0;x<this.files.length;x++)M=this.files[x],this.reader.setIndex(M.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),M.readLocalPart(this.reader),M.handleUTF8(),M.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(x=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var M=x;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var k=M-A;if(0<k)this.isSignature(M,s.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(x){this.reader=u(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,o){var u=n("./reader/readerFor"),l=n("./utils"),s=n("./compressedObject"),f=n("./crc32"),y=n("./utf8"),b=n("./compressions"),x=n("./support");function M(A,k){this.options=A,this.loadOptions=k}M.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var k,L;if(A.skip(22),this.fileNameLength=A.readInt(2),L=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(L),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=function(F){for(var V in b)if(Object.prototype.hasOwnProperty.call(b,V)&&b[V].magic===F)return b[V];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,k,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var k=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(k),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=u(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var k,L,F,V=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<V;)k=A.readInt(2),L=A.readInt(2),F=A.readData(L),this.extraFields[k]={id:k,length:L,value:F};A.setIndex(V)},handleUTF8:function(){var A=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var L=l.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(L)}var F=this.findExtraFieldUnicodeComment();if(F!==null)this.fileCommentStr=F;else{var V=l.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(V)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var k=u(A.value);return k.readInt(1)!==1||f(this.fileName)!==k.readInt(4)?null:y.utf8decode(k.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var k=u(A.value);return k.readInt(1)!==1||f(this.fileComment)!==k.readInt(4)?null:y.utf8decode(k.readData(A.length-5))}return null}},i.exports=M},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,o){function u(k,L,F){this.name=k,this.dir=F.dir,this.date=F.date,this.comment=F.comment,this.unixPermissions=F.unixPermissions,this.dosPermissions=F.dosPermissions,this._data=L,this._dataBinary=F.binary,this.options={compression:F.compression,compressionOptions:F.compressionOptions}}var l=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),f=n("./utf8"),y=n("./compressedObject"),b=n("./stream/GenericWorker");u.prototype={internalStream:function(k){var L=null,F="string";try{if(!k)throw new Error("No output type specified.");var V=(F=k.toLowerCase())==="string"||F==="text";F!=="binarystring"&&F!=="text"||(F="string"),L=this._decompressWorker();var O=!this._dataBinary;O&&!V&&(L=L.pipe(new f.Utf8EncodeWorker)),!O&&V&&(L=L.pipe(new f.Utf8DecodeWorker))}catch(N){(L=new b("error")).error(N)}return new l(L,F,"")},async:function(k,L){return this.internalStream(k).accumulate(L)},nodeStream:function(k,L){return this.internalStream(k||"nodebuffer").toNodejsStream(L)},_compressWorker:function(k,L){if(this._data instanceof y&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var F=this._decompressWorker();return this._dataBinary||(F=F.pipe(new f.Utf8EncodeWorker)),y.createWorkerFrom(F,k,L)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof b?this._data:new s(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],M=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<x.length;A++)u.prototype[x[A]]=M;i.exports=u},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,o){(function(u){var l,s,f=u.MutationObserver||u.WebKitMutationObserver;if(f){var y=0,b=new f(k),x=u.document.createTextNode("");b.observe(x,{characterData:!0}),l=function(){x.data=y=++y%2}}else if(u.setImmediate||u.MessageChannel===void 0)l="document"in u&&"onreadystatechange"in u.document.createElement("script")?function(){var L=u.document.createElement("script");L.onreadystatechange=function(){k(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},u.document.documentElement.appendChild(L)}:function(){setTimeout(k,0)};else{var M=new u.MessageChannel;M.port1.onmessage=k,l=function(){M.port2.postMessage(0)}}var A=[];function k(){var L,F;s=!0;for(var V=A.length;V;){for(F=A,A=[],L=-1;++L<V;)F[L]();V=A.length}s=!1}i.exports=function(L){A.push(L)!==1||s||l()}}).call(this,typeof ra<"u"?ra:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,o){var u=n("immediate");function l(){}var s={},f=["REJECTED"],y=["FULFILLED"],b=["PENDING"];function x(V){if(typeof V!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,V!==l&&L(this,V)}function M(V,O,N){this.promise=V,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function A(V,O,N){u(function(){var U;try{U=O(N)}catch(W){return s.reject(V,W)}U===V?s.reject(V,new TypeError("Cannot resolve promise with itself")):s.resolve(V,U)})}function k(V){var O=V&&V.then;if(V&&(typeof V=="object"||typeof V=="function")&&typeof O=="function")return function(){O.apply(V,arguments)}}function L(V,O){var N=!1;function U(X){N||(N=!0,s.reject(V,X))}function W(X){N||(N=!0,s.resolve(V,X))}var ne=F(function(){O(W,U)});ne.status==="error"&&U(ne.value)}function F(V,O){var N={};try{N.value=V(O),N.status="success"}catch(U){N.status="error",N.value=U}return N}(i.exports=x).prototype.finally=function(V){if(typeof V!="function")return this;var O=this.constructor;return this.then(function(N){return O.resolve(V()).then(function(){return N})},function(N){return O.resolve(V()).then(function(){throw N})})},x.prototype.catch=function(V){return this.then(null,V)},x.prototype.then=function(V,O){if(typeof V!="function"&&this.state===y||typeof O!="function"&&this.state===f)return this;var N=new this.constructor(l);return this.state!==b?A(N,this.state===y?V:O,this.outcome):this.queue.push(new M(N,V,O)),N},M.prototype.callFulfilled=function(V){s.resolve(this.promise,V)},M.prototype.otherCallFulfilled=function(V){A(this.promise,this.onFulfilled,V)},M.prototype.callRejected=function(V){s.reject(this.promise,V)},M.prototype.otherCallRejected=function(V){A(this.promise,this.onRejected,V)},s.resolve=function(V,O){var N=F(k,O);if(N.status==="error")return s.reject(V,N.value);var U=N.value;if(U)L(V,U);else{V.state=y,V.outcome=O;for(var W=-1,ne=V.queue.length;++W<ne;)V.queue[W].callFulfilled(O)}return V},s.reject=function(V,O){V.state=f,V.outcome=O;for(var N=-1,U=V.queue.length;++N<U;)V.queue[N].callRejected(O);return V},x.resolve=function(V){return V instanceof this?V:s.resolve(new this(l),V)},x.reject=function(V){var O=new this(l);return s.reject(O,V)},x.all=function(V){var O=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=V.length,U=!1;if(!N)return this.resolve([]);for(var W=new Array(N),ne=0,X=-1,q=new this(l);++X<N;)G(V[X],X);return q;function G(ee,ue){O.resolve(ee).then(function(Y){W[ue]=Y,++ne!==N||U||(U=!0,s.resolve(q,W))},function(Y){U||(U=!0,s.reject(q,Y))})}},x.race=function(V){var O=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=V.length,U=!1;if(!N)return this.resolve([]);for(var W=-1,ne=new this(l);++W<N;)X=V[W],O.resolve(X).then(function(q){U||(U=!0,s.resolve(ne,q))},function(q){U||(U=!0,s.reject(ne,q))});var X;return ne}},{immediate:36}],38:[function(n,i,o){var u={};(0,n("./lib/utils/common").assign)(u,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,o){var u=n("./zlib/deflate"),l=n("./utils/common"),s=n("./utils/strings"),f=n("./zlib/messages"),y=n("./zlib/zstream"),b=Object.prototype.toString,x=0,M=-1,A=0,k=8;function L(V){if(!(this instanceof L))return new L(V);this.options=l.assign({level:M,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},V||{});var O=this.options;O.raw&&0<O.windowBits?O.windowBits=-O.windowBits:O.gzip&&0<O.windowBits&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var N=u.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(N!==x)throw new Error(f[N]);if(O.header&&u.deflateSetHeader(this.strm,O.header),O.dictionary){var U;if(U=typeof O.dictionary=="string"?s.string2buf(O.dictionary):b.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(N=u.deflateSetDictionary(this.strm,U))!==x)throw new Error(f[N]);this._dict_set=!0}}function F(V,O){var N=new L(O);if(N.push(V,!0),N.err)throw N.msg||f[N.err];return N.result}L.prototype.push=function(V,O){var N,U,W=this.strm,ne=this.options.chunkSize;if(this.ended)return!1;U=O===~~O?O:O===!0?4:0,typeof V=="string"?W.input=s.string2buf(V):b.call(V)==="[object ArrayBuffer]"?W.input=new Uint8Array(V):W.input=V,W.next_in=0,W.avail_in=W.input.length;do{if(W.avail_out===0&&(W.output=new l.Buf8(ne),W.next_out=0,W.avail_out=ne),(N=u.deflate(W,U))!==1&&N!==x)return this.onEnd(N),!(this.ended=!0);W.avail_out!==0&&(W.avail_in!==0||U!==4&&U!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(l.shrinkBuf(W.output,W.next_out))):this.onData(l.shrinkBuf(W.output,W.next_out)))}while((0<W.avail_in||W.avail_out===0)&&N!==1);return U===4?(N=u.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===x):U!==2||(this.onEnd(x),!(W.avail_out=0))},L.prototype.onData=function(V){this.chunks.push(V)},L.prototype.onEnd=function(V){V===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},o.Deflate=L,o.deflate=F,o.deflateRaw=function(V,O){return(O=O||{}).raw=!0,F(V,O)},o.gzip=function(V,O){return(O=O||{}).gzip=!0,F(V,O)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,o){var u=n("./zlib/inflate"),l=n("./utils/common"),s=n("./utils/strings"),f=n("./zlib/constants"),y=n("./zlib/messages"),b=n("./zlib/zstream"),x=n("./zlib/gzheader"),M=Object.prototype.toString;function A(L){if(!(this instanceof A))return new A(L);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},L||{});var F=this.options;F.raw&&0<=F.windowBits&&F.windowBits<16&&(F.windowBits=-F.windowBits,F.windowBits===0&&(F.windowBits=-15)),!(0<=F.windowBits&&F.windowBits<16)||L&&L.windowBits||(F.windowBits+=32),15<F.windowBits&&F.windowBits<48&&!(15&F.windowBits)&&(F.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var V=u.inflateInit2(this.strm,F.windowBits);if(V!==f.Z_OK)throw new Error(y[V]);this.header=new x,u.inflateGetHeader(this.strm,this.header)}function k(L,F){var V=new A(F);if(V.push(L,!0),V.err)throw V.msg||y[V.err];return V.result}A.prototype.push=function(L,F){var V,O,N,U,W,ne,X=this.strm,q=this.options.chunkSize,G=this.options.dictionary,ee=!1;if(this.ended)return!1;O=F===~~F?F:F===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof L=="string"?X.input=s.binstring2buf(L):M.call(L)==="[object ArrayBuffer]"?X.input=new Uint8Array(L):X.input=L,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new l.Buf8(q),X.next_out=0,X.avail_out=q),(V=u.inflate(X,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&G&&(ne=typeof G=="string"?s.string2buf(G):M.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,V=u.inflateSetDictionary(this.strm,ne)),V===f.Z_BUF_ERROR&&ee===!0&&(V=f.Z_OK,ee=!1),V!==f.Z_STREAM_END&&V!==f.Z_OK)return this.onEnd(V),!(this.ended=!0);X.next_out&&(X.avail_out!==0&&V!==f.Z_STREAM_END&&(X.avail_in!==0||O!==f.Z_FINISH&&O!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=s.utf8border(X.output,X.next_out),U=X.next_out-N,W=s.buf2string(X.output,N),X.next_out=U,X.avail_out=q-U,U&&l.arraySet(X.output,X.output,N,U,0),this.onData(W)):this.onData(l.shrinkBuf(X.output,X.next_out)))),X.avail_in===0&&X.avail_out===0&&(ee=!0)}while((0<X.avail_in||X.avail_out===0)&&V!==f.Z_STREAM_END);return V===f.Z_STREAM_END&&(O=f.Z_FINISH),O===f.Z_FINISH?(V=u.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===f.Z_OK):O!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(X.avail_out=0))},A.prototype.onData=function(L){this.chunks.push(L)},A.prototype.onEnd=function(L){L===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},o.Inflate=A,o.inflate=k,o.inflateRaw=function(L,F){return(F=F||{}).raw=!0,k(L,F)},o.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,o){var u=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(f){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var b=y.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var x in b)b.hasOwnProperty(x)&&(f[x]=b[x])}}return f},o.shrinkBuf=function(f,y){return f.length===y?f:f.subarray?f.subarray(0,y):(f.length=y,f)};var l={arraySet:function(f,y,b,x,M){if(y.subarray&&f.subarray)f.set(y.subarray(b,b+x),M);else for(var A=0;A<x;A++)f[M+A]=y[b+A]},flattenChunks:function(f){var y,b,x,M,A,k;for(y=x=0,b=f.length;y<b;y++)x+=f[y].length;for(k=new Uint8Array(x),y=M=0,b=f.length;y<b;y++)A=f[y],k.set(A,M),M+=A.length;return k}},s={arraySet:function(f,y,b,x,M){for(var A=0;A<x;A++)f[M+A]=y[b+A]},flattenChunks:function(f){return[].concat.apply([],f)}};o.setTyped=function(f){f?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,l)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,s))},o.setTyped(u)},{}],42:[function(n,i,o){var u=n("./common"),l=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var f=new u.Buf8(256),y=0;y<256;y++)f[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function b(x,M){if(M<65537&&(x.subarray&&s||!x.subarray&&l))return String.fromCharCode.apply(null,u.shrinkBuf(x,M));for(var A="",k=0;k<M;k++)A+=String.fromCharCode(x[k]);return A}f[254]=f[254]=1,o.string2buf=function(x){var M,A,k,L,F,V=x.length,O=0;for(L=0;L<V;L++)(64512&(A=x.charCodeAt(L)))==55296&&L+1<V&&(64512&(k=x.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(k-56320),L++),O+=A<128?1:A<2048?2:A<65536?3:4;for(M=new u.Buf8(O),L=F=0;F<O;L++)(64512&(A=x.charCodeAt(L)))==55296&&L+1<V&&(64512&(k=x.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(k-56320),L++),A<128?M[F++]=A:(A<2048?M[F++]=192|A>>>6:(A<65536?M[F++]=224|A>>>12:(M[F++]=240|A>>>18,M[F++]=128|A>>>12&63),M[F++]=128|A>>>6&63),M[F++]=128|63&A);return M},o.buf2binstring=function(x){return b(x,x.length)},o.binstring2buf=function(x){for(var M=new u.Buf8(x.length),A=0,k=M.length;A<k;A++)M[A]=x.charCodeAt(A);return M},o.buf2string=function(x,M){var A,k,L,F,V=M||x.length,O=new Array(2*V);for(A=k=0;A<V;)if((L=x[A++])<128)O[k++]=L;else if(4<(F=f[L]))O[k++]=65533,A+=F-1;else{for(L&=F===2?31:F===3?15:7;1<F&&A<V;)L=L<<6|63&x[A++],F--;1<F?O[k++]=65533:L<65536?O[k++]=L:(L-=65536,O[k++]=55296|L>>10&1023,O[k++]=56320|1023&L)}return b(O,k)},o.utf8border=function(x,M){var A;for((M=M||x.length)>x.length&&(M=x.length),A=M-1;0<=A&&(192&x[A])==128;)A--;return A<0||A===0?M:A+f[x[A]]>M?A:M}},{"./common":41}],43:[function(n,i,o){i.exports=function(u,l,s,f){for(var y=65535&u|0,b=u>>>16&65535|0,x=0;s!==0;){for(s-=x=2e3<s?2e3:s;b=b+(y=y+l[f++]|0)|0,--x;);y%=65521,b%=65521}return y|b<<16|0}},{}],44:[function(n,i,o){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,o){var u=function(){for(var l,s=[],f=0;f<256;f++){l=f;for(var y=0;y<8;y++)l=1&l?3988292384^l>>>1:l>>>1;s[f]=l}return s}();i.exports=function(l,s,f,y){var b=u,x=y+f;l^=-1;for(var M=y;M<x;M++)l=l>>>8^b[255&(l^s[M])];return-1^l}},{}],46:[function(n,i,o){var u,l=n("../utils/common"),s=n("./trees"),f=n("./adler32"),y=n("./crc32"),b=n("./messages"),x=0,M=4,A=0,k=-2,L=-1,F=4,V=2,O=8,N=9,U=286,W=30,ne=19,X=2*U+1,q=15,G=3,ee=258,ue=ee+G+1,Y=42,ce=113,K=1,Se=2,Ve=3,Ne=4;function et($,Pe){return $.msg=b[Pe],Pe}function ot($){return($<<1)-(4<$?9:0)}function Zt($){for(var Pe=$.length;0<=--Pe;)$[Pe]=0}function qe($){var Pe=$.state,Oe=Pe.pending;Oe>$.avail_out&&(Oe=$.avail_out),Oe!==0&&(l.arraySet($.output,Pe.pending_buf,Pe.pending_out,Oe,$.next_out),$.next_out+=Oe,Pe.pending_out+=Oe,$.total_out+=Oe,$.avail_out-=Oe,Pe.pending-=Oe,Pe.pending===0&&(Pe.pending_out=0))}function Ue($,Pe){s._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Pe),$.block_start=$.strstart,qe($.strm)}function Tt($,Pe){$.pending_buf[$.pending++]=Pe}function Bt($,Pe){$.pending_buf[$.pending++]=Pe>>>8&255,$.pending_buf[$.pending++]=255&Pe}function kt($,Pe){var Oe,ye,pe=$.max_chain_length,Fe=$.strstart,tt=$.prev_length,it=$.nice_match,Be=$.strstart>$.w_size-ue?$.strstart-($.w_size-ue):0,Mt=$.window,wt=$.w_mask,At=$.prev,Ht=$.strstart+ee,cn=Mt[Fe+tt-1],fn=Mt[Fe+tt];$.prev_length>=$.good_match&&(pe>>=2),it>$.lookahead&&(it=$.lookahead);do if(Mt[(Oe=Pe)+tt]===fn&&Mt[Oe+tt-1]===cn&&Mt[Oe]===Mt[Fe]&&Mt[++Oe]===Mt[Fe+1]){Fe+=2,Oe++;do;while(Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Mt[++Fe]===Mt[++Oe]&&Fe<Ht);if(ye=ee-(Ht-Fe),Fe=Ht-ee,tt<ye){if($.match_start=Pe,it<=(tt=ye))break;cn=Mt[Fe+tt-1],fn=Mt[Fe+tt]}}while((Pe=At[Pe&wt])>Be&&--pe!=0);return tt<=$.lookahead?tt:$.lookahead}function un($){var Pe,Oe,ye,pe,Fe,tt,it,Be,Mt,wt,At=$.w_size;do{if(pe=$.window_size-$.lookahead-$.strstart,$.strstart>=At+(At-ue)){for(l.arraySet($.window,$.window,At,At,0),$.match_start-=At,$.strstart-=At,$.block_start-=At,Pe=Oe=$.hash_size;ye=$.head[--Pe],$.head[Pe]=At<=ye?ye-At:0,--Oe;);for(Pe=Oe=At;ye=$.prev[--Pe],$.prev[Pe]=At<=ye?ye-At:0,--Oe;);pe+=At}if($.strm.avail_in===0)break;if(tt=$.strm,it=$.window,Be=$.strstart+$.lookahead,Mt=pe,wt=void 0,wt=tt.avail_in,Mt<wt&&(wt=Mt),Oe=wt===0?0:(tt.avail_in-=wt,l.arraySet(it,tt.input,tt.next_in,wt,Be),tt.state.wrap===1?tt.adler=f(tt.adler,it,wt,Be):tt.state.wrap===2&&(tt.adler=y(tt.adler,it,wt,Be)),tt.next_in+=wt,tt.total_in+=wt,wt),$.lookahead+=Oe,$.lookahead+$.insert>=G)for(Fe=$.strstart-$.insert,$.ins_h=$.window[Fe],$.ins_h=($.ins_h<<$.hash_shift^$.window[Fe+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[Fe+G-1])&$.hash_mask,$.prev[Fe&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=Fe,Fe++,$.insert--,!($.lookahead+$.insert<G)););}while($.lookahead<ue&&$.strm.avail_in!==0)}function gt($,Pe){for(var Oe,ye;;){if($.lookahead<ue){if(un($),$.lookahead<ue&&Pe===x)return K;if($.lookahead===0)break}if(Oe=0,$.lookahead>=G&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+G-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),Oe!==0&&$.strstart-Oe<=$.w_size-ue&&($.match_length=kt($,Oe)),$.match_length>=G)if(ye=s._tr_tally($,$.strstart-$.match_start,$.match_length-G),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=G){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+G-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else ye=s._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(ye&&(Ue($,!1),$.strm.avail_out===0))return K}return $.insert=$.strstart<G-1?$.strstart:G-1,Pe===M?(Ue($,!0),$.strm.avail_out===0?Ve:Ne):$.last_lit&&(Ue($,!1),$.strm.avail_out===0)?K:Se}function ft($,Pe){for(var Oe,ye,pe;;){if($.lookahead<ue){if(un($),$.lookahead<ue&&Pe===x)return K;if($.lookahead===0)break}if(Oe=0,$.lookahead>=G&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+G-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=G-1,Oe!==0&&$.prev_length<$.max_lazy_match&&$.strstart-Oe<=$.w_size-ue&&($.match_length=kt($,Oe),$.match_length<=5&&($.strategy===1||$.match_length===G&&4096<$.strstart-$.match_start)&&($.match_length=G-1)),$.prev_length>=G&&$.match_length<=$.prev_length){for(pe=$.strstart+$.lookahead-G,ye=s._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-G),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=pe&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+G-1])&$.hash_mask,Oe=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=G-1,$.strstart++,ye&&(Ue($,!1),$.strm.avail_out===0))return K}else if($.match_available){if((ye=s._tr_tally($,0,$.window[$.strstart-1]))&&Ue($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return K}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(ye=s._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<G-1?$.strstart:G-1,Pe===M?(Ue($,!0),$.strm.avail_out===0?Ve:Ne):$.last_lit&&(Ue($,!1),$.strm.avail_out===0)?K:Se}function lt($,Pe,Oe,ye,pe){this.good_length=$,this.max_lazy=Pe,this.nice_length=Oe,this.max_chain=ye,this.func=pe}function Pt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*X),this.dyn_dtree=new l.Buf16(2*(2*W+1)),this.bl_tree=new l.Buf16(2*(2*ne+1)),Zt(this.dyn_ltree),Zt(this.dyn_dtree),Zt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(q+1),this.heap=new l.Buf16(2*U+1),Zt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*U+1),Zt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Lt($){var Pe;return $&&$.state?($.total_in=$.total_out=0,$.data_type=V,(Pe=$.state).pending=0,Pe.pending_out=0,Pe.wrap<0&&(Pe.wrap=-Pe.wrap),Pe.status=Pe.wrap?Y:ce,$.adler=Pe.wrap===2?0:1,Pe.last_flush=x,s._tr_init(Pe),A):et($,k)}function on($){var Pe=Lt($);return Pe===A&&function(Oe){Oe.window_size=2*Oe.w_size,Zt(Oe.head),Oe.max_lazy_match=u[Oe.level].max_lazy,Oe.good_match=u[Oe.level].good_length,Oe.nice_match=u[Oe.level].nice_length,Oe.max_chain_length=u[Oe.level].max_chain,Oe.strstart=0,Oe.block_start=0,Oe.lookahead=0,Oe.insert=0,Oe.match_length=Oe.prev_length=G-1,Oe.match_available=0,Oe.ins_h=0}($.state),Pe}function Ie($,Pe,Oe,ye,pe,Fe){if(!$)return k;var tt=1;if(Pe===L&&(Pe=6),ye<0?(tt=0,ye=-ye):15<ye&&(tt=2,ye-=16),pe<1||N<pe||Oe!==O||ye<8||15<ye||Pe<0||9<Pe||Fe<0||F<Fe)return et($,k);ye===8&&(ye=9);var it=new Pt;return($.state=it).strm=$,it.wrap=tt,it.gzhead=null,it.w_bits=ye,it.w_size=1<<it.w_bits,it.w_mask=it.w_size-1,it.hash_bits=pe+7,it.hash_size=1<<it.hash_bits,it.hash_mask=it.hash_size-1,it.hash_shift=~~((it.hash_bits+G-1)/G),it.window=new l.Buf8(2*it.w_size),it.head=new l.Buf16(it.hash_size),it.prev=new l.Buf16(it.w_size),it.lit_bufsize=1<<pe+6,it.pending_buf_size=4*it.lit_bufsize,it.pending_buf=new l.Buf8(it.pending_buf_size),it.d_buf=1*it.lit_bufsize,it.l_buf=3*it.lit_bufsize,it.level=Pe,it.strategy=Fe,it.method=Oe,on($)}u=[new lt(0,0,0,0,function($,Pe){var Oe=65535;for(Oe>$.pending_buf_size-5&&(Oe=$.pending_buf_size-5);;){if($.lookahead<=1){if(un($),$.lookahead===0&&Pe===x)return K;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var ye=$.block_start+Oe;if(($.strstart===0||$.strstart>=ye)&&($.lookahead=$.strstart-ye,$.strstart=ye,Ue($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-ue&&(Ue($,!1),$.strm.avail_out===0))return K}return $.insert=0,Pe===M?(Ue($,!0),$.strm.avail_out===0?Ve:Ne):($.strstart>$.block_start&&(Ue($,!1),$.strm.avail_out),K)}),new lt(4,4,8,4,gt),new lt(4,5,16,8,gt),new lt(4,6,32,32,gt),new lt(4,4,16,16,ft),new lt(8,16,32,32,ft),new lt(8,16,128,128,ft),new lt(8,32,128,256,ft),new lt(32,128,258,1024,ft),new lt(32,258,258,4096,ft)],o.deflateInit=function($,Pe){return Ie($,Pe,O,15,8,0)},o.deflateInit2=Ie,o.deflateReset=on,o.deflateResetKeep=Lt,o.deflateSetHeader=function($,Pe){return $&&$.state?$.state.wrap!==2?k:($.state.gzhead=Pe,A):k},o.deflate=function($,Pe){var Oe,ye,pe,Fe;if(!$||!$.state||5<Pe||Pe<0)return $?et($,k):k;if(ye=$.state,!$.output||!$.input&&$.avail_in!==0||ye.status===666&&Pe!==M)return et($,$.avail_out===0?-5:k);if(ye.strm=$,Oe=ye.last_flush,ye.last_flush=Pe,ye.status===Y)if(ye.wrap===2)$.adler=0,Tt(ye,31),Tt(ye,139),Tt(ye,8),ye.gzhead?(Tt(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),Tt(ye,255&ye.gzhead.time),Tt(ye,ye.gzhead.time>>8&255),Tt(ye,ye.gzhead.time>>16&255),Tt(ye,ye.gzhead.time>>24&255),Tt(ye,ye.level===9?2:2<=ye.strategy||ye.level<2?4:0),Tt(ye,255&ye.gzhead.os),ye.gzhead.extra&&ye.gzhead.extra.length&&(Tt(ye,255&ye.gzhead.extra.length),Tt(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&($.adler=y($.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=69):(Tt(ye,0),Tt(ye,0),Tt(ye,0),Tt(ye,0),Tt(ye,0),Tt(ye,ye.level===9?2:2<=ye.strategy||ye.level<2?4:0),Tt(ye,3),ye.status=ce);else{var tt=O+(ye.w_bits-8<<4)<<8;tt|=(2<=ye.strategy||ye.level<2?0:ye.level<6?1:ye.level===6?2:3)<<6,ye.strstart!==0&&(tt|=32),tt+=31-tt%31,ye.status=ce,Bt(ye,tt),ye.strstart!==0&&(Bt(ye,$.adler>>>16),Bt(ye,65535&$.adler)),$.adler=1}if(ye.status===69)if(ye.gzhead.extra){for(pe=ye.pending;ye.gzindex<(65535&ye.gzhead.extra.length)&&(ye.pending!==ye.pending_buf_size||(ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),qe($),pe=ye.pending,ye.pending!==ye.pending_buf_size));)Tt(ye,255&ye.gzhead.extra[ye.gzindex]),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=73)}else ye.status=73;if(ye.status===73)if(ye.gzhead.name){pe=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),qe($),pe=ye.pending,ye.pending===ye.pending_buf_size)){Fe=1;break}Fe=ye.gzindex<ye.gzhead.name.length?255&ye.gzhead.name.charCodeAt(ye.gzindex++):0,Tt(ye,Fe)}while(Fe!==0);ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Fe===0&&(ye.gzindex=0,ye.status=91)}else ye.status=91;if(ye.status===91)if(ye.gzhead.comment){pe=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),qe($),pe=ye.pending,ye.pending===ye.pending_buf_size)){Fe=1;break}Fe=ye.gzindex<ye.gzhead.comment.length?255&ye.gzhead.comment.charCodeAt(ye.gzindex++):0,Tt(ye,Fe)}while(Fe!==0);ye.gzhead.hcrc&&ye.pending>pe&&($.adler=y($.adler,ye.pending_buf,ye.pending-pe,pe)),Fe===0&&(ye.status=103)}else ye.status=103;if(ye.status===103&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&qe($),ye.pending+2<=ye.pending_buf_size&&(Tt(ye,255&$.adler),Tt(ye,$.adler>>8&255),$.adler=0,ye.status=ce)):ye.status=ce),ye.pending!==0){if(qe($),$.avail_out===0)return ye.last_flush=-1,A}else if($.avail_in===0&&ot(Pe)<=ot(Oe)&&Pe!==M)return et($,-5);if(ye.status===666&&$.avail_in!==0)return et($,-5);if($.avail_in!==0||ye.lookahead!==0||Pe!==x&&ye.status!==666){var it=ye.strategy===2?function(Be,Mt){for(var wt;;){if(Be.lookahead===0&&(un(Be),Be.lookahead===0)){if(Mt===x)return K;break}if(Be.match_length=0,wt=s._tr_tally(Be,0,Be.window[Be.strstart]),Be.lookahead--,Be.strstart++,wt&&(Ue(Be,!1),Be.strm.avail_out===0))return K}return Be.insert=0,Mt===M?(Ue(Be,!0),Be.strm.avail_out===0?Ve:Ne):Be.last_lit&&(Ue(Be,!1),Be.strm.avail_out===0)?K:Se}(ye,Pe):ye.strategy===3?function(Be,Mt){for(var wt,At,Ht,cn,fn=Be.window;;){if(Be.lookahead<=ee){if(un(Be),Be.lookahead<=ee&&Mt===x)return K;if(Be.lookahead===0)break}if(Be.match_length=0,Be.lookahead>=G&&0<Be.strstart&&(At=fn[Ht=Be.strstart-1])===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]){cn=Be.strstart+ee;do;while(At===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]&&At===fn[++Ht]&&Ht<cn);Be.match_length=ee-(cn-Ht),Be.match_length>Be.lookahead&&(Be.match_length=Be.lookahead)}if(Be.match_length>=G?(wt=s._tr_tally(Be,1,Be.match_length-G),Be.lookahead-=Be.match_length,Be.strstart+=Be.match_length,Be.match_length=0):(wt=s._tr_tally(Be,0,Be.window[Be.strstart]),Be.lookahead--,Be.strstart++),wt&&(Ue(Be,!1),Be.strm.avail_out===0))return K}return Be.insert=0,Mt===M?(Ue(Be,!0),Be.strm.avail_out===0?Ve:Ne):Be.last_lit&&(Ue(Be,!1),Be.strm.avail_out===0)?K:Se}(ye,Pe):u[ye.level].func(ye,Pe);if(it!==Ve&&it!==Ne||(ye.status=666),it===K||it===Ve)return $.avail_out===0&&(ye.last_flush=-1),A;if(it===Se&&(Pe===1?s._tr_align(ye):Pe!==5&&(s._tr_stored_block(ye,0,0,!1),Pe===3&&(Zt(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),qe($),$.avail_out===0))return ye.last_flush=-1,A}return Pe!==M?A:ye.wrap<=0?1:(ye.wrap===2?(Tt(ye,255&$.adler),Tt(ye,$.adler>>8&255),Tt(ye,$.adler>>16&255),Tt(ye,$.adler>>24&255),Tt(ye,255&$.total_in),Tt(ye,$.total_in>>8&255),Tt(ye,$.total_in>>16&255),Tt(ye,$.total_in>>24&255)):(Bt(ye,$.adler>>>16),Bt(ye,65535&$.adler)),qe($),0<ye.wrap&&(ye.wrap=-ye.wrap),ye.pending!==0?A:1)},o.deflateEnd=function($){var Pe;return $&&$.state?(Pe=$.state.status)!==Y&&Pe!==69&&Pe!==73&&Pe!==91&&Pe!==103&&Pe!==ce&&Pe!==666?et($,k):($.state=null,Pe===ce?et($,-3):A):k},o.deflateSetDictionary=function($,Pe){var Oe,ye,pe,Fe,tt,it,Be,Mt,wt=Pe.length;if(!$||!$.state||(Fe=(Oe=$.state).wrap)===2||Fe===1&&Oe.status!==Y||Oe.lookahead)return k;for(Fe===1&&($.adler=f($.adler,Pe,wt,0)),Oe.wrap=0,wt>=Oe.w_size&&(Fe===0&&(Zt(Oe.head),Oe.strstart=0,Oe.block_start=0,Oe.insert=0),Mt=new l.Buf8(Oe.w_size),l.arraySet(Mt,Pe,wt-Oe.w_size,Oe.w_size,0),Pe=Mt,wt=Oe.w_size),tt=$.avail_in,it=$.next_in,Be=$.input,$.avail_in=wt,$.next_in=0,$.input=Pe,un(Oe);Oe.lookahead>=G;){for(ye=Oe.strstart,pe=Oe.lookahead-(G-1);Oe.ins_h=(Oe.ins_h<<Oe.hash_shift^Oe.window[ye+G-1])&Oe.hash_mask,Oe.prev[ye&Oe.w_mask]=Oe.head[Oe.ins_h],Oe.head[Oe.ins_h]=ye,ye++,--pe;);Oe.strstart=ye,Oe.lookahead=G-1,un(Oe)}return Oe.strstart+=Oe.lookahead,Oe.block_start=Oe.strstart,Oe.insert=Oe.lookahead,Oe.lookahead=0,Oe.match_length=Oe.prev_length=G-1,Oe.match_available=0,$.next_in=it,$.input=Be,$.avail_in=tt,Oe.wrap=Fe,A},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,o){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,o){i.exports=function(u,l){var s,f,y,b,x,M,A,k,L,F,V,O,N,U,W,ne,X,q,G,ee,ue,Y,ce,K,Se;s=u.state,f=u.next_in,K=u.input,y=f+(u.avail_in-5),b=u.next_out,Se=u.output,x=b-(l-u.avail_out),M=b+(u.avail_out-257),A=s.dmax,k=s.wsize,L=s.whave,F=s.wnext,V=s.window,O=s.hold,N=s.bits,U=s.lencode,W=s.distcode,ne=(1<<s.lenbits)-1,X=(1<<s.distbits)-1;e:do{N<15&&(O+=K[f++]<<N,N+=8,O+=K[f++]<<N,N+=8),q=U[O&ne];t:for(;;){if(O>>>=G=q>>>24,N-=G,(G=q>>>16&255)===0)Se[b++]=65535&q;else{if(!(16&G)){if(!(64&G)){q=U[(65535&q)+(O&(1<<G)-1)];continue t}if(32&G){s.mode=12;break e}u.msg="invalid literal/length code",s.mode=30;break e}ee=65535&q,(G&=15)&&(N<G&&(O+=K[f++]<<N,N+=8),ee+=O&(1<<G)-1,O>>>=G,N-=G),N<15&&(O+=K[f++]<<N,N+=8,O+=K[f++]<<N,N+=8),q=W[O&X];n:for(;;){if(O>>>=G=q>>>24,N-=G,!(16&(G=q>>>16&255))){if(!(64&G)){q=W[(65535&q)+(O&(1<<G)-1)];continue n}u.msg="invalid distance code",s.mode=30;break e}if(ue=65535&q,N<(G&=15)&&(O+=K[f++]<<N,(N+=8)<G&&(O+=K[f++]<<N,N+=8)),A<(ue+=O&(1<<G)-1)){u.msg="invalid distance too far back",s.mode=30;break e}if(O>>>=G,N-=G,(G=b-x)<ue){if(L<(G=ue-G)&&s.sane){u.msg="invalid distance too far back",s.mode=30;break e}if(ce=V,(Y=0)===F){if(Y+=k-G,G<ee){for(ee-=G;Se[b++]=V[Y++],--G;);Y=b-ue,ce=Se}}else if(F<G){if(Y+=k+F-G,(G-=F)<ee){for(ee-=G;Se[b++]=V[Y++],--G;);if(Y=0,F<ee){for(ee-=G=F;Se[b++]=V[Y++],--G;);Y=b-ue,ce=Se}}}else if(Y+=F-G,G<ee){for(ee-=G;Se[b++]=V[Y++],--G;);Y=b-ue,ce=Se}for(;2<ee;)Se[b++]=ce[Y++],Se[b++]=ce[Y++],Se[b++]=ce[Y++],ee-=3;ee&&(Se[b++]=ce[Y++],1<ee&&(Se[b++]=ce[Y++]))}else{for(Y=b-ue;Se[b++]=Se[Y++],Se[b++]=Se[Y++],Se[b++]=Se[Y++],2<(ee-=3););ee&&(Se[b++]=Se[Y++],1<ee&&(Se[b++]=Se[Y++]))}break}}break}}while(f<y&&b<M);f-=ee=N>>3,O&=(1<<(N-=ee<<3))-1,u.next_in=f,u.next_out=b,u.avail_in=f<y?y-f+5:5-(f-y),u.avail_out=b<M?M-b+257:257-(b-M),s.hold=O,s.bits=N}},{}],49:[function(n,i,o){var u=n("../utils/common"),l=n("./adler32"),s=n("./crc32"),f=n("./inffast"),y=n("./inftrees"),b=1,x=2,M=0,A=-2,k=1,L=852,F=592;function V(Y){return(Y>>>24&255)+(Y>>>8&65280)+((65280&Y)<<8)+((255&Y)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new u.Buf16(320),this.work=new u.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(Y){var ce;return Y&&Y.state?(ce=Y.state,Y.total_in=Y.total_out=ce.total=0,Y.msg="",ce.wrap&&(Y.adler=1&ce.wrap),ce.mode=k,ce.last=0,ce.havedict=0,ce.dmax=32768,ce.head=null,ce.hold=0,ce.bits=0,ce.lencode=ce.lendyn=new u.Buf32(L),ce.distcode=ce.distdyn=new u.Buf32(F),ce.sane=1,ce.back=-1,M):A}function U(Y){var ce;return Y&&Y.state?((ce=Y.state).wsize=0,ce.whave=0,ce.wnext=0,N(Y)):A}function W(Y,ce){var K,Se;return Y&&Y.state?(Se=Y.state,ce<0?(K=0,ce=-ce):(K=1+(ce>>4),ce<48&&(ce&=15)),ce&&(ce<8||15<ce)?A:(Se.window!==null&&Se.wbits!==ce&&(Se.window=null),Se.wrap=K,Se.wbits=ce,U(Y))):A}function ne(Y,ce){var K,Se;return Y?(Se=new O,(Y.state=Se).window=null,(K=W(Y,ce))!==M&&(Y.state=null),K):A}var X,q,G=!0;function ee(Y){if(G){var ce;for(X=new u.Buf32(512),q=new u.Buf32(32),ce=0;ce<144;)Y.lens[ce++]=8;for(;ce<256;)Y.lens[ce++]=9;for(;ce<280;)Y.lens[ce++]=7;for(;ce<288;)Y.lens[ce++]=8;for(y(b,Y.lens,0,288,X,0,Y.work,{bits:9}),ce=0;ce<32;)Y.lens[ce++]=5;y(x,Y.lens,0,32,q,0,Y.work,{bits:5}),G=!1}Y.lencode=X,Y.lenbits=9,Y.distcode=q,Y.distbits=5}function ue(Y,ce,K,Se){var Ve,Ne=Y.state;return Ne.window===null&&(Ne.wsize=1<<Ne.wbits,Ne.wnext=0,Ne.whave=0,Ne.window=new u.Buf8(Ne.wsize)),Se>=Ne.wsize?(u.arraySet(Ne.window,ce,K-Ne.wsize,Ne.wsize,0),Ne.wnext=0,Ne.whave=Ne.wsize):(Se<(Ve=Ne.wsize-Ne.wnext)&&(Ve=Se),u.arraySet(Ne.window,ce,K-Se,Ve,Ne.wnext),(Se-=Ve)?(u.arraySet(Ne.window,ce,K-Se,Se,0),Ne.wnext=Se,Ne.whave=Ne.wsize):(Ne.wnext+=Ve,Ne.wnext===Ne.wsize&&(Ne.wnext=0),Ne.whave<Ne.wsize&&(Ne.whave+=Ve))),0}o.inflateReset=U,o.inflateReset2=W,o.inflateResetKeep=N,o.inflateInit=function(Y){return ne(Y,15)},o.inflateInit2=ne,o.inflate=function(Y,ce){var K,Se,Ve,Ne,et,ot,Zt,qe,Ue,Tt,Bt,kt,un,gt,ft,lt,Pt,Lt,on,Ie,$,Pe,Oe,ye,pe=0,Fe=new u.Buf8(4),tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Y||!Y.state||!Y.output||!Y.input&&Y.avail_in!==0)return A;(K=Y.state).mode===12&&(K.mode=13),et=Y.next_out,Ve=Y.output,Zt=Y.avail_out,Ne=Y.next_in,Se=Y.input,ot=Y.avail_in,qe=K.hold,Ue=K.bits,Tt=ot,Bt=Zt,Pe=M;e:for(;;)switch(K.mode){case k:if(K.wrap===0){K.mode=13;break}for(;Ue<16;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(2&K.wrap&&qe===35615){Fe[K.check=0]=255&qe,Fe[1]=qe>>>8&255,K.check=s(K.check,Fe,2,0),Ue=qe=0,K.mode=2;break}if(K.flags=0,K.head&&(K.head.done=!1),!(1&K.wrap)||(((255&qe)<<8)+(qe>>8))%31){Y.msg="incorrect header check",K.mode=30;break}if((15&qe)!=8){Y.msg="unknown compression method",K.mode=30;break}if(Ue-=4,$=8+(15&(qe>>>=4)),K.wbits===0)K.wbits=$;else if($>K.wbits){Y.msg="invalid window size",K.mode=30;break}K.dmax=1<<$,Y.adler=K.check=1,K.mode=512&qe?10:12,Ue=qe=0;break;case 2:for(;Ue<16;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(K.flags=qe,(255&K.flags)!=8){Y.msg="unknown compression method",K.mode=30;break}if(57344&K.flags){Y.msg="unknown header flags set",K.mode=30;break}K.head&&(K.head.text=qe>>8&1),512&K.flags&&(Fe[0]=255&qe,Fe[1]=qe>>>8&255,K.check=s(K.check,Fe,2,0)),Ue=qe=0,K.mode=3;case 3:for(;Ue<32;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}K.head&&(K.head.time=qe),512&K.flags&&(Fe[0]=255&qe,Fe[1]=qe>>>8&255,Fe[2]=qe>>>16&255,Fe[3]=qe>>>24&255,K.check=s(K.check,Fe,4,0)),Ue=qe=0,K.mode=4;case 4:for(;Ue<16;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}K.head&&(K.head.xflags=255&qe,K.head.os=qe>>8),512&K.flags&&(Fe[0]=255&qe,Fe[1]=qe>>>8&255,K.check=s(K.check,Fe,2,0)),Ue=qe=0,K.mode=5;case 5:if(1024&K.flags){for(;Ue<16;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}K.length=qe,K.head&&(K.head.extra_len=qe),512&K.flags&&(Fe[0]=255&qe,Fe[1]=qe>>>8&255,K.check=s(K.check,Fe,2,0)),Ue=qe=0}else K.head&&(K.head.extra=null);K.mode=6;case 6:if(1024&K.flags&&(ot<(kt=K.length)&&(kt=ot),kt&&(K.head&&($=K.head.extra_len-K.length,K.head.extra||(K.head.extra=new Array(K.head.extra_len)),u.arraySet(K.head.extra,Se,Ne,kt,$)),512&K.flags&&(K.check=s(K.check,Se,kt,Ne)),ot-=kt,Ne+=kt,K.length-=kt),K.length))break e;K.length=0,K.mode=7;case 7:if(2048&K.flags){if(ot===0)break e;for(kt=0;$=Se[Ne+kt++],K.head&&$&&K.length<65536&&(K.head.name+=String.fromCharCode($)),$&&kt<ot;);if(512&K.flags&&(K.check=s(K.check,Se,kt,Ne)),ot-=kt,Ne+=kt,$)break e}else K.head&&(K.head.name=null);K.length=0,K.mode=8;case 8:if(4096&K.flags){if(ot===0)break e;for(kt=0;$=Se[Ne+kt++],K.head&&$&&K.length<65536&&(K.head.comment+=String.fromCharCode($)),$&&kt<ot;);if(512&K.flags&&(K.check=s(K.check,Se,kt,Ne)),ot-=kt,Ne+=kt,$)break e}else K.head&&(K.head.comment=null);K.mode=9;case 9:if(512&K.flags){for(;Ue<16;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(qe!==(65535&K.check)){Y.msg="header crc mismatch",K.mode=30;break}Ue=qe=0}K.head&&(K.head.hcrc=K.flags>>9&1,K.head.done=!0),Y.adler=K.check=0,K.mode=12;break;case 10:for(;Ue<32;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}Y.adler=K.check=V(qe),Ue=qe=0,K.mode=11;case 11:if(K.havedict===0)return Y.next_out=et,Y.avail_out=Zt,Y.next_in=Ne,Y.avail_in=ot,K.hold=qe,K.bits=Ue,2;Y.adler=K.check=1,K.mode=12;case 12:if(ce===5||ce===6)break e;case 13:if(K.last){qe>>>=7&Ue,Ue-=7&Ue,K.mode=27;break}for(;Ue<3;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}switch(K.last=1&qe,Ue-=1,3&(qe>>>=1)){case 0:K.mode=14;break;case 1:if(ee(K),K.mode=20,ce!==6)break;qe>>>=2,Ue-=2;break e;case 2:K.mode=17;break;case 3:Y.msg="invalid block type",K.mode=30}qe>>>=2,Ue-=2;break;case 14:for(qe>>>=7&Ue,Ue-=7&Ue;Ue<32;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if((65535&qe)!=(qe>>>16^65535)){Y.msg="invalid stored block lengths",K.mode=30;break}if(K.length=65535&qe,Ue=qe=0,K.mode=15,ce===6)break e;case 15:K.mode=16;case 16:if(kt=K.length){if(ot<kt&&(kt=ot),Zt<kt&&(kt=Zt),kt===0)break e;u.arraySet(Ve,Se,Ne,kt,et),ot-=kt,Ne+=kt,Zt-=kt,et+=kt,K.length-=kt;break}K.mode=12;break;case 17:for(;Ue<14;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(K.nlen=257+(31&qe),qe>>>=5,Ue-=5,K.ndist=1+(31&qe),qe>>>=5,Ue-=5,K.ncode=4+(15&qe),qe>>>=4,Ue-=4,286<K.nlen||30<K.ndist){Y.msg="too many length or distance symbols",K.mode=30;break}K.have=0,K.mode=18;case 18:for(;K.have<K.ncode;){for(;Ue<3;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}K.lens[tt[K.have++]]=7&qe,qe>>>=3,Ue-=3}for(;K.have<19;)K.lens[tt[K.have++]]=0;if(K.lencode=K.lendyn,K.lenbits=7,Oe={bits:K.lenbits},Pe=y(0,K.lens,0,19,K.lencode,0,K.work,Oe),K.lenbits=Oe.bits,Pe){Y.msg="invalid code lengths set",K.mode=30;break}K.have=0,K.mode=19;case 19:for(;K.have<K.nlen+K.ndist;){for(;lt=(pe=K.lencode[qe&(1<<K.lenbits)-1])>>>16&255,Pt=65535&pe,!((ft=pe>>>24)<=Ue);){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(Pt<16)qe>>>=ft,Ue-=ft,K.lens[K.have++]=Pt;else{if(Pt===16){for(ye=ft+2;Ue<ye;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(qe>>>=ft,Ue-=ft,K.have===0){Y.msg="invalid bit length repeat",K.mode=30;break}$=K.lens[K.have-1],kt=3+(3&qe),qe>>>=2,Ue-=2}else if(Pt===17){for(ye=ft+3;Ue<ye;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}Ue-=ft,$=0,kt=3+(7&(qe>>>=ft)),qe>>>=3,Ue-=3}else{for(ye=ft+7;Ue<ye;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}Ue-=ft,$=0,kt=11+(127&(qe>>>=ft)),qe>>>=7,Ue-=7}if(K.have+kt>K.nlen+K.ndist){Y.msg="invalid bit length repeat",K.mode=30;break}for(;kt--;)K.lens[K.have++]=$}}if(K.mode===30)break;if(K.lens[256]===0){Y.msg="invalid code -- missing end-of-block",K.mode=30;break}if(K.lenbits=9,Oe={bits:K.lenbits},Pe=y(b,K.lens,0,K.nlen,K.lencode,0,K.work,Oe),K.lenbits=Oe.bits,Pe){Y.msg="invalid literal/lengths set",K.mode=30;break}if(K.distbits=6,K.distcode=K.distdyn,Oe={bits:K.distbits},Pe=y(x,K.lens,K.nlen,K.ndist,K.distcode,0,K.work,Oe),K.distbits=Oe.bits,Pe){Y.msg="invalid distances set",K.mode=30;break}if(K.mode=20,ce===6)break e;case 20:K.mode=21;case 21:if(6<=ot&&258<=Zt){Y.next_out=et,Y.avail_out=Zt,Y.next_in=Ne,Y.avail_in=ot,K.hold=qe,K.bits=Ue,f(Y,Bt),et=Y.next_out,Ve=Y.output,Zt=Y.avail_out,Ne=Y.next_in,Se=Y.input,ot=Y.avail_in,qe=K.hold,Ue=K.bits,K.mode===12&&(K.back=-1);break}for(K.back=0;lt=(pe=K.lencode[qe&(1<<K.lenbits)-1])>>>16&255,Pt=65535&pe,!((ft=pe>>>24)<=Ue);){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(lt&&!(240&lt)){for(Lt=ft,on=lt,Ie=Pt;lt=(pe=K.lencode[Ie+((qe&(1<<Lt+on)-1)>>Lt)])>>>16&255,Pt=65535&pe,!(Lt+(ft=pe>>>24)<=Ue);){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}qe>>>=Lt,Ue-=Lt,K.back+=Lt}if(qe>>>=ft,Ue-=ft,K.back+=ft,K.length=Pt,lt===0){K.mode=26;break}if(32&lt){K.back=-1,K.mode=12;break}if(64&lt){Y.msg="invalid literal/length code",K.mode=30;break}K.extra=15&lt,K.mode=22;case 22:if(K.extra){for(ye=K.extra;Ue<ye;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}K.length+=qe&(1<<K.extra)-1,qe>>>=K.extra,Ue-=K.extra,K.back+=K.extra}K.was=K.length,K.mode=23;case 23:for(;lt=(pe=K.distcode[qe&(1<<K.distbits)-1])>>>16&255,Pt=65535&pe,!((ft=pe>>>24)<=Ue);){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(!(240&lt)){for(Lt=ft,on=lt,Ie=Pt;lt=(pe=K.distcode[Ie+((qe&(1<<Lt+on)-1)>>Lt)])>>>16&255,Pt=65535&pe,!(Lt+(ft=pe>>>24)<=Ue);){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}qe>>>=Lt,Ue-=Lt,K.back+=Lt}if(qe>>>=ft,Ue-=ft,K.back+=ft,64&lt){Y.msg="invalid distance code",K.mode=30;break}K.offset=Pt,K.extra=15&lt,K.mode=24;case 24:if(K.extra){for(ye=K.extra;Ue<ye;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}K.offset+=qe&(1<<K.extra)-1,qe>>>=K.extra,Ue-=K.extra,K.back+=K.extra}if(K.offset>K.dmax){Y.msg="invalid distance too far back",K.mode=30;break}K.mode=25;case 25:if(Zt===0)break e;if(kt=Bt-Zt,K.offset>kt){if((kt=K.offset-kt)>K.whave&&K.sane){Y.msg="invalid distance too far back",K.mode=30;break}un=kt>K.wnext?(kt-=K.wnext,K.wsize-kt):K.wnext-kt,kt>K.length&&(kt=K.length),gt=K.window}else gt=Ve,un=et-K.offset,kt=K.length;for(Zt<kt&&(kt=Zt),Zt-=kt,K.length-=kt;Ve[et++]=gt[un++],--kt;);K.length===0&&(K.mode=21);break;case 26:if(Zt===0)break e;Ve[et++]=K.length,Zt--,K.mode=21;break;case 27:if(K.wrap){for(;Ue<32;){if(ot===0)break e;ot--,qe|=Se[Ne++]<<Ue,Ue+=8}if(Bt-=Zt,Y.total_out+=Bt,K.total+=Bt,Bt&&(Y.adler=K.check=K.flags?s(K.check,Ve,Bt,et-Bt):l(K.check,Ve,Bt,et-Bt)),Bt=Zt,(K.flags?qe:V(qe))!==K.check){Y.msg="incorrect data check",K.mode=30;break}Ue=qe=0}K.mode=28;case 28:if(K.wrap&&K.flags){for(;Ue<32;){if(ot===0)break e;ot--,qe+=Se[Ne++]<<Ue,Ue+=8}if(qe!==(4294967295&K.total)){Y.msg="incorrect length check",K.mode=30;break}Ue=qe=0}K.mode=29;case 29:Pe=1;break e;case 30:Pe=-3;break e;case 31:return-4;case 32:default:return A}return Y.next_out=et,Y.avail_out=Zt,Y.next_in=Ne,Y.avail_in=ot,K.hold=qe,K.bits=Ue,(K.wsize||Bt!==Y.avail_out&&K.mode<30&&(K.mode<27||ce!==4))&&ue(Y,Y.output,Y.next_out,Bt-Y.avail_out)?(K.mode=31,-4):(Tt-=Y.avail_in,Bt-=Y.avail_out,Y.total_in+=Tt,Y.total_out+=Bt,K.total+=Bt,K.wrap&&Bt&&(Y.adler=K.check=K.flags?s(K.check,Ve,Bt,Y.next_out-Bt):l(K.check,Ve,Bt,Y.next_out-Bt)),Y.data_type=K.bits+(K.last?64:0)+(K.mode===12?128:0)+(K.mode===20||K.mode===15?256:0),(Tt==0&&Bt===0||ce===4)&&Pe===M&&(Pe=-5),Pe)},o.inflateEnd=function(Y){if(!Y||!Y.state)return A;var ce=Y.state;return ce.window&&(ce.window=null),Y.state=null,M},o.inflateGetHeader=function(Y,ce){var K;return Y&&Y.state&&2&(K=Y.state).wrap?((K.head=ce).done=!1,M):A},o.inflateSetDictionary=function(Y,ce){var K,Se=ce.length;return Y&&Y.state?(K=Y.state).wrap!==0&&K.mode!==11?A:K.mode===11&&l(1,ce,Se,0)!==K.check?-3:ue(Y,ce,Se,Se)?(K.mode=31,-4):(K.havedict=1,M):A},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,o){var u=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(b,x,M,A,k,L,F,V){var O,N,U,W,ne,X,q,G,ee,ue=V.bits,Y=0,ce=0,K=0,Se=0,Ve=0,Ne=0,et=0,ot=0,Zt=0,qe=0,Ue=null,Tt=0,Bt=new u.Buf16(16),kt=new u.Buf16(16),un=null,gt=0;for(Y=0;Y<=15;Y++)Bt[Y]=0;for(ce=0;ce<A;ce++)Bt[x[M+ce]]++;for(Ve=ue,Se=15;1<=Se&&Bt[Se]===0;Se--);if(Se<Ve&&(Ve=Se),Se===0)return k[L++]=20971520,k[L++]=20971520,V.bits=1,0;for(K=1;K<Se&&Bt[K]===0;K++);for(Ve<K&&(Ve=K),Y=ot=1;Y<=15;Y++)if(ot<<=1,(ot-=Bt[Y])<0)return-1;if(0<ot&&(b===0||Se!==1))return-1;for(kt[1]=0,Y=1;Y<15;Y++)kt[Y+1]=kt[Y]+Bt[Y];for(ce=0;ce<A;ce++)x[M+ce]!==0&&(F[kt[x[M+ce]]++]=ce);if(X=b===0?(Ue=un=F,19):b===1?(Ue=l,Tt-=257,un=s,gt-=257,256):(Ue=f,un=y,-1),Y=K,ne=L,et=ce=qe=0,U=-1,W=(Zt=1<<(Ne=Ve))-1,b===1&&852<Zt||b===2&&592<Zt)return 1;for(;;){for(q=Y-et,ee=F[ce]<X?(G=0,F[ce]):F[ce]>X?(G=un[gt+F[ce]],Ue[Tt+F[ce]]):(G=96,0),O=1<<Y-et,K=N=1<<Ne;k[ne+(qe>>et)+(N-=O)]=q<<24|G<<16|ee|0,N!==0;);for(O=1<<Y-1;qe&O;)O>>=1;if(O!==0?(qe&=O-1,qe+=O):qe=0,ce++,--Bt[Y]==0){if(Y===Se)break;Y=x[M+F[ce]]}if(Ve<Y&&(qe&W)!==U){for(et===0&&(et=Ve),ne+=K,ot=1<<(Ne=Y-et);Ne+et<Se&&!((ot-=Bt[Ne+et])<=0);)Ne++,ot<<=1;if(Zt+=1<<Ne,b===1&&852<Zt||b===2&&592<Zt)return 1;k[U=qe&W]=Ve<<24|Ne<<16|ne-L|0}}return qe!==0&&(k[ne+qe]=Y-et<<24|64<<16|0),V.bits=Ve,0}},{"../utils/common":41}],51:[function(n,i,o){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,o){var u=n("../utils/common"),l=0,s=1;function f(pe){for(var Fe=pe.length;0<=--Fe;)pe[Fe]=0}var y=0,b=29,x=256,M=x+1+b,A=30,k=19,L=2*M+1,F=15,V=16,O=7,N=256,U=16,W=17,ne=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ue=new Array(2*(M+2));f(ue);var Y=new Array(2*A);f(Y);var ce=new Array(512);f(ce);var K=new Array(256);f(K);var Se=new Array(b);f(Se);var Ve,Ne,et,ot=new Array(A);function Zt(pe,Fe,tt,it,Be){this.static_tree=pe,this.extra_bits=Fe,this.extra_base=tt,this.elems=it,this.max_length=Be,this.has_stree=pe&&pe.length}function qe(pe,Fe){this.dyn_tree=pe,this.max_code=0,this.stat_desc=Fe}function Ue(pe){return pe<256?ce[pe]:ce[256+(pe>>>7)]}function Tt(pe,Fe){pe.pending_buf[pe.pending++]=255&Fe,pe.pending_buf[pe.pending++]=Fe>>>8&255}function Bt(pe,Fe,tt){pe.bi_valid>V-tt?(pe.bi_buf|=Fe<<pe.bi_valid&65535,Tt(pe,pe.bi_buf),pe.bi_buf=Fe>>V-pe.bi_valid,pe.bi_valid+=tt-V):(pe.bi_buf|=Fe<<pe.bi_valid&65535,pe.bi_valid+=tt)}function kt(pe,Fe,tt){Bt(pe,tt[2*Fe],tt[2*Fe+1])}function un(pe,Fe){for(var tt=0;tt|=1&pe,pe>>>=1,tt<<=1,0<--Fe;);return tt>>>1}function gt(pe,Fe,tt){var it,Be,Mt=new Array(F+1),wt=0;for(it=1;it<=F;it++)Mt[it]=wt=wt+tt[it-1]<<1;for(Be=0;Be<=Fe;Be++){var At=pe[2*Be+1];At!==0&&(pe[2*Be]=un(Mt[At]++,At))}}function ft(pe){var Fe;for(Fe=0;Fe<M;Fe++)pe.dyn_ltree[2*Fe]=0;for(Fe=0;Fe<A;Fe++)pe.dyn_dtree[2*Fe]=0;for(Fe=0;Fe<k;Fe++)pe.bl_tree[2*Fe]=0;pe.dyn_ltree[2*N]=1,pe.opt_len=pe.static_len=0,pe.last_lit=pe.matches=0}function lt(pe){8<pe.bi_valid?Tt(pe,pe.bi_buf):0<pe.bi_valid&&(pe.pending_buf[pe.pending++]=pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0}function Pt(pe,Fe,tt,it){var Be=2*Fe,Mt=2*tt;return pe[Be]<pe[Mt]||pe[Be]===pe[Mt]&&it[Fe]<=it[tt]}function Lt(pe,Fe,tt){for(var it=pe.heap[tt],Be=tt<<1;Be<=pe.heap_len&&(Be<pe.heap_len&&Pt(Fe,pe.heap[Be+1],pe.heap[Be],pe.depth)&&Be++,!Pt(Fe,it,pe.heap[Be],pe.depth));)pe.heap[tt]=pe.heap[Be],tt=Be,Be<<=1;pe.heap[tt]=it}function on(pe,Fe,tt){var it,Be,Mt,wt,At=0;if(pe.last_lit!==0)for(;it=pe.pending_buf[pe.d_buf+2*At]<<8|pe.pending_buf[pe.d_buf+2*At+1],Be=pe.pending_buf[pe.l_buf+At],At++,it===0?kt(pe,Be,Fe):(kt(pe,(Mt=K[Be])+x+1,Fe),(wt=X[Mt])!==0&&Bt(pe,Be-=Se[Mt],wt),kt(pe,Mt=Ue(--it),tt),(wt=q[Mt])!==0&&Bt(pe,it-=ot[Mt],wt)),At<pe.last_lit;);kt(pe,N,Fe)}function Ie(pe,Fe){var tt,it,Be,Mt=Fe.dyn_tree,wt=Fe.stat_desc.static_tree,At=Fe.stat_desc.has_stree,Ht=Fe.stat_desc.elems,cn=-1;for(pe.heap_len=0,pe.heap_max=L,tt=0;tt<Ht;tt++)Mt[2*tt]!==0?(pe.heap[++pe.heap_len]=cn=tt,pe.depth[tt]=0):Mt[2*tt+1]=0;for(;pe.heap_len<2;)Mt[2*(Be=pe.heap[++pe.heap_len]=cn<2?++cn:0)]=1,pe.depth[Be]=0,pe.opt_len--,At&&(pe.static_len-=wt[2*Be+1]);for(Fe.max_code=cn,tt=pe.heap_len>>1;1<=tt;tt--)Lt(pe,Mt,tt);for(Be=Ht;tt=pe.heap[1],pe.heap[1]=pe.heap[pe.heap_len--],Lt(pe,Mt,1),it=pe.heap[1],pe.heap[--pe.heap_max]=tt,pe.heap[--pe.heap_max]=it,Mt[2*Be]=Mt[2*tt]+Mt[2*it],pe.depth[Be]=(pe.depth[tt]>=pe.depth[it]?pe.depth[tt]:pe.depth[it])+1,Mt[2*tt+1]=Mt[2*it+1]=Be,pe.heap[1]=Be++,Lt(pe,Mt,1),2<=pe.heap_len;);pe.heap[--pe.heap_max]=pe.heap[1],function(fn,ut){var pt,_t,Nt,Wt,wn,Xe,de=ut.dyn_tree,ge=ut.max_code,xe=ut.stat_desc.static_tree,Ee=ut.stat_desc.has_stree,ve=ut.stat_desc.extra_bits,Qe=ut.stat_desc.extra_base,ht=ut.stat_desc.max_length,Ze=0;for(Wt=0;Wt<=F;Wt++)fn.bl_count[Wt]=0;for(de[2*fn.heap[fn.heap_max]+1]=0,pt=fn.heap_max+1;pt<L;pt++)ht<(Wt=de[2*de[2*(_t=fn.heap[pt])+1]+1]+1)&&(Wt=ht,Ze++),de[2*_t+1]=Wt,ge<_t||(fn.bl_count[Wt]++,wn=0,Qe<=_t&&(wn=ve[_t-Qe]),Xe=de[2*_t],fn.opt_len+=Xe*(Wt+wn),Ee&&(fn.static_len+=Xe*(xe[2*_t+1]+wn)));if(Ze!==0){do{for(Wt=ht-1;fn.bl_count[Wt]===0;)Wt--;fn.bl_count[Wt]--,fn.bl_count[Wt+1]+=2,fn.bl_count[ht]--,Ze-=2}while(0<Ze);for(Wt=ht;Wt!==0;Wt--)for(_t=fn.bl_count[Wt];_t!==0;)ge<(Nt=fn.heap[--pt])||(de[2*Nt+1]!==Wt&&(fn.opt_len+=(Wt-de[2*Nt+1])*de[2*Nt],de[2*Nt+1]=Wt),_t--)}}(pe,Fe),gt(Mt,cn,pe.bl_count)}function $(pe,Fe,tt){var it,Be,Mt=-1,wt=Fe[1],At=0,Ht=7,cn=4;for(wt===0&&(Ht=138,cn=3),Fe[2*(tt+1)+1]=65535,it=0;it<=tt;it++)Be=wt,wt=Fe[2*(it+1)+1],++At<Ht&&Be===wt||(At<cn?pe.bl_tree[2*Be]+=At:Be!==0?(Be!==Mt&&pe.bl_tree[2*Be]++,pe.bl_tree[2*U]++):At<=10?pe.bl_tree[2*W]++:pe.bl_tree[2*ne]++,Mt=Be,cn=(At=0)===wt?(Ht=138,3):Be===wt?(Ht=6,3):(Ht=7,4))}function Pe(pe,Fe,tt){var it,Be,Mt=-1,wt=Fe[1],At=0,Ht=7,cn=4;for(wt===0&&(Ht=138,cn=3),it=0;it<=tt;it++)if(Be=wt,wt=Fe[2*(it+1)+1],!(++At<Ht&&Be===wt)){if(At<cn)for(;kt(pe,Be,pe.bl_tree),--At!=0;);else Be!==0?(Be!==Mt&&(kt(pe,Be,pe.bl_tree),At--),kt(pe,U,pe.bl_tree),Bt(pe,At-3,2)):At<=10?(kt(pe,W,pe.bl_tree),Bt(pe,At-3,3)):(kt(pe,ne,pe.bl_tree),Bt(pe,At-11,7));Mt=Be,cn=(At=0)===wt?(Ht=138,3):Be===wt?(Ht=6,3):(Ht=7,4)}}f(ot);var Oe=!1;function ye(pe,Fe,tt,it){Bt(pe,(y<<1)+(it?1:0),3),function(Be,Mt,wt,At){lt(Be),Tt(Be,wt),Tt(Be,~wt),u.arraySet(Be.pending_buf,Be.window,Mt,wt,Be.pending),Be.pending+=wt}(pe,Fe,tt)}o._tr_init=function(pe){Oe||(function(){var Fe,tt,it,Be,Mt,wt=new Array(F+1);for(Be=it=0;Be<b-1;Be++)for(Se[Be]=it,Fe=0;Fe<1<<X[Be];Fe++)K[it++]=Be;for(K[it-1]=Be,Be=Mt=0;Be<16;Be++)for(ot[Be]=Mt,Fe=0;Fe<1<<q[Be];Fe++)ce[Mt++]=Be;for(Mt>>=7;Be<A;Be++)for(ot[Be]=Mt<<7,Fe=0;Fe<1<<q[Be]-7;Fe++)ce[256+Mt++]=Be;for(tt=0;tt<=F;tt++)wt[tt]=0;for(Fe=0;Fe<=143;)ue[2*Fe+1]=8,Fe++,wt[8]++;for(;Fe<=255;)ue[2*Fe+1]=9,Fe++,wt[9]++;for(;Fe<=279;)ue[2*Fe+1]=7,Fe++,wt[7]++;for(;Fe<=287;)ue[2*Fe+1]=8,Fe++,wt[8]++;for(gt(ue,M+1,wt),Fe=0;Fe<A;Fe++)Y[2*Fe+1]=5,Y[2*Fe]=un(Fe,5);Ve=new Zt(ue,X,x+1,M,F),Ne=new Zt(Y,q,0,A,F),et=new Zt(new Array(0),G,0,k,O)}(),Oe=!0),pe.l_desc=new qe(pe.dyn_ltree,Ve),pe.d_desc=new qe(pe.dyn_dtree,Ne),pe.bl_desc=new qe(pe.bl_tree,et),pe.bi_buf=0,pe.bi_valid=0,ft(pe)},o._tr_stored_block=ye,o._tr_flush_block=function(pe,Fe,tt,it){var Be,Mt,wt=0;0<pe.level?(pe.strm.data_type===2&&(pe.strm.data_type=function(At){var Ht,cn=4093624447;for(Ht=0;Ht<=31;Ht++,cn>>>=1)if(1&cn&&At.dyn_ltree[2*Ht]!==0)return l;if(At.dyn_ltree[18]!==0||At.dyn_ltree[20]!==0||At.dyn_ltree[26]!==0)return s;for(Ht=32;Ht<x;Ht++)if(At.dyn_ltree[2*Ht]!==0)return s;return l}(pe)),Ie(pe,pe.l_desc),Ie(pe,pe.d_desc),wt=function(At){var Ht;for($(At,At.dyn_ltree,At.l_desc.max_code),$(At,At.dyn_dtree,At.d_desc.max_code),Ie(At,At.bl_desc),Ht=k-1;3<=Ht&&At.bl_tree[2*ee[Ht]+1]===0;Ht--);return At.opt_len+=3*(Ht+1)+5+5+4,Ht}(pe),Be=pe.opt_len+3+7>>>3,(Mt=pe.static_len+3+7>>>3)<=Be&&(Be=Mt)):Be=Mt=tt+5,tt+4<=Be&&Fe!==-1?ye(pe,Fe,tt,it):pe.strategy===4||Mt===Be?(Bt(pe,2+(it?1:0),3),on(pe,ue,Y)):(Bt(pe,4+(it?1:0),3),function(At,Ht,cn,fn){var ut;for(Bt(At,Ht-257,5),Bt(At,cn-1,5),Bt(At,fn-4,4),ut=0;ut<fn;ut++)Bt(At,At.bl_tree[2*ee[ut]+1],3);Pe(At,At.dyn_ltree,Ht-1),Pe(At,At.dyn_dtree,cn-1)}(pe,pe.l_desc.max_code+1,pe.d_desc.max_code+1,wt+1),on(pe,pe.dyn_ltree,pe.dyn_dtree)),ft(pe),it&&lt(pe)},o._tr_tally=function(pe,Fe,tt){return pe.pending_buf[pe.d_buf+2*pe.last_lit]=Fe>>>8&255,pe.pending_buf[pe.d_buf+2*pe.last_lit+1]=255&Fe,pe.pending_buf[pe.l_buf+pe.last_lit]=255&tt,pe.last_lit++,Fe===0?pe.dyn_ltree[2*tt]++:(pe.matches++,Fe--,pe.dyn_ltree[2*(K[tt]+x+1)]++,pe.dyn_dtree[2*Ue(Fe)]++),pe.last_lit===pe.lit_bufsize-1},o._tr_align=function(pe){Bt(pe,2,3),kt(pe,N,ue),function(Fe){Fe.bi_valid===16?(Tt(Fe,Fe.bi_buf),Fe.bi_buf=0,Fe.bi_valid=0):8<=Fe.bi_valid&&(Fe.pending_buf[Fe.pending++]=255&Fe.bi_buf,Fe.bi_buf>>=8,Fe.bi_valid-=8)}(pe)}},{"../utils/common":41}],53:[function(n,i,o){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,o){(function(u){(function(l,s){if(!l.setImmediate){var f,y,b,x,M=1,A={},k=!1,L=l.document,F=Object.getPrototypeOf&&Object.getPrototypeOf(l);F=F&&F.setTimeout?F:l,f={}.toString.call(l.process)==="[object process]"?function(U){process.nextTick(function(){O(U)})}:function(){if(l.postMessage&&!l.importScripts){var U=!0,W=l.onmessage;return l.onmessage=function(){U=!1},l.postMessage("","*"),l.onmessage=W,U}}()?(x="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",N,!1):l.attachEvent("onmessage",N),function(U){l.postMessage(x+U,"*")}):l.MessageChannel?((b=new MessageChannel).port1.onmessage=function(U){O(U.data)},function(U){b.port2.postMessage(U)}):L&&"onreadystatechange"in L.createElement("script")?(y=L.documentElement,function(U){var W=L.createElement("script");W.onreadystatechange=function(){O(U),W.onreadystatechange=null,y.removeChild(W),W=null},y.appendChild(W)}):function(U){setTimeout(O,0,U)},F.setImmediate=function(U){typeof U!="function"&&(U=new Function(""+U));for(var W=new Array(arguments.length-1),ne=0;ne<W.length;ne++)W[ne]=arguments[ne+1];var X={callback:U,args:W};return A[M]=X,f(M),M++},F.clearImmediate=V}function V(U){delete A[U]}function O(U){if(k)setTimeout(O,0,U);else{var W=A[U];if(W){k=!0;try{(function(ne){var X=ne.callback,q=ne.args;switch(q.length){case 0:X();break;case 1:X(q[0]);break;case 2:X(q[0],q[1]);break;case 3:X(q[0],q[1],q[2]);break;default:X.apply(s,q)}})(W)}finally{V(U),k=!1}}}}function N(U){U.source===l&&typeof U.data=="string"&&U.data.indexOf(x)===0&&O(+U.data.slice(x.length))}})(typeof self>"u"?u===void 0?this:u:self)}).call(this,typeof ra<"u"?ra:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Fk);var NB=Fk.exports,VB=zk,f0=Wy,jB=Rk,UB=NB,Bk=function(e,t,n=!1){let i=new UB,o=i;t&&t.folder&&(o=i.folder(t.folder));var u=t&&t.prj?t.prj:jB;[f0.point(e),f0.line(e),f0.polygon(e),f0.multipolygon(e),f0.multiline(e)].forEach(function(s){s.geometries.length&&s.geometries[0].length&&VB(s.properties,s.type,s.geometries,function(f,y){var b=t&&t.types&&t.types[s.type.toLowerCase()]?t.types[s.type.toLowerCase()]:s.type;o.file(b+".shp",y.shp.buffer,{binary:!0}),o.file(b+".shx",y.shx.buffer,{binary:!0}),o.file(b+".dbf",y.dbf.buffer,{binary:!0}),o.file(b+".prj",u)})});var l={};return!t||!t.outputType?l.type="base64":l.type=t.outputType,!t||!t.compression?l.compression="DEFLATE":l.compression=t.compression,n?i.generateNodeStream({...l,streamFiles:!0}):i.generateAsync(l)},Nk={exports:{}};(function(e,t){(function(n,i){i()})(ra,function(){function n(y,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function i(y,b,x){var M=new XMLHttpRequest;M.open("GET",y),M.responseType="blob",M.onload=function(){f(M.response,b,x)},M.onerror=function(){console.error("could not download file")},M.send()}function o(y){var b=new XMLHttpRequest;b.open("HEAD",y,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function u(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(b)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ra=="object"&&ra.global===ra?ra:void 0,s=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(y,b,x){var M=l.URL||l.webkitURL,A=document.createElement("a");b=b||y.name||"download",A.download=b,A.rel="noopener",typeof y=="string"?(A.href=y,A.origin===location.origin?u(A):o(A.href)?i(y,b,x):u(A,A.target="_blank")):(A.href=M.createObjectURL(y),setTimeout(function(){M.revokeObjectURL(A.href)},4e4),setTimeout(function(){u(A)},0))}:"msSaveOrOpenBlob"in navigator?function(y,b,x){if(b=b||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(n(y,x),b);else if(o(y))i(y,b,x);else{var M=document.createElement("a");M.href=y,M.target="_blank",setTimeout(function(){u(M)})}}:function(y,b,x,M){if(M=M||open("","_blank"),M&&(M.document.title=M.document.body.innerText="downloading..."),typeof y=="string")return i(y,b,x);var A=y.type==="application/octet-stream",k=/constructor/i.test(l.HTMLElement)||l.safari,L=/CriOS\/[\d]+/.test(navigator.userAgent);if((L||A&&k||s)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var N=F.result;N=L?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),M?M.location.href=N:location=N,M=null},F.readAsDataURL(y)}else{var V=l.URL||l.webkitURL,O=V.createObjectURL(y);M?M.location=O:location.href=O,M=null,setTimeout(function(){V.revokeObjectURL(O)},4e4)}});l.saveAs=f.saveAs=f,e.exports=f})})(Nk);var SA=Nk.exports;const $B=fd(SA);var HB=Bk,GB=SA.saveAs,ZB=function(e,t){let n="download";t&&(t.filename||t.folder)&&(n=t.filename||t.folder),HB(e,t).then(function(i){GB(i,n+".zip")})};wA.download=ZB;wA.write=zk;wA.zip=Bk;var Vk={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,i)=>{e.exports=i()})(ra,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},o,u=!i.document&&!!i.postMessage,l=i.IS_PAPA_WORKER||!1,s={},f=0,y={};function b(q){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(G){var ee=W(G);ee.chunkSize=parseInt(ee.chunkSize),G.step||G.chunk||(ee.chunkSize=null),this._handle=new L(ee),(this._handle.streamer=this)._config=ee}).call(this,q),this.parseChunk=function(G,ee){var ue=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ue){let ce=this._config.newline;ce||(Y=this._config.quoteChar||'"',ce=this._handle.guessLineEndings(G,Y)),G=[...G.split(ce).slice(ue)].join(ce)}this.isFirstChunk&&X(this._config.beforeFirstChunk)&&(Y=this._config.beforeFirstChunk(G))!==void 0&&(G=Y),this.isFirstChunk=!1,this._halted=!1;var ue=this._partialLine+G,Y=(this._partialLine="",this._handle.parse(ue,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(G=Y.meta.cursor,ue=(this._finished||(this._partialLine=ue.substring(G-this._baseIndex),this._baseIndex=G),Y&&Y.data&&(this._rowCount+=Y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)i.postMessage({results:Y,workerId:y.WORKER_ID,finished:ue});else if(X(this._config.chunk)&&!ee){if(this._config.chunk(Y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Y.data),this._completeResults.errors=this._completeResults.errors.concat(Y.errors),this._completeResults.meta=Y.meta),this._completed||!ue||!X(this._config.complete)||Y&&Y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ue||Y&&Y.meta.paused||this._nextChunk(),Y}this._halted=!0},this._sendError=function(G){X(this._config.error)?this._config.error(G):l&&this._config.error&&i.postMessage({workerId:y.WORKER_ID,error:G,finished:!1})}}function x(q){var G;(q=q||{}).chunkSize||(q.chunkSize=y.RemoteChunkSize),b.call(this,q),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ee){this._input=ee,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(G=new XMLHttpRequest,this._config.withCredentials&&(G.withCredentials=this._config.withCredentials),u||(G.onload=ne(this._chunkLoaded,this),G.onerror=ne(this._chunkError,this)),G.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var ee,ue=this._config.downloadRequestHeaders;for(ee in ue)G.setRequestHeader(ee,ue[ee])}var Y;this._config.chunkSize&&(Y=this._start+this._config.chunkSize-1,G.setRequestHeader("Range","bytes="+this._start+"-"+Y));try{G.send(this._config.downloadRequestBody)}catch(ce){this._chunkError(ce.message)}u&&G.status===0&&this._chunkError()}},this._chunkLoaded=function(){G.readyState===4&&(G.status<200||400<=G.status?this._chunkError():(this._start+=this._config.chunkSize||G.responseText.length,this._finished=!this._config.chunkSize||this._start>=(ee=>(ee=ee.getResponseHeader("Content-Range"))!==null?parseInt(ee.substring(ee.lastIndexOf("/")+1)):-1)(G),this.parseChunk(G.responseText)))},this._chunkError=function(ee){ee=G.statusText||ee,this._sendError(new Error(ee))}}function M(q){(q=q||{}).chunkSize||(q.chunkSize=y.LocalChunkSize),b.call(this,q);var G,ee,ue=typeof FileReader<"u";this.stream=function(Y){this._input=Y,ee=Y.slice||Y.webkitSlice||Y.mozSlice,ue?((G=new FileReader).onload=ne(this._chunkLoaded,this),G.onerror=ne(this._chunkError,this)):G=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Y=this._input,ce=(this._config.chunkSize&&(ce=Math.min(this._start+this._config.chunkSize,this._input.size),Y=ee.call(Y,this._start,ce)),G.readAsText(Y,this._config.encoding));ue||this._chunkLoaded({target:{result:ce}})},this._chunkLoaded=function(Y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Y.target.result)},this._chunkError=function(){this._sendError(G.error)}}function A(q){var G;b.call(this,q=q||{}),this.stream=function(ee){return G=ee,this._nextChunk()},this._nextChunk=function(){var ee,ue;if(!this._finished)return ee=this._config.chunkSize,G=ee?(ue=G.substring(0,ee),G.substring(ee)):(ue=G,""),this._finished=!G,this.parseChunk(ue)}}function k(q){b.call(this,q=q||{});var G=[],ee=!0,ue=!1;this.pause=function(){b.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){b.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Y){this._input=Y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ue&&G.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),G.length?this.parseChunk(G.shift()):ee=!0},this._streamData=ne(function(Y){try{G.push(typeof Y=="string"?Y:Y.toString(this._config.encoding)),ee&&(ee=!1,this._checkIsFinished(),this.parseChunk(G.shift()))}catch(ce){this._streamError(ce)}},this),this._streamError=ne(function(Y){this._streamCleanUp(),this._sendError(Y)},this),this._streamEnd=ne(function(){this._streamCleanUp(),ue=!0,this._streamData("")},this),this._streamCleanUp=ne(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function L(q){var G,ee,ue,Y,ce=Math.pow(2,53),K=-ce,Se=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Ve=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Ne=this,et=0,ot=0,Zt=!1,qe=!1,Ue=[],Tt={data:[],errors:[],meta:{}};function Bt(ft){return q.skipEmptyLines==="greedy"?ft.join("").trim()==="":ft.length===1&&ft[0].length===0}function kt(){if(Tt&&ue&&(gt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+y.DefaultDelimiter+"'"),ue=!1),q.skipEmptyLines&&(Tt.data=Tt.data.filter(function(Lt){return!Bt(Lt)})),un()){let Lt=function(on,Ie){X(q.transformHeader)&&(on=q.transformHeader(on,Ie)),Ue.push(on)};if(Tt)if(Array.isArray(Tt.data[0])){for(var ft=0;un()&&ft<Tt.data.length;ft++)Tt.data[ft].forEach(Lt);Tt.data.splice(0,1)}else Tt.data.forEach(Lt)}function lt(Lt,on){for(var Ie=q.header?{}:[],$=0;$<Lt.length;$++){var Pe=$,Oe=Lt[$],Oe=((ye,pe)=>(Fe=>(q.dynamicTypingFunction&&q.dynamicTyping[Fe]===void 0&&(q.dynamicTyping[Fe]=q.dynamicTypingFunction(Fe)),(q.dynamicTyping[Fe]||q.dynamicTyping)===!0))(ye)?pe==="true"||pe==="TRUE"||pe!=="false"&&pe!=="FALSE"&&((Fe=>{if(Se.test(Fe)&&(Fe=parseFloat(Fe),K<Fe&&Fe<ce))return 1})(pe)?parseFloat(pe):Ve.test(pe)?new Date(pe):pe===""?null:pe):pe)(Pe=q.header?$>=Ue.length?"__parsed_extra":Ue[$]:Pe,Oe=q.transform?q.transform(Oe,Pe):Oe);Pe==="__parsed_extra"?(Ie[Pe]=Ie[Pe]||[],Ie[Pe].push(Oe)):Ie[Pe]=Oe}return q.header&&($>Ue.length?gt("FieldMismatch","TooManyFields","Too many fields: expected "+Ue.length+" fields but parsed "+$,ot+on):$<Ue.length&&gt("FieldMismatch","TooFewFields","Too few fields: expected "+Ue.length+" fields but parsed "+$,ot+on)),Ie}var Pt;Tt&&(q.header||q.dynamicTyping||q.transform)&&(Pt=1,!Tt.data.length||Array.isArray(Tt.data[0])?(Tt.data=Tt.data.map(lt),Pt=Tt.data.length):Tt.data=lt(Tt.data,0),q.header&&Tt.meta&&(Tt.meta.fields=Ue),ot+=Pt)}function un(){return q.header&&Ue.length===0}function gt(ft,lt,Pt,Lt){ft={type:ft,code:lt,message:Pt},Lt!==void 0&&(ft.row=Lt),Tt.errors.push(ft)}X(q.step)&&(Y=q.step,q.step=function(ft){Tt=ft,un()?kt():(kt(),Tt.data.length!==0&&(et+=ft.data.length,q.preview&&et>q.preview?ee.abort():(Tt.data=Tt.data[0],Y(Tt,Ne))))}),this.parse=function(ft,lt,Pt){var Lt=q.quoteChar||'"',Lt=(q.newline||(q.newline=this.guessLineEndings(ft,Lt)),ue=!1,q.delimiter?X(q.delimiter)&&(q.delimiter=q.delimiter(ft),Tt.meta.delimiter=q.delimiter):((Lt=((on,Ie,$,Pe,Oe)=>{var ye,pe,Fe,tt;Oe=Oe||[",","	","|",";",y.RECORD_SEP,y.UNIT_SEP];for(var it=0;it<Oe.length;it++){for(var Be,Mt=Oe[it],wt=0,At=0,Ht=0,cn=(Fe=void 0,new V({comments:Pe,delimiter:Mt,newline:Ie,preview:10}).parse(on)),fn=0;fn<cn.data.length;fn++)$&&Bt(cn.data[fn])?Ht++:(Be=cn.data[fn].length,At+=Be,Fe===void 0?Fe=Be:0<Be&&(wt+=Math.abs(Be-Fe),Fe=Be));0<cn.data.length&&(At/=cn.data.length-Ht),(pe===void 0||wt<=pe)&&(tt===void 0||tt<At)&&1.99<At&&(pe=wt,ye=Mt,tt=At)}return{successful:!!(q.delimiter=ye),bestDelimiter:ye}})(ft,q.newline,q.skipEmptyLines,q.comments,q.delimitersToGuess)).successful?q.delimiter=Lt.bestDelimiter:(ue=!0,q.delimiter=y.DefaultDelimiter),Tt.meta.delimiter=q.delimiter),W(q));return q.preview&&q.header&&Lt.preview++,G=ft,ee=new V(Lt),Tt=ee.parse(G,lt,Pt),kt(),Zt?{meta:{paused:!0}}:Tt||{meta:{paused:!1}}},this.paused=function(){return Zt},this.pause=function(){Zt=!0,ee.abort(),G=X(q.chunk)?"":G.substring(ee.getCharIndex())},this.resume=function(){Ne.streamer._halted?(Zt=!1,Ne.streamer.parseChunk(G,!0)):setTimeout(Ne.resume,3)},this.aborted=function(){return qe},this.abort=function(){qe=!0,ee.abort(),Tt.meta.aborted=!0,X(q.complete)&&q.complete(Tt),G=""},this.guessLineEndings=function(on,Lt){on=on.substring(0,1048576);var Lt=new RegExp(F(Lt)+"([^]*?)"+F(Lt),"gm"),Pt=(on=on.replace(Lt,"")).split("\r"),Lt=on.split(`
`),on=1<Lt.length&&Lt[0].length<Pt[0].length;if(Pt.length===1||on)return`
`;for(var Ie=0,$=0;$<Pt.length;$++)Pt[$][0]===`
`&&Ie++;return Ie>=Pt.length/2?`\r
`:"\r"}}function F(q){return q.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function V(q){var G=(q=q||{}).delimiter,ee=q.newline,ue=q.comments,Y=q.step,ce=q.preview,K=q.fastMode,Se=null,Ve=!1,Ne=q.quoteChar==null?'"':q.quoteChar,et=Ne;if(q.escapeChar!==void 0&&(et=q.escapeChar),(typeof G!="string"||-1<y.BAD_DELIMITERS.indexOf(G))&&(G=","),ue===G)throw new Error("Comment character same as delimiter");ue===!0?ue="#":(typeof ue!="string"||-1<y.BAD_DELIMITERS.indexOf(ue))&&(ue=!1),ee!==`
`&&ee!=="\r"&&ee!==`\r
`&&(ee=`
`);var ot=0,Zt=!1;this.parse=function(qe,Ue,Tt){if(typeof qe!="string")throw new Error("Input must be a string");var Bt=qe.length,kt=G.length,un=ee.length,gt=ue.length,ft=X(Y),lt=[],Pt=[],Lt=[],on=ot=0;if(!qe)return wt();if(K||K!==!1&&qe.indexOf(Ne)===-1){for(var Ie=qe.split(ee),$=0;$<Ie.length;$++){if(Lt=Ie[$],ot+=Lt.length,$!==Ie.length-1)ot+=ee.length;else if(Tt)return wt();if(!ue||Lt.substring(0,gt)!==ue){if(ft){if(lt=[],tt(Lt.split(G)),At(),Zt)return wt()}else tt(Lt.split(G));if(ce&&ce<=$)return lt=lt.slice(0,ce),wt(!0)}}return wt()}for(var Pe=qe.indexOf(G,ot),Oe=qe.indexOf(ee,ot),ye=new RegExp(F(et)+F(Ne),"g"),pe=qe.indexOf(Ne,ot);;)if(qe[ot]===Ne)for(pe=ot,ot++;;){if((pe=qe.indexOf(Ne,pe+1))===-1)return Tt||Pt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:lt.length,index:ot}),Be();if(pe===Bt-1)return Be(qe.substring(ot,pe).replace(ye,Ne));if(Ne===et&&qe[pe+1]===et)pe++;else if(Ne===et||pe===0||qe[pe-1]!==et){Pe!==-1&&Pe<pe+1&&(Pe=qe.indexOf(G,pe+1));var Fe=it((Oe=Oe!==-1&&Oe<pe+1?qe.indexOf(ee,pe+1):Oe)===-1?Pe:Math.min(Pe,Oe));if(qe.substr(pe+1+Fe,kt)===G){Lt.push(qe.substring(ot,pe).replace(ye,Ne)),qe[ot=pe+1+Fe+kt]!==Ne&&(pe=qe.indexOf(Ne,ot)),Pe=qe.indexOf(G,ot),Oe=qe.indexOf(ee,ot);break}if(Fe=it(Oe),qe.substring(pe+1+Fe,pe+1+Fe+un)===ee){if(Lt.push(qe.substring(ot,pe).replace(ye,Ne)),Mt(pe+1+Fe+un),Pe=qe.indexOf(G,ot),pe=qe.indexOf(Ne,ot),ft&&(At(),Zt))return wt();if(ce&&lt.length>=ce)return wt(!0);break}Pt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:lt.length,index:ot}),pe++}}else if(ue&&Lt.length===0&&qe.substring(ot,ot+gt)===ue){if(Oe===-1)return wt();ot=Oe+un,Oe=qe.indexOf(ee,ot),Pe=qe.indexOf(G,ot)}else if(Pe!==-1&&(Pe<Oe||Oe===-1))Lt.push(qe.substring(ot,Pe)),ot=Pe+kt,Pe=qe.indexOf(G,ot);else{if(Oe===-1)break;if(Lt.push(qe.substring(ot,Oe)),Mt(Oe+un),ft&&(At(),Zt))return wt();if(ce&&lt.length>=ce)return wt(!0)}return Be();function tt(Ht){lt.push(Ht),on=ot}function it(Ht){var cn=0;return cn=Ht!==-1&&(Ht=qe.substring(pe+1,Ht))&&Ht.trim()===""?Ht.length:cn}function Be(Ht){return Tt||(Ht===void 0&&(Ht=qe.substring(ot)),Lt.push(Ht),ot=Bt,tt(Lt),ft&&At()),wt()}function Mt(Ht){ot=Ht,tt(Lt),Lt=[],Oe=qe.indexOf(ee,ot)}function wt(Ht){if(q.header&&!Ue&&lt.length&&!Ve){var cn=lt[0],fn={},ut=new Set(cn);let pt=!1;for(let _t=0;_t<cn.length;_t++){let Nt=cn[_t];if(fn[Nt=X(q.transformHeader)?q.transformHeader(Nt,_t):Nt]){let Wt,wn=fn[Nt];for(;Wt=Nt+"_"+wn,wn++,ut.has(Wt););ut.add(Wt),cn[_t]=Wt,fn[Nt]++,pt=!0,(Se=Se===null?{}:Se)[Wt]=Nt}else fn[Nt]=1,cn[_t]=Nt;ut.add(Nt)}pt&&console.warn("Duplicate headers found and renamed."),Ve=!0}return{data:lt,errors:Pt,meta:{delimiter:G,linebreak:ee,aborted:Zt,truncated:!!Ht,cursor:on+(Ue||0),renamedHeaders:Se}}}function At(){Y(wt()),lt=[],Pt=[]}},this.abort=function(){Zt=!0},this.getCharIndex=function(){return ot}}function O(q){var G=q.data,ee=s[G.workerId],ue=!1;if(G.error)ee.userError(G.error,G.file);else if(G.results&&G.results.data){var Y={abort:function(){ue=!0,N(G.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:U,resume:U};if(X(ee.userStep)){for(var ce=0;ce<G.results.data.length&&(ee.userStep({data:G.results.data[ce],errors:G.results.errors,meta:G.results.meta},Y),!ue);ce++);delete G.results}else X(ee.userChunk)&&(ee.userChunk(G.results,Y,G.file),delete G.results)}G.finished&&!ue&&N(G.workerId,G.results)}function N(q,G){var ee=s[q];X(ee.userComplete)&&ee.userComplete(G),ee.terminate(),delete s[q]}function U(){throw new Error("Not implemented.")}function W(q){if(typeof q!="object"||q===null)return q;var G,ee=Array.isArray(q)?[]:{};for(G in q)ee[G]=W(q[G]);return ee}function ne(q,G){return function(){q.apply(G,arguments)}}function X(q){return typeof q=="function"}return y.parse=function(q,G){var ee=(G=G||{}).dynamicTyping||!1;if(X(ee)&&(G.dynamicTypingFunction=ee,ee={}),G.dynamicTyping=ee,G.transform=!!X(G.transform)&&G.transform,!G.worker||!y.WORKERS_SUPPORTED)return ee=null,y.NODE_STREAM_INPUT,typeof q=="string"?(q=(ue=>ue.charCodeAt(0)!==65279?ue:ue.slice(1))(q),ee=new(G.download?x:A)(G)):q.readable===!0&&X(q.read)&&X(q.on)?ee=new k(G):(i.File&&q instanceof File||q instanceof Object)&&(ee=new M(G)),ee.stream(q);(ee=(()=>{var ue;return!!y.WORKERS_SUPPORTED&&(ue=(()=>{var Y=i.URL||i.webkitURL||null,ce=n.toString();return y.BLOB_URL||(y.BLOB_URL=Y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ce,")();"],{type:"text/javascript"})))})(),(ue=new i.Worker(ue)).onmessage=O,ue.id=f++,s[ue.id]=ue)})()).userStep=G.step,ee.userChunk=G.chunk,ee.userComplete=G.complete,ee.userError=G.error,G.step=X(G.step),G.chunk=X(G.chunk),G.complete=X(G.complete),G.error=X(G.error),delete G.worker,ee.postMessage({input:q,config:G,workerId:ee.id})},y.unparse=function(q,G){var ee=!1,ue=!0,Y=",",ce=`\r
`,K='"',Se=K+K,Ve=!1,Ne=null,et=!1,ot=((()=>{if(typeof G=="object"){if(typeof G.delimiter!="string"||y.BAD_DELIMITERS.filter(function(Ue){return G.delimiter.indexOf(Ue)!==-1}).length||(Y=G.delimiter),typeof G.quotes!="boolean"&&typeof G.quotes!="function"&&!Array.isArray(G.quotes)||(ee=G.quotes),typeof G.skipEmptyLines!="boolean"&&typeof G.skipEmptyLines!="string"||(Ve=G.skipEmptyLines),typeof G.newline=="string"&&(ce=G.newline),typeof G.quoteChar=="string"&&(K=G.quoteChar),typeof G.header=="boolean"&&(ue=G.header),Array.isArray(G.columns)){if(G.columns.length===0)throw new Error("Option columns is empty");Ne=G.columns}G.escapeChar!==void 0&&(Se=G.escapeChar+K),G.escapeFormulae instanceof RegExp?et=G.escapeFormulae:typeof G.escapeFormulae=="boolean"&&G.escapeFormulae&&(et=/^[=+\-@\t\r].*$/)}})(),new RegExp(F(K),"g"));if(typeof q=="string"&&(q=JSON.parse(q)),Array.isArray(q)){if(!q.length||Array.isArray(q[0]))return Zt(null,q,Ve);if(typeof q[0]=="object")return Zt(Ne||Object.keys(q[0]),q,Ve)}else if(typeof q=="object")return typeof q.data=="string"&&(q.data=JSON.parse(q.data)),Array.isArray(q.data)&&(q.fields||(q.fields=q.meta&&q.meta.fields||Ne),q.fields||(q.fields=Array.isArray(q.data[0])?q.fields:typeof q.data[0]=="object"?Object.keys(q.data[0]):[]),Array.isArray(q.data[0])||typeof q.data[0]=="object"||(q.data=[q.data])),Zt(q.fields||[],q.data||[],Ve);throw new Error("Unable to serialize unrecognized input");function Zt(Ue,Tt,Bt){var kt="",un=(typeof Ue=="string"&&(Ue=JSON.parse(Ue)),typeof Tt=="string"&&(Tt=JSON.parse(Tt)),Array.isArray(Ue)&&0<Ue.length),gt=!Array.isArray(Tt[0]);if(un&&ue){for(var ft=0;ft<Ue.length;ft++)0<ft&&(kt+=Y),kt+=qe(Ue[ft],ft);0<Tt.length&&(kt+=ce)}for(var lt=0;lt<Tt.length;lt++){var Pt=(un?Ue:Tt[lt]).length,Lt=!1,on=un?Object.keys(Tt[lt]).length===0:Tt[lt].length===0;if(Bt&&!un&&(Lt=Bt==="greedy"?Tt[lt].join("").trim()==="":Tt[lt].length===1&&Tt[lt][0].length===0),Bt==="greedy"&&un){for(var Ie=[],$=0;$<Pt;$++){var Pe=gt?Ue[$]:$;Ie.push(Tt[lt][Pe])}Lt=Ie.join("").trim()===""}if(!Lt){for(var Oe=0;Oe<Pt;Oe++){0<Oe&&!on&&(kt+=Y);var ye=un&&gt?Ue[Oe]:Oe;kt+=qe(Tt[lt][ye],Oe)}lt<Tt.length-1&&(!Bt||0<Pt&&!on)&&(kt+=ce)}}return kt}function qe(Ue,Tt){var Bt,kt;return Ue==null?"":Ue.constructor===Date?JSON.stringify(Ue).slice(1,25):(kt=!1,et&&typeof Ue=="string"&&et.test(Ue)&&(Ue="'"+Ue,kt=!0),Bt=Ue.toString().replace(ot,Se),(kt=kt||ee===!0||typeof ee=="function"&&ee(Ue,Tt)||Array.isArray(ee)&&ee[Tt]||((un,gt)=>{for(var ft=0;ft<gt.length;ft++)if(-1<un.indexOf(gt[ft]))return!0;return!1})(Bt,y.BAD_DELIMITERS)||-1<Bt.indexOf(Y)||Bt.charAt(0)===" "||Bt.charAt(Bt.length-1)===" ")?K+Bt+K:Bt)}},y.RECORD_SEP="",y.UNIT_SEP="",y.BYTE_ORDER_MARK="\uFEFF",y.BAD_DELIMITERS=["\r",`
`,'"',y.BYTE_ORDER_MARK],y.WORKERS_SUPPORTED=!u&&!!i.Worker,y.NODE_STREAM_INPUT=1,y.LocalChunkSize=10485760,y.RemoteChunkSize=5242880,y.DefaultDelimiter=",",y.Parser=V,y.ParserHandle=L,y.NetworkStreamer=x,y.FileStreamer=M,y.StringStreamer=A,y.ReadableStreamStreamer=k,i.jQuery&&((o=i.jQuery).fn.parse=function(q){var G=q.config||{},ee=[];return this.each(function(ce){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var K=0;K<this.files.length;K++)ee.push({file:this.files[K],inputElem:this,instanceConfig:o.extend({},G)})}),ue(),this;function ue(){if(ee.length===0)X(q.complete)&&q.complete();else{var ce,K,Se,Ve,Ne=ee[0];if(X(q.before)){var et=q.before(Ne.file,Ne.inputElem);if(typeof et=="object"){if(et.action==="abort")return ce="AbortError",K=Ne.file,Se=Ne.inputElem,Ve=et.reason,void(X(q.error)&&q.error({name:ce},K,Se,Ve));if(et.action==="skip")return void Y();typeof et.config=="object"&&(Ne.instanceConfig=o.extend(Ne.instanceConfig,et.config))}else if(et==="skip")return void Y()}var ot=Ne.instanceConfig.complete;Ne.instanceConfig.complete=function(Zt){X(ot)&&ot(Zt,Ne.file,Ne.inputElem),Y()},y.parse(Ne.file,Ne.instanceConfig)}}function Y(){ee.splice(0,1),ue()}}),l&&(i.onmessage=function(q){q=q.data,y.WORKER_ID===void 0&&q&&(y.WORKER_ID=q.workerId),typeof q.input=="string"?i.postMessage({workerId:y.WORKER_ID,results:y.parse(q.input,q.config),finished:!0}):(i.File&&q.input instanceof File||q.input instanceof Object)&&(q=y.parse(q.input,q.config))&&i.postMessage({workerId:y.WORKER_ID,results:q,finished:!0})}),(x.prototype=Object.create(b.prototype)).constructor=x,(M.prototype=Object.create(b.prototype)).constructor=M,(A.prototype=Object.create(A.prototype)).constructor=A,(k.prototype=Object.create(b.prototype)).constructor=k,y})})(Vk);var WB=Vk.exports;const qB=fd(WB);var z_={};z_.attr=IM;z_.tagClose=KB;z_.tag=YB;z_.encode=XB;function IM(e){return e&&e.length?" "+e.map(function(t){return t[0]+'="'+t[1]+'"'}).join(" "):""}function KB(e,t){return"<"+e+IM(t)+"/>"}function YB(e,t,n){return"<"+e+IM(n)+">"+t+"</"+e+">"}function XB(e){return(e===null?"":e.toString()).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var jk=z_,Mr=jk.tag,h_=jk.encode,QB=function(t,n){return n=n||{documentName:void 0,documentDescription:void 0,name:"name",description:"description",simplestyle:!1,timestamp:"timestamp"},'<?xml version="1.0" encoding="UTF-8"?>'+Mr("kml",Mr("Document",eN(n)+tN(n)+JB(t,n)),[["xmlns","http://www.opengis.net/kml/2.2"]])};function $2(e,t){return function(n){if(!n.properties||!uu.valid(n.geometry))return"";var i=uu.any(n.geometry);if(!i)return"";var o="",u="";if(e.simplestyle){var l=fN(n.properties);l&&(uu.isPoint(n.geometry)&&oN(n.properties)?(t.indexOf(l)===-1&&(o=lN(n.properties,l),t.push(l)),u=Mr("styleUrl","#"+l)):(uu.isPolygon(n.geometry)||uu.isLine(n.geometry))&&hN(n.properties)&&(t.indexOf(l)===-1&&(o=dN(n.properties,l),t.push(l)),u=Mr("styleUrl","#"+l)))}return o+Mr("Placemark",nN(n.properties,e)+rN(n.properties,e)+sN(n.properties)+iN(n.properties,e)+i+u)}}function JB(e,t){if(!e.type)return"";var n=[];switch(e.type){case"FeatureCollection":return e.features?e.features.map($2(t,n)).join(""):"";case"Feature":return $2(t,n)(e);default:return $2(t,n)({type:"Feature",geometry:e,properties:{}})}}function eN(e){return e.documentName!==void 0?Mr("name",e.documentName):""}function tN(e){return e.documentDescription!==void 0?Mr("description",e.documentDescription):""}function nN(e,t){return e[t.name]?Mr("name",h_(e[t.name])):""}function rN(e,t){return e[t.description]?Mr("description",h_(e[t.description])):""}function iN(e,t){return e[t.timestamp]?Mr("TimeStamp",Mr("when",h_(e[t.timestamp]))):""}var uu={Point:function(e){return Mr("Point",Mr("coordinates",e.coordinates.join(",")))},LineString:function(e){return Mr("LineString",Mr("coordinates",H2(e.coordinates)))},Polygon:function(e){if(!e.coordinates.length)return"";var t=e.coordinates[0],n=e.coordinates.slice(1),i=Mr("outerBoundaryIs",Mr("LinearRing",Mr("coordinates",H2(t)))),o=n.map(function(u){return Mr("innerBoundaryIs",Mr("LinearRing",Mr("coordinates",H2(u))))}).join("");return Mr("Polygon",i+o)},MultiPoint:function(e){return e.coordinates.length?Mr("MultiGeometry",e.coordinates.map(function(t){return uu.Point({coordinates:t})}).join("")):""},MultiPolygon:function(e){return e.coordinates.length?Mr("MultiGeometry",e.coordinates.map(function(t){return uu.Polygon({coordinates:t})}).join("")):""},MultiLineString:function(e){return e.coordinates.length?Mr("MultiGeometry",e.coordinates.map(function(t){return uu.LineString({coordinates:t})}).join("")):""},GeometryCollection:function(e){return Mr("MultiGeometry",e.geometries.map(uu.any).join(""))},valid:function(e){return e&&e.type&&(e.coordinates||e.type==="GeometryCollection"&&e.geometries&&e.geometries.every(uu.valid))},any:function(e){return uu[e.type]?uu[e.type](e):""},isPoint:function(e){return e.type==="Point"||e.type==="MultiPoint"},isPolygon:function(e){return e.type==="Polygon"||e.type==="MultiPolygon"},isLine:function(e){return e.type==="LineString"||e.type==="MultiLineString"}};function H2(e){return e.map(function(t){return t.join(",")}).join(" ")}function sN(e){return Mr("ExtendedData",pN(e).map(aN).join(""))}function aN(e){return Mr("Data",Mr("value",h_(e[1])),[["name",h_(e[0])]])}function oN(e){return!!(e["marker-size"]||e["marker-symbol"]||e["marker-color"])}function lN(e,t){return Mr("Style",Mr("IconStyle",Mr("Icon",Mr("href",uN(e))))+cN(),[["id",t]])}function uN(e){var t=e["marker-size"]||"medium",n=e["marker-symbol"]?"-"+e["marker-symbol"]:"",i=(e["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+t.charAt(0)+n+"+"+i+".png"}function cN(e){return Mr("hotSpot","",[["xunits","fraction"],["yunits","fraction"],["x",.5],["y",.5]])}function hN(e){for(var t in e)if({stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0}[t])return!0}function dN(e,t){var n=Mr("LineStyle",[Mr("color",gT(e.stroke,e["stroke-opacity"])||"ff555555")+Mr("width",e["stroke-width"]===void 0?2:e["stroke-width"])]),i="";return(e.fill||e["fill-opacity"])&&(i=Mr("PolyStyle",[Mr("color",gT(e.fill,e["fill-opacity"])||"88555555")])),Mr("Style",n+i,[["id",t]])}function fN(e){var t="";return e["marker-symbol"]&&(t=t+"ms"+e["marker-symbol"]),e["marker-color"]&&(t=t+"mc"+e["marker-color"].replace("#","")),e["marker-size"]&&(t=t+"ms"+e["marker-size"]),e.stroke&&(t=t+"s"+e.stroke.replace("#","")),e["stroke-width"]&&(t=t+"sw"+e["stroke-width"].toString().replace(".","")),e["stroke-opacity"]&&(t=t+"mo"+e["stroke-opacity"].toString().replace(".","")),e.fill&&(t=t+"f"+e.fill.replace("#","")),e["fill-opacity"]&&(t=t+"fo"+e["fill-opacity"].toString().replace(".","")),t}function gT(e,t){if(typeof e!="string")return"";if(e=e.replace("#","").toLowerCase(),e.length===3)e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2];else if(e.length!==6)return"";var n=e[0]+e[1],i=e[2]+e[3],o=e[4]+e[5],u="ff";return typeof t=="number"&&t>=0&&t<=1&&(u=(t*255).toString(16),u.indexOf(".")>-1&&(u=u.substr(0,u.indexOf("."))),u.length<2&&(u="0"+u)),u+o+i+n}function pN(e){var t=[];for(var n in e)t.push([n,e[n]]);return t}const mN=fd(QB);function gN(e){var n;switch((n=e.split(".").pop())==null?void 0:n.toLowerCase()){case"geojson":case"json":return"geojson";case"zip":case"shp":return"shapefile";case"kml":return"kml";case"csv":return"csv";default:return null}}function yN(){async function e(t,{format:n,filename:i="data"}={}){const o=n||gN(i);if(!o)return console.error("Không xác định được định dạng đầu ra."),null;switch(o){case"geojson":return new Blob([JSON.stringify(t)],{type:"application/geo+json"});case"shapefile":{const u={folder:"shapefile",types:{point:"points",polygon:"polygons",line:"lines"},compression:"DEFLATE",outputType:"blob"},l=await wA.zip(t,u);return l instanceof Blob?l:l instanceof ArrayBuffer?new Blob([l]):l instanceof Uint8Array?new Blob([l.buffer]):Array.isArray(l)?new Blob([new Uint8Array(l).buffer]):typeof l=="string"?new Blob([l],{type:"text/plain"}):(console.error("Kết quả không xác định:",l),null)}case"kml":{const u=mN(t);return new Blob([u],{type:"application/vnd.google-earth.kml+xml"})}case"csv":{const u=t.features.map(s=>({...s.properties,geometry:JSON.stringify(s.geometry)})),l=qB.unparse(u);return new Blob([l],{type:"text/csv"})}default:return console.error("Định dạng không được hỗ trợ:",o),null}}return{convert:e}}const yT={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},vN={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:e=>["horizontal","vertical","both","none"].includes(e)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return yT[this.type]||yT.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},_N=["width","height","viewBox"],bN=["d"];function xN(e,t,n,i,o,u){return Ae(),st("svg",{width:u.sizeValue,height:u.sizeValue,viewBox:u.viewboxValue,style:Yr(u.styles)},[Le("path",{d:n.path},null,8,bN)],12,_N)}const An=Cn(vN,[["render",xN],["__scopeId","data-v-0fb36228"]]);var Uk="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",AN="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",$k="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",Hk="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",Py="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",wN="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",Gk="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",CN="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",IN="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",Zk="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",F_="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",MN="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",SN="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",Kf="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",MM="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",SM="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",EN="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",TN="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",PN="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",EM="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",TM="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",kN="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",LN="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",DN="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",PM="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",RN="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",ON="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",zN="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",Wk="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",kM="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",FN="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",qk="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",BN="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",NN="M15,19L9,16.89V5L15,7.11M20.5,3C20.44,3 20.39,3 20.34,3L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21C3.55,21 3.61,21 3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3Z",VN="M9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21L3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19.03 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3L20.34,3.03L15,5.1L9,3M8,5.45V17.15L5,18.31V6.46L8,5.45M10,5.47L14,6.87V18.53L10,17.13V5.47M19,5.7V17.54L16,18.55V6.86L19,5.7M7.46,6.3L5.57,6.97V9.12L7.46,8.45V6.3M7.46,9.05L5.57,9.72V11.87L7.46,11.2V9.05M7.46,11.8L5.57,12.47V14.62L7.46,13.95V11.8M7.46,14.55L5.57,15.22V17.37L7.46,16.7V14.55Z",LM="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",jN="M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M14,6.11L8,4V15.89L9,16.24V16.5C9,17.14 9.09,17.76 9.26,18.34L8,17.9L2.66,19.97L2.5,20A0.5,0.5 0 0,1 2,19.5V4.38C2,4.15 2.15,3.97 2.36,3.9L8,2L14,4.1L19.34,2H19.5A0.5,0.5 0 0,1 20,2.5V11.81C18.83,10.69 17.25,10 15.5,10C15,10 14.5,10.06 14,10.17V6.11Z",aoe="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",Kk="M7,10L12,15L17,10H7Z",UN="M14,7L9,12L14,17V7Z",$N="M7,15L12,10L17,15H7Z",HN="M19,13H5V11H19V13Z",Yk="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",Yf="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",GN="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",ZN="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",WN="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",qN="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",KN="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",YN="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",XN="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",QN="M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";const JN={name:"MapButton",components:{SvgIcon:An},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:qk}}}},e9=["disabled"],t9={class:"map-control-button__content"};function n9(e,t,n,i,o,u){const l=Eo("SvgIcon");return Ae(),st("button",ar({class:"map-control-button",style:u.bindStyle,disabled:n.disabled},e.$attrs,{class:{"map-control-button-active":n.active,"map-control-button-disabled":n.disabled}}),[Le("span",t9,[n.loading?(Ae(),$t(l,{key:0,size:n.height*2/3,type:"mdi",path:u.path.loading,class:"spin"},null,8,["size","path"])):In(e.$slots,"default",{key:1},void 0,!0)])],16,e9)}const Xk=Cn(JN,[["render",n9],["__scopeId","data-v-9eb50069"]]),r9={name:"MapCard",props:{height:{type:[String,Number],default:void 0},width:{type:[String,Number],default:void 0}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}};function i9(e,t,n,i,o,u){return Ae(),st("div",ar({class:"card",style:u.cardStyle},e.$attrs),[Le("div",null,[In(e.$slots,"default")]),t[0]||(t[0]=gA('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1))],16)}const s9=Cn(r9,[["render",i9]]),a9={name:"MapIcon",props:{},computed:{iconName(){return""}}};function o9(e,t,n,i,o,u){return Ae(),st("i",{class:ei(["map-icon mdi",u.iconName])},null,2)}const DM=Cn(a9,[["render",o9],["__scopeId","data-v-afa3c6ff"]]),l9={name:"MapControlButton",components:{MapButton:Xk,MapIcon:DM},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},u9={key:1,class:"button-container"},c9=["title"];function h9(e,t,n,i,o,u){const l=Eo("MapIcon"),s=Eo("MapButton");return u.isGroup?(Ae(),$t(s,ar({key:0},e.$attrs,{active:n.active,height:u.groupSize,title:n.tooltip||n.title,width:u.groupSize,disabled:n.disabled}),{default:dt(()=>[In(e.$slots,"default",{},()=>[He(l,null,{default:dt(()=>[Qi(gn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(Ae(),st("div",u9,[Le("div",{title:n.tooltip||n.title},[In(e.$slots,"content",{},()=>[He(s,ar(e.$attrs,{active:n.active,height:n.size,loading:n.loading,width:n.size,disabled:n.disabled}),{default:dt(()=>[In(e.$slots,"default",{},()=>[He(l,null,{default:dt(()=>[Qi(gn(n.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,c9)]))}const Br=Cn(l9,[["render",h9],["__scopeId","data-v-0fcaf8b5"]]),d9={name:"MapControlGroupButton",components:{MapButton:Xk,MapIcon:DM},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:[Number,String],default:32}},provide(){return{isGroup:!0,size:this.size}},computed:{containerStyle(){return{width:this.row?void 0:`${this.size}px`,height:this.row?`${this.size}px`:void 0}}}};function f9(e,t,n,i,o,u){const l=Eo("MapIcon"),s=Eo("MapButton");return Ae(),st("div",{class:ei(["button-container button-group-container",{"button-group-row-container":n.row,"button-group-column-container":!n.row}]),style:Yr(u.containerStyle)},[Le("div",{class:ei(["button-group-sheet",{"button-group-sheet-column":!n.row}]),style:{"border-radius":"150px"}},[(Ae(!0),st(Gn,null,ii(n.items,(f,y)=>(Ae(),$t(s,{key:y,height:Number(n.size),width:Number(n.size),text:"",title:f.title,onClick:f.onClick},{default:dt(()=>[He(l,null,{default:dt(()=>[Qi(gn(f.icon),1)]),_:2},1024)]),_:2},1032,["height","width","title","onClick"]))),128)),In(e.$slots,"default",{},void 0,!0)],2)],6)}const ky=Cn(d9,[["render",f9],["__scopeId","data-v-63dd0004"]]),p9={name:"MapImage",props:{src:{}},data:()=>({}),computed:{styleImage(){return this.src?{"background-image":`url(${this.src})`}:{}}},methods:{}},m9={class:"map-image"},g9={class:"map-image__content"};function y9(e,t,n,i,o,u){return Ae(),st("div",m9,[t[0]||(t[0]=Le("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),Le("div",{class:"map-image__image",style:Yr(u.styleImage)},null,4),Le("div",g9,[In(e.$slots,"default",{},void 0,!0)])])}const uI=Cn(p9,[["render",y9],["__scopeId","data-v-b4b63d95"]]),v9={class:"form-group"},_9={key:0},b9={class:"input-container"},x9=["disabled"],A9={name:"InputText"},w9=Dn({...A9,props:Ui({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue");return(n,i)=>(Ae(),st("div",v9,[e.label?(Ae(),st("label",_9,gn(e.label),1)):an("",!0),Le("div",b9,[kl(Le("input",ar(n.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=o=>t.value=o),disabled:e.disabled}),null,16,x9),[[vM,t.value]])])]))}}),pi=Cn(w9,[["__scopeId","data-v-705afc99"]]),C9={class:"form-group"},I9={key:0},M9={class:"input-container"},S9={value:"",disabled:"",selected:"",hidden:""},E9=["value"],T9=Dn({__name:"input-select",props:Ui({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue"),n=e;function i(l){return typeof l=="string"||n.returnObject?l:l[n.itemValue]}function o(l){return typeof l=="string"?l:l[n.itemText]}function u(l){return typeof l=="string"?l:l[n.itemValue]}return(l,s)=>(Ae(),st("div",C9,[e.label?(Ae(),st("label",I9,gn(e.label),1)):an("",!0),Le("div",M9,[kl(Le("select",ar(l.$attrs,{"onUpdate:modelValue":s[0]||(s[0]=f=>t.value=f),required:""}),[Le("option",S9,gn(l.$attrs.placeholder),1),(Ae(!0),st(Gn,null,ii(e.items,f=>(Ae(),st("option",{value:i(f),key:u(f)},gn(o(f)),9,E9))),128))],16),[[bA,t.value]])])]))}}),$f=Cn(T9,[["__scopeId","data-v-2fa00323"]]),P9=Dn({__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(e){const t=e;return(n,i)=>(Ae(),st("button",ar({class:"map-control__button clickable"},n.$attrs,{class:{"map-control__button-active":t.active,"map-control__button-disabled":t.disabled}}),[In(n.$slots,"default",{},void 0,!0)],16))}}),il=Cn(P9,[["__scopeId","data-v-e3702ca3"]]),k9=["aria-expanded"],L9={class:"collapse-header__title"},D9={class:"collapse-header__icon"},R9={key:0,class:"collapse-content"},O9={class:"collapse-content-box"},z9={name:"Collapse"},F9=Object.assign(z9,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(e,{emit:t}){const n=e,i=t,o=Qt(n.selected),u=()=>{o.value=!o.value,i("update:selected",o.value),o.value?i("open"):i("close")},l={open:Kk,close:$N};return(s,f)=>(Ae(),st("div",{class:ei(["collapse collapse-item",{"is-active":o.value}])},[Le("div",{class:"collapse-header touchable",role:"tab","aria-expanded":o.value?"true":"false",onClick:Rr(u,["prevent"])},[Le("div",L9,[In(s.$slots,"header",{},void 0,!0)]),Le("div",D9,[o.value?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:l.close},null,8,["path"])):(Ae(),$t(se(An),{key:1,size:"14",type:"mdi",path:l.open},null,8,["path"]))])],8,k9),He($5,{name:"fade"},{default:dt(()=>[o.value?(Ae(),st("div",R9,[Le("div",O9,[In(s.$slots,"default",{},void 0,!0)])])):an("",!0)]),_:3})],2))}}),cI=Cn(F9,[["__scopeId","data-v-208c4e72"]]),B9={class:"form-group"},N9={key:0},V9={class:"input-container"},j9=Dn({__name:"input-textarea",props:Ui({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue");return(n,i)=>(Ae(),st("div",B9,[e.label?(Ae(),st("label",N9,gn(e.label),1)):an("",!0),Le("div",V9,[kl(Le("textarea",ar(n.$attrs,{"onUpdate:modelValue":i[0]||(i[0]=o=>t.value=o)}),null,16),[[sh,t.value]])])]))}}),Qk=Cn(j9,[["__scopeId","data-v-23a6d5c7"]]),U9={class:"form-group"},$9={key:0},H9={class:"input-container"},G9=["min","max","step","disabled"],Z9={class:"input-slider__value"},W9=["min","max","step","disabled"],q9=Dn({__name:"input-slider",props:Ui({label:String,min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue"),n=e,i=dn(()=>(t.value-n.min)*100/(n.max-n.min)+"% 100%");return(o,u)=>(Ae(),st("div",U9,[e.label?(Ae(),st("label",$9,gn(e.label),1)):an("",!0),Le("div",H9,[kl(Le("input",{"onUpdate:modelValue":u[0]||(u[0]=l=>t.value=l),type:"range",min:e.min,max:e.max,step:e.step,style:Yr({backgroundSize:i.value}),disabled:e.disabled},null,12,G9),[[sh,t.value]]),Le("div",Z9,[kl(Le("input",{"onUpdate:modelValue":u[1]||(u[1]=l=>t.value=l),type:"number",min:e.min,max:e.max,step:e.step,disabled:e.disabled},null,8,W9),[[sh,t.value]])])])]))}}),Sx=Cn(q9,[["__scopeId","data-v-6248ac13"]]),K9={class:"form-group"},Y9={class:"form-control form-checkbox"},X9=["disabled"],Q9=Dn({__name:"input-checkbox",props:Ui({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue");return(n,i)=>(Ae(),st("div",K9,[Le("div",Y9,[kl(Le("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=o=>t.value=o),disabled:e.disabled},null,8,X9),[[_A,t.value]]),Le("label",null,gn(e.label),1)])]))}}),Jk=Cn(Q9,[["__scopeId","data-v-d59a9d80"]]),J9={class:"form-group"},e7={key:0},t7={class:"input-container"},n7=["onClick"],r7={__name:"input-choose",props:Ui({label:String,items:{type:Array,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue");function n(i){t.value=i.value}return(i,o)=>(Ae(),st("div",J9,[e.label?(Ae(),st("label",e7,gn(e.label),1)):an("",!0),Le("div",t7,[(Ae(!0),st(Gn,null,ii(e.items,u=>(Ae(),st("div",{key:u.value,class:ei(["item-choose",{"item-choose-active":u.value===t.value}]),onClick:Rr(l=>n(u),["stop"])},gn(u.text),11,n7))),128))])]))}},i7=Cn(r7,[["__scopeId","data-v-456d99be"]]),s7="";function qy(e,t){t===void 0&&(t={});var n=t.insertAt;if(!(!e||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",n==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}const Ky=function(e,t){const{componentPrefix:n=s7}=t||{};e.component(`${n}${this.name}`,this)},G2={};var B_={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle(){return{"background-image":`url(${o7(this.white,this.grey,this.size)})`}}}};function a7(e,t,n){if(typeof document>"u")return null;const i=document.createElement("canvas");i.width=i.height=n*2;const o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null}function o7(e,t,n){const i=`${e},${t},${n}`;if(G2[i])return G2[i];const o=a7(e,t,n);return G2[i]=o,o}function l7(e,t,n,i,o,u){return Ae(),st("div",{class:"vc-checkerboard",style:Yr(u.bgStyle)},null,4)}var u7=".vc-checkerboard{background-size:contain;bottom:0;left:0;position:absolute;right:0;top:0}";qy(u7);B_.render=l7;B_.__file="src/components/checkboard/checkboard.vue";B_.install=Ky;var EA={name:"Alpha",components:{Checkboard:B_},props:{value:Object,onChange:Function},computed:{colors(){return this.value},gradientColor(){const{rgba:e}=this.colors,t=[e.r,e.g,e.b].join(",");return`linear-gradient(to right, rgba(${t}, 0) 0%, rgba(${t}, 1) 100%)`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,o=n.getBoundingClientRect().left+window.pageXOffset,l=(e.pageX||(e.touches?e.touches[0].pageX:0))-o;let s;l<0?s=0:l>i?s=1:s=Math.round(l*100/i)/100,this.colors.a!==s&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:s,source:"rgba"})},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const c7={class:"vc-alpha"},h7={class:"vc-alpha-checkboard-wrap"},d7=Le("div",{class:"vc-alpha-picker"},null,-1),f7=[d7];function p7(e,t,n,i,o,u){const l=Eo("Checkboard");return Ae(),st("div",c7,[Le("div",h7,[He(l)]),Le("div",{class:"vc-alpha-gradient",style:Yr({background:u.gradientColor})},null,4),Le("div",{ref:"container",class:"vc-alpha-container",onMousedown:t[0]||(t[0]=(...s)=>u.handleMouseDown&&u.handleMouseDown(...s)),onTouchmove:t[1]||(t[1]=(...s)=>u.handleChange&&u.handleChange(...s)),onTouchstart:t[2]||(t[2]=(...s)=>u.handleChange&&u.handleChange(...s))},[Le("div",{class:"vc-alpha-pointer",style:Yr({left:`${u.colors.a*100}%`})},f7,4)],544)])}var m7=".vc-alpha,.vc-alpha-checkboard-wrap{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-checkboard-wrap{overflow:hidden}.vc-alpha-gradient{bottom:0;left:0;position:absolute;right:0;top:0}.vc-alpha-container{cursor:pointer;height:100%;margin:0 3px;position:relative;z-index:2}.vc-alpha-pointer{position:absolute;z-index:2}.vc-alpha-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";qy(m7);EA.render=p7;EA.__file="src/components/alpha/alpha.vue";EA.install=Ky;function Fa(e,t){g7(e)&&(e="100%");var n=y7(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Cb(e){return Math.min(1,Math.max(0,e))}function g7(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function y7(e){return typeof e=="string"&&e.indexOf("%")!==-1}function eL(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ib(e){return e<=1?"".concat(Number(e)*100,"%"):e}function mm(e){return e.length===1?"0"+e:String(e)}function v7(e,t,n){return{r:Fa(e,255)*255,g:Fa(t,255)*255,b:Fa(n,255)*255}}function vT(e,t,n){e=Fa(e,255),t=Fa(t,255),n=Fa(n,255);var i=Math.max(e,t,n),o=Math.min(e,t,n),u=0,l=0,s=(i+o)/2;if(i===o)l=0,u=0;else{var f=i-o;switch(l=s>.5?f/(2-i-o):f/(i+o),i){case e:u=(t-n)/f+(t<n?6:0);break;case t:u=(n-e)/f+2;break;case n:u=(e-t)/f+4;break}u/=6}return{h:u,s:l,l:s}}function Z2(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _7(e,t,n){var i,o,u;if(e=Fa(e,360),t=Fa(t,100),n=Fa(n,100),t===0)o=n,u=n,i=n;else{var l=n<.5?n*(1+t):n+t-n*t,s=2*n-l;i=Z2(s,l,e+1/3),o=Z2(s,l,e),u=Z2(s,l,e-1/3)}return{r:i*255,g:o*255,b:u*255}}function _T(e,t,n){e=Fa(e,255),t=Fa(t,255),n=Fa(n,255);var i=Math.max(e,t,n),o=Math.min(e,t,n),u=0,l=i,s=i-o,f=i===0?0:s/i;if(i===o)u=0;else{switch(i){case e:u=(t-n)/s+(t<n?6:0);break;case t:u=(n-e)/s+2;break;case n:u=(e-t)/s+4;break}u/=6}return{h:u,s:f,v:l}}function b7(e,t,n){e=Fa(e,360)*6,t=Fa(t,100),n=Fa(n,100);var i=Math.floor(e),o=e-i,u=n*(1-t),l=n*(1-o*t),s=n*(1-(1-o)*t),f=i%6,y=[n,l,u,u,s,n][f],b=[s,n,n,l,u,u][f],x=[u,u,s,n,n,l][f];return{r:y*255,g:b*255,b:x*255}}function bT(e,t,n,i){var o=[mm(Math.round(e).toString(16)),mm(Math.round(t).toString(16)),mm(Math.round(n).toString(16))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function x7(e,t,n,i,o){var u=[mm(Math.round(e).toString(16)),mm(Math.round(t).toString(16)),mm(Math.round(n).toString(16)),mm(A7(i))];return o&&u[0].startsWith(u[0].charAt(1))&&u[1].startsWith(u[1].charAt(1))&&u[2].startsWith(u[2].charAt(1))&&u[3].startsWith(u[3].charAt(1))?u[0].charAt(0)+u[1].charAt(0)+u[2].charAt(0)+u[3].charAt(0):u.join("")}function A7(e){return Math.round(parseFloat(e)*255).toString(16)}function xT(e){return Il(e)/255}function Il(e){return parseInt(e,16)}function w7(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var hI={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function C7(e){var t={r:0,g:0,b:0},n=1,i=null,o=null,u=null,l=!1,s=!1;return typeof e=="string"&&(e=S7(e)),typeof e=="object"&&(Kh(e.r)&&Kh(e.g)&&Kh(e.b)?(t=v7(e.r,e.g,e.b),l=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Kh(e.h)&&Kh(e.s)&&Kh(e.v)?(i=Ib(e.s),o=Ib(e.v),t=b7(e.h,i,o),l=!0,s="hsv"):Kh(e.h)&&Kh(e.s)&&Kh(e.l)&&(i=Ib(e.s),u=Ib(e.l),t=_7(e.h,i,u),l=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=eL(n),{ok:l,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var I7="[-\\+]?\\d+%?",M7="[-\\+]?\\d*\\.\\d+%?",Tf="(?:".concat(M7,")|(?:").concat(I7,")"),W2="[\\s|\\(]+(".concat(Tf,")[,|\\s]+(").concat(Tf,")[,|\\s]+(").concat(Tf,")\\s*\\)?"),q2="[\\s|\\(]+(".concat(Tf,")[,|\\s]+(").concat(Tf,")[,|\\s]+(").concat(Tf,")[,|\\s]+(").concat(Tf,")\\s*\\)?"),tc={CSS_UNIT:new RegExp(Tf),rgb:new RegExp("rgb"+W2),rgba:new RegExp("rgba"+q2),hsl:new RegExp("hsl"+W2),hsla:new RegExp("hsla"+q2),hsv:new RegExp("hsv"+W2),hsva:new RegExp("hsva"+q2),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function S7(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(hI[e])e=hI[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=tc.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=tc.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=tc.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=tc.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=tc.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=tc.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=tc.hex8.exec(e),n?{r:Il(n[1]),g:Il(n[2]),b:Il(n[3]),a:xT(n[4]),format:t?"name":"hex8"}:(n=tc.hex6.exec(e),n?{r:Il(n[1]),g:Il(n[2]),b:Il(n[3]),format:t?"name":"hex"}:(n=tc.hex4.exec(e),n?{r:Il(n[1]+n[1]),g:Il(n[2]+n[2]),b:Il(n[3]+n[3]),a:xT(n[4]+n[4]),format:t?"name":"hex8"}:(n=tc.hex3.exec(e),n?{r:Il(n[1]+n[1]),g:Il(n[2]+n[2]),b:Il(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function Kh(e){return!!tc.CSS_UNIT.exec(String(e))}var E7=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var i;if(t instanceof e)return t;typeof t=="number"&&(t=w7(t)),this.originalInput=t;var o=C7(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,i,o,u=t.r/255,l=t.g/255,s=t.b/255;return u<=.03928?n=u/12.92:n=Math.pow((u+.055)/1.055,2.4),l<=.03928?i=l/12.92:i=Math.pow((l+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),.2126*n+.7152*i+.0722*o},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=eL(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=_T(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=_T(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?"hsv(".concat(n,", ").concat(i,"%, ").concat(o,"%)"):"hsva(".concat(n,", ").concat(i,"%, ").concat(o,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=vT(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=vT(this.r,this.g,this.b),n=Math.round(t.h*360),i=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?"hsl(".concat(n,", ").concat(i,"%, ").concat(o,"%)"):"hsla(".concat(n,", ").concat(i,"%, ").concat(o,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),bT(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),x7(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(n,", ").concat(i,")"):"rgba(".concat(t,", ").concat(n,", ").concat(i,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(n){return"".concat(Math.round(Fa(n,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round(Fa(n,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+bT(this.r,this.g,this.b,!1),n=0,i=Object.entries(hI);n<i.length;n++){var o=i[n],u=o[0],l=o[1];if(t===l)return u}return!1},e.prototype.toString=function(t){var n=!!t;t=t??this.format;var i=!1,o=this.a<1&&this.a>=0,u=!n&&o&&(t.startsWith("hex")||t==="name");return u?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(i=this.toRgbString()),t==="prgb"&&(i=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(i=this.toHexString()),t==="hex3"&&(i=this.toHexString(!0)),t==="hex4"&&(i=this.toHex8String(!0)),t==="hex8"&&(i=this.toHex8String()),t==="name"&&(i=this.toName()),t==="hsl"&&(i=this.toHslString()),t==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Cb(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Cb(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Cb(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Cb(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var i=this.toRgb(),o=new e(t).toRgb(),u=n/100,l={r:(o.r-i.r)*u+i.r,g:(o.g-i.g)*u+i.g,b:(o.b-i.b)*u+i.b,a:(o.a-i.a)*u+i.a};return new e(l)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var i=this.toHsl(),o=360/n,u=[this];for(i.h=(i.h-(o*t>>1)+720)%360;--t;)i.h=(i.h+o)%360,u.push(new e(i));return u},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),i=n.h,o=n.s,u=n.v,l=[],s=1/t;t--;)l.push(new e({h:i,s:o,v:u})),u=(u+s)%1;return l},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),i=new e(t).toRgb(),o=n.a+i.a*(1-n.a);return new e({r:(n.r*n.a+i.r*i.a*(1-n.a))/o,g:(n.g*n.a+i.g*i.a*(1-n.a))/o,b:(n.b*n.a+i.b*i.a*(1-n.a))/o,a:o})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),i=n.h,o=[this],u=360/t,l=1;l<t;l++)o.push(new e({h:(i+l*u)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function Mf(...e){return new E7(...e)}function K2(e,t){const n=e&&e.a;let i;e&&e.hsl?i=Mf(e.hsl):e&&e.hex&&e.hex.length>0?i=Mf(e.hex):e&&e.hsv?i=Mf(e.hsv):e&&e.rgba?i=Mf(e.rgba):e&&e.rgb?i=Mf(e.rgb):i=Mf(e),i&&(i._a===void 0||i._a===null)&&i.setAlpha(n||i.getAlpha());const o=i.toHsl(),u=i.toHsv();return o.s===0&&(u.h=o.h=e.h||e.hsl&&e.hsl.h||t||0),u.v<.0164&&(u.h=e.h||e.hsv&&e.hsv.h||0,u.s=e.s||e.hsv&&e.hsv.s||0),o.l<.01&&(o.h=e.h||e.hsl&&e.hsl.h||0,o.s=e.s||e.hsl&&e.hsl.s||0),{hsl:o,hex:i.toHexString().toUpperCase(),hex8:i.toHex8String().toUpperCase(),rgba:i.toRgb(),hsv:u,oldHue:e.h||t||o.h,source:e.source,a:i.getAlpha()}}var T7={model:{prop:"modelValue",event:"update:modelValue"},props:["modelValue"],data(){return{val:K2(this.modelValue)}},computed:{colors:{get(){return this.val},set(e){this.val=e,this.$emit("update:modelValue",e)}}},watch:{modelValue(e){this.val=K2(e)}},methods:{colorChange(e,t){this.oldHue=this.colors.hsl.h,this.colors=K2(e,t||this.oldHue)},isValidHex(e){return Mf(e).isValid},simpleCheckForValidColor(e){const t=["r","g","b","a","h","s","l","v"];let n=0,i=0;for(let o=0;o<t.length;o++){const u=t[o];e[u]&&(n++,isNaN(e[u])||i++)}if(n===i)return e},paletteUpperCase(e){return e.map(t=>t.toUpperCase())},isTransparent(e){return Mf(e).getAlpha()===0}}},TA={name:"EditableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get(){return this.value},set(e){if(this.max!==void 0&&+e>this.max)this.$refs.input.value=this.max;else return e}},labelId(){return`input__label__${this.label}__${Math.random().toString().slice(2,5)}`},labelSpanText(){return this.labelText||this.label}},methods:{update(e){this.handleChange(e.target.value)},handleChange(e){const t={};t[this.label]=e,t.hex===void 0&&t["#"]===void 0?this.$emit("change",t):e.length>5&&this.$emit("change",t)},handleKeyDown(e){let{val:t}=this;const n=Number(t);if(n){const i=this.arrowOffset||1;e.keyCode===38&&(t=n+i,this.handleChange(t),e.preventDefault()),e.keyCode===40&&(t=n-i,this.handleChange(t),e.preventDefault())}}}};const P7={class:"vc-editable-input"},k7=["aria-labelledby"],L7=["id","for"],D7={class:"vc-input__desc"};function R7(e,t,n,i,o,u){return Ae(),st("div",P7,[kl(Le("input",{ref:"input","onUpdate:modelValue":t[0]||(t[0]=l=>u.val=l),"aria-labelledby":u.labelId,class:"vc-input__input",onKeydown:t[1]||(t[1]=(...l)=>u.handleKeyDown&&u.handleKeyDown(...l)),onInput:t[2]||(t[2]=(...l)=>u.update&&u.update(...l))},null,40,k7),[[sh,u.val]]),Le("span",{id:u.labelId,for:n.label,class:"vc-input__label"},gn(u.labelSpanText),9,L7),Le("span",D7,gn(n.desc),1)])}var O7=".vc-editable-input{position:relative}.vc-input__input{border:0;outline:none;padding:0}.vc-input__label{text-transform:capitalize}";qy(O7);TA.render=R7;TA.__file="src/components/editable-input/editable-input.vue";TA.install=Ky;function Y2(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}var PA={name:"Saturation",props:{value:Object},computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,o=n.clientHeight,u=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,s=e.pageX||(e.touches?e.touches[0].pageX:0),f=e.pageY||(e.touches?e.touches[0].pageY:0),y=Y2(s-u,0,i),b=Y2(f-l,0,o),x=y/i,M=Y2(-(b/o)+1,0,1);this.onChange({h:this.colors.hsv.h,s:x,v:M,a:this.colors.hsv.a,source:"hsva"})},onChange(e){this.$emit("change",e)},handleMouseDown(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const z7=Le("div",{class:"vc-saturation--white"},null,-1),F7=Le("div",{class:"vc-saturation--black"},null,-1),B7=Le("div",{class:"vc-saturation-circle"},null,-1),N7=[B7];function V7(e,t,n,i,o,u){return Ae(),st("div",{ref:"container",class:"vc-saturation",style:Yr({background:u.bgColor}),onMousedown:t[0]||(t[0]=(...l)=>u.handleMouseDown&&u.handleMouseDown(...l)),onTouchmove:t[1]||(t[1]=(...l)=>u.handleChange&&u.handleChange(...l)),onTouchstart:t[2]||(t[2]=(...l)=>u.handleChange&&u.handleChange(...l))},[z7,F7,Le("div",{class:"vc-saturation-pointer",style:Yr({top:u.pointerTop,left:u.pointerLeft})},N7,4)],36)}var j7=".vc-saturation,.vc-saturation--black,.vc-saturation--white{bottom:0;cursor:pointer;left:0;position:absolute;right:0;top:0}.vc-saturation--white{background:linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.vc-saturation--black{background:linear-gradient(0deg,#000,transparent)}.vc-saturation-pointer{cursor:pointer;position:absolute}.vc-saturation-circle{border-radius:50%;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);cursor:head;height:4px;transform:translate(-2px,-2px);width:4px}";qy(j7);PA.render=V7;PA.__file="src/components/saturation/saturation.vue";PA.install=Ky;var kA={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},directionClass(){return{"vc-hue--horizontal":this.direction==="horizontal","vc-hue--vertical":this.direction==="vertical"}},pointerTop(){return this.direction==="vertical"?this.colors.hsl.h===0&&this.pullDirection==="right"?0:`${-(this.colors.hsl.h*100/360)+100}%`:0},pointerLeft(){return this.direction==="vertical"?0:this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{value:{handler(e,t){const{h:n}=e.hsl;n!==0&&n-this.oldHue>0&&(this.pullDirection="right"),n!==0&&n-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=n},deep:!0,immediate:!0}},methods:{handleChange(e,t){!t&&e.preventDefault();const{container:n}=this.$refs;if(!n)return;const i=n.clientWidth,o=n.clientHeight,u=n.getBoundingClientRect().left+window.pageXOffset,l=n.getBoundingClientRect().top+window.pageYOffset,s=e.pageX||(e.touches?e.touches[0].pageX:0),f=e.pageY||(e.touches?e.touches[0].pageY:0),y=s-u,b=f-l;let x,M;this.direction==="vertical"?(b<0?x=360:b>o?x=0:(M=-(b*100/o)+100,x=360*M/100),this.colors.hsl.h!==x&&this.$emit("change",{h:x,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(y<0?x=0:y>i?x=360:(M=y*100/i,x=360*M/100),this.colors.hsl.h!==x&&this.$emit("change",{h:x,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))},handleMouseDown(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(e){this.unbindEventListeners()},unbindEventListeners(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}};const U7=["aria-valuenow"],$7=Le("div",{class:"vc-hue-picker"},null,-1),H7=[$7];function G7(e,t,n,i,o,u){return Ae(),st("div",{class:ei(["vc-hue",[u.directionClass]])},[Le("div",{ref:"container",class:"vc-hue-container",role:"slider","aria-valuenow":u.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360",onMousedown:t[0]||(t[0]=(...l)=>u.handleMouseDown&&u.handleMouseDown(...l)),onTouchmove:t[1]||(t[1]=(...l)=>u.handleChange&&u.handleChange(...l)),onTouchstart:t[2]||(t[2]=(...l)=>u.handleChange&&u.handleChange(...l))},[Le("div",{class:"vc-hue-pointer",style:Yr({top:u.pointerTop,left:u.pointerLeft}),role:"presentation"},H7,4)],40,U7)],2)}var Z7=".vc-hue{border-radius:2px;bottom:0;left:0;position:absolute;right:0;top:0}.vc-hue--horizontal{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue--vertical{background:linear-gradient(0deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.vc-hue-container{cursor:pointer;height:100%;margin:0 2px;position:relative}.vc-hue-pointer{position:absolute;z-index:2}.vc-hue-picker{background:#fff;border-radius:1px;box-shadow:0 0 2px rgba(0,0,0,.6);cursor:pointer;height:8px;margin-top:1px;transform:translateX(-2px);width:4px}";qy(Z7);kA.render=G7;kA.__file="src/components/hue/hue.vue";kA.install=Ky;const W7=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];var LA={name:"Sketch",components:{Saturation:PA,Hue:kA,Alpha:EA,EdIn:TA,Checkboard:B_},mixins:[T7],props:{presetColors:{type:Array,default(){return W7}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex(){let e;return this.colors.a<1?e=this.colors.hex8:e=this.colors.hex,e.replace("#","")},activeColor(){const{rgba:e}=this.colors;return`rgba(${[e.r,e.g,e.b,e.a].join(",")})`}},methods:{handlePreset(e){this.colorChange(e)},childChange(e){this.colorChange(e)},inputChange(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}};const q7={class:"vc-sketch-saturation-wrap"},K7={class:"vc-sketch-controls"},Y7={class:"vc-sketch-sliders"},X7={class:"vc-sketch-hue-wrap"},Q7={key:0,class:"vc-sketch-alpha-wrap"},J7={class:"vc-sketch-color-wrap"},eV=["aria-label"],tV={key:0,class:"vc-sketch-field"},nV={class:"vc-sketch-field--double"},rV={class:"vc-sketch-field--single"},iV={class:"vc-sketch-field--single"},sV={class:"vc-sketch-field--single"},aV={key:0,class:"vc-sketch-field--single"},oV={class:"vc-sketch-presets",role:"group","aria-label":"A color preset, pick one to set as current color"},lV=["aria-label","onClick"],uV=["aria-label","onClick"];function cV(e,t,n,i,o,u){const l=Eo("Saturation"),s=Eo("Hue"),f=Eo("Alpha"),y=Eo("Checkboard"),b=Eo("EdIn");return Ae(),st("div",{role:"application","aria-label":"Sketch color picker",class:ei(["vc-sketch",[n.disableAlpha?"vc-sketch__disable-alpha":""]])},[Le("div",q7,[He(l,{value:e.colors,onChange:u.childChange},null,8,["value","onChange"])]),Le("div",K7,[Le("div",Y7,[Le("div",X7,[He(s,{value:e.colors,onChange:u.childChange},null,8,["value","onChange"])]),n.disableAlpha?an("v-if",!0):(Ae(),st("div",Q7,[He(f,{value:e.colors,onChange:u.childChange},null,8,["value","onChange"])]))]),Le("div",J7,[Le("div",{"aria-label":`Current color is ${u.activeColor}`,class:"vc-sketch-active-color",style:Yr({background:u.activeColor})},null,12,eV),He(y)])]),n.disableFields?an("v-if",!0):(Ae(),st("div",tV,[an(" rgba "),Le("div",nV,[He(b,{label:"hex",value:u.hex,onChange:u.inputChange},null,8,["value","onChange"])]),Le("div",rV,[He(b,{label:"r",value:e.colors.rgba.r,onChange:u.inputChange},null,8,["value","onChange"])]),Le("div",iV,[He(b,{label:"g",value:e.colors.rgba.g,onChange:u.inputChange},null,8,["value","onChange"])]),Le("div",sV,[He(b,{label:"b",value:e.colors.rgba.b,onChange:u.inputChange},null,8,["value","onChange"])]),n.disableAlpha?an("v-if",!0):(Ae(),st("div",aV,[He(b,{label:"a",value:e.colors.a,"arrow-offset":.01,max:1,onChange:u.inputChange},null,8,["value","arrow-offset","onChange"])]))])),Le("div",oV,[(Ae(!0),st(Gn,null,ii(n.presetColors,x=>(Ae(),st(Gn,null,[e.isTransparent(x)?(Ae(),st("div",{key:x,"aria-label":`Color:${x}`,class:"vc-sketch-presets-color",onClick:M=>u.handlePreset(x)},[He(y)],8,uV)):(Ae(),st("div",{key:`!${x}`,class:"vc-sketch-presets-color","aria-label":`Color:${x}`,style:Yr({background:x}),onClick:M=>u.handlePreset(x)},null,12,lV))],64))),256))])],2)}var hV=".vc-sketch{background:#fff;border-radius:4px;box-shadow:0 0 0 1px rgba(0,0,0,.15),0 8px 16px rgba(0,0,0,.15);box-sizing:initial;padding:10px 10px 0;position:relative;width:200px}.vc-sketch-saturation-wrap{overflow:hidden;padding-bottom:75%;position:relative;width:100%}.vc-sketch-controls{display:flex}.vc-sketch-sliders{flex:1;padding:4px 0}.vc-sketch-sliders .vc-alpha-gradient,.vc-sketch-sliders .vc-hue{border-radius:2px}.vc-sketch-alpha-wrap,.vc-sketch-hue-wrap{height:10px;position:relative}.vc-sketch-alpha-wrap{margin-top:4px;overflow:hidden}.vc-sketch-color-wrap{border-radius:3px;height:24px;margin-left:4px;margin-top:4px;position:relative;width:24px}.vc-sketch-active-color{border-radius:2px;bottom:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15),inset 0 0 4px rgba(0,0,0,.25);left:0;position:absolute;right:0;top:0;z-index:2}.vc-sketch-color-wrap .vc-checkerboard{background-size:auto}.vc-sketch-field{display:flex;padding-top:4px}.vc-sketch-field .vc-input__input{border:none;box-shadow:inset 0 0 0 1px #ccc;font-size:10px;padding:4px 0 3px 10%;width:90%}.vc-sketch-field .vc-input__label{color:#222;display:block;font-size:11px;padding-bottom:4px;padding-top:3px;text-align:center;text-transform:capitalize}.vc-sketch-field--single{flex:1;padding-left:6px}.vc-sketch-field--double{flex:2}.vc-sketch-presets{border-top:1px solid #eee;margin-left:-10px;margin-right:-10px;padding-left:10px;padding-top:10px}.vc-sketch-presets-color{cursor:pointer;display:inline-block;height:16px;margin:0 10px 10px 0;overflow:hidden;position:relative;vertical-align:top;width:16px}.vc-sketch-presets-color,.vc-sketch-presets-color .vc-checkerboard{border-radius:3px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.15)}.vc-sketch__disable-alpha .vc-sketch-color-wrap{height:10px}";qy(hV);LA.render=cV;LA.__file="src/components/sketch/sketch.vue";LA.install=Ky;const dV={class:"form-group"},fV={key:0},pV={class:"input-container"},mV=Dn({__name:"input-colorPicker",props:Ui({label:String,disabled:Boolean},{modelValue:{default:"#000000"},modelModifiers:{}}),emits:Ui(["change"],["update:modelValue"]),setup(e,{emit:t}){const n=Us(e,"modelValue"),i=t;function o({hex:u}){n.value=u,i("change",u)}return(u,l)=>(Ae(),st("div",dV,[e.label?(Ae(),st("label",fV,gn(e.label),1)):an("",!0),Le("div",pV,[He(se(LA),ar({modelValue:n.value},u.$attrs,{"onUpdate:modelValue":o,disabled:e.disabled}),null,16,["modelValue","disabled"])])]))}});var Za=63710088e-1,RM={centimeters:Za*100,centimetres:Za*100,degrees:Za/111325,feet:Za*3.28084,inches:Za*39.37,kilometers:Za/1e3,kilometres:Za/1e3,meters:Za,metres:Za,miles:Za/1609.344,millimeters:Za*1e3,millimetres:Za*1e3,nauticalmiles:Za/1852,radians:1,yards:Za*1.0936},gV={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Za,yards:1.0936133},dI={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function _u(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function yV(e,t,n){switch(e){case"Point":return ga(t).geometry;case"LineString":return Ra(t).geometry;case"Polygon":return Yy(t).geometry;case"MultiPoint":return tL(t).geometry;case"MultiLineString":return OM(t).geometry;case"MultiPolygon":return nL(t).geometry;default:throw new Error(e+" is invalid")}}function ga(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ex(e[0])||!Ex(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return _u(i,t,n)}function vV(e,t,n){return n===void 0&&(n={}),Hf(e.map(function(i){return ga(i,t)}),n)}function Yy(e,t,n){n===void 0&&(n={});for(var i=0,o=e;i<o.length;i++){var u=o[i];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<u[u.length-1].length;l++)if(u[u.length-1][l]!==u[0][l])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return _u(s,t,n)}function _V(e,t,n){return n===void 0&&(n={}),Hf(e.map(function(i){return Yy(i,t)}),n)}function Ra(e,t,n){if(n===void 0&&(n={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return _u(i,t,n)}function bV(e,t,n){return n===void 0&&(n={}),Hf(e.map(function(i){return Ra(i,t)}),n)}function Hf(e,t){t===void 0&&(t={});var n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function OM(e,t,n){n===void 0&&(n={});var i={type:"MultiLineString",coordinates:e};return _u(i,t,n)}function tL(e,t,n){n===void 0&&(n={});var i={type:"MultiPoint",coordinates:e};return _u(i,t,n)}function nL(e,t,n){n===void 0&&(n={});var i={type:"MultiPolygon",coordinates:e};return _u(i,t,n)}function xV(e,t,n){n===void 0&&(n={});var i={type:"GeometryCollection",geometries:e};return _u(i,t,n)}function AV(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}function zM(e,t){t===void 0&&(t="kilometers");var n=RM[t];if(!n)throw new Error(t+" units is invalid");return e*n}function FM(e,t){t===void 0&&(t="kilometers");var n=RM[t];if(!n)throw new Error(t+" units is invalid");return e/n}function wV(e,t){return BM(FM(e,t))}function rL(e){var t=e%360;return t<0&&(t+=360),t}function BM(e){var t=e%(2*Math.PI);return t*180/Math.PI}function nd(e){var t=e%360;return t*Math.PI/180}function CV(e,t,n){if(t===void 0&&(t="kilometers"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("length must be a positive number");return zM(FM(e,t),n)}function IV(e,t,n){if(t===void 0&&(t="meters"),n===void 0&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=dI[t];if(!i)throw new Error("invalid original units");var o=dI[n];if(!o)throw new Error("invalid final units");return e/i*o}function Ex(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function NM(e){return!!e&&e.constructor===Object}function MV(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Ex(t))throw new Error("bbox must only contain numbers")})}function SV(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const EV=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:dI,bearingToAzimuth:rL,convertArea:IV,convertLength:CV,degreesToRadians:nd,earthRadius:Za,factors:RM,feature:_u,featureCollection:Hf,geometry:yV,geometryCollection:xV,isNumber:Ex,isObject:NM,lengthToDegrees:wV,lengthToRadians:FM,lineString:Ra,lineStrings:bV,multiLineString:OM,multiPoint:tL,multiPolygon:nL,point:ga,points:vV,polygon:Yy,polygons:_V,radiansToDegrees:BM,radiansToLength:zM,round:AV,unitsFactors:gV,validateBBox:MV,validateId:SV},Symbol.toStringTag,{value:"Module"}));function Om(e,t,n){if(e!==null)for(var i,o,u,l,s,f,y,b=0,x=0,M,A=e.type,k=A==="FeatureCollection",L=A==="Feature",F=k?e.features.length:1,V=0;V<F;V++){y=k?e.features[V].geometry:L?e.geometry:e,M=y?y.type==="GeometryCollection":!1,s=M?y.geometries.length:1;for(var O=0;O<s;O++){var N=0,U=0;if(l=M?y.geometries[O]:y,l!==null){f=l.coordinates;var W=l.type;switch(b=n&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(t(f,x,V,N,U)===!1)return!1;x++,N++;break;case"LineString":case"MultiPoint":for(i=0;i<f.length;i++){if(t(f[i],x,V,N,U)===!1)return!1;x++,W==="MultiPoint"&&N++}W==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(i=0;i<f.length;i++){for(o=0;o<f[i].length-b;o++){if(t(f[i][o],x,V,N,U)===!1)return!1;x++}W==="MultiLineString"&&N++,W==="Polygon"&&U++}W==="Polygon"&&N++;break;case"MultiPolygon":for(i=0;i<f.length;i++){for(U=0,o=0;o<f[i].length;o++){for(u=0;u<f[i][o].length-b;u++){if(t(f[i][o][u],x,V,N,U)===!1)return!1;x++}U++}N++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(Om(l.geometries[i],t,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function TV(e,t,n,i){var o=n;return Om(e,function(u,l,s,f,y){l===0&&n===void 0?o=u:o=t(o,u,l,s,f,y)},i),o}function iL(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&t(e.features[n].properties,n)!==!1;n++);break;case"Feature":t(e.properties,0);break}}function PV(e,t,n){var i=n;return iL(e,function(o,u){u===0&&n===void 0?i=o:i=t(i,o,u)}),i}function Tx(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function kV(e,t,n){var i=n;return Tx(e,function(o,u){u===0&&n===void 0?i=o:i=t(i,o,u)}),i}function LV(e){var t=[];return Om(e,function(n){t.push(n)}),t}function VM(e,t){var n,i,o,u,l,s,f,y,b,x,M=0,A=e.type==="FeatureCollection",k=e.type==="Feature",L=A?e.features.length:1;for(n=0;n<L;n++){for(s=A?e.features[n].geometry:k?e.geometry:e,y=A?e.features[n].properties:k?e.properties:{},b=A?e.features[n].bbox:k?e.bbox:void 0,x=A?e.features[n].id:k?e.id:void 0,f=s?s.type==="GeometryCollection":!1,l=f?s.geometries.length:1,o=0;o<l;o++){if(u=f?s.geometries[o]:s,u===null){if(t(null,M,y,b,x)===!1)return!1;continue}switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(u,M,y,b,x)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<u.geometries.length;i++)if(t(u.geometries[i],M,y,b,x)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}M++}}function sL(e,t,n){var i=n;return VM(e,function(o,u,l,s,f){u===0&&n===void 0?i=o:i=t(i,o,u,l,s,f)}),i}function od(e,t){VM(e,function(n,i,o,u,l){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(_u(n,o,{bbox:u,id:l}),i,0)===!1?!1:void 0}var f;switch(s){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var y=0;y<n.coordinates.length;y++){var b=n.coordinates[y],x={type:f,coordinates:b};if(t(_u(x,o),i,y)===!1)return!1}})}function DV(e,t,n){var i=n;return od(e,function(o,u,l){u===0&&l===0&&n===void 0?i=o:i=t(i,o,u,l)}),i}function aL(e,t){od(e,function(n,i,o){var u=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var s,f=0,y=0,b=0;if(Om(n,function(x,M,A,k,L){if(s===void 0||i>f||k>y||L>b){s=x,f=i,y=k,b=L,u=0;return}var F=Ra([s,x],n.properties);if(t(F,i,o,L,u)===!1)return!1;u++,s=x})===!1)return!1}}})}function oL(e,t,n){var i=n,o=!1;return aL(e,function(u,l,s,f,y){o===!1&&n===void 0?i=u:i=t(i,u,l,s,f,y),o=!0}),i}function lL(e,t){if(!e)throw new Error("geojson is required");od(e,function(n,i,o){if(n.geometry!==null){var u=n.geometry.type,l=n.geometry.coordinates;switch(u){case"LineString":if(t(n,i,o,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<l.length;s++)if(t(Ra(l[s],n.properties),i,o,s)===!1)return!1;break}}})}function RV(e,t,n){var i=n;return lL(e,function(o,u,l,s){u===0&&n===void 0?i=o:i=t(i,o,u,l,s)}),i}function OV(e,t){if(t=t||{},!NM(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,u=t.segmentIndex||0,l=t.properties,s;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),l=l||e.features[n].properties,s=e.features[n].geometry;break;case"Feature":l=l||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var f=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return u<0&&(u=f.length+u-1),Ra([f[u],f[u+1]],l,t);case"Polygon":return o<0&&(o=f.length+o),u<0&&(u=f[o].length+u-1),Ra([f[o][u],f[o][u+1]],l,t);case"MultiLineString":return i<0&&(i=f.length+i),u<0&&(u=f[i].length+u-1),Ra([f[i][u],f[i][u+1]],l,t);case"MultiPolygon":return i<0&&(i=f.length+i),o<0&&(o=f[i].length+o),u<0&&(u=f[i][o].length-u-1),Ra([f[i][o][u],f[i][o][u+1]],l,t)}throw new Error("geojson is invalid")}function zV(e,t){if(t=t||{},!NM(t))throw new Error("options is invalid");var n=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,u=t.coordIndex||0,l=t.properties,s;switch(e.type){case"FeatureCollection":n<0&&(n=e.features.length+n),l=l||e.features[n].properties,s=e.features[n].geometry;break;case"Feature":l=l||e.properties,s=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=e;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var f=s.coordinates;switch(s.type){case"Point":return ga(f,l,t);case"MultiPoint":return i<0&&(i=f.length+i),ga(f[i],l,t);case"LineString":return u<0&&(u=f.length+u),ga(f[u],l,t);case"Polygon":return o<0&&(o=f.length+o),u<0&&(u=f[o].length+u),ga(f[o][u],l,t);case"MultiLineString":return i<0&&(i=f.length+i),u<0&&(u=f[i].length+u),ga(f[i][u],l,t);case"MultiPolygon":return i<0&&(i=f.length+i),o<0&&(o=f[i].length+o),u<0&&(u=f[i][o].length-u),ga(f[i][o][u],l,t)}throw new Error("geojson is invalid")}const FV=Object.freeze(Object.defineProperty({__proto__:null,coordAll:LV,coordEach:Om,coordReduce:TV,featureEach:Tx,featureReduce:kV,findPoint:zV,findSegment:OV,flattenEach:od,flattenReduce:DV,geomEach:VM,geomReduce:sL,lineEach:lL,lineReduce:RV,propEach:iL,propReduce:PV,segmentEach:aL,segmentReduce:oL},Symbol.toStringTag,{value:"Module"}));function d_(e){var t=[1/0,1/0,-1/0,-1/0];return Om(e,function(n){t[0]>n[0]&&(t[0]=n[0]),t[1]>n[1]&&(t[1]=n[1]),t[2]<n[0]&&(t[2]=n[0]),t[3]<n[1]&&(t[3]=n[1])}),t}d_.default=d_;const BV=Object.freeze(Object.defineProperty({__proto__:null,default:d_},Symbol.toStringTag,{value:"Module"}));function f_(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function p_(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function DA(e){return e.type==="Feature"?e.geometry:e}function m_(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var i=f_(e),o=DA(t),u=o.type,l=t.bbox,s=o.coordinates;if(l&&NV(i,l)===!1)return!1;u==="Polygon"&&(s=[s]);for(var f=!1,y=0;y<s.length&&!f;y++)if(AT(i,s[y][0],n.ignoreBoundary)){for(var b=!1,x=1;x<s[y].length&&!b;)AT(i,s[y][x],!n.ignoreBoundary)&&(b=!0),x++;b||(f=!0)}return f}function AT(e,t,n){var i=!1;t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var o=0,u=t.length-1;o<t.length;u=o++){var l=t[o][0],s=t[o][1],f=t[u][0],y=t[u][1],b=e[1]*(l-f)+s*(f-e[0])+y*(e[0]-l)===0&&(l-e[0])*(f-e[0])<=0&&(s-e[1])*(y-e[1])<=0;if(b)return!n;var x=s>e[1]!=y>e[1]&&e[0]<(f-l)*(e[1]-s)/(y-s)+l;x&&(i=!i)}return i}function NV(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function VV(e,t,n){n===void 0&&(n={});var i=f_(e),o=f_(t),u=nd(o[1]-i[1]),l=nd(o[0]-i[0]),s=nd(i[1]),f=nd(o[1]),y=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(s)*Math.cos(f);return zM(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)),n.units)}function uL(e,t,n){if(n===void 0&&(n={}),n.final===!0)return jV(e,t);var i=f_(e),o=f_(t),u=nd(i[0]),l=nd(o[0]),s=nd(i[1]),f=nd(o[1]),y=Math.sin(l-u)*Math.cos(f),b=Math.cos(s)*Math.sin(f)-Math.sin(s)*Math.cos(f)*Math.cos(l-u);return BM(Math.atan2(y,b))}function jV(e,t){var n=uL(t,e);return n=(n+180)%360,n}function UV(e,t){t===void 0&&(t={});var n=0,i=0,o=0;return Om(e,function(u){n+=u[0],i+=u[1],o++},!0),ga([n/o,i/o],t.properties)}function wT(e){if(!e)throw new Error("geojson is required");var t=[];return od(e,function(n){$V(n,t)}),Hf(t)}function $V(e,t){var n=[],i=e.geometry;if(i!==null){switch(i.type){case"Polygon":n=p_(i);break;case"LineString":n=[p_(i)]}n.forEach(function(o){var u=HV(o,e.properties);u.forEach(function(l){l.id=t.length,t.push(l)})})}}function HV(e,t){var n=[];return e.reduce(function(i,o){var u=Ra([i,o],t);return u.bbox=GV(i,o),n.push(u),o}),n}function GV(e,t){var n=e[0],i=e[1],o=t[0],u=t[1],l=n<o?n:o,s=i<u?i:u,f=n>o?n:o,y=i>u?i:u;return[l,s,f,y]}var jM={exports:{}},cL={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(ra,function(){function n(O,N,U,W,ne){(function X(q,G,ee,ue,Y){for(;ue>ee;){if(ue-ee>600){var ce=ue-ee+1,K=G-ee+1,Se=Math.log(ce),Ve=.5*Math.exp(2*Se/3),Ne=.5*Math.sqrt(Se*Ve*(ce-Ve)/ce)*(K-ce/2<0?-1:1),et=Math.max(ee,Math.floor(G-K*Ve/ce+Ne)),ot=Math.min(ue,Math.floor(G+(ce-K)*Ve/ce+Ne));X(q,G,et,ot,Y)}var Zt=q[G],qe=ee,Ue=ue;for(i(q,ee,G),Y(q[ue],Zt)>0&&i(q,ee,ue);qe<Ue;){for(i(q,qe,Ue),qe++,Ue--;Y(q[qe],Zt)<0;)qe++;for(;Y(q[Ue],Zt)>0;)Ue--}Y(q[ee],Zt)===0?i(q,ee,Ue):i(q,++Ue,ue),Ue<=G&&(ee=Ue+1),G<=Ue&&(ue=Ue-1)}})(O,N,U||0,W||O.length-1,ne||o)}function i(O,N,U){var W=O[N];O[N]=O[U],O[U]=W}function o(O,N){return O<N?-1:O>N?1:0}var u=function(O){O===void 0&&(O=9),this._maxEntries=Math.max(4,O),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(O,N,U){if(!U)return N.indexOf(O);for(var W=0;W<N.length;W++)if(U(O,N[W]))return W;return-1}function s(O,N){f(O,0,O.children.length,N,O)}function f(O,N,U,W,ne){ne||(ne=F(null)),ne.minX=1/0,ne.minY=1/0,ne.maxX=-1/0,ne.maxY=-1/0;for(var X=N;X<U;X++){var q=O.children[X];y(ne,O.leaf?W(q):q)}return ne}function y(O,N){return O.minX=Math.min(O.minX,N.minX),O.minY=Math.min(O.minY,N.minY),O.maxX=Math.max(O.maxX,N.maxX),O.maxY=Math.max(O.maxY,N.maxY),O}function b(O,N){return O.minX-N.minX}function x(O,N){return O.minY-N.minY}function M(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function A(O){return O.maxX-O.minX+(O.maxY-O.minY)}function k(O,N){return O.minX<=N.minX&&O.minY<=N.minY&&N.maxX<=O.maxX&&N.maxY<=O.maxY}function L(O,N){return N.minX<=O.maxX&&N.minY<=O.maxY&&N.maxX>=O.minX&&N.maxY>=O.minY}function F(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function V(O,N,U,W,ne){for(var X=[N,U];X.length;)if(!((U=X.pop())-(N=X.pop())<=W)){var q=N+Math.ceil((U-N)/W/2)*W;n(O,q,N,U,ne),X.push(N,q,q,U)}}return u.prototype.all=function(){return this._all(this.data,[])},u.prototype.search=function(O){var N=this.data,U=[];if(!L(O,N))return U;for(var W=this.toBBox,ne=[];N;){for(var X=0;X<N.children.length;X++){var q=N.children[X],G=N.leaf?W(q):q;L(O,G)&&(N.leaf?U.push(q):k(O,G)?this._all(q,U):ne.push(q))}N=ne.pop()}return U},u.prototype.collides=function(O){var N=this.data;if(!L(O,N))return!1;for(var U=[];N;){for(var W=0;W<N.children.length;W++){var ne=N.children[W],X=N.leaf?this.toBBox(ne):ne;if(L(O,X)){if(N.leaf||k(O,X))return!0;U.push(ne)}}N=U.pop()}return!1},u.prototype.load=function(O){if(!O||!O.length)return this;if(O.length<this._minEntries){for(var N=0;N<O.length;N++)this.insert(O[N]);return this}var U=this._build(O.slice(),0,O.length-1,0);if(this.data.children.length)if(this.data.height===U.height)this._splitRoot(this.data,U);else{if(this.data.height<U.height){var W=this.data;this.data=U,U=W}this._insert(U,this.data.height-U.height-1,!0)}else this.data=U;return this},u.prototype.insert=function(O){return O&&this._insert(O,this.data.height-1),this},u.prototype.clear=function(){return this.data=F([]),this},u.prototype.remove=function(O,N){if(!O)return this;for(var U,W,ne,X=this.data,q=this.toBBox(O),G=[],ee=[];X||G.length;){if(X||(X=G.pop(),W=G[G.length-1],U=ee.pop(),ne=!0),X.leaf){var ue=l(O,X.children,N);if(ue!==-1)return X.children.splice(ue,1),G.push(X),this._condense(G),this}ne||X.leaf||!k(X,q)?W?(U++,X=W.children[U],ne=!1):X=null:(G.push(X),ee.push(U),U=0,W=X,X=X.children[0])}return this},u.prototype.toBBox=function(O){return O},u.prototype.compareMinX=function(O,N){return O.minX-N.minX},u.prototype.compareMinY=function(O,N){return O.minY-N.minY},u.prototype.toJSON=function(){return this.data},u.prototype.fromJSON=function(O){return this.data=O,this},u.prototype._all=function(O,N){for(var U=[];O;)O.leaf?N.push.apply(N,O.children):U.push.apply(U,O.children),O=U.pop();return N},u.prototype._build=function(O,N,U,W){var ne,X=U-N+1,q=this._maxEntries;if(X<=q)return s(ne=F(O.slice(N,U+1)),this.toBBox),ne;W||(W=Math.ceil(Math.log(X)/Math.log(q)),q=Math.ceil(X/Math.pow(q,W-1))),(ne=F([])).leaf=!1,ne.height=W;var G=Math.ceil(X/q),ee=G*Math.ceil(Math.sqrt(q));V(O,N,U,ee,this.compareMinX);for(var ue=N;ue<=U;ue+=ee){var Y=Math.min(ue+ee-1,U);V(O,ue,Y,G,this.compareMinY);for(var ce=ue;ce<=Y;ce+=G){var K=Math.min(ce+G-1,Y);ne.children.push(this._build(O,ce,K,W-1))}}return s(ne,this.toBBox),ne},u.prototype._chooseSubtree=function(O,N,U,W){for(;W.push(N),!N.leaf&&W.length-1!==U;){for(var ne=1/0,X=1/0,q=void 0,G=0;G<N.children.length;G++){var ee=N.children[G],ue=M(ee),Y=(ce=O,K=ee,(Math.max(K.maxX,ce.maxX)-Math.min(K.minX,ce.minX))*(Math.max(K.maxY,ce.maxY)-Math.min(K.minY,ce.minY))-ue);Y<X?(X=Y,ne=ue<ne?ue:ne,q=ee):Y===X&&ue<ne&&(ne=ue,q=ee)}N=q||N.children[0]}var ce,K;return N},u.prototype._insert=function(O,N,U){var W=U?O:this.toBBox(O),ne=[],X=this._chooseSubtree(W,this.data,N,ne);for(X.children.push(O),y(X,W);N>=0&&ne[N].children.length>this._maxEntries;)this._split(ne,N),N--;this._adjustParentBBoxes(W,ne,N)},u.prototype._split=function(O,N){var U=O[N],W=U.children.length,ne=this._minEntries;this._chooseSplitAxis(U,ne,W);var X=this._chooseSplitIndex(U,ne,W),q=F(U.children.splice(X,U.children.length-X));q.height=U.height,q.leaf=U.leaf,s(U,this.toBBox),s(q,this.toBBox),N?O[N-1].children.push(q):this._splitRoot(U,q)},u.prototype._splitRoot=function(O,N){this.data=F([O,N]),this.data.height=O.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},u.prototype._chooseSplitIndex=function(O,N,U){for(var W,ne,X,q,G,ee,ue,Y=1/0,ce=1/0,K=N;K<=U-N;K++){var Se=f(O,0,K,this.toBBox),Ve=f(O,K,U,this.toBBox),Ne=(ne=Se,X=Ve,q=void 0,G=void 0,ee=void 0,ue=void 0,q=Math.max(ne.minX,X.minX),G=Math.max(ne.minY,X.minY),ee=Math.min(ne.maxX,X.maxX),ue=Math.min(ne.maxY,X.maxY),Math.max(0,ee-q)*Math.max(0,ue-G)),et=M(Se)+M(Ve);Ne<Y?(Y=Ne,W=K,ce=et<ce?et:ce):Ne===Y&&et<ce&&(ce=et,W=K)}return W||U-N},u.prototype._chooseSplitAxis=function(O,N,U){var W=O.leaf?this.compareMinX:b,ne=O.leaf?this.compareMinY:x;this._allDistMargin(O,N,U,W)<this._allDistMargin(O,N,U,ne)&&O.children.sort(W)},u.prototype._allDistMargin=function(O,N,U,W){O.children.sort(W);for(var ne=this.toBBox,X=f(O,0,N,ne),q=f(O,U-N,U,ne),G=A(X)+A(q),ee=N;ee<U-N;ee++){var ue=O.children[ee];y(X,O.leaf?ne(ue):ue),G+=A(X)}for(var Y=U-N-1;Y>=N;Y--){var ce=O.children[Y];y(q,O.leaf?ne(ce):ce),G+=A(q)}return G},u.prototype._adjustParentBBoxes=function(O,N,U){for(var W=U;W>=0;W--)y(N[W],O)},u.prototype._condense=function(O){for(var N=O.length-1,U=void 0;N>=0;N--)O[N].children.length===0?N>0?(U=O[N-1].children).splice(U.indexOf(O[N]),1):this.clear():s(O[N],this.toBBox)},u})})(cL);var ZV=cL.exports;const WV=D_(EV),qV=D_(FV),KV=D_(BV);var Gc=ZV,hL=WV,dL=qV,Vg=KV.default,YV=dL.featureEach;dL.coordEach;hL.polygon;var CT=hL.featureCollection;function fL(e){var t=new Gc(e);return t.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Vg(n),Gc.prototype.insert.call(this,n)},t.load=function(n){var i=[];return Array.isArray(n)?n.forEach(function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:Vg(o),i.push(o)}):YV(n,function(o){if(o.type!=="Feature")throw new Error("invalid features");o.bbox=o.bbox?o.bbox:Vg(o),i.push(o)}),Gc.prototype.load.call(this,i)},t.remove=function(n,i){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:Vg(n),Gc.prototype.remove.call(this,n,i)},t.clear=function(){return Gc.prototype.clear.call(this)},t.search=function(n){var i=Gc.prototype.search.call(this,this.toBBox(n));return CT(i)},t.collides=function(n){return Gc.prototype.collides.call(this,this.toBBox(n))},t.all=function(){var n=Gc.prototype.all.call(this);return CT(n)},t.toJSON=function(){return Gc.prototype.toJSON.call(this)},t.fromJSON=function(n){return Gc.prototype.fromJSON.call(this,n)},t.toBBox=function(n){var i;if(n.bbox)i=n.bbox;else if(Array.isArray(n)&&n.length===4)i=n;else if(Array.isArray(n)&&n.length===6)i=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")i=Vg(n);else if(n.type==="FeatureCollection")i=Vg(n);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},t}jM.exports=fL;jM.exports.default=fL;var XV=jM.exports;const QV=fd(XV);function UM(e,t){var n={},i=[];if(e.type==="LineString"&&(e=_u(e)),t.type==="LineString"&&(t=_u(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var o=IT(e,t);return o&&i.push(o),Hf(i)}var u=QV();return u.load(wT(t)),Tx(wT(e),function(l){Tx(u.search(l),function(s){var f=IT(l,s);if(f){var y=p_(f).join(",");n[y]||(n[y]=!0,i.push(f))}})}),Hf(i)}function IT(e,t){var n=p_(e),i=p_(t);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],u=n[0][1],l=n[1][0],s=n[1][1],f=i[0][0],y=i[0][1],b=i[1][0],x=i[1][1],M=(x-y)*(l-o)-(b-f)*(s-u),A=(b-f)*(u-y)-(x-y)*(o-f),k=(l-o)*(u-y)-(s-u)*(o-f);if(M===0)return null;var L=A/M,F=k/M;if(L>=0&&L<=1&&F>=0&&F<=1){var V=o+L*(l-o),O=u+L*(s-u);return ga([V,O])}return null}var MT=6378137;function JV(e){return sL(e,function(t,n){return t+ej(n)},0)}function ej(e){var t=0,n;switch(e.type){case"Polygon":return ST(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=ST(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function ST(e){var t=0;if(e&&e.length>0){t+=Math.abs(ET(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(ET(e[n]))}return t}function ET(e){var t,n,i,o,u,l,s,f=0,y=e.length;if(y>2){for(s=0;s<y;s++)s===y-2?(o=y-2,u=y-1,l=0):s===y-1?(o=y-1,u=0,l=1):(o=s,u=s+1,l=s+2),t=e[o],n=e[u],i=e[l],f+=(X2(i[0])-X2(t[0]))*Math.sin(X2(n[1]));f=f*MT*MT/2}return f}function X2(e){return e*Math.PI/180}function TT(e,t){return t===void 0&&(t={}),oL(e,function(n,i){var o=i.geometry.coordinates;return n+VV(o[0],o[1],t)},0)}function fI(e,t){t===void 0&&(t={});var n=DA(e);switch(!t.properties&&e.type==="Feature"&&(t.properties=e.properties),n.type){case"Polygon":return tj(n,t);case"MultiPolygon":return nj(n,t);default:throw new Error("invalid poly")}}function tj(e,t){t===void 0&&(t={});var n=DA(e),i=n.coordinates,o=t.properties?t.properties:e.type==="Feature"?e.properties:{};return pL(i,o)}function nj(e,t){t===void 0&&(t={});var n=DA(e),i=n.coordinates,o=t.properties?t.properties:e.type==="Feature"?e.properties:{},u=[];return i.forEach(function(l){u.push(pL(l,o))}),Hf(u)}function pL(e,t){return e.length>1?OM(e,t):Ra(e[0],t)}function rj(e,t){var n=!0;return od(e,function(i){od(t,function(o){if(n===!1)return!1;n=ij(i.geometry,o.geometry)})}),n}function ij(e,t){switch(e.type){case"Point":switch(t.type){case"Point":return!lj(e.coordinates,t.coordinates);case"LineString":return!PT(t,e);case"Polygon":return!m_(e,t)}break;case"LineString":switch(t.type){case"Point":return!PT(e,t);case"LineString":return!sj(e,t);case"Polygon":return!kT(t,e)}break;case"Polygon":switch(t.type){case"Point":return!m_(t,e);case"LineString":return!kT(e,t);case"Polygon":return!aj(t,e)}}return!1}function PT(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(oj(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function sj(e,t){var n=UM(e,t);return n.features.length>0}function kT(e,t){for(var n=0,i=t.coordinates;n<i.length;n++){var o=i[n];if(m_(o,e))return!0}var u=UM(t,fI(e));return u.features.length>0}function aj(e,t){for(var n=0,i=e.coordinates[0];n<i.length;n++){var o=i[n];if(m_(o,t))return!0}for(var u=0,l=t.coordinates[0];u<l.length;u++){var s=l[u];if(m_(s,e))return!0}var f=UM(fI(e),fI(t));return f.features.length>0}function oj(e,t,n){var i=n[0]-e[0],o=n[1]-e[1],u=t[0]-e[0],l=t[1]-e[1],s=i*l-o*u;return s!==0?!1:Math.abs(u)>=Math.abs(l)?u>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:l>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]}function lj(e,t){return e[0]===t[0]&&e[1]===t[1]}function uj(e,t){var n=!1;return od(e,function(i){od(t,function(o){if(n===!0)return!0;n=!rj(i.geometry,o.geometry)})}),n}function RA(e,t,{zoom:n=15}={}){if(!t||!e)return;const i={top:50,bottom:50,left:50,right:50};if(["Point"].includes(t.type)){e.easeTo({center:t.coordinates,zoom:n,duration:0,padding:i});return}i.left=i.left,i.right=i.right;let o;t.length==4?o=t:o=cj(t),o&&e.fitBounds(o,{padding:i,duration:100})}function cj(e){if(!e.type)return;let t;return["Feature","FeatureCollection"].includes(e.type)?t=d_(e):t=d_({type:"Feature",properties:{},geometry:e}),t}function hj(e,t={}){if(e.length!=0)return e.length==1?ga(e[0],t):e.length==2?Ra(e,t):Yy([[...e,e[0]]],t)}function Kn(e,t,...n){const i=e.getNamespace(2)||"";return e.setNamespace(t,1),e.setNamespace(i,2),n.forEach((o,u)=>{e.setNamespace(o,3+u)}),e}function dj(e,t,n="all"){const i=[];return e&&Array.isArray(e)&&i.push(e),t&&Array.isArray(t)&&i.push(t),i.length===0?null:i.length===1?i[0]:[n,...i]}class Pf{constructor(){if(this.state={},typeof window<"u"){const t=window;t.$_hungpv_store??(t.$_hungpv_store={}),this.state=t.$_hungpv_store}else this.state={}}static getInstance(){return Pf.instance||(Pf.instance=new Pf),Pf.instance}getState(){return this.state}updateWindowStore(){if(typeof window<"u"){const t=window;t.$_hungpv_store=this.state}}get(t){this.updateWindowStore();const n=Array.isArray(t)?t:[t];let i=this.state;for(const o of n){if(typeof i!="object"||i===null||!(o in i))return;i=i[o]}return i}set(t,n){return typeof t=="string"?this.state[t]=n:Array.isArray(t)&&fj(this.state,t,n),this.updateWindowStore(),n}has(t){const n=Array.isArray(t)?t:[t];let i=this.state;for(const o of n){if(typeof i!="object"||i===null||!(o in i))return!1;i=i[o]}return!0}delete(t){const n=Array.isArray(t)?t:[t];let i=this.state;for(let u=0;u<n.length-1;u++){const l=n[u];if(typeof i!="object"||i===null||!(l in i))return!1;i=i[l]}const o=n[n.length-1];return typeof i=="object"&&i!==null&&o in i?delete i[o]:!1}}function fj(e,t,n){let i=e;for(let o=0;o<t.length;o++){const u=t[o];o===t.length-1?i[u]=n:((!(u in i)||typeof i[u]!="object"||i[u]===null)&&(i[u]={}),i=i[u])}return i}const pj=Symbol("@hungpvq/store");function mj(){const e=Pf.getInstance();return{install(t){t.provide(pj,e)}}}function gj(){const e=Pf.getInstance();if(!e)throw new Error("Store registry not found. Did you forget to app.use(createStoreRegistryPlugin())?");return e}function zl(e,t){return function(){const i=gj();if(!i.has(e)){const o=t();i.set(e,o)}return i.get(e)}}class yj{log(t,n,...i){const o=t.map(l=>`[${l}]`).join(""),u=`[${n.toUpperCase()}]${o}`;console[n](u,...i)}}class vj{constructor(t,n){this.adapters=t,this.isEnabled=n,this.namespaceMap=new Map}setNamespace(t,n=0){return this.namespaceMap.set(n,t),this}removeNamespace(t){return this.namespaceMap.delete(t),this}clearNamespaces(){return this.namespaceMap.clear(),this}getNamespace(t){return this.namespaceMap.get(t)}getNamespaces(){return this.getSortedNamespaces()}getSortedNamespaces(){return[...this.namespaceMap.entries()].sort(([t],[n])=>t-n).map(([,t])=>t)}log(t,...n){const i=this.getSortedNamespaces();if(this.isEnabled(i))for(const o of this.adapters)o.log(i,t,...n)}debug(...t){this.log("debug",...t)}info(...t){this.log("info",...t)}warn(...t){this.log("warn",...t)}error(...t){this.log("error",...t)}}class iy{constructor(){this.adapters=[new yj],this.enableAll=!0,this.disabledNamespaces=new Set,this.enabledNamespaces=new Set}static getInstance(){return iy.instance||(iy.instance=new iy),iy.instance}enableEverything(){this.enableAll=!0,this.disabledNamespaces.clear(),this.enabledNamespaces.clear()}disableEverything(){this.enableAll=!1,this.disabledNamespaces.clear(),this.enabledNamespaces.clear()}disable(t){this.enableAll&&this.disabledNamespaces.add(t)}enable(t){this.enableAll||this.enabledNamespaces.add(t)}isEnabled(t){return this.enableAll?!t.some(n=>this.disabledNamespaces.has(n)):t.some(n=>this.enabledNamespaces.has(n))}setAdapters(t){this.adapters=t}addAdapter(t){this.adapters.push(t)}clearAdapters(){this.adapters=[]}getAdapters(){return this.adapters}createLogger(){return new vj(this.adapters,t=>this.isEnabled(t))}}const al=iy.getInstance(),wu={MITT:"mitt",EVENT:"event",IMAGE:"image",MAP_COMPARE:"map-compare",LANG:"lang",CRS:"crs"};al.disable("map:"+wu.MITT);al.disableEverything();const Q2=al.createLogger().setNamespace("map:core",2),_j=Tz("map:core",{});function Ly(e){const t=_j[e];if(t)return t}function ooe(e,t,n){const i=Ly(e);if(i)return i[t]||(i[t]=n||{}),i[t]}function loe(e,t){const n=Ly(e);return(n==null?void 0:n[t])||{}}function mL(e){var t;return!!((t=Ly(e))!=null&&t.isMulti)}function gL(e){var t;return(t=Ly(e))==null?void 0:t.maps}function Ja(e,t){var o,u;const n=(o=Ly(e))==null?void 0:o.map,i=(u=Ly(e))==null?void 0:u.maps;i&&i.forEach(l=>{t&&t(l)}),n&&t&&t(n)}const yL=zl("map:core",()=>({})),vL=e=>{const t=yL();function n(){const i=t[e];if(i)return i}return{getIsMulti(){var i;return!!((i=n())!=null&&i.isMulti)},getMaps(){var i;return(i=n())==null?void 0:i.maps},getMap(i){var l,s;const o=(l=n())==null?void 0:l.map,u=(s=n())==null?void 0:s.maps;u&&u.forEach(f=>{i&&i(f)}),o&&i&&i(o)}}},bj=e=>{const t=yL();return{initMaps(n){Kn(Q2,e,"store").debug("init maps",n),t[e]={maps:n,isMulti:n.length>1}},initMap(n){Kn(Q2,e,"store").debug("init",n),t[e]={map:n}},removeMap(){Kn(Q2,e,"store").debug("removeMap"),delete t[e]}}},Nr=(e={},t,n)=>{const i=ya("$map.id"),o=dn(()=>e.mapId||i);ti(()=>{Ja(o.value,async s=>{t instanceof Function&&await t(s)})}),Ol(async()=>{n instanceof Function&&Ja(o.value,async s=>{t instanceof Function&&await n(s)})});function u(s){return Ja(o.value,s)}const l={mapId:e.mapId,dragId:e.dragId,btnWidth:e.btnWidth,position:e.position,controlVisible:e.controlVisible,order:e.order};return{callMap:u,mapId:o,moduleContainerProps:l}},Ti={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(e){return["top-left","top-right","bottom-left","bottom-right"].indexOf(e)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function ld(e=!1){const t=Qt(e);function n(i){if(i!=null){t.value=!!i;return}t.value=!t.value}return[t,n]}const _L=Pz({show:Boolean},"show");function xj(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(o){o(n)}),(i=e.get("*"))&&i.slice().map(function(o){o(t,n)})}}}const LT=al.createLogger().setNamespace("map:"+wu.MITT,2),ud=e=>zl(["map:core",e,wu.MITT],()=>{const t=xj();return Kn(LT,e,"store").debug("init"),t.on("*",(n,...i)=>{Kn(LT,e,"store").debug(`[${String(n)}]`,i)}),t})();var Px={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Px.exports;(function(e,t){(function(){var n,i="4.17.21",o=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",s="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",y=500,b="__lodash_placeholder__",x=1,M=2,A=4,k=1,L=2,F=1,V=2,O=4,N=8,U=16,W=32,ne=64,X=128,q=256,G=512,ee=30,ue="...",Y=800,ce=16,K=1,Se=2,Ve=3,Ne=1/0,et=9007199254740991,ot=17976931348623157e292,Zt=NaN,qe=4294967295,Ue=qe-1,Tt=qe>>>1,Bt=[["ary",X],["bind",F],["bindKey",V],["curry",N],["curryRight",U],["flip",G],["partial",W],["partialRight",ne],["rearg",q]],kt="[object Arguments]",un="[object Array]",gt="[object AsyncFunction]",ft="[object Boolean]",lt="[object Date]",Pt="[object DOMException]",Lt="[object Error]",on="[object Function]",Ie="[object GeneratorFunction]",$="[object Map]",Pe="[object Number]",Oe="[object Null]",ye="[object Object]",pe="[object Promise]",Fe="[object Proxy]",tt="[object RegExp]",it="[object Set]",Be="[object String]",Mt="[object Symbol]",wt="[object Undefined]",At="[object WeakMap]",Ht="[object WeakSet]",cn="[object ArrayBuffer]",fn="[object DataView]",ut="[object Float32Array]",pt="[object Float64Array]",_t="[object Int8Array]",Nt="[object Int16Array]",Wt="[object Int32Array]",wn="[object Uint8Array]",Xe="[object Uint8ClampedArray]",de="[object Uint16Array]",ge="[object Uint32Array]",xe=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,ve=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qe=/&(?:amp|lt|gt|quot|#39);/g,ht=/[&<>"']/g,Ze=RegExp(Qe.source),St=RegExp(ht.source),Dt=/<%-([\s\S]+?)%>/g,yt=/<%([\s\S]+?)%>/g,qt=/<%=([\s\S]+?)%>/g,pn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mn=/^\w*$/,Vn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/[\\^$.*+?()[\]{}|]/g,Ft=RegExp(Qn.source),jn=/^\s+/,xr=/\s/,Vr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ar=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,_n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zn=/[()=,{}\[\]\/\s]/,$s=/\\(\\)?/g,Ds=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,si=/\w*$/,Yn=/^[-+]0x[0-9a-f]+$/i,dh=/^0b[01]+$/i,Cu=/^\[object .+?Constructor\]$/,yd=/^0o[0-7]+$/i,Nl=/^(?:0|[1-9]\d*)$/,vd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bi=/($^)/,ai=/['\n\r\u2028\u2029\\]/g,Ni="\\ud800-\\udfff",fh="\\u0300-\\u036f",_d="\\ufe20-\\ufe2f",no="\\u20d0-\\u20ff",Vl=fh+_d+no,Jf="\\u2700-\\u27bf",ep="a-z\\xdf-\\xf6\\xf8-\\xff",tp="\\xac\\xb1\\xd7\\xf7",mc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",np="\\u2000-\\u206f",tv=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Bm="A-Z\\xc0-\\xd6\\xd8-\\xde",Nm="\\ufe0e\\ufe0f",rp=tp+mc+np+tv,bd="['’]",ip="["+Ni+"]",xd="["+rp+"]",gc="["+Vl+"]",jl="\\d+",sp="["+Jf+"]",ph="["+ep+"]",Iu="[^"+Ni+rp+jl+Jf+ep+Bm+"]",Ul="\\ud83c[\\udffb-\\udfff]",Vm="(?:"+gc+"|"+Ul+")",jm="[^"+Ni+"]",ro="(?:\\ud83c[\\udde6-\\uddff]){2}",$l="[\\ud800-\\udbff][\\udc00-\\udfff]",Jn="["+Bm+"]",yr="\\u200d",Mu="(?:"+ph+"|"+Iu+")",Oo="(?:"+Jn+"|"+Iu+")",Hs="(?:"+bd+"(?:d|ll|m|re|s|t|ve))?",Cs="(?:"+bd+"(?:D|LL|M|RE|S|T|VE))?",mi=Vm+"?",yc="["+Nm+"]?",Is="(?:"+yr+"(?:"+[jm,ro,$l].join("|")+")"+yc+mi+")*",_a="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ll=yc+mi+Is,mh="(?:"+[sp,ro,$l].join("|")+")"+ll,_i="(?:"+[jm+gc+"?",gc,ro,$l,ip].join("|")+")",zo=RegExp(bd,"g"),Hl=RegExp(gc,"g"),Su=RegExp(Ul+"(?="+Ul+")|"+_i+ll,"g"),Ba=RegExp([Jn+"?"+ph+"+"+Hs+"(?="+[xd,Jn,"$"].join("|")+")",Oo+"+"+Cs+"(?="+[xd,Jn+Mu,"$"].join("|")+")",Jn+"?"+Mu+"+"+Hs,Jn+"+"+Cs,Gs,_a,jl,mh].join("|"),"g"),gh=RegExp("["+yr+Ni+Vl+Nm+"]"),Or=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ap=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Er=-1,Tn={};Tn[ut]=Tn[pt]=Tn[_t]=Tn[Nt]=Tn[Wt]=Tn[wn]=Tn[Xe]=Tn[de]=Tn[ge]=!0,Tn[kt]=Tn[un]=Tn[cn]=Tn[ft]=Tn[fn]=Tn[lt]=Tn[Lt]=Tn[on]=Tn[$]=Tn[Pe]=Tn[ye]=Tn[tt]=Tn[it]=Tn[Be]=Tn[At]=!1;var jr={};jr[kt]=jr[un]=jr[cn]=jr[fn]=jr[ft]=jr[lt]=jr[ut]=jr[pt]=jr[_t]=jr[Nt]=jr[Wt]=jr[$]=jr[Pe]=jr[ye]=jr[tt]=jr[it]=jr[Be]=jr[Mt]=jr[wn]=jr[Xe]=jr[de]=jr[ge]=!0,jr[Lt]=jr[on]=jr[At]=!1;var br={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},yh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},io={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},vc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ad=parseFloat,wd=parseInt,Eu=typeof ra=="object"&&ra&&ra.Object===Object&&ra,vh=typeof self=="object"&&self&&self.Object===Object&&self,Vi=Eu||vh||Function("return this")(),Cd=t&&!t.nodeType&&t,Fo=Cd&&!0&&e&&!e.nodeType&&e,Tu=Fo&&Fo.exports===Cd,ds=Tu&&Eu.process,Zs=function(){try{var mt=Fo&&Fo.require&&Fo.require("util").types;return mt||ds&&ds.binding&&ds.binding("util")}catch{}}(),Ws=Zs&&Zs.isArrayBuffer,Pu=Zs&&Zs.isDate,Xr=Zs&&Zs.isMap,_c=Zs&&Zs.isRegExp,_h=Zs&&Zs.isSet,Id=Zs&&Zs.isTypedArray;function fs(mt,Gt,Rt){switch(Rt.length){case 0:return mt.call(Gt);case 1:return mt.call(Gt,Rt[0]);case 2:return mt.call(Gt,Rt[0],Rt[1]);case 3:return mt.call(Gt,Rt[0],Rt[1],Rt[2])}return mt.apply(Gt,Rt)}function Md(mt,Gt,Rt,Pn){for(var qn=-1,wr=mt==null?0:mt.length;++qn<wr;){var Gr=mt[qn];Gt(Pn,Gr,Rt(Gr),mt)}return Pn}function sa(mt,Gt){for(var Rt=-1,Pn=mt==null?0:mt.length;++Rt<Pn&&Gt(mt[Rt],Rt,mt)!==!1;);return mt}function nv(mt,Gt){for(var Rt=mt==null?0:mt.length;Rt--&&Gt(mt[Rt],Rt,mt)!==!1;);return mt}function bh(mt,Gt){for(var Rt=-1,Pn=mt==null?0:mt.length;++Rt<Pn;)if(!Gt(mt[Rt],Rt,mt))return!1;return!0}function so(mt,Gt){for(var Rt=-1,Pn=mt==null?0:mt.length,qn=0,wr=[];++Rt<Pn;){var Gr=mt[Rt];Gt(Gr,Rt,mt)&&(wr[qn++]=Gr)}return wr}function aa(mt,Gt){var Rt=mt==null?0:mt.length;return!!Rt&&Bo(mt,Gt,0)>-1}function ku(mt,Gt,Rt){for(var Pn=-1,qn=mt==null?0:mt.length;++Pn<qn;)if(Rt(Gt,mt[Pn]))return!0;return!1}function qr(mt,Gt){for(var Rt=-1,Pn=mt==null?0:mt.length,qn=Array(Pn);++Rt<Pn;)qn[Rt]=Gt(mt[Rt],Rt,mt);return qn}function ao(mt,Gt){for(var Rt=-1,Pn=Gt.length,qn=mt.length;++Rt<Pn;)mt[qn+Rt]=Gt[Rt];return mt}function Lu(mt,Gt,Rt,Pn){var qn=-1,wr=mt==null?0:mt.length;for(Pn&&wr&&(Rt=mt[++qn]);++qn<wr;)Rt=Gt(Rt,mt[qn],qn,mt);return Rt}function op(mt,Gt,Rt,Pn){var qn=mt==null?0:mt.length;for(Pn&&qn&&(Rt=mt[--qn]);qn--;)Rt=Gt(Rt,mt[qn],qn,mt);return Rt}function Na(mt,Gt){for(var Rt=-1,Pn=mt==null?0:mt.length;++Rt<Pn;)if(Gt(mt[Rt],Rt,mt))return!0;return!1}var rv=Sd("length");function lp(mt){return mt.split("")}function Gl(mt){return mt.match(_n)||[]}function bc(mt,Gt,Rt){var Pn;return Rt(mt,function(qn,wr,Gr){if(Gt(qn,wr,Gr))return Pn=wr,!1}),Pn}function xh(mt,Gt,Rt,Pn){for(var qn=mt.length,wr=Rt+(Pn?1:-1);Pn?wr--:++wr<qn;)if(Gt(mt[wr],wr,mt))return wr;return-1}function Bo(mt,Gt,Rt){return Gt===Gt?Km(mt,Gt,Rt):xh(mt,Zl,Rt)}function iv(mt,Gt,Rt,Pn){for(var qn=Rt-1,wr=mt.length;++qn<wr;)if(Pn(mt[qn],Gt))return qn;return-1}function Zl(mt){return mt!==mt}function Um(mt,Gt){var Rt=mt==null?0:mt.length;return Rt?Ah(mt,Gt)/Rt:Zt}function Sd(mt){return function(Gt){return Gt==null?n:Gt[mt]}}function up(mt){return function(Gt){return mt==null?n:mt[Gt]}}function cp(mt,Gt,Rt,Pn,qn){return qn(mt,function(wr,Gr,Qr){Rt=Pn?(Pn=!1,wr):Gt(Rt,wr,Gr,Qr)}),Rt}function hp(mt,Gt){var Rt=mt.length;for(mt.sort(Gt);Rt--;)mt[Rt]=mt[Rt].value;return mt}function Ah(mt,Gt){for(var Rt,Pn=-1,qn=mt.length;++Pn<qn;){var wr=Gt(mt[Pn]);wr!==n&&(Rt=Rt===n?wr:Rt+wr)}return Rt}function wh(mt,Gt){for(var Rt=-1,Pn=Array(mt);++Rt<mt;)Pn[Rt]=Gt(Rt);return Pn}function dp(mt,Gt){return qr(Gt,function(Rt){return[Rt,mt[Rt]]})}function fp(mt){return mt&&mt.slice(0,Ym(mt)+1).replace(jn,"")}function ns(mt){return function(Gt){return mt(Gt)}}function Ed(mt,Gt){return qr(Gt,function(Rt){return mt[Rt]})}function Wl(mt,Gt){return mt.has(Gt)}function xc(mt,Gt){for(var Rt=-1,Pn=mt.length;++Rt<Pn&&Bo(Gt,mt[Rt],0)>-1;);return Rt}function $m(mt,Gt){for(var Rt=mt.length;Rt--&&Bo(Gt,mt[Rt],0)>-1;);return Rt}function Td(mt,Gt){for(var Rt=mt.length,Pn=0;Rt--;)mt[Rt]===Gt&&++Pn;return Pn}var Hm=up(br),Gm=up(yh);function Zm(mt){return"\\"+vc[mt]}function Wm(mt,Gt){return mt==null?n:mt[Gt]}function ql(mt){return gh.test(mt)}function Pd(mt){return Or.test(mt)}function qm(mt){for(var Gt,Rt=[];!(Gt=mt.next()).done;)Rt.push(Gt.value);return Rt}function Ac(mt){var Gt=-1,Rt=Array(mt.size);return mt.forEach(function(Pn,qn){Rt[++Gt]=[qn,Pn]}),Rt}function No(mt,Gt){return function(Rt){return mt(Gt(Rt))}}function oo(mt,Gt){for(var Rt=-1,Pn=mt.length,qn=0,wr=[];++Rt<Pn;){var Gr=mt[Rt];(Gr===Gt||Gr===b)&&(mt[Rt]=b,wr[qn++]=Rt)}return wr}function wc(mt){var Gt=-1,Rt=Array(mt.size);return mt.forEach(function(Pn){Rt[++Gt]=Pn}),Rt}function pp(mt){var Gt=-1,Rt=Array(mt.size);return mt.forEach(function(Pn){Rt[++Gt]=[Pn,Pn]}),Rt}function Km(mt,Gt,Rt){for(var Pn=Rt-1,qn=mt.length;++Pn<qn;)if(mt[Pn]===Gt)return Pn;return-1}function mp(mt,Gt,Rt){for(var Pn=Rt+1;Pn--;)if(mt[Pn]===Gt)return Pn;return Pn}function sr(mt){return ql(mt)?av(mt):rv(mt)}function ba(mt){return ql(mt)?ov(mt):lp(mt)}function Ym(mt){for(var Gt=mt.length;Gt--&&xr.test(mt.charAt(Gt)););return Gt}var sv=up(io);function av(mt){for(var Gt=Su.lastIndex=0;Su.test(mt);)++Gt;return Gt}function ov(mt){return mt.match(Su)||[]}function Xm(mt){return mt.match(Ba)||[]}var lv=function mt(Gt){Gt=Gt==null?Vi:Du.defaults(Vi.Object(),Gt,Du.pick(Vi,ap));var Rt=Gt.Array,Pn=Gt.Date,qn=Gt.Error,wr=Gt.Function,Gr=Gt.Math,Qr=Gt.Object,kd=Gt.RegExp,gp=Gt.String,ps=Gt.TypeError,Ru=Rt.prototype,Ld=wr.prototype,Vo=Qr.prototype,Ou=Gt["__core-js_shared__"],Ch=Ld.toString,Pr=Vo.hasOwnProperty,Cc=0,yp=function(){var g=/[^.]+$/.exec(Ou&&Ou.keys&&Ou.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Ic=Vo.toString,Tr=Ch.call(Qr),Dd=Vi._,uv=kd("^"+Ch.call(Pr).replace(Qn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zu=Tu?Gt.Buffer:n,Va=Gt.Symbol,Rd=Gt.Uint8Array,Qm=zu?zu.allocUnsafe:n,Mc=No(Qr.getPrototypeOf,Qr),Jm=Qr.create,Od=Vo.propertyIsEnumerable,jo=Ru.splice,Sc=Va?Va.isConcatSpreadable:n,Fu=Va?Va.iterator:n,ul=Va?Va.toStringTag:n,Ih=function(){try{var g=Zu(Qr,"defineProperty");return g({},"",{}),g}catch{}}(),zd=Gt.clearTimeout!==Vi.clearTimeout&&Gt.clearTimeout,Fd=Pn&&Pn.now!==Vi.Date.now&&Pn.now,Bd=Gt.setTimeout!==Vi.setTimeout&&Gt.setTimeout,Mh=Gr.ceil,Ec=Gr.floor,vp=Qr.getOwnPropertySymbols,_p=zu?zu.isBuffer:n,Tc=Gt.isFinite,Nd=Ru.join,bp=No(Qr.keys,Qr),Pi=Gr.max,ji=Gr.min,Sh=Pn.now,Vd=Gt.parseInt,xp=Gr.random,ki=Ru.reverse,cl=Zu(Gt,"DataView"),Rs=Zu(Gt,"Map"),Eh=Zu(Gt,"Promise"),Kl=Zu(Gt,"Set"),Bu=Zu(Gt,"WeakMap"),lo=Zu(Qr,"create"),uo=Bu&&new Bu,Yl={},Ap=Uc(cl),wp=Uc(Rs),eg=Uc(Eh),Cp=Uc(Kl),Ip=Uc(Bu),oa=Va?Va.prototype:n,Pc=oa?oa.valueOf:n,Mp=oa?oa.toString:n;function Ce(g){if(wi(g)&&!lr(g)&&!(g instanceof ur)){if(g instanceof xa)return g;if(Pr.call(g,"__wrapped__"))return c1(g)}return new xa(g)}var Nu=function(){function g(){}return function(C){if(!Li(C))return{};if(Jm)return Jm(C);g.prototype=C;var R=new g;return g.prototype=n,R}}();function Th(){}function xa(g,C){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!C,this.__index__=0,this.__values__=n}Ce.templateSettings={escape:Dt,evaluate:yt,interpolate:qt,variable:"",imports:{_:Ce}},Ce.prototype=Th.prototype,Ce.prototype.constructor=Ce,xa.prototype=Nu(Th.prototype),xa.prototype.constructor=xa;function ur(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qe,this.__views__=[]}function Xl(){var g=new ur(this.__wrapped__);return g.__actions__=Xs(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=Xs(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=Xs(this.__views__),g}function la(){if(this.__filtered__){var g=new ur(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function qs(){var g=this.__wrapped__.value(),C=this.__dir__,R=lr(g),J=C<0,me=R?g.length:0,Te=Aw(0,me,this.__views__),Ye=Te.start,ct=Te.end,bt=ct-Ye,Jt=J?ct:Ye-1,en=this.__iteratees__,sn=en.length,Mn=0,$n=ji(bt,this.__takeCount__);if(!R||!J&&me==bt&&$n==bt)return Ss(g,this.__actions__);var tr=[];e:for(;bt--&&Mn<$n;){Jt+=C;for(var Cr=-1,nr=g[Jt];++Cr<sn;){var Dr=en[Cr],Ur=Dr.iteratee,wl=Dr.type,bo=Ur(nr);if(wl==Se)nr=bo;else if(!bo){if(wl==K)continue e;break e}}tr[Mn++]=nr}return tr}ur.prototype=Nu(Th.prototype),ur.prototype.constructor=ur;function Ms(g){var C=-1,R=g==null?0:g.length;for(this.clear();++C<R;){var J=g[C];this.set(J[0],J[1])}}function tg(){this.__data__=lo?lo(null):{},this.size=0}function Uo(g){var C=this.has(g)&&delete this.__data__[g];return this.size-=C?1:0,C}function $o(g){var C=this.__data__;if(lo){var R=C[g];return R===f?n:R}return Pr.call(C,g)?C[g]:n}function ng(g){var C=this.__data__;return lo?C[g]!==n:Pr.call(C,g)}function Sp(g,C){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=lo&&C===n?f:C,this}Ms.prototype.clear=tg,Ms.prototype.delete=Uo,Ms.prototype.get=$o,Ms.prototype.has=ng,Ms.prototype.set=Sp;function hl(g){var C=-1,R=g==null?0:g.length;for(this.clear();++C<R;){var J=g[C];this.set(J[0],J[1])}}function Ep(){this.__data__=[],this.size=0}function rg(g){var C=this.__data__,R=Ql(C,g);if(R<0)return!1;var J=C.length-1;return R==J?C.pop():jo.call(C,R,1),--this.size,!0}function dl(g){var C=this.__data__,R=Ql(C,g);return R<0?n:C[R][1]}function fl(g){return Ql(this.__data__,g)>-1}function yn(g,C){var R=this.__data__,J=Ql(R,g);return J<0?(++this.size,R.push([g,C])):R[J][1]=C,this}hl.prototype.clear=Ep,hl.prototype.delete=rg,hl.prototype.get=dl,hl.prototype.has=fl,hl.prototype.set=yn;function Ho(g){var C=-1,R=g==null?0:g.length;for(this.clear();++C<R;){var J=g[C];this.set(J[0],J[1])}}function Tp(){this.size=0,this.__data__={hash:new Ms,map:new(Rs||hl),string:new Ms}}function Ph(g){var C=gg(this,g).delete(g);return this.size-=C?1:0,C}function kh(g){return gg(this,g).get(g)}function Vu(g){return gg(this,g).has(g)}function Lh(g,C){var R=gg(this,g),J=R.size;return R.set(g,C),this.size+=R.size==J?0:1,this}Ho.prototype.clear=Tp,Ho.prototype.delete=Ph,Ho.prototype.get=kh,Ho.prototype.has=Vu,Ho.prototype.set=Lh;function er(g){var C=-1,R=g==null?0:g.length;for(this.__data__=new Ho;++C<R;)this.add(g[C])}function jd(g){return this.__data__.set(g,f),this}function ig(g){return this.__data__.has(g)}er.prototype.add=er.prototype.push=jd,er.prototype.has=ig;function ua(g){var C=this.__data__=new hl(g);this.size=C.size}function Pp(){this.__data__=new hl,this.size=0}function sg(g){var C=this.__data__,R=C.delete(g);return this.size=C.size,R}function ag(g){return this.__data__.get(g)}function Ud(g){return this.__data__.has(g)}function og(g,C){var R=this.__data__;if(R instanceof hl){var J=R.__data__;if(!Rs||J.length<o-1)return J.push([g,C]),this.size=++R.size,this;R=this.__data__=new Ho(J)}return R.set(g,C),this.size=R.size,this}ua.prototype.clear=Pp,ua.prototype.delete=sg,ua.prototype.get=ag,ua.prototype.has=Ud,ua.prototype.set=og;function kp(g,C){var R=lr(g),J=!R&&Hc(g),me=!R&&!J&&Ma(g),Te=!R&&!J&&!me&&Uh(g),Ye=R||J||me||Te,ct=Ye?wh(g.length,gp):[],bt=ct.length;for(var Jt in g)(C||Pr.call(g,Jt))&&!(Ye&&(Jt=="length"||me&&(Jt=="offset"||Jt=="parent")||Te&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||Wu(Jt,bt)))&&ct.push(Jt);return ct}function $d(g){var C=g.length;return C?g[nt(0,C-1)]:n}function lg(g,C){return jc(Xs(g),Os(C,0,g.length))}function cv(g){return jc(Xs(g))}function Go(g,C,R){(R!==n&&!pa(g[C],R)||R===n&&!(C in g))&&Zo(g,C,R)}function Zr(g,C,R){var J=g[C];(!(Pr.call(g,C)&&pa(J,R))||R===n&&!(C in g))&&Zo(g,C,R)}function Ql(g,C){for(var R=g.length;R--;)if(pa(g[R][0],C))return R;return-1}function Hd(g,C,R,J){return Wo(g,function(me,Te,Ye){C(J,me,R(me),Ye)}),J}function Gd(g,C){return g&&$a(C,ae(C),g)}function Dh(g,C){return g&&$a(C,we(C),g)}function Zo(g,C,R){C=="__proto__"&&Ih?Ih(g,C,{configurable:!0,enumerable:!0,value:R,writable:!0}):g[C]=R}function Rh(g,C){for(var R=-1,J=C.length,me=Rt(J),Te=g==null;++R<J;)me[R]=Te?n:he(g,C[R]);return me}function Os(g,C,R){return g===g&&(R!==n&&(g=g<=R?g:R),C!==n&&(g=g>=C?g:C)),g}function Ks(g,C,R,J,me,Te){var Ye,ct=C&x,bt=C&M,Jt=C&A;if(R&&(Ye=me?R(g,J,me,Te):R(g)),Ye!==n)return Ye;if(!Li(g))return g;var en=lr(g);if(en){if(Ye=Cw(g),!ct)return Xs(g,Ye)}else{var sn=ms(g),Mn=sn==on||sn==Ie;if(Ma(g))return ml(g,ct);if(sn==ye||sn==kt||Mn&&!me){if(Ye=bt||Mn?{}:i1(g),!ct)return bt?wa(g,Dh(Ye,g)):dg(g,Gd(Ye,g))}else{if(!jr[sn])return me?g:{};Ye=Iw(g,sn,ct)}}Te||(Te=new ua);var $n=Te.get(g);if($n)return $n;Te.set(g,Ye),kg(g)?g.forEach(function(nr){Ye.add(Ks(nr,C,R,nr,g,Te))}):tm(g)&&g.forEach(function(nr,Dr){Ye.set(Dr,Ks(nr,C,R,Dr,g,Te))});var tr=Jt?bt?Vp:mg:bt?we:ae,Cr=en?n:tr(g);return sa(Cr||g,function(nr,Dr){Cr&&(Dr=nr,nr=g[Dr]),Zr(Ye,Dr,Ks(nr,C,R,Dr,g,Te))}),Ye}function Rn(g){var C=ae(g);return function(R){return Fn(R,g,C)}}function Fn(g,C,R){var J=R.length;if(g==null)return!J;for(g=Qr(g);J--;){var me=R[J],Te=C[me],Ye=g[me];if(Ye===n&&!(me in g)||!Te(Ye))return!1}return!0}function kc(g,C,R){if(typeof g!="function")throw new ps(l);return nf(function(){g.apply(n,R)},C)}function ju(g,C,R,J){var me=-1,Te=aa,Ye=!0,ct=g.length,bt=[],Jt=C.length;if(!ct)return bt;R&&(C=qr(C,ns(R))),J?(Te=ku,Ye=!1):C.length>=o&&(Te=Wl,Ye=!1,C=new er(C));e:for(;++me<ct;){var en=g[me],sn=R==null?en:R(en);if(en=J||en!==0?en:0,Ye&&sn===sn){for(var Mn=Jt;Mn--;)if(C[Mn]===sn)continue e;bt.push(en)}else Te(C,sn,J)||bt.push(en)}return bt}var Wo=Dp(ca),Ys=Dp(Rc,!0);function ug(g,C){var R=!0;return Wo(g,function(J,me,Te){return R=!!C(J,me,Te),R}),R}function Aa(g,C,R){for(var J=-1,me=g.length;++J<me;){var Te=g[J],Ye=C(Te);if(Ye!=null&&(ct===n?Ye===Ye&&!Ha(Ye):R(Ye,ct)))var ct=Ye,bt=Te}return bt}function Lc(g,C,R,J){var me=g.length;for(R=hr(R),R<0&&(R=-R>me?0:me+R),J=J===n||J>me?me:hr(J),J<0&&(J+=me),J=R>J?0:Dg(J);R<J;)g[R++]=C;return g}function Dc(g,C){var R=[];return Wo(g,function(J,me,Te){C(J,me,Te)&&R.push(J)}),R}function fr(g,C,R,J,me){var Te=-1,Ye=g.length;for(R||(R=Cv),me||(me=[]);++Te<Ye;){var ct=g[Te];C>0&&R(ct)?C>1?fr(ct,C-1,R,J,me):ao(me,ct):J||(me[me.length]=ct)}return me}var bi=Fc(),Zd=Fc(!0);function ca(g,C){return g&&bi(g,C,ae)}function Rc(g,C){return g&&Zd(g,C,ae)}function ja(g,C){return so(C,function(R){return yo(g[R])})}function qo(g,C){C=Es(C,g);for(var R=0,J=C.length;g!=null&&R<J;)g=g[yl(C[R++])];return R&&R==J?g:n}function Oc(g,C,R){var J=C(g);return lr(g)?J:ao(J,R(g))}function Gi(g){return g==null?g===n?wt:Oe:ul&&ul in Qr(g)?wv(g):Iv(g)}function Uu(g,C){return g>C}function Lp(g,C){return g!=null&&Pr.call(g,C)}function zc(g,C){return g!=null&&C in Qr(g)}function $u(g,C,R){return g>=ji(C,R)&&g<Pi(C,R)}function Oh(g,C,R){for(var J=R?ku:aa,me=g[0].length,Te=g.length,Ye=Te,ct=Rt(Te),bt=1/0,Jt=[];Ye--;){var en=g[Ye];Ye&&C&&(en=qr(en,ns(C))),bt=ji(en.length,bt),ct[Ye]=!R&&(C||me>=120&&en.length>=120)?new er(Ye&&en):n}en=g[0];var sn=-1,Mn=ct[0];e:for(;++sn<me&&Jt.length<bt;){var $n=en[sn],tr=C?C($n):$n;if($n=R||$n!==0?$n:0,!(Mn?Wl(Mn,tr):J(Jt,tr,R))){for(Ye=Te;--Ye;){var Cr=ct[Ye];if(!(Cr?Wl(Cr,tr):J(g[Ye],tr,R)))continue e}Mn&&Mn.push(tr),Jt.push($n)}}return Jt}function Wd(g,C,R,J){return ca(g,function(me,Te,Ye){C(J,R(me),Te,Ye)}),J}function co(g,C,R){C=Es(C,g),g=Hp(g,C);var J=g==null?g:g[yl(Ko(C))];return J==null?n:fs(J,g,R)}function qd(g){return wi(g)&&Gi(g)==kt}function Kd(g){return wi(g)&&Gi(g)==cn}function Yd(g){return wi(g)&&Gi(g)==lt}function Hu(g,C,R,J,me){return g===C?!0:g==null||C==null||!wi(g)&&!wi(C)?g!==g&&C!==C:w(g,C,R,J,Hu,me)}function w(g,C,R,J,me,Te){var Ye=lr(g),ct=lr(C),bt=Ye?un:ms(g),Jt=ct?un:ms(C);bt=bt==kt?ye:bt,Jt=Jt==kt?ye:Jt;var en=bt==ye,sn=Jt==ye,Mn=bt==Jt;if(Mn&&Ma(g)){if(!Ma(C))return!1;Ye=!0,en=!1}if(Mn&&!en)return Te||(Te=new ua),Ye||Uh(g)?_v(g,C,R,J,me,Te):bv(g,C,bt,R,J,me,Te);if(!(R&k)){var $n=en&&Pr.call(g,"__wrapped__"),tr=sn&&Pr.call(C,"__wrapped__");if($n||tr){var Cr=$n?g.value():g,nr=tr?C.value():C;return Te||(Te=new ua),me(Cr,nr,R,J,Te)}}return Mn?(Te||(Te=new ua),Np(g,C,R,J,me,Te)):!1}function r(g){return wi(g)&&ms(g)==$}function c(g,C,R,J){var me=R.length,Te=me,Ye=!J;if(g==null)return!Te;for(g=Qr(g);me--;){var ct=R[me];if(Ye&&ct[2]?ct[1]!==g[ct[0]]:!(ct[0]in g))return!1}for(;++me<Te;){ct=R[me];var bt=ct[0],Jt=g[bt],en=ct[1];if(Ye&&ct[2]){if(Jt===n&&!(bt in g))return!1}else{var sn=new ua;if(J)var Mn=J(Jt,en,bt,g,C,sn);if(!(Mn===n?Hu(en,Jt,k|L,J,sn):Mn))return!1}}return!0}function m(g){if(!Li(g)||Jd(g))return!1;var C=yo(g)?uv:Cu;return C.test(Uc(g))}function v(g){return wi(g)&&Gi(g)==tt}function I(g){return wi(g)&&ms(g)==it}function T(g){return wi(g)&&Vh(g.length)&&!!Tn[Gi(g)]}function D(g){return typeof g=="function"?g:g==null?Js:typeof g=="object"?lr(g)?fe(g[0],g[1]):ie(g):KS(g)}function B(g){if(!Vc(g))return bp(g);var C=[];for(var R in Qr(g))Pr.call(g,R)&&R!="constructor"&&C.push(R);return C}function H(g){if(!Li(g))return $p(g);var C=Vc(g),R=[];for(var J in g)J=="constructor"&&(C||!Pr.call(g,J))||R.push(J);return R}function Q(g,C){return g<C}function re(g,C){var R=-1,J=Ia(g)?Rt(g.length):[];return Wo(g,function(me,Te,Ye){J[++R]=C(me,Te,Ye)}),J}function ie(g){var C=Av(g);return C.length==1&&C[0][2]?ef(C[0][0],C[0][1]):function(R){return R===g||c(R,g,C)}}function fe(g,C){return Fh(g)&&Up(C)?ef(yl(g),C):function(R){var J=he(R,g);return J===n&&J===C?Me(R,g):Hu(C,J,k|L)}}function _e(g,C,R,J,me){g!==C&&bi(C,function(Te,Ye){if(me||(me=new ua),Li(Te))De(g,C,Ye,R,_e,J,me);else{var ct=J?J(Nh(g,Ye),Te,Ye+"",g,C,me):n;ct===n&&(ct=Te),Go(g,Ye,ct)}},we)}function De(g,C,R,J,me,Te,Ye){var ct=Nh(g,R),bt=Nh(C,R),Jt=Ye.get(bt);if(Jt){Go(g,R,Jt);return}var en=Te?Te(ct,bt,R+"",g,C,Ye):n,sn=en===n;if(sn){var Mn=lr(bt),$n=!Mn&&Ma(bt),tr=!Mn&&!$n&&Uh(bt);en=bt,Mn||$n||tr?lr(ct)?en=ct:ss(ct)?en=Xs(ct):$n?(sn=!1,en=ml(bt,!0)):tr?(sn=!1,en=xi(bt,!0)):en=[]:jh(bt)||Hc(bt)?(en=ct,Hc(ct)?en=cf(ct):(!Li(ct)||yo(ct))&&(en=i1(bt))):sn=!1}sn&&(Ye.set(bt,en),me(en,bt,J,Te,Ye),Ye.delete(bt)),Go(g,R,en)}function ke(g,C){var R=g.length;if(R)return C+=C<0?R:0,Wu(C,R)?g[C]:n}function Re(g,C,R){C.length?C=qr(C,function(Te){return lr(Te)?function(Ye){return qo(Ye,Te.length===1?Te[0]:Te)}:Te}):C=[Js];var J=-1;C=qr(C,ns(Xn()));var me=re(g,function(Te,Ye,ct){var bt=qr(C,function(Jt){return Jt(Te)});return{criteria:bt,index:++J,value:Te}});return hp(me,function(Te,Ye){return cg(Te,Ye,R)})}function je(g,C){return We(g,C,function(R,J){return Me(g,J)})}function We(g,C,R){for(var J=-1,me=C.length,Te={};++J<me;){var Ye=C[J],ct=qo(g,Ye);R(ct,Ye)&&ln(Te,Es(Ye,g),ct)}return Te}function Ke(g){return function(C){return qo(C,g)}}function Je(g,C,R,J){var me=J?iv:Bo,Te=-1,Ye=C.length,ct=g;for(g===C&&(C=Xs(C)),R&&(ct=qr(g,ns(R)));++Te<Ye;)for(var bt=0,Jt=C[Te],en=R?R(Jt):Jt;(bt=me(ct,en,bt,J))>-1;)ct!==g&&jo.call(ct,bt,1),jo.call(g,bt,1);return g}function at(g,C){for(var R=g?C.length:0,J=R-1;R--;){var me=C[R];if(R==J||me!==Te){var Te=me;Wu(me)?jo.call(g,me,1):Zi(g,me)}}return g}function nt(g,C){return g+Ec(xp()*(C-g+1))}function xt(g,C,R,J){for(var me=-1,Te=Pi(Mh((C-g)/(R||1)),0),Ye=Rt(Te);Te--;)Ye[J?Te:++me]=g,g+=R;return Ye}function Ct(g,C){var R="";if(!g||C<1||C>et)return R;do C%2&&(R+=g),C=Ec(C/2),C&&(g+=g);while(C);return R}function vt(g,C){return qu(Bh(g,C,Js),g+"")}function jt(g){return $d(Bs(g))}function zt(g,C){var R=Bs(g);return jc(R,Os(C,0,R.length))}function ln(g,C,R,J){if(!Li(g))return g;C=Es(C,g);for(var me=-1,Te=C.length,Ye=Te-1,ct=g;ct!=null&&++me<Te;){var bt=yl(C[me]),Jt=R;if(bt==="__proto__"||bt==="constructor"||bt==="prototype")return g;if(me!=Ye){var en=ct[bt];Jt=J?J(en,bt,ct):n,Jt===n&&(Jt=Li(en)?en:Wu(C[me+1])?[]:{})}Zr(ct,bt,Jt),ct=ct[bt]}return g}var nn=uo?function(g,C){return uo.set(g,C),g}:Js,Kt=Ih?function(g,C){return Ih(g,"toString",{configurable:!0,enumerable:!1,value:o0(C),writable:!0})}:Js;function kn(g){return jc(Bs(g))}function Hn(g,C,R){var J=-1,me=g.length;C<0&&(C=-C>me?0:me+C),R=R>me?me:R,R<0&&(R+=me),me=C>R?0:R-C>>>0,C>>>=0;for(var Te=Rt(me);++J<me;)Te[J]=g[J+C];return Te}function Zn(g,C){var R;return Wo(g,function(J,me,Te){return R=C(J,me,Te),!R}),!!R}function Jr(g,C,R){var J=0,me=g==null?J:g.length;if(typeof C=="number"&&C===C&&me<=Tt){for(;J<me;){var Te=J+me>>>1,Ye=g[Te];Ye!==null&&!Ha(Ye)&&(R?Ye<=C:Ye<C)?J=Te+1:me=Te}return me}return Lr(g,C,Js,R)}function Lr(g,C,R,J){var me=0,Te=g==null?0:g.length;if(Te===0)return 0;C=R(C);for(var Ye=C!==C,ct=C===null,bt=Ha(C),Jt=C===n;me<Te;){var en=Ec((me+Te)/2),sn=R(g[en]),Mn=sn!==n,$n=sn===null,tr=sn===sn,Cr=Ha(sn);if(Ye)var nr=J||tr;else Jt?nr=tr&&(J||Mn):ct?nr=tr&&Mn&&(J||!$n):bt?nr=tr&&Mn&&!$n&&(J||!Cr):$n||Cr?nr=!1:nr=J?sn<=C:sn<C;nr?me=en+1:Te=en}return ji(Te,Ue)}function oi(g,C){for(var R=-1,J=g.length,me=0,Te=[];++R<J;){var Ye=g[R],ct=C?C(Ye):Ye;if(!R||!pa(ct,bt)){var bt=ct;Te[me++]=Ye===0?0:Ye}}return Te}function ni(g){return typeof g=="number"?g:Ha(g)?Zt:+g}function or(g){if(typeof g=="string")return g;if(lr(g))return qr(g,or)+"";if(Ha(g))return Mp?Mp.call(g):"";var C=g+"";return C=="0"&&1/g==-1/0?"-0":C}function pr(g,C,R){var J=-1,me=aa,Te=g.length,Ye=!0,ct=[],bt=ct;if(R)Ye=!1,me=ku;else if(Te>=o){var Jt=C?null:xw(g);if(Jt)return wc(Jt);Ye=!1,me=Wl,bt=new er}else bt=C?[]:ct;e:for(;++J<Te;){var en=g[J],sn=C?C(en):en;if(en=R||en!==0?en:0,Ye&&sn===sn){for(var Mn=bt.length;Mn--;)if(bt[Mn]===sn)continue e;C&&bt.push(sn),ct.push(en)}else me(bt,sn,R)||(bt!==ct&&bt.push(sn),ct.push(en))}return ct}function Zi(g,C){return C=Es(C,g),g=Hp(g,C),g==null||delete g[yl(Ko(C))]}function Wi(g,C,R,J){return ln(g,C,R(qo(g,C)),J)}function qi(g,C,R,J){for(var me=g.length,Te=J?me:-1;(J?Te--:++Te<me)&&C(g[Te],Te,g););return R?Hn(g,J?0:Te,J?Te+1:me):Hn(g,J?Te+1:0,J?me:Te)}function Ss(g,C){var R=g;return R instanceof ur&&(R=R.value()),Lu(C,function(J,me){return me.func.apply(me.thisArg,ao([J],me.args))},R)}function Ua(g,C,R){var J=g.length;if(J<2)return J?pr(g[0]):[];for(var me=-1,Te=Rt(J);++me<J;)for(var Ye=g[me],ct=-1;++ct<J;)ct!=me&&(Te[me]=ju(Te[me]||Ye,g[ct],C,R));return pr(fr(Te,1),C,R)}function pl(g,C,R){for(var J=-1,me=g.length,Te=C.length,Ye={};++J<me;){var ct=J<Te?C[J]:n;R(Ye,g[J],ct)}return Ye}function ho(g){return ss(g)?g:[]}function fo(g){return typeof g=="function"?g:Js}function Es(g,C){return lr(g)?g:Fh(g,C)?[g]:vg(Wr(g))}var Gu=vt;function ha(g,C,R){var J=g.length;return R=R===n?J:R,!C&&R>=J?g:Hn(g,C,R)}var da=zd||function(g){return Vi.clearTimeout(g)};function ml(g,C){if(C)return g.slice();var R=g.length,J=Qm?Qm(R):new g.constructor(R);return g.copy(J),J}function po(g){var C=new g.constructor(g.byteLength);return new Rd(C).set(new Rd(g)),C}function gl(g,C){var R=C?po(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function gi(g){var C=new g.constructor(g.source,si.exec(g));return C.lastIndex=g.lastIndex,C}function li(g){return Pc?Qr(Pc.call(g)):{}}function xi(g,C){var R=C?po(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function ui(g,C){if(g!==C){var R=g!==n,J=g===null,me=g===g,Te=Ha(g),Ye=C!==n,ct=C===null,bt=C===C,Jt=Ha(C);if(!ct&&!Jt&&!Te&&g>C||Te&&Ye&&bt&&!ct&&!Jt||J&&Ye&&bt||!R&&bt||!me)return 1;if(!J&&!Te&&!Jt&&g<C||Jt&&R&&me&&!J&&!Te||ct&&R&&me||!Ye&&me||!bt)return-1}return 0}function cg(g,C,R){for(var J=-1,me=g.criteria,Te=C.criteria,Ye=me.length,ct=R.length;++J<Ye;){var bt=ui(me[J],Te[J]);if(bt){if(J>=ct)return bt;var Jt=R[J];return bt*(Jt=="desc"?-1:1)}}return g.index-C.index}function Jl(g,C,R,J){for(var me=-1,Te=g.length,Ye=R.length,ct=-1,bt=C.length,Jt=Pi(Te-Ye,0),en=Rt(bt+Jt),sn=!J;++ct<bt;)en[ct]=C[ct];for(;++me<Ye;)(sn||me<Te)&&(en[R[me]]=g[me]);for(;Jt--;)en[ct++]=g[me++];return en}function hg(g,C,R,J){for(var me=-1,Te=g.length,Ye=-1,ct=R.length,bt=-1,Jt=C.length,en=Pi(Te-ct,0),sn=Rt(en+Jt),Mn=!J;++me<en;)sn[me]=g[me];for(var $n=me;++bt<Jt;)sn[$n+bt]=C[bt];for(;++Ye<ct;)(Mn||me<Te)&&(sn[$n+R[Ye]]=g[me++]);return sn}function Xs(g,C){var R=-1,J=g.length;for(C||(C=Rt(J));++R<J;)C[R]=g[R];return C}function $a(g,C,R,J){var me=!R;R||(R={});for(var Te=-1,Ye=C.length;++Te<Ye;){var ct=C[Te],bt=J?J(R[ct],g[ct],ct,R,g):n;bt===n&&(bt=g[ct]),me?Zo(R,ct,bt):Zr(R,ct,bt)}return R}function dg(g,C){return $a(g,yg(g),C)}function wa(g,C){return $a(g,Nc(g),C)}function mo(g,C){return function(R,J){var me=lr(R)?Md:Hd,Te=C?C():{};return me(R,g,Xn(J,2),Te)}}function eu(g){return vt(function(C,R){var J=-1,me=R.length,Te=me>1?R[me-1]:n,Ye=me>2?R[2]:n;for(Te=g.length>3&&typeof Te=="function"?(me--,Te):n,Ye&&fa(R[0],R[1],Ye)&&(Te=me<3?n:Te,me=1),C=Qr(C);++J<me;){var ct=R[J];ct&&g(C,ct,J,Te)}return C})}function Dp(g,C){return function(R,J){if(R==null)return R;if(!Ia(R))return g(R,J);for(var me=R.length,Te=C?me:-1,Ye=Qr(R);(C?Te--:++Te<me)&&J(Ye[Te],Te,Ye)!==!1;);return R}}function Fc(g){return function(C,R,J){for(var me=-1,Te=Qr(C),Ye=J(C),ct=Ye.length;ct--;){var bt=Ye[g?ct:++me];if(R(Te[bt],bt,Te)===!1)break}return C}}function Rp(g,C,R){var J=C&F,me=Op(g);function Te(){var Ye=this&&this!==Vi&&this instanceof Te?me:g;return Ye.apply(J?R:this,arguments)}return Te}function Xd(g){return function(C){C=Wr(C);var R=ql(C)?ba(C):n,J=R?R[0]:C.charAt(0),me=R?ha(R,1).join(""):C.slice(1);return J[g]()+me}}function zh(g){return function(C){return Lu(hb(Qs(C).replace(zo,"")),g,"")}}function Op(g){return function(){var C=arguments;switch(C.length){case 0:return new g;case 1:return new g(C[0]);case 2:return new g(C[0],C[1]);case 3:return new g(C[0],C[1],C[2]);case 4:return new g(C[0],C[1],C[2],C[3]);case 5:return new g(C[0],C[1],C[2],C[3],C[4]);case 6:return new g(C[0],C[1],C[2],C[3],C[4],C[5]);case 7:return new g(C[0],C[1],C[2],C[3],C[4],C[5],C[6])}var R=Nu(g.prototype),J=g.apply(R,C);return Li(J)?J:R}}function hv(g,C,R){var J=Op(g);function me(){for(var Te=arguments.length,Ye=Rt(Te),ct=Te,bt=Qd(me);ct--;)Ye[ct]=arguments[ct];var Jt=Te<3&&Ye[0]!==bt&&Ye[Te-1]!==bt?[]:oo(Ye,bt);if(Te-=Jt.length,Te<R)return pv(g,C,zp,me.placeholder,n,Ye,Jt,n,n,R-Te);var en=this&&this!==Vi&&this instanceof me?J:g;return fs(en,this,Ye)}return me}function t1(g){return function(C,R,J){var me=Qr(C);if(!Ia(C)){var Te=Xn(R,3);C=ae(C),R=function(ct){return Te(me[ct],ct,me)}}var Ye=g(C,R,J);return Ye>-1?me[Te?C[Ye]:Ye]:n}}function fg(g){return rs(function(C){var R=C.length,J=R,me=xa.prototype.thru;for(g&&C.reverse();J--;){var Te=C[J];if(typeof Te!="function")throw new ps(l);if(me&&!Ye&&jp(Te)=="wrapper")var Ye=new xa([],!0)}for(J=Ye?J:R;++J<R;){Te=C[J];var ct=jp(Te),bt=ct=="wrapper"?xv(Te):n;bt&&Ai(bt[0])&&bt[1]==(X|N|W|q)&&!bt[4].length&&bt[9]==1?Ye=Ye[jp(bt[0])].apply(Ye,bt[3]):Ye=Te.length==1&&Ai(Te)?Ye[ct]():Ye.thru(Te)}return function(){var Jt=arguments,en=Jt[0];if(Ye&&Jt.length==1&&lr(en))return Ye.plant(en).value();for(var sn=0,Mn=R?C[sn].apply(this,Jt):en;++sn<R;)Mn=C[sn].call(this,Mn);return Mn}})}function zp(g,C,R,J,me,Te,Ye,ct,bt,Jt){var en=C&X,sn=C&F,Mn=C&V,$n=C&(N|U),tr=C&G,Cr=Mn?n:Op(g);function nr(){for(var Dr=arguments.length,Ur=Rt(Dr),wl=Dr;wl--;)Ur[wl]=arguments[wl];if($n)var bo=Qd(nr),Cl=Td(Ur,bo);if(J&&(Ur=Jl(Ur,J,me,$n)),Te&&(Ur=hg(Ur,Te,Ye,$n)),Dr-=Cl,$n&&Dr<Jt){var ks=oo(Ur,bo);return pv(g,C,zp,nr.placeholder,R,Ur,ks,ct,bt,Jt-Dr)}var Qu=sn?R:this,Zh=Mn?Qu[g]:g;return Dr=Ur.length,ct?Ur=tf(Ur,ct):tr&&Dr>1&&Ur.reverse(),en&&bt<Dr&&(Ur.length=bt),this&&this!==Vi&&this instanceof nr&&(Zh=Cr||Op(Zh)),Zh.apply(Qu,Ur)}return nr}function dv(g,C){return function(R,J){return Wd(R,g,C(J),{})}}function tu(g,C){return function(R,J){var me;if(R===n&&J===n)return C;if(R!==n&&(me=R),J!==n){if(me===n)return J;typeof R=="string"||typeof J=="string"?(R=or(R),J=or(J)):(R=ni(R),J=ni(J)),me=g(R,J)}return me}}function fv(g){return rs(function(C){return C=qr(C,ns(Xn())),vt(function(R){var J=this;return g(C,function(me){return fs(me,J,R)})})})}function Bc(g,C){C=C===n?" ":or(C);var R=C.length;if(R<2)return R?Ct(C,g):C;var J=Ct(C,Mh(g/sr(C)));return ql(C)?ha(ba(J),0,g).join(""):J.slice(0,g)}function pg(g,C,R,J){var me=C&F,Te=Op(g);function Ye(){for(var ct=-1,bt=arguments.length,Jt=-1,en=J.length,sn=Rt(en+bt),Mn=this&&this!==Vi&&this instanceof Ye?Te:g;++Jt<en;)sn[Jt]=J[Jt];for(;bt--;)sn[Jt++]=arguments[++ct];return fs(Mn,me?R:this,sn)}return Ye}function Fp(g){return function(C,R,J){return J&&typeof J!="number"&&fa(C,R,J)&&(R=J=n),C=_l(C),R===n?(R=C,C=0):R=_l(R),J=J===n?C<R?1:-1:_l(J),xt(C,R,J,g)}}function Bp(g){return function(C,R){return typeof C=="string"&&typeof R=="string"||(C=Sa(C),R=Sa(R)),g(C,R)}}function pv(g,C,R,J,me,Te,Ye,ct,bt,Jt){var en=C&N,sn=en?Ye:n,Mn=en?n:Ye,$n=en?Te:n,tr=en?n:Te;C|=en?W:ne,C&=~(en?ne:W),C&O||(C&=-4);var Cr=[g,C,me,$n,sn,tr,Mn,ct,bt,Jt],nr=R.apply(n,Cr);return Ai(g)&&l1(nr,Cr),nr.placeholder=J,u1(nr,g,C)}function mv(g){var C=Gr[g];return function(R,J){if(R=Sa(R),J=J==null?0:ji(hr(J),292),J&&Tc(R)){var me=(Wr(R)+"e").split("e"),Te=C(me[0]+"e"+(+me[1]+J));return me=(Wr(Te)+"e").split("e"),+(me[0]+"e"+(+me[1]-J))}return C(R)}}var xw=Kl&&1/wc(new Kl([,-0]))[1]==Ne?function(g){return new Kl(g)}:_o;function gv(g){return function(C){var R=ms(C);return R==$?Ac(C):R==it?pp(C):dp(C,g(C))}}function nu(g,C,R,J,me,Te,Ye,ct){var bt=C&V;if(!bt&&typeof g!="function")throw new ps(l);var Jt=J?J.length:0;if(Jt||(C&=-97,J=me=n),Ye=Ye===n?Ye:Pi(hr(Ye),0),ct=ct===n?ct:hr(ct),Jt-=me?me.length:0,C&ne){var en=J,sn=me;J=me=n}var Mn=bt?n:xv(g),$n=[g,C,R,J,me,en,sn,Te,Ye,ct];if(Mn&&o1($n,Mn),g=$n[0],C=$n[1],R=$n[2],J=$n[3],me=$n[4],ct=$n[9]=$n[9]===n?bt?0:g.length:Pi($n[9]-Jt,0),!ct&&C&(N|U)&&(C&=-25),!C||C==F)var tr=Rp(g,C,R);else C==N||C==U?tr=hv(g,C,ct):(C==W||C==(F|W))&&!me.length?tr=pg(g,C,R,J):tr=zp.apply(n,$n);var Cr=Mn?nn:l1;return u1(Cr(tr,$n),g,C)}function yv(g,C,R,J){return g===n||pa(g,Vo[R])&&!Pr.call(J,R)?C:g}function n1(g,C,R,J,me,Te){return Li(g)&&Li(C)&&(Te.set(C,g),_e(g,C,n,n1,Te),Te.delete(C)),g}function vv(g){return jh(g)?n:g}function _v(g,C,R,J,me,Te){var Ye=R&k,ct=g.length,bt=C.length;if(ct!=bt&&!(Ye&&bt>ct))return!1;var Jt=Te.get(g),en=Te.get(C);if(Jt&&en)return Jt==C&&en==g;var sn=-1,Mn=!0,$n=R&L?new er:n;for(Te.set(g,C),Te.set(C,g);++sn<ct;){var tr=g[sn],Cr=C[sn];if(J)var nr=Ye?J(Cr,tr,sn,C,g,Te):J(tr,Cr,sn,g,C,Te);if(nr!==n){if(nr)continue;Mn=!1;break}if($n){if(!Na(C,function(Dr,Ur){if(!Wl($n,Ur)&&(tr===Dr||me(tr,Dr,R,J,Te)))return $n.push(Ur)})){Mn=!1;break}}else if(!(tr===Cr||me(tr,Cr,R,J,Te))){Mn=!1;break}}return Te.delete(g),Te.delete(C),Mn}function bv(g,C,R,J,me,Te,Ye){switch(R){case fn:if(g.byteLength!=C.byteLength||g.byteOffset!=C.byteOffset)return!1;g=g.buffer,C=C.buffer;case cn:return!(g.byteLength!=C.byteLength||!Te(new Rd(g),new Rd(C)));case ft:case lt:case Pe:return pa(+g,+C);case Lt:return g.name==C.name&&g.message==C.message;case tt:case Be:return g==C+"";case $:var ct=Ac;case it:var bt=J&k;if(ct||(ct=wc),g.size!=C.size&&!bt)return!1;var Jt=Ye.get(g);if(Jt)return Jt==C;J|=L,Ye.set(g,C);var en=_v(ct(g),ct(C),J,me,Te,Ye);return Ye.delete(g),en;case Mt:if(Pc)return Pc.call(g)==Pc.call(C)}return!1}function Np(g,C,R,J,me,Te){var Ye=R&k,ct=mg(g),bt=ct.length,Jt=mg(C),en=Jt.length;if(bt!=en&&!Ye)return!1;for(var sn=bt;sn--;){var Mn=ct[sn];if(!(Ye?Mn in C:Pr.call(C,Mn)))return!1}var $n=Te.get(g),tr=Te.get(C);if($n&&tr)return $n==C&&tr==g;var Cr=!0;Te.set(g,C),Te.set(C,g);for(var nr=Ye;++sn<bt;){Mn=ct[sn];var Dr=g[Mn],Ur=C[Mn];if(J)var wl=Ye?J(Ur,Dr,Mn,C,g,Te):J(Dr,Ur,Mn,g,C,Te);if(!(wl===n?Dr===Ur||me(Dr,Ur,R,J,Te):wl)){Cr=!1;break}nr||(nr=Mn=="constructor")}if(Cr&&!nr){var bo=g.constructor,Cl=C.constructor;bo!=Cl&&"constructor"in g&&"constructor"in C&&!(typeof bo=="function"&&bo instanceof bo&&typeof Cl=="function"&&Cl instanceof Cl)&&(Cr=!1)}return Te.delete(g),Te.delete(C),Cr}function rs(g){return qu(Bh(g,n,Lv),g+"")}function mg(g){return Oc(g,ae,yg)}function Vp(g){return Oc(g,we,Nc)}var xv=uo?function(g){return uo.get(g)}:_o;function jp(g){for(var C=g.name+"",R=Yl[C],J=Pr.call(Yl,C)?R.length:0;J--;){var me=R[J],Te=me.func;if(Te==null||Te==g)return me.name}return C}function Qd(g){var C=Pr.call(Ce,"placeholder")?Ce:g;return C.placeholder}function Xn(){var g=Ce.iteratee||Og;return g=g===Og?D:g,arguments.length?g(arguments[0],arguments[1]):g}function gg(g,C){var R=g.__data__;return Sw(C)?R[typeof C=="string"?"string":"hash"]:R.map}function Av(g){for(var C=ae(g),R=C.length;R--;){var J=C[R],me=g[J];C[R]=[J,me,Up(me)]}return C}function Zu(g,C){var R=Wm(g,C);return m(R)?R:n}function wv(g){var C=Pr.call(g,ul),R=g[ul];try{g[ul]=n;var J=!0}catch{}var me=Ic.call(g);return J&&(C?g[ul]=R:delete g[ul]),me}var yg=vp?function(g){return g==null?[]:(g=Qr(g),so(vp(g),function(C){return Od.call(g,C)}))}:M2,Nc=vp?function(g){for(var C=[];g;)ao(C,yg(g)),g=Mc(g);return C}:M2,ms=Gi;(cl&&ms(new cl(new ArrayBuffer(1)))!=fn||Rs&&ms(new Rs)!=$||Eh&&ms(Eh.resolve())!=pe||Kl&&ms(new Kl)!=it||Bu&&ms(new Bu)!=At)&&(ms=function(g){var C=Gi(g),R=C==ye?g.constructor:n,J=R?Uc(R):"";if(J)switch(J){case Ap:return fn;case wp:return $;case eg:return pe;case Cp:return it;case Ip:return At}return C});function Aw(g,C,R){for(var J=-1,me=R.length;++J<me;){var Te=R[J],Ye=Te.size;switch(Te.type){case"drop":g+=Ye;break;case"dropRight":C-=Ye;break;case"take":C=ji(C,g+Ye);break;case"takeRight":g=Pi(g,C-Ye);break}}return{start:g,end:C}}function ww(g){var C=g.match(Ar);return C?C[1].split(Ut):[]}function r1(g,C,R){C=Es(C,g);for(var J=-1,me=C.length,Te=!1;++J<me;){var Ye=yl(C[J]);if(!(Te=g!=null&&R(g,Ye)))break;g=g[Ye]}return Te||++J!=me?Te:(me=g==null?0:g.length,!!me&&Vh(me)&&Wu(Ye,me)&&(lr(g)||Hc(g)))}function Cw(g){var C=g.length,R=new g.constructor(C);return C&&typeof g[0]=="string"&&Pr.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function i1(g){return typeof g.constructor=="function"&&!Vc(g)?Nu(Mc(g)):{}}function Iw(g,C,R){var J=g.constructor;switch(C){case cn:return po(g);case ft:case lt:return new J(+g);case fn:return gl(g,R);case ut:case pt:case _t:case Nt:case Wt:case wn:case Xe:case de:case ge:return xi(g,R);case $:return new J;case Pe:case Be:return new J(g);case tt:return gi(g);case it:return new J;case Mt:return li(g)}}function Mw(g,C){var R=C.length;if(!R)return g;var J=R-1;return C[J]=(R>1?"& ":"")+C[J],C=C.join(R>2?", ":" "),g.replace(Vr,`{
/* [wrapped with `+C+`] */
`)}function Cv(g){return lr(g)||Hc(g)||!!(Sc&&g&&g[Sc])}function Wu(g,C){var R=typeof g;return C=C??et,!!C&&(R=="number"||R!="symbol"&&Nl.test(g))&&g>-1&&g%1==0&&g<C}function fa(g,C,R){if(!Li(R))return!1;var J=typeof C;return(J=="number"?Ia(R)&&Wu(C,R.length):J=="string"&&C in R)?pa(R[C],g):!1}function Fh(g,C){if(lr(g))return!1;var R=typeof g;return R=="number"||R=="symbol"||R=="boolean"||g==null||Ha(g)?!0:mn.test(g)||!pn.test(g)||C!=null&&g in Qr(C)}function Sw(g){var C=typeof g;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?g!=="__proto__":g===null}function Ai(g){var C=jp(g),R=Ce[C];if(typeof R!="function"||!(C in ur.prototype))return!1;if(g===R)return!0;var J=xv(R);return!!J&&g===J[0]}function Jd(g){return!!yp&&yp in g}var s1=Ou?yo:S2;function Vc(g){var C=g&&g.constructor,R=typeof C=="function"&&C.prototype||Vo;return g===R}function Up(g){return g===g&&!Li(g)}function ef(g,C){return function(R){return R==null?!1:R[g]===C&&(C!==n||g in Qr(R))}}function a1(g){var C=Sg(g,function(J){return R.size===y&&R.clear(),J}),R=C.cache;return C}function o1(g,C){var R=g[1],J=C[1],me=R|J,Te=me<(F|V|X),Ye=J==X&&R==N||J==X&&R==q&&g[7].length<=C[8]||J==(X|q)&&C[7].length<=C[8]&&R==N;if(!(Te||Ye))return g;J&F&&(g[2]=C[2],me|=R&F?0:O);var ct=C[3];if(ct){var bt=g[3];g[3]=bt?Jl(bt,ct,C[4]):ct,g[4]=bt?oo(g[3],b):C[4]}return ct=C[5],ct&&(bt=g[5],g[5]=bt?hg(bt,ct,C[6]):ct,g[6]=bt?oo(g[5],b):C[6]),ct=C[7],ct&&(g[7]=ct),J&X&&(g[8]=g[8]==null?C[8]:ji(g[8],C[8])),g[9]==null&&(g[9]=C[9]),g[0]=C[0],g[1]=me,g}function $p(g){var C=[];if(g!=null)for(var R in Qr(g))C.push(R);return C}function Iv(g){return Ic.call(g)}function Bh(g,C,R){return C=Pi(C===n?g.length-1:C,0),function(){for(var J=arguments,me=-1,Te=Pi(J.length-C,0),Ye=Rt(Te);++me<Te;)Ye[me]=J[C+me];me=-1;for(var ct=Rt(C+1);++me<C;)ct[me]=J[me];return ct[C]=R(Ye),fs(g,this,ct)}}function Hp(g,C){return C.length<2?g:qo(g,Hn(C,0,-1))}function tf(g,C){for(var R=g.length,J=ji(C.length,R),me=Xs(g);J--;){var Te=C[J];g[J]=Wu(Te,R)?me[Te]:n}return g}function Nh(g,C){if(!(C==="constructor"&&typeof g[C]=="function")&&C!="__proto__")return g[C]}var l1=Mv(nn),nf=Bd||function(g,C){return Vi.setTimeout(g,C)},qu=Mv(Kt);function u1(g,C,R){var J=C+"";return qu(g,Mw(J,Ew(ww(J),R)))}function Mv(g){var C=0,R=0;return function(){var J=Sh(),me=ce-(J-R);if(R=J,me>0){if(++C>=Y)return arguments[0]}else C=0;return g.apply(n,arguments)}}function jc(g,C){var R=-1,J=g.length,me=J-1;for(C=C===n?J:C;++R<C;){var Te=nt(R,me),Ye=g[Te];g[Te]=g[R],g[R]=Ye}return g.length=C,g}var vg=a1(function(g){var C=[];return g.charCodeAt(0)===46&&C.push(""),g.replace(Vn,function(R,J,me,Te){C.push(me?Te.replace($s,"$1"):J||R)}),C});function yl(g){if(typeof g=="string"||Ha(g))return g;var C=g+"";return C=="0"&&1/g==-1/0?"-0":C}function Uc(g){if(g!=null){try{return Ch.call(g)}catch{}try{return g+""}catch{}}return""}function Ew(g,C){return sa(Bt,function(R){var J="_."+R[0];C&R[1]&&!aa(g,J)&&g.push(J)}),g.sort()}function c1(g){if(g instanceof ur)return g.clone();var C=new xa(g.__wrapped__,g.__chain__);return C.__actions__=Xs(g.__actions__),C.__index__=g.__index__,C.__values__=g.__values__,C}function Tw(g,C,R){(R?fa(g,C,R):C===n)?C=1:C=Pi(hr(C),0);var J=g==null?0:g.length;if(!J||C<1)return[];for(var me=0,Te=0,Ye=Rt(Mh(J/C));me<J;)Ye[Te++]=Hn(g,me,me+=C);return Ye}function Pw(g){for(var C=-1,R=g==null?0:g.length,J=0,me=[];++C<R;){var Te=g[C];Te&&(me[J++]=Te)}return me}function kw(){var g=arguments.length;if(!g)return[];for(var C=Rt(g-1),R=arguments[0],J=g;J--;)C[J-1]=arguments[J];return ao(lr(R)?Xs(R):[R],fr(C,1))}var Sv=vt(function(g,C){return ss(g)?ju(g,fr(C,1,ss,!0)):[]}),h1=vt(function(g,C){var R=Ko(C);return ss(R)&&(R=n),ss(g)?ju(g,fr(C,1,ss,!0),Xn(R,2)):[]}),Ev=vt(function(g,C){var R=Ko(C);return ss(R)&&(R=n),ss(g)?ju(g,fr(C,1,ss,!0),n,R):[]});function d1(g,C,R){var J=g==null?0:g.length;return J?(C=R||C===n?1:hr(C),Hn(g,C<0?0:C,J)):[]}function Tv(g,C,R){var J=g==null?0:g.length;return J?(C=R||C===n?1:hr(C),C=J-C,Hn(g,0,C<0?0:C)):[]}function f1(g,C){return g&&g.length?qi(g,Xn(C,3),!0,!0):[]}function p1(g,C){return g&&g.length?qi(g,Xn(C,3),!0):[]}function _g(g,C,R,J){var me=g==null?0:g.length;return me?(R&&typeof R!="number"&&fa(g,C,R)&&(R=0,J=me),Lc(g,C,R,J)):[]}function Pv(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=R==null?0:hr(R);return me<0&&(me=Pi(J+me,0)),xh(g,Xn(C,3),me)}function kv(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=J-1;return R!==n&&(me=hr(R),me=R<0?Pi(J+me,0):ji(me,J-1)),xh(g,Xn(C,3),me,!0)}function Lv(g){var C=g==null?0:g.length;return C?fr(g,1):[]}function Gp(g){var C=g==null?0:g.length;return C?fr(g,Ne):[]}function Lw(g,C){var R=g==null?0:g.length;return R?(C=C===n?1:hr(C),fr(g,C)):[]}function Dv(g){for(var C=-1,R=g==null?0:g.length,J={};++C<R;){var me=g[C];J[me[0]]=me[1]}return J}function rf(g){return g&&g.length?g[0]:n}function Rv(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=R==null?0:hr(R);return me<0&&(me=Pi(J+me,0)),Bo(g,C,me)}function Dw(g){var C=g==null?0:g.length;return C?Hn(g,0,-1):[]}var Rw=vt(function(g){var C=qr(g,ho);return C.length&&C[0]===g[0]?Oh(C):[]}),m1=vt(function(g){var C=Ko(g),R=qr(g,ho);return C===Ko(R)?C=n:R.pop(),R.length&&R[0]===g[0]?Oh(R,Xn(C,2)):[]}),g1=vt(function(g){var C=Ko(g),R=qr(g,ho);return C=typeof C=="function"?C:n,C&&R.pop(),R.length&&R[0]===g[0]?Oh(R,n,C):[]});function Ow(g,C){return g==null?"":Nd.call(g,C)}function Ko(g){var C=g==null?0:g.length;return C?g[C-1]:n}function Zp(g,C,R){var J=g==null?0:g.length;if(!J)return-1;var me=J;return R!==n&&(me=hr(R),me=me<0?Pi(J+me,0):ji(me,J-1)),C===C?mp(g,C,me):xh(g,Zl,me,!0)}function y1(g,C){return g&&g.length?ke(g,hr(C)):n}var zw=vt(v1);function v1(g,C){return g&&g.length&&C&&C.length?Je(g,C):g}function Fw(g,C,R){return g&&g.length&&C&&C.length?Je(g,C,Xn(R,2)):g}function Bw(g,C,R){return g&&g.length&&C&&C.length?Je(g,C,n,R):g}var Nw=rs(function(g,C){var R=g==null?0:g.length,J=Rh(g,C);return at(g,qr(C,function(me){return Wu(me,R)?+me:me}).sort(ui)),J});function Vw(g,C){var R=[];if(!(g&&g.length))return R;var J=-1,me=[],Te=g.length;for(C=Xn(C,3);++J<Te;){var Ye=g[J];C(Ye,J,g)&&(R.push(Ye),me.push(J))}return at(g,me),R}function bg(g){return g==null?g:ki.call(g)}function Ov(g,C,R){var J=g==null?0:g.length;return J?(R&&typeof R!="number"&&fa(g,C,R)?(C=0,R=J):(C=C==null?0:hr(C),R=R===n?J:hr(R)),Hn(g,C,R)):[]}function _1(g,C){return Jr(g,C)}function b1(g,C,R){return Lr(g,C,Xn(R,2))}function x1(g,C){var R=g==null?0:g.length;if(R){var J=Jr(g,C);if(J<R&&pa(g[J],C))return J}return-1}function jw(g,C){return Jr(g,C,!0)}function xg(g,C,R){return Lr(g,C,Xn(R,2),!0)}function Uw(g,C){var R=g==null?0:g.length;if(R){var J=Jr(g,C,!0)-1;if(pa(g[J],C))return J}return-1}function A1(g){return g&&g.length?oi(g):[]}function $w(g,C){return g&&g.length?oi(g,Xn(C,2)):[]}function Hw(g){var C=g==null?0:g.length;return C?Hn(g,1,C):[]}function Gw(g,C,R){return g&&g.length?(C=R||C===n?1:hr(C),Hn(g,0,C<0?0:C)):[]}function w1(g,C,R){var J=g==null?0:g.length;return J?(C=R||C===n?1:hr(C),C=J-C,Hn(g,C<0?0:C,J)):[]}function Zw(g,C){return g&&g.length?qi(g,Xn(C,3),!1,!0):[]}function Ww(g,C){return g&&g.length?qi(g,Xn(C,3)):[]}var Wp=vt(function(g){return pr(fr(g,1,ss,!0))}),C1=vt(function(g){var C=Ko(g);return ss(C)&&(C=n),pr(fr(g,1,ss,!0),Xn(C,2))}),zv=vt(function(g){var C=Ko(g);return C=typeof C=="function"?C:n,pr(fr(g,1,ss,!0),n,C)});function I1(g){return g&&g.length?pr(g):[]}function is(g,C){return g&&g.length?pr(g,Xn(C,2)):[]}function Fv(g,C){return C=typeof C=="function"?C:n,g&&g.length?pr(g,n,C):[]}function Bv(g){if(!(g&&g.length))return[];var C=0;return g=so(g,function(R){if(ss(R))return C=Pi(R.length,C),!0}),wh(C,function(R){return qr(g,Sd(R))})}function Nv(g,C){if(!(g&&g.length))return[];var R=Bv(g);return C==null?R:qr(R,function(J){return fs(C,n,J)})}var Vv=vt(function(g,C){return ss(g)?ju(g,C):[]}),jv=vt(function(g){return Ua(so(g,ss))}),qw=vt(function(g){var C=Ko(g);return ss(C)&&(C=n),Ua(so(g,ss),Xn(C,2))}),Kw=vt(function(g){var C=Ko(g);return C=typeof C=="function"?C:n,Ua(so(g,ss),n,C)}),Yw=vt(Bv);function Xw(g,C){return pl(g||[],C||[],Zr)}function M1(g,C){return pl(g||[],C||[],ln)}var Ca=vt(function(g){var C=g.length,R=C>1?g[C-1]:n;return R=typeof R=="function"?(g.pop(),R):n,Nv(g,R)});function Ag(g){var C=Ce(g);return C.__chain__=!0,C}function S1(g,C){return C(g),g}function vl(g,C){return C(g)}var wg=rs(function(g){var C=g.length,R=C?g[0]:0,J=this.__wrapped__,me=function(Te){return Rh(Te,g)};return C>1||this.__actions__.length||!(J instanceof ur)||!Wu(R)?this.thru(me):(J=J.slice(R,+R+(C?1:0)),J.__actions__.push({func:vl,args:[me],thisArg:n}),new xa(J,this.__chain__).thru(function(Te){return C&&!Te.length&&Te.push(n),Te}))});function qp(){return Ag(this)}function sf(){return new xa(this.value(),this.__chain__)}function Cg(){this.__values__===n&&(this.__values__=uf(this.value()));var g=this.__index__>=this.__values__.length,C=g?n:this.__values__[this.__index__++];return{done:g,value:C}}function Ig(){return this}function Qw(g){for(var C,R=this;R instanceof Th;){var J=c1(R);J.__index__=0,J.__values__=n,C?me.__wrapped__=J:C=J;var me=J;R=R.__wrapped__}return me.__wrapped__=g,C}function Jw(){var g=this.__wrapped__;if(g instanceof ur){var C=g;return this.__actions__.length&&(C=new ur(this)),C=C.reverse(),C.__actions__.push({func:vl,args:[bg],thisArg:n}),new xa(C,this.__chain__)}return this.thru(bg)}function E1(){return Ss(this.__wrapped__,this.__actions__)}var T1=mo(function(g,C,R){Pr.call(g,R)?++g[R]:Zo(g,R,1)});function e2(g,C,R){var J=lr(g)?bh:ug;return R&&fa(g,C,R)&&(C=n),J(g,Xn(C,3))}function P1(g,C){var R=lr(g)?so:Dc;return R(g,Xn(C,3))}var k1=t1(Pv),Uv=t1(kv);function $v(g,C){return fr(Kp(g,C),1)}function t2(g,C){return fr(Kp(g,C),Ne)}function L1(g,C,R){return R=R===n?1:hr(R),fr(Kp(g,C),R)}function D1(g,C){var R=lr(g)?sa:Wo;return R(g,Xn(C,3))}function R1(g,C){var R=lr(g)?nv:Ys;return R(g,Xn(C,3))}var n2=mo(function(g,C,R){Pr.call(g,R)?g[R].push(C):Zo(g,R,[C])});function r2(g,C,R,J){g=Ia(g)?g:Bs(g),R=R&&!J?hr(R):0;var me=g.length;return R<0&&(R=Pi(me+R,0)),Lg(g)?R<=me&&g.indexOf(C,R)>-1:!!me&&Bo(g,C,R)>-1}var i2=vt(function(g,C,R){var J=-1,me=typeof C=="function",Te=Ia(g)?Rt(g.length):[];return Wo(g,function(Ye){Te[++J]=me?fs(C,Ye,R):co(Ye,C,R)}),Te}),O1=mo(function(g,C,R){Zo(g,R,C)});function Kp(g,C){var R=lr(g)?qr:re;return R(g,Xn(C,3))}function Yp(g,C,R,J){return g==null?[]:(lr(C)||(C=C==null?[]:[C]),R=J?n:R,lr(R)||(R=R==null?[]:[R]),Re(g,C,R))}var ru=mo(function(g,C,R){g[R?0:1].push(C)},function(){return[[],[]]});function $c(g,C,R){var J=lr(g)?Lu:cp,me=arguments.length<3;return J(g,Xn(C,4),R,me,Wo)}function z1(g,C,R){var J=lr(g)?op:cp,me=arguments.length<3;return J(g,Xn(C,4),R,me,Ys)}function Hv(g,C){var R=lr(g)?so:Dc;return R(g,Eg(Xn(C,3)))}function s2(g){var C=lr(g)?$d:jt;return C(g)}function a2(g,C,R){(R?fa(g,C,R):C===n)?C=1:C=hr(C);var J=lr(g)?lg:zt;return J(g,C)}function Mg(g){var C=lr(g)?cv:kn;return C(g)}function Gv(g){if(g==null)return 0;if(Ia(g))return Lg(g)?sr(g):g.length;var C=ms(g);return C==$||C==it?g.size:B(g).length}function o2(g,C,R){var J=lr(g)?Na:Zn;return R&&fa(g,C,R)&&(C=n),J(g,Xn(C,3))}var Zv=vt(function(g,C){if(g==null)return[];var R=C.length;return R>1&&fa(g,C[0],C[1])?C=[]:R>2&&fa(C[0],C[1],C[2])&&(C=[C[0]]),Re(g,fr(C,1),[])}),af=Fd||function(){return Vi.Date.now()};function of(g,C){if(typeof C!="function")throw new ps(l);return g=hr(g),function(){if(--g<1)return C.apply(this,arguments)}}function Wv(g,C,R){return C=R?n:C,C=g&&C==null?g.length:C,nu(g,X,n,n,n,n,C)}function qv(g,C){var R;if(typeof C!="function")throw new ps(l);return g=hr(g),function(){return--g>0&&(R=C.apply(this,arguments)),g<=1&&(C=n),R}}var Xp=vt(function(g,C,R){var J=F;if(R.length){var me=oo(R,Qd(Xp));J|=W}return nu(g,J,C,R,me)}),Kv=vt(function(g,C,R){var J=F|V;if(R.length){var me=oo(R,Qd(Kv));J|=W}return nu(C,J,g,R,me)});function Qp(g,C,R){C=R?n:C;var J=nu(g,N,n,n,n,n,n,C);return J.placeholder=Qp.placeholder,J}function Yv(g,C,R){C=R?n:C;var J=nu(g,U,n,n,n,n,n,C);return J.placeholder=Yv.placeholder,J}function F1(g,C,R){var J,me,Te,Ye,ct,bt,Jt=0,en=!1,sn=!1,Mn=!0;if(typeof g!="function")throw new ps(l);C=Sa(C)||0,Li(R)&&(en=!!R.leading,sn="maxWait"in R,Te=sn?Pi(Sa(R.maxWait)||0,C):Te,Mn="trailing"in R?!!R.trailing:Mn);function $n(ks){var Qu=J,Zh=me;return J=me=n,Jt=ks,Ye=g.apply(Zh,Qu),Ye}function tr(ks){return Jt=ks,ct=nf(Dr,C),en?$n(ks):Ye}function Cr(ks){var Qu=ks-bt,Zh=ks-Jt,YS=C-Qu;return sn?ji(YS,Te-Zh):YS}function nr(ks){var Qu=ks-bt,Zh=ks-Jt;return bt===n||Qu>=C||Qu<0||sn&&Zh>=Te}function Dr(){var ks=af();if(nr(ks))return Ur(ks);ct=nf(Dr,Cr(ks))}function Ur(ks){return ct=n,Mn&&J?$n(ks):(J=me=n,Ye)}function wl(){ct!==n&&da(ct),Jt=0,J=bt=me=ct=n}function bo(){return ct===n?Ye:Ur(af())}function Cl(){var ks=af(),Qu=nr(ks);if(J=arguments,me=this,bt=ks,Qu){if(ct===n)return tr(bt);if(sn)return da(ct),ct=nf(Dr,C),$n(bt)}return ct===n&&(ct=nf(Dr,C)),Ye}return Cl.cancel=wl,Cl.flush=bo,Cl}var l2=vt(function(g,C){return kc(g,1,C)}),B1=vt(function(g,C,R){return kc(g,Sa(C)||0,R)});function u2(g){return nu(g,G)}function Sg(g,C){if(typeof g!="function"||C!=null&&typeof C!="function")throw new ps(l);var R=function(){var J=arguments,me=C?C.apply(this,J):J[0],Te=R.cache;if(Te.has(me))return Te.get(me);var Ye=g.apply(this,J);return R.cache=Te.set(me,Ye)||Te,Ye};return R.cache=new(Sg.Cache||Ho),R}Sg.Cache=Ho;function Eg(g){if(typeof g!="function")throw new ps(l);return function(){var C=arguments;switch(C.length){case 0:return!g.call(this);case 1:return!g.call(this,C[0]);case 2:return!g.call(this,C[0],C[1]);case 3:return!g.call(this,C[0],C[1],C[2])}return!g.apply(this,C)}}function c2(g){return qv(2,g)}var h2=Gu(function(g,C){C=C.length==1&&lr(C[0])?qr(C[0],ns(Xn())):qr(fr(C,1),ns(Xn()));var R=C.length;return vt(function(J){for(var me=-1,Te=ji(J.length,R);++me<Te;)J[me]=C[me].call(this,J[me]);return fs(g,this,J)})}),Jp=vt(function(g,C){var R=oo(C,Qd(Jp));return nu(g,W,n,C,R)}),Ku=vt(function(g,C){var R=oo(C,Qd(Ku));return nu(g,ne,n,C,R)}),N1=rs(function(g,C){return nu(g,q,n,n,n,C)});function V1(g,C){if(typeof g!="function")throw new ps(l);return C=C===n?C:hr(C),vt(g,C)}function j1(g,C){if(typeof g!="function")throw new ps(l);return C=C==null?0:Pi(hr(C),0),vt(function(R){var J=R[C],me=ha(R,0,C);return J&&ao(me,J),fs(g,this,me)})}function U1(g,C,R){var J=!0,me=!0;if(typeof g!="function")throw new ps(l);return Li(R)&&(J="leading"in R?!!R.leading:J,me="trailing"in R?!!R.trailing:me),F1(g,C,{leading:J,maxWait:C,trailing:me})}function $1(g){return Wv(g,1)}function Xv(g,C){return Jp(fo(C),g)}function H1(){if(!arguments.length)return[];var g=arguments[0];return lr(g)?g:[g]}function em(g){return Ks(g,A)}function G1(g,C){return C=typeof C=="function"?C:n,Ks(g,A,C)}function Qv(g){return Ks(g,x|A)}function Z1(g,C){return C=typeof C=="function"?C:n,Ks(g,x|A,C)}function go(g,C){return C==null||Fn(g,C,ae(C))}function pa(g,C){return g===C||g!==g&&C!==C}var W1=Bp(Uu),q1=Bp(function(g,C){return g>=C}),Hc=qd(function(){return arguments}())?qd:function(g){return wi(g)&&Pr.call(g,"callee")&&!Od.call(g,"callee")},lr=Rt.isArray,K1=Ws?ns(Ws):Kd;function Ia(g){return g!=null&&Vh(g.length)&&!yo(g)}function ss(g){return wi(g)&&Ia(g)}function Y1(g){return g===!0||g===!1||wi(g)&&Gi(g)==ft}var Ma=_p||S2,X1=Pu?ns(Pu):Yd;function Q1(g){return wi(g)&&g.nodeType===1&&!jh(g)}function J1(g){if(g==null)return!0;if(Ia(g)&&(lr(g)||typeof g=="string"||typeof g.splice=="function"||Ma(g)||Uh(g)||Hc(g)))return!g.length;var C=ms(g);if(C==$||C==it)return!g.size;if(Vc(g))return!B(g).length;for(var R in g)if(Pr.call(g,R))return!1;return!0}function eb(g,C){return Hu(g,C)}function d2(g,C,R){R=typeof R=="function"?R:n;var J=R?R(g,C):n;return J===n?Hu(g,C,n,R):!!J}function Jv(g){if(!wi(g))return!1;var C=Gi(g);return C==Lt||C==Pt||typeof g.message=="string"&&typeof g.name=="string"&&!jh(g)}function tb(g){return typeof g=="number"&&Tc(g)}function yo(g){if(!Li(g))return!1;var C=Gi(g);return C==on||C==Ie||C==gt||C==Fe}function e0(g){return typeof g=="number"&&g==hr(g)}function Vh(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=et}function Li(g){var C=typeof g;return g!=null&&(C=="object"||C=="function")}function wi(g){return g!=null&&typeof g=="object"}var tm=Xr?ns(Xr):r;function Tg(g,C){return g===C||c(g,C,Av(C))}function f2(g,C,R){return R=typeof R=="function"?R:n,c(g,C,Av(C),R)}function p2(g){return Yu(g)&&g!=+g}function m2(g){if(s1(g))throw new qn(u);return m(g)}function lf(g){return g===null}function zs(g){return g==null}function Yu(g){return typeof g=="number"||wi(g)&&Gi(g)==Pe}function jh(g){if(!wi(g)||Gi(g)!=ye)return!1;var C=Mc(g);if(C===null)return!0;var R=Pr.call(C,"constructor")&&C.constructor;return typeof R=="function"&&R instanceof R&&Ch.call(R)==Tr}var Pg=_c?ns(_c):v;function nb(g){return e0(g)&&g>=-9007199254740991&&g<=et}var kg=_h?ns(_h):I;function Lg(g){return typeof g=="string"||!lr(g)&&wi(g)&&Gi(g)==Be}function Ha(g){return typeof g=="symbol"||wi(g)&&Gi(g)==Mt}var Uh=Id?ns(Id):T;function g2(g){return g===n}function rb(g){return wi(g)&&ms(g)==At}function t0(g){return wi(g)&&Gi(g)==Ht}var n0=Bp(Q),ib=Bp(function(g,C){return g<=C});function uf(g){if(!g)return[];if(Ia(g))return Lg(g)?ba(g):Xs(g);if(Fu&&g[Fu])return qm(g[Fu]());var C=ms(g),R=C==$?Ac:C==it?wc:Bs;return R(g)}function _l(g){if(!g)return g===0?g:0;if(g=Sa(g),g===Ne||g===-1/0){var C=g<0?-1:1;return C*ot}return g===g?g:0}function hr(g){var C=_l(g),R=C%1;return C===C?R?C-R:C:0}function Dg(g){return g?Os(hr(g),0,qe):0}function Sa(g){if(typeof g=="number")return g;if(Ha(g))return Zt;if(Li(g)){var C=typeof g.valueOf=="function"?g.valueOf():g;g=Li(C)?C+"":C}if(typeof g!="string")return g===0?g:+g;g=fp(g);var R=dh.test(g);return R||yd.test(g)?wd(g.slice(2),R?2:8):Yn.test(g)?Zt:+g}function cf(g){return $a(g,we(g))}function r0(g){return g?Os(hr(g),-9007199254740991,et):g===0?g:0}function Wr(g){return g==null?"":or(g)}var i0=eu(function(g,C){if(Vc(C)||Ia(C)){$a(C,ae(C),g);return}for(var R in C)Pr.call(C,R)&&Zr(g,R,C[R])}),sb=eu(function(g,C){$a(C,we(C),g)}),h=eu(function(g,C,R,J){$a(C,we(C),g,J)}),a=eu(function(g,C,R,J){$a(C,ae(C),g,J)}),d=rs(Rh);function p(g,C){var R=Nu(g);return C==null?R:Gd(R,C)}var _=vt(function(g,C){g=Qr(g);var R=-1,J=C.length,me=J>2?C[2]:n;for(me&&fa(C[0],C[1],me)&&(J=1);++R<J;)for(var Te=C[R],Ye=we(Te),ct=-1,bt=Ye.length;++ct<bt;){var Jt=Ye[ct],en=g[Jt];(en===n||pa(en,Vo[Jt])&&!Pr.call(g,Jt))&&(g[Jt]=Te[Jt])}return g}),S=vt(function(g){return g.push(n,n1),fs(Et,n,g)});function E(g,C){return bc(g,Xn(C,3),ca)}function P(g,C){return bc(g,Xn(C,3),Rc)}function z(g,C){return g==null?g:bi(g,Xn(C,3),we)}function j(g,C){return g==null?g:Zd(g,Xn(C,3),we)}function Z(g,C){return g&&ca(g,Xn(C,3))}function te(g,C){return g&&Rc(g,Xn(C,3))}function oe(g){return g==null?[]:ja(g,ae(g))}function le(g){return g==null?[]:ja(g,we(g))}function he(g,C,R){var J=g==null?n:qo(g,C);return J===n?R:J}function be(g,C){return g!=null&&r1(g,C,Lp)}function Me(g,C){return g!=null&&r1(g,C,zc)}var ze=dv(function(g,C,R){C!=null&&typeof C.toString!="function"&&(C=Ic.call(C)),g[C]=R},o0(Js)),rt=dv(function(g,C,R){C!=null&&typeof C.toString!="function"&&(C=Ic.call(C)),Pr.call(g,C)?g[C].push(R):g[C]=[R]},Xn),$e=vt(co);function ae(g){return Ia(g)?kp(g):B(g)}function we(g){return Ia(g)?kp(g,!0):H(g)}function Ge(g,C){var R={};return C=Xn(C,3),ca(g,function(J,me,Te){Zo(R,C(J,me,Te),J)}),R}function It(g,C){var R={};return C=Xn(C,3),ca(g,function(J,me,Te){Zo(R,me,C(J,me,Te))}),R}var Yt=eu(function(g,C,R){_e(g,C,R)}),Et=eu(function(g,C,R,J){_e(g,C,R,J)}),Ot=rs(function(g,C){var R={};if(g==null)return R;var J=!1;C=qr(C,function(Te){return Te=Es(Te,g),J||(J=Te.length>1),Te}),$a(g,Vp(g),R),J&&(R=Ks(R,x|M|A,vv));for(var me=C.length;me--;)Zi(R,C[me]);return R});function tn(g,C){return rn(g,Eg(Xn(C)))}var Xt=rs(function(g,C){return g==null?{}:je(g,C)});function rn(g,C){if(g==null)return{};var R=qr(Vp(g),function(J){return[J]});return C=Xn(C),We(g,R,function(J,me){return C(J,me[0])})}function Vt(g,C,R){C=Es(C,g);var J=-1,me=C.length;for(me||(me=1,g=n);++J<me;){var Te=g==null?n:g[yl(C[J])];Te===n&&(J=me,Te=R),g=yo(Te)?Te.call(g):Te}return g}function xn(g,C,R){return g==null?g:ln(g,C,R)}function Bn(g,C,R,J){return J=typeof J=="function"?J:n,g==null?g:ln(g,C,R,J)}var On=gv(ae),En=gv(we);function mr(g,C,R){var J=lr(g),me=J||Ma(g)||Uh(g);if(C=Xn(C,4),R==null){var Te=g&&g.constructor;me?R=J?new Te:[]:Li(g)?R=yo(Te)?Nu(Mc(g)):{}:R={}}return(me?sa:ca)(g,function(Ye,ct,bt){return C(R,Ye,ct,bt)}),R}function Ci(g,C){return g==null?!0:Zi(g,C)}function as(g,C,R){return g==null?g:Wi(g,C,fo(R))}function Fs(g,C,R,J){return J=typeof J=="function"?J:n,g==null?g:Wi(g,C,fo(R),J)}function Bs(g){return g==null?[]:Ed(g,ae(g))}function Ea(g){return g==null?[]:Ed(g,we(g))}function Ts(g,C,R){return R===n&&(R=C,C=n),R!==n&&(R=Sa(R),R=R===R?R:0),C!==n&&(C=Sa(C),C=C===C?C:0),Os(Sa(g),C,R)}function yi(g,C,R){return C=_l(C),R===n?(R=C,C=0):R=_l(R),g=Sa(g),$u(g,C,R)}function gs(g,C,R){if(R&&typeof R!="boolean"&&fa(g,C,R)&&(C=R=n),R===n&&(typeof C=="boolean"?(R=C,C=n):typeof g=="boolean"&&(R=g,g=n)),g===n&&C===n?(g=0,C=1):(g=_l(g),C===n?(C=g,g=0):C=_l(C)),g>C){var J=g;g=C,C=J}if(R||g%1||C%1){var me=xp();return ji(g+me*(C-g+Ad("1e-"+((me+"").length-1))),C)}return nt(g,C)}var Ps=zh(function(g,C,R){return C=C.toLowerCase(),g+(R?ys(C):C)});function ys(g){return Rg(Wr(g).toLowerCase())}function Qs(g){return g=Wr(g),g&&g.replace(vd,Hm).replace(Hl,"")}function vo(g,C,R){g=Wr(g),C=or(C);var J=g.length;R=R===n?J:Os(hr(R),0,J);var me=R;return R-=C.length,R>=0&&g.slice(R,me)==C}function vs(g){return g=Wr(g),g&&St.test(g)?g.replace(ht,Gm):g}function Ta(g){return g=Wr(g),g&&Ft.test(g)?g.replace(Qn,"\\$&"):g}var os=zh(function(g,C,R){return g+(R?"-":"")+C.toLowerCase()}),_s=zh(function(g,C,R){return g+(R?" ":"")+C.toLowerCase()}),bs=Xd("toLowerCase");function Ki(g,C,R){g=Wr(g),C=hr(C);var J=C?sr(g):0;if(!C||J>=C)return g;var me=(C-J)/2;return Bc(Ec(me),R)+g+Bc(Mh(me),R)}function ci(g,C,R){g=Wr(g),C=hr(C);var J=C?sr(g):0;return C&&J<C?g+Bc(C-J,R):g}function bl(g,C,R){g=Wr(g),C=hr(C);var J=C?sr(g):0;return C&&J<C?Bc(C-J,R)+g:g}function hf(g,C,R){return R||C==null?C=0:C&&(C=+C),Vd(Wr(g).replace(jn,""),C||0)}function xl(g,C,R){return(R?fa(g,C,R):C===n)?C=1:C=hr(C),Ct(Wr(g),C)}function y2(){var g=arguments,C=Wr(g[0]);return g.length<3?C:C.replace(g[1],g[2])}var df=zh(function(g,C,R){return g+(R?"_":"")+C.toLowerCase()});function $h(g,C,R){return R&&typeof R!="number"&&fa(g,C,R)&&(C=R=n),R=R===n?qe:R>>>0,R?(g=Wr(g),g&&(typeof C=="string"||C!=null&&!Pg(C))&&(C=or(C),!C&&ql(g))?ha(ba(g),0,R):g.split(C,R)):[]}var ff=zh(function(g,C,R){return g+(R?" ":"")+Rg(C)});function pf(g,C,R){return g=Wr(g),R=R==null?0:Os(hr(R),0,g.length),C=or(C),g.slice(R,R+C.length)==C}function mf(g,C,R){var J=Ce.templateSettings;R&&fa(g,C,R)&&(C=n),g=Wr(g),C=h({},C,J,yv);var me=h({},C.imports,J.imports,yv),Te=ae(me),Ye=Ed(me,Te),ct,bt,Jt=0,en=C.interpolate||Bi,sn="__p += '",Mn=kd((C.escape||Bi).source+"|"+en.source+"|"+(en===qt?Ds:Bi).source+"|"+(C.evaluate||Bi).source+"|$","g"),$n="//# sourceURL="+(Pr.call(C,"sourceURL")?(C.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Er+"]")+`
`;g.replace(Mn,function(nr,Dr,Ur,wl,bo,Cl){return Ur||(Ur=wl),sn+=g.slice(Jt,Cl).replace(ai,Zm),Dr&&(ct=!0,sn+=`' +
__e(`+Dr+`) +
'`),bo&&(bt=!0,sn+=`';
`+bo+`;
__p += '`),Ur&&(sn+=`' +
((__t = (`+Ur+`)) == null ? '' : __t) +
'`),Jt=Cl+nr.length,nr}),sn+=`';
`;var tr=Pr.call(C,"variable")&&C.variable;if(!tr)sn=`with (obj) {
`+sn+`
}
`;else if(zn.test(tr))throw new qn(s);sn=(bt?sn.replace(xe,""):sn).replace(Ee,"$1").replace(ve,"$1;"),sn="function("+(tr||"obj")+`) {
`+(tr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ct?", __e = _.escape":"")+(bt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+sn+`return __p
}`;var Cr=db(function(){return wr(Te,$n+"return "+sn).apply(n,Ye)});if(Cr.source=sn,Jv(Cr))throw Cr;return Cr}function ab(g){return Wr(g).toLowerCase()}function ob(g){return Wr(g).toUpperCase()}function lb(g,C,R){if(g=Wr(g),g&&(R||C===n))return fp(g);if(!g||!(C=or(C)))return g;var J=ba(g),me=ba(C),Te=xc(J,me),Ye=$m(J,me)+1;return ha(J,Te,Ye).join("")}function ub(g,C,R){if(g=Wr(g),g&&(R||C===n))return g.slice(0,Ym(g)+1);if(!g||!(C=or(C)))return g;var J=ba(g),me=$m(J,ba(C))+1;return ha(J,0,me).join("")}function s0(g,C,R){if(g=Wr(g),g&&(R||C===n))return g.replace(jn,"");if(!g||!(C=or(C)))return g;var J=ba(g),me=xc(J,ba(C));return ha(J,me).join("")}function a0(g,C){var R=ee,J=ue;if(Li(C)){var me="separator"in C?C.separator:me;R="length"in C?hr(C.length):R,J="omission"in C?or(C.omission):J}g=Wr(g);var Te=g.length;if(ql(g)){var Ye=ba(g);Te=Ye.length}if(R>=Te)return g;var ct=R-sr(J);if(ct<1)return J;var bt=Ye?ha(Ye,0,ct).join(""):g.slice(0,ct);if(me===n)return bt+J;if(Ye&&(ct+=bt.length-ct),Pg(me)){if(g.slice(ct).search(me)){var Jt,en=bt;for(me.global||(me=kd(me.source,Wr(si.exec(me))+"g")),me.lastIndex=0;Jt=me.exec(en);)var sn=Jt.index;bt=bt.slice(0,sn===n?ct:sn)}}else if(g.indexOf(or(me),ct)!=ct){var Mn=bt.lastIndexOf(me);Mn>-1&&(bt=bt.slice(0,Mn))}return bt+J}function Xu(g){return g=Wr(g),g&&Ze.test(g)?g.replace(Qe,sv):g}var cb=zh(function(g,C,R){return g+(R?" ":"")+C.toUpperCase()}),Rg=Xd("toUpperCase");function hb(g,C,R){return g=Wr(g),C=R?n:C,C===n?Pd(g)?Xm(g):Gl(g):g.match(C)||[]}var db=vt(function(g,C){try{return fs(g,n,C)}catch(R){return Jv(R)?R:new qn(R)}}),v2=rs(function(g,C){return sa(C,function(R){R=yl(R),Zo(g,R,Xp(g[R],g))}),g});function _2(g){var C=g==null?0:g.length,R=Xn();return g=C?qr(g,function(J){if(typeof J[1]!="function")throw new ps(l);return[R(J[0]),J[1]]}):[],vt(function(J){for(var me=-1;++me<C;){var Te=g[me];if(fs(Te[0],this,J))return fs(Te[1],this,J)}})}function b2(g){return Rn(Ks(g,x))}function o0(g){return function(){return g}}function x2(g,C){return g==null||g!==g?C:g}var A2=fg(),Al=fg(!0);function Js(g){return g}function Og(g){return D(typeof g=="function"?g:Ks(g,x))}function w2(g){return ie(Ks(g,x))}function C2(g,C){return fe(g,Ks(C,x))}var I2=vt(function(g,C){return function(R){return co(R,g,C)}}),ea=vt(function(g,C){return function(R){return co(g,R,C)}});function Pa(g,C,R){var J=ae(C),me=ja(C,J);R==null&&!(Li(C)&&(me.length||!J.length))&&(R=C,C=g,g=this,me=ja(C,ae(C)));var Te=!(Li(R)&&"chain"in R)||!!R.chain,Ye=yo(g);return sa(me,function(ct){var bt=C[ct];g[ct]=bt,Ye&&(g.prototype[ct]=function(){var Jt=this.__chain__;if(Te||Jt){var en=g(this.__wrapped__),sn=en.__actions__=Xs(this.__actions__);return sn.push({func:bt,args:arguments,thisArg:g}),en.__chain__=Jt,en}return bt.apply(g,ao([this.value()],arguments))})}),g}function Hh(){return Vi._===this&&(Vi._=Dd),this}function _o(){}function Gh(g){return g=hr(g),vt(function(C){return ke(C,g)})}var iu=fv(qr),CD=fv(bh),ID=fv(Na);function KS(g){return Fh(g)?Sd(yl(g)):Ke(g)}function MD(g){return function(C){return g==null?n:qo(g,C)}}var SD=Fp(),ED=Fp(!0);function M2(){return[]}function S2(){return!1}function TD(){return{}}function PD(){return""}function kD(){return!0}function LD(g,C){if(g=hr(g),g<1||g>et)return[];var R=qe,J=ji(g,qe);C=Xn(C),g-=qe;for(var me=wh(J,C);++R<g;)C(R);return me}function DD(g){return lr(g)?qr(g,yl):Ha(g)?[g]:Xs(vg(Wr(g)))}function RD(g){var C=++Cc;return Wr(g)+C}var OD=tu(function(g,C){return g+C},0),zD=mv("ceil"),FD=tu(function(g,C){return g/C},1),BD=mv("floor");function ND(g){return g&&g.length?Aa(g,Js,Uu):n}function VD(g,C){return g&&g.length?Aa(g,Xn(C,2),Uu):n}function jD(g){return Um(g,Js)}function UD(g,C){return Um(g,Xn(C,2))}function $D(g){return g&&g.length?Aa(g,Js,Q):n}function HD(g,C){return g&&g.length?Aa(g,Xn(C,2),Q):n}var GD=tu(function(g,C){return g*C},1),ZD=mv("round"),WD=tu(function(g,C){return g-C},0);function qD(g){return g&&g.length?Ah(g,Js):0}function KD(g,C){return g&&g.length?Ah(g,Xn(C,2)):0}return Ce.after=of,Ce.ary=Wv,Ce.assign=i0,Ce.assignIn=sb,Ce.assignInWith=h,Ce.assignWith=a,Ce.at=d,Ce.before=qv,Ce.bind=Xp,Ce.bindAll=v2,Ce.bindKey=Kv,Ce.castArray=H1,Ce.chain=Ag,Ce.chunk=Tw,Ce.compact=Pw,Ce.concat=kw,Ce.cond=_2,Ce.conforms=b2,Ce.constant=o0,Ce.countBy=T1,Ce.create=p,Ce.curry=Qp,Ce.curryRight=Yv,Ce.debounce=F1,Ce.defaults=_,Ce.defaultsDeep=S,Ce.defer=l2,Ce.delay=B1,Ce.difference=Sv,Ce.differenceBy=h1,Ce.differenceWith=Ev,Ce.drop=d1,Ce.dropRight=Tv,Ce.dropRightWhile=f1,Ce.dropWhile=p1,Ce.fill=_g,Ce.filter=P1,Ce.flatMap=$v,Ce.flatMapDeep=t2,Ce.flatMapDepth=L1,Ce.flatten=Lv,Ce.flattenDeep=Gp,Ce.flattenDepth=Lw,Ce.flip=u2,Ce.flow=A2,Ce.flowRight=Al,Ce.fromPairs=Dv,Ce.functions=oe,Ce.functionsIn=le,Ce.groupBy=n2,Ce.initial=Dw,Ce.intersection=Rw,Ce.intersectionBy=m1,Ce.intersectionWith=g1,Ce.invert=ze,Ce.invertBy=rt,Ce.invokeMap=i2,Ce.iteratee=Og,Ce.keyBy=O1,Ce.keys=ae,Ce.keysIn=we,Ce.map=Kp,Ce.mapKeys=Ge,Ce.mapValues=It,Ce.matches=w2,Ce.matchesProperty=C2,Ce.memoize=Sg,Ce.merge=Yt,Ce.mergeWith=Et,Ce.method=I2,Ce.methodOf=ea,Ce.mixin=Pa,Ce.negate=Eg,Ce.nthArg=Gh,Ce.omit=Ot,Ce.omitBy=tn,Ce.once=c2,Ce.orderBy=Yp,Ce.over=iu,Ce.overArgs=h2,Ce.overEvery=CD,Ce.overSome=ID,Ce.partial=Jp,Ce.partialRight=Ku,Ce.partition=ru,Ce.pick=Xt,Ce.pickBy=rn,Ce.property=KS,Ce.propertyOf=MD,Ce.pull=zw,Ce.pullAll=v1,Ce.pullAllBy=Fw,Ce.pullAllWith=Bw,Ce.pullAt=Nw,Ce.range=SD,Ce.rangeRight=ED,Ce.rearg=N1,Ce.reject=Hv,Ce.remove=Vw,Ce.rest=V1,Ce.reverse=bg,Ce.sampleSize=a2,Ce.set=xn,Ce.setWith=Bn,Ce.shuffle=Mg,Ce.slice=Ov,Ce.sortBy=Zv,Ce.sortedUniq=A1,Ce.sortedUniqBy=$w,Ce.split=$h,Ce.spread=j1,Ce.tail=Hw,Ce.take=Gw,Ce.takeRight=w1,Ce.takeRightWhile=Zw,Ce.takeWhile=Ww,Ce.tap=S1,Ce.throttle=U1,Ce.thru=vl,Ce.toArray=uf,Ce.toPairs=On,Ce.toPairsIn=En,Ce.toPath=DD,Ce.toPlainObject=cf,Ce.transform=mr,Ce.unary=$1,Ce.union=Wp,Ce.unionBy=C1,Ce.unionWith=zv,Ce.uniq=I1,Ce.uniqBy=is,Ce.uniqWith=Fv,Ce.unset=Ci,Ce.unzip=Bv,Ce.unzipWith=Nv,Ce.update=as,Ce.updateWith=Fs,Ce.values=Bs,Ce.valuesIn=Ea,Ce.without=Vv,Ce.words=hb,Ce.wrap=Xv,Ce.xor=jv,Ce.xorBy=qw,Ce.xorWith=Kw,Ce.zip=Yw,Ce.zipObject=Xw,Ce.zipObjectDeep=M1,Ce.zipWith=Ca,Ce.entries=On,Ce.entriesIn=En,Ce.extend=sb,Ce.extendWith=h,Pa(Ce,Ce),Ce.add=OD,Ce.attempt=db,Ce.camelCase=Ps,Ce.capitalize=ys,Ce.ceil=zD,Ce.clamp=Ts,Ce.clone=em,Ce.cloneDeep=Qv,Ce.cloneDeepWith=Z1,Ce.cloneWith=G1,Ce.conformsTo=go,Ce.deburr=Qs,Ce.defaultTo=x2,Ce.divide=FD,Ce.endsWith=vo,Ce.eq=pa,Ce.escape=vs,Ce.escapeRegExp=Ta,Ce.every=e2,Ce.find=k1,Ce.findIndex=Pv,Ce.findKey=E,Ce.findLast=Uv,Ce.findLastIndex=kv,Ce.findLastKey=P,Ce.floor=BD,Ce.forEach=D1,Ce.forEachRight=R1,Ce.forIn=z,Ce.forInRight=j,Ce.forOwn=Z,Ce.forOwnRight=te,Ce.get=he,Ce.gt=W1,Ce.gte=q1,Ce.has=be,Ce.hasIn=Me,Ce.head=rf,Ce.identity=Js,Ce.includes=r2,Ce.indexOf=Rv,Ce.inRange=yi,Ce.invoke=$e,Ce.isArguments=Hc,Ce.isArray=lr,Ce.isArrayBuffer=K1,Ce.isArrayLike=Ia,Ce.isArrayLikeObject=ss,Ce.isBoolean=Y1,Ce.isBuffer=Ma,Ce.isDate=X1,Ce.isElement=Q1,Ce.isEmpty=J1,Ce.isEqual=eb,Ce.isEqualWith=d2,Ce.isError=Jv,Ce.isFinite=tb,Ce.isFunction=yo,Ce.isInteger=e0,Ce.isLength=Vh,Ce.isMap=tm,Ce.isMatch=Tg,Ce.isMatchWith=f2,Ce.isNaN=p2,Ce.isNative=m2,Ce.isNil=zs,Ce.isNull=lf,Ce.isNumber=Yu,Ce.isObject=Li,Ce.isObjectLike=wi,Ce.isPlainObject=jh,Ce.isRegExp=Pg,Ce.isSafeInteger=nb,Ce.isSet=kg,Ce.isString=Lg,Ce.isSymbol=Ha,Ce.isTypedArray=Uh,Ce.isUndefined=g2,Ce.isWeakMap=rb,Ce.isWeakSet=t0,Ce.join=Ow,Ce.kebabCase=os,Ce.last=Ko,Ce.lastIndexOf=Zp,Ce.lowerCase=_s,Ce.lowerFirst=bs,Ce.lt=n0,Ce.lte=ib,Ce.max=ND,Ce.maxBy=VD,Ce.mean=jD,Ce.meanBy=UD,Ce.min=$D,Ce.minBy=HD,Ce.stubArray=M2,Ce.stubFalse=S2,Ce.stubObject=TD,Ce.stubString=PD,Ce.stubTrue=kD,Ce.multiply=GD,Ce.nth=y1,Ce.noConflict=Hh,Ce.noop=_o,Ce.now=af,Ce.pad=Ki,Ce.padEnd=ci,Ce.padStart=bl,Ce.parseInt=hf,Ce.random=gs,Ce.reduce=$c,Ce.reduceRight=z1,Ce.repeat=xl,Ce.replace=y2,Ce.result=Vt,Ce.round=ZD,Ce.runInContext=mt,Ce.sample=s2,Ce.size=Gv,Ce.snakeCase=df,Ce.some=o2,Ce.sortedIndex=_1,Ce.sortedIndexBy=b1,Ce.sortedIndexOf=x1,Ce.sortedLastIndex=jw,Ce.sortedLastIndexBy=xg,Ce.sortedLastIndexOf=Uw,Ce.startCase=ff,Ce.startsWith=pf,Ce.subtract=WD,Ce.sum=qD,Ce.sumBy=KD,Ce.template=mf,Ce.times=LD,Ce.toFinite=_l,Ce.toInteger=hr,Ce.toLength=Dg,Ce.toLower=ab,Ce.toNumber=Sa,Ce.toSafeInteger=r0,Ce.toString=Wr,Ce.toUpper=ob,Ce.trim=lb,Ce.trimEnd=ub,Ce.trimStart=s0,Ce.truncate=a0,Ce.unescape=Xu,Ce.uniqueId=RD,Ce.upperCase=cb,Ce.upperFirst=Rg,Ce.each=D1,Ce.eachRight=R1,Ce.first=rf,Pa(Ce,function(){var g={};return ca(Ce,function(C,R){Pr.call(Ce.prototype,R)||(g[R]=C)}),g}(),{chain:!1}),Ce.VERSION=i,sa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){Ce[g].placeholder=Ce}),sa(["drop","take"],function(g,C){ur.prototype[g]=function(R){R=R===n?1:Pi(hr(R),0);var J=this.__filtered__&&!C?new ur(this):this.clone();return J.__filtered__?J.__takeCount__=ji(R,J.__takeCount__):J.__views__.push({size:ji(R,qe),type:g+(J.__dir__<0?"Right":"")}),J},ur.prototype[g+"Right"]=function(R){return this.reverse()[g](R).reverse()}}),sa(["filter","map","takeWhile"],function(g,C){var R=C+1,J=R==K||R==Ve;ur.prototype[g]=function(me){var Te=this.clone();return Te.__iteratees__.push({iteratee:Xn(me,3),type:R}),Te.__filtered__=Te.__filtered__||J,Te}}),sa(["head","last"],function(g,C){var R="take"+(C?"Right":"");ur.prototype[g]=function(){return this[R](1).value()[0]}}),sa(["initial","tail"],function(g,C){var R="drop"+(C?"":"Right");ur.prototype[g]=function(){return this.__filtered__?new ur(this):this[R](1)}}),ur.prototype.compact=function(){return this.filter(Js)},ur.prototype.find=function(g){return this.filter(g).head()},ur.prototype.findLast=function(g){return this.reverse().find(g)},ur.prototype.invokeMap=vt(function(g,C){return typeof g=="function"?new ur(this):this.map(function(R){return co(R,g,C)})}),ur.prototype.reject=function(g){return this.filter(Eg(Xn(g)))},ur.prototype.slice=function(g,C){g=hr(g);var R=this;return R.__filtered__&&(g>0||C<0)?new ur(R):(g<0?R=R.takeRight(-g):g&&(R=R.drop(g)),C!==n&&(C=hr(C),R=C<0?R.dropRight(-C):R.take(C-g)),R)},ur.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},ur.prototype.toArray=function(){return this.take(qe)},ca(ur.prototype,function(g,C){var R=/^(?:filter|find|map|reject)|While$/.test(C),J=/^(?:head|last)$/.test(C),me=Ce[J?"take"+(C=="last"?"Right":""):C],Te=J||/^find/.test(C);me&&(Ce.prototype[C]=function(){var Ye=this.__wrapped__,ct=J?[1]:arguments,bt=Ye instanceof ur,Jt=ct[0],en=bt||lr(Ye),sn=function(Dr){var Ur=me.apply(Ce,ao([Dr],ct));return J&&Mn?Ur[0]:Ur};en&&R&&typeof Jt=="function"&&Jt.length!=1&&(bt=en=!1);var Mn=this.__chain__,$n=!!this.__actions__.length,tr=Te&&!Mn,Cr=bt&&!$n;if(!Te&&en){Ye=Cr?Ye:new ur(this);var nr=g.apply(Ye,ct);return nr.__actions__.push({func:vl,args:[sn],thisArg:n}),new xa(nr,Mn)}return tr&&Cr?g.apply(this,ct):(nr=this.thru(sn),tr?J?nr.value()[0]:nr.value():nr)})}),sa(["pop","push","shift","sort","splice","unshift"],function(g){var C=Ru[g],R=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",J=/^(?:pop|shift)$/.test(g);Ce.prototype[g]=function(){var me=arguments;if(J&&!this.__chain__){var Te=this.value();return C.apply(lr(Te)?Te:[],me)}return this[R](function(Ye){return C.apply(lr(Ye)?Ye:[],me)})}}),ca(ur.prototype,function(g,C){var R=Ce[C];if(R){var J=R.name+"";Pr.call(Yl,J)||(Yl[J]=[]),Yl[J].push({name:C,func:R})}}),Yl[zp(n,V).name]=[{name:"wrapper",func:n}],ur.prototype.clone=Xl,ur.prototype.reverse=la,ur.prototype.value=qs,Ce.prototype.at=wg,Ce.prototype.chain=qp,Ce.prototype.commit=sf,Ce.prototype.next=Cg,Ce.prototype.plant=Qw,Ce.prototype.reverse=Jw,Ce.prototype.toJSON=Ce.prototype.valueOf=Ce.prototype.value=E1,Ce.prototype.first=Ce.prototype.head,Fu&&(Ce.prototype[Fu]=Ig),Ce},Du=lv();Fo?((Fo.exports=Du)._=Du,Cd._=Du):Vi._=Du}).call(ra)})(Px,Px.exports);var Dy=Px.exports;const pI=al.createLogger().setNamespace("map:"+wu.LANG,2),sy={setLocale:"map:lang:set-locale",setTranslate:"map:lang:set-translate"},Aj=e=>zl(["map:core",e,wu.LANG],()=>(Kn(pI,e,"store").debug("init"),{locale:{},localeDefault:{}}))(),wj=e=>{const t=Aj(e);function n(l){Kn(pI,e,"store").debug("setMapLang",l),t&&(t.locale=Dy.merge({},t.locale,l));const s=ud(e);s==null||s.emit(sy.setLocale,l)}function i(l){t&&(t.localeDefault=Dy.merge({},t.localeDefault,l))}function o(l){Kn(pI,e,"store").debug("setMapTranslate",l),t&&(t.translate=l);const s=ud(e);s==null||s.emit(sy.setTranslate,l)}function u(){return t}return{getMapLang:u,setMapTranslate:o,setMapLocaleDefault:i,setMapLang:n}},DT=new Map;function Hi(e){if(!e)throw new Error("mapId is required");const{getMapLang:t,setMapLang:n,setMapLocaleDefault:i,setMapTranslate:o}=wj(e),u=Dl(t()),l=ud(e);ti(()=>{l.on(sy.setLocale,s),l.on(sy.setTranslate,s)}),Ol(()=>{l.off(sy.setLocale,s),l.off(sy.setTranslate,s)});function s(){u.value=t()}function f(A,k){var V,O,N;if((V=u.value)!=null&&V.translate)return u.value.translate(A,k);const L=RT((O=u.value)==null?void 0:O.locale,A);if(L!==void 0)return OT(L,k);const F=RT((N=u.value)==null?void 0:N.localeDefault,A);return F!==void 0?OT(F,k):A}const y=dn(()=>f);function b(A){n(A)}function x(A){i(A)}function M(A){o(A)}return{trans:y,setLocale:b,setLocaleDefault:x,setTranslate:M}}function RT(e,t,n){if(!e||!t)return n;const i=Array.isArray(t)?t.join("."):t;let o=DT.get(e);if(o||(o=new Map,DT.set(e,o)),o.has(i))return o.get(i);const u=Array.isArray(t)?t:t.split(".").filter(Boolean);let l=e;for(const s of u)if(l&&typeof l=="object"&&s in l)l=l[s];else return n;return o.set(i,l),l}function OT(e,t){return e?t?e.replace(/\{(\w+)\}/g,(n,i)=>{const o=t[i];return o!==void 0?String(o):n}):e:""}const uoe=al.createLogger().setNamespace("map:"+wu.MAP_COMPARE,2),OA=zl("drag",()=>({container:yu({}),componentCard:void 0,componentCardHeader:void 0,componentCardSidebarToggle:void 0})),Cj=e=>{const t=OA();return{getIsMobile(){return t.container[e].isMobile}}},bL=e=>{const t=OA(),n=t.container[e];function i(){n.show.forEach((l,s)=>{const f=n.actions[l];f&&f.setZIndex(s+2)})}function o(l){const s=t.container[l];if(!s)throw"Not found container for id "+l;return s}function u(l,s){const f=o(e),y=f.show;if(s&&!y.includes(l))y.push(l);else if(!s){const b=y.indexOf(l);b!==-1&&y.splice(b,1)}f.show=y}return{registerItem(l){o(e).items.push(l)},registerAction(l,s){n.actions[l]=s},unRegisterItem(l){n&&(n.items=n.items.filter(s=>s!==l),n.show=n.show.filter(s=>s!==l),delete n.actions[l])},registerItemShow(l,s){u(l,s),i()},setToBack(l){if(!e||!l)return;const s=o(e),f=s.show.findIndex(y=>y==l);f>0&&(s.show.splice(f,1),s.show.unshift(l),i())},setToFront(l){if(!e||!l)return;const s=o(e),f=s.show.findIndex(y=>y==l);f<s.show.length-1&&(s.show.splice(f,1),s.show.push(l),i())},getItems(){return n.items},getItemsShow(){return n.show}}},xL=()=>{const e=OA();return{getComponentCard(){return e.componentCard},getComponentCardHeader(){return e.componentCardHeader},getComponentCardSidebarToggle(){return e.componentCardSidebarToggle}}},AL=e=>{const t=OA();return{getWidth(){return t.container[e].width},getHeight(){return t.container[e].height},initContainer:()=>{t.container[e]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(){delete t.container[e]},setParentProps(i){const o=t.container[e];o.width=i.width,o.height=i.height,o.isMobile=i.isMobile}}},Ij=["id"],Mj=Dn({__name:"draggable-container",props:{containerId:{}},emits:{init:e=>!0,destroy:e=>!0},setup(e,{emit:t}){const n=t,i=Qt(),o=Qt(e.containerId||`draggable-container-${hc()}`),u=Qt(!1),l=AL(o.value);ti(()=>{l.initContainer(),window.addEventListener("resize",s),Rl(()=>{s(),u.value=!0,n("init",o.value)})}),Ol(()=>{l.removeContainer(),window.removeEventListener("resize",s),n("destroy",o.value)}),zf("containerId",o);function s(){var y,b;const f=((y=i.value)==null?void 0:y.clientWidth)||0;l.setParentProps({width:f,height:((b=i.value)==null?void 0:b.clientHeight)||0,isMobile:f<600})}return(f,y)=>(Ae(),st("div",{class:"draggable-container",ref_key:"box",ref:i,id:f.containerId},[o.value&&u.value?In(f.$slots,"default",{key:0,containerId:f.containerId},void 0,!0):an("",!0)],8,Ij))}}),Sj=Cn(Mj,[["__scopeId","data-v-82db7aa2"]]),Ej={props:{height:{},width:{}},name:"MapCard",data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},Tj={class:"card-container"};function Pj(e,t,n,i,o,u){return Ae(),st("div",ar({class:"card",style:u.cardStyle},e.$attrs),[Le("div",Tj,[In(e.$slots,"default")]),t[0]||(t[0]=gA('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1))],16)}const kj=Cn(Ej,[["render",Pj]]),Lj={name:"MapHeader"},Dj={class:"draggable-header"},Rj={class:"draggable-header__content"},Oj={class:"draggable-header__title"};function zj(e,t,n,i,o,u){return Ae(),st(Gn,null,[t[1]||(t[1]=Le("hr",{class:"map-divider"},null,-1)),Le("div",Dj,[Le("div",Rj,[In(e.$slots,"pre-title",{},void 0,!0),Le("div",Oj,[In(e.$slots,"title",{},void 0,!0)]),t[0]||(t[0]=Le("div",{class:"map-spacer"},null,-1)),In(e.$slots,"extra-btn",{},void 0,!0)])]),t[2]||(t[2]=Le("hr",{class:"map-divider"},null,-1))],64)}const Fj=Cn(Lj,[["render",zj],["__scopeId","data-v-9b566e91"]]);function zA(e){const t=xL(),n=dn(()=>t.getComponentCard()||e.componentCard||kj),i=dn(()=>t.getComponentCardHeader()||e.componentCardHeader||Fj);return{componentCard:n,componentCardHeader:i}}const Bj={componentCard:{type:[String,Object]},componentCardHeader:{type:[String,Object]}},Nj={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Vj=["aria-hidden","aria-label"],jj=["fill","width","height"],Uj={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},$j={key:0};function Hj(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",Uj,[n.title?(Ae(),st("title",$j,gn(n.title),1)):an("",!0)])],8,jj))],16,Vj)}const Gj=Cn(Nj,[["render",Hj]]),Zj={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Wj=["aria-hidden","aria-label"],qj=["fill","width","height"],Kj={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},Yj={key:0};function Xj(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",Kj,[n.title?(Ae(),st("title",Yj,gn(n.title),1)):an("",!0)])],8,qj))],16,Wj)}const Qj=Cn(Zj,[["render",Xj]]),Jj={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},eU=["aria-hidden","aria-label"],tU=["fill","width","height"],nU={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},rU={key:0};function iU(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",nU,[n.title?(Ae(),st("title",rU,gn(n.title),1)):an("",!0)])],8,tU))],16,eU)}const zT=Cn(Jj,[["render",iU]]),sU={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},aU=["aria-hidden","aria-label"],oU=["fill","width","height"],lU={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},uU={key:0};function cU(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",lU,[n.title?(Ae(),st("title",uU,gn(n.title),1)):an("",!0)])],8,oU))],16,aU)}const FT=Cn(sU,[["render",cU]]),hU={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},dU=["aria-hidden","aria-label"],fU=["fill","width","height"],pU={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},mU={key:0};function gU(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",pU,[n.title?(Ae(),st("title",mU,gn(n.title),1)):an("",!0)])],8,fU))],16,dU)}const yU=Cn(hU,[["render",gU]]),vU={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},_U=["aria-hidden","aria-label"],bU=["fill","width","height"],xU={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},AU={key:0};function wU(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",xU,[n.title?(Ae(),st("title",AU,gn(n.title),1)):an("",!0)])],8,bU))],16,_U)}const CU=Cn(vU,[["render",wU]]),IU={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},MU=["aria-hidden","aria-label"],SU=["fill","width","height"],EU={d:"M14,7L9,12L14,17V7Z"},TU={key:0};function PU(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-left-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",EU,[n.title?(Ae(),st("title",TU,gn(n.title),1)):an("",!0)])],8,SU))],16,MU)}const BT=Cn(IU,[["render",PU]]),kU={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},LU=["aria-hidden","aria-label"],DU=["fill","width","height"],RU={d:"M10,17L15,12L10,7V17Z"},OU={key:0};function zU(e,t,n,i,o,u){return Ae(),st("span",ar(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-right-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(Ae(),st("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[Le("path",RU,[n.title?(Ae(),st("title",OU,gn(n.title),1)):an("",!0)])],8,DU))],16,LU)}const NT=Cn(kU,[["render",zU]]);function N_(){return{CloseIcon:yU,FullscreenIcon:zT,OffFullscreenIcon:FT,ToBackIcon:Qj,ToFrontIcon:Gj,ExpandedIcon:FT,CloseExpandedIcon:zT,DragIcon:CU,SidebarLeftExpandedIcon:BT,SidebarLeftCloseExpandedIcon:NT,SidebarRightExpandedIcon:NT,SidebarRightCloseExpandedIcon:BT}}function FU(e,t){return t.length<1?!1:t[t.length-1]==e}function BU(e,t){return t.length<1?!1:t[0]==e}function FA(e,t,n){const i=Qt(`draggable-item-${hc()}`),o=Qt(0);function u(s){o.value=s}const l=bL(e);return ti(()=>{l.registerItem(i.value),l.registerAction(i.value,{setZIndex:u}),t.value&&l.registerItemShow(i.value,t.value)}),Ol(()=>{l.unRegisterItem(i.value)}),hs(t,s=>{l.registerItemShow(i.value,s)}),{itemId:i,zIndex:o}}function BA(e,t){const n=bL(e),i=dn(()=>n.getItems()),o=dn(()=>n.getItemsShow()),u=dn(()=>FU(t,o.value)),l=dn(()=>BU(t,o.value)),s=dn(()=>o.value.length>1);function f(){n.setToBack(t)}function y(){n.setToFront(t)}return{items:i,itemShows:o,isLast:u,isFirst:l,isHasItems:s,onToBack:f,onToFront:y}}function NU(e){const t=AL(e),n=dn(()=>t.getWidth()),i=dn(()=>t.getHeight());return{containerWidth:n,containerHeight:i}}const NA={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""},...Bj};function VA(e,t,n){const i=Qt(!!e.show||!1);return hs(()=>e.show,u=>{i.value=u}),{show:dn({get(){return i.value},set(u){i.value=u,t("update:show",u),u||t("close")}})}}const jA={show:Boolean},UA={"update:show":e=>Boolean,close:()=>Boolean};function $A(e,t,n){const i=Qt(!!n);hs(()=>e.expand,l=>{i.value=l});const o=dn({get(){return i.value},set(l){i.value=l,t("update:expand",l)}});function u(){o.value=!o.value}return{expand:o,toggle:u}}const HA={expand:Boolean},GA={"update:expand":e=>Boolean},VU={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},jU={class:"map-control-button__content"};function UU(e,t,n,i,o,u){return Ae(),st("button",ar({class:"map-control-button"},e.$attrs,{style:u.bindStyle,class:u.bindClass}),[Le("span",jU,[In(e.$slots,"default",{},void 0,!0)])],16)}const ma=Cn(VU,[["render",UU],["__scopeId","data-v-cfd74f51"]]),$U={key:0},HU={key:1},GU={name:"MapSidebarToggle"},ZU=Dn({...GU,props:{right:Boolean,expand:Boolean},setup(e){const{SidebarLeftExpandedIcon:t,SidebarLeftCloseExpandedIcon:n,SidebarRightExpandedIcon:i,SidebarRightCloseExpandedIcon:o}=N_();return(u,l)=>(Ae(),st("button",null,[e.right?(Ae(),st("span",HU,[e.expand?(Ae(),$t(se(i),{key:0,size:16})):(Ae(),$t(se(o),{key:1,size:16}))])):(Ae(),st("span",$U,[e.expand?(Ae(),$t(se(t),{key:0,size:16})):(Ae(),$t(se(n),{key:1,size:16}))]))]))}}),WU=Cn(ZU,[["__scopeId","data-v-cc94c956"]]),qU={class:"sidebar-container--content"},KU={class:"draggable-sidebar"},YU={class:"draggable-sidebar-content"},XU={key:0,class:"complex-button-close"},QU={key:0},JU={key:1},e$={name:"DraggableItemSideBar"},t$=Dn({...e$,props:{...jA,...HA,...NA,componentMapSidebarToggle:{type:[String,Object]},width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...UA,...GA},setup(e,{emit:t}){const{CloseIcon:n,SidebarLeftExpandedIcon:i,SidebarLeftCloseExpandedIcon:o,SidebarRightExpandedIcon:u,SidebarRightCloseExpandedIcon:l,ToBackIcon:s,ToFrontIcon:f}=N_(),y=e,b=t,x=ya("containerId",Qt(y.containerId||"")),M=xL();if(!x.value)throw"Not set container id";const{show:A}=VA(y,b),{zIndex:k,itemId:L}=FA(x.value,A),{isLast:F,isFirst:V,isHasItems:O,onToBack:N,onToFront:U}=BA(x.value,L.value),{expand:W,toggle:ne}=$A(y,b,!0),X=dn(()=>!y.width||y.width=="auto"),{componentCard:q,componentCardHeader:G}=zA({...y,containerId:x.value});dn(()=>M.getComponentCardSidebarToggle()||y.componentMapSidebarToggle||WU);function ee(){A.value=!1}const ue=dn(()=>{let Y={};return Y.zIndex=k.value,y.width&&y.width!="auto"&&(y.width&&!isNaN(+y.width)?Y.width=y.width+"px":Y.width=y.width),Y});return(Y,ce)=>se(A)?(Ae(),st("div",{key:0,class:ei(["sidebar-container",{expand:se(W),"left-sidebar-container":!e.right,"right-sidebar-container":e.right,"auto-sidebar-container":X.value}]),style:Yr(ue.value)},[Le("div",qU,[(Ae(),$t(Ls(se(q)),{width:"100%",height:"100%"},{default:dt(()=>[Le("div",KU,[Y.disabledHeader?an("",!0):(Ae(),$t(Ls(se(G)),{key:0},{title:dt(()=>[In(Y.$slots,"title",{},()=>[Qi(gn(Y.title),1)],!0)]),"extra-btn":dt(()=>[In(Y.$slots,"extra-btn",{},void 0,!0),se(O)&&!Y.disabledOrder?(Ae(),st(Gn,{key:0},[He(ma,{disabled:se(V),onClick:ce[0]||(ce[0]=K=>se(N)())},{default:dt(()=>[He(se(s),{size:16})]),_:1},8,["disabled"]),He(ma,{disabled:se(F),onClick:ce[1]||(ce[1]=K=>se(U)())},{default:dt(()=>[He(se(f),{size:16})]),_:1},8,["disabled"])],64)):an("",!0),Y.disabledClose?an("",!0):(Ae(),$t(ma,{key:1,onClick:ee},{default:dt(()=>[He(se(n),{size:16})]),_:1}))]),_:3})),Le("div",YU,[In(Y.$slots,"default",{},void 0,!0)])])]),_:3}))]),se(A)&&!Y.disabledExpand?(Ae(),st("div",XU,[Le("button",{onClick:ce[2]||(ce[2]=(...K)=>se(ne)&&se(ne)(...K))},[e.right?(Ae(),st("span",JU,[se(W)?(Ae(),$t(se(u),{key:0,size:16})):(Ae(),$t(se(l),{key:1,size:16}))])):(Ae(),st("span",QU,[se(W)?(Ae(),$t(se(i),{key:0,size:16})):(Ae(),$t(se(o),{key:1,size:16}))]))])])):an("",!0)],6)):an("",!0)}}),n$=Cn(t$,[["__scopeId","data-v-6ef26283"]]);function VT(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function jg(e,t,n,i=1){const[o,u]=typeof i=="number"?[i,i]:i,l=Math.round(t/o/e[0])*e[0],s=Math.round(n/u/e[1])*e[1];return[l,s]}function J2(e,t,n){return e-t-n}function eC(e,t,n){return e-t-n}function au(e,t,n){return t!==null&&e<t?t:n!==null&&n<e?n:e}function jT(e,t,n){let i=e;const o=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(u=>VT(i[u]));if(!VT(i[o]))return!1;do{if(i[o](t))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1}function r$(e){const t=window.getComputedStyle(e);return[parseFloat(t.getPropertyValue("width"),10),parseFloat(t.getPropertyValue("height"),10)]}function im(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function Yh(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}const i$=(e,t)=>{const n=e.__vccOpts||e;for(const[i,o]of t)n[i]=o;return n},Wb={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},s$={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},a$={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let Xh=Wb.mouse;const o$={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:e=>typeof e=="number"?e>0:e==="auto"},h:{type:[Number,String],default:200,validator:e=>typeof e=="number"?e>0:e==="auto"},minWidth:{type:Number,default:0,validator:e=>e>=0},minHeight:{type:Number,default:0,validator:e=>e>=0},maxWidth:{type:Number,default:null,validator:e=>e>=0},maxHeight:{type:Number,default:null,validator:e=>e>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:e=>typeof e=="string"?e==="auto":e>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:e=>{const t=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(e.filter(n=>t.has(n))).size===e.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:e=>["x","y","both"].includes(e)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:e=>typeof e=="number"?e>0:e.length===2&&e[0]>0&&e[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[e,t]=this.getParentSize();this.parentWidth=e,this.parentHeight=t;const[n,i]=r$(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:n)/(this.h!=="auto"?this.h:i),this.width=this.w!=="auto"?this.w:n,this.height=this.h!=="auto"?this.h:i,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),im(document.documentElement,"mousedown",this.deselect),im(document.documentElement,"touchend touchcancel",this.deselect),im(window,"resize",this.checkParentSize)},beforeUnmount:function(){Yh(document.documentElement,"mousedown",this.deselect),Yh(document.documentElement,"touchstart",this.handleUp),Yh(document.documentElement,"mousemove",this.move),Yh(document.documentElement,"touchmove",this.move),Yh(document.documentElement,"mouseup",this.handleUp),Yh(document.documentElement,"touchend touchcancel",this.deselect),Yh(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[e,t]=this.getParentSize();this.parentWidth=e,this.parentHeight=t,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const e=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(e.getPropertyValue("width"),10),parseInt(e.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(e){Xh=Wb.touch,this.elementDown(e)},elementMouseDown(e){Xh=Wb.mouse,this.elementDown(e)},elementDown(e){if(e instanceof MouseEvent&&e.button!==0)return;const t=e.target||e.srcElement;if(this.$el.contains(t)){if(this.onDragStart(e)===!1)return;if(this.dragHandle&&!jT(t,this.dragHandle,this.$el)||this.dragCancel&&jT(t,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=e.touches?e.touches[0].pageX:e.pageX,this.mouseClickPosition.mouseY=e.touches?e.touches[0].pageY:e.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),im(document.documentElement,Xh.move,this.move),im(document.documentElement,Xh.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(e){const t=e.target||e.srcElement,n=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(t)&&!n.test(t.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),Yh(document.documentElement,Xh.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(e,t){Xh=Wb.touch,this.handleDown(e,t)},handleDown(e,t){t instanceof MouseEvent&&t.which!==1||this.onResizeStart(e,t)!==!1&&(t.stopPropagation&&t.stopPropagation(),this.lockAspectRatio&&!e.includes("m")?this.handle="m"+e.substring(1):this.handle=e,this.resizeEnable=!0,this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),im(document.documentElement,Xh.move,this.handleResize),im(document.documentElement,Xh.stop,this.handleUp))},calcResizeLimits(){let e=this.minW,t=this.minH,n=this.maxW,i=this.maxH;const o=this.aspectFactor,[u,l]=this.grid,s=this.width,f=this.height,y=this.left,b=this.top,x=this.right,M=this.bottom;this.lockAspectRatio&&(e/t>o?t=e/o:e=o*t,n&&i?(n=Math.min(n,o*i),i=Math.min(i,n/o)):n?i=n/o:i&&(n=o*i)),n=n-n%u,i=i-i%l;const A={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(A.minLeft=y%u,A.maxLeft=y+Math.floor((s-e)/u)*u,A.minTop=b%l,A.maxTop=b+Math.floor((f-t)/l)*l,A.minRight=x%u,A.maxRight=x+Math.floor((s-e)/u)*u,A.minBottom=M%l,A.maxBottom=M+Math.floor((f-t)/l)*l,n&&(A.minLeft=Math.max(A.minLeft,this.parentWidth-x-n),A.minRight=Math.max(A.minRight,this.parentWidth-y-n)),i&&(A.minTop=Math.max(A.minTop,this.parentHeight-M-i),A.minBottom=Math.max(A.minBottom,this.parentHeight-b-i)),this.lockAspectRatio&&(A.minLeft=Math.max(A.minLeft,y-b*o),A.minTop=Math.max(A.minTop,b-y/o),A.minRight=Math.max(A.minRight,x-M*o),A.minBottom=Math.max(A.minBottom,M-x/o))):(A.minLeft=null,A.maxLeft=y+Math.floor((s-e)/u)*u,A.minTop=null,A.maxTop=b+Math.floor((f-t)/l)*l,A.minRight=null,A.maxRight=x+Math.floor((s-e)/u)*u,A.minBottom=null,A.maxBottom=M+Math.floor((f-t)/l)*l,n&&(A.minLeft=-(x+n),A.minRight=-(y+n)),i&&(A.minTop=-(M+i),A.minBottom=-(b+i)),this.lockAspectRatio&&n&&i&&(A.minLeft=Math.min(A.minLeft,-(x+n)),A.minTop=Math.min(A.minTop,-(i+M)),A.minRight=Math.min(A.minRight,-y-n),A.minBottom=Math.min(A.minBottom,-b-i))),A},move(e){this.resizing?this.handleResize(e):this.dragEnable&&this.handleDrag(e)},handleDrag(e){const t=this.axis,n=this.grid,i=this.bounds,o=this.mouseClickPosition,u=t&&t!=="y"?o.mouseX-(e.touches?e.touches[0].pageX:e.pageX):0,l=t&&t!=="x"?o.mouseY-(e.touches?e.touches[0].pageY:e.pageY):0,[s,f]=jg(n,u,l,this.scale),y=au(o.left-s,i.minLeft,i.maxLeft),b=au(o.top-f,i.minTop,i.maxTop);if(this.onDrag(y,b)===!1)return;const x=au(o.right+s,i.minRight,i.maxRight),M=au(o.bottom+f,i.minBottom,i.maxBottom);this.left=y,this.top=b,this.right=x,this.bottom=M,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(e){const[t,n]=jg(this.grid,e,this.top,1),i=au(t,this.bounds.minLeft,this.bounds.maxLeft);this.left=i,this.right=this.parentWidth-this.width-i},moveVertically(e){const[t,n]=jg(this.grid,this.left,e,1),i=au(n,this.bounds.minTop,this.bounds.maxTop);this.top=i,this.bottom=this.parentHeight-this.height-i},handleResize(e){let t=this.left,n=this.top,i=this.right,o=this.bottom;const u=this.mouseClickPosition,l=this.aspectFactor,s=u.mouseX-(e.touches?e.touches[0].pageX:e.pageX),f=u.mouseY-(e.touches?e.touches[0].pageY:e.pageY);!this.widthTouched&&s&&(this.widthTouched=!0),!this.heightTouched&&f&&(this.heightTouched=!0);const[y,b]=jg(this.grid,s,f,this.scale);this.handle.includes("b")?(o=au(u.bottom+b,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(i=this.right-(this.bottom-o)*l)):this.handle.includes("t")&&(n=au(u.top-b,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(t=this.left-(this.top-n)*l)),this.handle.includes("r")?(i=au(u.right+y,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(o=this.bottom-(this.right-i)/l)):this.handle.includes("l")&&(t=au(u.left-y,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(n=this.top-(this.left-t)/l));const x=J2(this.parentWidth,t,i),M=eC(this.parentHeight,n,o);this.onResize(this.handle,t,n,x,M)!==!1&&(this.left=t,this.top=n,this.right=i,this.bottom=o,this.width=x,this.height=M,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(e){const[t,n]=jg(this.grid,e,0,1),i=au(this.parentWidth-t-this.left,this.bounds.minRight,this.bounds.maxRight);let o=this.bottom;this.lockAspectRatio&&(o=this.bottom-(this.right-i)/this.aspectFactor);const u=J2(this.parentWidth,this.left,i),l=eC(this.parentHeight,this.top,o);this.right=i,this.bottom=o,this.width=u,this.height=l},changeHeight(e){const[t,n]=jg(this.grid,0,e,1),i=au(this.parentHeight-n-this.top,this.bounds.minBottom,this.bounds.maxBottom);let o=this.right;this.lockAspectRatio&&(o=this.right-(this.bottom-i)*this.aspectFactor);const u=J2(this.parentWidth,this.left,o),l=eC(this.parentHeight,this.top,i);this.right=o,this.bottom=i,this.width=u,this.height=l},handleUp(e){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),Yh(document.documentElement,Xh.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?s$:a$}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(e){this.enabled=e,e?this.$emit("activated"):this.$emit("deactivated")},z(e){(e>=0||e==="auto")&&(this.zIndex=e)},x(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(e))},y(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(e))},lockAspectRatio(e){e?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(e))},h(e){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(e))}}},l$=["onMousedown","onTouchstart"];function u$(e,t,n,i,o,u){return Ae(),st("div",{style:Yr(u.style),class:ei([{[n.classNameActive]:e.enabled,[n.classNameDragging]:e.dragging,[n.classNameResizing]:e.resizing,[n.classNameDraggable]:n.draggable,[n.classNameResizable]:n.resizable},n.className]),onMousedown:t[0]||(t[0]=(...l)=>u.elementMouseDown&&u.elementMouseDown(...l)),onTouchstart:t[1]||(t[1]=(...l)=>u.elementTouchDown&&u.elementTouchDown(...l))},[(Ae(!0),st(Gn,null,ii(u.actualHandles,l=>(Ae(),st("div",{key:l,class:ei([n.classNameHandle,n.classNameHandle+"-"+l]),style:Yr({display:e.enabled?"block":"none"}),onMousedown:Rr(s=>u.handleDown(l,s),["stop","prevent"]),onTouchstart:Rr(s=>u.handleTouchDown(l,s),["stop","prevent"])},[In(e.$slots,l)],46,l$))),128)),In(e.$slots,"default")],38)}const wL=i$(o$,[["render",u$]]);function mI(e){mI.installed||(mI.installed=!0,e.component("VueDraggableResizable",wL))}const c$={install:mI};let kx=null;typeof window<"u"?kx=window.Vue:typeof global<"u"&&(kx=global.Vue);kx&&kx.use(c$);const h$={class:"draggable-popup-desktop"},d$={class:"draggable-popup-drag-container"},f$={class:"draggable-popup-desktop-content"},p$={name:"DraggableItemPopup"},m$=Dn({...p$,props:{...jA,...HA,...NA,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...UA,...GA},setup(e,{emit:t}){const{CloseIcon:n,CloseExpandedIcon:i,DragIcon:o,ExpandedIcon:u,ToBackIcon:l,ToFrontIcon:s}=N_(),f=e,y=t,b=ya("containerId",Qt(f.containerId||""));if(!b.value)throw"Not set container id";const{show:x}=VA(f,y),{zIndex:M,itemId:A}=FA(b.value,x),{containerWidth:k,containerHeight:L}=NU(b.value),{isLast:F,isFirst:V,isHasItems:O,onToBack:N,onToFront:U}=BA(b.value,A.value),W=Qt(!1),ne=Qt(!1),X=Qt(f.height||200),q=Qt(X.value),G=Qt(f.width||200),ee=Qt(0),ue=Qt(0),{expand:Y}=$A(f,y,!0);function ce(){ne.value=!0}function K(){ne.value=!1}const{componentCard:Se,componentCardHeader:Ve}=zA({...f,containerId:b.value});function Ne(Ue,Tt,Bt,kt){G.value=Bt,X.value=kt}function et(){x.value=!1}hs(x,()=>{ot()},{immediate:!0});function ot(){W.value=!1,x&&(f.left!=null&&(ee.value=f.left),f.top!=null&&(ue.value=f.top),f.right&&(ee.value=k.value-f.right-G.value),f.bottom&&(ue.value=L.value-f.bottom-X.value),(f.center||f.centerX)&&(ee.value=(k.value-G.value)/2),(f.center||f.centerY)&&(ue.value=(L.value-X.value)/2),W.value=!0)}function Zt(){Y.value&&X.value>50&&(q.value=X.value),Y.value=!Y.value,X.value=Y.value?q.value:50}function qe(){var Ue;(Ue=window==null?void 0:window.getSelection())==null||Ue.removeAllRanges()}return(Ue,Tt)=>se(x)&&W.value?(Ae(),$t(se(wL),ar({key:0},Ue.$attrs,{dragHandle:".drag",parent:!0,handles:e.sticks,w:G.value,h:X.value,x:ee.value,y:ue.value,z:se(M),onResizing:Ne,active:ne.value,onActivated:Tt[2]||(Tt[2]=Bt=>ce()),onDeactivated:Tt[3]||(Tt[3]=Bt=>K()),onDragging:qe}),{default:dt(()=>[(Ae(),$t(Ls(se(Se)),{width:G.value,height:X.value},{default:dt(()=>[Le("div",h$,[Ue.disabledHeader?an("",!0):(Ae(),$t(Ls(se(Ve)),{key:0},{title:dt(()=>[In(Ue.$slots,"title",{},()=>[Qi(gn(Ue.title),1)],!0)]),"pre-title":dt(()=>[Le("div",d$,[He(se(o),{size:16}),Tt[4]||(Tt[4]=Le("div",{class:"drag grabbing"},null,-1))])]),"extra-btn":dt(()=>[In(Ue.$slots,"extra-btn",{},void 0,!0),se(O)&&!Ue.disabledOrder?(Ae(),st(Gn,{key:0},[He(ma,{disabled:se(V),onClick:Tt[0]||(Tt[0]=Bt=>se(N)())},{default:dt(()=>[He(se(l),{size:16})]),_:1},8,["disabled"]),He(ma,{disabled:se(F),onClick:Tt[1]||(Tt[1]=Bt=>se(U)())},{default:dt(()=>[He(se(s),{size:16})]),_:1},8,["disabled"])],64)):an("",!0),He(ma,{onClick:Zt},{default:dt(()=>[se(Y)?(Ae(),$t(se(u),{key:0,size:16})):(Ae(),$t(se(i),{key:1,size:16}))]),_:1}),Ue.disabledClose?an("",!0):(Ae(),$t(ma,{key:1,onClick:et},{default:dt(()=>[He(se(n),{size:16})]),_:1}))]),_:3})),kl(Le("div",f$,[In(Ue.$slots,"default",{},void 0,!0)],512),[[yA,se(Y)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):an("",!0)}}),g$=Cn(m$,[["__scopeId","data-v-23372390"]]),y$={class:"draggable-float"},v$={name:"DraggableItemFloat"},_$=Dn({...v$,props:{...jA,...HA,...NA,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(e){return["top","bottom"].includes(e)}}},emits:{...UA,...GA},setup(e,{emit:t}){const{CloseIcon:n,ToBackIcon:i,ToFrontIcon:o,ExpandedIcon:u,CloseExpandedIcon:l}=N_(),s=e,f=t,y=ya("containerId",Qt(s.containerId||""));if(!y.value)throw"Not set container id";const{show:b}=VA(s,f),{zIndex:x,itemId:M}=FA(y.value,b),{isLast:A,isFirst:k,isHasItems:L,onToBack:F,onToFront:V}=BA(y.value,M.value),{expand:O,toggle:N}=$A(s,f,!0),{componentCard:U,componentCardHeader:W}=zA({...s,containerId:y.value});function ne(){b.value=!1}const X=dn(()=>{let ee={};return ee.zIndex=x.value,s.top&&(ee.top=s.top+"px"),s.left&&(ee.left=s.left+"px"),s.right&&(ee.right=s.right+"px"),s.bottom&&(ee.bottom=s.bottom+"px"),s.width&&s.width!="auto"&&(s.width&&!isNaN(+s.width)?ee.width=s.width+"px":ee.width=s.width),ee}),q=dn(()=>{let ee={};return ee.maxHeight=s.maxHeight+"px",ee}),G=dn(()=>!s.width||s.width=="auto");return(ee,ue)=>se(b)?(Ae(),st("div",{key:0,class:ei(["float-container",{"auto-float-container":G.value}]),style:Yr(X.value)},[(Ae(),$t(Ls(se(U)),null,{default:dt(()=>[Le("div",y$,[!ee.disabledHeader&&e.headerLocation==="top"?(Ae(),$t(Ls(se(W)),{key:0},{title:dt(()=>[In(ee.$slots,"title",{},()=>[Qi(gn(ee.title),1)],!0)]),"extra-btn":dt(()=>[In(ee.$slots,"extra-btn",{},void 0,!0),He(ma,{onClick:se(N)},{default:dt(()=>[se(O)?(Ae(),$t(se(u),{key:0,size:16})):(Ae(),$t(se(l),{key:1,size:16}))]),_:1},8,["onClick"]),se(L)&&!ee.disabledOrder?(Ae(),st(Gn,{key:0},[He(ma,{disabled:se(k),onClick:ue[0]||(ue[0]=Y=>se(F)())},{default:dt(()=>[He(se(i),{size:16})]),_:1},8,["disabled"]),He(ma,{disabled:se(A),onClick:ue[1]||(ue[1]=Y=>se(V)())},{default:dt(()=>[He(se(o),{size:16})]),_:1},8,["disabled"])],64)):an("",!0),ee.disabledClose?an("",!0):(Ae(),$t(ma,{key:1,onClick:ne},{default:dt(()=>[He(se(n),{size:16})]),_:1}))]),_:3})):an("",!0),kl(Le("div",{class:"draggable-float-content",style:Yr(q.value)},[In(ee.$slots,"default",{},void 0,!0)],4),[[yA,se(O)]]),!ee.disabledHeader&&e.headerLocation==="bottom"?(Ae(),$t(Ls(se(W)),{key:1},{title:dt(()=>[In(ee.$slots,"title",{},()=>[Qi(gn(ee.title),1)],!0)]),"extra-btn":dt(()=>[In(ee.$slots,"extra-btn",{},void 0,!0),He(ma,{onClick:se(N)},{default:dt(()=>[se(O)?(Ae(),$t(se(u),{key:0,size:16})):(Ae(),$t(se(l),{key:1,size:16}))]),_:1},8,["onClick"]),se(L)&&!ee.disabledOrder?(Ae(),st(Gn,{key:0},[He(ma,{disabled:se(k),onClick:ue[2]||(ue[2]=Y=>se(F)())},{default:dt(()=>[He(se(i),{size:16})]),_:1},8,["disabled"]),He(ma,{disabled:se(A),onClick:ue[3]||(ue[3]=Y=>se(V)())},{default:dt(()=>[He(se(o),{size:16})]),_:1},8,["disabled"])],64)):an("",!0),ee.disabledClose?an("",!0):(Ae(),$t(ma,{key:1,onClick:ne},{default:dt(()=>[He(se(n),{size:16})]),_:1}))]),_:3})):an("",!0)])]),_:3}))],6)):an("",!0)}}),b$=Cn(_$,[["__scopeId","data-v-ecbbe79b"]]),x$={class:"draggable-bottom"},A$={class:"draggable-bottom-content"},w$={name:"DraggableItemBottom"},C$=Dn({...w$,props:{...jA,...HA,...NA},emits:{...UA,...GA},setup(e,{emit:t}){const{CloseIcon:n,ToBackIcon:i,FullscreenIcon:o,OffFullscreenIcon:u}=N_(),l=e,s=t,f=ya("containerId",Qt(l.containerId||""));if(!f.value)throw"Not set container id";const{show:y}=VA(l,s),{zIndex:b,itemId:x}=FA(f.value,y),{isFirst:M,isHasItems:A,onToBack:k}=BA(f.value,x.value),{expand:L,toggle:F}=$A(l,s,!1),{componentCard:V,componentCardHeader:O}=zA({...l,containerId:f.value});function N(){y.value=!1}const U=dn(()=>{let W={};return W.zIndex=b.value,W.height=L.value?"100%":"45%",W});return(W,ne)=>se(y)?(Ae(),st("div",{key:0,class:"popup-mobile-container",style:Yr(U.value)},[(Ae(),$t(Ls(se(V)),null,{default:dt(()=>[Le("div",x$,[W.disabledHeader?an("",!0):(Ae(),$t(Ls(se(O)),{key:0},{title:dt(()=>[In(W.$slots,"title",{},()=>[Qi(gn(W.title),1)],!0)]),"extra-btn":dt(()=>[In(W.$slots,"extra-btn",{},void 0,!0),se(A)&&!W.disabledOrder?(Ae(),$t(ma,{key:0,disabled:se(M),onClick:ne[0]||(ne[0]=Rr(X=>se(k)(),["prevent","stop"]))},{default:dt(()=>[He(se(i),{size:16})]),_:1},8,["disabled"])):an("",!0),He(ma,{onClick:ne[1]||(ne[1]=X=>se(F)())},{default:dt(()=>[se(L)?(Ae(),$t(se(o),{key:0,size:16})):(Ae(),$t(se(u),{key:1,size:16}))]),_:1}),W.disabledClose?an("",!0):(Ae(),$t(ma,{key:1,onClick:N},{default:dt(()=>[He(se(n),{size:16})]),_:1}))]),_:3})),Le("div",A$,[In(W.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):an("",!0)}}),$M=Cn(C$,[["__scopeId","data-v-5c196e37"]]);function HM(e,t){return Dn({name:"WithMobileHandle"+e.name,props:{containerId:String},setup(n){const i=ya("containerId",Qt(n.containerId||"")),o=Cj(i.value),u=dn(()=>o.getIsMobile());return{p_containerId:i,isMobile:u}},render(){return this.isMobile?So(t,{...this.$attrs,containerId:this.p_containerId},this.$slots):So(e,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const CL=HM(n$,$M),ch=HM(g$,$M),I$=HM(b$,$M),M$={class:"module__container"},S$={name:"ModuleContainer"},E$=Object.assign(S$,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(e){return["top-left","top-right","bottom-left","bottom-right"].indexOf(e)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(e){const t=r5(),n=e,i=dn(()=>!!t.btn),o=dn(()=>!!t.draggable),u=ya("$map.dragId"),l=ya("$map.id"),s=dn(()=>n.dragId||u),f=dn(()=>n.mapId||l),y=dn(()=>`#map-draggable-${f.value}`),b=dn(()=>`#${n.position}-${f.value}`),x=dn(()=>{let M={};return n.position.includes("left")&&(M.left=18+n.btnWidth),n.position.includes("right")&&(M.right=18+n.btnWidth),n.position.includes("top")&&(M.top=10),n.position.includes("bottom")&&(M.bottom=10),M.containerId=s.value,M});return(M,A)=>(Ae(),st("div",M$,[e.controlVisible&&i.value?(Ae(),$t($C,{key:0,to:b.value},[In(M.$slots,"btn",{},void 0,!0)],8,["to"])):an("",!0),In(M.$slots,"default",{},void 0,!0),s.value&&o.value?(Ae(),$t($C,{key:1,to:y.value},[In(M.$slots,"draggable",$i(zi(x.value)),void 0,!0)],8,["to"])):an("",!0)]))}}),ts=Cn(E$,[["__scopeId","data-v-35db38a4"]]);var IL={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.4.0/LICENSE.txt
 */(function(e,t){(function(n,i){e.exports=i()})(ra,function(){var n={},i={};function o(l,s,f){if(i[l]=f,l==="index"){var y="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",b={};return i.shared(b),i.index(n,b),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([y],{type:"text/javascript"}))),n}}o("shared",["exports"],function(l){function s(h,a,d,p){return new(d||(d=Promise))(function(_,S){function E(j){try{z(p.next(j))}catch(Z){S(Z)}}function P(j){try{z(p.throw(j))}catch(Z){S(Z)}}function z(j){var Z;j.done?_(j.value):(Z=j.value,Z instanceof d?Z:new d(function(te){te(Z)})).then(E,P)}z((p=p.apply(h,a||[])).next())})}function f(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var y,b;function x(){if(b)return y;function h(a,d){this.x=a,this.y=d}return b=1,y=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,d){return this.clone()._rotateAround(a,d)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var d=a.x-this.x,p=a.y-this.y;return d*d+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,d){return Math.atan2(this.x*d-this.y*a,this.x*a+this.y*d)},_matMult:function(a){var d=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=d,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var d=Math.cos(a),p=Math.sin(a),_=p*this.x+d*this.y;return this.x=d*this.x-p*this.y,this.y=_,this},_rotateAround:function(a,d){var p=Math.cos(a),_=Math.sin(a),S=d.y+_*(this.x-d.x)+p*(this.y-d.y);return this.x=d.x+p*(this.x-d.x)-_*(this.y-d.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(a){return a instanceof h?a:Array.isArray(a)?new h(a[0],a[1]):a},y}typeof SuppressedError=="function"&&SuppressedError;var M,A,k=f(x()),L=function(){if(A)return M;function h(a,d,p,_){this.cx=3*a,this.bx=3*(p-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(_-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=p,this.p2y=_}return A=1,M=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,d){if(d===void 0&&(d=1e-6),a<0)return 0;if(a>1)return 1;for(var p=a,_=0;_<8;_++){var S=this.sampleCurveX(p)-a;if(Math.abs(S)<d)return p;var E=this.sampleCurveDerivativeX(p);if(Math.abs(E)<1e-6)break;p-=S/E}var P=0,z=1;for(p=a,_=0;_<20&&(S=this.sampleCurveX(p),!(Math.abs(S-a)<d));_++)a>S?P=p:z=p,p=.5*(z-P)+P;return p},solve:function(a,d){return this.sampleCurveY(this.solveCurveX(a,d))}},M}(),F=f(L);let V,O;function N(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function U(){if(O==null&&(O=!1,N())){const a=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(a){for(let p=0;p<5*5;p++){const _=4*p;a.fillStyle=`rgb(${_},${_+1},${_+2})`,a.fillRect(p%5,Math.floor(p/5),1,1)}const d=a.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&d[p]!==p){O=!0;break}}}return O||!1}var W=1e-6,ne=typeof Float32Array<"u"?Float32Array:Array;function X(){var h=new ne(9);return ne!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function q(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function G(){var h=new ne(3);return ne!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function ee(h){return Math.hypot(h[0],h[1],h[2])}function ue(h,a,d){var p=new ne(3);return p[0]=h,p[1]=a,p[2]=d,p}Math.hypot||(Math.hypot=function(){for(var h=0,a=arguments.length;a--;)h+=arguments[a]*arguments[a];return Math.sqrt(h)});var Y,ce=ee;function K(h,a,d){var p=a[0],_=a[1],S=a[2],E=a[3];return h[0]=d[0]*p+d[4]*_+d[8]*S+d[12]*E,h[1]=d[1]*p+d[5]*_+d[9]*S+d[13]*E,h[2]=d[2]*p+d[6]*_+d[10]*S+d[14]*E,h[3]=d[3]*p+d[7]*_+d[11]*S+d[15]*E,h}function Se(){var h=new ne(4);return ne!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Ve(){var h=new ne(2);return ne!=Float32Array&&(h[0]=0,h[1]=0),h}function Ne(h,a){var d=new ne(2);return d[0]=h,d[1]=a,d}G(),Y=new ne(4),ne!=Float32Array&&(Y[0]=0,Y[1]=0,Y[2]=0,Y[3]=0),G(),ue(1,0,0),ue(0,1,0),Se(),Se(),X(),Ve();const et=8192;function ot(h,a,d){return a*(et/(h.tileSize*Math.pow(2,d-h.tileID.overscaledZ)))}function Zt(h,a){return(h%a+a)%a}function qe(h,a,d){return h*(1-d)+a*d}function Ue(h){if(h<=0)return 0;if(h>=1)return 1;const a=h*h,d=a*h;return 4*(h<.5?d:3*(h-a)+d-.75)}function Tt(h,a,d,p){const _=new F(h,a,d,p);return S=>_.solve(S)}const Bt=Tt(.25,.1,.25,1);function kt(h,a,d){return Math.min(d,Math.max(a,h))}function un(h,a,d){const p=d-a,_=((h-a)%p+p)%p+a;return _===a?d:_}function gt(h,...a){for(const d of a)for(const p in d)h[p]=d[p];return h}let ft=1;function lt(h,a,d){const p={};for(const _ in h)p[_]=a.call(this,h[_],_,h);return p}function Pt(h,a,d){const p={};for(const _ in h)a.call(this,h[_],_,h)&&(p[_]=h[_]);return p}function Lt(h){return Array.isArray(h)?h.map(Lt):typeof h=="object"&&h?lt(h,Lt):h}const on={};function Ie(h){on[h]||(typeof console<"u"&&console.warn(h),on[h]=!0)}function $(h,a,d){return(d.y-h.y)*(a.x-h.x)>(a.y-h.y)*(d.x-h.x)}function Pe(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Oe=null;function ye(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Fe(h,a,d,p,_){return s(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(h,{timestamp:0});try{const E=S==null?void 0:S.format;if(!E||!E.startsWith("BGR")&&!E.startsWith("RGB"))throw new Error(`Unrecognized format ${E}`);const P=E.startsWith("BGR"),z=new Uint8ClampedArray(p*_*4);if(yield S.copyTo(z,function(j,Z,te,oe,le){const he=4*Math.max(1,0),be=(Math.max(0,te)-te)*oe*4+he,Me=4*oe,ze=Math.max(0,Z),rt=Math.max(0,te);return{rect:{x:ze,y:rt,width:Math.min(j.width,Z+oe)-ze,height:Math.min(j.height,te+le)-rt},layout:[{offset:be,stride:Me}]}}(h,a,d,p,_)),P)for(let j=0;j<z.length;j+=4){const Z=z[j];z[j]=z[j+2],z[j+2]=Z}return z}finally{S.close()}})}let tt,it;function Be(h,a,d,p){return h.addEventListener(a,d,p),{unsubscribe:()=>{h.removeEventListener(a,d,p)}}}function Mt(h){return h/Math.PI*180}const wt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},At={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Ht="AbortError";function cn(){return new Error(Ht)}const fn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ut(h){return fn.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const pt="global-dispatcher";class _t extends Error{constructor(a,d,p,_){super(`AJAXError: ${d} (${a}): ${p}`),this.status=a,this.statusText=d,this.url=p,this.body=_}}const Nt=()=>Pe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Wt=function(h,a){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const p=ut(h.url);if(p)return p(h,a);if(Pe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:pt},a)}if(!(/^file:/.test(d=h.url)||/^file:/.test(Nt())&&!/^\w+:/.test(d))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,_){return s(this,void 0,void 0,function*(){const S=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Nt(),signal:_.signal});let E,P;p.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{E=yield fetch(S)}catch(j){throw new _t(0,j.message,p.url,new Blob)}if(!E.ok){const j=yield E.blob();throw new _t(E.status,E.statusText,p.url,j)}P=p.type==="arrayBuffer"||p.type==="image"?E.arrayBuffer():p.type==="json"?E.json():E.text();const z=yield P;if(_.signal.aborted)throw cn();return{data:z,cacheControl:E.headers.get("Cache-Control"),expires:E.headers.get("Expires")}})}(h,a);if(Pe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:pt},a)}var d;return function(p,_){return new Promise((S,E)=>{var P;const z=new XMLHttpRequest;z.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(z.responseType="arraybuffer");for(const j in p.headers)z.setRequestHeader(j,p.headers[j]);p.type==="json"&&(z.responseType="text",!((P=p.headers)===null||P===void 0)&&P.Accept||z.setRequestHeader("Accept","application/json")),z.withCredentials=p.credentials==="include",z.onerror=()=>{E(new Error(z.statusText))},z.onload=()=>{if(!_.signal.aborted)if((z.status>=200&&z.status<300||z.status===0)&&z.response!==null){let j=z.response;if(p.type==="json")try{j=JSON.parse(z.response)}catch(Z){return void E(Z)}S({data:j,cacheControl:z.getResponseHeader("Cache-Control"),expires:z.getResponseHeader("Expires")})}else{const j=new Blob([z.response],{type:z.getResponseHeader("Content-Type")});E(new _t(z.status,z.statusText,p.url,j))}},_.signal.addEventListener("abort",()=>{z.abort(),E(cn())}),z.send(p.body)})}(h,a)};function wn(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const a=new URL(h),d=window.location;return a.protocol===d.protocol&&a.host===d.host}function Xe(h,a,d){d[h]&&d[h].indexOf(a)!==-1||(d[h]=d[h]||[],d[h].push(a))}function de(h,a,d){if(d&&d[h]){const p=d[h].indexOf(a);p!==-1&&d[h].splice(p,1)}}class ge{constructor(a,d={}){gt(this,d),this.type=a}}class xe extends ge{constructor(a,d={}){super("error",gt({error:a},d))}}class Ee{on(a,d){return this._listeners=this._listeners||{},Xe(a,d,this._listeners),{unsubscribe:()=>{this.off(a,d)}}}off(a,d){return de(a,d,this._listeners),de(a,d,this._oneTimeListeners),this}once(a,d){return d?(this._oneTimeListeners=this._oneTimeListeners||{},Xe(a,d,this._oneTimeListeners),this):new Promise(p=>this.once(a,p))}fire(a,d){typeof a=="string"&&(a=new ge(a,d||{}));const p=a.type;if(this.listens(p)){a.target=this;const _=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const P of _)P.call(this,a);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const P of S)de(p,P,this._oneTimeListeners),P.call(this,a);const E=this._eventedParent;E&&(gt(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),E.fire(a))}else a instanceof xe&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,d){return this._eventedParent=a,this._eventedParentData=d,this}}var ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Qe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ht(h,a){const d={};for(const p in h)p!=="ref"&&(d[p]=h[p]);return Qe.forEach(p=>{p in a&&(d[p]=a[p])}),d}function Ze(h,a){if(Array.isArray(h)){if(!Array.isArray(a)||h.length!==a.length)return!1;for(let d=0;d<h.length;d++)if(!Ze(h[d],a[d]))return!1;return!0}if(typeof h=="object"&&h!==null&&a!==null){if(typeof a!="object"||Object.keys(h).length!==Object.keys(a).length)return!1;for(const d in h)if(!Ze(h[d],a[d]))return!1;return!0}return h===a}function St(h,a){h.push(a)}function Dt(h,a,d){St(d,{command:"addSource",args:[h,a[h]]})}function yt(h,a,d){St(a,{command:"removeSource",args:[h]}),d[h]=!0}function qt(h,a,d,p){yt(h,d,p),Dt(h,a,d)}function pn(h,a,d){let p;for(p in h[d])if(Object.prototype.hasOwnProperty.call(h[d],p)&&p!=="data"&&!Ze(h[d][p],a[d][p]))return!1;for(p in a[d])if(Object.prototype.hasOwnProperty.call(a[d],p)&&p!=="data"&&!Ze(h[d][p],a[d][p]))return!1;return!0}function mn(h,a,d,p,_,S){h=h||{},a=a||{};for(const E in h)Object.prototype.hasOwnProperty.call(h,E)&&(Ze(h[E],a[E])||d.push({command:S,args:[p,E,a[E],_]}));for(const E in a)Object.prototype.hasOwnProperty.call(a,E)&&!Object.prototype.hasOwnProperty.call(h,E)&&(Ze(h[E],a[E])||d.push({command:S,args:[p,E,a[E],_]}))}function Vn(h){return h.id}function Qn(h,a){return h[a.id]=a,h}class Ft{constructor(a,d,p,_){this.message=(a?`${a}: `:"")+p,_&&(this.identifier=_),d!=null&&d.__line__&&(this.line=d.__line__)}}function jn(h,...a){for(const d of a)for(const p in d)h[p]=d[p];return h}class xr extends Error{constructor(a,d){super(d),this.message=d,this.key=a}}class Vr{constructor(a,d=[]){this.parent=a,this.bindings={};for(const[p,_]of d)this.bindings[p]=_}concat(a){return new Vr(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Ar={kind:"null"},Ut={kind:"number"},_n={kind:"string"},zn={kind:"boolean"},$s={kind:"color"},Ds={kind:"projectionDefinition"},si={kind:"object"},Yn={kind:"value"},dh={kind:"collator"},Cu={kind:"formatted"},yd={kind:"padding"},Nl={kind:"resolvedImage"},vd={kind:"variableAnchorOffsetCollection"};function Bi(h,a){return{kind:"array",itemType:h,N:a}}function ai(h){if(h.kind==="array"){const a=ai(h.itemType);return typeof h.N=="number"?`array<${a}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${a}>`}return h.kind}const Ni=[Ar,Ut,_n,zn,$s,Ds,Cu,si,Bi(Yn),yd,Nl,vd];function fh(h,a){if(a.kind==="error")return null;if(h.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!fh(h.itemType,a.itemType))&&(typeof h.N!="number"||h.N===a.N))return null}else{if(h.kind===a.kind)return null;if(h.kind==="value"){for(const d of Ni)if(!fh(d,a))return null}}return`Expected ${ai(h)} but found ${ai(a)} instead.`}function _d(h,a){return a.some(d=>d.kind===h.kind)}function no(h,a){return a.some(d=>d==="null"?h===null:d==="array"?Array.isArray(h):d==="object"?h&&!Array.isArray(h)&&typeof h=="object":d===typeof h)}function Vl(h,a){return h.kind==="array"&&a.kind==="array"?h.itemType.kind===a.itemType.kind&&typeof h.N=="number":h.kind===a.kind}const Jf=.96422,ep=.82521,tp=4/29,mc=6/29,np=3*mc*mc,tv=mc*mc*mc,Bm=Math.PI/180,Nm=180/Math.PI;function rp(h){return(h%=360)<0&&(h+=360),h}function bd([h,a,d,p]){let _,S;const E=xd((.2225045*(h=ip(h))+.7168786*(a=ip(a))+.0606169*(d=ip(d)))/1);h===a&&a===d?_=S=E:(_=xd((.4360747*h+.3850649*a+.1430804*d)/Jf),S=xd((.0139322*h+.0971045*a+.7141733*d)/ep));const P=116*E-16;return[P<0?0:P,500*(_-E),200*(E-S),p]}function ip(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function xd(h){return h>tv?Math.pow(h,1/3):h/np+tp}function gc([h,a,d,p]){let _=(h+16)/116,S=isNaN(a)?_:_+a/500,E=isNaN(d)?_:_-d/200;return _=1*sp(_),S=Jf*sp(S),E=ep*sp(E),[jl(3.1338561*S-1.6168667*_-.4906146*E),jl(-.9787684*S+1.9161415*_+.033454*E),jl(.0719453*S-.2289914*_+1.4052427*E),p]}function jl(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function sp(h){return h>mc?h*h*h:np*(h-tp)}function ph(h){return parseInt(h.padEnd(2,h),16)/255}function Iu(h,a){return Ul(a?h/100:h,0,1)}function Ul(h,a,d){return Math.min(Math.max(a,h),d)}function Vm(h){return!h.some(Number.isNaN)}const jm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ro(h,a,d){return h+d*(a-h)}function $l(h,a,d){return h.map((p,_)=>ro(p,a[_],d))}class Jn{constructor(a,d,p,_=1,S=!0){this.r=a,this.g=d,this.b=p,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[a,d,p,_]))}static parse(a){if(a instanceof Jn)return a;if(typeof a!="string")return;const d=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=jm[p];if(_){const[E,P,z]=_;return[E/255,P/255,z/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const E=p.length<6?1:2;let P=1;return[ph(p.slice(P,P+=E)),ph(p.slice(P,P+=E)),ph(p.slice(P,P+=E)),ph(p.slice(P,P+E)||"ff")]}if(p.startsWith("rgb")){const E=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(E){const[P,z,j,Z,te,oe,le,he,be,Me,ze,rt]=E,$e=[Z||" ",le||" ",Me].join("");if($e==="  "||$e==="  /"||$e===",,"||$e===",,,"){const ae=[j,oe,be].join(""),we=ae==="%%%"?100:ae===""?255:0;if(we){const Ge=[Ul(+z/we,0,1),Ul(+te/we,0,1),Ul(+he/we,0,1),ze?Iu(+ze,rt):1];if(Vm(Ge))return Ge}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[E,P,z,j,Z,te,oe,le,he]=S,be=[z||" ",Z||" ",oe].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Me=[+P,Ul(+j,0,100),Ul(+te,0,100),le?Iu(+le,he):1];if(Vm(Me))return function([ze,rt,$e,ae]){function we(Ge){const It=(Ge+ze/30)%12,Yt=rt*Math.min($e,1-$e);return $e-Yt*Math.max(-1,Math.min(It-3,9-It,1))}return ze=rp(ze),rt/=100,$e/=100,[we(0),we(8),we(4),ae]}(Me)}}}(a);return d?new Jn(...d,!1):void 0}get rgb(){const{r:a,g:d,b:p,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[a/S,d/S,p/S,_])}get hcl(){return this.overwriteGetter("hcl",function(a){const[d,p,_,S]=bd(a),E=Math.sqrt(p*p+_*_);return[Math.round(1e4*E)?rp(Math.atan2(_,p)*Nm):NaN,E,d,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",bd(this.rgb))}overwriteGetter(a,d){return Object.defineProperty(this,a,{value:d}),d}toString(){const[a,d,p,_]=this.rgb;return`rgba(${[a,d,p].map(S=>Math.round(255*S)).join(",")},${_})`}static interpolate(a,d,p,_="rgb"){switch(_){case"rgb":{const[S,E,P,z]=$l(a.rgb,d.rgb,p);return new Jn(S,E,P,z,!1)}case"hcl":{const[S,E,P,z]=a.hcl,[j,Z,te,oe]=d.hcl;let le,he;if(isNaN(S)||isNaN(j))isNaN(S)?isNaN(j)?le=NaN:(le=j,P!==1&&P!==0||(he=Z)):(le=S,te!==1&&te!==0||(he=E));else{let $e=j-S;j>S&&$e>180?$e-=360:j<S&&S-j>180&&($e+=360),le=S+p*$e}const[be,Me,ze,rt]=function([$e,ae,we,Ge]){return $e=isNaN($e)?0:$e*Bm,gc([we,Math.cos($e)*ae,Math.sin($e)*ae,Ge])}([le,he??ro(E,Z,p),ro(P,te,p),ro(z,oe,p)]);return new Jn(be,Me,ze,rt,!1)}case"lab":{const[S,E,P,z]=gc($l(a.lab,d.lab,p));return new Jn(S,E,P,z,!1)}}}}Jn.black=new Jn(0,0,0,1),Jn.white=new Jn(1,1,1,1),Jn.transparent=new Jn(0,0,0,0),Jn.red=new Jn(1,0,0,1);class yr{constructor(a,d,p){this.sensitivity=a?d?"variant":"case":d?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,d){return this.collator.compare(a,d)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Mu=["bottom","center","top"];class Oo{constructor(a,d,p,_,S,E){this.text=a,this.image=d,this.scale=p,this.fontStack=_,this.textColor=S,this.verticalAlign=E}}class Hs{constructor(a){this.sections=a}static fromString(a){return new Hs([new Oo(a,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof Hs?a:Hs.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class Cs{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Cs)return a;if(typeof a=="number")return new Cs([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||a.length>4)){for(const d of a)if(typeof d!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new Cs(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,d,p){return new Cs($l(a.values,d.values,p))}}class mi{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const yc=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Is{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Is)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let d=0;d<a.length;d+=2){const p=a[d],_=a[d+1];if(typeof p!="string"||!yc.has(p)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Is(a)}}toString(){return JSON.stringify(this.values)}static interpolate(a,d,p){const _=a.values,S=d.values;if(_.length!==S.length)throw new mi(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${d.toString()}`);const E=[];for(let P=0;P<_.length;P+=2){if(_[P]!==S[P])throw new mi(`Cannot interpolate values containing mismatched anchors. from[${P}]: ${_[P]}, to[${P}]: ${S[P]}`);E.push(_[P]);const[z,j]=_[P+1],[Z,te]=S[P+1];E.push([ro(z,Z,p),ro(j,te,p)])}return new Is(E)}}class _a{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new _a({name:a,available:!1}):null}}class Gs{constructor(a,d,p){this.from=a,this.to=d,this.transition=p}static interpolate(a,d,p){return new Gs(a,d,p)}static parse(a){return a instanceof Gs?a:Array.isArray(a)&&a.length===3&&typeof a[0]=="string"&&typeof a[1]=="string"&&typeof a[2]=="number"?new Gs(a[0],a[1],a[2]):typeof a=="object"&&typeof a.from=="string"&&typeof a.to=="string"&&typeof a.transition=="number"?new Gs(a.from,a.to,a.transition):typeof a=="string"?new Gs(a,a,1):void 0}}function ll(h,a,d,p){return typeof h=="number"&&h>=0&&h<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof d=="number"&&d>=0&&d<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[h,a,d,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[h,a,d,p]:[h,a,d]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mh(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof Gs||h instanceof Jn||h instanceof yr||h instanceof Hs||h instanceof Cs||h instanceof Is||h instanceof _a)return!0;if(Array.isArray(h)){for(const a of h)if(!mh(a))return!1;return!0}if(typeof h=="object"){for(const a in h)if(!mh(h[a]))return!1;return!0}return!1}function _i(h){if(h===null)return Ar;if(typeof h=="string")return _n;if(typeof h=="boolean")return zn;if(typeof h=="number")return Ut;if(h instanceof Jn)return $s;if(h instanceof Gs)return Ds;if(h instanceof yr)return dh;if(h instanceof Hs)return Cu;if(h instanceof Cs)return yd;if(h instanceof Is)return vd;if(h instanceof _a)return Nl;if(Array.isArray(h)){const a=h.length;let d;for(const p of h){const _=_i(p);if(d){if(d===_)continue;d=Yn;break}d=_}return Bi(d||Yn,a)}return si}function zo(h){const a=typeof h;return h===null?"":a==="string"||a==="number"||a==="boolean"?String(h):h instanceof Jn||h instanceof Gs||h instanceof Hs||h instanceof Cs||h instanceof Is||h instanceof _a?h.toString():JSON.stringify(h)}class Hl{constructor(a,d){this.type=a,this.value=d}static parse(a,d){if(a.length!==2)return d.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!mh(a[1]))return d.error("invalid value");const p=a[1];let _=_i(p);const S=d.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Hl(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Su={string:_n,number:Ut,boolean:zn,object:si};class Ba{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");let p,_=1;const S=a[0];if(S==="array"){let P,z;if(a.length>2){const j=a[1];if(typeof j!="string"||!(j in Su)||j==="object")return d.error('The item type argument of "array" must be one of string, number, boolean',1);P=Su[j],_++}else P=Yn;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return d.error('The length argument to "array" must be a positive integer literal',2);z=a[2],_++}p=Bi(P,z)}else{if(!Su[S])throw new Error(`Types doesn't contain name = ${S}`);p=Su[S]}const E=[];for(;_<a.length;_++){const P=d.parse(a[_],_,Yn);if(!P)return null;E.push(P)}return new Ba(p,E)}evaluate(a){for(let d=0;d<this.args.length;d++){const p=this.args[d].evaluate(a);if(!fh(this.type,_i(p)))return p;if(d===this.args.length-1)throw new mi(`Expected value to be of type ${ai(this.type)}, but found ${ai(_i(p))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const gh={"to-boolean":zn,"to-color":$s,"to-number":Ut,"to-string":_n};class Or{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const p=a[0];if(!gh[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&a.length!==2)return d.error("Expected one argument.");const _=gh[p],S=[];for(let E=1;E<a.length;E++){const P=d.parse(a[E],E,Yn);if(!P)return null;S.push(P)}return new Or(_,S)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let d,p;for(const _ of this.args){if(d=_.evaluate(a),p=null,d instanceof Jn)return d;if(typeof d=="string"){const S=a.parseColor(d);if(S)return S}else if(Array.isArray(d)&&(p=d.length<3||d.length>4?`Invalid rgba value ${JSON.stringify(d)}: expected an array containing either three or four numeric values.`:ll(d[0],d[1],d[2],d[3]),!p))return new Jn(d[0]/255,d[1]/255,d[2]/255,d[3])}throw new mi(p||`Could not parse color from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"padding":{let d;for(const p of this.args){d=p.evaluate(a);const _=Cs.parse(d);if(_)return _}throw new mi(`Could not parse padding from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"variableAnchorOffsetCollection":{let d;for(const p of this.args){d=p.evaluate(a);const _=Is.parse(d);if(_)return _}throw new mi(`Could not parse variableAnchorOffsetCollection from value '${typeof d=="string"?d:JSON.stringify(d)}'`)}case"number":{let d=null;for(const p of this.args){if(d=p.evaluate(a),d===null)return 0;const _=Number(d);if(!isNaN(_))return _}throw new mi(`Could not convert ${JSON.stringify(d)} to number.`)}case"formatted":return Hs.fromString(zo(this.args[0].evaluate(a)));case"resolvedImage":return _a.fromString(zo(this.args[0].evaluate(a)));case"projectionDefinition":return this.args[0].evaluate(a);default:return zo(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const ap=["Unknown","Point","LineString","Polygon"];class Er{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ap[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let d=this._parseColorCache[a];return d||(d=this._parseColorCache[a]=Jn.parse(a)),d}}class Tn{constructor(a,d,p=[],_,S=new Vr,E=[]){this.registry=a,this.path=p,this.key=p.map(P=>`[${P}]`).join(""),this.scope=S,this.errors=E,this.expectedType=_,this._isConstant=d}parse(a,d,p,_,S={}){return d?this.concat(d,p,_)._parse(a,S):this._parse(a,S)}_parse(a,d){function p(_,S,E){return E==="assert"?new Ba(S,[_]):E==="coerce"?new Or(S,[_]):_}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=a[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let E=S.parse(a,this);if(!E)return null;if(this.expectedType){const P=this.expectedType,z=E.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||z.kind!=="value")if(P.kind!=="projectionDefinition"||z.kind!=="string"&&z.kind!=="array")if(P.kind!=="color"&&P.kind!=="formatted"&&P.kind!=="resolvedImage"||z.kind!=="value"&&z.kind!=="string")if(P.kind!=="padding"||z.kind!=="value"&&z.kind!=="number"&&z.kind!=="array")if(P.kind!=="variableAnchorOffsetCollection"||z.kind!=="value"&&z.kind!=="array"){if(this.checkSubtype(P,z))return null}else E=p(E,P,d.typeAnnotation||"coerce");else E=p(E,P,d.typeAnnotation||"coerce");else E=p(E,P,d.typeAnnotation||"coerce");else E=p(E,P,d.typeAnnotation||"coerce");else E=p(E,P,d.typeAnnotation||"assert")}if(!(E instanceof Hl)&&E.type.kind!=="resolvedImage"&&this._isConstant(E)){const P=new Er;try{E=new Hl(E.type,E.evaluate(P))}catch(z){return this.error(z.message),null}}return E}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,d,p){const _=typeof a=="number"?this.path.concat(a):this.path,S=p?this.scope.concat(p):this.scope;return new Tn(this.registry,this._isConstant,_,d||null,S,this.errors)}error(a,...d){const p=`${this.key}${d.map(_=>`[${_}]`).join("")}`;this.errors.push(new xr(p,a))}checkSubtype(a,d){const p=fh(a,d);return p&&this.error(p),p}}class jr{constructor(a,d){this.type=d.type,this.bindings=[].concat(a),this.result=d}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const d of this.bindings)a(d[1]);a(this.result)}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const p=[];for(let S=1;S<a.length-1;S+=2){const E=a[S];if(typeof E!="string")return d.error(`Expected string, but found ${typeof E} instead.`,S);if(/[^a-zA-Z0-9_]/.test(E))return d.error("Variable names must contain only alphanumeric characters or '_'.",S);const P=d.parse(a[S+1],S+1);if(!P)return null;p.push([E,P])}const _=d.parse(a[a.length-1],a.length-1,d.expectedType,p);return _?new jr(p,_):null}outputDefined(){return this.result.outputDefined()}}class br{constructor(a,d){this.type=d.type,this.name=a,this.boundExpression=d}static parse(a,d){if(a.length!==2||typeof a[1]!="string")return d.error("'var' expression requires exactly one string literal argument.");const p=a[1];return d.scope.has(p)?new br(p,d.scope.get(p)):d.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class yh{constructor(a,d,p){this.type=a,this.index=d,this.input=p}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=d.parse(a[1],1,Ut),_=d.parse(a[2],2,Bi(d.expectedType||Yn));return p&&_?new yh(_.type.itemType,p,_):null}evaluate(a){const d=this.index.evaluate(a),p=this.input.evaluate(a);if(d<0)throw new mi(`Array index out of bounds: ${d} < 0.`);if(d>=p.length)throw new mi(`Array index out of bounds: ${d} > ${p.length-1}.`);if(d!==Math.floor(d))throw new mi(`Array index must be an integer, but found ${d} instead.`);return p[d]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}}class io{constructor(a,d){this.type=zn,this.needle=a,this.haystack=d}static parse(a,d){if(a.length!==3)return d.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const p=d.parse(a[1],1,Yn),_=d.parse(a[2],2,Yn);return p&&_?_d(p.type,[zn,_n,Ut,Ar,Yn])?new io(p,_):d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ai(p.type)} instead`):null}evaluate(a){const d=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!p)return!1;if(!no(d,["boolean","string","number","null"]))throw new mi(`Expected first argument to be of type boolean, string, number or null, but found ${ai(_i(d))} instead.`);if(!no(p,["string","array"]))throw new mi(`Expected second argument to be of type array or string, but found ${ai(_i(p))} instead.`);return p.indexOf(d)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}}class vc{constructor(a,d,p){this.type=Ut,this.needle=a,this.haystack=d,this.fromIndex=p}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=d.parse(a[1],1,Yn),_=d.parse(a[2],2,Yn);if(!p||!_)return null;if(!_d(p.type,[zn,_n,Ut,Ar,Yn]))return d.error(`Expected first argument to be of type boolean, string, number or null, but found ${ai(p.type)} instead`);if(a.length===4){const S=d.parse(a[3],3,Ut);return S?new vc(p,_,S):null}return new vc(p,_)}evaluate(a){const d=this.needle.evaluate(a),p=this.haystack.evaluate(a);if(!no(d,["boolean","string","number","null"]))throw new mi(`Expected first argument to be of type boolean, string, number or null, but found ${ai(_i(d))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(a)),no(p,["string"])){const S=p.indexOf(d,_);return S===-1?-1:[...p.slice(0,S)].length}if(no(p,["array"]))return p.indexOf(d,_);throw new mi(`Expected second argument to be of type array or string, but found ${ai(_i(p))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}}class Ad{constructor(a,d,p,_,S,E){this.inputType=a,this.type=d,this.input=p,this.cases=_,this.outputs=S,this.otherwise=E}static parse(a,d){if(a.length<5)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return d.error("Expected an even number of arguments.");let p,_;d.expectedType&&d.expectedType.kind!=="value"&&(_=d.expectedType);const S={},E=[];for(let j=2;j<a.length-1;j+=2){let Z=a[j];const te=a[j+1];Array.isArray(Z)||(Z=[Z]);const oe=d.concat(j);if(Z.length===0)return oe.error("Expected at least one branch label.");for(const he of Z){if(typeof he!="number"&&typeof he!="string")return oe.error("Branch labels must be numbers or strings.");if(typeof he=="number"&&Math.abs(he)>Number.MAX_SAFE_INTEGER)return oe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof he=="number"&&Math.floor(he)!==he)return oe.error("Numeric branch labels must be integer values.");if(p){if(oe.checkSubtype(p,_i(he)))return null}else p=_i(he);if(S[String(he)]!==void 0)return oe.error("Branch labels must be unique.");S[String(he)]=E.length}const le=d.parse(te,j,_);if(!le)return null;_=_||le.type,E.push(le)}const P=d.parse(a[1],1,Yn);if(!P)return null;const z=d.parse(a[a.length-1],a.length-1,_);return z?P.type.kind!=="value"&&d.concat(1).checkSubtype(p,P.type)?null:new Ad(p,_,P,S,E,z):null}evaluate(a){const d=this.input.evaluate(a);return(_i(d)===this.inputType&&this.outputs[this.cases[d]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}}class wd{constructor(a,d,p){this.type=a,this.branches=d,this.otherwise=p}static parse(a,d){if(a.length<4)return d.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return d.error("Expected an odd number of arguments.");let p;d.expectedType&&d.expectedType.kind!=="value"&&(p=d.expectedType);const _=[];for(let E=1;E<a.length-1;E+=2){const P=d.parse(a[E],E,zn);if(!P)return null;const z=d.parse(a[E+1],E+1,p);if(!z)return null;_.push([P,z]),p=p||z.type}const S=d.parse(a[a.length-1],a.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new wd(p,_,S)}evaluate(a){for(const[d,p]of this.branches)if(d.evaluate(a))return p.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[d,p]of this.branches)a(d),a(p);a(this.otherwise)}outputDefined(){return this.branches.every(([a,d])=>d.outputDefined())&&this.otherwise.outputDefined()}}class Eu{constructor(a,d,p,_){this.type=a,this.input=d,this.beginIndex=p,this.endIndex=_}static parse(a,d){if(a.length<=2||a.length>=5)return d.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const p=d.parse(a[1],1,Yn),_=d.parse(a[2],2,Ut);if(!p||!_)return null;if(!_d(p.type,[Bi(Yn),_n,Yn]))return d.error(`Expected first argument to be of type array or string, but found ${ai(p.type)} instead`);if(a.length===4){const S=d.parse(a[3],3,Ut);return S?new Eu(p.type,p,_,S):null}return new Eu(p.type,p,_)}evaluate(a){const d=this.input.evaluate(a),p=this.beginIndex.evaluate(a);let _;if(this.endIndex&&(_=this.endIndex.evaluate(a)),no(d,["string"]))return[...d].slice(p,_).join("");if(no(d,["array"]))return d.slice(p,_);throw new mi(`Expected first argument to be of type array or string, but found ${ai(_i(d))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}}function vh(h,a){const d=h.length-1;let p,_,S=0,E=d,P=0;for(;S<=E;)if(P=Math.floor((S+E)/2),p=h[P],_=h[P+1],p<=a){if(P===d||a<_)return P;S=P+1}else{if(!(p>a))throw new mi("Input is not a number.");E=P-1}return 0}class Vi{constructor(a,d,p){this.type=a,this.input=d,this.labels=[],this.outputs=[];for(const[_,S]of p)this.labels.push(_),this.outputs.push(S)}static parse(a,d){if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");const p=d.parse(a[1],1,Ut);if(!p)return null;const _=[];let S=null;d.expectedType&&d.expectedType.kind!=="value"&&(S=d.expectedType);for(let E=1;E<a.length;E+=2){const P=E===1?-1/0:a[E],z=a[E+1],j=E,Z=E+1;if(typeof P!="number")return d.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(_.length&&_[_.length-1][0]>=P)return d.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const te=d.parse(z,Z,S);if(!te)return null;S=S||te.type,_.push([P,te])}return new Vi(S,p,_)}evaluate(a){const d=this.labels,p=this.outputs;if(d.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=d[0])return p[0].evaluate(a);const S=d.length;return _>=d[S-1]?p[S-1].evaluate(a):p[vh(d,_)].evaluate(a)}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Cd(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Fo,Tu,ds=function(){if(Tu)return Fo;function h(a,d,p,_){this.cx=3*a,this.bx=3*(p-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*d,this.by=3*(_-d)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=d,this.p2x=p,this.p2y=_}return Tu=1,Fo=h,h.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,d){if(d===void 0&&(d=1e-6),a<0)return 0;if(a>1)return 1;for(var p=a,_=0;_<8;_++){var S=this.sampleCurveX(p)-a;if(Math.abs(S)<d)return p;var E=this.sampleCurveDerivativeX(p);if(Math.abs(E)<1e-6)break;p-=S/E}var P=0,z=1;for(p=a,_=0;_<20&&(S=this.sampleCurveX(p),!(Math.abs(S-a)<d));_++)a>S?P=p:z=p,p=.5*(z-P)+P;return p},solve:function(a,d){return this.sampleCurveY(this.solveCurveX(a,d))}},Fo}(),Zs=Cd(ds);class Ws{constructor(a,d,p,_,S){this.type=a,this.operator=d,this.interpolation=p,this.input=_,this.labels=[],this.outputs=[];for(const[E,P]of S)this.labels.push(E),this.outputs.push(P)}static interpolationFactor(a,d,p,_){let S=0;if(a.name==="exponential")S=Pu(d,a.base,p,_);else if(a.name==="linear")S=Pu(d,1,p,_);else if(a.name==="cubic-bezier"){const E=a.controlPoints;S=new Zs(E[0],E[1],E[2],E[3]).solve(Pu(d,1,p,_))}return S}static parse(a,d){let[p,_,S,...E]=a;if(!Array.isArray(_)||_.length===0)return d.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const j=_[1];if(typeof j!="number")return d.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:j}}else{if(_[0]!=="cubic-bezier")return d.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const j=_.slice(1);if(j.length!==4||j.some(Z=>typeof Z!="number"||Z<0||Z>1))return d.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:j}}}if(a.length-1<4)return d.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return d.error("Expected an even number of arguments.");if(S=d.parse(S,2,Ut),!S)return null;const P=[];let z=null;p==="interpolate-hcl"||p==="interpolate-lab"?z=$s:d.expectedType&&d.expectedType.kind!=="value"&&(z=d.expectedType);for(let j=0;j<E.length;j+=2){const Z=E[j],te=E[j+1],oe=j+3,le=j+4;if(typeof Z!="number")return d.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oe);if(P.length&&P[P.length-1][0]>=Z)return d.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',oe);const he=d.parse(te,le,z);if(!he)return null;z=z||he.type,P.push([Z,he])}return Vl(z,Ut)||Vl(z,Ds)||Vl(z,$s)||Vl(z,yd)||Vl(z,vd)||Vl(z,Bi(Ut))?new Ws(z,p,_,S,P):d.error(`Type ${ai(z)} is not interpolatable.`)}evaluate(a){const d=this.labels,p=this.outputs;if(d.length===1)return p[0].evaluate(a);const _=this.input.evaluate(a);if(_<=d[0])return p[0].evaluate(a);const S=d.length;if(_>=d[S-1])return p[S-1].evaluate(a);const E=vh(d,_),P=Ws.interpolationFactor(this.interpolation,_,d[E],d[E+1]),z=p[E].evaluate(a),j=p[E+1].evaluate(a);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ro(z,j,P);case"color":return Jn.interpolate(z,j,P);case"padding":return Cs.interpolate(z,j,P);case"variableAnchorOffsetCollection":return Is.interpolate(z,j,P);case"array":return $l(z,j,P);case"projectionDefinition":return Gs.interpolate(z,j,P)}case"interpolate-hcl":return Jn.interpolate(z,j,P,"hcl");case"interpolate-lab":return Jn.interpolate(z,j,P,"lab")}}eachChild(a){a(this.input);for(const d of this.outputs)a(d)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Pu(h,a,d,p){const _=p-d,S=h-d;return _===0?0:a===1?S/_:(Math.pow(a,S)-1)/(Math.pow(a,_)-1)}const Xr={color:Jn.interpolate,number:ro,padding:Cs.interpolate,variableAnchorOffsetCollection:Is.interpolate,array:$l};class _c{constructor(a,d){this.type=a,this.args=d}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");let p=null;const _=d.expectedType;_&&_.kind!=="value"&&(p=_);const S=[];for(const P of a.slice(1)){const z=d.parse(P,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!z)return null;p=p||z.type,S.push(z)}if(!p)throw new Error("No output type");const E=_&&S.some(P=>fh(_,P.type));return new _c(E?Yn:p,S)}evaluate(a){let d,p=null,_=0;for(const S of this.args)if(_++,p=S.evaluate(a),p&&p instanceof _a&&!p.available&&(d||(d=p.name),p=null,_===this.args.length&&(p=d)),p!==null)break;return p}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}function _h(h,a){return h==="=="||h==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function Id(h,a,d,p){return p.compare(a,d)===0}function fs(h,a,d){const p=h!=="=="&&h!=="!=";return class ML{constructor(S,E,P){this.type=zn,this.lhs=S,this.rhs=E,this.collator=P,this.hasUntypedArgument=S.type.kind==="value"||E.type.kind==="value"}static parse(S,E){if(S.length!==3&&S.length!==4)return E.error("Expected two or three arguments.");const P=S[0];let z=E.parse(S[1],1,Yn);if(!z)return null;if(!_h(P,z.type))return E.concat(1).error(`"${P}" comparisons are not supported for type '${ai(z.type)}'.`);let j=E.parse(S[2],2,Yn);if(!j)return null;if(!_h(P,j.type))return E.concat(2).error(`"${P}" comparisons are not supported for type '${ai(j.type)}'.`);if(z.type.kind!==j.type.kind&&z.type.kind!=="value"&&j.type.kind!=="value")return E.error(`Cannot compare types '${ai(z.type)}' and '${ai(j.type)}'.`);p&&(z.type.kind==="value"&&j.type.kind!=="value"?z=new Ba(j.type,[z]):z.type.kind!=="value"&&j.type.kind==="value"&&(j=new Ba(z.type,[j])));let Z=null;if(S.length===4){if(z.type.kind!=="string"&&j.type.kind!=="string"&&z.type.kind!=="value"&&j.type.kind!=="value")return E.error("Cannot use collator to compare non-string types.");if(Z=E.parse(S[3],3,dh),!Z)return null}return new ML(z,j,Z)}evaluate(S){const E=this.lhs.evaluate(S),P=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const z=_i(E),j=_i(P);if(z.kind!==j.kind||z.kind!=="string"&&z.kind!=="number")throw new mi(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${z.kind}, ${j.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const z=_i(E),j=_i(P);if(z.kind!=="string"||j.kind!=="string")return a(S,E,P)}return this.collator?d(S,E,P,this.collator.evaluate(S)):a(S,E,P)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Md=fs("==",function(h,a,d){return a===d},Id),sa=fs("!=",function(h,a,d){return a!==d},function(h,a,d,p){return!Id(0,a,d,p)}),nv=fs("<",function(h,a,d){return a<d},function(h,a,d,p){return p.compare(a,d)<0}),bh=fs(">",function(h,a,d){return a>d},function(h,a,d,p){return p.compare(a,d)>0}),so=fs("<=",function(h,a,d){return a<=d},function(h,a,d,p){return p.compare(a,d)<=0}),aa=fs(">=",function(h,a,d){return a>=d},function(h,a,d,p){return p.compare(a,d)>=0});class ku{constructor(a,d,p){this.type=dh,this.locale=p,this.caseSensitive=a,this.diacriticSensitive=d}static parse(a,d){if(a.length!==2)return d.error("Expected one argument.");const p=a[1];if(typeof p!="object"||Array.isArray(p))return d.error("Collator options argument must be an object.");const _=d.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,zn);if(!_)return null;const S=d.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,zn);if(!S)return null;let E=null;return p.locale&&(E=d.parse(p.locale,1,_n),!E)?null:new ku(_,S,E)}evaluate(a){return new yr(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}class qr{constructor(a,d,p,_,S){this.type=_n,this.number=a,this.locale=d,this.currency=p,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(a,d){if(a.length!==3)return d.error("Expected two arguments.");const p=d.parse(a[1],1,Ut);if(!p)return null;const _=a[2];if(typeof _!="object"||Array.isArray(_))return d.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=d.parse(_.locale,1,_n),!S))return null;let E=null;if(_.currency&&(E=d.parse(_.currency,1,_n),!E))return null;let P=null;if(_["min-fraction-digits"]&&(P=d.parse(_["min-fraction-digits"],1,Ut),!P))return null;let z=null;return _["max-fraction-digits"]&&(z=d.parse(_["max-fraction-digits"],1,Ut),!z)?null:new qr(p,S,E,P,z)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}}class ao{constructor(a){this.type=Cu,this.sections=a}static parse(a,d){if(a.length<2)return d.error("Expected at least one argument.");const p=a[1];if(!Array.isArray(p)&&typeof p=="object")return d.error("First argument must be an image or text section.");const _=[];let S=!1;for(let E=1;E<=a.length-1;++E){const P=a[E];if(S&&typeof P=="object"&&!Array.isArray(P)){S=!1;let z=null;if(P["font-scale"]&&(z=d.parse(P["font-scale"],1,Ut),!z))return null;let j=null;if(P["text-font"]&&(j=d.parse(P["text-font"],1,Bi(_n)),!j))return null;let Z=null;if(P["text-color"]&&(Z=d.parse(P["text-color"],1,$s),!Z))return null;let te=null;if(P["vertical-align"]){if(typeof P["vertical-align"]=="string"&&!Mu.includes(P["vertical-align"]))return d.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${P["vertical-align"]}' instead.`);if(te=d.parse(P["vertical-align"],1,_n),!te)return null}const oe=_[_.length-1];oe.scale=z,oe.font=j,oe.textColor=Z,oe.verticalAlign=te}else{const z=d.parse(a[E],1,Yn);if(!z)return null;const j=z.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return d.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:z,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ao(_)}evaluate(a){return new Hs(this.sections.map(d=>{const p=d.content.evaluate(a);return _i(p)===Nl?new Oo("",p,null,null,null,d.verticalAlign?d.verticalAlign.evaluate(a):null):new Oo(zo(p),null,d.scale?d.scale.evaluate(a):null,d.font?d.font.evaluate(a).join(","):null,d.textColor?d.textColor.evaluate(a):null,d.verticalAlign?d.verticalAlign.evaluate(a):null)}))}eachChild(a){for(const d of this.sections)a(d.content),d.scale&&a(d.scale),d.font&&a(d.font),d.textColor&&a(d.textColor),d.verticalAlign&&a(d.verticalAlign)}outputDefined(){return!1}}class Lu{constructor(a){this.type=Nl,this.input=a}static parse(a,d){if(a.length!==2)return d.error("Expected two arguments.");const p=d.parse(a[1],1,_n);return p?new Lu(p):d.error("No image name provided.")}evaluate(a){const d=this.input.evaluate(a),p=_a.fromString(d);return p&&a.availableImages&&(p.available=a.availableImages.indexOf(d)>-1),p}eachChild(a){a(this.input)}outputDefined(){return!1}}class op{constructor(a){this.type=Ut,this.input=a}static parse(a,d){if(a.length!==2)return d.error(`Expected 1 argument, but found ${a.length-1} instead.`);const p=d.parse(a[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?d.error(`Expected argument of type string or array, but found ${ai(p.type)} instead.`):new op(p):null}evaluate(a){const d=this.input.evaluate(a);if(typeof d=="string")return[...d].length;if(Array.isArray(d))return d.length;throw new mi(`Expected value to be of type string or array, but found ${ai(_i(d))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}}const Na=8192;function rv(h,a){const d=(180+h[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,a.z);return[Math.round(d*_*Na),Math.round(p*_*Na)]}function lp(h,a){const d=Math.pow(2,a.z);return[(_=(h[0]/Na+a.x)/d,360*_-180),(p=(h[1]/Na+a.y)/d,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,_}function Gl(h,a){h[0]=Math.min(h[0],a[0]),h[1]=Math.min(h[1],a[1]),h[2]=Math.max(h[2],a[0]),h[3]=Math.max(h[3],a[1])}function bc(h,a){return!(h[0]<=a[0]||h[2]>=a[2]||h[1]<=a[1]||h[3]>=a[3])}function xh(h,a,d){const p=h[0]-a[0],_=h[1]-a[1],S=h[0]-d[0],E=h[1]-d[1];return p*E-S*_==0&&p*S<=0&&_*E<=0}function Bo(h,a,d,p){return(_=[p[0]-d[0],p[1]-d[1]])[0]*(S=[a[0]-h[0],a[1]-h[1]])[1]-_[1]*S[0]!=0&&!(!cp(h,a,d,p)||!cp(d,p,h,a));var _,S}function iv(h,a,d){for(const p of d)for(let _=0;_<p.length-1;++_)if(Bo(h,a,p[_],p[_+1]))return!0;return!1}function Zl(h,a,d=!1){let p=!1;for(const P of a)for(let z=0;z<P.length-1;z++){if(xh(h,P[z],P[z+1]))return d;(S=P[z])[1]>(_=h)[1]!=(E=P[z+1])[1]>_[1]&&_[0]<(E[0]-S[0])*(_[1]-S[1])/(E[1]-S[1])+S[0]&&(p=!p)}var _,S,E;return p}function Um(h,a){for(const d of a)if(Zl(h,d))return!0;return!1}function Sd(h,a){for(const d of h)if(!Zl(d,a))return!1;for(let d=0;d<h.length-1;++d)if(iv(h[d],h[d+1],a))return!1;return!0}function up(h,a){for(const d of a)if(Sd(h,d))return!0;return!1}function cp(h,a,d,p){const _=p[0]-d[0],S=p[1]-d[1],E=(h[0]-d[0])*S-_*(h[1]-d[1]),P=(a[0]-d[0])*S-_*(a[1]-d[1]);return E>0&&P<0||E<0&&P>0}function hp(h,a,d){const p=[];for(let _=0;_<h.length;_++){const S=[];for(let E=0;E<h[_].length;E++){const P=rv(h[_][E],d);Gl(a,P),S.push(P)}p.push(S)}return p}function Ah(h,a,d){const p=[];for(let _=0;_<h.length;_++){const S=hp(h[_],a,d);p.push(S)}return p}function wh(h,a,d,p){if(h[0]<d[0]||h[0]>d[2]){const _=.5*p;let S=h[0]-d[0]>_?-p:d[0]-h[0]>_?p:0;S===0&&(S=h[0]-d[2]>_?-p:d[2]-h[0]>_?p:0),h[0]+=S}Gl(a,h)}function dp(h,a,d,p){const _=Math.pow(2,p.z)*Na,S=[p.x*Na,p.y*Na],E=[];for(const P of h)for(const z of P){const j=[z.x+S[0],z.y+S[1]];wh(j,a,d,_),E.push(j)}return E}function fp(h,a,d,p){const _=Math.pow(2,p.z)*Na,S=[p.x*Na,p.y*Na],E=[];for(const z of h){const j=[];for(const Z of z){const te=[Z.x+S[0],Z.y+S[1]];Gl(a,te),j.push(te)}E.push(j)}if(a[2]-a[0]<=_/2){(P=a)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const z of E)for(const j of z)wh(j,a,d,_)}var P;return E}class ns{constructor(a,d){this.type=zn,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(mh(a[1])){const p=a[1];if(p.type==="FeatureCollection"){const _=[];for(const S of p.features){const{type:E,coordinates:P}=S.geometry;E==="Polygon"&&_.push(P),E==="MultiPolygon"&&_.push(...P)}if(_.length)return new ns(p,{type:"MultiPolygon",coordinates:_})}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ns(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new ns(p,p)}return d.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(d,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=d.canonicalID();if(p.type==="Polygon"){const P=hp(p.coordinates,S,E),z=dp(d.geometry(),_,S,E);if(!bc(_,S))return!1;for(const j of z)if(!Zl(j,P))return!1}if(p.type==="MultiPolygon"){const P=Ah(p.coordinates,S,E),z=dp(d.geometry(),_,S,E);if(!bc(_,S))return!1;for(const j of z)if(!Um(j,P))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(d,p){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],E=d.canonicalID();if(p.type==="Polygon"){const P=hp(p.coordinates,S,E),z=fp(d.geometry(),_,S,E);if(!bc(_,S))return!1;for(const j of z)if(!Sd(j,P))return!1}if(p.type==="MultiPolygon"){const P=Ah(p.coordinates,S,E),z=fp(d.geometry(),_,S,E);if(!bc(_,S))return!1;for(const j of z)if(!up(j,P))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ed=class{constructor(h=[],a=(d,p)=>d<p?-1:d>p?1:0){if(this.data=h,this.length=this.data.length,this.compare=a,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:a,compare:d}=this,p=a[h];for(;h>0;){const _=h-1>>1,S=a[_];if(d(p,S)>=0)break;a[h]=S,h=_}a[h]=p}_down(h){const{data:a,compare:d}=this,p=this.length>>1,_=a[h];for(;h<p;){let S=1+(h<<1);const E=S+1;if(E<this.length&&d(a[E],a[S])<0&&(S=E),d(a[S],_)>=0)break;a[h]=a[S],h=S}a[h]=_}};function Wl(h,a,d=0,p=h.length-1,_=$m){for(;p>d;){if(p-d>600){const z=p-d+1,j=a-d+1,Z=Math.log(z),te=.5*Math.exp(2*Z/3),oe=.5*Math.sqrt(Z*te*(z-te)/z)*(j-z/2<0?-1:1);Wl(h,a,Math.max(d,Math.floor(a-j*te/z+oe)),Math.min(p,Math.floor(a+(z-j)*te/z+oe)),_)}const S=h[a];let E=d,P=p;for(xc(h,d,a),_(h[p],S)>0&&xc(h,d,p);E<P;){for(xc(h,E,P),E++,P--;_(h[E],S)<0;)E++;for(;_(h[P],S)>0;)P--}_(h[d],S)===0?xc(h,d,P):(P++,xc(h,P,p)),P<=a&&(d=P+1),a<=P&&(p=P-1)}}function xc(h,a,d){const p=h[a];h[a]=h[d],h[d]=p}function $m(h,a){return h<a?-1:h>a?1:0}function Td(h,a){if(h.length<=1)return[h];const d=[];let p,_;for(const S of h){const E=Gm(S);E!==0&&(S.area=Math.abs(E),_===void 0&&(_=E<0),_===E<0?(p&&d.push(p),p=[S]):p.push(S))}if(p&&d.push(p),a>1)for(let S=0;S<d.length;S++)d[S].length<=a||(Wl(d[S],a,1,d[S].length-1,Hm),d[S]=d[S].slice(0,a));return d}function Hm(h,a){return a.area-h.area}function Gm(h){let a=0;for(let d,p,_=0,S=h.length,E=S-1;_<S;E=_++)d=h[_],p=h[E],a+=(p.x-d.x)*(d.y+p.y);return a}const Zm=1/298.257223563,Wm=Zm*(2-Zm),ql=Math.PI/180;class Pd{constructor(a){const d=6378.137*ql*1e3,p=Math.cos(a*ql),_=1/(1-Wm*(1-p*p)),S=Math.sqrt(_);this.kx=d*S*p,this.ky=d*S*_*(1-Wm)}distance(a,d){const p=this.wrap(a[0]-d[0])*this.kx,_=(a[1]-d[1])*this.ky;return Math.sqrt(p*p+_*_)}pointOnLine(a,d){let p,_,S,E,P=1/0;for(let z=0;z<a.length-1;z++){let j=a[z][0],Z=a[z][1],te=this.wrap(a[z+1][0]-j)*this.kx,oe=(a[z+1][1]-Z)*this.ky,le=0;te===0&&oe===0||(le=(this.wrap(d[0]-j)*this.kx*te+(d[1]-Z)*this.ky*oe)/(te*te+oe*oe),le>1?(j=a[z+1][0],Z=a[z+1][1]):le>0&&(j+=te/this.kx*le,Z+=oe/this.ky*le)),te=this.wrap(d[0]-j)*this.kx,oe=(d[1]-Z)*this.ky;const he=te*te+oe*oe;he<P&&(P=he,p=j,_=Z,S=z,E=le)}return{point:[p,_],index:S,t:Math.max(0,Math.min(1,E))}}wrap(a){for(;a<-180;)a+=360;for(;a>180;)a-=360;return a}}function qm(h,a){return a[0]-h[0]}function Ac(h){return h[1]-h[0]+1}function No(h,a){return h[1]>=h[0]&&h[1]<a}function oo(h,a){if(h[0]>h[1])return[null,null];const d=Ac(h);if(a){if(d===2)return[h,null];const _=Math.floor(d/2);return[[h[0],h[0]+_],[h[0]+_,h[1]]]}if(d===1)return[h,null];const p=Math.floor(d/2)-1;return[[h[0],h[0]+p],[h[0]+p+1,h[1]]]}function wc(h,a){if(!No(a,h.length))return[1/0,1/0,-1/0,-1/0];const d=[1/0,1/0,-1/0,-1/0];for(let p=a[0];p<=a[1];++p)Gl(d,h[p]);return d}function pp(h){const a=[1/0,1/0,-1/0,-1/0];for(const d of h)for(const p of d)Gl(a,p);return a}function Km(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function mp(h,a,d){if(!Km(h)||!Km(a))return NaN;let p=0,_=0;return h[2]<a[0]&&(p=a[0]-h[2]),h[0]>a[2]&&(p=h[0]-a[2]),h[1]>a[3]&&(_=h[1]-a[3]),h[3]<a[1]&&(_=a[1]-h[3]),d.distance([0,0],[p,_])}function sr(h,a,d){const p=d.pointOnLine(a,h);return d.distance(h,p.point)}function ba(h,a,d,p,_){const S=Math.min(sr(h,[d,p],_),sr(a,[d,p],_)),E=Math.min(sr(d,[h,a],_),sr(p,[h,a],_));return Math.min(S,E)}function Ym(h,a,d,p,_){if(!No(a,h.length)||!No(p,d.length))return 1/0;let S=1/0;for(let E=a[0];E<a[1];++E){const P=h[E],z=h[E+1];for(let j=p[0];j<p[1];++j){const Z=d[j],te=d[j+1];if(Bo(P,z,Z,te))return 0;S=Math.min(S,ba(P,z,Z,te,_))}}return S}function sv(h,a,d,p,_){if(!No(a,h.length)||!No(p,d.length))return NaN;let S=1/0;for(let E=a[0];E<=a[1];++E)for(let P=p[0];P<=p[1];++P)if(S=Math.min(S,_.distance(h[E],d[P])),S===0)return S;return S}function av(h,a,d){if(Zl(h,a,!0))return 0;let p=1/0;for(const _ of a){const S=_[0],E=_[_.length-1];if(S!==E&&(p=Math.min(p,sr(h,[E,S],d)),p===0))return p;const P=d.pointOnLine(_,h);if(p=Math.min(p,d.distance(h,P.point)),p===0)return p}return p}function ov(h,a,d,p){if(!No(a,h.length))return NaN;for(let S=a[0];S<=a[1];++S)if(Zl(h[S],d,!0))return 0;let _=1/0;for(let S=a[0];S<a[1];++S){const E=h[S],P=h[S+1];for(const z of d)for(let j=0,Z=z.length,te=Z-1;j<Z;te=j++){const oe=z[te],le=z[j];if(Bo(E,P,oe,le))return 0;_=Math.min(_,ba(E,P,oe,le,p))}}return _}function Xm(h,a){for(const d of h)for(const p of d)if(Zl(p,a,!0))return!0;return!1}function lv(h,a,d,p=1/0){const _=pp(h),S=pp(a);if(p!==1/0&&mp(_,S,d)>=p)return p;if(bc(_,S)){if(Xm(h,a))return 0}else if(Xm(a,h))return 0;let E=1/0;for(const P of h)for(let z=0,j=P.length,Z=j-1;z<j;Z=z++){const te=P[Z],oe=P[z];for(const le of a)for(let he=0,be=le.length,Me=be-1;he<be;Me=he++){const ze=le[Me],rt=le[he];if(Bo(te,oe,ze,rt))return 0;E=Math.min(E,ba(te,oe,ze,rt,d))}}return E}function Du(h,a,d,p,_,S){if(!S)return;const E=mp(wc(p,S),_,d);E<a&&h.push([E,S,[0,0]])}function mt(h,a,d,p,_,S,E){if(!S||!E)return;const P=mp(wc(p,S),wc(_,E),d);P<a&&h.push([P,S,E])}function Gt(h,a,d,p,_=1/0){let S=Math.min(p.distance(h[0],d[0][0]),_);if(S===0)return S;const E=new Ed([[0,[0,h.length-1],[0,0]]],qm),P=pp(d);for(;E.length>0;){const z=E.pop();if(z[0]>=S)continue;const j=z[1],Z=a?50:100;if(Ac(j)<=Z){if(!No(j,h.length))return NaN;if(a){const te=ov(h,j,d,p);if(isNaN(te)||te===0)return te;S=Math.min(S,te)}else for(let te=j[0];te<=j[1];++te){const oe=av(h[te],d,p);if(S=Math.min(S,oe),S===0)return 0}}else{const te=oo(j,a);Du(E,S,p,h,P,te[0]),Du(E,S,p,h,P,te[1])}}return S}function Rt(h,a,d,p,_,S=1/0){let E=Math.min(S,_.distance(h[0],d[0]));if(E===0)return E;const P=new Ed([[0,[0,h.length-1],[0,d.length-1]]],qm);for(;P.length>0;){const z=P.pop();if(z[0]>=E)continue;const j=z[1],Z=z[2],te=a?50:100,oe=p?50:100;if(Ac(j)<=te&&Ac(Z)<=oe){if(!No(j,h.length)&&No(Z,d.length))return NaN;let le;if(a&&p)le=Ym(h,j,d,Z,_),E=Math.min(E,le);else if(a&&!p){const he=h.slice(j[0],j[1]+1);for(let be=Z[0];be<=Z[1];++be)if(le=sr(d[be],he,_),E=Math.min(E,le),E===0)return E}else if(!a&&p){const he=d.slice(Z[0],Z[1]+1);for(let be=j[0];be<=j[1];++be)if(le=sr(h[be],he,_),E=Math.min(E,le),E===0)return E}else le=sv(h,j,d,Z,_),E=Math.min(E,le)}else{const le=oo(j,a),he=oo(Z,p);mt(P,E,_,h,d,le[0],he[0]),mt(P,E,_,h,d,le[0],he[1]),mt(P,E,_,h,d,le[1],he[0]),mt(P,E,_,h,d,le[1],he[1])}}return E}function Pn(h){return h.type==="MultiPolygon"?h.coordinates.map(a=>({type:"Polygon",coordinates:a})):h.type==="MultiLineString"?h.coordinates.map(a=>({type:"LineString",coordinates:a})):h.type==="MultiPoint"?h.coordinates.map(a=>({type:"Point",coordinates:a})):[h]}class qn{constructor(a,d){this.type=Ut,this.geojson=a,this.geometries=d}static parse(a,d){if(a.length!==2)return d.error(`'distance' expression requires exactly one argument, but found ${a.length-1} instead.`);if(mh(a[1])){const p=a[1];if(p.type==="FeatureCollection")return new qn(p,p.features.map(_=>Pn(_.geometry)).flat());if(p.type==="Feature")return new qn(p,Pn(p.geometry));if("type"in p&&"coordinates"in p)return new qn(p,Pn(p))}return d.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(d,p){const _=d.geometry(),S=_.flat().map(z=>lp([z.x,z.y],d.canonical));if(_.length===0)return NaN;const E=new Pd(S[0][1]);let P=1/0;for(const z of p){switch(z.type){case"Point":P=Math.min(P,Rt(S,!1,[z.coordinates],!1,E,P));break;case"LineString":P=Math.min(P,Rt(S,!1,z.coordinates,!0,E,P));break;case"Polygon":P=Math.min(P,Gt(S,!1,z.coordinates,E,P))}if(P===0)return P}return P}(a,this.geometries);if(a.geometryType()==="LineString")return function(d,p){const _=d.geometry(),S=_.flat().map(z=>lp([z.x,z.y],d.canonical));if(_.length===0)return NaN;const E=new Pd(S[0][1]);let P=1/0;for(const z of p){switch(z.type){case"Point":P=Math.min(P,Rt(S,!0,[z.coordinates],!1,E,P));break;case"LineString":P=Math.min(P,Rt(S,!0,z.coordinates,!0,E,P));break;case"Polygon":P=Math.min(P,Gt(S,!0,z.coordinates,E,P))}if(P===0)return P}return P}(a,this.geometries);if(a.geometryType()==="Polygon")return function(d,p){const _=d.geometry();if(_.length===0||_[0].length===0)return NaN;const S=Td(_,0).map(z=>z.map(j=>j.map(Z=>lp([Z.x,Z.y],d.canonical)))),E=new Pd(S[0][0][0][1]);let P=1/0;for(const z of p)for(const j of S){switch(z.type){case"Point":P=Math.min(P,Gt([z.coordinates],!1,j,E,P));break;case"LineString":P=Math.min(P,Gt(z.coordinates,!0,j,E,P));break;case"Polygon":P=Math.min(P,lv(j,z.coordinates,E,P))}if(P===0)return P}return P}(a,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const wr={"==":Md,"!=":sa,">":bh,"<":nv,">=":aa,"<=":so,array:Ba,at:yh,boolean:Ba,case:wd,coalesce:_c,collator:ku,format:ao,image:Lu,in:io,"index-of":vc,interpolate:Ws,"interpolate-hcl":Ws,"interpolate-lab":Ws,length:op,let:jr,literal:Hl,match:Ad,number:Ba,"number-format":qr,object:Ba,slice:Eu,step:Vi,string:Ba,"to-boolean":Or,"to-color":Or,"to-number":Or,"to-string":Or,var:br,within:ns,distance:qn};class Gr{constructor(a,d,p,_){this.name=a,this.type=d,this._evaluate=p,this.args=_}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,d){const p=a[0],_=Gr.definitions[p];if(!_)return d.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,E=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,P=E.filter(([j])=>!Array.isArray(j)||j.length===a.length-1);let z=null;for(const[j,Z]of P){z=new Tn(d.registry,Ru,d.path,null,d.scope);const te=[];let oe=!1;for(let le=1;le<a.length;le++){const he=a[le],be=Array.isArray(j)?j[le-1]:j.type,Me=z.parse(he,1+te.length,be);if(!Me){oe=!0;break}te.push(Me)}if(!oe)if(Array.isArray(j)&&j.length!==te.length)z.error(`Expected ${j.length} arguments, but found ${te.length} instead.`);else{for(let le=0;le<te.length;le++){const he=Array.isArray(j)?j[le]:j.type,be=te[le];z.concat(le+1).checkSubtype(he,be.type)}if(z.errors.length===0)return new Gr(p,S,Z,te)}}if(P.length===1)d.errors.push(...z.errors);else{const j=(P.length?P:E).map(([te])=>{return oe=te,Array.isArray(oe)?`(${oe.map(ai).join(", ")})`:`(${ai(oe.type)}...)`;var oe}).join(" | "),Z=[];for(let te=1;te<a.length;te++){const oe=d.parse(a[te],1+Z.length);if(!oe)return null;Z.push(ai(oe.type))}d.error(`Expected arguments of type ${j}, but found (${Z.join(", ")}) instead.`)}return null}static register(a,d){Gr.definitions=d;for(const p in d)a[p]=Gr}}function Qr(h,[a,d,p,_]){a=a.evaluate(h),d=d.evaluate(h),p=p.evaluate(h);const S=_?_.evaluate(h):1,E=ll(a,d,p,S);if(E)throw new mi(E);return new Jn(a/255,d/255,p/255,S,!1)}function kd(h,a){return h in a}function gp(h,a){const d=a[h];return d===void 0?null:d}function ps(h){return{type:h}}function Ru(h){if(h instanceof br)return Ru(h.boundExpression);if(h instanceof Gr&&h.name==="error"||h instanceof ku||h instanceof ns||h instanceof qn)return!1;const a=h instanceof Or||h instanceof Ba;let d=!0;return h.eachChild(p=>{d=a?d&&Ru(p):d&&p instanceof Hl}),!!d&&Ld(h)&&Ou(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ld(h){if(h instanceof Gr&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof ns||h instanceof qn)return!1;let a=!0;return h.eachChild(d=>{a&&!Ld(d)&&(a=!1)}),a}function Vo(h){if(h instanceof Gr&&h.name==="feature-state")return!1;let a=!0;return h.eachChild(d=>{a&&!Vo(d)&&(a=!1)}),a}function Ou(h,a){if(h instanceof Gr&&a.indexOf(h.name)>=0)return!1;let d=!0;return h.eachChild(p=>{d&&!Ou(p,a)&&(d=!1)}),d}function Ch(h){return{result:"success",value:h}}function Pr(h){return{result:"error",value:h}}function Cc(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function yp(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Ic(h){return!!h.expression&&h.expression.interpolated}function Tr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Dd(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function uv(h){return h}function zu(h,a){const d=a.type==="color",p=h.stops&&typeof h.stops[0][0]=="object",_=p||!(p||h.property!==void 0),S=h.type||(Ic(a)?"exponential":"interval");if(d||a.type==="padding"){const Z=d?Jn.parse:Cs.parse;(h=jn({},h)).stops&&(h.stops=h.stops.map(te=>[te[0],Z(te[1])])),h.default=Z(h.default?h.default:a.default)}if(h.colorSpace&&(E=h.colorSpace)!=="rgb"&&E!=="hcl"&&E!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var E;let P,z,j;if(S==="exponential")P=Mc;else if(S==="interval")P=Qm;else if(S==="categorical"){P=Rd,z=Object.create(null);for(const Z of h.stops)z[Z[0]]=Z[1];j=typeof h.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);P=Jm}if(p){const Z={},te=[];for(let he=0;he<h.stops.length;he++){const be=h.stops[he],Me=be[0].zoom;Z[Me]===void 0&&(Z[Me]={zoom:Me,type:h.type,property:h.property,default:h.default,stops:[]},te.push(Me)),Z[Me].stops.push([be[0].value,be[1]])}const oe=[];for(const he of te)oe.push([Z[he].zoom,zu(Z[he],a)]);const le={name:"linear"};return{kind:"composite",interpolationType:le,interpolationFactor:Ws.interpolationFactor.bind(void 0,le),zoomStops:oe.map(he=>he[0]),evaluate:({zoom:he},be)=>Mc({stops:oe,base:h.base},a,he).evaluate(he,be)}}if(_){const Z=S==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:Z,interpolationFactor:Ws.interpolationFactor.bind(void 0,Z),zoomStops:h.stops.map(te=>te[0]),evaluate:({zoom:te})=>P(h,a,te,z,j)}}return{kind:"source",evaluate(Z,te){const oe=te&&te.properties?te.properties[h.property]:void 0;return oe===void 0?Va(h.default,a.default):P(h,a,oe,z,j)}}}function Va(h,a,d){return h!==void 0?h:a!==void 0?a:d!==void 0?d:void 0}function Rd(h,a,d,p,_){return Va(typeof d===_?p[d]:void 0,h.default,a.default)}function Qm(h,a,d){if(Tr(d)!=="number")return Va(h.default,a.default);const p=h.stops.length;if(p===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[p-1][0])return h.stops[p-1][1];const _=vh(h.stops.map(S=>S[0]),d);return h.stops[_][1]}function Mc(h,a,d){const p=h.base!==void 0?h.base:1;if(Tr(d)!=="number")return Va(h.default,a.default);const _=h.stops.length;if(_===1||d<=h.stops[0][0])return h.stops[0][1];if(d>=h.stops[_-1][0])return h.stops[_-1][1];const S=vh(h.stops.map(Z=>Z[0]),d),E=function(Z,te,oe,le){const he=le-oe,be=Z-oe;return he===0?0:te===1?be/he:(Math.pow(te,be)-1)/(Math.pow(te,he)-1)}(d,p,h.stops[S][0],h.stops[S+1][0]),P=h.stops[S][1],z=h.stops[S+1][1],j=Xr[a.type]||uv;return typeof P.evaluate=="function"?{evaluate(...Z){const te=P.evaluate.apply(void 0,Z),oe=z.evaluate.apply(void 0,Z);if(te!==void 0&&oe!==void 0)return j(te,oe,E,h.colorSpace)}}:j(P,z,E,h.colorSpace)}function Jm(h,a,d){switch(a.type){case"color":d=Jn.parse(d);break;case"formatted":d=Hs.fromString(d.toString());break;case"resolvedImage":d=_a.fromString(d.toString());break;case"padding":d=Cs.parse(d);break;default:Tr(d)===a.type||a.type==="enum"&&a.values[d]||(d=void 0)}return Va(d,h.default,a.default)}Gr.register(wr,{error:[{kind:"error"},[_n],(h,[a])=>{throw new mi(a.evaluate(h))}],typeof:[_n,[Yn],(h,[a])=>ai(_i(a.evaluate(h)))],"to-rgba":[Bi(Ut,4),[$s],(h,[a])=>{const[d,p,_,S]=a.evaluate(h).rgb;return[255*d,255*p,255*_,S]}],rgb:[$s,[Ut,Ut,Ut],Qr],rgba:[$s,[Ut,Ut,Ut,Ut],Qr],has:{type:zn,overloads:[[[_n],(h,[a])=>kd(a.evaluate(h),h.properties())],[[_n,si],(h,[a,d])=>kd(a.evaluate(h),d.evaluate(h))]]},get:{type:Yn,overloads:[[[_n],(h,[a])=>gp(a.evaluate(h),h.properties())],[[_n,si],(h,[a,d])=>gp(a.evaluate(h),d.evaluate(h))]]},"feature-state":[Yn,[_n],(h,[a])=>gp(a.evaluate(h),h.featureState||{})],properties:[si,[],h=>h.properties()],"geometry-type":[_n,[],h=>h.geometryType()],id:[Yn,[],h=>h.id()],zoom:[Ut,[],h=>h.globals.zoom],"heatmap-density":[Ut,[],h=>h.globals.heatmapDensity||0],"line-progress":[Ut,[],h=>h.globals.lineProgress||0],accumulated:[Yn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[Ut,ps(Ut),(h,a)=>{let d=0;for(const p of a)d+=p.evaluate(h);return d}],"*":[Ut,ps(Ut),(h,a)=>{let d=1;for(const p of a)d*=p.evaluate(h);return d}],"-":{type:Ut,overloads:[[[Ut,Ut],(h,[a,d])=>a.evaluate(h)-d.evaluate(h)],[[Ut],(h,[a])=>-a.evaluate(h)]]},"/":[Ut,[Ut,Ut],(h,[a,d])=>a.evaluate(h)/d.evaluate(h)],"%":[Ut,[Ut,Ut],(h,[a,d])=>a.evaluate(h)%d.evaluate(h)],ln2:[Ut,[],()=>Math.LN2],pi:[Ut,[],()=>Math.PI],e:[Ut,[],()=>Math.E],"^":[Ut,[Ut,Ut],(h,[a,d])=>Math.pow(a.evaluate(h),d.evaluate(h))],sqrt:[Ut,[Ut],(h,[a])=>Math.sqrt(a.evaluate(h))],log10:[Ut,[Ut],(h,[a])=>Math.log(a.evaluate(h))/Math.LN10],ln:[Ut,[Ut],(h,[a])=>Math.log(a.evaluate(h))],log2:[Ut,[Ut],(h,[a])=>Math.log(a.evaluate(h))/Math.LN2],sin:[Ut,[Ut],(h,[a])=>Math.sin(a.evaluate(h))],cos:[Ut,[Ut],(h,[a])=>Math.cos(a.evaluate(h))],tan:[Ut,[Ut],(h,[a])=>Math.tan(a.evaluate(h))],asin:[Ut,[Ut],(h,[a])=>Math.asin(a.evaluate(h))],acos:[Ut,[Ut],(h,[a])=>Math.acos(a.evaluate(h))],atan:[Ut,[Ut],(h,[a])=>Math.atan(a.evaluate(h))],min:[Ut,ps(Ut),(h,a)=>Math.min(...a.map(d=>d.evaluate(h)))],max:[Ut,ps(Ut),(h,a)=>Math.max(...a.map(d=>d.evaluate(h)))],abs:[Ut,[Ut],(h,[a])=>Math.abs(a.evaluate(h))],round:[Ut,[Ut],(h,[a])=>{const d=a.evaluate(h);return d<0?-Math.round(-d):Math.round(d)}],floor:[Ut,[Ut],(h,[a])=>Math.floor(a.evaluate(h))],ceil:[Ut,[Ut],(h,[a])=>Math.ceil(a.evaluate(h))],"filter-==":[zn,[_n,Yn],(h,[a,d])=>h.properties()[a.value]===d.value],"filter-id-==":[zn,[Yn],(h,[a])=>h.id()===a.value],"filter-type-==":[zn,[_n],(h,[a])=>h.geometryType()===a.value],"filter-<":[zn,[_n,Yn],(h,[a,d])=>{const p=h.properties()[a.value],_=d.value;return typeof p==typeof _&&p<_}],"filter-id-<":[zn,[Yn],(h,[a])=>{const d=h.id(),p=a.value;return typeof d==typeof p&&d<p}],"filter->":[zn,[_n,Yn],(h,[a,d])=>{const p=h.properties()[a.value],_=d.value;return typeof p==typeof _&&p>_}],"filter-id->":[zn,[Yn],(h,[a])=>{const d=h.id(),p=a.value;return typeof d==typeof p&&d>p}],"filter-<=":[zn,[_n,Yn],(h,[a,d])=>{const p=h.properties()[a.value],_=d.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[zn,[Yn],(h,[a])=>{const d=h.id(),p=a.value;return typeof d==typeof p&&d<=p}],"filter->=":[zn,[_n,Yn],(h,[a,d])=>{const p=h.properties()[a.value],_=d.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[zn,[Yn],(h,[a])=>{const d=h.id(),p=a.value;return typeof d==typeof p&&d>=p}],"filter-has":[zn,[Yn],(h,[a])=>a.value in h.properties()],"filter-has-id":[zn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[zn,[Bi(_n)],(h,[a])=>a.value.indexOf(h.geometryType())>=0],"filter-id-in":[zn,[Bi(Yn)],(h,[a])=>a.value.indexOf(h.id())>=0],"filter-in-small":[zn,[_n,Bi(Yn)],(h,[a,d])=>d.value.indexOf(h.properties()[a.value])>=0],"filter-in-large":[zn,[_n,Bi(Yn)],(h,[a,d])=>function(p,_,S,E){for(;S<=E;){const P=S+E>>1;if(_[P]===p)return!0;_[P]>p?E=P-1:S=P+1}return!1}(h.properties()[a.value],d.value,0,d.value.length-1)],all:{type:zn,overloads:[[[zn,zn],(h,[a,d])=>a.evaluate(h)&&d.evaluate(h)],[ps(zn),(h,a)=>{for(const d of a)if(!d.evaluate(h))return!1;return!0}]]},any:{type:zn,overloads:[[[zn,zn],(h,[a,d])=>a.evaluate(h)||d.evaluate(h)],[ps(zn),(h,a)=>{for(const d of a)if(d.evaluate(h))return!0;return!1}]]},"!":[zn,[zn],(h,[a])=>!a.evaluate(h)],"is-supported-script":[zn,[_n],(h,[a])=>{const d=h.globals&&h.globals.isSupportedScript;return!d||d(a.evaluate(h))}],upcase:[_n,[_n],(h,[a])=>a.evaluate(h).toUpperCase()],downcase:[_n,[_n],(h,[a])=>a.evaluate(h).toLowerCase()],concat:[_n,ps(Yn),(h,a)=>a.map(d=>zo(d.evaluate(h))).join("")],"resolved-locale":[_n,[dh],(h,[a])=>a.evaluate(h).resolvedLocale()]});class Od{constructor(a,d){var p;this.expression=a,this._warningHistory={},this._evaluator=new Er,this._defaultValue=d?(p=d).type==="color"&&Dd(p.default)?new Jn(0,0,0,0):p.type==="color"?Jn.parse(p.default)||null:p.type==="padding"?Cs.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?Is.parse(p.default)||null:p.type==="projectionDefinition"?Gs.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=d&&d.type==="enum"?d.values:null}evaluateWithoutErrorHandling(a,d,p,_,S,E){return this._evaluator.globals=a,this._evaluator.feature=d,this._evaluator.featureState=p,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E,this.expression.evaluate(this._evaluator)}evaluate(a,d,p,_,S,E){this._evaluator.globals=a,this._evaluator.feature=d||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=E||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new mi(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function jo(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in wr}function Sc(h,a){const d=new Tn(wr,Ru,[],a?function(_){const S={color:$s,string:_n,number:Ut,enum:_n,boolean:zn,formatted:Cu,padding:yd,projectionDefinition:Ds,resolvedImage:Nl,variableAnchorOffsetCollection:vd};return _.type==="array"?Bi(S[_.value]||Yn,_.length):S[_.type]}(a):void 0),p=d.parse(h,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Ch(new Od(p,a)):Pr(d.errors)}class Fu{constructor(a,d){this.kind=a,this._styleExpression=d,this.isStateDependent=a!=="constant"&&!Vo(d.expression)}evaluateWithoutErrorHandling(a,d,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(a,d,p,_,S,E)}evaluate(a,d,p,_,S,E){return this._styleExpression.evaluate(a,d,p,_,S,E)}}class ul{constructor(a,d,p,_){this.kind=a,this.zoomStops=p,this._styleExpression=d,this.isStateDependent=a!=="camera"&&!Vo(d.expression),this.interpolationType=_}evaluateWithoutErrorHandling(a,d,p,_,S,E){return this._styleExpression.evaluateWithoutErrorHandling(a,d,p,_,S,E)}evaluate(a,d,p,_,S,E){return this._styleExpression.evaluate(a,d,p,_,S,E)}interpolationFactor(a,d,p){return this.interpolationType?Ws.interpolationFactor(this.interpolationType,a,d,p):0}}function Ih(h,a){const d=Sc(h,a);if(d.result==="error")return d;const p=d.value.expression,_=Ld(p);if(!_&&!Cc(a))return Pr([new xr("","data expressions not supported")]);const S=Ou(p,["zoom"]);if(!S&&!yp(a))return Pr([new xr("","zoom expressions not supported")]);const E=Fd(p);return E||S?E instanceof xr?Pr([E]):E instanceof Ws&&!Ic(a)?Pr([new xr("",'"interpolate" expressions cannot be used with this property')]):Ch(E?new ul(_?"camera":"composite",d.value,E.labels,E instanceof Ws?E.interpolation:void 0):new Fu(_?"constant":"source",d.value)):Pr([new xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class zd{constructor(a,d){this._parameters=a,this._specification=d,jn(this,zu(this._parameters,this._specification))}static deserialize(a){return new zd(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Fd(h){let a=null;if(h instanceof jr)a=Fd(h.result);else if(h instanceof _c){for(const d of h.args)if(a=Fd(d),a)break}else(h instanceof Vi||h instanceof Ws)&&h.input instanceof Gr&&h.input.name==="zoom"&&(a=h);return a instanceof xr||h.eachChild(d=>{const p=Fd(d);p instanceof xr?a=p:!a&&p?a=new xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&p&&a!==p&&(a=new xr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function Bd(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const a of h.slice(1))if(!Bd(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}const Mh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ec(h){if(h==null)return{filter:()=>!0,needGeometry:!1};Bd(h)||(h=Tc(h));const a=Sc(h,Mh);if(a.result==="error")throw new Error(a.value.map(d=>`${d.key}: ${d.message}`).join(", "));return{filter:(d,p,_)=>a.value.evaluate(d,p,{},_),needGeometry:_p(h)}}function vp(h,a){return h<a?-1:h>a?1:0}function _p(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let a=1;a<h.length;a++)if(_p(h[a]))return!0;return!1}function Tc(h){if(!h)return!0;const a=h[0];return h.length<=1?a!=="any":a==="=="?Nd(h[1],h[2],"=="):a==="!="?ji(Nd(h[1],h[2],"==")):a==="<"||a===">"||a==="<="||a===">="?Nd(h[1],h[2],a):a==="any"?(d=h.slice(1),["any"].concat(d.map(Tc))):a==="all"?["all"].concat(h.slice(1).map(Tc)):a==="none"?["all"].concat(h.slice(1).map(Tc).map(ji)):a==="in"?bp(h[1],h.slice(2)):a==="!in"?ji(bp(h[1],h.slice(2))):a==="has"?Pi(h[1]):a!=="!has"||ji(Pi(h[1]));var d}function Nd(h,a,d){switch(h){case"$type":return[`filter-type-${d}`,a];case"$id":return[`filter-id-${d}`,a];default:return[`filter-${d}`,h,a]}}function bp(h,a){if(a.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(d=>typeof d!=typeof a[0])?["filter-in-large",h,["literal",a.sort(vp)]]:["filter-in-small",h,["literal",a]]}}function Pi(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function ji(h){return["!",h]}function Sh(h){const a=typeof h;if(a==="number"||a==="boolean"||a==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let _="[";for(const S of h)_+=`${Sh(S)},`;return`${_}]`}const d=Object.keys(h).sort();let p="{";for(let _=0;_<d.length;_++)p+=`${JSON.stringify(d[_])}:${Sh(h[d[_]])},`;return`${p}}`}function Vd(h){let a="";for(const d of Qe)a+=`/${Sh(h[d])}`;return a}function xp(h){const a=h.value;return a?[new Ft(h.key,a,"constants have been deprecated as of v8")]:[]}function ki(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function cl(h){if(Array.isArray(h))return h.map(cl);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const a={};for(const d in h)a[d]=cl(h[d]);return a}return ki(h)}function Rs(h){const a=h.key,d=h.value,p=h.valueSpec||{},_=h.objectElementValidators||{},S=h.style,E=h.styleSpec,P=h.validateSpec;let z=[];const j=Tr(d);if(j!=="object")return[new Ft(a,d,`object expected, ${j} found`)];for(const Z in d){const te=Z.split(".")[0],oe=p[te]||p["*"];let le;if(_[te])le=_[te];else if(p[te])le=P;else if(_["*"])le=_["*"];else{if(!p["*"]){z.push(new Ft(a,d[Z],`unknown property "${Z}"`));continue}le=P}z=z.concat(le({key:(a&&`${a}.`)+Z,value:d[Z],valueSpec:oe,style:S,styleSpec:E,object:d,objectKey:Z,validateSpec:P},d))}for(const Z in p)_[Z]||p[Z].required&&p[Z].default===void 0&&d[Z]===void 0&&z.push(new Ft(a,d,`missing required property "${Z}"`));return z}function Eh(h){const a=h.value,d=h.valueSpec,p=h.style,_=h.styleSpec,S=h.key,E=h.arrayElementValidator||h.validateSpec;if(Tr(a)!=="array")return[new Ft(S,a,`array expected, ${Tr(a)} found`)];if(d.length&&a.length!==d.length)return[new Ft(S,a,`array length ${d.length} expected, length ${a.length} found`)];if(d["min-length"]&&a.length<d["min-length"])return[new Ft(S,a,`array length at least ${d["min-length"]} expected, length ${a.length} found`)];let P={type:d.value,values:d.values};_.$version<7&&(P.function=d.function),Tr(d.value)==="object"&&(P=d.value);let z=[];for(let j=0;j<a.length;j++)z=z.concat(E({array:a,arrayIndex:j,value:a[j],valueSpec:P,validateSpec:h.validateSpec,style:p,styleSpec:_,key:`${S}[${j}]`}));return z}function Kl(h){const a=h.key,d=h.value,p=h.valueSpec;let _=Tr(d);return _==="number"&&d!=d&&(_="NaN"),_!=="number"?[new Ft(a,d,`number expected, ${_} found`)]:"minimum"in p&&d<p.minimum?[new Ft(a,d,`${d} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&d>p.maximum?[new Ft(a,d,`${d} is greater than the maximum value ${p.maximum}`)]:[]}function Bu(h){const a=h.valueSpec,d=ki(h.value.type);let p,_,S,E={};const P=d!=="categorical"&&h.value.property===void 0,z=!P,j=Tr(h.value.stops)==="array"&&Tr(h.value.stops[0])==="array"&&Tr(h.value.stops[0][0])==="object",Z=Rs({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(le){if(d==="identity")return[new Ft(le.key,le.value,'identity function may not have a "stops" property')];let he=[];const be=le.value;return he=he.concat(Eh({key:le.key,value:be,valueSpec:le.valueSpec,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,arrayElementValidator:te})),Tr(be)==="array"&&be.length===0&&he.push(new Ft(le.key,be,"array must have at least one stop")),he},default:function(le){return le.validateSpec({key:le.key,value:le.value,valueSpec:a,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec})}}});return d==="identity"&&P&&Z.push(new Ft(h.key,h.value,'missing required property "property"')),d==="identity"||h.value.stops||Z.push(new Ft(h.key,h.value,'missing required property "stops"')),d==="exponential"&&h.valueSpec.expression&&!Ic(h.valueSpec)&&Z.push(new Ft(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(z&&!Cc(h.valueSpec)?Z.push(new Ft(h.key,h.value,"property functions not supported")):P&&!yp(h.valueSpec)&&Z.push(new Ft(h.key,h.value,"zoom functions not supported"))),d!=="categorical"&&!j||h.value.property!==void 0||Z.push(new Ft(h.key,h.value,'"property" property is required')),Z;function te(le){let he=[];const be=le.value,Me=le.key;if(Tr(be)!=="array")return[new Ft(Me,be,`array expected, ${Tr(be)} found`)];if(be.length!==2)return[new Ft(Me,be,`array length 2 expected, length ${be.length} found`)];if(j){if(Tr(be[0])!=="object")return[new Ft(Me,be,`object expected, ${Tr(be[0])} found`)];if(be[0].zoom===void 0)return[new Ft(Me,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new Ft(Me,be,"object stop key must have value")];if(S&&S>ki(be[0].zoom))return[new Ft(Me,be[0].zoom,"stop zoom values must appear in ascending order")];ki(be[0].zoom)!==S&&(S=ki(be[0].zoom),_=void 0,E={}),he=he.concat(Rs({key:`${Me}[0]`,value:be[0],valueSpec:{zoom:{}},validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec,objectElementValidators:{zoom:Kl,value:oe}}))}else he=he.concat(oe({key:`${Me}[0]`,value:be[0],validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec},be));return jo(cl(be[1]))?he.concat([new Ft(`${Me}[1]`,be[1],"expressions are not allowed in function stops.")]):he.concat(le.validateSpec({key:`${Me}[1]`,value:be[1],valueSpec:a,validateSpec:le.validateSpec,style:le.style,styleSpec:le.styleSpec}))}function oe(le,he){const be=Tr(le.value),Me=ki(le.value),ze=le.value!==null?le.value:he;if(p){if(be!==p)return[new Ft(le.key,ze,`${be} stop domain type must match previous stop domain type ${p}`)]}else p=be;if(be!=="number"&&be!=="string"&&be!=="boolean")return[new Ft(le.key,ze,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&d!=="categorical"){let rt=`number expected, ${be} found`;return Cc(a)&&d===void 0&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ft(le.key,ze,rt)]}return d!=="categorical"||be!=="number"||isFinite(Me)&&Math.floor(Me)===Me?d!=="categorical"&&be==="number"&&_!==void 0&&Me<_?[new Ft(le.key,ze,"stop domain values must appear in ascending order")]:(_=Me,d==="categorical"&&Me in E?[new Ft(le.key,ze,"stop domain values must be unique")]:(E[Me]=!0,[])):[new Ft(le.key,ze,`integer expected, found ${Me}`)]}}function lo(h){const a=(h.expressionContext==="property"?Ih:Sc)(cl(h.value),h.valueSpec);if(a.result==="error")return a.value.map(p=>new Ft(`${h.key}${p.key}`,h.value,p.message));const d=a.value.expression||a.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!d.outputDefined())return[new Ft(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Vo(d))return[new Ft(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Vo(d))return[new Ft(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!Ou(d,["zoom","feature-state"]))return[new Ft(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Ld(d))return[new Ft(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function uo(h){const a=h.key,d=h.value,p=h.valueSpec,_=[];return Array.isArray(p.values)?p.values.indexOf(ki(d))===-1&&_.push(new Ft(a,d,`expected one of [${p.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(p.values).indexOf(ki(d))===-1&&_.push(new Ft(a,d,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(d)} found`)),_}function Yl(h){return Bd(cl(h.value))?lo(jn({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ap(h)}function Ap(h){const a=h.value,d=h.key;if(Tr(a)!=="array")return[new Ft(d,a,`array expected, ${Tr(a)} found`)];const p=h.styleSpec;let _,S=[];if(a.length<1)return[new Ft(d,a,"filter array must have at least 1 element")];switch(S=S.concat(uo({key:`${d}[0]`,value:a[0],valueSpec:p.filter_operator,style:h.style,styleSpec:h.styleSpec})),ki(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&ki(a[1])==="$type"&&S.push(new Ft(d,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&S.push(new Ft(d,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(_=Tr(a[1]),_!=="string"&&S.push(new Ft(`${d}[1]`,a[1],`string expected, ${_} found`)));for(let E=2;E<a.length;E++)_=Tr(a[E]),ki(a[1])==="$type"?S=S.concat(uo({key:`${d}[${E}]`,value:a[E],valueSpec:p.geometry_type,style:h.style,styleSpec:h.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new Ft(`${d}[${E}]`,a[E],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let E=1;E<a.length;E++)S=S.concat(Ap({key:`${d}[${E}]`,value:a[E],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":_=Tr(a[1]),a.length!==2?S.push(new Ft(d,a,`filter array for "${a[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new Ft(`${d}[1]`,a[1],`string expected, ${_} found`))}return S}function wp(h,a){const d=h.key,p=h.validateSpec,_=h.style,S=h.styleSpec,E=h.value,P=h.objectKey,z=S[`${a}_${h.layerType}`];if(!z)return[];const j=P.match(/^(.*)-transition$/);if(a==="paint"&&j&&z[j[1]]&&z[j[1]].transition)return p({key:d,value:E,valueSpec:S.transition,style:_,styleSpec:S});const Z=h.valueSpec||z[P];if(!Z)return[new Ft(d,E,`unknown property "${P}"`)];let te;if(Tr(E)==="string"&&Cc(Z)&&!Z.tokens&&(te=/^{([^}]+)}$/.exec(E)))return[new Ft(d,E,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(te[1])} }\`.`)];const oe=[];return h.layerType==="symbol"&&(P==="text-field"&&_&&!_.glyphs&&oe.push(new Ft(d,E,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&Dd(cl(E))&&ki(E.type)==="identity"&&oe.push(new Ft(d,E,'"text-font" does not support identity functions'))),oe.concat(p({key:h.key,value:E,valueSpec:Z,style:_,styleSpec:S,expressionContext:"property",propertyType:a,propertyKey:P}))}function eg(h){return wp(h,"paint")}function Cp(h){return wp(h,"layout")}function Ip(h){let a=[];const d=h.value,p=h.key,_=h.style,S=h.styleSpec;d.type||d.ref||a.push(new Ft(p,d,'either "type" or "ref" is required'));let E=ki(d.type);const P=ki(d.ref);if(d.id){const z=ki(d.id);for(let j=0;j<h.arrayIndex;j++){const Z=_.layers[j];ki(Z.id)===z&&a.push(new Ft(p,d.id,`duplicate layer id "${d.id}", previously used at line ${Z.id.__line__}`))}}if("ref"in d){let z;["type","source","source-layer","filter","layout"].forEach(j=>{j in d&&a.push(new Ft(p,d[j],`"${j}" is prohibited for ref layers`))}),_.layers.forEach(j=>{ki(j.id)===P&&(z=j)}),z?z.ref?a.push(new Ft(p,d.ref,"ref cannot reference another ref layer")):E=ki(z.type):a.push(new Ft(p,d.ref,`ref layer "${P}" not found`))}else if(E!=="background")if(d.source){const z=_.sources&&_.sources[d.source],j=z&&ki(z.type);z?j==="vector"&&E==="raster"?a.push(new Ft(p,d.source,`layer "${d.id}" requires a raster source`)):j!=="raster-dem"&&E==="hillshade"?a.push(new Ft(p,d.source,`layer "${d.id}" requires a raster-dem source`)):j==="raster"&&E!=="raster"?a.push(new Ft(p,d.source,`layer "${d.id}" requires a vector source`)):j!=="vector"||d["source-layer"]?j==="raster-dem"&&E!=="hillshade"?a.push(new Ft(p,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):E!=="line"||!d.paint||!d.paint["line-gradient"]||j==="geojson"&&z.lineMetrics||a.push(new Ft(p,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new Ft(p,d,`layer "${d.id}" must specify a "source-layer"`)):a.push(new Ft(p,d.source,`source "${d.source}" not found`))}else a.push(new Ft(p,d,'missing required property "source"'));return a=a.concat(Rs({key:p,value:d,valueSpec:S.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${p}.type`,value:d.type,valueSpec:S.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:d,objectKey:"type"}),filter:Yl,layout:z=>Rs({layer:d,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":j=>Cp(jn({layerType:E},j))}}),paint:z=>Rs({layer:d,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":j=>eg(jn({layerType:E},j))}})}})),a}function oa(h){const a=h.value,d=h.key,p=Tr(a);return p!=="string"?[new Ft(d,a,`string expected, ${p} found`)]:[]}const Pc={promoteId:function({key:h,value:a}){if(Tr(a)==="string")return oa({key:h,value:a});{const d=[];for(const p in a)d.push(...oa({key:`${h}.${p}`,value:a[p]}));return d}}};function Mp(h){const a=h.value,d=h.key,p=h.styleSpec,_=h.style,S=h.validateSpec;if(!a.type)return[new Ft(d,a,'"type" is required')];const E=ki(a.type);let P;switch(E){case"vector":case"raster":return P=Rs({key:d,value:a,valueSpec:p[`source_${E.replace("-","_")}`],style:h.style,styleSpec:p,objectElementValidators:Pc,validateSpec:S}),P;case"raster-dem":return P=function(z){var j;const Z=(j=z.sourceName)!==null&&j!==void 0?j:"",te=z.value,oe=z.styleSpec,le=oe.source_raster_dem,he=z.style;let be=[];const Me=Tr(te);if(te===void 0)return be;if(Me!=="object")return be.push(new Ft("source_raster_dem",te,`object expected, ${Me} found`)),be;const ze=ki(te.encoding)==="custom",rt=["redFactor","greenFactor","blueFactor","baseShift"],$e=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const ae in te)!ze&&rt.includes(ae)?be.push(new Ft(ae,te[ae],`In "${Z}": "${ae}" is only valid when "encoding" is set to "custom". ${$e} encoding found`)):le[ae]?be=be.concat(z.validateSpec({key:ae,value:te[ae],valueSpec:le[ae],validateSpec:z.validateSpec,style:he,styleSpec:oe})):be.push(new Ft(ae,te[ae],`unknown property "${ae}"`));return be}({sourceName:d,value:a,style:h.style,styleSpec:p,validateSpec:S}),P;case"geojson":if(P=Rs({key:d,value:a,valueSpec:p.source_geojson,style:_,styleSpec:p,validateSpec:S,objectElementValidators:Pc}),a.cluster)for(const z in a.clusterProperties){const[j,Z]=a.clusterProperties[z],te=typeof j=="string"?[j,["accumulated"],["get",z]]:j;P.push(...lo({key:`${d}.${z}.map`,value:Z,expressionContext:"cluster-map"})),P.push(...lo({key:`${d}.${z}.reduce`,value:te,expressionContext:"cluster-reduce"}))}return P;case"video":return Rs({key:d,value:a,valueSpec:p.source_video,style:_,validateSpec:S,styleSpec:p});case"image":return Rs({key:d,value:a,valueSpec:p.source_image,style:_,validateSpec:S,styleSpec:p});case"canvas":return[new Ft(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return uo({key:`${d}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ce(h){const a=h.value,d=h.styleSpec,p=d.light,_=h.style;let S=[];const E=Tr(a);if(a===void 0)return S;if(E!=="object")return S=S.concat([new Ft("light",a,`object expected, ${E} found`)]),S;for(const P in a){const z=P.match(/^(.*)-transition$/);S=S.concat(z&&p[z[1]]&&p[z[1]].transition?h.validateSpec({key:P,value:a[P],valueSpec:d.transition,validateSpec:h.validateSpec,style:_,styleSpec:d}):p[P]?h.validateSpec({key:P,value:a[P],valueSpec:p[P],validateSpec:h.validateSpec,style:_,styleSpec:d}):[new Ft(P,a[P],`unknown property "${P}"`)])}return S}function Nu(h){const a=h.value,d=h.styleSpec,p=d.sky,_=h.style,S=Tr(a);if(a===void 0)return[];if(S!=="object")return[new Ft("sky",a,`object expected, ${S} found`)];let E=[];for(const P in a)E=E.concat(p[P]?h.validateSpec({key:P,value:a[P],valueSpec:p[P],style:_,styleSpec:d}):[new Ft(P,a[P],`unknown property "${P}"`)]);return E}function Th(h){const a=h.value,d=h.styleSpec,p=d.terrain,_=h.style;let S=[];const E=Tr(a);if(a===void 0)return S;if(E!=="object")return S=S.concat([new Ft("terrain",a,`object expected, ${E} found`)]),S;for(const P in a)S=S.concat(p[P]?h.validateSpec({key:P,value:a[P],valueSpec:p[P],validateSpec:h.validateSpec,style:_,styleSpec:d}):[new Ft(P,a[P],`unknown property "${P}"`)]);return S}function xa(h){let a=[];const d=h.value,p=h.key;if(Array.isArray(d)){const _=[],S=[];for(const E in d)d[E].id&&_.includes(d[E].id)&&a.push(new Ft(p,d,`all the sprites' ids must be unique, but ${d[E].id} is duplicated`)),_.push(d[E].id),d[E].url&&S.includes(d[E].url)&&a.push(new Ft(p,d,`all the sprites' URLs must be unique, but ${d[E].url} is duplicated`)),S.push(d[E].url),a=a.concat(Rs({key:`${p}[${E}]`,value:d[E],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return a}return oa({key:p,value:d})}const ur={"*":()=>[],array:Eh,boolean:function(h){const a=h.value,d=h.key,p=Tr(a);return p!=="boolean"?[new Ft(d,a,`boolean expected, ${p} found`)]:[]},number:Kl,color:function(h){const a=h.key,d=h.value,p=Tr(d);return p!=="string"?[new Ft(a,d,`color expected, ${p} found`)]:Jn.parse(String(d))?[]:[new Ft(a,d,`color expected, "${d}" found`)]},constants:xp,enum:uo,filter:Yl,function:Bu,layer:Ip,object:Rs,source:Mp,light:Ce,sky:Nu,terrain:Th,projection:function(h){const a=h.value,d=h.styleSpec,p=d.projection,_=h.style,S=Tr(a);if(a===void 0)return[];if(S!=="object")return[new Ft("projection",a,`object expected, ${S} found`)];let E=[];for(const P in a)E=E.concat(p[P]?h.validateSpec({key:P,value:a[P],valueSpec:p[P],style:_,styleSpec:d}):[new Ft(P,a[P],`unknown property "${P}"`)]);return E},projectionDefinition:function(h){const a=h.key;let d=h.value;d=d instanceof String?d.valueOf():d;const p=Tr(d);return p!=="array"||function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"}(d)||function(_){return!!["interpolate","step","literal"].includes(_[0])}(d)?["array","string"].includes(p)?[]:[new Ft(a,d,`projection expected, invalid type "${p}" found`)]:[new Ft(a,d,`projection expected, invalid array ${JSON.stringify(d)} found`)]},string:oa,formatted:function(h){return oa(h).length===0?[]:lo(h)},resolvedImage:function(h){return oa(h).length===0?[]:lo(h)},padding:function(h){const a=h.key,d=h.value;if(Tr(d)==="array"){if(d.length<1||d.length>4)return[new Ft(a,d,`padding requires 1 to 4 values; ${d.length} values found`)];const p={type:"number"};let _=[];for(let S=0;S<d.length;S++)_=_.concat(h.validateSpec({key:`${a}[${S}]`,value:d[S],validateSpec:h.validateSpec,valueSpec:p}));return _}return Kl({key:a,value:d,valueSpec:{}})},variableAnchorOffsetCollection:function(h){const a=h.key,d=h.value,p=Tr(d),_=h.styleSpec;if(p!=="array"||d.length<1||d.length%2!=0)return[new Ft(a,d,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let E=0;E<d.length;E+=2)S=S.concat(uo({key:`${a}[${E}]`,value:d[E],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(Eh({key:`${a}[${E+1}]`,value:d[E+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:_}));return S},sprite:xa};function Xl(h){const a=h.value,d=h.valueSpec,p=h.styleSpec;return h.validateSpec=Xl,d.expression&&Dd(ki(a))?Bu(h):d.expression&&jo(cl(a))?lo(h):d.type&&ur[d.type]?ur[d.type](h):Rs(jn({},h,{valueSpec:d.type?p[d.type]:d}))}function la(h){const a=h.value,d=h.key,p=oa(h);return p.length||(a.indexOf("{fontstack}")===-1&&p.push(new Ft(d,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&p.push(new Ft(d,a,'"glyphs" url must include a "{range}" token'))),p}function qs(h,a=ve){let d=[];return d=d.concat(Xl({key:"",value:h,valueSpec:a.$root,styleSpec:a,style:h,validateSpec:Xl,objectElementValidators:{glyphs:la,"*":()=>[]}})),h.constants&&(d=d.concat(xp({key:"constants",value:h.constants}))),tg(d)}function Ms(h){return function(a){return h({...a,validateSpec:Xl})}}function tg(h){return[].concat(h).sort((a,d)=>a.line-d.line)}function Uo(h){return function(...a){return tg(h.apply(this,a))}}qs.source=Uo(Ms(Mp)),qs.sprite=Uo(Ms(xa)),qs.glyphs=Uo(Ms(la)),qs.light=Uo(Ms(Ce)),qs.sky=Uo(Ms(Nu)),qs.terrain=Uo(Ms(Th)),qs.layer=Uo(Ms(Ip)),qs.filter=Uo(Ms(Yl)),qs.paintProperty=Uo(Ms(eg)),qs.layoutProperty=Uo(Ms(Cp));const $o=qs,ng=$o.light,Sp=$o.sky,hl=$o.paintProperty,Ep=$o.layoutProperty;function rg(h,a){let d=!1;if(a&&a.length)for(const p of a)h.fire(new xe(new Error(p.message))),d=!0;return d}class dl{constructor(a,d,p){const _=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;const E=new Int32Array(this.arrayBuffer);a=E[0],this.d=(d=E[1])+2*(p=E[2]);for(let z=0;z<this.d*this.d;z++){const j=E[3+z],Z=E[3+z+1];_.push(j===Z?null:E.subarray(j,Z))}const P=E[3+_.length+1];this.keys=E.subarray(E[3+_.length],P),this.bboxes=E.subarray(P),this.insert=this._insertReadonly}else{this.d=d+2*p;for(let E=0;E<this.d*this.d;E++)_.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=a,this.padding=p,this.scale=d/a,this.uid=0;const S=p/d*a;this.min=-S,this.max=a+S}insert(a,d,p,_,S){this._forEachCell(d,p,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,d,p,_,S,E){this.cells[S].push(E)}query(a,d,p,_,S){const E=this.min,P=this.max;if(a<=E&&d<=E&&P<=p&&P<=_&&!S)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(a,d,p,_,this._queryCell,z,{},S),z}}_queryCell(a,d,p,_,S,E,P,z){const j=this.cells[S];if(j!==null){const Z=this.keys,te=this.bboxes;for(let oe=0;oe<j.length;oe++){const le=j[oe];if(P[le]===void 0){const he=4*le;(z?z(te[he+0],te[he+1],te[he+2],te[he+3]):a<=te[he+2]&&d<=te[he+3]&&p>=te[he+0]&&_>=te[he+1])?(P[le]=!0,E.push(Z[le])):P[le]=!1}}}}_forEachCell(a,d,p,_,S,E,P,z){const j=this._convertToCellCoord(a),Z=this._convertToCellCoord(d),te=this._convertToCellCoord(p),oe=this._convertToCellCoord(_);for(let le=j;le<=te;le++)for(let he=Z;he<=oe;he++){const be=this.d*he+le;if((!z||z(this._convertFromCellCoord(le),this._convertFromCellCoord(he),this._convertFromCellCoord(le+1),this._convertFromCellCoord(he+1)))&&S.call(this,a,d,p,_,be,E,P,z))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const a=this.cells,d=3+this.cells.length+1+1;let p=0;for(let E=0;E<this.cells.length;E++)p+=this.cells[E].length;const _=new Int32Array(d+p+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=d;for(let E=0;E<a.length;E++){const P=a[E];_[3+E]=S,_.set(P,S),S+=P.length}return _[3+a.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+a.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(a,d){const p=a.toArrayBuffer();return d&&d.push(p),{buffer:p}}static deserialize(a){return new dl(a.buffer)}}const fl={};function yn(h,a,d={}){if(fl[h])throw new Error(`${h} is already registered.`);Object.defineProperty(a,"_classRegistryKey",{value:h,writeable:!1}),fl[h]={klass:a,omit:d.omit||[],shallow:d.shallow||[]}}yn("Object",Object),yn("TransferableGridIndex",dl),yn("Color",Jn),yn("Error",Error),yn("AJAXError",_t),yn("ResolvedImage",_a),yn("StylePropertyFunction",zd),yn("StyleExpression",Od,{omit:["_evaluator"]}),yn("ZoomDependentExpression",ul),yn("ZoomConstantExpression",Fu),yn("CompoundExpression",Gr,{omit:["_evaluate"]});for(const h in wr)wr[h]._classRegistryKey||yn(`Expression_${h}`,wr[h]);function Ho(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function Tp(h){return h.$name||h.constructor._classRegistryKey}function Ph(h){return!function(a){if(a===null||typeof a!="object")return!1;const d=Tp(a);return!(!d||d==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Ho(h)||ye(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function kh(h,a){if(Ph(h))return(Ho(h)||ye(h))&&a&&a.push(h),ArrayBuffer.isView(h)&&a&&a.push(h.buffer),h instanceof ImageData&&a&&a.push(h.data.buffer),h;if(Array.isArray(h)){const S=[];for(const E of h)S.push(kh(E,a));return S}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const d=Tp(h);if(!d)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!fl[d])throw new Error(`${d} is not registered.`);const{klass:p}=fl[d],_=p.serialize?p.serialize(h,a):{};if(p.serialize){if(a&&_===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in h){if(!h.hasOwnProperty(S)||fl[d].omit.indexOf(S)>=0)continue;const E=h[S];_[S]=fl[d].shallow.indexOf(S)>=0?E:kh(E,a)}h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(_.$name=d),_}function Vu(h){if(Ph(h))return h;if(Array.isArray(h))return h.map(Vu);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const a=Tp(h)||"Object";if(!fl[a])throw new Error(`can't deserialize unregistered class ${a}`);const{klass:d}=fl[a];if(!d)throw new Error(`can't deserialize unregistered class ${a}`);if(d.deserialize)return d.deserialize(h);const p=Object.create(d.prototype);for(const _ of Object.keys(h)){if(_==="$name")continue;const S=h[_];p[_]=fl[a].shallow.indexOf(_)>=0?S:Vu(S)}return p}class Lh{constructor(){this.first=!0}update(a,d){const p=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=d):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=d),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=p,!0))}}const er={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function jd(h){for(const a of h)if(Ud(a.charCodeAt(0)))return!0;return!1}function ig(h){for(const a of h)if(!sg(a.charCodeAt(0)))return!1;return!0}function ua(h){const a=h.map(d=>{try{return new RegExp(`\\p{sc=${d}}`,"u").source}catch{return null}}).filter(d=>d);return new RegExp(a.join("|"),"u")}const Pp=ua(["Arab","Dupl","Mong","Ougr","Syrc"]);function sg(h){return!Pp.test(String.fromCodePoint(h))}const ag=ua(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ud(h){return!(h!==746&&h!==747&&(h<4352||!(er["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||er["CJK Compatibility"](h)||er["CJK Strokes"](h)||!(!er["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||er["Enclosed CJK Letters and Months"](h)||er["Ideographic Description Characters"](h)||er.Kanbun(h)||er.Katakana(h)&&h!==12540||!(!er["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!er["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||er["Vertical Forms"](h)||er["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||ag.test(String.fromCodePoint(h)))))}function og(h){return!(Ud(h)||function(a){return!!(er["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||er["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||er["Letterlike Symbols"](a)||er["Number Forms"](a)||er["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||er["Control Pictures"](a)&&a!==9251||er["Optical Character Recognition"](a)||er["Enclosed Alphanumerics"](a)||er["Geometric Shapes"](a)||er["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||er["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||er["CJK Symbols and Punctuation"](a)||er.Katakana(a)||er["Private Use Area"](a)||er["CJK Compatibility Forms"](a)||er["Small Form Variants"](a)||er["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(h))}const kp=ua(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function $d(h){return kp.test(String.fromCodePoint(h))}function lg(h,a){return!(!a&&$d(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||er.Khmer(h))}function cv(h){for(const a of h)if($d(a.charCodeAt(0)))return!0;return!1}const Go=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Go.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,a){return s(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const d=h.pluginURL,p=new Promise(S=>{this.loadScriptResolve=S});a(d);const _=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([p,_]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:d};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${d}`)})}};class Zr{constructor(a,d){this.zoom=a,d?(this.now=d.now,this.fadeDuration=d.fadeDuration,this.zoomHistory=d.zoomHistory,this.transition=d.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lh,this.transition={})}isSupportedScript(a){return function(d,p){for(const _ of d)if(!lg(_.charCodeAt(0),p))return!1;return!0}(a,Go.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const a=this.zoom,d=a-Math.floor(a),p=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:d+(1-d)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*d}}}class Ql{constructor(a,d){this.property=a,this.value=d,this.expression=function(p,_){if(Dd(p))return new zd(p,_);if(jo(p)){const S=Ih(p,_);if(S.result==="error")throw new Error(S.value.map(E=>`${E.key}: ${E.message}`).join(", "));return S.value}{let S=p;return _.type==="color"&&typeof p=="string"?S=Jn.parse(p):_.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?S=Is.parse(p):_.type==="projectionDefinition"&&typeof p=="string"&&(S=Gs.parse(p)):S=Cs.parse(p),{kind:"constant",evaluate:()=>S}}}(d===void 0?a.specification.default:d,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,d,p){return this.property.possiblyEvaluate(this,a,d,p)}}class Hd{constructor(a){this.property=a,this.value=new Ql(a,void 0)}transitioned(a,d){return new Dh(this.property,this.value,d,gt({},a.transition,this.transition),a.now)}untransitioned(){return new Dh(this.property,this.value,null,{},0)}}class Gd{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return Lt(this._values[a].value.value)}setValue(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Hd(this._values[a].property)),this._values[a].value=new Ql(this._values[a].property,d===null?void 0:Lt(d))}getTransition(a){return Lt(this._values[a].transition)}setTransition(a,d){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Hd(this._values[a].property)),this._values[a].transition=Lt(d)||void 0}serialize(){const a={};for(const d of Object.keys(this._values)){const p=this.getValue(d);p!==void 0&&(a[d]=p);const _=this.getTransition(d);_!==void 0&&(a[`${d}-transition`]=_)}return a}transitioned(a,d){const p=new Zo(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(a,d._values[_]);return p}untransitioned(){const a=new Zo(this._properties);for(const d of Object.keys(this._values))a._values[d]=this._values[d].untransitioned();return a}}class Dh{constructor(a,d,p,_,S){this.property=a,this.value=d,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,a.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(a,d,p){const _=a.now||0,S=this.value.possiblyEvaluate(a,d,p),E=this.prior;if(E){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return E.possiblyEvaluate(a,d,p);{const P=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(E.possiblyEvaluate(a,d,p),S,Ue(P))}}return S}}class Zo{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,d,p){const _=new Ks(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(a,d,p);return _}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class Rh{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return Lt(this._values[a].value)}setValue(a,d){this._values[a]=new Ql(this._values[a].property,d===null?void 0:Lt(d))}serialize(){const a={};for(const d of Object.keys(this._values)){const p=this.getValue(d);p!==void 0&&(a[d]=p)}return a}possiblyEvaluate(a,d,p){const _=new Ks(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(a,d,p);return _}}class Os{constructor(a,d,p){this.property=a,this.value=d,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,d,p,_){return this.property.evaluate(this.value,this.parameters,a,d,p,_)}}class Ks{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Rn{constructor(a){this.specification=a}possiblyEvaluate(a,d){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(d)}interpolate(a,d,p){const _=Xr[this.specification.type];return _?_(a,d,p):a}}class Fn{constructor(a,d){this.specification=a,this.overrides=d}possiblyEvaluate(a,d,p,_){return new Os(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(d,null,{},p,_)}:a.expression,d)}interpolate(a,d,p){if(a.value.kind!=="constant"||d.value.kind!=="constant")return a;if(a.value.value===void 0||d.value.value===void 0)return new Os(this,{kind:"constant",value:void 0},a.parameters);const _=Xr[this.specification.type];if(_){const S=_(a.value.value,d.value.value,p);return new Os(this,{kind:"constant",value:S},a.parameters)}return a}evaluate(a,d,p,_,S,E){return a.kind==="constant"?a.value:a.evaluate(d,p,_,S,E)}}class kc extends Fn{possiblyEvaluate(a,d,p,_){if(a.value===void 0)return new Os(this,{kind:"constant",value:void 0},d);if(a.expression.kind==="constant"){const S=a.expression.evaluate(d,null,{},p,_),E=a.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,P=this._calculate(E,E,E,d);return new Os(this,{kind:"constant",value:P},d)}if(a.expression.kind==="camera"){const S=this._calculate(a.expression.evaluate({zoom:d.zoom-1}),a.expression.evaluate({zoom:d.zoom}),a.expression.evaluate({zoom:d.zoom+1}),d);return new Os(this,{kind:"constant",value:S},d)}return new Os(this,a.expression,d)}evaluate(a,d,p,_,S,E){if(a.kind==="source"){const P=a.evaluate(d,p,_,S,E);return this._calculate(P,P,P,d)}return a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(d.zoom)-1},p,_),a.evaluate({zoom:Math.floor(d.zoom)},p,_),a.evaluate({zoom:Math.floor(d.zoom)+1},p,_),d):a.value}_calculate(a,d,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:p,to:d}}interpolate(a){return a}}class ju{constructor(a){this.specification=a}possiblyEvaluate(a,d,p,_){if(a.value!==void 0){if(a.expression.kind==="constant"){const S=a.expression.evaluate(d,null,{},p,_);return this._calculate(S,S,S,d)}return this._calculate(a.expression.evaluate(new Zr(Math.floor(d.zoom-1),d)),a.expression.evaluate(new Zr(Math.floor(d.zoom),d)),a.expression.evaluate(new Zr(Math.floor(d.zoom+1),d)),d)}}_calculate(a,d,p,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:d}:{from:p,to:d}}interpolate(a){return a}}class Wo{constructor(a){this.specification=a}possiblyEvaluate(a,d,p,_){return!!a.expression.evaluate(d,null,{},p,_)}interpolate(){return!1}}class Ys{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const d in a){const p=a[d];p.specification.overridable&&this.overridableProperties.push(d);const _=this.defaultPropertyValues[d]=new Ql(p,void 0),S=this.defaultTransitionablePropertyValues[d]=new Hd(p);this.defaultTransitioningPropertyValues[d]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=_.possiblyEvaluate({})}}}yn("DataDrivenProperty",Fn),yn("DataConstantProperty",Rn),yn("CrossFadedDataDrivenProperty",kc),yn("CrossFadedProperty",ju),yn("ColorRampProperty",Wo);const ug="-transition";class Aa extends Ee{constructor(a,d){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),d.layout&&(this._unevaluatedLayout=new Rh(d.layout)),d.paint)){this._transitionablePaint=new Gd(d.paint);for(const p in a.paint)this.setPaintProperty(p,a.paint[p],{validate:!1});for(const p in a.layout)this.setLayoutProperty(p,a.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ks(d.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,d,p={}){d!=null&&this._validate(Ep,`layers.${this.id}.layout.${a}`,a,d,p)||(a!=="visibility"?this._unevaluatedLayout.setValue(a,d):this.visibility=d)}getPaintProperty(a){return a.endsWith(ug)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,d,p={}){if(d!=null&&this._validate(hl,`layers.${this.id}.paint.${a}`,a,d,p))return!1;if(a.endsWith(ug))return this._transitionablePaint.setTransition(a.slice(0,-11),d||void 0),!1;{const _=this._transitionablePaint._values[a],S=_.property.specification["property-type"]==="cross-faded-data-driven",E=_.value.isDataDriven(),P=_.value;this._transitionablePaint.setValue(a,d),this._handleSpecialPaintPropertyUpdate(a);const z=this._transitionablePaint._values[a].value;return z.isDataDriven()||E||S||this._handleOverridablePaintPropertyUpdate(a,P,z)}}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,d,p){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,d){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,d)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,d)}serialize(){const a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),Pt(a,(d,p)=>!(d===void 0||p==="layout"&&!Object.keys(d).length||p==="paint"&&!Object.keys(d).length))}_validate(a,d,p,_,S={}){return(!S||S.validate!==!1)&&rg(this,a.call($o,{key:d,layerType:this.type,objectKey:p,value:_,styleSpec:ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const a in this.paint._values){const d=this.paint.get(a);if(d instanceof Os&&Cc(d.property.specification)&&(d.value.kind==="source"||d.value.kind==="composite")&&d.value.isStateDependent)return!0}return!1}}const Lc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Dc{constructor(a,d){this._structArray=a,this._pos1=d*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,d){return a._trim(),d&&(a.isTransferred=!0,d.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const d=Object.create(this.prototype);return d.arrayBuffer=a.arrayBuffer,d.length=a.length,d.capacity=a.arrayBuffer.byteLength/d.bytesPerElement,d._refreshViews(),d}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const d=this.uint8;this._refreshViews(),d&&this.uint8.set(d)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function bi(h,a=1){let d=0,p=0;return{members:h.map(_=>{const S=Lc[_.type].BYTES_PER_ELEMENT,E=d=Zd(d,Math.max(a,S)),P=_.components||1;return p=Math.max(p,S),d+=S*P,{name:_.name,type:_.type,components:P,offset:E}}),size:Zd(d,Math.max(p,a)),alignment:a}}function Zd(h,a){return Math.ceil(h/a)*a}class ca extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d){const p=this.length;return this.resize(p+1),this.emplace(p,a,d)}emplace(a,d,p){const _=2*a;return this.int16[_+0]=d,this.int16[_+1]=p,a}}ca.prototype.bytesPerElement=4,yn("StructArrayLayout2i4",ca);class Rc extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,p)}emplace(a,d,p,_){const S=3*a;return this.int16[S+0]=d,this.int16[S+1]=p,this.int16[S+2]=_,a}}Rc.prototype.bytesPerElement=6,yn("StructArrayLayout3i6",Rc);class ja extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,a,d,p,_)}emplace(a,d,p,_,S){const E=4*a;return this.int16[E+0]=d,this.int16[E+1]=p,this.int16[E+2]=_,this.int16[E+3]=S,a}}ja.prototype.bytesPerElement=8,yn("StructArrayLayout4i8",ja);class qo extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,p,_,S,E)}emplace(a,d,p,_,S,E,P){const z=6*a;return this.int16[z+0]=d,this.int16[z+1]=p,this.int16[z+2]=_,this.int16[z+3]=S,this.int16[z+4]=E,this.int16[z+5]=P,a}}qo.prototype.bytesPerElement=12,yn("StructArrayLayout2i4i12",qo);class Oc extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,p,_,S,E)}emplace(a,d,p,_,S,E,P){const z=4*a,j=8*a;return this.int16[z+0]=d,this.int16[z+1]=p,this.uint8[j+4]=_,this.uint8[j+5]=S,this.uint8[j+6]=E,this.uint8[j+7]=P,a}}Oc.prototype.bytesPerElement=8,yn("StructArrayLayout2i4ub8",Oc);class Gi extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d){const p=this.length;return this.resize(p+1),this.emplace(p,a,d)}emplace(a,d,p){const _=2*a;return this.float32[_+0]=d,this.float32[_+1]=p,a}}Gi.prototype.bytesPerElement=8,yn("StructArrayLayout2f8",Gi);class Uu extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E,P,z,j,Z){const te=this.length;return this.resize(te+1),this.emplace(te,a,d,p,_,S,E,P,z,j,Z)}emplace(a,d,p,_,S,E,P,z,j,Z,te){const oe=10*a;return this.uint16[oe+0]=d,this.uint16[oe+1]=p,this.uint16[oe+2]=_,this.uint16[oe+3]=S,this.uint16[oe+4]=E,this.uint16[oe+5]=P,this.uint16[oe+6]=z,this.uint16[oe+7]=j,this.uint16[oe+8]=Z,this.uint16[oe+9]=te,a}}Uu.prototype.bytesPerElement=20,yn("StructArrayLayout10ui20",Uu);class Lp extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E,P,z,j,Z,te,oe){const le=this.length;return this.resize(le+1),this.emplace(le,a,d,p,_,S,E,P,z,j,Z,te,oe)}emplace(a,d,p,_,S,E,P,z,j,Z,te,oe,le){const he=12*a;return this.int16[he+0]=d,this.int16[he+1]=p,this.int16[he+2]=_,this.int16[he+3]=S,this.uint16[he+4]=E,this.uint16[he+5]=P,this.uint16[he+6]=z,this.uint16[he+7]=j,this.int16[he+8]=Z,this.int16[he+9]=te,this.int16[he+10]=oe,this.int16[he+11]=le,a}}Lp.prototype.bytesPerElement=24,yn("StructArrayLayout4i4ui4i24",Lp);class zc extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,p)}emplace(a,d,p,_){const S=3*a;return this.float32[S+0]=d,this.float32[S+1]=p,this.float32[S+2]=_,a}}zc.prototype.bytesPerElement=12,yn("StructArrayLayout3f12",zc);class $u extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint32[1*a+0]=d,a}}$u.prototype.bytesPerElement=4,yn("StructArrayLayout1ul4",$u);class Oh extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E,P,z,j){const Z=this.length;return this.resize(Z+1),this.emplace(Z,a,d,p,_,S,E,P,z,j)}emplace(a,d,p,_,S,E,P,z,j,Z){const te=10*a,oe=5*a;return this.int16[te+0]=d,this.int16[te+1]=p,this.int16[te+2]=_,this.int16[te+3]=S,this.int16[te+4]=E,this.int16[te+5]=P,this.uint32[oe+3]=z,this.uint16[te+8]=j,this.uint16[te+9]=Z,a}}Oh.prototype.bytesPerElement=20,yn("StructArrayLayout6i1ul2ui20",Oh);class Wd extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,p,_,S,E)}emplace(a,d,p,_,S,E,P){const z=6*a;return this.int16[z+0]=d,this.int16[z+1]=p,this.int16[z+2]=_,this.int16[z+3]=S,this.int16[z+4]=E,this.int16[z+5]=P,a}}Wd.prototype.bytesPerElement=12,yn("StructArrayLayout2i2i2i12",Wd);class co extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S){const E=this.length;return this.resize(E+1),this.emplace(E,a,d,p,_,S)}emplace(a,d,p,_,S,E){const P=4*a,z=8*a;return this.float32[P+0]=d,this.float32[P+1]=p,this.float32[P+2]=_,this.int16[z+6]=S,this.int16[z+7]=E,a}}co.prototype.bytesPerElement=16,yn("StructArrayLayout2f1f2i16",co);class qd extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E){const P=this.length;return this.resize(P+1),this.emplace(P,a,d,p,_,S,E)}emplace(a,d,p,_,S,E,P){const z=16*a,j=4*a,Z=8*a;return this.uint8[z+0]=d,this.uint8[z+1]=p,this.float32[j+1]=_,this.float32[j+2]=S,this.int16[Z+6]=E,this.int16[Z+7]=P,a}}qd.prototype.bytesPerElement=16,yn("StructArrayLayout2ub2f2i16",qd);class Kd extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,p)}emplace(a,d,p,_){const S=3*a;return this.uint16[S+0]=d,this.uint16[S+1]=p,this.uint16[S+2]=_,a}}Kd.prototype.bytesPerElement=6,yn("StructArrayLayout3ui6",Kd);class Yd extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze){const rt=this.length;return this.resize(rt+1),this.emplace(rt,a,d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze)}emplace(a,d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze,rt){const $e=24*a,ae=12*a,we=48*a;return this.int16[$e+0]=d,this.int16[$e+1]=p,this.uint16[$e+2]=_,this.uint16[$e+3]=S,this.uint32[ae+2]=E,this.uint32[ae+3]=P,this.uint32[ae+4]=z,this.uint16[$e+10]=j,this.uint16[$e+11]=Z,this.uint16[$e+12]=te,this.float32[ae+7]=oe,this.float32[ae+8]=le,this.uint8[we+36]=he,this.uint8[we+37]=be,this.uint8[we+38]=Me,this.uint32[ae+10]=ze,this.int16[$e+22]=rt,a}}Yd.prototype.bytesPerElement=48,yn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Yd);class Hu extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze,rt,$e,ae,we,Ge,It,Yt,Et,Ot,tn,Xt){const rn=this.length;return this.resize(rn+1),this.emplace(rn,a,d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze,rt,$e,ae,we,Ge,It,Yt,Et,Ot,tn,Xt)}emplace(a,d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze,rt,$e,ae,we,Ge,It,Yt,Et,Ot,tn,Xt,rn){const Vt=32*a,xn=16*a;return this.int16[Vt+0]=d,this.int16[Vt+1]=p,this.int16[Vt+2]=_,this.int16[Vt+3]=S,this.int16[Vt+4]=E,this.int16[Vt+5]=P,this.int16[Vt+6]=z,this.int16[Vt+7]=j,this.uint16[Vt+8]=Z,this.uint16[Vt+9]=te,this.uint16[Vt+10]=oe,this.uint16[Vt+11]=le,this.uint16[Vt+12]=he,this.uint16[Vt+13]=be,this.uint16[Vt+14]=Me,this.uint16[Vt+15]=ze,this.uint16[Vt+16]=rt,this.uint16[Vt+17]=$e,this.uint16[Vt+18]=ae,this.uint16[Vt+19]=we,this.uint16[Vt+20]=Ge,this.uint16[Vt+21]=It,this.uint16[Vt+22]=Yt,this.uint32[xn+12]=Et,this.float32[xn+13]=Ot,this.float32[xn+14]=tn,this.uint16[Vt+30]=Xt,this.uint16[Vt+31]=rn,a}}Hu.prototype.bytesPerElement=64,yn("StructArrayLayout8i15ui1ul2f2ui64",Hu);class w extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.float32[1*a+0]=d,a}}w.prototype.bytesPerElement=4,yn("StructArrayLayout1f4",w);class r extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,p)}emplace(a,d,p,_){const S=3*a;return this.uint16[6*a+0]=d,this.float32[S+1]=p,this.float32[S+2]=_,a}}r.prototype.bytesPerElement=12,yn("StructArrayLayout1ui2f12",r);class c extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d,p){const _=this.length;return this.resize(_+1),this.emplace(_,a,d,p)}emplace(a,d,p,_){const S=4*a;return this.uint32[2*a+0]=d,this.uint16[S+2]=p,this.uint16[S+3]=_,a}}c.prototype.bytesPerElement=8,yn("StructArrayLayout1ul2ui8",c);class m extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,d){const p=this.length;return this.resize(p+1),this.emplace(p,a,d)}emplace(a,d,p){const _=2*a;return this.uint16[_+0]=d,this.uint16[_+1]=p,a}}m.prototype.bytesPerElement=4,yn("StructArrayLayout2ui4",m);class v extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const d=this.length;return this.resize(d+1),this.emplace(d,a)}emplace(a,d){return this.uint16[1*a+0]=d,a}}v.prototype.bytesPerElement=2,yn("StructArrayLayout1ui2",v);class I extends fr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,d,p,_){const S=this.length;return this.resize(S+1),this.emplace(S,a,d,p,_)}emplace(a,d,p,_,S){const E=4*a;return this.float32[E+0]=d,this.float32[E+1]=p,this.float32[E+2]=_,this.float32[E+3]=S,a}}I.prototype.bytesPerElement=16,yn("StructArrayLayout4f16",I);class T extends Dc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}T.prototype.size=20;class D extends Oh{get(a){return new T(this,a)}}yn("CollisionBoxArray",D);class B extends Dc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}B.prototype.size=48;class H extends Yd{get(a){return new B(this,a)}}yn("PlacedSymbolArray",H);class Q extends Dc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Q.prototype.size=64;class re extends Hu{get(a){return new Q(this,a)}}yn("SymbolInstanceArray",re);class ie extends w{getoffsetX(a){return this.float32[1*a+0]}}yn("GlyphOffsetArray",ie);class fe extends Rc{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}yn("SymbolLineVertexArray",fe);class _e extends Dc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_e.prototype.size=12;class De extends r{get(a){return new _e(this,a)}}yn("TextAnchorOffsetArray",De);class ke extends Dc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ke.prototype.size=8;class Re extends c{get(a){return new ke(this,a)}}yn("FeatureIndexArray",Re);class je extends ca{}class We extends ca{}class Ke extends ca{}class Je extends qo{}class at extends Oc{}class nt extends Gi{}class xt extends Uu{}class Ct extends Lp{}class vt extends zc{}class jt extends $u{}class zt extends Wd{}class ln extends qd{}class nn extends Kd{}class Kt extends m{}const kn=bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Hn}=kn;class Zn{constructor(a=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=a}prepareSegment(a,d,p,_){const S=this.segments[this.segments.length-1];return a>Zn.MAX_VERTEX_ARRAY_LENGTH&&Ie(`Max vertices per segment is ${Zn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Zn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+a>Zn.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_?this.createNewSegment(d,p,_):S}createNewSegment(a,d,p){const _={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0,vaos:{}};return p!==void 0&&(_.sortKey=p),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(a,d,p){return this.prepareSegment(0,a,d,p)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const a of this.segments)for(const d in a.vaos)a.vaos[d].destroy()}static simpleSegment(a,d,p,_){return new Zn([{vertexOffset:a,primitiveOffset:d,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function Jr(h,a){return 256*(h=kt(Math.floor(h),0,255))+kt(Math.floor(a),0,255)}Zn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yn("SegmentVector",Zn);const Lr=bi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var oi,ni,or,pr={exports:{}},Zi={exports:{}},Wi={exports:{}},qi=function(){if(or)return pr.exports;or=1;var h=(oi||(oi=1,Zi.exports=function(d,p){var _,S,E,P,z,j,Z,te;for(S=d.length-(_=3&d.length),E=p,z=3432918353,j=461845907,te=0;te<S;)Z=255&d.charCodeAt(te)|(255&d.charCodeAt(++te))<<8|(255&d.charCodeAt(++te))<<16|(255&d.charCodeAt(++te))<<24,++te,E=27492+(65535&(P=5*(65535&(E=(E^=Z=(65535&(Z=(Z=(65535&Z)*z+(((Z>>>16)*z&65535)<<16)&4294967295)<<15|Z>>>17))*j+(((Z>>>16)*j&65535)<<16)&4294967295)<<13|E>>>19))+((5*(E>>>16)&65535)<<16)&4294967295))+((58964+(P>>>16)&65535)<<16);switch(Z=0,_){case 3:Z^=(255&d.charCodeAt(te+2))<<16;case 2:Z^=(255&d.charCodeAt(te+1))<<8;case 1:E^=Z=(65535&(Z=(Z=(65535&(Z^=255&d.charCodeAt(te)))*z+(((Z>>>16)*z&65535)<<16)&4294967295)<<15|Z>>>17))*j+(((Z>>>16)*j&65535)<<16)&4294967295}return E^=d.length,E=2246822507*(65535&(E^=E>>>16))+((2246822507*(E>>>16)&65535)<<16)&4294967295,E=3266489909*(65535&(E^=E>>>13))+((3266489909*(E>>>16)&65535)<<16)&4294967295,(E^=E>>>16)>>>0}),Zi.exports),a=(ni||(ni=1,Wi.exports=function(d,p){for(var _,S=d.length,E=p^S,P=0;S>=4;)_=1540483477*(65535&(_=255&d.charCodeAt(P)|(255&d.charCodeAt(++P))<<8|(255&d.charCodeAt(++P))<<16|(255&d.charCodeAt(++P))<<24))+((1540483477*(_>>>16)&65535)<<16),E=1540483477*(65535&E)+((1540483477*(E>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),S-=4,++P;switch(S){case 3:E^=(255&d.charCodeAt(P+2))<<16;case 2:E^=(255&d.charCodeAt(P+1))<<8;case 1:E=1540483477*(65535&(E^=255&d.charCodeAt(P)))+((1540483477*(E>>>16)&65535)<<16)}return E=1540483477*(65535&(E^=E>>>13))+((1540483477*(E>>>16)&65535)<<16),(E^=E>>>15)>>>0}),Wi.exports);return pr.exports=h,pr.exports.murmur3=h,pr.exports.murmur2=a,pr.exports}(),Ss=f(qi);class Ua{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,d,p,_){this.ids.push(pl(a)),this.positions.push(d,p,_)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const d=pl(a);let p=0,_=this.ids.length-1;for(;p<_;){const E=p+_>>1;this.ids[E]>=d?_=E:p=E+1}const S=[];for(;this.ids[p]===d;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(a,d){const p=new Float64Array(a.ids),_=new Uint32Array(a.positions);return ho(p,_,0,p.length-1),d&&d.push(p.buffer,_.buffer),{ids:p,positions:_}}static deserialize(a){const d=new Ua;return d.ids=a.ids,d.positions=a.positions,d.indexed=!0,d}}function pl(h){const a=+h;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:Ss(String(h))}function ho(h,a,d,p){for(;d<p;){const _=h[d+p>>1];let S=d-1,E=p+1;for(;;){do S++;while(h[S]<_);do E--;while(h[E]>_);if(S>=E)break;fo(h,S,E),fo(a,3*S,3*E),fo(a,3*S+1,3*E+1),fo(a,3*S+2,3*E+2)}E-d<p-E?(ho(h,a,d,E),d=E+1):(ho(h,a,E+1,p),p=E)}}function fo(h,a,d){const p=h[a];h[a]=h[d],h[d]=p}yn("FeaturePositionMap",Ua);class Es{constructor(a,d){this.gl=a.gl,this.location=d}}class Gu extends Es{constructor(a,d){super(a,d),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class ha extends Es{constructor(a,d){super(a,d),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class da extends Es{constructor(a,d){super(a,d),this.current=Jn.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const ml=new Float32Array(16);function po(h){return[Jr(255*h.r,255*h.g),Jr(255*h.b,255*h.a)]}class gl{constructor(a,d,p){this.value=a,this.uniformNames=d.map(_=>`u_${_}`),this.type=p}setUniform(a,d,p){a.set(p.constantOr(this.value))}getBinding(a,d,p){return this.type==="color"?new da(a,d):new Gu(a,d)}}class gi{constructor(a,d){this.uniformNames=d.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,d){this.pixelRatioFrom=d.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=d.tlbr,this.patternTo=a.tlbr}setUniform(a,d,p,_){const S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&a.set(S)}getBinding(a,d,p){return p.substr(0,9)==="u_pattern"?new ha(a,d):new Gu(a,d)}}class li{constructor(a,d,p,_){this.expression=a,this.type=p,this.maxValue=0,this.paintVertexAttributes=d.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(a,d,p,_,S){const E=this.paintVertexArray.length,P=this.expression.evaluate(new Zr(0),d,{},_,[],S);this.paintVertexArray.resize(a),this._setPaintValue(E,a,P)}updatePaintArray(a,d,p,_){const S=this.expression.evaluate({zoom:0},p,_);this._setPaintValue(a,d,S)}_setPaintValue(a,d,p){if(this.type==="color"){const _=po(p);for(let S=a;S<d;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=a;_<d;_++)this.paintVertexArray.emplace(_,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xi{constructor(a,d,p,_,S,E){this.expression=a,this.uniformNames=d.map(P=>`u_${P}_t`),this.type=p,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=d.map(P=>({name:`a_${P}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new E}populatePaintArray(a,d,p,_,S){const E=this.expression.evaluate(new Zr(this.zoom),d,{},_,[],S),P=this.expression.evaluate(new Zr(this.zoom+1),d,{},_,[],S),z=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(z,a,E,P)}updatePaintArray(a,d,p,_){const S=this.expression.evaluate({zoom:this.zoom},p,_),E=this.expression.evaluate({zoom:this.zoom+1},p,_);this._setPaintValue(a,d,S,E)}_setPaintValue(a,d,p,_){if(this.type==="color"){const S=po(p),E=po(_);for(let P=a;P<d;P++)this.paintVertexArray.emplace(P,S[0],S[1],E[0],E[1])}else{for(let S=a;S<d;S++)this.paintVertexArray.emplace(S,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,d){const p=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,_=kt(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);a.set(_)}getBinding(a,d,p){return new Gu(a,d)}}class ui{constructor(a,d,p,_,S,E){this.expression=a,this.type=d,this.useIntegerZoom=p,this.zoom=_,this.layerId=E,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(a,d,p){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(_,a,d.patterns&&d.patterns[this.layerId],p)}updatePaintArray(a,d,p,_,S){this._setPaintValues(a,d,p.patterns&&p.patterns[this.layerId],S)}_setPaintValues(a,d,p,_){if(!_||!p)return;const{min:S,mid:E,max:P}=p,z=_[S],j=_[E],Z=_[P];if(z&&j&&Z)for(let te=a;te<d;te++)this.zoomInPaintVertexArray.emplace(te,j.tl[0],j.tl[1],j.br[0],j.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],j.pixelRatio,z.pixelRatio),this.zoomOutPaintVertexArray.emplace(te,j.tl[0],j.tl[1],j.br[0],j.br[1],Z.tl[0],Z.tl[1],Z.br[0],Z.br[1],j.pixelRatio,Z.pixelRatio)}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Lr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Lr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cg{constructor(a,d,p){this.binders={},this._buffers=[];const _=[];for(const S in a.paint._values){if(!p(S))continue;const E=a.paint.get(S);if(!(E instanceof Os&&Cc(E.property.specification)))continue;const P=hg(S,a.type),z=E.value,j=E.property.specification.type,Z=E.property.useIntegerZoom,te=E.property.specification["property-type"],oe=te==="cross-faded"||te==="cross-faded-data-driven";if(z.kind==="constant")this.binders[S]=oe?new gi(z.value,P):new gl(z.value,P,j),_.push(`/u_${S}`);else if(z.kind==="source"||oe){const le=Xs(S,j,"source");this.binders[S]=oe?new ui(z,j,Z,d,le,a.id):new li(z,P,j,le),_.push(`/a_${S}`)}else{const le=Xs(S,j,"composite");this.binders[S]=new xi(z,P,j,Z,d,le),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(a){const d=this.binders[a];return d instanceof li||d instanceof xi?d.maxValue:0}populatePaintArrays(a,d,p,_,S){for(const E in this.binders){const P=this.binders[E];(P instanceof li||P instanceof xi||P instanceof ui)&&P.populatePaintArray(a,d,p,_,S)}}setConstantPatternPositions(a,d){for(const p in this.binders){const _=this.binders[p];_ instanceof gi&&_.setConstantPatternPositions(a,d)}}updatePaintArrays(a,d,p,_,S){let E=!1;for(const P in a){const z=d.getPositions(P);for(const j of z){const Z=p.feature(j.index);for(const te in this.binders){const oe=this.binders[te];if((oe instanceof li||oe instanceof xi||oe instanceof ui)&&oe.expression.isStateDependent===!0){const le=_.paint.get(te);oe.expression=le.value,oe.updatePaintArray(j.start,j.end,Z,a[P],S),E=!0}}}}return E}defines(){const a=[];for(const d in this.binders){const p=this.binders[d];(p instanceof gl||p instanceof gi)&&a.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return a}getBinderAttributes(){const a=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof li||p instanceof xi)for(let _=0;_<p.paintVertexAttributes.length;_++)a.push(p.paintVertexAttributes[_].name);else if(p instanceof ui)for(let _=0;_<Lr.members.length;_++)a.push(Lr.members[_].name)}return a}getBinderUniforms(){const a=[];for(const d in this.binders){const p=this.binders[d];if(p instanceof gl||p instanceof gi||p instanceof xi)for(const _ of p.uniformNames)a.push(_)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,d){const p=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof gl||S instanceof gi||S instanceof xi){for(const E of S.uniformNames)if(d[E]){const P=S.getBinding(a,d[E],E);p.push({name:E,property:_,binding:P})}}}return p}setUniforms(a,d,p,_){for(const{name:S,property:E,binding:P}of d)this.binders[E].setUniform(P,_,p.get(E),S)}updatePaintBuffers(a){this._buffers=[];for(const d in this.binders){const p=this.binders[d];if(a&&p instanceof ui){const _=a.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(p instanceof li||p instanceof xi)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(a){for(const d in this.binders){const p=this.binders[d];(p instanceof li||p instanceof xi||p instanceof ui)&&p.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const d=this.binders[a];(d instanceof li||d instanceof xi||d instanceof ui)&&d.destroy()}}}class Jl{constructor(a,d,p=()=>!0){this.programConfigurations={};for(const _ of a)this.programConfigurations[_.id]=new cg(_,d,p);this.needsUpload=!1,this._featureMap=new Ua,this._bufferOffset=0}populatePaintArrays(a,d,p,_,S,E){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(a,d,_,S,E);d.id!==void 0&&this._featureMap.add(d.id,p,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,d,p,_){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(a,this._featureMap,d,S,_)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const d in this.programConfigurations)this.programConfigurations[d].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function hg(h,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${a}-`,"").replace(/-/g,"_")]}function Xs(h,a,d){const p={color:{source:Gi,composite:I},number:{source:w,composite:Gi}},_=function(S){return{"line-pattern":{source:xt,composite:xt},"fill-pattern":{source:xt,composite:xt},"fill-extrusion-pattern":{source:xt,composite:xt}}[S]}(h);return _&&_[d]||p[a][d]}yn("ConstantBinder",gl),yn("CrossFadedConstantBinder",gi),yn("SourceExpressionBinder",li),yn("CrossFadedCompositeBinder",ui),yn("CompositeExpressionBinder",xi),yn("ProgramConfiguration",cg,{omit:["_buffers"]}),yn("ProgramConfigurationSet",Jl);const $a=Math.pow(2,14)-1,dg=-$a-1;function wa(h){const a=et/h.extent,d=h.loadGeometry();for(let p=0;p<d.length;p++){const _=d[p];for(let S=0;S<_.length;S++){const E=_[S],P=Math.round(E.x*a),z=Math.round(E.y*a);E.x=kt(P,dg,$a),E.y=kt(z,dg,$a),(P<E.x||P>E.x+1||z<E.y||z>E.y+1)&&Ie("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return d}function mo(h,a){return{type:h.type,id:h.id,properties:h.properties,geometry:a?wa(h):[]}}const eu=-32768;function Dp(h,a,d,p,_){h.emplaceBack(eu+8*a+p,eu+8*d+_)}class Fc{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new We,this.indexArray=new nn,this.segments=new Zn,this.programConfigurations=new Jl(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,p){const _=this.layers[0],S=[];let E=null,P=!1,z=_.type==="heatmap";if(_.type==="circle"){const Z=_;E=Z.layout.get("circle-sort-key"),P=!E.isConstant(),z=z||Z.paint.get("circle-pitch-alignment")==="map"}const j=z?d.subdivisionGranularity.circle:1;for(const{feature:Z,id:te,index:oe,sourceLayerIndex:le}of a){const he=this.layers[0]._featureFilter.needGeometry,be=mo(Z,he);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),be,p))continue;const Me=P?E.evaluate(be,{},p):void 0,ze={id:te,properties:Z.properties,type:Z.type,sourceLayerIndex:le,index:oe,geometry:he?be.geometry:wa(Z),patterns:{},sortKey:Me};S.push(ze)}P&&S.sort((Z,te)=>Z.sortKey-te.sortKey);for(const Z of S){const{geometry:te,index:oe,sourceLayerIndex:le}=Z,he=a[oe].feature;this.addFeature(Z,te,oe,p,j),d.featureIndex.insert(he,te,oe,le,this.index)}}update(a,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Hn),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,d,p,_,S=1){let E;switch(S){case 1:E=[0,7];break;case 3:E=[0,2,5,7];break;case 5:E=[0,1,3,4,6,7];break;case 7:E=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const P=E.length;for(const z of d)for(const j of z){const Z=j.x,te=j.y;if(Z<0||Z>=et||te<0||te>=et)continue;const oe=this.segments.prepareSegment(P*P,this.layoutVertexArray,this.indexArray,a.sortKey),le=oe.vertexLength;for(let he=0;he<P;he++)for(let be=0;be<P;be++)Dp(this.layoutVertexArray,Z,te,E[be],E[he]);for(let he=0;he<P-1;he++)for(let be=0;be<P-1;be++){const Me=le+he*P+be,ze=le+(he+1)*P+be;this.indexArray.emplaceBack(Me,ze+1,Me+1),this.indexArray.emplaceBack(Me,ze,ze+1)}oe.vertexLength+=P*P,oe.primitiveLength+=(P-1)*(P-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,{},_)}}function Rp(h,a){for(let d=0;d<h.length;d++)if(tu(a,h[d]))return!0;for(let d=0;d<a.length;d++)if(tu(h,a[d]))return!0;return!!hv(h,a)}function Xd(h,a,d){return!!tu(h,a)||!!fg(a,h,d)}function zh(h,a){if(h.length===1)return dv(a,h[0]);for(let d=0;d<a.length;d++){const p=a[d];for(let _=0;_<p.length;_++)if(tu(h,p[_]))return!0}for(let d=0;d<h.length;d++)if(dv(a,h[d]))return!0;for(let d=0;d<a.length;d++)if(hv(h,a[d]))return!0;return!1}function Op(h,a,d){if(h.length>1){if(hv(h,a))return!0;for(let p=0;p<a.length;p++)if(fg(a[p],h,d))return!0}for(let p=0;p<h.length;p++)if(fg(h[p],a,d))return!0;return!1}function hv(h,a){if(h.length===0||a.length===0)return!1;for(let d=0;d<h.length-1;d++){const p=h[d],_=h[d+1];for(let S=0;S<a.length-1;S++)if(t1(p,_,a[S],a[S+1]))return!0}return!1}function t1(h,a,d,p){return $(h,d,p)!==$(a,d,p)&&$(h,a,d)!==$(h,a,p)}function fg(h,a,d){const p=d*d;if(a.length===1)return h.distSqr(a[0])<p;for(let _=1;_<a.length;_++)if(zp(h,a[_-1],a[_])<p)return!0;return!1}function zp(h,a,d){const p=a.distSqr(d);if(p===0)return h.distSqr(a);const _=((h.x-a.x)*(d.x-a.x)+(h.y-a.y)*(d.y-a.y))/p;return h.distSqr(_<0?a:_>1?d:d.sub(a)._mult(_)._add(a))}function dv(h,a){for(let d=0;d<h.length;d++)if(tu(h[d],a))return!0;return!1}function tu(h,a){let d=!1;for(let p=0,_=h.length-1;p<h.length;_=p++){const S=h[p],E=h[_];S.y>a.y!=E.y>a.y&&a.x<(E.x-S.x)*(a.y-S.y)/(E.y-S.y)+S.x&&(d=!d)}return d}function fv(h,a,d){const p=d[0],_=d[2];if(h.x<p.x&&a.x<p.x||h.x>_.x&&a.x>_.x||h.y<p.y&&a.y<p.y||h.y>_.y&&a.y>_.y)return!1;const S=$(h,a,d[0]);return S!==$(h,a,d[1])||S!==$(h,a,d[2])||S!==$(h,a,d[3])}function Bc(h,a,d){const p=a.paint.get(h).value;return p.kind==="constant"?p.value:d.programConfigurations.get(a.id).getMaxValue(h)}function pg(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Fp(h,a,d,p,_){if(!a[0]&&!a[1])return h;const S=k.convert(a)._mult(_);d==="viewport"&&S._rotate(-p);const E=[];for(let P=0;P<h.length;P++)E.push(h[P].sub(S));return E}let Bp,pv;yn("CircleBucket",Fc,{omit:["layers"]});var mv={get paint(){return pv=pv||new Ys({"circle-radius":new Fn(ve.paint_circle["circle-radius"]),"circle-color":new Fn(ve.paint_circle["circle-color"]),"circle-blur":new Fn(ve.paint_circle["circle-blur"]),"circle-opacity":new Fn(ve.paint_circle["circle-opacity"]),"circle-translate":new Rn(ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Rn(ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rn(ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rn(ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Fn(ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Fn(ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Fn(ve.paint_circle["circle-stroke-opacity"])})},get layout(){return Bp=Bp||new Ys({"circle-sort-key":new Fn(ve.layout_circle["circle-sort-key"])})}};class xw extends Aa{constructor(a){super(a,mv)}createBucket(a){return new Fc(a)}queryRadius(a){const d=a;return Bc("circle-radius",this,d)+Bc("circle-stroke-width",this,d)+pg(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:a,feature:d,featureState:p,geometry:_,transform:S,pixelsToTileUnits:E,unwrappedTileID:P,getElevation:z}){const j=Fp(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,E),Z=this.paint.get("circle-radius").evaluate(d,p)+this.paint.get("circle-stroke-width").evaluate(d,p),te=this.paint.get("circle-pitch-alignment")==="map",oe=te?j:function(he,be,Me,ze){return he.map(rt=>gv(rt,be,Me,ze))}(j,S,P,z),le=te?Z*E:Z;for(const he of _)for(const be of he){const Me=te?be:gv(be,S,P,z);let ze=le;const rt=S.projectTileCoordinates(be.x,be.y,P,z).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=rt/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=S.cameraToCenterDistance/rt),Xd(oe,Me,ze))return!0}return!1}}function gv(h,a,d,p){const _=a.projectTileCoordinates(h.x,h.y,d,p).point;return new k((.5*_.x+.5)*a.width,(.5*-_.y+.5)*a.height)}class nu extends Fc{}let yv;yn("HeatmapBucket",nu,{omit:["layers"]});var n1={get paint(){return yv=yv||new Ys({"heatmap-radius":new Fn(ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Fn(ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rn(ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wo(ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rn(ve.paint_heatmap["heatmap-opacity"])})}};function vv(h,{width:a,height:d},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==a*d*p)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${a*d*p}`)}else _=new Uint8Array(a*d*p);return h.width=a,h.height=d,h.data=_,h}function _v(h,{width:a,height:d},p){if(a===h.width&&d===h.height)return;const _=vv({},{width:a,height:d},p);bv(h,_,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,a),height:Math.min(h.height,d)},p),h.width=a,h.height=d,h.data=_.data}function bv(h,a,d,p,_,S){if(_.width===0||_.height===0)return a;if(_.width>h.width||_.height>h.height||d.x>h.width-_.width||d.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>a.width||_.height>a.height||p.x>a.width-_.width||p.y>a.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const E=h.data,P=a.data;if(E===P)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<_.height;z++){const j=((d.y+z)*h.width+d.x)*S,Z=((p.y+z)*a.width+p.x)*S;for(let te=0;te<_.width*S;te++)P[Z+te]=E[j+te]}return a}class Np{constructor(a,d){vv(this,a,1,d)}resize(a){_v(this,a,1)}clone(){return new Np({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,p,_,S){bv(a,d,p,_,S,1)}}class rs{constructor(a,d){vv(this,a,4,d)}resize(a){_v(this,a,4)}replace(a,d){d?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new rs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,d,p,_,S){bv(a,d,p,_,S,4)}}function mg(h){const a={},d=h.resolution||256,p=h.clips?h.clips.length:1,_=h.image||new rs({width:d,height:p});if(Math.log(d)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${d}`);const S=(E,P,z)=>{a[h.evaluationKey]=z;const j=h.expression.evaluate(a);_.data[E+P+0]=Math.floor(255*j.r/j.a),_.data[E+P+1]=Math.floor(255*j.g/j.a),_.data[E+P+2]=Math.floor(255*j.b/j.a),_.data[E+P+3]=Math.floor(255*j.a)};if(h.clips)for(let E=0,P=0;E<p;++E,P+=4*d)for(let z=0,j=0;z<d;z++,j+=4){const Z=z/(d-1),{start:te,end:oe}=h.clips[E];S(P,j,te*(1-Z)+oe*Z)}else for(let E=0,P=0;E<d;E++,P+=4)S(0,P,E/(d-1));return _}yn("AlphaImage",Np),yn("RGBAImage",rs);const Vp="big-fb";class xv extends Aa{createBucket(a){return new nu(a)}constructor(a){super(a,n1),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mg({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Vp)&&this.heatmapFbos.delete(Vp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let jp;var Qd={get paint(){return jp=jp||new Ys({"hillshade-illumination-direction":new Rn(ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Rn(ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rn(ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rn(ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rn(ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rn(ve.paint_hillshade["hillshade-accent-color"])})}};class Xn extends Aa{constructor(a){super(a,Qd)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const gg=bi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Av}=gg;function Zu(h,a,d){const p=d.patternDependencies;let _=!1;for(const S of a){const E=S.paint.get(`${h}-pattern`);E.isConstant()||(_=!0);const P=E.constantOr(null);P&&(_=!0,p[P.to]=!0,p[P.from]=!0)}return _}function wv(h,a,d,p,_){const S=_.patternDependencies;for(const E of a){const P=E.paint.get(`${h}-pattern`).value;if(P.kind!=="constant"){let z=P.evaluate({zoom:p-1},d,{},_.availableImages),j=P.evaluate({zoom:p},d,{},_.availableImages),Z=P.evaluate({zoom:p+1},d,{},_.availableImages);z=z&&z.name?z.name:z,j=j&&j.name?j.name:j,Z=Z&&Z.name?Z.name:Z,S[z]=!0,S[j]=!0,S[Z]=!0,d.patterns[E.id]={min:z,mid:j,max:Z}}}return d}function yg(h,a,d,p,_){let S;if(_===function(E,P,z,j){let Z=0;for(let te=P,oe=z-j;te<z;te+=j)Z+=(E[oe]-E[te])*(E[te+1]+E[oe+1]),oe=te;return Z}(h,a,d,p)>0)for(let E=a;E<d;E+=p)S=o1(E/p|0,h[E],h[E+1],S);else for(let E=d-p;E>=a;E-=p)S=o1(E/p|0,h[E],h[E+1],S);return S&&Jd(S,S.next)&&($p(S),S=S.next),S}function Nc(h,a){if(!h)return h;a||(a=h);let d,p=h;do if(d=!1,p.steiner||!Jd(p,p.next)&&Ai(p.prev,p,p.next)!==0)p=p.next;else{if($p(p),p=a=p.prev,p===p.next)break;d=!0}while(d||p!==a);return a}function ms(h,a,d,p,_,S,E){if(!h)return;!E&&S&&function(z,j,Z,te){let oe=z;do oe.z===0&&(oe.z=Cv(oe.x,oe.y,j,Z,te)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==z);oe.prevZ.nextZ=null,oe.prevZ=null,function(le){let he,be=1;do{let Me,ze=le;le=null;let rt=null;for(he=0;ze;){he++;let $e=ze,ae=0;for(let Ge=0;Ge<be&&(ae++,$e=$e.nextZ,$e);Ge++);let we=be;for(;ae>0||we>0&&$e;)ae!==0&&(we===0||!$e||ze.z<=$e.z)?(Me=ze,ze=ze.nextZ,ae--):(Me=$e,$e=$e.nextZ,we--),rt?rt.nextZ=Me:le=Me,Me.prevZ=rt,rt=Me;ze=$e}rt.nextZ=null,be*=2}while(he>1)}(oe)}(h,p,_,S);let P=h;for(;h.prev!==h.next;){const z=h.prev,j=h.next;if(S?ww(h,p,_,S):Aw(h))a.push(z.i,h.i,j.i),$p(h),h=j.next,P=j.next;else if((h=j)===P){E?E===1?ms(h=r1(Nc(h),a),a,d,p,_,S,2):E===2&&Cw(h,a,d,p,_,S):ms(Nc(h),a,d,p,_,S,1);break}}}function Aw(h){const a=h.prev,d=h,p=h.next;if(Ai(a,d,p)>=0)return!1;const _=a.x,S=d.x,E=p.x,P=a.y,z=d.y,j=p.y,Z=Math.min(_,S,E),te=Math.min(P,z,j),oe=Math.max(_,S,E),le=Math.max(P,z,j);let he=p.next;for(;he!==a;){if(he.x>=Z&&he.x<=oe&&he.y>=te&&he.y<=le&&Fh(_,P,S,z,E,j,he.x,he.y)&&Ai(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function ww(h,a,d,p){const _=h.prev,S=h,E=h.next;if(Ai(_,S,E)>=0)return!1;const P=_.x,z=S.x,j=E.x,Z=_.y,te=S.y,oe=E.y,le=Math.min(P,z,j),he=Math.min(Z,te,oe),be=Math.max(P,z,j),Me=Math.max(Z,te,oe),ze=Cv(le,he,a,d,p),rt=Cv(be,Me,a,d,p);let $e=h.prevZ,ae=h.nextZ;for(;$e&&$e.z>=ze&&ae&&ae.z<=rt;){if($e.x>=le&&$e.x<=be&&$e.y>=he&&$e.y<=Me&&$e!==_&&$e!==E&&Fh(P,Z,z,te,j,oe,$e.x,$e.y)&&Ai($e.prev,$e,$e.next)>=0||($e=$e.prevZ,ae.x>=le&&ae.x<=be&&ae.y>=he&&ae.y<=Me&&ae!==_&&ae!==E&&Fh(P,Z,z,te,j,oe,ae.x,ae.y)&&Ai(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;$e&&$e.z>=ze;){if($e.x>=le&&$e.x<=be&&$e.y>=he&&$e.y<=Me&&$e!==_&&$e!==E&&Fh(P,Z,z,te,j,oe,$e.x,$e.y)&&Ai($e.prev,$e,$e.next)>=0)return!1;$e=$e.prevZ}for(;ae&&ae.z<=rt;){if(ae.x>=le&&ae.x<=be&&ae.y>=he&&ae.y<=Me&&ae!==_&&ae!==E&&Fh(P,Z,z,te,j,oe,ae.x,ae.y)&&Ai(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function r1(h,a){let d=h;do{const p=d.prev,_=d.next.next;!Jd(p,_)&&s1(p,d,d.next,_)&&ef(p,_)&&ef(_,p)&&(a.push(p.i,d.i,_.i),$p(d),$p(d.next),d=h=_),d=d.next}while(d!==h);return Nc(d)}function Cw(h,a,d,p,_,S){let E=h;do{let P=E.next.next;for(;P!==E.prev;){if(E.i!==P.i&&Sw(E,P)){let z=a1(E,P);return E=Nc(E,E.next),z=Nc(z,z.next),ms(E,a,d,p,_,S,0),void ms(z,a,d,p,_,S,0)}P=P.next}E=E.next}while(E!==h)}function i1(h,a){let d=h.x-a.x;return d===0&&(d=h.y-a.y,d===0)&&(d=(h.next.y-h.y)/(h.next.x-h.x)-(a.next.y-a.y)/(a.next.x-a.x)),d}function Iw(h,a){const d=function(_,S){let E=S;const P=_.x,z=_.y;let j,Z=-1/0;if(Jd(_,E))return E;do{if(Jd(_,E.next))return E.next;if(z<=E.y&&z>=E.next.y&&E.next.y!==E.y){const be=E.x+(z-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(be<=P&&be>Z&&(Z=be,j=E.x<E.next.x?E:E.next,be===P))return j}E=E.next}while(E!==S);if(!j)return null;const te=j,oe=j.x,le=j.y;let he=1/0;E=j;do{if(P>=E.x&&E.x>=oe&&P!==E.x&&fa(z<le?P:Z,z,oe,le,z<le?Z:P,z,E.x,E.y)){const be=Math.abs(z-E.y)/(P-E.x);ef(E,_)&&(be<he||be===he&&(E.x>j.x||E.x===j.x&&Mw(j,E)))&&(j=E,he=be)}E=E.next}while(E!==te);return j}(h,a);if(!d)return a;const p=a1(d,h);return Nc(p,p.next),Nc(d,d.next)}function Mw(h,a){return Ai(h.prev,h,a.prev)<0&&Ai(a.next,h,h.next)<0}function Cv(h,a,d,p,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-d)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-p)*_|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Wu(h){let a=h,d=h;do(a.x<d.x||a.x===d.x&&a.y<d.y)&&(d=a),a=a.next;while(a!==h);return d}function fa(h,a,d,p,_,S,E,P){return(_-E)*(a-P)>=(h-E)*(S-P)&&(h-E)*(p-P)>=(d-E)*(a-P)&&(d-E)*(S-P)>=(_-E)*(p-P)}function Fh(h,a,d,p,_,S,E,P){return!(h===E&&a===P)&&fa(h,a,d,p,_,S,E,P)}function Sw(h,a){return h.next.i!==a.i&&h.prev.i!==a.i&&!function(d,p){let _=d;do{if(_.i!==d.i&&_.next.i!==d.i&&_.i!==p.i&&_.next.i!==p.i&&s1(_,_.next,d,p))return!0;_=_.next}while(_!==d);return!1}(h,a)&&(ef(h,a)&&ef(a,h)&&function(d,p){let _=d,S=!1;const E=(d.x+p.x)/2,P=(d.y+p.y)/2;do _.y>P!=_.next.y>P&&_.next.y!==_.y&&E<(_.next.x-_.x)*(P-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==d);return S}(h,a)&&(Ai(h.prev,h,a.prev)||Ai(h,a.prev,a))||Jd(h,a)&&Ai(h.prev,h,h.next)>0&&Ai(a.prev,a,a.next)>0)}function Ai(h,a,d){return(a.y-h.y)*(d.x-a.x)-(a.x-h.x)*(d.y-a.y)}function Jd(h,a){return h.x===a.x&&h.y===a.y}function s1(h,a,d,p){const _=Up(Ai(h,a,d)),S=Up(Ai(h,a,p)),E=Up(Ai(d,p,h)),P=Up(Ai(d,p,a));return _!==S&&E!==P||!(_!==0||!Vc(h,d,a))||!(S!==0||!Vc(h,p,a))||!(E!==0||!Vc(d,h,p))||!(P!==0||!Vc(d,a,p))}function Vc(h,a,d){return a.x<=Math.max(h.x,d.x)&&a.x>=Math.min(h.x,d.x)&&a.y<=Math.max(h.y,d.y)&&a.y>=Math.min(h.y,d.y)}function Up(h){return h>0?1:h<0?-1:0}function ef(h,a){return Ai(h.prev,h,h.next)<0?Ai(h,a,h.next)>=0&&Ai(h,h.prev,a)>=0:Ai(h,a,h.prev)<0||Ai(h,h.next,a)<0}function a1(h,a){const d=Iv(h.i,h.x,h.y),p=Iv(a.i,a.x,a.y),_=h.next,S=a.prev;return h.next=a,a.prev=h,d.next=_,_.prev=d,p.next=d,d.prev=p,S.next=p,p.prev=S,p}function o1(h,a,d,p){const _=Iv(h,a,d);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function $p(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function Iv(h,a,d){return{i:h,x:a,y:d,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Bh{constructor(a,d){if(d>a)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=a,this._minGranularity=d}getGranularityForZoomLevel(a){return Math.max(Math.floor(this._baseZoomGranularity/(1<<a)),this._minGranularity,1)}}class Hp{constructor(a){this.fill=a.fill,this.line=a.line,this.tile=a.tile,this.stencil=a.stencil,this.circle=a.circle}}Hp.noSubdivision=new Hp({fill:new Bh(0,0),line:new Bh(0,0),tile:new Bh(0,0),stencil:new Bh(0,0),circle:1}),yn("SubdivisionGranularityExpression",Bh),yn("SubdivisionGranularitySetting",Hp);const tf=-32768,Nh=32767;class l1{constructor(a,d){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=a,this._granularityCellSize=et/a,this._canonical=d}_getKey(a,d){return(a+=32768)<<16|(d+=32768)<<0}_vertexToIndex(a,d){if(a<-32768||d<-32768||a>32767||d>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const p=0|Math.round(a),_=0|Math.round(d),S=this._getKey(p,_);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const E=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,E),this._vertexBuffer.push(p,_),E}_subdivideTrianglesScanline(a){if(this._granularity<2)return function(_,S){const E=[];for(let P=0;P<S.length;P+=3){const z=S[P],j=S[P+1],Z=S[P+2],te=_[2*z],oe=_[2*z+1];(_[2*j]-te)*(_[2*Z+1]-oe)-(_[2*j+1]-oe)*(_[2*Z]-te)>0?(E.push(z),E.push(Z),E.push(j)):(E.push(z),E.push(j),E.push(Z))}return E}(this._vertexBuffer,a);const d=[],p=a.length;for(let _=0;_<p;_+=3){const S=[a[_+0],a[_+1],a[_+2]],E=[this._vertexBuffer[2*a[_+0]+0],this._vertexBuffer[2*a[_+0]+1],this._vertexBuffer[2*a[_+1]+0],this._vertexBuffer[2*a[_+1]+1],this._vertexBuffer[2*a[_+2]+0],this._vertexBuffer[2*a[_+2]+1]];let P=1/0,z=1/0,j=-1/0,Z=-1/0;for(let be=0;be<3;be++){const Me=E[2*be],ze=E[2*be+1];P=Math.min(P,Me),j=Math.max(j,Me),z=Math.min(z,ze),Z=Math.max(Z,ze)}if(P===j||z===Z)continue;const te=Math.floor(P/this._granularityCellSize),oe=Math.ceil(j/this._granularityCellSize),le=Math.floor(z/this._granularityCellSize),he=Math.ceil(Z/this._granularityCellSize);if(te!==oe||le!==he)for(let be=le;be<he;be++){const Me=this._scanlineGenerateVertexRingForCellRow(be,E,S);u1(this._vertexBuffer,Me,d)}else d.push(...S)}return d}_scanlineGenerateVertexRingForCellRow(a,d,p){const _=a*this._granularityCellSize,S=_+this._granularityCellSize,E=[];for(let P=0;P<3;P++){const z=d[2*P],j=d[2*P+1],Z=d[2*(P+1)%6],te=d[(2*(P+1)+1)%6],oe=d[2*(P+2)%6],le=d[(2*(P+2)+1)%6],he=Z-z,be=te-j,Me=he===0,ze=be===0,rt=(_-j)/be,$e=(S-j)/be,ae=Math.min(rt,$e),we=Math.max(rt,$e);if(!ze&&(ae>=1||we<=0)||ze&&(j<_||j>S)){te>=_&&te<=S&&E.push(p[(P+1)%3]);continue}!ze&&ae>0&&E.push(this._vertexToIndex(z+he*ae,j+be*ae));const Ge=z+he*Math.max(ae,0),It=z+he*Math.min(we,1);Me||this._generateIntraEdgeVertices(E,z,j,Z,te,Ge,It),!ze&&we<1&&E.push(this._vertexToIndex(z+he*we,j+be*we)),(ze||te>=_&&te<=S)&&E.push(p[(P+1)%3]),!ze&&(te<=_||te>=S)&&this._generateInterEdgeVertices(E,z,j,Z,te,oe,le,It,_,S)}return E}_generateIntraEdgeVertices(a,d,p,_,S,E,P){const z=_-d,j=S-p,Z=j===0,te=Z?Math.min(d,_):Math.min(E,P),oe=Z?Math.max(d,_):Math.max(E,P),le=Math.floor(te/this._granularityCellSize)+1,he=Math.ceil(oe/this._granularityCellSize)-1;if(Z?d<_:E<P)for(let be=le;be<=he;be++){const Me=be*this._granularityCellSize;a.push(this._vertexToIndex(Me,p+j*(Me-d)/z))}else for(let be=he;be>=le;be--){const Me=be*this._granularityCellSize;a.push(this._vertexToIndex(Me,p+j*(Me-d)/z))}}_generateInterEdgeVertices(a,d,p,_,S,E,P,z,j,Z){const te=S-p,oe=E-_,le=P-S,he=(j-S)/le,be=(Z-S)/le,Me=Math.min(he,be),ze=Math.max(he,be),rt=_+oe*Me;let $e=Math.floor(Math.min(rt,z)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(rt,z)/this._granularityCellSize)-1,we=z<rt;const Ge=le===0;if(Ge&&(P===j||P===Z))return;if(Ge||Me>=1||ze<=0){const Yt=p-P,Et=E+(d-E)*Math.min((j-P)/Yt,(Z-P)/Yt);$e=Math.floor(Math.min(Et,z)/this._granularityCellSize)+1,ae=Math.ceil(Math.max(Et,z)/this._granularityCellSize)-1,we=z<Et}const It=te>0?Z:j;if(we)for(let Yt=$e;Yt<=ae;Yt++)a.push(this._vertexToIndex(Yt*this._granularityCellSize,It));else for(let Yt=ae;Yt>=$e;Yt--)a.push(this._vertexToIndex(Yt*this._granularityCellSize,It))}_generateOutline(a){const d=[];for(const p of a){const _=qu(p,this._granularity,!0),S=this._pointArrayToIndices(_),E=[];for(let P=1;P<S.length;P++)E.push(S[P-1]),E.push(S[P]);d.push(E)}return d}_handlePoles(a){let d=!1,p=!1;this._canonical&&(this._canonical.y===0&&(d=!0),this._canonical.y===(1<<this._canonical.z)-1&&(p=!0)),(d||p)&&this._fillPoles(a,d,p)}_ensureNoPoleVertices(){const a=this._vertexBuffer;for(let d=0;d<a.length;d+=2){const p=a[d+1];p===tf&&(a[d+1]=-32767),p===Nh&&(a[d+1]=32766)}}_generatePoleQuad(a,d,p,_,S,E){_>S!=(E===tf)?(a.push(d),a.push(p),a.push(this._vertexToIndex(_,E)),a.push(p),a.push(this._vertexToIndex(S,E)),a.push(this._vertexToIndex(_,E))):(a.push(p),a.push(d),a.push(this._vertexToIndex(_,E)),a.push(this._vertexToIndex(S,E)),a.push(p),a.push(this._vertexToIndex(_,E)))}_fillPoles(a,d,p){const _=this._vertexBuffer,S=et,E=a.length;for(let P=2;P<E;P+=3){const z=a[P-2],j=a[P-1],Z=a[P],te=_[2*z],oe=_[2*z+1],le=_[2*j],he=_[2*j+1],be=_[2*Z],Me=_[2*Z+1];d&&(oe===0&&he===0&&this._generatePoleQuad(a,z,j,te,le,tf),he===0&&Me===0&&this._generatePoleQuad(a,j,Z,le,be,tf),Me===0&&oe===0&&this._generatePoleQuad(a,Z,z,be,te,tf)),p&&(oe===S&&he===S&&this._generatePoleQuad(a,z,j,te,le,Nh),he===S&&Me===S&&this._generatePoleQuad(a,j,Z,le,be,Nh),Me===S&&oe===S&&this._generatePoleQuad(a,Z,z,be,te,Nh))}}_initializeVertices(a){for(let d=0;d<a.length;d+=2)this._vertexToIndex(a[d],a[d+1])}subdividePolygonInternal(a,d){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:p,holeIndices:_}=function(P){const z=[],j=[];for(const Z of P)if(Z.length!==0){Z!==P[0]&&z.push(j.length/2);for(let te=0;te<Z.length;te++)j.push(Z[te].x),j.push(Z[te].y)}return{flattened:j,holeIndices:z}}(a);let S;this._initializeVertices(p);try{const P=function(j,Z,te=2){const oe=Z&&Z.length,le=oe?Z[0]*te:j.length;let he=yg(j,0,le,te,!0);const be=[];if(!he||he.next===he.prev)return be;let Me,ze,rt;if(oe&&(he=function($e,ae,we,Ge){const It=[];for(let Yt=0,Et=ae.length;Yt<Et;Yt++){const Ot=yg($e,ae[Yt]*Ge,Yt<Et-1?ae[Yt+1]*Ge:$e.length,Ge,!1);Ot===Ot.next&&(Ot.steiner=!0),It.push(Wu(Ot))}It.sort(i1);for(let Yt=0;Yt<It.length;Yt++)we=Iw(It[Yt],we);return we}(j,Z,he,te)),j.length>80*te){Me=1/0,ze=1/0;let $e=-1/0,ae=-1/0;for(let we=te;we<le;we+=te){const Ge=j[we],It=j[we+1];Ge<Me&&(Me=Ge),It<ze&&(ze=It),Ge>$e&&($e=Ge),It>ae&&(ae=It)}rt=Math.max($e-Me,ae-ze),rt=rt!==0?32767/rt:0}return ms(he,be,te,Me,ze,rt,0),be}(p,_),z=this._convertIndices(p,P);S=this._subdivideTrianglesScanline(z)}catch(P){console.error(P)}let E=[];return d&&(E=this._generateOutline(a)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:E}}_convertIndices(a,d){const p=[];for(let _=0;_<d.length;_++)p.push(this._vertexToIndex(a[2*d[_]],a[2*d[_]+1]));return p}_pointArrayToIndices(a){const d=[];for(let p=0;p<a.length;p++){const _=a[p];d.push(this._vertexToIndex(_.x,_.y))}return d}}function nf(h,a,d,p=!0){return new l1(d,a).subdividePolygonInternal(h,p)}function qu(h,a,d=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const p=h[0],_=h[h.length-1],S=d&&(p.x!==_.x||p.y!==_.y);if(a<2)return S?[...h,h[0]]:[...h];const E=Math.floor(et/a),P=[];P.push(new k(h[0].x,h[0].y));const z=h.length,j=S?z:z-1;for(let Z=0;Z<j;Z++){const te=h[Z],oe=Z<z-1?h[Z+1]:h[0],le=te.x,he=te.y,be=oe.x,Me=oe.y,ze=le!==be,rt=he!==Me;if(!ze&&!rt)continue;const $e=be-le,ae=Me-he,we=Math.abs($e),Ge=Math.abs(ae);let It=le,Yt=he;for(;;){const Ot=$e>0?(Math.floor(It/E)+1)*E:(Math.ceil(It/E)-1)*E,tn=ae>0?(Math.floor(Yt/E)+1)*E:(Math.ceil(Yt/E)-1)*E,Xt=Math.abs(It-Ot),rn=Math.abs(Yt-tn),Vt=Math.abs(It-be),xn=Math.abs(Yt-Me),Bn=ze?Xt/we:Number.POSITIVE_INFINITY,On=rt?rn/Ge:Number.POSITIVE_INFINITY;if((Vt<=Xt||!ze)&&(xn<=rn||!rt))break;if(Bn<On&&ze||!rt){It=Ot,Yt+=ae*Bn;const En=new k(It,Math.round(Yt));P[P.length-1].x===En.x&&P[P.length-1].y===En.y||P.push(En)}else{It+=$e*On,Yt=tn;const En=new k(Math.round(It),Yt);P[P.length-1].x===En.x&&P[P.length-1].y===En.y||P.push(En)}}const Et=new k(be,Me);P[P.length-1].x===Et.x&&P[P.length-1].y===Et.y||P.push(Et)}return P}function u1(h,a,d){if(a.length===0)throw new Error("Subdivision vertex ring is empty.");let p=0,_=h[2*a[0]];for(let z=1;z<a.length;z++){const j=h[2*a[z]];j<_&&(_=j,p=z)}const S=a.length;let E=p,P=(E+1)%S;for(;;){const z=E-1>=0?E-1:S-1,j=(P+1)%S,Z=h[2*a[z]],te=h[2*a[j]],oe=h[2*a[E]],le=h[2*a[E]+1],he=h[2*a[P]+1];let be=!1;if(Z<te)be=!0;else if(Z>te)be=!1;else{const Me=he-le,ze=-(h[2*a[P]]-oe),rt=le<he?1:-1;((Z-oe)*Me+(h[2*a[z]+1]-le)*ze)*rt>((te-oe)*Me+(h[2*a[j]+1]-le)*ze)*rt&&(be=!0)}if(be){const Me=a[z],ze=a[E],rt=a[P];Me!==ze&&Me!==rt&&ze!==rt&&d.push(rt,ze,Me),E--,E<0&&(E=S-1)}else{const Me=a[j],ze=a[E],rt=a[P];Me!==ze&&Me!==rt&&ze!==rt&&d.push(rt,ze,Me),P++,P>=S&&(P=0)}if(z===j)break}}function Mv(h,a,d,p,_,S,E,P,z){const j=_.length/2,Z=E&&P&&z;if(j<Zn.MAX_VERTEX_ARRAY_LENGTH){const te=a.prepareSegment(j,d,p),oe=te.vertexLength;for(let be=0;be<S.length;be+=3)p.emplaceBack(oe+S[be],oe+S[be+1],oe+S[be+2]);let le,he;te.vertexLength+=j,te.primitiveLength+=S.length/3,Z&&(he=E.prepareSegment(j,d,P),le=he.vertexLength,he.vertexLength+=j);for(let be=0;be<_.length;be+=2)h(_[be],_[be+1]);if(Z)for(let be=0;be<z.length;be++){const Me=z[be];for(let ze=1;ze<Me.length;ze+=2)P.emplaceBack(le+Me[ze-1],le+Me[ze]);he.primitiveLength+=Me.length/2}}else(function(te,oe,le,he,be,Me){const ze=[];for(let Ge=0;Ge<he.length/2;Ge++)ze.push(-1);const rt={count:0};let $e=0,ae=te.getOrCreateLatestSegment(oe,le),we=ae.vertexLength;for(let Ge=2;Ge<be.length;Ge+=3){const It=be[Ge-2],Yt=be[Ge-1],Et=be[Ge];let Ot=ze[It]<$e,tn=ze[Yt]<$e,Xt=ze[Et]<$e;ae.vertexLength+((Ot?1:0)+(tn?1:0)+(Xt?1:0))>Zn.MAX_VERTEX_ARRAY_LENGTH&&(ae=te.createNewSegment(oe,le),$e=rt.count,Ot=!0,tn=!0,Xt=!0,we=0);const rn=jc(ze,he,Me,rt,It,Ot,ae),Vt=jc(ze,he,Me,rt,Yt,tn,ae),xn=jc(ze,he,Me,rt,Et,Xt,ae);le.emplaceBack(we+rn-$e,we+Vt-$e,we+xn-$e),ae.primitiveLength++}})(a,d,p,_,S,h),Z&&function(te,oe,le,he,be,Me){const ze=[];for(let Ge=0;Ge<he.length/2;Ge++)ze.push(-1);const rt={count:0};let $e=0,ae=te.getOrCreateLatestSegment(oe,le),we=ae.vertexLength;for(let Ge=0;Ge<be.length;Ge++){const It=be[Ge];for(let Yt=1;Yt<be[Ge].length;Yt+=2){const Et=It[Yt-1],Ot=It[Yt];let tn=ze[Et]<$e,Xt=ze[Ot]<$e;ae.vertexLength+((tn?1:0)+(Xt?1:0))>Zn.MAX_VERTEX_ARRAY_LENGTH&&(ae=te.createNewSegment(oe,le),$e=rt.count,tn=!0,Xt=!0,we=0);const rn=jc(ze,he,Me,rt,Et,tn,ae),Vt=jc(ze,he,Me,rt,Ot,Xt,ae);le.emplaceBack(we+rn-$e,we+Vt-$e),ae.primitiveLength++}}}(E,d,P,_,z,h),a.forceNewSegmentOnNextPrepare(),E==null||E.forceNewSegmentOnNextPrepare()}function jc(h,a,d,p,_,S,E){if(S){const P=p.count;return d(a[2*_],a[2*_+1]),h[_]=p.count,p.count++,E.vertexLength++,P}return h[_]}class vg{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ke,this.indexArray=new nn,this.indexArray2=new Kt,this.programConfigurations=new Jl(a.layers,a.zoom),this.segments=new Zn,this.segments2=new Zn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,p){this.hasPattern=Zu("fill",this.layers,d);const _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),E=[];for(const{feature:P,id:z,index:j,sourceLayerIndex:Z}of a){const te=this.layers[0]._featureFilter.needGeometry,oe=mo(P,te);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),oe,p))continue;const le=S?_.evaluate(oe,{},p,d.availableImages):void 0,he={id:z,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:j,geometry:te?oe.geometry:wa(P),patterns:{},sortKey:le};E.push(he)}S&&E.sort((P,z)=>P.sortKey-z.sortKey);for(const P of E){const{geometry:z,index:j,sourceLayerIndex:Z}=P;if(this.hasPattern){const te=wv("fill",this.layers,P,this.zoom,d);this.patternFeatures.push(te)}else this.addFeature(P,z,j,p,{},d.subdivisionGranularity);d.featureIndex.insert(a[j].feature,z,j,Z,this.index)}}update(a,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,p)}addFeatures(a,d,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,d,p,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Av),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,d,p,_,S,E){for(const P of Td(d,500)){const z=nf(P,_,E.fill.getGranularityForZoomLevel(_.z)),j=this.layoutVertexArray;Mv((Z,te)=>{j.emplaceBack(Z,te)},this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles,this.segments2,this.indexArray2,z.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,_)}}let yl,Uc;yn("FillBucket",vg,{omit:["layers","patternFeatures"]});var Ew={get paint(){return Uc=Uc||new Ys({"fill-antialias":new Rn(ve.paint_fill["fill-antialias"]),"fill-opacity":new Fn(ve.paint_fill["fill-opacity"]),"fill-color":new Fn(ve.paint_fill["fill-color"]),"fill-outline-color":new Fn(ve.paint_fill["fill-outline-color"]),"fill-translate":new Rn(ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Rn(ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new kc(ve.paint_fill["fill-pattern"])})},get layout(){return yl=yl||new Ys({"fill-sort-key":new Fn(ve.layout_fill["fill-sort-key"])})}};class c1 extends Aa{constructor(a){super(a,Ew)}recalculate(a,d){super.recalculate(a,d);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new vg(a)}queryRadius(){return pg(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:a,geometry:d,transform:p,pixelsToTileUnits:_}){return zh(Fp(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-p.bearingInRadians,_),d)}isTileClipped(){return!0}}const Tw=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Pw=bi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:kw}=Tw;var Sv,h1,Ev,d1,Tv,f1,p1,_g={};function Pv(){if(h1)return Sv;h1=1;var h=x();function a(_,S,E,P,z){this.properties={},this.extent=E,this.type=0,this._pbf=_,this._geometry=-1,this._keys=P,this._values=z,_.readFields(d,this,S)}function d(_,S,E){_==1?S.id=E.readVarint():_==2?function(P,z){for(var j=P.readVarint()+P.pos;P.pos<j;){var Z=z._keys[P.readVarint()],te=z._values[P.readVarint()];z.properties[Z]=te}}(E,S):_==3?S.type=E.readVarint():_==4&&(S._geometry=E.pos)}function p(_){for(var S,E,P=0,z=0,j=_.length,Z=j-1;z<j;Z=z++)P+=((E=_[Z]).x-(S=_[z]).x)*(S.y+E.y);return P}return Sv=a,a.types=["Unknown","Point","LineString","Polygon"],a.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var S,E=_.readVarint()+_.pos,P=1,z=0,j=0,Z=0,te=[];_.pos<E;){if(z<=0){var oe=_.readVarint();P=7&oe,z=oe>>3}if(z--,P===1||P===2)j+=_.readSVarint(),Z+=_.readSVarint(),P===1&&(S&&te.push(S),S=[]),S.push(new h(j,Z));else{if(P!==7)throw new Error("unknown command "+P);S&&S.push(S[0].clone())}}return S&&te.push(S),te},a.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var S=_.readVarint()+_.pos,E=1,P=0,z=0,j=0,Z=1/0,te=-1/0,oe=1/0,le=-1/0;_.pos<S;){if(P<=0){var he=_.readVarint();E=7&he,P=he>>3}if(P--,E===1||E===2)(z+=_.readSVarint())<Z&&(Z=z),z>te&&(te=z),(j+=_.readSVarint())<oe&&(oe=j),j>le&&(le=j);else if(E!==7)throw new Error("unknown command "+E)}return[Z,oe,te,le]},a.prototype.toGeoJSON=function(_,S,E){var P,z,j=this.extent*Math.pow(2,E),Z=this.extent*_,te=this.extent*S,oe=this.loadGeometry(),le=a.types[this.type];function he(ze){for(var rt=0;rt<ze.length;rt++){var $e=ze[rt];ze[rt]=[360*($e.x+Z)/j-180,360/Math.PI*Math.atan(Math.exp((180-360*($e.y+te)/j)*Math.PI/180))-90]}}switch(this.type){case 1:var be=[];for(P=0;P<oe.length;P++)be[P]=oe[P][0];he(oe=be);break;case 2:for(P=0;P<oe.length;P++)he(oe[P]);break;case 3:for(oe=function(ze){var rt=ze.length;if(rt<=1)return[ze];for(var $e,ae,we=[],Ge=0;Ge<rt;Ge++){var It=p(ze[Ge]);It!==0&&(ae===void 0&&(ae=It<0),ae===It<0?($e&&we.push($e),$e=[ze[Ge]]):$e.push(ze[Ge]))}return $e&&we.push($e),we}(oe),P=0;P<oe.length;P++)for(z=0;z<oe[P].length;z++)he(oe[P][z])}oe.length===1?oe=oe[0]:le="Multi"+le;var Me={type:"Feature",geometry:{type:le,coordinates:oe},properties:this.properties};return"id"in this&&(Me.id=this.id),Me},Sv}function kv(){if(d1)return Ev;d1=1;var h=Pv();function a(p,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(d,this,_),this.length=this._features.length}function d(p,_,S){p===15?_.version=S.readVarint():p===1?_.name=S.readString():p===5?_.extent=S.readVarint():p===2?_._features.push(S.pos):p===3?_._keys.push(S.readString()):p===4&&_._values.push(function(E){for(var P=null,z=E.readVarint()+E.pos;E.pos<z;){var j=E.readVarint()>>3;P=j===1?E.readString():j===2?E.readFloat():j===3?E.readDouble():j===4?E.readVarint64():j===5?E.readVarint():j===6?E.readSVarint():j===7?E.readBoolean():null}return P}(S))}return Ev=a,a.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var _=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,_,this.extent,this._keys,this._values)},Ev}function Lv(){return p1||(p1=1,_g.VectorTile=function(){if(f1)return Tv;f1=1;var h=kv();function a(d,p,_){if(d===3){var S=new h(_,_.readVarint()+_.pos);S.length&&(p[S.name]=S)}}return Tv=function(d,p){this.layers=d.readFields(a,{},p)},Tv}(),_g.VectorTileFeature=Pv(),_g.VectorTileLayer=kv()),_g}var Gp=f(Lv());const Lw=Gp.VectorTileFeature.types,Dv=Math.pow(2,13);function rf(h,a,d,p,_,S,E,P){h.emplaceBack(a,d,2*Math.floor(p*Dv)+E,_*Dv*2,S*Dv*2,Math.round(P))}class Rv{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Je,this.centroidVertexArray=new je,this.indexArray=new nn,this.programConfigurations=new Jl(a.layers,a.zoom),this.segments=new Zn,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,p){this.features=[],this.hasPattern=Zu("fill-extrusion",this.layers,d);for(const{feature:_,id:S,index:E,sourceLayerIndex:P}of a){const z=this.layers[0]._featureFilter.needGeometry,j=mo(_,z);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),j,p))continue;const Z={id:S,sourceLayerIndex:P,index:E,geometry:z?j.geometry:wa(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(wv("fill-extrusion",this.layers,Z,this.zoom,d)):this.addFeature(Z,Z.geometry,E,p,{},d.subdivisionGranularity),d.featureIndex.insert(_,Z.geometry,E,P,this.index,!0)}}addFeatures(a,d,p){for(const _ of this.features){const{geometry:S}=_;this.addFeature(_,S,_.index,d,p,a.subdivisionGranularity)}}update(a,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,kw),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,Pw.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,d,p,_,S,E){for(const P of Td(d,500)){const z={x:0,y:0,sampleCount:0},j=this.layoutVertexArray.length;this.processPolygon(z,_,a,P,E);const Z=this.layoutVertexArray.length-j,te=Math.floor(z.x/z.sampleCount),oe=Math.floor(z.y/z.sampleCount);for(let le=0;le<Z;le++)this.centroidVertexArray.emplaceBack(te,oe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,_)}processPolygon(a,d,p,_,S){if(_.length<1||m1(_[0]))return;for(const te of _)te.length!==0&&Dw(a,te);const E={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},P=S.fill.getGranularityForZoomLevel(d.z),z=Lw[p.type]==="Polygon";for(const te of _){if(te.length===0||m1(te))continue;const oe=qu(te,P,z);this._generateSideFaces(oe,E)}if(!z)return;const j=nf(_,d,P,!1),Z=this.layoutVertexArray;Mv((te,oe)=>{rf(Z,te,oe,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles)}_generateSideFaces(a,d){let p=0;for(let _=1;_<a.length;_++){const S=a[_],E=a[_-1];if(Rw(S,E))continue;d.segment.vertexLength+4>Zn.MAX_VERTEX_ARRAY_LENGTH&&(d.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const P=S.sub(E)._perp()._unit(),z=E.dist(S);p+z>32768&&(p=0),rf(this.layoutVertexArray,S.x,S.y,P.x,P.y,0,0,p),rf(this.layoutVertexArray,S.x,S.y,P.x,P.y,0,1,p),p+=z,rf(this.layoutVertexArray,E.x,E.y,P.x,P.y,0,0,p),rf(this.layoutVertexArray,E.x,E.y,P.x,P.y,0,1,p);const j=d.segment.vertexLength;this.indexArray.emplaceBack(j,j+2,j+1),this.indexArray.emplaceBack(j+1,j+2,j+3),d.segment.vertexLength+=4,d.segment.primitiveLength+=2}}}function Dw(h,a){for(let d=0;d<a.length;d++){const p=a[d];d===a.length-1&&a[0].x===p.x&&a[0].y===p.y||(h.x+=p.x,h.y+=p.y,h.sampleCount++)}}function Rw(h,a){return h.x===a.x&&(h.x<0||h.x>et)||h.y===a.y&&(h.y<0||h.y>et)}function m1(h){return h.every(a=>a.x<0)||h.every(a=>a.x>et)||h.every(a=>a.y<0)||h.every(a=>a.y>et)}let g1;yn("FillExtrusionBucket",Rv,{omit:["layers","features"]});var Ow={get paint(){return g1=g1||new Ys({"fill-extrusion-opacity":new Rn(ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Fn(ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rn(ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rn(ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new kc(ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Fn(ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Fn(ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rn(ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ko extends Aa{constructor(a){super(a,Ow)}createBucket(a){return new Rv(a)}queryRadius(){return pg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:a,feature:d,featureState:p,geometry:_,transform:S,pixelsToTileUnits:E,pixelPosMatrix:P}){const z=Fp(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,E),j=this.paint.get("fill-extrusion-height").evaluate(d,p),Z=this.paint.get("fill-extrusion-base").evaluate(d,p),te=function(le,he,be){const Me=[];for(const ze of le){const rt=[ze.x,ze.y,0,1];K(rt,rt,he),Me.push(new k(rt[0]/rt[3],rt[1]/rt[3]))}return Me}(z,P),oe=function(le,he,be,Me){const ze=[],rt=[],$e=Me[8]*he,ae=Me[9]*he,we=Me[10]*he,Ge=Me[11]*he,It=Me[8]*be,Yt=Me[9]*be,Et=Me[10]*be,Ot=Me[11]*be;for(const tn of le){const Xt=[],rn=[];for(const Vt of tn){const xn=Vt.x,Bn=Vt.y,On=Me[0]*xn+Me[4]*Bn+Me[12],En=Me[1]*xn+Me[5]*Bn+Me[13],mr=Me[2]*xn+Me[6]*Bn+Me[14],Ci=Me[3]*xn+Me[7]*Bn+Me[15],as=mr+we,Fs=Ci+Ge,Bs=On+It,Ea=En+Yt,Ts=mr+Et,yi=Ci+Ot,gs=new k((On+$e)/Fs,(En+ae)/Fs);gs.z=as/Fs,Xt.push(gs);const Ps=new k(Bs/yi,Ea/yi);Ps.z=Ts/yi,rn.push(Ps)}ze.push(Xt),rt.push(rn)}return[ze,rt]}(_,Z,j,P);return function(le,he,be){let Me=1/0;zh(be,he)&&(Me=y1(be,he[0]));for(let ze=0;ze<he.length;ze++){const rt=he[ze],$e=le[ze];for(let ae=0;ae<rt.length-1;ae++){const we=rt[ae],Ge=[we,rt[ae+1],$e[ae+1],$e[ae],we];Rp(be,Ge)&&(Me=Math.min(Me,y1(be,Ge)))}}return Me!==1/0&&Me}(oe[0],oe[1],te)}}function Zp(h,a){return h.x*a.x+h.y*a.y}function y1(h,a){if(h.length===1){let d=0;const p=a[d++];let _;for(;!_||p.equals(_);)if(_=a[d++],!_)return 1/0;for(;d<a.length;d++){const S=a[d],E=h[0],P=_.sub(p),z=S.sub(p),j=E.sub(p),Z=Zp(P,P),te=Zp(P,z),oe=Zp(z,z),le=Zp(j,P),he=Zp(j,z),be=Z*oe-te*te,Me=(oe*le-te*he)/be,ze=(Z*he-te*le)/be,rt=p.z*(1-Me-ze)+_.z*Me+S.z*ze;if(isFinite(rt))return rt}return 1/0}{let d=1/0;for(const p of a)d=Math.min(d,p.z);return d}}const zw=bi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:v1}=zw,Fw=bi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Bw}=Fw,Nw=Gp.VectorTileFeature.types,Vw=Math.cos(Math.PI/180*37.5),bg=Math.pow(2,14)/.5;class Ov{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(d=>d.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(d=>{this.gradients[d.id]={}}),this.layoutVertexArray=new at,this.layoutVertexArray2=new nt,this.indexArray=new nn,this.programConfigurations=new Jl(a.layers,a.zoom),this.segments=new Zn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(d=>d.isStateDependent()).map(d=>d.id)}populate(a,d,p){this.hasPattern=Zu("line",this.layers,d);const _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),E=[];for(const{feature:P,id:z,index:j,sourceLayerIndex:Z}of a){const te=this.layers[0]._featureFilter.needGeometry,oe=mo(P,te);if(!this.layers[0]._featureFilter.filter(new Zr(this.zoom),oe,p))continue;const le=S?_.evaluate(oe,{},p):void 0,he={id:z,properties:P.properties,type:P.type,sourceLayerIndex:Z,index:j,geometry:te?oe.geometry:wa(P),patterns:{},sortKey:le};E.push(he)}S&&E.sort((P,z)=>P.sortKey-z.sortKey);for(const P of E){const{geometry:z,index:j,sourceLayerIndex:Z}=P;if(this.hasPattern){const te=wv("line",this.layers,P,this.zoom,d);this.patternFeatures.push(te)}else this.addFeature(P,z,j,p,{},d.subdivisionGranularity);d.featureIndex.insert(a[j].feature,z,j,Z,this.index)}}update(a,d,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,d,this.stateDependentLayers,p)}addFeatures(a,d,p){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,d,p,a.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Bw)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,v1),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,d,p,_,S,E){const P=this.layers[0].layout,z=P.get("line-join").evaluate(a,{}),j=P.get("line-cap"),Z=P.get("line-miter-limit"),te=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const oe of d)this.addLine(oe,a,z,j,Z,te,_,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,p,S,_)}addLine(a,d,p,_,S,E,P,z){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,a=qu(a,P?z.line.getGranularityForZoomLevel(P.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let $e=0;$e<a.length-1;$e++)this.totalDistance+=a[$e].dist(a[$e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=Nw[d.type]==="Polygon";let Z=a.length;for(;Z>=2&&a[Z-1].equals(a[Z-2]);)Z--;let te=0;for(;te<Z-1&&a[te].equals(a[te+1]);)te++;if(Z<(j?3:2))return;p==="bevel"&&(S=1.05);const oe=this.overscaling<=16?15*et/(512*this.overscaling):0,le=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray);let he,be,Me,ze,rt;this.e1=this.e2=-1,j&&(he=a[Z-2],rt=a[te].sub(he)._unit()._perp());for(let $e=te;$e<Z;$e++){if(Me=$e===Z-1?j?a[te+1]:void 0:a[$e+1],Me&&a[$e].equals(Me))continue;rt&&(ze=rt),he&&(be=he),he=a[$e],rt=Me?Me.sub(he)._unit()._perp():ze,ze=ze||rt;let ae=ze.add(rt);ae.x===0&&ae.y===0||ae._unit();const we=ze.x*rt.x+ze.y*rt.y,Ge=ae.x*rt.x+ae.y*rt.y,It=Ge!==0?1/Ge:1/0,Yt=2*Math.sqrt(2-2*Ge),Et=Ge<Vw&&be&&Me,Ot=ze.x*rt.y-ze.y*rt.x>0;if(Et&&$e>te){const rn=he.dist(be);if(rn>2*oe){const Vt=he.sub(he.sub(be)._mult(oe/rn)._round());this.updateDistance(be,Vt),this.addCurrentVertex(Vt,ze,0,0,le),be=Vt}}const tn=be&&Me;let Xt=tn?p:j?"butt":_;if(tn&&Xt==="round"&&(It<E?Xt="miter":It<=2&&(Xt="fakeround")),Xt==="miter"&&It>S&&(Xt="bevel"),Xt==="bevel"&&(It>2&&(Xt="flipbevel"),It<S&&(Xt="miter")),be&&this.updateDistance(be,he),Xt==="miter")ae._mult(It),this.addCurrentVertex(he,ae,0,0,le);else if(Xt==="flipbevel"){if(It>100)ae=rt.mult(-1);else{const rn=It*ze.add(rt).mag()/ze.sub(rt).mag();ae._perp()._mult(rn*(Ot?-1:1))}this.addCurrentVertex(he,ae,0,0,le),this.addCurrentVertex(he,ae.mult(-1),0,0,le)}else if(Xt==="bevel"||Xt==="fakeround"){const rn=-Math.sqrt(It*It-1),Vt=Ot?rn:0,xn=Ot?0:rn;if(be&&this.addCurrentVertex(he,ze,Vt,xn,le),Xt==="fakeround"){const Bn=Math.round(180*Yt/Math.PI/20);for(let On=1;On<Bn;On++){let En=On/Bn;if(En!==.5){const Ci=En-.5;En+=En*Ci*(En-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Ci*Ci+(.848013+we*(.215638*we-1.06021)))}const mr=rt.sub(ze)._mult(En)._add(ze)._unit()._mult(Ot?-1:1);this.addHalfVertex(he,mr.x,mr.y,!1,Ot,0,le)}}Me&&this.addCurrentVertex(he,rt,-Vt,-xn,le)}else if(Xt==="butt")this.addCurrentVertex(he,ae,0,0,le);else if(Xt==="square"){const rn=be?1:-1;this.addCurrentVertex(he,ae,rn,rn,le)}else Xt==="round"&&(be&&(this.addCurrentVertex(he,ze,0,0,le),this.addCurrentVertex(he,ze,1,1,le,!0)),Me&&(this.addCurrentVertex(he,rt,-1,-1,le,!0),this.addCurrentVertex(he,rt,0,0,le)));if(Et&&$e<Z-1){const rn=he.dist(Me);if(rn>2*oe){const Vt=he.add(Me.sub(he)._mult(oe/rn)._round());this.updateDistance(he,Vt),this.addCurrentVertex(Vt,rt,0,0,le),he=Vt}}}}addCurrentVertex(a,d,p,_,S,E=!1){const P=d.y*_-d.x,z=-d.y-d.x*_;this.addHalfVertex(a,d.x+d.y*p,d.y-d.x*p,E,!1,p,S),this.addHalfVertex(a,P,z,E,!0,-_,S),this.distance>bg/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,d,p,_,S,E))}addHalfVertex({x:a,y:d},p,_,S,E,P,z){const j=.5*(this.lineClips?this.scaledDistance*(bg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a<<1)+(S?1:0),(d<<1)+(E?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(P===0?0:P<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Z=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Z,this.e2),z.primitiveLength++),E?this.e2=Z:this.e1=Z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,d){this.distance+=a.dist(d),this.updateScaledDistance()}}let _1,b1;yn("LineBucket",Ov,{omit:["layers","patternFeatures"]});var x1={get paint(){return b1=b1||new Ys({"line-opacity":new Fn(ve.paint_line["line-opacity"]),"line-color":new Fn(ve.paint_line["line-color"]),"line-translate":new Rn(ve.paint_line["line-translate"]),"line-translate-anchor":new Rn(ve.paint_line["line-translate-anchor"]),"line-width":new Fn(ve.paint_line["line-width"]),"line-gap-width":new Fn(ve.paint_line["line-gap-width"]),"line-offset":new Fn(ve.paint_line["line-offset"]),"line-blur":new Fn(ve.paint_line["line-blur"]),"line-dasharray":new ju(ve.paint_line["line-dasharray"]),"line-pattern":new kc(ve.paint_line["line-pattern"]),"line-gradient":new Wo(ve.paint_line["line-gradient"])})},get layout(){return _1=_1||new Ys({"line-cap":new Rn(ve.layout_line["line-cap"]),"line-join":new Fn(ve.layout_line["line-join"]),"line-miter-limit":new Rn(ve.layout_line["line-miter-limit"]),"line-round-limit":new Rn(ve.layout_line["line-round-limit"]),"line-sort-key":new Fn(ve.layout_line["line-sort-key"])})}};class jw extends Fn{possiblyEvaluate(a,d){return d=new Zr(Math.floor(d.zoom),{now:d.now,fadeDuration:d.fadeDuration,zoomHistory:d.zoomHistory,transition:d.transition}),super.possiblyEvaluate(a,d)}evaluate(a,d,p,_){return d=gt({},d,{zoom:Math.floor(d.zoom)}),super.evaluate(a,d,p,_)}}let xg;class Uw extends Aa{constructor(a){super(a,x1),this.gradientVersion=0,xg||(xg=new jw(x1.paint.properties["line-width"].specification),xg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const d=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(d)&&d._styleExpression.expression instanceof Vi,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,d){super.recalculate(a,d),this.paint._values["line-floorwidth"]=xg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new Ov(a)}queryRadius(a){const d=a,p=A1(Bc("line-width",this,d),Bc("line-gap-width",this,d)),_=Bc("line-offset",this,d);return p/2+Math.abs(_)+pg(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:a,feature:d,featureState:p,geometry:_,transform:S,pixelsToTileUnits:E}){const P=Fp(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,E),z=E/2*A1(this.paint.get("line-width").evaluate(d,p),this.paint.get("line-gap-width").evaluate(d,p)),j=this.paint.get("line-offset").evaluate(d,p);return j&&(_=function(Z,te){const oe=[];for(let le=0;le<Z.length;le++){const he=Z[le],be=[];for(let Me=0;Me<he.length;Me++){const ze=he[Me-1],rt=he[Me],$e=he[Me+1],ae=Me===0?new k(0,0):rt.sub(ze)._unit()._perp(),we=Me===he.length-1?new k(0,0):$e.sub(rt)._unit()._perp(),Ge=ae._add(we)._unit(),It=Ge.x*we.x+Ge.y*we.y;It!==0&&Ge._mult(1/It),be.push(Ge._mult(te)._add(rt))}oe.push(be)}return oe}(_,j*E)),function(Z,te,oe){for(let le=0;le<te.length;le++){const he=te[le];if(Z.length>=3){for(let be=0;be<he.length;be++)if(tu(Z,he[be]))return!0}if(Op(Z,he,oe))return!0}return!1}(P,_,z)}isTileClipped(){return!0}}function A1(h,a){return a>0?a+2*h:h}const $w=bi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hw=bi([{name:"a_projected_pos",components:3,type:"Float32"}],4);bi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Gw=bi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);bi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const w1=bi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Zw=bi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ww(h,a,d){return h.sections.forEach(p=>{p.text=function(_,S,E){const P=S.layout.get("text-transform").evaluate(E,{});return P==="uppercase"?_=_.toLocaleUpperCase():P==="lowercase"&&(_=_.toLocaleLowerCase()),Go.applyArabicShaping&&(_=Go.applyArabicShaping(_)),_}(p.text,a,d)}),h}bi([{name:"triangle",components:3,type:"Uint16"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),bi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),bi([{type:"Float32",name:"offsetX"}]),bi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),bi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Wp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var C1,zv,I1,is=24,Fv={};function Bv(){return C1||(C1=1,Fv.read=function(h,a,d,p,_){var S,E,P=8*_-p-1,z=(1<<P)-1,j=z>>1,Z=-7,te=d?_-1:0,oe=d?-1:1,le=h[a+te];for(te+=oe,S=le&(1<<-Z)-1,le>>=-Z,Z+=P;Z>0;S=256*S+h[a+te],te+=oe,Z-=8);for(E=S&(1<<-Z)-1,S>>=-Z,Z+=p;Z>0;E=256*E+h[a+te],te+=oe,Z-=8);if(S===0)S=1-j;else{if(S===z)return E?NaN:1/0*(le?-1:1);E+=Math.pow(2,p),S-=j}return(le?-1:1)*E*Math.pow(2,S-p)},Fv.write=function(h,a,d,p,_,S){var E,P,z,j=8*S-_-1,Z=(1<<j)-1,te=Z>>1,oe=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,le=p?0:S-1,he=p?1:-1,be=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(P=isNaN(a)?1:0,E=Z):(E=Math.floor(Math.log(a)/Math.LN2),a*(z=Math.pow(2,-E))<1&&(E--,z*=2),(a+=E+te>=1?oe/z:oe*Math.pow(2,1-te))*z>=2&&(E++,z/=2),E+te>=Z?(P=0,E=Z):E+te>=1?(P=(a*z-1)*Math.pow(2,_),E+=te):(P=a*Math.pow(2,te-1)*Math.pow(2,_),E=0));_>=8;h[d+le]=255&P,le+=he,P/=256,_-=8);for(E=E<<_|P,j+=_;j>0;h[d+le]=255&E,le+=he,E/=256,j-=8);h[d+le-he]|=128*be}),Fv}function Nv(){if(I1)return zv;I1=1,zv=a;var h=Bv();function a(ae){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ae)?ae:new Uint8Array(ae||0),this.pos=0,this.type=0,this.length=this.buf.length}a.Varint=0,a.Fixed64=1,a.Bytes=2,a.Fixed32=5;var d=4294967296,p=1/d,_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function S(ae){return ae.type===a.Bytes?ae.readVarint()+ae.pos:ae.pos+1}function E(ae,we,Ge){return Ge?4294967296*we+(ae>>>0):4294967296*(we>>>0)+(ae>>>0)}function P(ae,we,Ge){var It=we<=16383?1:we<=2097151?2:we<=268435455?3:Math.floor(Math.log(we)/(7*Math.LN2));Ge.realloc(It);for(var Yt=Ge.pos-1;Yt>=ae;Yt--)Ge.buf[Yt+It]=Ge.buf[Yt]}function z(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeVarint(ae[Ge])}function j(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeSVarint(ae[Ge])}function Z(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeFloat(ae[Ge])}function te(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeDouble(ae[Ge])}function oe(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeBoolean(ae[Ge])}function le(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeFixed32(ae[Ge])}function he(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeSFixed32(ae[Ge])}function be(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeFixed64(ae[Ge])}function Me(ae,we){for(var Ge=0;Ge<ae.length;Ge++)we.writeSFixed64(ae[Ge])}function ze(ae,we){return(ae[we]|ae[we+1]<<8|ae[we+2]<<16)+16777216*ae[we+3]}function rt(ae,we,Ge){ae[Ge]=we,ae[Ge+1]=we>>>8,ae[Ge+2]=we>>>16,ae[Ge+3]=we>>>24}function $e(ae,we){return(ae[we]|ae[we+1]<<8|ae[we+2]<<16)+(ae[we+3]<<24)}return a.prototype={destroy:function(){this.buf=null},readFields:function(ae,we,Ge){for(Ge=Ge||this.length;this.pos<Ge;){var It=this.readVarint(),Yt=It>>3,Et=this.pos;this.type=7&It,ae(Yt,we,this),this.pos===Et&&this.skip(It)}return we},readMessage:function(ae,we){return this.readFields(ae,we,this.readVarint()+this.pos)},readFixed32:function(){var ae=ze(this.buf,this.pos);return this.pos+=4,ae},readSFixed32:function(){var ae=$e(this.buf,this.pos);return this.pos+=4,ae},readFixed64:function(){var ae=ze(this.buf,this.pos)+ze(this.buf,this.pos+4)*d;return this.pos+=8,ae},readSFixed64:function(){var ae=ze(this.buf,this.pos)+$e(this.buf,this.pos+4)*d;return this.pos+=8,ae},readFloat:function(){var ae=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ae},readDouble:function(){var ae=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ae},readVarint:function(ae){var we,Ge,It=this.buf;return we=127&(Ge=It[this.pos++]),Ge<128?we:(we|=(127&(Ge=It[this.pos++]))<<7,Ge<128?we:(we|=(127&(Ge=It[this.pos++]))<<14,Ge<128?we:(we|=(127&(Ge=It[this.pos++]))<<21,Ge<128?we:function(Yt,Et,Ot){var tn,Xt,rn=Ot.buf;if(tn=(112&(Xt=rn[Ot.pos++]))>>4,Xt<128||(tn|=(127&(Xt=rn[Ot.pos++]))<<3,Xt<128)||(tn|=(127&(Xt=rn[Ot.pos++]))<<10,Xt<128)||(tn|=(127&(Xt=rn[Ot.pos++]))<<17,Xt<128)||(tn|=(127&(Xt=rn[Ot.pos++]))<<24,Xt<128)||(tn|=(1&(Xt=rn[Ot.pos++]))<<31,Xt<128))return E(Yt,tn,Et);throw new Error("Expected varint not more than 10 bytes")}(we|=(15&(Ge=It[this.pos]))<<28,ae,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ae=this.readVarint();return ae%2==1?(ae+1)/-2:ae/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ae=this.readVarint()+this.pos,we=this.pos;return this.pos=ae,ae-we>=12&&_?function(Ge,It,Yt){return _.decode(Ge.subarray(It,Yt))}(this.buf,we,ae):function(Ge,It,Yt){for(var Et="",Ot=It;Ot<Yt;){var tn,Xt,rn,Vt=Ge[Ot],xn=null,Bn=Vt>239?4:Vt>223?3:Vt>191?2:1;if(Ot+Bn>Yt)break;Bn===1?Vt<128&&(xn=Vt):Bn===2?(192&(tn=Ge[Ot+1]))==128&&(xn=(31&Vt)<<6|63&tn)<=127&&(xn=null):Bn===3?(Xt=Ge[Ot+2],(192&(tn=Ge[Ot+1]))==128&&(192&Xt)==128&&((xn=(15&Vt)<<12|(63&tn)<<6|63&Xt)<=2047||xn>=55296&&xn<=57343)&&(xn=null)):Bn===4&&(Xt=Ge[Ot+2],rn=Ge[Ot+3],(192&(tn=Ge[Ot+1]))==128&&(192&Xt)==128&&(192&rn)==128&&((xn=(15&Vt)<<18|(63&tn)<<12|(63&Xt)<<6|63&rn)<=65535||xn>=1114112)&&(xn=null)),xn===null?(xn=65533,Bn=1):xn>65535&&(xn-=65536,Et+=String.fromCharCode(xn>>>10&1023|55296),xn=56320|1023&xn),Et+=String.fromCharCode(xn),Ot+=Bn}return Et}(this.buf,we,ae)},readBytes:function(){var ae=this.readVarint()+this.pos,we=this.buf.subarray(this.pos,ae);return this.pos=ae,we},readPackedVarint:function(ae,we){if(this.type!==a.Bytes)return ae.push(this.readVarint(we));var Ge=S(this);for(ae=ae||[];this.pos<Ge;)ae.push(this.readVarint(we));return ae},readPackedSVarint:function(ae){if(this.type!==a.Bytes)return ae.push(this.readSVarint());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readSVarint());return ae},readPackedBoolean:function(ae){if(this.type!==a.Bytes)return ae.push(this.readBoolean());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readBoolean());return ae},readPackedFloat:function(ae){if(this.type!==a.Bytes)return ae.push(this.readFloat());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readFloat());return ae},readPackedDouble:function(ae){if(this.type!==a.Bytes)return ae.push(this.readDouble());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readDouble());return ae},readPackedFixed32:function(ae){if(this.type!==a.Bytes)return ae.push(this.readFixed32());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readFixed32());return ae},readPackedSFixed32:function(ae){if(this.type!==a.Bytes)return ae.push(this.readSFixed32());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readSFixed32());return ae},readPackedFixed64:function(ae){if(this.type!==a.Bytes)return ae.push(this.readFixed64());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readFixed64());return ae},readPackedSFixed64:function(ae){if(this.type!==a.Bytes)return ae.push(this.readSFixed64());var we=S(this);for(ae=ae||[];this.pos<we;)ae.push(this.readSFixed64());return ae},skip:function(ae){var we=7&ae;if(we===a.Varint)for(;this.buf[this.pos++]>127;);else if(we===a.Bytes)this.pos=this.readVarint()+this.pos;else if(we===a.Fixed32)this.pos+=4;else{if(we!==a.Fixed64)throw new Error("Unimplemented type: "+we);this.pos+=8}},writeTag:function(ae,we){this.writeVarint(ae<<3|we)},realloc:function(ae){for(var we=this.length||16;we<this.pos+ae;)we*=2;if(we!==this.length){var Ge=new Uint8Array(we);Ge.set(this.buf),this.buf=Ge,this.length=we}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ae){this.realloc(4),rt(this.buf,ae,this.pos),this.pos+=4},writeSFixed32:function(ae){this.realloc(4),rt(this.buf,ae,this.pos),this.pos+=4},writeFixed64:function(ae){this.realloc(8),rt(this.buf,-1&ae,this.pos),rt(this.buf,Math.floor(ae*p),this.pos+4),this.pos+=8},writeSFixed64:function(ae){this.realloc(8),rt(this.buf,-1&ae,this.pos),rt(this.buf,Math.floor(ae*p),this.pos+4),this.pos+=8},writeVarint:function(ae){(ae=+ae||0)>268435455||ae<0?function(we,Ge){var It,Yt;if(we>=0?(It=we%4294967296|0,Yt=we/4294967296|0):(Yt=~(-we/4294967296),4294967295^(It=~(-we%4294967296))?It=It+1|0:(It=0,Yt=Yt+1|0)),we>=18446744073709552e3||we<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ge.realloc(10),function(Et,Ot,tn){tn.buf[tn.pos++]=127&Et|128,Et>>>=7,tn.buf[tn.pos++]=127&Et|128,Et>>>=7,tn.buf[tn.pos++]=127&Et|128,Et>>>=7,tn.buf[tn.pos++]=127&Et|128,tn.buf[tn.pos]=127&(Et>>>=7)}(It,0,Ge),function(Et,Ot){var tn=(7&Et)<<4;Ot.buf[Ot.pos++]|=tn|((Et>>>=3)?128:0),Et&&(Ot.buf[Ot.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Ot.buf[Ot.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Ot.buf[Ot.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Ot.buf[Ot.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Ot.buf[Ot.pos++]=127&Et)))))}(Yt,Ge)}(ae,this):(this.realloc(4),this.buf[this.pos++]=127&ae|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=ae>>>7&127))))},writeSVarint:function(ae){this.writeVarint(ae<0?2*-ae-1:2*ae)},writeBoolean:function(ae){this.writeVarint(!!ae)},writeString:function(ae){ae=String(ae),this.realloc(4*ae.length),this.pos++;var we=this.pos;this.pos=function(It,Yt,Et){for(var Ot,tn,Xt=0;Xt<Yt.length;Xt++){if((Ot=Yt.charCodeAt(Xt))>55295&&Ot<57344){if(!tn){Ot>56319||Xt+1===Yt.length?(It[Et++]=239,It[Et++]=191,It[Et++]=189):tn=Ot;continue}if(Ot<56320){It[Et++]=239,It[Et++]=191,It[Et++]=189,tn=Ot;continue}Ot=tn-55296<<10|Ot-56320|65536,tn=null}else tn&&(It[Et++]=239,It[Et++]=191,It[Et++]=189,tn=null);Ot<128?It[Et++]=Ot:(Ot<2048?It[Et++]=Ot>>6|192:(Ot<65536?It[Et++]=Ot>>12|224:(It[Et++]=Ot>>18|240,It[Et++]=Ot>>12&63|128),It[Et++]=Ot>>6&63|128),It[Et++]=63&Ot|128)}return Et}(this.buf,ae,this.pos);var Ge=this.pos-we;Ge>=128&&P(we,Ge,this),this.pos=we-1,this.writeVarint(Ge),this.pos+=Ge},writeFloat:function(ae){this.realloc(4),h.write(this.buf,ae,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ae){this.realloc(8),h.write(this.buf,ae,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ae){var we=ae.length;this.writeVarint(we),this.realloc(we);for(var Ge=0;Ge<we;Ge++)this.buf[this.pos++]=ae[Ge]},writeRawMessage:function(ae,we){this.pos++;var Ge=this.pos;ae(we,this);var It=this.pos-Ge;It>=128&&P(Ge,It,this),this.pos=Ge-1,this.writeVarint(It),this.pos+=It},writeMessage:function(ae,we,Ge){this.writeTag(ae,a.Bytes),this.writeRawMessage(we,Ge)},writePackedVarint:function(ae,we){we.length&&this.writeMessage(ae,z,we)},writePackedSVarint:function(ae,we){we.length&&this.writeMessage(ae,j,we)},writePackedBoolean:function(ae,we){we.length&&this.writeMessage(ae,oe,we)},writePackedFloat:function(ae,we){we.length&&this.writeMessage(ae,Z,we)},writePackedDouble:function(ae,we){we.length&&this.writeMessage(ae,te,we)},writePackedFixed32:function(ae,we){we.length&&this.writeMessage(ae,le,we)},writePackedSFixed32:function(ae,we){we.length&&this.writeMessage(ae,he,we)},writePackedFixed64:function(ae,we){we.length&&this.writeMessage(ae,be,we)},writePackedSFixed64:function(ae,we){we.length&&this.writeMessage(ae,Me,we)},writeBytesField:function(ae,we){this.writeTag(ae,a.Bytes),this.writeBytes(we)},writeFixed32Field:function(ae,we){this.writeTag(ae,a.Fixed32),this.writeFixed32(we)},writeSFixed32Field:function(ae,we){this.writeTag(ae,a.Fixed32),this.writeSFixed32(we)},writeFixed64Field:function(ae,we){this.writeTag(ae,a.Fixed64),this.writeFixed64(we)},writeSFixed64Field:function(ae,we){this.writeTag(ae,a.Fixed64),this.writeSFixed64(we)},writeVarintField:function(ae,we){this.writeTag(ae,a.Varint),this.writeVarint(we)},writeSVarintField:function(ae,we){this.writeTag(ae,a.Varint),this.writeSVarint(we)},writeStringField:function(ae,we){this.writeTag(ae,a.Bytes),this.writeString(we)},writeFloatField:function(ae,we){this.writeTag(ae,a.Fixed32),this.writeFloat(we)},writeDoubleField:function(ae,we){this.writeTag(ae,a.Fixed64),this.writeDouble(we)},writeBooleanField:function(ae,we){this.writeVarintField(ae,!!we)}},zv}var Vv=f(Nv());const jv=3;function qw(h,a,d){h===1&&d.readMessage(Kw,a)}function Kw(h,a,d){if(h===3){const{id:p,bitmap:_,width:S,height:E,left:P,top:z,advance:j}=d.readMessage(Yw,{});a.push({id:p,bitmap:new Np({width:S+2*jv,height:E+2*jv},_),metrics:{width:S,height:E,left:P,top:z,advance:j}})}}function Yw(h,a,d){h===1?a.id=d.readVarint():h===2?a.bitmap=d.readBytes():h===3?a.width=d.readVarint():h===4?a.height=d.readVarint():h===5?a.left=d.readSVarint():h===6?a.top=d.readSVarint():h===7&&(a.advance=d.readVarint())}const Xw=jv;function M1(h){let a=0,d=0;for(const E of h)a+=E.w*E.h,d=Math.max(d,E.w);h.sort((E,P)=>P.h-E.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),d),h:1/0}];let _=0,S=0;for(const E of h)for(let P=p.length-1;P>=0;P--){const z=p[P];if(!(E.w>z.w||E.h>z.h)){if(E.x=z.x,E.y=z.y,S=Math.max(S,E.y+E.h),_=Math.max(_,E.x+E.w),E.w===z.w&&E.h===z.h){const j=p.pop();P<p.length&&(p[P]=j)}else E.h===z.h?(z.x+=E.w,z.w-=E.w):E.w===z.w?(z.y+=E.h,z.h-=E.h):(p.push({x:z.x+E.w,y:z.y,w:z.w-E.w,h:E.h}),z.y+=E.h,z.h-=E.h);break}}return{w:_,h:S,fill:a/(_*S)||0}}const Ca=1;class Ag{constructor(a,{pixelRatio:d,version:p,stretchX:_,stretchY:S,content:E,textFitWidth:P,textFitHeight:z}){this.paddedRect=a,this.pixelRatio=d,this.stretchX=_,this.stretchY=S,this.content=E,this.version=p,this.textFitWidth=P,this.textFitHeight=z}get tl(){return[this.paddedRect.x+Ca,this.paddedRect.y+Ca]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ca,this.paddedRect.y+this.paddedRect.h-Ca]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ca)/this.pixelRatio,(this.paddedRect.h-2*Ca)/this.pixelRatio]}}class S1{constructor(a,d){const p={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(a,p,S),this.addImages(d,_,S);const{w:E,h:P}=M1(S),z=new rs({width:E||1,height:P||1});for(const j in a){const Z=a[j],te=p[j].paddedRect;rs.copy(Z.data,z,{x:0,y:0},{x:te.x+Ca,y:te.y+Ca},Z.data)}for(const j in d){const Z=d[j],te=_[j].paddedRect,oe=te.x+Ca,le=te.y+Ca,he=Z.data.width,be=Z.data.height;rs.copy(Z.data,z,{x:0,y:0},{x:oe,y:le},Z.data),rs.copy(Z.data,z,{x:0,y:be-1},{x:oe,y:le-1},{width:he,height:1}),rs.copy(Z.data,z,{x:0,y:0},{x:oe,y:le+be},{width:he,height:1}),rs.copy(Z.data,z,{x:he-1,y:0},{x:oe-1,y:le},{width:1,height:be}),rs.copy(Z.data,z,{x:0,y:0},{x:oe+he,y:le},{width:1,height:be})}this.image=z,this.iconPositions=p,this.patternPositions=_}addImages(a,d,p){for(const _ in a){const S=a[_],E={x:0,y:0,w:S.data.width+2*Ca,h:S.data.height+2*Ca};p.push(E),d[_]=new Ag(E,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(a,d){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in a.updatedImages)this.patchUpdatedImage(this.iconPositions[p],a.getImage(p),d),this.patchUpdatedImage(this.patternPositions[p],a.getImage(p),d)}patchUpdatedImage(a,d,p){if(!a||!d||a.version===d.version)return;a.version=d.version;const[_,S]=a.tl;p.update(d.data,void 0,{x:_,y:S})}}var vl;yn("ImagePosition",Ag),yn("ImageAtlas",S1),l.al=void 0,(vl=l.al||(l.al={}))[vl.none=0]="none",vl[vl.horizontal=1]="horizontal",vl[vl.vertical=2]="vertical",vl[vl.horizontalOnly=3]="horizontalOnly";const wg=-17;class qp{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(a,d,p){const _=new qp;return _.scale=a||1,_.fontStack=d,_.verticalAlign=p||"bottom",_}static forImage(a,d){const p=new qp;return p.imageName=a,p.verticalAlign=d||"bottom",p}}class sf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,d){const p=new sf;for(let _=0;_<a.sections.length;_++){const S=a.sections[_];S.image?p.addImageSection(S):p.addTextSection(S,d)}return p}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=function(a){let d="";for(let p=0;p<a.length;p++){const _=a.charCodeAt(p+1)||null,S=a.charCodeAt(p-1)||null;d+=_&&og(_)&&!Wp[a[p+1]]||S&&og(S)&&!Wp[a[p-1]]||!Wp[a[p]]?a[p]:Wp[a[p]]}return d}(this.text)}trim(){let a=0;for(let p=0;p<this.text.length&&Ig[this.text.charCodeAt(p)];p++)a++;let d=this.text.length;for(let p=this.text.length-1;p>=0&&p>=a&&Ig[this.text.charCodeAt(p)];p--)d--;this.text=this.text.substring(a,d),this.sectionIndex=this.sectionIndex.slice(a,d)}substring(a,d){const p=new sf;return p.text=this.text.substring(a,d),p.sectionIndex=this.sectionIndex.slice(a,d),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,d)=>Math.max(a,this.sections[d].scale),0)}getMaxImageSize(a){let d=0,p=0;for(let _=0;_<this.length();_++){const S=this.getSection(_);if(S.imageName){const E=a[S.imageName];if(!E)continue;const P=E.displaySize;d=Math.max(d,P[0]),p=Math.max(p,P[1])}}return{maxImageWidth:d,maxImageHeight:p}}addTextSection(a,d){this.text+=a.text,this.sections.push(qp.forText(a.scale,a.fontStack||d,a.verticalAlign));const p=this.sections.length-1;for(let _=0;_<a.text.length;++_)this.sectionIndex.push(p)}addImageSection(a){const d=a.image?a.image.name:"";if(d.length===0)return void Ie("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(qp.forImage(d,a.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Ie("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Cg(h,a,d,p,_,S,E,P,z,j,Z,te,oe,le,he){const be=sf.fromFeature(h,_);let Me;te===l.al.vertical&&be.verticalizePunctuation();const{processBidirectionalText:ze,processStyledBidirectionalText:rt}=Go;if(ze&&be.sections.length===1){Me=[];const we=ze(be.toString(),Uv(be,j,S,a,p,le));for(const Ge of we){const It=new sf;It.text=Ge,It.sections=be.sections;for(let Yt=0;Yt<Ge.length;Yt++)It.sectionIndex.push(0);Me.push(It)}}else if(rt){Me=[];const we=rt(be.text,be.sectionIndex,Uv(be,j,S,a,p,le));for(const Ge of we){const It=new sf;It.text=Ge[0],It.sectionIndex=Ge[1],It.sections=be.sections,Me.push(It)}}else Me=function(we,Ge){const It=[],Yt=we.text;let Et=0;for(const Ot of Ge)It.push(we.substring(Et,Ot)),Et=Ot;return Et<Yt.length&&It.push(we.substring(Et,Yt.length)),It}(be,Uv(be,j,S,a,p,le));const $e=[],ae={positionedLines:$e,text:be.toString(),top:Z[1],bottom:Z[1],left:Z[0],right:Z[0],writingMode:te,iconsInText:!1,verticalizable:!1};return function(we,Ge,It,Yt,Et,Ot,tn,Xt,rn,Vt,xn,Bn){let On=0,En=0,mr=0,Ci=0;const as=Xt==="right"?1:Xt==="left"?0:.5,Fs=is/Bn;let Bs=0;for(const yi of Et){yi.trim();const gs=yi.getMaxScale(),Ps={positionedGlyphs:[],lineOffset:0};we.positionedLines[Bs]=Ps;const ys=Ps.positionedGlyphs;let Qs=0;if(!yi.length()){En+=Ot,++Bs;continue}const vo=t2(Yt,yi,Fs);for(let Ta=0;Ta<yi.length();Ta++){const os=yi.getSection(Ta),_s=yi.getSectionIndex(Ta),bs=yi.getCharCode(Ta),Ki=D1(rn,xn,bs);let ci;if(os.imageName){if(we.iconsInText=!0,os.scale=os.scale*Fs,ci=n2(os,Ki,gs,vo,Yt),!ci)continue;Qs=Math.max(Qs,ci.imageOffset)}else if(ci=R1(os,bs,Ki,vo,Ge,It),!ci)continue;const{rect:bl,metrics:hf,baselineOffset:xl}=ci;ys.push({glyph:bs,imageName:os.imageName,x:On,y:En+xl+wg,vertical:Ki,scale:os.scale,fontStack:os.fontStack,sectionIndex:_s,metrics:hf,rect:bl}),Ki?(we.verticalizable=!0,On+=(os.imageName?hf.advance:is)*os.scale+Vt):On+=hf.advance*os.scale+Vt}ys.length!==0&&(mr=Math.max(On-Vt,mr),r2(ys,0,ys.length-1,as)),On=0,Ps.lineOffset=Math.max(Qs,(gs-1)*is);const vs=Ot*gs+Qs;En+=vs,Ci=Math.max(vs,Ci),++Bs}const{horizontalAlign:Ea,verticalAlign:Ts}=$v(tn);(function(yi,gs,Ps,ys,Qs,vo,vs,Ta,os){const _s=(gs-Ps)*Qs;let bs=0;bs=vo!==vs?-Ta*ys-wg:-ys*os*vs+.5*vs;for(const Ki of yi)for(const ci of Ki.positionedGlyphs)ci.x+=_s,ci.y+=bs})(we.positionedLines,as,Ea,Ts,mr,Ci,Ot,En,Et.length),we.top+=-Ts*En,we.bottom=we.top+En,we.left+=-Ea*mr,we.right=we.left+mr}(ae,a,d,p,Me,E,P,z,te,j,oe,he),!function(we){for(const Ge of we)if(Ge.positionedGlyphs.length!==0)return!1;return!0}($e)&&ae}const Ig={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qw={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Jw={40:!0};function E1(h,a,d,p,_,S){if(a.imageName){const E=p[a.imageName];return E?E.displaySize[0]*a.scale*is/S+_:0}{const E=d[a.fontStack],P=E&&E[h];return P?P.metrics.advance*a.scale+_:0}}function T1(h,a,d,p){const _=Math.pow(h-a,2);return p?h<a?_/2:2*_:_+Math.abs(d)*d}function e2(h,a,d){let p=0;return h===10&&(p-=1e4),d&&(p+=150),h!==40&&h!==65288||(p+=50),a!==41&&a!==65289||(p+=50),p}function P1(h,a,d,p,_,S){let E=null,P=T1(a,d,_,S);for(const z of p){const j=T1(a-z.x,d,_,S)+z.badness;j<=P&&(E=z,P=j)}return{index:h,x:a,priorBreak:E,badness:P}}function k1(h){return h?k1(h.priorBreak).concat(h.index):[]}function Uv(h,a,d,p,_,S){if(!h)return[];const E=[],P=function(te,oe,le,he,be,Me){let ze=0;for(let rt=0;rt<te.length();rt++){const $e=te.getSection(rt);ze+=E1(te.getCharCode(rt),$e,he,be,oe,Me)}return ze/Math.max(1,Math.ceil(ze/le))}(h,a,d,p,_,S),z=h.text.indexOf("​")>=0;let j=0;for(let te=0;te<h.length();te++){const oe=h.getSection(te),le=h.getCharCode(te);if(Ig[le]||(j+=E1(le,oe,p,_,a,S)),te<h.length()-1){const he=!((Z=le)<11904)&&(!!er["CJK Compatibility Forms"](Z)||!!er["CJK Compatibility"](Z)||!!er["CJK Strokes"](Z)||!!er["CJK Symbols and Punctuation"](Z)||!!er["Enclosed CJK Letters and Months"](Z)||!!er["Halfwidth and Fullwidth Forms"](Z)||!!er["Ideographic Description Characters"](Z)||!!er["Vertical Forms"](Z)||ag.test(String.fromCodePoint(Z)));(Qw[le]||he||oe.imageName||te!==h.length()-2&&Jw[h.getCharCode(te+1)])&&E.push(P1(te+1,j,P,E,e2(le,h.getCharCode(te+1),he&&z),!1))}}var Z;return k1(P1(h.length(),j,P,E,0,!0))}function $v(h){let a=.5,d=.5;switch(h){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:a,verticalAlign:d}}function t2(h,a,d){const p=a.getMaxScale()*is,{maxImageWidth:_,maxImageHeight:S}=a.getMaxImageSize(h),E=Math.max(p,S*d);return{verticalLineContentWidth:Math.max(p,_*d),horizontalLineContentHeight:E}}function L1(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function D1(h,a,d){return!(h===l.al.horizontal||!a&&!Ud(d)||a&&(Ig[d]||(p=d,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(p)))));var p}function R1(h,a,d,p,_,S){const E=S[h.fontStack],P=function(j,Z,te,oe){if(j&&j.rect)return j;const le=Z[te.fontStack],he=le&&le[oe];return he?{rect:null,metrics:he.metrics}:null}(E&&E[a],_,h,a);if(P===null)return null;let z;if(d)z=p.verticalLineContentWidth-h.scale*is;else{const j=L1(h.verticalAlign);z=(p.horizontalLineContentHeight-h.scale*is)*j}return{rect:P.rect,metrics:P.metrics,baselineOffset:z}}function n2(h,a,d,p,_){const S=_[h.imageName];if(!S)return null;const E=S.paddedRect,P=S.displaySize,z={width:P[0],height:P[1],left:Ca,top:-3,advance:a?P[1]:P[0]};let j;if(a)j=p.verticalLineContentWidth-P[1]*h.scale;else{const Z=L1(h.verticalAlign);j=(p.horizontalLineContentHeight-P[1]*h.scale)*Z}return{rect:E,metrics:z,baselineOffset:j,imageOffset:(a?P[0]:P[1])*h.scale-is*d}}function r2(h,a,d,p){if(p===0)return;const _=h[d],S=(h[d].x+_.metrics.advance*_.scale)*p;for(let E=a;E<=d;E++)h[E].x-=S}function i2(h,a,d){const{horizontalAlign:p,verticalAlign:_}=$v(d),S=a[0]-h.displaySize[0]*p,E=a[1]-h.displaySize[1]*_;return{image:h,top:E,bottom:E+h.displaySize[1],left:S,right:S+h.displaySize[0]}}function O1(h){var a,d;let p=h.left,_=h.top,S=h.right-p,E=h.bottom-_;const P=(a=h.image.textFitWidth)!==null&&a!==void 0?a:"stretchOrShrink",z=(d=h.image.textFitHeight)!==null&&d!==void 0?d:"stretchOrShrink",j=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(z==="proportional"){if(P==="stretchOnly"&&S/E<j||P==="proportional"){const Z=Math.ceil(E*j);p*=Z/S,S=Z}}else if(P==="proportional"&&z==="stretchOnly"&&j!==0&&S/E>j){const Z=Math.ceil(S/j);_*=Z/E,E=Z}return{x1:p,y1:_,x2:p+S,y2:_+E}}function Kp(h,a,d,p,_,S){const E=h.image;let P;if(E.content){const Me=E.content,ze=E.pixelRatio||1;P=[Me[0]/ze,Me[1]/ze,E.displaySize[0]-Me[2]/ze,E.displaySize[1]-Me[3]/ze]}const z=a.left*S,j=a.right*S;let Z,te,oe,le;d==="width"||d==="both"?(le=_[0]+z-p[3],te=_[0]+j+p[1]):(le=_[0]+(z+j-E.displaySize[0])/2,te=le+E.displaySize[0]);const he=a.top*S,be=a.bottom*S;return d==="height"||d==="both"?(Z=_[1]+he-p[0],oe=_[1]+be+p[2]):(Z=_[1]+(he+be-E.displaySize[1])/2,oe=Z+E.displaySize[1]),{image:E,top:Z,right:te,bottom:oe,left:le,collisionPadding:P}}const Yp=255,ru=128,$c=Yp*ru;function z1(h,a){const{expression:d}=a;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Zr(h+1))};if(d.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=d;let S=0;for(;S<p.length&&p[S]<=h;)S++;S=Math.max(0,S-1);let E=S;for(;E<p.length&&p[E]<h+1;)E++;E=Math.min(p.length-1,E);const P=p[S],z=p[E];return d.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:z,interpolationType:_}:{kind:"camera",minZoom:P,maxZoom:z,minSize:d.evaluate(new Zr(P)),maxSize:d.evaluate(new Zr(z)),interpolationType:_}}}function Hv(h,a,d){let p="never";const _=h.get(a);return _?p=_:h.get(d)&&(p="always"),p}const s2=Gp.VectorTileFeature.types,a2=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mg(h,a,d,p,_,S,E,P,z,j,Z,te,oe){const le=P?Math.min($c,Math.round(P[0])):0,he=P?Math.min($c,Math.round(P[1])):0;h.emplaceBack(a,d,Math.round(32*p),Math.round(32*_),S,E,(le<<1)+(z?1:0),he,16*j,16*Z,256*te,256*oe)}function Gv(h,a,d){h.emplaceBack(a.x,a.y,d),h.emplaceBack(a.x,a.y,d),h.emplaceBack(a.x,a.y,d),h.emplaceBack(a.x,a.y,d)}function o2(h){for(const a of h.sections)if(cv(a.text))return!0;return!1}class Zv{constructor(a){this.layoutVertexArray=new Ct,this.indexArray=new nn,this.programConfigurations=a,this.segments=new Zn,this.dynamicLayoutVertexArray=new vt,this.opacityVertexArray=new jt,this.hasVisibleVertices=!1,this.placedSymbolArray=new H}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,d,p,_){this.isEmpty()||(p&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,$w.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,d),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,Hw.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,a2,!0),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}yn("SymbolBuffers",Zv);class af{constructor(a,d,p){this.layoutVertexArray=new a,this.layoutAttributes=d,this.indexArray=new p,this.segments=new Zn,this.collisionVertexArray=new ln}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Gw.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}yn("CollisionBuffers",af);class of{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(E=>E.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const d=this.layers[0]._unevaluatedLayout._values;this.textSizeData=z1(this.zoom,d["text-size"]),this.iconSizeData=z1(this.zoom,d["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=Hv(p,"text-overlap","text-allow-overlap")!=="never"||Hv(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(E=>l.al[E])),this.stateDependentLayerIds=this.layers.filter(E=>E.isStateDependent()).map(E=>E.id),this.sourceID=a.sourceID}createArrays(){this.text=new Zv(new Jl(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new Zv(new Jl(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new ie,this.lineVertexArray=new fe,this.symbolInstances=new re,this.textAnchorOffsets=new De}calculateGlyphDependencies(a,d,p,_,S){for(let E=0;E<a.length;E++)if(d[a.charCodeAt(E)]=!0,(p||_)&&S){const P=Wp[a.charAt(E)];P&&(d[P.charCodeAt(0)]=!0)}}populate(a,d,p){const _=this.layers[0],S=_.layout,E=S.get("text-font"),P=S.get("text-field"),z=S.get("icon-image"),j=(P.value.kind!=="constant"||P.value.value instanceof Hs&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),Z=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,te=S.get("symbol-sort-key");if(this.features=[],!j&&!Z)return;const oe=d.iconDependencies,le=d.glyphDependencies,he=d.availableImages,be=new Zr(this.zoom);for(const{feature:Me,id:ze,index:rt,sourceLayerIndex:$e}of a){const ae=_._featureFilter.needGeometry,we=mo(Me,ae);if(!_._featureFilter.filter(be,we,p))continue;let Ge,It;if(ae||(we.geometry=wa(Me)),j){const Et=_.getValueAndResolveTokens("text-field",we,p,he),Ot=Hs.factory(Et),tn=this.hasRTLText=this.hasRTLText||o2(Ot);(!tn||Go.getRTLTextPluginStatus()==="unavailable"||tn&&Go.isParsed())&&(Ge=Ww(Ot,_,we))}if(Z){const Et=_.getValueAndResolveTokens("icon-image",we,p,he);It=Et instanceof _a?Et:_a.fromString(Et)}if(!Ge&&!It)continue;const Yt=this.sortFeaturesByKey?te.evaluate(we,{},p):void 0;if(this.features.push({id:ze,text:Ge,icon:It,index:rt,sourceLayerIndex:$e,geometry:we.geometry,properties:Me.properties,type:s2[Me.type],sortKey:Yt}),It&&(oe[It.name]=!0),Ge){const Et=E.evaluate(we,{},p).join(","),Ot=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.al.vertical)>=0;for(const tn of Ge.sections)if(tn.image)oe[tn.image.name]=!0;else{const Xt=jd(Ge.toString()),rn=tn.fontStack||Et,Vt=le[rn]=le[rn]||{};this.calculateGlyphDependencies(tn.text,Vt,Ot,this.allowVerticalPlacement,Xt)}}}S.get("symbol-placement")==="line"&&(this.features=function(Me){const ze={},rt={},$e=[];let ae=0;function we(Et){$e.push(Me[Et]),ae++}function Ge(Et,Ot,tn){const Xt=rt[Et];return delete rt[Et],rt[Ot]=Xt,$e[Xt].geometry[0].pop(),$e[Xt].geometry[0]=$e[Xt].geometry[0].concat(tn[0]),Xt}function It(Et,Ot,tn){const Xt=ze[Ot];return delete ze[Ot],ze[Et]=Xt,$e[Xt].geometry[0].shift(),$e[Xt].geometry[0]=tn[0].concat($e[Xt].geometry[0]),Xt}function Yt(Et,Ot,tn){const Xt=tn?Ot[0][Ot[0].length-1]:Ot[0][0];return`${Et}:${Xt.x}:${Xt.y}`}for(let Et=0;Et<Me.length;Et++){const Ot=Me[Et],tn=Ot.geometry,Xt=Ot.text?Ot.text.toString():null;if(!Xt){we(Et);continue}const rn=Yt(Xt,tn),Vt=Yt(Xt,tn,!0);if(rn in rt&&Vt in ze&&rt[rn]!==ze[Vt]){const xn=It(rn,Vt,tn),Bn=Ge(rn,Vt,$e[xn].geometry);delete ze[rn],delete rt[Vt],rt[Yt(Xt,$e[Bn].geometry,!0)]=Bn,$e[xn].geometry=null}else rn in rt?Ge(rn,Vt,tn):Vt in ze?It(rn,Vt,tn):(we(Et),ze[rn]=ae-1,rt[Vt]=ae-1)}return $e.filter(Et=>Et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Me,ze)=>Me.sortKey-ze.sortKey)}update(a,d,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,d,this.layers,p),this.icon.programConfigurations.updatePaintArrays(a,d,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,d){const p=this.lineVertexArray.length;if(a.segment!==void 0){let _=a.dist(d[a.segment+1]),S=a.dist(d[a.segment]);const E={};for(let P=a.segment+1;P<d.length;P++)E[P]={x:d[P].x,y:d[P].y,tileUnitDistanceFromAnchor:_},P<d.length-1&&(_+=d[P+1].dist(d[P]));for(let P=a.segment||0;P>=0;P--)E[P]={x:d[P].x,y:d[P].y,tileUnitDistanceFromAnchor:S},P>0&&(S+=d[P-1].dist(d[P]));for(let P=0;P<d.length;P++){const z=E[P];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(a,d,p,_,S,E,P,z,j,Z,te,oe){const le=a.indexArray,he=a.layoutVertexArray,be=a.segments.prepareSegment(4*d.length,he,le,this.canOverlap?E.sortKey:void 0),Me=this.glyphOffsetArray.length,ze=be.vertexLength,rt=this.allowVerticalPlacement&&P===l.al.vertical?Math.PI/2:0,$e=E.text&&E.text.sections;for(let ae=0;ae<d.length;ae++){const{tl:we,tr:Ge,bl:It,br:Yt,tex:Et,pixelOffsetTL:Ot,pixelOffsetBR:tn,minFontScaleX:Xt,minFontScaleY:rn,glyphOffset:Vt,isSDF:xn,sectionIndex:Bn}=d[ae],On=be.vertexLength,En=Vt[1];Mg(he,z.x,z.y,we.x,En+we.y,Et.x,Et.y,p,xn,Ot.x,Ot.y,Xt,rn),Mg(he,z.x,z.y,Ge.x,En+Ge.y,Et.x+Et.w,Et.y,p,xn,tn.x,Ot.y,Xt,rn),Mg(he,z.x,z.y,It.x,En+It.y,Et.x,Et.y+Et.h,p,xn,Ot.x,tn.y,Xt,rn),Mg(he,z.x,z.y,Yt.x,En+Yt.y,Et.x+Et.w,Et.y+Et.h,p,xn,tn.x,tn.y,Xt,rn),Gv(a.dynamicLayoutVertexArray,z,rt),le.emplaceBack(On,On+2,On+1),le.emplaceBack(On+1,On+2,On+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vt[0]),ae!==d.length-1&&Bn===d[ae+1].sectionIndex||a.programConfigurations.populatePaintArrays(he.length,E,E.index,{},oe,$e&&$e[Bn])}a.placedSymbolArray.emplaceBack(z.x,z.y,Me,this.glyphOffsetArray.length-Me,ze,j,Z,z.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],P,0,!1,0,te)}_addCollisionDebugVertex(a,d,p,_,S,E){return d.emplaceBack(0,0),a.emplaceBack(p.x,p.y,_,S,Math.round(E.x),Math.round(E.y))}addCollisionDebugVertices(a,d,p,_,S,E,P){const z=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),j=z.vertexLength,Z=S.layoutVertexArray,te=S.collisionVertexArray,oe=P.anchorX,le=P.anchorY;this._addCollisionDebugVertex(Z,te,E,oe,le,new k(a,d)),this._addCollisionDebugVertex(Z,te,E,oe,le,new k(p,d)),this._addCollisionDebugVertex(Z,te,E,oe,le,new k(p,_)),this._addCollisionDebugVertex(Z,te,E,oe,le,new k(a,_)),z.vertexLength+=4;const he=S.indexArray;he.emplaceBack(j,j+1),he.emplaceBack(j+1,j+2),he.emplaceBack(j+2,j+3),he.emplaceBack(j+3,j),z.primitiveLength+=4}addDebugCollisionBoxes(a,d,p,_){for(let S=a;S<d;S++){const E=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(E.x1,E.y1,E.x2,E.y2,_?this.textCollisionBox:this.iconCollisionBox,E.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new af(zt,w1.members,Kt),this.iconCollisionBox=new af(zt,w1.members,Kt);for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.addDebugCollisionBoxes(d.textBoxStartIndex,d.textBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d,!0),this.addDebugCollisionBoxes(d.iconBoxStartIndex,d.iconBoxEndIndex,d,!1),this.addDebugCollisionBoxes(d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex,d,!1)}}_deserializeCollisionBoxesForSymbol(a,d,p,_,S,E,P,z,j){const Z={};for(let te=d;te<p;te++){const oe=a.get(te);Z.textBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.textFeatureIndex=oe.featureIndex;break}for(let te=_;te<S;te++){const oe=a.get(te);Z.verticalTextBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.verticalTextFeatureIndex=oe.featureIndex;break}for(let te=E;te<P;te++){const oe=a.get(te);Z.iconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.iconFeatureIndex=oe.featureIndex;break}for(let te=z;te<j;te++){const oe=a.get(te);Z.verticalIconBox={x1:oe.x1,y1:oe.y1,x2:oe.x2,y2:oe.y2,anchorPointX:oe.anchorPointX,anchorPointY:oe.anchorPointY},Z.verticalIconFeatureIndex=oe.featureIndex;break}return Z}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){const p=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(a,d){const p=a.placedSymbolArray.get(d),_=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<_;S+=4)a.indexArray.emplaceBack(S,S+2,S+1),a.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const d=Math.sin(a),p=Math.cos(a),_=[],S=[],E=[];for(let P=0;P<this.symbolInstances.length;++P){E.push(P);const z=this.symbolInstances.get(P);_.push(0|Math.round(d*z.anchorX+p*z.anchorY)),S.push(z.featureIndex)}return E.sort((P,z)=>_[P]-_[z]||S[z]-S[P]),E}addToSortKeyRanges(a,d){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===d?p.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:d,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){const p=this.symbolInstances.get(d);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((_,S,E)=>{_>=0&&E.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Wv,qv;yn("SymbolBucket",of,{omit:["layers","collisionBoxArray","features","compareText"]}),of.MAX_GLYPHS=65535,of.addDynamicAttributes=Gv;var Xp={get paint(){return qv=qv||new Ys({"icon-opacity":new Fn(ve.paint_symbol["icon-opacity"]),"icon-color":new Fn(ve.paint_symbol["icon-color"]),"icon-halo-color":new Fn(ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Fn(ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Fn(ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Rn(ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rn(ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Fn(ve.paint_symbol["text-opacity"]),"text-color":new Fn(ve.paint_symbol["text-color"],{runtimeType:$s,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Fn(ve.paint_symbol["text-halo-color"]),"text-halo-width":new Fn(ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Fn(ve.paint_symbol["text-halo-blur"]),"text-translate":new Rn(ve.paint_symbol["text-translate"]),"text-translate-anchor":new Rn(ve.paint_symbol["text-translate-anchor"])})},get layout(){return Wv=Wv||new Ys({"symbol-placement":new Rn(ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Rn(ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rn(ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Fn(ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rn(ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rn(ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rn(ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rn(ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rn(ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rn(ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Fn(ve.layout_symbol["icon-size"]),"icon-text-fit":new Rn(ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rn(ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Fn(ve.layout_symbol["icon-image"]),"icon-rotate":new Fn(ve.layout_symbol["icon-rotate"]),"icon-padding":new Fn(ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Rn(ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Fn(ve.layout_symbol["icon-offset"]),"icon-anchor":new Fn(ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rn(ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rn(ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rn(ve.layout_symbol["text-rotation-alignment"]),"text-field":new Fn(ve.layout_symbol["text-field"]),"text-font":new Fn(ve.layout_symbol["text-font"]),"text-size":new Fn(ve.layout_symbol["text-size"]),"text-max-width":new Fn(ve.layout_symbol["text-max-width"]),"text-line-height":new Rn(ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Fn(ve.layout_symbol["text-letter-spacing"]),"text-justify":new Fn(ve.layout_symbol["text-justify"]),"text-radial-offset":new Fn(ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rn(ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Fn(ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Fn(ve.layout_symbol["text-anchor"]),"text-max-angle":new Rn(ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Rn(ve.layout_symbol["text-writing-mode"]),"text-rotate":new Fn(ve.layout_symbol["text-rotate"]),"text-padding":new Rn(ve.layout_symbol["text-padding"]),"text-keep-upright":new Rn(ve.layout_symbol["text-keep-upright"]),"text-transform":new Fn(ve.layout_symbol["text-transform"]),"text-offset":new Fn(ve.layout_symbol["text-offset"]),"text-allow-overlap":new Rn(ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Rn(ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Rn(ve.layout_symbol["text-ignore-placement"]),"text-optional":new Rn(ve.layout_symbol["text-optional"])})}};class Kv{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Ar,this.defaultValue=a}evaluate(a){if(a.formattedSection){const d=this.defaultValue.property.overrides;if(d&&d.hasOverride(a.formattedSection))return d.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yn("FormatSectionOverride",Kv,{omit:["defaultValue"]});class Qp extends Aa{constructor(a){super(a,Xp)}recalculate(a,d){if(super.recalculate(a,d),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const S of p)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(a,d,p,_){const S=this.layout.get(a).evaluate(d,{},p,_),E=this._unevaluatedLayout._values[a];return E.isDataDriven()||jo(E.value)||!S?S:function(P,z){return z.replace(/{([^{}]+)}/g,(j,Z)=>P&&Z in P?String(P[Z]):"")}(d.properties,S)}createBucket(a){return new of(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const a of Xp.paint.overridableProperties){if(!Qp.hasPaintOverride(this.layout,a))continue;const d=this.paint.get(a),p=new Kv(d),_=new Od(p,d.property.specification);let S=null;S=d.value.kind==="constant"||d.value.kind==="source"?new Fu("source",_):new ul("composite",_,d.value.zoomStops),this.paint._values[a]=new Os(d.property,S,d.parameters)}}_handleOverridablePaintPropertyUpdate(a,d,p){return!(!this.layout||d.isDataDriven()||p.isDataDriven())&&Qp.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,d){const p=a.get("text-field"),_=Xp.paint.properties[d];let S=!1;const E=P=>{for(const z of P)if(_.overrides&&_.overrides.hasOverride(z))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Hs)E(p.value.value.sections);else if(p.value.kind==="source"){const P=j=>{S||(j instanceof Hl&&_i(j.value)===Cu?E(j.value.sections):j instanceof ao?E(j.sections):j.eachChild(P))},z=p.value;z._styleExpression&&P(z._styleExpression.expression)}return S}}let Yv;var F1={get paint(){return Yv=Yv||new Ys({"background-color":new Rn(ve.paint_background["background-color"]),"background-pattern":new ju(ve.paint_background["background-pattern"]),"background-opacity":new Rn(ve.paint_background["background-opacity"])})}};class l2 extends Aa{constructor(a){super(a,F1)}}let B1;var u2={get paint(){return B1=B1||new Ys({"raster-opacity":new Rn(ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rn(ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rn(ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rn(ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Rn(ve.paint_raster["raster-saturation"]),"raster-contrast":new Rn(ve.paint_raster["raster-contrast"]),"raster-resampling":new Rn(ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Rn(ve.paint_raster["raster-fade-duration"])})}};class Sg extends Aa{constructor(a){super(a,u2)}}class Eg extends Aa{constructor(a){super(a,{}),this.onAdd=d=>{this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},this.onRemove=d=>{this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class c2{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const h2={once:!0},Jp=63710088e-1;class Ku{constructor(a,d){if(isNaN(a)||isNaN(d))throw new Error(`Invalid LngLat object: (${a}, ${d})`);if(this.lng=+a,this.lat=+d,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ku(un(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const d=Math.PI/180,p=this.lat*d,_=a.lat*d,S=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((a.lng-this.lng)*d);return Jp*Math.acos(Math.min(S,1))}static convert(a){if(a instanceof Ku)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ku(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Ku(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const N1=2*Math.PI*Jp;function V1(h){return N1*Math.cos(h*Math.PI/180)}function j1(h){return(180+h)/360}function U1(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function $1(h,a){return h/V1(a)}function Xv(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function H1(h,a){return h*V1(Xv(a))}class em{constructor(a,d,p=0){this.x=+a,this.y=+d,this.z=+p}static fromLngLat(a,d=0){const p=Ku.convert(a);return new em(j1(p.lng),U1(p.lat),$1(d,p.lat))}toLngLat(){return new Ku(360*this.x-180,Xv(this.y))}toAltitude(){return H1(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/N1*(a=Xv(this.y),1/Math.cos(a*Math.PI/180));var a}}function G1(h,a,d){var p=2*Math.PI*6378137/256/Math.pow(2,d);return[h*p-2*Math.PI*6378137/2,a*p-2*Math.PI*6378137/2]}class Qv{constructor(a,d,p){if(!function(_,S,E){return!(_<0||_>25||E<0||E>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(a,d,p))throw new Error(`x=${d}, y=${p}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=d,this.y=p,this.key=pa(0,a,a,d,p)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,d,p){const _=(E=this.y,P=this.z,z=G1(256*(S=this.x),256*(E=Math.pow(2,P)-E-1),P),j=G1(256*(S+1),256*(E+1),P),z[0]+","+z[1]+","+j[0]+","+j[1]);var S,E,P,z,j;const Z=function(te,oe,le){let he,be="";for(let Me=te;Me>0;Me--)he=1<<Me-1,be+=(oe&he?1:0)+(le&he?2:0);return be}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,d>1?"@2x":"").replace(/{quadkey}/g,Z).replace(/{bbox-epsg-3857}/g,_)}isChildOf(a){const d=this.z-a.z;return d>0&&a.x===this.x>>d&&a.y===this.y>>d}getTilePoint(a){const d=Math.pow(2,this.z);return new k((a.x*d-this.x)*et,(a.y*d-this.y)*et)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Z1{constructor(a,d){this.wrap=a,this.canonical=d,this.key=pa(a,d.z,d.z,d.x,d.y)}}class go{constructor(a,d,p,_,S){if(this.terrainRttPosMatrix32f=null,a<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = ${p}`);this.overscaledZ=a,this.wrap=d,this.canonical=new Qv(p,+_,+S),this.key=pa(d,a,p,_,S)}clone(){return new go(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-a;return a>this.canonical.z?new go(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new go(a,this.wrap,a,this.canonical.x>>d,this.canonical.y>>d)}calculateScaledKey(a,d){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-a;return a>this.canonical.z?pa(this.wrap*+d,a,this.canonical.z,this.canonical.x,this.canonical.y):pa(this.wrap*+d,a,a,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(a){if(a.wrap!==this.wrap)return!1;const d=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>d&&a.canonical.y===this.canonical.y>>d}children(a){if(this.overscaledZ>=a)return[new go(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const d=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new go(d,this.wrap,d,p,_),new go(d,this.wrap,d,p+1,_),new go(d,this.wrap,d,p,_+1),new go(d,this.wrap,d,p+1,_+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new go(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new go(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Z1(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(a){return this.canonical.getTilePoint(new em(a.x-this.wrap,a.y))}}function pa(h,a,d,p,_){(h*=2)<0&&(h=-1*h-1);const S=1<<d;return(S*S*h+S*_+p).toString(36)+d.toString(36)+a.toString(36)}yn("CanonicalTileID",Qv),yn("OverscaledTileID",go,{omit:["terrainRttPosMatrix32f"]});class W1{constructor(a,d,p,_=1,S=1,E=1,P=0){if(this.uid=a,d.height!==d.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void Ie(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=d.height;const z=this.dim=d.height-2;switch(this.data=new Uint32Array(d.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=E,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<z;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(z,j)]=this.data[this._idx(z-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,z)]=this.data[this._idx(j,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<z;j++)for(let Z=0;Z<z;Z++){const te=this.get(j,Z);te>this.max&&(this.max=te),te<this.min&&(this.min=te)}}get(a,d){const p=new Uint8Array(this.data.buffer),_=4*this._idx(a,d);return this.unpack(p[_],p[_+1],p[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,d){if(a<-1||a>=this.dim+1||d<-1||d>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(d+1)*this.stride+(a+1)}unpack(a,d,p){return a*this.redFactor+d*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new rs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,d,p){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let _=d*this.dim,S=d*this.dim+this.dim,E=p*this.dim,P=p*this.dim+this.dim;switch(d){case-1:_=S-1;break;case 1:S=_+1}switch(p){case-1:E=P-1;break;case 1:P=E+1}const z=-d*this.dim,j=-p*this.dim;for(let Z=E;Z<P;Z++)for(let te=_;te<S;te++)this.data[this._idx(te,Z)]=a.data[this._idx(te+z,Z+j)]}}yn("DEMData",W1);class q1{constructor(a){this._stringToNumber={},this._numberToString=[];for(let d=0;d<a.length;d++){const p=a[d];this._stringToNumber[p]=d,this._numberToString[d]=p}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[a]}}class Hc{constructor(a,d,p,_,S){this.type="Feature",this._vectorTileFeature=a,a._z=d,a._x=p,a._y=_,this.properties=a.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={geometry:this.geometry};for(const d in this)d!=="_geometry"&&d!=="_vectorTileFeature"&&(a[d]=this[d]);return a}}class lr{constructor(a,d){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new dl(et,16,0),this.grid3D=new dl(et,16,0),this.featureIndexArray=new Re,this.promoteId=d}insert(a,d,p,_,S,E){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,S);const z=E?this.grid3D:this.grid;for(let j=0;j<d.length;j++){const Z=d[j],te=[1/0,1/0,-1/0,-1/0];for(let oe=0;oe<Z.length;oe++){const le=Z[oe];te[0]=Math.min(te[0],le.x),te[1]=Math.min(te[1],le.y),te[2]=Math.max(te[2],le.x),te[3]=Math.max(te[3],le.y)}te[0]<et&&te[1]<et&&te[2]>=0&&te[3]>=0&&z.insert(P,te[0],te[1],te[2],te[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Gp.VectorTile(new Vv(this.rawTileData)).layers,this.sourceLayerCoder=new q1(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,d,p,_){this.loadVTLayers();const S=a.params,E=et/a.tileSize/a.scale,P=Ec(S.filter),z=a.queryGeometry,j=a.queryPadding*E,Z=Ia(z),te=this.grid.query(Z.minX-j,Z.minY-j,Z.maxX+j,Z.maxY+j),oe=Ia(a.cameraQueryGeometry),le=this.grid3D.query(oe.minX-j,oe.minY-j,oe.maxX+j,oe.maxY+j,(Me,ze,rt,$e)=>function(ae,we,Ge,It,Yt){for(const Ot of ae)if(we<=Ot.x&&Ge<=Ot.y&&It>=Ot.x&&Yt>=Ot.y)return!0;const Et=[new k(we,Ge),new k(we,Yt),new k(It,Yt),new k(It,Ge)];if(ae.length>2){for(const Ot of Et)if(tu(ae,Ot))return!0}for(let Ot=0;Ot<ae.length-1;Ot++)if(fv(ae[Ot],ae[Ot+1],Et))return!0;return!1}(a.cameraQueryGeometry,Me-j,ze-j,rt+j,$e+j));for(const Me of le)te.push(Me);te.sort(ss);const he={};let be;for(let Me=0;Me<te.length;Me++){const ze=te[Me];if(ze===be)continue;be=ze;const rt=this.featureIndexArray.get(ze);let $e=null;this.loadMatchingFeature(he,rt.bucketIndex,rt.sourceLayerIndex,rt.featureIndex,P,S.layers,S.availableImages,d,p,_,(ae,we,Ge)=>($e||($e=wa(ae)),we.queryIntersectsFeature({queryGeometry:z,feature:ae,featureState:Ge,geometry:$e,zoom:this.z,transform:a.transform,pixelsToTileUnits:E,pixelPosMatrix:a.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:a.getElevation})))}return he}loadMatchingFeature(a,d,p,_,S,E,P,z,j,Z,te){const oe=this.bucketLayerIDs[d];if(E&&!oe.some(Me=>E.has(Me)))return;const le=this.sourceLayerCoder.decode(p),he=this.vtLayers[le].feature(_);if(S.needGeometry){const Me=mo(he,!0);if(!S.filter(new Zr(this.tileID.overscaledZ),Me,this.tileID.canonical))return}else if(!S.filter(new Zr(this.tileID.overscaledZ),he))return;const be=this.getId(he,le);for(let Me=0;Me<oe.length;Me++){const ze=oe[Me];if(E&&!E.has(ze))continue;const rt=z[ze];if(!rt)continue;let $e={};be&&Z&&($e=Z.getState(rt.sourceLayer||"_geojsonTileLayer",be));const ae=gt({},j[ze]);ae.paint=K1(ae.paint,rt.paint,he,$e,P),ae.layout=K1(ae.layout,rt.layout,he,$e,P);const we=!te||te(he,rt,$e);if(!we)continue;const Ge=new Hc(he,this.z,this.x,this.y,be);Ge.layer=ae;let It=a[ze];It===void 0&&(It=a[ze]=[]),It.push({featureIndex:_,feature:Ge,intersectionZ:we})}}lookupSymbolFeatures(a,d,p,_,S,E,P,z){const j={};this.loadVTLayers();const Z=Ec(S);for(const te of a)this.loadMatchingFeature(j,p,_,te,Z,E,P,z,d);return j}hasLayer(a){for(const d of this.bucketLayerIDs)for(const p of d)if(a===p)return!0;return!1}getId(a,d){var p;let _=a.id;return this.promoteId&&(_=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[d]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((p=a.properties)===null||p===void 0)&&p.cluster)&&this.promoteId&&(_=Number(a.properties.cluster_id))),_}}function K1(h,a,d,p,_){return lt(h,(S,E)=>{const P=a instanceof Ks?a.get(E):null;return P&&P.evaluate?P.evaluate(d,p,_):P})}function Ia(h){let a=1/0,d=1/0,p=-1/0,_=-1/0;for(const S of h)a=Math.min(a,S.x),d=Math.min(d,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return{minX:a,minY:d,maxX:p,maxY:_}}function ss(h,a){return a-h}function Y1(h,a,d,p,_){const S=[];for(let E=0;E<h.length;E++){const P=h[E];let z;for(let j=0;j<P.length-1;j++){let Z=P[j],te=P[j+1];Z.x<a&&te.x<a||(Z.x<a?Z=new k(a,Z.y+(a-Z.x)/(te.x-Z.x)*(te.y-Z.y))._round():te.x<a&&(te=new k(a,Z.y+(a-Z.x)/(te.x-Z.x)*(te.y-Z.y))._round()),Z.y<d&&te.y<d||(Z.y<d?Z=new k(Z.x+(d-Z.y)/(te.y-Z.y)*(te.x-Z.x),d)._round():te.y<d&&(te=new k(Z.x+(d-Z.y)/(te.y-Z.y)*(te.x-Z.x),d)._round()),Z.x>=p&&te.x>=p||(Z.x>=p?Z=new k(p,Z.y+(p-Z.x)/(te.x-Z.x)*(te.y-Z.y))._round():te.x>=p&&(te=new k(p,Z.y+(p-Z.x)/(te.x-Z.x)*(te.y-Z.y))._round()),Z.y>=_&&te.y>=_||(Z.y>=_?Z=new k(Z.x+(_-Z.y)/(te.y-Z.y)*(te.x-Z.x),_)._round():te.y>=_&&(te=new k(Z.x+(_-Z.y)/(te.y-Z.y)*(te.x-Z.x),_)._round()),z&&Z.equals(z[z.length-1])||(z=[Z],S.push(z)),z.push(te)))))}}return S}yn("FeatureIndex",lr,{omit:["rawTileData","sourceLayerCoder"]});class Ma extends k{constructor(a,d,p,_){super(a,d),this.angle=p,_!==void 0&&(this.segment=_)}clone(){return new Ma(this.x,this.y,this.angle,this.segment)}}function X1(h,a,d,p,_){if(a.segment===void 0||d===0)return!0;let S=a,E=a.segment+1,P=0;for(;P>-d/2;){if(E--,E<0)return!1;P-=h[E].dist(S),S=h[E]}P+=h[E].dist(h[E+1]),E++;const z=[];let j=0;for(;P<d/2;){const Z=h[E],te=h[E+1];if(!te)return!1;let oe=h[E-1].angleTo(Z)-Z.angleTo(te);for(oe=Math.abs((oe+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:P,angleDelta:oe}),j+=oe;P-z[0].distance>p;)j-=z.shift().angleDelta;if(j>_)return!1;E++,P+=Z.dist(te)}return!0}function Q1(h){let a=0;for(let d=0;d<h.length-1;d++)a+=h[d].dist(h[d+1]);return a}function J1(h,a,d){return h?.6*a*d:0}function eb(h,a){return Math.max(h?h.right-h.left:0,a?a.right-a.left:0)}function d2(h,a,d,p,_,S){const E=J1(d,_,S),P=eb(d,p)*S;let z=0;const j=Q1(h)/2;for(let Z=0;Z<h.length-1;Z++){const te=h[Z],oe=h[Z+1],le=te.dist(oe);if(z+le>j){const he=(j-z)/le,be=Xr.number(te.x,oe.x,he),Me=Xr.number(te.y,oe.y,he),ze=new Ma(be,Me,oe.angleTo(te),Z);return ze._round(),!E||X1(h,ze,P,E,a)?ze:void 0}z+=le}}function Jv(h,a,d,p,_,S,E,P,z){const j=J1(p,S,E),Z=eb(p,_),te=Z*E,oe=h[0].x===0||h[0].x===z||h[0].y===0||h[0].y===z;return a-te<a/4&&(a=te+a/4),tb(h,oe?a/2*P%a:(Z/2+2*S)*E*P%a,a,j,d,te,oe,!1,z)}function tb(h,a,d,p,_,S,E,P,z){const j=S/2,Z=Q1(h);let te=0,oe=a-d,le=[];for(let he=0;he<h.length-1;he++){const be=h[he],Me=h[he+1],ze=be.dist(Me),rt=Me.angleTo(be);for(;oe+d<te+ze;){oe+=d;const $e=(oe-te)/ze,ae=Xr.number(be.x,Me.x,$e),we=Xr.number(be.y,Me.y,$e);if(ae>=0&&ae<z&&we>=0&&we<z&&oe-j>=0&&oe+j<=Z){const Ge=new Ma(ae,we,rt,he);Ge._round(),p&&!X1(h,Ge,S,p,_)||le.push(Ge)}}te+=ze}return P||le.length||E||(le=tb(h,te/2,d,p,_,S,E,!0,z)),le}yn("Anchor",Ma);const yo=Ca;function e0(h,a,d,p){const _=[],S=h.image,E=S.pixelRatio,P=S.paddedRect.w-2*yo,z=S.paddedRect.h-2*yo;let j={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const Z=S.stretchX||[[0,P]],te=S.stretchY||[[0,z]],oe=(Vt,xn)=>Vt+xn[1]-xn[0],le=Z.reduce(oe,0),he=te.reduce(oe,0),be=P-le,Me=z-he;let ze=0,rt=le,$e=0,ae=he,we=0,Ge=be,It=0,Yt=Me;if(S.content&&p){const Vt=S.content,xn=Vt[2]-Vt[0],Bn=Vt[3]-Vt[1];(S.textFitWidth||S.textFitHeight)&&(j=O1(h)),ze=Vh(Z,0,Vt[0]),$e=Vh(te,0,Vt[1]),rt=Vh(Z,Vt[0],Vt[2]),ae=Vh(te,Vt[1],Vt[3]),we=Vt[0]-ze,It=Vt[1]-$e,Ge=xn-rt,Yt=Bn-ae}const Et=j.x1,Ot=j.y1,tn=j.x2-Et,Xt=j.y2-Ot,rn=(Vt,xn,Bn,On)=>{const En=wi(Vt.stretch-ze,rt,tn,Et),mr=tm(Vt.fixed-we,Ge,Vt.stretch,le),Ci=wi(xn.stretch-$e,ae,Xt,Ot),as=tm(xn.fixed-It,Yt,xn.stretch,he),Fs=wi(Bn.stretch-ze,rt,tn,Et),Bs=tm(Bn.fixed-we,Ge,Bn.stretch,le),Ea=wi(On.stretch-$e,ae,Xt,Ot),Ts=tm(On.fixed-It,Yt,On.stretch,he),yi=new k(En,Ci),gs=new k(Fs,Ci),Ps=new k(Fs,Ea),ys=new k(En,Ea),Qs=new k(mr/E,as/E),vo=new k(Bs/E,Ts/E),vs=a*Math.PI/180;if(vs){const _s=Math.sin(vs),bs=Math.cos(vs),Ki=[bs,-_s,_s,bs];yi._matMult(Ki),gs._matMult(Ki),ys._matMult(Ki),Ps._matMult(Ki)}const Ta=Vt.stretch+Vt.fixed,os=xn.stretch+xn.fixed;return{tl:yi,tr:gs,bl:ys,br:Ps,tex:{x:S.paddedRect.x+yo+Ta,y:S.paddedRect.y+yo+os,w:Bn.stretch+Bn.fixed-Ta,h:On.stretch+On.fixed-os},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qs,pixelOffsetBR:vo,minFontScaleX:Ge/E/tn,minFontScaleY:Yt/E/Xt,isSDF:d}};if(p&&(S.stretchX||S.stretchY)){const Vt=Li(Z,be,le),xn=Li(te,Me,he);for(let Bn=0;Bn<Vt.length-1;Bn++){const On=Vt[Bn],En=Vt[Bn+1];for(let mr=0;mr<xn.length-1;mr++)_.push(rn(On,xn[mr],En,xn[mr+1]))}}else _.push(rn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:z+1}));return _}function Vh(h,a,d){let p=0;for(const _ of h)p+=Math.max(a,Math.min(d,_[1]))-Math.max(a,Math.min(d,_[0]));return p}function Li(h,a,d){const p=[{fixed:-1,stretch:0}];for(const[_,S]of h){const E=p[p.length-1];p.push({fixed:_-E.stretch,stretch:E.stretch}),p.push({fixed:_-E.stretch,stretch:E.stretch+(S-_)})}return p.push({fixed:a+yo,stretch:d}),p}function wi(h,a,d,p){return h/a*d+p}function tm(h,a,d,p){return h-a*d/p}class Tg{constructor(a,d,p,_,S,E,P,z,j,Z){var te;if(this.boxStartIndex=a.length,j){let oe=E.top,le=E.bottom;const he=E.collisionPadding;he&&(oe-=he[1],le+=he[3]);let be=le-oe;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{const oe=!((te=E.image)===null||te===void 0)&&te.content&&(E.image.textFitWidth||E.image.textFitHeight)?O1(E):{x1:E.left,y1:E.top,x2:E.right,y2:E.bottom};oe.y1=oe.y1*P-z[0],oe.y2=oe.y2*P+z[2],oe.x1=oe.x1*P-z[3],oe.x2=oe.x2*P+z[1];const le=E.collisionPadding;if(le&&(oe.x1-=le[0]*P,oe.y1-=le[1]*P,oe.x2+=le[2]*P,oe.y2+=le[3]*P),Z){const he=new k(oe.x1,oe.y1),be=new k(oe.x2,oe.y1),Me=new k(oe.x1,oe.y2),ze=new k(oe.x2,oe.y2),rt=Z*Math.PI/180;he._rotate(rt),be._rotate(rt),Me._rotate(rt),ze._rotate(rt),oe.x1=Math.min(he.x,be.x,Me.x,ze.x),oe.x2=Math.max(he.x,be.x,Me.x,ze.x),oe.y1=Math.min(he.y,be.y,Me.y,ze.y),oe.y2=Math.max(he.y,be.y,Me.y,ze.y)}a.emplaceBack(d.x,d.y,oe.x1,oe.y1,oe.x2,oe.y2,p,_,S)}this.boxEndIndex=a.length}}class f2{constructor(a=[],d=(p,_)=>p<_?-1:p>_?1:0){if(this.data=a,this.length=this.data.length,this.compare=d,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],d=this.data.pop();return--this.length>0&&(this.data[0]=d,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:d,compare:p}=this,_=d[a];for(;a>0;){const S=a-1>>1,E=d[S];if(p(_,E)>=0)break;d[a]=E,a=S}d[a]=_}_down(a){const{data:d,compare:p}=this,_=this.length>>1,S=d[a];for(;a<_;){let E=1+(a<<1);const P=E+1;if(P<this.length&&p(d[P],d[E])<0&&(E=P),p(d[E],S)>=0)break;d[a]=d[E],a=E}d[a]=S}}function p2(h,a=1,d=!1){let p=1/0,_=1/0,S=-1/0,E=-1/0;const P=h[0];for(let le=0;le<P.length;le++){const he=P[le];(!le||he.x<p)&&(p=he.x),(!le||he.y<_)&&(_=he.y),(!le||he.x>S)&&(S=he.x),(!le||he.y>E)&&(E=he.y)}const z=Math.min(S-p,E-_);let j=z/2;const Z=new f2([],m2);if(z===0)return new k(p,_);for(let le=p;le<S;le+=z)for(let he=_;he<E;he+=z)Z.push(new lf(le+j,he+j,j,h));let te=function(le){let he=0,be=0,Me=0;const ze=le[0];for(let rt=0,$e=ze.length,ae=$e-1;rt<$e;ae=rt++){const we=ze[rt],Ge=ze[ae],It=we.x*Ge.y-Ge.x*we.y;be+=(we.x+Ge.x)*It,Me+=(we.y+Ge.y)*It,he+=3*It}return new lf(be/he,Me/he,0,le)}(h),oe=Z.length;for(;Z.length;){const le=Z.pop();(le.d>te.d||!te.d)&&(te=le,d&&console.log("found best %d after %d probes",Math.round(1e4*le.d)/1e4,oe)),le.max-te.d<=a||(j=le.h/2,Z.push(new lf(le.p.x-j,le.p.y-j,j,h)),Z.push(new lf(le.p.x+j,le.p.y-j,j,h)),Z.push(new lf(le.p.x-j,le.p.y+j,j,h)),Z.push(new lf(le.p.x+j,le.p.y+j,j,h)),oe+=4)}return d&&(console.log(`num probes: ${oe}`),console.log(`best distance: ${te.d}`)),te.p}function m2(h,a){return a.max-h.max}function lf(h,a,d,p){this.p=new k(h,a),this.h=d,this.d=function(_,S){let E=!1,P=1/0;for(let z=0;z<S.length;z++){const j=S[z];for(let Z=0,te=j.length,oe=te-1;Z<te;oe=Z++){const le=j[Z],he=j[oe];le.y>_.y!=he.y>_.y&&_.x<(he.x-le.x)*(_.y-le.y)/(he.y-le.y)+le.x&&(E=!E),P=Math.min(P,zp(_,le,he))}}return(E?1:-1)*Math.sqrt(P)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var zs;l.aB=void 0,(zs=l.aB||(l.aB={}))[zs.center=1]="center",zs[zs.left=2]="left",zs[zs.right=3]="right",zs[zs.top=4]="top",zs[zs.bottom=5]="bottom",zs[zs["top-left"]=6]="top-left",zs[zs["top-right"]=7]="top-right",zs[zs["bottom-left"]=8]="bottom-left",zs[zs["bottom-right"]=9]="bottom-right";const Yu=7,jh=Number.POSITIVE_INFINITY;function Pg(h,a){return a[1]!==jh?function(d,p,_){let S=0,E=0;switch(p=Math.abs(p),_=Math.abs(_),d){case"top-right":case"top-left":case"top":E=_-Yu;break;case"bottom-right":case"bottom-left":case"bottom":E=-_+Yu}switch(d){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,E]}(h,a[0],a[1]):function(d,p){let _=0,S=0;p<0&&(p=0);const E=p/Math.SQRT2;switch(d){case"top-right":case"top-left":S=E-Yu;break;case"bottom-right":case"bottom-left":S=-E+Yu;break;case"bottom":S=-p+Yu;break;case"top":S=p-Yu}switch(d){case"top-right":case"bottom-right":_=-E;break;case"top-left":case"bottom-left":_=E;break;case"left":_=p;break;case"right":_=-p}return[_,S]}(h,a[0])}function nb(h,a,d){var p;const _=h.layout,S=(p=_.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(a,{},d);if(S){const P=S.values,z=[];for(let j=0;j<P.length;j+=2){const Z=z[j]=P[j],te=P[j+1].map(oe=>oe*is);Z.startsWith("top")?te[1]-=Yu:Z.startsWith("bottom")&&(te[1]+=Yu),z[j+1]=te}return new Is(z)}const E=_.get("text-variable-anchor");if(E){let P;P=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(a,{},d)*is,jh]:_.get("text-offset").evaluate(a,{},d).map(j=>j*is);const z=[];for(const j of E)z.push(j,Pg(j,P));return new Is(z)}return null}function kg(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lg(h,a,d,p,_,S,E,P,z,j,Z,te){let oe=S.textMaxSize.evaluate(a,{});oe===void 0&&(oe=E);const le=h.layers[0].layout,he=le.get("icon-offset").evaluate(a,{},Z),be=Uh(d.horizontal),Me=E/24,ze=h.tilePixelRatio*Me,rt=h.tilePixelRatio*oe/24,$e=h.tilePixelRatio*P,ae=h.tilePixelRatio*le.get("symbol-spacing"),we=le.get("text-padding")*h.tilePixelRatio,Ge=function(Bn,On,En,mr=1){const Ci=Bn.get("icon-padding").evaluate(On,{},En),as=Ci&&Ci.values;return[as[0]*mr,as[1]*mr,as[2]*mr,as[3]*mr]}(le,a,Z,h.tilePixelRatio),It=le.get("text-max-angle")/180*Math.PI,Yt=le.get("text-rotation-alignment")!=="viewport"&&le.get("symbol-placement")!=="point",Et=le.get("icon-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",Ot=le.get("symbol-placement"),tn=ae/2,Xt=le.get("icon-text-fit");let rn;p&&Xt!=="none"&&(h.allowVerticalPlacement&&d.vertical&&(rn=Kp(p,d.vertical,Xt,le.get("icon-text-fit-padding"),he,Me)),be&&(p=Kp(p,be,Xt,le.get("icon-text-fit-padding"),he,Me)));const Vt=Z?te.line.getGranularityForZoomLevel(Z.z):1,xn=(Bn,On)=>{On.x<0||On.x>=et||On.y<0||On.y>=et||function(En,mr,Ci,as,Fs,Bs,Ea,Ts,yi,gs,Ps,ys,Qs,vo,vs,Ta,os,_s,bs,Ki,ci,bl,hf,xl,y2){const df=En.addToLineVertexArray(mr,Ci);let $h,ff,pf,mf,ab=0,ob=0,lb=0,ub=0,s0=-1,a0=-1;const Xu={};let cb=Ss("");if(En.allowVerticalPlacement&&as.vertical){const ea=Ts.layout.get("text-rotate").evaluate(ci,{},xl)+90;pf=new Tg(yi,mr,gs,Ps,ys,as.vertical,Qs,vo,vs,ea),Ea&&(mf=new Tg(yi,mr,gs,Ps,ys,Ea,os,_s,vs,ea))}if(Fs){const ea=Ts.layout.get("icon-rotate").evaluate(ci,{}),Pa=Ts.layout.get("icon-text-fit")!=="none",Hh=e0(Fs,ea,hf,Pa),_o=Ea?e0(Ea,ea,hf,Pa):void 0;ff=new Tg(yi,mr,gs,Ps,ys,Fs,os,_s,!1,ea),ab=4*Hh.length;const Gh=En.iconSizeData;let iu=null;Gh.kind==="source"?(iu=[ru*Ts.layout.get("icon-size").evaluate(ci,{})],iu[0]>$c&&Ie(`${En.layerIds[0]}: Value for "icon-size" is >= ${Yp}. Reduce your "icon-size".`)):Gh.kind==="composite"&&(iu=[ru*bl.compositeIconSizes[0].evaluate(ci,{},xl),ru*bl.compositeIconSizes[1].evaluate(ci,{},xl)],(iu[0]>$c||iu[1]>$c)&&Ie(`${En.layerIds[0]}: Value for "icon-size" is >= ${Yp}. Reduce your "icon-size".`)),En.addSymbols(En.icon,Hh,iu,Ki,bs,ci,l.al.none,mr,df.lineStartIndex,df.lineLength,-1,xl),s0=En.icon.placedSymbolArray.length-1,_o&&(ob=4*_o.length,En.addSymbols(En.icon,_o,iu,Ki,bs,ci,l.al.vertical,mr,df.lineStartIndex,df.lineLength,-1,xl),a0=En.icon.placedSymbolArray.length-1)}const Rg=Object.keys(as.horizontal);for(const ea of Rg){const Pa=as.horizontal[ea];if(!$h){cb=Ss(Pa.text);const _o=Ts.layout.get("text-rotate").evaluate(ci,{},xl);$h=new Tg(yi,mr,gs,Ps,ys,Pa,Qs,vo,vs,_o)}const Hh=Pa.positionedLines.length===1;if(lb+=Ha(En,mr,Pa,Bs,Ts,vs,ci,Ta,df,as.vertical?l.al.horizontal:l.al.horizontalOnly,Hh?Rg:[ea],Xu,s0,bl,xl),Hh)break}as.vertical&&(ub+=Ha(En,mr,as.vertical,Bs,Ts,vs,ci,Ta,df,l.al.vertical,["vertical"],Xu,a0,bl,xl));const hb=$h?$h.boxStartIndex:En.collisionBoxArray.length,db=$h?$h.boxEndIndex:En.collisionBoxArray.length,v2=pf?pf.boxStartIndex:En.collisionBoxArray.length,_2=pf?pf.boxEndIndex:En.collisionBoxArray.length,b2=ff?ff.boxStartIndex:En.collisionBoxArray.length,o0=ff?ff.boxEndIndex:En.collisionBoxArray.length,x2=mf?mf.boxStartIndex:En.collisionBoxArray.length,A2=mf?mf.boxEndIndex:En.collisionBoxArray.length;let Al=-1;const Js=(ea,Pa)=>ea&&ea.circleDiameter?Math.max(ea.circleDiameter,Pa):Pa;Al=Js($h,Al),Al=Js(pf,Al),Al=Js(ff,Al),Al=Js(mf,Al);const Og=Al>-1?1:0;Og&&(Al*=y2/is),En.glyphOffsetArray.length>=of.MAX_GLYPHS&&Ie("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ci.sortKey!==void 0&&En.addToSortKeyRanges(En.symbolInstances.length,ci.sortKey);const w2=nb(Ts,ci,xl),[C2,I2]=function(ea,Pa){const Hh=ea.length,_o=Pa==null?void 0:Pa.values;if((_o==null?void 0:_o.length)>0)for(let Gh=0;Gh<_o.length;Gh+=2){const iu=_o[Gh+1];ea.emplaceBack(l.aB[_o[Gh]],iu[0],iu[1])}return[Hh,ea.length]}(En.textAnchorOffsets,w2);En.symbolInstances.emplaceBack(mr.x,mr.y,Xu.right>=0?Xu.right:-1,Xu.center>=0?Xu.center:-1,Xu.left>=0?Xu.left:-1,Xu.vertical||-1,s0,a0,cb,hb,db,v2,_2,b2,o0,x2,A2,gs,lb,ub,ab,ob,Og,0,Qs,Al,C2,I2)}(h,On,Bn,d,p,_,rn,h.layers[0],h.collisionBoxArray,a.index,a.sourceLayerIndex,h.index,ze,[we,we,we,we],Yt,z,$e,Ge,Et,he,a,S,j,Z,E)};if(Ot==="line")for(const Bn of Y1(a.geometry,0,0,et,et)){const On=qu(Bn,Vt),En=Jv(On,ae,It,d.vertical||be,p,24,rt,h.overscaling,et);for(const mr of En)be&&g2(h,be.text,tn,mr)||xn(On,mr)}else if(Ot==="line-center"){for(const Bn of a.geometry)if(Bn.length>1){const On=qu(Bn,Vt),En=d2(On,It,d.vertical||be,p,24,rt);En&&xn(On,En)}}else if(a.type==="Polygon")for(const Bn of Td(a.geometry,0)){const On=p2(Bn,16);xn(qu(Bn[0],Vt,!0),new Ma(On.x,On.y,0))}else if(a.type==="LineString")for(const Bn of a.geometry){const On=qu(Bn,Vt);xn(On,new Ma(On[0].x,On[0].y,0))}else if(a.type==="Point")for(const Bn of a.geometry)for(const On of Bn)xn([On],new Ma(On.x,On.y,0))}function Ha(h,a,d,p,_,S,E,P,z,j,Z,te,oe,le,he){const be=function(rt,$e,ae,we,Ge,It,Yt,Et){const Ot=we.layout.get("text-rotate").evaluate(It,{})*Math.PI/180,tn=[];for(const Xt of $e.positionedLines)for(const rn of Xt.positionedGlyphs){if(!rn.rect)continue;const Vt=rn.rect||{};let xn=Xw+1,Bn=!0,On=1,En=0;const mr=(Ge||Et)&&rn.vertical,Ci=rn.metrics.advance*rn.scale/2;if(Et&&$e.verticalizable&&(En=Xt.lineOffset/2-(rn.imageName?-(is-rn.metrics.width*rn.scale)/2:(rn.scale-1)*is)),rn.imageName){const _s=Yt[rn.imageName];Bn=_s.sdf,On=_s.pixelRatio,xn=Ca/On}const as=Ge?[rn.x+Ci,rn.y]:[0,0];let Fs=Ge?[0,0]:[rn.x+Ci+ae[0],rn.y+ae[1]-En],Bs=[0,0];mr&&(Bs=Fs,Fs=[0,0]);const Ea=rn.metrics.isDoubleResolution?2:1,Ts=(rn.metrics.left-xn)*rn.scale-Ci+Fs[0],yi=(-rn.metrics.top-xn)*rn.scale+Fs[1],gs=Ts+Vt.w/Ea*rn.scale/On,Ps=yi+Vt.h/Ea*rn.scale/On,ys=new k(Ts,yi),Qs=new k(gs,yi),vo=new k(Ts,Ps),vs=new k(gs,Ps);if(mr){const _s=new k(-Ci,Ci-wg),bs=-Math.PI/2,Ki=is/2-Ci,ci=new k(5-wg-Ki,-(rn.imageName?Ki:0)),bl=new k(...Bs);ys._rotateAround(bs,_s)._add(ci)._add(bl),Qs._rotateAround(bs,_s)._add(ci)._add(bl),vo._rotateAround(bs,_s)._add(ci)._add(bl),vs._rotateAround(bs,_s)._add(ci)._add(bl)}if(Ot){const _s=Math.sin(Ot),bs=Math.cos(Ot),Ki=[bs,-_s,_s,bs];ys._matMult(Ki),Qs._matMult(Ki),vo._matMult(Ki),vs._matMult(Ki)}const Ta=new k(0,0),os=new k(0,0);tn.push({tl:ys,tr:Qs,bl:vo,br:vs,tex:Vt,writingMode:$e.writingMode,glyphOffset:as,sectionIndex:rn.sectionIndex,isSDF:Bn,pixelOffsetTL:Ta,pixelOffsetBR:os,minFontScaleX:0,minFontScaleY:0})}return tn}(0,d,P,_,S,E,p,h.allowVerticalPlacement),Me=h.textSizeData;let ze=null;Me.kind==="source"?(ze=[ru*_.layout.get("text-size").evaluate(E,{})],ze[0]>$c&&Ie(`${h.layerIds[0]}: Value for "text-size" is >= ${Yp}. Reduce your "text-size".`)):Me.kind==="composite"&&(ze=[ru*le.compositeTextSizes[0].evaluate(E,{},he),ru*le.compositeTextSizes[1].evaluate(E,{},he)],(ze[0]>$c||ze[1]>$c)&&Ie(`${h.layerIds[0]}: Value for "text-size" is >= ${Yp}. Reduce your "text-size".`)),h.addSymbols(h.text,be,ze,P,S,E,j,a,z.lineStartIndex,z.lineLength,oe,he);for(const rt of Z)te[rt]=h.text.placedSymbolArray.length-1;return 4*be.length}function Uh(h){for(const a in h)return h[a];return null}function g2(h,a,d,p){const _=h.compareText;if(a in _){const S=_[a];for(let E=S.length-1;E>=0;E--)if(p.dist(S[E])<d)return!0}else _[a]=[];return _[a].push(p),!1}const rb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class t0{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[d,p]=new Uint8Array(a,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const S=rb[15&p];if(!S)throw new Error("Unrecognized array type.");const[E]=new Uint16Array(a,2,1),[P]=new Uint32Array(a,4,1);return new t0(P,E,S,a)}constructor(a,d=64,p=Float64Array,_){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+d,2),65535),this.ArrayType=p,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const S=rb.indexOf(this.ArrayType),E=2*a*this.ArrayType.BYTES_PER_ELEMENT,P=a*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-P%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+P+z,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+E+P+z),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+P+z,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=d,new Uint32Array(this.data,4,1)[0]=a)}add(a,d){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=a,this.coords[this._pos++]=d,p}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return n0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,d,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:E,nodeSize:P}=this,z=[0,S.length-1,0],j=[];for(;z.length;){const Z=z.pop()||0,te=z.pop()||0,oe=z.pop()||0;if(te-oe<=P){for(let Me=oe;Me<=te;Me++){const ze=E[2*Me],rt=E[2*Me+1];ze>=a&&ze<=p&&rt>=d&&rt<=_&&j.push(S[Me])}continue}const le=oe+te>>1,he=E[2*le],be=E[2*le+1];he>=a&&he<=p&&be>=d&&be<=_&&j.push(S[le]),(Z===0?a<=he:d<=be)&&(z.push(oe),z.push(le-1),z.push(1-Z)),(Z===0?p>=he:_>=be)&&(z.push(le+1),z.push(te),z.push(1-Z))}return j}within(a,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:E}=this,P=[0,_.length-1,0],z=[],j=p*p;for(;P.length;){const Z=P.pop()||0,te=P.pop()||0,oe=P.pop()||0;if(te-oe<=E){for(let Me=oe;Me<=te;Me++)hr(S[2*Me],S[2*Me+1],a,d)<=j&&z.push(_[Me]);continue}const le=oe+te>>1,he=S[2*le],be=S[2*le+1];hr(he,be,a,d)<=j&&z.push(_[le]),(Z===0?a-p<=he:d-p<=be)&&(P.push(oe),P.push(le-1),P.push(1-Z)),(Z===0?a+p>=he:d+p>=be)&&(P.push(le+1),P.push(te),P.push(1-Z))}return z}}function n0(h,a,d,p,_,S){if(_-p<=d)return;const E=p+_>>1;ib(h,a,E,p,_,S),n0(h,a,d,p,E-1,1-S),n0(h,a,d,E+1,_,1-S)}function ib(h,a,d,p,_,S){for(;_>p;){if(_-p>600){const j=_-p+1,Z=d-p+1,te=Math.log(j),oe=.5*Math.exp(2*te/3),le=.5*Math.sqrt(te*oe*(j-oe)/j)*(Z-j/2<0?-1:1);ib(h,a,d,Math.max(p,Math.floor(d-Z*oe/j+le)),Math.min(_,Math.floor(d+(j-Z)*oe/j+le)),S)}const E=a[2*d+S];let P=p,z=_;for(uf(h,a,p,d),a[2*_+S]>E&&uf(h,a,p,_);P<z;){for(uf(h,a,P,z),P++,z--;a[2*P+S]<E;)P++;for(;a[2*z+S]>E;)z--}a[2*p+S]===E?uf(h,a,p,z):(z++,uf(h,a,z,_)),z<=d&&(p=z+1),d<=z&&(_=z-1)}}function uf(h,a,d,p){_l(h,d,p),_l(a,2*d,2*p),_l(a,2*d+1,2*p+1)}function _l(h,a,d){const p=h[a];h[a]=h[d],h[d]=p}function hr(h,a,d,p){const _=h-d,S=a-p;return _*_+S*S}var Dg;l.cm=void 0,(Dg=l.cm||(l.cm={})).create="create",Dg.load="load",Dg.fullLoad="fullLoad";let Sa=null,cf=[];const r0=1e3/60,Wr="loadTime",i0="fullLoadTime",sb={mark(h){performance.mark(h)},frame(h){const a=h;Sa!=null&&cf.push(a-Sa),Sa=a},clearMetrics(){Sa=null,cf=[],performance.clearMeasures(Wr),performance.clearMeasures(i0);for(const h in l.cm)performance.clearMarks(l.cm[h])},getPerformanceMetrics(){performance.measure(Wr,l.cm.create,l.cm.load),performance.measure(i0,l.cm.create,l.cm.fullLoad);const h=performance.getEntriesByName(Wr)[0].duration,a=performance.getEntriesByName(i0)[0].duration,d=cf.length,p=1/(cf.reduce((S,E)=>S+E,0)/d/1e3),_=cf.filter(S=>S>r0).reduce((S,E)=>S+(E-r0)/r0,0);return{loadTime:h,fullLoadTime:a,fps:p,percentDroppedFrames:_/(d+_)*100,totalFrames:d}}};l.$=em,l.A=ne,l.B=Xr,l.C=Zr,l.D=Rn,l.E=Ee,l.F=Sp,l.G=function(h){if(Oe==null){const a=h.navigator?h.navigator.userAgent:null;Oe=!!h.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))}return Oe},l.H=class{constructor(h,a){this.target=h,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new c2(()=>this.process()),this.subscription=Be(this.target,"message",d=>this.receive(d),!1),this.globalScope=Pe(self)?h:window}registerMessageHandler(h,a){this.messageHandlers[h]=a}sendAsync(h,a){return new Promise((d,p)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=a?Be(a.signal,"abort",()=>{S==null||S.unsubscribe(),delete this.resolveRejects[_];const z={id:_,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(z)},h2):null;this.resolveRejects[_]={resolve:z=>{S==null||S.unsubscribe(),d(z)},reject:z=>{S==null||S.unsubscribe(),p(z)}};const E=[],P=Object.assign(Object.assign({},h),{id:_,sourceMapId:this.mapId,origin:location.origin,data:kh(h.data,E)});this.target.postMessage(P,{transfer:E})})}receive(h){const a=h.data,d=a.id;if(!(a.origin!=="file://"&&location.origin!=="file://"&&a.origin!=="resource://android"&&location.origin!=="resource://android"&&a.origin!==location.origin||a.targetMapId&&this.mapId!==a.targetMapId)){if(a.type==="<cancel>"){delete this.tasks[d];const p=this.abortControllers[d];return delete this.abortControllers[d],void(p&&p.abort())}if(Pe(self)||a.mustQueue)return this.tasks[d]=a,this.taskQueue.push(d),void this.invoker.trigger();this.processTask(d,a)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),a=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),a&&this.processTask(h,a)}processTask(h,a){return s(this,void 0,void 0,function*(){if(a.type==="<response>"){const _=this.resolveRejects[h];return delete this.resolveRejects[h],_?void(a.error?_.reject(Vu(a.error)):_.resolve(Vu(a.data))):void 0}if(!this.messageHandlers[a.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const d=Vu(a.data),p=new AbortController;this.abortControllers[h]=p;try{const _=yield this.messageHandlers[a.type](a.sourceMapId,d,p);this.completeTask(h,null,_)}catch(_){this.completeTask(h,_)}})}completeTask(h,a,d){const p=[];delete this.abortControllers[h];const _={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?kh(a):null,data:kh(d,p)};this.target.postMessage(_,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.I=Ag,l.J=pt,l.K=function(){var h=new ne(16);return ne!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},l.L=function(h,a,d){var p,_,S,E,P,z,j,Z,te,oe,le,he,be=d[0],Me=d[1],ze=d[2];return a===h?(h[12]=a[0]*be+a[4]*Me+a[8]*ze+a[12],h[13]=a[1]*be+a[5]*Me+a[9]*ze+a[13],h[14]=a[2]*be+a[6]*Me+a[10]*ze+a[14],h[15]=a[3]*be+a[7]*Me+a[11]*ze+a[15]):(_=a[1],S=a[2],E=a[3],P=a[4],z=a[5],j=a[6],Z=a[7],te=a[8],oe=a[9],le=a[10],he=a[11],h[0]=p=a[0],h[1]=_,h[2]=S,h[3]=E,h[4]=P,h[5]=z,h[6]=j,h[7]=Z,h[8]=te,h[9]=oe,h[10]=le,h[11]=he,h[12]=p*be+P*Me+te*ze+a[12],h[13]=_*be+z*Me+oe*ze+a[13],h[14]=S*be+j*Me+le*ze+a[14],h[15]=E*be+Z*Me+he*ze+a[15]),h},l.M=function(h,a,d){var p=d[0],_=d[1],S=d[2];return h[0]=a[0]*p,h[1]=a[1]*p,h[2]=a[2]*p,h[3]=a[3]*p,h[4]=a[4]*_,h[5]=a[5]*_,h[6]=a[6]*_,h[7]=a[7]*_,h[8]=a[8]*S,h[9]=a[9]*S,h[10]=a[10]*S,h[11]=a[11]*S,h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},l.N=function(h,a,d){var p=a[0],_=a[1],S=a[2],E=a[3],P=a[4],z=a[5],j=a[6],Z=a[7],te=a[8],oe=a[9],le=a[10],he=a[11],be=a[12],Me=a[13],ze=a[14],rt=a[15],$e=d[0],ae=d[1],we=d[2],Ge=d[3];return h[0]=$e*p+ae*P+we*te+Ge*be,h[1]=$e*_+ae*z+we*oe+Ge*Me,h[2]=$e*S+ae*j+we*le+Ge*ze,h[3]=$e*E+ae*Z+we*he+Ge*rt,h[4]=($e=d[4])*p+(ae=d[5])*P+(we=d[6])*te+(Ge=d[7])*be,h[5]=$e*_+ae*z+we*oe+Ge*Me,h[6]=$e*S+ae*j+we*le+Ge*ze,h[7]=$e*E+ae*Z+we*he+Ge*rt,h[8]=($e=d[8])*p+(ae=d[9])*P+(we=d[10])*te+(Ge=d[11])*be,h[9]=$e*_+ae*z+we*oe+Ge*Me,h[10]=$e*S+ae*j+we*le+Ge*ze,h[11]=$e*E+ae*Z+we*he+Ge*rt,h[12]=($e=d[12])*p+(ae=d[13])*P+(we=d[14])*te+(Ge=d[15])*be,h[13]=$e*_+ae*z+we*oe+Ge*Me,h[14]=$e*S+ae*j+we*le+Ge*ze,h[15]=$e*E+ae*Z+we*he+Ge*rt,h},l.O=function(h,a){const d={};for(let p=0;p<a.length;p++){const _=a[p];_ in h&&(d[_]=h[_])}return d},l.P=k,l.Q=Ku,l.R=rs,l.S=U1,l.T=Gd,l.U=j1,l.V=N,l.W=U,l.X=Fe,l.Y=go,l.Z=et,l._=s,l.a=fn,l.a$=function(h,a,d){var p=Math.sin(d),_=Math.cos(d),S=a[4],E=a[5],P=a[6],z=a[7],j=a[8],Z=a[9],te=a[10],oe=a[11];return a!==h&&(h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[4]=S*_+j*p,h[5]=E*_+Z*p,h[6]=P*_+te*p,h[7]=z*_+oe*p,h[8]=j*_-S*p,h[9]=Z*_-E*p,h[10]=te*_-P*p,h[11]=oe*_-z*p,h},l.a0=25,l.a1=Qv,l.a2=h=>{const a=window.document.createElement("video");return a.muted=!0,new Promise(d=>{a.onloadstart=()=>{d(a)};for(const p of h){const _=window.document.createElement("source");wn(p)||(a.crossOrigin="Anonymous"),_.src=p,a.appendChild(_)}})},l.a3=Ft,l.a4=function(){return ft++},l.a5=D,l.a6=of,l.a7=Ec,l.a8=mo,l.a9=Hc,l.aA=function(h,a,d,p,_=!1){if(!d[0]&&!d[1])return[0,0];const S=_?p==="map"?-h.bearingInRadians:0:p==="viewport"?h.bearingInRadians:0;if(S){const E=Math.sin(S),P=Math.cos(S);d=[d[0]*P-d[1]*E,d[0]*E+d[1]*P]}return[_?d[0]:ot(a,d[0],h.zoom),_?d[1]:ot(a,d[1],h.zoom)]},l.aC=Hv,l.aD=kg,l.aE=$v,l.aF=t0,l.aG=bi,l.aH=Hp,l.aI=je,l.aJ=Zn,l.aK=nn,l.aL=un,l.aM=Mt,l.aN=H1,l.aO=function(h,a,d){return h[0]=a[0]*d,h[1]=a[1]*d,h[2]=a[2]*d,h},l.aP=function(h,a,d){return h[0]=a[0]+d[0],h[1]=a[1]+d[1],h[2]=a[2]+d[2],h},l.aQ=function(h){var a=new ne(3);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a},l.aR=function(h,a,d){return h[0]=a[0]*d[0],h[1]=a[1]*d[1],h[2]=a[2]*d[2],h[3]=a[3]*d[3],h},l.aS=function(h,a,d){return h[0]=a[0]-d[0],h[1]=a[1]-d[1],h[2]=a[2]-d[2],h},l.aT=function(h,a){var d=a[0],p=a[1],_=a[2],S=d*d+p*p+_*_;return S>0&&(S=1/Math.sqrt(S)),h[0]=a[0]*S,h[1]=a[1]*S,h[2]=a[2]*S,h},l.aU=function(h,a,d){var p=a[0],_=a[1],S=a[2],E=d[0],P=d[1],z=d[2];return h[0]=_*z-S*P,h[1]=S*E-p*z,h[2]=p*P-_*E,h},l.aV=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]},l.aW=Z1,l.aX=pa,l.aY=function(h,a,d,p,_){var S,E=1/Math.tan(a/2);return h[0]=E/d,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=E,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,_!=null&&_!==1/0?(h[10]=(_+p)*(S=1/(p-_)),h[14]=2*_*p*S):(h[10]=-1,h[14]=-2*p),h},l.aZ=function(h){var a=new ne(16);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],a},l.a_=function(h,a,d){var p=Math.sin(d),_=Math.cos(d),S=a[0],E=a[1],P=a[2],z=a[3],j=a[4],Z=a[5],te=a[6],oe=a[7];return a!==h&&(h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=S*_+j*p,h[1]=E*_+Z*p,h[2]=P*_+te*p,h[3]=z*_+oe*p,h[4]=j*_-S*p,h[5]=Z*_-E*p,h[6]=te*_-P*p,h[7]=oe*_-z*p,h},l.aa=function(h){const a={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(d,p,_,S)=>{const E=_||S;return a[p]=!E||E.toLowerCase(),""}),a["max-age"]){const d=parseInt(a["max-age"],10);isNaN(d)?delete a["max-age"]:a["max-age"]=d}return a},l.ab=function(h){return h*Math.PI/180},l.ac=function(h){return Math.pow(2,h)},l.ad=q,l.ae=kt,l.af=85.051129,l.ag=$1,l.ah=function(h){return Math.log(h)/Math.LN2},l.ai=function(h){var a=h[0],d=h[1];return a*a+d*d},l.aj=function(h,a){const d=[];for(const p in h)p in a||d.push(p);return d},l.ak=function(h,a){let d=0,p=0;if(h.kind==="constant")p=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:_,minZoom:S,maxZoom:E}=h,P=_?kt(Ws.interpolationFactor(_,a,S,E),0,1):0;h.kind==="camera"?p=Xr.number(h.minSize,h.maxSize,P):d=P}return{uSizeT:d,uSize:p}},l.am=function(h,{uSize:a,uSizeT:d},{lowerSize:p,upperSize:_}){return h.kind==="source"?p/ru:h.kind==="composite"?Xr.number(p/ru,_/ru,d):a},l.an=function(h,a){var d=a[0],p=a[1],_=a[2],S=a[3],E=a[4],P=a[5],z=a[6],j=a[7],Z=a[8],te=a[9],oe=a[10],le=a[11],he=a[12],be=a[13],Me=a[14],ze=a[15],rt=d*P-p*E,$e=d*z-_*E,ae=d*j-S*E,we=p*z-_*P,Ge=p*j-S*P,It=_*j-S*z,Yt=Z*be-te*he,Et=Z*Me-oe*he,Ot=Z*ze-le*he,tn=te*Me-oe*be,Xt=te*ze-le*be,rn=oe*ze-le*Me,Vt=rt*rn-$e*Xt+ae*tn+we*Ot-Ge*Et+It*Yt;return Vt?(h[0]=(P*rn-z*Xt+j*tn)*(Vt=1/Vt),h[1]=(_*Xt-p*rn-S*tn)*Vt,h[2]=(be*It-Me*Ge+ze*we)*Vt,h[3]=(oe*Ge-te*It-le*we)*Vt,h[4]=(z*Ot-E*rn-j*Et)*Vt,h[5]=(d*rn-_*Ot+S*Et)*Vt,h[6]=(Me*ae-he*It-ze*$e)*Vt,h[7]=(Z*It-oe*ae+le*$e)*Vt,h[8]=(E*Xt-P*Ot+j*Yt)*Vt,h[9]=(p*Ot-d*Xt-S*Yt)*Vt,h[10]=(he*Ge-be*ae+ze*rt)*Vt,h[11]=(te*ae-Z*Ge-le*rt)*Vt,h[12]=(P*Et-E*tn-z*Yt)*Vt,h[13]=(d*tn-p*Et+_*Yt)*Vt,h[14]=(be*$e-he*we-Me*rt)*Vt,h[15]=(Z*we-te*$e+oe*rt)*Vt,h):null},l.ao=Ve,l.ap=function(h){return Math.hypot(h[0],h[1])},l.aq=function(h){return h[0]=0,h[1]=0,h},l.ar=function(h,a,d){return h[0]=a[0]*d,h[1]=a[1]*d,h},l.as=Gv,l.at=K,l.au=function(h,a,d,p){const _=a.y-h.y,S=a.x-h.x,E=p.y-d.y,P=p.x-d.x,z=E*S-P*_;if(z===0)return null;const j=(P*(h.y-d.y)-E*(h.x-d.x))/z;return new k(h.x+j*S,h.y+j*_)},l.av=Y1,l.aw=Rp,l.ax=function(h){let a=1/0,d=1/0,p=-1/0,_=-1/0;for(const S of h)a=Math.min(a,S.x),d=Math.min(d,S.y),p=Math.max(p,S.x),_=Math.max(_,S.y);return[a,d,p,_]},l.ay=is,l.az=ot,l.b=ye,l.b$=function(h,a){var d=h[0],p=h[1],_=h[2],S=h[3],E=h[4],P=h[5],z=h[6],j=h[7],Z=h[8],te=h[9],oe=h[10],le=h[11],he=h[12],be=h[13],Me=h[14],ze=h[15],rt=a[0],$e=a[1],ae=a[2],we=a[3],Ge=a[4],It=a[5],Yt=a[6],Et=a[7],Ot=a[8],tn=a[9],Xt=a[10],rn=a[11],Vt=a[12],xn=a[13],Bn=a[14],On=a[15];return Math.abs(d-rt)<=W*Math.max(1,Math.abs(d),Math.abs(rt))&&Math.abs(p-$e)<=W*Math.max(1,Math.abs(p),Math.abs($e))&&Math.abs(_-ae)<=W*Math.max(1,Math.abs(_),Math.abs(ae))&&Math.abs(S-we)<=W*Math.max(1,Math.abs(S),Math.abs(we))&&Math.abs(E-Ge)<=W*Math.max(1,Math.abs(E),Math.abs(Ge))&&Math.abs(P-It)<=W*Math.max(1,Math.abs(P),Math.abs(It))&&Math.abs(z-Yt)<=W*Math.max(1,Math.abs(z),Math.abs(Yt))&&Math.abs(j-Et)<=W*Math.max(1,Math.abs(j),Math.abs(Et))&&Math.abs(Z-Ot)<=W*Math.max(1,Math.abs(Z),Math.abs(Ot))&&Math.abs(te-tn)<=W*Math.max(1,Math.abs(te),Math.abs(tn))&&Math.abs(oe-Xt)<=W*Math.max(1,Math.abs(oe),Math.abs(Xt))&&Math.abs(le-rn)<=W*Math.max(1,Math.abs(le),Math.abs(rn))&&Math.abs(he-Vt)<=W*Math.max(1,Math.abs(he),Math.abs(Vt))&&Math.abs(be-xn)<=W*Math.max(1,Math.abs(be),Math.abs(xn))&&Math.abs(Me-Bn)<=W*Math.max(1,Math.abs(Me),Math.abs(Bn))&&Math.abs(ze-On)<=W*Math.max(1,Math.abs(ze),Math.abs(On))},l.b0=function(){const h=new Float32Array(16);return q(h),h},l.b1=function(){const h=new Float64Array(16);return q(h),h},l.b2=function(){return new Float64Array(16)},l.b3=function(h,a,d){const p=new Float64Array(4);return function(_,S,E,P){var z=.5*Math.PI/180;S*=z,E*=z,P*=z;var j=Math.sin(S),Z=Math.cos(S),te=Math.sin(E),oe=Math.cos(E),le=Math.sin(P),he=Math.cos(P);_[0]=j*oe*he-Z*te*le,_[1]=Z*te*he+j*oe*le,_[2]=Z*oe*le-j*te*he,_[3]=Z*oe*he+j*te*le}(p,h,a-90,d),p},l.b4=function(h,a,d,p){var _,S,E,P,z,j=a[0],Z=a[1],te=a[2],oe=a[3],le=d[0],he=d[1],be=d[2],Me=d[3];return(S=j*le+Z*he+te*be+oe*Me)<0&&(S=-S,le=-le,he=-he,be=-be,Me=-Me),1-S>W?(_=Math.acos(S),E=Math.sin(_),P=Math.sin((1-p)*_)/E,z=Math.sin(p*_)/E):(P=1-p,z=p),h[0]=P*j+z*le,h[1]=P*Z+z*he,h[2]=P*te+z*be,h[3]=P*oe+z*Me,h},l.b5=function(h){const a=new Float64Array(9);var d,p,_,S,E,P,z,j,Z,te,oe,le,he,be,Me,ze,rt,$e;te=(_=(p=h)[0])*(z=_+_),oe=(S=p[1])*z,he=(E=p[2])*z,be=E*(j=S+S),ze=(P=p[3])*z,rt=P*j,$e=P*(Z=E+E),(d=a)[0]=1-(le=S*j)-(Me=E*Z),d[3]=oe-$e,d[6]=he+rt,d[1]=oe+$e,d[4]=1-te-Me,d[7]=be-ze,d[2]=he-rt,d[5]=be+ze,d[8]=1-te-le;const ae=Mt(-Math.asin(kt(a[2],-1,1)));let we,Ge;return Math.hypot(a[5],a[8])<.001?(we=0,Ge=-Mt(Math.atan2(a[3],a[4]))):(we=Mt(a[5]===0&&a[8]===0?0:Math.atan2(a[5],a[8])),Ge=Mt(a[1]===0&&a[0]===0?0:Math.atan2(a[1],a[0]))),{roll:we,pitch:ae+90,bearing:Ge}},l.b6=function(h,a){return h.roll==a.roll&&h.pitch==a.pitch&&h.bearing==a.bearing},l.b7=Jn,l.b8=Gu,l.b9=tf,l.bA=function(h){if(h.type==="custom")return new Eg(h);switch(h.type){case"background":return new l2(h);case"circle":return new xw(h);case"fill":return new c1(h);case"fill-extrusion":return new Ko(h);case"heatmap":return new xv(h);case"hillshade":return new Xn(h);case"line":return new Uw(h);case"raster":return new Sg(h);case"symbol":return new Qp(h)}},l.bB=Lt,l.bC=function(h,a){if(!h)return[{command:"setStyle",args:[a]}];let d=[];try{if(!Ze(h.version,a.version))return[{command:"setStyle",args:[a]}];Ze(h.center,a.center)||d.push({command:"setCenter",args:[a.center]}),Ze(h.centerAltitude,a.centerAltitude)||d.push({command:"setCenterAltitude",args:[a.centerAltitude]}),Ze(h.zoom,a.zoom)||d.push({command:"setZoom",args:[a.zoom]}),Ze(h.bearing,a.bearing)||d.push({command:"setBearing",args:[a.bearing]}),Ze(h.pitch,a.pitch)||d.push({command:"setPitch",args:[a.pitch]}),Ze(h.roll,a.roll)||d.push({command:"setRoll",args:[a.roll]}),Ze(h.sprite,a.sprite)||d.push({command:"setSprite",args:[a.sprite]}),Ze(h.glyphs,a.glyphs)||d.push({command:"setGlyphs",args:[a.glyphs]}),Ze(h.transition,a.transition)||d.push({command:"setTransition",args:[a.transition]}),Ze(h.light,a.light)||d.push({command:"setLight",args:[a.light]}),Ze(h.terrain,a.terrain)||d.push({command:"setTerrain",args:[a.terrain]}),Ze(h.sky,a.sky)||d.push({command:"setSky",args:[a.sky]}),Ze(h.projection,a.projection)||d.push({command:"setProjection",args:[a.projection]});const p={},_=[];(function(E,P,z,j){let Z;for(Z in P=P||{},E=E||{})Object.prototype.hasOwnProperty.call(E,Z)&&(Object.prototype.hasOwnProperty.call(P,Z)||yt(Z,z,j));for(Z in P)Object.prototype.hasOwnProperty.call(P,Z)&&(Object.prototype.hasOwnProperty.call(E,Z)?Ze(E[Z],P[Z])||(E[Z].type==="geojson"&&P[Z].type==="geojson"&&pn(E,P,Z)?St(z,{command:"setGeoJSONSourceData",args:[Z,P[Z].data]}):qt(Z,P,z,j)):Dt(Z,P,z))})(h.sources,a.sources,_,p);const S=[];h.layers&&h.layers.forEach(E=>{"source"in E&&p[E.source]?d.push({command:"removeLayer",args:[E.id]}):S.push(E)}),d=d.concat(_),function(E,P,z){P=P||[];const j=(E=E||[]).map(Vn),Z=P.map(Vn),te=E.reduce(Qn,{}),oe=P.reduce(Qn,{}),le=j.slice(),he=Object.create(null);let be,Me,ze,rt,$e;for(let ae=0,we=0;ae<j.length;ae++)be=j[ae],Object.prototype.hasOwnProperty.call(oe,be)?we++:(St(z,{command:"removeLayer",args:[be]}),le.splice(le.indexOf(be,we),1));for(let ae=0,we=0;ae<Z.length;ae++)be=Z[Z.length-1-ae],le[le.length-1-ae]!==be&&(Object.prototype.hasOwnProperty.call(te,be)?(St(z,{command:"removeLayer",args:[be]}),le.splice(le.lastIndexOf(be,le.length-we),1)):we++,rt=le[le.length-ae],St(z,{command:"addLayer",args:[oe[be],rt]}),le.splice(le.length-ae,0,be),he[be]=!0);for(let ae=0;ae<Z.length;ae++)if(be=Z[ae],Me=te[be],ze=oe[be],!he[be]&&!Ze(Me,ze))if(Ze(Me.source,ze.source)&&Ze(Me["source-layer"],ze["source-layer"])&&Ze(Me.type,ze.type)){for($e in mn(Me.layout,ze.layout,z,be,null,"setLayoutProperty"),mn(Me.paint,ze.paint,z,be,null,"setPaintProperty"),Ze(Me.filter,ze.filter)||St(z,{command:"setFilter",args:[be,ze.filter]}),Ze(Me.minzoom,ze.minzoom)&&Ze(Me.maxzoom,ze.maxzoom)||St(z,{command:"setLayerZoomRange",args:[be,ze.minzoom,ze.maxzoom]}),Me)Object.prototype.hasOwnProperty.call(Me,$e)&&$e!=="layout"&&$e!=="paint"&&$e!=="filter"&&$e!=="metadata"&&$e!=="minzoom"&&$e!=="maxzoom"&&($e.indexOf("paint.")===0?mn(Me[$e],ze[$e],z,be,$e.slice(6),"setPaintProperty"):Ze(Me[$e],ze[$e])||St(z,{command:"setLayerProperty",args:[be,$e,ze[$e]]}));for($e in ze)Object.prototype.hasOwnProperty.call(ze,$e)&&!Object.prototype.hasOwnProperty.call(Me,$e)&&$e!=="layout"&&$e!=="paint"&&$e!=="filter"&&$e!=="metadata"&&$e!=="minzoom"&&$e!=="maxzoom"&&($e.indexOf("paint.")===0?mn(Me[$e],ze[$e],z,be,$e.slice(6),"setPaintProperty"):Ze(Me[$e],ze[$e])||St(z,{command:"setLayerProperty",args:[be,$e,ze[$e]]}))}else St(z,{command:"removeLayer",args:[be]}),rt=le[le.lastIndexOf(be)+1],St(z,{command:"addLayer",args:[ze,rt]})}(S,a.layers,d)}catch(p){console.warn("Unable to compute style diff:",p),d=[{command:"setStyle",args:[a]}]}return d},l.bD=function(h){const a=[],d=h.id;return d===void 0&&a.push({message:`layers.${d}: missing required property "id"`}),h.render===void 0&&a.push({message:`layers.${d}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&a.push({message:`layers.${d}: property "renderingMode" must be either "2d" or "3d"`}),a},l.bE=function h(a,d){if(Array.isArray(a)){if(!Array.isArray(d)||a.length!==d.length)return!1;for(let p=0;p<a.length;p++)if(!h(a[p],d[p]))return!1;return!0}if(typeof a=="object"&&a!==null&&d!==null){if(typeof d!="object"||Object.keys(a).length!==Object.keys(d).length)return!1;for(const p in a)if(!h(a[p],d[p]))return!1;return!0}return a===d},l.bF=lt,l.bG=Pt,l.bH=class extends Es{constructor(h,a){super(h,a),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},l.bI=da,l.bJ=class extends Es{constructor(h,a){super(h,a),this.current=ml}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let a=1;a<16;a++)if(h[a]!==this.current[a]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},l.bK=ha,l.bL=class extends Es{constructor(h,a){super(h,a),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},l.bM=class extends Es{constructor(h,a){super(h,a),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},l.bN=X,l.bO=function(h,a){var d=Math.sin(a),p=Math.cos(a);return h[0]=p,h[1]=d,h[2]=0,h[3]=-d,h[4]=p,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},l.bP=function(h,a,d){var p=a[0],_=a[1],S=a[2];return h[0]=p*d[0]+_*d[3]+S*d[6],h[1]=p*d[1]+_*d[4]+S*d[7],h[2]=p*d[2]+_*d[5]+S*d[8],h},l.bQ=function(h,a,d,p,_,S,E){var P=1/(a-d),z=1/(p-_),j=1/(S-E);return h[0]=-2*P,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*z,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*j,h[11]=0,h[12]=(a+d)*P,h[13]=(_+p)*z,h[14]=(E+S)*j,h[15]=1,h},l.bR=class extends co{},l.bS=Zw,l.bT=class extends Kd{},l.bU=Vp,l.bV=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},l.bW=mg,l.bX=function(h,a,d){var p=a[0],_=a[1],S=a[2],E=d[3]*p+d[7]*_+d[11]*S+d[15];return h[0]=(d[0]*p+d[4]*_+d[8]*S+d[12])/(E=E||1),h[1]=(d[1]*p+d[5]*_+d[9]*S+d[13])/E,h[2]=(d[2]*p+d[6]*_+d[10]*S+d[14])/E,h},l.bY=class extends ja{},l.bZ=class extends v{},l.b_=function(h,a){return h[0]===a[0]&&h[1]===a[1]&&h[2]===a[2]&&h[3]===a[3]&&h[4]===a[4]&&h[5]===a[5]&&h[6]===a[6]&&h[7]===a[7]&&h[8]===a[8]&&h[9]===a[9]&&h[10]===a[10]&&h[11]===a[11]&&h[12]===a[12]&&h[13]===a[13]&&h[14]===a[14]&&h[15]===a[15]},l.ba=Nh,l.bb=Bh,l.bc=qe,l.bd=Ue,l.be=Gs,l.bf=function(h,a,d,p,_){return qe(p,_,kt((h-a)/(d-a),0,1))},l.bg=Zt,l.bh=function(){return new Float64Array(3)},l.bi=function(h,a,d,p){return h[0]=a[0]+d[0]*p,h[1]=a[1]+d[1]*p,h[2]=a[2]+d[2]*p,h},l.bj=ce,l.bk=function(){return new Float64Array(4)},l.bl=function(h,a,d,p){var _=[],S=[];return _[0]=a[0]-d[0],_[1]=a[1]-d[1],_[2]=a[2]-d[2],S[0]=_[0]*Math.cos(p)-_[1]*Math.sin(p),S[1]=_[0]*Math.sin(p)+_[1]*Math.cos(p),S[2]=_[2],h[0]=S[0]+d[0],h[1]=S[1]+d[1],h[2]=S[2]+d[2],h},l.bm=function(h,a,d,p){var _=[],S=[];return _[0]=a[0]-d[0],_[1]=a[1]-d[1],_[2]=a[2]-d[2],S[0]=_[0],S[1]=_[1]*Math.cos(p)-_[2]*Math.sin(p),S[2]=_[1]*Math.sin(p)+_[2]*Math.cos(p),h[0]=S[0]+d[0],h[1]=S[1]+d[1],h[2]=S[2]+d[2],h},l.bn=function(h,a,d,p){var _=[],S=[];return _[0]=a[0]-d[0],_[1]=a[1]-d[1],_[2]=a[2]-d[2],S[0]=_[2]*Math.sin(p)+_[0]*Math.cos(p),S[1]=_[1],S[2]=_[2]*Math.cos(p)-_[0]*Math.sin(p),h[0]=S[0]+d[0],h[1]=S[1]+d[1],h[2]=S[2]+d[2],h},l.bo=ee,l.bp=function(h,a,d){var p=Math.sin(d),_=Math.cos(d),S=a[0],E=a[1],P=a[2],z=a[3],j=a[8],Z=a[9],te=a[10],oe=a[11];return a!==h&&(h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=S*_-j*p,h[1]=E*_-Z*p,h[2]=P*_-te*p,h[3]=z*_-oe*p,h[8]=S*p+j*_,h[9]=E*p+Z*_,h[10]=P*p+te*_,h[11]=z*p+oe*_,h},l.bq=function(h,a){const d=Zt(h,360),p=Zt(a,360),_=p-d,S=p>d?_-360:_+360;return Math.abs(_)<Math.abs(S)?_:S},l.br=function(h){return h[0]=0,h[1]=0,h[2]=0,h},l.bs=function(h,a,d,p){const _=Math.sqrt(h*h+a*a),S=Math.sqrt(d*d+p*p);h/=_,a/=_,d/=S,p/=S;const E=Math.acos(h*d+a*p);return-a*d+h*p>0?E:-E},l.bt=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]+h[3]},l.bu=Jp,l.bv=function(h,a){const d=Zt(h,2*Math.PI),p=Zt(a,2*Math.PI);return Math.min(Math.abs(d-p),Math.abs(d-p+2*Math.PI),Math.abs(d-p-2*Math.PI))},l.bw=function(){const h={},a=ve.$version;for(const d in ve.$root){const p=ve.$root[d];if(p.required){let _=null;_=d==="version"?a:p.type==="array"?[]:{},_!=null&&(h[d]=_)}}return h},l.bx=Lh,l.by=Nt,l.bz=function(h){h=h.slice();const a=Object.create(null);for(let d=0;d<h.length;d++)a[h[d].id]=h[d];for(let d=0;d<h.length;d++)"ref"in h[d]&&(h[d]=ht(h[d],a[h[d].ref]));return h},l.c=cn,l.c0=function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},l.c1=h=>h.type==="symbol",l.c2=h=>h.type==="circle",l.c3=h=>h.type==="heatmap",l.c4=h=>h.type==="line",l.c5=h=>h.type==="fill",l.c6=h=>h.type==="fill-extrusion",l.c7=h=>h.type==="hillshade",l.c8=h=>h.type==="raster",l.c9=h=>h.type==="background",l.cA=Gp,l.cB=Vv,l.cC=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},l.cD=function(h,a,d,p,_){return s(this,void 0,void 0,function*(){if(U())try{return yield Fe(h,a,d,p,_)}catch{}return function(S,E,P,z,j){const Z=S.width,te=S.height;tt&&it||(tt=new OffscreenCanvas(Z,te),it=tt.getContext("2d",{willReadFrequently:!0})),tt.width=Z,tt.height=te,it.drawImage(S,0,0,Z,te);const oe=it.getImageData(E,P,z,j);return it.clearRect(0,0,Z,te),oe.data}(h,a,d,p,_)})},l.cE=W1,l.cF=f,l.cG=x,l.cH=Lv,l.cI=Nv,l.cJ=Sc,l.cK=Go,l.ca=h=>h.type==="custom",l.cb=Tt,l.cc=function(h,a,d){const p=Ne(a.x-d.x,a.y-d.y),_=Ne(h.x-d.x,h.y-d.y);var S,E;return Mt(Math.atan2(p[0]*_[1]-p[1]*_[0],(S=p)[0]*(E=_)[0]+S[1]*E[1]))},l.cd=Bt,l.ce=function(h,a){return At[a]&&(h instanceof MouseEvent||h instanceof WheelEvent)},l.cf=function(h,a){return wt[a]&&"touches"in h},l.cg=function(h){return wt[h]||At[h]},l.ch=function(h,a,d){var p=a[0],_=a[1];return h[0]=d[0]*p+d[4]*_+d[12],h[1]=d[1]*p+d[5]*_+d[13],h},l.ci=function(h,a){const{x:d,y:p}=em.fromLngLat(a);return!(h<0||h>25||p<0||p>=1||d<0||d>=1)},l.cj=function(h,a){return h[0]=a[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=a[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=a[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},l.ck=class extends Rc{},l.cl=sb,l.cn=function(h){return h.message===Ht},l.co=_t,l.cp=function(h,a){fn.REGISTERED_PROTOCOLS[h]=a},l.cq=function(h){delete fn.REGISTERED_PROTOCOLS[h]},l.cr=function(h,a){const d={};for(let _=0;_<h.length;_++){const S=a&&a[h[_].id]||Vd(h[_]);a&&(a[h[_].id]=S);let E=d[S];E||(E=d[S]=[]),E.push(h[_])}const p=[];for(const _ in d)p.push(d[_]);return p},l.cs=yn,l.ct=q1,l.cu=lr,l.cv=S1,l.cw=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=et/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const a=h.bucket.layers[0],d=a.layout,p=a._unevaluatedLayout._values,_={layoutIconSize:p["icon-size"].possiblyEvaluate(new Zr(h.bucket.zoom+1),h.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Zr(h.bucket.zoom+1),h.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Zr(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:Z}=h.bucket.textSizeData;_.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Zr(j),h.canonical),p["text-size"].possiblyEvaluate(new Zr(Z),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:Z}=h.bucket.iconSizeData;_.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Zr(j),h.canonical),p["icon-size"].possiblyEvaluate(new Zr(Z),h.canonical)]}const S=d.get("text-line-height")*is,E=d.get("text-rotation-alignment")!=="viewport"&&d.get("symbol-placement")!=="point",P=d.get("text-keep-upright"),z=d.get("text-size");for(const j of h.bucket.features){const Z=d.get("text-font").evaluate(j,{},h.canonical).join(","),te=z.evaluate(j,{},h.canonical),oe=_.layoutTextSize.evaluate(j,{},h.canonical),le=_.layoutIconSize.evaluate(j,{},h.canonical),he={horizontal:{},vertical:void 0},be=j.text;let Me,ze=[0,0];if(be){const ae=be.toString(),we=d.get("text-letter-spacing").evaluate(j,{},h.canonical)*is,Ge=ig(ae)?we:0,It=d.get("text-anchor").evaluate(j,{},h.canonical),Yt=nb(a,j,h.canonical);if(!Yt){const Xt=d.get("text-radial-offset").evaluate(j,{},h.canonical);ze=Xt?Pg(It,[Xt*is,jh]):d.get("text-offset").evaluate(j,{},h.canonical).map(rn=>rn*is)}let Et=E?"center":d.get("text-justify").evaluate(j,{},h.canonical);const Ot=d.get("symbol-placement")==="point"?d.get("text-max-width").evaluate(j,{},h.canonical)*is:1/0,tn=()=>{h.bucket.allowVerticalPlacement&&jd(ae)&&(he.vertical=Cg(be,h.glyphMap,h.glyphPositions,h.imagePositions,Z,Ot,S,It,"left",Ge,ze,l.al.vertical,!0,oe,te))};if(!E&&Yt){const Xt=new Set;if(Et==="auto")for(let Vt=0;Vt<Yt.values.length;Vt+=2)Xt.add(kg(Yt.values[Vt]));else Xt.add(Et);let rn=!1;for(const Vt of Xt)if(!he.horizontal[Vt])if(rn)he.horizontal[Vt]=he.horizontal[0];else{const xn=Cg(be,h.glyphMap,h.glyphPositions,h.imagePositions,Z,Ot,S,"center",Vt,Ge,ze,l.al.horizontal,!1,oe,te);xn&&(he.horizontal[Vt]=xn,rn=xn.positionedLines.length===1)}tn()}else{Et==="auto"&&(Et=kg(It));const Xt=Cg(be,h.glyphMap,h.glyphPositions,h.imagePositions,Z,Ot,S,It,Et,Ge,ze,l.al.horizontal,!1,oe,te);Xt&&(he.horizontal[Et]=Xt),tn(),jd(ae)&&E&&P&&(he.vertical=Cg(be,h.glyphMap,h.glyphPositions,h.imagePositions,Z,Ot,S,It,Et,Ge,ze,l.al.vertical,!1,oe,te))}}let rt=!1;if(j.icon&&j.icon.name){const ae=h.imageMap[j.icon.name];ae&&(Me=i2(h.imagePositions[j.icon.name],d.get("icon-offset").evaluate(j,{},h.canonical),d.get("icon-anchor").evaluate(j,{},h.canonical)),rt=!!ae.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=rt:h.bucket.sdfIcons!==rt&&Ie("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ae.pixelRatio!==h.bucket.pixelRatio||d.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const $e=Uh(he.horizontal)||he.vertical;h.bucket.iconsInText=!!$e&&$e.iconsInText,($e||Me)&&Lg(h.bucket,j,he,Me,h.imageMap,_,oe,le,ze,rt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},l.cx=Ov,l.cy=vg,l.cz=Rv,l.d=wn,l.e=gt,l.f=h=>s(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const a=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(a)}catch(d){throw new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.g=ut,l.h=h=>new Promise((a,d)=>{const p=new Image;p.onload=()=>{a(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=pe})},p.onerror=()=>d(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(h)],{type:"image/png"});p.src=h.byteLength?URL.createObjectURL(_):pe}),l.i=Pe,l.j=(h,a)=>Wt(gt(h,{type:"json"}),a),l.k=xe,l.l=ge,l.m=Wt,l.n=(h,a)=>Wt(gt(h,{type:"arrayBuffer"}),a),l.o=function(h){return new Vv(h).readFields(qw,[])},l.p=M1,l.q=Np,l.r=Ys,l.s=Be,l.t=ng,l.u=er,l.v=ve,l.w=Ie,l.x=rg,l.y=$o,l.z=function([h,a,d]){return a+=90,a*=Math.PI/180,d*=Math.PI/180,{x:h*Math.cos(a)*Math.sin(d),y:h*Math.sin(a)*Math.sin(d),z:h*Math.cos(d)}}}),o("worker",["./shared"],function(l){class s{constructor(de){this.keyCache={},de&&this.replace(de)}replace(de){this._layerConfigs={},this._layers={},this.update(de,[])}update(de,ge){for(const Ee of de){this._layerConfigs[Ee.id]=Ee;const ve=this._layers[Ee.id]=l.bA(Ee);ve._featureFilter=l.a7(ve.filter),this.keyCache[Ee.id]&&delete this.keyCache[Ee.id]}for(const Ee of ge)delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee];this.familiesBySource={};const xe=l.cr(Object.values(this._layerConfigs),this.keyCache);for(const Ee of xe){const ve=Ee.map(yt=>this._layers[yt.id]),Qe=ve[0];if(Qe.visibility==="none")continue;const ht=Qe.source||"";let Ze=this.familiesBySource[ht];Ze||(Ze=this.familiesBySource[ht]={});const St=Qe.sourceLayer||"_geojsonTileLayer";let Dt=Ze[St];Dt||(Dt=Ze[St]=[]),Dt.push(ve)}}}class f{constructor(de){const ge={},xe=[];for(const ht in de){const Ze=de[ht],St=ge[ht]={};for(const Dt in Ze){const yt=Ze[+Dt];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const qt={x:0,y:0,w:yt.bitmap.width+2,h:yt.bitmap.height+2};xe.push(qt),St[Dt]={rect:qt,metrics:yt.metrics}}}const{w:Ee,h:ve}=l.p(xe),Qe=new l.q({width:Ee||1,height:ve||1});for(const ht in de){const Ze=de[ht];for(const St in Ze){const Dt=Ze[+St];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const yt=ge[ht][St].rect;l.q.copy(Dt.bitmap,Qe,{x:0,y:0},{x:yt.x+1,y:yt.y+1},Dt.bitmap)}}this.image=Qe,this.positions=ge}}l.cs("GlyphAtlas",f);class y{constructor(de){this.tileID=new l.Y(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId,this.inFlightDependencies=[]}parse(de,ge,xe,Ee,ve){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=de,this.collisionBoxArray=new l.a5;const Qe=new l.ct(Object.keys(de.layers).sort()),ht=new l.cu(this.tileID,this.promoteId);ht.bucketLayerIDs=[];const Ze={},St={featureIndex:ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:xe,subdivisionGranularity:ve},Dt=ge.familiesBySource[this.source];for(const Ut in Dt){const _n=de.layers[Ut];if(!_n)continue;_n.version===1&&l.w(`Vector tile source "${this.source}" layer "${Ut}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const zn=Qe.encode(Ut),$s=[];for(let Ds=0;Ds<_n.length;Ds++){const si=_n.feature(Ds),Yn=ht.getId(si,Ut);$s.push({feature:si,id:Yn,index:Ds,sourceLayerIndex:zn})}for(const Ds of Dt[Ut]){const si=Ds[0];si.source!==this.source&&l.w(`layer.source = ${si.source} does not equal this.source = ${this.source}`),si.minzoom&&this.zoom<Math.floor(si.minzoom)||si.maxzoom&&this.zoom>=si.maxzoom||si.visibility!=="none"&&(b(Ds,this.zoom,xe),(Ze[si.id]=si.createBucket({index:ht.bucketLayerIDs.length,layers:Ds,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:zn,sourceID:this.source})).populate($s,St,this.tileID.canonical),ht.bucketLayerIDs.push(Ds.map(Yn=>Yn.id)))}}const yt=l.bF(St.glyphDependencies,Ut=>Object.keys(Ut).map(Number));this.inFlightDependencies.forEach(Ut=>Ut==null?void 0:Ut.abort()),this.inFlightDependencies=[];let qt=Promise.resolve({});if(Object.keys(yt).length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),qt=Ee.sendAsync({type:"GG",data:{stacks:yt,source:this.source,tileID:this.tileID,type:"glyphs"}},Ut)}const pn=Object.keys(St.iconDependencies);let mn=Promise.resolve({});if(pn.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),mn=Ee.sendAsync({type:"GI",data:{icons:pn,source:this.source,tileID:this.tileID,type:"icons"}},Ut)}const Vn=Object.keys(St.patternDependencies);let Qn=Promise.resolve({});if(Vn.length){const Ut=new AbortController;this.inFlightDependencies.push(Ut),Qn=Ee.sendAsync({type:"GI",data:{icons:Vn,source:this.source,tileID:this.tileID,type:"patterns"}},Ut)}const[Ft,jn,xr]=yield Promise.all([qt,mn,Qn]),Vr=new f(Ft),Ar=new l.cv(jn,xr);for(const Ut in Ze){const _n=Ze[Ut];_n instanceof l.a6?(b(_n.layers,this.zoom,xe),l.cw({bucket:_n,glyphMap:Ft,glyphPositions:Vr.positions,imageMap:jn,imagePositions:Ar.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:St.subdivisionGranularity})):_n.hasPattern&&(_n instanceof l.cx||_n instanceof l.cy||_n instanceof l.cz)&&(b(_n.layers,this.zoom,xe),_n.addFeatures(St,this.tileID.canonical,Ar.patternPositions))}return this.status="done",{buckets:Object.values(Ze).filter(Ut=>!Ut.isEmpty()),featureIndex:ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Vr.image,imageAtlas:Ar,glyphMap:this.returnDependencies?Ft:null,iconMap:this.returnDependencies?jn:null,glyphPositions:this.returnDependencies?Vr.positions:null}})}}function b(Xe,de,ge){const xe=new l.C(de);for(const Ee of Xe)Ee.recalculate(xe,ge)}class x{constructor(de,ge,xe){this.actor=de,this.layerIndex=ge,this.availableImages=xe,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(de,ge){return l._(this,void 0,void 0,function*(){const xe=yield l.n(de.request,ge);try{return{vectorTile:new l.cA.VectorTile(new l.cB(xe.data)),rawData:xe.data,cacheControl:xe.cacheControl,expires:xe.expires}}catch(Ee){const ve=new Uint8Array(xe.data);let Qe=`Unable to parse the tile at ${de.request.url}, `;throw Qe+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ee.message}`,new Error(Qe)}})}loadTile(de){return l._(this,void 0,void 0,function*(){const ge=de.uid,xe=!!(de&&de.request&&de.request.collectResourceTiming)&&new l.cC(de.request),Ee=new y(de);this.loading[ge]=Ee;const ve=new AbortController;Ee.abort=ve;try{const Qe=yield this.loadVectorTile(de,ve);if(delete this.loading[ge],!Qe)return null;const ht=Qe.rawData,Ze={};Qe.expires&&(Ze.expires=Qe.expires),Qe.cacheControl&&(Ze.cacheControl=Qe.cacheControl);const St={};if(xe){const yt=xe.finish();yt&&(St.resourceTiming=JSON.parse(JSON.stringify(yt)))}Ee.vectorTile=Qe.vectorTile;const Dt=Ee.parse(Qe.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);this.loaded[ge]=Ee,this.fetching[ge]={rawTileData:ht,cacheControl:Ze,resourceTiming:St};try{const yt=yield Dt;return l.e({rawTileData:ht.slice(0)},yt,Ze,St)}finally{delete this.fetching[ge]}}catch(Qe){throw delete this.loading[ge],Ee.status="done",this.loaded[ge]=Ee,Qe}})}reloadTile(de){return l._(this,void 0,void 0,function*(){const ge=de.uid;if(!this.loaded||!this.loaded[ge])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const xe=this.loaded[ge];if(xe.showCollisionBoxes=de.showCollisionBoxes,xe.status==="parsing"){const Ee=yield xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);let ve;if(this.fetching[ge]){const{rawTileData:Qe,cacheControl:ht,resourceTiming:Ze}=this.fetching[ge];delete this.fetching[ge],ve=l.e({rawTileData:Qe.slice(0)},Ee,ht,Ze)}else ve=Ee;return ve}if(xe.status==="done"&&xe.vectorTile)return xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity)})}abortTile(de){return l._(this,void 0,void 0,function*(){const ge=this.loading,xe=de.uid;ge&&ge[xe]&&ge[xe].abort&&(ge[xe].abort.abort(),delete ge[xe])})}removeTile(de){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[de.uid]&&delete this.loaded[de.uid]})}}class M{constructor(){this.loaded={}}loadTile(de){return l._(this,void 0,void 0,function*(){const{uid:ge,encoding:xe,rawImageData:Ee,redFactor:ve,greenFactor:Qe,blueFactor:ht,baseShift:Ze}=de,St=Ee.width+2,Dt=Ee.height+2,yt=l.b(Ee)?new l.R({width:St,height:Dt},yield l.cD(Ee,-1,-1,St,Dt)):Ee,qt=new l.cE(ge,yt,xe,ve,Qe,ht,Ze);return this.loaded=this.loaded||{},this.loaded[ge]=qt,qt})}removeTile(de){const ge=this.loaded,xe=de.uid;ge&&ge[xe]&&delete ge[xe]}}var A,k,L=function(){if(k)return A;function Xe(ge,xe){if(ge.length!==0){de(ge[0],xe);for(var Ee=1;Ee<ge.length;Ee++)de(ge[Ee],!xe)}}function de(ge,xe){for(var Ee=0,ve=0,Qe=0,ht=ge.length,Ze=ht-1;Qe<ht;Ze=Qe++){var St=(ge[Qe][0]-ge[Ze][0])*(ge[Ze][1]+ge[Qe][1]),Dt=Ee+St;ve+=Math.abs(Ee)>=Math.abs(St)?Ee-Dt+St:St-Dt+Ee,Ee=Dt}Ee+ve>=0!=!!xe&&ge.reverse()}return k=1,A=function ge(xe,Ee){var ve,Qe=xe&&xe.type;if(Qe==="FeatureCollection")for(ve=0;ve<xe.features.length;ve++)ge(xe.features[ve],Ee);else if(Qe==="GeometryCollection")for(ve=0;ve<xe.geometries.length;ve++)ge(xe.geometries[ve],Ee);else if(Qe==="Feature")ge(xe.geometry,Ee);else if(Qe==="Polygon")Xe(xe.coordinates,Ee);else if(Qe==="MultiPolygon")for(ve=0;ve<xe.coordinates.length;ve++)Xe(xe.coordinates[ve],Ee);return xe}}(),F=l.cF(L);const V=l.cA.VectorTileFeature.prototype.toGeoJSON;class O{constructor(de){this._feature=de,this.extent=l.Z,this.type=de.type,this.properties=de.tags,"id"in de&&!isNaN(de.id)&&(this.id=parseInt(de.id,10))}loadGeometry(){if(this._feature.type===1){const de=[];for(const ge of this._feature.geometry)de.push([new l.P(ge[0],ge[1])]);return de}{const de=[];for(const ge of this._feature.geometry){const xe=[];for(const Ee of ge)xe.push(new l.P(Ee[0],Ee[1]));de.push(xe)}return de}}toGeoJSON(de,ge,xe){return V.call(this,de,ge,xe)}}class N{constructor(de){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.Z,this.length=de.length,this._features=de}feature(de){return new O(this._features[de])}}var U,W,ne,X={exports:{}},q=function(){if(ne)return X.exports;ne=1;var Xe=l.cI(),de=function(){if(W)return U;W=1;var Dt=l.cG(),yt=l.cH().VectorTileFeature;function qt(mn,Vn){this.options=Vn||{},this.features=mn,this.length=mn.length}function pn(mn,Vn){this.id=typeof mn.id=="number"?mn.id:void 0,this.type=mn.type,this.rawGeometry=mn.type===1?[mn.geometry]:mn.geometry,this.properties=mn.tags,this.extent=Vn||4096}return U=qt,qt.prototype.feature=function(mn){return new pn(this.features[mn],this.options.extent)},pn.prototype.loadGeometry=function(){var mn=this.rawGeometry;this.geometry=[];for(var Vn=0;Vn<mn.length;Vn++){for(var Qn=mn[Vn],Ft=[],jn=0;jn<Qn.length;jn++)Ft.push(new Dt(Qn[jn][0],Qn[jn][1]));this.geometry.push(Ft)}return this.geometry},pn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var mn=this.geometry,Vn=1/0,Qn=-1/0,Ft=1/0,jn=-1/0,xr=0;xr<mn.length;xr++)for(var Vr=mn[xr],Ar=0;Ar<Vr.length;Ar++){var Ut=Vr[Ar];Vn=Math.min(Vn,Ut.x),Qn=Math.max(Qn,Ut.x),Ft=Math.min(Ft,Ut.y),jn=Math.max(jn,Ut.y)}return[Vn,Ft,Qn,jn]},pn.prototype.toGeoJSON=yt.prototype.toGeoJSON,U}();function ge(Dt){var yt=new Xe;return function(qt,pn){for(var mn in qt.layers)pn.writeMessage(3,xe,qt.layers[mn])}(Dt,yt),yt.finish()}function xe(Dt,yt){var qt;yt.writeVarintField(15,Dt.version||1),yt.writeStringField(1,Dt.name||""),yt.writeVarintField(5,Dt.extent||4096);var pn={keys:[],values:[],keycache:{},valuecache:{}};for(qt=0;qt<Dt.length;qt++)pn.feature=Dt.feature(qt),yt.writeMessage(2,Ee,pn);var mn=pn.keys;for(qt=0;qt<mn.length;qt++)yt.writeStringField(3,mn[qt]);var Vn=pn.values;for(qt=0;qt<Vn.length;qt++)yt.writeMessage(4,St,Vn[qt])}function Ee(Dt,yt){var qt=Dt.feature;qt.id!==void 0&&yt.writeVarintField(1,qt.id),yt.writeMessage(2,ve,Dt),yt.writeVarintField(3,qt.type),yt.writeMessage(4,Ze,qt)}function ve(Dt,yt){var qt=Dt.feature,pn=Dt.keys,mn=Dt.values,Vn=Dt.keycache,Qn=Dt.valuecache;for(var Ft in qt.properties){var jn=qt.properties[Ft],xr=Vn[Ft];if(jn!==null){xr===void 0&&(pn.push(Ft),Vn[Ft]=xr=pn.length-1),yt.writeVarint(xr);var Vr=typeof jn;Vr!=="string"&&Vr!=="boolean"&&Vr!=="number"&&(jn=JSON.stringify(jn));var Ar=Vr+":"+jn,Ut=Qn[Ar];Ut===void 0&&(mn.push(jn),Qn[Ar]=Ut=mn.length-1),yt.writeVarint(Ut)}}}function Qe(Dt,yt){return(yt<<3)+(7&Dt)}function ht(Dt){return Dt<<1^Dt>>31}function Ze(Dt,yt){for(var qt=Dt.loadGeometry(),pn=Dt.type,mn=0,Vn=0,Qn=qt.length,Ft=0;Ft<Qn;Ft++){var jn=qt[Ft],xr=1;pn===1&&(xr=jn.length),yt.writeVarint(Qe(1,xr));for(var Vr=pn===3?jn.length-1:jn.length,Ar=0;Ar<Vr;Ar++){Ar===1&&pn!==1&&yt.writeVarint(Qe(2,Vr-1));var Ut=jn[Ar].x-mn,_n=jn[Ar].y-Vn;yt.writeVarint(ht(Ut)),yt.writeVarint(ht(_n)),mn+=Ut,Vn+=_n}pn===3&&yt.writeVarint(Qe(7,1))}}function St(Dt,yt){var qt=typeof Dt;qt==="string"?yt.writeStringField(1,Dt):qt==="boolean"?yt.writeBooleanField(7,Dt):qt==="number"&&(Dt%1!=0?yt.writeDoubleField(3,Dt):Dt<0?yt.writeSVarintField(6,Dt):yt.writeVarintField(5,Dt))}return X.exports=ge,X.exports.fromVectorTileJs=ge,X.exports.fromGeojsonVt=function(Dt,yt){yt=yt||{};var qt={};for(var pn in Dt)qt[pn]=new de(Dt[pn].features,yt),qt[pn].name=pn,qt[pn].version=yt.version,qt[pn].extent=yt.extent;return ge({layers:qt})},X.exports.GeoJSONWrapper=de,X.exports}(),G=l.cF(q);const ee={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Xe=>Xe},ue=Math.fround||(Y=new Float32Array(1),Xe=>(Y[0]=+Xe,Y[0]));var Y;const ce=3,K=5,Se=6;class Ve{constructor(de){this.options=Object.assign(Object.create(ee),de),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(de){const{log:ge,minZoom:xe,maxZoom:Ee}=this.options;ge&&console.time("total time");const ve=`prepare ${de.length} points`;ge&&console.time(ve),this.points=de;const Qe=[];for(let Ze=0;Ze<de.length;Ze++){const St=de[Ze];if(!St.geometry)continue;const[Dt,yt]=St.geometry.coordinates,qt=ue(ot(Dt)),pn=ue(Zt(yt));Qe.push(qt,pn,1/0,Ze,-1,1),this.options.reduce&&Qe.push(0)}let ht=this.trees[Ee+1]=this._createTree(Qe);ge&&console.timeEnd(ve);for(let Ze=Ee;Ze>=xe;Ze--){const St=+Date.now();ht=this.trees[Ze]=this._createTree(this._cluster(ht,Ze)),ge&&console.log("z%d: %d clusters in %dms",Ze,ht.numItems,+Date.now()-St)}return ge&&console.timeEnd("total time"),this}getClusters(de,ge){let xe=((de[0]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,de[1]));let ve=de[2]===180?180:((de[2]+180)%360+360)%360-180;const Qe=Math.max(-90,Math.min(90,de[3]));if(de[2]-de[0]>=360)xe=-180,ve=180;else if(xe>ve){const yt=this.getClusters([xe,Ee,180,Qe],ge),qt=this.getClusters([-180,Ee,ve,Qe],ge);return yt.concat(qt)}const ht=this.trees[this._limitZoom(ge)],Ze=ht.range(ot(xe),Zt(Qe),ot(ve),Zt(Ee)),St=ht.data,Dt=[];for(const yt of Ze){const qt=this.stride*yt;Dt.push(St[qt+K]>1?Ne(St,qt,this.clusterProps):this.points[St[qt+ce]])}return Dt}getChildren(de){const ge=this._getOriginId(de),xe=this._getOriginZoom(de),Ee="No cluster with the specified id.",ve=this.trees[xe];if(!ve)throw new Error(Ee);const Qe=ve.data;if(ge*this.stride>=Qe.length)throw new Error(Ee);const ht=this.options.radius/(this.options.extent*Math.pow(2,xe-1)),Ze=ve.within(Qe[ge*this.stride],Qe[ge*this.stride+1],ht),St=[];for(const Dt of Ze){const yt=Dt*this.stride;Qe[yt+4]===de&&St.push(Qe[yt+K]>1?Ne(Qe,yt,this.clusterProps):this.points[Qe[yt+ce]])}if(St.length===0)throw new Error(Ee);return St}getLeaves(de,ge,xe){const Ee=[];return this._appendLeaves(Ee,de,ge=ge||10,xe=xe||0,0),Ee}getTile(de,ge,xe){const Ee=this.trees[this._limitZoom(de)],ve=Math.pow(2,de),{extent:Qe,radius:ht}=this.options,Ze=ht/Qe,St=(xe-Ze)/ve,Dt=(xe+1+Ze)/ve,yt={features:[]};return this._addTileFeatures(Ee.range((ge-Ze)/ve,St,(ge+1+Ze)/ve,Dt),Ee.data,ge,xe,ve,yt),ge===0&&this._addTileFeatures(Ee.range(1-Ze/ve,St,1,Dt),Ee.data,ve,xe,ve,yt),ge===ve-1&&this._addTileFeatures(Ee.range(0,St,Ze/ve,Dt),Ee.data,-1,xe,ve,yt),yt.features.length?yt:null}getClusterExpansionZoom(de){let ge=this._getOriginZoom(de)-1;for(;ge<=this.options.maxZoom;){const xe=this.getChildren(de);if(ge++,xe.length!==1)break;de=xe[0].properties.cluster_id}return ge}_appendLeaves(de,ge,xe,Ee,ve){const Qe=this.getChildren(ge);for(const ht of Qe){const Ze=ht.properties;if(Ze&&Ze.cluster?ve+Ze.point_count<=Ee?ve+=Ze.point_count:ve=this._appendLeaves(de,Ze.cluster_id,xe,Ee,ve):ve<Ee?ve++:de.push(ht),de.length===xe)break}return ve}_createTree(de){const ge=new l.aF(de.length/this.stride|0,this.options.nodeSize,Float32Array);for(let xe=0;xe<de.length;xe+=this.stride)ge.add(de[xe],de[xe+1]);return ge.finish(),ge.data=de,ge}_addTileFeatures(de,ge,xe,Ee,ve,Qe){for(const ht of de){const Ze=ht*this.stride,St=ge[Ze+K]>1;let Dt,yt,qt;if(St)Dt=et(ge,Ze,this.clusterProps),yt=ge[Ze],qt=ge[Ze+1];else{const Vn=this.points[ge[Ze+ce]];Dt=Vn.properties;const[Qn,Ft]=Vn.geometry.coordinates;yt=ot(Qn),qt=Zt(Ft)}const pn={type:1,geometry:[[Math.round(this.options.extent*(yt*ve-xe)),Math.round(this.options.extent*(qt*ve-Ee))]],tags:Dt};let mn;mn=St||this.options.generateId?ge[Ze+ce]:this.points[ge[Ze+ce]].id,mn!==void 0&&(pn.id=mn),Qe.features.push(pn)}}_limitZoom(de){return Math.max(this.options.minZoom,Math.min(Math.floor(+de),this.options.maxZoom+1))}_cluster(de,ge){const{radius:xe,extent:Ee,reduce:ve,minPoints:Qe}=this.options,ht=xe/(Ee*Math.pow(2,ge)),Ze=de.data,St=[],Dt=this.stride;for(let yt=0;yt<Ze.length;yt+=Dt){if(Ze[yt+2]<=ge)continue;Ze[yt+2]=ge;const qt=Ze[yt],pn=Ze[yt+1],mn=de.within(Ze[yt],Ze[yt+1],ht),Vn=Ze[yt+K];let Qn=Vn;for(const Ft of mn){const jn=Ft*Dt;Ze[jn+2]>ge&&(Qn+=Ze[jn+K])}if(Qn>Vn&&Qn>=Qe){let Ft,jn=qt*Vn,xr=pn*Vn,Vr=-1;const Ar=((yt/Dt|0)<<5)+(ge+1)+this.points.length;for(const Ut of mn){const _n=Ut*Dt;if(Ze[_n+2]<=ge)continue;Ze[_n+2]=ge;const zn=Ze[_n+K];jn+=Ze[_n]*zn,xr+=Ze[_n+1]*zn,Ze[_n+4]=Ar,ve&&(Ft||(Ft=this._map(Ze,yt,!0),Vr=this.clusterProps.length,this.clusterProps.push(Ft)),ve(Ft,this._map(Ze,_n)))}Ze[yt+4]=Ar,St.push(jn/Qn,xr/Qn,1/0,Ar,-1,Qn),ve&&St.push(Vr)}else{for(let Ft=0;Ft<Dt;Ft++)St.push(Ze[yt+Ft]);if(Qn>1)for(const Ft of mn){const jn=Ft*Dt;if(!(Ze[jn+2]<=ge)){Ze[jn+2]=ge;for(let xr=0;xr<Dt;xr++)St.push(Ze[jn+xr])}}}}return St}_getOriginId(de){return de-this.points.length>>5}_getOriginZoom(de){return(de-this.points.length)%32}_map(de,ge,xe){if(de[ge+K]>1){const Qe=this.clusterProps[de[ge+Se]];return xe?Object.assign({},Qe):Qe}const Ee=this.points[de[ge+ce]].properties,ve=this.options.map(Ee);return xe&&ve===Ee?Object.assign({},ve):ve}}function Ne(Xe,de,ge){return{type:"Feature",id:Xe[de+ce],properties:et(Xe,de,ge),geometry:{type:"Point",coordinates:[(xe=Xe[de],360*(xe-.5)),qe(Xe[de+1])]}};var xe}function et(Xe,de,ge){const xe=Xe[de+K],Ee=xe>=1e4?`${Math.round(xe/1e3)}k`:xe>=1e3?Math.round(xe/100)/10+"k":xe,ve=Xe[de+Se],Qe=ve===-1?{}:Object.assign({},ge[ve]);return Object.assign(Qe,{cluster:!0,cluster_id:Xe[de+ce],point_count:xe,point_count_abbreviated:Ee})}function ot(Xe){return Xe/360+.5}function Zt(Xe){const de=Math.sin(Xe*Math.PI/180),ge=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return ge<0?0:ge>1?1:ge}function qe(Xe){const de=(180-360*Xe)*Math.PI/180;return 360*Math.atan(Math.exp(de))/Math.PI-90}function Ue(Xe,de,ge,xe){let Ee=xe;const ve=de+(ge-de>>1);let Qe,ht=ge-de;const Ze=Xe[de],St=Xe[de+1],Dt=Xe[ge],yt=Xe[ge+1];for(let qt=de+3;qt<ge;qt+=3){const pn=Tt(Xe[qt],Xe[qt+1],Ze,St,Dt,yt);if(pn>Ee)Qe=qt,Ee=pn;else if(pn===Ee){const mn=Math.abs(qt-ve);mn<ht&&(Qe=qt,ht=mn)}}Ee>xe&&(Qe-de>3&&Ue(Xe,de,Qe,xe),Xe[Qe+2]=Ee,ge-Qe>3&&Ue(Xe,Qe,ge,xe))}function Tt(Xe,de,ge,xe,Ee,ve){let Qe=Ee-ge,ht=ve-xe;if(Qe!==0||ht!==0){const Ze=((Xe-ge)*Qe+(de-xe)*ht)/(Qe*Qe+ht*ht);Ze>1?(ge=Ee,xe=ve):Ze>0&&(ge+=Qe*Ze,xe+=ht*Ze)}return Qe=Xe-ge,ht=de-xe,Qe*Qe+ht*ht}function Bt(Xe,de,ge,xe){const Ee={id:Xe??null,type:de,geometry:ge,tags:xe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(de==="Point"||de==="MultiPoint"||de==="LineString")kt(Ee,ge);else if(de==="Polygon")kt(Ee,ge[0]);else if(de==="MultiLineString")for(const ve of ge)kt(Ee,ve);else if(de==="MultiPolygon")for(const ve of ge)kt(Ee,ve[0]);return Ee}function kt(Xe,de){for(let ge=0;ge<de.length;ge+=3)Xe.minX=Math.min(Xe.minX,de[ge]),Xe.minY=Math.min(Xe.minY,de[ge+1]),Xe.maxX=Math.max(Xe.maxX,de[ge]),Xe.maxY=Math.max(Xe.maxY,de[ge+1])}function un(Xe,de,ge,xe){if(!de.geometry)return;const Ee=de.geometry.coordinates;if(Ee&&Ee.length===0)return;const ve=de.geometry.type,Qe=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2);let ht=[],Ze=de.id;if(ge.promoteId?Ze=de.properties[ge.promoteId]:ge.generateId&&(Ze=xe||0),ve==="Point")gt(Ee,ht);else if(ve==="MultiPoint")for(const St of Ee)gt(St,ht);else if(ve==="LineString")ft(Ee,ht,Qe,!1);else if(ve==="MultiLineString"){if(ge.lineMetrics){for(const St of Ee)ht=[],ft(St,ht,Qe,!1),Xe.push(Bt(Ze,"LineString",ht,de.properties));return}lt(Ee,ht,Qe,!1)}else if(ve==="Polygon")lt(Ee,ht,Qe,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const St of de.geometry.geometries)un(Xe,{id:Ze,geometry:St,properties:de.properties},ge,xe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const St of Ee){const Dt=[];lt(St,Dt,Qe,!0),ht.push(Dt)}}Xe.push(Bt(Ze,ve,ht,de.properties))}function gt(Xe,de){de.push(Pt(Xe[0]),Lt(Xe[1]),0)}function ft(Xe,de,ge,xe){let Ee,ve,Qe=0;for(let Ze=0;Ze<Xe.length;Ze++){const St=Pt(Xe[Ze][0]),Dt=Lt(Xe[Ze][1]);de.push(St,Dt,0),Ze>0&&(Qe+=xe?(Ee*Dt-St*ve)/2:Math.sqrt(Math.pow(St-Ee,2)+Math.pow(Dt-ve,2))),Ee=St,ve=Dt}const ht=de.length-3;de[2]=1,Ue(de,0,ht,ge),de[ht+2]=1,de.size=Math.abs(Qe),de.start=0,de.end=de.size}function lt(Xe,de,ge,xe){for(let Ee=0;Ee<Xe.length;Ee++){const ve=[];ft(Xe[Ee],ve,ge,xe),de.push(ve)}}function Pt(Xe){return Xe/360+.5}function Lt(Xe){const de=Math.sin(Xe*Math.PI/180),ge=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return ge<0?0:ge>1?1:ge}function on(Xe,de,ge,xe,Ee,ve,Qe,ht){if(xe/=de,ve>=(ge/=de)&&Qe<xe)return Xe;if(Qe<ge||ve>=xe)return null;const Ze=[];for(const St of Xe){const Dt=St.geometry;let yt=St.type;const qt=Ee===0?St.minX:St.minY,pn=Ee===0?St.maxX:St.maxY;if(qt>=ge&&pn<xe){Ze.push(St);continue}if(pn<ge||qt>=xe)continue;let mn=[];if(yt==="Point"||yt==="MultiPoint")Ie(Dt,mn,ge,xe,Ee);else if(yt==="LineString")$(Dt,mn,ge,xe,Ee,!1,ht.lineMetrics);else if(yt==="MultiLineString")Oe(Dt,mn,ge,xe,Ee,!1);else if(yt==="Polygon")Oe(Dt,mn,ge,xe,Ee,!0);else if(yt==="MultiPolygon")for(const Vn of Dt){const Qn=[];Oe(Vn,Qn,ge,xe,Ee,!0),Qn.length&&mn.push(Qn)}if(mn.length){if(ht.lineMetrics&&yt==="LineString"){for(const Vn of mn)Ze.push(Bt(St.id,yt,Vn,St.tags));continue}yt!=="LineString"&&yt!=="MultiLineString"||(mn.length===1?(yt="LineString",mn=mn[0]):yt="MultiLineString"),yt!=="Point"&&yt!=="MultiPoint"||(yt=mn.length===3?"Point":"MultiPoint"),Ze.push(Bt(St.id,yt,mn,St.tags))}}return Ze.length?Ze:null}function Ie(Xe,de,ge,xe,Ee){for(let ve=0;ve<Xe.length;ve+=3){const Qe=Xe[ve+Ee];Qe>=ge&&Qe<=xe&&ye(de,Xe[ve],Xe[ve+1],Xe[ve+2])}}function $(Xe,de,ge,xe,Ee,ve,Qe){let ht=Pe(Xe);const Ze=Ee===0?pe:Fe;let St,Dt,yt=Xe.start;for(let Qn=0;Qn<Xe.length-3;Qn+=3){const Ft=Xe[Qn],jn=Xe[Qn+1],xr=Xe[Qn+2],Vr=Xe[Qn+3],Ar=Xe[Qn+4],Ut=Ee===0?Ft:jn,_n=Ee===0?Vr:Ar;let zn=!1;Qe&&(St=Math.sqrt(Math.pow(Ft-Vr,2)+Math.pow(jn-Ar,2))),Ut<ge?_n>ge&&(Dt=Ze(ht,Ft,jn,Vr,Ar,ge),Qe&&(ht.start=yt+St*Dt)):Ut>xe?_n<xe&&(Dt=Ze(ht,Ft,jn,Vr,Ar,xe),Qe&&(ht.start=yt+St*Dt)):ye(ht,Ft,jn,xr),_n<ge&&Ut>=ge&&(Dt=Ze(ht,Ft,jn,Vr,Ar,ge),zn=!0),_n>xe&&Ut<=xe&&(Dt=Ze(ht,Ft,jn,Vr,Ar,xe),zn=!0),!ve&&zn&&(Qe&&(ht.end=yt+St*Dt),de.push(ht),ht=Pe(Xe)),Qe&&(yt+=St)}let qt=Xe.length-3;const pn=Xe[qt],mn=Xe[qt+1],Vn=Ee===0?pn:mn;Vn>=ge&&Vn<=xe&&ye(ht,pn,mn,Xe[qt+2]),qt=ht.length-3,ve&&qt>=3&&(ht[qt]!==ht[0]||ht[qt+1]!==ht[1])&&ye(ht,ht[0],ht[1],ht[2]),ht.length&&de.push(ht)}function Pe(Xe){const de=[];return de.size=Xe.size,de.start=Xe.start,de.end=Xe.end,de}function Oe(Xe,de,ge,xe,Ee,ve){for(const Qe of Xe)$(Qe,de,ge,xe,Ee,ve,!1)}function ye(Xe,de,ge,xe){Xe.push(de,ge,xe)}function pe(Xe,de,ge,xe,Ee,ve){const Qe=(ve-de)/(xe-de);return ye(Xe,ve,ge+(Ee-ge)*Qe,1),Qe}function Fe(Xe,de,ge,xe,Ee,ve){const Qe=(ve-ge)/(Ee-ge);return ye(Xe,de+(xe-de)*Qe,ve,1),Qe}function tt(Xe,de){const ge=[];for(let xe=0;xe<Xe.length;xe++){const Ee=Xe[xe],ve=Ee.type;let Qe;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")Qe=it(Ee.geometry,de);else if(ve==="MultiLineString"||ve==="Polygon"){Qe=[];for(const ht of Ee.geometry)Qe.push(it(ht,de))}else if(ve==="MultiPolygon"){Qe=[];for(const ht of Ee.geometry){const Ze=[];for(const St of ht)Ze.push(it(St,de));Qe.push(Ze)}}ge.push(Bt(Ee.id,ve,Qe,Ee.tags))}return ge}function it(Xe,de){const ge=[];ge.size=Xe.size,Xe.start!==void 0&&(ge.start=Xe.start,ge.end=Xe.end);for(let xe=0;xe<Xe.length;xe+=3)ge.push(Xe[xe]+de,Xe[xe+1],Xe[xe+2]);return ge}function Be(Xe,de){if(Xe.transformed)return Xe;const ge=1<<Xe.z,xe=Xe.x,Ee=Xe.y;for(const ve of Xe.features){const Qe=ve.geometry,ht=ve.type;if(ve.geometry=[],ht===1)for(let Ze=0;Ze<Qe.length;Ze+=2)ve.geometry.push(Mt(Qe[Ze],Qe[Ze+1],de,ge,xe,Ee));else for(let Ze=0;Ze<Qe.length;Ze++){const St=[];for(let Dt=0;Dt<Qe[Ze].length;Dt+=2)St.push(Mt(Qe[Ze][Dt],Qe[Ze][Dt+1],de,ge,xe,Ee));ve.geometry.push(St)}}return Xe.transformed=!0,Xe}function Mt(Xe,de,ge,xe,Ee,ve){return[Math.round(ge*(Xe*xe-Ee)),Math.round(ge*(de*xe-ve))]}function wt(Xe,de,ge,xe,Ee){const ve=de===Ee.maxZoom?0:Ee.tolerance/((1<<de)*Ee.extent),Qe={features:[],numPoints:0,numSimplified:0,numFeatures:Xe.length,source:null,x:ge,y:xe,z:de,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ht of Xe)At(Qe,ht,ve,Ee);return Qe}function At(Xe,de,ge,xe){const Ee=de.geometry,ve=de.type,Qe=[];if(Xe.minX=Math.min(Xe.minX,de.minX),Xe.minY=Math.min(Xe.minY,de.minY),Xe.maxX=Math.max(Xe.maxX,de.maxX),Xe.maxY=Math.max(Xe.maxY,de.maxY),ve==="Point"||ve==="MultiPoint")for(let ht=0;ht<Ee.length;ht+=3)Qe.push(Ee[ht],Ee[ht+1]),Xe.numPoints++,Xe.numSimplified++;else if(ve==="LineString")Ht(Qe,Ee,Xe,ge,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let ht=0;ht<Ee.length;ht++)Ht(Qe,Ee[ht],Xe,ge,ve==="Polygon",ht===0);else if(ve==="MultiPolygon")for(let ht=0;ht<Ee.length;ht++){const Ze=Ee[ht];for(let St=0;St<Ze.length;St++)Ht(Qe,Ze[St],Xe,ge,!0,St===0)}if(Qe.length){let ht=de.tags||null;if(ve==="LineString"&&xe.lineMetrics){ht={};for(const St in de.tags)ht[St]=de.tags[St];ht.mapbox_clip_start=Ee.start/Ee.size,ht.mapbox_clip_end=Ee.end/Ee.size}const Ze={geometry:Qe,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:ht};de.id!==null&&(Ze.id=de.id),Xe.features.push(Ze)}}function Ht(Xe,de,ge,xe,Ee,ve){const Qe=xe*xe;if(xe>0&&de.size<(Ee?Qe:xe))return void(ge.numPoints+=de.length/3);const ht=[];for(let Ze=0;Ze<de.length;Ze+=3)(xe===0||de[Ze+2]>Qe)&&(ge.numSimplified++,ht.push(de[Ze],de[Ze+1])),ge.numPoints++;Ee&&function(Ze,St){let Dt=0;for(let yt=0,qt=Ze.length,pn=qt-2;yt<qt;pn=yt,yt+=2)Dt+=(Ze[yt]-Ze[pn])*(Ze[yt+1]+Ze[pn+1]);if(Dt>0===St)for(let yt=0,qt=Ze.length;yt<qt/2;yt+=2){const pn=Ze[yt],mn=Ze[yt+1];Ze[yt]=Ze[qt-2-yt],Ze[yt+1]=Ze[qt-1-yt],Ze[qt-2-yt]=pn,Ze[qt-1-yt]=mn}}(ht,ve),Xe.push(ht)}const cn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class fn{constructor(de,ge){const xe=(ge=this.options=function(ve,Qe){for(const ht in Qe)ve[ht]=Qe[ht];return ve}(Object.create(cn),ge)).debug;if(xe&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ee=function(ve,Qe){const ht=[];if(ve.type==="FeatureCollection")for(let Ze=0;Ze<ve.features.length;Ze++)un(ht,ve.features[Ze],Qe,Ze);else un(ht,ve.type==="Feature"?ve:{geometry:ve},Qe);return ht}(de,ge);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=function(ve,Qe){const ht=Qe.buffer/Qe.extent;let Ze=ve;const St=on(ve,1,-1-ht,ht,0,-1,2,Qe),Dt=on(ve,1,1-ht,2+ht,0,-1,2,Qe);return(St||Dt)&&(Ze=on(ve,1,-ht,1+ht,0,-1,2,Qe)||[],St&&(Ze=tt(St,1).concat(Ze)),Dt&&(Ze=Ze.concat(tt(Dt,-1)))),Ze}(Ee,ge),Ee.length&&this.splitTile(Ee,0,0,0),xe&&(Ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(de,ge,xe,Ee,ve,Qe,ht){const Ze=[de,ge,xe,Ee],St=this.options,Dt=St.debug;for(;Ze.length;){Ee=Ze.pop(),xe=Ze.pop(),ge=Ze.pop(),de=Ze.pop();const yt=1<<ge,qt=ut(ge,xe,Ee);let pn=this.tiles[qt];if(!pn&&(Dt>1&&console.time("creation"),pn=this.tiles[qt]=wt(de,ge,xe,Ee,St),this.tileCoords.push({z:ge,x:xe,y:Ee}),Dt)){Dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,xe,Ee,pn.numFeatures,pn.numPoints,pn.numSimplified),console.timeEnd("creation"));const zn=`z${ge}`;this.stats[zn]=(this.stats[zn]||0)+1,this.total++}if(pn.source=de,ve==null){if(ge===St.indexMaxZoom||pn.numPoints<=St.indexMaxPoints)continue}else{if(ge===St.maxZoom||ge===ve)continue;if(ve!=null){const zn=ve-ge;if(xe!==Qe>>zn||Ee!==ht>>zn)continue}}if(pn.source=null,de.length===0)continue;Dt>1&&console.time("clipping");const mn=.5*St.buffer/St.extent,Vn=.5-mn,Qn=.5+mn,Ft=1+mn;let jn=null,xr=null,Vr=null,Ar=null,Ut=on(de,yt,xe-mn,xe+Qn,0,pn.minX,pn.maxX,St),_n=on(de,yt,xe+Vn,xe+Ft,0,pn.minX,pn.maxX,St);de=null,Ut&&(jn=on(Ut,yt,Ee-mn,Ee+Qn,1,pn.minY,pn.maxY,St),xr=on(Ut,yt,Ee+Vn,Ee+Ft,1,pn.minY,pn.maxY,St),Ut=null),_n&&(Vr=on(_n,yt,Ee-mn,Ee+Qn,1,pn.minY,pn.maxY,St),Ar=on(_n,yt,Ee+Vn,Ee+Ft,1,pn.minY,pn.maxY,St),_n=null),Dt>1&&console.timeEnd("clipping"),Ze.push(jn||[],ge+1,2*xe,2*Ee),Ze.push(xr||[],ge+1,2*xe,2*Ee+1),Ze.push(Vr||[],ge+1,2*xe+1,2*Ee),Ze.push(Ar||[],ge+1,2*xe+1,2*Ee+1)}}getTile(de,ge,xe){de=+de,ge=+ge,xe=+xe;const Ee=this.options,{extent:ve,debug:Qe}=Ee;if(de<0||de>24)return null;const ht=1<<de,Ze=ut(de,ge=ge+ht&ht-1,xe);if(this.tiles[Ze])return Be(this.tiles[Ze],ve);Qe>1&&console.log("drilling down to z%d-%d-%d",de,ge,xe);let St,Dt=de,yt=ge,qt=xe;for(;!St&&Dt>0;)Dt--,yt>>=1,qt>>=1,St=this.tiles[ut(Dt,yt,qt)];return St&&St.source?(Qe>1&&(console.log("found parent tile z%d-%d-%d",Dt,yt,qt),console.time("drilling down")),this.splitTile(St.source,Dt,yt,qt,de,ge,xe),Qe>1&&console.timeEnd("drilling down"),this.tiles[Ze]?Be(this.tiles[Ze],ve):null):null}}function ut(Xe,de,ge){return 32*((1<<Xe)*ge+de)+Xe}function pt(Xe,de){return de?Xe.properties[de]:Xe.id}function _t(Xe,de){if(Xe==null)return!0;if(Xe.type==="Feature")return pt(Xe,de)!=null;if(Xe.type==="FeatureCollection"){const ge=new Set;for(const xe of Xe.features){const Ee=pt(xe,de);if(Ee==null||ge.has(Ee))return!1;ge.add(Ee)}return!0}return!1}function Nt(Xe,de){const ge=new Map;if(Xe!=null)if(Xe.type==="Feature")ge.set(pt(Xe,de),Xe);else for(const xe of Xe.features)ge.set(pt(xe,de),xe);return ge}class Wt extends x{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(de,ge){return l._(this,void 0,void 0,function*(){const xe=de.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ee=this._geoJSONIndex.getTile(xe.z,xe.x,xe.y);if(!Ee)return null;const ve=new N(Ee.features);let Qe=G(ve);return Qe.byteOffset===0&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),{vectorTile:ve,rawData:Qe.buffer}})}loadData(de){return l._(this,void 0,void 0,function*(){var ge;(ge=this._pendingRequest)===null||ge===void 0||ge.abort();const xe=!!(de&&de.request&&de.request.collectResourceTiming)&&new l.cC(de.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(de,this._pendingRequest),this._geoJSONIndex=de.cluster?new Ve(function({superclusterOptions:Qe,clusterProperties:ht}){if(!ht||!Qe)return Qe;const Ze={},St={},Dt={accumulated:null,zoom:0},yt={properties:null},qt=Object.keys(ht);for(const pn of qt){const[mn,Vn]=ht[pn],Qn=l.cJ(Vn),Ft=l.cJ(typeof mn=="string"?[mn,["accumulated"],["get",pn]]:mn);Ze[pn]=Qn.value,St[pn]=Ft.value}return Qe.map=pn=>{yt.properties=pn;const mn={};for(const Vn of qt)mn[Vn]=Ze[Vn].evaluate(Dt,yt);return mn},Qe.reduce=(pn,mn)=>{yt.properties=mn;for(const Vn of qt)Dt.accumulated=pn[Vn],pn[Vn]=St[Vn].evaluate(Dt,yt)},Qe}(de)).load((yield this._pendingData).features):(Ee=yield this._pendingData,new fn(Ee,de.geojsonVtOptions)),this.loaded={};const ve={};if(xe){const Qe=xe.finish();Qe&&(ve.resourceTiming={},ve.resourceTiming[de.source]=JSON.parse(JSON.stringify(Qe)))}return ve}catch(ve){if(delete this._pendingRequest,l.cn(ve))return{abandoned:!0};throw ve}var Ee})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(de){const ge=this.loaded;return ge&&ge[de.uid]?super.reloadTile(de):this.loadTile(de)}loadAndProcessGeoJSON(de,ge){return l._(this,void 0,void 0,function*(){let xe=yield this.loadGeoJSON(de,ge);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(F(xe,!0),de.filter){const Ee=l.cJ(de.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ee.result==="error")throw new Error(Ee.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(Qe=>Ee.value.evaluate({zoom:0},Qe))}}return xe})}loadGeoJSON(de,ge){return l._(this,void 0,void 0,function*(){const{promoteId:xe}=de;if(de.request){const Ee=yield l.j(de.request,ge);return this._dataUpdateable=_t(Ee.data,xe)?Nt(Ee.data,xe):void 0,Ee.data}if(typeof de.data=="string")try{const Ee=JSON.parse(de.data);return this._dataUpdateable=_t(Ee,xe)?Nt(Ee,xe):void 0,Ee}catch{throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`)}if(!de.dataDiff)throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${de.source}`);return function(Ee,ve,Qe){var ht,Ze,St,Dt;if(ve.removeAll&&Ee.clear(),ve.remove)for(const yt of ve.remove)Ee.delete(yt);if(ve.add)for(const yt of ve.add){const qt=pt(yt,Qe);qt!=null&&Ee.set(qt,yt)}if(ve.update)for(const yt of ve.update){let qt=Ee.get(yt.id);if(qt==null)continue;const pn=!yt.removeAllProperties&&(((ht=yt.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((Ze=yt.addOrUpdateProperties)===null||Ze===void 0?void 0:Ze.length)>0);if((yt.newGeometry||yt.removeAllProperties||pn)&&(qt=Object.assign({},qt),Ee.set(yt.id,qt),pn&&(qt.properties=Object.assign({},qt.properties))),yt.newGeometry&&(qt.geometry=yt.newGeometry),yt.removeAllProperties)qt.properties={};else if(((St=yt.removeProperties)===null||St===void 0?void 0:St.length)>0)for(const mn of yt.removeProperties)Object.prototype.hasOwnProperty.call(qt.properties,mn)&&delete qt.properties[mn];if(((Dt=yt.addOrUpdateProperties)===null||Dt===void 0?void 0:Dt.length)>0)for(const{key:mn,value:Vn}of yt.addOrUpdateProperties)qt.properties[mn]=Vn}}(this._dataUpdateable,de.dataDiff,xe),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(de){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(de){return this._geoJSONIndex.getClusterExpansionZoom(de.clusterId)}getClusterChildren(de){return this._geoJSONIndex.getChildren(de.clusterId)}getClusterLeaves(de){return this._geoJSONIndex.getLeaves(de.clusterId,de.limit,de.offset)}}class wn{constructor(de){this.self=de,this.actor=new l.H(de),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ge,xe)=>{if(this.externalWorkerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.externalWorkerSourceTypes[ge]=xe},this.self.addProtocol=l.cp,this.self.removeProtocol=l.cq,this.self.registerRTLTextPlugin=ge=>{l.cK.setMethods(ge)},this.actor.registerMessageHandler("LDT",(ge,xe)=>this._getDEMWorkerSource(ge,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RDT",(ge,xe)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ge,xe.source).removeTile(xe)})),this.actor.registerMessageHandler("GCEZ",(ge,xe)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,xe.type,xe.source).getClusterExpansionZoom(xe)})),this.actor.registerMessageHandler("GCC",(ge,xe)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,xe.type,xe.source).getClusterChildren(xe)})),this.actor.registerMessageHandler("GCL",(ge,xe)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(ge,xe.type,xe.source).getClusterLeaves(xe)})),this.actor.registerMessageHandler("LD",(ge,xe)=>this._getWorkerSource(ge,xe.type,xe.source).loadData(xe)),this.actor.registerMessageHandler("GD",(ge,xe)=>this._getWorkerSource(ge,xe.type,xe.source).getData()),this.actor.registerMessageHandler("LT",(ge,xe)=>this._getWorkerSource(ge,xe.type,xe.source).loadTile(xe)),this.actor.registerMessageHandler("RT",(ge,xe)=>this._getWorkerSource(ge,xe.type,xe.source).reloadTile(xe)),this.actor.registerMessageHandler("AT",(ge,xe)=>this._getWorkerSource(ge,xe.type,xe.source).abortTile(xe)),this.actor.registerMessageHandler("RMT",(ge,xe)=>this._getWorkerSource(ge,xe.type,xe.source).removeTile(xe)),this.actor.registerMessageHandler("RS",(ge,xe)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[ge]||!this.workerSources[ge][xe.type]||!this.workerSources[ge][xe.type][xe.source])return;const Ee=this.workerSources[ge][xe.type][xe.source];delete this.workerSources[ge][xe.type][xe.source],Ee.removeSource!==void 0&&Ee.removeSource(xe)})),this.actor.registerMessageHandler("RM",ge=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[ge],delete this.availableImages[ge],delete this.workerSources[ge],delete this.demWorkerSources[ge]})),this.actor.registerMessageHandler("SR",(ge,xe)=>l._(this,void 0,void 0,function*(){this.referrer=xe})),this.actor.registerMessageHandler("SRPS",(ge,xe)=>this._syncRTLPluginState(ge,xe)),this.actor.registerMessageHandler("IS",(ge,xe)=>l._(this,void 0,void 0,function*(){this.self.importScripts(xe)})),this.actor.registerMessageHandler("SI",(ge,xe)=>this._setImages(ge,xe)),this.actor.registerMessageHandler("UL",(ge,xe)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ge).update(xe.layers,xe.removedIds)})),this.actor.registerMessageHandler("SL",(ge,xe)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(ge).replace(xe)}))}_setImages(de,ge){return l._(this,void 0,void 0,function*(){this.availableImages[de]=ge;for(const xe in this.workerSources[de]){const Ee=this.workerSources[de][xe];for(const ve in Ee)Ee[ve].availableImages=ge}})}_syncRTLPluginState(de,ge){return l._(this,void 0,void 0,function*(){return yield l.cK.syncState(ge,this.self.importScripts)})}_getAvailableImages(de){let ge=this.availableImages[de];return ge||(ge=[]),ge}_getLayerIndex(de){let ge=this.layerIndexes[de];return ge||(ge=this.layerIndexes[de]=new s),ge}_getWorkerSource(de,ge,xe){if(this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][ge]||(this.workerSources[de][ge]={}),!this.workerSources[de][ge][xe]){const Ee={sendAsync:(ve,Qe)=>(ve.targetMapId=de,this.actor.sendAsync(ve,Qe))};switch(ge){case"vector":this.workerSources[de][ge][xe]=new x(Ee,this._getLayerIndex(de),this._getAvailableImages(de));break;case"geojson":this.workerSources[de][ge][xe]=new Wt(Ee,this._getLayerIndex(de),this._getAvailableImages(de));break;default:this.workerSources[de][ge][xe]=new this.externalWorkerSourceTypes[ge](Ee,this._getLayerIndex(de),this._getAvailableImages(de))}}return this.workerSources[de][ge][xe]}_getDEMWorkerSource(de,ge){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][ge]||(this.demWorkerSources[de][ge]=new M),this.demWorkerSources[de][ge]}}return l.i(self)&&(self.worker=new wn(self)),wn}),o("index",["exports","./shared"],function(l,s){var f="5.4.0";function y(){var w=new s.A(4);return s.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let b,x;const M={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,r,c){const m=requestAnimationFrame(I=>{v(),r(I)}),{unsubscribe:v}=s.s(w.signal,"abort",()=>{v(),cancelAnimationFrame(m),c(s.c())},!1)},frameAsync(w){return new Promise((r,c)=>{this.frame(w,r,c)})},getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(b||(b=document.createElement("a")),b.href=w,b.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(x==null&&(x=matchMedia("(prefers-reduced-motion: reduce)")),x.matches)}};class A{static testProp(r){if(!A.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in A.docStyle)return r[c];return r[0]}static create(r,c,m){const v=window.document.createElement(r);return c!==void 0&&(v.className=c),m&&m.appendChild(v),v}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){A.docStyle&&A.selectProp&&(A.userSelect=A.docStyle[A.selectProp],A.docStyle[A.selectProp]="none")}static enableDrag(){A.docStyle&&A.selectProp&&(A.docStyle[A.selectProp]=A.userSelect)}static setTransform(r,c){r.style[A.transformProp]=c}static addEventListener(r,c,m,v={}){r.addEventListener(c,m,"passive"in v?v:v.capture)}static removeEventListener(r,c,m,v={}){r.removeEventListener(c,m,"passive"in v?v:v.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",A.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",A.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",A.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,m){const v=c.boundingClientRect;return new s.P((m.clientX-v.left)/c.x-r.clientLeft,(m.clientY-v.top)/c.y-r.clientTop)}static mousePos(r,c){const m=A.getScale(r);return A.getPoint(r,m,c)}static touchPos(r,c){const m=[],v=A.getScale(r);for(let I=0;I<c.length;I++)m.push(A.getPoint(r,v,c[I]));return m}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),m=c.querySelectorAll("script");for(const v of m)v.remove();return A.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const m=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!m.includes("javascript:")&&!m.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const m of c)A.removeAttributes(m),A.clean(m)}static removeAttributes(r){for(const{name:c,value:m}of r.attributes)A.isPossiblyDangerous(c,m)&&r.removeAttribute(c)}}A.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,A.selectProp=A.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),A.transformProp=A.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(w){!V&&F&&(O?N(w):L=w)}};let L,F,V=!1,O=!1;function N(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,F),w.isContextLost())return;k.supported=!0}catch{}w.deleteTexture(r),V=!0}var U;typeof document<"u"&&(F=document.createElement("img"),F.onload=()=>{L&&N(L),L=null,O=!0},F.onerror=()=>{V=!0,L=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let r,c,m,v;w.resetRequestQueue=()=>{r=[],c=0,m=0,v={}},w.addThrottleControl=B=>{const H=m++;return v[H]=B,H},w.removeThrottleControl=B=>{delete v[B],T()},w.getImage=(B,H,Q=!0)=>new Promise((re,ie)=>{k.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),s.e(B,{type:"image"}),r.push({abortController:H,requestParameters:B,supportImageRefresh:Q,state:"queued",onError:fe=>{ie(fe)},onSuccess:fe=>{re(fe)}}),T()});const I=B=>s._(this,void 0,void 0,function*(){B.state="running";const{requestParameters:H,supportImageRefresh:Q,onError:re,onSuccess:ie,abortController:fe}=B,_e=Q===!1&&!s.i(self)&&!s.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((Re,je)=>Re&&je==="accept",!0));c++;const De=_e?D(H,fe):s.m(H,fe);try{const Re=yield De;delete B.abortController,B.state="completed",Re.data instanceof HTMLImageElement||s.b(Re.data)?ie(Re):Re.data&&ie({data:yield(ke=Re.data,typeof createImageBitmap=="function"?s.f(ke):s.h(ke)),cacheControl:Re.cacheControl,expires:Re.expires})}catch(Re){delete B.abortController,re(Re)}finally{c--,T()}var ke}),T=()=>{const B=(()=>{for(const H of Object.keys(v))if(v[H]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=c;H<B&&r.length>0;H++){const Q=r.shift();Q.abortController.signal.aborted?H--:I(Q)}},D=(B,H)=>new Promise((Q,re)=>{const ie=new Image,fe=B.url,_e=B.credentials;_e&&_e==="include"?ie.crossOrigin="use-credentials":(_e&&_e==="same-origin"||!s.d(fe))&&(ie.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{ie.src="",re(s.c())}),ie.fetchPriority="high",ie.onload=()=>{ie.onerror=ie.onload=null,Q({data:ie})},ie.onerror=()=>{ie.onerror=ie.onload=null,H.signal.aborted||re(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ie.src=fe})}(U||(U={})),U.resetRequestQueue();class W{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ne(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:m,url:v}of w){const I=`${m}${v}`;c.indexOf(I)===-1&&(c.push(I),r.push({id:m,url:v}))}}return r}function X(w,r,c){try{const m=new URL(w);return m.pathname+=`${r}${c}`,m.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class q{constructor(r,c,m,v){this.context=r,this.format=m,this.texture=r.gl.createTexture(),this.update(c,v)}update(r,c,m){const{width:v,height:I}=r,T=!(this.size&&this.size[0]===v&&this.size[1]===I||m),{context:D}=this,{gl:B}=D;if(this.useMipmap=!!(c&&c.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!c||c.premultiply!==!1)),T)this.size=[v,I],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,r):B.texImage2D(B.TEXTURE_2D,0,this.format,v,I,0,this.format,B.UNSIGNED_BYTE,r.data);else{const{x:H,y:Q}=m||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?B.texSubImage2D(B.TEXTURE_2D,0,H,Q,B.RGBA,B.UNSIGNED_BYTE,r):B.texSubImage2D(B.TEXTURE_2D,0,H,Q,v,I,B.RGBA,B.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D),D.pixelStoreUnpackFlipY.setDefault(),D.pixelStoreUnpack.setDefault(),D.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,c,m){const{context:v}=this,{gl:I}=v;I.bindTexture(I.TEXTURE_2D,this.texture),m!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=I.LINEAR),r!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,r),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,m||r),this.filter=r),c!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,c),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function G(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class ee extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:m}of this.requestors)m(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const m=c.spriteData;c.data=new s.R({width:m.width,height:m.height},m.context.getImageData(m.x,m.y,m.width,m.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let m=!0;const v=c.data||c.spriteData;return this._validateStretch(c.stretchX,v&&v.width)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,v&&v.height)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new s.k(new Error(`Image "${r}" has invalid "content" value`))),m=!1),m}_validateStretch(r,c){if(!r)return!0;let m=0;for(const v of r){if(v[0]<m||v[1]<v[0]||c<v[1])return!1;m=v[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const m=c.spriteData,v=m&&m.width||c.data.width,I=m&&m.height||c.data.height;return!(r[0]<0||v<r[0]||r[1]<0||I<r[1]||r[2]<0||v<r[2]||r[3]<0||I<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,m=!0){const v=this.getImage(r);if(m&&(v.data.width!==c.data.width||v.data.height!==c.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=v.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,m)=>{let v=!0;if(!this.isLoaded())for(const I of r)this.images[I]||(v=!1);this.isLoaded()||v?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const m of r){let v=this.getImage(m);v||(this.fire(new s.l("styleimagemissing",{id:m})),v=this.getImage(m)),v?c[m]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.w(`Image "${m}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],m=this.getImage(r);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},I=new s.I(v,m);this.patterns[r]={bin:v,position:I}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new q(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const I in this.patterns)r.push(this.patterns[I].bin);const{w:c,h:m}=s.p(r),v=this.atlasImage;v.resize({width:c||1,height:m||1});for(const I in this.patterns){const{bin:T}=this.patterns[I],D=T.x+1,B=T.y+1,H=this.getImage(I).data,Q=H.width,re=H.height;s.R.copy(H,v,{x:0,y:0},{x:D,y:B},{width:Q,height:re}),s.R.copy(H,v,{x:0,y:re-1},{x:D,y:B-1},{width:Q,height:1}),s.R.copy(H,v,{x:0,y:0},{x:D,y:B+re},{width:Q,height:1}),s.R.copy(H,v,{x:Q-1,y:0},{x:D-1,y:B},{width:1,height:re}),s.R.copy(H,v,{x:0,y:0},{x:D+Q,y:B},{width:1,height:re})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.getImage(c);m||s.w(`Image with ID: "${c}" was not found`),G(m)&&this.updateImage(c,m)}}}const ue=1e20;function Y(w,r,c,m,v,I,T,D,B){for(let H=r;H<r+m;H++)ce(w,c*I+H,I,v,T,D,B);for(let H=c;H<c+v;H++)ce(w,H*I+r,1,m,T,D,B)}function ce(w,r,c,m,v,I,T){I[0]=0,T[0]=-1e20,T[1]=ue,v[0]=w[r];for(let D=1,B=0,H=0;D<m;D++){v[D]=w[r+D*c];const Q=D*D;do{const re=I[B];H=(v[D]-v[re]+Q-re*re)/(D-re)/2}while(H<=T[B]&&--B>-1);B++,I[B]=D,T[B]=H,T[B+1]=ue}for(let D=0,B=0;D<m;D++){for(;T[B+1]<D;)B++;const H=I[B],Q=D-H;w[r+D*c]=v[H]+Q*Q}}class K{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return s._(this,void 0,void 0,function*(){const c=[];for(const I in r)for(const T of r[I])c.push(this._getAndCacheGlyphsPromise(I,T));const m=yield Promise.all(c),v={};for(const{stack:I,id:T,glyph:D}of m)v[I]||(v[I]={}),v[I][T]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return v})}_getAndCacheGlyphsPromise(r,c){return s._(this,void 0,void 0,function*(){let m=this.entries[r];m||(m=this.entries[r]={glyphs:{},requests:{},ranges:{}});let v=m.glyphs[c];if(v!==void 0)return{stack:r,id:c,glyph:v};if(v=this._tinySDF(m,r,c),v)return m.glyphs[c]=v,{stack:r,id:c,glyph:v};const I=Math.floor(c/256);if(256*I>65535)throw new Error("glyphs > 65535 not supported");if(m.ranges[I])return{stack:r,id:c,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!m.requests[I]){const D=K.loadGlyphRange(r,I,this.url,this.requestManager);m.requests[I]=D}const T=yield m.requests[I];for(const D in T)this._doesCharSupportLocalGlyph(+D)||(m.glyphs[+D]=T[+D]);return m.ranges[I]=!0,{stack:r,id:c,glyph:T[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||s.u["CJK Unified Ideographs"](r)||s.u["Hangul Syllables"](r)||s.u.Hiragana(r)||s.u.Katakana(r)||s.u["CJK Symbols and Punctuation"](r)||s.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,c,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let I=r.tinySDF;if(!I){let D="400";/bold/i.test(c)?D="900":/medium/i.test(c)?D="500":/light/i.test(c)&&(D="200"),I=r.tinySDF=new K.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:D})}const T=I.draw(String.fromCharCode(m));return{id:m,bitmap:new s.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}K.loadGlyphRange=function(w,r,c,m){return s._(this,void 0,void 0,function*(){const v=256*r,I=v+255,T=m.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${v}-${I}`),"Glyphs"),D=yield s.n(T,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${r}, ${v}-${I}`);const B={};for(const H of s.o(D.data))B[H.id]=H;return B})},K.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:c=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:I="normal",fontStyle:T="normal"}={}){this.buffer=r,this.cutoff=m,this.radius=c;const D=this.size=w+4*r,B=this._createCanvas(D),H=this.ctx=B.getContext("2d",{willReadFrequently:!0});H.font=`${T} ${I} ${w}px ${v}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:I}=this.ctx.measureText(w),T=Math.ceil(c),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(I-v))),B=Math.min(this.size-this.buffer,T+Math.ceil(m)),H=D+2*this.buffer,Q=B+2*this.buffer,re=Math.max(H*Q,0),ie=new Uint8ClampedArray(re),fe={data:ie,width:H,height:Q,glyphWidth:D,glyphHeight:B,glyphTop:T,glyphLeft:0,glyphAdvance:r};if(D===0||B===0)return fe;const{ctx:_e,buffer:De,gridInner:ke,gridOuter:Re}=this;_e.clearRect(De,De,D,B),_e.fillText(w,De,De+T);const je=_e.getImageData(De,De,D,B);Re.fill(ue,0,re),ke.fill(0,0,re);for(let We=0;We<B;We++)for(let Ke=0;Ke<D;Ke++){const Je=je.data[4*(We*D+Ke)+3]/255;if(Je===0)continue;const at=(We+De)*H+Ke+De;if(Je===1)Re[at]=0,ke[at]=ue;else{const nt=.5-Je;Re[at]=nt>0?nt*nt:0,ke[at]=nt<0?nt*nt:0}}Y(Re,0,0,H,Q,H,this.f,this.v,this.z),Y(ke,De,De,D,B,H,this.f,this.v,this.z);for(let We=0;We<re;We++){const Ke=Math.sqrt(Re[We])-Math.sqrt(ke[We]);ie[We]=Math.round(255-255*(Ke/this.radius+this.cutoff))}return fe}};class Se{constructor(){this.specification=s.v.light.position}possiblyEvaluate(r,c){return s.z(r.expression.evaluate(c))}interpolate(r,c,m){return{x:s.B.number(r.x,c.x,m),y:s.B.number(r.y,c.y,m),z:s.B.number(r.z,c.z,m)}}}let Ve;class Ne extends s.E{constructor(r){super(),Ve=Ve||new s.r({anchor:new s.D(s.v.light.anchor),position:new Se,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Ve),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(s.t,r,c))for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m){return(!m||m.validate!==!1)&&s.x(this,r.call(s.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const et=new s.r({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class ot extends s.E{constructor(r){super(),this._transitionable=new s.T(et),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0))}setSky(r,c={}){if(!this._validate(s.F,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const m in r){const v=r[m];m.endsWith("-transition")?this._transitionable.setTransition(m.slice(0,-11),v):this._transitionable.setValue(m,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,m={}){return(m==null?void 0:m.validate)!==!1&&s.x(this,r.call(s.y,s.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Zt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const m=r.join(",")+String(c);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(r,c)),this.dashEntry[m]}getDashRanges(r,c,m){const v=[];let I=r.length%2==1?-r[r.length-1]*m:0,T=r[0]*m,D=!0;v.push({left:I,right:T,isDash:D,zeroLength:r[0]===0});let B=r[0];for(let H=1;H<r.length;H++){D=!D;const Q=r[H];I=B*m,B+=Q,T=B*m,v.push({left:I,right:T,isDash:D,zeroLength:Q===0})}return v}addRoundDash(r,c,m){const v=c/2;for(let I=-m;I<=m;I++){const T=this.width*(this.nextRow+m+I);let D=0,B=r[D];for(let H=0;H<this.width;H++){H/B.right>1&&(B=r[++D]);const Q=Math.abs(H-B.left),re=Math.abs(H-B.right),ie=Math.min(Q,re);let fe;const _e=I/m*(v+1);if(B.isDash){const De=v-Math.abs(_e);fe=Math.sqrt(ie*ie+De*De)}else fe=v-Math.sqrt(ie*ie+_e*_e);this.data[T+H]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(r){for(let D=r.length-1;D>=0;--D){const B=r[D],H=r[D+1];B.zeroLength?r.splice(D,1):H&&H.isDash===B.isDash&&(H.left=B.left,r.splice(D,1))}const c=r[0],m=r[r.length-1];c.isDash===m.isDash&&(c.left=m.left-this.width,m.right=c.right+this.width);const v=this.width*this.nextRow;let I=0,T=r[I];for(let D=0;D<this.width;D++){D/T.right>1&&(T=r[++I]);const B=Math.abs(D-T.left),H=Math.abs(D-T.right),Q=Math.min(B,H);this.data[v+D]=Math.max(0,Math.min(255,(T.isDash?Q:-Q)+128))}}addDash(r,c){const m=c?7:0,v=2*m+1;if(this.nextRow+v>this.height)return s.w("LineAtlas out of space"),null;let I=0;for(let D=0;D<r.length;D++)I+=r[D];if(I!==0){const D=this.width/I,B=this.getDashRanges(r,this.width,D);c?this.addRoundDash(B,D,m):this.addRegularDash(B)}const T={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:I};return this.nextRow+=v,this.dirty=!0,T}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const qe="maplibre_preloaded_worker_pool";class Ue{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qe]}numActive(){return Object.keys(this.active).length}}const Tt=Math.floor(M.hardwareConcurrency/2);let Bt,kt;function un(){return Bt||(Bt=new Ue),Bt}Ue.workerCount=s.G(globalThis)?Math.max(Math.min(Tt,3),1):1;class gt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const m=this.workerPool.acquire(c);for(let v=0;v<m.length;v++){const I=new s.H(m[v],c);I.name=`Worker ${v}`,this.actors.push(I)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const m=[];for(const v of this.actors)m.push(v.sendAsync({type:r,data:c}));return Promise.all(m)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const m of this.actors)m.registerMessageHandler(r,c)}}function ft(){return kt||(kt=new gt(un(),s.J),kt.registerMessageHandler("GR",(w,r,c)=>s.m(r,c))),kt}function lt(w,r){const c=s.K();return s.L(c,c,[1,1,0]),s.M(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?s.N(c,c,w.calculatePosMatrix(r.toUnwrapped())):c}function Pt(w,r,c,m,v,I,T){var D;const B=function(ie,fe,_e){if(ie)for(const De of ie){const ke=fe[De];if(ke&&ke.source===_e&&ke.type==="fill-extrusion")return!0}else for(const De in fe){const ke=fe[De];if(ke.source===_e&&ke.type==="fill-extrusion")return!0}return!1}((D=v==null?void 0:v.layers)!==null&&D!==void 0?D:null,r,w.id),H=I.maxPitchScaleFactor(),Q=w.tilesIn(m,H,B);Q.sort(Lt);const re=[];for(const ie of Q)re.push({wrappedTileID:ie.tileID.wrapped().key,queryResults:ie.tile.queryRenderedFeatures(r,c,w._state,ie.queryGeometry,ie.cameraQueryGeometry,ie.scale,v,I,H,lt(w.transform,ie.tileID),T?(fe,_e)=>T(ie.tileID,fe,_e):void 0)});return function(ie,fe){for(const _e in ie)for(const De of ie[_e])on(De,fe);return ie}(function(ie){const fe={},_e={};for(const De of ie){const ke=De.queryResults,Re=De.wrappedTileID,je=_e[Re]=_e[Re]||{};for(const We in ke){const Ke=ke[We],Je=je[We]=je[We]||{},at=fe[We]=fe[We]||[];for(const nt of Ke)Je[nt.featureIndex]||(Je[nt.featureIndex]=!0,at.push(nt))}}return fe}(re),w)}function Lt(w,r){const c=w.tileID,m=r.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function on(w,r){const c=w.feature,m=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=m}function Ie(w,r,c){return s._(this,void 0,void 0,function*(){let m=w;if(w.url?m=(yield s.j(r.transformRequest(w.url,"Source"),c)).data:yield M.frameAsync(c),!m)return null;const v=s.O(s.e(m,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in m&&m.vector_layers&&(v.vectorLayerIds=m.vector_layers.map(I=>I.id)),v})}class ${constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof s.Q?new s.Q(r.lng,r.lat):s.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof s.Q?new s.Q(r.lng,r.lat):s.Q.convert(r),this}extend(r){const c=this._sw,m=this._ne;let v,I;if(r instanceof s.Q)v=r,I=r;else{if(!(r instanceof $))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend($.convert(r)):this.extend(s.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(s.Q.convert(r)):this;if(v=r._sw,I=r._ne,!v||!I)return this}return c||m?(c.lng=Math.min(v.lng,c.lng),c.lat=Math.min(v.lat,c.lat),m.lng=Math.max(I.lng,m.lng),m.lat=Math.max(I.lat,m.lat)):(this._sw=new s.Q(v.lng,v.lat),this._ne=new s.Q(I.lng,I.lat)),this}getCenter(){return new s.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.Q(this.getWest(),this.getNorth())}getSouthEast(){return new s.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:m}=s.Q.convert(r);let v=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&v}static convert(r){return r instanceof $?r:r&&new $(r)}static fromLngLat(r,c=0){const m=360*c/40075017,v=m/Math.cos(Math.PI/180*r.lat);return new $(new s.Q(r.lng-v,r.lat-m),new s.Q(r.lng+v,r.lat+m))}adjustAntiMeridian(){const r=new s.Q(this._sw.lng,this._sw.lat),c=new s.Q(this._ne.lng,this._ne.lat);return new $(r,r.lng>c.lng?new s.Q(c.lng+360,c.lat):c)}}class Pe{constructor(r,c,m){this.bounds=$.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),m=Math.floor(s.U(this.bounds.getWest())*c),v=Math.floor(s.S(this.bounds.getNorth())*c),I=Math.ceil(s.U(this.bounds.getEast())*c),T=Math.ceil(s.S(this.bounds.getSouth())*c);return r.x>=m&&r.x<I&&r.y>=v&&r.y<T}}class Oe extends s.E{constructor(r,c,m,v){if(super(),this.id=r,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.O(c,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(s.e(this,r),r.bounds&&(this.tileBounds=new Pe(r.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new s.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};m.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((I,T)=>{r.reloadPromise={resolve:I,reject:T}})}else r.actor=this.dispatcher.getActor(),v="LT";r.abortController=new AbortController;try{const I=yield r.actor.sendAsync({type:v,data:m},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,I)}catch(I){if(delete r.abortController,r.aborted)return;if(I&&I.status!==404)throw I;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const m=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(m.resolve).catch(m.reject)}}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ye extends s.E{constructor(r,c,m,v){super(),this.id=r,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},c),s.e(this,s.O(c,["url","scheme","tileSize"]))}load(){return s._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield Ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(s.e(this,c),c.bounds&&(this.tileBounds=new Pe(c.bounds,this.minzoom,this.maxzoom)),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this.fire(new s.k(c))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return s.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const m=yield U.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const v=this.map.painter.context,I=v.gl,T=m.data;r.texture=this.map.painter.getTileTexture(T.width),r.texture?r.texture.update(T,{useMipmap:!0}):(r.texture=new q(v,T,I.RGBA,{useMipmap:!0}),r.texture.bind(I.LINEAR,I.CLAMP_TO_EDGE,I.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class pe extends ye{constructor(r,c,m,v){super(r,c,m,v),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),m=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const v=yield U.getImage(m,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(v&&v.data){const I=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&r.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const T=s.b(I)&&s.V()?I:yield this.readImageNow(I),D={type:this.type,uid:r.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const B=yield r.actor.sendAsync({type:"LDT",data:D});r.dem=B,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(v){if(delete r.abortController,r.aborted)r.state="unloaded";else if(v)throw r.state="errored",v}})}readImageNow(r){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.W()){const c=r.width+2,m=r.height+2;try{return new s.R({width:c,height:m},yield s.X(r,-1,-1,c,m))}catch{}}return M.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,m=Math.pow(2,c.z),v=(c.x-1+m)%m,I=c.x===0?r.wrap-1:r.wrap,T=(c.x+1+m)%m,D=c.x+1===m?r.wrap+1:r.wrap,B={};return B[new s.Y(r.overscaledZ,I,c.z,v,c.y).key]={backfilled:!1},B[new s.Y(r.overscaledZ,D,c.z,T,c.y).key]={backfilled:!1},c.y>0&&(B[new s.Y(r.overscaledZ,I,c.z,v,c.y-1).key]={backfilled:!1},B[new s.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},B[new s.Y(r.overscaledZ,D,c.z,T,c.y-1).key]={backfilled:!1}),c.y+1<m&&(B[new s.Y(r.overscaledZ,I,c.z,v,c.y+1).key]={backfilled:!1},B[new s.Y(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},B[new s.Y(r.overscaledZ,D,c.z,T,c.y+1).key]={backfilled:!1}),B}unloadTile(r){return s._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Fe extends s.E{constructor(r,c,m,v){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=c.data,this._options=s.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:s.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:s.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(s.Z/this.tileSize)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return s._(this,void 0,void 0,function*(){const r=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(c=>c.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return s._(this,void 0,void 0,function*(){const r=new $,c=yield this.getData();let m;switch(c.type){case"FeatureCollection":m=c.features.map(v=>this.getCoordinatesFromGeometry(v.geometry)).flat(1/0);break;case"Feature":m=this.getCoordinatesFromGeometry(c.geometry);break;default:m=this.getCoordinatesFromGeometry(c)}if(m.length==0)return r;for(let v=0;v<m.length-1;v+=2)r.extend([m[v],m[v+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,m){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:m}})}_updateWorkerData(r){return s._(this,void 0,void 0,function*(){const c=s.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(M.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.l("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||m.abandoned)return void this.fire(new s.l("dataabort",{dataType:"source"}));let v=null;m.resourceTiming&&m.resourceTiming[this.id]&&(v=m.resourceTiming[this.id].slice(0));const I={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&s.e(I,{resourceTiming:v}),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"metadata"}))),this.fire(new s.l("data",Object.assign(Object.assign({},I),{sourceDataType:"content"})))}catch(m){if(this._pendingLoads--,this._removed)return void this.fire(new s.l("dataabort",{dataType:"source"}));this.fire(new s.k(m))}})}loaded(){return this._pendingLoads===0}loadTile(r){return s._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const m={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const v=yield this.actor.sendAsync({type:c,data:m},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(v,this.map.painter,c==="RT")})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class tt extends s.E{constructor(r,c,m,v){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=c}load(r){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new s.k(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(s.$.fromLngLat);var m;return this.tileID=function(v){let I=1/0,T=1/0,D=-1/0,B=-1/0;for(const ie of v)I=Math.min(I,ie.x),T=Math.min(T,ie.y),D=Math.max(D,ie.x),B=Math.max(B,ie.y);const H=Math.max(D-I,B-T),Q=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),re=Math.pow(2,Q);return new s.a1(Q,Math.floor((I+D)/2*re),Math.floor((T+B)/2*re))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(v=>this.tileID.getTilePoint(v)._round()),this.flippedWindingOrder=((m=this.tileCoords)[1].x-m[0].x)*(m[2].y-m[0].y)-(m[1].y-m[0].y)*(m[2].x-m[0].x)<0,this.fire(new s.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new q(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const I=this.tiles[v];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let c=1/0,m=1/0,v=-1/0,I=-1/0;for(const D of r)c=Math.min(c,D.x),m=Math.min(m,D.y),v=Math.max(v,D.x),I=Math.max(I,D.y);const T={};for(let D=0;D<=s.a0;D++){const B=Math.pow(2,D),H=Math.floor(c*B),Q=Math.floor(m*B),re=Math.floor(v*B),ie=Math.floor(I*B);T[D]={minTileX:H,minTileY:Q,maxTileX:re,maxTileY:ie}}return T}}class it extends tt{constructor(r,c,m,v){super(r,c,m,v),this.roundZoom=!0,this.type="video",this.options=c}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield s.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new s.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new s.k(new s.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new q(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let m=!1;for(const v in this.tiles){const I=this.tiles[v];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,m=!0)}m&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Be extends tt{constructor(r,c,m,v){super(r,c,m,v),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(I=>!Array.isArray(I)||I.length!==2||I.some(T=>typeof T!="number"))||this.fire(new s.k(new s.a3(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.k(new s.a3(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new s.k(new s.a3(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new s.k(new s.a3(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.k(new s.a3(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,m=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new q(c,this.canvas,m.RGBA,{premultiply:!0});let v=!1;for(const I in this.tiles){const T=this.tiles[I];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new s.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Mt={},wt=w=>{switch(w){case"geojson":return Fe;case"image":return tt;case"raster":return ye;case"raster-dem":return pe;case"vector":return Oe;case"video":return it;case"canvas":return Be}return Mt[w]},At="RTLPluginLoaded";class Ht extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ft()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return s._(this,arguments,void 0,function*(c,m=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=M.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!m)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.l(At))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let cn=null;function fn(){return cn||(cn=new Ht),cn}class ut{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=s.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(v,I){const T={};if(!I)return T;for(const D of v){const B=D.layerIds.map(H=>I.getLayer(H)).filter(Boolean);if(B.length!==0){D.layers=B,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(H=>B.filter(Q=>Q.id===H)[0]));for(const H of B)T[H.id]=D}}return T}(r.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const I=this.buckets[v];if(I instanceof s.a6){if(this.hasSymbolBuckets=!0,!m)break;I.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const I=this.buckets[v];if(I instanceof s.a6&&I.hasRTLText){this.hasRTLText=!0,fn().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const I=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(v).queryRadius(I))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new q(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new q(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,m,v,I,T,D,B,H,Q,re){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:I,scale:T,tileSize:this.tileSize,pixelPosMatrix:Q,transform:B,params:D,queryPadding:this.queryPadding*H,getElevation:re},r,c,m):{}}querySourceFeatures(r,c){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),I=c&&c.sourceLayer?c.sourceLayer:"",T=v._geojsonTileLayer||v[I];if(!T)return;const D=s.a7(c&&c.filter),{z:B,x:H,y:Q}=this.tileID.canonical,re={z:B,x:H,y:Q};for(let ie=0;ie<T.length;ie++){const fe=T.feature(ie);if(D.needGeometry){const ke=s.a8(fe,!0);if(!D.filter(new s.C(this.tileID.overscaledZ),ke,this.tileID.canonical))continue}else if(!D.filter(new s.C(this.tileID.overscaledZ),fe))continue;const _e=m.getId(fe,I),De=new s.a9(fe,B,H,Q,_e);De.tile=re,r.push(De)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const m=s.aa(r.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(c)if(this.expirationTime<c)v=!0;else{const I=this.expirationTime-c;I?this.expirationTime=m+Math.max(I,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!c.style.hasLayer(v))continue;const I=this.buckets[v],T=I.layers[0].sourceLayer||"_geojsonTileLayer",D=m[T],B=r[T];if(!D||!B||Object.keys(B).length===0)continue;I.update(B,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=c&&c.style&&c.style.getLayer(v);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(I)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=M.now()+r}setDependencies(r,c){const m={};for(const v of c)m[v]=!0;this.dependencies[r]=m}hasDependency(r,c){for(const m of r){const v=this.dependencies[m];if(v){for(const I of c)if(v[I])return!0}}return!1}}class pt{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,m){const v=r.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const I={value:c,timeout:void 0};if(m!==void 0&&(I.timeout=setTimeout(()=>{this.remove(r,I)},m)),this.data[v].push(I),this.order.push(v),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const m=r.wrapped().key,v=c===void 0?0:this.data[m].indexOf(c),I=this.data[m][v];return this.data[m].splice(v,1),I.timeout&&clearTimeout(I.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(I.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const m in this.data)for(const v of this.data[m])r(v.value)||c.push(v);for(const m of c)this.remove(m.value.tileID,m)}}class _t{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,m){const v=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][v]=this.stateChanges[r][v]||{},s.e(this.stateChanges[r][v],m),this.deletedStates[r]===null){this.deletedStates[r]={};for(const I in this.state[r])I!==v&&(this.deletedStates[r][I]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][v]===null){this.deletedStates[r][v]={};for(const I in this.state[r][v])m[I]||(this.deletedStates[r][v][I]=null)}else for(const I in m)this.deletedStates[r]&&this.deletedStates[r][v]&&this.deletedStates[r][v][I]===null&&delete this.deletedStates[r][v][I]}removeFeatureState(r,c,m){if(this.deletedStates[r]===null)return;const v=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},m&&c!==void 0)this.deletedStates[r][v]!==null&&(this.deletedStates[r][v]=this.deletedStates[r][v]||{},this.deletedStates[r][v][m]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][v])for(m in this.deletedStates[r][v]={},this.stateChanges[r][v])this.deletedStates[r][v][m]=null;else this.deletedStates[r][v]=null;else this.deletedStates[r]=null}getState(r,c){const m=String(c),v=s.e({},(this.state[r]||{})[m],(this.stateChanges[r]||{})[m]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const I=this.deletedStates[r][c];if(I===null)return{};for(const T in I)delete v[T]}return v}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const I={};for(const T in this.stateChanges[v])this.state[v][T]||(this.state[v][T]={}),s.e(this.state[v][T],this.stateChanges[v][T]),I[T]=this.state[v][T];m[v]=I}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const I={};if(this.deletedStates[v]===null)for(const T in this.state[v])I[T]={},this.state[v][T]={};else for(const T in this.deletedStates[v]){if(this.deletedStates[v][T]===null)this.state[v][T]={};else for(const D of Object.keys(this.deletedStates[v][T]))delete this.state[v][T][D];I[T]=this.state[v][T]}m[v]=m[v]||{},s.e(m[v],I)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in r)r[v].setFeatureState(m,c)}}const Nt=89.25;function Wt(w,r){const c=s.ae(r.lat,-85.051129,s.af);return new s.P(s.U(r.lng)*w,s.S(c)*w)}function wn(w,r){return new s.$(r.x/w,r.y/w).toLngLat()}function Xe(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(s.ab(90-w.pitch)),Math.tan(s.ab(Nt-w.pitch)))}function de(w,r){const c=w.canonical,m=r/s.ac(c.z),v=c.x+Math.pow(2,c.z)*w.wrap,I=s.ad(new Float64Array(16));return s.L(I,I,[v*m,c.y*m,0]),s.M(I,I,[m/s.Z,m/s.Z,1]),I}function ge(w,r,c,m,v){const I=s.$.fromLngLat(w,r),T=v*s.ag(1,w.lat),D=T*Math.cos(s.ab(c)),B=Math.sqrt(T*T-D*D),H=B*Math.sin(s.ab(-m)),Q=B*Math.cos(s.ab(-m));return new s.$(I.x+H,I.y+Q,I.z+D)}function xe(w,r,c){const m=r.intersectsFrustum(w);if(!c)return m;const v=r.intersectsPlane(c);return m===0||v===0?0:m===2&&v===2?2:1}function Ee(w,r,c){let m=0;const v=(c-r)/10;for(let I=0;I<10;I++)m+=v*Math.pow(Math.cos(r+(I+.5)/10*(c-r)),w);return m}function ve(w,r){return function(c,m,v,I,T){const D=2*((w-1)/s.ah(Math.cos(s.ab(Nt-T))/Math.cos(s.ab(Nt)))-1),B=Math.acos(v/I),H=2*Ee(D-1,0,s.ab(T/2)),Q=Math.min(s.ab(Nt),B+s.ab(T/2)),re=Ee(D-1,Math.min(Q,B-s.ab(T/2)),Q),ie=Math.atan(m/v),fe=Math.hypot(m,v);let _e=c;return _e+=s.ah(I/fe/Math.max(.5,Math.cos(s.ab(T/2)))),_e+=D*s.ah(Math.cos(ie))/2,_e-=s.ah(Math.max(1,re/H/r))/2,_e}}const Qe=ve(9.314,3);function ht(w,r){const c=(r.roundZoom?Math.round:Math.floor)(w.zoom+s.ah(w.tileSize/r.tileSize));return Math.max(0,c)}function Ze(w,r){const c=w.getCameraFrustum(),m=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),I=s.$.fromLngLat(w.center,w.elevation);v.z=I.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const T=w.getCoveringTilesDetailsProvider(),D=T.allowVariableZoom(w,r),B=ht(w,r),H=r.minzoom||0,Q=r.maxzoom!==void 0?r.maxzoom:w.maxZoom,re=Math.min(Math.max(0,B),Q),ie=Math.pow(2,re),fe=[ie*v.x,ie*v.y,0],_e=[ie*I.x,ie*I.y,0],De=Math.hypot(I.x-v.x,I.y-v.y),ke=Math.abs(I.z-v.z),Re=Math.hypot(De,ke),je=Je=>({zoom:0,x:0,y:0,wrap:Je,fullyVisible:!1}),We=[],Ke=[];if(w.renderWorldCopies&&T.allowWorldCopies())for(let Je=1;Je<=3;Je++)We.push(je(-Je)),We.push(je(Je));for(We.push(je(0));We.length>0;){const Je=We.pop(),at=Je.x,nt=Je.y;let xt=Je.fullyVisible;const Ct={x:at,y:nt,z:Je.zoom},vt=T.getTileAABB(Ct,Je.wrap,w.elevation,r);if(!xt){const nn=xe(c,vt,m);if(nn===0)continue;xt=nn===2}const jt=T.distanceToTile2d(v.x,v.y,Ct,vt);let zt=B;D&&(zt=(r.calculateTileZoom||Qe)(w.zoom+s.ah(w.tileSize/r.tileSize),jt,ke,Re,w.fov)),zt=(r.roundZoom?Math.round:Math.floor)(zt),zt=Math.max(0,zt);const ln=Math.min(zt,Q);if(Je.wrap=T.getWrap(I,Ct,Je.wrap),Je.zoom>=ln){if(Je.zoom<H)continue;const nn=re-Je.zoom,Kt=fe[0]-.5-(at<<nn),kn=fe[1]-.5-(nt<<nn),Hn=r.reparseOverscaled?Math.max(Je.zoom,zt):Je.zoom;Ke.push({tileID:new s.Y(Je.zoom===Q?Hn:Je.zoom,Je.wrap,Je.zoom,at,nt),distanceSq:s.ai([_e[0]-.5-at,_e[1]-.5-nt]),tileDistanceToCamera:Math.sqrt(Kt*Kt+kn*kn)})}else for(let nn=0;nn<4;nn++)We.push({zoom:Je.zoom+1,x:(at<<1)+nn%2,y:(nt<<1)+(nn>>1),wrap:Je.wrap,fullyVisible:xt})}return Ke.sort((Je,at)=>Je.distanceSq-at.distanceSq).map(Je=>Je.tileID)}class St extends s.E{constructor(r,c,m){super(),this.id=r,this.dispatcher=m,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,I,T,D)=>{const B=new(wt(I.type))(v,I,T,D);if(B.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${B.id}`);return B})(r,c,m,this),this._tiles={},this._cache=new pt(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new _t,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,m){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,m)}catch(v){r.state="errored",v.status!==404?this._source.fire(new s.k(v,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new s.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const m=this._tiles[c];m.upload(r),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Dt).map(r=>r.key)}getRenderableIds(r){const c=[];for(const m in this._tiles)this._isIdRenderable(m,r)&&c.push(this._tiles[m]);return r?c.sort((m,v)=>{const I=m.tileID,T=v.tileID,D=new s.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians),B=new s.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return I.overscaledZ-T.overscaledZ||B.y-D.y||B.x-D.x}).map(m=>m.tileID.key):c.map(m=>m.tileID).sort(Dt).map(m=>m.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)(r||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(r,c){return s._(this,void 0,void 0,function*(){const m=this._tiles[r];m&&(m.state!=="loading"&&(m.state=c),yield this._loadTile(m,r,c))})}_tileLoaded(r,c,m){r.timeAdded=M.now(),m==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new s.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let v=0;v<c.length;v++){const I=c[v];if(r.neighboringTiles&&r.neighboringTiles[I]){const T=this.getTileByID(I);m(r,T),m(T,r)}}function m(v,I){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let T=I.tileID.canonical.x-v.tileID.canonical.x;const D=I.tileID.canonical.y-v.tileID.canonical.y,B=Math.pow(2,v.tileID.canonical.z),H=I.tileID.key;T===0&&D===0||Math.abs(D)>1||(Math.abs(T)>1&&(Math.abs(T+B)===1?T+=B:Math.abs(T-B)===1&&(T-=B)),I.dem&&v.dem&&(v.dem.backfillBorder(I.dem,T,D),v.neighboringTiles&&v.neighboringTiles[H]&&(v.neighboringTiles[H].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,m,v){for(const I in this._tiles){let T=this._tiles[I];if(v[I]||!T.hasData()||T.tileID.overscaledZ<=c||T.tileID.overscaledZ>m)continue;let D=T.tileID;for(;T&&T.tileID.overscaledZ>c+1;){const H=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[H.key],T&&T.hasData()&&(D=H)}let B=D;for(;B.overscaledZ>c;)if(B=B.scaledTo(B.overscaledZ-1),r[B.key]||r[B.canonical.key]){v[D.key]=D;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const m=this._loadedParentTiles[r.key];return m&&m.tileID.overscaledZ>=c?m:null}for(let m=r.overscaledZ-1;m>=c;m--){const v=r.scaledTo(m),I=this._getLoadedTile(v);if(I)return I}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,m=Math.ceil(r.height/this._source.tileSize)+1,v=Math.floor(c*m*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),I=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(I)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const m={};for(const v in this._tiles){const I=this._tiles[v];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+c),m[I.tileID.key]=I}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}_updateCoveredAndRetainedTiles(r,c,m,v,I,T){const D={},B={},H=Object.keys(r),Q=M.now();for(const re of H){const ie=r[re],fe=this._tiles[re];if(!fe||fe.fadeEndTime!==0&&fe.fadeEndTime<=Q)continue;const _e=this.findLoadedParent(ie,c),De=this.findLoadedSibling(ie),ke=_e||De||null;ke&&(this._addTile(ke.tileID),D[ke.tileID.key]=ke.tileID),B[re]=ie}this._retainLoadedChildren(B,v,m,r);for(const re in D)r[re]||(this._coveredTiles[re]=!0,r[re]=D[re]);if(T){const re={},ie={};for(const fe of I)this._tiles[fe.key].hasData()?re[fe.key]=fe:ie[fe.key]=fe;for(const fe in ie){const _e=ie[fe].children(this._source.maxzoom);this._tiles[_e[0].key]&&this._tiles[_e[1].key]&&this._tiles[_e[2].key]&&this._tiles[_e[3].key]&&(re[_e[0].key]=r[_e[0].key]=_e[0],re[_e[1].key]=r[_e[1].key]=_e[1],re[_e[2].key]=r[_e[2].key]=_e[2],re[_e[3].key]=r[_e[3].key]=_e[3],delete ie[fe])}for(const fe in ie){const _e=ie[fe],De=this.findLoadedParent(_e,this._source.minzoom),ke=this.findLoadedSibling(_e),Re=De||ke||null;if(Re){re[Re.tileID.key]=r[Re.tileID.key]=Re.tileID;for(const je in re)re[je].isChildOf(Re.tileID)&&delete re[je]}}for(const fe in this._tiles)re[fe]||(this._coveredTiles[fe]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let m;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(Q=>new s.Y(Q.canonical.z,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y)):(m=Ze(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(m=m.filter(Q=>this._source.hasTile(Q)))):m=[];const v=ht(r,this._source),I=Math.max(v-St.maxOverzooming,this._source.minzoom),T=Math.max(v+St.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Q={};for(const re of m)if(re.canonical.z>this._source.minzoom){const ie=re.scaledTo(re.canonical.z-1);Q[ie.key]=ie;const fe=re.scaledTo(Math.max(this._source.minzoom,Math.min(re.canonical.z,5)));Q[fe.key]=fe}m=m.concat(Object.values(Q))}const D=m.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,D&&this.fire(new s.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(m,v);yt(this._source.type)&&this._updateCoveredAndRetainedTiles(B,I,T,v,m,c);for(const Q in B)this._tiles[Q].clearFadeHold();const H=s.aj(this._tiles,B);for(const Q of H){const re=this._tiles[Q];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(Q)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var m;const v={},I={},T=Math.max(c-St.maxOverzooming,this._source.minzoom),D=Math.max(c+St.maxUnderzooming,this._source.minzoom),B={};for(const H of r){const Q=this._addTile(H);v[H.key]=H,Q.hasData()||c<this._source.maxzoom&&(B[H.key]=H)}this._retainLoadedChildren(B,c,D,v);for(const H of r){let Q=this._tiles[H.key];if(Q.hasData())continue;if(c+1>this._source.maxzoom){const ie=H.children(this._source.maxzoom)[0],fe=this.getTile(ie);if(fe&&fe.hasData()){v[ie.key]=ie;continue}}else{const ie=H.children(this._source.maxzoom);if(v[ie[0].key]&&v[ie[1].key]&&v[ie[2].key]&&v[ie[3].key])continue}let re=Q.wasRequested();for(let ie=H.overscaledZ-1;ie>=T;--ie){const fe=H.scaledTo(ie);if(I[fe.key])break;if(I[fe.key]=!0,Q=this.getTile(fe),!Q&&re&&(Q=this._addTile(fe)),Q){const _e=Q.hasData();if((_e||!(!((m=this.map)===null||m===void 0)&&m.cancelPendingTileRequestsWhileZooming)||re)&&(v[fe.key]=fe),re=Q.wasRequested(),_e)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let m,v=this._tiles[r].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}c.push(v.key);const I=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(I),m)break;v=I}for(const I of c)this._loadedParentTiles[I]=m}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,m=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=m}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const m=c;return c||(c=new ut(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,m||this._source.fire(new s.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const m=c.getExpiryTimeout();m&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},m))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,m){const v=[],I=this.transform;if(!I)return v;const T=m?I.getCameraQueryGeometry(r):r,D=r.map(_e=>I.screenPointToMercatorCoordinate(_e,this.terrain)),B=T.map(_e=>I.screenPointToMercatorCoordinate(_e,this.terrain)),H=this.getIds();let Q=1/0,re=1/0,ie=-1/0,fe=-1/0;for(const _e of B)Q=Math.min(Q,_e.x),re=Math.min(re,_e.y),ie=Math.max(ie,_e.x),fe=Math.max(fe,_e.y);for(let _e=0;_e<H.length;_e++){const De=this._tiles[H[_e]];if(De.holdingForFade())continue;const ke=I.getCoveringTilesDetailsProvider().allowWorldCopies()?De.tileID:De.tileID.unwrapTo(0),Re=Math.pow(2,I.zoom-De.tileID.overscaledZ),je=c*De.queryPadding*s.Z/De.tileSize/Re,We=[ke.getTilePoint(new s.$(Q,re)),ke.getTilePoint(new s.$(ie,fe))];if(We[0].x-je<s.Z&&We[0].y-je<s.Z&&We[1].x+je>=0&&We[1].y+je>=0){const Ke=D.map(at=>ke.getTilePoint(at)),Je=B.map(at=>ke.getTilePoint(at));v.push({tile:De,tileID:ke,queryGeometry:Ke,cameraQueryGeometry:Je,scale:Re})}}return v}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(m=>this._tiles[m].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(yt(this._source.type)){const r=M.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,m){this._state.updateState(r=r||"_geojsonTileLayer",c,m)}removeFeatureState(r,c,m){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,m)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,m){const v=this._tiles[r];v&&v.setDependencies(c,m)}reloadTilesForDependencies(r,c){for(const m in this._tiles)this._tiles[m].hasDependency(r,c)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(r,c))}}function Dt(w,r){const c=Math.abs(2*w.wrap)-+(w.wrap<0),m=Math.abs(2*r.wrap)-+(r.wrap<0);return w.overscaledZ-r.overscaledZ||m-c||r.canonical.y-w.canonical.y||r.canonical.x-w.canonical.x}function yt(w){return w==="raster"||w==="image"||w==="video"}St.maxOverzooming=10,St.maxUnderzooming=3;class qt{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=s.ae(r,0,1);let c=1,m=this._distances[c];const v=r*this.paddedLength+this.padding;for(;m<v&&c<this._distances.length;)m=this._distances[++c];const I=c-1,T=this._distances[I],D=m-T,B=D>0?(v-T)/D:0;return this.points[I].mult(1-B).add(this.points[c].mult(B))}}function pn(w,r){let c=!0;return w==="always"||w!=="never"&&r!=="never"||(c=!1),c}class mn{constructor(r,c,m){const v=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(r/m),this.yCellCount=Math.ceil(c/m);for(let T=0;T<this.xCellCount*this.yCellCount;T++)v.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,m,v,I){this._forEachCell(c,m,v,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(I)}insertCircle(r,c,m,v){this._forEachCell(c-v,m-v,c+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(m),this.circles.push(v)}_insertBoxCell(r,c,m,v,I,T){this.boxCells[I].push(T)}_insertCircleCell(r,c,m,v,I,T){this.circleCells[I].push(T)}_query(r,c,m,v,I,T,D){if(m<0||r>this.width||v<0||c>this.height)return[];const B=[];if(r<=0&&c<=0&&this.width<=m&&this.height<=v){if(I)return[{key:null,x1:r,y1:c,x2:m,y2:v}];for(let H=0;H<this.boxKeys.length;H++)B.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const Q=this.circles[3*H],re=this.circles[3*H+1],ie=this.circles[3*H+2];B.push({key:this.circleKeys[H],x1:Q-ie,y1:re-ie,x2:Q+ie,y2:re+ie})}}else this._forEachCell(r,c,m,v,this._queryCell,B,{hitTest:I,overlapMode:T,seenUids:{box:{},circle:{}}},D);return B}query(r,c,m,v){return this._query(r,c,m,v,!1,null)}hitTest(r,c,m,v,I,T){return this._query(r,c,m,v,!0,I,T).length>0}hitTestCircle(r,c,m,v,I){const T=r-m,D=r+m,B=c-m,H=c+m;if(D<0||T>this.width||H<0||B>this.height)return!1;const Q=[];return this._forEachCell(T,B,D,H,this._queryCellCircle,Q,{hitTest:!0,overlapMode:v,circle:{x:r,y:c,radius:m},seenUids:{box:{},circle:{}}},I),Q.length>0}_queryCell(r,c,m,v,I,T,D,B){const{seenUids:H,hitTest:Q,overlapMode:re}=D,ie=this.boxCells[I];if(ie!==null){const _e=this.bboxes;for(const De of ie)if(!H.box[De]){H.box[De]=!0;const ke=4*De,Re=this.boxKeys[De];if(r<=_e[ke+2]&&c<=_e[ke+3]&&m>=_e[ke+0]&&v>=_e[ke+1]&&(!B||B(Re))&&(!Q||!pn(re,Re.overlapMode))&&(T.push({key:Re,x1:_e[ke],y1:_e[ke+1],x2:_e[ke+2],y2:_e[ke+3]}),Q))return!0}}const fe=this.circleCells[I];if(fe!==null){const _e=this.circles;for(const De of fe)if(!H.circle[De]){H.circle[De]=!0;const ke=3*De,Re=this.circleKeys[De];if(this._circleAndRectCollide(_e[ke],_e[ke+1],_e[ke+2],r,c,m,v)&&(!B||B(Re))&&(!Q||!pn(re,Re.overlapMode))){const je=_e[ke],We=_e[ke+1],Ke=_e[ke+2];if(T.push({key:Re,x1:je-Ke,y1:We-Ke,x2:je+Ke,y2:We+Ke}),Q)return!0}}}return!1}_queryCellCircle(r,c,m,v,I,T,D,B){const{circle:H,seenUids:Q,overlapMode:re}=D,ie=this.boxCells[I];if(ie!==null){const _e=this.bboxes;for(const De of ie)if(!Q.box[De]){Q.box[De]=!0;const ke=4*De,Re=this.boxKeys[De];if(this._circleAndRectCollide(H.x,H.y,H.radius,_e[ke+0],_e[ke+1],_e[ke+2],_e[ke+3])&&(!B||B(Re))&&!pn(re,Re.overlapMode))return T.push(!0),!0}}const fe=this.circleCells[I];if(fe!==null){const _e=this.circles;for(const De of fe)if(!Q.circle[De]){Q.circle[De]=!0;const ke=3*De,Re=this.circleKeys[De];if(this._circlesCollide(_e[ke],_e[ke+1],_e[ke+2],H.x,H.y,H.radius)&&(!B||B(Re))&&!pn(re,Re.overlapMode))return T.push(!0),!0}}}_forEachCell(r,c,m,v,I,T,D,B){const H=this._convertToXCellCoord(r),Q=this._convertToYCellCoord(c),re=this._convertToXCellCoord(m),ie=this._convertToYCellCoord(v);for(let fe=H;fe<=re;fe++)for(let _e=Q;_e<=ie;_e++)if(I.call(this,r,c,m,v,this.xCellCount*_e+fe,T,D,B))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,m,v,I,T){const D=v-r,B=I-c,H=m+T;return H*H>D*D+B*B}_circleAndRectCollide(r,c,m,v,I,T,D){const B=(T-v)/2,H=Math.abs(r-(v+B));if(H>B+m)return!1;const Q=(D-I)/2,re=Math.abs(c-(I+Q));if(re>Q+m)return!1;if(H<=B||re<=Q)return!0;const ie=H-B,fe=re-Q;return ie*ie+fe*fe<=m*m}}function Vn(w,r,c){const m=s.K();if(!w){const{vecSouth:re,vecEast:ie}=Ft(r),fe=y();fe[0]=ie[0],fe[1]=ie[1],fe[2]=re[0],fe[3]=re[1],v=fe,(Q=(T=(I=fe)[0])*(H=I[3])-(B=I[2])*(D=I[1]))&&(v[0]=H*(Q=1/Q),v[1]=-D*Q,v[2]=-B*Q,v[3]=T*Q),m[0]=fe[0],m[1]=fe[1],m[4]=fe[2],m[5]=fe[3]}var v,I,T,D,B,H,Q;return s.M(m,m,[1/c,1/c,1]),m}function Qn(w,r,c,m){if(w){const v=s.K();if(!r){const{vecSouth:I,vecEast:T}=Ft(c);v[0]=T[0],v[1]=T[1],v[4]=I[0],v[5]=I[1]}return s.M(v,v,[m,m,1]),v}return c.pixelsToClipSpaceMatrix}function Ft(w){const r=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),m=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),I=Math.sin(w.bearingInRadians),T=s.ao();T[0]=-v*m*c-I*r,T[1]=-I*m*c+v*r;const D=s.ap(T);D<1e-9?s.aq(T):s.ar(T,T,1/D);const B=s.ao();B[0]=v*m*r-I*c,B[1]=I*m*r+v*c;const H=s.ap(B);return H<1e-9?s.aq(B):s.ar(B,B,1/H),{vecEast:B,vecSouth:T}}function jn(w,r,c,m){let v;m?(v=[w,r,m(w,r),1],s.at(v,v,c)):(v=[w,r,0,1],ai(v,v,c));const I=v[3];return{point:new s.P(v[0]/I,v[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}function xr(w,r){return .5+w/r*.5}function Vr(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function Ar(w,r,c,m,v,I,T,D,B,H,Q,re,ie){const fe=c?w.textSizeData:w.iconSizeData,_e=s.ak(fe,r.transform.zoom),De=[256/r.width*2+1,256/r.height*2+1],ke=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ke.clear();const Re=w.lineVertexArray,je=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,We=r.transform.width/r.transform.height;let Ke=!1;for(let Je=0;Je<je.length;Je++){const at=je.get(Je);if(at.hidden||at.writingMode===s.al.vertical&&!Ke){Bi(at.numGlyphs,ke);continue}Ke=!1;const nt=new s.P(at.anchorX,at.anchorY),xt={getElevation:ie,pitchedLabelPlaneMatrix:m,lineVertexArray:Re,pitchWithMap:I,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:nt,unwrappedTileID:B,width:H,height:Q,translation:re},Ct=dh(at.anchorX,at.anchorY,xt);if(!Vr(Ct.point,De)){Bi(at.numGlyphs,ke);continue}const vt=xr(r.transform.cameraToCenterDistance,Ct.signedDistanceFromCamera),jt=s.am(fe,_e,at),zt=I?jt*r.transform.getPitchedTextCorrection(at.anchorX,at.anchorY,B)/vt:jt*vt,ln=zn({projectionContext:xt,pitchedLabelPlaneMatrixInverse:v,symbol:at,fontSize:zt,flip:!1,keepUpright:T,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ke,aspectRatio:We,rotateToLine:D});Ke=ln.useVertical,(ln.notEnoughRoom||Ke||ln.needsFlipping&&zn({projectionContext:xt,pitchedLabelPlaneMatrixInverse:v,symbol:at,fontSize:zt,flip:!0,keepUpright:T,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ke,aspectRatio:We,rotateToLine:D}).notEnoughRoom)&&Bi(at.numGlyphs,ke)}c?w.text.dynamicLayoutVertexBuffer.updateData(ke):w.icon.dynamicLayoutVertexBuffer.updateData(ke)}function Ut(w,r,c,m,v,I,T,D){const B=I.glyphStartIndex+I.numGlyphs,H=I.lineStartIndex,Q=I.lineStartIndex+I.lineLength,re=r.getoffsetX(I.glyphStartIndex),ie=r.getoffsetX(B-1),fe=Nl(w*re,c,m,v,I.segment,H,Q,D,T);if(!fe)return null;const _e=Nl(w*ie,c,m,v,I.segment,H,Q,D,T);return _e?D.projectionCache.anyProjectionOccluded?null:{first:fe,last:_e}:null}function _n(w,r,c,m){return w===s.al.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*m?{useVertical:!0}:(w===s.al.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function zn(w){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:m,fontSize:v,flip:I,keepUpright:T,glyphOffsetArray:D,dynamicLayoutVertexArray:B,aspectRatio:H,rotateToLine:Q}=w,re=v/24,ie=m.lineOffsetX*re,fe=m.lineOffsetY*re;let _e;if(m.numGlyphs>1){const De=m.glyphStartIndex+m.numGlyphs,ke=m.lineStartIndex,Re=m.lineStartIndex+m.lineLength,je=Ut(re,D,ie,fe,I,m,Q,r);if(!je)return{notEnoughRoom:!0};const We=Yn(je.first.point.x,je.first.point.y,r,c),Ke=Yn(je.last.point.x,je.last.point.y,r,c);if(T&&!I){const Je=_n(m.writingMode,We,Ke,H);if(Je)return Je}_e=[je.first];for(let Je=m.glyphStartIndex+1;Je<De-1;Je++)_e.push(Nl(re*D.getoffsetX(Je),ie,fe,I,m.segment,ke,Re,r,Q));_e.push(je.last)}else{if(T&&!I){const ke=si(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,Re=m.lineStartIndex+m.segment+1,je=new s.P(r.lineVertexArray.getx(Re),r.lineVertexArray.gety(Re)),We=si(je.x,je.y,r),Ke=We.signedDistanceFromCamera>0?We.point:$s(r.tileAnchorPoint,je,ke,1,r),Je=Yn(ke.x,ke.y,r,c),at=Yn(Ke.x,Ke.y,r,c),nt=_n(m.writingMode,Je,at,H);if(nt)return nt}const De=Nl(re*D.getoffsetX(m.glyphStartIndex),ie,fe,I,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,r,Q);if(!De||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};_e=[De]}for(const De of _e)s.as(B,De.point,De.angle);return{}}function $s(w,r,c,m,v){const I=w.add(w.sub(r)._unit()),T=si(I.x,I.y,v).point,D=c.sub(T);return c.add(D._mult(m/D.mag()))}function Ds(w,r,c){const m=r.projectionCache;if(m.projections[w])return m.projections[w];const v=new s.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),I=si(v.x,v.y,r);if(I.signedDistanceFromCamera>0)return m.projections[w]=I.point,m.anyProjectionOccluded=m.anyProjectionOccluded||I.isOccluded,I.point;const T=w-c.direction;return $s(c.distanceFromAnchor===0?r.tileAnchorPoint:new s.P(r.lineVertexArray.getx(T),r.lineVertexArray.gety(T)),v,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function si(w,r,c){const m=w+c.translation[0],v=r+c.translation[1];let I;return c.pitchWithMap?(I=jn(m,v,c.pitchedLabelPlaneMatrix,c.getElevation),I.isOccluded=!1):(I=c.transform.projectTileCoordinates(m,v,c.unwrappedTileID,c.getElevation),I.point.x=(.5*I.point.x+.5)*c.width,I.point.y=(.5*-I.point.y+.5)*c.height),I}function Yn(w,r,c,m){if(c.pitchWithMap){const v=[w,r,0,1];return s.at(v,v,m),c.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:r/c.height*2-1}}function dh(w,r,c){return c.transform.projectTileCoordinates(w,r,c.unwrappedTileID,c.getElevation)}function Cu(w,r,c){return w._unit()._perp()._mult(r*c)}function yd(w,r,c,m,v,I,T,D,B){if(D.projectionCache.offsets[w])return D.projectionCache.offsets[w];const H=c.add(r);if(w+B.direction<m||w+B.direction>=v)return D.projectionCache.offsets[w]=H,H;const Q=Ds(w+B.direction,D,B),re=Cu(Q.sub(c),T,B.direction),ie=c.add(re),fe=Q.add(re);return D.projectionCache.offsets[w]=s.au(I,H,ie,fe)||H,D.projectionCache.offsets[w]}function Nl(w,r,c,m,v,I,T,D,B){const H=m?w-r:w+r;let Q=H>0?1:-1,re=0;m&&(Q*=-1,re=Math.PI),Q<0&&(re+=Math.PI);let ie,fe=Q>0?I+v:I+v+1;D.projectionCache.cachedAnchorPoint?ie=D.projectionCache.cachedAnchorPoint:(ie=si(D.tileAnchorPoint.x,D.tileAnchorPoint.y,D).point,D.projectionCache.cachedAnchorPoint=ie);let _e,De,ke=ie,Re=ie,je=0,We=0;const Ke=Math.abs(H),Je=[];let at;for(;je+We<=Ke;){if(fe+=Q,fe<I||fe>=T)return null;je+=We,Re=ke,De=_e;const Ct={absOffsetX:Ke,direction:Q,distanceFromAnchor:je,previousVertex:Re};if(ke=Ds(fe,D,Ct),c===0)Je.push(Re),at=ke.sub(Re);else{let vt;const jt=ke.sub(Re);vt=jt.mag()===0?Cu(Ds(fe+Q,D,Ct).sub(ke),c,Q):Cu(jt,c,Q),De||(De=Re.add(vt)),_e=yd(fe,vt,ke,I,T,De,c,D,Ct),Je.push(De),at=_e.sub(De)}We=at.mag()}const nt=at._mult((Ke-je)/We)._add(De||Re),xt=re+Math.atan2(ke.y-Re.y,ke.x-Re.x);return Je.push(nt),{point:nt,angle:B?xt:0,path:Je}}const vd=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Bi(w,r){for(let c=0;c<w;c++){const m=r.length;r.resize(m+4),r.float32.set(vd,3*m)}}function ai(w,r,c){const m=r[0],v=r[1];return w[0]=c[0]*m+c[4]*v+c[12],w[1]=c[1]*m+c[5]*v+c[13],w[3]=c[3]*m+c[7]*v+c[15],w}const Ni=100;class fh{constructor(r,c=new mn(r.width+200,r.height+200,25),m=new mn(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=m,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ni,this.screenBottomBoundary=r.height+Ni,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,m,v,I,T,D,B,H,Q,re,ie){const fe=this.projectAndGetPerspectiveRatio(r.anchorPointX+B[0],r.anchorPointY+B[1],I,Q,ie),_e=m*fe.perspectiveRatio;let De;if(T||D)De=this._projectCollisionBox(r,_e,v,I,T,D,B,fe,Q,re,ie);else{const at=fe.x+(re?re.x*_e:0),nt=fe.y+(re?re.y*_e:0);De={allPointsOccluded:!1,box:[at+r.x1*_e,nt+r.y1*_e,at+r.x2*_e,nt+r.y2*_e]}}const[ke,Re,je,We]=De.box,Ke=T?De.allPointsOccluded:fe.isOccluded;let Je=Ke;return Je||(Je=fe.perspectiveRatio<this.perspectiveRatioCutoff),Je||(Je=!this.isInsideGrid(ke,Re,je,We)),Je||c!=="always"&&this.grid.hitTest(ke,Re,je,We,c,H)?{box:[ke,Re,je,We],placeable:!1,offscreen:!1,occluded:Ke}:{box:[ke,Re,je,We],placeable:!0,offscreen:this.isOffscreen(ke,Re,je,We),occluded:Ke}}placeCollisionCircles(r,c,m,v,I,T,D,B,H,Q,re,ie,fe,_e){const De=[],ke=new s.P(c.anchorX,c.anchorY),Re=this.getPerspectiveRatio(ke.x,ke.y,T,_e),je=(H?I*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,T)/Re:I*Re)/s.ay,We={getElevation:_e,pitchedLabelPlaneMatrix:D,lineVertexArray:m,pitchWithMap:H,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ke,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:fe},Ke=Ut(je,v,c.lineOffsetX*je,c.lineOffsetY*je,!1,c,!1,We);let Je=!1,at=!1,nt=!0;if(Ke){const xt=.5*re*Re+ie,Ct=new s.P(-100,-100),vt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),jt=new qt,zt=Ke.first,ln=Ke.last;let nn=[];for(let Hn=zt.path.length-1;Hn>=1;Hn--)nn.push(zt.path[Hn]);for(let Hn=1;Hn<ln.path.length;Hn++)nn.push(ln.path[Hn]);const Kt=2.5*xt;if(H){const Hn=this.projectPathToScreenSpace(nn,We);nn=Hn.some(Zn=>Zn.signedDistanceFromCamera<=0)?[]:Hn.map(Zn=>Zn.point)}let kn=[];if(nn.length>0){const Hn=nn[0].clone(),Zn=nn[0].clone();for(let Jr=1;Jr<nn.length;Jr++)Hn.x=Math.min(Hn.x,nn[Jr].x),Hn.y=Math.min(Hn.y,nn[Jr].y),Zn.x=Math.max(Zn.x,nn[Jr].x),Zn.y=Math.max(Zn.y,nn[Jr].y);kn=Hn.x>=Ct.x&&Zn.x<=vt.x&&Hn.y>=Ct.y&&Zn.y<=vt.y?[nn]:Zn.x<Ct.x||Hn.x>vt.x||Zn.y<Ct.y||Hn.y>vt.y?[]:s.av([nn],Ct.x,Ct.y,vt.x,vt.y)}for(const Hn of kn){jt.reset(Hn,.25*xt);let Zn=0;Zn=jt.length<=.5*xt?1:Math.ceil(jt.paddedLength/Kt)+1;for(let Jr=0;Jr<Zn;Jr++){const Lr=Jr/Math.max(Zn-1,1),oi=jt.lerp(Lr),ni=oi.x+Ni,or=oi.y+Ni;De.push(ni,or,xt,0);const pr=ni-xt,Zi=or-xt,Wi=ni+xt,qi=or+xt;if(nt=nt&&this.isOffscreen(pr,Zi,Wi,qi),at=at||this.isInsideGrid(pr,Zi,Wi,qi),r!=="always"&&this.grid.hitTestCircle(ni,or,xt,r,Q)&&(Je=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Je}}}}return{circles:!B&&Je||!at||Re<this.perspectiveRatioCutoff?[]:De,offscreen:nt,collisionDetected:Je}}projectPathToScreenSpace(r,c){const m=function(v,I){const T=s.K();return s.an(T,I.pitchedLabelPlaneMatrix),v.map(D=>{const B=jn(D.x,D.y,T,I.getElevation),H=I.transform.projectTileCoordinates(B.point.x,B.point.y,I.unwrappedTileID,I.getElevation);return H.point.x=(.5*H.point.x+.5)*I.width,H.point.y=(.5*-H.point.y+.5)*I.height,H})}(r,c);return function(v){let I=0,T=0,D=0,B=0;for(let H=0;H<v.length;H++)v[H].isOccluded?(D=H+1,B=0):(B++,B>T&&(T=B,I=D));return v.slice(I,I+T)}(m)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,v=1/0,I=-1/0,T=-1/0;for(const Q of r){const re=new s.P(Q.x+Ni,Q.y+Ni);m=Math.min(m,re.x),v=Math.min(v,re.y),I=Math.max(I,re.x),T=Math.max(T,re.y),c.push(re)}const D=this.grid.query(m,v,I,T).concat(this.ignoredGrid.query(m,v,I,T)),B={},H={};for(const Q of D){const re=Q.key;if(B[re.bucketInstanceId]===void 0&&(B[re.bucketInstanceId]={}),B[re.bucketInstanceId][re.featureIndex])continue;const ie=[new s.P(Q.x1,Q.y1),new s.P(Q.x2,Q.y1),new s.P(Q.x2,Q.y2),new s.P(Q.x1,Q.y2)];s.aw(c,ie)&&(B[re.bucketInstanceId][re.featureIndex]=!0,H[re.bucketInstanceId]===void 0&&(H[re.bucketInstanceId]=[]),H[re.bucketInstanceId].push(re.featureIndex))}return H}insertCollisionBox(r,c,m,v,I,T){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:I,collisionGroupID:T,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,m,v,I,T){const D=m?this.ignoredGrid:this.grid,B={bucketInstanceId:v,featureIndex:I,collisionGroupID:T,overlapMode:c};for(let H=0;H<r.length;H+=4)D.insertCircle(B,r[H],r[H+1],r[H+2])}projectAndGetPerspectiveRatio(r,c,m,v,I){if(I){let T;v?(T=[r,c,v(r,c),1],s.at(T,T,I)):(T=[r,c,0,1],ai(T,T,I));const D=T[3];return{x:(T[0]/D+1)/2*this.transform.width+Ni,y:(-T[1]/D+1)/2*this.transform.height+Ni,perspectiveRatio:.5+this.transform.cameraToCenterDistance/D*.5,isOccluded:!1,signedDistanceFromCamera:D}}{const T=this.transform.projectTileCoordinates(r,c,m,v);return{x:(T.point.x+1)/2*this.transform.width+Ni,y:(1-T.point.y)/2*this.transform.height+Ni,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,m,v){const I=this.transform.projectTileCoordinates(r,c,m,v);return .5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5}isOffscreen(r,c,m,v){return m<Ni||r>=this.screenRightBoundary||v<Ni||c>this.screenBottomBoundary}isInsideGrid(r,c,m,v){return m>=0&&r<this.gridRightBoundary&&v>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=s.ad([]);return s.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,m,v,I,T,D,B,H,Q,re){let ie=1,fe=0,_e=0,De=1;const ke=r.anchorPointX+D[0],Re=r.anchorPointY+D[1];if(T&&!I){const nn=this.projectAndGetPerspectiveRatio(ke+1,Re,v,H,re),Kt=nn.x-B.x,kn=Math.atan((nn.y-B.y)/Kt)+(Kt<0?Math.PI:0),Hn=Math.sin(kn),Zn=Math.cos(kn);ie=Zn,fe=Hn,_e=-Hn,De=Zn}else if(!T&&I){const nn=Ft(this.transform);ie=nn.vecEast[0],fe=nn.vecEast[1],_e=nn.vecSouth[0],De=nn.vecSouth[1]}let je=B.x,We=B.y,Ke=c;I&&(je=ke,We=Re,Ke=Math.pow(2,-(this.transform.zoom-m.overscaledZ)),Ke*=this.transform.getPitchedTextCorrection(ke,Re,v),Q||(Ke*=s.ae(.5+B.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Q&&(je+=ie*Q.x*Ke+_e*Q.y*Ke,We+=fe*Q.x*Ke+De*Q.y*Ke);const Je=r.x1*Ke,at=r.x2*Ke,nt=(Je+at)/2,xt=r.y1*Ke,Ct=r.y2*Ke,vt=(xt+Ct)/2,jt=[{offsetX:Je,offsetY:xt},{offsetX:nt,offsetY:xt},{offsetX:at,offsetY:xt},{offsetX:at,offsetY:vt},{offsetX:at,offsetY:Ct},{offsetX:nt,offsetY:Ct},{offsetX:Je,offsetY:Ct},{offsetX:Je,offsetY:vt}];let zt=[];for(const{offsetX:nn,offsetY:Kt}of jt)zt.push(new s.P(je+ie*nn+_e*Kt,We+fe*nn+De*Kt));let ln=!1;if(I){const nn=zt.map(Kt=>this.projectAndGetPerspectiveRatio(Kt.x,Kt.y,v,H,re));ln=nn.some(Kt=>!Kt.isOccluded),zt=nn.map(Kt=>new s.P(Kt.x,Kt.y))}else ln=!0;return{box:s.ax(zt),allPointsOccluded:!ln}}}class _d{constructor(r,c,m,v){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class no{constructor(r,c,m,v,I){this.text=new _d(r?r.text:null,c,m,I),this.icon=new _d(r?r.icon:null,c,v,I)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Vl{constructor(r,c,m){this.text=r,this.icon=c,this.skipFade=m}}class Jf{constructor(r,c,m,v,I){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=I}}class ep{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[r]}}function tp(w,r,c,m,v){const{horizontalAlign:I,verticalAlign:T}=s.aE(w);return new s.P(-(I-.5)*r+m[0]*v,-(T-.5)*c+m[1]*v)}class mc{constructor(r,c,m,v,I){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new fh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new ep(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=I,I&&(I.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(m,v)=>c.getElevation(r,m,v):null}getBucketParts(r,c,m,v){const I=m.getBucket(c),T=m.latestFeatureIndex;if(!I||!T||c.id!==I.layerIds[0])return;const D=m.collisionBoxArray,B=I.layers[0].layout,H=I.layers[0].paint,Q=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),re=m.tileSize/s.Z,ie=m.tileID.toUnwrapped(),fe=B.get("text-rotation-alignment")==="map",_e=s.az(m,1,this.transform.zoom),De=s.aA(this.collisionIndex.transform,m,H.get("text-translate"),H.get("text-translate-anchor")),ke=s.aA(this.collisionIndex.transform,m,H.get("icon-translate"),H.get("icon-translate-anchor")),Re=Vn(fe,this.transform,_e);this.retainedQueryData[I.bucketInstanceId]=new Jf(I.bucketInstanceId,T,I.sourceLayerIndex,I.index,m.tileID);const je={bucket:I,layout:B,translationText:De,translationIcon:ke,unwrappedTileID:ie,pitchedLabelPlaneMatrix:Re,scale:Q,textPixelRatio:re,holdingForFade:m.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:s.ak(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(v)for(const We of I.sortKeyRanges){const{sortKey:Ke,symbolInstanceStart:Je,symbolInstanceEnd:at}=We;r.push({sortKey:Ke,symbolInstanceStart:Je,symbolInstanceEnd:at,parameters:je})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:je})}attemptAnchorPlacement(r,c,m,v,I,T,D,B,H,Q,re,ie,fe,_e,De,ke,Re,je,We,Ke){const Je=s.aB[r.textAnchor],at=[r.textOffset0,r.textOffset1],nt=tp(Je,m,v,at,I),xt=this.collisionIndex.placeCollisionBox(c,ie,B,H,Q,D,T,ke,re.predicate,We,nt,Ke);if((!je||this.collisionIndex.placeCollisionBox(je,ie,B,H,Q,D,T,Re,re.predicate,We,nt,Ke).placeable)&&xt.placeable){let Ct;if(this.prevPlacement&&this.prevPlacement.variableOffsets[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID]&&this.prevPlacement.placements[fe.crossTileID].text&&(Ct=this.prevPlacement.variableOffsets[fe.crossTileID].anchor),fe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[fe.crossTileID]={textOffset:at,width:m,height:v,anchor:Je,textBoxScale:I,prevAnchor:Ct},this.markUsedJustification(_e,Je,fe,De),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,De,fe),this.placedOrientations[fe.crossTileID]=De),{shift:nt,placedGlyphBoxes:xt}}}placeLayerBucketPart(r,c,m){const{bucket:v,layout:I,translationText:T,translationIcon:D,unwrappedTileID:B,pitchedLabelPlaneMatrix:H,textPixelRatio:Q,holdingForFade:re,collisionBoxArray:ie,partiallyEvaluatedTextSize:fe,collisionGroup:_e}=r.parameters,De=I.get("text-optional"),ke=I.get("icon-optional"),Re=s.aC(I,"text-overlap","text-allow-overlap"),je=Re==="always",We=s.aC(I,"icon-overlap","icon-allow-overlap"),Ke=We==="always",Je=I.get("text-rotation-alignment")==="map",at=I.get("text-pitch-alignment")==="map",nt=I.get("icon-text-fit")!=="none",xt=I.get("symbol-z-order")==="viewport-y",Ct=je&&(Ke||!v.hasIconData()||ke),vt=Ke&&(je||!v.hasTextData()||De);!v.collisionArrays&&ie&&v.deserializeCollisionBoxes(ie);const jt=this.retainedQueryData[v.bucketInstanceId].tileID,zt=this._getTerrainElevationFunc(jt),ln=this.transform.getFastPathSimpleProjectionMatrix(jt),nn=(Kt,kn,Hn)=>{var Zn,Jr;if(c[Kt.crossTileID])return;if(re)return void(this.placements[Kt.crossTileID]=new Vl(!1,!1,!1));let Lr=!1,oi=!1,ni=!0,or=null,pr={box:null,placeable:!1,offscreen:null,occluded:!1},Zi={placeable:!1},Wi=null,qi=null,Ss=null,Ua=0,pl=0,ho=0;kn.textFeatureIndex?Ua=kn.textFeatureIndex:Kt.useRuntimeCollisionCircles&&(Ua=Kt.featureIndex),kn.verticalTextFeatureIndex&&(pl=kn.verticalTextFeatureIndex);const fo=kn.textBox;if(fo){const da=gi=>{let li=s.al.horizontal;if(v.allowVerticalPlacement&&!gi&&this.prevPlacement){const xi=this.prevPlacement.placedOrientations[Kt.crossTileID];xi&&(this.placedOrientations[Kt.crossTileID]=xi,li=xi,this.markUsedOrientation(v,li,Kt))}return li},ml=(gi,li)=>{if(v.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&kn.verticalTextBox){for(const xi of v.writingModes)if(xi===s.al.vertical?(pr=li(),Zi=pr):pr=gi(),pr&&pr.placeable)break}else pr=gi()},po=Kt.textAnchorOffsetStartIndex,gl=Kt.textAnchorOffsetEndIndex;if(gl===po){const gi=(li,xi)=>{const ui=this.collisionIndex.placeCollisionBox(li,Re,Q,jt,B,at,Je,T,_e.predicate,zt,void 0,ln);return ui&&ui.placeable&&(this.markUsedOrientation(v,xi,Kt),this.placedOrientations[Kt.crossTileID]=xi),ui};ml(()=>gi(fo,s.al.horizontal),()=>{const li=kn.verticalTextBox;return v.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&li?gi(li,s.al.vertical):{box:null,offscreen:null}}),da(pr&&pr.placeable)}else{let gi=s.aB[(Jr=(Zn=this.prevPlacement)===null||Zn===void 0?void 0:Zn.variableOffsets[Kt.crossTileID])===null||Jr===void 0?void 0:Jr.anchor];const li=(ui,cg,Jl)=>{const hg=ui.x2-ui.x1,Xs=ui.y2-ui.y1,$a=Kt.textBoxScale,dg=nt&&We==="never"?cg:null;let wa=null,mo=Re==="never"?1:2,eu="never";gi&&mo++;for(let Dp=0;Dp<mo;Dp++){for(let Fc=po;Fc<gl;Fc++){const Rp=v.textAnchorOffsets.get(Fc);if(gi&&Rp.textAnchor!==gi)continue;const Xd=this.attemptAnchorPlacement(Rp,ui,hg,Xs,$a,Je,at,Q,jt,B,_e,eu,Kt,v,Jl,T,D,dg,zt);if(Xd&&(wa=Xd.placedGlyphBoxes,wa&&wa.placeable))return Lr=!0,or=Xd.shift,wa}gi?gi=null:eu=Re}return m&&!wa&&(wa={box:this.collisionIndex.placeCollisionBox(fo,"always",Q,jt,B,at,Je,T,_e.predicate,zt,void 0,ln).box,offscreen:!1,placeable:!1,occluded:!1}),wa};ml(()=>li(fo,kn.iconBox,s.al.horizontal),()=>{const ui=kn.verticalTextBox;return v.allowVerticalPlacement&&(!pr||!pr.placeable)&&Kt.numVerticalGlyphVertices>0&&ui?li(ui,kn.verticalIconBox,s.al.vertical):{box:null,occluded:!0,offscreen:null}}),pr&&(Lr=pr.placeable,ni=pr.offscreen);const xi=da(pr&&pr.placeable);if(!Lr&&this.prevPlacement){const ui=this.prevPlacement.variableOffsets[Kt.crossTileID];ui&&(this.variableOffsets[Kt.crossTileID]=ui,this.markUsedJustification(v,ui.anchor,Kt,xi))}}}if(Wi=pr,Lr=Wi&&Wi.placeable,ni=Wi&&Wi.offscreen,Kt.useRuntimeCollisionCircles){const da=v.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex),ml=s.am(v.textSizeData,fe,da),po=I.get("text-padding");qi=this.collisionIndex.placeCollisionCircles(Re,da,v.lineVertexArray,v.glyphOffsetArray,ml,B,H,m,at,_e.predicate,Kt.collisionCircleDiameter,po,T,zt),qi.circles.length&&qi.collisionDetected&&!m&&s.w("Collisions detected, but collision boxes are not shown"),Lr=je||qi.circles.length>0&&!qi.collisionDetected,ni=ni&&qi.offscreen}if(kn.iconFeatureIndex&&(ho=kn.iconFeatureIndex),kn.iconBox){const da=ml=>this.collisionIndex.placeCollisionBox(ml,We,Q,jt,B,at,Je,D,_e.predicate,zt,nt&&or?or:void 0,ln);Zi&&Zi.placeable&&kn.verticalIconBox?(Ss=da(kn.verticalIconBox),oi=Ss.placeable):(Ss=da(kn.iconBox),oi=Ss.placeable),ni=ni&&Ss.offscreen}const Es=De||Kt.numHorizontalGlyphVertices===0&&Kt.numVerticalGlyphVertices===0,Gu=ke||Kt.numIconVertices===0;Es||Gu?Gu?Es||(oi=oi&&Lr):Lr=oi&&Lr:oi=Lr=oi&&Lr;const ha=oi&&Ss.placeable;if(Lr&&Wi.placeable&&this.collisionIndex.insertCollisionBox(Wi.box,Re,I.get("text-ignore-placement"),v.bucketInstanceId,Zi&&Zi.placeable&&pl?pl:Ua,_e.ID),ha&&this.collisionIndex.insertCollisionBox(Ss.box,We,I.get("icon-ignore-placement"),v.bucketInstanceId,ho,_e.ID),qi&&Lr&&this.collisionIndex.insertCollisionCircles(qi.circles,Re,I.get("text-ignore-placement"),v.bucketInstanceId,Ua,_e.ID),m&&this.storeCollisionData(v.bucketInstanceId,Hn,kn,Wi,Ss,qi),Kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Kt.crossTileID]=new Vl((Lr||Ct)&&!(Wi!=null&&Wi.occluded),(oi||vt)&&!(Ss!=null&&Ss.occluded),ni||v.justReloaded),c[Kt.crossTileID]=!0};if(xt){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Kt=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kn=Kt.length-1;kn>=0;--kn){const Hn=Kt[kn];nn(v.symbolInstances.get(Hn),v.collisionArrays[Hn],Hn)}}else for(let Kt=r.symbolInstanceStart;Kt<r.symbolInstanceEnd;Kt++)nn(v.symbolInstances.get(Kt),v.collisionArrays[Kt],Kt);v.justReloaded=!1}storeCollisionData(r,c,m,v,I,T){if(m.textBox||m.iconBox){let D,B;this.collisionBoxArrays.has(r)?D=this.collisionBoxArrays.get(r):(D=new Map,this.collisionBoxArrays.set(r,D)),D.has(c)?B=D.get(c):(B={text:null,icon:null},D.set(c,B)),m.textBox&&(B.text=v.box),m.iconBox&&(B.icon=I.box)}if(T){let D=this.collisionCircleArrays[r];D===void 0&&(D=this.collisionCircleArrays[r]=[]);for(let B=0;B<T.circles.length;B+=4)D.push(T.circles[B+0]-Ni),D.push(T.circles[B+1]-Ni),D.push(T.circles[B+2]),D.push(T.collisionDetected?1:0)}}markUsedJustification(r,c,m,v){let I;I=v===s.al.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[s.aD(c)];const T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const D of T)D>=0&&(r.text.placedSymbolArray.get(D).crossTileID=I>=0&&D!==I?0:m.crossTileID)}markUsedOrientation(r,c,m){const v=c===s.al.horizontal||c===s.al.horizontalOnly?c:0,I=c===s.al.vertical?c:0,T=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const D of T)r.text.placedSymbolArray.get(D).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=I)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const v=c?c.symbolFadeChange(r):1,I=c?c.opacities:{},T=c?c.variableOffsets:{},D=c?c.placedOrientations:{};for(const B in this.placements){const H=this.placements[B],Q=I[B];Q?(this.opacities[B]=new no(Q,v,H.text,H.icon),m=m||H.text!==Q.text.placed||H.icon!==Q.icon.placed):(this.opacities[B]=new no(null,v,H.text,H.icon,H.skipFade),m=m||H.text||H.icon)}for(const B in I){const H=I[B];if(!this.opacities[B]){const Q=new no(H,v,!1,!1);Q.isHidden()||(this.opacities[B]=Q,m=m||H.text.placed||H.icon.placed)}}for(const B in T)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=T[B]);for(const B in D)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=D[B]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const m={};for(const v of c){const I=v.getBucket(r);I&&v.latestFeatureIndex&&r.id===I.layerIds[0]&&this.updateBucketOpacities(I,v.tileID,m,v.collisionBoxArray)}}updateBucketOpacities(r,c,m,v){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const I=r.layers[0],T=I.layout,D=new no(null,0,!1,!1,!0),B=T.get("text-allow-overlap"),H=T.get("icon-allow-overlap"),Q=I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"),re=T.get("text-rotation-alignment")==="map",ie=T.get("text-pitch-alignment")==="map",fe=T.get("icon-text-fit")!=="none",_e=new no(null,0,B&&(H||!r.hasIconData()||T.get("icon-optional")),H&&(B||!r.hasTextData()||T.get("text-optional")),!0);!r.collisionArrays&&v&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(v);const De=(Re,je,We)=>{for(let Ke=0;Ke<je/4;Ke++)Re.opacityVertexArray.emplaceBack(We);Re.hasVisibleVertices=Re.hasVisibleVertices||We!==jl},ke=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Re=0;Re<r.symbolInstances.length;Re++){const je=r.symbolInstances.get(Re),{numHorizontalGlyphVertices:We,numVerticalGlyphVertices:Ke,crossTileID:Je}=je;let at=this.opacities[Je];m[Je]?at=D:at||(at=_e,this.opacities[Je]=at),m[Je]=!0;const nt=je.numIconVertices>0,xt=this.placedOrientations[je.crossTileID],Ct=xt===s.al.vertical,vt=xt===s.al.horizontal||xt===s.al.horizontalOnly;if(We>0||Ke>0){const zt=gc(at.text);De(r.text,We,Ct?jl:zt),De(r.text,Ke,vt?jl:zt);const ln=at.text.isHidden();[je.rightJustifiedTextSymbolIndex,je.centerJustifiedTextSymbolIndex,je.leftJustifiedTextSymbolIndex].forEach(kn=>{kn>=0&&(r.text.placedSymbolArray.get(kn).hidden=ln||Ct?1:0)}),je.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(je.verticalPlacedTextSymbolIndex).hidden=ln||vt?1:0);const nn=this.variableOffsets[je.crossTileID];nn&&this.markUsedJustification(r,nn.anchor,je,xt);const Kt=this.placedOrientations[je.crossTileID];Kt&&(this.markUsedJustification(r,"left",je,Kt),this.markUsedOrientation(r,Kt,je))}if(nt){const zt=gc(at.icon),ln=!(fe&&je.verticalPlacedIconSymbolIndex&&Ct);je.placedIconSymbolIndex>=0&&(De(r.icon,je.numIconVertices,ln?zt:jl),r.icon.placedSymbolArray.get(je.placedIconSymbolIndex).hidden=at.icon.isHidden()),je.verticalPlacedIconSymbolIndex>=0&&(De(r.icon,je.numVerticalIconVertices,ln?jl:zt),r.icon.placedSymbolArray.get(je.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const jt=ke&&ke.has(Re)?ke.get(Re):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const zt=r.collisionArrays[Re];if(zt){let ln=new s.P(0,0);if(zt.textBox||zt.verticalTextBox){let nn=!0;if(Q){const Kt=this.variableOffsets[Je];Kt?(ln=tp(Kt.anchor,Kt.width,Kt.height,Kt.textOffset,Kt.textBoxScale),re&&ln._rotate(ie?-this.transform.bearingInRadians:this.transform.bearingInRadians)):nn=!1}if(zt.textBox||zt.verticalTextBox){let Kt;zt.textBox&&(Kt=Ct),zt.verticalTextBox&&(Kt=vt),np(r.textCollisionBox.collisionVertexArray,at.text.placed,!nn||Kt,jt.text,ln.x,ln.y)}}if(zt.iconBox||zt.verticalIconBox){const nn=!!(!vt&&zt.verticalIconBox);let Kt;zt.iconBox&&(Kt=nn),zt.verticalIconBox&&(Kt=!nn),np(r.iconCollisionBox.collisionVertexArray,at.icon.placed,Kt,jt.icon,fe?ln.x:0,fe?ln.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>r}setStale(){this.stale=!0}}function np(w,r,c,m,v,I){m&&m.length!==0||(m=[0,0,0,0]);const T=m[0]-Ni,D=m[1]-Ni,B=m[2]-Ni,H=m[3]-Ni;w.emplaceBack(r?1:0,c?1:0,v||0,I||0,T,D),w.emplaceBack(r?1:0,c?1:0,v||0,I||0,B,D),w.emplaceBack(r?1:0,c?1:0,v||0,I||0,B,H),w.emplaceBack(r?1:0,c?1:0,v||0,I||0,T,H)}const tv=Math.pow(2,25),Bm=Math.pow(2,24),Nm=Math.pow(2,17),rp=Math.pow(2,16),bd=Math.pow(2,9),ip=Math.pow(2,8),xd=Math.pow(2,1);function gc(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,c=Math.floor(127*w.opacity);return c*tv+r*Bm+c*Nm+r*rp+c*bd+r*ip+c*xd+r}const jl=0;class sp{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,m,v,I){const T=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(T,v,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((D,B)=>D.sortKey-B.sortKey));this._currentPartIndex<T.length;)if(c.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,I())return!0;return!1}}class ph{constructor(r,c,m,v,I,T,D,B){this.placement=new mc(r,c,T,D,B),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=I,this._done=!1}isDone(){return this._done}continuePlacement(r,c,m){const v=M.now(),I=()=>!this._forceFullPlacement&&M.now()-v>2;for(;this._currentPlacementIndex>=0;){const T=c[r[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=D)&&(!T.maxzoom||T.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new sp(T)),this._inProgressLayer.continuePlacement(m[T.source],this.placement,this._showCollisionBoxes,T,I))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Iu=512/s.Z/2;class Ul{constructor(r,c,m){this.tileID=r,this.bucketInstanceId=m,this._symbolsByKey={};const v=new Map;for(let I=0;I<c.length;I++){const T=c.get(I),D=T.key,B=v.get(D);B?B.push(T):v.set(D,[T])}for(const[I,T]of v){const D={positions:T.map(B=>({x:Math.floor(B.anchorX*Iu),y:Math.floor(B.anchorY*Iu)})),crossTileIDs:T.map(B=>B.crossTileID)};if(D.positions.length>128){const B=new s.aF(D.positions.length,16,Uint16Array);for(const{x:H,y:Q}of D.positions)B.add(H,Q);B.finish(),delete D.positions,D.index=B}this._symbolsByKey[I]=D}}getScaledCoordinates(r,c){const{x:m,y:v,z:I}=this.tileID.canonical,{x:T,y:D,z:B}=c.canonical,H=Iu/Math.pow(2,B-I),Q=(D*s.Z+r.anchorY)*H,re=v*s.Z*Iu;return{x:Math.floor((T*s.Z+r.anchorX)*H-m*s.Z*Iu),y:Math.floor(Q-re)}}findMatches(r,c,m){const v=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let I=0;I<r.length;I++){const T=r.get(I);if(T.crossTileID)continue;const D=this._symbolsByKey[T.key];if(!D)continue;const B=this.getScaledCoordinates(T,c);if(D.index){const H=D.index.range(B.x-v,B.y-v,B.x+v,B.y+v).sort();for(const Q of H){const re=D.crossTileIDs[Q];if(!m[re]){m[re]=!0,T.crossTileID=re;break}}}else if(D.positions)for(let H=0;H<D.positions.length;H++){const Q=D.positions[H],re=D.crossTileIDs[H];if(Math.abs(Q.x-B.x)<=v&&Math.abs(Q.y-B.y)<=v&&!m[re]){m[re]=!0,T.crossTileID=re;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Vm{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const m in this.indexes){const v=this.indexes[m],I={};for(const T in v){const D=v[T];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+c),I[D.tileID.key]=D}this.indexes[m]=I}this.lng=r}addBucket(r,c,m){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let I=0;I<c.symbolInstances.length;I++)c.symbolInstances.get(I).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const v=this.usedCrossTileIDs[r.overscaledZ];for(const I in this.indexes){const T=this.indexes[I];if(Number(I)>r.overscaledZ)for(const D in T){const B=T[D];B.tileID.isChildOf(r)&&B.findMatches(c.symbolInstances,r,v)}else{const D=T[r.scaledTo(Number(I)).key];D&&D.findMatches(c.symbolInstances,r,v)}}for(let I=0;I<c.symbolInstances.length;I++){const T=c.symbolInstances.get(I);T.crossTileID||(T.crossTileID=m.generate(),v[T.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ul(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const m of c.getCrossTileIDsLists())for(const v of m)delete this.usedCrossTileIDs[r][v]}removeStaleBuckets(r){let c=!1;for(const m in this.indexes){const v=this.indexes[m];for(const I in v)r[v[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[I]),delete v[I],c=!0)}return c}}class ro{constructor(){this.layerIndexes={},this.crossTileIDs=new Vm,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,m){let v=this.layerIndexes[r.id];v===void 0&&(v=this.layerIndexes[r.id]=new jm);let I=!1;const T={};v.handleWrapJump(m);for(const D of c){const B=D.getBucket(r);B&&r.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(D.tileID,B,this.crossTileIDs)&&(I=!0),T[B.bucketInstanceId]=!0)}return v.removeStaleBuckets(T)&&(I=!0),I}pruneUnusedLayers(r){const c={};r.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}var $l="void main() {fragColor=vec4(1.0);}";const Jn={prelude:yr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:yr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:yr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:yr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:yr($l,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:yr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:yr($l,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:yr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:yr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));fragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:yr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:yr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:yr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:yr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:yr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:yr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yr(w,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=r.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=I?I.concat(v):v,D={};return{fragmentSource:w=w.replace(c,(B,H,Q,re,ie)=>(D[ie]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
in ${Q} ${re} ${ie};
#else
uniform ${Q} ${re} u_${ie};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ie}
    ${Q} ${re} ${ie} = u_${ie};
#endif
`)),vertexSource:r=r.replace(c,(B,H,Q,re,ie)=>{const fe=re==="float"?"vec2":"vec4",_e=ie.match(/color/)?"color":fe;return D[ie]?H==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
in ${Q} ${fe} a_${ie};
out ${Q} ${re} ${ie};
#else
uniform ${Q} ${re} u_${ie};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = a_${ie};
#else
    ${Q} ${re} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${ie} = unpack_mix_${_e}(a_${ie}, u_${ie}_t);
#else
    ${Q} ${re} ${ie} = u_${ie};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${ie}
uniform lowp float u_${ie}_t;
in ${Q} ${fe} a_${ie};
#else
uniform ${Q} ${re} u_${ie};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${ie}
    ${Q} ${re} ${ie} = a_${ie};
#else
    ${Q} ${re} ${ie} = u_${ie};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ie}
    ${Q} ${re} ${ie} = unpack_mix_${_e}(a_${ie}, u_${ie}_t);
#else
    ${Q} ${re} ${ie} = u_${ie};
#endif
`}),staticAttributes:m,staticUniforms:T}}class Mu{constructor(r,c,m){this.vertexBuffer=r,this.indexBuffer=c,this.segments=m}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Oo=s.aG([{name:"a_pos",type:"Int16",components:2}]);const Hs="#define PROJECTION_MERCATOR",Cs="mercator";class mi{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Cs}get shaderDefine(){return Hs}get shaderPreludeCode(){return Jn.projectionMercator}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return s.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,m,v,I){if(this._cachedMesh)return this._cachedMesh;const T=new s.aI;T.emplaceBack(0,0),T.emplaceBack(s.Z,0),T.emplaceBack(0,s.Z),T.emplaceBack(s.Z,s.Z);const D=r.createVertexBuffer(T,Oo.members),B=s.aJ.simpleSegment(0,0,4,2),H=new s.aK;H.emplaceBack(1,0,2),H.emplaceBack(1,2,3);const Q=r.createIndexBuffer(H);return this._cachedMesh=new Mu(D,Q,B),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class yc{constructor(r=0,c=0,m=0,v=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=m,this.right=v}interpolate(r,c,m){return c.top!=null&&r.top!=null&&(this.top=s.B.number(r.top,c.top,m)),c.bottom!=null&&r.bottom!=null&&(this.bottom=s.B.number(r.bottom,c.bottom,m)),c.left!=null&&r.left!=null&&(this.left=s.B.number(r.left,c.left,m)),c.right!=null&&r.right!=null&&(this.right=s.B.number(r.right,c.right,m)),this}getCenter(r,c){const m=s.ae((this.left+r-this.right)/2,0,r),v=s.ae((this.top+c-this.bottom)/2,0,c);return new s.P(m,v)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new yc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Is(w,r){if(!w.renderWorldCopies||w.lngRange)return;const c=r.lng-w.center.lng;r.lng+=c>180?-360:c<-180?360:0}function _a(w){return Math.max(0,Math.floor(w))}class Gs{constructor(r,c,m,v,I,T){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=c||0,this._maxZoom=m||22,this._minPitch=v??0,this._maxPitch=I??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new s.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=_a(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new yc,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,m){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=_a(this._zoom),this._scale=s.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new yc(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!m&&r.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=s.aL(r,-180,180)*Math.PI/180;var m,v,I,T,D,B,H,Q,re;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=y(),m=this._rotationMatrix,I=-this._bearingInRadians,T=(v=this._rotationMatrix)[0],D=v[1],B=v[2],H=v[3],Q=Math.sin(I),re=Math.cos(I),m[0]=T*re+B*Q,m[1]=D*re+H*Q,m[2]=T*-Q+B*re,m[3]=D*-Q+H*re)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=s.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return s.aM(this._fovInRadians)}setFov(r){r=s.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=s.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.getConstrained(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=s.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,m){this._unmodified=!1,this._edgeInsets.interpolate(r,c,m),this._constrain(),this._calcMatrices()}resize(r,c,m=!0){this._width=r,this._height=c,m&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new $([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,s.af])}getConstrained(r,c){return this._callbacks.getConstrained(r,c)}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{let m=r.x,v=r.y,I=r.x,T=r.y;for(const D of c)m=Math.min(m,D.x),v=Math.min(v,D.y),I=Math.max(I,D.x),T=Math.max(T,D.y);return[new s.P(m,v),new s.P(I,v),new s.P(I,T),new s.P(m,T),new s.P(m,v)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:m}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(m),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=s.ad(new Float64Array(16));s.M(r,r,[this._width/2,-this._height/2,1]),s.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=s.ad(new Float64Array(16)),s.M(r,r,[1,-1,1]),s.L(r,r,[-1,-1,0]),s.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,m,v){const I=m!==void 0?m:this.bearing,T=v=v!==void 0?v:this.pitch,D=s.$.fromLngLat(r,c),B=-Math.cos(s.ab(T)),H=Math.sin(s.ab(T)),Q=H*Math.sin(s.ab(I)),re=-H*Math.cos(s.ab(I));let ie=this.elevation;const fe=c-ie;let _e;B*fe>=0||Math.abs(B)<.1?(_e=1e4,ie=c+_e*B):_e=-fe/B;let De,ke,Re=s.aN(1,D.y),je=0;do{if(je+=1,je>10)break;ke=_e/Re,De=new s.$(D.x+Q*ke,D.y+re*ke),Re=1/De.meterInMercatorCoordinateUnits()}while(Math.abs(_e-ke*Re)>1e-12);return{center:De.toLngLat(),elevation:ie,zoom:s.ah(this.height/2/Math.tan(this.fovInRadians/2)/ke/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=s.ag(1,this.center.lat)*this.worldSize,m=this.cameraToCenterDistance/c,v=s.$.fromLngLat(this.center,this.elevation),I=ge(this.center,this.elevation,this.pitch,this.bearing,m);this._elevation=r;const T=this.calculateCenterFromCameraLngLatAlt(I.toLngLat(),s.aN(I.z,v.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=s.ag(1,this.center.lat)*this.worldSize;return ge(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/s.Z,1/c/s.Z]}}class ll{constructor(r,c){this.min=r,this.max=c,this.center=s.aO([],s.aP([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],m=s.aQ(this.min),v=s.aQ(this.max);for(let I=0;I<c.length;I++)m[I]=c[I]?this.min[I]:this.center[I],v[I]=c[I]?this.center[I]:this.max[I];return v[2]=this.max[2],new ll(m,v)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let m=0;m<r.planes.length;m++){const v=this.intersectsPlane(r.planes[m]);if(v===0)return 0;v===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],m=r[3];for(let v=0;v<3;v++)r[v]>0?(c+=r[v]*this.min[v],m+=r[v]*this.max[v]):(m+=r[v]*this.min[v],c+=r[v]*this.max[v]);return c>=0?2:m<0?0:1}}class mh{distanceToTile2d(r,c,m,v){const I=v.distanceX([r,c]),T=v.distanceY([r,c]);return Math.hypot(I,T)}getWrap(r,c,m){return m}getTileAABB(r,c,m,v){var I,T;let D=m,B=m;if(v.terrain){const Q=new s.Y(r.z,c,r.z,r.x,r.y),re=v.terrain.getMinMaxElevation(Q);D=(I=re.minElevation)!==null&&I!==void 0?I:m,B=(T=re.maxElevation)!==null&&T!==void 0?T:m}const H=1<<r.z;return new ll([c+r.x/H,r.y/H,D],[c+(r.x+1)/H,(r.y+1)/H,B])}allowVariableZoom(r,c){const m=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,v=s.ae(78.5-m/2,0,60);return!!c.terrain||r.pitch>v}allowWorldCopies(){return!0}recalculateCache(){}}class _i{constructor(r,c,m){this.points=r,this.planes=c,this.aabb=m}static fromInvProjectionMatrix(r,c=1,m=0){const v=Math.pow(2,m),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>{const Q=1/(H=s.at([],H,r))[3]/c*v;return s.aR(H,H,[Q,Q,1/H[3],Q])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(H=>{const Q=s.aS([],I[H[0]],I[H[1]]),re=s.aS([],I[H[2]],I[H[1]]),ie=s.aT([],s.aU([],Q,re)),fe=-s.aV(ie,I[H[1]]);return ie.concat(fe)}),D=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],B=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const H of I)for(let Q=0;Q<3;Q++)D[Q]=Math.min(D[Q],H[Q]),B[Q]=Math.max(B[Q],H[Q]);return new _i(I,T,new ll(D,B))}}class zo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,m=!0){this._helper.resize(r,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r,c,m,v,I){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Gs({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,D)=>this.getConstrained(T,D)},r,c,m,v,I),this._coveringTilesDetailsProvider=new mh}clone(){const r=new zo;return r.apply(this),r}apply(r,c,m){this._helper.apply(r,c,m)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new s.aW(0,r)];if(this._helper._renderWorldCopies){const m=this.screenPointToMercatorCoordinate(new s.P(0,0)),v=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,0)),I=this.screenPointToMercatorCoordinate(new s.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new s.P(0,this._helper._height)),D=Math.floor(Math.min(m.x,v.x,I.x,T.x)),B=Math.floor(Math.max(m.x,v.x,I.x,T.x)),H=1;for(let Q=D-H;Q<=B+H;Q++)Q!==0&&c.push(new s.aW(Q,r))}return c}getCameraFrustum(){return _i.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),m=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(m)}setLocationAtPoint(r,c){const m=s.ag(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(c,m),I=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,m),T=s.$.fromLngLat(r),D=new s.$(T.x-(v.x-I.x),T.y-(v.y-I.y));this.setCenter(D==null?void 0:D.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(s.$.fromLngLat(r),c.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(s.$.fromLngLat(r))}screenPointToLocation(r,c){var m;return(m=this.screenPointToMercatorCoordinate(r,c))===null||m===void 0?void 0:m.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const m=c.pointCoordinate(r);if(m!=null)return m}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const m=c||0,v=[r.x,r.y,0,1],I=[r.x,r.y,1,1];s.at(v,v,this._pixelMatrixInverse),s.at(I,I,this._pixelMatrixInverse);const T=v[3],D=I[3],B=v[1]/T,H=I[1]/D,Q=v[2]/T,re=I[2]/D,ie=Q===re?0:(m-Q)/(re-Q);return new s.$(s.B.number(v[0]/T,I[0]/D,ie)/this.worldSize,s.B.number(B,H,ie)/this.worldSize,m)}coordinatePoint(r,c=0,m=this._pixelMatrix){const v=[r.x*this.worldSize,r.y*this.worldSize,c,1];return s.at(v,v,m),new s.P(v[0]/v[3],v[1]/v[3])}getBounds(){const r=Math.max(0,this._helper._height/2-Xe(this));return new $().extend(this.screenPointToLocation(new s.P(0,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,r))).extend(this.screenPointToLocation(new s.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new s.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-Xe(this)}calculatePosMatrix(r,c=!1,m){var v;const I=(v=r.key)!==null&&v!==void 0?v:s.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),T=c?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(I)){const H=T.get(I);return m?H.f32:H.f64}const D=de(r,this.worldSize);s.N(D,c?this._alignedProjMatrix:this._viewProjMatrix,D);const B={f64:D,f32:new Float32Array(D)};return T.set(I,B),m?B.f32:B.f64}calculateFogMatrix(r){const c=r.key,m=this._fogMatrixCacheF32;if(m.has(c))return m.get(c);const v=de(r,this.worldSize);return s.N(v,this._fogMatrix,v),m.set(c,new Float32Array(v)),m.get(c)}getConstrained(r,c){c=s.ae(+c,this.minZoom,this.maxZoom);const m={center:new s.Q(r.lng,r.lat),zoom:c};let v=this._helper._lngRange;this._helper._renderWorldCopies||v!==null||(v=[-179.9999999999,180-1e-10]);const I=this.tileSize*s.ac(m.zoom);let T=0,D=I,B=0,H=I,Q=0,re=0;const{x:ie,y:fe}=this.size;if(this._helper._latRange){const We=this._helper._latRange;T=s.S(We[1])*I,D=s.S(We[0])*I,D-T<fe&&(Q=fe/(D-T))}v&&(B=s.aL(s.U(v[0])*I,0,I),H=s.aL(s.U(v[1])*I,0,I),H<B&&(H+=I),H-B<ie&&(re=ie/(H-B)));const{x:_e,y:De}=Wt(I,r);let ke,Re;const je=Math.max(re||0,Q||0);if(je){const We=new s.P(re?(H+B)/2:_e,Q?(D+T)/2:De);return m.center=wn(I,We).wrap(),m.zoom+=s.ah(je),m}if(this._helper._latRange){const We=fe/2;De-We<T&&(Re=T+We),De+We>D&&(Re=D-We)}if(v){const We=(B+H)/2;let Ke=_e;this._helper._renderWorldCopies&&(Ke=s.aL(_e,We-I/2,We+I/2));const Je=ie/2;Ke-Je<B&&(ke=B+Je),Ke+Je>H&&(ke=H-Je)}if(ke!==void 0||Re!==void 0){const We=new s.P(ke??_e,Re??De);m.center=wn(I,We).wrap()}return m}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}_calculateNearFarZIfNeeded(r,c,m){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),I=r-v*this._helper._pixelPerMeter/Math.cos(c),T=v<0?I:r,D=Math.PI/2+this.pitchInRadians,B=s.ab(this.fov)*(Math.abs(Math.cos(s.ab(this.roll)))*this.height+Math.abs(Math.sin(s.ab(this.roll)))*this.width)/this.height*(.5+m.y/this.height),H=Math.sin(B)*T/Math.sin(s.ae(Math.PI-D-B,.01,Math.PI-.01)),Q=Xe(this),re=Math.atan(Q/this._helper.cameraToCenterDistance),ie=s.ab(.75),fe=re>ie?2*re*(.5+m.y/(2*Q)):ie,_e=Math.sin(fe)*T/Math.sin(s.ae(Math.PI-D-fe,.01,Math.PI-.01)),De=Math.min(H,_e);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*De+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=Wt(this.worldSize,this.center),m=c.x,v=c.y;this._helper._pixelPerMeter=s.ag(1,this.center.lat)*this.worldSize;const I=s.ab(Math.min(this.pitch,Nt)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(I));let D;this._calculateNearFarZIfNeeded(T,I,r),D=new Float64Array(16),s.aY(D,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),s.an(this._invProjMatrix,D),D[8]=2*-r.x/this._helper._width,D[9]=2*r.y/this._helper._height,this._projectionMatrix=s.aZ(D),s.M(D,D,[1,-1,1]),s.L(D,D,[0,0,-this._helper.cameraToCenterDistance]),s.a_(D,D,-this.rollInRadians),s.a$(D,D,this.pitchInRadians),s.a_(D,D,-this.bearingInRadians),s.L(D,D,[-m,-v,0]),this._mercatorMatrix=s.M([],D,[this.worldSize,this.worldSize,this.worldSize]),s.M(D,D,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,D),s.L(D,D,[0,0,-this.elevation]),this._viewProjMatrix=D,this._invViewProjMatrix=s.an([],D);const B=[0,0,-1,1];s.at(B,B,this._invViewProjMatrix),this._cameraPosition=[B[0]/B[3],B[1]/B[3],B[2]/B[3]],this._fogMatrix=new Float64Array(16),s.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,s.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),s.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),s.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),s.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),s.L(this._fogMatrix,this._fogMatrix,[-m,-v,0]),s.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),s.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=s.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,D);const H=this._helper._width%2/2,Q=this._helper._height%2/2,re=Math.cos(this.bearingInRadians),ie=Math.sin(-this.bearingInRadians),fe=m-Math.round(m)+re*H+ie*Q,_e=v-Math.round(v)+re*Q+ie*H,De=new Float64Array(D);if(s.L(De,De,[fe>.5?fe-1:fe,_e>.5?_e-1:_e,0]),this._alignedProjMatrix=De,D=s.an(new Float64Array(16),this._pixelMatrix),!D)throw new Error("failed to invert matrix");this._pixelMatrixInverse=D,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new s.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return s.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=s.ag(1,this.center.lat)*this.worldSize;return ge(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const m=s.$.fromLngLat(r),v=[m.x*this.worldSize,m.y*this.worldSize,c,1];return s.at(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(r){const{overscaledTileID:c,aligned:m,applyTerrainMatrix:v}=r,I=this._helper.getMercatorTileCoordinates(c),T=c?this.calculatePosMatrix(c,m,!0):null;let D;return D=c&&c.terrainRttPosMatrix32f&&v?c.terrainRttPosMatrix32f:T||s.b0(),{mainMatrix:D,tileMercatorCoords:I,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:D}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,m){return 1}transformLightDirection(r){return s.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,m,v){const I=this.calculatePosMatrix(m);let T;v?(T=[r,c,v(r,c),1],s.at(T,T,I)):(T=[r,c,0,1],ai(T,T,I));const D=T[3];return{point:new s.P(T[0]/D,T[1]/D),signedDistanceFromCamera:D,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const m=s.$.fromLngLat(r,c),v=m.meterInMercatorCoordinateUnits(),I=s.b1();return s.L(I,I,[m.x,m.y,m.z]),s.a_(I,I,Math.PI),s.a$(I,I,Math.PI/2),s.M(I,I,[-v,v,v]),I}getProjectionDataForCustomLayer(r=!0){const c=new s.Y(0,0,0,0,0),m=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),v=de(c,this.worldSize);s.N(v,this._viewProjMatrix,v),m.tileMercatorCoords=[0,0,1,1];const I=[s.Z,s.Z,this.worldSize/this._helper.pixelsPerMeter],T=s.b2();return s.M(T,v,I),m.fallbackMatrix=T,m.mainMatrix=T,m}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function Hl(){s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Su(w){if(w.useSlerp)if(w.k<1){const r=s.b3(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=s.b3(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),m=new Float64Array(4);s.b4(m,r,c,w.k);const v=s.b5(m);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(s.B.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(s.B.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(s.B.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Ba(w,r,c,m,v){const I=v.padding,T=Wt(v.worldSize,c.getNorthWest()),D=Wt(v.worldSize,c.getNorthEast()),B=Wt(v.worldSize,c.getSouthEast()),H=Wt(v.worldSize,c.getSouthWest()),Q=s.ab(-m),re=T.rotate(Q),ie=D.rotate(Q),fe=B.rotate(Q),_e=H.rotate(Q),De=new s.P(Math.max(re.x,ie.x,_e.x,fe.x),Math.max(re.y,ie.y,_e.y,fe.y)),ke=new s.P(Math.min(re.x,ie.x,_e.x,fe.x),Math.min(re.y,ie.y,_e.y,fe.y)),Re=De.sub(ke),je=(v.width-(I.left+I.right+r.left+r.right))/Re.x,We=(v.height-(I.top+I.bottom+r.top+r.bottom))/Re.y;if(We<0||je<0)return void Hl();const Ke=Math.min(s.ah(v.scale*Math.min(je,We)),w.maxZoom),Je=s.P.convert(w.offset),at=new s.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(s.ab(m)),nt=Je.add(at).mult(v.scale/s.ac(Ke));return{center:wn(v.worldSize,T.add(B).div(2).sub(nt)),zoom:Ke,bearing:m}}class gh{get useGlobeControls(){return!1}handlePanInertia(r,c){return{easingOffset:r,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,m){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(m,r.around)}cameraForBoxAndBearing(r,c,m,v,I){return Ba(r,c,m,v,I)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(s.Q.convert(c.center))}handleEaseTo(r,c){const m=r.zoom,v=r.padding,I={roll:r.roll,pitch:r.pitch,bearing:r.bearing},T={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},D=c.zoom!==void 0,B=!r.isPaddingEqual(c.padding);let H=!1;const Q=D?+c.zoom:r.zoom;let re=r.centerPoint.add(c.offsetAsPoint);const ie=r.screenPointToLocation(re),{center:fe,zoom:_e}=r.getConstrained(s.Q.convert(c.center||ie),Q??m);Is(r,fe);const De=Wt(r.worldSize,ie),ke=Wt(r.worldSize,fe).sub(De),Re=s.ac(_e-m);return H=_e!==m,{easeFunc:je=>{if(H&&r.setZoom(s.B.number(m,_e,je)),s.b6(I,T)||Su({startEulerAngles:I,endEulerAngles:T,tr:r,k:je,useSlerp:I.roll!=T.roll}),B&&(r.interpolatePadding(v,c.padding,je),re=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const We=s.ac(r.zoom-m),Ke=_e>m?Math.min(2,Re):Math.max(.5,Re),Je=Math.pow(Ke,1-je),at=wn(r.worldSize,De.add(ke.mult(je*Je)).mult(We));r.setLocationAtPoint(r.renderWorldCopies?at.wrap():at,re)}},isZooming:H,elevationCenter:fe}}handleFlyTo(r,c){const m=c.zoom!==void 0,v=r.zoom,I=r.getConstrained(s.Q.convert(c.center||c.locationAtOffset),m?+c.zoom:v),T=I.center,D=I.zoom;Is(r,T);const B=Wt(r.worldSize,c.locationAtOffset),H=Wt(r.worldSize,T).sub(B),Q=H.mag(),re=s.ac(D-v);let ie;if(c.minZoom!==void 0){const fe=Math.min(+c.minZoom,v,D),_e=r.getConstrained(T,fe).zoom;ie=s.ac(_e-v)}return{easeFunc:(fe,_e,De,ke)=>{r.setZoom(fe===1?D:v+s.ah(_e));const Re=fe===1?T:wn(r.worldSize,B.add(H.mult(De)).mult(_e));r.setLocationAtPoint(r.renderWorldCopies?Re.wrap():Re,ke)},scaleOfZoom:re,targetCenter:T,scaleOfMinZoom:ie,pixelPathLength:Q}}}class Or{constructor(r,c,m){this.blendFunction=r,this.blendColor=c,this.mask=m}}Or.Replace=[1,0],Or.disabled=new Or(Or.Replace,s.b7.transparent,[!1,!1,!1,!1]),Or.unblended=new Or(Or.Replace,s.b7.transparent,[!0,!0,!0,!0]),Or.alphaBlended=new Or([1,771],s.b7.transparent,[!0,!0,!0,!0]);const ap=2305;class Er{constructor(r,c,m){this.enable=r,this.mode=c,this.frontFace=m}}Er.disabled=new Er(!1,1029,ap),Er.backCCW=new Er(!0,1029,ap),Er.frontCCW=new Er(!0,1028,ap);class Tn{constructor(r,c,m){this.func=r,this.mask=c,this.range=m}}Tn.ReadOnly=!1,Tn.ReadWrite=!0,Tn.disabled=new Tn(519,Tn.ReadOnly,[0,1]);const jr=7680;class br{constructor(r,c,m,v,I,T){this.test=r,this.ref=c,this.mask=m,this.fail=v,this.depthFail=I,this.pass=T}}br.disabled=new br({func:519,mask:0},0,0,jr,jr,jr);const yh=new WeakMap;function io(w){var r;if(yh.has(w))return yh.get(w);{const c=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return yh.set(w,c),c}}class vc{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,m=c.gl;this._texFormat=m.RGBA,this._texType=m.UNSIGNED_BYTE;const v=new s.aI;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const I=new s.aK;I.emplaceBack(0,1,2),this._fullscreenTriangle=new Mu(c.createVertexBuffer(v,Oo.members),c.createIndexBuffer(I),s.aJ.simpleSegment(0,0,v.length,I.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(m.TEXTURE1);const T=m.createTexture();m.bindTexture(m.TEXTURE_2D,T),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texImage2D(m.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),io(m)&&(this._pbo=m.createBuffer(),m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.bufferData(m.PIXEL_PACK_BUFFER,4,m.STREAM_READ),m.bindBuffer(m.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const m=this._updateCount;return this._readbackQueue?m>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():m>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const m=this._cachedRenderContext.context,v=m.gl;if(this._bindFramebuffer(),m.viewport.set([0,0,this._texWidth,this._texHeight]),m.clear({color:s.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(m,v.TRIANGLES,Tn.disabled,br.disabled,Or.unblended,Er.disabled,((I,T)=>({u_input:I,u_output_expected:T}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&io(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const I=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:I}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&io(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return s.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=vc._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const Ad=s.Z/128;function wd(w,r){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,m=c+(w.generateBorders?2:0),v=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),I=m+1,T=v+1,D=w.generateBorders?-1:0,B=w.generateBorders||w.extendToNorthPole?-1:0,H=c+(w.generateBorders?1:0),Q=c+(w.generateBorders||w.extendToSouthPole?1:0),re=I*T,ie=m*v*6,fe=I*T>65536;if(fe&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const _e=fe||r==="32bit",De=new Int16Array(2*re);let ke=0;for(let We=B;We<=Q;We++)for(let Ke=D;Ke<=H;Ke++){let Je=Ke/c*s.Z;Ke===-1&&(Je=-64),Ke===c+1&&(Je=s.Z+Ad);let at=We/c*s.Z;We===-1&&(at=w.extendToNorthPole?s.b9:-64),We===c+1&&(at=w.extendToSouthPole?s.ba:s.Z+Ad),De[ke++]=Je,De[ke++]=at}const Re=_e?new Uint32Array(ie):new Uint16Array(ie);let je=0;for(let We=0;We<v;We++)for(let Ke=0;Ke<m;Ke++){const Je=Ke+1+We*I,at=Ke+(We+1)*I,nt=Ke+1+(We+1)*I;Re[je++]=Ke+We*I,Re[je++]=at,Re[je++]=Je,Re[je++]=Je,Re[je++]=at,Re[je++]=nt}return{vertices:De.buffer.slice(0),indices:Re.buffer.slice(0),uses32bitIndices:_e}}const Eu=new s.aH({fill:new s.bb(128,2),line:new s.bb(512,0),tile:new s.bb(128,32),stencil:new s.bb(128,1),circle:3});class vh{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Jn.projectionGlobe}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return Eu}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new vc(r));const c=s.S(this._errorQueryLatitudeDegrees),m=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(c,m),I=M.now();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=I);const T=Math.min(Math.max((I-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=s.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,s.bd(T))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,m,v,I){const T=(I==="stencil"?Eu.stencil:Eu.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:T,generateBorders:m,extendToNorthPole:c.y===0&&v,extendToSouthPole:c.y===(1<<c.z)-1&&v})}_getMesh(r,c){const m=this._getMeshKey(c);if(m in this._tileMeshCache)return this._tileMeshCache[m];const v=function(I,T){const D=wd(T,"16bit"),B=s.aI.deserialize({arrayBuffer:D.vertices,length:D.vertices.byteLength/2/2}),H=s.aK.deserialize({arrayBuffer:D.indices,length:D.indices.byteLength/2/3});return new Mu(I.createVertexBuffer(B,Oo.members),I.createIndexBuffer(H),s.aJ.simpleSegment(0,0,B.length,H.length))}(r,c);return this._tileMeshCache[m]=v,v}recalculate(r){}hasTransition(){const r=M.now();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const Vi=new s.r({type:new s.D(s.v.projection.type)});class Cd extends s.E{constructor(r){super(),this._transitionable=new s.T(Vi),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.C(0)),this._mercatorProjection=new mi,this._verticalPerspectiveProjection=new vh}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof s.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,m,v,I){return this.currentProjection.getMeshFromTileID(r,c,m,v,I)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Fo(w){const r=Zs(w.worldSize,w.center.lat);return 2*Math.PI*r}function Tu(w,r,c,m,v){const I=1/(1<<v),T=r/s.Z*I+m*I,D=s.bg((w/s.Z*I+c*I)*Math.PI*2+Math.PI,2*Math.PI),B=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,H=Math.cos(B),Q=new Float64Array(3);return Q[0]=Math.sin(D)*H,Q[1]=Math.sin(B),Q[2]=Math.cos(D)*H,Q}function ds(w){return function(r,c){const m=Math.cos(c),v=new Float64Array(3);return v[0]=Math.sin(r)*m,v[1]=Math.sin(c),v[2]=Math.cos(r)*m,v}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Zs(w,r){return w/(2*Math.PI)/Math.cos(r*Math.PI/180)}function Ws(w){const r=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const m=w[0]/c,v=Math.acos(w[2]/c),I=(m>0?v:-v)/Math.PI*180;return new s.Q(s.aL(I,-180,180),r)}return new s.Q(0,r)}function Pu(w){return Math.cos(w*Math.PI/180)}function Xr(w,r){const c=Pu(w),m=Pu(r);return s.ah(m/c)}function _c(w,r){const c=w.rotate(r.bearingInRadians),m=r.zoom+Xr(r.center.lat,0),v=s.bc(1/Pu(r.center.lat),1/Pu(Math.min(Math.abs(r.center.lat),60)),s.bf(m,7,3,0,1)),I=360/Fo({worldSize:r.worldSize,center:{lat:r.center.lat}});return new s.Q(r.center.lng-c.x*I*v,s.ae(r.center.lat+c.y*I,-85.051129,s.af))}function _h(w){const r=.5*w,c=Math.sin(r),m=Math.cos(r);return Math.log(c+m)-Math.log(m-c)}function Id(w,r,c,m){const v=w.lat+c*m;if(Math.abs(c)>1){const I=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,T=Math.abs(w.lat+c)*Math.PI/180,D=_h(I+m*(T-I)),B=_h(I),H=_h(T);return new s.Q(w.lng+r*((D-B)/(H-B)),v)}return new s.Q(w.lng+r*m,v)}class fs{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,c,m,v){const I=`${r.z}_${r.x}_${r.y}`,T=this._cache.get(I);if(T)return T;const D=this._cachePrevious.get(I);if(D)return this._cache.set(I,D),D;const B=this._aabbFactory(r,c,m,v);return this._cache.set(I,B),this._hadAnyChanges=!0,B}}function Md(w,r,c){const m=w-r;return m<0?-m:Math.max(0,m-c)}function sa(w,r,c,m,v){const I=w-c;let T;return T=I<0?Math.min(-I,1+I-v):I>1?Math.min(Math.max(I-v,0),1-I):0,Math.max(T,Md(r,m,v))}class nv{constructor(){this._aabbCache=new fs(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,c,m,v){const I=1<<m.z,T=1/I,D=m.x/I,B=m.y/I;let H=2;return H=Math.min(H,sa(r,c,D,B,T)),H=Math.min(H,sa(r,c,D+.5,-B-T,T)),H=Math.min(H,sa(r,c,D+.5,2-B-T,T)),H}getWrap(r,c,m){const v=1<<c.z,I=1/v,T=c.x/v,D=Md(r.x,T,I),B=Md(r.x,T-1,I),H=Md(r.x,T+1,I),Q=Math.min(D,B,H);return Q===H?1:Q===B?-1:0}allowVariableZoom(r,c){return ht(r,c)>4}allowWorldCopies(){return!1}getTileAABB(r,c,m,v){return this._aabbCache.getTileAABB(r,c,m,v)}_computeTileAABB(r,c,m,v){if(r.z<=0)return new ll([-1,-1,-1],[1,1,1]);if(r.z===1)return new ll([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{const I=[Tu(0,0,r.x,r.y,r.z),Tu(s.Z,0,r.x,r.y,r.z),Tu(s.Z,s.Z,r.x,r.y,r.z),Tu(0,s.Z,r.x,r.y,r.z)],T=[1,1,1],D=[-1,-1,-1];for(const B of I)for(let H=0;H<3;H++)T[H]=Math.min(T[H],B[H]),D[H]=Math.max(D[H],B[H]);if(r.y===0||r.y===(1<<r.z)-1){const B=[0,r.y===0?1:-1,0];for(let H=0;H<3;H++)T[H]=Math.min(T[H],B[H]),D[H]=Math.max(D[H],B[H])}return new ll(T,D)}}}class bh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=s.bk(),this._projectionMatrix=s.b1(),this._globeViewProjMatrix32f=s.b0(),this._globeViewProjMatrixNoCorrection=s.b1(),this._globeViewProjMatrixNoCorrectionInverted=s.b1(),this._globeProjMatrixInverted=s.b1(),this._cameraPosition=s.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Gs({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._coveringTilesDetailsProvider=new nv}clone(){const r=new bh;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=s.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:m}=r,v=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:m?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,m=this.cameraToCenterDistance/r,v=Math.sin(c)*m,I=Math.cos(c)*m+1,T=1/Math.sqrt(v*v+I*I)*1;let D=-v,B=I;const H=Math.sqrt(D*D+B*B);D/=H,B/=H;const Q=[0,D,B];s.bl(Q,Q,[0,0,0],-this.bearingInRadians),s.bm(Q,Q,[0,0,0],-1*this.center.lat*Math.PI/180),s.bn(Q,Q,[0,0,0],this.center.lng*Math.PI/180);const re=1/s.bo(Q);return s.aO(Q,Q,re),[...Q,-T*re]}isLocationOccluded(r){return!this.isSurfacePointVisible(ds(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,m=this._helper._center.lat*Math.PI/180,v=Math.cos(m),I=[Math.sin(c)*v,Math.sin(m),Math.cos(c)*v],T=[I[2],0,-I[0]],D=[0,0,0];s.aU(D,T,I),s.aT(T,T),s.aT(D,D);const B=[0,0,0];return s.aT(B,[T[0]*r[0]+D[0]*r[1]+I[0]*r[2],T[1]*r[0]+D[1]*r[1]+I[1]*r[2],T[2]*r[0]+D[2]*r[1]+I[2]*r[2]]),B}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,m){const v=function(D,B,H){const Q=1/(1<<H.z);return new s.$(D/s.Z*Q+H.x*Q,B/s.Z*Q+H.y*Q)}(r,c,m.canonical),I=(T=v.y,[s.bg(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(I[1])}projectTileCoordinates(r,c,m,v){const I=m.canonical,T=Tu(r,c,I.x,I.y,I.z),D=1+(v?v(r,c):0)/s.bu,B=[T[0]*D,T[1]*D,T[2]*D,1];s.at(B,B,this._globeViewProjMatrixNoCorrection);const H=this._cachedClippingPlane,Q=H[0]*T[0]+H[1]*T[1]+H[2]*T[2]+H[3]<0;return{point:new s.P(B[0]/B[3],B[1]/B[3]),signedDistanceFromCamera:B[3],isOccluded:Q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Zs(this.worldSize,this.center.lat),c=s.b2(),m=s.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),s.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;c[8]=2*-v.x/this._helper._width,c[9]=2*v.y/this._helper._height,this._projectionMatrix=s.aZ(c),this._globeProjMatrixInverted=s.b2(),s.an(this._globeProjMatrixInverted,c),s.L(c,c,[0,0,-this.cameraToCenterDistance]),s.a_(c,c,this.rollInRadians),s.a$(c,c,-this.pitchInRadians),s.a_(c,c,this.bearingInRadians),s.L(c,c,[0,0,-r]);const I=s.bh();I[0]=r,I[1]=r,I[2]=r,s.a$(m,c,this.center.lat*Math.PI/180),s.bp(m,m,-this.center.lng*Math.PI/180),s.M(m,m,I),this._globeViewProjMatrixNoCorrection=m,s.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),s.bp(c,c,-this.center.lng*Math.PI/180),s.M(c,c,I),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=s.b2(),s.an(this._globeViewProjMatrixNoCorrectionInverted,m);const T=s.bh();this._cameraPosition=s.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,s.bl(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),s.bm(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),s.bl(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),s.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),s.bm(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),s.bn(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const D=s.aZ(this._globeViewProjMatrixNoCorrectionInverted);s.M(D,D,[1,1,-1]),this._cachedFrustum=_i.fromInvProjectionMatrix(D)}calculateFogMatrix(r){s.w("calculateFogMatrix is not supported on globe projection.");const c=s.b2();return s.ad(c),c}getVisibleUnwrappedCoordinates(r){return[new s.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&s.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const m=ds(r);s.aO(m,m,1+c/s.bu);const v=s.bk();return s.at(v,[m[0],m[1],m[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,m=[new s.P(0,0),new s.P(r,0),new s.P(this.width,0),new s.P(this.width,c),new s.P(this.width,this.height),new s.P(r,this.height),new s.P(0,this.height),new s.P(0,c)],v=[];for(const re of m)v.push(this.unprojectScreenPoint(re));let I=0,T=0,D=0,B=0;const H=this.center;for(const re of v){const ie=s.bq(H.lng,re.lng),fe=s.bq(H.lat,re.lat);ie<T&&(T=ie),ie>I&&(I=ie),fe<B&&(B=fe),fe>D&&(D=fe)}const Q=[H.lng+T,H.lat+B,H.lng+I,H.lat+D];return this.isSurfacePointOnScreen([0,1,0])&&(Q[3]=90,Q[0]=-180,Q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Q[1]=-90,Q[0]=-180,Q[2]=180),new $(Q)}getConstrained(r,c){const m=s.ae(r.lat,-85.051129,s.af),v=s.ae(+c,this.minZoom+Xr(0,m),this.maxZoom);return{center:new s.Q(r.lng,m),zoom:v}}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}setLocationAtPoint(r,c){const m=ds(this.unprojectScreenPoint(c)),v=ds(r),I=s.bh();s.br(I);const T=s.bh();s.bn(T,m,I,-this.center.lng*Math.PI/180),s.bm(T,T,I,this.center.lat*Math.PI/180);const D=v[0]*v[0]+v[2]*v[2],B=T[0]*T[0];if(D<B)return;const H=Math.sqrt(D-B),Q=-H,re=s.bs(v[0],v[2],T[0],H),ie=s.bs(v[0],v[2],T[0],Q),fe=s.bh();s.bn(fe,v,I,-re);const _e=s.bs(fe[1],fe[2],T[1],T[2]),De=s.bh();s.bn(De,v,I,-ie);const ke=s.bs(De[1],De[2],T[1],T[2]),Re=.5*Math.PI,je=_e>=-Re&&_e<=Re,We=ke>=-Re&&ke<=Re;let Ke,Je;if(je&&We){const Ct=this.center.lng*Math.PI/180,vt=this.center.lat*Math.PI/180;s.bv(re,Ct)+s.bv(_e,vt)<s.bv(ie,Ct)+s.bv(ke,vt)?(Ke=re,Je=_e):(Ke=ie,Je=ke)}else if(je)Ke=re,Je=_e;else{if(!We)return;Ke=ie,Je=ke}const at=Ke/Math.PI*180,nt=Je/Math.PI*180,xt=this.center.lat;this.setCenter(new s.Q(at,s.ae(nt,-90,90))),this.setZoom(this.zoom+Xr(xt,this.center.lat))}locationToScreenPoint(r,c){const m=ds(r);if(c){const v=c.getElevationForLngLatZoom(r,this._helper._tileZoom);s.aO(m,m,1+v/s.bu)}return this._projectSurfacePointToScreen(m)}_projectSurfacePointToScreen(r){const c=s.bk();return s.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new s.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const m=c.pointCoordinate(r);if(m)return m}return s.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var m;return(m=this.screenPointToMercatorCoordinate(r,c))===null||m===void 0?void 0:m.toLngLat()}isPointOnMapSurface(r,c){const m=this._cameraPosition,v=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(m,v)}getRayDirectionFromPixel(r){const c=s.bk();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,s.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const m=s.bh();m[0]=c[0]-this._cameraPosition[0],m[1]=c[1]-this._cameraPosition[1],m[2]=c[2]-this._cameraPosition[2];const v=s.bh();return s.aT(v,m),v}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=s.bk();return s.at(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const m=s.aV(r,c),v=s.bh(),I=s.bh();s.aO(I,c,m),s.aS(v,r,I);const T=1-s.aV(v,v);if(T<0)return null;const D=s.aV(r,r)-1,B=-m+(m<0?1:-1)*Math.sqrt(T),H=D/B,Q=B;return{tMin:Math.min(H,Q),tMax:Math.max(H,Q)}}unprojectScreenPoint(r){const c=this._cameraPosition,m=this.getRayDirectionFromPixel(r),v=this.rayPlanetIntersection(c,m);if(v){const Q=s.bh();s.aP(Q,c,[m[0]*v.tMin,m[1]*v.tMin,m[2]*v.tMin]);const re=s.bh();return s.aT(re,Q),Ws(re)}const I=this._cachedClippingPlane,T=I[0]*m[0]+I[1]*m[1]+I[2]*m[2],D=-s.bt(I,c)/T,B=s.bh();if(D>0)s.aP(B,c,[m[0]*D,m[1]*D,m[2]*D]);else{const Q=s.bh();s.aP(Q,c,[2*m[0],2*m[1],2*m[2]]);const re=s.bt(this._cachedClippingPlane,Q);s.aS(B,Q,[this._cachedClippingPlane[0]*re,this._cachedClippingPlane[1]*re,this._cachedClippingPlane[2]*re])}const H=function(Q){const re=s.bh();return re[0]=Q[0]*-Q[3],re[1]=Q[1]*-Q[3],re[2]=Q[2]*-Q[3],{center:re,radius:Math.sqrt(1-Q[3]*Q[3])}}(I);return Ws(function(Q,re,ie){const fe=s.bh();s.aS(fe,ie,Q);const _e=s.bh();return s.bi(_e,Q,fe,re/s.bj(fe)),_e}(H.center,H.radius,B))}getMatrixForModel(r,c){const m=s.Q.convert(r),v=1/s.bu,I=s.b1();return s.bp(I,I,m.lng/180*Math.PI),s.a$(I,I,-m.lat/180*Math.PI),s.L(I,I,[0,0,1+c/s.bu]),s.a$(I,I,.5*Math.PI),s.M(I,I,[v,v,v]),I}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new s.Y(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class so{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,m){return this._helper.interpolatePadding(r,c,m)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,m=!0){this._helper.resize(r,c,m)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Gs({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,c)=>this.getConstrained(r,c)}),this._globeness=1,this._mercatorTransform=new zo,this._verticalPerspectiveTransform=new bh}clone(){const r=new so;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),m=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?m.mainMatrix:c.mainMatrix,clippingPlane:m.clippingPlane,tileMercatorCoords:m.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return s.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return s.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,m){const v=this._mercatorTransform.getPitchedTextCorrection(r,c,m),I=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,m);return s.bc(v,I,this._globeness)}projectTileCoordinates(r,c,m,v){return this.currentTransform.projectTileCoordinates(r,c,m,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,c){return this.currentTransform.getConstrained(r,c)}calculateCenterFromCameraLngLatAlt(r,c,m,v){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,m,v)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const m=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return m.fallbackMatrix=c.mainMatrix,m}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class aa{get useGlobeControls(){return!0}handlePanInertia(r,c){const m=_c(r,c);return Math.abs(m.lng-c.center.lng)>180&&(m.lng=c.center.lng+179.5*Math.sign(m.lng-c.center.lng)),{easingCenter:m,easingOffset:new s.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const m=r.around,v=c.screenPointToLocation(m);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const I=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const T=c.zoom-I;if(T===0)return;const D=s.bq(c.center.lng,v.lng),B=D/(Math.abs(D/180)+1),H=s.bq(c.center.lat,v.lat),Q=c.getRayDirectionFromPixel(m),re=c.cameraPosition,ie=-1*s.aV(re,Q),fe=s.bh();s.aP(fe,re,[Q[0]*ie,Q[1]*ie,Q[2]*ie]);const _e=s.bo(fe)-1,De=Math.exp(.5*-Math.max(_e-.3,0)),ke=Zs(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Re=s.bf(ke,.9,.5,1,.25),je=(1-s.ac(-T))*Math.min(De,Re),We=c.center.lat,Ke=c.zoom,Je=new s.Q(c.center.lng+B*je,s.ae(c.center.lat+H*je,-85.051129,s.af));c.setLocationAtPoint(v,m);const at=c.center,nt=s.bf(Math.abs(D),45,85,0,1),xt=s.bf(ke,.75,.35,0,1),Ct=Math.pow(Math.max(nt,xt),.25),vt=s.bq(at.lng,Je.lng),jt=s.bq(at.lat,Je.lat);c.setCenter(new s.Q(at.lng+vt*Ct,at.lat+jt*Ct).wrap()),c.setZoom(Ke+Xr(We,c.center.lat))}handleMapControlsPan(r,c,m){if(!r.panDelta)return;const v=c.center.lat,I=c.zoom;c.setCenter(_c(r.panDelta,c).wrap()),c.setZoom(I+Xr(v,c.center.lat))}cameraForBoxAndBearing(r,c,m,v,I){const T=Ba(r,c,m,v,I),D=c.left/I.width*2-1,B=(I.width-c.right)/I.width*2-1,H=c.top/I.height*-2+1,Q=(I.height-c.bottom)/I.height*-2+1,re=s.bq(m.getWest(),m.getEast())<0,ie=re?m.getEast():m.getWest(),fe=re?m.getWest():m.getEast(),_e=Math.max(m.getNorth(),m.getSouth()),De=Math.min(m.getNorth(),m.getSouth()),ke=ie+.5*s.bq(ie,fe),Re=_e+.5*s.bq(_e,De),je=I.clone();je.setCenter(T.center),je.setBearing(T.bearing),je.setPitch(0),je.setRoll(0),je.setZoom(T.zoom);const We=je.modelViewProjectionMatrix,Ke=[ds(m.getNorthWest()),ds(m.getNorthEast()),ds(m.getSouthWest()),ds(m.getSouthEast()),ds(new s.Q(fe,Re)),ds(new s.Q(ie,Re)),ds(new s.Q(ke,_e)),ds(new s.Q(ke,De))],Je=ds(T.center);let at=Number.POSITIVE_INFINITY;for(const nt of Ke)D<0&&(at=aa.getLesserNonNegativeNonNull(at,aa.solveVectorScale(nt,Je,We,"x",D))),B>0&&(at=aa.getLesserNonNegativeNonNull(at,aa.solveVectorScale(nt,Je,We,"x",B))),H>0&&(at=aa.getLesserNonNegativeNonNull(at,aa.solveVectorScale(nt,Je,We,"y",H))),Q<0&&(at=aa.getLesserNonNegativeNonNull(at,aa.solveVectorScale(nt,Je,We,"y",Q)));if(Number.isFinite(at)&&at!==0)return T.zoom=je.zoom+s.ah(at),T;Hl()}handleJumpToCenterZoom(r,c){const m=r.center.lat,v=r.getConstrained(c.center?s.Q.convert(c.center):r.center,r.zoom).center;r.setCenter(v.wrap());const I=c.zoom!==void 0?+c.zoom:r.zoom+Xr(m,v.lat);r.zoom!==I&&r.setZoom(I)}handleEaseTo(r,c){const m=r.zoom,v=r.center,I=r.padding,T={roll:r.roll,pitch:r.pitch,bearing:r.bearing},D={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},B=c.zoom!==void 0,H=!r.isPaddingEqual(c.padding);let Q=!1;const re=c.center?s.Q.convert(c.center):v,ie=r.getConstrained(re,m).center;Is(r,ie);const fe=r.clone();fe.setCenter(ie),fe.setZoom(B?+c.zoom:m+Xr(v.lat,re.lat)),fe.setBearing(c.bearing);const _e=new s.P(s.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),s.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));fe.setLocationAtPoint(ie,_e);const De=(c.offset&&c.offsetAsPoint.mag())>0?fe.center:ie,ke=B?+c.zoom:m+Xr(v.lat,De.lat),Re=m+Xr(v.lat,0),je=ke+Xr(De.lat,0),We=s.bq(v.lng,De.lng),Ke=s.bq(v.lat,De.lat),Je=s.ac(je-Re);return Q=ke!==m,{easeFunc:at=>{if(s.b6(T,D)||Su({startEulerAngles:T,endEulerAngles:D,tr:r,k:at,useSlerp:T.roll!=D.roll}),H&&r.interpolatePadding(I,c.padding,at),c.around)s.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const nt=je>Re?Math.min(2,Je):Math.max(.5,Je),xt=Math.pow(nt,1-at),Ct=Id(v,We,Ke,at*xt);r.setCenter(Ct.wrap())}if(Q){const nt=s.B.number(Re,je,at)+Xr(0,r.center.lat);r.setZoom(nt)}},isZooming:Q,elevationCenter:De}}handleFlyTo(r,c){const m=c.zoom!==void 0,v=r.center,I=r.zoom,T=r.padding,D=!r.isPaddingEqual(c.padding),B=r.getConstrained(s.Q.convert(c.center||c.locationAtOffset),I).center,H=m?+c.zoom:r.zoom+Xr(r.center.lat,B.lat),Q=r.clone();Q.setCenter(B),Q.setZoom(H),Q.setBearing(c.bearing);const re=new s.P(s.ae(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),s.ae(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));Q.setLocationAtPoint(B,re);const ie=Q.center;Is(r,ie);const fe=function(Ke,Je,at){const nt=ds(Je),xt=ds(at),Ct=s.aV(nt,xt),vt=Math.acos(Ct),jt=Fo(Ke);return vt/(2*Math.PI)*jt}(r,v,ie),_e=I+Xr(v.lat,0),De=H+Xr(ie.lat,0),ke=s.ac(De-_e);let Re;if(typeof c.minZoom=="number"){const Ke=+c.minZoom+Xr(ie.lat,0),Je=Math.min(Ke,_e,De)+Xr(0,ie.lat),at=r.getConstrained(ie,Je).zoom+Xr(ie.lat,0);Re=s.ac(at-_e)}const je=s.bq(v.lng,ie.lng),We=s.bq(v.lat,ie.lat);return{easeFunc:(Ke,Je,at,nt)=>{const xt=Id(v,je,We,at);D&&r.interpolatePadding(T,c.padding,Ke);const Ct=Ke===1?ie:xt;r.setCenter(Ct.wrap());const vt=_e+s.ah(Je);r.setZoom(Ke===1?H:vt+Xr(0,Ct.lat))},scaleOfZoom:ke,targetCenter:ie,scaleOfMinZoom:Re,pixelPathLength:fe}}static solveVectorScale(r,c,m,v,I){const T=v==="x"?[m[0],m[4],m[8],m[12]]:[m[1],m[5],m[9],m[13]],D=[m[3],m[7],m[11],m[15]],B=r[0]*T[0]+r[1]*T[1]+r[2]*T[2],H=r[0]*D[0]+r[1]*D[1]+r[2]*D[2],Q=c[0]*T[0]+c[1]*T[1]+c[2]*T[2],re=c[0]*D[0]+c[1]*D[1]+c[2]*D[2];return Q+I*H===B+I*re||D[3]*(B-Q)+T[3]*(re-H)+B*re==Q*H?null:(Q+T[3]-I*re-I*D[3])/(Q-B-I*re+I*H)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class ku{constructor(r){this._globe=r,this._mercatorCameraHelper=new gh,this._verticalPerspectiveCameraHelper=new aa}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,m){this.currentHelper.handleMapControlsPan(r,c,m)}cameraForBoxAndBearing(r,c,m,v,I){return this.currentHelper.cameraForBoxAndBearing(r,c,m,v,I)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const qr=(w,r)=>s.x(w,r&&r.filter(c=>c.identifier!=="source.canvas")),ao=s.bw();class Lu extends s.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const m in this.sourceCaches){const v=this.sourceCaches[m].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[m].reload()}},this.map=r,this.dispatcher=new gt(un(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(m,v)=>this.getGlyphs(m,v)),this.dispatcher.registerMessageHandler("GI",(m,v)=>this.getImages(m,v)),this.imageManager=new ee,this.imageManager.setEventedParent(this),this.glyphManager=new K(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Zt(256,512),this.crossTileSymbolIndex=new ro,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.by()),fn().on(At,this._rtlPluginLoaded),this.on("data",m=>{if(m.dataType!=="source"||m.sourceDataType!=="metadata")return;const v=this.sourceCaches[m.sourceId];if(!v)return;const I=v.getSource();if(I&&I.vectorLayerIds)for(const T in this._layers){const D=this._layers[T];D.source===I.id&&this._validateLayer(D)}})}loadURL(r,c={},m){this.fire(new s.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const v=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const I=this._loadStyleRequest;s.j(v,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,c,m)}).catch(T=>{this._loadStyleRequest=null,T&&!I.signal.aborted&&this.fire(new s.k(T))})}loadJSON(r,c={},m){this.fire(new s.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,M.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,m)}).catch(()=>{})}loadEmpty(){this.fire(new s.l("dataloading",{dataType:"style"})),this._load(ao,{validate:!1})}_load(r,c,m){var v,I;const T=c.transformStyle?c.transformStyle(m,r):r;if(!c.validate||!qr(this,s.y(T))){this._loaded=!0,this.stylesheet=T;for(const D in T.sources)this.addSource(D,T.sources[D],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new Ne(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new ot(this.stylesheet.sky),this.map.setTerrain((I=this.stylesheet.terrain)!==null&&I!==void 0?I:null),this.fire(new s.l("data",{dataType:"style"})),this.fire(new s.l("style.load"))}}_createLayers(){const r=s.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const m=s.bA(c);m.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=m}}_loadSprite(r,c=!1,m=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(I,T,D,B){return s._(this,void 0,void 0,function*(){const H=ne(I),Q=D>1?"@2x":"",re={},ie={};for(const{id:fe,url:_e}of H){const De=T.transformRequest(X(_e,Q,".json"),"SpriteJSON");re[fe]=s.j(De,B);const ke=T.transformRequest(X(_e,Q,".png"),"SpriteImage");ie[fe]=U.getImage(ke,B)}return yield Promise.all([...Object.values(re),...Object.values(ie)]),function(fe,_e){return s._(this,void 0,void 0,function*(){const De={};for(const ke in fe){De[ke]={};const Re=M.getImageCanvasContext((yield _e[ke]).data),je=(yield fe[ke]).data;for(const We in je){const{width:Ke,height:Je,x:at,y:nt,sdf:xt,pixelRatio:Ct,stretchX:vt,stretchY:jt,content:zt,textFitWidth:ln,textFitHeight:nn}=je[We];De[ke][We]={data:null,pixelRatio:Ct,sdf:xt,stretchX:vt,stretchY:jt,content:zt,textFitWidth:ln,textFitHeight:nn,spriteData:{width:Ke,height:Je,x:at,y:nt,context:Re}}}}return De})}(re,ie)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(I=>{if(this._spriteRequest=null,I)for(const T in I){this._spritesImagesIds[T]=[];const D=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(B=>!(B in I)):[];for(const B of D)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in I[T]){const H=T==="default"?B:`${T}:${B}`;this._spritesImagesIds[T].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,I[T][B],!1):this.imageManager.addImage(H,I[T][B]),c&&(this._changedImages[H]=!0)}}}).catch(I=>{this._spriteRequest=null,v=I,this.fire(new s.k(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"})),m&&m(v)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const m=r.sourceLayer;if(!m)return;const v=c.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.k(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const m=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?s.bB(m):m);const v=[];for(const I of r)if(m[I]){const T=c?s.bB(m[I]):m[I];v.push(T)}return v}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const m of c){const v=this._layers[m];v.type!=="custom"&&(r[m]=v.serialize())}return r}hasTransitions(){var r,c,m;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((m=this.projection)===null||m===void 0)&&m.hasTransition())return!0;for(const v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const v=Object.keys(this._updatedLayers),I=Object.keys(this._removedLayers);(v.length||I.length)&&this._updateWorkerLayers(v,I);for(const T in this._updatedSources){const D=this._updatedSources[T];if(D==="reload")this._reloadSource(T);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const I=this.sourceCaches[v];m[v]=I.used,I.used=!1}for(const v of this._order){const I=this._layers[v];I.recalculate(r,this._availableImages),!I.isHidden(r.zoom)&&I.source&&(this.sourceCaches[I.source].used=!0)}for(const v in m){const I=this.sourceCaches[v];!!m[v]!=!!I.used&&I.fire(new s.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new s.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var m;this._checkLoaded();const v=this.serialize();if(r=c.transformStyle?c.transformStyle(v,r):r,((m=c.validate)===null||m===void 0||m)&&qr(this,s.y(r)))return!1;(r=s.bB(r)).layers=s.bz(r.layers);const I=s.bC(v,r),T=this._getOperationsToPerform(I);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const D of T.operations)D();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],m=[];for(const v of r)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":c.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":c.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setSky":c.push(()=>this.setSky.apply(this,v.args));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setTransition":c.push(()=>{});break;default:m.push(v.command)}return{operations:c,unimplemented:m}}addImage(r,c){if(this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new s.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,m={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.y.source,`sources.${r}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const v=this.sourceCaches[r]=new St(r,c,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:r})),v.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===r)return this.fire(new s.k(new Error(`Source "${r}" cannot be removed while layer "${m}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new s.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const m=this.sourceCaches[r].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,m={}){this._checkLoaded();const v=r.id;if(this.getLayer(v))return void this.fire(new s.k(new Error(`Layer "${v}" already exists on this map.`)));let I;if(r.type==="custom"){if(qr(this,s.bD(r)))return;I=s.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(v,r.source),r=s.bB(r),r=s.e(r,{source:v})),this._validate(s.y.layer,`layers.${v}`,r,{arrayIndex:-1},m))return;I=s.bA(r),this._validateLayer(I),I.setEventedParent(this,{layer:{id:v}})}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)this.fire(new s.k(new Error(`Cannot add layer "${v}" before non-existing layer "${c}".`)));else{if(this._order.splice(T,0,v),this._layerOrderChanged=!0,this._layers[v]=I,this._removedLayers[v]&&I.source&&I.type!=="custom"){const D=this._removedLayers[v];delete this._removedLayers[v],D.type!==I.type?this._updatedSources[I.source]="clear":(this._updatedSources[I.source]="reload",this.sourceCaches[I.source].pause())}this._updateLayer(I),I.onAdd&&I.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new s.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const m=this._order.indexOf(r);this._order.splice(m,1);const v=c?this._order.indexOf(c):this._order.length;c&&v===-1?this.fire(new s.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(v,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new s.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const m=this._order.indexOf(r);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,m){this._checkLoaded();const v=this.getLayer(r);v?v.minzoom===c&&v.maxzoom===m||(c!=null&&(v.minzoom=c),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new s.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,m={}){this._checkLoaded();const v=this.getLayer(r);if(v){if(!s.bE(v.filter,c))return c==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(s.y.filter,`layers.${v.id}.filter`,c,null,m)||(v.filter=s.bB(c),this._updateLayer(v)))}else this.fire(new s.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return s.bB(this.getLayer(r).filter)}setLayoutProperty(r,c,m,v={}){this._checkLoaded();const I=this.getLayer(r);I?s.bE(I.getLayoutProperty(c),m)||(I.setLayoutProperty(c,m,v),this._updateLayer(I)):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const m=this.getLayer(r);if(m)return m.getLayoutProperty(c);this.fire(new s.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,m,v={}){this._checkLoaded();const I=this.getLayer(r);I?s.bE(I.getPaintProperty(c),m)||(I.setPaintProperty(c,m,v)&&this._updateLayer(I),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new s.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const m=r.source,v=r.sourceLayer,I=this.sourceCaches[m];if(I===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const T=I.getSource().type;T==="geojson"&&v?this.fire(new s.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||v?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),I.setFeatureState(v,r.id,c)):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const m=r.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new s.k(new Error(`The source '${m}' does not exist in the map's style.`)));const I=v.getSource().type,T=I==="vector"?r.sourceLayer:void 0;I!=="vector"||T?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new s.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(T,r.id,c):this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,m=r.sourceLayer,v=this.sourceCaches[c];if(v!==void 0)return v.getSource().type!=="vector"||m?(r.id===void 0&&this.fire(new s.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,r.id)):void this.fire(new s.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=s.bF(this.sourceCaches,I=>I.serialize()),c=this._serializeByIds(this._order,!0),m=this.map.getTerrain()||void 0,v=this.stylesheet;return s.bG({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:r,layers:c,terrain:m},I=>I!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=T=>this._layers[T].type==="fill-extrusion",m={},v=[];for(let T=this._order.length-1;T>=0;T--){const D=this._order[T];if(c(D)){m[D]=T;for(const B of r){const H=B[D];if(H)for(const Q of H)v.push(Q)}}}v.sort((T,D)=>D.intersectionZ-T.intersectionZ);const I=[];for(let T=this._order.length-1;T>=0;T--){const D=this._order[T];if(c(D))for(let B=v.length-1;B>=0;B--){const H=v[B].feature;if(m[H.layer.id]<T)break;I.push(H),v.pop()}else for(const B of r){const H=B[D];if(H)for(const Q of H)I.push(Q.feature)}}return I}queryRenderedFeatures(r,c,m){c&&c.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);const v={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new s.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const H of c.layers){const Q=this._layers[H];if(!Q)return this.fire(new s.k(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];v[Q.source]=!0}}const I=[];c.availableImages=this._availableImages;const T=this._serializedAllLayers(),D=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,B=Object.assign(Object.assign({},c),{layers:D});for(const H in this.sourceCaches)c.layers&&!v[H]||I.push(Pt(this.sourceCaches[H],this._layers,T,r,B,m,this.map.terrain?(Q,re,ie)=>this.map.terrain.getElevation(Q,re,ie):void 0));return this.placement&&I.push(function(H,Q,re,ie,fe,_e,De){const ke={},Re=_e.queryRenderedSymbols(ie),je=[];for(const We of Object.keys(Re).map(Number))je.push(De[We]);je.sort(Lt);for(const We of je){const Ke=We.featureIndex.lookupSymbolFeatures(Re[We.bucketInstanceId],Q,We.bucketIndex,We.sourceLayerIndex,fe.filter,fe.layers,fe.availableImages,H);for(const Je in Ke){const at=ke[Je]=ke[Je]||[],nt=Ke[Je];nt.sort((xt,Ct)=>{const vt=We.featureSortOrder;if(vt){const jt=vt.indexOf(xt.featureIndex);return vt.indexOf(Ct.featureIndex)-jt}return Ct.featureIndex-xt.featureIndex});for(const xt of nt)at.push(xt)}}return function(We,Ke,Je){for(const at in We)for(const nt of We[at])on(nt,Je[Ke[at].source]);return We}(ke,H,re)}(this._layers,T,this.sourceCaches,r,B,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(I)}querySourceFeatures(r,c){c&&c.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",c.filter,null,c);const m=this.sourceCaches[r];return m?function(v,I){const T=v.getRenderableIds().map(H=>v.getTileByID(H)),D=[],B={};for(let H=0;H<T.length;H++){const Q=T[H],re=Q.tileID.canonical.key;B[re]||(B[re]=!0,Q.querySourceFeatures(D,I))}return D}(m,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const T in r)if(!s.bE(r[T],m[T])){v=!0;break}if(!v)return;const I={now:M.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(I)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const m=this.getSky();let v=!1;if(!r&&!m)return;if(r&&!m)v=!0;else if(!r&&m)v=!0;else for(const T in r)if(!s.bE(r[T],m[T])){v=!0;break}if(!v)return;const I={now:M.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(I)}_setProjectionInternal(r){const c=function(m){if(Array.isArray(m)){const v=new Cd({type:m});return{projection:v,transform:new so,cameraHelper:new ku(v)}}switch(m){case"mercator":return{projection:new mi,transform:new zo,cameraHelper:new gh};case"globe":{const v=new Cd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:v,transform:new so,cameraHelper:new ku(v)}}case"vertical-perspective":return{projection:new vh,transform:new bh,cameraHelper:new aa};default:return s.w(`Unknown projection name: ${m}. Falling back to mercator projection.`),{projection:new mi,transform:new zo,cameraHelper:new gh}}}(r);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const m in this.sourceCaches)this.sourceCaches[m].reload()}_validate(r,c,m,v,I={}){return(!I||I.validate!==!1)&&qr(this,r.call(s.y,s.e({key:c,style:this.serialize(),value:m,styleSpec:s.v},v)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),fn().off(At,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const m=this.sourceCaches[c];m.setEventedParent(null),m.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,m,v,I=!1){let T=!1,D=!1;const B={};for(const H of this._order){const Q=this._layers[H];if(Q.type!=="symbol")continue;if(!B[Q.source]){const ie=this.sourceCaches[Q.source];B[Q.source]=ie.getRenderableIds(!0).map(fe=>ie.getTileByID(fe)).sort((fe,_e)=>_e.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(_e.tileID)?-1:1))}const re=this.crossTileSymbolIndex.addLayer(Q,B[Q.source],r.center.lng);T=T||re}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((I=I||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(M.now(),r.zoom))&&(this.pauseablePlacement=new ph(r,this.map.terrain,this._order,I,c,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(M.now()),D=!0),T&&this.pauseablePlacement.placement.setStale()),D||T)for(const H of this._order){const Q=this._layers[H];Q.type==="symbol"&&this.placement.updateLayerOpacities(Q,B[Q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(M.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return s._(this,void 0,void 0,function*(){const m=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,c.icons),m})}getGlyphs(r,c){return s._(this,void 0,void 0,function*(){const m=yield this.glyphManager.getGlyphs(c.stacks),v=this.sourceCaches[c.source];return v&&v.setDependencies(c.tileID.key,c.type,[""]),m})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(s.y.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,m={},v){this._checkLoaded();const I=[{id:r,url:c}],T=[...ne(this.stylesheet.sprite),...I];this._validate(s.y.sprite,"sprite",T,null,m)||(this.stylesheet.sprite=T,this._loadSprite(I,!0,v))}removeSprite(r){this._checkLoaded();const c=ne(this.stylesheet.sprite);if(c.find(m=>m.id===r)){if(this._spritesImagesIds[r])for(const m of this._spritesImagesIds[r])this.imageManager.removeImage(m),this._changedImages[m]=!0;c.splice(c.findIndex(m=>m.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.l("data",{dataType:"style"}))}else this.fire(new s.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(r,c={},m){this._checkLoaded(),r&&this._validate(s.y.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,m):(this._unloadSprite(),m&&m(null)))}}var op=s.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Na{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,m,v,I,T,D,B,H){this.context=r;let Q=this.boundPaintVertexBuffers.length!==v.length;for(let re=0;!Q&&re<v.length;re++)this.boundPaintVertexBuffers[re]!==v[re]&&(Q=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||Q||this.boundIndexBuffer!==I||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==H?this.freshBind(c,m,v,I,T,D,B,H):(r.bindVertexArray.set(this.vao),D&&D.bind(),I&&I.dynamicDraw&&I.bind(),B&&B.bind(),H&&H.bind())}freshBind(r,c,m,v,I,T,D,B){const H=r.numAttributes,Q=this.context,re=Q.gl;this.vao&&this.destroy(),this.vao=Q.createVertexArray(),Q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=B,c.enableAttributes(re,r);for(const ie of m)ie.enableAttributes(re,r);T&&T.enableAttributes(re,r),D&&D.enableAttributes(re,r),B&&B.enableAttributes(re,r),c.bind(),c.setVertexAttribPointers(re,r,I);for(const ie of m)ie.bind(),ie.setVertexAttribPointers(re,r,I);T&&(T.bind(),T.setVertexAttribPointers(re,r,I)),v&&v.bind(),D&&(D.bind(),D.setVertexAttribPointers(re,r,I)),B&&(B.bind(),B.setVertexAttribPointers(re,r,I)),Q.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rv=(w,r,c,m,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):s.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:c?c.calculateFogBlendOpacity(m):0,u_horizon_color:c?c.properties.get("horizon-color"):s.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),lp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Gl(w){const r=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const m=w[c].split(" ");r.push(m.pop())}return r}class bc{constructor(r,c,m,v,I,T,D,B){const H=r.gl;this.program=H.createProgram();const Q=Gl(c.staticAttributes),re=m?m.getBinderAttributes():[],ie=Q.concat(re),fe=Jn.prelude.staticUniforms?Gl(Jn.prelude.staticUniforms):[],_e=D.staticUniforms?Gl(D.staticUniforms):[],De=c.staticUniforms?Gl(c.staticUniforms):[],ke=m?m.getBinderUniforms():[],Re=fe.concat(_e).concat(De).concat(ke),je=[];for(const Ct of Re)je.indexOf(Ct)<0&&je.push(Ct);const We=m?m.defines():[];io(H)&&We.unshift("#version 300 es"),I&&We.push("#define OVERDRAW_INSPECTOR;"),T&&We.push("#define TERRAIN3D;"),B&&We.push(B);let Ke=We.concat(Jn.prelude.fragmentSource,D.fragmentSource,c.fragmentSource).join(`
`),Je=We.concat(Jn.prelude.vertexSource,D.vertexSource,c.vertexSource).join(`
`);io(H)||(Ke=function(Ct){return Ct.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ke),Je=function(Ct){return Ct.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Je));const at=H.createShader(H.FRAGMENT_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(at,Ke),H.compileShader(at),!H.getShaderParameter(at,H.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${H.getShaderInfoLog(at)}`);H.attachShader(this.program,at);const nt=H.createShader(H.VERTEX_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(nt,Je),H.compileShader(nt),!H.getShaderParameter(nt,H.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${H.getShaderInfoLog(nt)}`);H.attachShader(this.program,nt),this.attributes={};const xt={};this.numAttributes=ie.length;for(let Ct=0;Ct<this.numAttributes;Ct++)ie[Ct]&&(H.bindAttribLocation(this.program,Ct,ie[Ct]),this.attributes[ie[Ct]]=Ct);if(H.linkProgram(this.program),!H.getProgramParameter(this.program,H.LINK_STATUS))throw new Error(`Program failed to link: ${H.getProgramInfoLog(this.program)}`);H.deleteShader(nt),H.deleteShader(at);for(let Ct=0;Ct<je.length;Ct++){const vt=je[Ct];if(vt&&!xt[vt]){const jt=H.getUniformLocation(this.program,vt);jt&&(xt[vt]=jt)}}this.fixedUniforms=v(r,xt),this.terrainUniforms=((Ct,vt)=>({u_depth:new s.bH(Ct,vt.u_depth),u_terrain:new s.bH(Ct,vt.u_terrain),u_terrain_dim:new s.b8(Ct,vt.u_terrain_dim),u_terrain_matrix:new s.bJ(Ct,vt.u_terrain_matrix),u_terrain_unpack:new s.bK(Ct,vt.u_terrain_unpack),u_terrain_exaggeration:new s.b8(Ct,vt.u_terrain_exaggeration)}))(r,xt),this.projectionUniforms=((Ct,vt)=>({u_projection_matrix:new s.bJ(Ct,vt.u_projection_matrix),u_projection_tile_mercator_coords:new s.bK(Ct,vt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new s.bK(Ct,vt.u_projection_clipping_plane),u_projection_transition:new s.b8(Ct,vt.u_projection_transition),u_projection_fallback_matrix:new s.bJ(Ct,vt.u_projection_fallback_matrix)}))(r,xt),this.binderUniforms=m?m.getUniforms(r,xt):[]}draw(r,c,m,v,I,T,D,B,H,Q,re,ie,fe,_e,De,ke,Re,je,We){const Ke=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(m),r.setStencilMode(v),r.setColorMode(I),r.setCullFace(T),B){r.activeTexture.set(Ke.TEXTURE2),Ke.bindTexture(Ke.TEXTURE_2D,B.depthTexture),r.activeTexture.set(Ke.TEXTURE3),Ke.bindTexture(Ke.TEXTURE_2D,B.texture);for(const at in this.terrainUniforms)this.terrainUniforms[at].set(B[at])}if(H)for(const at in H)this.projectionUniforms[lp[at]].set(H[at]);if(D)for(const at in this.fixedUniforms)this.fixedUniforms[at].set(D[at]);ke&&ke.setUniforms(r,this.binderUniforms,_e,{zoom:De});let Je=0;switch(c){case Ke.LINES:Je=2;break;case Ke.TRIANGLES:Je=3;break;case Ke.LINE_STRIP:Je=1}for(const at of fe.get()){const nt=at.vaos||(at.vaos={});(nt[Q]||(nt[Q]=new Na)).bind(r,this,re,ke?ke.getPaintVertexBuffers():[],ie,at.vertexOffset,Re,je,We),Ke.drawElements(c,at.primitiveLength*Je,Ke.UNSIGNED_SHORT,at.primitiveOffset*Je*2)}}}function xh(w,r,c){const m=1/s.az(c,1,r.transform.tileZoom),v=Math.pow(2,c.tileID.overscaledZ),I=c.tileSize*Math.pow(2,r.transform.tileZoom)/v,T=I*(c.tileID.canonical.x+c.tileID.wrap*v),D=I*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[m,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[T>>16,D>>16],u_pixel_coord_lower:[65535&T,65535&D]}}const Bo=(w,r,c,m)=>{const v=w.style.light,I=v.properties.get("position"),T=[I.x,I.y,I.z],D=s.bN();v.properties.get("anchor")==="viewport"&&s.bO(D,w.transform.bearingInRadians),s.bP(T,T,D);const B=w.transform.transformLightDirection(T),H=v.properties.get("color");return{u_lightpos:T,u_lightpos_globe:B,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:m}},iv=(w,r,c,m,v,I,T)=>s.e(Bo(w,r,c,m),xh(I,w,T),{u_height_factor:-Math.pow(2,v.overscaledZ)/T.tileSize/8}),Zl=(w,r,c,m)=>s.e(xh(r,w,c),{u_fill_translate:m}),Um=(w,r)=>({u_world:w,u_fill_translate:r}),Sd=(w,r,c,m,v)=>s.e(Zl(w,r,c,v),{u_world:m}),up=(w,r,c,m,v)=>{const I=w.transform;let T,D,B=0;if(c.paint.get("circle-pitch-alignment")==="map"){const H=s.az(r,1,I.zoom);T=!0,D=[H,H],B=H/(s.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*v}else T=!1,D=I.pixelsToGLUnits;return{u_camera_to_center_distance:I.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:D,u_globe_extrude_scale:B,u_translate:m}},cp=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),hp=w=>({u_viewport_size:[w.width,w.height]}),Ah=(w,r=1)=>({u_color:w,u_overlay:0,u_overlay_scale:r}),wh=(w,r,c,m)=>{const v=s.az(w,1,r)/(s.Z*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*m;return{u_extrude_scale:s.az(w,1,r),u_intensity:c,u_globe_extrude_scale:v}},dp=(w,r,c,m)=>{const v=s.K();s.bQ(v,0,w.width,w.height,0,0,1);const I=w.context.gl;return{u_matrix:v,u_world:[I.drawingBufferWidth,I.drawingBufferHeight],u_image:c,u_color_ramp:m,u_opacity:r.paint.get("heatmap-opacity")}},fp=(w,r,c)=>{const m=c.paint.get("hillshade-shadow-color"),v=c.paint.get("hillshade-highlight-color"),I=c.paint.get("hillshade-accent-color");let T=c.paint.get("hillshade-illumination-direction")*(Math.PI/180);return c.paint.get("hillshade-illumination-anchor")==="viewport"&&(T+=w.transform.bearingInRadians),{u_image:0,u_latrange:Ed(0,r.tileID),u_light:[c.paint.get("hillshade-exaggeration"),T],u_shadow:m,u_highlight:v,u_accent:I}},ns=(w,r)=>{const c=r.stride,m=s.K();return s.bQ(m,0,s.Z,-8192,0,0,1),s.L(m,m,[0,-8192,0]),{u_matrix:m,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:r.getUnpackVector()}};function Ed(w,r){const c=Math.pow(2,r.canonical.z),m=r.canonical.y;return[new s.$(0,m/c).toLngLat().lat,new s.$(0,(m+1)/c).toLngLat().lat]}const Wl=(w,r,c,m)=>{const v=w.transform;return{u_translation:Gm(w,r,c),u_ratio:m/s.az(r,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},xc=(w,r,c,m,v)=>s.e(Wl(w,r,c,m),{u_image:0,u_image_height:v}),$m=(w,r,c,m,v)=>{const I=w.transform,T=Hm(r,I);return{u_translation:Gm(w,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:m/s.az(r,1,I.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[T,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},Td=(w,r,c,m,v,I)=>{const T=w.lineAtlas,D=Hm(r,w.transform),B=c.layout.get("line-cap")==="round",H=T.getDash(v.from,B),Q=T.getDash(v.to,B),re=H.width*I.fromScale,ie=Q.width*I.toScale;return s.e(Wl(w,r,c,m),{u_patternscale_a:[D/re,-H.height/2],u_patternscale_b:[D/ie,-Q.height/2],u_sdfgamma:T.width/(256*Math.min(re,ie)*w.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:Q.y,u_mix:I.t})};function Hm(w,r){return 1/s.az(w,1,r.tileZoom)}function Gm(w,r,c){return s.aA(w.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Zm=(w,r,c,m,v)=>{return{u_tl_parent:w,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(I=m.paint.get("raster-contrast"),I>0?1/(1-I):1+I),u_spin_weights:Wm(m.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var I,T};function Wm(w){w*=Math.PI/180;const r=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const ql=(w,r,c,m,v,I,T,D,B,H,Q,re,ie)=>{const fe=T.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:fe.cameraToCenterDistance,u_pitch:fe.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:fe.width/fe.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:D,u_coord_matrix:B,u_is_text:+Q,u_pitch_with_map:+m,u_is_along_line:v,u_is_variable_anchor:I,u_texsize:re,u_texture:0,u_translation:H,u_pitched_scale:ie}},Pd=(w,r,c,m,v,I,T,D,B,H,Q,re,ie,fe)=>{const _e=T.transform;return s.e(ql(w,r,c,m,v,I,T,D,B,H,Q,re,fe),{u_gamma_scale:m?Math.cos(_e.pitch*Math.PI/180)*_e.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},qm=(w,r,c,m,v,I,T,D,B,H,Q,re,ie)=>s.e(Pd(w,r,c,m,v,I,T,D,B,H,!0,Q,0,ie),{u_texsize_icon:re,u_texture_icon:1}),Ac=(w,r)=>({u_opacity:w,u_color:r}),No=(w,r,c,m,v)=>s.e(function(I,T,D,B){const H=D.imageManager.getPattern(I.from.toString()),Q=D.imageManager.getPattern(I.to.toString()),{width:re,height:ie}=D.imageManager.getPixelSize(),fe=Math.pow(2,B.tileID.overscaledZ),_e=B.tileSize*Math.pow(2,D.transform.tileZoom)/fe,De=_e*(B.tileID.canonical.x+B.tileID.wrap*fe),ke=_e*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[re,ie],u_mix:T.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/s.az(B,1,D.transform.tileZoom),u_pixel_coord_upper:[De>>16,ke>>16],u_pixel_coord_lower:[65535&De,65535&ke]}}(c,v,r,m),{u_opacity:w}),oo=(w,r)=>{},wc={fillExtrusion:(w,r)=>({u_lightpos:new s.bL(w,r.u_lightpos),u_lightpos_globe:new s.bL(w,r.u_lightpos_globe),u_lightintensity:new s.b8(w,r.u_lightintensity),u_lightcolor:new s.bL(w,r.u_lightcolor),u_vertical_gradient:new s.b8(w,r.u_vertical_gradient),u_opacity:new s.b8(w,r.u_opacity),u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillExtrusionPattern:(w,r)=>({u_lightpos:new s.bL(w,r.u_lightpos),u_lightpos_globe:new s.bL(w,r.u_lightpos_globe),u_lightintensity:new s.b8(w,r.u_lightintensity),u_lightcolor:new s.bL(w,r.u_lightcolor),u_vertical_gradient:new s.b8(w,r.u_vertical_gradient),u_height_factor:new s.b8(w,r.u_height_factor),u_opacity:new s.b8(w,r.u_opacity),u_fill_translate:new s.bM(w,r.u_fill_translate),u_image:new s.bH(w,r.u_image),u_texsize:new s.bM(w,r.u_texsize),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade)}),fill:(w,r)=>({u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillPattern:(w,r)=>({u_image:new s.bH(w,r.u_image),u_texsize:new s.bM(w,r.u_texsize),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade),u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillOutline:(w,r)=>({u_world:new s.bM(w,r.u_world),u_fill_translate:new s.bM(w,r.u_fill_translate)}),fillOutlinePattern:(w,r)=>({u_world:new s.bM(w,r.u_world),u_image:new s.bH(w,r.u_image),u_texsize:new s.bM(w,r.u_texsize),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade),u_fill_translate:new s.bM(w,r.u_fill_translate)}),circle:(w,r)=>({u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_scale_with_map:new s.bH(w,r.u_scale_with_map),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_extrude_scale:new s.bM(w,r.u_extrude_scale),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_globe_extrude_scale:new s.b8(w,r.u_globe_extrude_scale),u_translate:new s.bM(w,r.u_translate)}),collisionBox:(w,r)=>({u_pixel_extrude_scale:new s.bM(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_viewport_size:new s.bM(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new s.bI(w,r.u_color),u_overlay:new s.bH(w,r.u_overlay),u_overlay_scale:new s.b8(w,r.u_overlay_scale)}),depth:oo,clippingMask:oo,heatmap:(w,r)=>({u_extrude_scale:new s.b8(w,r.u_extrude_scale),u_intensity:new s.b8(w,r.u_intensity),u_globe_extrude_scale:new s.b8(w,r.u_globe_extrude_scale)}),heatmapTexture:(w,r)=>({u_matrix:new s.bJ(w,r.u_matrix),u_world:new s.bM(w,r.u_world),u_image:new s.bH(w,r.u_image),u_color_ramp:new s.bH(w,r.u_color_ramp),u_opacity:new s.b8(w,r.u_opacity)}),hillshade:(w,r)=>({u_image:new s.bH(w,r.u_image),u_latrange:new s.bM(w,r.u_latrange),u_light:new s.bM(w,r.u_light),u_shadow:new s.bI(w,r.u_shadow),u_highlight:new s.bI(w,r.u_highlight),u_accent:new s.bI(w,r.u_accent)}),hillshadePrepare:(w,r)=>({u_matrix:new s.bJ(w,r.u_matrix),u_image:new s.bH(w,r.u_image),u_dimension:new s.bM(w,r.u_dimension),u_zoom:new s.b8(w,r.u_zoom),u_unpack:new s.bK(w,r.u_unpack)}),line:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels),u_image:new s.bH(w,r.u_image),u_image_height:new s.b8(w,r.u_image_height)}),linePattern:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_texsize:new s.bM(w,r.u_texsize),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_image:new s.bH(w,r.u_image),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels),u_scale:new s.bL(w,r.u_scale),u_fade:new s.b8(w,r.u_fade)}),lineSDF:(w,r)=>({u_translation:new s.bM(w,r.u_translation),u_ratio:new s.b8(w,r.u_ratio),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_units_to_pixels:new s.bM(w,r.u_units_to_pixels),u_patternscale_a:new s.bM(w,r.u_patternscale_a),u_patternscale_b:new s.bM(w,r.u_patternscale_b),u_sdfgamma:new s.b8(w,r.u_sdfgamma),u_image:new s.bH(w,r.u_image),u_tex_y_a:new s.b8(w,r.u_tex_y_a),u_tex_y_b:new s.b8(w,r.u_tex_y_b),u_mix:new s.b8(w,r.u_mix)}),raster:(w,r)=>({u_tl_parent:new s.bM(w,r.u_tl_parent),u_scale_parent:new s.b8(w,r.u_scale_parent),u_buffer_scale:new s.b8(w,r.u_buffer_scale),u_fade_t:new s.b8(w,r.u_fade_t),u_opacity:new s.b8(w,r.u_opacity),u_image0:new s.bH(w,r.u_image0),u_image1:new s.bH(w,r.u_image1),u_brightness_low:new s.b8(w,r.u_brightness_low),u_brightness_high:new s.b8(w,r.u_brightness_high),u_saturation_factor:new s.b8(w,r.u_saturation_factor),u_contrast_factor:new s.b8(w,r.u_contrast_factor),u_spin_weights:new s.bL(w,r.u_spin_weights),u_coords_top:new s.bK(w,r.u_coords_top),u_coords_bottom:new s.bK(w,r.u_coords_bottom)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new s.bH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(w,r.u_is_size_feature_constant),u_size_t:new s.b8(w,r.u_size_t),u_size:new s.b8(w,r.u_size),u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_pitch:new s.b8(w,r.u_pitch),u_rotate_symbol:new s.bH(w,r.u_rotate_symbol),u_aspect_ratio:new s.b8(w,r.u_aspect_ratio),u_fade_change:new s.b8(w,r.u_fade_change),u_label_plane_matrix:new s.bJ(w,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(w,r.u_coord_matrix),u_is_text:new s.bH(w,r.u_is_text),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_is_along_line:new s.bH(w,r.u_is_along_line),u_is_variable_anchor:new s.bH(w,r.u_is_variable_anchor),u_texsize:new s.bM(w,r.u_texsize),u_texture:new s.bH(w,r.u_texture),u_translation:new s.bM(w,r.u_translation),u_pitched_scale:new s.b8(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new s.bH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(w,r.u_is_size_feature_constant),u_size_t:new s.b8(w,r.u_size_t),u_size:new s.b8(w,r.u_size),u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_pitch:new s.b8(w,r.u_pitch),u_rotate_symbol:new s.bH(w,r.u_rotate_symbol),u_aspect_ratio:new s.b8(w,r.u_aspect_ratio),u_fade_change:new s.b8(w,r.u_fade_change),u_label_plane_matrix:new s.bJ(w,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(w,r.u_coord_matrix),u_is_text:new s.bH(w,r.u_is_text),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_is_along_line:new s.bH(w,r.u_is_along_line),u_is_variable_anchor:new s.bH(w,r.u_is_variable_anchor),u_texsize:new s.bM(w,r.u_texsize),u_texture:new s.bH(w,r.u_texture),u_gamma_scale:new s.b8(w,r.u_gamma_scale),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_is_halo:new s.bH(w,r.u_is_halo),u_translation:new s.bM(w,r.u_translation),u_pitched_scale:new s.b8(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new s.bH(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.bH(w,r.u_is_size_feature_constant),u_size_t:new s.b8(w,r.u_size_t),u_size:new s.b8(w,r.u_size),u_camera_to_center_distance:new s.b8(w,r.u_camera_to_center_distance),u_pitch:new s.b8(w,r.u_pitch),u_rotate_symbol:new s.bH(w,r.u_rotate_symbol),u_aspect_ratio:new s.b8(w,r.u_aspect_ratio),u_fade_change:new s.b8(w,r.u_fade_change),u_label_plane_matrix:new s.bJ(w,r.u_label_plane_matrix),u_coord_matrix:new s.bJ(w,r.u_coord_matrix),u_is_text:new s.bH(w,r.u_is_text),u_pitch_with_map:new s.bH(w,r.u_pitch_with_map),u_is_along_line:new s.bH(w,r.u_is_along_line),u_is_variable_anchor:new s.bH(w,r.u_is_variable_anchor),u_texsize:new s.bM(w,r.u_texsize),u_texsize_icon:new s.bM(w,r.u_texsize_icon),u_texture:new s.bH(w,r.u_texture),u_texture_icon:new s.bH(w,r.u_texture_icon),u_gamma_scale:new s.b8(w,r.u_gamma_scale),u_device_pixel_ratio:new s.b8(w,r.u_device_pixel_ratio),u_is_halo:new s.bH(w,r.u_is_halo),u_translation:new s.bM(w,r.u_translation),u_pitched_scale:new s.b8(w,r.u_pitched_scale)}),background:(w,r)=>({u_opacity:new s.b8(w,r.u_opacity),u_color:new s.bI(w,r.u_color)}),backgroundPattern:(w,r)=>({u_opacity:new s.b8(w,r.u_opacity),u_image:new s.bH(w,r.u_image),u_pattern_tl_a:new s.bM(w,r.u_pattern_tl_a),u_pattern_br_a:new s.bM(w,r.u_pattern_br_a),u_pattern_tl_b:new s.bM(w,r.u_pattern_tl_b),u_pattern_br_b:new s.bM(w,r.u_pattern_br_b),u_texsize:new s.bM(w,r.u_texsize),u_mix:new s.b8(w,r.u_mix),u_pattern_size_a:new s.bM(w,r.u_pattern_size_a),u_pattern_size_b:new s.bM(w,r.u_pattern_size_b),u_scale_a:new s.b8(w,r.u_scale_a),u_scale_b:new s.b8(w,r.u_scale_b),u_pixel_coord_upper:new s.bM(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.bM(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new s.b8(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_texture:new s.bH(w,r.u_texture),u_ele_delta:new s.b8(w,r.u_ele_delta),u_fog_matrix:new s.bJ(w,r.u_fog_matrix),u_fog_color:new s.bI(w,r.u_fog_color),u_fog_ground_blend:new s.b8(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.b8(w,r.u_fog_ground_blend_opacity),u_horizon_color:new s.bI(w,r.u_horizon_color),u_horizon_fog_blend:new s.b8(w,r.u_horizon_fog_blend),u_is_globe_mode:new s.b8(w,r.u_is_globe_mode)}),terrainDepth:(w,r)=>({u_ele_delta:new s.b8(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_texture:new s.bH(w,r.u_texture),u_terrain_coords_id:new s.b8(w,r.u_terrain_coords_id),u_ele_delta:new s.b8(w,r.u_ele_delta)}),projectionErrorMeasurement:(w,r)=>({u_input:new s.b8(w,r.u_input),u_output_expected:new s.b8(w,r.u_output_expected)}),atmosphere:(w,r)=>({u_sun_pos:new s.bL(w,r.u_sun_pos),u_atmosphere_blend:new s.b8(w,r.u_atmosphere_blend),u_globe_position:new s.bL(w,r.u_globe_position),u_globe_radius:new s.b8(w,r.u_globe_radius),u_inv_proj_matrix:new s.bJ(w,r.u_inv_proj_matrix)}),sky:(w,r)=>({u_sky_color:new s.bI(w,r.u_sky_color),u_horizon_color:new s.bI(w,r.u_horizon_color),u_horizon:new s.bM(w,r.u_horizon),u_horizon_normal:new s.bM(w,r.u_horizon_normal),u_sky_horizon_blend:new s.b8(w,r.u_sky_horizon_blend),u_sky_blend:new s.b8(w,r.u_sky_blend)})};class pp{constructor(r,c,m){this.context=r;const v=r.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Km={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class mp{constructor(r,c,m,v){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=v,this.context=r;const I=r.gl;this.buffer=I.createBuffer(),r.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let m=0;m<this.attributes.length;m++){const v=c.attributes[this.attributes[m].name];v!==void 0&&r.enableVertexAttribArray(v)}}setVertexAttribPointers(r,c,m){for(let v=0;v<this.attributes.length;v++){const I=this.attributes[v],T=c.attributes[I.name];T!==void 0&&r.vertexAttribPointer(T,I.components,r[Km[I.type]],!1,this.itemSize,I.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class sr{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ba extends sr{getDefault(){return s.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ym extends sr{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class sv extends sr{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class av extends sr{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ov extends sr{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Xm extends sr{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class lv extends sr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Du extends sr{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class mt extends sr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Gt extends sr{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Rt extends sr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Pn extends sr{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class qn extends sr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class wr extends sr{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Gr extends sr{getDefault(){return s.b7.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Qr extends sr{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class kd extends sr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class gp extends sr{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class ps extends sr{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Ru extends sr{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Ld extends sr{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Vo extends sr{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ou extends sr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Ch extends sr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Pr extends sr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Cc extends sr{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class yp extends sr{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ic extends sr{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const m=this.gl;io(m)?m.bindVertexArray(r):(c=m.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Tr extends sr{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Dd extends sr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class uv extends sr{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class zu extends sr{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Va extends zu{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Rd extends zu{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Qm extends zu{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const Mc="Framebuffer is not complete";class Jm{constructor(r,c,m,v,I){this.context=r,this.width=c,this.height=m;const T=r.gl,D=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Va(r,D),v)this.depthAttachment=I?new Qm(r,D):new Rd(r,D);else if(I)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Mc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&r.deleteRenderbuffer(m)}r.deleteFramebuffer(this.framebuffer)}}class Od{constructor(r){var c,m;if(this.gl=r,this.clearColor=new ba(this),this.clearDepth=new Ym(this),this.clearStencil=new sv(this),this.colorMask=new av(this),this.depthMask=new ov(this),this.stencilMask=new Xm(this),this.stencilFunc=new lv(this),this.stencilOp=new Du(this),this.stencilTest=new mt(this),this.depthRange=new Gt(this),this.depthTest=new Rt(this),this.depthFunc=new Pn(this),this.blend=new qn(this),this.blendFunc=new wr(this),this.blendColor=new Gr(this),this.blendEquation=new Qr(this),this.cullFace=new kd(this),this.cullFaceSide=new gp(this),this.frontFace=new ps(this),this.program=new Ru(this),this.activeTexture=new Ld(this),this.viewport=new Vo(this),this.bindFramebuffer=new Ou(this),this.bindRenderbuffer=new Ch(this),this.bindTexture=new Pr(this),this.bindVertexBuffer=new Cc(this),this.bindElementBuffer=new yp(this),this.bindVertexArray=new Ic(this),this.pixelStoreUnpack=new Tr(this),this.pixelStoreUnpackPremultiplyAlpha=new Dd(this),this.pixelStoreUnpackFlipY=new uv(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),io(r)){this.HALF_FLOAT=r.HALF_FLOAT;const v=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(m=r.RGB16F)!==null&&m!==void 0?m:v==null?void 0:v.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const v=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new pp(this,r,c)}createVertexBuffer(r,c,m){return new mp(this,r,c,m)}createRenderbuffer(r,c,m){const v=this.gl,I=v.createRenderbuffer();return this.bindRenderbuffer.set(I),v.renderbufferStorage(v.RENDERBUFFER,r,c,m),this.bindRenderbuffer.set(null),I}createFramebuffer(r,c,m,v){return new Jm(this,r,c,m,v)}clear({color:r,depth:c,stencil:m}){const v=this.gl;let I=0;r&&(I|=v.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(I|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(I|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),v.clear(I)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){s.bE(r.blendFunction,Or.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return io(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return io(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let jo;function Sc(w,r,c,m,v){const I=w.context,T=w.transform,D=I.gl,B=w.useProgram("collisionBox"),H=[];let Q=0,re=0;for(let Re=0;Re<m.length;Re++){const je=m[Re],We=r.getTile(je).getBucket(c);if(!We)continue;const Ke=v?We.textCollisionBox:We.iconCollisionBox,Je=We.collisionCircleArray;Je.length>0&&(H.push({circleArray:Je,circleOffset:re,coord:je}),Q+=Je.length/4,re=Q),Ke&&B.draw(I,D.LINES,Tn.disabled,br.disabled,w.colorModeForRenderPass(),Er.disabled,cp(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(je),T.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,null,w.transform.zoom,null,null,Ke.collisionVertexBuffer)}if(!v||!H.length)return;const ie=w.useProgram("collisionCircle"),fe=new s.bR;fe.resize(4*Q),fe._trim();let _e=0;for(const Re of H)for(let je=0;je<Re.circleArray.length/4;je++){const We=4*je,Ke=Re.circleArray[We+0],Je=Re.circleArray[We+1],at=Re.circleArray[We+2],nt=Re.circleArray[We+3];fe.emplace(_e++,Ke,Je,at,nt,0),fe.emplace(_e++,Ke,Je,at,nt,1),fe.emplace(_e++,Ke,Je,at,nt,2),fe.emplace(_e++,Ke,Je,at,nt,3)}(!jo||jo.length<2*Q)&&(jo=function(Re){const je=2*Re,We=new s.bT;We.resize(je),We._trim();for(let Ke=0;Ke<je;Ke++){const Je=6*Ke;We.uint16[Je+0]=4*Ke+0,We.uint16[Je+1]=4*Ke+1,We.uint16[Je+2]=4*Ke+2,We.uint16[Je+3]=4*Ke+2,We.uint16[Je+4]=4*Ke+3,We.uint16[Je+5]=4*Ke+0}return We}(Q));const De=I.createIndexBuffer(jo,!0),ke=I.createVertexBuffer(fe,s.bS.members,!0);for(const Re of H){const je=hp(w.transform);ie.draw(I,D.TRIANGLES,Tn.disabled,br.disabled,w.colorModeForRenderPass(),Er.disabled,je,w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re.coord),null,c.id,ke,De,s.aJ.simpleSegment(0,2*Re.circleOffset,Re.circleArray.length,Re.circleArray.length/2),null,w.transform.zoom,null,null,null)}ke.destroy(),De.destroy()}const Fu=s.ad(new Float32Array(16));function ul(w,r,c,m,v,I){const{horizontalAlign:T,verticalAlign:D}=s.aE(w);return new s.P((-(T-.5)*r/v+m[0])*I,(-(D-.5)*c/v+m[1])*I)}function Ih(w,r,c,m,v,I){const T=r.tileAnchorPoint.add(new s.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let D=m.mult(I);c||(D=D.rotate(-v));const B=T.add(D);return jn(B.x,B.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const D=si(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),B=Math.atan(D.y/D.x)+(D.x<0?Math.PI:0);return w.add(m.rotate(B))}return w.add(m)}function zd(w,r,c,m,v,I,T,D,B,H,Q,re){const ie=w.text.placedSymbolArray,fe=w.text.dynamicLayoutVertexArray,_e=w.icon.dynamicLayoutVertexArray,De={};fe.clear();for(let ke=0;ke<ie.length;ke++){const Re=ie.get(ke),je=Re.hidden||!Re.crossTileID||w.allowVerticalPlacement&&!Re.placedOrientation?null:m[Re.crossTileID];if(je){const We=new s.P(Re.anchorX,Re.anchorY),Ke={getElevation:re,width:v.width,height:v.height,pitchedLabelPlaneMatrix:I,pitchWithMap:c,transform:v,tileAnchorPoint:We,translation:H,unwrappedTileID:Q},Je=c?dh(We.x,We.y,Ke):si(We.x,We.y,Ke),at=xr(v.cameraToCenterDistance,Je.signedDistanceFromCamera);let nt=s.am(w.textSizeData,D,Re)*at/s.ay;c&&(nt*=w.tilePixelRatio/T);const{width:xt,height:Ct,anchor:vt,textOffset:jt,textBoxScale:zt}=je,ln=ul(vt,xt,Ct,jt,zt,nt),nn=v.getPitchedTextCorrection(We.x+H[0],We.y+H[1],Q),Kt=Ih(Je.point,Ke,r,ln,-v.bearingInRadians,nn),kn=w.allowVerticalPlacement&&Re.placedOrientation===s.al.vertical?Math.PI/2:0;for(let Hn=0;Hn<Re.numGlyphs;Hn++)s.as(fe,Kt,kn);B&&Re.associatedIconIndex>=0&&(De[Re.associatedIconIndex]={shiftedAnchor:Kt,angle:kn})}else Bi(Re.numGlyphs,fe)}if(B){_e.clear();const ke=w.icon.placedSymbolArray;for(let Re=0;Re<ke.length;Re++){const je=ke.get(Re);if(je.hidden)Bi(je.numGlyphs,_e);else{const We=De[Re];if(We)for(let Ke=0;Ke<je.numGlyphs;Ke++)s.as(_e,We.shiftedAnchor,We.angle);else Bi(je.numGlyphs,_e)}}w.icon.dynamicLayoutVertexBuffer.updateData(_e)}w.text.dynamicLayoutVertexBuffer.updateData(fe)}function Fd(w,r,c){return c.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Bd(w,r,c,m,v,I,T,D,B,H,Q,re,ie){const fe=w.context,_e=fe.gl,De=w.transform,ke=D==="map",Re=B==="map",je=D!=="viewport"&&c.layout.get("symbol-placement")!=="point",We=ke&&!Re&&!je,Ke=!c.layout.get("symbol-sort-key").isConstant();let Je=!1;const at=w.getDepthModeForSublayer(0,Tn.ReadOnly),nt=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),xt=[],Ct=De.getCircleRadiusCorrection();for(const vt of m){const jt=r.getTile(vt),zt=jt.getBucket(c);if(!zt)continue;const ln=v?zt.text:zt.icon;if(!ln||!ln.segments.get().length||!ln.hasVisibleVertices)continue;const nn=ln.programConfigurations.get(c.id),Kt=v||zt.sdfIcons,kn=v?zt.textSizeData:zt.iconSizeData,Hn=Re||De.pitch!==0,Zn=w.useProgram(Fd(Kt,v,zt),nn),Jr=s.ak(kn,De.zoom),Lr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(vt);let oi,ni,or,pr,Zi=[0,0],Wi=null;if(v)ni=jt.glyphAtlasTexture,or=_e.LINEAR,oi=jt.glyphAtlasTexture.size,zt.iconsInText&&(Zi=jt.imageAtlasTexture.size,Wi=jt.imageAtlasTexture,pr=Hn||w.options.rotating||w.options.zooming||kn.kind==="composite"||kn.kind==="camera"?_e.LINEAR:_e.NEAREST);else{const gi=c.layout.get("icon-size").constantOr(0)!==1||zt.iconsNeedLinear;ni=jt.imageAtlasTexture,or=Kt||w.options.rotating||w.options.zooming||gi||Hn?_e.LINEAR:_e.NEAREST,oi=jt.imageAtlasTexture.size}const qi=s.az(jt,1,w.transform.zoom),Ss=Vn(ke,w.transform,qi),Ua=s.K();s.an(Ua,Ss);const pl=Qn(Re,ke,w.transform,qi),ho=s.aA(De,jt,I,T),fo=De.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!ie,applyTerrainMatrix:!0}),Es=nt&&zt.hasTextData(),Gu=c.layout.get("icon-text-fit")!=="none"&&Es&&zt.hasIconData();if(je){const gi=w.style.map.terrain?(xi,ui)=>w.style.map.terrain.getElevation(vt,xi,ui):null,li=c.layout.get("text-rotation-alignment")==="map";Ar(zt,w,v,Ss,Ua,Re,H,li,vt.toUnwrapped(),De.width,De.height,ho,gi)}const ha=v&&nt||Gu,da=je||ha?Fu:Re?Ss:w.transform.clipSpaceToPixelsMatrix,ml=Kt&&c.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let po;po=Kt?zt.iconsInText?qm(kn.kind,Jr,We,Re,je,ha,w,da,pl,ho,oi,Zi,Ct):Pd(kn.kind,Jr,We,Re,je,ha,w,da,pl,ho,v,oi,0,Ct):ql(kn.kind,Jr,We,Re,je,ha,w,da,pl,ho,v,oi,Ct);const gl={program:Zn,buffers:ln,uniformValues:po,projectionData:fo,atlasTexture:ni,atlasTextureIcon:Wi,atlasInterpolation:or,atlasInterpolationIcon:pr,isSDF:Kt,hasHalo:ml};if(Ke&&zt.canOverlap){Je=!0;const gi=ln.segments.get();for(const li of gi)xt.push({segments:new s.aJ([li]),sortKey:li.sortKey,state:gl,terrainData:Lr})}else xt.push({segments:ln.segments,sortKey:0,state:gl,terrainData:Lr})}Je&&xt.sort((vt,jt)=>vt.sortKey-jt.sortKey);for(const vt of xt){const jt=vt.state;if(fe.activeTexture.set(_e.TEXTURE0),jt.atlasTexture.bind(jt.atlasInterpolation,_e.CLAMP_TO_EDGE),jt.atlasTextureIcon&&(fe.activeTexture.set(_e.TEXTURE1),jt.atlasTextureIcon&&jt.atlasTextureIcon.bind(jt.atlasInterpolationIcon,_e.CLAMP_TO_EDGE)),jt.isSDF){const zt=jt.uniformValues;jt.hasHalo&&(zt.u_is_halo=1,Mh(jt.buffers,vt.segments,c,w,jt.program,at,Q,re,zt,jt.projectionData,vt.terrainData)),zt.u_is_halo=0}Mh(jt.buffers,vt.segments,c,w,jt.program,at,Q,re,jt.uniformValues,jt.projectionData,vt.terrainData)}}function Mh(w,r,c,m,v,I,T,D,B,H,Q){const re=m.context;v.draw(re,re.gl.TRIANGLES,I,T,D,Er.backCCW,B,Q,H,c.id,w.layoutVertexBuffer,w.indexBuffer,r,c.paint,m.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Ec(w,r,c,m,v){const I=w.context,T=I.gl,D=br.disabled,B=new Or([T.ONE,T.ONE],s.b7.transparent,[!0,!0,!0,!0]),H=r.getBucket(c);if(!H)return;const Q=m.key;let re=c.heatmapFbos.get(Q);re||(re=_p(I,r.tileSize,r.tileSize),c.heatmapFbos.set(Q,re)),I.bindFramebuffer.set(re.framebuffer),I.viewport.set([0,0,r.tileSize,r.tileSize]),I.clear({color:s.b7.transparent});const ie=H.programConfigurations.get(c.id),fe=w.useProgram("heatmap",ie,!v),_e=w.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),De=w.style.map.terrain.getTerrainData(m);fe.draw(I,T.TRIANGLES,Tn.disabled,D,B,Er.disabled,wh(r,w.transform.zoom,c.paint.get("heatmap-intensity"),1),De,_e,c.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,c.paint,w.transform.zoom,ie)}function vp(w,r,c,m,v){const I=w.context,T=I.gl,D=w.transform;I.setColorMode(w.colorModeForRenderPass());const B=Tc(I,r),H=c.key,Q=r.heatmapFbos.get(H);if(!Q)return;I.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,Q.colorAttachment.get()),I.activeTexture.set(T.TEXTURE1),B.bind(T.LINEAR,T.CLAMP_TO_EDGE);const re=D.getProjectionData({overscaledTileID:c,applyTerrainMatrix:v,applyGlobeMatrix:!m});w.useProgram("heatmapTexture").draw(I,T.TRIANGLES,Tn.disabled,br.disabled,w.colorModeForRenderPass(),Er.disabled,dp(w,r,0,1),null,re,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,D.zoom),Q.destroy(),r.heatmapFbos.delete(H)}function _p(w,r,c){var m,v;const I=w.gl,T=I.createTexture();I.bindTexture(I.TEXTURE_2D,T),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,I.CLAMP_TO_EDGE),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,I.LINEAR),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,I.LINEAR);const D=(m=w.HALF_FLOAT)!==null&&m!==void 0?m:I.UNSIGNED_BYTE,B=(v=w.RGBA16F)!==null&&v!==void 0?v:I.RGBA;I.texImage2D(I.TEXTURE_2D,0,B,r,c,0,I.RGBA,D,null);const H=w.createFramebuffer(r,c,!1,!1);return H.colorAttachment.set(T),H}function Tc(w,r){return r.colorRampTexture||(r.colorRampTexture=new q(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function Nd(w,r,c,m,v){if(!c||!m||!m.imageAtlas)return;const I=m.imageAtlas.patternPositions;let T=I[c.to.toString()],D=I[c.from.toString()];if(!T&&D&&(T=D),!D&&T&&(D=T),!T||!D){const B=v.getPaintProperty(r);T=I[B],D=I[B]}T&&D&&w.setConstantPatternPositions(T,D)}function bp(w,r,c,m,v,I,T,D){const B=w.context.gl,H="fill-pattern",Q=c.paint.get(H),re=Q&&Q.constantOr(1),ie=c.getCrossfadeParameters();let fe,_e,De,ke,Re;const je=w.transform,We=c.paint.get("fill-translate"),Ke=c.paint.get("fill-translate-anchor");T?(_e=re&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",fe=B.LINES):(_e=re?"fillPattern":"fill",fe=B.TRIANGLES);const Je=Q.constantOr(null);for(const at of m){const nt=r.getTile(at);if(re&&!nt.patternsLoaded())continue;const xt=nt.getBucket(c);if(!xt)continue;const Ct=xt.programConfigurations.get(c.id),vt=w.useProgram(_e,Ct),jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(at);re&&(w.context.activeTexture.set(B.TEXTURE0),nt.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ct.updatePaintBuffers(ie)),Nd(Ct,H,Je,nt,c);const zt=je.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!D,applyTerrainMatrix:!0}),ln=s.aA(je,nt,We,Ke);if(T){ke=xt.indexBuffer2,Re=xt.segments2;const Kt=[B.drawingBufferWidth,B.drawingBufferHeight];De=_e==="fillOutlinePattern"&&re?Sd(w,ie,nt,Kt,ln):Um(Kt,ln)}else ke=xt.indexBuffer,Re=xt.segments,De=re?Zl(w,ie,nt,ln):{u_fill_translate:ln};let nn;if(w.renderPass==="translucent"&&D){const[Kt]=w.getStencilConfigForOverlapAndUpdateStencilID(m);nn=Kt[at.overscaledZ]}else nn=w.stencilModeForClipping(at);vt.draw(w.context,fe,v,nn,I,Er.backCCW,De,jt,zt,c.id,xt.layoutVertexBuffer,ke,Re,c.paint,w.transform.zoom,Ct)}}function Pi(w,r,c,m,v,I,T,D){const B=w.context,H=B.gl,Q="fill-extrusion-pattern",re=c.paint.get(Q),ie=re.constantOr(1),fe=c.getCrossfadeParameters(),_e=c.paint.get("fill-extrusion-opacity"),De=re.constantOr(null),ke=w.transform;for(const Re of m){const je=r.getTile(Re),We=je.getBucket(c);if(!We)continue;const Ke=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Re),Je=We.programConfigurations.get(c.id),at=w.useProgram(ie?"fillExtrusionPattern":"fillExtrusion",Je);ie&&(w.context.activeTexture.set(H.TEXTURE0),je.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),Je.updatePaintBuffers(fe));const nt=ke.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!D,applyTerrainMatrix:!0});Nd(Je,Q,De,je,c);const xt=s.aA(ke,je,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ct=c.paint.get("fill-extrusion-vertical-gradient"),vt=ie?iv(w,Ct,_e,xt,Re,fe,je):Bo(w,Ct,_e,xt);at.draw(B,B.gl.TRIANGLES,v,I,T,Er.backCCW,vt,Ke,nt,c.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,c.paint,w.transform.zoom,Je,w.style.map.terrain&&We.centroidVertexBuffer)}}function ji(w,r,c,m,v,I,T,D,B){var H;const Q=w.style.projection,re=w.context,ie=w.transform,fe=re.gl,_e=w.useProgram("hillshade"),De=!w.options.moving;for(const ke of m){const Re=r.getTile(ke),je=Re.fbo;if(!je)continue;const We=Q.getMeshFromTileID(re,ke.canonical,D,!0,"raster"),Ke=(H=w.style.map.terrain)===null||H===void 0?void 0:H.getTerrainData(ke);re.activeTexture.set(fe.TEXTURE0),fe.bindTexture(fe.TEXTURE_2D,je.colorAttachment.get());const Je=ie.getProjectionData({overscaledTileID:ke,aligned:De,applyGlobeMatrix:!B,applyTerrainMatrix:!0});_e.draw(re,fe.TRIANGLES,I,v[ke.overscaledZ],T,Er.backCCW,fp(w,Re,c),Ke,Je,c.id,We.vertexBuffer,We.indexBuffer,We.segments)}}const Sh=[new s.P(0,0),new s.P(s.Z,0),new s.P(s.Z,s.Z),new s.P(0,s.Z)];function Vd(w,r,c,m,v,I,T,D,B=!1,H=!1){const Q=m[m.length-1].overscaledZ,re=w.context,ie=re.gl,fe=w.useProgram("raster"),_e=w.transform,De=w.style.projection,ke=w.colorModeForRenderPass(),Re=!w.options.moving;for(const je of m){const We=w.getDepthModeForSublayer(je.overscaledZ-Q,c.paint.get("raster-opacity")===1?Tn.ReadWrite:Tn.ReadOnly,ie.LESS),Ke=r.getTile(je);Ke.registerFadeDuration(c.paint.get("raster-fade-duration"));const Je=r.findLoadedParent(je,0),at=r.findLoadedSibling(je),nt=xp(Ke,Je||at||null,r,c,w.transform,w.style.map.terrain);let xt,Ct;const vt=c.paint.get("raster-resampling")==="nearest"?ie.NEAREST:ie.LINEAR;re.activeTexture.set(ie.TEXTURE0),Ke.texture.bind(vt,ie.CLAMP_TO_EDGE,ie.LINEAR_MIPMAP_NEAREST),re.activeTexture.set(ie.TEXTURE1),Je?(Je.texture.bind(vt,ie.CLAMP_TO_EDGE,ie.LINEAR_MIPMAP_NEAREST),xt=Math.pow(2,Je.tileID.overscaledZ-Ke.tileID.overscaledZ),Ct=[Ke.tileID.canonical.x*xt%1,Ke.tileID.canonical.y*xt%1]):Ke.texture.bind(vt,ie.CLAMP_TO_EDGE,ie.LINEAR_MIPMAP_NEAREST),Ke.texture.useMipmap&&re.extTextureFilterAnisotropic&&w.transform.pitch>20&&ie.texParameterf(ie.TEXTURE_2D,re.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,re.extTextureFilterAnisotropicMax);const jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(je),zt=_e.getProjectionData({overscaledTileID:je,aligned:Re,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),ln=Zm(Ct||[0,0],xt||1,nt,c,D),nn=De.getMeshFromTileID(re,je.canonical,I,T,"raster");fe.draw(re,ie.TRIANGLES,We,v?v[je.overscaledZ]:br.disabled,ke,B?Er.frontCCW:Er.backCCW,ln,jt,zt,c.id,nn.vertexBuffer,nn.indexBuffer,nn.segments)}}function xp(w,r,c,m,v,I){const T=m.paint.get("raster-fade-duration");if(!I&&T>0){const D=M.now(),B=(D-w.timeAdded)/T,H=r?(D-r.timeAdded)/T:-1,Q=c.getSource(),re=ht(v,{tileSize:Q.tileSize,roundZoom:Q.roundZoom}),ie=!r||Math.abs(r.tileID.overscaledZ-re)>Math.abs(w.tileID.overscaledZ-re),fe=ie&&w.refreshedUponExpiration?1:s.ae(ie?B:1-H,0,1);return w.refreshedUponExpiration&&B>=1&&(w.refreshedUponExpiration=!1),r?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const ki=new s.b7(1,0,0,1),cl=new s.b7(0,1,0,1),Rs=new s.b7(0,0,1,1),Eh=new s.b7(1,0,1,1),Kl=new s.b7(0,1,1,1);function Bu(w,r,c,m){uo(w,0,r+c/2,w.transform.width,c,m)}function lo(w,r,c,m){uo(w,r-c/2,0,c,w.transform.height,m)}function uo(w,r,c,m,v,I){const T=w.context,D=T.gl;D.enable(D.SCISSOR_TEST),D.scissor(r*w.pixelRatio,c*w.pixelRatio,m*w.pixelRatio,v*w.pixelRatio),T.clear({color:I}),D.disable(D.SCISSOR_TEST)}function Yl(w,r,c){const m=w.context,v=m.gl,I=w.useProgram("debug"),T=Tn.disabled,D=br.disabled,B=w.colorModeForRenderPass(),H="$debug",Q=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);m.activeTexture.set(v.TEXTURE0);const re=r.getTileByID(c.key).latestRawTileData,ie=Math.floor((re&&re.byteLength||0)/1024),fe=r.getTile(c).tileSize,_e=512/Math.min(fe,512)*(c.overscaledZ/w.transform.zoom)*.5;let De=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(De+=` => ${c.overscaledZ}`),function(Re,je){Re.initDebugOverlayCanvas();const We=Re.debugOverlayCanvas,Ke=Re.context.gl,Je=Re.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,We.width,We.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText(je,5,5),Je.strokeText(je,5,5),Re.debugOverlayTexture.update(We),Re.debugOverlayTexture.bind(Ke.LINEAR,Ke.CLAMP_TO_EDGE)}(w,`${De} ${ie}kB`);const ke=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(m,v.TRIANGLES,T,D,Or.alphaBlended,Er.disabled,Ah(s.b7.transparent,_e),null,ke,H,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),I.draw(m,v.LINE_STRIP,T,D,B,Er.disabled,Ah(s.b7.red),Q,ke,H,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Ap(w,r,c,m){const{isRenderingGlobe:v}=m,I=w.context,T=I.gl,D=w.transform,B=w.colorModeForRenderPass(),H=w.getDepthModeFor3D(),Q=w.useProgram("terrain");I.bindFramebuffer.set(null),I.viewport.set([0,0,w.width,w.height]);for(const re of c){const ie=r.getTerrainMesh(re.tileID),fe=w.renderToTexture.getTexture(re),_e=r.getTerrainData(re.tileID);I.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,fe.texture);const De=r.getMeshFrameDelta(D.zoom),ke=D.calculateFogMatrix(re.tileID.toUnwrapped()),Re=rv(De,ke,w.style.sky,D.pitch,v),je=D.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Q.draw(I,T.TRIANGLES,H,br.disabled,B,Er.backCCW,Re,_e,je,"terrain",ie.vertexBuffer,ie.indexBuffer,ie.segments)}}function wp(w,r){if(!r.mesh){const c=new s.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const m=new s.aK;m.emplaceBack(0,1,2),m.emplaceBack(0,2,3),r.mesh=new Mu(w.createVertexBuffer(c,Oo.members),w.createIndexBuffer(m),s.aJ.simpleSegment(0,0,c.length,m.length))}return r.mesh}class eg{constructor(r,c){this.context=new Od(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=St.maxUnderzooming+St.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ro}resize(r,c,m){if(this.width=Math.floor(r*m),this.height=Math.floor(c*m),this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const r=this.context,c=new s.aI;c.emplaceBack(0,0),c.emplaceBack(s.Z,0),c.emplaceBack(0,s.Z),c.emplaceBack(s.Z,s.Z),this.tileExtentBuffer=r.createVertexBuffer(c,Oo.members),this.tileExtentSegments=s.aJ.simpleSegment(0,0,4,2);const m=new s.aI;m.emplaceBack(0,0),m.emplaceBack(s.Z,0),m.emplaceBack(0,s.Z),m.emplaceBack(s.Z,s.Z),this.debugBuffer=r.createVertexBuffer(m,Oo.members),this.debugSegments=s.aJ.simpleSegment(0,0,4,5);const v=new s.bY;v.emplaceBack(0,0,0,0),v.emplaceBack(s.Z,0,s.Z,0),v.emplaceBack(0,s.Z,0,s.Z),v.emplaceBack(s.Z,s.Z,s.Z,s.Z),this.rasterBoundsBuffer=r.createVertexBuffer(v,op.members),this.rasterBoundsSegments=s.aJ.simpleSegment(0,0,4,2);const I=new s.aI;I.emplaceBack(0,0),I.emplaceBack(s.Z,0),I.emplaceBack(0,s.Z),I.emplaceBack(s.Z,s.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(I,Oo.members),this.rasterBoundsSegmentsPosOnly=s.aJ.simpleSegment(0,0,4,5);const T=new s.aI;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(T,Oo.members),this.viewportSegments=s.aJ.simpleSegment(0,0,4,2);const D=new s.bZ;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(D);const B=new s.aK;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(B);const H=this.context.gl;this.stencilClearMode=new br({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO),this.tileExtentMesh=new Mu(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=s.K();s.bQ(m,0,this.width,this.height,0,0,1),s.M(m,m,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const v={mainMatrix:m,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:m};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,Tn.disabled,this.stencilClearMode,Or.disabled,Er.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,m){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const v=this.context;v.setColorMode(Or.disabled),v.setDepthMode(Tn.disabled);const I={};for(const T of c)I[T.key]=this.nextStencilID++;this._renderTileMasks(I,c,m,!0),this._renderTileMasks(I,c,m,!1),this._tileClippingMaskIDs=I}_renderTileMasks(r,c,m,v){const I=this.context,T=I.gl,D=this.style.projection,B=this.transform,H=this.useProgram("clippingMask");for(const Q of c){const re=r[Q.key],ie=this.style.map.terrain&&this.style.map.terrain.getTerrainData(Q),fe=D.getMeshFromTileID(this.context,Q.canonical,v,!0,"stencil"),_e=B.getProjectionData({overscaledTileID:Q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});H.draw(I,T.TRIANGLES,Tn.disabled,new br({func:T.ALWAYS,mask:0},re,255,T.KEEP,T.KEEP,T.REPLACE),Or.disabled,m?Er.disabled:Er.backCCW,null,ie,_e,"$clipping",fe.vertexBuffer,fe.indexBuffer,fe.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,m=this.style.projection,v=this.transform,I=this.useProgram("depth"),T=this.getDepthModeFor3D(),D=Ze(v,{tileSize:v.tileSize});for(const B of D){const H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),Q=m.getMeshFromTileID(this.context,B.canonical,!0,!0,"raster"),re=v.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!0,applyTerrainMatrix:!0});I.draw(r,c.TRIANGLES,T,br.disabled,Or.disabled,Er.backCCW,null,H,re,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new br({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new br({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,m=r.sort((T,D)=>D.overscaledZ-T.overscaledZ),v=m[m.length-1].overscaledZ,I=m[0].overscaledZ-v+1;if(I>1){this.currentStencilSource=void 0,this.nextStencilID+I>256&&this.clearStencil();const T={};for(let D=0;D<I;D++)T[D+v]=new br({func:c.GEQUAL,mask:255},D+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=I,[T,m]}return[{[v]:br.disabled},m]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,m=r.sort((T,D)=>D.overscaledZ-T.overscaledZ),v=m[m.length-1].overscaledZ,I=m[0].overscaledZ-v+1;if(this.clearStencil(),I>1){const T={},D={};for(let B=0;B<I;B++)T[B+v]=new br({func:c.GREATER,mask:255},I+1+B,255,c.KEEP,c.KEEP,c.REPLACE),D[B+v]=new br({func:c.GREATER,mask:255},1+B,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*I+1,[T,D,m]}return this.nextStencilID=3,[{[v]:new br({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[v]:new br({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},m]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Or([r.CONSTANT_COLOR,r.ONE],new s.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Or.unblended:Or.alphaBlended}getDepthModeForSublayer(r,c,m){if(!this.opaquePassEnabledForLayer())return Tn.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Tn(m||this.context.gl.LEQUAL,c,[v,v])}getDepthModeFor3D(){return new Tn(this.context.gl.LEQUAL,Tn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var m,v;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(M.now()),this.imageManager.beginFrame();const I=this.style._order,T=this.style.sourceCaches,D={},B={},H={},Q={isRenderingToTexture:!1,isRenderingGlobe:((m=r.projection)===null||m===void 0?void 0:m.transitionState)>0};for(const ie in T){const fe=T[ie];fe.used&&fe.prepare(this.context),D[ie]=fe.getVisibleCoordinates(!1),B[ie]=D[ie].slice().reverse(),H[ie]=fe.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ie=0;ie<I.length;ie++)if(this.style._layers[I[ie]].is3D()){this.opaquePassCutoff=ie;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ie of I){const fe=this.style._layers[ie];if(!fe.hasOffscreenPass()||fe.isHidden(this.transform.zoom))continue;const _e=B[fe.source];(fe.type==="custom"||_e.length)&&this.renderLayer(this,T[fe.source],fe,_e,Q)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:ie=>this.useProgram(ie)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?s.b7.black:s.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(ie,fe){const _e=ie.context,De=_e.gl,ke=((at,nt,xt)=>{const Ct=Math.cos(nt.rollInRadians),vt=Math.sin(nt.rollInRadians),jt=Xe(nt),zt=nt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:at.properties.get("sky-color"),u_horizon_color:at.properties.get("horizon-color"),u_horizon:[(nt.width/2-jt*vt)*xt,(nt.height/2+jt*Ct)*xt],u_horizon_normal:[-vt,Ct],u_sky_horizon_blend:at.properties.get("sky-horizon-blend")*nt.height/2*xt,u_sky_blend:zt}})(fe,ie.style.map.transform,ie.pixelRatio),Re=new Tn(De.LEQUAL,Tn.ReadWrite,[0,1]),je=br.disabled,We=ie.colorModeForRenderPass(),Ke=ie.useProgram("sky"),Je=wp(_e,fe);Ke.draw(_e,De.TRIANGLES,Re,je,We,Er.disabled,ke,null,void 0,"sky",Je.vertexBuffer,Je.indexBuffer,Je.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=I.length-1;this.currentLayer>=0;this.currentLayer--){const ie=this.style._layers[I[this.currentLayer]],fe=T[ie.source],_e=D[ie.source];this._renderTileClippingMasks(ie,_e,!1),this.renderLayer(this,fe,ie,_e,Q)}this.renderPass="translucent";let re=!1;for(this.currentLayer=0;this.currentLayer<I.length;this.currentLayer++){const ie=this.style._layers[I[this.currentLayer]],fe=T[ie.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ie,Q))continue;this.opaquePassEnabledForLayer()||re||(re=!0,Q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const _e=(ie.type==="symbol"?H:B)[ie.source];this._renderTileClippingMasks(ie,D[ie.source],!1),this.renderLayer(this,fe,ie,_e,Q)}if(Q.isRenderingGlobe&&function(ie,fe,_e){const De=ie.context,ke=De.gl,Re=ie.useProgram("atmosphere"),je=new Tn(ke.LEQUAL,Tn.ReadOnly,[0,1]),We=ie.transform,Ke=function(zt,ln){const nn=zt.properties.get("position"),Kt=[-nn.x,-nn.y,-nn.z],kn=s.ad(new Float64Array(16));return zt.properties.get("anchor")==="map"&&(s.a_(kn,kn,ln.rollInRadians),s.a$(kn,kn,-ln.pitchInRadians),s.a_(kn,kn,ln.bearingInRadians),s.a$(kn,kn,ln.center.lat*Math.PI/180),s.bp(kn,kn,-ln.center.lng*Math.PI/180)),s.bX(Kt,Kt,kn),Kt}(_e,ie.transform),Je=We.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),at=fe.properties.get("atmosphere-blend")*Je.projectionTransition;if(at===0)return;const nt=Zs(We.worldSize,We.center.lat),xt=We.inverseProjectionMatrix,Ct=new Float64Array(4);Ct[3]=1,s.at(Ct,Ct,We.modelViewProjectionMatrix),Ct[0]/=Ct[3],Ct[1]/=Ct[3],Ct[2]/=Ct[3],Ct[3]=1,s.at(Ct,Ct,xt),Ct[0]/=Ct[3],Ct[1]/=Ct[3],Ct[2]/=Ct[3],Ct[3]=1;const vt=((zt,ln,nn,Kt,kn)=>({u_sun_pos:zt,u_atmosphere_blend:ln,u_globe_position:nn,u_globe_radius:Kt,u_inv_proj_matrix:kn}))(Ke,at,[Ct[0],Ct[1],Ct[2]],nt,xt),jt=wp(De,fe);Re.draw(De,ke.TRIANGLES,je,br.disabled,Or.alphaBlended,Er.disabled,vt,null,null,"atmosphere",jt.vertexBuffer,jt.indexBuffer,jt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ie=function(fe,_e){let De=null;const ke=Object.values(fe._layers).flatMap(Ke=>Ke.source&&!Ke.isHidden(_e)?[fe.sourceCaches[Ke.source]]:[]),Re=ke.filter(Ke=>Ke.getSource().type==="vector"),je=ke.filter(Ke=>Ke.getSource().type!=="vector"),We=Ke=>{(!De||De.getSource().maxzoom<Ke.getSource().maxzoom)&&(De=Ke)};return Re.forEach(Ke=>We(Ke)),De||je.forEach(Ke=>We(Ke)),De}(this.style,this.transform.zoom);ie&&function(fe,_e,De){for(let ke=0;ke<De.length;ke++)Yl(fe,_e,De[ke])}(this,ie,ie.getVisibleCoordinates())}this.options.showPadding&&function(ie){const fe=ie.transform.padding;Bu(ie,ie.transform.height-(fe.top||0),3,ki),Bu(ie,fe.bottom||0,3,cl),lo(ie,fe.left||0,3,Rs),lo(ie,ie.transform.width-(fe.right||0),3,Eh);const _e=ie.transform.centerPoint;(function(De,ke,Re,je){uo(De,ke-1,Re-10,2,20,je),uo(De,ke-10,Re-1,20,2,je)})(ie,_e.x,ie.transform.height-_e.y,Kl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,m=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=r?!s.b_(c,m):!s.b$(c,m)),v||(v=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(s.c0(c,m),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(I,T){const D=I.context,B=D.gl,H=I.transform,Q=Or.unblended,re=new Tn(B.LEQUAL,Tn.ReadWrite,[0,1]),ie=T.sourceCache.getRenderableTiles(),fe=I.useProgram("terrainDepth");D.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),D.clear({color:s.b7.transparent,depth:1});for(const _e of ie){const De=T.getTerrainMesh(_e.tileID),ke=T.getTerrainData(_e.tileID),Re=H.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),je={u_ele_delta:T.getMeshFrameDelta(H.zoom)};fe.draw(D,B.TRIANGLES,re,br.disabled,Q,Er.backCCW,je,ke,Re,"terrain",De.vertexBuffer,De.indexBuffer,De.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain),function(I,T){const D=I.context,B=D.gl,H=I.transform,Q=Or.unblended,re=new Tn(B.LEQUAL,Tn.ReadWrite,[0,1]),ie=T.getCoordsTexture(),fe=T.sourceCache.getRenderableTiles(),_e=I.useProgram("terrainCoords");D.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,I.width/devicePixelRatio,I.height/devicePixelRatio]),D.clear({color:s.b7.transparent,depth:1}),T.coordsIndex=[];for(const De of fe){const ke=T.getTerrainMesh(De.tileID),Re=T.getTerrainData(De.tileID);D.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,ie.texture);const je={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(H.zoom)},We=H.getProjectionData({overscaledTileID:De.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});_e.draw(D,B.TRIANGLES,re,br.disabled,Q,Er.backCCW,je,Re,We,"terrain",ke.vertexBuffer,ke.indexBuffer,ke.segments),T.coordsIndex.push(De.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,I.width,I.height])}(this,this.style.map.terrain))}renderLayer(r,c,m,v,I){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,s.c1(m)?function(T,D,B,H,Q,re){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:ie}=re,fe=br.disabled,_e=T.colorModeForRenderPass();(B._unevaluatedLayout.hasValue("text-variable-anchor")||B._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(De,ke,Re,je,We,Ke,Je,at,nt){const xt=ke.transform,Ct=ke.style.map.terrain,vt=We==="map",jt=Ke==="map";for(const zt of De){const ln=je.getTile(zt),nn=ln.getBucket(Re);if(!nn||!nn.text||!nn.text.segments.get().length)continue;const Kt=s.ak(nn.textSizeData,xt.zoom),kn=s.az(ln,1,ke.transform.zoom),Hn=Vn(vt,ke.transform,kn),Zn=Re.layout.get("icon-text-fit")!=="none"&&nn.hasIconData();if(Kt){const Jr=Math.pow(2,xt.zoom-ln.tileID.overscaledZ),Lr=Ct?(oi,ni)=>Ct.getElevation(zt,oi,ni):null;zd(nn,vt,jt,nt,xt,Hn,Jr,Kt,Zn,s.aA(xt,ln,Je,at),zt.toUnwrapped(),Lr)}}}(H,T,B,D,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),Q),B.paint.get("icon-opacity").constantOr(1)!==0&&Bd(T,D,B,H,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),fe,_e,ie),B.paint.get("text-opacity").constantOr(1)!==0&&Bd(T,D,B,H,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),fe,_e,ie),D.map.showCollisionBoxes&&(Sc(T,D,B,H,!0),Sc(T,D,B,H,!1))}(r,c,m,v,this.style.placement.variableOffsets,I):s.c2(m)?function(T,D,B,H,Q){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:re}=Q,ie=B.paint.get("circle-opacity"),fe=B.paint.get("circle-stroke-width"),_e=B.paint.get("circle-stroke-opacity"),De=!B.layout.get("circle-sort-key").isConstant();if(ie.constantOr(1)===0&&(fe.constantOr(1)===0||_e.constantOr(1)===0))return;const ke=T.context,Re=ke.gl,je=T.transform,We=T.getDepthModeForSublayer(0,Tn.ReadOnly),Ke=br.disabled,Je=T.colorModeForRenderPass(),at=[],nt=je.getCircleRadiusCorrection();for(let xt=0;xt<H.length;xt++){const Ct=H[xt],vt=D.getTile(Ct),jt=vt.getBucket(B);if(!jt)continue;const zt=B.paint.get("circle-translate"),ln=B.paint.get("circle-translate-anchor"),nn=s.aA(je,vt,zt,ln),Kt=jt.programConfigurations.get(B.id),kn=T.useProgram("circle",Kt),Hn=jt.layoutVertexBuffer,Zn=jt.indexBuffer,Jr=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Ct),Lr={programConfiguration:Kt,program:kn,layoutVertexBuffer:Hn,indexBuffer:Zn,uniformValues:up(T,vt,B,nn,nt),terrainData:Jr,projectionData:je.getProjectionData({overscaledTileID:Ct,applyGlobeMatrix:!re,applyTerrainMatrix:!0})};if(De){const oi=jt.segments.get();for(const ni of oi)at.push({segments:new s.aJ([ni]),sortKey:ni.sortKey,state:Lr})}else at.push({segments:jt.segments,sortKey:0,state:Lr})}De&&at.sort((xt,Ct)=>xt.sortKey-Ct.sortKey);for(const xt of at){const{programConfiguration:Ct,program:vt,layoutVertexBuffer:jt,indexBuffer:zt,uniformValues:ln,terrainData:nn,projectionData:Kt}=xt.state;vt.draw(ke,Re.TRIANGLES,We,Ke,Je,Er.backCCW,ln,nn,Kt,B.id,jt,zt,xt.segments,B.paint,T.transform.zoom,Ct)}}(r,c,m,v,I):s.c3(m)?function(T,D,B,H,Q){if(B.paint.get("heatmap-opacity")===0)return;const re=T.context,{isRenderingToTexture:ie,isRenderingGlobe:fe}=Q;if(T.style.map.terrain){for(const _e of H){const De=D.getTile(_e);D.hasRenderableParent(_e)||(T.renderPass==="offscreen"?Ec(T,De,B,_e,fe):T.renderPass==="translucent"&&vp(T,B,_e,ie,fe))}re.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(_e,De,ke,Re){const je=_e.context,We=je.gl,Ke=_e.transform,Je=br.disabled,at=new Or([We.ONE,We.ONE],s.b7.transparent,[!0,!0,!0,!0]);(function(nt,xt,Ct){const vt=nt.gl;nt.activeTexture.set(vt.TEXTURE1),nt.viewport.set([0,0,xt.width/4,xt.height/4]);let jt=Ct.heatmapFbos.get(s.bU);jt?(vt.bindTexture(vt.TEXTURE_2D,jt.colorAttachment.get()),nt.bindFramebuffer.set(jt.framebuffer)):(jt=_p(nt,xt.width/4,xt.height/4),Ct.heatmapFbos.set(s.bU,jt))})(je,_e,ke),je.clear({color:s.b7.transparent});for(let nt=0;nt<Re.length;nt++){const xt=Re[nt];if(De.hasRenderableParent(xt))continue;const Ct=De.getTile(xt),vt=Ct.getBucket(ke);if(!vt)continue;const jt=vt.programConfigurations.get(ke.id),zt=_e.useProgram("heatmap",jt),ln=Ke.getProjectionData({overscaledTileID:xt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),nn=Ke.getCircleRadiusCorrection();zt.draw(je,We.TRIANGLES,Tn.disabled,Je,at,Er.backCCW,wh(Ct,Ke.zoom,ke.paint.get("heatmap-intensity"),nn),null,ln,ke.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,ke.paint,Ke.zoom,jt)}je.viewport.set([0,0,_e.width,_e.height])}(T,D,B,H):T.renderPass==="translucent"&&function(_e,De){const ke=_e.context,Re=ke.gl;ke.setColorMode(_e.colorModeForRenderPass());const je=De.heatmapFbos.get(s.bU);je&&(ke.activeTexture.set(Re.TEXTURE0),Re.bindTexture(Re.TEXTURE_2D,je.colorAttachment.get()),ke.activeTexture.set(Re.TEXTURE1),Tc(ke,De).bind(Re.LINEAR,Re.CLAMP_TO_EDGE),_e.useProgram("heatmapTexture").draw(ke,Re.TRIANGLES,Tn.disabled,br.disabled,_e.colorModeForRenderPass(),Er.disabled,dp(_e,De,0,1),null,null,De.id,_e.viewportBuffer,_e.quadTriangleIndexBuffer,_e.viewportSegments,De.paint,_e.transform.zoom))}(T,B)}(r,c,m,v,I):s.c4(m)?function(T,D,B,H,Q){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:re}=Q,ie=B.paint.get("line-opacity"),fe=B.paint.get("line-width");if(ie.constantOr(1)===0||fe.constantOr(1)===0)return;const _e=T.getDepthModeForSublayer(0,Tn.ReadOnly),De=T.colorModeForRenderPass(),ke=B.paint.get("line-dasharray"),Re=B.paint.get("line-pattern"),je=Re.constantOr(1),We=B.paint.get("line-gradient"),Ke=B.getCrossfadeParameters(),Je=je?"linePattern":ke?"lineSDF":We?"lineGradient":"line",at=T.context,nt=at.gl,xt=T.transform;let Ct=!0;for(const vt of H){const jt=D.getTile(vt);if(je&&!jt.patternsLoaded())continue;const zt=jt.getBucket(B);if(!zt)continue;const ln=zt.programConfigurations.get(B.id),nn=T.context.program.get(),Kt=T.useProgram(Je,ln),kn=Ct||Kt.program!==nn,Hn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(vt),Zn=Re.constantOr(null);if(Zn&&jt.imageAtlas){const or=jt.imageAtlas,pr=or.patternPositions[Zn.to.toString()],Zi=or.patternPositions[Zn.from.toString()];pr&&Zi&&ln.setConstantPatternPositions(pr,Zi)}const Jr=xt.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),Lr=xt.getPixelScale(),oi=je?$m(T,jt,B,Lr,Ke):ke?Td(T,jt,B,Lr,ke,Ke):We?xc(T,jt,B,Lr,zt.lineClipsArray.length):Wl(T,jt,B,Lr);if(je)at.activeTexture.set(nt.TEXTURE0),jt.imageAtlasTexture.bind(nt.LINEAR,nt.CLAMP_TO_EDGE),ln.updatePaintBuffers(Ke);else if(ke&&(kn||T.lineAtlas.dirty))at.activeTexture.set(nt.TEXTURE0),T.lineAtlas.bind(at);else if(We){const or=zt.gradients[B.id];let pr=or.texture;if(B.gradientVersion!==or.version){let Zi=256;if(B.stepInterpolant){const Wi=D.getSource().maxzoom,qi=vt.canonical.z===Wi?Math.ceil(1<<T.transform.maxZoom-vt.canonical.z):1;Zi=s.ae(s.bV(zt.maxLineLength/s.Z*1024*qi),256,at.maxTextureSize)}or.gradient=s.bW({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:Zi,image:or.gradient||void 0,clips:zt.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new q(at,or.gradient,nt.RGBA),or.version=B.gradientVersion,pr=or.texture}at.activeTexture.set(nt.TEXTURE0),pr.bind(B.stepInterpolant?nt.NEAREST:nt.LINEAR,nt.CLAMP_TO_EDGE)}let ni;if(re){const[or]=T.getStencilConfigForOverlapAndUpdateStencilID(H);ni=or[vt.overscaledZ]}else ni=T.stencilModeForClipping(vt);Kt.draw(at,nt.TRIANGLES,_e,ni,De,Er.disabled,oi,Hn,Jr,B.id,zt.layoutVertexBuffer,zt.indexBuffer,zt.segments,B.paint,T.transform.zoom,ln,zt.layoutVertexBuffer2),Ct=!1}}(r,c,m,v,I):s.c5(m)?function(T,D,B,H,Q){const re=B.paint.get("fill-color"),ie=B.paint.get("fill-opacity");if(ie.constantOr(1)===0)return;const{isRenderingToTexture:fe}=Q,_e=T.colorModeForRenderPass(),De=B.paint.get("fill-pattern"),ke=T.opaquePassEnabledForLayer()&&!De.constantOr(1)&&re.constantOr(s.b7.transparent).a===1&&ie.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===ke){const Re=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?Tn.ReadWrite:Tn.ReadOnly);bp(T,D,B,H,Re,_e,!1,fe)}if(T.renderPass==="translucent"&&B.paint.get("fill-antialias")){const Re=T.getDepthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,Tn.ReadOnly);bp(T,D,B,H,Re,_e,!0,fe)}}(r,c,m,v,I):s.c6(m)?function(T,D,B,H,Q){const re=B.paint.get("fill-extrusion-opacity");if(re===0)return;const{isRenderingToTexture:ie}=Q;if(T.renderPass==="translucent"){const fe=new Tn(T.context.gl.LEQUAL,Tn.ReadWrite,T.depthRangeFor3D);if(re!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Pi(T,D,B,H,fe,br.disabled,Or.disabled,ie),Pi(T,D,B,H,fe,T.stencilModeFor3D(),T.colorModeForRenderPass(),ie);else{const _e=T.colorModeForRenderPass();Pi(T,D,B,H,fe,br.disabled,_e,ie)}}}(r,c,m,v,I):s.c7(m)?function(T,D,B,H,Q){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:re}=Q,ie=T.context,fe=T.style.projection.useSubdivision,_e=T.getDepthModeForSublayer(0,Tn.ReadOnly),De=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(ke,Re,je,We,Ke,Je,at){const nt=ke.context,xt=nt.gl;for(const Ct of je){const vt=Re.getTile(Ct),jt=vt.dem;if(!jt||!jt.data||!vt.needsHillshadePrepare)continue;const zt=jt.dim,ln=jt.stride,nn=jt.getPixels();if(nt.activeTexture.set(xt.TEXTURE1),nt.pixelStoreUnpackPremultiplyAlpha.set(!1),vt.demTexture=vt.demTexture||ke.getTileTexture(ln),vt.demTexture){const kn=vt.demTexture;kn.update(nn,{premultiply:!1}),kn.bind(xt.NEAREST,xt.CLAMP_TO_EDGE)}else vt.demTexture=new q(nt,nn,xt.RGBA,{premultiply:!1}),vt.demTexture.bind(xt.NEAREST,xt.CLAMP_TO_EDGE);nt.activeTexture.set(xt.TEXTURE0);let Kt=vt.fbo;if(!Kt){const kn=new q(nt,{width:zt,height:zt,data:null},xt.RGBA);kn.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),Kt=vt.fbo=nt.createFramebuffer(zt,zt,!0,!1),Kt.colorAttachment.set(kn.texture)}nt.bindFramebuffer.set(Kt.framebuffer),nt.viewport.set([0,0,zt,zt]),ke.useProgram("hillshadePrepare").draw(nt,xt.TRIANGLES,Ke,Je,at,Er.disabled,ns(vt.tileID,jt),null,null,We.id,ke.rasterBoundsBuffer,ke.quadTriangleIndexBuffer,ke.rasterBoundsSegments),vt.needsHillshadePrepare=!1}})(T,D,H,B,_e,br.disabled,De),ie.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(fe){const[ke,Re,je]=T.stencilConfigForOverlapTwoPass(H);ji(T,D,B,je,ke,_e,De,!1,re),ji(T,D,B,je,Re,_e,De,!0,re)}else{const[ke,Re]=T.getStencilConfigForOverlapAndUpdateStencilID(H);ji(T,D,B,Re,ke,_e,De,!1,re)}}(r,c,m,v,I):s.c8(m)?function(T,D,B,H,Q){if(T.renderPass!=="translucent"||B.paint.get("raster-opacity")===0||!H.length)return;const{isRenderingToTexture:re}=Q,ie=D.getSource(),fe=T.style.projection.useSubdivision;if(ie instanceof tt)Vd(T,D,B,H,null,!1,!1,ie.tileCoords,ie.flippedWindingOrder,re);else if(fe){const[_e,De,ke]=T.stencilConfigForOverlapTwoPass(H);Vd(T,D,B,ke,_e,!1,!0,Sh,!1,re),Vd(T,D,B,ke,De,!0,!0,Sh,!1,re)}else{const[_e,De]=T.getStencilConfigForOverlapAndUpdateStencilID(H);Vd(T,D,B,De,_e,!1,!0,Sh,!1,re)}}(r,c,m,v,I):s.c9(m)?function(T,D,B,H,Q){const re=B.paint.get("background-color"),ie=B.paint.get("background-opacity");if(ie===0)return;const{isRenderingToTexture:fe}=Q,_e=T.context,De=_e.gl,ke=T.style.projection,Re=T.transform,je=Re.tileSize,We=B.paint.get("background-pattern");if(T.isPatternMissing(We))return;const Ke=!We&&re.a===1&&ie===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==Ke)return;const Je=br.disabled,at=T.getDepthModeForSublayer(0,Ke==="opaque"?Tn.ReadWrite:Tn.ReadOnly),nt=T.colorModeForRenderPass(),xt=T.useProgram(We?"backgroundPattern":"background"),Ct=H||Ze(Re,{tileSize:je,terrain:T.style.map.terrain});We&&(_e.activeTexture.set(De.TEXTURE0),T.imageManager.bind(T.context));const vt=B.getCrossfadeParameters();for(const jt of Ct){const zt=Re.getProjectionData({overscaledTileID:jt,applyGlobeMatrix:!fe,applyTerrainMatrix:!0}),ln=We?No(ie,T,We,{tileID:jt,tileSize:je},vt):Ac(ie,re),nn=T.style.map.terrain&&T.style.map.terrain.getTerrainData(jt),Kt=ke.getMeshFromTileID(_e,jt.canonical,!1,!0,"raster");xt.draw(_e,De.TRIANGLES,at,Je,nt,Er.backCCW,ln,nn,zt,B.id,Kt.vertexBuffer,Kt.indexBuffer,Kt.segments)}}(r,0,m,v,I):s.ca(m)&&function(T,D,B,H){const{isRenderingGlobe:Q}=H,re=T.context,ie=B.implementation,fe=T.style.projection,_e=T.transform,De=_e.getProjectionDataForCustomLayer(Q),ke={farZ:_e.farZ,nearZ:_e.nearZ,fov:_e.fov*Math.PI/180,modelViewProjectionMatrix:_e.modelViewProjectionMatrix,projectionMatrix:_e.projectionMatrix,shaderData:{variantName:fe.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${fe.shaderPreludeCode.vertexSource}`,define:fe.shaderDefine},defaultProjectionData:De},Re=ie.renderingMode?ie.renderingMode:"2d";if(T.renderPass==="offscreen"){const je=ie.prerender;je&&(T.setCustomLayerDefaults(),re.setColorMode(T.colorModeForRenderPass()),je.call(ie,re.gl,ke),re.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),re.setColorMode(T.colorModeForRenderPass()),re.setStencilMode(br.disabled);const je=Re==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,Tn.ReadOnly);re.setDepthMode(je),ie.render(re.gl,ke),re.setDirty(),T.setBaseState(),re.bindFramebuffer.set(null)}}(r,0,m,I))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),m=this.imageManager.getPattern(r.to.toString());return!c||!m}useProgram(r,c,m=!1){this.cache=this.cache||{};const v=!!this.style.map.terrain,I=this.style.projection,T=r+(c?c.cacheKey:"")+`/${m?Cs:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"");return this.cache[T]||(this.cache[T]=new bc(this.context,Jn[r],c,wc[r],this._showOverdrawInspector,v,m?Jn.projectionMercator:I.shaderPreludeCode,m?Hs:I.shaderDefine)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function Cp(w,r){let c,m=!1,v=null,I=null;const T=()=>{v=null,m&&(w.apply(I,c),v=setTimeout(T,r),m=!1)};return(...D)=>(m=!0,I=this,c=D,v||T(),v)}class Ip{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let m;return c.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(m=v)}),(m&&m[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const m=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const m=c.join("/");let v=m;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${m}`);let I=window.location.hash.replace(v,"");I.startsWith("#&")?I=I.slice(0,1)+I.slice(2):I==="#"&&(I="");let T=window.location.href.replace(/(#.+)?$/,I);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=Cp(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,v),T=Math.round(c.lng*I)/I,D=Math.round(c.lat*I)/I,B=this._map.getBearing(),H=this._map.getPitch();let Q="";if(Q+=r?`/${T}/${D}/${m}`:`${m}/${D}/${T}`,(B||H)&&(Q+="/"+Math.round(10*B)/10),H&&(Q+=`/${Math.round(H)}`),this._hashName){const re=this._hashName;let ie=!1;const fe=window.location.hash.slice(1).split("&").map(_e=>{const De=_e.split("=")[0];return De===re?(ie=!0,`${De}=${Q}`):_e}).filter(_e=>_e);return ie||fe.push(`${re}=${Q}`),`#${fe.join("&")}`}return`#${Q}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new s.Q(+r[2],+r[1])}catch{return!1}const c=+r[0],m=+(r[3]||0),v=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&m>=-180&&m<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const oa={linearity:.3,easing:s.cb(0,0,.3,1)},Pc=s.e({deceleration:2500,maxSpeed:1400},oa),Mp=s.e({deceleration:20,maxSpeed:1400},oa),Ce=s.e({deceleration:1e3,maxSpeed:360},oa),Nu=s.e({deceleration:1e3,maxSpeed:90},oa),Th=s.e({deceleration:1e3,maxSpeed:360},oa);class xa{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:M.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=M.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:I}of this._inertiaBuffer)c.zoom+=I.zoomDelta||0,c.bearing+=I.bearingDelta||0,c.pitch+=I.pitchDelta||0,c.roll+=I.rollDelta||0,I.panDelta&&c.pan._add(I.panDelta),I.around&&(c.around=I.around),I.pinchAround&&(c.pinchAround=I.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(c.pan.mag()){const I=Xl(c.pan.mag(),m,s.e({},Pc,r||{})),T=c.pan.mult(I.amount/c.pan.mag()),D=this._map.cameraHelper.handlePanInertia(T,this._map.transform);v.center=D.easingCenter,v.offset=D.easingOffset,ur(v,I)}if(c.zoom){const I=Xl(c.zoom,m,Mp);v.zoom=this._map.transform.zoom+I.amount,ur(v,I)}if(c.bearing){const I=Xl(c.bearing,m,Ce);v.bearing=this._map.transform.bearing+s.ae(I.amount,-179,179),ur(v,I)}if(c.pitch){const I=Xl(c.pitch,m,Nu);v.pitch=this._map.transform.pitch+I.amount,ur(v,I)}if(c.roll){const I=Xl(c.roll,m,Th);v.roll=this._map.transform.roll+s.ae(I.amount,-179,179),ur(v,I)}if(v.zoom||v.bearing){const I=c.pinchAround===void 0?c.around:c.pinchAround;v.around=I?this._map.unproject(I):this._map.getCenter()}return this.clear(),s.e(v,{noMoveStart:!0})}}function ur(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function Xl(w,r,c){const{maxSpeed:m,linearity:v,deceleration:I}=c,T=s.ae(w*v/(r/1e3),-m,m),D=Math.abs(T)/(I*v);return{easing:c.easing,duration:1e3*D,amount:T*(D/2)}}class la extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m,v={}){m=m instanceof MouseEvent?m:new MouseEvent(r,m);const I=A.mousePos(c.getCanvas(),m),T=c.unproject(I);super(r,s.e({point:I,lngLat:T,originalEvent:m},v)),this._defaultPrevented=!1,this.target=c}}class qs extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){const v=r==="touchend"?m.changedTouches:m.touches,I=A.touchPos(c.getCanvasContainer(),v),T=I.map(B=>c.unproject(B)),D=I.reduce((B,H,Q,re)=>B.add(H.div(re.length)),new s.P(0,0));super(r,{points:I,point:D,lngLats:T,lngLat:c.unproject(D),originalEvent:m}),this._defaultPrevented=!1}}class Ms extends s.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,m){super(r,{originalEvent:m}),this._defaultPrevented=!1}}class tg{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Ms(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new la(r.type,this._map,r))}mouseup(r){this._map.fire(new la(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new la(r.type,this._map,r))}dblclick(r){return this._firePreventable(new la(r.type,this._map,r))}mouseover(r){this._map.fire(new la(r.type,this._map,r))}mouseout(r){this._map.fire(new la(r.type,this._map,r))}touchstart(r){return this._firePreventable(new qs(r.type,this._map,r))}touchmove(r){this._map.fire(new qs(r.type,this._map,r))}touchend(r){this._map.fire(new qs(r.type,this._map,r))}touchcancel(r){this._map.fire(new qs(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Uo{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new la(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new la("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new la(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $o{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(s.P.convert(r),this._map.terrain)}}class ng{constructor(r,c){this._map=r,this._tr=new $o(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(A.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const m=c;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=A.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const I=Math.min(v.x,m.x),T=Math.max(v.x,m.x),D=Math.min(v.y,m.y),B=Math.max(v.y,m.y);A.setTransform(this._box,`translate(${I}px,${D}px)`),this._box.style.width=T-I+"px",this._box.style.height=B-D+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const m=this._startPos,v=c;if(this.reset(),A.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new s.l("boxzoomend",{originalEvent:r})),{cameraAnimation:I=>I.fitScreenCoordinates(m,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new s.l(r,{originalEvent:c}))}}function Sp(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const c={};for(let m=0;m<w.length;m++)c[w[m].identifier]=r[m];return c}class hl{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const I=new s.P(0,0);for(const T of v)I._add(T);return I.div(v.length)}(c),this.touches=Sp(m,c)))}touchmove(r,c,m){if(this.aborted||!this.centroid)return;const v=Sp(m,c);for(const I in this.touches){const T=v[I];(!T||T.dist(this.touches[I])>30)&&(this.aborted=!0)}}touchend(r,c,m){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ep{constructor(r){this.singleTap=new hl(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,m){this.singleTap.touchstart(r,c,m)}touchmove(r,c,m){this.singleTap.touchmove(r,c,m)}touchend(r,c,m){const v=this.singleTap.touchend(r,c,m);if(v){const I=r.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(v)<30;if(I&&T||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class rg{constructor(r){this._tr=new $o(r),this._zoomIn=new Ep({numTouches:1,numTaps:2}),this._zoomOut=new Ep({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,m){this._zoomIn.touchstart(r,c,m),this._zoomOut.touchstart(r,c,m)}touchmove(r,c,m){this._zoomIn.touchmove(r,c,m),this._zoomOut.touchmove(r,c,m)}touchend(r,c,m){const v=this._zoomIn.touchend(r,c,m),I=this._zoomOut.touchend(r,c,m),T=this._tr;return v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(v)},{originalEvent:r})}):I?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(I)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const m=this._lastPoint;if(!m)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const v=Array.isArray(c)?c[0]:c;return!this._moved&&v.dist(m)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(m,v))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&A.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const fl={0:1,2:2};class yn{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=A.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,m){const v=fl[m];return c.buttons===void 0||(c.buttons&v)!==v}(r,this._eventButton)}isValidEndEvent(r){return A.mouseButton(r)===this._eventButton}}class Ho{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Tp{constructor(r=new yn({checkCorrectEvent:()=>!0}),c=new Ho){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,m){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?m(r):void 0}startMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(r){this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(r){return this._executeRelevantHandler(r,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}const Ph=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}};class kh{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,m){return this._calculateTransform(r,c,m)}touchmove(r,c,m){if(this._active){if(!this._shouldBePrevented(m.length))return r.preventDefault(),this._calculateTransform(r,c,m);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,m){this._calculateTransform(r,c,m),this._active&&this._shouldBePrevented(m.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,m){m.length>0&&(this._active=!0);const v=Sp(m,c),I=new s.P(0,0),T=new s.P(0,0);let D=0;for(const H in v){const Q=v[H],re=this._touches[H];re&&(I._add(Q),T._add(Q.sub(re)),D++,v[H]=Q)}if(this._touches=v,this._shouldBePrevented(D)||!T.mag())return;const B=T.div(D);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:I.div(D),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,m){if(!this._firstTwoTouches)return;r.preventDefault();const[v,I]=this._firstTwoTouches,T=Lh(m,c,v),D=Lh(m,c,I);if(!T||!D)return;const B=this._aroundCenter?null:T.add(D).div(2);return this._move([T,D],B,r)}touchend(r,c,m){if(!this._firstTwoTouches)return;const[v,I]=this._firstTwoTouches,T=Lh(m,c,v),D=Lh(m,c,I);T&&D||(this._active&&A.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Lh(w,r,c){for(let m=0;m<w.length;m++)if(w[m].identifier===c)return r[m]}function er(w,r){return Math.log(w/r)/Math.LN2}class jd extends Vu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const m=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(er(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:er(this._distance,m),pinchAround:c}}}function ig(w,r){return 180*w.angleWith(r)/Math.PI}class ua extends Vu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,m){const v=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ig(this._vector,v),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,m=ig(r,this._startVector);return Math.abs(m)<c}}function Pp(w){return Math.abs(w.y)>Math.abs(w.x)}class sg extends Vu{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,m){super.touchstart(r,c,m),this._currentTouchCount=m.length}_start(r){this._lastPoints=r,Pp(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,m){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=r[0].sub(this._lastPoints[0]),I=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,I,m.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(v.y+I.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,m){if(this._valid!==void 0)return this._valid;const v=r.mag()>=2,I=c.mag()>=2;if(!v&&!I)return;if(!v||!I)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const T=r.y>0==c.y>0;return Pp(r)&&Pp(c)&&T}}const ag={panStep:100,bearingStep:15,pitchStep:10};class Ud{constructor(r){this._tr=new $o(r);const c=ag;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,m=0,v=0,I=0,T=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?m=-1:(r.preventDefault(),I=-1);break;case 39:r.shiftKey?m=1:(r.preventDefault(),I=1);break;case 38:r.shiftKey?v=1:(r.preventDefault(),T=-1);break;case 40:r.shiftKey?v=-1:(r.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:D=>{const B=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:og,zoom:c?Math.round(B.zoom)+c*(r.shiftKey?2:1):B.zoom,bearing:B.bearing+m*this._bearingStep,pitch:B.pitch+v*this._pitchStep,offset:[-I*this._panStep,-T*this._panStep],center:B.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function og(w){return w*(2-w)}const kp=4.000244140625;class $d{constructor(r,c){this._onTimeout=m=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},this._map=r,this._tr=new $o(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const m=M.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%kp==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(v*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=A.mousePos(this._map.getCanvas(),r),m=this._tr;this._aroundPoint=this._aroundCenter?m.transform.locationToScreenPoint(s.Q.convert(m.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const D=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=D),typeof this._targetZoom=="number"&&(this._targetZoom+=D)}if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>kp?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&B!==0&&(B=1/B);const H=typeof this._targetZoom!="number"?r.scale:s.ac(this._targetZoom);this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,s.ah(H*B))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,m=this._startZoom,v=this._easing;let I,T=!1;if(this._type==="wheel"&&m&&v){const D=M.now()-this._lastWheelEventTime,B=Math.min((D+5)/200,1),H=v(B);I=s.B.number(m,c,H),B<1?this._frameId||(this._frameId=!0):T=!0}else I=c,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=I,{noInertia:!0,needsRenderFrame:!T,zoomDelta:I-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=s.cd;if(this._prevEase){const m=this._prevEase,v=(M.now()-m.start)/m.duration,I=m.easing(v+.01)-m.easing(v),T=.27/Math.sqrt(I*I+1e-4)*.01,D=Math.sqrt(.0729-T*T);c=s.cb(T,D,.25,1)}return this._prevEase={start:M.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class lg{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class cv{constructor(r){this._tr=new $o(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Go{constructor(){this._tap=new Ep({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,m){if(!this._swipePoint)if(this._tapTime){const v=c[0],I=r.timeStamp-this._tapTime<500,T=this._tapPoint.dist(v)<30;I&&T?m.length>0&&(this._swipePoint=v,this._swipeTouch=m[0].identifier):this.reset()}else this._tap.touchstart(r,c,m)}touchmove(r,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=c[0],I=v.y-this._swipePoint.y;return this._swipePoint=v,r.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(r,c,m)}touchend(r,c,m){if(this._tapTime)this._swipePoint&&m.length===0&&this.reset();else{const v=this._tap.touchend(r,c,m);v&&(this._tapTime=r.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zr{constructor(r,c,m){this._el=r,this._mousePan=c,this._touchPan=m}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ql{constructor(r,c,m,v){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=m,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Hd{constructor(r,c,m,v){this._el=r,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Gd{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=A.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const m=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=c,this._container.appendChild(v);const I=document.createElement("div");I.className="maplibregl-mobile-message",I.textContent=m,this._container.appendChild(I),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(A.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new s.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Dh=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class Zo extends s.l{}function Rh(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Os{constructor(r,c){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,I)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=v.type==="renderFrame"?void 0:v,D={needsRenderFrame:!1},B={},H={};for(const{handlerName:ie,handler:fe,allowed:_e}of this._handlers){if(!fe.isEnabled())continue;let De;if(this._blockedByActive(H,_e,ie))fe.reset();else if(fe[I||v.type]){if(s.ce(v,I||v.type)){const ke=A.mousePos(this._map.getCanvas(),v);De=fe[I||v.type](v,ke)}else if(s.cf(v,I||v.type)){const ke=this._getMapTouches(v.touches),Re=A.touchPos(this._map.getCanvas(),ke);De=fe[I||v.type](v,Re,ke)}else s.cg(I||v.type)||(De=fe[I||v.type](v));this.mergeHandlerResult(D,B,De,ie,T),De&&De.needsRenderFrame&&this._triggerRenderFrame()}(De||fe.isActive())&&(H[ie]=fe)}const Q={};for(const ie in this._previousActiveHandlers)H[ie]||(Q[ie]=T);this._previousActiveHandlers=H,(Object.keys(Q).length||Rh(D))&&(this._changes.push([D,B,Q]),this._triggerRenderFrame()),(Object.keys(H).length||Rh(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=D;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xa(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,I,T]of this._listeners)A.addEventListener(v,I,v===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[r,c,m]of this._listeners)A.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(r){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new tg(c,r));const v=c.boxZoom=new ng(c,r);this._add("boxZoom",v),r.interactive&&r.boxZoom&&v.enable();const I=c.cooperativeGestures=new Gd(c,r.cooperativeGestures);this._add("cooperativeGestures",I),r.cooperativeGestures&&I.enable();const T=new rg(c),D=new cv(c);c.doubleClickZoom=new lg(D,T),this._add("tapZoom",T),this._add("clickZoom",D),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const B=new Go;this._add("tapDragZoom",B);const H=c.touchPitch=new sg(c);this._add("touchPitch",H),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const Q=()=>c.project(c.getCenter()),re=function({enable:Ke,clickTolerance:Je,aroundCenter:at=!0,minPixelCenterThreshold:nt=100,rotateDegreesPerPixelMoved:xt=.8},Ct){const vt=new yn({checkCorrectEvent:jt=>A.mouseButton(jt)===0&&jt.ctrlKey||A.mouseButton(jt)===2&&!jt.ctrlKey});return new dl({clickTolerance:Je,move:(jt,zt)=>{const ln=Ct();if(at&&Math.abs(ln.y-jt.y)>nt)return{bearingDelta:s.cc(new s.P(jt.x,zt.y),zt,ln)};let nn=(zt.x-jt.x)*xt;return at&&zt.y<ln.y&&(nn=-nn),{bearingDelta:nn}},moveStateManager:vt,enable:Ke,assignEvents:Ph})}(r,Q),ie=function({enable:Ke,clickTolerance:Je,pitchDegreesPerPixelMoved:at=-.5}){const nt=new yn({checkCorrectEvent:xt=>A.mouseButton(xt)===0&&xt.ctrlKey||A.mouseButton(xt)===2});return new dl({clickTolerance:Je,move:(xt,Ct)=>({pitchDelta:(Ct.y-xt.y)*at}),moveStateManager:nt,enable:Ke,assignEvents:Ph})}(r),fe=function({enable:Ke,clickTolerance:Je,rollDegreesPerPixelMoved:at=.3},nt){const xt=new yn({checkCorrectEvent:Ct=>A.mouseButton(Ct)===2&&Ct.ctrlKey});return new dl({clickTolerance:Je,move:(Ct,vt)=>{const jt=nt();let zt=(vt.x-Ct.x)*at;return vt.y<jt.y&&(zt=-zt),{rollDelta:zt}},moveStateManager:xt,enable:Ke,assignEvents:Ph})}(r,Q);c.dragRotate=new Ql(r,re,ie,fe),this._add("mouseRotate",re,["mousePitch"]),this._add("mousePitch",ie,["mouseRotate","mouseRoll"]),this._add("mouseRoll",fe,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const _e=function({enable:Ke,clickTolerance:Je}){const at=new yn({checkCorrectEvent:nt=>A.mouseButton(nt)===0&&!nt.ctrlKey});return new dl({clickTolerance:Je,move:(nt,xt)=>({around:xt,panDelta:xt.sub(nt)}),activateOnStart:!0,moveStateManager:at,enable:Ke,assignEvents:Ph})}(r),De=new kh(r,c);c.dragPan=new Zr(m,_e,De),this._add("mousePan",_e),this._add("touchPan",De,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const ke=new ua,Re=new jd;c.touchZoomRotate=new Hd(m,Re,ke,B),this._add("touchRotate",ke,["touchPan","touchZoom"]),this._add("touchZoom",Re,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const je=c.scrollZoom=new $d(c,()=>this._triggerRenderFrame());this._add("scrollZoom",je,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const We=c.keyboard=new Ud(c);this._add("keyboard",We),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Uo(c))}_add(r,c,m){this._handlers.push({handlerName:r,handler:c,allowed:m}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Dh(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,m){for(const v in r)if(v!==m&&(!c||c.indexOf(v)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const m of r)this._el.contains(m.target)&&c.push(m);return c}mergeHandlerResult(r,c,m,v,I){if(!m)return;s.e(r,m);const T={handlerName:v,originalEvent:m.originalEvent||I};m.zoomDelta!==void 0&&(c.zoom=T),m.panDelta!==void 0&&(c.drag=T),m.rollDelta!==void 0&&(c.roll=T),m.pitchDelta!==void 0&&(c.pitch=T),m.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const r={},c={},m={};for(const[v,I,T]of this._changes)v.panDelta&&(r.panDelta=(r.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(r.rollDelta=(r.rollDelta||0)+v.rollDelta),v.around!==void 0&&(r.around=v.around),v.pinchAround!==void 0&&(r.pinchAround=v.pinchAround),v.noInertia&&(r.noInertia=v.noInertia),s.e(c,I),s.e(m,T);this._updateMapTransform(r,c,m),this._changes=[]}_updateMapTransform(r,c,m){const v=this._map,I=v._getTransformForUpdate(),T=v.terrain;if(!(Rh(r)||T&&this._terrainMovement))return this._fireEvents(c,m,!0);v._stop(!0);let{panDelta:D,zoomDelta:B,bearingDelta:H,pitchDelta:Q,rollDelta:re,around:ie,pinchAround:fe}=r;fe!==void 0&&(ie=fe),ie=ie||v.transform.centerPoint,T&&!I.isPointOnMapSurface(ie)&&(ie=I.centerPoint);const _e={panDelta:D,zoomDelta:B,rollDelta:re,pitchDelta:Q,bearingDelta:H,around:ie};this._map.cameraHelper.useGlobeControls&&!I.isPointOnMapSurface(ie)&&(ie=I.centerPoint);const De=ie.distSqr(I.centerPoint)<.01?I.center:I.screenPointToLocation(D?ie.sub(D):ie);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(_e,I),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?I.setCenter(I.screenPointToLocation(I.centerPoint.sub(D))):this._map.cameraHelper.handleMapControlsPan(_e,I,De):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(_e,I,De))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(_e,I),this._map.cameraHelper.handleMapControlsPan(_e,I,De)),v._applyUpdatedTransform(I),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,m,!0)}_fireEvents(r,c,m){const v=Dh(this._eventsInProgress),I=Dh(r),T={};for(const re in r){const{originalEvent:ie}=r[re];this._eventsInProgress[re]||(T[`${re}start`]=ie),this._eventsInProgress[re]=r[re]}!v&&I&&this._fireEvent("movestart",I.originalEvent);for(const re in T)this._fireEvent(re,T[re]);I&&this._fireEvent("move",I.originalEvent);for(const re in r){const{originalEvent:ie}=r[re];this._fireEvent(re,ie)}const D={};let B;for(const re in this._eventsInProgress){const{handlerName:ie,originalEvent:fe}=this._eventsInProgress[re];this._handlersById[ie].isActive()||(delete this._eventsInProgress[re],B=c[ie]||fe,D[`${re}end`]=B)}for(const re in D)this._fireEvent(re,D[re]);const H=Dh(this._eventsInProgress),Q=(v||I)&&!H;if(Q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const re=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&re.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(re)}if(m&&Q){this._updatingCamera=!0;const re=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ie=fe=>fe!==0&&-this._bearingSnap<fe&&fe<this._bearingSnap;!re||!re.essential&&M.prefersReducedMotion?(this._map.fire(new s.l("moveend",{originalEvent:B})),ie(this._map.getBearing())&&this._map.resetNorth()):(ie(re.bearing||this._map.getBearing())&&(re.bearing=0),re.freezeElevation=!0,this._map.easeTo(re,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new s.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Zo("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ks extends s.E{constructor(r,c,m){super(),this._renderFrameCallback=()=>{const v=Math.min((M.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=m.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new s.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,m){return r=s.P.convert(r).mult(-1),this.panTo(this.transform.center,s.e({offset:r},c),m)}panTo(r,c,m){return this.easeTo(s.e({center:r},c),m)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,m){return this.easeTo(s.e({zoom:r},c),m)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new s.l("movestart",c)).fire(new s.l("move",c)).fire(new s.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,m){return this.easeTo(s.e({bearing:r},c),m)}resetNorth(r,c){return this.rotateTo(0,s.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(s.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=$.convert(r).adjustAntiMeridian();const m=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),m,c)}_cameraForBoxAndBearing(r,c,m,v){const I={top:0,bottom:0,right:0,left:0};if(typeof(v=s.e({padding:I,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const H=v.padding;v.padding={top:H,bottom:H,right:H,left:H}}const T=s.e(I,v.padding);v.padding=T;const D=this.transform,B=new $(r,c);return this.cameraHelper.cameraForBoxAndBearing(v,T,B,m,D)}fitBounds(r,c,m){return this._fitInternal(this.cameraForBounds(r,c),c,m)}fitScreenCoordinates(r,c,m,v,I){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(s.P.convert(r)),this.transform.screenPointToLocation(s.P.convert(c)),m,v),v,I)}_fitInternal(r,c,m){return r?(delete(c=s.e(r,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(r,c){this.stop();const m=this._getTransformForUpdate();let v=!1,I=!1,T=!1;const D=m.zoom;this.cameraHelper.handleJumpToCenterZoom(m,r);const B=m.zoom!==D;return"elevation"in r&&m.elevation!==+r.elevation&&m.setElevation(+r.elevation),"bearing"in r&&m.bearing!==+r.bearing&&(v=!0,m.setBearing(+r.bearing)),"pitch"in r&&m.pitch!==+r.pitch&&(I=!0,m.setPitch(+r.pitch)),"roll"in r&&m.roll!==+r.roll&&(T=!0,m.setRoll(+r.roll)),r.padding==null||m.isPaddingEqual(r.padding)||m.setPadding(r.padding),this._applyUpdatedTransform(m),this.fire(new s.l("movestart",c)).fire(new s.l("move",c)),B&&this.fire(new s.l("zoomstart",c)).fire(new s.l("zoom",c)).fire(new s.l("zoomend",c)),v&&this.fire(new s.l("rotatestart",c)).fire(new s.l("rotate",c)).fire(new s.l("rotateend",c)),I&&this.fire(new s.l("pitchstart",c)).fire(new s.l("pitch",c)).fire(new s.l("pitchend",c)),T&&this.fire(new s.l("rollstart",c)).fire(new s.l("roll",c)).fire(new s.l("rollend",c)),this.fire(new s.l("moveend",c))}calculateCameraOptionsFromTo(r,c,m,v=0){const I=s.$.fromLngLat(r,c),T=s.$.fromLngLat(m,v),D=T.x-I.x,B=T.y-I.y,H=T.z-I.z,Q=Math.hypot(D,B,H);if(Q===0)throw new Error("Can't calculate camera options with same From and To");const re=Math.hypot(D,B),ie=s.ah(this.transform.cameraToCenterDistance/Q/this.transform.tileSize),fe=180*Math.atan2(D,-B)/Math.PI;let _e=180*Math.acos(re/Q)/Math.PI;return _e=H<0?90-_e:90+_e,{center:T.toLngLat(),elevation:v,zoom:ie,pitch:_e,bearing:fe}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,m,v,I){const T=this.transform.calculateCenterFromCameraLngLatAlt(r,c,m,v);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:m,pitch:v,roll:I}}easeTo(r,c){this._stop(!1,r.easeId),((r=s.e({offset:[0,0],duration:500,easing:s.cd},r)).animate===!1||!r.essential&&M.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),v=this.getBearing(),I=m.pitch,T=m.roll,D="bearing"in r?this._normalizeBearing(r.bearing,v):v,B="pitch"in r?+r.pitch:I,H="roll"in r?this._normalizeBearing(r.roll,T):T,Q="padding"in r?r.padding:m.padding,re=s.P.convert(r.offset);let ie,fe;r.around&&(ie=s.Q.convert(r.around),fe=m.locationToScreenPoint(ie));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},De=this.cameraHelper.handleEaseTo(m,{bearing:D,pitch:B,roll:H,padding:Q,around:ie,aroundPoint:fe,offsetAsPoint:re,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||v!==D,this._pitching=this._pitching||B!==I,this._rolling=this._rolling||H!==T,this._padding=!m.isPaddingEqual(Q),this._zooming=this._zooming||De.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,_e),this.terrain&&this._prepareElevation(De.elevationCenter),this._ease(ke=>{De.easeFunc(ke),this.terrain&&!r.freezeElevation&&this._updateElevation(ke),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},ke=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ke)},r),this}_prepareEase(r,c,m={}){this._moving=!0,c||m.moving||this.fire(new s.l("movestart",r)),this._zooming&&!m.zooming&&this.fire(new s.l("zoomstart",r)),this._rotating&&!m.rotating&&this.fire(new s.l("rotatestart",r)),this._pitching&&!m.pitching&&this.fire(new s.l("pitchstart",r)),this._rolling&&!m.rolling&&this.fire(new s.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const m=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(m-(c-(m*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(s.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),m=r.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(m<v){const I=this.calculateCameraOptionsFromTo(c,v,r.center,r.elevation);return{pitch:I.pitch,zoom:I.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push(v=>this._elevateCameraIfInsideTerrain(v)),this.transformCameraUpdate&&c.push(v=>this.transformCameraUpdate(v)),!c.length)return;const m=r.clone();for(const v of c){const I=m.clone(),{center:T,zoom:D,roll:B,pitch:H,bearing:Q,elevation:re}=v(I);T&&I.setCenter(T),re!==void 0&&I.setElevation(re),D!==void 0&&I.setZoom(D),B!==void 0&&I.setRoll(B),H!==void 0&&I.setPitch(H),Q!==void 0&&I.setBearing(Q),m.apply(I)}this.transform.apply(m)}_fireMoveEvents(r){this.fire(new s.l("move",r)),this._zooming&&this.fire(new s.l("zoom",r)),this._rotating&&this.fire(new s.l("rotate",r)),this._pitching&&this.fire(new s.l("pitch",r)),this._rolling&&this.fire(new s.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const m=this._zooming,v=this._rotating,I=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,m&&this.fire(new s.l("zoomend",r)),v&&this.fire(new s.l("rotateend",r)),I&&this.fire(new s.l("pitchend",r)),T&&this.fire(new s.l("rollend",r)),this.fire(new s.l("moveend",r))}flyTo(r,c){if(!r.essential&&M.prefersReducedMotion){const zt=s.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(zt,c)}this.stop(),r=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.cd},r);const m=this._getTransformForUpdate(),v=m.bearing,I=m.pitch,T=m.roll,D=m.padding,B="bearing"in r?this._normalizeBearing(r.bearing,v):v,H="pitch"in r?+r.pitch:I,Q="roll"in r?this._normalizeBearing(r.roll,T):T,re="padding"in r?r.padding:m.padding,ie=s.P.convert(r.offset);let fe=m.centerPoint.add(ie);const _e=m.screenPointToLocation(fe),De=this.cameraHelper.handleFlyTo(m,{bearing:B,pitch:H,roll:Q,padding:re,locationAtOffset:_e,offsetAsPoint:ie,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let ke=r.curve;const Re=Math.max(m.width,m.height),je=Re/De.scaleOfZoom,We=De.pixelPathLength;typeof De.scaleOfMinZoom=="number"&&(ke=Math.sqrt(Re/De.scaleOfMinZoom/We*2));const Ke=ke*ke;function Je(zt){const ln=(je*je-Re*Re+(zt?-1:1)*Ke*Ke*We*We)/(2*(zt?je:Re)*Ke*We);return Math.log(Math.sqrt(ln*ln+1)-ln)}function at(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function nt(zt){return(Math.exp(zt)+Math.exp(-zt))/2}const xt=Je(!1);let Ct=function(zt){return nt(xt)/nt(xt+ke*zt)},vt=function(zt){return Re*((nt(xt)*(at(ln=xt+ke*zt)/nt(ln))-at(xt))/Ke)/We;var ln},jt=(Je(!0)-xt)/ke;if(Math.abs(We)<2e-6||!isFinite(jt)){if(Math.abs(Re-je)<1e-6)return this.easeTo(r,c);const zt=je<Re?-1:1;jt=Math.abs(Math.log(je/Re))/ke,vt=()=>0,Ct=ln=>Math.exp(zt*ke*ln)}return r.duration="duration"in r?+r.duration:1e3*jt/("screenSpeed"in r?+r.screenSpeed/ke:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=v!==B,this._pitching=H!==I,this._rolling=Q!==T,this._padding=!m.isPaddingEqual(re),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(De.targetCenter),this._ease(zt=>{const ln=zt*jt,nn=1/Ct(ln),Kt=vt(ln);this._rotating&&m.setBearing(s.B.number(v,B,zt)),this._pitching&&m.setPitch(s.B.number(I,H,zt)),this._rolling&&m.setRoll(s.B.number(T,Q,zt)),this._padding&&(m.interpolatePadding(D,re,zt),fe=m.centerPoint.add(ie)),De.easeFunc(zt,nn,Kt,fe),this.terrain&&!r.freezeElevation&&this._updateElevation(zt),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var m;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,c)}return r||(m=this.handlers)===null||m===void 0||m.stop(!1),this}_ease(r,c,m){m.animate===!1||m.duration===0?(r(1),c()):(this._easeStart=M.now(),this._easeOptions=m,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=s.aL(r,-180,180);const m=Math.abs(r-c);return Math.abs(r-360-c)<m&&(r-=360),Math.abs(r+360-c)<m&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(s.Q.convert(r),this.transform.tileZoom):null}}const Rn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fn{constructor(r=Rn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=A.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=A.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const m=this._map._getUIString(`AttributionControl.${c}`);r.title=m,r.setAttribute("aria-label",m)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const c=this._map.style.sourceCaches;for(const v in c){const I=c[v];if(I.used||I.usedForTerrain){const T=I.getSource();T.attribution&&r.indexOf(T.attribution)<0&&r.push(T.attribution)}}r=r.filter(v=>String(v).trim()),r.sort((v,I)=>v.length-I.length),r=r.filter((v,I)=>{for(let T=I+1;T<r.length;T++)if(r[T].indexOf(v)>=0)return!1;return!0});const m=r.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,r.length?(this._innerContainer.innerHTML=A.sanitize(m),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class kc{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const m=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&m.classList.add("maplibregl-compact"):m.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=A.create("div","maplibregl-ctrl");const c=A.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){A.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ju{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const v of m)if(v.id===r)return void(v.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wo=s.aG([{name:"a_pos3d",type:"Int16",components:3}]);class Ys extends s.E{constructor(r){super(),this._lastTilesetChange=M.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const m={};for(const v of Ze(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))m[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),s.bQ(v.terrainRttPosMatrix32f,0,s.Z,s.Z,0,0,1),this._tiles[v.key]=new ut(v,this.tileSize),this._lastTilesetChange=M.now());for(const v in this._tiles)m[v]||delete this._tiles[v]}freeRtt(r){for(const c in this._tiles){const m=this._tiles[c];(!r||m.tileID.equals(r)||m.tileID.isChildOf(r)||r.isChildOf(m.tileID))&&(m.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID,I=r.clone(),T=s.b2();if(v.canonical.equals(r.canonical))s.bQ(T,0,s.Z,s.Z,0,0,1);else if(v.canonical.isChildOf(r.canonical)){const D=v.canonical.z-r.canonical.z,B=v.canonical.x-(v.canonical.x>>D<<D),H=v.canonical.y-(v.canonical.y>>D<<D),Q=s.Z>>D;s.bQ(T,0,Q,Q,0,0,1),s.L(T,T,[-B*Q,-H*Q,0])}else{if(!r.canonical.isChildOf(v.canonical))continue;{const D=r.canonical.z-v.canonical.z,B=r.canonical.x-(r.canonical.x>>D<<D),H=r.canonical.y-(r.canonical.y>>D<<D),Q=s.Z>>D;s.bQ(T,0,s.Z,s.Z,0,0,1),s.L(T,T,[B*Q,H*Q,0]),s.M(T,T,[1/2**D,1/2**D,0])}}I.terrainRttPosMatrix32f=new Float32Array(T),c[m]=I}return c}_getTerrainCoordsForTileRanges(r,c){const m={};for(const v of this._renderableTilesKeys){const I=this._tiles[v].tileID;if(!this._isWithinTileRanges(I,c))continue;const T=r.clone(),D=s.b2();if(I.canonical.z===r.canonical.z){const B=r.canonical.x-I.canonical.x,H=r.canonical.y-I.canonical.y;s.bQ(D,0,s.Z,s.Z,0,0,1),s.L(D,D,[B*s.Z,H*s.Z,0])}else if(I.canonical.z>r.canonical.z){const B=I.canonical.z-r.canonical.z,H=I.canonical.x-(I.canonical.x>>B<<B),Q=I.canonical.y-(I.canonical.y>>B<<B),re=r.canonical.x-(I.canonical.x>>B),ie=r.canonical.y-(I.canonical.y>>B),fe=s.Z>>B;s.bQ(D,0,fe,fe,0,0,1),s.L(D,D,[-H*fe+re*s.Z,-Q*fe+ie*s.Z,0])}else{const B=r.canonical.z-I.canonical.z,H=r.canonical.x-(r.canonical.x>>B<<B),Q=r.canonical.y-(r.canonical.y>>B<<B),re=(r.canonical.x>>B)-I.canonical.x,ie=(r.canonical.y>>B)-I.canonical.y,fe=s.Z<<B;s.bQ(D,0,fe,fe,0,0,1),s.L(D,D,[H*s.Z+re*fe,Q*s.Z+ie*fe,0])}T.terrainRttPosMatrix32f=new Float32Array(D),m[v]=T}return m}getSourceTile(r,c){const m=this.sourceCache._source;let v=r.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(v).key);let I=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!I||!I.dem)&&c)for(;v>=m.minzoom&&(!I||!I.dem);)I=this.sourceCache.getTileByID(r.scaledTo(v--).key);return I}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class ug{constructor(r,c,m){this._meshCache={},this.painter=r,this.sourceCache=new Ys(c),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,m,v=s.Z){var I;if(!(c>=0&&c<v&&m>=0&&m<v))return 0;const T=this.getTerrainData(r),D=(I=T.tile)===null||I===void 0?void 0:I.dem;if(!D)return 0;const B=s.ch([],[c/v*s.Z,m/v*s.Z],T.u_terrain_matrix),H=[B[0]*D.dim,B[1]*D.dim],Q=Math.floor(H[0]),re=Math.floor(H[1]),ie=H[0]-Q,fe=H[1]-re;return D.get(Q,re)*(1-ie)*(1-fe)+D.get(Q+1,re)*ie*(1-fe)+D.get(Q,re+1)*(1-ie)*fe+D.get(Q+1,re+1)*ie*fe}getElevationForLngLatZoom(r,c){if(!s.ci(c,r.wrap()))return 0;const{tileID:m,mercatorX:v,mercatorY:I}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(m,v%s.Z,I%s.Z,s.Z)}getElevation(r,c,m,v=s.Z){return this.getDEMElevation(r,c,m,v)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const v=this.painter.context,I=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new q(v,I,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new q(v,new s.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ad([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const v=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new q(v,c.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),c.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const m=c&&c+c.tileID.key+r.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let I=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=v?I=r.canonical.z-v:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=r.canonical.x-(r.canonical.x>>I<<I),D=r.canonical.y-(r.canonical.y>>I<<I),B=s.cj(new Float64Array(16),[1/(s.Z<<I),1/(s.Z<<I),0]);s.L(B,B,[T*s.Z,D*s.Z,0]),this._demMatrixCache[r.key]={matrix:B,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,m=c.width/devicePixelRatio,v=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new q(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new q(c.context,{width:m,height:v,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(m,v,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let I=0,T=0;I<this._coordsTextureSize;I++)for(let D=0;D<this._coordsTextureSize;D++,T+=4)c[T+0]=255&D,c[T+1]=255&I,c[T+2]=D>>8<<4|I>>8,c[T+3]=0;const m=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),v=new q(r,m,r.gl.RGBA,{premultiply:!1});return v.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),m=this.painter.context,v=m.gl,I=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);m.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(I,D-T-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null);const B=c[0]+(c[2]>>4<<8),H=c[1]+((15&c[2])<<8),Q=this.coordsIndex[255-c[3]],re=Q&&this.sourceCache.getTileByID(Q);if(!re)return null;const ie=this._coordsTextureSize,fe=(1<<re.tileID.canonical.z)*ie;return new s.$((re.tileID.canonical.x*ie+B)/fe+re.tileID.wrap,(re.tileID.canonical.y*ie+H)/fe,this.getElevation(re.tileID,B,H,ie))}depthAtPoint(r){const c=new Uint8Array(4),m=this.painter.context,v=m.gl;return m.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,c),m.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const m=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,v=m&&r.canonical.y===0,I=m&&r.canonical.y===(1<<r.canonical.z)-1,T=`m_${v?"n":""}_${I?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const D=this.painter.context,B=new s.ck,H=new s.aK,Q=this.meshSize,re=s.Z/Q,ie=Q*Q;for(let nt=0;nt<=Q;nt++)for(let xt=0;xt<=Q;xt++)B.emplaceBack(xt*re,nt*re,0);for(let nt=0;nt<ie;nt+=Q+1)for(let xt=0;xt<Q;xt++)H.emplaceBack(xt+nt,Q+xt+nt+1,Q+xt+nt+2),H.emplaceBack(xt+nt,Q+xt+nt+2,xt+nt+1);const fe=B.length,_e=fe+(Q+1),De=(Q+1)*Q,ke=v?s.b9:0,Re=v?0:1,je=I?s.ba:s.Z,We=I?0:1;for(let nt=0;nt<=Q;nt++)B.emplaceBack(nt*re,ke,Re);for(let nt=0;nt<=Q;nt++)B.emplaceBack(nt*re,je,We);for(let nt=0;nt<Q;nt++)H.emplaceBack(De+nt,_e+nt,_e+nt+1),H.emplaceBack(De+nt,_e+nt+1,De+nt+1),H.emplaceBack(0+nt,fe+nt+1,fe+nt),H.emplaceBack(0+nt,0+nt+1,fe+nt+1);const Ke=B.length,Je=Ke+2*(Q+1);for(const nt of[0,1])for(let xt=0;xt<=Q;xt++)for(const Ct of[0,1])B.emplaceBack(nt*s.Z,xt*re,Ct);for(let nt=0;nt<2*Q;nt+=2)H.emplaceBack(Ke+nt,Ke+nt+1,Ke+nt+3),H.emplaceBack(Ke+nt,Ke+nt+3,Ke+nt+2),H.emplaceBack(Je+nt,Je+nt+3,Je+nt+1),H.emplaceBack(Je+nt,Je+nt+2,Je+nt+3);const at=new Mu(D.createVertexBuffer(B,Wo.members),D.createIndexBuffer(H),s.aJ.simpleSegment(0,0,B.length,H.length));return this._meshCache[T]=at,at}getMeshFrameDelta(r){return 2*Math.PI*s.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var m;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(m=this.getMinMaxElevation(v).minElevation)!==null&&m!==void 0?m:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,m={minElevation:null,maxElevation:null};return c&&c.dem&&(m.minElevation=c.dem.min*this.exaggeration,m.maxElevation=c.dem.max*this.exaggeration),m}_getOverscaledTileIDFromLngLatZoom(r,c){const m=s.$.fromLngLat(r.wrap()),v=(1<<c)*s.Z,I=m.x*v,T=m.y*v,D=Math.floor(I/s.Z),B=Math.floor(T/s.Z);return{tileID:new s.Y(c,0,c,D,B),mercatorX:I,mercatorY:T}}}class Aa{constructor(r,c,m){this._context=r,this._size=c,this._tileSize=m,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),m=new q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return m.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(m.texture),{id:r,fbo:c,texture:m,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Lc={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Dc{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Aa(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(m=>!r._layers[m].isHidden(c)),this._coordsAscending={};for(const m in r.sourceCaches){this._coordsAscending[m]={};const v=r.sourceCaches[m].getVisibleCoordinates(),I=r.sourceCaches[m].getSource(),T=I instanceof tt?I.terrainTileRanges:null;for(const D of v){const B=this.terrain.sourceCache.getTerrainCoords(D,T);for(const H in B)this._coordsAscending[m][H]||(this._coordsAscending[m][H]=[]),this._coordsAscending[m][H].push(B[H])}}this._coordsAscendingStr={};for(const m of r._order){const v=r._layers[m],I=v.source;if(Lc[v.type]&&!this._coordsAscendingStr[I]){this._coordsAscendingStr[I]={};for(const T in this._coordsAscending[I])this._coordsAscendingStr[I][T]=this._coordsAscending[I][T].map(D=>D.key).sort().join()}}for(const m of this._renderableTiles)for(const v in this._coordsAscendingStr){const I=this._coordsAscendingStr[v][m.tileID.key];I&&I!==m.rttCoords[v]&&(m.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const m=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),v=r.type,I=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Lc[v]&&(this._prevType&&Lc[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(r.id),!T))return!0;if(Lc[this._prevType]||Lc[v]&&T){this._prevType=v;const D=this._stacks.length-1,B=this._stacks[D]||[];for(const H of this._renderableTiles){if(this.pool.isFull()&&(Ap(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(H),H.rtt[D]){const re=this.pool.getObjectForId(H.rtt[D].id);if(re.stamp===H.rtt[D].stamp){this.pool.useObject(re);continue}}const Q=this.pool.getOrCreateFreeObject();this.pool.useObject(Q),this.pool.stampObject(Q),H.rtt[D]={id:Q.id,stamp:Q.stamp},I.context.bindFramebuffer.set(Q.fbo.framebuffer),I.context.clear({color:s.b7.transparent,stencil:0}),I.currentStencilSource=void 0;for(let re=0;re<B.length;re++){const ie=I.style._layers[B[re]],fe=ie.source?this._coordsAscending[ie.source][H.tileID.key]:[H.tileID];I.context.viewport.set([0,0,Q.fbo.width,Q.fbo.height]),I._renderTileClippingMasks(ie,fe,!0),I.renderLayer(I,I.style.sourceCaches[ie.source],ie,fe,m),ie.source&&(H.rttCoords[ie.source]=this._coordsAscendingStr[ie.source][H.tileID.key])}}return Ap(this.painter,this.terrain,this._rttTiles,m),this._rttTiles=[],this.pool.freeAllObjects(),Lc[v]}return!1}}const fr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},bi=f,Zd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Rn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ca={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Rc{constructor(r,c,m=!1){this.mousedown=I=>{this.startMove(I,A.mousePos(this.element,I)),A.addEventListener(window,"mousemove",this.mousemove),A.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=I=>{this.move(I,A.mousePos(this.element,I))},this.mouseup=I=>{this._rotatePitchHanlder.dragEnd(I),this.offTemp()},this.touchstart=I=>{I.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,I.targetTouches)[0],this.startMove(I,this._startPos),A.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.addEventListener(window,"touchend",this.touchend))},this.touchmove=I=>{I.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,I.targetTouches)[0],this.move(I,this._lastPos))},this.touchend=I=>{I.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const v=new Tp;this._rotatePitchHanlder=new dl({clickTolerance:3,move:(I,T)=>{const D=c.getBoundingClientRect(),B=new s.P((D.bottom-D.top)/2,(D.right-D.left)/2);return{bearingDelta:s.cc(new s.P(I.x,T.y),T,B),pitchDelta:m?-.5*(T.y-I.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=r,A.addEventListener(c,"mousedown",this.mousedown),A.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHanlder.dragStart(r,c),A.disableDrag()}move(r,c){const m=this.map,{bearingDelta:v,pitchDelta:I}=this._rotatePitchHanlder.dragMove(r,c)||{};v&&m.setBearing(m.getBearing()+v),I&&m.setPitch(m.getPitch()+I)}off(){const r=this.element;A.removeEventListener(r,"mousedown",this.mousedown),A.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend),A.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){A.enableDrag(),A.removeEventListener(window,"mousemove",this.mousemove),A.removeEventListener(window,"mouseup",this.mouseup),A.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),A.removeEventListener(window,"touchend",this.touchend)}}let ja;function qo(w,r,c,m=!1){if(m||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();const v=new s.Q(w.lng,w.lat);if(w=new s.Q(w.lng,w.lat),r){const I=new s.Q(w.lng-360,w.lat),T=new s.Q(w.lng+360,w.lat),D=c.locationToScreenPoint(w).distSqr(r);c.locationToScreenPoint(I).distSqr(r)<D?w=I:c.locationToScreenPoint(T).distSqr(r)<D&&(w=T)}for(;Math.abs(w.lng-c.center.lng)>180;){const I=c.locationToScreenPoint(w);if(I.x>=0&&I.y>=0&&I.x<=c.width&&I.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:v}const Oc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gi(w,r,c){const m=w.classList;for(const v in Oc)m.remove(`maplibregl-${c}-anchor-${v}`);m.add(`maplibregl-${c}-anchor-${r}`)}class Uu extends s.E{constructor(r){if(super(),this._onKeyPress=c=>{const m=c.code,v=c.charCode||c.keyCode;m!=="Space"&&m!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=c=>{const m=c.originalEvent.target,v=this._element;this._popup&&(m===v||v.contains(m))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=qo(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),A.setTransform(this._element,`${Oc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${I} ${v}`),M.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const m=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=m}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.l("dragstart"))),this.fire(new s.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=s.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=A.create("div");const c=A.createNS("http://www.w3.org/2000/svg","svg"),m=41,v=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${m}px`),c.setAttributeNS(null,"width",`${v}px`),c.setAttributeNS(null,"viewBox",`0 0 ${v} ${m}`);const I=A.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"stroke","none"),I.setAttributeNS(null,"stroke-width","1"),I.setAttributeNS(null,"fill","none"),I.setAttributeNS(null,"fill-rule","evenodd");const T=A.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const D=A.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Re of B){const je=A.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",Re.rx),je.setAttributeNS(null,"ry",Re.ry),D.appendChild(je)}const H=A.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const Q=A.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(Q);const re=A.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"fill","#000000");const ie=A.createNS("http://www.w3.org/2000/svg","path");ie.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),re.appendChild(ie);const fe=A.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const _e=A.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(8.0, 8.0)");const De=A.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#000000"),De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962");const ke=A.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#FFFFFF"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962"),_e.appendChild(De),_e.appendChild(ke),T.appendChild(D),T.appendChild(H),T.appendChild(re),T.appendChild(fe),T.appendChild(_e),c.appendChild(T),c.setAttributeNS(null,"height",m*this._scale+"px"),c.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(c),this._offset=s.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Gi(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=s.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const v=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,m;if(!(!((c=this._map)===null||c===void 0)&&c.terrain)){const re=this._map.transform.isLocationOccluded(this._lngLat)?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==re&&(this._element.style.opacity=re))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const v=this._map,I=v.terrain.depthAtPoint(this._pos),T=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,T)-I<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/v.transform.pixelsPerMeter,B=Math.sin(v.getPitch()*Math.PI/180)*D,H=v.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),Q=v.transform.lngLatToCameraDepth(this._lngLat,T+B)-H>.006;!((m=this._popup)===null||m===void 0)&&m.isOpen()&&Q&&this._popup.remove(),this._element.style.opacity=Q?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=s.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Lp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let zc=0,$u=!1;const Oh={maxWidth:100,unit:"metric"};function Wd(w,r,c){const m=c&&c.maxWidth||100,v=w._container.clientHeight/2,I=w._container.clientWidth/2,T=w.unproject([I-m/2,v]),D=w.unproject([I+m/2,v]),B=Math.round(w.project(D).x-w.project(T).x),H=Math.min(m,B,w._container.clientWidth),Q=T.distanceTo(D);if(c&&c.unit==="imperial"){const re=3.2808*Q;re>5280?co(r,H,re/5280,w._getUIString("ScaleControl.Miles")):co(r,H,re,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?co(r,H,Q/1852,w._getUIString("ScaleControl.NauticalMiles")):Q>=1e3?co(r,H,Q/1e3,w._getUIString("ScaleControl.Kilometers")):co(r,H,Q,w._getUIString("ScaleControl.Meters"))}function co(w,r,c,m){const v=function(I){const T=Math.pow(10,`${Math.floor(I)}`.length-1);let D=I/T;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(B){const H=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*H)/H}(D),T*D}(c);w.style.width=r*(v/c)+"px",w.innerHTML=`${v}&nbsp;${m}`}const qd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Kd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Yd(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,w),"top-left":new s.P(r,r),"top-right":new s.P(-r,r),bottom:new s.P(0,-w),"bottom-left":new s.P(r,-r),"bottom-right":new s.P(-r,-r),left:new s.P(w,0),right:new s.P(-w,0)}}if(w instanceof s.P||Array.isArray(w)){const r=s.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:s.P.convert(w.center||[0,0]),top:s.P.convert(w.top||[0,0]),"top-left":s.P.convert(w["top-left"]||[0,0]),"top-right":s.P.convert(w["top-right"]||[0,0]),bottom:s.P.convert(w.bottom||[0,0]),"bottom-left":s.P.convert(w["bottom-left"]||[0,0]),"bottom-right":s.P.convert(w["bottom-right"]||[0,0]),left:s.P.convert(w.left||[0,0]),right:s.P.convert(w.right||[0,0])}}return Yd(new s.P(0,0))}const Hu=f;l.AJAXError=s.co,l.Event=s.l,l.Evented=s.E,l.LngLat=s.Q,l.MercatorCoordinate=s.$,l.Point=s.P,l.addProtocol=s.cp,l.config=s.a,l.removeProtocol=s.cq,l.AttributionControl=Fn,l.BoxZoomHandler=ng,l.CanvasSource=Be,l.CooperativeGesturesHandler=Gd,l.DoubleClickZoomHandler=lg,l.DragPanHandler=Zr,l.DragRotateHandler=Ql,l.EdgeInsets=yc,l.FullscreenControl=class extends s.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){A.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=A.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);A.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Fe,l.GeolocateControl=class extends s.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new s.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new s.Q(r.coords.longitude,r.coords.latitude),m=r.coords.accuracy,v=this._map.getBearing(),I=s.e({bearing:v},this.options.fitBoundsOptions),T=$.fromLngLat(c,m);this._map.fitBounds(T,I,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new s.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&$u)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=A.create("button","maplibregl-ctrl-geolocate",this._container),A.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uu({element:this._dotElement}),this._circleElement=A.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.l("trackuserlocationend")),this.fire(new s.l("userlocationlostfocus")))})}},this.options=s.e({},Lp,w)}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(r=!1){if(ja!==void 0&&!r)return ja;if(window.navigator.permissions===void 0)return ja=!!window.navigator.geolocation,ja;try{ja=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ja=!!window.navigator.geolocation}return ja})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,zc=0,$u=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),c=w.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),r=w.getSouthEast(),c=w.getNorthEast(),m=r.distanceTo(c),v=Math.ceil(this._accuracy/(m/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":zc--,$u=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.l("trackuserlocationstart")),this.fire(new s.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),zc++,zc>1?(w={maximumAge:6e5,timeout:0},$u=!0):(w=this.options.positionOptions,$u=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const r=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=A.create("button","maplibregl-ctrl-globe",this._container),A.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){A.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},l.Hash=Ip,l.ImageSource=tt,l.KeyboardHandler=Ud,l.LngLatBounds=$,l.LogoControl=kc,l.Map=class extends Ks{constructor(w){var r,c;s.cl.mark(s.cm.create);const m=Object.assign(Object.assign(Object.assign({},Zd),w),{canvasContextAttributes:Object.assign(Object.assign({},Zd.canvasContextAttributes),w.canvasContextAttributes)});if(m.minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new zo,I=new gh;if(m.minZoom!==void 0&&v.setMinZoom(m.minZoom),m.maxZoom!==void 0&&v.setMaxZoom(m.maxZoom),m.minPitch!==void 0&&v.setMinPitch(m.minPitch),m.maxPitch!==void 0&&v.setMaxPitch(m.maxPitch),m.renderWorldCopies!==void 0&&v.setRenderWorldCopies(m.renderWorldCopies),super(v,I,{bearingSnap:m.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new ju,this._controls=[],this._mapId=s.a4(),this._contextLost=D=>{D.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.l("webglcontextlost",{originalEvent:D}))},this._contextRestored=D=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.l("webglcontextrestored",{originalEvent:D}))},this._onMapScroll=D=>{if(D.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=m.interactive,this._maxTileCacheSize=m.maxTileCacheSize,this._maxTileCacheZoomLevels=m.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},m.canvasContextAttributes),this._trackResize=m.trackResize===!0,this._bearingSnap=m.bearingSnap,this._centerClampedToGround=m.centerClampedToGround,this._refreshExpiredTiles=m.refreshExpiredTiles===!0,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions===!0,this._collectResourceTiming=m.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},fr),m.locale),this._clickTolerance=m.clickTolerance,this._overridePixelRatio=m.pixelRatio,this._maxCanvasSize=m.maxCanvasSize,this.transformCameraUpdate=m.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=m.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new W(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let D=!1;const B=Cp(H=>{this._trackResize&&!this._removed&&(this.resize(H),this.redraw())},50);this._resizeObserver=new ResizeObserver(H=>{D?B(H):D=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Os(this,m),this._hash=m.hash&&new Ip(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,elevation:m.elevation,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,roll:m.roll}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.e({},m.fitBoundsOptions,{duration:0}))));const T=typeof m.style=="string"||((c=(r=m.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=m.localIdeographFontFamily,this._validateStyle=m.validateStyle,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Fn(typeof m.attributionControl=="boolean"?void 0:m.attributionControl)),m.maplibreLogo&&this.addControl(new kc,m.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const D=s.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(D)}}),this.on("data",D=>{this._update(D.dataType==="style"),this.fire(new s.l(`${D.dataType}data`,D))}),this.on("dataloading",D=>{this.fire(new s.l(`${D.dataType}dataloading`,D))}),this.on("dataabort",D=>{this.fire(new s.l("sourcedataabort",D))})}_getMapId(){return this._mapId}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new s.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const m=this._controlPositions[r];return r.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new s.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,r,c,m){return m==null&&this.terrain&&(m=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,r,c,m)}resize(w,r=!0){const[c,m]=this._containerDimensions(),v=this._getClampedPixelRatio(c,m);if(this._resizeCanvas(c,m,v),this.painter.resize(c,m,v),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const D=this._getClampedPixelRatio(c,m);this._resizeCanvas(c,m,D),this.painter.resize(c,m,D)}this._resizeTransform(r);const I=!this._moving;return I&&(this.stop(),this.fire(new s.l("movestart",w)).fire(new s.l("move",w))),this.fire(new s.l("resize",w)),I&&this.fire(new s.l("moveend",w)),this}_resizeTransform(w=!0){var r;const[c,m]=this._containerDimensions();this.transform.resize(c,m,w),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,m,w)}_getClampedPixelRatio(w,r){const{0:c,1:m}=this._maxCanvasSize,v=this.getPixelRatio(),I=w*v,T=r*v;return Math.min(I>c?c/I:1,T>m?m/T:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds($.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(s.Q.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(s.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,c){if(w==="mouseenter"||w==="mouseover"){let m=!1;return{layers:r,listener:c,delegates:{mousemove:I=>{const T=r.filter(B=>this.getLayer(B)),D=T.length!==0?this.queryRenderedFeatures(I.point,{layers:T}):[];D.length?m||(m=!0,c.call(this,new la(w,this,I.originalEvent,{features:D}))):m=!1},mouseout:()=>{m=!1}}}}if(w==="mouseleave"||w==="mouseout"){let m=!1;return{layers:r,listener:c,delegates:{mousemove:T=>{const D=r.filter(B=>this.getLayer(B));(D.length!==0?this.queryRenderedFeatures(T.point,{layers:D}):[]).length?m=!0:m&&(m=!1,c.call(this,new la(w,this,T.originalEvent)))},mouseout:T=>{m&&(m=!1,c.call(this,new la(w,this,T.originalEvent)))}}}}{const m=v=>{const I=r.filter(D=>this.getLayer(D)),T=I.length!==0?this.queryRenderedFeatures(v.point,{layers:I}):[];T.length&&(v.features=T,c.call(this,v),delete v.features)};return{layers:r,listener:c,delegates:{[w]:m}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const m=this._delegatedListeners[w];for(let v=0;v<m.length;v++){const I=m[v];if(I.listener===c&&I.layers.length===r.length&&I.layers.every(T=>r.includes(T))){for(const T in I.delegates)this.off(T,I.delegates[T]);return void m.splice(v,1)}}}on(w,r,c){if(c===void 0)return super.on(w,r);const m=typeof r=="string"?[r]:r,v=this._createDelegatedListener(w,m,c);this._saveDelegatedListener(w,v);for(const I in v.delegates)this.on(I,v.delegates[I]);return{unsubscribe:()=>{this._removeDelegatedListener(w,m,c)}}}once(w,r,c){if(c===void 0)return super.once(w,r);const m=typeof r=="string"?[r]:r,v=this._createDelegatedListener(w,m,c);for(const I in v.delegates){const T=v.delegates[I];v.delegates[I]=(...D)=>{this._removeDelegatedListener(w,m,c),T(...D)}}this._saveDelegatedListener(w,v);for(const I in v.delegates)this.once(I,v.delegates[I]);return this}off(w,r,c){return c===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let c;const m=w instanceof s.P||Array.isArray(w),v=m?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(m?{}:w)||{},v instanceof s.P||typeof v[0]=="number")c=[s.P.convert(v)];else{const I=s.P.convert(v[0]),T=s.P.convert(v[1]);c=[I,new s.P(T.x,I.y),T,new s.P(I.x,T.y),I]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){var c,m;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,r));const v=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Lu(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,v):this.style.loadJSON(w,r,v),this):((m=(c=this.style)===null||c===void 0?void 0:c.projection)===null||m===void 0||m.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Lu(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");s.j(c,new AbortController).then(m=>{this._updateDiff(m.data,r)}).catch(m=>{m&&this.fire(new s.k(m))})}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(c){s.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.sourceCaches[w];if(r!==void 0)return r.loaded();this.fire(new s.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.sourceCaches[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const m=this.style._layers[c];m.type==="hillshade"&&m.source===w.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ug(this.painter,r,w),this.painter.renderToTexture=new Dc(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var m;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((m=c.source)===null||m===void 0?void 0:m.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new s.l("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const r in w){const c=w[r]._tiles;for(const m in c){const v=c[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,r,c){if(c){const m=this.getSource(c);if(!m)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);m.calculateTileZoom=ve(Math.max(1,w),Math.max(1,r))}else for(const m in this.style.sourceCaches)this.style.sourceCaches[m].getSource().calculateTileZoom=ve(Math.max(1,w),Math.max(1,r));return this._update(!0),this}addImage(w,r,c={}){const{pixelRatio:m=1,sdf:v=!1,stretchX:I,stretchY:T,content:D,textFitWidth:B,textFitHeight:H}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||s.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:Q,height:re,data:ie}=r,fe=r;return this.style.addImage(w,{data:new s.R({width:Q,height:re},new Uint8Array(ie)),pixelRatio:m,stretchX:I,stretchY:T,content:D,textFitWidth:B,textFitHeight:H,sdf:v,version:0,userImage:fe}),fe.onAdd&&fe.onAdd(this,w),this}}{const{width:Q,height:re,data:ie}=M.getImageData(r);this.style.addImage(w,{data:new s.R({width:Q,height:re},ie),pixelRatio:m,stretchX:I,stretchY:T,content:D,textFitWidth:B,textFitHeight:H,sdf:v,version:0})}}updateImage(w,r){const c=this.style.getImage(w);if(!c)return this.fire(new s.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=r instanceof HTMLImageElement||s.b(r)?M.getImageData(r):r,{width:v,height:I,data:T}=m;if(v===void 0||I===void 0)return this.fire(new s.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==c.data.width||I!==c.data.height)return this.fire(new s.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(r instanceof HTMLImageElement||s.b(r));return c.data.replace(T,D),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new s.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return U.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,c){return this.style.setLayerZoomRange(w,r,c),this._update(!0)}setFilter(w,r,c={}){return this.style.setFilter(w,r,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,c,m={}){return this.style.setPaintProperty(w,r,c,m),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,c,m={}){return this.style.setLayoutProperty(w,r,c,m),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,c,m=>{m||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,c=>{c||this._update(!0)}),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=A.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=A.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),m=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],m);const v=this._controlContainer=A.create("div","maplibregl-control-container",w),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{I[T]=A.create("div",`maplibregl-ctrl-${T} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",m=>{r={requestedAttributes:w},m&&(r.statusMessage=m.statusMessage,r.type=m.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const m="Failed to initialize WebGL";throw r?(r.message=m,new Error(JSON.stringify(r))):new Error(m)}this.painter=new eg(c,this.transform),k.testSupport(c)}migrateProjection(w,r){super.migrateProjection(w,r),this.painter.transform=w,this.fire(new s.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var r,c,m,v,I;const T=this._idleTriggered?this._fadeDuration:0,D=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let B=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const re=this.transform.zoom,ie=M.now();this.style.zoomHistory.update(re,ie);const fe=new s.C(re,{now:ie,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_e=fe.crossFadingFactor();_e===1&&_e===this._crossFadingFactor||(B=!0,this._crossFadingFactor=_e),this.style.update(fe)}const H=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==D;(m=this.style.projection)===null||m===void 0||m.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(I=this.style.projection)===null||I===void 0?void 0:I.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||H)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,H),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new s.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.cl.mark(s.cm.load),this.fire(new s.l("load"))),this.style&&(this.style.hasTransitions()||B)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const Q=this._sourcesDirty||this._styleDirty||this._placementDirty;return Q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.l("idle")),!this._loaded||this._fullyLoaded||Q||(this._fullyLoaded=!0,s.cl.mark(s.cm.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),A.remove(this._canvasContainer),A.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),s.cl.clearMetrics(),this._removed=!0,this.fire(new s.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,M.frame(this._frameRequest,w=>{s.cl.frame(w),this._frameRequest=null;try{this._render(w)}catch(r){if(!s.cn(r)&&!function(c){return c.message===Mc}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return bi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},l.MapMouseEvent=la,l.MapTouchEvent=qs,l.MapWheelEvent=Ms,l.Marker=Uu,l.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),m=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const m=this._map._getUIString(`NavigationControl.${c}`);r.title=m,r.setAttribute("aria-label",m)},this.options=s.e({},ca,w),this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),A.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=A.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const c=A.create("button",w,this._container);return c.type="button",c.addEventListener("click",r),c}},l.Popup=class extends s.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=A.create("div","maplibregl-popup",this._map.getContainer()),this._tip=A.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=qo(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let m=this.options.anchor;const v=Yd(this.options.offset);if(!m){const T=this._container.offsetWidth,D=this._container.offsetHeight;let B;B=c.y+v.bottom.y<D?["top"]:c.y>this._map.transform.height-D?["bottom"]:[],c.x<T/2?B.push("left"):c.x>this._map.transform.width-T/2&&B.push("right"),m=B.length===0?"bottom":B.join("-")}let I=c.add(v[m]);this.options.subpixelPositioning||(I=I.round()),A.setTransform(this._container,`${Oc[m]} translate(${I.x}px,${I.y}px)`),Gi(this._container,m,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(qd),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=s.Q.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),c=document.createElement("body");let m;for(c.innerHTML=w;m=c.firstChild,m;)r.appendChild(m);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=A.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Kd);w&&w.focus()}},l.RasterDEMTileSource=pe,l.RasterTileSource=ye,l.ScaleControl=class{constructor(w){this._onMove=()=>{Wd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Wd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Oh),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=$d,l.Style=Lu,l.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=A.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=A.create("button","maplibregl-ctrl-terrain",this._container),A.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){A.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=sg,l.TwoFingersTouchRotateHandler=ua,l.TwoFingersTouchZoomHandler=jd,l.TwoFingersTouchZoomRotateHandler=Hd,l.VectorTileSource=Oe,l.VideoSource=it,l.addSourceType=(w,r)=>s._(void 0,void 0,void 0,function*(){if(wt(w))throw new Error(`A source type called "${w}" already exists.`);((c,m)=>{Mt[c]=m})(w,r)}),l.clearPrewarmedResources=function(){const w=Bt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(qe),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.createTileMesh=wd,l.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return fn().getRTLTextPluginStatus()},l.getVersion=function(){return Hu},l.getWorkerCount=function(){return Ue.workerCount},l.getWorkerUrl=function(){return s.a.WORKER_URL},l.importScriptInWorkers=function(w){return ft().broadcast("IS",w)},l.prewarm=function(){un().acquire(qe)},l.setMaxParallelImageRequests=function(w){s.a.MAX_PARALLEL_IMAGE_REQUESTS=w},l.setRTLTextPlugin=function(w,r){return fn().setRTLTextPlugin(w,r)},l.setWorkerCount=function(w){Ue.workerCount=w},l.setWorkerUrl=function(w){s.a.WORKER_URL=w}});var u=n;return u})})(IL);var Pm=IL.exports;const UT=fd(Pm),xm=al.createLogger().setNamespace("map:"+wu.EVENT,2),GM=e=>zl(["map:core",e,wu.EVENT],()=>(Kn(xm,e,"store").debug("init"),{items:[],current:{}}))(),gm={setCurrent:"map:event:set-current",add:"map:event:add",remove:"map:event:remove",setItems:"map:event:set-items"};function Lx(e,t,n=!1){const{add:i,remove:o,isActive:u}=Dx(e,t);return uh(()=>{o()}),n&&ti(()=>{i()}),{add:i,remove:o,isActive:u}}function Dx(e,t){const n=GM(e),i=ud(e),o=()=>{Kn(xm,e,"hook","useEventMap").debug("add",t),Kn(xm,e,"store").debug("addListenerMap",t),n.items.unshift(t),i.emit(gm.add,t),i.emit(gm.setItems,n.items)},u=()=>{if(Kn(xm,e,"hook","useEventMap").debug("remove",t),!n||!n.items||n.items.length<1)return;const y=n.items.findIndex(b=>b.id===t.id);y<0||(n.items.splice(y,1),i.emit(gm.remove,t),i.emit(gm.setItems,n.items))};function l(f){return(n.current||{})[f]}const s=dn(()=>{const f=l(t.event_map_type);return f&&f.id===t.id});return{add:o,remove:u,isActive:s}}function $T(e,t,n,i=!0){const o={},u=()=>{Kn(xm,e,"hook","useEventListener").debug("add",t),Ja(e,s=>{const f=y=>n(s,y);o[s.id]=f,s.on(t,f)})},l=()=>{Kn(xm,e,"hook","useEventListener").debug("remove",t),Ja(e,s=>{const f=o==null?void 0:o[s.id];f&&s.off(t,f)})};return ti(()=>{i&&u()}),uh(()=>{l()}),{add:u,remove:l}}const T$=(e,{onChange:t}={})=>{const n=GM(e);function i(){return n.items}const o=Dl(i()),u=ud(e);function l(s){o.value=s,t&&t(s)}return ti(()=>{u.on(gm.setItems,l)}),Ol(()=>{u.off(gm.setItems,l)}),{items:o}},P$=Dn({__name:"ActionControl",props:{...Ti},setup(e){const t=e,{callMap:n,mapId:i,moduleContainerProps:o}=Nr(t),u=GM(i.value),l=ud(i.value),s={},{items:f}=T$(i.value,{onChange:x=>{b(x)}});ti(()=>{b(f.value)});function y(x,M,A){Kn(xm,x,"store").debug("setCurrentEvent",M,A),u.current[M]=A,l.emit(gm.setCurrent,A)}function b(x){const M=Dy.groupBy(x,A=>A.event_map_type);n(A=>{const k=[];s[A.id]||(s[A.id]={});for(const L in M)if(k.push(L),Object.prototype.hasOwnProperty.call(M,L)){const F=M[L],V=s[A.id][L],O=F[0];if(V&&V.id===O.id)return;V&&V.removeFromMap(A),s[A.id][L]=O,O&&O.addToMap(A),y(i.value,L,O)}for(const L in s[A.id])if(Object.prototype.hasOwnProperty.call(s[A.id],L)){const F=s[A.id][L];!k.includes(L)&&F&&(F.removeFromMap(A),y(i.value,L,void 0),s[A.id][L]=void 0)}})}return(x,M)=>(Ae(),$t(ts,$i(zi(se(o))),null,16))}}),k$={key:0,class:""},L$=["mapId"],D$={class:"map-viewer"},R$=["id"],O$=["id"],z$=["id"],F$=["id"],B$=["id"],N$=Dn({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(e,{emit:t}){if(!UT)throw new Error("mapboxgl is not installed.");const n=Sk({mobile:0,tablet:640,laptop:1024,desktop:1280}),i={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},o=e,u=t;function l(){if(window.WebGLRenderingContext){const N=document.createElement("canvas");try{const U=N.getContext("webgl2")||N.getContext("webgl");if(U&&typeof U.getParameter=="function")return!0}catch{}return!1}return!1}const s=Qt(),f=Qt(l()),y=Qt(!1);let b;const x=Qt(hc()),M=bj(x.value);ti(()=>{const N=Object.assign({},i,o.initOptions);b=new UT.Map({container:s.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.mattech.vn/styles/basic/sprite",glyphs:"https://tiles.mattech.vn/fonts/{fontstack}/{range}.pbf",layers:[]},...N}),b.id=x.value,M.initMap(b),b.once("load",()=>{u("map-loaded",b),y.value=!0})}),Ol(()=>{b&&(b.remove(),u("map-destroy",b)),b=void 0,M.removeMap()});const A=dn(()=>`map-draggable-${x.value}`),k=dn(()=>`bottom-right-${x.value}`),L=dn(()=>`bottom-left-${x.value}`),F=dn(()=>`top-right-${x.value}`),V=dn(()=>`top-left-${x.value}`);zf("$map.dragId",o.dragId||A.value),zf("$map.id",x.value);const O=n.smallerOrEqual("tablet");return(N,U)=>f.value?(Ae(),st("div",{key:1,class:ei(["map-container",{"map-mobile-container":se(O)}]),mapId:x.value},[Le("div",D$,[Le("div",{ref_key:"mapContainer",ref:s,class:"map-content",id:x.value},null,8,R$),o.dragId?an("",!0):(Ae(),st(Gn,{key:0},[Le("div",{class:"right-bottom-container",id:k.value},null,8,O$),Le("div",{class:"left-bottom-container",id:L.value},null,8,z$),Le("div",{class:"right-top-container",id:F.value},null,8,F$),Le("div",{class:"left-top-container",id:V.value},null,8,B$),He(se(Sj),{class:"drag-container","container-id":A.value},null,8,["container-id"])],64)),y.value?In(N.$slots,"default",{key:1},void 0,!0):an("",!0),y.value?(Ae(),$t(P$,{key:2})):an("",!0)])],10,L$)):(Ae(),st("div",k$,U[0]||(U[0]=[Le("div",{class:"not-support-map"},[Le("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)])))}}),V$=Cn(N$,[["__scopeId","data-v-61953871"]]);function j$(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var km=1,Lm=2,vy=3,U$=4,gI=5,HT=6378137,$$=6356752314e-3,GT=.0066943799901413165,V0=484813681109536e-20,hn=Math.PI/2,H$=.16666666666666666,G$=.04722222222222222,Z$=.022156084656084655,Sn=1e-10,La=.017453292519943295,Qc=57.29577951308232,di=Math.PI/4,g_=Math.PI*2,Da=3.14159265359,ol={};ol.greenwich=0;ol.lisbon=-9.131906111111;ol.paris=2.337229166667;ol.bogota=-74.080916666667;ol.madrid=-3.687938888889;ol.rome=12.452333333333;ol.bern=7.439583333333;ol.jakarta=106.807719444444;ol.ferro=-17.666666666667;ol.brussels=4.367975;ol.stockholm=18.058277777778;ol.athens=23.7163375;ol.oslo=10.722916666667;const W$={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ZT=/[\s_\-\/\(\)]/g;function Gf(e,t){if(e[t])return e[t];for(var n=Object.keys(e),i=t.toLowerCase().replace(ZT,""),o=-1,u,l;++o<n.length;)if(u=n[o],l=u.toLowerCase().replace(ZT,""),l===i)return e[u]}function yI(e){var t={},n=e.split("+").map(function(s){return s.trim()}).filter(function(s){return s}).reduce(function(s,f){var y=f.split("=");return y.push(!0),s[y[0].toLowerCase()]=y[1],s},{}),i,o,u,l={proj:"projName",datum:"datumCode",rf:function(s){t.rf=parseFloat(s)},lat_0:function(s){t.lat0=s*La},lat_1:function(s){t.lat1=s*La},lat_2:function(s){t.lat2=s*La},lat_ts:function(s){t.lat_ts=s*La},lon_0:function(s){t.long0=s*La},lon_1:function(s){t.long1=s*La},lon_2:function(s){t.long2=s*La},alpha:function(s){t.alpha=parseFloat(s)*La},gamma:function(s){t.rectified_grid_angle=parseFloat(s)},lonc:function(s){t.longc=s*La},x_0:function(s){t.x0=parseFloat(s)},y_0:function(s){t.y0=parseFloat(s)},k_0:function(s){t.k0=parseFloat(s)},k:function(s){t.k0=parseFloat(s)},a:function(s){t.a=parseFloat(s)},b:function(s){t.b=parseFloat(s)},r:function(s){t.a=t.b=parseFloat(s)},r_a:function(){t.R_A=!0},zone:function(s){t.zone=parseInt(s,10)},south:function(){t.utmSouth=!0},towgs84:function(s){t.datum_params=s.split(",").map(function(f){return parseFloat(f)})},to_meter:function(s){t.to_meter=parseFloat(s)},units:function(s){t.units=s;var f=Gf(W$,s);f&&(t.to_meter=f.to_meter)},from_greenwich:function(s){t.from_greenwich=s*La},pm:function(s){var f=Gf(ol,s);t.from_greenwich=(f||parseFloat(s))*La},nadgrids:function(s){s==="@null"?t.datumCode="none":t.nadgrids=s},axis:function(s){var f="ewnsud";s.length===3&&f.indexOf(s.substr(0,1))!==-1&&f.indexOf(s.substr(1,1))!==-1&&f.indexOf(s.substr(2,1))!==-1&&(t.axis=s)},approx:function(){t.approx=!0}};for(i in n)o=n[i],i in l?(u=l[i],typeof u=="function"?u(o):t[u]=o):t[i]=o;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var y_=1,SL=2,EL=3,Rx=4,TL=5,ZM=-1,q$=/\s/,K$=/[A-Za-z]/,Y$=/[A-Za-z84_]/,ZA=/[,\]]/,PL=/[\d\.E\-\+]/;function pd(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=y_}pd.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Rx)for(;q$.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case y_:return this.neutral(e);case SL:return this.keyword(e);case Rx:return this.quoted(e);case TL:return this.afterquote(e);case EL:return this.number(e);case ZM:return}};pd.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Rx;return}if(ZA.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};pd.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=y_;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=y_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ZM);return}};pd.prototype.number=function(e){if(PL.test(e)){this.word+=e;return}if(ZA.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};pd.prototype.quoted=function(e){if(e==='"'){this.state=TL;return}this.word+=e};pd.prototype.keyword=function(e){if(Y$.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=y_;return}if(ZA.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};pd.prototype.neutral=function(e){if(K$.test(e)){this.word=e,this.state=SL;return}if(e==='"'){this.word="",this.state=Rx;return}if(PL.test(e)){this.word=e,this.state=EL;return}if(ZA.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};pd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ZM)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function X$(e){var t=new pd(e);return t.output()}function tC(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,o=n.reduce(function(u,l){return ay(l,u),u},i);t&&(e[t]=o)}function ay(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n=e.shift();if(n==="PARAMETER"&&(n=e.shift()),e.length===1){if(Array.isArray(e[0])){t[n]={},ay(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=!0;return}if(n==="TOWGS84"){t[n]=e;return}if(n==="AXIS"){n in t||(t[n]=[]),t[n].push(e);return}Array.isArray(n)||(t[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&ay(e[2],t[n]);return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]},e.length===4&&ay(e[3],t[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":e[0]=["name",e[0]],tC(t,n,e);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":e[0]=["name",e[0]],tC(t,n,e),t[n].type=n;return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return ay(e,t[n]);return tC(t,n,e)}}var Q$=.017453292519943295,J$=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function eH(e,t){var n=t[0],i=t[1];!(n in e)&&i in e&&(e[n]=e[i],t.length===3&&(e[n]=t[2](e[n])))}function Zc(e){return e*Q$}function kL(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;++n){var o=t[n];J$.indexOf(o)!==-1&&tH(e[o]),typeof e[o]=="object"&&kL(e[o])}}function tH(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var n="",i=0,o=e.AXIS.length;i<o;++i){var u=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];u[0].indexOf("north")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="north"?n+="n":u[0].indexOf("south")!==-1||(u[0]==="y"||u[0]==="lat")&&u[1]==="south"?n+="s":u[0].indexOf("east")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="east"?n+="e":(u[0].indexOf("west")!==-1||(u[0]==="x"||u[0]==="lon")&&u[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(e.axis=n)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var l=e.GEOGCS;e.type==="GEOGCS"&&(l=e),l&&(l.DATUM?e.datumCode=l.DATUM.name.toLowerCase():e.datumCode=l.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),e.datumCode==="new_zealand_1949"&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode==="belge_1972"&&(e.datumCode="rnb72"),l.DATUM&&l.DATUM.SPHEROID&&(e.ellps=l.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=l.DATUM.SPHEROID.a,e.rf=parseFloat(l.DATUM.SPHEROID.rf,10)),l.DATUM&&l.DATUM.TOWGS84&&(e.datum_params=l.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function s(b){var x=e.to_meter||1;return b*x}var f=function(b){return eH(e,b)},y=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Zc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Zc],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Zc],["lat0","latitude_of_origin",Zc],["lat0","standard_parallel_1",Zc],["lat1","standard_parallel_1",Zc],["lat2","standard_parallel_2",Zc],["azimuth","Azimuth"],["alpha","azimuth",Zc],["srsCode","name"]];y.forEach(f),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=Zc(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=Zc(e.lat0>0?90:-90))}function LL(e){var t=X$(e),n=t[0],i={};return ay(t,i),kL(i),i[n]}function wo(e){var t=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?wo[e]=yI(arguments[1]):wo[e]=LL(arguments[1]):wo[e]=n}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?wo.apply(t,i):wo(i)});if(typeof e=="string"){if(e in wo)return wo[e]}else"EPSG"in e?wo["EPSG:"+e.EPSG]=e:"ESRI"in e?wo["ESRI:"+e.ESRI]=e:"IAU2000"in e?wo["IAU2000:"+e.IAU2000]=e:console.log(e);return}}j$(wo);function nH(e){return typeof e=="string"}function rH(e){return e in wo}var iH=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function sH(e){return iH.some(function(t){return e.indexOf(t)>-1})}var aH=["3857","900913","3785","102113"];function oH(e){var t=Gf(e,"authority");if(t){var n=Gf(t,"epsg");return n&&aH.indexOf(n)>-1}}function lH(e){var t=Gf(e,"extension");if(t)return Gf(t,"proj4")}function uH(e){return e[0]==="+"}function cH(e){if(nH(e)){if(rH(e))return wo[e];if(sH(e)){var t=LL(e);if(oH(t))return wo["EPSG:3857"];var n=lH(t);return n?yI(n):t}if(uH(e))return yI(e)}else return e}function WT(e,t){e=e||{};var n,i;if(!t)return e;for(i in t)n=t[i],n!==void 0&&(e[i]=n);return e}function ah(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}function V_(e){return e<0?-1:1}function Ln(e){return Math.abs(e)<=Da?e:e-V_(e)*g_}function lc(e,t,n){var i=e*n,o=.5*e;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(hn-t))/i}function v_(e,t){for(var n=.5*e,i,o,u=hn-2*Math.atan(t),l=0;l<=15;l++)if(i=e*Math.sin(u),o=hn-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-u,u+=o,Math.abs(o)<=1e-10)return u;return-9999}function hH(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ah(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function dH(e){var t=e.x,n=e.y;if(n*Qc>90&&n*Qc<-90&&t*Qc>180&&t*Qc<-180)return null;var i,o;if(Math.abs(Math.abs(n)-hn)<=Sn)return null;if(this.sphere)i=this.x0+this.a*this.k0*Ln(t-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(di+.5*n));else{var u=Math.sin(n),l=lc(this.e,n,u);i=this.x0+this.a*this.k0*Ln(t-this.long0),o=this.y0-this.a*this.k0*Math.log(l)}return e.x=i,e.y=o,e}function fH(e){var t=e.x-this.x0,n=e.y-this.y0,i,o;if(this.sphere)o=hn-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var u=Math.exp(-n/(this.a*this.k0));if(o=v_(this.e,u),o===-9999)return null}return i=Ln(this.long0+t/(this.a*this.k0)),e.x=i,e.y=o,e}var pH=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const mH={init:hH,forward:dH,inverse:fH,names:pH};function gH(){}function qT(e){return e}var yH=["longlat","identity"];const vH={init:gH,forward:qT,inverse:qT,names:yH};var _H=[mH,vH],qb={},Ox=[];function DL(e,t){var n=Ox.length;return e.names?(Ox[n]=e,e.names.forEach(function(i){qb[i.toLowerCase()]=n}),this):(console.log(t),!0)}function bH(e){if(!e)return!1;var t=e.toLowerCase();if(typeof qb[t]<"u"&&Ox[qb[t]])return Ox[qb[t]]}function xH(){_H.forEach(DL)}const AH={start:xH,add:DL,get:bH};var cr={};cr.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};cr.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};cr.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};cr.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};cr.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};cr.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};cr.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};cr.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};cr.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};cr.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};cr.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};cr.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};cr.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};cr.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};cr.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};cr.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};cr.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};cr.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};cr.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};cr.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};cr.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};cr.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};cr.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};cr.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};cr.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};cr.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};cr.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};cr.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};cr.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};cr.hough={a:6378270,rf:297,ellipseName:"Hough"};cr.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};cr.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};cr.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};cr.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};cr.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};cr.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};cr.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};cr.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};cr.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};cr.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};cr.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};cr.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var wH=cr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};cr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function CH(e,t,n,i){var o=e*e,u=t*t,l=(o-u)/o,s=0;i?(e*=1-l*(H$+l*(G$+l*Z$)),o=e*e,l=0):s=Math.sqrt(l);var f=(o-u)/u;return{es:l,e:s,ep2:f}}function IH(e,t,n,i,o){if(!e){var u=Gf(cr,i);u||(u=wH),e=u.a,t=u.b,n=u.rf}return n&&!t&&(t=(1-1/n)*e),(n===0||Math.abs(e-t)<Sn)&&(o=!0,t=e),{a:e,b:t,rf:n,sphere:o}}var Kb={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var MH in Kb){var KT=Kb[MH];Kb[KT.datumName]=KT}function SH(e,t,n,i,o,u,l){var s={};return e===void 0||e==="none"?s.datum_type=gI:s.datum_type=U$,t&&(s.datum_params=t.map(parseFloat),(s.datum_params[0]!==0||s.datum_params[1]!==0||s.datum_params[2]!==0)&&(s.datum_type=km),s.datum_params.length>3&&(s.datum_params[3]!==0||s.datum_params[4]!==0||s.datum_params[5]!==0||s.datum_params[6]!==0)&&(s.datum_type=Lm,s.datum_params[3]*=V0,s.datum_params[4]*=V0,s.datum_params[5]*=V0,s.datum_params[6]=s.datum_params[6]/1e6+1)),l&&(s.datum_type=vy,s.grids=l),s.a=n,s.b=i,s.es=o,s.ep2=u,s}var RL={};function EH(e,t){var n=new DataView(t),i=kH(n),o=LH(n,i),u=DH(n,o,i),l={header:o,subgrids:u};return RL[e]=l,l}function TH(e){if(e===void 0)return null;var t=e.split(",");return t.map(PH)}function PH(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:RL[e]||null,isNull:!1}}function oy(e){return e/3600*Math.PI/180}function kH(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function LH(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:vI(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function vI(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function DH(e,t,n){for(var i=176,o=[],u=0;u<t.nSubgrids;u++){var l=OH(e,i,n),s=zH(e,i,l,n),f=Math.round(1+(l.upperLongitude-l.lowerLongitude)/l.longitudeInterval),y=Math.round(1+(l.upperLatitude-l.lowerLatitude)/l.latitudeInterval);o.push({ll:[oy(l.lowerLongitude),oy(l.lowerLatitude)],del:[oy(l.longitudeInterval),oy(l.latitudeInterval)],lim:[f,y],count:l.gridNodeCount,cvs:RH(s)}),i+=176+l.gridNodeCount*16}return o}function RH(e){return e.map(function(t){return[oy(t.longitudeShift),oy(t.latitudeShift)]})}function OH(e,t,n){return{name:vI(e,t+8,t+16).trim(),parent:vI(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function zH(e,t,n,i){for(var o=t+176,u=16,l=[],s=0;s<n.gridNodeCount;s++){var f={latitudeShift:e.getFloat32(o+s*u,i),longitudeShift:e.getFloat32(o+s*u+4,i),latitudeAccuracy:e.getFloat32(o+s*u+8,i),longitudeAccuracy:e.getFloat32(o+s*u+12,i)};l.push(f)}return l}function Jc(e,t){if(!(this instanceof Jc))return new Jc(e);t=t||function(y){if(y)throw y};var n=cH(e);if(typeof n!="object"){t("Could not parse to valid json: "+e);return}var i=Jc.projections.get(n.projName);if(!i){t("Could not get projection name from: "+e);return}if(n.datumCode&&n.datumCode!=="none"){var o=Gf(Kb,n.datumCode);o&&(n.datum_params=n.datum_params||(o.towgs84?o.towgs84.split(","):null),n.ellps=o.ellipse,n.datumName=o.datumName?o.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var u=IH(n.a,n.b,n.rf,n.ellps,n.sphere),l=CH(u.a,u.b,u.rf,n.R_A),s=TH(n.nadgrids),f=n.datum||SH(n.datumCode,n.datum_params,u.a,u.b,l.es,l.ep2,s);WT(this,n),WT(this,i),this.a=u.a,this.b=u.b,this.rf=u.rf,this.sphere=u.sphere,this.es=l.es,this.e=l.e,this.ep2=l.ep2,this.datum=f,this.init(),t(null,this)}Jc.projections=AH;Jc.projections.start();function FH(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===km?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Lm?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function OL(e,t,n){var i=e.x,o=e.y,u=e.z?e.z:0,l,s,f,y;if(o<-hn&&o>-1.001*hn)o=-hn;else if(o>hn&&o<1.001*hn)o=hn;else{if(o<-hn)return{x:-1/0,y:-1/0,z:e.z};if(o>hn)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),s=Math.sin(o),y=Math.cos(o),f=s*s,l=n/Math.sqrt(1-t*f),{x:(l+u)*y*Math.cos(i),y:(l+u)*y*Math.sin(i),z:(l*(1-t)+u)*s}}function zL(e,t,n,i){var o=1e-12,u=o*o,l=30,s,f,y,b,x,M,A,k,L,F,V,O,N,U=e.x,W=e.y,ne=e.z?e.z:0,X,q,G;if(s=Math.sqrt(U*U+W*W),f=Math.sqrt(U*U+W*W+ne*ne),s/n<o){if(X=0,f/n<o)return q=hn,G=-i,{x:e.x,y:e.y,z:e.z}}else X=Math.atan2(W,U);y=ne/f,b=s/f,x=1/Math.sqrt(1-t*(2-t)*b*b),k=b*(1-t)*x,L=y*x,N=0;do N++,A=n/Math.sqrt(1-t*L*L),G=s*k+ne*L-A*(1-t*L*L),M=t*A/(A+G),x=1/Math.sqrt(1-M*(2-M)*b*b),F=b*(1-M)*x,V=y*x,O=V*k-F*L,k=F,L=V;while(O*O>u&&N<l);return q=Math.atan(V/Math.abs(F)),{x:X,y:q,z:G}}function BH(e,t,n){if(t===km)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===Lm){var i=n[0],o=n[1],u=n[2],l=n[3],s=n[4],f=n[5],y=n[6];return{x:y*(e.x-f*e.y+s*e.z)+i,y:y*(f*e.x+e.y-l*e.z)+o,z:y*(-s*e.x+l*e.y+e.z)+u}}}function NH(e,t,n){if(t===km)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===Lm){var i=n[0],o=n[1],u=n[2],l=n[3],s=n[4],f=n[5],y=n[6],b=(e.x-i)/y,x=(e.y-o)/y,M=(e.z-u)/y;return{x:b+f*x-s*M,y:-f*b+x+l*M,z:s*b-l*x+M}}}function Mb(e){return e===km||e===Lm}function VH(e,t,n){if(FH(e,t)||e.datum_type===gI||t.datum_type===gI)return n;var i=e.a,o=e.es;if(e.datum_type===vy){var u=YT(e,!1,n);if(u!==0)return;i=HT,o=GT}var l=t.a,s=t.b,f=t.es;if(t.datum_type===vy&&(l=HT,s=$$,f=GT),o===f&&i===l&&!Mb(e.datum_type)&&!Mb(t.datum_type))return n;if(n=OL(n,o,i),Mb(e.datum_type)&&(n=BH(n,e.datum_type,e.datum_params)),Mb(t.datum_type)&&(n=NH(n,t.datum_type,t.datum_params)),n=zL(n,f,l,s),t.datum_type===vy){var y=YT(t,!0,n);if(y!==0)return}return n}function YT(e,t,n){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},o={x:Number.NaN,y:Number.NaN},u=[];e:for(var l=0;l<e.grids.length;l++){var s=e.grids[l];if(u.push(s.name),s.isNull){o=i;break}if(s.mandatory,s.grid===null){if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1;continue}for(var f=s.grid.subgrids,y=0,b=f.length;y<b;y++){var x=f[y],M=(Math.abs(x.del[1])+Math.abs(x.del[0]))/1e4,A=x.ll[0]-M,k=x.ll[1]-M,L=x.ll[0]+(x.lim[0]-1)*x.del[0]+M,F=x.ll[1]+(x.lim[1]-1)*x.del[1]+M;if(!(k>i.y||A>i.x||F<i.y||L<i.x)&&(o=jH(i,t,x),!isNaN(o.x)))break e}}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Qc+" "+i.y*Qc+" tried: '"+u+"'"),-1):(n.x=-o.x,n.y=o.y,0)}function jH(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var o={x:e.x,y:e.y};o.x-=n.ll[0],o.y-=n.ll[1],o.x=Ln(o.x-Math.PI)+Math.PI;var u=XT(o,n);if(t){if(isNaN(u.x))return i;u.x=o.x-u.x,u.y=o.y-u.y;var l=9,s=1e-12,f,y;do{if(y=XT(u,n),isNaN(y.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}f={x:o.x-(y.x+u.x),y:o.y-(y.y+u.y)},u.x+=f.x,u.y+=f.y}while(l--&&Math.abs(f.x)>s&&Math.abs(f.y)>s);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Ln(u.x+n.ll[0]),i.y=u.y+n.ll[1]}else isNaN(u.x)||(i.x=e.x+u.x,i.y=e.y+u.y);return i}function XT(e,t){var n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},o={x:n.x-1*i.x,y:n.y-1*i.y},u={x:Number.NaN,y:Number.NaN},l;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return u;l=i.y*t.lim[0]+i.x;var s={x:t.cvs[l][0],y:t.cvs[l][1]};l++;var f={x:t.cvs[l][0],y:t.cvs[l][1]};l+=t.lim[0];var y={x:t.cvs[l][0],y:t.cvs[l][1]};l--;var b={x:t.cvs[l][0],y:t.cvs[l][1]},x=o.x*o.y,M=o.x*(1-o.y),A=(1-o.x)*(1-o.y),k=(1-o.x)*o.y;return u.x=A*s.x+M*f.x+k*b.x+x*y.x,u.y=A*s.y+M*f.y+k*b.y+x*y.y,u}function QT(e,t,n){var i=n.x,o=n.y,u=n.z||0,l,s,f,y={};for(f=0;f<3;f++)if(!(t&&f===2&&n.z===void 0))switch(f===0?(l=i,"ew".indexOf(e.axis[f])!==-1?s="x":s="y"):f===1?(l=o,"ns".indexOf(e.axis[f])!==-1?s="y":s="x"):(l=u,s="z"),e.axis[f]){case"e":y[s]=l;break;case"w":y[s]=-l;break;case"n":y[s]=l;break;case"s":y[s]=-l;break;case"u":n[s]!==void 0&&(y.z=l);break;case"d":n[s]!==void 0&&(y.z=-l);break;default:return null}return y}function FL(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function UH(e){JT(e.x),JT(e.y)}function JT(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function $H(e,t){return(e.datum.datum_type===km||e.datum.datum_type===Lm||e.datum.datum_type===vy)&&t.datumCode!=="WGS84"||(t.datum.datum_type===km||t.datum.datum_type===Lm||t.datum.datum_type===vy)&&e.datumCode!=="WGS84"}function zx(e,t,n,i){var o;Array.isArray(n)?n=FL(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var u=n.z!==void 0;if(UH(n),e.datum&&t.datum&&$H(e,t)&&(o=new Jc("WGS84"),n=zx(e,o,n,i),e=o),i&&e.axis!=="enu"&&(n=QT(e,!1,n)),e.projName==="longlat")n={x:n.x*La,y:n.y*La,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),n=e.inverse(n),!n)return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=VH(e.datum,t.datum,n),!!n)return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),t.projName==="longlat"?n={x:n.x*Qc,y:n.y*Qc,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&t.axis!=="enu"?QT(t,!0,n):(n&&!u&&delete n.z,n)}var eP=Jc("WGS84");function nC(e,t,n,i){var o,u,l;return Array.isArray(n)?(o=zx(e,t,n,i)||{x:NaN,y:NaN},n.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof o.z=="number"?[o.x,o.y,o.z].concat(n.slice(3)):[o.x,o.y,n[2]].concat(n.slice(3)):[o.x,o.y].concat(n.slice(2)):[o.x,o.y]):(u=zx(e,t,n,i),l=Object.keys(n),l.length===2||l.forEach(function(s){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(s==="x"||s==="y"||s==="z")return}else if(s==="x"||s==="y")return;u[s]=n[s]}),u)}function tP(e){return e instanceof Jc?e:e.oProj?e.oProj:Jc(e)}function Ll(e,t,n){e=tP(e);var i=!1,o;return typeof t>"u"?(t=e,e=eP,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(n=t,t=e,e=eP,i=!0),t=tP(t),n?nC(e,t,n):(o={forward:function(u,l){return nC(e,t,u,l)},inverse:function(u,l){return nC(t,e,u,l)}},i&&(o.oProj=t),o)}var nP=6,BL="AJSAJS",NL="AFAFAF",ly=65,Qo=73,lu=79,w0=86,C0=90;const HH={forward:VL,inverse:GH,toPoint:jL};function VL(e,t){return t=t||5,qH(ZH({lat:e[1],lon:e[0]}),t)}function GH(e){var t=WM($L(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function jL(e){var t=WM($L(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function rC(e){return e*(Math.PI/180)}function rP(e){return 180*(e/Math.PI)}function ZH(e){var t=e.lat,n=e.lon,i=6378137,o=.00669438,u=.9996,l,s,f,y,b,x,M,A=rC(t),k=rC(n),L,F;F=Math.floor((n+180)/6)+1,n===180&&(F=60),t>=56&&t<64&&n>=3&&n<12&&(F=32),t>=72&&t<84&&(n>=0&&n<9?F=31:n>=9&&n<21?F=33:n>=21&&n<33?F=35:n>=33&&n<42&&(F=37)),l=(F-1)*6-180+3,L=rC(l),s=o/(1-o),f=i/Math.sqrt(1-o*Math.sin(A)*Math.sin(A)),y=Math.tan(A)*Math.tan(A),b=s*Math.cos(A)*Math.cos(A),x=Math.cos(A)*(k-L),M=i*((1-o/4-3*o*o/64-5*o*o*o/256)*A-(3*o/8+3*o*o/32+45*o*o*o/1024)*Math.sin(2*A)+(15*o*o/256+45*o*o*o/1024)*Math.sin(4*A)-35*o*o*o/3072*Math.sin(6*A));var V=u*f*(x+(1-y+b)*x*x*x/6+(5-18*y+y*y+72*b-58*s)*x*x*x*x*x/120)+5e5,O=u*(M+f*Math.tan(A)*(x*x/2+(5-y+9*b+4*b*b)*x*x*x*x/24+(61-58*y+y*y+600*b-330*s)*x*x*x*x*x*x/720));return t<0&&(O+=1e7),{northing:Math.round(O),easting:Math.round(V),zoneNumber:F,zoneLetter:WH(t)}}function WM(e){var t=e.northing,n=e.easting,i=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var u=.9996,l=6378137,s=.00669438,f,y=(1-Math.sqrt(1-s))/(1+Math.sqrt(1-s)),b,x,M,A,k,L,F,V,O,N=n-5e5,U=t;i<"N"&&(U-=1e7),F=(o-1)*6-180+3,f=s/(1-s),L=U/u,V=L/(l*(1-s/4-3*s*s/64-5*s*s*s/256)),O=V+(3*y/2-27*y*y*y/32)*Math.sin(2*V)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*V)+151*y*y*y/96*Math.sin(6*V),b=l/Math.sqrt(1-s*Math.sin(O)*Math.sin(O)),x=Math.tan(O)*Math.tan(O),M=f*Math.cos(O)*Math.cos(O),A=l*(1-s)/Math.pow(1-s*Math.sin(O)*Math.sin(O),1.5),k=N/(b*u);var W=O-b*Math.tan(O)/A*(k*k/2-(5+3*x+10*M-4*M*M-9*f)*k*k*k*k/24+(61+90*x+298*M+45*x*x-252*f-3*M*M)*k*k*k*k*k*k/720);W=rP(W);var ne=(k-(1+2*x+M)*k*k*k/6+(5-2*M+28*x-3*M*M+8*f+24*x*x)*k*k*k*k*k/120)/Math.cos(O);ne=F+rP(ne);var X;if(e.accuracy){var q=WM({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});X={top:q.lat,right:q.lon,bottom:W,left:ne}}else X={lat:W,lon:ne};return X}function WH(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function qH(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+KH(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+i.substr(i.length-5,t)}function KH(e,t,n){var i=UL(n),o=Math.floor(e/1e5),u=Math.floor(t/1e5)%20;return YH(o,u,i)}function UL(e){var t=e%nP;return t===0&&(t=nP),t}function YH(e,t,n){var i=n-1,o=BL.charCodeAt(i),u=NL.charCodeAt(i),l=o+e-1,s=u+t,f=!1;l>C0&&(l=l-C0+ly-1,f=!0),(l===Qo||o<Qo&&l>Qo||(l>Qo||o<Qo)&&f)&&l++,(l===lu||o<lu&&l>lu||(l>lu||o<lu)&&f)&&(l++,l===Qo&&l++),l>C0&&(l=l-C0+ly-1),s>w0?(s=s-w0+ly-1,f=!0):f=!1,(s===Qo||u<Qo&&s>Qo||(s>Qo||u<Qo)&&f)&&s++,(s===lu||u<lu&&s>lu||(s>lu||u<lu)&&f)&&(s++,s===Qo&&s++),s>w0&&(s=s-w0+ly-1);var y=String.fromCharCode(l)+String.fromCharCode(s);return y}function $L(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,n=null,i="",o,u=0;!/[A-Z]/.test(o=e.charAt(u));){if(u>=2)throw"MGRSPoint bad conversion from: "+e;i+=o,u++}var l=parseInt(i,10);if(u===0||u+3>t)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(u++);if(s<="A"||s==="B"||s==="Y"||s>="Z"||s==="I"||s==="O")throw"MGRSPoint zone letter "+s+" not handled: "+e;n=e.substring(u,u+=2);for(var f=UL(l),y=XH(n.charAt(0),f),b=QH(n.charAt(1),f);b<JH(s);)b+=2e6;var x=t-u;if(x%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var M=x/2,A=0,k=0,L,F,V,O,N;return M>0&&(L=1e5/Math.pow(10,M),F=e.substring(u,u+M),A=parseFloat(F)*L,V=e.substring(u+M),k=parseFloat(V)*L),O=A+y,N=k+b,{easting:O,northing:N,zoneLetter:s,zoneNumber:l,accuracy:L}}function XH(e,t){for(var n=BL.charCodeAt(t-1),i=1e5,o=!1;n!==e.charCodeAt(0);){if(n++,n===Qo&&n++,n===lu&&n++,n>C0){if(o)throw"Bad character: "+e;n=ly,o=!0}i+=1e5}return i}function QH(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=NL.charCodeAt(t-1),i=0,o=!1;n!==e.charCodeAt(0);){if(n++,n===Qo&&n++,n===lu&&n++,n>w0){if(o)throw"Bad character: "+e;n=ly,o=!0}i+=1e5}return i}function JH(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Ry(e,t,n){if(!(this instanceof Ry))return new Ry(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ry.fromMGRS=function(e){return new Ry(jL(e))};Ry.prototype.toMGRS=function(e){return VL([this.x,this.y],e)};var eG=1,tG=.25,iP=.046875,sP=.01953125,aP=.01068115234375,nG=.75,rG=.46875,iG=.013020833333333334,sG=.007120768229166667,aG=.3645833333333333,oG=.005696614583333333,lG=.3076171875;function qM(e){var t=[];t[0]=eG-e*(tG+e*(iP+e*(sP+e*aP))),t[1]=e*(nG-e*(iP+e*(sP+e*aP)));var n=e*e;return t[2]=n*(rG-e*(iG+e*sG)),n*=e,t[3]=n*(aG-e*oG),t[4]=n*e*lG,t}function Xy(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var uG=20;function KM(e,t,n){for(var i=1/(1-t),o=e,u=uG;u;--u){var l=Math.sin(o),s=1-t*l*l;if(s=(Xy(o,l,Math.cos(o),n)-e)*(s*Math.sqrt(s))*i,o-=s,Math.abs(s)<Sn)return o}return o}function cG(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=qM(this.es),this.ml0=Xy(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function hG(e){var t=e.x,n=e.y,i=Ln(t-this.long0),o,u,l,s=Math.sin(n),f=Math.cos(n);if(this.es){var b=f*i,x=Math.pow(b,2),M=this.ep2*Math.pow(f,2),A=Math.pow(M,2),k=Math.abs(f)>Sn?Math.tan(n):0,L=Math.pow(k,2),F=Math.pow(L,2);o=1-this.es*Math.pow(s,2),b=b/Math.sqrt(o);var V=Xy(n,s,f,this.en);u=this.a*(this.k0*b*(1+x/6*(1-L+M+x/20*(5-18*L+F+14*M-58*L*M+x/42*(61+179*F-F*L-479*L)))))+this.x0,l=this.a*(this.k0*(V-this.ml0+s*i*b/2*(1+x/12*(5-L+9*M+4*A+x/30*(61+F-58*L+270*M-330*L*M+x/56*(1385+543*F-F*L-3111*L))))))+this.y0}else{var y=f*Math.sin(i);if(Math.abs(Math.abs(y)-1)<Sn)return 93;if(u=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,l=f*Math.cos(i)/Math.sqrt(1-Math.pow(y,2)),y=Math.abs(l),y>=1){if(y-1>Sn)return 93;l=0}else l=Math.acos(l);n<0&&(l=-l),l=this.a*this.k0*(l-this.lat0)+this.y0}return e.x=u,e.y=l,e}function dG(e){var t,n,i,o,u=(e.x-this.x0)*(1/this.a),l=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+l/this.k0,n=KM(t,this.es,this.en),Math.abs(n)<hn){var x=Math.sin(n),M=Math.cos(n),A=Math.abs(M)>Sn?Math.tan(n):0,k=this.ep2*Math.pow(M,2),L=Math.pow(k,2),F=Math.pow(A,2),V=Math.pow(F,2);t=1-this.es*Math.pow(x,2);var O=u*Math.sqrt(t)/this.k0,N=Math.pow(O,2);t=t*A,i=n-t*N/(1-this.es)*.5*(1-N/12*(5+3*F-9*k*F+k-4*L-N/30*(61+90*F-252*k*F+45*V+46*k-N/56*(1385+3633*F+4095*V+1574*V*F)))),o=Ln(this.long0+O*(1-N/6*(1+2*F+k-N/20*(5+28*F+24*V+8*k*F+6*k-N/42*(61+662*F+1320*V+720*V*F))))/M)}else i=hn*V_(l),o=0;else{var s=Math.exp(u/this.k0),f=.5*(s-1/s),y=this.lat0+l/this.k0,b=Math.cos(y);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(f,2))),i=Math.asin(t),l<0&&(i=-i),f===0&&b===0?o=0:o=Ln(Math.atan2(f,b)+this.long0)}return e.x=o,e.y=i,e}var fG=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Yb={init:cG,forward:hG,inverse:dG,names:fG};function HL(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function sl(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function pG(e){var t=1+e,n=t-1;return n===0?e:e*Math.log(t)/n}function mG(e){var t=Math.abs(e);return t=pG(t*(1+t/(sl(1,t)+1))),e<0?-t:t}function YM(e,t){for(var n=2*Math.cos(2*t),i=e.length-1,o=e[i],u=0,l;--i>=0;)l=-u+n*o+e[i],u=o,o=l;return t+l*Math.sin(2*t)}function gG(e,t){for(var n=2*Math.cos(t),i=e.length-1,o=e[i],u=0,l;--i>=0;)l=-u+n*o+e[i],u=o,o=l;return Math.sin(t)*l}function yG(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function GL(e,t,n){for(var i=Math.sin(t),o=Math.cos(t),u=HL(n),l=yG(n),s=2*o*l,f=-2*i*u,y=e.length-1,b=e[y],x=0,M=0,A=0,k,L;--y>=0;)k=M,L=x,M=b,x=A,b=-k+s*M-f*x+e[y],A=-L+f*M+s*x;return s=i*l,f=o*u,[s*b-f*A,s*A+f*b]}function vG(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Yb.init.apply(this),this.forward=Yb.forward,this.inverse=Yb.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),n=n*t,this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n=n*t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),n=n*t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175))),n=n*t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n=n*t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),n=n*t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n=n*t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n=n*t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n=n*t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=YM(this.cbg,this.lat0);this.Zb=-this.Qn*(i+gG(this.gtu,2*i))}function _G(e){var t=Ln(e.x-this.long0),n=e.y;n=YM(this.cbg,n);var i=Math.sin(n),o=Math.cos(n),u=Math.sin(t),l=Math.cos(t);n=Math.atan2(i,l*o),t=Math.atan2(u*o,sl(i,o*l)),t=mG(Math.tan(t));var s=GL(this.gtu,2*n,2*t);n=n+s[0],t=t+s[1];var f,y;return Math.abs(t)<=2.623395162778?(f=this.a*(this.Qn*t)+this.x0,y=this.a*(this.Qn*n+this.Zb)+this.y0):(f=1/0,y=1/0),e.x=f,e.y=y,e}function bG(e){var t=(e.x-this.x0)*(1/this.a),n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,t=t/this.Qn;var i,o;if(Math.abs(t)<=2.623395162778){var u=GL(this.utg,2*n,2*t);n=n+u[0],t=t+u[1],t=Math.atan(HL(t));var l=Math.sin(n),s=Math.cos(n),f=Math.sin(t),y=Math.cos(t);n=Math.atan2(l*y,sl(f,y*s)),t=Math.atan2(f,y*s),i=Ln(t+this.long0),o=YM(this.cgb,n)}else i=1/0,o=1/0;return e.x=i,e.y=o,e}var xG=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Xb={init:vG,forward:_G,inverse:bG,names:xG};function AG(e,t){if(e===void 0){if(e=Math.floor((Ln(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var wG="etmerc";function CG(){var e=AG(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*La,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Xb.init.apply(this),this.forward=Xb.forward,this.inverse=Xb.inverse}var IG=["Universal Transverse Mercator System","utm"];const MG={init:CG,names:IG,dependsOn:wG};function XM(e,t){return Math.pow((1-e)/(1+e),t)}var SG=20;function EG(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+di)/(Math.pow(Math.tan(.5*this.lat0+di),this.C)*XM(this.e*e,this.ratexp))}function TG(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+di),this.C)*XM(this.e*Math.sin(n),this.ratexp))-hn,e.x=this.C*t,e}function PG(e){for(var t=1e-14,n=e.x/this.C,i=e.y,o=Math.pow(Math.tan(.5*i+di)/this.K,1/this.C),u=SG;u>0&&(i=2*Math.atan(o*XM(this.e*Math.sin(e.y),-.5*this.e))-hn,!(Math.abs(i-e.y)<t));--u)e.y=i;return u?(e.x=n,e.y=i,e):null}const QM={init:EG,forward:TG,inverse:PG};function kG(){QM.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function LG(e){var t,n,i,o;return e.x=Ln(e.x-this.long0),QM.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=o*n*Math.sin(e.x),e.y=o*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function DG(e){var t,n,i,o,u;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,u=sl(e.x,e.y)){var l=2*Math.atan2(u,this.R2);t=Math.sin(l),n=Math.cos(l),o=Math.asin(n*this.sinc0+e.y*t*this.cosc0/u),i=Math.atan2(e.x*t,u*this.cosc0*n-e.y*this.sinc0*t)}else o=this.phic0,i=0;return e.x=i,e.y=o,QM.inverse.apply(this,[e]),e.x=Ln(e.x+this.long0),e}var RG=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const OG={init:kG,forward:LG,inverse:DG,names:RG};function zG(e,t,n){return t*=n,Math.tan(.5*(hn+e))*Math.pow((1-t)/(1+t),.5*n)}function FG(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Sn&&(this.k0=.5*(1+V_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Sn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Sn&&Math.abs(Math.cos(this.lat_ts))>Sn&&(this.k0=.5*this.cons*ah(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/lc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ah(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-hn,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function BG(e){var t=e.x,n=e.y,i=Math.sin(n),o=Math.cos(n),u,l,s,f,y,b,x=Ln(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Sn&&Math.abs(n+this.lat0)<=Sn?(e.x=NaN,e.y=NaN,e):this.sphere?(u=2*this.k0/(1+this.sinlat0*i+this.coslat0*o*Math.cos(x)),e.x=this.a*u*o*Math.sin(x)+this.x0,e.y=this.a*u*(this.coslat0*i-this.sinlat0*o*Math.cos(x))+this.y0,e):(l=2*Math.atan(this.ssfn_(n,i,this.e))-hn,f=Math.cos(l),s=Math.sin(l),Math.abs(this.coslat0)<=Sn?(y=lc(this.e,n*this.con,this.con*i),b=2*this.a*this.k0*y/this.cons,e.x=this.x0+b*Math.sin(t-this.long0),e.y=this.y0-this.con*b*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Sn?(u=2*this.a*this.k0/(1+f*Math.cos(x)),e.y=u*s):(u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*f*Math.cos(x))),e.y=u*(this.cosX0*s-this.sinX0*f*Math.cos(x))+this.y0),e.x=u*f*Math.sin(x)+this.x0,e))}function NG(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,o,u,l=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(l/(2*this.a*this.k0));return t=this.long0,n=this.lat0,l<=Sn?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/l),Math.abs(this.coslat0)<Sn?this.lat0>0?t=Ln(this.long0+Math.atan2(e.x,-1*e.y)):t=Ln(this.long0+Math.atan2(e.x,e.y)):t=Ln(this.long0+Math.atan2(e.x*Math.sin(s),l*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=n,e)}else if(Math.abs(this.coslat0)<=Sn){if(l<=Sn)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*v_(this.e,i),t=this.con*Ln(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,l<=Sn?u=this.X0:(u=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/l),t=Ln(this.long0+Math.atan2(e.x*Math.sin(o),l*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),n=-1*v_(this.e,Math.tan(.5*(hn+u)));return e.x=t,e.y=n,e}var VG=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const jG={init:FG,forward:BG,inverse:NG,names:VG,ssfn_:zG};function UG(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=this.rf,o=1/i,u=2*o-Math.pow(o,2),l=this.e=Math.sqrt(u);this.R=this.k0*n*Math.sqrt(1-u)/(1-u*Math.pow(t,2)),this.alpha=Math.sqrt(1+u/(1-u)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),f=Math.log(Math.tan(Math.PI/4+e/2)),y=Math.log((1+l*t)/(1-l*t));this.K=s-this.alpha*f+this.alpha*l/2*y}function $G(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,o=2*(Math.atan(Math.exp(i))-Math.PI/4),u=this.alpha*(e.x-this.lambda0),l=Math.atan(Math.sin(u)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(u))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(u));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*l+this.x0,e}function HG(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,o=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),u=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(i)),l=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+l/this.alpha,f=0,y=u,b=-1e3,x=0;Math.abs(y-b)>1e-7;){if(++x>20)return;f=1/this.alpha*(Math.log(Math.tan(Math.PI/4+u/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(y))/2)),b=y,y=2*Math.atan(Math.exp(f))-Math.PI/2}return e.x=s,e.y=y,e}var GG=["somerc"];const ZG={init:UG,forward:$G,inverse:HG,names:GG};var Yg=1e-7;function WG(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(n)!==-1}function qG(){var e,t,n,i,o,u,l,s,f,y,b=0,x,M=0,A=0,k=0,L=0,F=0,V=0;this.no_off=WG(this),this.no_rot="no_rot"in this;var O=!1;"alpha"in this&&(O=!0);var N=!1;if("rectified_grid_angle"in this&&(N=!0),O&&(V=this.alpha),N&&(b=this.rectified_grid_angle*La),O||N)M=this.longc;else if(A=this.long1,L=this.lat1,k=this.long2,F=this.lat2,Math.abs(L-F)<=Yg||(e=Math.abs(L))<=Yg||Math.abs(e-hn)<=Yg||Math.abs(Math.abs(this.lat0)-hn)<=Yg||Math.abs(Math.abs(F)-hn)<=Yg)throw new Error;var U=1-this.es;t=Math.sqrt(U),Math.abs(this.lat0)>Sn?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/U),this.A=this.B*this.k0*t/e,i=this.B*t/(n*Math.sqrt(e)),o=i*i-1,o<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=i,this.E*=Math.pow(lc(this.e,this.lat0,s),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=o=1),O||N?(O?(x=Math.asin(Math.sin(V)/i),N||(b=V)):(x=b,V=Math.asin(i*Math.sin(x))),this.lam0=M-Math.asin(.5*(o-1/o)*Math.tan(x))/this.B):(u=Math.pow(lc(this.e,L,Math.sin(L)),this.B),l=Math.pow(lc(this.e,F,Math.sin(F)),this.B),o=this.E/u,f=(l-u)/(l+u),y=this.E*this.E,y=(y-l*u)/(y+l*u),e=A-k,e<-Math.pi?k-=g_:e>Math.pi&&(k+=g_),this.lam0=Ln(.5*(A+k)-Math.atan(y*Math.tan(.5*this.B*(A-k))/f)/this.B),x=Math.atan(2*Math.sin(this.B*Ln(A-this.lam0))/(o-1/o)),b=V=Math.asin(i*Math.sin(x))),this.singam=Math.sin(x),this.cosgam=Math.cos(x),this.sinrot=Math.sin(b),this.cosrot=Math.cos(b),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(V))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*x,this.v_pole_n=this.ArB*Math.log(Math.tan(di-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(di+o))}function KG(e){var t={},n,i,o,u,l,s,f,y;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-hn)>Sn){if(l=this.E/Math.pow(lc(this.e,e.y,Math.sin(e.y)),this.B),s=1/l,n=.5*(l-s),i=.5*(l+s),u=Math.sin(this.B*e.x),o=(n*this.singam-u*this.cosgam)/i,Math.abs(Math.abs(o)-1)<Sn)throw new Error;y=.5*this.ArB*Math.log((1-o)/(1+o)),s=Math.cos(this.B*e.x),Math.abs(s)<Yg?f=this.A*e.x:f=this.ArB*Math.atan2(n*this.cosgam+u*this.singam,s)}else y=e.y>0?this.v_pole_n:this.v_pole_s,f=this.ArB*e.y;return this.no_rot?(t.x=f,t.y=y):(f-=this.u_0,t.x=y*this.cosrot+f*this.sinrot,t.y=f*this.cosrot-y*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function YG(e){var t,n,i,o,u,l,s,f={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),o=.5*(i-1/i),u=.5*(i+1/i),l=Math.sin(this.BrA*t),s=(l*this.cosgam+o*this.singam)/u,Math.abs(Math.abs(s)-1)<Sn)f.x=0,f.y=s<0?-hn:hn;else{if(f.y=this.E/Math.sqrt((1+s)/(1-s)),f.y=v_(this.e,Math.pow(f.y,1/this.B)),f.y===1/0)throw new Error;f.x=-this.rB*Math.atan2(o*this.cosgam-l*this.singam,Math.cos(this.BrA*t))}return f.x+=this.lam0,f}var XG=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const QG={init:qG,forward:KG,inverse:YG,names:XG};function JG(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Sn)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=ah(this.e,t,n),o=lc(this.e,this.lat1,t),u=Math.sin(this.lat2),l=Math.cos(this.lat2),s=ah(this.e,u,l),f=lc(this.e,this.lat2,u),y=lc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Sn?this.ns=Math.log(i/s)/Math.log(o/f):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(y,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function eZ(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=Sn&&(n=V_(n)*(hn-2*Sn));var i=Math.abs(Math.abs(n)-hn),o,u;if(i>Sn)o=lc(this.e,n,Math.sin(n)),u=this.a*this.f0*Math.pow(o,this.ns);else{if(i=n*this.ns,i<=0)return null;u=0}var l=this.ns*Ln(t-this.long0);return e.x=this.k0*(u*Math.sin(l))+this.x0,e.y=this.k0*(this.rh-u*Math.cos(l))+this.y0,e}function tZ(e){var t,n,i,o,u,l=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(l*l+s*s),n=1):(t=-Math.sqrt(l*l+s*s),n=-1);var f=0;if(t!==0&&(f=Math.atan2(n*l,n*s)),t!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),o=v_(this.e,i),o===-9999)return null}else o=-hn;return u=Ln(f/this.ns+this.long0),e.x=u,e.y=o,e}var nZ=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const rZ={init:JG,forward:eZ,inverse:tZ,names:nZ};function iZ(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function sZ(e){var t,n,i,o,u,l,s,f=e.x,y=e.y,b=Ln(f-this.long0);return t=Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(y/2+this.s45),this.alfa)/t)-this.s45),i=-b*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),u=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(o)),l=this.n*u,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=s*Math.cos(l)/1,e.x=s*Math.sin(l)/1,this.czech||(e.y*=-1,e.x*=-1),e}function aZ(e){var t,n,i,o,u,l,s,f,y=e.x;e.x=e.y,e.y=y,this.czech||(e.y*=-1,e.x*=-1),l=Math.sqrt(e.x*e.x+e.y*e.y),u=Math.atan2(e.y,e.x),o=u/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/l,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(o)),n=Math.asin(Math.cos(i)*Math.sin(o)/Math.cos(t)),e.x=this.long0-n/this.alfa,s=t,f=0;var b=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-e.y)<1e-10&&(f=1),s=e.y,b+=1;while(f===0&&b<15);return b>=15?null:e}var oZ=["Krovak","krovak"];const lZ={init:iZ,forward:sZ,inverse:aZ,names:oZ};function To(e,t,n,i,o){return e*o-t*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)}function j_(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function U_(e){return .375*e*(1+.25*e*(1+.46875*e))}function $_(e){return .05859375*e*e*(1+.75*e)}function H_(e){return e*e*e*(35/3072)}function Oy(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}function Xf(e){return Math.abs(e)<hn?e:e-V_(e)*Math.PI}function Fx(e,t,n,i,o){var u,l;u=e/t;for(var s=0;s<15;s++)if(l=(e-(t*u-n*Math.sin(2*u)+i*Math.sin(4*u)-o*Math.sin(6*u)))/(t-2*n*Math.cos(2*u)+4*i*Math.cos(4*u)-6*o*Math.cos(6*u)),u+=l,Math.abs(l)<=1e-10)return u;return NaN}function uZ(){this.sphere||(this.e0=j_(this.es),this.e1=U_(this.es),this.e2=$_(this.es),this.e3=H_(this.es),this.ml0=this.a*To(this.e0,this.e1,this.e2,this.e3,this.lat0))}function cZ(e){var t,n,i=e.x,o=e.y;if(i=Ln(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(o)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(o),Math.cos(i))-this.lat0);else{var u=Math.sin(o),l=Math.cos(o),s=Oy(this.a,this.e,u),f=Math.tan(o)*Math.tan(o),y=i*Math.cos(o),b=y*y,x=this.es*l*l/(1-this.es),M=this.a*To(this.e0,this.e1,this.e2,this.e3,o);t=s*y*(1-b*f*(1/6-(8-f+8*x)*b/120)),n=M-this.ml0+s*u/l*b*(.5+(5-f+6*x)*b/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function hZ(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,o;if(this.sphere){var u=n+this.lat0;i=Math.asin(Math.sin(u)*Math.cos(t)),o=Math.atan2(Math.tan(t),Math.cos(u))}else{var l=this.ml0/this.a+n,s=Fx(l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-hn)<=Sn)return e.x=this.long0,e.y=hn,n<0&&(e.y*=-1),e;var f=Oy(this.a,this.e,Math.sin(s)),y=f*f*f/this.a/this.a*(1-this.es),b=Math.pow(Math.tan(s),2),x=t*this.a/f,M=x*x;i=s-f*Math.tan(s)/y*x*x*(.5-(1+3*b)*x*x/24),o=x*(1-M*(b/3+(1+3*b)*b*M/15))/Math.cos(s)}return e.x=Ln(o+this.long0),e.y=Xf(i),e}var dZ=["Cassini","Cassini_Soldner","cass"];const fZ={init:uZ,forward:cZ,inverse:hZ,names:dZ};function Bf(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}var pZ=1,mZ=2,gZ=3,yZ=4;function vZ(){var e=Math.abs(this.lat0);if(Math.abs(e-hn)<Sn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Sn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=Bf(this.e,1),this.mmf=.5/(1-this.es),this.apa=SZ(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Bf(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function _Z(e){var t,n,i,o,u,l,s,f,y,b,x=e.x,M=e.y;if(x=Ln(x-this.long0),this.sphere){if(u=Math.sin(M),b=Math.cos(M),i=Math.cos(x),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+b*i:1+this.sinph0*u+this.cosph0*b*i,n<=Sn)return null;n=Math.sqrt(2/n),t=n*b*Math.sin(x),n*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*b*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(M+this.lat0)<Sn)return null;n=di-M*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),t=n*Math.sin(x),n*=i}}else{switch(s=0,f=0,y=0,i=Math.cos(x),o=Math.sin(x),u=Math.sin(M),l=Bf(this.e,u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(s=l/this.qp,f=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:y=1+this.sinb1*s+this.cosb1*f*i;break;case this.EQUIT:y=1+f*i;break;case this.N_POLE:y=hn+M,l=this.qp-l;break;case this.S_POLE:y=M-hn,l=this.qp+l;break}if(Math.abs(y)<Sn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:y=Math.sqrt(2/y),this.mode===this.OBLIQ?n=this.ymf*y*(this.cosb1*s-this.sinb1*f*i):n=(y=Math.sqrt(2/(1+f*i)))*s*this.ymf,t=this.xmf*y*f*o;break;case this.N_POLE:case this.S_POLE:l>=0?(t=(y=Math.sqrt(l))*o,n=i*(this.mode===this.S_POLE?y:-y)):t=n=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function bZ(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,o,u,l,s,f,y;if(this.sphere){var b=0,x,M=0;if(x=Math.sqrt(t*t+n*n),o=x*.5,o>1)return null;switch(o=2*Math.asin(o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(M=Math.sin(o),b=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(x)<=Sn?0:Math.asin(n*M/x),t*=M,n=b*x;break;case this.OBLIQ:o=Math.abs(x)<=Sn?this.lat0:Math.asin(b*this.sinph0+n*M*this.cosph0/x),t*=M*this.cosph0,n=(b-Math.sin(o)*this.sinph0)*x;break;case this.N_POLE:n=-n,o=hn-o;break;case this.S_POLE:o-=hn;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{if(y=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,n*=this.dd,f=Math.sqrt(t*t+n*n),f<Sn)return e.x=this.long0,e.y=this.lat0,e;l=2*Math.asin(.5*f/this.rq),u=Math.cos(l),t*=l=Math.sin(l),this.mode===this.OBLIQ?(y=u*this.sinb1+n*l*this.cosb1/f,s=this.qp*y,n=f*this.cosb1*u-n*this.sinb1*l):(y=n*l/f,s=this.qp*y,n=f*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),s=t*t+n*n,!s)return e.x=this.long0,e.y=this.lat0,e;y=1-s/this.qp,this.mode===this.S_POLE&&(y=-y)}i=Math.atan2(t,n),o=EZ(Math.asin(y),this.apa)}return e.x=Ln(this.long0+i),e.y=o,e}var xZ=.3333333333333333,AZ=.17222222222222222,wZ=.10257936507936508,CZ=.06388888888888888,IZ=.0664021164021164,MZ=.016415012942191543;function SZ(e){var t,n=[];return n[0]=e*xZ,t=e*e,n[0]+=t*AZ,n[1]=t*CZ,t*=e,n[0]+=t*wZ,n[1]+=t*IZ,n[2]=t*MZ,n}function EZ(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var TZ=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const PZ={init:vZ,forward:_Z,inverse:bZ,names:TZ,S_POLE:pZ,N_POLE:mZ,EQUIT:gZ,OBLIQ:yZ};function Zf(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function kZ(){Math.abs(this.lat1+this.lat2)<Sn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ah(this.e3,this.sin_po,this.cos_po),this.qs1=Bf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ah(this.e3,this.sin_po,this.cos_po),this.qs2=Bf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Bf(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Sn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function LZ(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Bf(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,u=this.ns0*Ln(t-this.long0),l=o*Math.sin(u)+this.x0,s=this.rh-o*Math.cos(u)+this.y0;return e.x=l,e.y=s,e}function DZ(e){var t,n,i,o,u,l;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),o=0,t!==0&&(o=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?l=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,l=this.phi1z(this.e3,n)),u=Ln(o/this.ns0+this.long0),e.x=u,e.y=l,e}function RZ(e,t){var n,i,o,u,l,s=Zf(.5*t);if(e<Sn)return s;for(var f=e*e,y=1;y<=25;y++)if(n=Math.sin(s),i=Math.cos(s),o=e*n,u=1-o*o,l=.5*u*u/i*(t/(1-f)-n/u+.5/e*Math.log((1-o)/(1+o))),s=s+l,Math.abs(l)<=1e-7)return s;return null}var OZ=["Albers_Conic_Equal_Area","Albers","aea"];const zZ={init:kZ,forward:LZ,inverse:DZ,names:OZ,phi1z:RZ};function FZ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function BZ(e){var t,n,i,o,u,l,s,f,y=e.x,b=e.y;return i=Ln(y-this.long0),t=Math.sin(b),n=Math.cos(b),o=Math.cos(i),l=this.sin_p14*t+this.cos_p14*n*o,u=1,l>0||Math.abs(l)<=Sn?(s=this.x0+this.a*u*n*Math.sin(i)/l,f=this.y0+this.a*u*(this.cos_p14*t-this.sin_p14*n*o)/l):(s=this.x0+this.infinity_dist*n*Math.sin(i),f=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*o)),e.x=s,e.y=f,e}function NZ(e){var t,n,i,o,u,l;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(t,this.rc),n=Math.sin(o),i=Math.cos(o),l=Zf(i*this.sin_p14+e.y*n*this.cos_p14/t),u=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),u=Ln(this.long0+u)):(l=this.phic0,u=0),e.x=u,e.y=l,e}var VZ=["gnom"];const jZ={init:FZ,forward:BZ,inverse:NZ,names:VZ};function UZ(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*hn:hn;for(var i=Math.asin(.5*t),o,u,l,s,f=0;f<30;f++)if(u=Math.sin(i),l=Math.cos(i),s=e*u,o=Math.pow(1-s*s,2)/(2*l)*(t/(1-e*e)-u/(1-s*s)+.5/e*Math.log((1-s)/(1+s))),i+=o,Math.abs(o)<=1e-10)return i;return NaN}function $Z(){this.sphere||(this.k0=ah(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function HZ(e){var t=e.x,n=e.y,i,o,u=Ln(t-this.long0);if(this.sphere)i=this.x0+this.a*u*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var l=Bf(this.e,Math.sin(n));i=this.x0+this.a*this.k0*u,o=this.y0+this.a*l*.5/this.k0}return e.x=i,e.y=o,e}function GZ(e){e.x-=this.x0,e.y-=this.y0;var t,n;return this.sphere?(t=Ln(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=UZ(this.e,2*e.y*this.k0/this.a),t=Ln(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e}var ZZ=["cea"];const WZ={init:$Z,forward:HZ,inverse:GZ,names:ZZ};function qZ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function KZ(e){var t=e.x,n=e.y,i=Ln(t-this.long0),o=Xf(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*o,e}function YZ(e){var t=e.x,n=e.y;return e.x=Ln(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Xf(this.lat0+(n-this.y0)/this.a),e}var XZ=["Equirectangular","Equidistant_Cylindrical","eqc"];const QZ={init:qZ,forward:KZ,inverse:YZ,names:XZ};var oP=20;function JZ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=j_(this.es),this.e1=U_(this.es),this.e2=$_(this.es),this.e3=H_(this.es),this.ml0=this.a*To(this.e0,this.e1,this.e2,this.e3,this.lat0)}function eW(e){var t=e.x,n=e.y,i,o,u,l=Ln(t-this.long0);if(u=l*Math.sin(n),this.sphere)Math.abs(n)<=Sn?(i=this.a*l,o=-1*this.a*this.lat0):(i=this.a*Math.sin(u)/Math.tan(n),o=this.a*(Xf(n-this.lat0)+(1-Math.cos(u))/Math.tan(n)));else if(Math.abs(n)<=Sn)i=this.a*l,o=-1*this.ml0;else{var s=Oy(this.a,this.e,Math.sin(n))/Math.tan(n);i=s*Math.sin(u),o=this.a*To(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+s*(1-Math.cos(u))}return e.x=i+this.x0,e.y=o+this.y0,e}function tW(e){var t,n,i,o,u,l,s,f,y;if(i=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=Sn)t=Ln(i/this.a+this.long0),n=0;else{l=this.lat0+o/this.a,s=i*i/this.a/this.a+l*l,f=l;var b;for(u=oP;u;--u)if(b=Math.tan(f),y=-1*(l*(f*b+1)-f-.5*(f*f+s)*b)/((f-l)/b-1),f+=y,Math.abs(y)<=Sn){n=f;break}t=Ln(this.long0+Math.asin(i*Math.tan(f)/this.a)/Math.sin(n))}else if(Math.abs(o+this.ml0)<=Sn)n=0,t=Ln(this.long0+i/this.a);else{l=(this.ml0+o)/this.a,s=i*i/this.a/this.a+l*l,f=l;var x,M,A,k,L;for(u=oP;u;--u)if(L=this.e*Math.sin(f),x=Math.sqrt(1-L*L)*Math.tan(f),M=this.a*To(this.e0,this.e1,this.e2,this.e3,f),A=this.e0-2*this.e1*Math.cos(2*f)+4*this.e2*Math.cos(4*f)-6*this.e3*Math.cos(6*f),k=M/this.a,y=(l*(x*k+1)-k-.5*x*(k*k+s))/(this.es*Math.sin(2*f)*(k*k+s-2*l*k)/(4*x)+(l-k)*(x*A-2/Math.sin(2*f))-A),f-=y,Math.abs(y)<=Sn){n=f;break}x=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=Ln(this.long0+Math.asin(i*x/this.a)/Math.sin(n))}return e.x=t,e.y=n,e}var nW=["Polyconic","poly"];const rW={init:JZ,forward:eW,inverse:tW,names:nW};function iW(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function sW(e){var t,n=e.x,i=e.y,o=i-this.lat0,u=n-this.long0,l=o/V0*1e-5,s=u,f=1,y=0;for(t=1;t<=10;t++)f=f*l,y=y+this.A[t]*f;var b=y,x=s,M=1,A=0,k,L,F=0,V=0;for(t=1;t<=6;t++)k=M*b-A*x,L=A*b+M*x,M=k,A=L,F=F+this.B_re[t]*M-this.B_im[t]*A,V=V+this.B_im[t]*M+this.B_re[t]*A;return e.x=V*this.a+this.x0,e.y=F*this.a+this.y0,e}function aW(e){var t,n=e.x,i=e.y,o=n-this.x0,u=i-this.y0,l=u/this.a,s=o/this.a,f=1,y=0,b,x,M=0,A=0;for(t=1;t<=6;t++)b=f*l-y*s,x=y*l+f*s,f=b,y=x,M=M+this.C_re[t]*f-this.C_im[t]*y,A=A+this.C_im[t]*f+this.C_re[t]*y;for(var k=0;k<this.iterations;k++){var L=M,F=A,V,O,N=l,U=s;for(t=2;t<=6;t++)V=L*M-F*A,O=F*M+L*A,L=V,F=O,N=N+(t-1)*(this.B_re[t]*L-this.B_im[t]*F),U=U+(t-1)*(this.B_im[t]*L+this.B_re[t]*F);L=1,F=0;var W=this.B_re[1],ne=this.B_im[1];for(t=2;t<=6;t++)V=L*M-F*A,O=F*M+L*A,L=V,F=O,W=W+t*(this.B_re[t]*L-this.B_im[t]*F),ne=ne+t*(this.B_im[t]*L+this.B_re[t]*F);var X=W*W+ne*ne;M=(N*W+U*ne)/X,A=(U*W-N*ne)/X}var q=M,G=A,ee=1,ue=0;for(t=1;t<=9;t++)ee=ee*q,ue=ue+this.D[t]*ee;var Y=this.lat0+ue*V0*1e5,ce=this.long0+G;return e.x=ce,e.y=Y,e}var oW=["New_Zealand_Map_Grid","nzmg"];const lW={init:iW,forward:sW,inverse:aW,names:oW};function uW(){}function cW(e){var t=e.x,n=e.y,i=Ln(t-this.long0),o=this.x0+this.a*i,u=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=o,e.y=u,e}function hW(e){e.x-=this.x0,e.y-=this.y0;var t=Ln(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var dW=["Miller_Cylindrical","mill"];const fW={init:uW,forward:cW,inverse:hW,names:dW};var pW=20;function mW(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=qM(this.es)}function gW(e){var t,n,i=e.x,o=e.y;if(i=Ln(i-this.long0),this.sphere){if(!this.m)o=this.n!==1?Math.asin(this.n*Math.sin(o)):o;else for(var u=this.n*Math.sin(o),l=pW;l;--l){var s=(this.m*o+Math.sin(o)-u)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<Sn)break}t=this.a*this.C_x*i*(this.m+Math.cos(o)),n=this.a*this.C_y*o}else{var f=Math.sin(o),y=Math.cos(o);n=this.a*Xy(o,f,y,this.en),t=this.a*i*y/Math.sqrt(1-this.es*f*f)}return e.x=t,e.y=n,e}function yW(e){var t,n,i,o;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=Zf((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Zf(Math.sin(t)/this.n)),i=Ln(i+this.long0),t=Xf(t)):(t=KM(e.y/this.a,this.es,this.en),o=Math.abs(t),o<hn?(o=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t)),i=Ln(n)):o-Sn<hn&&(i=this.long0)),e.x=i,e.y=t,e}var vW=["Sinusoidal","sinu"];const _W={init:mW,forward:gW,inverse:yW,names:vW};function bW(){}function xW(e){for(var t=e.x,n=e.y,i=Ln(t-this.long0),o=n,u=Math.PI*Math.sin(n);;){var l=-(o+Math.sin(o)-u)/(1+Math.cos(o));if(o+=l,Math.abs(l)<Sn)break}o/=2,Math.PI/2-Math.abs(n)<Sn&&(i=0);var s=.900316316158*this.a*i*Math.cos(o)+this.x0,f=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=s,e.y=f,e}function AW(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=Ln(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var o=Math.asin(n);return e.x=i,e.y=o,e}var wW=["Mollweide","moll"];const CW={init:bW,forward:xW,inverse:AW,names:wW};function IW(){Math.abs(this.lat1+this.lat2)<Sn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=j_(this.es),this.e1=U_(this.es),this.e2=$_(this.es),this.e3=H_(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ah(this.e,this.sinphi,this.cosphi),this.ml1=To(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Sn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ah(this.e,this.sinphi,this.cosphi),this.ml2=To(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=To(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function MW(e){var t=e.x,n=e.y,i;if(this.sphere)i=this.a*(this.g-n);else{var o=To(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-o)}var u=this.ns*Ln(t-this.long0),l=this.x0+i*Math.sin(u),s=this.y0+this.rh-i*Math.cos(u);return e.x=l,e.y=s,e}function SW(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,n,i,o;this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var u=0;if(n!==0&&(u=Math.atan2(t*e.x,t*e.y)),this.sphere)return o=Ln(this.long0+u/this.ns),i=Xf(this.g-n/this.a),e.x=o,e.y=i,e;var l=this.g-n/this.a;return i=Fx(l,this.e0,this.e1,this.e2,this.e3),o=Ln(this.long0+u/this.ns),e.x=o,e.y=i,e}var EW=["Equidistant_Conic","eqdc"];const TW={init:IW,forward:MW,inverse:SW,names:EW};function PW(){this.R=this.a}function kW(e){var t=e.x,n=e.y,i=Ln(t-this.long0),o,u;Math.abs(n)<=Sn&&(o=this.x0+this.R*i,u=this.y0);var l=Zf(2*Math.abs(n/Math.PI));(Math.abs(i)<=Sn||Math.abs(Math.abs(n)-hn)<=Sn)&&(o=this.x0,n>=0?u=this.y0+Math.PI*this.R*Math.tan(.5*l):u=this.y0+Math.PI*this.R*-Math.tan(.5*l));var s=.5*Math.abs(Math.PI/i-i/Math.PI),f=s*s,y=Math.sin(l),b=Math.cos(l),x=b/(y+b-1),M=x*x,A=x*(2/y-1),k=A*A,L=Math.PI*this.R*(s*(x-k)+Math.sqrt(f*(x-k)*(x-k)-(k+f)*(M-k)))/(k+f);i<0&&(L=-L),o=this.x0+L;var F=f+x;return L=Math.PI*this.R*(A*F-s*Math.sqrt((k+f)*(f+1)-F*F))/(k+f),n>=0?u=this.y0+L:u=this.y0-L,e.x=o,e.y=u,e}function LW(e){var t,n,i,o,u,l,s,f,y,b,x,M,A;return e.x-=this.x0,e.y-=this.y0,x=Math.PI*this.R,i=e.x/x,o=e.y/x,u=i*i+o*o,l=-Math.abs(o)*(1+u),s=l-2*o*o+i*i,f=-2*l+1+2*o*o+u*u,A=o*o/f+(2*s*s*s/f/f/f-9*l*s/f/f)/27,y=(l-s*s/3/f)/f,b=2*Math.sqrt(-y/3),x=3*A/y/b,Math.abs(x)>1&&(x>=0?x=1:x=-1),M=Math.acos(x)/3,e.y>=0?n=(-b*Math.cos(M+Math.PI/3)-s/3/f)*Math.PI:n=-(-b*Math.cos(M+Math.PI/3)-s/3/f)*Math.PI,Math.abs(i)<Sn?t=this.long0:t=Ln(this.long0+Math.PI*(u-1+Math.sqrt(1+2*(i*i-o*o)+u*u))/2/i),e.x=t,e.y=n,e}var DW=["Van_der_Grinten_I","VanDerGrinten","vandg"];const RW={init:PW,forward:kW,inverse:LW,names:DW};function OW(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function zW(e){var t=e.x,n=e.y,i=Math.sin(e.y),o=Math.cos(e.y),u=Ln(t-this.long0),l,s,f,y,b,x,M,A,k,L,F,V,O,N,U,W,ne,X,q,G,ee,ue,Y;return this.sphere?Math.abs(this.sin_p12-1)<=Sn?(e.x=this.x0+this.a*(hn-n)*Math.sin(u),e.y=this.y0-this.a*(hn-n)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=Sn?(e.x=this.x0+this.a*(hn+n)*Math.sin(u),e.y=this.y0+this.a*(hn+n)*Math.cos(u),e):(X=this.sin_p12*i+this.cos_p12*o*Math.cos(u),W=Math.acos(X),ne=W?W/Math.sin(W):1,e.x=this.x0+this.a*ne*o*Math.sin(u),e.y=this.y0+this.a*ne*(this.cos_p12*i-this.sin_p12*o*Math.cos(u)),e):(l=j_(this.es),s=U_(this.es),f=$_(this.es),y=H_(this.es),Math.abs(this.sin_p12-1)<=Sn?(b=this.a*To(l,s,f,y,hn),x=this.a*To(l,s,f,y,n),e.x=this.x0+(b-x)*Math.sin(u),e.y=this.y0-(b-x)*Math.cos(u),e):Math.abs(this.sin_p12+1)<=Sn?(b=this.a*To(l,s,f,y,hn),x=this.a*To(l,s,f,y,n),e.x=this.x0+(b+x)*Math.sin(u),e.y=this.y0+(b+x)*Math.cos(u),e):(M=i/o,A=Oy(this.a,this.e,this.sin_p12),k=Oy(this.a,this.e,i),L=Math.atan((1-this.es)*M+this.es*A*this.sin_p12/(k*o)),F=Math.atan2(Math.sin(u),this.cos_p12*Math.tan(L)-this.sin_p12*Math.cos(u)),F===0?q=Math.asin(this.cos_p12*Math.sin(L)-this.sin_p12*Math.cos(L)):Math.abs(Math.abs(F)-Math.PI)<=Sn?q=-Math.asin(this.cos_p12*Math.sin(L)-this.sin_p12*Math.cos(L)):q=Math.asin(Math.sin(u)*Math.cos(L)/Math.sin(F)),V=this.e*this.sin_p12/Math.sqrt(1-this.es),O=this.e*this.cos_p12*Math.cos(F)/Math.sqrt(1-this.es),N=V*O,U=O*O,G=q*q,ee=G*q,ue=ee*q,Y=ue*q,W=A*q*(1-G*U*(1-U)/6+ee/8*N*(1-2*U)+ue/120*(U*(4-7*U)-3*V*V*(1-7*U))-Y/48*N),e.x=this.x0+W*Math.sin(F),e.y=this.y0+W*Math.cos(F),e))}function FW(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,o,u,l,s,f,y,b,x,M,A,k,L,F,V,O,N,U,W,ne,X,q;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*hn*this.a?void 0:(n=t/this.a,i=Math.sin(n),o=Math.cos(n),u=this.long0,Math.abs(t)<=Sn?l=this.lat0:(l=Zf(o*this.sin_p12+e.y*i*this.cos_p12/t),s=Math.abs(this.lat0)-hn,Math.abs(s)<=Sn?this.lat0>=0?u=Ln(this.long0+Math.atan2(e.x,-e.y)):u=Ln(this.long0-Math.atan2(-e.x,e.y)):u=Ln(this.long0+Math.atan2(e.x*i,t*this.cos_p12*o-e.y*this.sin_p12*i))),e.x=u,e.y=l,e)):(f=j_(this.es),y=U_(this.es),b=$_(this.es),x=H_(this.es),Math.abs(this.sin_p12-1)<=Sn?(M=this.a*To(f,y,b,x,hn),t=Math.sqrt(e.x*e.x+e.y*e.y),A=M-t,l=Fx(A/this.a,f,y,b,x),u=Ln(this.long0+Math.atan2(e.x,-1*e.y)),e.x=u,e.y=l,e):Math.abs(this.sin_p12+1)<=Sn?(M=this.a*To(f,y,b,x,hn),t=Math.sqrt(e.x*e.x+e.y*e.y),A=t-M,l=Fx(A/this.a,f,y,b,x),u=Ln(this.long0+Math.atan2(e.x,e.y)),e.x=u,e.y=l,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),F=Math.atan2(e.x,e.y),k=Oy(this.a,this.e,this.sin_p12),V=Math.cos(F),O=this.e*this.cos_p12*V,N=-O*O/(1-this.es),U=3*this.es*(1-N)*this.sin_p12*this.cos_p12*V/(1-this.es),W=t/k,ne=W-N*(1+N)*Math.pow(W,3)/6-U*(1+3*N)*Math.pow(W,4)/24,X=1-N*ne*ne/2-W*ne*ne*ne/6,L=Math.asin(this.sin_p12*Math.cos(ne)+this.cos_p12*Math.sin(ne)*V),u=Ln(this.long0+Math.asin(Math.sin(F)*Math.sin(ne)/Math.cos(L))),q=Math.sin(L),l=Math.atan2((q-this.es*X*this.sin_p12)*Math.tan(L),q*(1-this.es)),e.x=u,e.y=l,e))}var BW=["Azimuthal_Equidistant","aeqd"];const NW={init:OW,forward:zW,inverse:FW,names:BW};function VW(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function jW(e){var t,n,i,o,u,l,s,f,y=e.x,b=e.y;return i=Ln(y-this.long0),t=Math.sin(b),n=Math.cos(b),o=Math.cos(i),l=this.sin_p14*t+this.cos_p14*n*o,u=1,(l>0||Math.abs(l)<=Sn)&&(s=this.a*u*n*Math.sin(i),f=this.y0+this.a*u*(this.cos_p14*t-this.sin_p14*n*o)),e.x=s,e.y=f,e}function UW(e){var t,n,i,o,u,l,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=Zf(t/this.a),i=Math.sin(n),o=Math.cos(n),l=this.long0,Math.abs(t)<=Sn?(s=this.lat0,e.x=l,e.y=s,e):(s=Zf(o*this.sin_p14+e.y*i*this.cos_p14/t),u=Math.abs(this.lat0)-hn,Math.abs(u)<=Sn?(this.lat0>=0?l=Ln(this.long0+Math.atan2(e.x,-e.y)):l=Ln(this.long0-Math.atan2(-e.x,e.y)),e.x=l,e.y=s,e):(l=Ln(this.long0+Math.atan2(e.x*i,t*this.cos_p14*o-e.y*this.sin_p14*i)),e.x=l,e.y=s,e))}var $W=["ortho"];const HW={init:VW,forward:jW,inverse:UW,names:$W};var us={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},fi={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function GW(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=hn-di/2?this.face=us.TOP:this.lat0<=-(hn-di/2)?this.face=us.BOTTOM:Math.abs(this.long0)<=di?this.face=us.FRONT:Math.abs(this.long0)<=hn+di?this.face=this.long0>0?us.RIGHT:us.LEFT:this.face=us.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function ZW(e){var t={x:0,y:0},n,i,o,u,l,s,f={value:0};if(e.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):n=e.y,i=e.x,this.face===us.TOP)u=hn-n,i>=di&&i<=hn+di?(f.value=fi.AREA_0,o=i-hn):i>hn+di||i<=-(hn+di)?(f.value=fi.AREA_1,o=i>0?i-Da:i+Da):i>-(hn+di)&&i<=-di?(f.value=fi.AREA_2,o=i+hn):(f.value=fi.AREA_3,o=i);else if(this.face===us.BOTTOM)u=hn+n,i>=di&&i<=hn+di?(f.value=fi.AREA_0,o=-i+hn):i<di&&i>=-di?(f.value=fi.AREA_1,o=-i):i<-di&&i>=-(hn+di)?(f.value=fi.AREA_2,o=-i-hn):(f.value=fi.AREA_3,o=i>0?-i+Da:-i-Da);else{var y,b,x,M,A,k,L;this.face===us.RIGHT?i=_y(i,+hn):this.face===us.BACK?i=_y(i,3.14159265359):this.face===us.LEFT&&(i=_y(i,-hn)),M=Math.sin(n),A=Math.cos(n),k=Math.sin(i),L=Math.cos(i),y=A*L,b=A*k,x=M,this.face===us.FRONT?(u=Math.acos(y),o=Sb(u,x,b,f)):this.face===us.RIGHT?(u=Math.acos(b),o=Sb(u,x,-y,f)):this.face===us.BACK?(u=Math.acos(-y),o=Sb(u,x,-b,f)):this.face===us.LEFT?(u=Math.acos(-b),o=Sb(u,x,y,f)):(u=o=0,f.value=fi.AREA_0)}return s=Math.atan(12/Da*(o+Math.acos(Math.sin(o)*Math.cos(di))-hn)),l=Math.sqrt((1-Math.cos(u))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(o))))),f.value===fi.AREA_1?s+=hn:f.value===fi.AREA_2?s+=Da:f.value===fi.AREA_3&&(s+=1.5*Da),t.x=l*Math.cos(s),t.y=l*Math.sin(s),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function WW(e){var t={lam:0,phi:0},n,i,o,u,l,s,f,y,b,x={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),n=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?x.value=fi.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(x.value=fi.AREA_1,n-=hn):e.x<0&&-e.x>=Math.abs(e.y)?(x.value=fi.AREA_2,n=n<0?n+Da:n-Da):(x.value=fi.AREA_3,n+=hn),b=Da/12*Math.tan(n),l=Math.sin(b)/(Math.cos(b)-1/Math.sqrt(2)),s=Math.atan(l),o=Math.cos(n),u=Math.tan(i),f=1-o*o*u*u*(1-Math.cos(Math.atan(1/Math.cos(s)))),f<-1?f=-1:f>1&&(f=1),this.face===us.TOP)y=Math.acos(f),t.phi=hn-y,x.value===fi.AREA_0?t.lam=s+hn:x.value===fi.AREA_1?t.lam=s<0?s+Da:s-Da:x.value===fi.AREA_2?t.lam=s-hn:t.lam=s;else if(this.face===us.BOTTOM)y=Math.acos(f),t.phi=y-hn,x.value===fi.AREA_0?t.lam=-s+hn:x.value===fi.AREA_1?t.lam=-s:x.value===fi.AREA_2?t.lam=-s-hn:t.lam=s<0?-s-Da:-s+Da;else{var M,A,k;M=f,b=M*M,b>=1?k=0:k=Math.sqrt(1-b)*Math.sin(s),b+=k*k,b>=1?A=0:A=Math.sqrt(1-b),x.value===fi.AREA_1?(b=A,A=-k,k=b):x.value===fi.AREA_2?(A=-A,k=-k):x.value===fi.AREA_3&&(b=A,A=k,k=-b),this.face===us.RIGHT?(b=M,M=-A,A=b):this.face===us.BACK?(M=-M,A=-A):this.face===us.LEFT&&(b=M,M=A,A=-b),t.phi=Math.acos(-k)-hn,t.lam=Math.atan2(A,M),this.face===us.RIGHT?t.lam=_y(t.lam,-hn):this.face===us.BACK?t.lam=_y(t.lam,-3.14159265359):this.face===us.LEFT&&(t.lam=_y(t.lam,+hn))}if(this.es!==0){var L,F,V;L=t.phi<0?1:0,F=Math.tan(t.phi),V=this.b/Math.sqrt(F*F+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-V*V)/(this.one_minus_f*V)),L&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function Sb(e,t,n,i){var o;return e<Sn?(i.value=fi.AREA_0,o=0):(o=Math.atan2(t,n),Math.abs(o)<=di?i.value=fi.AREA_0:o>di&&o<=hn+di?(i.value=fi.AREA_1,o-=hn):o>hn+di||o<=-(hn+di)?(i.value=fi.AREA_2,o=o>=0?o-Da:o+Da):(i.value=fi.AREA_3,o+=hn)),o}function _y(e,t){var n=e+t;return n<-3.14159265359?n+=g_:n>3.14159265359&&(n-=g_),n}var qW=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const KW={init:GW,forward:ZW,inverse:WW,names:qW};var _I=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],I0=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ZL=.8487,WL=1.3523,qL=Qc/5,YW=1/qL,uy=18,Bx=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},XW=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function QW(e,t,n,i){for(var o=t;i;--i){var u=e(o);if(o-=u,Math.abs(u)<n)break}return o}function JW(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function eq(e){var t=Ln(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*qL);i<0?i=0:i>=uy&&(i=uy-1),n=Qc*(n-YW*i);var o={x:Bx(_I[i],n)*t,y:Bx(I0[i],n)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*ZL+this.x0,o.y=o.y*this.a*WL+this.y0,o}function tq(e){var t={x:(e.x-this.x0)/(this.a*ZL),y:Math.abs(e.y-this.y0)/(this.a*WL)};if(t.y>=1)t.x/=_I[uy][0],t.y=e.y<0?-hn:hn;else{var n=Math.floor(t.y*uy);for(n<0?n=0:n>=uy&&(n=uy-1);;)if(I0[n][0]>t.y)--n;else if(I0[n+1][0]<=t.y)++n;else break;var i=I0[n],o=5*(t.y-i[0])/(I0[n+1][0]-i[0]);o=QW(function(u){return(Bx(i,u)-t.y)/XW(i,u)},o,Sn,100),t.x/=Bx(_I[n],o),t.y=(5*n+o)*La,e.y<0&&(t.y=-t.y)}return t.x=Ln(t.x+this.long0),t}var nq=["Robinson","robin"];const rq={init:JW,forward:eq,inverse:tq,names:nq};function iq(){this.name="geocent"}function sq(e){var t=OL(e,this.es,this.a);return t}function aq(e){var t=zL(e,this.es,this.a,this.b);return t}var oq=["Geocentric","geocentric","geocent","Geocent"];const lq={init:iq,forward:sq,inverse:aq,names:oq};var Wa={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},p0={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function uq(){if(Object.keys(p0).forEach((function(n){if(typeof this[n]>"u")this[n]=p0[n].def;else{if(p0[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);p0[n].num&&(this[n]=parseFloat(this[n]))}p0[n].degrees&&(this[n]=this[n]*La)}).bind(this)),Math.abs(Math.abs(this.lat0)-hn)<Sn?this.mode=this.lat0<0?Wa.S_POLE:Wa.N_POLE:Math.abs(this.lat0)<Sn?this.mode=Wa.EQUIT:(this.mode=Wa.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function cq(e){e.x-=this.long0;var t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),o,u;switch(this.mode){case Wa.OBLIQ:u=this.sinph0*t+this.cosph0*n*i;break;case Wa.EQUIT:u=n*i;break;case Wa.S_POLE:u=-t;break;case Wa.N_POLE:u=t;break}switch(u=this.pn1/(this.p-u),o=u*n*Math.sin(e.x),this.mode){case Wa.OBLIQ:u*=this.cosph0*t-this.sinph0*n*i;break;case Wa.EQUIT:u*=t;break;case Wa.N_POLE:u*=-(n*i);break;case Wa.S_POLE:u*=n*i;break}var l,s;return l=u*this.cg+o*this.sg,s=1/(l*this.sw*this.h1+this.cw),o=(o*this.cg-u*this.sg)*this.cw*s,u=l*s,e.x=o*this.a,e.y=u*this.a,e}function hq(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},n,i,o;o=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*o,i=this.pn1*e.y*this.cw*o,e.x=n*this.cg+i*this.sg,e.y=i*this.cg-n*this.sg;var u=sl(e.x,e.y);if(Math.abs(u)<Sn)t.x=0,t.y=e.y;else{var l,s;switch(s=1-u*u*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/u+u/this.pn1),l=Math.sqrt(1-s*s),this.mode){case Wa.OBLIQ:t.y=Math.asin(l*this.sinph0+e.y*s*this.cosph0/u),e.y=(l-this.sinph0*Math.sin(t.y))*u,e.x*=s*this.cosph0;break;case Wa.EQUIT:t.y=Math.asin(e.y*s/u),e.y=l*u,e.x*=s;break;case Wa.N_POLE:t.y=Math.asin(l),e.y=-e.y;break;case Wa.S_POLE:t.y=-Math.asin(l);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var dq=["Tilted_Perspective","tpers"];const fq={init:uq,forward:cq,inverse:hq,names:dq};function pq(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function mq(e){var t=e.x,n=e.y,i,o,u,l;if(t=t-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var s=this.radius_p/sl(this.radius_p*Math.cos(n),Math.sin(n));if(o=s*Math.cos(t)*Math.cos(n),u=s*Math.sin(t)*Math.cos(n),l=s*Math.sin(n),(this.radius_g-o)*o-u*u-l*l*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(u/sl(l,i)),e.y=this.radius_g_1*Math.atan(l/i)):(e.x=this.radius_g_1*Math.atan(u/i),e.y=this.radius_g_1*Math.atan(l/sl(u,i)))}else this.shape==="sphere"&&(i=Math.cos(n),o=Math.cos(t)*i,u=Math.sin(t)*i,l=Math.sin(n),i=this.radius_g-o,this.flip_axis?(e.x=this.radius_g_1*Math.atan(u/sl(l,i)),e.y=this.radius_g_1*Math.atan(l/i)):(e.x=this.radius_g_1*Math.atan(u/i),e.y=this.radius_g_1*Math.atan(l/sl(u,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function gq(e){var t=-1,n=0,i=0,o,u,l,s;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*sl(1,i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*sl(1,n));var f=i/this.radius_p;if(o=n*n+f*f+t*t,u=2*this.radius_g*t,l=u*u-4*o*this.C,l<0)return e.x=Number.NaN,e.y=Number.NaN,e;s=(-u-Math.sqrt(l))/(2*o),t=this.radius_g+s*t,n*=s,i*=s,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+n*n)),o=n*n+i*i+t*t,u=2*this.radius_g*t,l=u*u-4*o*this.C,l<0)return e.x=Number.NaN,e.y=Number.NaN,e;s=(-u-Math.sqrt(l))/(2*o),t=this.radius_g+s*t,n*=s,i*=s,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var yq=["Geostationary Satellite View","Geostationary_Satellite","geos"];const vq={init:pq,forward:mq,inverse:gq,names:yq};var j0=1.340264,U0=-.081106,$0=893e-6,H0=.003796,Nx=Math.sqrt(3)/2;function _q(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function bq(e){var t=Ln(e.x-this.long0),n=e.y,i=Math.asin(Nx*Math.sin(n)),o=i*i,u=o*o*o;return e.x=t*Math.cos(i)/(Nx*(j0+3*U0*o+u*(7*$0+9*H0*o))),e.y=i*(j0+U0*o+u*($0+H0*o)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function xq(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,n=12,i=e.y,o,u,l,s,f,y;for(y=0;y<n&&(o=i*i,u=o*o*o,l=i*(j0+U0*o+u*($0+H0*o))-e.y,s=j0+3*U0*o+u*(7*$0+9*H0*o),i-=f=l/s,!(Math.abs(f)<t));++y);return o=i*i,u=o*o*o,e.x=Nx*e.x*(j0+3*U0*o+u*(7*$0+9*H0*o))/Math.cos(i),e.y=Math.asin(Math.sin(i)/Nx),e.x=Ln(e.x+this.long0),e}var Aq=["eqearth","Equal Earth","Equal_Earth"];const wq={init:_q,forward:bq,inverse:xq,names:Aq};var __=1e-10;function Cq(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<__)throw new Error;this.es?(this.en=qM(this.es),this.m1=Xy(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Mq,this.forward=Iq):(Math.abs(this.phi1)+__>=hn?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Eq,this.forward=Sq)}function Iq(e){var t=Ln(e.x-(this.long0||0)),n=e.y,i,o,u;return i=this.am1+this.m1-Xy(n,o=Math.sin(n),u=Math.cos(n),this.en),o=u*t/(i*Math.sqrt(1-this.es*o*o)),e.x=i*Math.sin(o),e.y=this.am1-i*Math.cos(o),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Mq(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i,o;if(n=sl(e.x,e.y=this.am1-e.y),o=KM(this.am1+this.m1-n,this.es,this.en),(t=Math.abs(o))<hn)t=Math.sin(o),i=n*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(o);else if(Math.abs(t-hn)<=__)i=0;else throw new Error;return e.x=Ln(i+(this.long0||0)),e.y=Xf(o),e}function Sq(e){var t=Ln(e.x-(this.long0||0)),n=e.y,i,o;return o=this.cphi1+this.phi1-n,Math.abs(o)>__?(e.x=o*Math.sin(i=t*Math.cos(n)/o),e.y=this.cphi1-o*Math.cos(i)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Eq(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,n,i=sl(e.x,e.y=this.cphi1-e.y);if(n=this.cphi1+this.phi1-i,Math.abs(n)>hn)throw new Error;return Math.abs(Math.abs(n)-hn)<=__?t=0:t=i*Math.atan2(e.x,e.y)/Math.cos(n),e.x=Ln(t+(this.long0||0)),e.y=Xf(n),e}var Tq=["bonne","Bonne (Werner lat_1=90)"];const Pq={init:Cq,names:Tq};function kq(e){e.Proj.projections.add(Yb),e.Proj.projections.add(Xb),e.Proj.projections.add(MG),e.Proj.projections.add(OG),e.Proj.projections.add(jG),e.Proj.projections.add(ZG),e.Proj.projections.add(QG),e.Proj.projections.add(rZ),e.Proj.projections.add(lZ),e.Proj.projections.add(fZ),e.Proj.projections.add(PZ),e.Proj.projections.add(zZ),e.Proj.projections.add(jZ),e.Proj.projections.add(WZ),e.Proj.projections.add(QZ),e.Proj.projections.add(rW),e.Proj.projections.add(lW),e.Proj.projections.add(fW),e.Proj.projections.add(_W),e.Proj.projections.add(CW),e.Proj.projections.add(TW),e.Proj.projections.add(RW),e.Proj.projections.add(NW),e.Proj.projections.add(HW),e.Proj.projections.add(KW),e.Proj.projections.add(rq),e.Proj.projections.add(lq),e.Proj.projections.add(fq),e.Proj.projections.add(vq),e.Proj.projections.add(wq),e.Proj.projections.add(Pq)}Ll.defaultDatum="WGS84";Ll.Proj=Jc;Ll.WGS84=new Ll.Proj("WGS84");Ll.Point=Ry;Ll.toPoint=FL;Ll.defs=wo;Ll.nadgrid=EH;Ll.transform=zx;Ll.mgrs=HH;Ll.version="__VERSION__";kq(Ll);const JM=al.createLogger().setNamespace("map:"+wu.CRS,2),lP=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}],eS=e=>zl(["map:core",e,wu.CRS],()=>(Kn(JM,e,"store").debug("init"),{crs:"4326",items:lP.slice(),item:lP[0]}))();function KL(e){const t=eS(e);function n({longitude:i,latitude:o},u=!1){const l=t.item||{default:!0,unit:"degree"};return bI({longitude:i,latitude:o},l,u)}return{format:n}}function bI({longitude:e,latitude:t},n,i=!1){const o={longitude:"0",latitude:"0"};return!e||!t||(n&&!n.default&&n.proj4js&&([e,t]=Ll(n.proj4js,[e,t])),n&&n.unit==="meter"?(o.longitude=e.toFixed(0),o.latitude=t.toFixed(0)):i?(o.longitude=Dq(+e),o.latitude=Lq(+t)):(o.longitude=e.toFixed(6),o.latitude=t.toFixed(6))),o}const Lq=e=>`${tS(e)}° ${nS(e)}' ${parseFloat(YL(e).toFixed(2))}" ${e>0?"N":"S"}`,Dq=e=>`${tS(e)}° ${nS(e)}' ${parseFloat(YL(e).toFixed(2))}" ${e>0?"E":"W"}`,tS=e=>e===0?0:Math.floor(Math.abs(e)),nS=e=>e===0?0:Math.floor((Math.abs(e)-Math.floor(Math.abs(e)))*60),YL=e=>e===0?0:(Math.abs(e)-tS(e)-nS(e)/60)*3600,by={setItems:"map:crs:set-items",setCurrent:"map:crs:set-current"},rS=(e,{onChange:t}={})=>{const n=ud(e),i=eS(e),o=Dl(i.items);function u(s){Kn(JM,e,"store").debug("setCrsItems",o),i.items=s,n.emit(by.setItems,s),o.value=[...s]}function l(s){o.value=s,t&&t(s)}return ti(()=>{n.on(by.setItems,l)}),Ol(()=>{n.off(by.setItems,l)}),{items:o,setItems:u}},Rq=(e,{onChange:t}={})=>{const n=ud(e),i=eS(e),o=Dl(i.item);function u(f){Kn(JM,e,"store").debug("setCrs",f),i.crs=f||"4326";const y=i.items.find(b=>b.epsg==f);i.item=y,n.emit(by.setCurrent,y)}function l(f){o.value=f,t&&t(f)}ti(()=>{n.on(by.setCurrent,l)}),Ol(()=>{n.off(by.setCurrent,l)});const s=dn(()=>{var f;return((f=o.value)==null?void 0:f.unit)==="degree"});return{item:o,setItem:u,isCrsDegree:s}},Oq={class:"crs-container"},zq={class:"grow"},Fq={class:"crs-item-header"},Bq={class:"crs-item-header__title"},Nq={class:"crs-item-header__action"},Vq=["onClick"],jq={class:"crs-item"},Uq={key:0},$q={key:1},Hq={class:"crs-item__add"},Gq=Dn({__name:"CrsControl",props:{...Ti},setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Nr(t),{trans:o,setLocaleDefault:u}=Hi(n.value);u({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[l,s]=ld(!1);function f(){s(!l.value)}const{items:y,setItems:b}=rS(n.value),x=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],M={delete:Kf,plus:Yf},A=L=>{b(y.value.filter(F=>F.epsg!==L.epsg))},k=()=>{y.value.push({name:"",unit:"degree",epsg:""}),b(y.value)};return(L,F)=>(Ae(),$t(ts,$i(zi(se(i))),{btn:dt(()=>[He(Br,{onClick:Rr(f,["stop"]),tooltip:se(o)("map.crs-control.title")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(zN)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:dt(V=>[se(l)?(Ae(),$t(se(ch),ar({key:0,height:200,width:400},V,{show:se(l),"onUpdate:show":F[1]||(F[1]=O=>Ii(l)?l.value=O:null),title:se(o)("map.crs-control.title")}),{default:dt(()=>[Le("div",Oq,[Le("div",zq,[(Ae(!0),st(Gn,null,ii(se(y),O=>(Ae(),$t(se(cI),{key:O.epsg,selected:!1},{header:dt(()=>[Le("div",Fq,[Le("div",Bq,gn(O.name),1),Le("div",Nq,[O.default?an("",!0):(Ae(),st("button",{key:0,class:"clickable",onClick:Rr(N=>A(O),["stop"])},[He(se(An),{size:"16",type:"mdi",path:M.delete},null,8,["path"])],8,Vq))])])]),default:dt(()=>[Le("div",jq,[Le("div",null,[He(se(pi),{readonly:O.default,modelValue:O.name,"onUpdate:modelValue":N=>O.name=N,label:se(o)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),Le("div",null,[He(se(pi),{readonly:O.default,modelValue:O.epsg,"onUpdate:modelValue":N=>O.epsg=N,label:se(o)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),O.default?an("",!0):(Ae(),st("div",Uq,[He(se(pi),{modelValue:O.proj4js,"onUpdate:modelValue":N=>O.proj4js=N,label:se(o)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),O.default?an("",!0):(Ae(),st("div",$q,[He(se($f),{modelValue:O.unit,"onUpdate:modelValue":N=>O.unit=N,label:se(o)("map.crs-control.field.unit"),items:x},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),Le("div",Hq,[Le("button",{class:"layer-item__button clickable",onClick:F[0]||(F[0]=Rr(O=>k(),["stop"]))},[He(se(An),{size:"16",type:"mdi",path:M.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):an("",!0)]),default:dt(()=>[In(L.$slots,"default",{},void 0,!0)]),_:3},16))}}),Zq=Cn(Gq,[["__scopeId","data-v-300192ef"]]);let Wq=class{get id(){return this._id}constructor(){this._id=`${hc()}`}},iS=class extends Wq{constructor(t,n="map"){super(),this.event_map_type=t,this.type_select=n,this.options={}}setHandler(t){return this.handler=t,this}addToMap(t){return this.handler&&t.on(this.event_map_type,this.handler),this}removeFromMap(t){return this.handler&&t.off(this.event_map_type,this.handler),this}};class qq extends iS{constructor(){super("click","map"),this._originalHandlers={},this.setClassPointer("pointer")}setClassPointer(t){this.options.classPointer=t}setHandler(t){return this.handler=t,this}addToMap(t){if(!this.handler)return this;this.options.classPointer&&t.getCanvas().classList.add(this.options.classPointer);try{this._originalHandlers={scrollZoom:t.scrollZoom.isEnabled(),dragRotate:t.dragRotate.isEnabled(),touchZoomRotate:t.touchZoomRotate.isEnabled(),doubleClickZoom:t.doubleClickZoom.isEnabled(),dragPan:t.dragPan.isEnabled(),boxZoom:t.boxZoom.isEnabled()},t.scrollZoom.isEnabled()&&t.scrollZoom.disable(),t.dragRotate.isEnabled()&&t.dragRotate.disable(),t.touchZoomRotate.isEnabled()&&t.touchZoomRotate.disable(),t.doubleClickZoom.isEnabled()&&t.doubleClickZoom.disable(),t.dragPan.isEnabled()&&t.dragPan.disable(),t.boxZoom.isEnabled()&&t.boxZoom.disable(),this.map_ranger=Kq(t.getCanvasContainer(),this.handler)}catch(n){console.error("Error disabling map controls:",n)}return this}removeFromMap(t){this.options.classPointer&&t.getCanvas().classList.remove(this.options.classPointer);try{this._originalHandlers.scrollZoom!==!1&&t.scrollZoom.enable(),this._originalHandlers.dragRotate!==!1&&t.dragRotate.enable(),this._originalHandlers.touchZoomRotate!==!1&&t.touchZoomRotate.enable(),this._originalHandlers.doubleClickZoom!==!1&&t.doubleClickZoom.enable(),this._originalHandlers.dragPan!==!1&&t.dragPan.enable(),this._originalHandlers.boxZoom!==!1&&t.boxZoom.enable()}catch(n){console.error("Error re-enabling map controls:",n)}return this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),this}}function Kq(e,t){let n,i,o;function u(M){const A=e.getBoundingClientRect();return{x:M.clientX-A.left-e.clientLeft,y:M.clientY-A.top-e.clientTop}}function l(M){M.preventDefault(),M.stopPropagation(),n=u(M),document.addEventListener("mousemove",s),document.addEventListener("mouseup",f),document.addEventListener("keydown",y)}function s(M){M.preventDefault(),M.stopPropagation(),i=u(M),o||(o=document.createElement("div"),o.classList.add("boxdraw"),e.appendChild(o));const A=Math.min(n.x,i.x),k=Math.max(n.x,i.x),L=Math.min(n.y,i.y),F=Math.max(n.y,i.y);o.style.transform=`translate(${A}px, ${L}px)`,o.style.width=k-A+"px",o.style.height=F-L+"px"}function f(M){M.preventDefault(),M.stopPropagation(),b([n,u(M)])}function y(M){M.keyCode===27&&b()}function b(M){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",f),document.removeEventListener("keydown",y),o&&(o.parentNode&&o.parentNode.removeChild(o),o=void 0),M&&t&&t(M)}function x(){e.removeEventListener("mousedown",l,!0),t=void 0,b()}return e.addEventListener("mousedown",l,!0),e.style.cursor="crosshair",{destroy:x}}class G_ extends iS{constructor(t="map"){super("click",t),this.setClassPointer("pointer")}setClassPointer(t){this.options.classPointer=t}addToMap(t){return this.options.classPointer&&t.getCanvas().classList.add(this.options.classPointer),this.handler&&(t.on("click",this.handler),t.on("touchstart",this.handler)),this}removeFromMap(t){return this.options.classPointer&&t.getCanvas().classList.remove(this.options.classPointer),this.handler&&(t.off("click",this.handler),t.off("touchstart",this.handler)),this}}class Yq extends iS{constructor(t="map"){super("mousemove",t),this.setClassPointer("pointer")}setClassPointer(t){this.options.classPointer=t}addToMap(t){return this.options.classPointer&&t.getCanvas().classList.add(this.options.classPointer),this.handler&&t.on("mousemove",this.handler),this}removeFromMap(t){return this.options.classPointer&&t.getCanvas().classList.remove(this.options.classPointer),this.handler&&t.off("mousemove",this.handler),this}}const iC={};function Xq(e){const t=Dl({}),n=f=>{if(!f)return;const y=f.listImages(),b={};y.forEach(x=>{const M=f.getImage(x);M&&(b[x]=M)}),t.value=b};let i;const o=f=>{f&&(i=()=>n(f),f.on("styledata",i),f.on("idle",i))},u=f=>{f&&i&&(f.off("styledata",i),f.off("idle",i))};ti(()=>{Ja(e,f=>{n(f),o(f)})}),uh(()=>{Ja(e,f=>{u(f)})});const l=()=>{Ja(e,f=>{n(f),o(f)})};function s(f,y){if(iC[f])return iC[f];const b=y.data,x=Qq(b),M=document.createElement("canvas"),A=M.getContext("2d");M.width=b.width,M.height=b.height,A.putImageData(x,0,0);const k=M.toDataURL("image/png");return iC[f]=k,k}return{images:t,reload:l,toDataURL:s}}function Qq(e){const{width:t,height:n,data:i}=e,o=new Uint8ClampedArray(i);return new ImageData(o,t,n)}async function Jq(e,t,n,i={}){const o=await e.loadImage(n);return e.hasImage(t)||e.addImage(t,o.data,i),!0}const XL=al.createLogger().setNamespace("map:"+wu.IMAGE,2),eK=e=>zl(["map:core",e,wu.IMAGE],()=>(Kn(XL,e,"store").debug("init"),{images:{}}))(),tK=e=>{const t=eK(e),n=vL(e);return{async addImage(i,o,u,l={}){return Kn(XL,i,"store").debug("addImage",o,u,l),t.images[o]={path:u,id:o,name:o,is_sprite:!1,category:"custom"},n.getMap(async f=>Jq(f,o,u,l))}}},nK=Dn({__name:"FullScreenControl",props:{...Ti,type:{type:String,default:"body"}},setup(e){const t={fullscreen:LN,exitFullscreen:DN},n=e,{callMap:i,mapId:o,moduleContainerProps:u}=Nr(n),{trans:l,setLocaleDefault:s}=Hi(o.value);s({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:f,toggle:y}=uB(n.type=="body"?document.querySelector("body"):b());function b(x){return i(M=>{if(x||(x=M.getContainer()),x.classList.contains("map-container")||x.tagName==="BODY")return x;x=b(x.parentElement)}),x}return(x,M)=>(Ae(),$t(ts,$i(zi(se(u))),{btn:dt(()=>[He(Br,{icon:"",title:se(f)?se(l)("map.action.fullscreen-control-exit"):se(l)("map.action.fullscreen-control-enter"),onClick:M[0]||(M[0]=A=>se(y)())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(f)?t.exitFullscreen:t.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:dt(()=>[In(x.$slots,"default")]),_:3},16))}}),rK=Dn({__name:"GeoLocateControl",props:{...Ti},setup(e){const{coords:t,error:n,resume:i,pause:o}=cB({immediate:!1}),u=e,{mapId:l,callMap:s,moduleContainerProps:f}=Nr(u),{trans:y,setLocaleDefault:b}=Hi(l.value);b({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const x=Qt(!1),M=Qt(),A=Qt(0);let k,L,F=Qt(void 0),V=Qt(void 0);const O=dn(()=>n.value?MN:F_),N=dn(()=>n.value?n.value.message||y.value("map.action.geolocate-control-location-not-available"):y.value("map.action.geolocate-control-find-my-location"));hs(t,ue=>{ue.longitude==Number.POSITIVE_INFINITY||ue.latitude==Number.POSITIVE_INFINITY||(M.value=[ue.longitude,ue.latitude],A.value=ue.accuracy,M.value&&ne())});async function U(){s(ue=>{if(!x.value){x.value=!0,i().then(Y=>{if(Y){const ce=Y.coords,K=[ce.longitude,ce.latitude];ue.flyTo({center:K,zoom:14})}});return}if(ee(ue,Tm(t))){ue.flyTo({center:M.value,zoom:14});return}o(),x.value=!1,M.value=void 0,W()})}nB(()=>{W()});function W(){s(ue=>{ue.off("zoom",q)}),F.value&&F.value.remove(),V.value&&V.value.remove()}iB(()=>{k||(k=G("div","mapboxgl-user-location"),k.classList.add("mapboxgl-user-location"),k.appendChild(G("div","mapboxgl-user-location-dot")),k.appendChild(G("div","mapboxgl-user-location-heading"))),L||(L=G("div","mapboxgl-user-location-accuracy-circle"))});function ne(){s(ue=>{F.value?F.value.setLngLat(M.value).addTo(ue):F.value=new Pm.Marker({element:k,rotationAlignment:"map",pitchAlignment:"map"}).setLngLat(M.value).addTo(ue),V.value?V.value.setLngLat(M.value).addTo(ue):V.value=new Pm.Marker({element:L,pitchAlignment:"map"}).setLngLat(M.value).addTo(ue),ue.on("zoom",q),X(ue)})}function X(ue){if(!A.value||A.value<=1){L.style.width="1px",L.style.height="1px";return}const Y=ue.getContainer().getBoundingClientRect().height/2,ce=ue.unproject([0,Y]),K=ue.unproject([100,Y]),Se=ce.distanceTo(K)/100,Ve=Math.ceil(2*A.value/Se);L.style.width=`${Ve}px`,L.style.height=`${Ve}px`}function q(ue){X(ue.target)}const G=function(ue,Y,ce){const K=window.document.createElement(ue);return Y!==void 0&&(K.className=Y),K};function ee(ue,Y){const ce=ue.getBounds();return ce&&(Y.longitude<ce.getWest()||Y.longitude>ce.getEast()||Y.latitude<ce.getSouth()||Y.latitude>ce.getNorth())}return(ue,Y)=>(Ae(),$t(ts,$i(zi(se(f))),{btn:dt(()=>[He(Br,{disabled:!!se(n),icon:O.value,tooltip:N.value,active:x.value,onClick:Rr(U,["stop"])},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:O.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:dt(()=>[In(ue.$slots,"default")]),_:3},16))}}),iK=Dn({__name:"GlobeControl",props:{...Ti,zoom:Number,center:Array},setup(e){const t=e,n=Qt("mercator"),{callMap:i,mapId:o,moduleContainerProps:u}=Nr(t,b,x),{trans:l,setLocaleDefault:s}=Hi(o.value);s({map:{"global-control":{title:"Toggle projection"}}});function f(){i(M=>{var A;n.value==="mercator"||!n.value?M.setProjection({type:"globe"}):M.setProjection({type:"mercator"}),n.value=(A=M.getProjection())==null?void 0:A.type})}let y;function b(M){y=()=>{var A;n.value=(A=M.getProjection())==null?void 0:A.type},M.on("styledata",y)}function x(M){y&&M.off("styledata",y)}return(M,A)=>(Ae(),$t(ts,$i(zi(se(u))),{btn:dt(()=>[He(Br,{onClick:Rr(f,["stop"]),active:n.value==="globe",tooltip:se(l)("map.global-control.title")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(QN)},null,8,["path"])]),_:1},8,["active","tooltip"])]),default:dt(()=>[In(M.$slots,"default")]),_:3},16))}}),sK={class:"setting-container"},aK={class:"setting-field-container"},oK={class:"setting-center-container"},lK={__name:"GotoControl",props:{...Ti},setup(e){const t=e,[n,i]=ld(!1),{callMap:o,mapId:u,moduleContainerProps:l}=Nr(t),{trans:s,setLocaleDefault:f}=Hi(u.value);f({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function y(){i(!n.value),n.value&&o(M=>{b.value.zoom=M.getZoom(),b.value.center=[M.getCenter().lng.toFixed(6),M.getCenter().lat.toFixed(6)],b.value.sprite=M.getStyle().sprite,b.value.glyphs=M.getStyle().glyphs})}const b=Qt({zoom:null,center:null,sprite:null,glyphs:null}),x=()=>{o(M=>{b.value.zoom&&M.setZoom(b.value.zoom),b.value.center&&M.setCenter(b.value.center)})};return(M,A)=>(Ae(),$t(ts,$i(zi(se(l))),{btn:dt(()=>[He(Br,{onClick:A[0]||(A[0]=Rr(k=>y(),["stop"])),tooltip:se(s)("map.goto-control.title")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(LM)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:dt(k=>[se(n)?(Ae(),$t(se(ch),ar({key:0,height:300,width:400},k,{show:se(n),"onUpdate:show":A[5]||(A[5]=L=>Ii(n)?n.value=L:null),title:se(s)("map.goto-control.title")}),{default:dt(()=>[Le("div",sK,[Le("div",aK,[Le("div",null,[Le("label",null,gn(se(s)("map.goto-control.field.center")),1),Le("div",oK,[He(se(pi),{modelValue:b.value.center[0],"onUpdate:modelValue":A[1]||(A[1]=L=>b.value.center[0]=L),type:"number",step:"0.0000001"},null,8,["modelValue"]),He(se(pi),{modelValue:b.value.center[1],"onUpdate:modelValue":A[2]||(A[2]=L=>b.value.center[1]=L),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),Le("div",null,[He(se(pi),{label:se(s)("map.goto-control.field.zoom"),modelValue:b.value.zoom,"onUpdate:modelValue":A[3]||(A[3]=L=>b.value.zoom=L),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),He(se(il),{class:"btn-container",onClick:A[4]||(A[4]=L=>x())},{default:dt(()=>[Qi(gn(se(s)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):an("",!0)]),default:dt(()=>[In(M.$slots,"default")]),_:3},16))}},uK=Dn({__name:"HomeControl",props:{...Ti,zoom:Number,center:Array},setup(e){const t=e,n=Qt({lat:0,lng:0}),i=Qt(t.zoom||0),{callMap:o,mapId:u,moduleContainerProps:l}=Nr(t,b),{trans:s,setLocaleDefault:f}=Hi(u.value);f({map:{home:{title:"Default view"}}});function y(){o(x=>{x.setZoom(i.value),x.setCenter(n.value)})}function b(x){t.zoom!=null?i.value=t.zoom:i.value=x.getZoom(),t.center!=null?(n.value.lat=t.center[1],n.value.lng=t.center[0]):n.value=x.getCenter()}return(x,M)=>(Ae(),$t(ts,$i(zi(se(l))),{btn:dt(()=>[He(Br,{onClick:y,tooltip:se(s)("map.home.title")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(ON)},null,8,["path"])]),_:1},8,["tooltip"])]),default:dt(()=>[In(x.$slots,"default")]),_:3},16))}}),cK={class:"button-container mouse-coordinates-container"},hK={key:0,class:"mouse-coordinates-part zoom-part"},dK={class:"mouse-coordinates-zoom"},fK={title:"Current Zoom",class:"icon"},pK={style:{"margin-left":"4px"}},mK={key:1,class:"mouse-coordinates-part coordinates-part"},gK={class:"mouse-coordinates-point"},yK=["innerHTML"],vK=["title"],_K={key:2,class:"mouse-coordinates-part crs-part"},bK={class:"mouse-coordinates-point"},xK=["value"],AK={key:3,class:"mouse-coordinates-part scale-part"},wK=Dn({__name:"MouseCoordinatesControl",props:{...Ti,hideZoom:Boolean,hideCrsSelect:Boolean,hideScale:Boolean,hideCoordinates:Boolean},setup(e){const t=e,n={icon:LM,zoom:BN,change:AN},i=Qt(),o=Qt(""),u=Qt({latitude:0,longitude:0}),l=Qt(0),s=Qt(!1),{callMap:f,mapId:y,moduleContainerProps:b}=Nr(t,V,O),{format:x}=KL(y.value),{items:M}=rS(y.value),{item:A,setItem:k,isCrsDegree:L}=Rq(y.value,{onChange:()=>{ne()}}),F=dn({get(){var Y;return(Y=A.value)==null?void 0:Y.epsg},set(Y){return k(Y)}});function V(Y){l.value=+Y.getZoom().toFixed(2),Y.on("zoomend",X),Y.on("mousemove",U),Y.on("move",N),l.value=+Y.getZoom().toFixed(2);let ce=Y.getCenter();u.value.latitude=ce.lat,u.value.longitude=ce.lng,ne(),Rl(()=>{q(Y,i.value)})}function O(Y){Y.off("zoomend",X),Y.off("mousemove",U),Y.off("move",N)}function N(){f(Y=>{q(Y,i.value)})}const U=Dy.debounce(function(Y){let ce=[Y.lngLat.lng,Y.lngLat.lat];u.value.latitude=ce[1],u.value.longitude=ce[0],ne()},15);function W(){s.value=!s.value,ne()}function ne(){const Y=x(u.value,s.value);o.value=Y.longitude+", &nbsp;"+Y.latitude}function X(){f(Y=>{l.value=+Y.getZoom().toFixed(2)})}function q(Y,ce){if(t.hideScale)return;const K=100,Se=Y.getContainer().clientHeight/2,Ve=Y.unproject([0,Se]),Ne=Y.unproject([K,Se]),et=Ve.distanceTo(Ne);et>=1e3?G(ce,et/1e3,"km"):G(ce,et,"m")}function G(Y,ce,K){const Se=ue(ce);Y&&(Y.innerHTML=`${Se}&nbsp;${K}`)}function ee(Y){const ce=Math.pow(10,Math.ceil(-Math.log(Y)/Math.LN10));return Math.round(Y*ce)/ce}function ue(Y){const ce=Math.pow(10,`${Math.floor(Y)}`.length-1);let K=Y/ce;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:ee(K),ce*K}return(Y,ce)=>(Ae(),$t(ts,$i(zi(se(b))),{btn:dt(()=>[Le("div",cK,[e.hideZoom?an("",!0):(Ae(),st("div",hK,[Le("div",dK,[Le("span",fK,[He(se(An),{size:16,type:"mdi",path:n.zoom},null,8,["path"])]),Le("div",pK,gn(l.value),1)])])),e.hideCoordinates?an("",!0):(Ae(),st("div",mK,[Le("div",gK,[Le("div",{style:Yr([{"margin-left":"4px"},{"min-width":s.value?"220px":"100px"}]),class:"selectable",innerHTML:o.value},null,12,yK),se(L)?(Ae(),st("i",{key:0,title:s.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:W,class:"icon icon-clickable"},[He(se(An),{size:16,type:"mdi",path:n.change},null,8,["path"])],8,vK)):an("",!0)])])),e.hideCrsSelect?an("",!0):(Ae(),st("div",_K,[Le("div",bK,[kl(Le("select",{"onUpdate:modelValue":ce[0]||(ce[0]=K=>F.value=K),class:"crs-select",style:{width:"70px"}},[(Ae(!0),st(Gn,null,ii(se(M),K=>(Ae(),st("option",{value:K.epsg,key:K.epsg},gn(K.name||K.epsg),9,xK))),128))],512),[[bA,F.value]])])])),e.hideScale?an("",!0):(Ae(),st("div",AK,[Le("div",{ref_key:"scale",ref:i,class:"scale-custom"},null,512)]))])]),_:1},16))}}),CK=Cn(wK,[["__scopeId","data-v-05b9b8c6"]]),IK={class:"setting-container"},MK={class:"setting-field-container"},SK={class:"setting-center-container"},EK={__name:"SettingControl",props:{...Ti},setup(e){const t=e,[n,i]=ld(!1),{callMap:o,mapId:u,moduleContainerProps:l}=Nr(t),{trans:s,setLocaleDefault:f}=Hi(u.value);f({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function y(){i(!n.value),n.value&&o(M=>{b.value.zoom=M.getZoom(),b.value.center=[M.getCenter().lng.toFixed(6),M.getCenter().lat.toFixed(6)],b.value.sprite=M.getStyle().sprite,b.value.glyphs=M.getStyle().glyphs})}const b=Qt({zoom:null,center:null,sprite:null,glyphs:null}),x=()=>{o(M=>{b.value.zoom&&M.setZoom(b.value.zoom),b.value.center&&M.setCenter(b.value.center);const A=M.getStyle();b.value.sprite&&(A.sprite=b.value.sprite),b.value.glyphs&&(A.glyphs=b.value.glyphs),M.setStyle(A)})};return(M,A)=>(Ae(),$t(ts,$i(zi(se(l))),{btn:dt(()=>[He(Br,{onClick:A[0]||(A[0]=Rr(k=>y(),["stop"])),tooltip:se(s)("map.setting-control.title")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(wN)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:dt(k=>[se(n)?(Ae(),$t(se(ch),ar({key:0,height:400,width:400},k,{show:se(n),"onUpdate:show":A[7]||(A[7]=L=>Ii(n)?n.value=L:null),title:se(s)("map.setting-control.title")}),{default:dt(()=>[Le("div",IK,[Le("div",MK,[Le("div",null,[Le("label",null,gn(se(s)("map.setting-control.field.center")),1),Le("div",SK,[He(se(pi),{modelValue:b.value.center[0],"onUpdate:modelValue":A[1]||(A[1]=L=>b.value.center[0]=L),type:"number",step:"0.0000001"},null,8,["modelValue"]),He(se(pi),{modelValue:b.value.center[1],"onUpdate:modelValue":A[2]||(A[2]=L=>b.value.center[1]=L),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),Le("div",null,[He(se(pi),{label:se(s)("map.setting-control.field.zoom"),modelValue:b.value.zoom,"onUpdate:modelValue":A[3]||(A[3]=L=>b.value.zoom=L)},null,8,["label","modelValue"])]),Le("div",null,[He(se(pi),{label:se(s)("map.setting-control.field.sprite"),modelValue:b.value.sprite,"onUpdate:modelValue":A[4]||(A[4]=L=>b.value.sprite=L)},null,8,["label","modelValue"])]),Le("div",null,[He(se(pi),{label:se(s)("map.setting-control.field.glyphs"),modelValue:b.value.glyphs,"onUpdate:modelValue":A[5]||(A[5]=L=>b.value.glyphs=L)},null,8,["label","modelValue"])])]),He(se(il),{class:"btn-container",onClick:A[6]||(A[6]=L=>x())},{default:dt(()=>[Qi(gn(se(s)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):an("",!0)]),default:dt(()=>[In(M.$slots,"default")]),_:3},16))}},TK={__name:"ZoomControl",props:{...Ti,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(e){const t={plus:Yf,minus:HN},n=e,i=Qt("rotate(0deg)"),{callMap:o,mapId:u,moduleContainerProps:l}=Nr(n,b,x),{trans:s,setLocaleDefault:f}=Hi(u.value);f({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let y=null;function b(F){y=L.bind(null,F),F.on("rotate",y)}function x(F){F.off("rotate",y)}function M(F){o(V=>{V.zoomIn({},{originalEvent:F})})}function A(F){o(V=>{V.zoomOut({},{originalEvent:F})})}function k(){o(F=>{F.easeTo({bearing:0,pitch:0})})}function L(F){const V=F.getBearing()*-1;i.value=`rotate(${V}deg)`}return(F,V)=>(Ae(),$t(ts,$i(zi(se(l))),{btn:dt(()=>[He(ky,null,{default:dt(()=>[e.showCompass?(Ae(),$t(Br,{key:0,onClick:k,title:se(s)("map.action.navigation-control-reset-bearing")},{default:dt(()=>[(Ae(),st("svg",{height:"22",style:Yr({transform:i.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},V[0]||(V[0]=[Le("g",{fill:"none","fill-rule":"evenodd"},[Le("path",{d:"M0 0h24v24H0z"}),Le("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),Le("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1)]),4))]),_:1},8,["title"])):an("",!0),e.showZoom?(Ae(),$t(Br,{key:1,onClick:M,title:se(s)("map.action.navigation-control-zoom-in")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:t.plus},null,8,["path"])]),_:1},8,["title"])):an("",!0),e.showZoom?(Ae(),$t(Br,{key:2,onClick:A,title:se(s)("map.action.navigation-control-zoom-out")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:t.minus},null,8,["path"])]),_:1},8,["title"])):an("",!0)]),_:1})]),default:dt(()=>[In(F.$slots,"default")]),_:3},16))}};function Qb(){const e=Math.floor(Math.random()*uP.length);return uP[e]}const uP=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"],G0="base_map_control_";class PK{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(t){if(this._baseMap&&this._baseMap.id===t.id)return;this._baseMap=t;const{sources:n,layers:i}=await kK(t.type)(t);this.layers=i,this.sources=n}addToMap(t,n){for(const i in this.sources)if(Object.hasOwnProperty.call(this.sources,i)){const o=this.sources[i];t.getSource(i)||t.addSource(i,o)}this.layers.forEach(i=>{t.getLayer(i.id)||t.addLayer(i,n)})}removeFromMap(t){this.layers.forEach(n=>{t.getLayer(n.id)&&t.removeLayer(n.id)});for(const n in this.sources)t.getSource(n)&&t.removeSource(n)}}function kK(e){switch(e){case"vector":return DK;case"raster":return RK;case"no-basemap":return LK;default:throw new Error(`Not support ${e}`)}}async function LK(){return{layers:[],sources:{}}}async function DK(e){const t=await fetch(e.links[0]).then(l=>l.json()),n=[],i={};for(const l in t.sources){const s=G0+l;i[s]=t.sources[l]}for(const l of t.layers){const s=G0+l.id,f=G0+l.source;n.push(Object.assign(l,{id:s,source:f,metadata:{...l.metadata,"maplibregl-legend:disable":!0}}))}const o=t.glyphs,u=t.sprite;return{layers:n,sources:i,glyphs:o,sprite:u}}async function RK(e){if(!e)throw new Error("Not found item");const t=`${G0}layer`,n=`${G0}source`,i={};return i[n]={type:"raster",tiles:e.links,scheme:e.scheme||"xyz",maxzoom:e.maxzoom||22,minzoom:e.minzoom||0,tileSize:e.tileSize||256},{layers:[{id:t,type:"raster",source:n,metadata:{"maplibregl-legend:disable":!0}}],sources:i}}class OK{getCurrent(){return this.current}async setCurrent(t,n){this.current=n,await this.onApplyBaseMap(t,n)}getIndexDefault(t,n){return t.find(i=>i.default||i.title===n)??t[0]}}class zK extends OK{async onApplyBaseMap(t,n){if(!n)return;let i=this.layer;i&&Ja(t,o=>{i&&i.removeFromMap(o)}),i||(i=new PK),Ja(t,o=>{i.removeFromMap(o)}),await i.setBaseMap(n),Ja(t,o=>{i.addToMap(o,FK(o))}),this.layer=i}}function FK(e){const t=e.getStyle().layers;return t.length>0?t[0].id:void 0}const cy=al.createLogger().setNamespace("map:basemap",2),BK="basemap",NK=e=>zl(["map:core",e,BK],()=>({baseMaps:[],defaultBaseMap:"",current:void 0,loading:!1,adapter:new zK}))(),Ug={set:"map:base-map:set",setCurrent:"map:base-map:set-current"};function QL(e){const t=NK(e),n=ud(e);function i(M){Kn(cy,e,"hook","useBaseMap").debug("setBaseMaps",M),t.baseMaps=M,n.emit(Ug.set,M)}function o(M){Kn(cy,e,"hook","useBaseMap").debug("setDefaultBaseMap",M),t.defaultBaseMap=M||"";const A=t.adapter.getIndexDefault(t.baseMaps,t.defaultBaseMap);!t.current&&A&&u(A)}async function u(M){Kn(cy,e,"hook","useBaseMap").debug("setCurrent",M),!t.loading&&(t.current=M,n.emit(Ug.setCurrent,t.current),t.loading=!0,await t.adapter.setCurrent(e,M),t.loading=!1)}const l=Qt(t.baseMaps),s=Qt(t.current),f=M=>{l.value=M,o(t.defaultBaseMap)},y=M=>{s.value=M};return n.on(Ug.set,f),n.on(Ug.setCurrent,y),{setBaseMaps:i,baseMaps:l,setDefaultBaseMap:o,setCurrent:u,currentBaseMap:s,remove:()=>{n.off(Ug.set,f),n.off(Ug.setCurrent,y)},init:(M,A)=>{Kn(cy,e,"hook","useBaseMap").debug("init",M,A),o(A),i(M)}}}const VK={class:"base-map-card"},jK={class:"base-map-card__image"},UK={class:"base-map-card__content"},$K={class:"base-map-card__title"},HK=Dn({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(e){const t=e,{mapId:n}=Nr(t),{trans:i}=Hi(n.value),{baseMaps:o,setCurrent:u,currentBaseMap:l,remove:s}=QL(n.value),f=y=>{Kn(cy,n.value,"control","BaseMapCard").debug("onClick",y),u(y)};return uh(()=>{s()}),(y,b)=>(Ae(),st("div",VK,[Le("div",jK,[se(l)?(Ae(),$t(se(uI),{key:0,src:se(l).thumbnail},null,8,["src"])):an("",!0)]),Le("div",UK,[Le("div",$K,gn(e.title||se(i)("map.basemap.title")),1),Le("div",null,[He(se($f),{modelValue:se(l),items:se(o),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":f},null,8,["modelValue","items"])])])]))}}),GK=Cn(HK,[["__scopeId","data-v-2cffe2fb"]]),ZK=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],WK={class:"base-map-button__content"},qK={class:"base-map-button__title"},KK={class:""},YK={key:1},XK={class:"base-map-control-setting"},QK=["title","onClick"],JK=Dn({__name:"BaseMapControl",props:{...Ti,baseMaps:{type:Array,default:()=>ZK},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Nr(t),{trans:o,setLocaleDefault:u}=Hi(n.value),{setBaseMaps:l,baseMaps:s,setDefaultBaseMap:f,setCurrent:y,currentBaseMap:b,remove:x,init:M}=QL(n.value);hs(()=>t.baseMaps,O=>{l(O)}),hs(()=>t.defaultBaseMap,O=>{f(O)}),u({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const A=dn(()=>70),k={layer:FN},L=Qt(!1);function F(O){Kn(cy,n.value,"control","BaseMapControl").debug("onClick",O),y(O)}function V(){L.value=!L.value}return ti(()=>{M(t.baseMaps,t.defaultBaseMap)}),uh(()=>{x()}),(O,N)=>(Ae(),$t(se(ts),ar(se(i),{btnWidth:70}),{btn:dt(()=>[se(b)?(Ae(),$t(se(Br),{key:0,tooltip:e.title},{content:dt(()=>[He(se(s9),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:V},{default:dt(()=>[Le("div",WK,[He(se(uI),{src:se(b).thumbnail},{default:dt(()=>[Le("div",qK,[e.controlIcon?(Ae(),$t(se(DM),{key:0,dark:"",small:""},{default:dt(()=>[Qi(gn(e.controlIcon),1)]),_:1})):(Ae(),$t(se(An),{key:1,type:"mdi",path:k.layer},null,8,["path"])),Le("div",KK,gn(e.title||se(o)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(Ae(),st("div",YK))]),draggable:dt(U=>[L.value?(Ae(),$t(se(ch),ar({key:0},U,{height:A.value*(Math.floor(se(s).length/3)+1)+48+10,show:L.value,"onUpdate:show":N[0]||(N[0]=W=>L.value=W),"is-resizable":!1,title:se(o)("map.basemap.setting"),width:A.value*3+24}),{default:dt(()=>[Le("div",XK,[(Ae(!0),st(Gn,null,ii(se(s),W=>(Ae(),st("div",{key:W.id,class:"clickable base-map-control-setting-item",style:Yr({width:A.value+"px"}),title:W.title,onClick:ne=>F(W)},[Le("div",{style:Yr({width:A.value-34+"px",height:A.value-34+"px"})},[He(se(uI),{src:W.thumbnail},null,8,["src"])],4),Le("div",{class:ei(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":se(b)&&W.id==se(b).id}]),style:{"font-size":"14px"}},gn(W.title),3)],12,QK))),128))])]),_:2},1040,["height","show","title","width"])):an("",!0)]),default:dt(()=>[In(O.$slots,"default",{},void 0,!0)]),_:3},16))}}),eY=Cn(JK,[["__scopeId","data-v-de6cd0f0"]]);class tY{get id(){return this._id}constructor(){this._id=`${hc()}`}}function nY(){const e=hc();return{get id(){return e}}}function Fl(e,t){try{let n;if(typeof e=="string")n=new Function(`return function ${e}() {}`)();else if(typeof e=="function")n=e;else throw new Error("Invalid prototype source");const i=Object.create(n.prototype);return Object.assign(i,t)}catch{return{...t}}}function rY(e,t){let n;return{...nY(),type:"base",getName(){return e},setName(o){e=o},getData(){return t},setData(o){t=o},setParent(o){n=o},getParent(){return n},isComposite(){return!1},accept(o){return o.visitLeaf(this)}}}function zm(e,t){return{...rY(e,t),type:"leaf"}}function iY(e,t={}){const n=zm(e,t);return Fl("DataManagementComponent",{...n,get type(){return"dataManagement"},get fields(){return t.fields},showDetail(i,o){throw new Error("Method showDetail not implemented.")},getList(i){throw new Error("Method getList not implemented.")}})}const rd=al.createLogger().setNamespace("map:dataset",2);class Z_{visitChildren(t){t.getChildren&&t.getChildren().forEach(n=>n.accept(this))}}class JL extends Z_{constructor(){super(...arguments),this.rootDataset=null}visitLeaf(t){return this.findRoot(t)}visitComposite(t){return this.findRoot(t)}visitRoot(t){return this.rootDataset=t,this.rootDataset}findRoot(t){let n=t;for(;n;){const i=n.getParent();if(!i){this.rootDataset=n;break}n=i}return this.rootDataset}getRootDataset(){return this.rootDataset}reset(){this.rootDataset=null}}class sY extends Z_{constructor(t,n){super(),this.sourceLeaf=null,this.foundLeaf=null,this.sourceLeaf=t,this.typePredicate=n}visitLeaf(t){return this.sourceLeaf&&t===this.sourceLeaf?this.foundLeaf:(this.typePredicate(t)&&!this.foundLeaf&&(this.foundLeaf=t),this.foundLeaf)}visitComposite(t){return this.foundLeaf||this.visitChildren(t),this.foundLeaf}visitRoot(t){return this.visitComposite(t)}getFoundLeaf(){return this.foundLeaf}reset(t,n){this.foundLeaf=null,t&&(this.sourceLeaf=t),n&&(this.typePredicate=n)}}function Jb(e,t){const n=new JL;e.accept(n);const i=n.getRootDataset();if(!i)throw new Error("Could not find root dataset");const o=new sY(e,u=>u.type===t);return i.accept(o),o.getFoundLeaf()}function bu(e,t){const n=e.getParent();if(n&&n.isComposite()&&n.getChildren){const u=n.getChildren();if(u){for(const l of u)if(l!==e&&!l.isComposite()&&t(l))return l}}const i=new JL;e.accept(i);const o=i.getRootDataset();return o?lY(o,t):null}class e4 extends Z_{constructor(t,n=[]){super(),this.functions=[],this.foundComponents=[],this.results=new Map,this.typeCheckFunction=t,this.functions=n}addFunction(t){this.functions.push(t)}visitLeaf(t){if(this.typeCheckFunction(t)&&(this.foundComponents.push(t),this.functions.length>0)){const n=this.functions.map(i=>i(t));this.results.set(t.getName(),n)}return this.foundComponents}visitComposite(t){if(this.typeCheckFunction(t)&&(this.foundComponents.push(t),this.functions.length>0)){const n=this.functions.map(i=>i(t));this.results.set(t.getName(),n)}return this.visitChildren(t),this.foundComponents}visitRoot(t){return this.visitComposite(t)}getFoundComponents(){return this.foundComponents}getResults(){return this.results}reset(t,n){this.foundComponents=[],this.results=new Map,t&&(this.typeCheckFunction=t),n&&(this.functions=n)}}function cd(e,t,n=[]){const i=new e4(t,n);return e.accept(i),i.getResults()}function ex(e,t=[]){const n=new e4(i=>!i.isComposite(),t);return e.accept(n),n.getResults()}class aY extends Z_{constructor(t){super(),this.foundComponents=[],this.typeCheckFunction=t}visitLeaf(t){return this.typeCheckFunction(t)&&this.foundComponents.push(t),this.foundComponents}visitComposite(t){return this.typeCheckFunction(t)&&this.foundComponents.push(t),this.visitChildren(t),this.foundComponents}visitRoot(t){return this.visitComposite(t)}getFoundComponents(){return this.foundComponents}reset(t){this.foundComponents=[],t&&(this.typeCheckFunction=t)}}function cP(e,t){const n=new aY(i=>i.type===t);return e.accept(n),n.getFoundComponents()}class oY extends Z_{constructor(t){super(),this.queue=[],this.result=null,this.checkFunction=t}visitLeaf(t){return this.checkFunction(t)?(this.result=t,this.result):null}visitComposite(t){return this.checkFunction(t)?(this.result=t,this.result):(t.getChildren&&this.queue.push(...t.getChildren()),null)}visitRoot(t){for(this.queue=[t],this.result=null;this.queue.length>0&&!this.result;){const n=this.queue.shift();n.isComposite()?this.visitComposite(n):this.visitLeaf(n)}return this.result}getResult(){return this.result}}function lY(e,t){const n=new oY(t);return e.accept(n),n.getResult()}function M0(e){return"removeFromMap"in e&&"addToMap"in e}function uY(e){return"removeFromMap"in e&&"addToMap"in e}function xu(e){return"toggleShow"in e&&"setOpacity"in e&&"moveLayer"in e&&"getBeforeId"in e}function cY(e){return e.isComposite()}function hY(e){return"identifyGroupId"in e}function xI(e){return(e==null?void 0:e.type)==="dataManagement"&&typeof e.showDetail=="function"&&typeof e.getList=="function"}const dY="dataset-component";function fY(e="component"){return`${e}-${Date.now()}-${Math.random().toString(36).substring(2,11)}`}const pY=e=>zl(["map:core",e,dY],()=>{Kn(rd,e,"store").debug("init");const t=[],n=Qt([]);return{components:t,componentIds:n}})(),t4=e=>{const t=pY(e);function n(){return t}function i(){return t.componentIds}function o(l){if(!t)return;if(Kn(rd,e,"store-component").debug("addComponent",{component:l,store:t}),l.check){const f=t.components.findIndex(y=>y.check==l.check);if(f>=0){const y=t.components[f].id;return Object.assign(t.components[f],l),t.componentIds.value.splice(f,1),t.componentIds.value.push(y),y}}const s=fY();return t.components.push({...l,id:s}),t.componentIds.value.push(s),s}function u(l){t&&(Kn(rd,e,"store-component").debug("removeComponent",{id:l,store:t}),t.components=t.components.filter(s=>s.id!==l),t.componentIds.value=t.componentIds.value.filter(s=>s!==l))}return{getStore:n,getAllComponentIds:i,addComponent:o,removeComponent:u}},mY=e=>zl(["map:core",e,"store-highlight"],()=>(Kn(rd,e,"store").debug("init"),{feature:Qt(void 0),source:Qt(void 0),dataset:void 0}))(),WA=e=>{const t=mY(e);function n(){return t}function i(s,f,y){if(t){if(Kn(rd,e,"store-highlight").debug("setFeatureHighlight",{store:t,feature:s,source:f,dataset:y}),!s&&t.source.value===f&&t.feature.value){t.feature.value=void 0,t.source.value=void 0,t.dataset=void 0;return}t.dataset=y,t.feature.value=s,t.source.value=f}}function o(){if(t)return t.feature}function u(){if(t)return t.source}function l(){if(t)return t.dataset}return{getStore:n,setFeatureHighlight:i,getHighlightSource:u,getDatesetHighlight:l,getFeatureHighlight:o}},gY="dataset",yY=e=>zl(["map:core",e,gY],()=>(Kn(rd,e,"store").debug("init"),{datasets:{},datasetIds:Qt([])}))(),Qy=e=>{const t=yY(e),{getMap:n}=vL(e);async function i(y){if(!t)return;const b=s("list"),x=cP(y,"list");t.datasets[y.id]=y,x.forEach((M,A)=>{M.index=A+1+b.length}),t.datasetIds.value.push(y.id),n(async M=>{ex(y,[A=>{M0(A)&&A.addToMap(M)}])}),Kn(rd,e,"store").debug("addDataset",{store:t,dataset:y})}function o(y,b){t&&(delete t.datasets[b.id],n(async x=>{ex(b,[M=>{M0(M)&&M.removeFromMap(x)}])}),Kn(rd,y,"store").debug("removeDataset",{store:t,dataset:b}))}function u(y){Kn(rd,e,"store").debug("removeComponent",y);const b=y.getParent()||y;n(async x=>{M0(y)&&y.removeFromMap(x),ex(b,[M=>{M0(M)&&M.removeFromMap(x)}])}),b&&cY(b)&&b.remove(y)}function l(){return t}function s(y){if(!t)return[];const b=[];return(Object.values(t.datasets||{})||[]).forEach(x=>{const M=cP(x,y);b.push(...M)}),b}function f(){return t.datasetIds}return{addDataset:i,getDatasetIds:f,removeComponent:u,removeDataset:o,getStoreDataset:l,getAllComponentsByType:s}},vY={class:"row-container"},_Y={class:"btn-copy"},bY={__name:"table-td-copy",props:{value:{}},setup(e){const{copy:t}=oB({}),n={copy:CN};return(i,o)=>(Ae(),st("div",vY,[Le("div",_Y,[He(se(il),{onClick:o[0]||(o[0]=u=>se(t)(e.value))},{default:dt(()=>[He(se(An),{path:n.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})]),In(i.$slots,"default",{},void 0,!0)]))}},xY=Cn(bY,[["__scopeId","data-v-94841ed8"]]),AY={key:0,class:"grid-row"},wY=["title"],CY={class:"value-cell"},IY={key:1,class:"grid-row grid-row-full"},MY={__name:"table-td-layer",props:{item:{},view:{},field:{},label:{}},setup(e){const t=e,n=dn(()=>t.item?t.item[t.field.value]:"");return(i,o)=>(Ae(),$t(xY,{value:n.value},{default:dt(()=>[e.field.inline?(Ae(),st("div",IY,[He(se(Qk),{readonly:"",rows:"10",modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=u=>n.value=u),label:e.label},null,8,["modelValue","label"])])):(Ae(),st("div",AY,[Le("div",{class:"label-cell",title:e.label},gn(e.label),9,wY),Le("div",CY,gn(n.value),1)]))]),_:1},8,["value"]))}},SY=Cn(MY,[["__scopeId","data-v-b9f907c8"]]),EY={class:"table-show-info"},TY={class:"table-content"},PY={name:"detail-layer-info"},kY=Object.assign(PY,{props:{item:{},view:{},fields:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const{mapId:n}=Nr(),{setFeatureHighlight:i}=WA(n.value),{trans:o}=Hi(n.value),u=t;function l(f){f||u("close")}function s(){i(void 0,"detail")}return(f,y)=>(Ae(),$t(se(ts),$i(zi(f.$attrs)),{draggable:dt(b=>[He(se(ch),ar(b,{show:"",onClose:s,"onUpdate:show":l,width:400}),{title:dt(()=>[Qi(gn(se(o)("map.layer-control.info.title")),1)]),default:dt(()=>[Le("div",EY,[Le("div",TY,[(Ae(!0),st(Gn,null,ii(e.fields,(x,M)=>(Ae(),$t(SY,{field:x,label:x.trans?se(o)(x.trans):x.text,item:e.item,view:e.view,key:M},null,8,["field","label","item","view"]))),128))])])]),_:2},1040)]),_:1},16))}}),n4=Cn(kY,[["__scopeId","data-v-7345c8a0"]]);function AI(e){return{id:e.id,...e.properties,geometry:e.geometry}}function sC(e){const{geometry:t,...n}=e;return{id:e.id,type:"Feature",geometry:t,properties:n}}const r4=Pf.getInstance(),i4="dataset-action";function aC(e,t){r4.set([i4,e],t)}function oC(e){return r4.get([i4,e])}function qA(e,t,n,i){if(e.type!=="item")return;const o=e.click;s4(o,t,n,i)}function s4(e,t,n,i){if(typeof e=="function")e(t,n,i);else if(typeof e=="string"){const o=oC(e);o==null||o(t,n,i)}else if(Array.isArray(e))for(const o of e)if(typeof o=="string"){const u=oC(o);u==null||u(t,n,i)}else if(Array.isArray(o)&&typeof o[0]=="string"){const[u,l]=o;let s;if(Array.isArray(l)?s=l:typeof l=="function"&&(s=l(t,n,i)),!s)console.warn(`[handleMenuAction] result for key: ${u}`,t,n,i);else{const[f,y,b]=s,x=oC(u);x?x(f,y,b):console.warn(`[handleMenuAction] No handler found for key: ${u}`)}}else console.warn("[handleMenuAction] Invalid entry in click array:",o);else console.warn("[onMenuAction] Invalid menu click handler:",e)}function tx(e,t={}){const n=iY(e,t);let i=[];const o=f=>f?Promise.resolve(i.filter(y=>f.includes(y.id))):Promise.resolve(i),s=Fl("DataManagementMapboxComponent",{...n,addToMap:f=>{o().then(y=>{var x;const b=bu(n,M=>M.type==="source");b&&uY(b)&&((x=b.updateData)==null||x.call(b,f,{type:"FeatureCollection",features:y.map(M=>sC(M))}))})},removeFromMap:f=>{console.warn("removeFromMap not supported")},getList:o,setItems(f){i=f},showDetail:(f,y)=>{s4([["addComponent",[s,f,{component:()=>n4,attr:{item:y,fields:t.fields,view:s},check:"detail"}]],["highlight",[s,f,{detail:sC(y),key:"detail"}]]],s,f,y)},async addFeatures(f=[]){i.push(...f.map(AI)),i=c_(i)},async updateFeatures(f=[]){const y=f.reduce((b,x)=>(b[x.properties.id]=x,b),{});i=i.map(b=>y[b.id]?AI(y[b.id]):b)},async deleteFeatures(f=[]){const y=f.map(b=>b.properties.id);i=i.filter(b=>!y.includes(b.id))},async getFeatures(f){return i.filter(y=>uj(y.geometry,ga(f))).map(sC)}});return s}class a4 extends tY{constructor(t,n){super(),this.name=t,this.data=n}setParent(t){this.parent=t}getParent(){return this.parent}accept(t){return t.visitLeaf(this)}isComposite(){return!1}getName(){return this.name}setName(t){this.name=t}getData(){return this.data}setData(t){this.data=t}}class LY extends a4{get type(){return"leaf"}constructor(t,n){super(t,n)}accept(t){return t.visitLeaf(this)}}class DY extends a4{constructor(t){super(t),this.children=[]}get type(){return"composite"}isComposite(){return!0}getData(){return this.children.map(t=>t.getData())}add(t){this.children.push(t),typeof(t==null?void 0:t.setParent)=="function"&&t.setParent(this)}remove(t){const n=this.children.findIndex(i=>i===t||i.id===t.id);n!==-1&&(this.children.splice(n,1),typeof(t==null?void 0:t.setParent)=="function"&&t.setParent(void 0))}getChildren(){return[...this.children]}accept(t){return this.parent?t.visitComposite(this):t.visitRoot(this)}}function El(e,t,n=!1){return n?new DY(e):new LY(e,t)}function RY(e){const t=zm("",e);return Fl("HighlightComponent",{...t,get type(){return"highlight"},highlight:n=>{const i=Jb(t,"source");return{source:i==null?void 0:i.getSourceId(),filter:n?["==","id",n==null?void 0:n.id]:void 0,...t.getData()}}})}const OY="Style Control",zY={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},FY={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},BY={title:"Style"},NY={title:OY,add:zY,"back-to-default":"Back to default value",layer:FY,style:BY},VY={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity",translate:"Translate"},jY={setting:VY},UY={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},$Y={setting:UY},HY={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},GY={setting:HY},ZY={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},WY={setting:ZY},qY={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},KY={"text-font":"Font","text-color":"Color","text-field":"Content",image:"Image",color:"Color",opacity:"Opacity",font:"Font","letter-spacing":"Letter spacing","line-height":"Line height","max-width":"Max width",transform:"Transform","halo-color":"Halo color","halo-width":"Halo width","halo-blur":"Halo blur","fit-icon":"Fit icon to text",size:"Size","icon-opacity":"Icon opacity","icon-size":"Icon size","icon-text-fit":"Fit icon to text","icon-text-fit-padding":"Icon-text padding","icon-image":"Icon image","text-justify":"Text justification","text-anchor":"Text anchor","text-offset":"Text offset","text-radial-offset":"Text radial offset","text-translate":"Text translation","text-rotate":"Text rotation","text-pitch-alignment":"Text pitch alignment","icon-offset":"Icon offset","icon-translate":"Icon translation","icon-rotate":"Icon rotation","symbol-placement":"Symbol placement","symbol-spacing":"Symbol spacing","text-max-angle":"Max text angle","avoid-edges":"Avoid edges","sort-key":"Sort key","text-orientation":"Text orientation","text-padding":"Text padding","allow-text-overlap":"Allow text overlap","text-ignore-placement":"Text ignore placement","text-optional":"Text optional","icon-padding":"Icon padding","allow-icon-overlap":"Allow icon overlap","icon-ignore-placement":"Icon ignore placement","icon-optional":"Icon optional"},YY={tab:qY,setting:KY},XY={class:"layer-control__title"},QY={class:"style-control"},JY=Dn({__name:"style-control",props:{item:{}},emits:["close"],setup(e,{emit:t}){const n=t,i=e,{mapId:o,callMap:u}=Nr(),{trans:l,setLocaleDefault:s}=Hi(o.value);s({map:{"style-control":NY},"circle-style":jY,"line-style":GY,"fill-style":$Y,"symbol-style":YY,"raster-style":WY});const[f,y]=ld(!1),b=Qt(),x=Qt(void 0);let M=Dl("");ti(()=>{y(!0),x.value=void 0,L()});const A=()=>{x.value=void 0,b.value=void 0,n("close")},k=F=>{u(V=>{x.value&&x.value.updateValue(V,F)}),L()},L=()=>{const F=bu(i.item,V=>xu(V));F&&xu(F)&&(x.value=F||void 0,M.value=F.getComponentUpdate(),b.value=c_(F.getData()))};return(F,V)=>(Ae(),$t(se(ts),$i(zi(F.$attrs)),{draggable:dt(O=>[se(M)?(Ae(),$t(se(CL),ar({key:0},O,{right:"",show:se(f),"onUpdate:show":V[1]||(V[1]=N=>Ii(f)?f.value=N:null),onClose:A}),{title:dt(()=>[Le("span",XY,gn(se(l)("map.style-control.title")),1)]),default:dt(()=>[Le("div",QY,[(Ae(),$t(Ls(se(M)()),{modelValue:b.value,"onUpdate:modelValue":V[0]||(V[0]=N=>b.value=N),onUpdateStyle:k,trans:se(l),mapId:se(o)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show"])):an("",!0)]),_:1},16))}}),eX={key:0,class:"toggle-buttons-container"},tX=Dn({__name:"toggle-show",props:{item:{},data:{},mapId:{}},setup(e){const t={show:EM,hide:TM},n=e,{callMap:i,mapId:o}=Nr(n),u=()=>{const y=!n.data.show;let b=n.data;b.show=!b.show,i(x=>{cd(n.data.getParent(),M=>xu(M),[M=>{M.toggleShow(x,y)}])})};function l(y){const x=gL(o.value)[y],M=f(y);let A=n.data;A.shows[y]=!M,cd(n.data.getParent(),k=>xu(k),[k=>{k.toggleShow(x,A.shows[y])}])}const s=Qt(!1);ti(()=>{s.value=mL(o.value)});function f(y){let b=n.data;if(n.data.shows==null||n.data.shows.length<1){const x=n.data.show==null?!0:n.data.show;b.shows=[x,x]}return n.data.shows[y]}return(y,b)=>s.value?(Ae(),st("div",eX,[Le("button",{class:ei(["layer-item__button",{_active:f(0)}]),onClick:b[0]||(b[0]=Rr(x=>l(0),["stop"]))},b[2]||(b[2]=[Le("span",null,"#1",-1)]),2),Le("button",{class:ei(["layer-item__button",{_active:f(1)}]),onClick:b[1]||(b[1]=Rr(x=>l(1),["stop"]))},b[3]||(b[3]=[Le("span",null,"#2",-1)]),2)])):(Ae(),st("button",{key:1,class:"layer-item__button",onClick:Rr(u,["stop"])},[y.data.show?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:t.show},null,8,["path"])):(Ae(),$t(se(An),{key:1,size:"14",type:"mdi",path:t.hide},null,8,["path"]))]))}});function sS(){const e=[];return{getMenus(){return e},addMenu(t){t.id&&e.some(n=>n.id===t.id)||e.push(t)},addMenus(t){for(const n of t)n.id&&e.some(i=>i.id===n.id)||e.push(n)},removeMenu(t){const n=e.findIndex(i=>i.id===t);n!==-1&&e.splice(n,1)},getMenu(t){return e.find(n=>n.id===t)},hasMenu(t){return e.some(n=>n.id===t)},updateMenu(t,n){const i=e.findIndex(o=>o.id===t);i!==-1&&(e[i]=n(e[i]))}}}function Eb(){return{location:"extra",type:"item",name:"Fly to",icon:F_,click:(e,t)=>{const n=bu(e,i=>i.type=="metadata");Ja(t,i=>{var o;RA(i,(o=n==null?void 0:n.metadata)==null?void 0:o.bbox)})}}}function Xg(){return{type:"item",name:"Fly to",icon:F_,click:[["fitBounds",(e,t,n)=>[e,t,n.geometry]],["highlight",(e,t,n)=>{const{geometry:i,...o}=n;return[e,t,{detail:{type:"Feature",geometry:i,properties:o},key:"identify"}]}]]}}function Qg(){return{type:"item",name:"Detail",id:"show-detail",icon:Wk,click:(e,t,n)=>{const i=bu(e,o=>o.type=="dataManagement");i==null||i.showDetail(t,n)}}}function Tb(){return{type:"item",name:"Info",icon:Wk,click:[["addComponent",(e,t)=>{const n=bu(e,i=>i.type=="source");if(n)return[e,t,{component:()=>n4,attr:{item:n.getDataInfo(),fields:n.getFieldsInfo(),view:e},check:"detail"}]}]]}}function lC(){return{type:"item",name:"Edit style",icon:kN,click:[["addComponent",(e,t)=>[e,t,{component:()=>JY,attr:{item:e}}]]]}}function Pb(e={}){return{type:"item",location:"bottom",name:"ToggleShow",component:()=>tX,...e}}function nX(e){const t=new Set;return e.filter(({identifyId:n,rawId:i})=>{const o=`${n}_${i}`;return t.has(o)?!1:(t.add(o),!0)})}function hP(e,t){return e.map(({identify:n,identifyId:i,feature:o,rawId:u})=>{var l;return{identify:n,identifyId:i,feature:{id:u,name:((l=o.properties)==null?void 0:l[n.config.field_name||"name"])??"",data:t.get(u)||{...o.properties,geometry:o.geometry}}}})}function rX(e){return new Map(e.map(t=>[String(t.id),t]))}async function iX(e,t){return new Promise(n=>{const i=t.layerIdMap;Ja(t.mapId,o=>{const u=Object.keys(i),l=o.queryRenderedFeatures(t.pointOrBox,{layers:u}),s=[],f=new Set;l.forEach(A=>{var O;const k=A.layer.id,L=i[k],F=((O=A.properties)==null?void 0:O[L.config.field_id||"id"])??A.id;if(!F)return;const V=String(F);f.add(V),s.push({identify:L,identifyId:L.id,feature:A,rawId:V})});const y=nX(s),b=e[0],x=bu(b,A=>A.type==="dataManagement");if(!xI(x)){const A=hP(y,new Map);n(A);return}x.getList([...f]).then(A=>{const k=rX(A),L=hP(y,k);n(L)})})})}const sX=(e,t,n)=>{const i=new Map;return n.forEach(({identifyId:o,identify:u,feature:l})=>{i.has(o)||i.set(o,{identify:u,features:[]});const s=i.get(o);s&&"features"in s&&s.features.push(l)}),Array.from(i.values())},aX=(e,t,n)=>{const i={};return e.forEach(o=>{const u=cd(o.getParent()||o,s=>xu(s),[s=>s.getAllLayerIds()]);Array.from(u.values()).flat(2).forEach(s=>{i[s]=o})}),{identifies:e,mapId:t,pointOrBox:n,layerIdMap:i}};function o4(e,t){const n=zm(e,t),i=sS();return Fl("IdentifyComponent",{get config(){return{}},...n,...i,get type(){return"identify"},getFeatures(o,u){throw new Error("Method not implemented.")}})}function nx(e,t){const n=o4(e,t);return Fl("IdentifyMapboxComponent",{...n,getFeatures:async(o,u)=>new Promise(l=>{const s=cd(n.getParent()||n,y=>xu(y),[y=>y.getAllLayerIds()]),f=Array.from(s.values()).flat(2);Ja(o,y=>{const b=y.queryRenderedFeatures(u,{layers:f.filter(k=>y.getLayer(k))}),x=new Set,M=bu(n,k=>k.type=="dataManagement");b.forEach(k=>{var F;const L=((F=k.properties)==null?void 0:F[n.config.field_id||"id"])??k.id;x.has(L)||x.add(L)});const A=[...x];if(!A||A.length<1){l([]);return}M.getList([...A]).then(k=>{l(k.map((L,F)=>({id:L.id??F,name:L[n.config.field_name||"name"]??"",data:L})))})})})})}function dP(e,t){const n=o4(e,t);return Fl("IdentifyMapboxMergedComponent",{...n,identifyGroupId:"mapbox-group",mergePayload:aX,getMergedFeatures:iX,splitResponse:sX})}function l4(e,t,n){return e.getFeatures(t,n).then(i=>({identify:e,features:i}))}function oX(e,t,n){const i=e[0];if(e.length===1)return l4(i,t,n).then(u=>[u]);const o=i.mergePayload(e,t,n);return i.getMergedFeatures(e,o).then(u=>i.splitResponse(e,o,u))}async function lX(e,t,n,i={selectThreshold:5}){const o=[],u={};if(n&&u4(n)){const l=c4(n);n=[[l.x-i.selectThreshold,l.y+i.selectThreshold],[l.x+i.selectThreshold,l.y-i.selectThreshold]]}e.forEach(l=>{if(!hY(l)){o.push(l4(l,t,n));return}const s=l.identifyGroupId;u[s]||(u[s]=[]),u[s].push(l)});for(const l in u){const s=u[l];o.push(oX(s,t,n))}return Promise.all(o).then(l=>l.flat())}async function uX(e,t,n,i={selectThreshold:5}){const o=[],u={};return e.forEach(l=>{const s=cd(l.getParent()||l,y=>xu(y),[y=>y.getAllLayerIds()]),f=Array.from(s.values()).flat(2);f.forEach(y=>{u[y]=l}),o.push(...f)}),new Promise(l=>{Ja(t,s=>{var y,b,x,M;if(n&&u4(n)){const A=c4(n);n=[[A.x-i.selectThreshold,A.y+i.selectThreshold],[A.x+i.selectThreshold,A.y-i.selectThreshold]]}const f=s.queryRenderedFeatures(n,{layers:o.filter(A=>s.getLayer(A))});if(f.length>0){const A=f[0],k=u[A.layer.id],L=((b=A.properties)==null?void 0:b[((y=k==null?void 0:k.config)==null?void 0:y.field_id)||"id"])??A.id,F=((M=A.properties)==null?void 0:M[((x=k==null?void 0:k.config)==null?void 0:x.field_name)||"id"])??A.id;l({identify:k,layer:A.layer,feature:{id:L,name:F,data:AI(A)}})}})})}function u4(e){return!Array.isArray(e)||!Array.isArray(e[0])}function c4(e){return e instanceof Pm.Point?{x:e.x,y:e.y}:{x:e[0],y:e[1]}}function cX(e,t){const n=zm(e,t),i=sS();return Fl("DatasetPartMapboxLayerComponent",{...n,...i,get type(){return"layer"},getBeforeId(){throw new Error("Method not implemented.")},getAllLayerIds(){throw new Error("Method not implemented.")},addToMap(o,u){throw new Error("Method not implemented.")},removeFromMap(o){throw new Error("Method not implemented.")},moveLayer(o,u){throw new Error("Method not implemented.")},toggleShow(o,u){throw new Error("Method not implemented.")},setOpacity(o,u){throw new Error("Method not implemented.")},updateValue(o,u){throw new Error("Method not implemented.")},getComponentUpdate(){throw new Error("Method not implemented.")}})}class hm{constructor(){this.type="point"}setColor(t){return this.color=t,this}setStyleType(t){return this.type=t,this}setOpacity(t){return this.opacity=t,this}build(){return hX(this.type,this.color,this.opacity)}}const hX=(e,t,n)=>{switch(e){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":t||Qb(),"circle-radius":6,"circle-opacity":n||1}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":t||Qb(),"line-width":4,"line-opacity":n||1}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":t||Qb(),"fill-opacity":n||1}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+e)}},dX={class:"tab-item"},fX={key:0,class:"tab-item-content"},pX={key:2,class:"full-width"},mX=["disabled"],gX=Dn({__name:"tab-content",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,trans:{required:!0},mapId:{required:!0}},emits:["input"],setup(e,{emit:t}){const n=e,i=t,o=dn({get(){return n.value!=null?n.value:n.default_value!=null?c_(n.default_value):void 0},set(s){i("input",s)}}),u=dn(()=>!n.item||!n.item.props||!n.item.props.content?{}:typeof n.item.props.content=="function"?n.item.props.content(n.item):n.item.props.content),l=()=>{o.value=n.default_value!=null?c_(n.default_value):void 0};return(s,f)=>(Ae(),st("div",dX,[!e.item.component||!e.item.component.content?(Ae(),st("div",fX,[Le("p",null,gn(e.value||e.default_value),1)])):(Ae(),$t(Ls(e.item.component.content()),ar({key:1},u.value,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=y=>o.value=y),mapId:e.mapId,class:"tab-item-content"}),null,16,["modelValue","mapId"])),e.default_value!=null?(Ae(),st("div",pX,[f[2]||(f[2]=Le("hr",{class:"map-divider"},null,-1)),Le("button",{onClick:f[1]||(f[1]=y=>l()),disabled:o.value==null||o.value==e.default_value,class:"map-button text-center full-width"},gn(e.trans("map.style-control.back-to-default")),9,mX)])):an("",!0)]))}}),yX=Cn(gX,[["__scopeId","data-v-f5065123"]]),vX=["disabled"],_X=["title"],bX=["title"],xX={key:0},AX=Dn({__name:"tab-item",props:{value:{},text:{},item:{type:Object,default:()=>({key:"",type:"unit",unit:"px"})},default_value:{},disabled:Boolean,active:Boolean},setup(e){const t=e,n=dn(()=>!t.item||!t.item.props||!t.item.props.label?{}:typeof t.item.props.label=="function"?t.item.props.label(t.item):t.item.props.label),i=dn(()=>t.value!=null&&t.value!=""?t.value:t.default_value!=null&&t.default_value!=""?t.default_value:"None");return(o,u)=>(Ae(),st("button",ar({class:["tab-item",{"tab-item-active":e.active,"tab-item-disabled":e.disabled}],disabled:e.disabled},o.$attrs),[Le("div",{class:"tab-item-title",title:e.text},gn(e.text),9,_X),Le("div",{class:"tab-item-sub-title",title:i.value},[!e.item.component||!e.item.component.label?(Ae(),st("p",xX,gn(i.value),1)):(Ae(),$t(Ls(e.item.component.label()),ar({key:1},n.value,{tab:e.item,value:e.value,default_value:e.default_value}),null,16,["tab","value","default_value"]))],8,bX)],16,vX))}}),wX=Cn(AX,[["__scopeId","data-v-fb5ace36"]]),h4={TAB:{type:"single",items:[{trans:"circle-style.setting.color",key:"circle-color",type:"color"},{trans:"circle-style.setting.width",key:"circle-radius",type:"unit",unit:"px"},{trans:"circle-style.setting.opacity",key:"circle-opacity",type:"opacity"},{trans:"circle-style.setting.blur",key:"circle-blur",type:"number"},{trans:"circle-style.setting.stroke-color",key:"circle-stroke-color",type:"color"},{trans:"circle-style.setting.stroke-width",key:"circle-stroke-width",type:"unit",unit:"px"},{trans:"circle-style.setting.stroke-opacity",key:"circle-stroke-opacity",type:"opacity"},{trans:"circle-style.setting.circle-pitch-alignment",key:"circle-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.circle-pitch-scale",key:"circle-pitch-scale",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"}]},{trans:"circle-style.setting.translate",key:"circle-translate",type:"array-x-y"}]},DEFAULT:{type:"circle",paint:{"circle-radius":5,"circle-color":"#000000","circle-blur":0,"circle-opacity":1,"circle-stroke-color":"#000000","circle-stroke-width":0,"circle-stroke-opacity":1,"circle-pitch-alignment":"viewport","circle-pitch-scale":"map","circle-translate":[0,0]}}},CX=Dn({__name:"InputArrayIndex",props:Ui({mapId:{type:String,required:!0},items:{type:Array,required:!0,default:()=>[]}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:Ui(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Us(e,"modelValue"),i=t;function o(u,l){n.value[l]=u,i("update:modelValue",n.value)}return(u,l)=>(Ae(),st("div",ar(u.$attrs,{class:"input-array-index"}),[(Ae(!0),st(Gn,null,ii(e.items,(s,f)=>(Ae(),st("div",{class:"input-array-item",key:`array_${f}`},[Le("span",null,gn(s.text)+": ",1),He(se(pi),{modelValue:n.value[f],type:s.type,onChange:y=>o(+y.target.value,f)},null,8,["modelValue","type","onChange"])]))),128))],16))}}),IX=Cn(CX,[["__scopeId","data-v-ca2d240f"]]),MX={class:"input-array-item"},SX={class:"input-array-item"},EX=Dn({__name:"InputArrayXY",props:Ui({mapId:{type:String,required:!0}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:Ui(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Us(e,"modelValue"),i=t;function o(u,l){n.value[l]=u,i("update:modelValue",n.value)}return(u,l)=>(Ae(),st("div",ar(u.$attrs,{class:"input-array-x-y"}),[Le("div",MX,[l[2]||(l[2]=Le("span",null," x: ",-1)),He(se(pi),{modelValue:n.value[0],type:"number",onChange:l[0]||(l[0]=s=>o(+s.target.value,0))},null,8,["modelValue"])]),Le("div",SX,[l[3]||(l[3]=Le("span",null," y: ",-1)),He(se(pi),{modelValue:n.value[1],type:"number",onChange:l[1]||(l[1]=s=>o(+s.target.value,1))},null,8,["modelValue"])])],16))}}),TX=Cn(EX,[["__scopeId","data-v-e33f0aac"]]),PX={class:"fill-canvas"},kX={class:"item-image"},LX=["src","onClick"],DX=Dn({__name:"InputImage",props:Ui({mapId:{type:String,required:!0}},{modelValue:{default:void 0},modelModifiers:{}}),emits:Ui(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Us(e,"modelValue"),i=t,o=e,{images:u,toDataURL:l}=Xq(o.mapId);function s(f){i("update:modelValue",f==n.value?void 0:f)}return(f,y)=>(Ae(),st("div",ar(f.$attrs,{class:"input-image"}),[Le("div",null,[He(se(pi),{modelValue:n.value,onChange:y[0]||(y[0]=b=>s(b.target.value))},null,8,["modelValue"])]),Le("div",PX,[(Ae(!0),st(Gn,null,ii(se(u),(b,x)=>(Ae(),st("div",{key:x,class:ei(["item-icon",{"item-icon-active":x==n.value}])},[Le("div",kX,[Le("img",{src:se(l)(x,b),alt:"Map image",onClick:M=>s(x)},null,8,LX)])],2))),128))])],16))}}),RX=Cn(DX,[["__scopeId","data-v-78b9f451"]]),OX={class:"input-array-item__action"},zX=Dn({__name:"InputMultiple",props:Ui({mapId:{type:String,required:!0}},{modelValue:{default:()=>[0,0]},modelModifiers:{}}),emits:Ui(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const n=Us(e,"modelValue"),i=t,o={delete:Kf};function u(f,y){n.value[y]=f,i("update:modelValue",n.value)}function l(f,y){f&&f.splice(y,1),n.value=f,i("update:modelValue",f)}function s(){n.value.push(0),i("update:modelValue",n.value)}return(f,y)=>(Ae(),st("div",ar(f.$attrs,{class:"input-array-index"}),[(Ae(!0),st(Gn,null,ii(n.value,(b,x)=>(Ae(),st("div",{class:"input-array-item",key:`array_${x}`},[He(se(pi),{modelValue:n.value[x],type:b.type,onChange:M=>u(+M.target.value,x)},null,8,["modelValue","type","onChange"]),Le("div",OX,[n.value.length>2?(Ae(),$t(se(il),{key:0,onClick:M=>l(n.value,x)},{default:dt(()=>[He(se(An),{size:"16",type:"mdi",path:o.delete},null,8,["path"])]),_:2},1032,["onClick"])):an("",!0)])]))),128)),He(se(il),{onClick:y[0]||(y[0]=b=>s())},{default:dt(()=>y[1]||(y[1]=[Qi(" Add")])),_:1})],16))}}),FX=Cn(zX,[["__scopeId","data-v-5b1e3d5d"]]),BX={props:{value:{type:String},default_value:{type:String}},data:()=>({}),computed:{},methods:{}};function NX(e,t,n,i,o,u){return Ae(),st("div",{style:Yr(`
      border: 1px solid #ccc;
      width:20px ; height: 20px ; background-color: ${n.value||n.default_value||"transparent"} ;
              border-radius: 5px `),class:ei({"fill-canvas":!n.value&&!n.default_value})},null,6)}const VX=Cn(BX,[["render",NX]]),jX={props:{value:{},default_value:{},tab:{default:()=>({})}},data:()=>({}),computed:{},methods:{}};function UX(e,t,n,i,o,u){return Ae(),st("div",null,gn(n.value||n.default_value||"0")+" "+gn(n.tab.unit||""),1)}const $X=Cn(jX,[["render",UX]]),HX={props:{value:{},default_value:{},format:{default:()=>()=>""}},data:()=>({}),computed:{c_value(){return this.value!=null?this.value:this.default_value}},methods:{}};function GX(e,t,n,i,o,u){return Ae(),st("div",null,gn(n.format(u.c_value||"0")),1)}const uC=Cn(HX,[["render",GX]]),fP={"array-index":{component:{content:()=>IX},props:{content:e=>({items:e.data})}},multiple:{component:{content:()=>FX},props:{}},select:{component:{content:()=>$f},props:{content:e=>({items:e.items})}},image:{component:{content:()=>RX},props:{content:{}}},color:{component:{content:()=>mV,label:()=>VX},props:{content:{disableAlpha:!0,class:"tab-content-no-padding"}}},boolean:{component:{content:()=>Jk},props:{content:{}}},chose:{component:{content:()=>i7,label:()=>uC},props:{content:e=>({items:e.menu,class:"tab-content-padding"}),label:e=>({format(t){var n;return(n=e.menu.find(i=>i.value==t))==null?void 0:n.text}})}},opacity:{component:{content:()=>Sx,label:()=>uC},props:{content:{min:0,max:1,step:.01},label:{format:e=>`${(+e*100).toFixed(0)} %`}},format:e=>+e},minMax:{component:{content:()=>Sx,label:()=>uC},props:{content:{min:0,max:1,step:.01},label:{format:e=>`${(+e).toFixed(2)}`}},format:e=>+e},unit:{component:{content:()=>pi,label:()=>$X},props:{content:{type:"number",min:0}},format:e=>+e},number:{component:{content:()=>pi},props:{content:{type:"number",min:0}},format:e=>+e},text:{component:{content:()=>pi},props:{content:{}}},"array-x-y":{component:{content:()=>TX},props:{}},default:{component:{content:()=>pi},props:{content:{}}}},d4={TAB:{type:"single",items:[{trans:"fill-style.setting.color",key:"fill-color",type:"color",disabled:e=>{var t;return!!((t=e.paint)!=null&&t["fill-pattern"])}},{trans:"fill-style.setting.fill-pattern",key:"fill-pattern",type:"image",format:e=>{if(e)return e}},{trans:"fill-style.setting.opacity",key:"fill-opacity",type:"opacity"},{trans:"fill-style.setting.fill-antialias",key:"fill-antialias",type:"boolean"},{trans:"fill-style.setting.fill-outline-color",key:"fill-outline-color",type:"color",disabled:e=>{var t,n;return!!((t=e.paint)!=null&&t["fill-pattern"])||((n=e.paint)==null?void 0:n["fill-antialias"])===!1}},{trans:"fill-style.setting.translate",key:"fill-translate",type:"array-x-y"}]},DEFAULT:{type:"fill",paint:{"fill-antialias":!0,"fill-color":"#000000","fill-opacity":1,"fill-translate":[0,0]}}},f4={TAB:{type:"single",items:[{trans:"line-style.setting.color",key:"line-color",type:"color",disabled:e=>{var t;return!!((t=e.paint)!=null&&t["line-pattern"])}},{trans:"line-style.setting.pattern",key:"line-pattern",type:"image",format:e=>{if(e)return e}},{trans:"line-style.setting.opacity",key:"line-opacity",type:"opacity"},{trans:"line-style.setting.width",key:"line-width",type:"unit",unit:"px"},{trans:"line-style.setting.cap",key:"line-cap",type:"chose",menu:[{text:"butt",value:"butt"},{text:"round",value:"round"},{text:"square",value:"square"}],part:"layout"},{trans:"line-style.setting.join",key:"line-join",type:"chose",menu:[{text:"bevel",value:"bevel"},{text:"round",value:"round"},{text:"miter",value:"miter"}],part:"layout"},{trans:"line-style.setting.round-limit",key:"line-round-limit",type:"unit",part:"layout",unit:"px",disabled:e=>{var t;return((t=e.layout)==null?void 0:t["line-join"])!="round"}},{trans:"line-style.setting.miter-limit",key:"line-miter-limit",type:"unit",part:"layout",unit:"px"},{type:"divider"},{trans:"line-style.setting.dash-array",key:"line-dasharray",type:"multiple",disabled:e=>{var t;return!!((t=e.paint)!=null&&t["line-pattern"])}},{trans:"line-style.setting.grap-width",key:"line-gap-width",type:"unit",unit:"px"},{trans:"line-style.setting.blur",key:"line-blur",type:"unit",unit:"px"},{trans:"line-style.setting.offset",key:"line-offset",type:"unit",unit:"px"},{trans:"line-style.setting.translate",key:"line-translate",type:"array-x-y"}]},DEFAULT:{type:"line",paint:{"line-color":"#000000","line-opacity":1,"line-width":0,"line-gap-width":0,"line-blur":0,"line-offset":0,"line-translate":[0,0]},layout:{"line-cap":"butt","line-join":"bevel","line-round-limit":0,"line-miter-limit":0}}},p4={TAB:{type:"single",items:[{trans:"raster-style.setting.raster-opacity",key:"raster-opacity",type:"opacity"},{trans:"raster-style.setting.raster-brightness-max",key:"raster-brightness-max",type:"minMax"},{trans:"raster-style.setting.raster-brightness-min",key:"raster-brightness-min",type:"minMax"},{trans:"raster-style.setting.raster-contrast",key:"raster-contrast",type:"minMax",props:{content:{class:"tab-content-padding",min:-1,max:1,step:.01}}},{trans:"raster-style.setting.raster-fade-duration",key:"raster-fade-duration",type:"unit",unit:"milliseconds"},{trans:"raster-style.setting.raster-hue-rotate",key:"raster-hue-rotate",type:"unit",unit:"degrees"},{trans:"raster-style.setting.raster-resampling",key:"raster-resampling",type:"chose",menu:[{text:"linear",value:"linear"},{text:"nearest",value:"nearest"}]},{trans:"raster-style.setting.raster-saturation",key:"raster-saturation",type:"minMax",props:{content:{min:-1,max:1}}}]},DEFAULT:{type:"raster",paint:{"raster-brightness-max":1,"raster-brightness-min":0,"raster-contrast":0,"raster-fade-duration":300,"raster-opacity":1,"raster-hue-rotate":0,"raster-resampling":"linear","raster-saturation":0}}},ZX=[{trans:"symbol-style.setting.text-field",key:"text-field",part:"layout",type:"text"},{trans:"symbol-style.setting.text-color",key:"text-color",type:"color"},{trans:"symbol-style.setting.opacity",key:"text-opacity",type:"opacity"},{trans:"symbol-style.setting.size",key:"text-size",part:"layout",type:"unit",unit:"px"},{trans:"symbol-style.setting.letter-spacing",key:"text-letter-spacing",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.line-height",key:"text-line-height",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.max-width",key:"text-max-width",part:"layout",type:"unit",unit:"em"},{trans:"symbol-style.setting.transform",key:"text-transform",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"uppercase",value:"uppercase"},{text:"lowercase",value:"lowercase"}]},{type:"divider"},{trans:"symbol-style.setting.halo-color",key:"text-halo-color",type:"color"},{trans:"symbol-style.setting.halo-blur",key:"text-halo-blur",type:"unit"},{trans:"symbol-style.setting.halo-width",key:"text-halo-width",type:"unit"}],WX=[{trans:"symbol-style.setting.icon-image",key:"icon-image",part:"layout",type:"image"},{trans:"symbol-style.setting.icon-opacity",key:"icon-opacity",type:"opacity"},{trans:"symbol-style.setting.icon-size",key:"icon-size",part:"layout",type:"unit"},{trans:"symbol-style.setting.icon-text-fit",key:"icon-text-fit",part:"layout",type:"chose",menu:[{text:"none",value:"none"},{text:"width",value:"width"},{text:"height",value:"height"},{text:"both",value:"both"}]},{trans:"symbol-style.setting.icon-text-fit-padding",key:"icon-text-fit-padding",part:"layout",type:"array-index",data:[{text:"top",type:"number",value:0},{text:"right",type:"number",value:0},{text:"bottom",type:"number",value:0},{text:"left",type:"number",value:0}]}],qX=[{trans:"symbol-style.setting.symbol-placement",key:"symbol-placement",type:"chose",menu:[{text:"point",value:"point"},{text:"line",value:"line"},{text:"line-center",value:"line-center"}],part:"layout"},{trans:"symbol-style.setting.symbol-spacing",key:"symbol-spacing",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.text-max-angle",key:"text-max-angle",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.avoid-edges",key:"symbol-avoid-edges",type:"boolean",part:"layout"},{trans:"symbol-style.setting.sort-key",key:"symbol-sort-key",type:"text",part:"layout"},{trans:"symbol-style.setting.text-orientation",key:"icon-pitch-alignment",type:"chose",menu:[{text:"map",value:"map"},{text:"viewport",value:"viewport"},{text:"auto",value:"auto"}],text:"Text orientation",part:"layout"},{trans:"symbol-style.setting.text-padding",key:"text-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-text-overlap",key:"text-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-ignore-placement",key:"text-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.text-optional",key:"text-optional",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-padding",key:"icon-padding",type:"unit",unit:"px",part:"layout"},{trans:"symbol-style.setting.allow-icon-overlap",key:"icon-allow-overlap",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-ignore-placement",key:"icon-ignore-placement",type:"boolean",part:"layout"},{trans:"symbol-style.setting.icon-optional",key:"icon-optional",type:"boolean",part:"layout"}],KX=[{trans:"symbol-style.setting.text-justify",key:"text-justify",type:"chose",menu:[{text:"auto",value:"auto"},{text:"left",subtitle:"symbol-style.translate.left",value:"left"},{text:"center",value:"center"},{text:"right",value:"right"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.text-anchor",key:"text-anchor",type:"select",items:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],part:"layout"},{trans:"symbol-style.setting.text-offset",key:"text-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-radial-offset",key:"text-radial-offset",type:"unit",unit:"em",part:"layout"},{trans:"symbol-style.setting.text-translate",key:"text-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.text-rotate",key:"text-rotate",type:"unit",unit:"deg",part:"layout"},{trans:"symbol-style.setting.text-pitch-alignment",key:"text-pitch-alignment",type:"chose",menu:[{text:"auto",value:"auto"},{text:"map",value:"map"},{text:"viewport",value:"viewport"}],text:"Text justify",part:"layout"},{trans:"symbol-style.setting.icon-offset",key:"icon-offset",type:"array-x-y",unit:"em",part:"layout"},{trans:"symbol-style.setting.icon-translate",key:"icon-translate",type:"array-x-y",unit:"em"},{trans:"symbol-style.setting.icon-rotate",key:"icon-rotate",type:"unit",unit:"deg",part:"layout"}],m4={TAB:{type:"multi",tabs:[{trans:"symbol-style.tab.text",items:ZX},{trans:"symbol-style.tab.icon",items:WX},{trans:"symbol-style.tab.position",items:qX},{trans:"symbol-style.tab.placement",items:KX}]},DEFAULT:{type:"symbol",paint:{"icon-color":void 0,"icon-halo-blur":0,"icon-halo-color":"rgba(0, 0, 0, 0)","icon-halo-width":0,"icon-opacity":1,"icon-translate":[0,0],"icon-translate-anchor":"map","text-color":"#000000","text-halo-blur":0,"text-halo-color":"rgba(0, 0, 0, 0)","text-halo-width":0,"text-opacity":1,"text-translate":[0,0],"text-translate-anchor":"map"},layout:{"symbol-placement":"point","symbol-spacing":250,"symbol-avoid-edges":!1,"symbol-sort-key":void 0,"icon-allow-overlap":!1,"icon-anchor":"center","icon-image":void 0,"icon-offset":[0,0],"icon-optional":!1,"icon-padding":2,"icon-pitch-alignment":"auto","icon-rotate":0,"icon-rotation-alignment":"auto","icon-size":1,"icon-text-fit":"none","icon-text-fit-padding":[0,0,0,0],"icon-keep-upright":!1,"text-allow-overlap":!1,"text-anchor":"center","text-field":"","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-justify":"center","text-letter-spacing":0,"text-line-height":1.2,"text-max-angle":45,"text-max-width":10,"text-offset":[0,0],"text-optional":!1,"text-padding":2,"text-pitch-alignment":"auto","text-rotate":0,"text-rotation-alignment":"auto","text-size":16,"text-transform":"none","text-variable-anchor":void 0,"text-writing-mode":void 0,"text-keep-upright":!0,visibility:"visible"}}},YX={circle:h4.TAB,line:f4.TAB,fill:d4.TAB,raster:p4.TAB,symbol:m4.TAB},XX={circle:h4.DEFAULT,line:f4.DEFAULT,fill:d4.DEFAULT,raster:p4.DEFAULT,symbol:m4.DEFAULT};function pP(e,t=fP){return e.map(n=>{if(n.type==="divider")return n;const i=Object.assign({},t.default,t[n.type]||{},n);return t[n.type]||console.log("type","missing",n.type),i.props=Dy.merge({},i.props,(fP[n.type]||{}).props,n.props),i})}const QX={class:"style-edit-container"},JX={class:"label-config-container"},eQ={class:"label-config-item"},tQ={class:"label-config-item__label"},nQ={class:"label-config-item__input"},rQ={class:"label-config-item"},iQ={class:"label-config-item__label"},sQ={class:"label-config-item__input"},aQ={class:"label-config-item"},oQ={class:"label-config-item__label"},lQ={class:"label-config-item__input"},uQ={class:"label-config-item"},cQ={class:"label-config-item__label"},hQ={class:"label-config-item__input"},dQ={key:0,class:"tab-group-label"},fQ=["onClick"],pQ={class:"tab-group-container"},mQ={class:"label-container"},gQ={key:0},yQ=["onClick"],vQ={key:0,class:"tab-divider"},_Q={class:"value-container"},bQ={key:0,class:"value-container__label"},xQ=Dn({__name:"single-style",props:Ui({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:Ui(["input","update-style"],["update:modelValue"]),setup(e,{emit:t}){const n=e,i=t,o=Us(e,"modelValue"),u=dn(()=>{const k=YX[o.value.type];return k.type==="multi"?k.tabs.map(L=>({...L,items:pP(L.items)})):[{type:"single",text:"style",items:pP(k.items)}]}),l=dn(()=>XX[o.value.type]),s=Qt(void 0),f=Qt(void 0),y=k=>{f.value=k,f.value&&f.value.menu&&(f.value.menu=f.value.menu.map(L=>({...L,text:L.text||n.trans(L.text_trans||"")||"",subtitle:L.subtitle||n.trans(L.subtitle_trans||"")||""})))},b=k=>{s.value=k,s.value&&s.value.items&&y(s.value.items[0])},x=(k,L,F)=>{L.type!=="divider"&&(L.format&&(k=L.format(k)),"key"in L&&(L.format&&(k=L.format(k)),F[L.part||"paint"][L.key]=k),i("update-style",F))};ti(()=>{u.value&&b(u.value[0])});const M=(k,L)=>{L["min-zoom"]=k,i("update-style",L)},A=(k,L)=>{L["max-zoom"]=k,i("update-style",L)};return(k,L)=>(Ae(),st("div",QX,[He(se(cI),null,{header:dt(()=>[Qi(gn(e.trans("map.style-control.layer.title")),1)]),default:dt(()=>[Le("div",JX,[Le("div",eQ,[Le("div",tQ,gn(e.trans("map.style-control.layer.id")),1),Le("div",nQ,gn(o.value.id),1)]),Le("div",rQ,[Le("div",iQ,gn(e.trans("map.style-control.layer.type")),1),Le("div",sQ,gn(o.value.type),1)]),Le("div",aQ,[Le("div",oQ,gn(e.trans("map.style-control.layer.min-zoom")),1),Le("div",lQ,[He(se(Sx),{modelValue:o.value["min-zoom"]!=null?o.value["min-zoom"]:0,"onUpdate:modelValue":L[0]||(L[0]=F=>M(F,o.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])]),Le("div",uQ,[Le("div",cQ,gn(e.trans("map.style-control.layer.max-zoom")),1),Le("div",hQ,[He(se(Sx),{modelValue:o.value["max-zoom"]!=null?o.value["max-zoom"]:24,"onUpdate:modelValue":L[1]||(L[1]=F=>A(F,o.value)),min:"0",max:"24",step:"1"},null,8,["modelValue"])])])])]),_:1}),He(se(cI),null,{header:dt(()=>[Qi(gn(e.trans("map.style-control.style.title")),1)]),default:dt(()=>[u.value&&u.value.length>1?(Ae(),st("div",dQ,[(Ae(!0),st(Gn,null,ii(u.value,F=>(Ae(),st("div",{key:F.key,class:ei(["tab clickable",{"tab-active":s.value&&s.value.trans==F.trans}]),onClick:Rr(V=>b(F),["stop"])},gn(F.text||e.trans(F.trans)),11,fQ))),128))])):an("",!0),Le("div",pQ,[Le("div",mQ,[s.value?(Ae(),st("div",gQ,[(Ae(!0),st(Gn,null,ii(s.value.items,F=>(Ae(),st("div",{key:F.key,class:"clickable",onClick:Rr(V=>y(F),["stop"])},[F.type==="divider"?(Ae(),st("div",vQ)):(Ae(),$t(wX,{key:1,value:o.value[F.part||"paint"][F.key],item:F,text:F.text||e.trans(F.trans),default_value:l.value[F.part||"paint"][F.key],active:f.value&&f.value.key===F.key,disabled:F.disabled&&F.disabled(o.value)},null,8,["value","item","text","default_value","active","disabled"]))],8,yQ))),128))])):an("",!0)]),Le("div",_Q,[Le("div",null,[f.value?(Ae(),st("div",bQ,gn(f.value.text||e.trans(f.value.trans)),1)):an("",!0),f.value?(Ae(),$t(yX,{key:1,item:f.value,value:o.value[f.value.part||"paint"][f.value.key],onInput:L[2]||(L[2]=F=>x(F,f.value,o.value)),default_value:l.value[f.value.part||"paint"][f.value.key],trans:e.trans,mapId:e.mapId},null,8,["item","value","default_value","trans","mapId"])):an("",!0)])])])]),_:1})]))}}),mP=Cn(xQ,[["__scopeId","data-v-e1d4f1a9"]]),AQ={class:"multi-style-edit-container"},wQ={class:"tab-container"},CQ={class:"tab-item"},IQ=["disabled"],MQ={key:0,class:"style-container"},SQ={class:"add-style-container"},EQ={key:1,class:"style-container"},TQ=Dn({__name:"multi-style",props:Ui({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:Ui(["input","update-style","close"],["update:modelValue"]),setup(e,{expose:t,emit:n}){t({SvgIcon:An,SingleStyle:mP,BaseButton:il,InputSelect:$f});const i=n,o=Us(e,"modelValue");hs(o,()=>{!y.value&&o.value.length>0&&(y.value=o.value[o.value.length-1].id)});const u=F=>{y.value=void 0,Rl(()=>{y.value=F})},l=(F,V)=>{i("update-style",{type:"update-one-layer",layer:F,index:o.value.findIndex(O=>O.id===V)})},s=F=>{y.value=void 0,i("update-style",{type:"add-one-layer",layer:new hm().setStyleType(F).setColor("#fff").build()}),L(!1)},f=F=>{var O;let V=o.value.findIndex(N=>N.id===F);o.value[V]&&(y.value=void 0,i("update-style",{type:"remove-one-layer",index:V,layer:o.value[V]}),o.value.splice(V,1),o.value.length===0?(y.value=void 0,L(!0)):y.value=(O=o.value[o.value.length-1])==null?void 0:O.id,o.value[0]&&u(o.value[0].id))},y=Qt(o.value[0].id),b=dn(()=>o.value.map((F,V)=>({text:`#${V+1}`,value:F.id}))),x=dn(()=>o.value.find(F=>F.id===y.value)),M={delete:Kf,create:Yf,close:Py},[A,k]=ld(!1),L=F=>{k(F)};return(F,V)=>(Ae(),st("div",AQ,[Le("div",wQ,[Le("div",CQ,[He(se($f),{modelValue:y.value,"onUpdate:modelValue":u,items:b.value},null,8,["modelValue","items"])]),Le("button",{class:"tab-item tab-add clickable",onClick:V[0]||(V[0]=O=>f(y.value)),disabled:!y.value},[He(se(An),{size:"14",type:"mdi",path:M.delete,disabled:!y.value},null,8,["path","disabled"])],8,IQ),Le("button",{class:"tab-item tab-add clickable",onClick:V[1]||(V[1]=O=>L(!se(A)))},[He(se(An),{size:"14",type:"mdi",path:se(A)?M.close:M.create},null,8,["path"])])]),se(A)?(Ae(),st("div",MQ,[Le("div",SQ,[He(se(il),{onClick:V[2]||(V[2]=O=>s("area"))},{default:dt(()=>[Qi(gn(e.trans("map.style-control.add.area")),1)]),_:1}),He(se(il),{onClick:V[3]||(V[3]=O=>s("line"))},{default:dt(()=>[Qi(gn(e.trans("map.style-control.add.line")),1)]),_:1}),He(se(il),{onClick:V[4]||(V[4]=O=>s("point"))},{default:dt(()=>[Qi(gn(e.trans("map.style-control.add.point")),1)]),_:1}),He(se(il),{onClick:V[5]||(V[5]=O=>s("symbol"))},{default:dt(()=>[Qi(gn(e.trans("map.style-control.add.symbol")),1)]),_:1})])])):y.value?(Ae(),st("div",EQ,[(Ae(),$t(mP,{modelValue:x.value,trans:e.trans,mapId:e.mapId,key:y.value,onUpdateStyle:V[6]||(V[6]=O=>l(O,y.value))},null,8,["modelValue","trans","mapId"]))])):an("",!0)]))}});function dm(e,t=[]){const n=cX(e,t),i={};return n.getData().forEach(o=>{var l;const u=o.id||hc();o.id=u,o.metadata||(o.metadata={}),o.metadata["maplibregl-legend:name"]=e,i[u]=((l=o.paint)==null?void 0:l[cC(o)])??1}),Fl("MultiMapboxLayerComponent",{...n,setData(o){n.setData(o.map(u=>{var s;const l=u.id||hc();return u.id=l,u.metadata||(u.metadata={}),u.metadata["maplibregl-legend:name"]=e,i[l]=((s=u.paint)==null?void 0:s[cC(u)])??1,u}))},getBeforeId(){var o;return(o=n.getData()[0])==null?void 0:o.id},getAllLayerIds(){return n.getData().map(o=>o.id)},getComponentUpdate(){return()=>TQ},addToMap(o,u){const l=Jb(n,"source");n.getData().forEach(s=>{o.getLayer(s.id)||(!s.source&&l&&(s.source=l.getSourceId()),o.addLayer(s,u))})},removeFromMap(o){o.getLayer(n.id+"-hightLight")&&o.removeLayer(n.id+"-hightLight"),n.getData().forEach(u=>{o.getLayer(u.id)&&o.removeLayer(u.id)})},moveLayer(o,u){n.getData().forEach(l=>{o.getLayer(l.id)&&o.moveLayer(l.id,u)})},toggleShow(o,u){n.getData().forEach(l=>{o.getLayer(l.id)&&o.setLayoutProperty(l.id,"visibility",u?"visible":"none")})},setOpacity(o,u){n.getData().forEach(l=>{o.getLayer(l.id)&&o.setPaintProperty(l.id,cC(l),u*(i[l.id]??1))})},updateValue(o,u){const{type:l,index:s}=u;let{layer:f}=u;const y=Jb(n,"source");switch(l){case"update-one-layer":PQ(o,n.getData()[s],f),n.getData()[s]=c_({...n.getData()[s],...f});break;case"add-one-layer":f={...f,id:`${n.id}-${n.getData().length}`,source:y.getSourceId()},o.addLayer(f),n.getData().push(f);break;case"remove-one-layer":o.getLayer(f.id)&&o.removeLayer(f.id),n.getData().splice(s,1);break}},hightLight(o,u){var s,f;if(o.getLayer(n.id+"-hightLight"))o.setFilter(n.id+"-hightLight",["==",["get","id"],((f=u==null?void 0:u.properties)==null?void 0:f.id)||null]);else{const y=Jb(n,"source");if(y){const b=y.getSourceId();b&&o.addLayer({id:n.id+"-hightLight",source:b,type:"line",metadata:{"maplibregl-legend:disable":!0},filter:["==",["get","id"],((s=u==null?void 0:u.properties)==null?void 0:s.id)||null],paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,2]}})}}o.moveLayer(n.id+"-hightLight")}})}function PQ(e,t,n){var i,o;e.setLayerZoomRange(t.id,n["min-zoom"]??t["min-zoom"]??0,n["max-zoom"]??t["max-zoom"]??24);for(const u in n.paint)n.paint[u]!==((i=t.paint)==null?void 0:i[u])&&e.setPaintProperty(t.id,u,n.paint[u]);for(const u in n.layout)n.layout[u]!==((o=t.layout)==null?void 0:o[u])&&e.setLayoutProperty(t.id,u,n.layout[u])}function cC(e){return e.type==="symbol"?"icon-opacity":`${e.type}-opacity`}function fm(e,t){const n=zm(e,t),i=sS();return Fl("ListViewUIComponent",{...n,...i,get type(){return"list"},opacity:1,selected:!1,color:void 0,config:{disable_delete:!1,disabled_opacity:!1,component:void 0},index:0,group:void 0,show:!0,shows:[],legend:void 0})}function gP(e,t){const n=zm(e,t);return Fl("MetadataComponent",{...n,type:"metadata",metadata:t})}function g4(e,t){const n=zm(e,t);return Fl("DatasetPartMapboxSourceComponent",{...n,get type(){return"source"},getSourceId(){return this.getMapboxSource().id||n.id},addToMap(i){const o=this.getSourceId();o&&!i.getSource(o)&&i.addSource(o,this.getMapboxSource())},removeFromMap(i){const o=this.getSourceId();o&&i.getSource(o)&&i.removeSource(o)},getMapboxSource(){throw new Error("Method not implemented.")},getFieldsInfo(){throw new Error("Method not implemented.")},getDataInfo(){throw new Error("Method not implemented.")}})}function rx(e,t){const n=g4(e,t);return Fl("GeojsonSourceComponent",{...n,getMapboxSource:()=>({type:"geojson",data:n.getData()||{type:"FeatureCollection",features:[]}}),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.geojson",value:"geojson",inline:!0}],getDataInfo:()=>{var o;const i=bu(n,u=>u.type==="metadata");return{name:n.getName(),bbox:(o=i==null?void 0:i.metadata)==null?void 0:o.bbox,geojson:JSON.stringify(n.getData(),void 0,2)}},updateData(i,o){const u=i.getSource(n.id);u&&u.setData(o),n.setData(o)}})}function y4(e,t){const n=g4(e,t);return Fl("RasterSourceComponent",{...n,getMapboxSource:()=>n.getData(),getFieldsInfo:()=>[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:"bbox"},{trans:"map.layer-control.field.tiles",value:"tiles"}],getDataInfo:()=>{var u,l;const i=bu(n,s=>s.type==="metadata"),o=n.getData();return{name:n.getName(),bbox:((u=i==null?void 0:i.metadata)==null?void 0:u.bbox)||(o==null?void 0:o.bounds),tiles:(l=o==null?void 0:o.tiles)==null?void 0:l.join(`,
`)}}})}const kQ=Dn({__name:"ComponentManagementControl",props:{...Ti},setup(e){const t=to(),n=e,{mapId:i}=Nr(n),{getAllComponentIds:o,getStore:u,removeComponent:l}=t4(i.value),s=u();function f(x){l(x.id)}const y=dn(()=>{var x;return((x=o())==null?void 0:x.value)||[]}),b=Qt([]);return hs(y,()=>{var x;b.value=(s==null?void 0:s.components)||[],(x=t==null?void 0:t.proxy)==null||x.$forceUpdate()},{deep:!0}),(x,M)=>(Ae(!0),st(Gn,null,ii(b.value,A=>(Ae(),$t(Ls(A.component()),ar({key:A.id,ref_for:!0},A.attr,{onClose:k=>f(A)}),null,16,["onClose"]))),128))}}),LQ={},DQ={class:"map-row"};function RQ(e,t,n,i,o,u){return Ae(),st("div",DQ,[In(e.$slots,"default")])}const v4=Cn(LQ,[["render",RQ]]),OQ={class:"map-row"},zQ={class:"map-col-12"},FQ={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue"),{mapId:n}=Nr(),{trans:i}=Hi(n.value);return(o,u)=>(Ae(),st("div",OQ,[In(o.$slots,"default"),Le("div",zQ,[He(se(pi),{modelValue:t.value.url,"onUpdate:modelValue":u[0]||(u[0]=l=>t.value.url=l),label:se(i)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},BQ={class:"map-row"},NQ={class:"map-col-12"},VQ={class:"map-col-6"},jQ={class:"map-col-6"},UQ={class:"map-col-6"},$Q={class:"map-col-6"},HQ={class:"map-col-6"},GQ={class:"map-col-6"},ZQ={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Us(e,"modelValue"),{mapId:n}=Nr(),{trans:i}=Hi(n.value);return(o,u)=>(Ae(),st("div",BQ,[In(o.$slots,"default"),Le("div",NQ,[He(se(pi),{modelValue:t.value.url,"onUpdate:modelValue":u[0]||(u[0]=l=>t.value.url=l),label:se(i)("map.layer-control.field.url")},null,8,["modelValue","label"])]),Le("div",VQ,[He(se(pi),{modelValue:t.value.minzoom,"onUpdate:modelValue":u[1]||(u[1]=l=>t.value.minzoom=l),label:se(i)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),Le("div",jQ,[He(se(pi),{modelValue:t.value.maxzoom,"onUpdate:modelValue":u[2]||(u[2]=l=>t.value.maxzoom=l),label:se(i)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),t.value.bounds?(Ae(),st(Gn,{key:0},[Le("div",UQ,[He(se(pi),{modelValue:t.value.bounds[0],"onUpdate:modelValue":u[3]||(u[3]=l=>t.value.bounds[0]=l),label:se(i)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),Le("div",$Q,[He(se(pi),{modelValue:t.value.bounds[1],"onUpdate:modelValue":u[4]||(u[4]=l=>t.value.bounds[1]=l),label:se(i)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),Le("div",HQ,[He(se(pi),{modelValue:t.value.bounds[2],"onUpdate:modelValue":u[5]||(u[5]=l=>t.value.bounds[2]=l),label:se(i)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),Le("div",GQ,[He(se(pi),{modelValue:t.value.bounds[3],"onUpdate:modelValue":u[6]||(u[6]=l=>t.value.bounds[3]=l),label:se(i)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):an("",!0)]))}},WQ={class:"map-row"},qQ={class:"map-col-12"},KQ={class:"map-col-12"},YQ={key:0,class:"map-col-12"},XQ={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const{read:t}=xB(),n=["point","line","area"],i=Us(e,"modelValue"),o=Qt(null),{mapId:u}=Nr(),{trans:l}=Hi(u.value);function s(f){t(f).then(y=>{i.value.geojson=y,o.value=y?JSON.stringify(y,null,2):""})}return(f,y)=>(Ae(),st("div",WQ,[In(f.$slots,"default"),Le("div",qQ,[He(se($f),{modelValue:i.value.type,"onUpdate:modelValue":y[0]||(y[0]=b=>i.value.type=b),items:n,label:se(l)("map.layer-control.field.type")},null,8,["modelValue","label"])]),Le("div",KQ,[He(se(pB),{onChange:s,accept:".json,.geojson"})]),o.value?(Ae(),st("div",YQ,[He(se(Qk),{modelValue:o.value,rows:"4",readonly:""},null,8,["modelValue"])])):an("",!0)]))}};function QQ(e){const t=El(e.name,null,!0),n=fm(e.name);n.color=e.color||Qb();const i=El(e.name,null,!0),o=dm(e.name,[new hm().setStyleType(e.type).setColor(n.color).setOpacity(n.opacity).build()]);i.add(o),i.add(n);const u=JQ(e.geojson),l=tx(e.name,{fields:u.fields});l.setItems(u.items);const s=nx(e.name);s.addMenus([Xg(),Qg()]);const f=rx(e.name,{type:"FeatureCollection",features:[]});return t.add(f),t.add(l),t.add(i),t.add(s),t}function JQ(e){const t=[],n=new Set,i=u=>{const{properties:l={},geometry:s}=u;return Object.keys(l).forEach(f=>n.add(f)),{...l,geometry:s}};if(e.type==="FeatureCollection")for(const u of e.features)t.push(i(u));else e.type==="Feature"&&t.push(i(e));const o=Array.from(n).map(u=>({text:u,value:u}));return{items:t,fields:o}}function _4(e){const t=El(e.name,null,!0),n=y4(e.name,{type:"raster",tiles:e.tiles,maxzoom:e.maxZoom,minzoom:e.minZoom,bounds:e.bounds}),i=dm(e.name,[{type:"raster"}]),o=fm(e.name),u=El(e.name,null,!0);return t.add(n),u.add(o),u.add(i),t.add(u),t}class aS{get default_value(){return{}}validate(t){return!!t.name}}class eJ extends aS{get component(){return()=>FQ}validate(t){return!(!t.name||!t.url)}get create(){return t=>_4({...t})}}class tJ extends aS{get component(){return()=>ZQ}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(t){return!(!t.name||!t.url)}get create(){return t=>_4({...t,tiles:[t.url]})}}class nJ extends aS{get component(){return()=>XQ}get default_value(){return{type:"point",geojson:null}}validate(t){return!(!t.name||!t.geojson||!t.type)}get create(){return t=>QQ({...t})}}const yP={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class rJ{constructor(t){this.setType(t)}setType(t){this.helper=iJ.create(t)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||v4}validate(t){return this.helper.validate(t)}}const iJ={create(e){switch(e){case"raster-url":return new tJ;case"raster-json":return new eJ;case"geojson":return new nJ;default:throw new Error("not support type: "+e)}}},sJ={class:"create-control-container"},aJ={class:"form-container"},oJ={class:"map-col-12"},lJ={class:"map-col-12"},uJ={name:"create-layer-control"},cJ=Object.assign(uJ,{props:{show:Boolean},emits:["update:show"],setup(e,{emit:t}){const n=e,{mapId:i,moduleContainerProps:o}=Nr(n),{trans:u}=Hi(i.value),{addDataset:l}=Qy(i.value),s=t,f=dn({get(){return n.show},set(N){s("update:show",N)}}),y={type:"geojson"},b=Qt(1),x=Qt(()=>v4),M=new rJ(y.type),A=Qt({...y,config:{name:"",...M.default_value}}),k=Object.keys(yP).map(N=>({value:N,text:yP[N]}));function L(N){M.setType(N),x.value=M.component,A.value={config:{name:A.value.config.name,...M.default_value},type:A.value.type}}function F(N){const U=M.create;if(!U||!M.validate(N.config))return;let W=U(N.config);l(W),V(),f.value=!1}function V(){M.setType(y.type),A.value={...y,config:{name:"",...M.default_value}},b.value++}function O(){V()}return ti(()=>{L(A.value.type)}),(N,U)=>(Ae(),$t(se(ts),$i(zi(se(o))),{draggable:dt(W=>[He(se(ch),ar({show:f.value,"onUpdate:show":U[4]||(U[4]=ne=>f.value=ne)},W,{width:400,height:300,onClose:O,title:se(u)("map.layer-control.create.title")}),{default:dt(()=>[Le("div",sJ,[Le("div",aJ,[(Ae(),$t(Ls(x.value()),{modelValue:A.value.config,"onUpdate:modelValue":U[2]||(U[2]=ne=>A.value.config=ne),class:"create-control-form",key:b.value},{default:dt(()=>[Le("div",oJ,[He(se(pi),{modelValue:A.value.config.name,"onUpdate:modelValue":U[0]||(U[0]=ne=>A.value.config.name=ne),label:se(u)("map.layer-control.field.name")},null,8,["modelValue","label"])]),Le("div",lJ,[He(se($f),{modelValue:A.value.type,"onUpdate:modelValue":[U[1]||(U[1]=ne=>A.value.type=ne),L],items:se(k),label:se(u)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),He(se(il),{onClick:U[3]||(U[3]=ne=>F(A.value)),class:"btn-container"},{default:dt(()=>[Qi(gn(se(u)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),hJ=Cn(cJ,[["__scopeId","data-v-f9c3c4b0"]]),dJ={class:"menu-divider"},fJ=Dn({__name:"menu-divider",props:{item:{},data:{}},setup(e){return(t,n)=>(Ae(),st("div",dJ))}}),pJ=["title"],mJ=Dn({__name:"menu-item",props:{item:{},data:{},mapId:{}},setup(e){return(t,n)=>(Ae(),st("button",ar(t.$attrs,{class:"menu-item",title:t.item.name}),[t.item.icon?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:t.item.icon},null,8,["path"])):an("",!0)],16,pJ))}}),gJ=Dn({__name:"index",props:{item:{},data:{},mapId:{}},setup(e){const t=e,n=dn(()=>{switch(t.item.type){case"divider":return fJ}return mJ});return(i,o)=>(Ae(),$t(Ls(n.value),ar({item:i.item,data:i.data},i.$attrs,{mapId:i.mapId}),null,16,["item","data","mapId"]))}}),yJ={class:"identify-control-container"},vJ={class:"identify-control-header"},_J=["innerHTML"],bJ={class:"identify-control-body"},xJ={key:0,class:"identify-control-state"},AJ={class:"identify-control-state__content"},wJ={key:1,class:"identify-control-state"},CJ={class:"identify-control-state__content"},IJ={key:2,class:"identify-control-state"},MJ={class:"identify-control-state__content"},SJ={class:"identify-control-list-item__container"},EJ=["title"],TJ={class:"identify-control-list-item__child-container"},PJ={class:"identify-control-child-item__action"},kJ=Dn({__name:"IdentifyControl",props:{...Ti,immediately:Boolean},setup(e){const t={icon:RN,boxSelect:KN,mapClick:SN},n=e,{mapId:i,moduleContainerProps:o}=Nr(n),{getAllComponentsByType:u,getDatasetIds:l}=Qy(i.value),{setFeatureHighlight:s}=WA(i.value),{trans:f,setLocale:y}=Hi(i.value),{format:b}=KL(i.value);y({map:{identify:{title:"Identify",point:"Point",no_selection:"Please select a point on the map",no_data:"No data found",loading:"Loading..."}}});const x=Qt([]),M=dn(()=>l().value);hs(M,()=>{k()},{deep:!0}),ti(()=>{k()});const A=dn(()=>x.value);function k(){L()}function L(){x.value=u("identify")||[]}const F=dn(()=>x.value.length>0),{add:V,remove:O,isActive:N}=Lx(i.value,new G_().setHandler(q)),{add:U,remove:W,isActive:ne}=Lx(i.value,new qq().setHandler(G)),X=yu({latitude:0,longitude:0});function q(ft){X.latitude=ft.lngLat.lat,X.longitude=ft.lngLat.lng,K(ft.point)}function G(ft){un(),ft&&K(ft)}const ee=yu({items:[],loading:!1}),ue=dn(()=>{if(!X)return"";const ft=b(X);return ft.longitude+", &nbsp;"+ft.latitude}),Y=dn(()=>X.latitude!==0||X.longitude!==0);function ce(ft){if(ee.items=ft,n.immediately&&ft&&ft[0]&&ft[0].features&&ft[0].features[0]){const lt=ft[0].identify.getMenu("show-detail");lt&&gt(ft[0].identify,lt,ft[0].features[0].data)}}async function K(ft){ee.loading=!0;try{const lt=Date.now(),Pt=await lX(A.value,i.value,ft),Lt=Date.now()-lt;Lt<500&&await new Promise(on=>setTimeout(on,500-Lt)),ce(Pt.filter(on=>on.features.length>0))}finally{ee.loading=!1}}const Se=Qt(!1);function Ve(){Se.value=!Se.value,Zt()}function Ne(){et(),s(void 0,"identify"),ce([])}function et(){n.immediately||(Ue(),un())}const ot=Qt(!1);function Zt(){ot.value?Ue():qe()}function qe(){ot.value=!0,V()}function Ue(){ot.value=!1,O()}const Tt=Qt(!1);function Bt(){Tt.value?un():kt()}function kt(){Tt.value=!0,U()}function un(){Tt.value=!1,W()}function gt(ft,lt,Pt){qA(lt,ft,i.value,Pt)}return ti(()=>{n.immediately&&Zt()}),(ft,lt)=>(Ae(),$t(se(ts),$i(zi(se(o))),{btn:dt(()=>[F.value?(Ae(),$t(se(Br),{key:0,tooltip:se(f)("map.identify.title"),onClick:lt[0]||(lt[0]=Rr(Pt=>Ve(),["stop"])),active:Se.value},{default:dt(()=>[He(se(An),{size:"16",type:"mdi",path:t.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):an("",!0)]),draggable:dt(Pt=>[Se.value?(Ae(),$t(se(ch),ar({key:0,show:Se.value,"onUpdate:show":lt[3]||(lt[3]=Lt=>Se.value=Lt)},Pt,{width:400,height:300,onClose:Ne,title:se(f)("map.identify.title")}),{"extra-btn":dt(()=>[He(se(il),{onClick:lt[1]||(lt[1]=Rr(Lt=>Zt(),["stop"])),active:se(N),disabled:se(N)},{default:dt(()=>[He(se(An),{size:"16",type:"mdi",path:t.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),He(se(il),{onClick:lt[2]||(lt[2]=Rr(Lt=>Bt(),["stop"])),active:se(ne),disabled:se(ne)},{default:dt(()=>[He(se(An),{size:"16",type:"mdi",path:t.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:dt(()=>[Le("div",yJ,[Le("div",vJ,[Le("b",null,gn(se(f)("map.identify.point"))+":",1),Le("span",{innerHTML:ue.value},null,8,_J)]),lt[6]||(lt[6]=Le("hr",{class:"identify-control-separator"},null,-1)),Le("div",bJ,[ee.loading?(Ae(),st("div",xJ,[Le("div",AJ,[lt[4]||(lt[4]=Le("div",{class:"identify-control-state__loading"},null,-1)),Le("span",null,gn(se(f)("map.identify.loading")),1)])])):Y.value?ee.items.length===0?(Ae(),st("div",IJ,[Le("div",MJ,[Le("span",null,gn(se(f)("map.identify.no_data")),1)])])):(Ae(!0),st(Gn,{key:3},ii(ee.items,Lt=>(Ae(),st("div",{key:Lt.identify.id,class:"identify-control-list-item"},[Le("div",SJ,[Le("div",{class:"identify-control-list-item__header",title:Lt.identify.getName()},gn(Lt.identify.getName()||"---"),9,EJ),Le("div",TJ,[(Ae(!0),st(Gn,null,ii(Lt.features,on=>(Ae(),st("div",{class:"identify-control-child-item",key:on.id},[Le("span",null,gn(on.name),1),lt[5]||(lt[5]=Le("div",{class:"identify-control-child-item__spacer"},null,-1)),Le("div",PJ,[(Ae(!0),st(Gn,null,ii(Lt.identify.getMenus(),(Ie,$)=>(Ae(),$t(gJ,{key:$,class:"layer-item__button",item:Ie,data:on,mapId:se(i),onClick:Pe=>gt(Lt.identify,Ie,on.data)},null,8,["item","data","mapId","onClick"]))),128))])]))),128))])])]))),128)):(Ae(),st("div",wJ,[Le("div",CJ,[Le("span",null,gn(se(f)("map.identify.no_selection")),1)])]))])])]),_:2},1040,["show","title"])):an("",!0)]),_:1},16))}}),LJ=Cn(kJ,[["__scopeId","data-v-f0bb1b30"]]),DJ=Dn({__name:"IdentifyShowFirstControl",props:{...Ti},setup(e){const t=e,{mapId:n}=Nr(t),{getAllComponentsByType:i,getDatasetIds:o}=Qy(n.value),u=Qt([]),l=dn(()=>o().value);hs(l,()=>{s()},{deep:!0}),ti(()=>{s()});function s(){f()}function f(){u.value=i("identify")||[]}const{add:y}=Lx(n.value,new G_().setHandler(b));function b(F){k(F.point)}const x=yu({items:[],loading:!1});function M(F){if(F&&F.feature){const V=F.identify.getMenu("show-detail");V&&L(F.identify,V,F.feature.data)}}const A=dn(()=>u.value);async function k(F){x.loading=!0;try{const V=await uX(A.value,n.value,F);M(V)}finally{x.loading=!1}}function L(F,V,O){qA(V,F,n.value,O)}return ti(()=>{y()}),(F,V)=>(Ae(),st("div"))}}),RJ=Dn({__name:"LayerMenuDefaultHandle",props:{...Ti},setup(e){const t=e,{mapId:n,callMap:i}=Nr(t),{addComponent:o}=t4(n.value),{setFeatureHighlight:u}=WA(n.value);return aC("addComponent",(l,s,f)=>{o(f)}),aC("fitBounds",(l,s,f)=>{i(y=>{RA(y,f)})}),aC("highlight",(l,s,f)=>{u(f.detail,f.key,l)}),(l,s)=>(Ae(),st("div"))}}),OJ=Dn({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(e,{expose:t}){const i=Sk({mobile:0,tablet:640,laptop:1024,desktop:1280}).smallerOrEqual("tablet"),o=e,u=Qt(),l=Qt(!1),s=Qt(null),f=Qt(null);sB(u,()=>b());function y(x){l.value=!0;const M=u.value;if(M)if((!s.value||!f.value)&&(M.style.visibility="hidden",M.style.display="block",s.value=M.offsetWidth,f.value=M.offsetHeight,M.removeAttribute("style")),M.style.position="fixed",M.style.zIndex=o.zIndex+"",!i.value)s.value+x.pageX>=window.innerWidth?M.style.left=x.pageX-s.value+10+"px":M.style.left=x.pageX-10+"px",f.value+x.pageY>=window.innerHeight?M.style.top=x.pageY-f.value+10+"px":M.style.top=x.pageY-10+"px";else{M.style.top="0px",M.style.left="0px",M.style.right="0px",M.style.bottom="0px",M.style.background="#00000085";const A=M.childNodes[0];A.style.width="100%",A.style.position="absolute",A.style.top="50%",A.style.left="50%",A.style.transform="translate(-50%, -50%)",A.style.padding="40px",A.style.height="100%",A.style.overflow="auto"}}function b(){s.value=null,f.value=null,l.value=!1;const x=u.value;x&&(x.style.display="none")}return t({open:y,close:b}),(x,M)=>(Ae(),st("div",{class:"menu-container",ref_key:"target",ref:u},[Le("div",null,[In(x.$slots,"default",{},void 0,!0)]),l.value&&se(i)?(Ae(),st("div",{key:0,onClick:M[0]||(M[0]=A=>b())},M[1]||(M[1]=[Le("button",{type:"button",class:"btn-close"},"Close",-1)]))):an("",!0)],512))}}),oS=Cn(OJ,[["__scopeId","data-v-4881fa35"]]),zJ={key:0,class:"toggle-buttons-container"},FJ=["title"],BJ=Dn({__name:"ButtonToggleAllShow",props:{items:{}},setup(e,{expose:t}){const n=Qt(!0),i=Qt([!0,!0]);t({SvgIcon:An});const o=e,{callMap:u,mapId:l}=Nr(o),s=b=>{n.value=b;const x=n.value;u(M=>{o.items.forEach(A=>{A.show=x,cd(A.getParent(),k=>xu(k),[k=>{k.toggleShow(M,x)}])})})};function f(b,x){i.value[b]=x;const A=gL(l.value)[b];o.items.forEach(k=>{k.shows==null&&(k.shows=[!0,!0]),k.shows[b]=x,cd(k.getParent(),L=>xu(L),[L=>{L.toggleShow(A,x)}])})}const y=Qt(!1);return ti(()=>{y.value=mL(l.value)}),(b,x)=>y.value?(Ae(),st("div",zJ,[Le("button",{class:ei(["layer-item__button",{_active:i.value[0]}]),onClick:x[0]||(x[0]=Rr(M=>f(0,!i.value[0]),["stop"]))},x[3]||(x[3]=[Le("span",null,"#1",-1)]),2),Le("button",{class:ei(["layer-item__button",{_active:i.value[1]}]),onClick:x[1]||(x[1]=Rr(M=>f(1,!i.value[1]),["stop"]))},x[4]||(x[4]=[Le("span",null,"#2",-1)]),2)])):(Ae(),st("button",{key:1,class:"layer-item__button",onClick:x[2]||(x[2]=Rr(M=>s(!n.value),["stop"])),title:n.value?"Hiện toàn bộ các lớp":"Ẩn toàn bộ các lớp"},[He(se(An),{size:"16",type:"mdi",path:n.value?se(TM):se(EM)},null,8,["path"])],8,FJ))}});var b4={exports:{}};const NJ=D_(CO);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function vP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,i)}return n}function oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(n),!0).forEach(function(i){VJ(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vP(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ix(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ix=function(t){return typeof t}:ix=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function VJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Au(){return Au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Au.apply(this,arguments)}function jJ(e,t){if(e==null)return{};var n={},i=Object.keys(e),o,u;for(u=0;u<i.length;u++)o=i[u],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function UJ(e,t){if(e==null)return{};var n=jJ(e,t),i,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)i=u[o],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function $J(e){return HJ(e)||GJ(e)||ZJ(e)||WJ()}function HJ(e){if(Array.isArray(e))return wI(e)}function GJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZJ(e,t){if(e){if(typeof e=="string")return wI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wI(e,t)}}function wI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function WJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qJ="1.14.0";function id(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var md=id(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),W_=id(/Edge/i),_P=id(/firefox/i),Z0=id(/safari/i)&&!id(/chrome/i)&&!id(/android/i),x4=id(/iP(ad|od|hone)/i),KJ=id(/chrome/i)&&id(/android/i),A4={capture:!1,passive:!1};function zr(e,t,n){e.addEventListener(t,n,!md&&A4)}function kr(e,t,n){e.removeEventListener(t,n,!md&&A4)}function Vx(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function YJ(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function nc(e,t,n,i){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Vx(e,t):Vx(e,t))||i&&e===n)return e;if(e===n)break}while(e=YJ(e))}return null}var bP=/\s+/g;function ls(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(bP," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(bP," ")}}function Un(e,t,n){var i=e&&e.style;if(i){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=n+(typeof n=="string"?"":"px")}}function Am(e,t){var n="";if(typeof e=="string")n=e;else do{var i=Un(e,"transform");i&&i!=="none"&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function w4(e,t,n){if(e){var i=e.getElementsByTagName(t),o=0,u=i.length;if(n)for(;o<u;o++)n(i[o],o);return i}return[]}function eh(){var e=document.scrollingElement;return e||document.documentElement}function Xi(e,t,n,i,o){if(!(!e.getBoundingClientRect&&e!==window)){var u,l,s,f,y,b,x;if(e!==window&&e.parentNode&&e!==eh()?(u=e.getBoundingClientRect(),l=u.top,s=u.left,f=u.bottom,y=u.right,b=u.height,x=u.width):(l=0,s=0,f=window.innerHeight,y=window.innerWidth,b=window.innerHeight,x=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!md))do if(o&&o.getBoundingClientRect&&(Un(o,"transform")!=="none"||n&&Un(o,"position")!=="static")){var M=o.getBoundingClientRect();l-=M.top+parseInt(Un(o,"border-top-width")),s-=M.left+parseInt(Un(o,"border-left-width")),f=l+u.height,y=s+u.width;break}while(o=o.parentNode);if(i&&e!==window){var A=Am(o||e),k=A&&A.a,L=A&&A.d;A&&(l/=L,s/=k,x/=k,b/=L,f=l+b,y=s+x)}return{top:l,left:s,bottom:f,right:y,width:x,height:b}}}function xP(e,t,n){for(var i=kf(e,!0),o=Xi(e)[t];i;){var u=Xi(i)[n],l=void 0;if(l=o>=u,!l)return i;if(i===eh())break;i=kf(i,!1)}return!1}function zy(e,t,n,i){for(var o=0,u=0,l=e.children;u<l.length;){if(l[u].style.display!=="none"&&l[u]!==ir.ghost&&(i||l[u]!==ir.dragged)&&nc(l[u],n.draggable,e,!1)){if(o===t)return l[u];o++}u++}return null}function lS(e,t){for(var n=e.lastElementChild;n&&(n===ir.ghost||Un(n,"display")==="none"||t&&!Vx(n,t));)n=n.previousElementSibling;return n||null}function ws(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ir.clone&&(!t||Vx(e,t))&&n++;return n}function AP(e){var t=0,n=0,i=eh();if(e)do{var o=Am(e),u=o.a,l=o.d;t+=e.scrollLeft*u,n+=e.scrollTop*l}while(e!==i&&(e=e.parentNode));return[t,n]}function XJ(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n)}return-1}function kf(e,t){if(!e||!e.getBoundingClientRect)return eh();var n=e,i=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=Un(n);if(n.clientWidth<n.scrollWidth&&(o.overflowX=="auto"||o.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(o.overflowY=="auto"||o.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return eh();if(i||t)return n;i=!0}}while(n=n.parentNode);return eh()}function QJ(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function hC(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var W0;function C4(e,t){return function(){if(!W0){var n=arguments,i=this;n.length===1?e.call(i,n[0]):e.apply(i,n),W0=setTimeout(function(){W0=void 0},t)}}}function JJ(){clearTimeout(W0),W0=void 0}function I4(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function uS(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function wP(e,t){Un(e,"position","absolute"),Un(e,"top",t.top),Un(e,"left",t.left),Un(e,"width",t.width),Un(e,"height",t.height)}function dC(e){Un(e,"position",""),Un(e,"top",""),Un(e,"left",""),Un(e,"width",""),Un(e,"height","")}var Ya="Sortable"+new Date().getTime();function eee(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(o){if(!(Un(o,"display")==="none"||o===ir.ghost)){e.push({target:o,rect:Xi(o)});var u=oh({},e[e.length-1].rect);if(o.thisAnimationDuration){var l=Am(o,!0);l&&(u.top-=l.f,u.left-=l.e)}o.fromRect=u}})}},addAnimationState:function(i){e.push(i)},removeAnimationState:function(i){e.splice(XJ(e,{target:i}),1)},animateAll:function(i){var o=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var u=!1,l=0;e.forEach(function(s){var f=0,y=s.target,b=y.fromRect,x=Xi(y),M=y.prevFromRect,A=y.prevToRect,k=s.rect,L=Am(y,!0);L&&(x.top-=L.f,x.left-=L.e),y.toRect=x,y.thisAnimationDuration&&hC(M,x)&&!hC(b,x)&&(k.top-x.top)/(k.left-x.left)===(b.top-x.top)/(b.left-x.left)&&(f=nee(k,M,A,o.options)),hC(x,b)||(y.prevFromRect=b,y.prevToRect=x,f||(f=o.options.animation),o.animate(y,k,x,f)),f&&(u=!0,l=Math.max(l,f),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0,y.prevFromRect=null,y.fromRect=null,y.prevToRect=null,y.thisAnimationDuration=null},f),y.thisAnimationDuration=f)}),clearTimeout(t),u?t=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),e=[]},animate:function(i,o,u,l){if(l){Un(i,"transition",""),Un(i,"transform","");var s=Am(this.el),f=s&&s.a,y=s&&s.d,b=(o.left-u.left)/(f||1),x=(o.top-u.top)/(y||1);i.animatingX=!!b,i.animatingY=!!x,Un(i,"transform","translate3d("+b+"px,"+x+"px,0)"),this.forRepaintDummy=tee(i),Un(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),Un(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Un(i,"transition",""),Un(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function tee(e){return e.offsetWidth}function nee(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}var $g=[],fC={initializeByDefault:!0},q_={mount:function(t){for(var n in fC)fC.hasOwnProperty(n)&&!(n in t)&&(t[n]=fC[n]);$g.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),$g.push(t)},pluginEvent:function(t,n,i){var o=this;this.eventCanceled=!1,i.cancel=function(){o.eventCanceled=!0};var u=t+"Global";$g.forEach(function(l){n[l.pluginName]&&(n[l.pluginName][u]&&n[l.pluginName][u](oh({sortable:n},i)),n.options[l.pluginName]&&n[l.pluginName][t]&&n[l.pluginName][t](oh({sortable:n},i)))})},initializePlugins:function(t,n,i,o){$g.forEach(function(s){var f=s.pluginName;if(!(!t.options[f]&&!s.initializeByDefault)){var y=new s(t,n,t.options);y.sortable=t,y.options=t.options,t[f]=y,Au(i,y.defaults)}});for(var u in t.options)if(t.options.hasOwnProperty(u)){var l=this.modifyOption(t,u,t.options[u]);typeof l<"u"&&(t.options[u]=l)}},getEventProperties:function(t,n){var i={};return $g.forEach(function(o){typeof o.eventProperties=="function"&&Au(i,o.eventProperties.call(n[o.pluginName],t))}),i},modifyOption:function(t,n,i){var o;return $g.forEach(function(u){t[u.pluginName]&&u.optionListeners&&typeof u.optionListeners[n]=="function"&&(o=u.optionListeners[n].call(t[u.pluginName],i))}),o}};function S0(e){var t=e.sortable,n=e.rootEl,i=e.name,o=e.targetEl,u=e.cloneEl,l=e.toEl,s=e.fromEl,f=e.oldIndex,y=e.newIndex,b=e.oldDraggableIndex,x=e.newDraggableIndex,M=e.originalEvent,A=e.putSortable,k=e.extraEventProperties;if(t=t||n&&n[Ya],!!t){var L,F=t.options,V="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!md&&!W_?L=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(i,!0,!0)),L.to=l||n,L.from=s||n,L.item=o||n,L.clone=u,L.oldIndex=f,L.newIndex=y,L.oldDraggableIndex=b,L.newDraggableIndex=x,L.originalEvent=M,L.pullMode=A?A.lastPutMode:void 0;var O=oh(oh({},k),q_.getEventProperties(i,t));for(var N in O)L[N]=O[N];n&&n.dispatchEvent(L),F[V]&&F[V].call(t,L)}}var ree=["evt"],Yo=function(t,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.evt,u=UJ(i,ree);q_.pluginEvent.bind(ir)(t,n,oh({dragEl:bn,parentEl:xs,ghostEl:vr,rootEl:Yi,nextEl:um,lastDownEl:sx,cloneEl:As,cloneHidden:Ef,dragStarted:E0,putSortable:ka,activeSortable:ir.active,originalEvent:o,oldIndex:hy,oldDraggableIndex:q0,newIndex:Sl,newDraggableIndex:Sf,hideGhostForTarget:T4,unhideGhostForTarget:P4,cloneNowHidden:function(){Ef=!0},cloneNowShown:function(){Ef=!1},dispatchSortableEvent:function(s){Ao({sortable:n,name:s,originalEvent:o})}},u))};function Ao(e){S0(oh({putSortable:ka,cloneEl:As,targetEl:bn,rootEl:Yi,oldIndex:hy,oldDraggableIndex:q0,newIndex:Sl,newDraggableIndex:Sf},e))}var bn,xs,vr,Yi,um,sx,As,Ef,hy,Sl,q0,Sf,kb,ka,Jg=!1,jx=!1,Ux=[],sm,Ju,pC,mC,CP,IP,E0,Hg,K0,Y0=!1,Lb=!1,ax,Ga,gC=[],CI=!1,$x=[],KA=typeof document<"u",Db=x4,MP=W_||md?"cssFloat":"float",iee=KA&&!KJ&&!x4&&"draggable"in document.createElement("div"),M4=function(){if(KA){if(md)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),S4=function(t,n){var i=Un(t),o=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),u=zy(t,0,n),l=zy(t,1,n),s=u&&Un(u),f=l&&Un(l),y=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+Xi(u).width,b=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Xi(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&s.float&&s.float!=="none"){var x=s.float==="left"?"left":"right";return l&&(f.clear==="both"||f.clear===x)?"vertical":"horizontal"}return u&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||y>=o&&i[MP]==="none"||l&&i[MP]==="none"&&y+b>o)?"vertical":"horizontal"},see=function(t,n,i){var o=i?t.left:t.top,u=i?t.right:t.bottom,l=i?t.width:t.height,s=i?n.left:n.top,f=i?n.right:n.bottom,y=i?n.width:n.height;return o===s||u===f||o+l/2===s+y/2},aee=function(t,n){var i;return Ux.some(function(o){var u=o[Ya].options.emptyInsertThreshold;if(!(!u||lS(o))){var l=Xi(o),s=t>=l.left-u&&t<=l.right+u,f=n>=l.top-u&&n<=l.bottom+u;if(s&&f)return i=o}}),i},E4=function(t){function n(u,l){return function(s,f,y,b){var x=s.options.group.name&&f.options.group.name&&s.options.group.name===f.options.group.name;if(u==null&&(l||x))return!0;if(u==null||u===!1)return!1;if(l&&u==="clone")return u;if(typeof u=="function")return n(u(s,f,y,b),l)(s,f,y,b);var M=(l?s:f).options.group.name;return u===!0||typeof u=="string"&&u===M||u.join&&u.indexOf(M)>-1}}var i={},o=t.group;(!o||ix(o)!="object")&&(o={name:o}),i.name=o.name,i.checkPull=n(o.pull,!0),i.checkPut=n(o.put),i.revertClone=o.revertClone,t.group=i},T4=function(){!M4&&vr&&Un(vr,"display","none")},P4=function(){!M4&&vr&&Un(vr,"display","")};KA&&document.addEventListener("click",function(e){if(jx)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),jx=!1,!1},!0);var am=function(t){if(bn){t=t.touches?t.touches[0]:t;var n=aee(t.clientX,t.clientY);if(n){var i={};for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);i.target=i.rootEl=n,i.preventDefault=void 0,i.stopPropagation=void 0,n[Ya]._onDragOver(i)}}},oee=function(t){bn&&bn.parentNode[Ya]._isOutsideThisEl(t.target)};function ir(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Au({},t),e[Ya]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return S4(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,s){l.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ir.supportPointer!==!1&&"PointerEvent"in window&&!Z0,emptyInsertThreshold:5};q_.initializePlugins(this,e,n);for(var i in n)!(i in t)&&(t[i]=n[i]);E4(t);for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this));this.nativeDraggable=t.forceFallback?!1:iee,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?zr(e,"pointerdown",this._onTapStart):(zr(e,"mousedown",this._onTapStart),zr(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(zr(e,"dragover",this),zr(e,"dragenter",this)),Ux.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Au(this,eee())}ir.prototype={constructor:ir,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Hg=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,bn):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,i=this.el,o=this.options,u=o.preventOnFilter,l=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(s||t).target,y=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,b=o.filter;if(mee(i),!bn&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||o.disabled)&&!y.isContentEditable&&!(!this.nativeDraggable&&Z0&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=nc(f,o.draggable,i,!1),!(f&&f.animated)&&sx!==f)){if(hy=ws(f),q0=ws(f,o.draggable),typeof b=="function"){if(b.call(this,t,f,this)){Ao({sortable:n,rootEl:y,name:"filter",targetEl:f,toEl:i,fromEl:i}),Yo("filter",n,{evt:t}),u&&t.cancelable&&t.preventDefault();return}}else if(b&&(b=b.split(",").some(function(x){if(x=nc(y,x.trim(),i,!1),x)return Ao({sortable:n,rootEl:x,name:"filter",targetEl:f,fromEl:i,toEl:i}),Yo("filter",n,{evt:t}),!0}),b)){u&&t.cancelable&&t.preventDefault();return}o.handle&&!nc(y,o.handle,i,!1)||this._prepareDragStart(t,s,f)}}},_prepareDragStart:function(t,n,i){var o=this,u=o.el,l=o.options,s=u.ownerDocument,f;if(i&&!bn&&i.parentNode===u){var y=Xi(i);if(Yi=u,bn=i,xs=bn.parentNode,um=bn.nextSibling,sx=i,kb=l.group,ir.dragged=bn,sm={target:bn,clientX:(n||t).clientX,clientY:(n||t).clientY},CP=sm.clientX-y.left,IP=sm.clientY-y.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,bn.style["will-change"]="all",f=function(){if(Yo("delayEnded",o,{evt:t}),ir.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!_P&&o.nativeDraggable&&(bn.draggable=!0),o._triggerDragStart(t,n),Ao({sortable:o,name:"choose",originalEvent:t}),ls(bn,l.chosenClass,!0)},l.ignore.split(",").forEach(function(b){w4(bn,b.trim(),yC)}),zr(s,"dragover",am),zr(s,"mousemove",am),zr(s,"touchmove",am),zr(s,"mouseup",o._onDrop),zr(s,"touchend",o._onDrop),zr(s,"touchcancel",o._onDrop),_P&&this.nativeDraggable&&(this.options.touchStartThreshold=4,bn.draggable=!0),Yo("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(W_||md))){if(ir.eventCanceled){this._onDrop();return}zr(s,"mouseup",o._disableDelayedDrag),zr(s,"touchend",o._disableDelayedDrag),zr(s,"touchcancel",o._disableDelayedDrag),zr(s,"mousemove",o._delayedDragTouchMoveHandler),zr(s,"touchmove",o._delayedDragTouchMoveHandler),l.supportPointer&&zr(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(f,l.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){bn&&yC(bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;kr(t,"mouseup",this._disableDelayedDrag),kr(t,"touchend",this._disableDelayedDrag),kr(t,"touchcancel",this._disableDelayedDrag),kr(t,"mousemove",this._delayedDragTouchMoveHandler),kr(t,"touchmove",this._delayedDragTouchMoveHandler),kr(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?zr(document,"pointermove",this._onTouchMove):n?zr(document,"touchmove",this._onTouchMove):zr(document,"mousemove",this._onTouchMove):(zr(bn,"dragend",this),zr(Yi,"dragstart",this._onDragStart));try{document.selection?ox(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Jg=!1,Yi&&bn){Yo("dragStarted",this,{evt:n}),this.nativeDraggable&&zr(document,"dragover",oee);var i=this.options;!t&&ls(bn,i.dragClass,!1),ls(bn,i.ghostClass,!0),ir.active=this,t&&this._appendGhost(),Ao({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ju){this._lastX=Ju.clientX,this._lastY=Ju.clientY,T4();for(var t=document.elementFromPoint(Ju.clientX,Ju.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ju.clientX,Ju.clientY),t!==n);)n=t;if(bn.parentNode[Ya]._isOutsideThisEl(t),n)do{if(n[Ya]){var i=void 0;if(i=n[Ya]._onDragOver({clientX:Ju.clientX,clientY:Ju.clientY,target:t,rootEl:n}),i&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);P4()}},_onTouchMove:function(t){if(sm){var n=this.options,i=n.fallbackTolerance,o=n.fallbackOffset,u=t.touches?t.touches[0]:t,l=vr&&Am(vr,!0),s=vr&&l&&l.a,f=vr&&l&&l.d,y=Db&&Ga&&AP(Ga),b=(u.clientX-sm.clientX+o.x)/(s||1)+(y?y[0]-gC[0]:0)/(s||1),x=(u.clientY-sm.clientY+o.y)/(f||1)+(y?y[1]-gC[1]:0)/(f||1);if(!ir.active&&!Jg){if(i&&Math.max(Math.abs(u.clientX-this._lastX),Math.abs(u.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(vr){l?(l.e+=b-(pC||0),l.f+=x-(mC||0)):l={a:1,b:0,c:0,d:1,e:b,f:x};var M="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");Un(vr,"webkitTransform",M),Un(vr,"mozTransform",M),Un(vr,"msTransform",M),Un(vr,"transform",M),pC=b,mC=x,Ju=u}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!vr){var t=this.options.fallbackOnBody?document.body:Yi,n=Xi(bn,!0,Db,!0,t),i=this.options;if(Db){for(Ga=t;Un(Ga,"position")==="static"&&Un(Ga,"transform")==="none"&&Ga!==document;)Ga=Ga.parentNode;Ga!==document.body&&Ga!==document.documentElement?(Ga===document&&(Ga=eh()),n.top+=Ga.scrollTop,n.left+=Ga.scrollLeft):Ga=eh(),gC=AP(Ga)}vr=bn.cloneNode(!0),ls(vr,i.ghostClass,!1),ls(vr,i.fallbackClass,!0),ls(vr,i.dragClass,!0),Un(vr,"transition",""),Un(vr,"transform",""),Un(vr,"box-sizing","border-box"),Un(vr,"margin",0),Un(vr,"top",n.top),Un(vr,"left",n.left),Un(vr,"width",n.width),Un(vr,"height",n.height),Un(vr,"opacity","0.8"),Un(vr,"position",Db?"absolute":"fixed"),Un(vr,"zIndex","100000"),Un(vr,"pointerEvents","none"),ir.ghost=vr,t.appendChild(vr),Un(vr,"transform-origin",CP/parseInt(vr.style.width)*100+"% "+IP/parseInt(vr.style.height)*100+"%")}},_onDragStart:function(t,n){var i=this,o=t.dataTransfer,u=i.options;if(Yo("dragStart",this,{evt:t}),ir.eventCanceled){this._onDrop();return}Yo("setupClone",this),ir.eventCanceled||(As=uS(bn),As.draggable=!1,As.style["will-change"]="",this._hideClone(),ls(As,this.options.chosenClass,!1),ir.clone=As),i.cloneId=ox(function(){Yo("clone",i),!ir.eventCanceled&&(i.options.removeCloneOnHide||Yi.insertBefore(As,bn),i._hideClone(),Ao({sortable:i,name:"clone"}))}),!n&&ls(bn,u.dragClass,!0),n?(jx=!0,i._loopId=setInterval(i._emulateDragOver,50)):(kr(document,"mouseup",i._onDrop),kr(document,"touchend",i._onDrop),kr(document,"touchcancel",i._onDrop),o&&(o.effectAllowed="move",u.setData&&u.setData.call(i,o,bn)),zr(document,"drop",i),Un(bn,"transform","translateZ(0)")),Jg=!0,i._dragStartId=ox(i._dragStarted.bind(i,n,t)),zr(document,"selectstart",i),E0=!0,Z0&&Un(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,i=t.target,o,u,l,s=this.options,f=s.group,y=ir.active,b=kb===f,x=s.sort,M=ka||y,A,k=this,L=!1;if(CI)return;function F(et,ot){Yo(et,k,oh({evt:t,isOwner:b,axis:A?"vertical":"horizontal",revert:l,dragRect:o,targetRect:u,canSort:x,fromSortable:M,target:i,completed:O,onMove:function(qe,Ue){return Rb(Yi,n,bn,o,qe,Xi(qe),t,Ue)},changed:N},ot))}function V(){F("dragOverAnimationCapture"),k.captureAnimationState(),k!==M&&M.captureAnimationState()}function O(et){return F("dragOverCompleted",{insertion:et}),et&&(b?y._hideClone():y._showClone(k),k!==M&&(ls(bn,ka?ka.options.ghostClass:y.options.ghostClass,!1),ls(bn,s.ghostClass,!0)),ka!==k&&k!==ir.active?ka=k:k===ir.active&&ka&&(ka=null),M===k&&(k._ignoreWhileAnimating=i),k.animateAll(function(){F("dragOverAnimationComplete"),k._ignoreWhileAnimating=null}),k!==M&&(M.animateAll(),M._ignoreWhileAnimating=null)),(i===bn&&!bn.animated||i===n&&!i.animated)&&(Hg=null),!s.dragoverBubble&&!t.rootEl&&i!==document&&(bn.parentNode[Ya]._isOutsideThisEl(t.target),!et&&am(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),L=!0}function N(){Sl=ws(bn),Sf=ws(bn,s.draggable),Ao({sortable:k,name:"change",toEl:n,newIndex:Sl,newDraggableIndex:Sf,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=nc(i,s.draggable,n,!0),F("dragOver"),ir.eventCanceled)return L;if(bn.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||k._ignoreWhileAnimating===i)return O(!1);if(jx=!1,y&&!s.disabled&&(b?x||(l=xs!==Yi):ka===this||(this.lastPutMode=kb.checkPull(this,y,bn,t))&&f.checkPut(this,y,bn,t))){if(A=this._getDirection(t,i)==="vertical",o=Xi(bn),F("dragOverValid"),ir.eventCanceled)return L;if(l)return xs=Yi,V(),this._hideClone(),F("revert"),ir.eventCanceled||(um?Yi.insertBefore(bn,um):Yi.appendChild(bn)),O(!0);var U=lS(n,s.draggable);if(!U||hee(t,A,this)&&!U.animated){if(U===bn)return O(!1);if(U&&n===t.target&&(i=U),i&&(u=Xi(i)),Rb(Yi,n,bn,o,i,u,t,!!i)!==!1)return V(),n.appendChild(bn),xs=n,N(),O(!0)}else if(U&&cee(t,A,this)){var W=zy(n,0,s,!0);if(W===bn)return O(!1);if(i=W,u=Xi(i),Rb(Yi,n,bn,o,i,u,t,!1)!==!1)return V(),n.insertBefore(bn,W),xs=n,N(),O(!0)}else if(i.parentNode===n){u=Xi(i);var ne=0,X,q=bn.parentNode!==n,G=!see(bn.animated&&bn.toRect||o,i.animated&&i.toRect||u,A),ee=A?"top":"left",ue=xP(i,"top","top")||xP(bn,"top","top"),Y=ue?ue.scrollTop:void 0;Hg!==i&&(X=u[ee],Y0=!1,Lb=!G&&s.invertSwap||q),ne=dee(t,i,u,A,G?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Lb,Hg===i);var ce;if(ne!==0){var K=ws(bn);do K-=ne,ce=xs.children[K];while(ce&&(Un(ce,"display")==="none"||ce===vr))}if(ne===0||ce===i)return O(!1);Hg=i,K0=ne;var Se=i.nextElementSibling,Ve=!1;Ve=ne===1;var Ne=Rb(Yi,n,bn,o,i,u,t,Ve);if(Ne!==!1)return(Ne===1||Ne===-1)&&(Ve=Ne===1),CI=!0,setTimeout(uee,30),V(),Ve&&!Se?n.appendChild(bn):i.parentNode.insertBefore(bn,Ve?Se:i),ue&&I4(ue,0,Y-ue.scrollTop),xs=bn.parentNode,X!==void 0&&!Lb&&(ax=Math.abs(X-Xi(i)[ee])),N(),O(!0)}if(n.contains(bn))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){kr(document,"mousemove",this._onTouchMove),kr(document,"touchmove",this._onTouchMove),kr(document,"pointermove",this._onTouchMove),kr(document,"dragover",am),kr(document,"mousemove",am),kr(document,"touchmove",am)},_offUpEvents:function(){var t=this.el.ownerDocument;kr(t,"mouseup",this._onDrop),kr(t,"touchend",this._onDrop),kr(t,"pointerup",this._onDrop),kr(t,"touchcancel",this._onDrop),kr(document,"selectstart",this)},_onDrop:function(t){var n=this.el,i=this.options;if(Sl=ws(bn),Sf=ws(bn,i.draggable),Yo("drop",this,{evt:t}),xs=bn&&bn.parentNode,Sl=ws(bn),Sf=ws(bn,i.draggable),ir.eventCanceled){this._nulling();return}Jg=!1,Lb=!1,Y0=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),II(this.cloneId),II(this._dragStartId),this.nativeDraggable&&(kr(document,"drop",this),kr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Z0&&Un(document.body,"user-select",""),Un(bn,"transform",""),t&&(E0&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),vr&&vr.parentNode&&vr.parentNode.removeChild(vr),(Yi===xs||ka&&ka.lastPutMode!=="clone")&&As&&As.parentNode&&As.parentNode.removeChild(As),bn&&(this.nativeDraggable&&kr(bn,"dragend",this),yC(bn),bn.style["will-change"]="",E0&&!Jg&&ls(bn,ka?ka.options.ghostClass:this.options.ghostClass,!1),ls(bn,this.options.chosenClass,!1),Ao({sortable:this,name:"unchoose",toEl:xs,newIndex:null,newDraggableIndex:null,originalEvent:t}),Yi!==xs?(Sl>=0&&(Ao({rootEl:xs,name:"add",toEl:xs,fromEl:Yi,originalEvent:t}),Ao({sortable:this,name:"remove",toEl:xs,originalEvent:t}),Ao({rootEl:xs,name:"sort",toEl:xs,fromEl:Yi,originalEvent:t}),Ao({sortable:this,name:"sort",toEl:xs,originalEvent:t})),ka&&ka.save()):Sl!==hy&&Sl>=0&&(Ao({sortable:this,name:"update",toEl:xs,originalEvent:t}),Ao({sortable:this,name:"sort",toEl:xs,originalEvent:t})),ir.active&&((Sl==null||Sl===-1)&&(Sl=hy,Sf=q0),Ao({sortable:this,name:"end",toEl:xs,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Yo("nulling",this),Yi=bn=xs=vr=um=As=sx=Ef=sm=Ju=E0=Sl=Sf=hy=q0=Hg=K0=ka=kb=ir.dragged=ir.ghost=ir.clone=ir.active=null,$x.forEach(function(t){t.checked=!0}),$x.length=pC=mC=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":bn&&(this._onDragOver(t),lee(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,i=this.el.children,o=0,u=i.length,l=this.options;o<u;o++)n=i[o],nc(n,l.draggable,this.el,!1)&&t.push(n.getAttribute(l.dataIdAttr)||pee(n));return t},sort:function(t,n){var i={},o=this.el;this.toArray().forEach(function(u,l){var s=o.children[l];nc(s,this.options.draggable,o,!1)&&(i[u]=s)},this),n&&this.captureAnimationState(),t.forEach(function(u){i[u]&&(o.removeChild(i[u]),o.appendChild(i[u]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return nc(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var i=this.options;if(n===void 0)return i[t];var o=q_.modifyOption(this,t,n);typeof o<"u"?i[t]=o:i[t]=n,t==="group"&&E4(i)},destroy:function(){Yo("destroy",this);var t=this.el;t[Ya]=null,kr(t,"mousedown",this._onTapStart),kr(t,"touchstart",this._onTapStart),kr(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(kr(t,"dragover",this),kr(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ux.splice(Ux.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Ef){if(Yo("hideClone",this),ir.eventCanceled)return;Un(As,"display","none"),this.options.removeCloneOnHide&&As.parentNode&&As.parentNode.removeChild(As),Ef=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Ef){if(Yo("showClone",this),ir.eventCanceled)return;bn.parentNode==Yi&&!this.options.group.revertClone?Yi.insertBefore(As,bn):um?Yi.insertBefore(As,um):Yi.appendChild(As),this.options.group.revertClone&&this.animate(bn,As),Un(As,"display",""),Ef=!1}}};function lee(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Rb(e,t,n,i,o,u,l,s){var f,y=e[Ya],b=y.options.onMove,x;return window.CustomEvent&&!md&&!W_?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=e,f.dragged=n,f.draggedRect=i,f.related=o||t,f.relatedRect=u||Xi(t),f.willInsertAfter=s,f.originalEvent=l,e.dispatchEvent(f),b&&(x=b.call(y,f,l)),x}function yC(e){e.draggable=!1}function uee(){CI=!1}function cee(e,t,n){var i=Xi(zy(n.el,0,n.options,!0)),o=10;return t?e.clientX<i.left-o||e.clientY<i.top&&e.clientX<i.right:e.clientY<i.top-o||e.clientY<i.bottom&&e.clientX<i.left}function hee(e,t,n){var i=Xi(lS(n.el,n.options.draggable)),o=10;return t?e.clientX>i.right+o||e.clientX<=i.right&&e.clientY>i.bottom&&e.clientX>=i.left:e.clientX>i.right&&e.clientY>i.top||e.clientX<=i.right&&e.clientY>i.bottom+o}function dee(e,t,n,i,o,u,l,s){var f=i?e.clientY:e.clientX,y=i?n.height:n.width,b=i?n.top:n.left,x=i?n.bottom:n.right,M=!1;if(!l){if(s&&ax<y*o){if(!Y0&&(K0===1?f>b+y*u/2:f<x-y*u/2)&&(Y0=!0),Y0)M=!0;else if(K0===1?f<b+ax:f>x-ax)return-K0}else if(f>b+y*(1-o)/2&&f<x-y*(1-o)/2)return fee(t)}return M=M||l,M&&(f<b+y*u/2||f>x-y*u/2)?f>b+y/2?1:-1:0}function fee(e){return ws(bn)<ws(e)?1:-1}function pee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function mee(e){$x.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&$x.push(i)}}function ox(e){return setTimeout(e,0)}function II(e){return clearTimeout(e)}KA&&zr(document,"touchmove",function(e){(ir.active||Jg)&&e.cancelable&&e.preventDefault()});ir.utils={on:zr,off:kr,css:Un,find:w4,is:function(t,n){return!!nc(t,n,t,!1)},extend:QJ,throttle:C4,closest:nc,toggleClass:ls,clone:uS,index:ws,nextTick:ox,cancelNextTick:II,detectDirection:S4,getChild:zy};ir.get=function(e){return e[Ya]};ir.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ir.utils=oh(oh({},ir.utils),i.utils)),q_.mount(i)})};ir.create=function(e,t){return new ir(e,t)};ir.version=qJ;var Ns=[],T0,MI,SI=!1,vC,_C,Hx,P0;function gee(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var i=n.originalEvent;this.sortable.nativeDraggable?zr(document,"dragover",this._handleAutoScroll):this.options.supportPointer?zr(document,"pointermove",this._handleFallbackAutoScroll):i.touches?zr(document,"touchmove",this._handleFallbackAutoScroll):zr(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var i=n.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?kr(document,"dragover",this._handleAutoScroll):(kr(document,"pointermove",this._handleFallbackAutoScroll),kr(document,"touchmove",this._handleFallbackAutoScroll),kr(document,"mousemove",this._handleFallbackAutoScroll)),SP(),lx(),JJ()},nulling:function(){Hx=MI=T0=SI=P0=vC=_C=null,Ns.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,i){var o=this,u=(n.touches?n.touches[0]:n).clientX,l=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(u,l);if(Hx=n,i||this.options.forceAutoScrollFallback||W_||md||Z0){bC(n,this.options,s,i);var f=kf(s,!0);SI&&(!P0||u!==vC||l!==_C)&&(P0&&SP(),P0=setInterval(function(){var y=kf(document.elementFromPoint(u,l),!0);y!==f&&(f=y,lx()),bC(n,o.options,y,i)},10),vC=u,_C=l)}else{if(!this.options.bubbleScroll||kf(s,!0)===eh()){lx();return}bC(n,this.options,kf(s,!1),!1)}}},Au(e,{pluginName:"scroll",initializeByDefault:!0})}function lx(){Ns.forEach(function(e){clearInterval(e.pid)}),Ns=[]}function SP(){clearInterval(P0)}var bC=C4(function(e,t,n,i){if(t.scroll){var o=(e.touches?e.touches[0]:e).clientX,u=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,f=eh(),y=!1,b;MI!==n&&(MI=n,lx(),T0=t.scroll,b=t.scrollFn,T0===!0&&(T0=kf(n,!0)));var x=0,M=T0;do{var A=M,k=Xi(A),L=k.top,F=k.bottom,V=k.left,O=k.right,N=k.width,U=k.height,W=void 0,ne=void 0,X=A.scrollWidth,q=A.scrollHeight,G=Un(A),ee=A.scrollLeft,ue=A.scrollTop;A===f?(W=N<X&&(G.overflowX==="auto"||G.overflowX==="scroll"||G.overflowX==="visible"),ne=U<q&&(G.overflowY==="auto"||G.overflowY==="scroll"||G.overflowY==="visible")):(W=N<X&&(G.overflowX==="auto"||G.overflowX==="scroll"),ne=U<q&&(G.overflowY==="auto"||G.overflowY==="scroll"));var Y=W&&(Math.abs(O-o)<=l&&ee+N<X)-(Math.abs(V-o)<=l&&!!ee),ce=ne&&(Math.abs(F-u)<=l&&ue+U<q)-(Math.abs(L-u)<=l&&!!ue);if(!Ns[x])for(var K=0;K<=x;K++)Ns[K]||(Ns[K]={});(Ns[x].vx!=Y||Ns[x].vy!=ce||Ns[x].el!==A)&&(Ns[x].el=A,Ns[x].vx=Y,Ns[x].vy=ce,clearInterval(Ns[x].pid),(Y!=0||ce!=0)&&(y=!0,Ns[x].pid=setInterval((function(){i&&this.layer===0&&ir.active._onTouchMove(Hx);var Se=Ns[this.layer].vy?Ns[this.layer].vy*s:0,Ve=Ns[this.layer].vx?Ns[this.layer].vx*s:0;typeof b=="function"&&b.call(ir.dragged.parentNode[Ya],Ve,Se,e,Hx,Ns[this.layer].el)!=="continue"||I4(Ns[this.layer].el,Ve,Se)}).bind({layer:x}),24))),x++}while(t.bubbleScroll&&M!==f&&(M=kf(M,!1)));SI=y}},30),k4=function(t){var n=t.originalEvent,i=t.putSortable,o=t.dragEl,u=t.activeSortable,l=t.dispatchSortableEvent,s=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(n){var y=i||u;s();var b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,x=document.elementFromPoint(b.clientX,b.clientY);f(),y&&!y.el.contains(x)&&(l("spill"),this.onSpill({dragEl:o,putSortable:i}))}};function cS(){}cS.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var o=zy(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(n,o):this.sortable.el.appendChild(n),this.sortable.animateAll(),i&&i.animateAll()},drop:k4};Au(cS,{pluginName:"revertOnSpill"});function hS(){}hS.prototype={onSpill:function(t){var n=t.dragEl,i=t.putSortable,o=i||this.sortable;o.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),o.animateAll()},drop:k4};Au(hS,{pluginName:"removeOnSpill"});var ou;function yee(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(n){var i=n.dragEl;ou=i},dragOverValid:function(n){var i=n.completed,o=n.target,u=n.onMove,l=n.activeSortable,s=n.changed,f=n.cancel;if(l.options.swap){var y=this.sortable.el,b=this.options;if(o&&o!==y){var x=ou;u(o)!==!1?(ls(o,b.swapClass,!0),ou=o):ou=null,x&&x!==ou&&ls(x,b.swapClass,!1)}s(),i(!0),f()}},drop:function(n){var i=n.activeSortable,o=n.putSortable,u=n.dragEl,l=o||this.sortable,s=this.options;ou&&ls(ou,s.swapClass,!1),ou&&(s.swap||o&&o.options.swap)&&u!==ou&&(l.captureAnimationState(),l!==i&&i.captureAnimationState(),vee(u,ou),l.animateAll(),l!==i&&i.animateAll())},nulling:function(){ou=null}},Au(e,{pluginName:"swap",eventProperties:function(){return{swapItem:ou}}})}function vee(e,t){var n=e.parentNode,i=t.parentNode,o,u;!n||!i||n.isEqualNode(t)||i.isEqualNode(e)||(o=ws(e),u=ws(t),n.isEqualNode(i)&&o<u&&u++,n.insertBefore(t,n.children[o]),i.insertBefore(e,i.children[u]))}var dr=[],Ml=[],m0,ec,g0=!1,Xo=!1,Gg=!1,Di,y0,Ob;function _ee(){function e(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.supportPointer?zr(document,"pointerup",this._deselectMultiDrag):(zr(document,"mouseup",this._deselectMultiDrag),zr(document,"touchend",this._deselectMultiDrag)),zr(document,"keydown",this._checkKeyDown),zr(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(o,u){var l="";dr.length&&ec===t?dr.forEach(function(s,f){l+=(f?", ":"")+s.textContent}):l=u.textContent,o.setData("Text",l)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var i=n.dragEl;Di=i},delayEnded:function(){this.isMultiDrag=~dr.indexOf(Di)},setupClone:function(n){var i=n.sortable,o=n.cancel;if(this.isMultiDrag){for(var u=0;u<dr.length;u++)Ml.push(uS(dr[u])),Ml[u].sortableIndex=dr[u].sortableIndex,Ml[u].draggable=!1,Ml[u].style["will-change"]="",ls(Ml[u],this.options.selectedClass,!1),dr[u]===Di&&ls(Ml[u],this.options.chosenClass,!1);i._hideClone(),o()}},clone:function(n){var i=n.sortable,o=n.rootEl,u=n.dispatchSortableEvent,l=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||dr.length&&ec===i&&(EP(!0,o),u("clone"),l()))},showClone:function(n){var i=n.cloneNowShown,o=n.rootEl,u=n.cancel;this.isMultiDrag&&(EP(!1,o),Ml.forEach(function(l){Un(l,"display","")}),i(),Ob=!1,u())},hideClone:function(n){var i=this;n.sortable;var o=n.cloneNowHidden,u=n.cancel;this.isMultiDrag&&(Ml.forEach(function(l){Un(l,"display","none"),i.options.removeCloneOnHide&&l.parentNode&&l.parentNode.removeChild(l)}),o(),Ob=!0,u())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&ec&&ec.multiDrag._deselectMultiDrag(),dr.forEach(function(i){i.sortableIndex=ws(i)}),dr=dr.sort(function(i,o){return i.sortableIndex-o.sortableIndex}),Gg=!0},dragStarted:function(n){var i=this,o=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(o.captureAnimationState(),this.options.animation)){dr.forEach(function(l){l!==Di&&Un(l,"position","absolute")});var u=Xi(Di,!1,!0,!0);dr.forEach(function(l){l!==Di&&wP(l,u)}),Xo=!0,g0=!0}o.animateAll(function(){Xo=!1,g0=!1,i.options.animation&&dr.forEach(function(l){dC(l)}),i.options.sort&&zb()})}},dragOver:function(n){var i=n.target,o=n.completed,u=n.cancel;Xo&&~dr.indexOf(i)&&(o(!1),u())},revert:function(n){var i=n.fromSortable,o=n.rootEl,u=n.sortable,l=n.dragRect;dr.length>1&&(dr.forEach(function(s){u.addAnimationState({target:s,rect:Xo?Xi(s):l}),dC(s),s.fromRect=l,i.removeAnimationState(s)}),Xo=!1,bee(!this.options.removeCloneOnHide,o))},dragOverCompleted:function(n){var i=n.sortable,o=n.isOwner,u=n.insertion,l=n.activeSortable,s=n.parentEl,f=n.putSortable,y=this.options;if(u){if(o&&l._hideClone(),g0=!1,y.animation&&dr.length>1&&(Xo||!o&&!l.options.sort&&!f)){var b=Xi(Di,!1,!0,!0);dr.forEach(function(M){M!==Di&&(wP(M,b),s.appendChild(M))}),Xo=!0}if(!o)if(Xo||zb(),dr.length>1){var x=Ob;l._showClone(i),l.options.animation&&!Ob&&x&&Ml.forEach(function(M){l.addAnimationState({target:M,rect:y0}),M.fromRect=y0,M.thisAnimationDuration=null})}else l._showClone(i)}},dragOverAnimationCapture:function(n){var i=n.dragRect,o=n.isOwner,u=n.activeSortable;if(dr.forEach(function(s){s.thisAnimationDuration=null}),u.options.animation&&!o&&u.multiDrag.isMultiDrag){y0=Au({},i);var l=Am(Di,!0);y0.top-=l.f,y0.left-=l.e}},dragOverAnimationComplete:function(){Xo&&(Xo=!1,zb())},drop:function(n){var i=n.originalEvent,o=n.rootEl,u=n.parentEl,l=n.sortable,s=n.dispatchSortableEvent,f=n.oldIndex,y=n.putSortable,b=y||this.sortable;if(i){var x=this.options,M=u.children;if(!Gg)if(x.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),ls(Di,x.selectedClass,!~dr.indexOf(Di)),~dr.indexOf(Di))dr.splice(dr.indexOf(Di),1),m0=null,S0({sortable:l,rootEl:o,name:"deselect",targetEl:Di});else{if(dr.push(Di),S0({sortable:l,rootEl:o,name:"select",targetEl:Di}),i.shiftKey&&m0&&l.el.contains(m0)){var A=ws(m0),k=ws(Di);if(~A&&~k&&A!==k){var L,F;for(k>A?(F=A,L=k):(F=k,L=A+1);F<L;F++)~dr.indexOf(M[F])||(ls(M[F],x.selectedClass,!0),dr.push(M[F]),S0({sortable:l,rootEl:o,name:"select",targetEl:M[F]}))}}else m0=Di;ec=b}if(Gg&&this.isMultiDrag){if(Xo=!1,(u[Ya].options.sort||u!==o)&&dr.length>1){var V=Xi(Di),O=ws(Di,":not(."+this.options.selectedClass+")");if(!g0&&x.animation&&(Di.thisAnimationDuration=null),b.captureAnimationState(),!g0&&(x.animation&&(Di.fromRect=V,dr.forEach(function(U){if(U.thisAnimationDuration=null,U!==Di){var W=Xo?Xi(U):V;U.fromRect=W,b.addAnimationState({target:U,rect:W})}})),zb(),dr.forEach(function(U){M[O]?u.insertBefore(U,M[O]):u.appendChild(U),O++}),f===ws(Di))){var N=!1;dr.forEach(function(U){if(U.sortableIndex!==ws(U)){N=!0;return}}),N&&s("update")}dr.forEach(function(U){dC(U)}),b.animateAll()}ec=b}(o===u||y&&y.lastPutMode!=="clone")&&Ml.forEach(function(U){U.parentNode&&U.parentNode.removeChild(U)})}},nullingGlobal:function(){this.isMultiDrag=Gg=!1,Ml.length=0},destroyGlobal:function(){this._deselectMultiDrag(),kr(document,"pointerup",this._deselectMultiDrag),kr(document,"mouseup",this._deselectMultiDrag),kr(document,"touchend",this._deselectMultiDrag),kr(document,"keydown",this._checkKeyDown),kr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Gg<"u"&&Gg)&&ec===this.sortable&&!(n&&nc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;dr.length;){var i=dr[0];ls(i,this.options.selectedClass,!1),dr.shift(),S0({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:i})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Au(e,{pluginName:"multiDrag",utils:{select:function(n){var i=n.parentNode[Ya];!i||!i.options.multiDrag||~dr.indexOf(n)||(ec&&ec!==i&&(ec.multiDrag._deselectMultiDrag(),ec=i),ls(n,i.options.selectedClass,!0),dr.push(n))},deselect:function(n){var i=n.parentNode[Ya],o=dr.indexOf(n);!i||!i.options.multiDrag||!~o||(ls(n,i.options.selectedClass,!1),dr.splice(o,1))}},eventProperties:function(){var n=this,i=[],o=[];return dr.forEach(function(u){i.push({multiDragElement:u,index:u.sortableIndex});var l;Xo&&u!==Di?l=-1:Xo?l=ws(u,":not(."+n.options.selectedClass+")"):l=ws(u),o.push({multiDragElement:u,index:l})}),{items:$J(dr),clones:[].concat(Ml),oldIndicies:i,newIndicies:o}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function bee(e,t){dr.forEach(function(n,i){var o=t.children[n.sortableIndex+(e?Number(i):0)];o?t.insertBefore(n,o):t.appendChild(n)})}function EP(e,t){Ml.forEach(function(n,i){var o=t.children[n.sortableIndex+(e?Number(i):0)];o?t.insertBefore(n,o):t.appendChild(n)})}function zb(){dr.forEach(function(e){e!==Di&&e.parentNode&&e.parentNode.removeChild(e)})}ir.mount(new gee);ir.mount(hS,cS);const xee=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:_ee,Sortable:ir,Swap:yee,default:ir},Symbol.toStringTag,{value:"Module"})),Aee=D_(xee);(function(e,t){(function(i,o){e.exports=o(NJ,Aee)})(typeof self<"u"?self:ra,function(n,i){return function(o){var u={};function l(s){if(u[s])return u[s].exports;var f=u[s]={i:s,l:!1,exports:{}};return o[s].call(f.exports,f,f.exports,l),f.l=!0,f.exports}return l.m=o,l.c=u,l.d=function(s,f,y){l.o(s,f)||Object.defineProperty(s,f,{enumerable:!0,get:y})},l.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},l.t=function(s,f){if(f&1&&(s=l(s)),f&8||f&4&&typeof s=="object"&&s&&s.__esModule)return s;var y=Object.create(null);if(l.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:s}),f&2&&typeof s!="string")for(var b in s)l.d(y,b,(function(x){return s[x]}).bind(null,b));return y},l.n=function(s){var f=s&&s.__esModule?function(){return s.default}:function(){return s};return l.d(f,"a",f),f},l.o=function(s,f){return Object.prototype.hasOwnProperty.call(s,f)},l.p="",l(l.s="fb15")}({"00ee":function(o,u,l){var s=l("b622"),f=s("toStringTag"),y={};y[f]="z",o.exports=String(y)==="[object z]"},"0366":function(o,u,l){var s=l("1c0b");o.exports=function(f,y,b){if(s(f),y===void 0)return f;switch(b){case 0:return function(){return f.call(y)};case 1:return function(x){return f.call(y,x)};case 2:return function(x,M){return f.call(y,x,M)};case 3:return function(x,M,A){return f.call(y,x,M,A)}}return function(){return f.apply(y,arguments)}}},"057f":function(o,u,l){var s=l("fc6a"),f=l("241c").f,y={}.toString,b=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],x=function(M){try{return f(M)}catch{return b.slice()}};o.exports.f=function(A){return b&&y.call(A)=="[object Window]"?x(A):f(s(A))}},"06cf":function(o,u,l){var s=l("83ab"),f=l("d1e7"),y=l("5c6c"),b=l("fc6a"),x=l("c04e"),M=l("5135"),A=l("0cfb"),k=Object.getOwnPropertyDescriptor;u.f=s?k:function(F,V){if(F=b(F),V=x(V,!0),A)try{return k(F,V)}catch{}if(M(F,V))return y(!f.f.call(F,V),F[V])}},"0cfb":function(o,u,l){var s=l("83ab"),f=l("d039"),y=l("cc12");o.exports=!s&&!f(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(o,u,l){var s=l("23e7"),f=l("d58f").left,y=l("a640"),b=l("ae40"),x=y("reduce"),M=b("reduce",{1:0});s({target:"Array",proto:!0,forced:!x||!M},{reduce:function(k){return f(this,k,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(o,u,l){var s=l("c6b6"),f=l("9263");o.exports=function(y,b){var x=y.exec;if(typeof x=="function"){var M=x.call(y,b);if(typeof M!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return M}if(s(y)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(y,b)}},"159b":function(o,u,l){var s=l("da84"),f=l("fdbc"),y=l("17c2"),b=l("9112");for(var x in f){var M=s[x],A=M&&M.prototype;if(A&&A.forEach!==y)try{b(A,"forEach",y)}catch{A.forEach=y}}},"17c2":function(o,u,l){var s=l("b727").forEach,f=l("a640"),y=l("ae40"),b=f("forEach"),x=y("forEach");o.exports=!b||!x?function(A){return s(this,A,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(o,u,l){var s=l("d066");o.exports=s("document","documentElement")},"1c0b":function(o,u){o.exports=function(l){if(typeof l!="function")throw TypeError(String(l)+" is not a function");return l}},"1c7e":function(o,u,l){var s=l("b622"),f=s("iterator"),y=!1;try{var b=0,x={next:function(){return{done:!!b++}},return:function(){y=!0}};x[f]=function(){return this},Array.from(x,function(){throw 2})}catch{}o.exports=function(M,A){if(!A&&!y)return!1;var k=!1;try{var L={};L[f]=function(){return{next:function(){return{done:k=!0}}}},M(L)}catch{}return k}},"1d80":function(o,u){o.exports=function(l){if(l==null)throw TypeError("Can't call method on "+l);return l}},"1dde":function(o,u,l){var s=l("d039"),f=l("b622"),y=l("2d00"),b=f("species");o.exports=function(x){return y>=51||!s(function(){var M=[],A=M.constructor={};return A[b]=function(){return{foo:1}},M[x](Boolean).foo!==1})}},"23cb":function(o,u,l){var s=l("a691"),f=Math.max,y=Math.min;o.exports=function(b,x){var M=s(b);return M<0?f(M+x,0):y(M,x)}},"23e7":function(o,u,l){var s=l("da84"),f=l("06cf").f,y=l("9112"),b=l("6eeb"),x=l("ce4e"),M=l("e893"),A=l("94ca");o.exports=function(k,L){var F=k.target,V=k.global,O=k.stat,N,U,W,ne,X,q;if(V?U=s:O?U=s[F]||x(F,{}):U=(s[F]||{}).prototype,U)for(W in L){if(X=L[W],k.noTargetGet?(q=f(U,W),ne=q&&q.value):ne=U[W],N=A(V?W:F+(O?".":"#")+W,k.forced),!N&&ne!==void 0){if(typeof X==typeof ne)continue;M(X,ne)}(k.sham||ne&&ne.sham)&&y(X,"sham",!0),b(U,W,X,k)}}},"241c":function(o,u,l){var s=l("ca84"),f=l("7839"),y=f.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(x){return s(x,y)}},"25f0":function(o,u,l){var s=l("6eeb"),f=l("825a"),y=l("d039"),b=l("ad6d"),x="toString",M=RegExp.prototype,A=M[x],k=y(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),L=A.name!=x;(k||L)&&s(RegExp.prototype,x,function(){var V=f(this),O=String(V.source),N=V.flags,U=String(N===void 0&&V instanceof RegExp&&!("flags"in M)?b.call(V):N);return"/"+O+"/"+U},{unsafe:!0})},"2ca0":function(o,u,l){var s=l("23e7"),f=l("06cf").f,y=l("50c4"),b=l("5a34"),x=l("1d80"),M=l("ab13"),A=l("c430"),k="".startsWith,L=Math.min,F=M("startsWith"),V=!A&&!F&&!!function(){var O=f(String.prototype,"startsWith");return O&&!O.writable}();s({target:"String",proto:!0,forced:!V&&!F},{startsWith:function(N){var U=String(x(this));b(N);var W=y(L(arguments.length>1?arguments[1]:void 0,U.length)),ne=String(N);return k?k.call(U,ne,W):U.slice(W,W+ne.length)===ne}})},"2d00":function(o,u,l){var s=l("da84"),f=l("342f"),y=s.process,b=y&&y.versions,x=b&&b.v8,M,A;x?(M=x.split("."),A=M[0]+M[1]):f&&(M=f.match(/Edge\/(\d+)/),(!M||M[1]>=74)&&(M=f.match(/Chrome\/(\d+)/),M&&(A=M[1]))),o.exports=A&&+A},"342f":function(o,u,l){var s=l("d066");o.exports=s("navigator","userAgent")||""},"35a1":function(o,u,l){var s=l("f5df"),f=l("3f8c"),y=l("b622"),b=y("iterator");o.exports=function(x){if(x!=null)return x[b]||x["@@iterator"]||f[s(x)]}},"37e8":function(o,u,l){var s=l("83ab"),f=l("9bf2"),y=l("825a"),b=l("df75");o.exports=s?Object.defineProperties:function(M,A){y(M);for(var k=b(A),L=k.length,F=0,V;L>F;)f.f(M,V=k[F++],A[V]);return M}},"3bbe":function(o,u,l){var s=l("861d");o.exports=function(f){if(!s(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(o,u,l){var s=l("6547").charAt,f=l("69f3"),y=l("7dd0"),b="String Iterator",x=f.set,M=f.getterFor(b);y(String,"String",function(A){x(this,{type:b,string:String(A),index:0})},function(){var k=M(this),L=k.string,F=k.index,V;return F>=L.length?{value:void 0,done:!0}:(V=s(L,F),k.index+=V.length,{value:V,done:!1})})},"3f8c":function(o,u){o.exports={}},4160:function(o,u,l){var s=l("23e7"),f=l("17c2");s({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(o,u,l){var s=l("da84");o.exports=s},"44ad":function(o,u,l){var s=l("d039"),f=l("c6b6"),y="".split;o.exports=s(function(){return!Object("z").propertyIsEnumerable(0)})?function(b){return f(b)=="String"?y.call(b,""):Object(b)}:Object},"44d2":function(o,u,l){var s=l("b622"),f=l("7c73"),y=l("9bf2"),b=s("unscopables"),x=Array.prototype;x[b]==null&&y.f(x,b,{configurable:!0,value:f(null)}),o.exports=function(M){x[b][M]=!0}},"44e7":function(o,u,l){var s=l("861d"),f=l("c6b6"),y=l("b622"),b=y("match");o.exports=function(x){var M;return s(x)&&((M=x[b])!==void 0?!!M:f(x)=="RegExp")}},4930:function(o,u,l){var s=l("d039");o.exports=!!Object.getOwnPropertySymbols&&!s(function(){return!String(Symbol())})},"4d64":function(o,u,l){var s=l("fc6a"),f=l("50c4"),y=l("23cb"),b=function(x){return function(M,A,k){var L=s(M),F=f(L.length),V=y(k,F),O;if(x&&A!=A){for(;F>V;)if(O=L[V++],O!=O)return!0}else for(;F>V;V++)if((x||V in L)&&L[V]===A)return x||V||0;return!x&&-1}};o.exports={includes:b(!0),indexOf:b(!1)}},"4de4":function(o,u,l){var s=l("23e7"),f=l("b727").filter,y=l("1dde"),b=l("ae40"),x=y("filter"),M=b("filter");s({target:"Array",proto:!0,forced:!x||!M},{filter:function(k){return f(this,k,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(o,u,l){var s=l("0366"),f=l("7b0b"),y=l("9bdd"),b=l("e95a"),x=l("50c4"),M=l("8418"),A=l("35a1");o.exports=function(L){var F=f(L),V=typeof this=="function"?this:Array,O=arguments.length,N=O>1?arguments[1]:void 0,U=N!==void 0,W=A(F),ne=0,X,q,G,ee,ue,Y;if(U&&(N=s(N,O>2?arguments[2]:void 0,2)),W!=null&&!(V==Array&&b(W)))for(ee=W.call(F),ue=ee.next,q=new V;!(G=ue.call(ee)).done;ne++)Y=U?y(ee,N,[G.value,ne],!0):G.value,M(q,ne,Y);else for(X=x(F.length),q=new V(X);X>ne;ne++)Y=U?N(F[ne],ne):F[ne],M(q,ne,Y);return q.length=ne,q}},"4fad":function(o,u,l){var s=l("23e7"),f=l("6f53").entries;s({target:"Object",stat:!0},{entries:function(b){return f(b)}})},"50c4":function(o,u,l){var s=l("a691"),f=Math.min;o.exports=function(y){return y>0?f(s(y),9007199254740991):0}},5135:function(o,u){var l={}.hasOwnProperty;o.exports=function(s,f){return l.call(s,f)}},5319:function(o,u,l){var s=l("d784"),f=l("825a"),y=l("7b0b"),b=l("50c4"),x=l("a691"),M=l("1d80"),A=l("8aa5"),k=l("14c3"),L=Math.max,F=Math.min,V=Math.floor,O=/\$([$&'`]|\d\d?|<[^>]*>)/g,N=/\$([$&'`]|\d\d?)/g,U=function(W){return W===void 0?W:String(W)};s("replace",2,function(W,ne,X,q){var G=q.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,ee=q.REPLACE_KEEPS_$0,ue=G?"$":"$0";return[function(K,Se){var Ve=M(this),Ne=K==null?void 0:K[W];return Ne!==void 0?Ne.call(K,Ve,Se):ne.call(String(Ve),K,Se)},function(ce,K){if(!G&&ee||typeof K=="string"&&K.indexOf(ue)===-1){var Se=X(ne,ce,this,K);if(Se.done)return Se.value}var Ve=f(ce),Ne=String(this),et=typeof K=="function";et||(K=String(K));var ot=Ve.global;if(ot){var Zt=Ve.unicode;Ve.lastIndex=0}for(var qe=[];;){var Ue=k(Ve,Ne);if(Ue===null||(qe.push(Ue),!ot))break;var Tt=String(Ue[0]);Tt===""&&(Ve.lastIndex=A(Ne,b(Ve.lastIndex),Zt))}for(var Bt="",kt=0,un=0;un<qe.length;un++){Ue=qe[un];for(var gt=String(Ue[0]),ft=L(F(x(Ue.index),Ne.length),0),lt=[],Pt=1;Pt<Ue.length;Pt++)lt.push(U(Ue[Pt]));var Lt=Ue.groups;if(et){var on=[gt].concat(lt,ft,Ne);Lt!==void 0&&on.push(Lt);var Ie=String(K.apply(void 0,on))}else Ie=Y(gt,Ne,ft,lt,Lt,K);ft>=kt&&(Bt+=Ne.slice(kt,ft)+Ie,kt=ft+gt.length)}return Bt+Ne.slice(kt)}];function Y(ce,K,Se,Ve,Ne,et){var ot=Se+ce.length,Zt=Ve.length,qe=N;return Ne!==void 0&&(Ne=y(Ne),qe=O),ne.call(et,qe,function(Ue,Tt){var Bt;switch(Tt.charAt(0)){case"$":return"$";case"&":return ce;case"`":return K.slice(0,Se);case"'":return K.slice(ot);case"<":Bt=Ne[Tt.slice(1,-1)];break;default:var kt=+Tt;if(kt===0)return Ue;if(kt>Zt){var un=V(kt/10);return un===0?Ue:un<=Zt?Ve[un-1]===void 0?Tt.charAt(1):Ve[un-1]+Tt.charAt(1):Ue}Bt=Ve[kt-1]}return Bt===void 0?"":Bt})}})},5692:function(o,u,l){var s=l("c430"),f=l("c6cd");(o.exports=function(y,b){return f[y]||(f[y]=b!==void 0?b:{})})("versions",[]).push({version:"3.6.5",mode:s?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(o,u,l){var s=l("d066"),f=l("241c"),y=l("7418"),b=l("825a");o.exports=s("Reflect","ownKeys")||function(M){var A=f.f(b(M)),k=y.f;return k?A.concat(k(M)):A}},"5a34":function(o,u,l){var s=l("44e7");o.exports=function(f){if(s(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(o,u){o.exports=function(l,s){return{enumerable:!(l&1),configurable:!(l&2),writable:!(l&4),value:s}}},"5db7":function(o,u,l){var s=l("23e7"),f=l("a2bf"),y=l("7b0b"),b=l("50c4"),x=l("1c0b"),M=l("65f0");s({target:"Array",proto:!0},{flatMap:function(k){var L=y(this),F=b(L.length),V;return x(k),V=M(L,0),V.length=f(V,L,L,F,0,1,k,arguments.length>1?arguments[1]:void 0),V}})},6547:function(o,u,l){var s=l("a691"),f=l("1d80"),y=function(b){return function(x,M){var A=String(f(x)),k=s(M),L=A.length,F,V;return k<0||k>=L?b?"":void 0:(F=A.charCodeAt(k),F<55296||F>56319||k+1===L||(V=A.charCodeAt(k+1))<56320||V>57343?b?A.charAt(k):F:b?A.slice(k,k+2):(F-55296<<10)+(V-56320)+65536)}};o.exports={codeAt:y(!1),charAt:y(!0)}},"65f0":function(o,u,l){var s=l("861d"),f=l("e8b5"),y=l("b622"),b=y("species");o.exports=function(x,M){var A;return f(x)&&(A=x.constructor,typeof A=="function"&&(A===Array||f(A.prototype))?A=void 0:s(A)&&(A=A[b],A===null&&(A=void 0))),new(A===void 0?Array:A)(M===0?0:M)}},"69f3":function(o,u,l){var s=l("7f9a"),f=l("da84"),y=l("861d"),b=l("9112"),x=l("5135"),M=l("f772"),A=l("d012"),k=f.WeakMap,L,F,V,O=function(G){return V(G)?F(G):L(G,{})},N=function(G){return function(ee){var ue;if(!y(ee)||(ue=F(ee)).type!==G)throw TypeError("Incompatible receiver, "+G+" required");return ue}};if(s){var U=new k,W=U.get,ne=U.has,X=U.set;L=function(G,ee){return X.call(U,G,ee),ee},F=function(G){return W.call(U,G)||{}},V=function(G){return ne.call(U,G)}}else{var q=M("state");A[q]=!0,L=function(G,ee){return b(G,q,ee),ee},F=function(G){return x(G,q)?G[q]:{}},V=function(G){return x(G,q)}}o.exports={set:L,get:F,has:V,enforce:O,getterFor:N}},"6eeb":function(o,u,l){var s=l("da84"),f=l("9112"),y=l("5135"),b=l("ce4e"),x=l("8925"),M=l("69f3"),A=M.get,k=M.enforce,L=String(String).split("String");(o.exports=function(F,V,O,N){var U=N?!!N.unsafe:!1,W=N?!!N.enumerable:!1,ne=N?!!N.noTargetGet:!1;if(typeof O=="function"&&(typeof V=="string"&&!y(O,"name")&&f(O,"name",V),k(O).source=L.join(typeof V=="string"?V:"")),F===s){W?F[V]=O:b(V,O);return}else U?!ne&&F[V]&&(W=!0):delete F[V];W?F[V]=O:f(F,V,O)})(Function.prototype,"toString",function(){return typeof this=="function"&&A(this).source||x(this)})},"6f53":function(o,u,l){var s=l("83ab"),f=l("df75"),y=l("fc6a"),b=l("d1e7").f,x=function(M){return function(A){for(var k=y(A),L=f(k),F=L.length,V=0,O=[],N;F>V;)N=L[V++],(!s||b.call(k,N))&&O.push(M?[N,k[N]]:k[N]);return O}};o.exports={entries:x(!0),values:x(!1)}},"73d9":function(o,u,l){var s=l("44d2");s("flatMap")},7418:function(o,u){u.f=Object.getOwnPropertySymbols},"746f":function(o,u,l){var s=l("428f"),f=l("5135"),y=l("e538"),b=l("9bf2").f;o.exports=function(x){var M=s.Symbol||(s.Symbol={});f(M,x)||b(M,x,{value:y.f(x)})}},7839:function(o,u){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(o,u,l){var s=l("1d80");o.exports=function(f){return Object(s(f))}},"7c73":function(o,u,l){var s=l("825a"),f=l("37e8"),y=l("7839"),b=l("d012"),x=l("1be4"),M=l("cc12"),A=l("f772"),k=">",L="<",F="prototype",V="script",O=A("IE_PROTO"),N=function(){},U=function(G){return L+V+k+G+L+"/"+V+k},W=function(G){G.write(U("")),G.close();var ee=G.parentWindow.Object;return G=null,ee},ne=function(){var G=M("iframe"),ee="java"+V+":",ue;return G.style.display="none",x.appendChild(G),G.src=String(ee),ue=G.contentWindow.document,ue.open(),ue.write(U("document.F=Object")),ue.close(),ue.F},X,q=function(){try{X=document.domain&&new ActiveXObject("htmlfile")}catch{}q=X?W(X):ne();for(var G=y.length;G--;)delete q[F][y[G]];return q()};b[O]=!0,o.exports=Object.create||function(ee,ue){var Y;return ee!==null?(N[F]=s(ee),Y=new N,N[F]=null,Y[O]=ee):Y=q(),ue===void 0?Y:f(Y,ue)}},"7dd0":function(o,u,l){var s=l("23e7"),f=l("9ed3"),y=l("e163"),b=l("d2bb"),x=l("d44e"),M=l("9112"),A=l("6eeb"),k=l("b622"),L=l("c430"),F=l("3f8c"),V=l("ae93"),O=V.IteratorPrototype,N=V.BUGGY_SAFARI_ITERATORS,U=k("iterator"),W="keys",ne="values",X="entries",q=function(){return this};o.exports=function(G,ee,ue,Y,ce,K,Se){f(ue,ee,Y);var Ve=function(un){if(un===ce&&qe)return qe;if(!N&&un in ot)return ot[un];switch(un){case W:return function(){return new ue(this,un)};case ne:return function(){return new ue(this,un)};case X:return function(){return new ue(this,un)}}return function(){return new ue(this)}},Ne=ee+" Iterator",et=!1,ot=G.prototype,Zt=ot[U]||ot["@@iterator"]||ce&&ot[ce],qe=!N&&Zt||Ve(ce),Ue=ee=="Array"&&ot.entries||Zt,Tt,Bt,kt;if(Ue&&(Tt=y(Ue.call(new G)),O!==Object.prototype&&Tt.next&&(!L&&y(Tt)!==O&&(b?b(Tt,O):typeof Tt[U]!="function"&&M(Tt,U,q)),x(Tt,Ne,!0,!0),L&&(F[Ne]=q))),ce==ne&&Zt&&Zt.name!==ne&&(et=!0,qe=function(){return Zt.call(this)}),(!L||Se)&&ot[U]!==qe&&M(ot,U,qe),F[ee]=qe,ce)if(Bt={values:Ve(ne),keys:K?qe:Ve(W),entries:Ve(X)},Se)for(kt in Bt)(N||et||!(kt in ot))&&A(ot,kt,Bt[kt]);else s({target:ee,proto:!0,forced:N||et},Bt);return Bt}},"7f9a":function(o,u,l){var s=l("da84"),f=l("8925"),y=s.WeakMap;o.exports=typeof y=="function"&&/native code/.test(f(y))},"825a":function(o,u,l){var s=l("861d");o.exports=function(f){if(!s(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(o,u,l){var s=l("d039");o.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(o,u,l){var s=l("c04e"),f=l("9bf2"),y=l("5c6c");o.exports=function(b,x,M){var A=s(x);A in b?f.f(b,A,y(0,M)):b[A]=M}},"861d":function(o,u){o.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},8875:function(o,u,l){var s,f,y;(function(b,x){f=[],s=x,y=typeof s=="function"?s.apply(u,f):s,y!==void 0&&(o.exports=y)})(typeof self<"u"?self:this,function(){function b(){var x=Object.getOwnPropertyDescriptor(document,"currentScript");if(!x&&"currentScript"in document&&document.currentScript||x&&x.get!==b&&document.currentScript)return document.currentScript;try{throw new Error}catch(X){var M=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,A=/@([^@]*):(\d+):(\d+)\s*$/ig,k=M.exec(X.stack)||A.exec(X.stack),L=k&&k[1]||!1,F=k&&k[2]||!1,V=document.location.href.replace(document.location.hash,""),O,N,U,W=document.getElementsByTagName("script");L===V&&(O=document.documentElement.outerHTML,N=new RegExp("(?:[^\\n]+?\\n){0,"+(F-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),U=O.replace(N,"$1").trim());for(var ne=0;ne<W.length;ne++)if(W[ne].readyState==="interactive"||W[ne].src===L||L===V&&W[ne].innerHTML&&W[ne].innerHTML.trim()===U)return W[ne];return null}}return b})},8925:function(o,u,l){var s=l("c6cd"),f=Function.toString;typeof s.inspectSource!="function"&&(s.inspectSource=function(y){return f.call(y)}),o.exports=s.inspectSource},"8aa5":function(o,u,l){var s=l("6547").charAt;o.exports=function(f,y,b){return y+(b?s(f,y).length:1)}},"8bbf":function(o,u){o.exports=n},"90e3":function(o,u){var l=0,s=Math.random();o.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++l+s).toString(36)}},9112:function(o,u,l){var s=l("83ab"),f=l("9bf2"),y=l("5c6c");o.exports=s?function(b,x,M){return f.f(b,x,y(1,M))}:function(b,x,M){return b[x]=M,b}},9263:function(o,u,l){var s=l("ad6d"),f=l("9f7f"),y=RegExp.prototype.exec,b=String.prototype.replace,x=y,M=function(){var F=/a/,V=/b*/g;return y.call(F,"a"),y.call(V,"a"),F.lastIndex!==0||V.lastIndex!==0}(),A=f.UNSUPPORTED_Y||f.BROKEN_CARET,k=/()??/.exec("")[1]!==void 0,L=M||k||A;L&&(x=function(V){var O=this,N,U,W,ne,X=A&&O.sticky,q=s.call(O),G=O.source,ee=0,ue=V;return X&&(q=q.replace("y",""),q.indexOf("g")===-1&&(q+="g"),ue=String(V).slice(O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&V[O.lastIndex-1]!==`
`)&&(G="(?: "+G+")",ue=" "+ue,ee++),U=new RegExp("^(?:"+G+")",q)),k&&(U=new RegExp("^"+G+"$(?!\\s)",q)),M&&(N=O.lastIndex),W=y.call(X?U:O,ue),X?W?(W.input=W.input.slice(ee),W[0]=W[0].slice(ee),W.index=O.lastIndex,O.lastIndex+=W[0].length):O.lastIndex=0:M&&W&&(O.lastIndex=O.global?W.index+W[0].length:N),k&&W&&W.length>1&&b.call(W[0],U,function(){for(ne=1;ne<arguments.length-2;ne++)arguments[ne]===void 0&&(W[ne]=void 0)}),W}),o.exports=x},"94ca":function(o,u,l){var s=l("d039"),f=/#|\.prototype\./,y=function(k,L){var F=x[b(k)];return F==A?!0:F==M?!1:typeof L=="function"?s(L):!!L},b=y.normalize=function(k){return String(k).replace(f,".").toLowerCase()},x=y.data={},M=y.NATIVE="N",A=y.POLYFILL="P";o.exports=y},"99af":function(o,u,l){var s=l("23e7"),f=l("d039"),y=l("e8b5"),b=l("861d"),x=l("7b0b"),M=l("50c4"),A=l("8418"),k=l("65f0"),L=l("1dde"),F=l("b622"),V=l("2d00"),O=F("isConcatSpreadable"),N=9007199254740991,U="Maximum allowed index exceeded",W=V>=51||!f(function(){var G=[];return G[O]=!1,G.concat()[0]!==G}),ne=L("concat"),X=function(G){if(!b(G))return!1;var ee=G[O];return ee!==void 0?!!ee:y(G)},q=!W||!ne;s({target:"Array",proto:!0,forced:q},{concat:function(ee){var ue=x(this),Y=k(ue,0),ce=0,K,Se,Ve,Ne,et;for(K=-1,Ve=arguments.length;K<Ve;K++)if(et=K===-1?ue:arguments[K],X(et)){if(Ne=M(et.length),ce+Ne>N)throw TypeError(U);for(Se=0;Se<Ne;Se++,ce++)Se in et&&A(Y,ce,et[Se])}else{if(ce>=N)throw TypeError(U);A(Y,ce++,et)}return Y.length=ce,Y}})},"9bdd":function(o,u,l){var s=l("825a");o.exports=function(f,y,b,x){try{return x?y(s(b)[0],b[1]):y(b)}catch(A){var M=f.return;throw M!==void 0&&s(M.call(f)),A}}},"9bf2":function(o,u,l){var s=l("83ab"),f=l("0cfb"),y=l("825a"),b=l("c04e"),x=Object.defineProperty;u.f=s?x:function(A,k,L){if(y(A),k=b(k,!0),y(L),f)try{return x(A,k,L)}catch{}if("get"in L||"set"in L)throw TypeError("Accessors not supported");return"value"in L&&(A[k]=L.value),A}},"9ed3":function(o,u,l){var s=l("ae93").IteratorPrototype,f=l("7c73"),y=l("5c6c"),b=l("d44e"),x=l("3f8c"),M=function(){return this};o.exports=function(A,k,L){var F=k+" Iterator";return A.prototype=f(s,{next:y(1,L)}),b(A,F,!1,!0),x[F]=M,A}},"9f7f":function(o,u,l){var s=l("d039");function f(y,b){return RegExp(y,b)}u.UNSUPPORTED_Y=s(function(){var y=f("a","y");return y.lastIndex=2,y.exec("abcd")!=null}),u.BROKEN_CARET=s(function(){var y=f("^r","gy");return y.lastIndex=2,y.exec("str")!=null})},a2bf:function(o,u,l){var s=l("e8b5"),f=l("50c4"),y=l("0366"),b=function(x,M,A,k,L,F,V,O){for(var N=L,U=0,W=V?y(V,O,3):!1,ne;U<k;){if(U in A){if(ne=W?W(A[U],U,M):A[U],F>0&&s(ne))N=b(x,M,ne,f(ne.length),N,F-1)-1;else{if(N>=9007199254740991)throw TypeError("Exceed the acceptable array length");x[N]=ne}N++}U++}return N};o.exports=b},a352:function(o,u){o.exports=i},a434:function(o,u,l){var s=l("23e7"),f=l("23cb"),y=l("a691"),b=l("50c4"),x=l("7b0b"),M=l("65f0"),A=l("8418"),k=l("1dde"),L=l("ae40"),F=k("splice"),V=L("splice",{ACCESSORS:!0,0:0,1:2}),O=Math.max,N=Math.min,U=9007199254740991,W="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!F||!V},{splice:function(X,q){var G=x(this),ee=b(G.length),ue=f(X,ee),Y=arguments.length,ce,K,Se,Ve,Ne,et;if(Y===0?ce=K=0:Y===1?(ce=0,K=ee-ue):(ce=Y-2,K=N(O(y(q),0),ee-ue)),ee+ce-K>U)throw TypeError(W);for(Se=M(G,K),Ve=0;Ve<K;Ve++)Ne=ue+Ve,Ne in G&&A(Se,Ve,G[Ne]);if(Se.length=K,ce<K){for(Ve=ue;Ve<ee-K;Ve++)Ne=Ve+K,et=Ve+ce,Ne in G?G[et]=G[Ne]:delete G[et];for(Ve=ee;Ve>ee-K+ce;Ve--)delete G[Ve-1]}else if(ce>K)for(Ve=ee-K;Ve>ue;Ve--)Ne=Ve+K-1,et=Ve+ce-1,Ne in G?G[et]=G[Ne]:delete G[et];for(Ve=0;Ve<ce;Ve++)G[Ve+ue]=arguments[Ve+2];return G.length=ee-K+ce,Se}})},a4d3:function(o,u,l){var s=l("23e7"),f=l("da84"),y=l("d066"),b=l("c430"),x=l("83ab"),M=l("4930"),A=l("fdbf"),k=l("d039"),L=l("5135"),F=l("e8b5"),V=l("861d"),O=l("825a"),N=l("7b0b"),U=l("fc6a"),W=l("c04e"),ne=l("5c6c"),X=l("7c73"),q=l("df75"),G=l("241c"),ee=l("057f"),ue=l("7418"),Y=l("06cf"),ce=l("9bf2"),K=l("d1e7"),Se=l("9112"),Ve=l("6eeb"),Ne=l("5692"),et=l("f772"),ot=l("d012"),Zt=l("90e3"),qe=l("b622"),Ue=l("e538"),Tt=l("746f"),Bt=l("d44e"),kt=l("69f3"),un=l("b727").forEach,gt=et("hidden"),ft="Symbol",lt="prototype",Pt=qe("toPrimitive"),Lt=kt.set,on=kt.getterFor(ft),Ie=Object[lt],$=f.Symbol,Pe=y("JSON","stringify"),Oe=Y.f,ye=ce.f,pe=ee.f,Fe=K.f,tt=Ne("symbols"),it=Ne("op-symbols"),Be=Ne("string-to-symbol-registry"),Mt=Ne("symbol-to-string-registry"),wt=Ne("wks"),At=f.QObject,Ht=!At||!At[lt]||!At[lt].findChild,cn=x&&k(function(){return X(ye({},"a",{get:function(){return ye(this,"a",{value:7}).a}})).a!=7})?function(xe,Ee,ve){var Qe=Oe(Ie,Ee);Qe&&delete Ie[Ee],ye(xe,Ee,ve),Qe&&xe!==Ie&&ye(Ie,Ee,Qe)}:ye,fn=function(xe,Ee){var ve=tt[xe]=X($[lt]);return Lt(ve,{type:ft,tag:xe,description:Ee}),x||(ve.description=Ee),ve},ut=A?function(xe){return typeof xe=="symbol"}:function(xe){return Object(xe)instanceof $},pt=function(Ee,ve,Qe){Ee===Ie&&pt(it,ve,Qe),O(Ee);var ht=W(ve,!0);return O(Qe),L(tt,ht)?(Qe.enumerable?(L(Ee,gt)&&Ee[gt][ht]&&(Ee[gt][ht]=!1),Qe=X(Qe,{enumerable:ne(0,!1)})):(L(Ee,gt)||ye(Ee,gt,ne(1,{})),Ee[gt][ht]=!0),cn(Ee,ht,Qe)):ye(Ee,ht,Qe)},_t=function(Ee,ve){O(Ee);var Qe=U(ve),ht=q(Qe).concat(de(Qe));return un(ht,function(Ze){(!x||Wt.call(Qe,Ze))&&pt(Ee,Ze,Qe[Ze])}),Ee},Nt=function(Ee,ve){return ve===void 0?X(Ee):_t(X(Ee),ve)},Wt=function(Ee){var ve=W(Ee,!0),Qe=Fe.call(this,ve);return this===Ie&&L(tt,ve)&&!L(it,ve)?!1:Qe||!L(this,ve)||!L(tt,ve)||L(this,gt)&&this[gt][ve]?Qe:!0},wn=function(Ee,ve){var Qe=U(Ee),ht=W(ve,!0);if(!(Qe===Ie&&L(tt,ht)&&!L(it,ht))){var Ze=Oe(Qe,ht);return Ze&&L(tt,ht)&&!(L(Qe,gt)&&Qe[gt][ht])&&(Ze.enumerable=!0),Ze}},Xe=function(Ee){var ve=pe(U(Ee)),Qe=[];return un(ve,function(ht){!L(tt,ht)&&!L(ot,ht)&&Qe.push(ht)}),Qe},de=function(Ee){var ve=Ee===Ie,Qe=pe(ve?it:U(Ee)),ht=[];return un(Qe,function(Ze){L(tt,Ze)&&(!ve||L(Ie,Ze))&&ht.push(tt[Ze])}),ht};if(M||($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor");var Ee=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),ve=Zt(Ee),Qe=function(ht){this===Ie&&Qe.call(it,ht),L(this,gt)&&L(this[gt],ve)&&(this[gt][ve]=!1),cn(this,ve,ne(1,ht))};return x&&Ht&&cn(Ie,ve,{configurable:!0,set:Qe}),fn(ve,Ee)},Ve($[lt],"toString",function(){return on(this).tag}),Ve($,"withoutSetter",function(xe){return fn(Zt(xe),xe)}),K.f=Wt,ce.f=pt,Y.f=wn,G.f=ee.f=Xe,ue.f=de,Ue.f=function(xe){return fn(qe(xe),xe)},x&&(ye($[lt],"description",{configurable:!0,get:function(){return on(this).description}}),b||Ve(Ie,"propertyIsEnumerable",Wt,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!M,sham:!M},{Symbol:$}),un(q(wt),function(xe){Tt(xe)}),s({target:ft,stat:!0,forced:!M},{for:function(xe){var Ee=String(xe);if(L(Be,Ee))return Be[Ee];var ve=$(Ee);return Be[Ee]=ve,Mt[ve]=Ee,ve},keyFor:function(Ee){if(!ut(Ee))throw TypeError(Ee+" is not a symbol");if(L(Mt,Ee))return Mt[Ee]},useSetter:function(){Ht=!0},useSimple:function(){Ht=!1}}),s({target:"Object",stat:!0,forced:!M,sham:!x},{create:Nt,defineProperty:pt,defineProperties:_t,getOwnPropertyDescriptor:wn}),s({target:"Object",stat:!0,forced:!M},{getOwnPropertyNames:Xe,getOwnPropertySymbols:de}),s({target:"Object",stat:!0,forced:k(function(){ue.f(1)})},{getOwnPropertySymbols:function(Ee){return ue.f(N(Ee))}}),Pe){var ge=!M||k(function(){var xe=$();return Pe([xe])!="[null]"||Pe({a:xe})!="{}"||Pe(Object(xe))!="{}"});s({target:"JSON",stat:!0,forced:ge},{stringify:function(Ee,ve,Qe){for(var ht=[Ee],Ze=1,St;arguments.length>Ze;)ht.push(arguments[Ze++]);if(St=ve,!(!V(ve)&&Ee===void 0||ut(Ee)))return F(ve)||(ve=function(Dt,yt){if(typeof St=="function"&&(yt=St.call(this,Dt,yt)),!ut(yt))return yt}),ht[1]=ve,Pe.apply(null,ht)}})}$[lt][Pt]||Se($[lt],Pt,$[lt].valueOf),Bt($,ft),ot[gt]=!0},a630:function(o,u,l){var s=l("23e7"),f=l("4df4"),y=l("1c7e"),b=!y(function(x){Array.from(x)});s({target:"Array",stat:!0,forced:b},{from:f})},a640:function(o,u,l){var s=l("d039");o.exports=function(f,y){var b=[][f];return!!b&&s(function(){b.call(null,y||function(){throw 1},1)})}},a691:function(o,u){var l=Math.ceil,s=Math.floor;o.exports=function(f){return isNaN(f=+f)?0:(f>0?s:l)(f)}},ab13:function(o,u,l){var s=l("b622"),f=s("match");o.exports=function(y){var b=/./;try{"/./"[y](b)}catch{try{return b[f]=!1,"/./"[y](b)}catch{}}return!1}},ac1f:function(o,u,l){var s=l("23e7"),f=l("9263");s({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(o,u,l){var s=l("825a");o.exports=function(){var f=s(this),y="";return f.global&&(y+="g"),f.ignoreCase&&(y+="i"),f.multiline&&(y+="m"),f.dotAll&&(y+="s"),f.unicode&&(y+="u"),f.sticky&&(y+="y"),y}},ae40:function(o,u,l){var s=l("83ab"),f=l("d039"),y=l("5135"),b=Object.defineProperty,x={},M=function(A){throw A};o.exports=function(A,k){if(y(x,A))return x[A];k||(k={});var L=[][A],F=y(k,"ACCESSORS")?k.ACCESSORS:!1,V=y(k,0)?k[0]:M,O=y(k,1)?k[1]:void 0;return x[A]=!!L&&!f(function(){if(F&&!s)return!0;var N={length:-1};F?b(N,1,{enumerable:!0,get:M}):N[1]=1,L.call(N,V,O)})}},ae93:function(o,u,l){var s=l("e163"),f=l("9112"),y=l("5135"),b=l("b622"),x=l("c430"),M=b("iterator"),A=!1,k=function(){return this},L,F,V;[].keys&&(V=[].keys(),"next"in V?(F=s(s(V)),F!==Object.prototype&&(L=F)):A=!0),L==null&&(L={}),!x&&!y(L,M)&&f(L,M,k),o.exports={IteratorPrototype:L,BUGGY_SAFARI_ITERATORS:A}},b041:function(o,u,l){var s=l("00ee"),f=l("f5df");o.exports=s?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(o,u,l){var s=l("83ab"),f=l("9bf2").f,y=Function.prototype,b=y.toString,x=/^\s*function ([^ (]*)/,M="name";s&&!(M in y)&&f(y,M,{configurable:!0,get:function(){try{return b.call(this).match(x)[1]}catch{return""}}})},b622:function(o,u,l){var s=l("da84"),f=l("5692"),y=l("5135"),b=l("90e3"),x=l("4930"),M=l("fdbf"),A=f("wks"),k=s.Symbol,L=M?k:k&&k.withoutSetter||b;o.exports=function(F){return y(A,F)||(x&&y(k,F)?A[F]=k[F]:A[F]=L("Symbol."+F)),A[F]}},b64b:function(o,u,l){var s=l("23e7"),f=l("7b0b"),y=l("df75"),b=l("d039"),x=b(function(){y(1)});s({target:"Object",stat:!0,forced:x},{keys:function(A){return y(f(A))}})},b727:function(o,u,l){var s=l("0366"),f=l("44ad"),y=l("7b0b"),b=l("50c4"),x=l("65f0"),M=[].push,A=function(k){var L=k==1,F=k==2,V=k==3,O=k==4,N=k==6,U=k==5||N;return function(W,ne,X,q){for(var G=y(W),ee=f(G),ue=s(ne,X,3),Y=b(ee.length),ce=0,K=q||x,Se=L?K(W,Y):F?K(W,0):void 0,Ve,Ne;Y>ce;ce++)if((U||ce in ee)&&(Ve=ee[ce],Ne=ue(Ve,ce,G),k)){if(L)Se[ce]=Ne;else if(Ne)switch(k){case 3:return!0;case 5:return Ve;case 6:return ce;case 2:M.call(Se,Ve)}else if(O)return!1}return N?-1:V||O?O:Se}};o.exports={forEach:A(0),map:A(1),filter:A(2),some:A(3),every:A(4),find:A(5),findIndex:A(6)}},c04e:function(o,u,l){var s=l("861d");o.exports=function(f,y){if(!s(f))return f;var b,x;if(y&&typeof(b=f.toString)=="function"&&!s(x=b.call(f))||typeof(b=f.valueOf)=="function"&&!s(x=b.call(f))||!y&&typeof(b=f.toString)=="function"&&!s(x=b.call(f)))return x;throw TypeError("Can't convert object to primitive value")}},c430:function(o,u){o.exports=!1},c6b6:function(o,u){var l={}.toString;o.exports=function(s){return l.call(s).slice(8,-1)}},c6cd:function(o,u,l){var s=l("da84"),f=l("ce4e"),y="__core-js_shared__",b=s[y]||f(y,{});o.exports=b},c740:function(o,u,l){var s=l("23e7"),f=l("b727").findIndex,y=l("44d2"),b=l("ae40"),x="findIndex",M=!0,A=b(x);x in[]&&Array(1)[x](function(){M=!1}),s({target:"Array",proto:!0,forced:M||!A},{findIndex:function(L){return f(this,L,arguments.length>1?arguments[1]:void 0)}}),y(x)},c8ba:function(o,u){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}o.exports=l},c975:function(o,u,l){var s=l("23e7"),f=l("4d64").indexOf,y=l("a640"),b=l("ae40"),x=[].indexOf,M=!!x&&1/[1].indexOf(1,-0)<0,A=y("indexOf"),k=b("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:M||!A||!k},{indexOf:function(F){return M?x.apply(this,arguments)||0:f(this,F,arguments.length>1?arguments[1]:void 0)}})},ca84:function(o,u,l){var s=l("5135"),f=l("fc6a"),y=l("4d64").indexOf,b=l("d012");o.exports=function(x,M){var A=f(x),k=0,L=[],F;for(F in A)!s(b,F)&&s(A,F)&&L.push(F);for(;M.length>k;)s(A,F=M[k++])&&(~y(L,F)||L.push(F));return L}},caad:function(o,u,l){var s=l("23e7"),f=l("4d64").includes,y=l("44d2"),b=l("ae40"),x=b("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:!x},{includes:function(A){return f(this,A,arguments.length>1?arguments[1]:void 0)}}),y("includes")},cc12:function(o,u,l){var s=l("da84"),f=l("861d"),y=s.document,b=f(y)&&f(y.createElement);o.exports=function(x){return b?y.createElement(x):{}}},ce4e:function(o,u,l){var s=l("da84"),f=l("9112");o.exports=function(y,b){try{f(s,y,b)}catch{s[y]=b}return b}},d012:function(o,u){o.exports={}},d039:function(o,u){o.exports=function(l){try{return!!l()}catch{return!0}}},d066:function(o,u,l){var s=l("428f"),f=l("da84"),y=function(b){return typeof b=="function"?b:void 0};o.exports=function(b,x){return arguments.length<2?y(s[b])||y(f[b]):s[b]&&s[b][x]||f[b]&&f[b][x]}},d1e7:function(o,u,l){var s={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,y=f&&!s.call({1:2},1);u.f=y?function(x){var M=f(this,x);return!!M&&M.enumerable}:s},d28b:function(o,u,l){var s=l("746f");s("iterator")},d2bb:function(o,u,l){var s=l("825a"),f=l("3bbe");o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var y=!1,b={},x;try{x=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,x.call(b,[]),y=b instanceof Array}catch{}return function(A,k){return s(A),f(k),y?x.call(A,k):A.__proto__=k,A}}():void 0)},d3b7:function(o,u,l){var s=l("00ee"),f=l("6eeb"),y=l("b041");s||f(Object.prototype,"toString",y,{unsafe:!0})},d44e:function(o,u,l){var s=l("9bf2").f,f=l("5135"),y=l("b622"),b=y("toStringTag");o.exports=function(x,M,A){x&&!f(x=A?x:x.prototype,b)&&s(x,b,{configurable:!0,value:M})}},d58f:function(o,u,l){var s=l("1c0b"),f=l("7b0b"),y=l("44ad"),b=l("50c4"),x=function(M){return function(A,k,L,F){s(k);var V=f(A),O=y(V),N=b(V.length),U=M?N-1:0,W=M?-1:1;if(L<2)for(;;){if(U in O){F=O[U],U+=W;break}if(U+=W,M?U<0:N<=U)throw TypeError("Reduce of empty array with no initial value")}for(;M?U>=0:N>U;U+=W)U in O&&(F=k(F,O[U],U,V));return F}};o.exports={left:x(!1),right:x(!0)}},d784:function(o,u,l){l("ac1f");var s=l("6eeb"),f=l("d039"),y=l("b622"),b=l("9263"),x=l("9112"),M=y("species"),A=!f(function(){var O=/./;return O.exec=function(){var N=[];return N.groups={a:"7"},N},"".replace(O,"$<a>")!=="7"}),k=function(){return"a".replace(/./,"$0")==="$0"}(),L=y("replace"),F=function(){return/./[L]?/./[L]("a","$0")==="":!1}(),V=!f(function(){var O=/(?:)/,N=O.exec;O.exec=function(){return N.apply(this,arguments)};var U="ab".split(O);return U.length!==2||U[0]!=="a"||U[1]!=="b"});o.exports=function(O,N,U,W){var ne=y(O),X=!f(function(){var ce={};return ce[ne]=function(){return 7},""[O](ce)!=7}),q=X&&!f(function(){var ce=!1,K=/a/;return O==="split"&&(K={},K.constructor={},K.constructor[M]=function(){return K},K.flags="",K[ne]=/./[ne]),K.exec=function(){return ce=!0,null},K[ne](""),!ce});if(!X||!q||O==="replace"&&!(A&&k&&!F)||O==="split"&&!V){var G=/./[ne],ee=U(ne,""[O],function(ce,K,Se,Ve,Ne){return K.exec===b?X&&!Ne?{done:!0,value:G.call(K,Se,Ve)}:{done:!0,value:ce.call(Se,K,Ve)}:{done:!1}},{REPLACE_KEEPS_$0:k,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:F}),ue=ee[0],Y=ee[1];s(String.prototype,O,ue),s(RegExp.prototype,ne,N==2?function(ce,K){return Y.call(ce,this,K)}:function(ce){return Y.call(ce,this)})}W&&x(RegExp.prototype[ne],"sham",!0)}},d81d:function(o,u,l){var s=l("23e7"),f=l("b727").map,y=l("1dde"),b=l("ae40"),x=y("map"),M=b("map");s({target:"Array",proto:!0,forced:!x||!M},{map:function(k){return f(this,k,arguments.length>1?arguments[1]:void 0)}})},da84:function(o,u,l){(function(s){var f=function(y){return y&&y.Math==Math&&y};o.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof s=="object"&&s)||Function("return this")()}).call(this,l("c8ba"))},dbb4:function(o,u,l){var s=l("23e7"),f=l("83ab"),y=l("56ef"),b=l("fc6a"),x=l("06cf"),M=l("8418");s({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(k){for(var L=b(k),F=x.f,V=y(L),O={},N=0,U,W;V.length>N;)W=F(L,U=V[N++]),W!==void 0&&M(O,U,W);return O}})},dbf1:function(o,u,l){(function(s){l.d(u,"a",function(){return y});function f(){return typeof window<"u"?window.console:s.console}var y=f()}).call(this,l("c8ba"))},ddb0:function(o,u,l){var s=l("da84"),f=l("fdbc"),y=l("e260"),b=l("9112"),x=l("b622"),M=x("iterator"),A=x("toStringTag"),k=y.values;for(var L in f){var F=s[L],V=F&&F.prototype;if(V){if(V[M]!==k)try{b(V,M,k)}catch{V[M]=k}if(V[A]||b(V,A,L),f[L]){for(var O in y)if(V[O]!==y[O])try{b(V,O,y[O])}catch{V[O]=y[O]}}}}},df75:function(o,u,l){var s=l("ca84"),f=l("7839");o.exports=Object.keys||function(b){return s(b,f)}},e01a:function(o,u,l){var s=l("23e7"),f=l("83ab"),y=l("da84"),b=l("5135"),x=l("861d"),M=l("9bf2").f,A=l("e893"),k=y.Symbol;if(f&&typeof k=="function"&&(!("description"in k.prototype)||k().description!==void 0)){var L={},F=function(){var ne=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),X=this instanceof F?new k(ne):ne===void 0?k():k(ne);return ne===""&&(L[X]=!0),X};A(F,k);var V=F.prototype=k.prototype;V.constructor=F;var O=V.toString,N=String(k("test"))=="Symbol(test)",U=/^Symbol\((.*)\)[^)]+$/;M(V,"description",{configurable:!0,get:function(){var ne=x(this)?this.valueOf():this,X=O.call(ne);if(b(L,ne))return"";var q=N?X.slice(7,-1):X.replace(U,"$1");return q===""?void 0:q}}),s({global:!0,forced:!0},{Symbol:F})}},e163:function(o,u,l){var s=l("5135"),f=l("7b0b"),y=l("f772"),b=l("e177"),x=y("IE_PROTO"),M=Object.prototype;o.exports=b?Object.getPrototypeOf:function(A){return A=f(A),s(A,x)?A[x]:typeof A.constructor=="function"&&A instanceof A.constructor?A.constructor.prototype:A instanceof Object?M:null}},e177:function(o,u,l){var s=l("d039");o.exports=!s(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(o,u,l){var s=l("fc6a"),f=l("44d2"),y=l("3f8c"),b=l("69f3"),x=l("7dd0"),M="Array Iterator",A=b.set,k=b.getterFor(M);o.exports=x(Array,"Array",function(L,F){A(this,{type:M,target:s(L),index:0,kind:F})},function(){var L=k(this),F=L.target,V=L.kind,O=L.index++;return!F||O>=F.length?(L.target=void 0,{value:void 0,done:!0}):V=="keys"?{value:O,done:!1}:V=="values"?{value:F[O],done:!1}:{value:[O,F[O]],done:!1}},"values"),y.Arguments=y.Array,f("keys"),f("values"),f("entries")},e439:function(o,u,l){var s=l("23e7"),f=l("d039"),y=l("fc6a"),b=l("06cf").f,x=l("83ab"),M=f(function(){b(1)}),A=!x||M;s({target:"Object",stat:!0,forced:A,sham:!x},{getOwnPropertyDescriptor:function(L,F){return b(y(L),F)}})},e538:function(o,u,l){var s=l("b622");u.f=s},e893:function(o,u,l){var s=l("5135"),f=l("56ef"),y=l("06cf"),b=l("9bf2");o.exports=function(x,M){for(var A=f(M),k=b.f,L=y.f,F=0;F<A.length;F++){var V=A[F];s(x,V)||k(x,V,L(M,V))}}},e8b5:function(o,u,l){var s=l("c6b6");o.exports=Array.isArray||function(y){return s(y)=="Array"}},e95a:function(o,u,l){var s=l("b622"),f=l("3f8c"),y=s("iterator"),b=Array.prototype;o.exports=function(x){return x!==void 0&&(f.Array===x||b[y]===x)}},f5df:function(o,u,l){var s=l("00ee"),f=l("c6b6"),y=l("b622"),b=y("toStringTag"),x=f(function(){return arguments}())=="Arguments",M=function(A,k){try{return A[k]}catch{}};o.exports=s?f:function(A){var k,L,F;return A===void 0?"Undefined":A===null?"Null":typeof(L=M(k=Object(A),b))=="string"?L:x?f(k):(F=f(k))=="Object"&&typeof k.callee=="function"?"Arguments":F}},f772:function(o,u,l){var s=l("5692"),f=l("90e3"),y=s("keys");o.exports=function(b){return y[b]||(y[b]=f(b))}},fb15:function(o,u,l){if(l.r(u),typeof window<"u"){var s=window.document.currentScript;{var f=l("8875");s=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var y=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);y&&(l.p=y[1])}l("99af"),l("4de4"),l("4160"),l("c975"),l("d81d"),l("a434"),l("159b"),l("a4d3"),l("e439"),l("dbb4"),l("b64b");function b(ut,pt,_t){return pt in ut?Object.defineProperty(ut,pt,{value:_t,enumerable:!0,configurable:!0,writable:!0}):ut[pt]=_t,ut}function x(ut,pt){var _t=Object.keys(ut);if(Object.getOwnPropertySymbols){var Nt=Object.getOwnPropertySymbols(ut);pt&&(Nt=Nt.filter(function(Wt){return Object.getOwnPropertyDescriptor(ut,Wt).enumerable})),_t.push.apply(_t,Nt)}return _t}function M(ut){for(var pt=1;pt<arguments.length;pt++){var _t=arguments[pt]!=null?arguments[pt]:{};pt%2?x(Object(_t),!0).forEach(function(Nt){b(ut,Nt,_t[Nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(_t)):x(Object(_t)).forEach(function(Nt){Object.defineProperty(ut,Nt,Object.getOwnPropertyDescriptor(_t,Nt))})}return ut}function A(ut){if(Array.isArray(ut))return ut}l("e01a"),l("d28b"),l("e260"),l("d3b7"),l("3ca3"),l("ddb0");function k(ut,pt){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(ut)))){var _t=[],Nt=!0,Wt=!1,wn=void 0;try{for(var Xe=ut[Symbol.iterator](),de;!(Nt=(de=Xe.next()).done)&&(_t.push(de.value),!(pt&&_t.length===pt));Nt=!0);}catch(ge){Wt=!0,wn=ge}finally{try{!Nt&&Xe.return!=null&&Xe.return()}finally{if(Wt)throw wn}}return _t}}l("a630"),l("fb6a"),l("b0c0"),l("25f0");function L(ut,pt){(pt==null||pt>ut.length)&&(pt=ut.length);for(var _t=0,Nt=new Array(pt);_t<pt;_t++)Nt[_t]=ut[_t];return Nt}function F(ut,pt){if(ut){if(typeof ut=="string")return L(ut,pt);var _t=Object.prototype.toString.call(ut).slice(8,-1);if(_t==="Object"&&ut.constructor&&(_t=ut.constructor.name),_t==="Map"||_t==="Set")return Array.from(ut);if(_t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_t))return L(ut,pt)}}function V(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(ut,pt){return A(ut)||k(ut,pt)||F(ut,pt)||V()}function N(ut){if(Array.isArray(ut))return L(ut)}function U(ut){if(typeof Symbol<"u"&&Symbol.iterator in Object(ut))return Array.from(ut)}function W(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(ut){return N(ut)||U(ut)||F(ut)||W()}var X=l("a352"),q=l.n(X);function G(ut){ut.parentElement!==null&&ut.parentElement.removeChild(ut)}function ee(ut,pt,_t){var Nt=_t===0?ut.children[0]:ut.children[_t-1].nextSibling;ut.insertBefore(pt,Nt)}var ue=l("dbf1");l("13d5"),l("4fad"),l("ac1f"),l("5319");function Y(ut){var pt=Object.create(null);return function(Nt){var Wt=pt[Nt];return Wt||(pt[Nt]=ut(Nt))}}var ce=/-(\w)/g,K=Y(function(ut){return ut.replace(ce,function(pt,_t){return _t.toUpperCase()})});l("5db7"),l("73d9");var Se=["Start","Add","Remove","Update","End"],Ve=["Choose","Unchoose","Sort","Filter","Clone"],Ne=["Move"],et=[Ne,Se,Ve].flatMap(function(ut){return ut}).map(function(ut){return"on".concat(ut)}),ot={manage:Ne,manageAndEmit:Se,emit:Ve};function Zt(ut){return et.indexOf(ut)!==-1}l("caad"),l("2ca0");var qe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Ue(ut){return qe.includes(ut)}function Tt(ut){return["transition-group","TransitionGroup"].includes(ut)}function Bt(ut){return["id","class","role","style"].includes(ut)||ut.startsWith("data-")||ut.startsWith("aria-")||ut.startsWith("on")}function kt(ut){return ut.reduce(function(pt,_t){var Nt=O(_t,2),Wt=Nt[0],wn=Nt[1];return pt[Wt]=wn,pt},{})}function un(ut){var pt=ut.$attrs,_t=ut.componentData,Nt=_t===void 0?{}:_t,Wt=kt(Object.entries(pt).filter(function(wn){var Xe=O(wn,2),de=Xe[0];return Xe[1],Bt(de)}));return M(M({},Wt),Nt)}function gt(ut){var pt=ut.$attrs,_t=ut.callBackBuilder,Nt=kt(ft(pt));Object.entries(_t).forEach(function(wn){var Xe=O(wn,2),de=Xe[0],ge=Xe[1];ot[de].forEach(function(xe){Nt["on".concat(xe)]=ge(xe)})});var Wt="[data-draggable]".concat(Nt.draggable||"");return M(M({},Nt),{},{draggable:Wt})}function ft(ut){return Object.entries(ut).filter(function(pt){var _t=O(pt,2),Nt=_t[0];return _t[1],!Bt(Nt)}).map(function(pt){var _t=O(pt,2),Nt=_t[0],Wt=_t[1];return[K(Nt),Wt]}).filter(function(pt){var _t=O(pt,2),Nt=_t[0];return _t[1],!Zt(Nt)})}l("c740");function lt(ut,pt){if(!(ut instanceof pt))throw new TypeError("Cannot call a class as a function")}function Pt(ut,pt){for(var _t=0;_t<pt.length;_t++){var Nt=pt[_t];Nt.enumerable=Nt.enumerable||!1,Nt.configurable=!0,"value"in Nt&&(Nt.writable=!0),Object.defineProperty(ut,Nt.key,Nt)}}function Lt(ut,pt,_t){return pt&&Pt(ut.prototype,pt),ut}var on=function(pt){var _t=pt.el;return _t},Ie=function(pt,_t){return pt.__draggable_context=_t},$=function(pt){return pt.__draggable_context},Pe=function(){function ut(pt){var _t=pt.nodes,Nt=_t.header,Wt=_t.default,wn=_t.footer,Xe=pt.root,de=pt.realList;lt(this,ut),this.defaultNodes=Wt,this.children=[].concat(ne(Nt),ne(Wt),ne(wn)),this.externalComponent=Xe.externalComponent,this.rootTransition=Xe.transition,this.tag=Xe.tag,this.realList=de}return Lt(ut,[{key:"render",value:function(_t,Nt){var Wt=this.tag,wn=this.children,Xe=this._isRootComponent,de=Xe?{default:function(){return wn}}:wn;return _t(Wt,Nt,de)}},{key:"updated",value:function(){var _t=this.defaultNodes,Nt=this.realList;_t.forEach(function(Wt,wn){Ie(on(Wt),{element:Nt[wn],index:wn})})}},{key:"getUnderlyingVm",value:function(_t){return $(_t)}},{key:"getVmIndexFromDomIndex",value:function(_t,Nt){var Wt=this.defaultNodes,wn=Wt.length,Xe=Nt.children,de=Xe.item(_t);if(de===null)return wn;var ge=$(de);if(ge)return ge.index;if(wn===0)return 0;var xe=on(Wt[0]),Ee=ne(Xe).findIndex(function(ve){return ve===xe});return _t<Ee?0:wn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),ut}(),Oe=l("8bbf");function ye(ut,pt){var _t=ut[pt];return _t?_t():[]}function pe(ut){var pt=ut.$slots,_t=ut.realList,Nt=ut.getKey,Wt=_t||[],wn=["header","footer"].map(function(ve){return ye(pt,ve)}),Xe=O(wn,2),de=Xe[0],ge=Xe[1],xe=pt.item;if(!xe)throw new Error("draggable element must have an item slot");var Ee=Wt.flatMap(function(ve,Qe){return xe({element:ve,index:Qe}).map(function(ht){return ht.key=Nt(ve),ht.props=M(M({},ht.props||{}),{},{"data-draggable":!0}),ht})});if(Ee.length!==Wt.length)throw new Error("Item slot must have only one child");return{header:de,footer:ge,default:Ee}}function Fe(ut){var pt=Tt(ut),_t=!Ue(ut)&&!pt;return{transition:pt,externalComponent:_t,tag:_t?Object(Oe.resolveComponent)(ut):pt?Oe.TransitionGroup:ut}}function tt(ut){var pt=ut.$slots,_t=ut.tag,Nt=ut.realList,Wt=ut.getKey,wn=pe({$slots:pt,realList:Nt,getKey:Wt}),Xe=Fe(_t);return new Pe({nodes:wn,root:Xe,realList:Nt})}function it(ut,pt){var _t=this;Object(Oe.nextTick)(function(){return _t.$emit(ut.toLowerCase(),pt)})}function Be(ut){var pt=this;return function(_t,Nt){if(pt.realList!==null)return pt["onDrag".concat(ut)](_t,Nt)}}function Mt(ut){var pt=this,_t=Be.call(this,ut);return function(Nt,Wt){_t.call(pt,Nt,Wt),it.call(pt,ut,Nt)}}var wt=null,At={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(pt){return pt}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ht=["update:modelValue","change"].concat(ne([].concat(ne(ot.manageAndEmit),ne(ot.emit)).map(function(ut){return ut.toLowerCase()}))),cn=Object(Oe.defineComponent)({name:"draggable",inheritAttrs:!1,props:At,emits:Ht,data:function(){return{error:!1}},render:function(){try{this.error=!1;var pt=this.$slots,_t=this.$attrs,Nt=this.tag,Wt=this.componentData,wn=this.realList,Xe=this.getKey,de=tt({$slots:pt,tag:Nt,realList:wn,getKey:Xe});this.componentStructure=de;var ge=un({$attrs:_t,componentData:Wt});return de.render(Oe.h,ge)}catch(xe){return this.error=!0,Object(Oe.h)("pre",{style:{color:"red"}},xe.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&ue.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var pt=this;if(!this.error){var _t=this.$attrs,Nt=this.$el,Wt=this.componentStructure;Wt.updated();var wn=gt({$attrs:_t,callBackBuilder:{manageAndEmit:function(ge){return Mt.call(pt,ge)},emit:function(ge){return it.bind(pt,ge)},manage:function(ge){return Be.call(pt,ge)}}}),Xe=Nt.nodeType===1?Nt:Nt.parentElement;this._sortable=new q.a(Xe,wn),this.targetDomElement=Xe,Xe.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var pt=this.list;return pt||this.modelValue},getKey:function(){var pt=this.itemKey;return typeof pt=="function"?pt:function(_t){return _t[pt]}}},watch:{$attrs:{handler:function(pt){var _t=this._sortable;_t&&ft(pt).forEach(function(Nt){var Wt=O(Nt,2),wn=Wt[0],Xe=Wt[1];_t.option(wn,Xe)})},deep:!0}},methods:{getUnderlyingVm:function(pt){return this.componentStructure.getUnderlyingVm(pt)||null},getUnderlyingPotencialDraggableComponent:function(pt){return pt.__draggable_component__},emitChanges:function(pt){var _t=this;Object(Oe.nextTick)(function(){return _t.$emit("change",pt)})},alterList:function(pt){if(this.list){pt(this.list);return}var _t=ne(this.modelValue);pt(_t),this.$emit("update:modelValue",_t)},spliceList:function(){var pt=arguments,_t=function(Wt){return Wt.splice.apply(Wt,ne(pt))};this.alterList(_t)},updatePosition:function(pt,_t){var Nt=function(wn){return wn.splice(_t,0,wn.splice(pt,1)[0])};this.alterList(Nt)},getRelatedContextFromMoveEvent:function(pt){var _t=pt.to,Nt=pt.related,Wt=this.getUnderlyingPotencialDraggableComponent(_t);if(!Wt)return{component:Wt};var wn=Wt.realList,Xe={list:wn,component:Wt};if(_t!==Nt&&wn){var de=Wt.getUnderlyingVm(Nt)||{};return M(M({},de),Xe)}return Xe},getVmIndexFromDomIndex:function(pt){return this.componentStructure.getVmIndexFromDomIndex(pt,this.targetDomElement)},onDragStart:function(pt){this.context=this.getUnderlyingVm(pt.item),pt.item._underlying_vm_=this.clone(this.context.element),wt=pt.item},onDragAdd:function(pt){var _t=pt.item._underlying_vm_;if(_t!==void 0){G(pt.item);var Nt=this.getVmIndexFromDomIndex(pt.newIndex);this.spliceList(Nt,0,_t);var Wt={element:_t,newIndex:Nt};this.emitChanges({added:Wt})}},onDragRemove:function(pt){if(ee(this.$el,pt.item,pt.oldIndex),pt.pullMode==="clone"){G(pt.clone);return}var _t=this.context,Nt=_t.index,Wt=_t.element;this.spliceList(Nt,1);var wn={element:Wt,oldIndex:Nt};this.emitChanges({removed:wn})},onDragUpdate:function(pt){G(pt.item),ee(pt.from,pt.item,pt.oldIndex);var _t=this.context.index,Nt=this.getVmIndexFromDomIndex(pt.newIndex);this.updatePosition(_t,Nt);var Wt={element:this.context.element,oldIndex:_t,newIndex:Nt};this.emitChanges({moved:Wt})},computeFutureIndex:function(pt,_t){if(!pt.element)return 0;var Nt=ne(_t.to.children).filter(function(de){return de.style.display!=="none"}),Wt=Nt.indexOf(_t.related),wn=pt.component.getVmIndexFromDomIndex(Wt),Xe=Nt.indexOf(wt)!==-1;return Xe||!_t.willInsertAfter?wn:wn+1},onDragMove:function(pt,_t){var Nt=this.move,Wt=this.realList;if(!Nt||!Wt)return!0;var wn=this.getRelatedContextFromMoveEvent(pt),Xe=this.computeFutureIndex(wn,pt),de=M(M({},this.context),{},{futureIndex:Xe}),ge=M(M({},pt),{},{relatedContext:wn,draggedContext:de});return Nt(ge,_t)},onDragEnd:function(){wt=null}}}),fn=cn;u.default=fn},fb6a:function(o,u,l){var s=l("23e7"),f=l("861d"),y=l("e8b5"),b=l("23cb"),x=l("50c4"),M=l("fc6a"),A=l("8418"),k=l("b622"),L=l("1dde"),F=l("ae40"),V=L("slice"),O=F("slice",{ACCESSORS:!0,0:0,1:2}),N=k("species"),U=[].slice,W=Math.max;s({target:"Array",proto:!0,forced:!V||!O},{slice:function(X,q){var G=M(this),ee=x(G.length),ue=b(X,ee),Y=b(q===void 0?ee:q,ee),ce,K,Se;if(y(G)&&(ce=G.constructor,typeof ce=="function"&&(ce===Array||y(ce.prototype))?ce=void 0:f(ce)&&(ce=ce[N],ce===null&&(ce=void 0)),ce===Array||ce===void 0))return U.call(G,ue,Y);for(K=new(ce===void 0?Array:ce)(W(Y-ue,0)),Se=0;ue<Y;ue++,Se++)ue in G&&A(K,Se,G[ue]);return K.length=Se,K}})},fc6a:function(o,u,l){var s=l("44ad"),f=l("1d80");o.exports=function(y){return s(f(y))}},fdbc:function(o,u){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(o,u,l){var s=l("4930");o.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(b4);var wee=b4.exports;const TP=fd(wee),Cee={components:{SvgIcon:An},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:Uk}}}},Iee={class:"draggable-handle__icon"},Mee={class:"draggale-item__info"};function See(e,t,n,i,o,u){const l=Eo("SvgIcon");return Ae(),st("div",{class:ei(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?an("",!0):(Ae(),st("div",{key:0,class:"draggable-handle",style:Yr({background:n.item.color})},[Le("div",Iee,[He(l,{size:"14",type:"mdi",path:u.path.draggable},null,8,["path"])])],4)),Le("div",Mee,[In(e.$slots,"default",{},void 0,!0)])],2)}const EI=Cn(Cee,[["render",See],["__scopeId","data-v-4edf7736"]]),Eee={class:"draggable-group__info"},Tee=["title"],Pee={class:"draggable-group__action"},kee={key:0,class:"draggable-group__divider"},Lee={key:0,class:"draggable-group__nodata"},Dee=Dn({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},readonly:Boolean},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group"],setup(e,{emit:t}){const n=t,i={group:{open:Hk,close:$k,unGroup:XN,delete:Kf,show:EM,hide:TM}},o=Qt(!0);function u(){o.value=!o.value}function l(){n("click:delete")}function s(){n("click:un-group")}return(f,y)=>(Ae(),$t(EI,{disabledDrag:e.disabledDrag,class:"draggable-group__item"},{default:dt(()=>[Le("div",Eee,[Le("span",{class:"draggable-group__title",title:e.layerGroup.name},gn(e.layerGroup.name),9,Tee),Le("div",Pee,[!e.readonly&&e.layerGroup.children&&e.layerGroup.children.length>0?(Ae(),st("span",{key:0,onClick:y[0]||(y[0]=b=>s())},[He(se(An),{size:"14",type:"mdi",path:i.group.unGroup},null,8,["path"])])):an("",!0),e.readonly?an("",!0):(Ae(),st("span",{key:1,onClick:y[1]||(y[1]=b=>l())},[He(se(An),{size:"14",type:"mdi",path:i.group.delete},null,8,["path"])])),Le("span",{onClick:y[2]||(y[2]=b=>u())},[o.value?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:i.group.close},null,8,["path"])):(Ae(),$t(se(An),{key:1,size:"14",type:"mdi",path:i.group.open},null,8,["path"]))])])]),o.value?(Ae(),st("div",kee)):an("",!0),Le("div",{class:ei({"draggable-group__children-container":!0,_show:o.value})},[In(f.$slots,"item",{group:e.layerGroup},()=>[!f.p_children||f.p_children.length<1?(Ae(),st("div",Lee," Drag layer inside this group ")):an("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),Ree=Cn(Dee,[["__scopeId","data-v-465facc7"]]),Oee={class:"draggable__item item"},zee={class:"draggable__item"},Fee=Dn({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(e,{expose:t,emit:n}){const i=e,o=n,u=Qt([]),l=Qt({}),s=dn({get(){return i.selected},set(U){o("update:selected",U)}}),f=U=>U&&U.isGroup,y=U=>{var G;const W=U.draggedContext.element,ne=(G=U.to.__vue__)==null?void 0:G.element,X=f(W),q=ne&&f(ne);return X&&q?!1:(!X&&!ne||!X&&ne&&!f(ne),!0)};ti(()=>{b(i.items)});function b(U=[]){(U==null||U.length===0)&&(U=i.items),u.value=x(U)}function x(U){let W=[];if(!U||U.length==0)return W;let ne={};return U.forEach(X=>{if(!X.group){W.push(X);return}ne[X.group.id]||(ne[X.group.id]=N(X.group),W.push(ne[X.group.id])),ne[X.group.id].children.push(X)}),W}function M(U){return U.reduce((W,ne)=>(ne.isGroup?ne.children.length>0&&W.push(...ne.children.map(X=>(X.group={id:ne.id,name:ne.name},X))):(ne.group=void 0,W.push(ne)),W),[])}function A(U){i.disabledSelect||(s.value.includes(U.id)?s.value=s.value.filter(W=>W!=U.id):(s.value.push(U.id),l.value[U.id]=U))}function k(U){let W=[];s.value&&s.value.length>0&&(u.value=u.value.filter(X=>!s.value.includes(X.id)).map(X=>("isGroup"in X&&X.isGroup&&(X.children=X.children.filter(q=>!s.value.includes(q.id))),X)),W=s.value.map(X=>l.value[X]),s.value=[],l.value={});let ne=N({name:U||"New Group",children:W});u.value.unshift(ne),ne.children.length>0&&V()}function L(U,W){u.value.splice(W,1),U.children.length>0&&u.value.splice(W,0,...U.children)}function F(U,W){u.value[W]={...u.value[W],...U}}function V(){Rl(()=>{o("update:items",M(u.value)),o("click-drag:done")})}function O(U,W){u.value.splice(W,1),o("click-group:remove",U)}function N(U){let W={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return W=Object.assign({},W,U),W}return t({update:b,addNewGroup:k}),(U,W)=>(Ae(),$t(se(TP),{modelValue:u.value,"onUpdate:modelValue":W[0]||(W[0]=ne=>u.value=ne),group:"layers","item-key":"id",animation:200,move:y,handle:".draggable-handle",class:"draggable-group-container",onEnd:V},{item:dt(({element:ne,index:X})=>[Le("div",Oee,[ne.isGroup?(Ae(),$t(Ree,{key:ne.id,"layer-group":ne,"onUpdate:layerGroup":q=>F(q,X),disabledDrag:e.disabledDrag,"onClick:delete":q=>O(ne,X),"onClick:unGroup":q=>L(ne,X),onDragDone:V,"onClick:select":A,onEnd:V},{item:dt(()=>[He(se(TP),{modelValue:ne.children,"onUpdate:modelValue":q=>ne.children=q,group:"layers",handle:".draggable-handle","item-key":"id",animation:200,move:y,class:"draggable-group-container"},{item:dt(({element:q,index:G})=>[Le("div",zee,[(Ae(),$t(EI,{disabledDrag:e.disabledDrag,isSelected:s.value.includes(q.id),item:q,key:q.id+"-child"},{default:dt(()=>[In(U.$slots,"item",{isSelected:s.value.includes(q.id),item:q,index:G,toggleSelect:A},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup"])):(Ae(),$t(EI,{disabledDrag:e.disabledDrag,isSelected:s.value.includes(ne.id),item:ne,key:ne.id+"-child"},{default:dt(()=>[In(U.$slots,"item",{isSelected:s.value.includes(ne.id),item:ne,index:X,toggleSelect:A},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))])]),_:3},8,["modelValue"]))}}),Bee=Cn(Fee,[["__scopeId","data-v-f4c80f65"]]),Nee={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(e){const t={loading:qk,layer:kM};return(n,i)=>(Ae(),st("div",null,[e.loading?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:t.loading,class:"spin"},null,8,["path"])):(Ae(),$t(se(An),{key:1,size:"14",type:"mdi",path:t.layer},null,8,["path"]))]))}},Vee={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:1},step:{default:.01},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},jee=["value","min","max","step","disabled"];function Uee(e,t,n,i,o,u){return Ae(),st("input",{value:u.form,onChange:t[0]||(t[0]=({target:l})=>u.form=parseFloat(l.value)),type:"range",min:n.min,max:n.max,step:n.step,style:Yr({backgroundSize:u.backgroundSize}),disabled:n.disabled},null,44,jee)}const $ee=Cn(Vee,[["render",Uee],["__scopeId","data-v-fb1c3ee7"]]),Hee={class:"menu-divider"},Gee=Dn({__name:"menu-divider",props:{item:{},data:{}},setup(e){return(t,n)=>(Ae(),st("div",Hee))}}),Zee=["title"],Wee=Dn({__name:"menu-item",props:{item:{}},setup(e){return(t,n)=>(Ae(),st("button",ar(t.$attrs,{class:"menu-item",title:t.item.name}),[t.item.icon?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:t.item.icon},null,8,["path"])):an("",!0)],16,Zee))}}),xC=Dn({__name:"index",props:{item:{},data:{},mapId:{}},setup(e){const t=e,n=dn(()=>{switch(t.item.type){case"divider":return Gee}return t.item.type=="item"&&"component"in t.item?t.item.component():Wee});return(i,o)=>(Ae(),$t(Ls(n.value),ar({item:i.item,data:i.data,mapId:i.mapId},i.$attrs),null,16,["item","data","mapId"]))}}),qee={class:"layer-item-container"},Kee={class:"layer-item__info"},Yee=["title"],Xee={class:"layer-item__title-action"},Qee=["disabled"],Jee=["disabled"],ete={key:0,class:"layer-item__action"},tte={key:0,class:"layer-item__opacity"},nte={key:1},rte=Dn({__name:"layer-item",props:{item:{},mapId:{},readonly:{type:Boolean}},emits:["update:item","click","click:remove","click:action","click:content-menu"],setup(e,{emit:t}){const n=e,i=t,o={menu:SM,delete:Kf,legendOpen:UN,legendClose:Kk},u=Qt(!1),l=dn({get(){return n.item.opacity},set(O){let N=n.item;N.opacity=O,i("update:item",N)}}),s=()=>{i("click:remove",n.item)},f=dn(()=>n.item?n.item.getMenus()||[]:[]),y=dn(()=>f.value.filter(O=>!O.location||O.location=="extra").sort((O,N)=>(O.order||0)-(N.order||0))),b=dn(()=>f.value.filter(O=>O.location=="bottom").sort((O,N)=>(O.order||0)-(N.order||0))),x=dn(()=>f.value.filter(O=>O.location=="menu").sort((O,N)=>(O.order||0)-(N.order||0))),M=dn(()=>!n.readonly&&(!n.item.config.disabled_opacity||b.value.length>0));function A(O){i("click:action",{action:O,item:n.item})}function k(O){i("click:content-menu",{event:O,actions:x.value,item:n.item})}const L=dn(()=>n.item&&n.item.legend),F=Qt(!1);function V(){F.value=!F.value}return(O,N)=>(Ae(),st("div",qee,[Le("div",Kee,[He(Nee,{class:"layer-item__icon",loading:u.value,item:{item:O.item}},null,8,["loading","item"]),Le("span",{class:"layer-item__title",title:O.item.getName(),onClick:N[0]||(N[0]=U=>i("click",O.item))},[Le("span",null,gn(O.item.getName()),1)],8,Yee),N[2]||(N[2]=Le("div",{class:"v-spacer"},null,-1)),Le("div",Xee,[In(O.$slots,"pre-btn",{loading:u.value},void 0,!0),(Ae(!0),st(Gn,null,ii(y.value,(U,W)=>(Ae(),$t(xC,{key:W,class:"layer-item__button",item:U,data:O.item,disabled:u.value,mapId:O.mapId,onClick:ne=>A(U)},null,8,["item","data","disabled","mapId","onClick"]))),128)),!O.item.config.disable_delete&&!n.readonly?(Ae(),st("button",{key:0,class:"layer-item__button",disabled:u.value,onClick:Rr(s,["stop"])},[He(se(An),{size:"14",type:"mdi",path:o.delete},null,8,["path"])],8,Qee)):an("",!0),In(O.$slots,"extra-btn",{loading:u.value},void 0,!0),x.value.length>0?(Ae(),st("button",{key:1,class:"layer-item__button",disabled:u.value,onClick:Rr(k,["prevent","stop"])},[He(se(An),{size:"14",type:"mdi",path:o.menu},null,8,["path"])],8,Jee)):an("",!0),M.value?an("",!0):(Ae(),st(Gn,{key:2},[(Ae(!0),st(Gn,null,ii(b.value,(U,W)=>(Ae(),$t(xC,{key:W,class:"layer-item__button",item:U,data:O.item,disabled:u.value,mapId:O.mapId,onClick:ne=>A(U)},null,8,["item","data","disabled","mapId","onClick"]))),128)),L.value?(Ae(),st("button",{key:0,class:"layer-item__button",onClick:Rr(V,["stop"])},[He(se(An),{size:"14",type:"mdi",path:F.value?o.legendClose:o.legendOpen},null,8,["path"])])):an("",!0)],64))])]),M.value?(Ae(),st("div",ete,[O.item.config.disabled_opacity?an("",!0):(Ae(),st("div",tte,[He($ee,{modelValue:l.value,"onUpdate:modelValue":N[1]||(N[1]=U=>l.value=U),modelModifiers:{number:!0},disabled:u.value},null,8,["modelValue","disabled"])])),N[3]||(N[3]=Le("div",{class:"v-spacer"},null,-1)),(Ae(!0),st(Gn,null,ii(b.value,(U,W)=>(Ae(),$t(xC,{key:W,class:"layer-item__button",item:U,data:O.item,disabled:u.value,mapId:O.mapId,onClick:ne=>A(U)},null,8,["item","data","disabled","mapId","onClick"]))),128)),L.value?(Ae(),st("button",{key:1,class:"layer-item__button",onClick:Rr(V,["stop"])},[He(se(An),{size:"14",type:"mdi",path:F.value?o.legendClose:o.legendOpen},null,8,["path"])])):an("",!0)])):an("",!0),n.item.legend&&F.value?(Ae(),st("div",nte,[(Ae(),$t(Ls(n.item.legend())))])):an("",!0)]))}}),L4=Cn(rte,[["__scopeId","data-v-1b24f90a"]]),ite={class:"layer-control-container"},ste={class:"layer-control__header"},ate={class:"layer-control__list"},ote={class:"layer-context-menu"},lte=["onClick"],ute={class:"layer-context-menu__item-icon"},cte=["innerHTML"],hte=Dn({__name:"LayerList",props:{...Ti,disabledDrag:Boolean,disabled:Boolean},setup(e){const t=e,n={group:{create:PM},deleteAll:Kf},{callMap:i,mapId:o}=Nr(t),{getAllComponentsByType:u,getDatasetIds:l,removeComponent:s}=Qy(o.value),f=Qt([]),y=dn(()=>l().value);hs(y,()=>{F()},{deep:!0}),ti(()=>{F()});const b=Qt(void 0),x=Qt([]);function M(){i(ee=>{let ue="";f.value.slice().forEach((Y,ce)=>{Y.index=ce,ex(Y.getParent(),[K=>{xu(K)&&(K.moveLayer(ee,ue),ue=K.getBeforeId())}])})})}function A(ee){ee&&typeof ee!="string"&&(!ee||!ee.children||ee.children.length===0||ee.children.forEach(ue=>{s(ue)}))}function k(ee){i(ue=>{cd(ee.getParent(),Y=>xu(Y),[Y=>{ee.config.disabled_opacity||Y.setOpacity(ue,ee.opacity)}])})}function L(ee){ee&&(s(ee),F())}function F(){O(),Rl(()=>{V()})}function V(){b.value&&b.value.update(f.value)}function O(){f.value=u("list").sort((ee,ue)=>ue.index-ee.index)||[]}function N(){b.value&&b.value.addNewGroup("")}function U(){!f.value||f.value.length===0||(f.value.forEach(ee=>{s(ee)}),F())}const W=Qt(),ne=yu({items:[],view:void 0});function X({event:ee,item:ue,actions:Y}){ne.items=Y?[...Y]:[],ne.view=ue,W.value&&W.value.open(ee,ue)}function q(){ne.items=[],ne.view=void 0,W.value&&W.value.close()}function G({action:ee,item:ue}){qA(ee,ue,o.value,ue)}return(ee,ue)=>(Ae(),st("div",ite,[Le("div",ste,[In(ee.$slots,"title",{},void 0,!0),ue[4]||(ue[4]=Le("div",{class:"v-spacer"},null,-1)),He(BJ,{items:f.value},null,8,["items"]),Le("button",{class:"layer-item__button",onClick:ue[0]||(ue[0]=Y=>N())},[He(se(An),{size:"16",type:"mdi",path:n.group.create},null,8,["path"])]),Le("button",{class:"layer-item__button",onClick:U},[He(se(An),{size:"16",type:"mdi",path:n.deleteAll},null,8,["path"])])]),Le("div",ate,[He(Bee,{ref_key:"groupRef",ref:b,items:f.value,"onUpdate:items":ue[1]||(ue[1]=Y=>f.value=Y),selected:x.value,"onUpdate:selected":ue[2]||(ue[2]=Y=>x.value=Y),disabled:e.disabled,disabledDrag:e.disabledDrag,"onClickDrag:done":ue[3]||(ue[3]=Y=>M()),"onClickGroup:remove":A},{item:dt(({isSelected:Y,item:ce,toggleSelect:K})=>[In(ee.$slots,"item",{item:ce,isSelected:Y,toggleSelect:K},()=>[(Ae(),$t(Ls(ce.component||L4),{item:ce,isSelected:Y,onClick:Se=>K(ce),"onUpdate:item":k,"onClick:remove":L,"onClick:contentMenu":X,"onClick:action":G,mapId:se(o),readonly:!1},null,40,["item","isSelected","onClick","mapId"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),He(se(oS),{ref_key:"contextMenuRef",ref:W},{default:dt(()=>[Le("ul",ote,[(Ae(!0),st(Gn,null,ii(ne.items,(Y,ce)=>(Ae(),st("li",{key:ce,onClick:Rr(K=>{G({action:Y,item:ne.view}),q()},["stop"]),class:ei(["layer-context-menu__item",[Y.class,Y.type==="divider"?"layer-context-menu__divider":""]])},[Le("div",ute,[He(se(An),{size:"16",type:"mdi",path:Y.icon||ee.mdiCircleSmall},null,8,["path"])]),Le("span",{innerHTML:Y.name},null,8,cte)],10,lte))),128))])]),_:1},512)]))}}),dte=Cn(hte,[["__scopeId","data-v-ef3a2e1f"]]),fte={class:"layer-control__title"},pte={class:"layer-control"},mte={class:"base-map-card-container"},gte={name:"layer-control"},yte=Dn({...gte,props:{...Ti,..._L({show:!1})},setup(e){const t=e,{mapId:n,moduleContainerProps:i}=Nr(t),{trans:o,setLocale:u}=Hi(n.value);u({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const l={icon:kM,menu:SM,group:{create:PM},deleteAll:Kf,layer:{create:Yf}},[s,f]=ld(t.show),[y,b]=ld();function x(){b()}return(M,A)=>(Ae(),$t(se(ts),$i(zi(se(i))),{btn:dt(()=>[se(s)?an("",!0):(Ae(),$t(se(Br),{key:0,tooltip:se(o)("map.layer-control.title"),onClick:A[0]||(A[0]=Rr(k=>se(f)(),["stop"])),active:se(s)},{default:dt(()=>[He(se(An),{size:"14",type:"mdi",path:l.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:dt(k=>[He(se(CL),{containerId:k.containerId,show:se(s),"onUpdate:show":A[2]||(A[2]=L=>Ii(s)?s.value=L:null)},{title:dt(()=>[Le("span",fte,gn(se(o)("map.layer-control.title")),1)]),default:dt(()=>[Le("div",pte,[He(dte,{mapId:se(n)},{title:dt(()=>[In(M.$slots,"titleList",{mapId:se(n)},()=>[Le("button",{class:"layer-item__button",onClick:A[1]||(A[1]=Rr(L=>x(),["stop"]))},[He(se(An),{size:"14",type:"mdi",path:l.layer.create},null,8,["path"])])],!0)]),_:3},8,["mapId"]),Le("div",mte,[In(M.$slots,"endList",{mapId:se(n)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:dt(()=>[He(hJ,{show:se(y),"onUpdate:show":A[3]||(A[3]=k=>Ii(y)?y.value=k:null)},null,8,["show"]),In(M.$slots,"default",{},void 0,!0),He(RJ)]),_:3},16))}}),vte=Cn(yte,[["__scopeId","data-v-aed77753"]]);function _te(e){const t=[];if(!e||e.length==0)return t;const n={};return e.forEach(i=>{if(!i.group){t.push(i);return}n[i.group.id]||(n[i.group.id]=bte(i.group),t.push(n[i.group.id])),n[i.group.id].children.push(i)}),t}function bte(e){let t={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return t=Object.assign({},t,e),t}const xte={components:{SvgIcon:An},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:Uk}}}},Ate={class:"draggable-handle__icon"},wte={class:"draggale-item__info"};function Cte(e,t,n,i,o,u){const l=Eo("SvgIcon");return Ae(),st("div",{class:ei(["draggale-item",{"draggale-item-active":n.isSelected}])},[n.disabledDrag?an("",!0):(Ae(),st("div",{key:0,class:"draggable-handle",style:Yr({background:n.item.color})},[Le("div",Ate,[He(l,{size:"14",type:"mdi",path:u.path.draggable},null,8,["path"])])],4)),Le("div",wte,[In(e.$slots,"default",{},void 0,!0)])],2)}const D4=Cn(xte,[["render",Cte],["__scopeId","data-v-7e4827cb"]]),Ite={class:"draggable-group__info"},Mte=["title"],Ste={class:"draggable-group__action"},Ete={key:0,class:"draggable-group__divider"},Tte={key:0,class:"draggable-group__nodata"},Pte=Dn({__name:"ListGroupItem",props:{item:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,readonly:Boolean},setup(e){const t={group:{open:Hk,close:$k}},n=Qt(!0);function i(){n.value=!n.value}return(o,u)=>(Ae(),$t(D4,{disabledDrag:e.disabledDrag,class:"draggable-group__item"},{default:dt(()=>[Le("div",Ite,[Le("span",{class:"draggable-group__title",title:e.item.name},gn(e.item.name),9,Mte),Le("div",Ste,[In(o.$slots,"extra-data",{item:e.item},void 0,!0),Le("span",{onClick:u[0]||(u[0]=l=>i())},[n.value?(Ae(),$t(se(An),{key:0,size:"14",type:"mdi",path:t.group.close},null,8,["path"])):(Ae(),$t(se(An),{key:1,size:"14",type:"mdi",path:t.group.open},null,8,["path"]))])])]),n.value?(Ae(),st("div",Ete)):an("",!0),Le("div",{class:ei({"draggable-group__children-container":!0,_show:n.value})},[In(o.$slots,"items-list",{},()=>[!e.item.children||e.item.children.length===0?(Ae(),st("div",Tte," Drag layer inside this group ")):an("",!0)],!0)],2)]),_:3},8,["disabledDrag"]))}}),kte=Cn(Pte,[["__scopeId","data-v-2a8c9003"]]),Lte={class:"draggable-group__children"},Dte={class:"leaf-item"},Rte=["title"],Ote={name:"RecursiveList"},zte=Dn({...Ote,props:{item:{type:Object,required:!0},disabledDrag:{type:Boolean,default:!1},isGroup:{type:Function,default:e=>Array.isArray(e.children)},isLeaf:{type:Function,default:e=>!Array.isArray(e.children)}},setup(e){return(t,n)=>{const i=Eo("RecursiveList",!0);return e.isGroup(e.item)?(Ae(),$t(kte,{key:0,item:e.item,"disabled-drag":e.disabledDrag},{"extra-data":dt(({item:o})=>[In(t.$slots,"group-extra-data",{item:o},void 0,!0)]),"items-list":dt(()=>[Le("div",Lte,[(Ae(!0),st(Gn,null,ii(e.item.children,(o,u)=>(Ae(),$t(i,{key:o.id||u,item:o,"disabled-drag":e.disabledDrag,"is-group":e.isGroup,"is-leaf":e.isLeaf},{"group-extra-data":dt(({item:l})=>[In(t.$slots,"group-extra-data",{item:l},void 0,!0)]),leaf:dt(({item:l})=>[In(t.$slots,"leaf",{item:l},void 0,!0)]),_:2},1032,["item","disabled-drag","is-group","is-leaf"]))),128))])]),_:3},8,["item","disabled-drag"])):(Ae(),$t(D4,{key:1,item:e.item,"disabled-drag":e.disabledDrag},{default:dt(()=>[In(t.$slots,"leaf",{item:e.item},()=>[Le("div",Dte,[Le("span",{class:"leaf-item__title",title:e.item.name},gn(e.item.name),9,Rte)])],!0)]),_:3},8,["item","disabled-drag"]))}}}),Fte=Cn(zte,[["__scopeId","data-v-58a983c4"]]),Bte={class:"layer-control-container"},Nte={class:"layer-control__list"},Vte={class:"layer-context-menu"},jte=["onClick"],Ute={class:"layer-context-menu__item-icon"},$te=["innerHTML"],Hte=Dn({__name:"LayerListReadonly",props:{...Ti,disabledDrag:Boolean,disabled:Boolean},setup(e){const t=e,{callMap:n,mapId:i}=Nr(t),{getAllComponentsByType:o}=Qy(i.value),u=Qt([]);ti(()=>{s()});function l(V){n(O=>{cd(V.getParent(),N=>xu(N),[N=>{N.toggleShow(O,V.show)},N=>{V.config.disabled_opacity||N.setOpacity(O,V.opacity)}])})}function s(){x(),Rl(()=>{b()})}const f=to(),y=Qt([]);function b(){var V;y.value=_te(u.value),(V=f==null?void 0:f.proxy)==null||V.$forceUpdate()}function x(){u.value=o("list").sort((V,O)=>O.index-V.index)||[]}const M=Qt(),A=yu({items:[],view:void 0});function k({event:V,item:O,actions:N}){A.items=N?[...N]:[],A.view=O,M.value&&M.value.open(V,O)}function L(){A.items=[],A.view=void 0,M.value&&M.value.close()}function F({action:V,item:O}){qA(V,O,i.value,O)}return(V,O)=>(Ae(),st("div",Bte,[O[0]||(O[0]=Le("div",{class:"layer-control__header"},[Le("div",{class:"v-spacer"})],-1)),Le("div",Nte,[(Ae(!0),st(Gn,null,ii(y.value,(N,U)=>(Ae(),st("div",{key:N.id||U},[He(Fte,{item:N,disabledDrag:""},{leaf:dt(({item:W})=>[(Ae(),$t(Ls(W.component||L4),{item:W,"onUpdate:item":l,"onClick:contentMenu":k,"onClick:action":F,mapId:se(i),readonly:""},null,40,["item","mapId"]))]),_:2},1032,["item"])]))),128))]),He(se(oS),{ref_key:"contextMenuRef",ref:M},{default:dt(()=>[Le("ul",Vte,[(Ae(!0),st(Gn,null,ii(A.items,(N,U)=>(Ae(),st("li",{key:U,onClick:Rr(W=>{F({action:N,item:A.view}),L()},["stop"]),class:ei(["layer-context-menu__item",[N.class,N.type==="divider"?"layer-context-menu__divider":""]])},[Le("div",Ute,[He(se(An),{size:"16",type:"mdi",path:N.icon||V.mdiCircleSmall},null,8,["path"])]),Le("span",{innerHTML:N.name},null,8,$te)],10,jte))),128))])]),_:1},512)]))}}),Gte=Cn(Hte,[["__scopeId","data-v-c361108e"]]),Zte={class:"layer-control__title"},Wte={class:"layer-control"},qte={class:"base-map-card-container"},Kte={name:"layer-control"};({...Kte,props:{...Ti,..._L({show:!1})}});const om="source-highlighted",AC="layer-highlighted",Yte=Dn({__name:"LayerHighlight",props:{...Ti},setup(e){const t=e,n=Qt({point:`${AC}-point`,line:`${AC}-line`,polygon:`${AC}-polygon`}),i=Qt({point:{type:"circle",filter:["==","$type","Point"],paint:{"circle-radius":6,"circle-color":"#004E98","circle-opacity":.7,"circle-stroke-width":2,"circle-stroke-color":"#fff"}},line:{type:"line",filter:["==","$type","LineString"],paint:{"line-color":"#004E98","line-width":4,"line-dasharray":[2,4]}},polygon:{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":"#004E98","fill-opacity":.4}}}),{mapId:o,callMap:u}=Nr(t,y,b),{getFeatureHighlight:l,setFeatureHighlight:s,getDatesetHighlight:f}=WA(o.value);function y(ee){ee.addSource(om,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),Object.keys(n.value).forEach(ue=>{const Y=n.value[ue];ee.getLayer(Y)||ee.addLayer({...i.value[ue],id:Y,source:om})})}function b(ee){Object.values(n.value).forEach(ue=>{ee.getLayer(ue)&&ee.removeLayer(ue)}),ee.getSource(om)&&ee.removeSource(om)}const x=dn(()=>l()),M=(ee,ue,Y)=>{Object.keys(n.value).forEach(ce=>{const K=n.value[ce];ee.getLayer(K)&&ee.removeLayer(K);const Se=$r(i.value[ce]),Ve=(ue==null?void 0:ue.highlight(Y))||{};ee.addLayer({...Se,id:K,source:om,...Ve,filter:dj(Se.filter,Ve.filter)})})},A=(ee,ue)=>{const Y=ee.getSource(om);Y&&Y.setData(ue||{type:"FeatureCollection",features:[]})},k=(ee,ue=5e3)=>{Object.values(n.value).forEach(Y=>{ee.getLayer(Y)&&ee.moveLayer(Y)}),X(ee),ue>0&&setTimeout(()=>{G(ee)},ue)},L=Qt({});function F(ee){const ue=f();let Y;ue&&(Y=bu(ue,ce=>ce.type=="highlight")),u(ce=>{M(ce,Y,ee),Y||A(ce,ee),ee&&k(ce)})}hs(x,()=>{var ee;F((ee=x.value)==null?void 0:ee.value)},{deep:!0});let V=6,O=!0,N=0,U=.4,W=1;function ne(ee){V+=O?.2:-.2,V>=12&&(O=!1),V<=6&&(O=!0),ee.setPaintProperty(n.value.point,"circle-radius",V),N+=.1,N=+N.toFixed(1),N>=6&&(N=0);const Y=[2,4].map(ce=>ce+N);ee.setPaintProperty(n.value.line,"line-dasharray",Y),U+=W*.05,U>.8&&(W=-1),U<.2&&(W=1),ee.setPaintProperty(n.value.polygon,"fill-opacity",U),L.value[ee.id]=requestAnimationFrame(()=>ne(ee))}function X(ee){L.value[ee.id]==null&&ne(ee)}function q(ee){const ue=L.value[ee.id];ue!=null&&(cancelAnimationFrame(ue),L.value[ee.id]=null)}function G(ee){ee.getSource(om).setData({type:"FeatureCollection",features:[]}),s(void 0,"",void 0),q(ee)}return(ee,ue)=>(Ae(),st("div"))}}),Xte={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value},items(){return this.value.items||[]},colors(){return this.items.map(e=>e.color)}}},Qte={class:"legend-item"},Jte={class:"legend-text"},ene={class:"legend-value-container"};function tne(e,t,n,i,o,u){return Ae(),st("div",Qte,[Le("div",Jte,gn(u.item.text)+":",1),Le("div",ene,[(Ae(!0),st(Gn,null,ii(u.items,(l,s)=>(Ae(),st("div",{class:"legend-value",key:s},gn(l.value),1))),128))]),Le("div",null,[Le("div",{style:Yr({background:`linear-gradient(to right,${u.colors.join(",")})`}),class:"legend-item-color"},null,4)])])}const nne=Cn(Xte,[["render",tne],["__scopeId","data-v-38b04422"]]),rne={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},ine={class:"legend-item"},sne={class:"legend-text"},ane={class:"legend-value"};function one(e,t,n,i,o,u){return Ae(),st("div",ine,[Le("div",sne,gn(u.item.text)+":",1),Le("div",{style:Yr({background:`${u.item.color}`}),class:"legend-item-color"},null,4),Le("div",ane,gn(u.item.value),1)])}const lne=Cn(rne,[["render",one],["__scopeId","data-v-261080ab"]]),une={props:{value:{type:Object,default:()=>({})}},computed:{item(){return this.value}}},cne={class:"legend-item"},hne={class:"legend-text"},dne={class:"legend-value"};function fne(e,t,n,i,o,u){return Ae(),st("div",cne,[Le("div",hne,gn(u.item.text)+":",1),Le("div",dne,gn(u.item.value),1)])}const pne=Cn(une,[["render",fne],["__scopeId","data-v-81e4c2e4"]]),R4={linear:nne,color:lne,text:pne};function mne(e,t){const n=R4[e];return()=>So(n,{value:t})}function gne(e){return()=>Dn({name:"MultiLegend",setup(){return()=>e.map(t=>{const n=R4[t.type];return So(n,{value:t.value})})}})}const TI=function(e,t){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},i={on(u,l,s){if(n[u]===void 0)throw new Error(`Invalid event type: ${u}`);n[u].push({selector:l,fn:s})},render(u){t.store.featureChanged(u)}},o=function(u,l){const s=n[u];let f=s.length;for(;f--;){const y=s[f];if(y.selector(l)){y.fn.call(i,l)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(i),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(u){o("drag",u)},click(u){o("click",u)},mousemove(u){o("mousemove",u)},mousedown(u){o("mousedown",u)},mouseup(u){o("mouseup",u)},mouseout(u){o("mouseout",u)},keydown(u){o("keydown",u)},keyup(u){o("keyup",u)},touchstart(u){o("touchstart",u)},touchmove(u){o("touchmove",u)},touchend(u){o("touchend",u)},tap(u){o("tap",u)}}};var dS={},YA={};YA.RADIUS=6378137;YA.FLATTENING=1/298.257223563;YA.POLAR_RADIUS=63567523142e-4;var PP=YA;dS.geometry=O4;dS.ring=PI;function O4(e){var t=0,n;switch(e.type){case"Polygon":return kP(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=kP(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)t+=O4(e.geometries[n]);return t}}function kP(e){var t=0;if(e&&e.length>0){t+=Math.abs(PI(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(PI(e[n]))}return t}function PI(e){var t,n,i,o,u,l,s,f=0,y=e.length;if(y>2){for(s=0;s<y;s++)s===y-2?(o=y-2,u=y-1,l=0):s===y-1?(o=y-1,u=0,l=1):(o=s,u=s+1,l=s+2),t=e[o],n=e[u],i=e[l],f+=(wC(i[0])-wC(t[0]))*Math.sin(wC(n[1]));f=f*PP.RADIUS*PP.RADIUS/2}return f}function wC(e){return e*Math.PI/180}const Jo={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},cu={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},Ji={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},tl={POLYGON:"polygon",LINE:"line_string",POINT:"point"},Wn={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},Fr={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},Do={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},K_={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},eo={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},va={ACTIVE:"true",INACTIVE:"false"},z4=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],yne=-90,kI=-85,vne=90,LI=85,_ne=-270,bne=270,F4=Object.freeze(Object.defineProperty({__proto__:null,LAT_MAX:vne,LAT_MIN:yne,LAT_RENDERED_MAX:LI,LAT_RENDERED_MIN:kI,LNG_MAX:bne,LNG_MIN:_ne,activeStates:va,classes:Jo,cursors:Ji,events:Do,geojsonTypes:Wn,interactions:z4,meta:eo,modes:Fr,sources:cu,types:tl,updateActions:K_},Symbol.toStringTag,{value:"Module"})),LP={Point:0,LineString:1,MultiLineString:1,Polygon:2};function xne(e,t){const n=LP[e.geometry.type]-LP[t.geometry.type];return n===0&&e.geometry.type===Wn.POLYGON?e.area-t.area:n}function B4(e){return e.map(t=>(t.geometry.type===Wn.POLYGON&&(t.area=dS.geometry({type:Wn.FEATURE,property:{},geometry:t.geometry})),t)).sort(xne).map(t=>(delete t.area,t))}function N4(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function pu(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}pu.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};pu.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};pu.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};pu.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,n)=>t.v-n.v).map(t=>t.k)};pu.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const Ane=[eo.FEATURE,eo.MIDPOINT,eo.VERTEX],Fy={click:wne,touch:Cne};function wne(e,t,n){return V4(e,t,n,n.options.clickBuffer)}function Cne(e,t,n){return V4(e,t,n,n.options.touchBuffer)}function V4(e,t,n,i){if(n.map===null)return[];const o=e?N4(e,i):t,u={};n.options.styles&&(u.layers=n.options.styles.map(y=>y.id).filter(y=>n.map.getLayer(y)!=null));const l=n.map.queryRenderedFeatures(o,u).filter(y=>Ane.indexOf(y.properties.meta)!==-1),s=new pu,f=[];return l.forEach(y=>{const b=y.properties.id;s.has(b)||(s.add(b),f.push(y))}),B4(f)}function ux(e,t){const n=Fy.click(e,null,t),i={mouse:Ji.NONE};return n[0]&&(i.mouse=n[0].properties.active===va.ACTIVE?Ji.MOVE:Ji.POINTER,i.feature=n[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(i.mouse=Ji.ADD),t.ui.queueMapClasses(i),t.ui.updateMapClasses(),n[0]}function fS(e,t){const n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}const Ine=4,Mne=12,Sne=500;function DI(e,t,n={}){const i=n.fineTolerance!=null?n.fineTolerance:Ine,o=n.grossTolerance!=null?n.grossTolerance:Mne,u=n.interval!=null?n.interval:Sne;e.point=e.point||t.point,e.time=e.time||t.time;const l=fS(e.point,t.point);return l<i||l<o&&t.time-e.time<u}const Ene=25,Tne=250;function RI(e,t,n={}){const i=n.tolerance!=null?n.tolerance:Ene,o=n.interval!=null?n.interval:Tne;return e.point=e.point||t.point,e.time=e.time||t.time,fS(e.point,t.point)<i&&t.time-e.time<o}let Pne=(e,t=21)=>(n=t)=>{let i="",o=n|0;for(;o--;)i+=e[Math.random()*e.length|0];return i};const kne=Pne("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function pS(){return kne()}const Ro=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||pS(),this.type=t.geometry.type};Ro.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};Ro.prototype.incomingCoords=function(e){this.setCoordinates(e)};Ro.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Ro.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};Ro.prototype.setProperty=function(e,t){this.properties[e]=t};Ro.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:Wn.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};Ro.prototype.internal=function(e){const t={id:this.id,meta:eo.FEATURE,"meta:type":this.type,active:va.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t[`user_${n}`]=this.properties[n];return{type:Wn.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const Qf=function(e,t){Ro.call(this,e,t)};Qf.prototype=Object.create(Ro.prototype);Qf.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};Qf.prototype.updateCoordinate=function(e,t,n){arguments.length===3?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()};Qf.prototype.getCoordinate=function(){return this.getCoordinates()};const hh=function(e,t){Ro.call(this,e,t)};hh.prototype=Object.create(Ro.prototype);hh.prototype.isValid=function(){return this.coordinates.length>1};hh.prototype.addCoordinate=function(e,t,n){this.changed();const i=parseInt(e,10);this.coordinates.splice(i,0,[t,n])};hh.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};hh.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};hh.prototype.updateCoordinate=function(e,t,n){const i=parseInt(e,10);this.coordinates[i]=[t,n],this.changed()};const Bl=function(e,t){Ro.call(this,e,t),this.coordinates=this.coordinates.map(n=>n.slice(0,-1))};Bl.prototype=Object.create(Ro.prototype);Bl.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Bl.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Bl.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Bl.prototype.addCoordinate=function(e,t,n){this.changed();const i=e.split(".").map(u=>parseInt(u,10));this.coordinates[i[0]].splice(i[1],0,[t,n])};Bl.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(i=>parseInt(i,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))};Bl.prototype.getCoordinate=function(e){const t=e.split(".").map(i=>parseInt(i,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))};Bl.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Bl.prototype.updateCoordinate=function(e,t,n){this.changed();const i=e.split("."),o=parseInt(i[0],10),u=parseInt(i[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][u]=[t,n]};const Lne={MultiPoint:Qf,MultiLineString:hh,MultiPolygon:Bl},XA=(e,t,n,i,o)=>{const u=n.split("."),l=parseInt(u[0],10),s=u[1]?u.slice(1).join("."):null;return e[l][t](s,i,o)},Lo=function(e,t){if(Ro.call(this,e,t),delete this.coordinates,this.model=Lne[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};Lo.prototype=Object.create(Ro.prototype);Lo.prototype._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(n=>new t(this.ctx,{id:pS(),type:Wn.FEATURE,properties:{},geometry:{coordinates:n,type:this.type.replace("Multi","")}}))};Lo.prototype.isValid=function(){return this.features.every(e=>e.isValid())};Lo.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};Lo.prototype.getCoordinate=function(e){return XA(this.features,"getCoordinate",e)};Lo.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===Wn.POLYGON?e.getCoordinates():e.coordinates)))};Lo.prototype.updateCoordinate=function(e,t,n){XA(this.features,"updateCoordinate",e,t,n),this.changed()};Lo.prototype.addCoordinate=function(e,t,n){XA(this.features,"addCoordinate",e,t,n),this.changed()};Lo.prototype.removeCoordinate=function(e){XA(this.features,"removeCoordinate",e),this.changed()};Lo.prototype.getFeatures=function(){return this.features};function Sr(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}Sr.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};Sr.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,n)=>(t[n.feature_id]===void 0&&(t[n.feature_id]=!0,this._ctx.store.get(n.feature_id).changed()),t),{})};Sr.prototype.getSelected=function(){return this._ctx.store.getSelected()};Sr.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};Sr.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};Sr.prototype.getFeature=function(e){return this._ctx.store.get(e)};Sr.prototype.select=function(e){return this._ctx.store.select(e)};Sr.prototype.deselect=function(e){return this._ctx.store.deselect(e)};Sr.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};Sr.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};Sr.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};Sr.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};Sr.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};Sr.prototype.changeMode=function(e,t={},n={}){return this._ctx.events.changeMode(e,t,n)};Sr.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};Sr.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};Sr.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};Sr.prototype.featuresAt=function(e,t,n="click"){if(n!=="click"&&n!=="touch")throw new Error("invalid buffer type");return Fy[n](e,t,this._ctx)};Sr.prototype.newFeature=function(e){const t=e.geometry.type;return t===Wn.POINT?new Qf(this._ctx,e):t===Wn.LINE_STRING?new hh(this._ctx,e):t===Wn.POLYGON?new Bl(this._ctx,e):new Lo(this._ctx,e)};Sr.prototype.isInstanceOf=function(e,t){if(e===Wn.POINT)return t instanceof Qf;if(e===Wn.LINE_STRING)return t instanceof hh;if(e===Wn.POLYGON)return t instanceof Bl;if(e==="MultiFeature")return t instanceof Lo;throw new Error(`Unknown feature class: ${e}`)};Sr.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};Sr.prototype.onSetup=function(){};Sr.prototype.onDrag=function(){};Sr.prototype.onClick=function(){};Sr.prototype.onMouseMove=function(){};Sr.prototype.onMouseDown=function(){};Sr.prototype.onMouseUp=function(){};Sr.prototype.onMouseOut=function(){};Sr.prototype.onKeyUp=function(){};Sr.prototype.onKeyDown=function(){};Sr.prototype.onTouchStart=function(){};Sr.prototype.onTouchMove=function(){};Sr.prototype.onTouchEnd=function(){};Sr.prototype.onTap=function(){};Sr.prototype.onStop=function(){};Sr.prototype.onTrash=function(){};Sr.prototype.onCombineFeature=function(){};Sr.prototype.onUncombineFeature=function(){};Sr.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const j4={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Dne=Object.keys(j4);function Rne(e){const t=Object.keys(e);return function(n,i={}){let o={};const u=t.reduce((s,f)=>(s[f]=e[f],s),new Sr(n));function l(s){return f=>u[s](o,f)}return{start(){o=u.onSetup(i),Dne.forEach(s=>{const f=j4[s];let y=()=>!1;e[f]&&(y=()=>!0),this.on(s,y,l(f))})},stop(){u.onStop(o)},trash(){u.onTrash(o)},combineFeatures(){u.onCombineFeatures(o)},uncombineFeatures(){u.onUncombineFeatures(o)},render(s,f){u.toDisplayFeatures(o,s,f)}}}}function One(e){const t=Object.keys(e.options.modes).reduce((M,A)=>(M[A]=Rne(e.options.modes[A]),M),{});let n={},i={};const o={};let u=null,l=null;o.drag=function(M,A){A({point:M.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:Ji.DRAG}),l.drag(M)):M.originalEvent.stopPropagation()},o.mousedrag=function(M){o.drag(M,A=>!DI(n,A))},o.touchdrag=function(M){o.drag(M,A=>!RI(i,A))},o.mousemove=function(M){if((M.originalEvent.buttons!==void 0?M.originalEvent.buttons:M.originalEvent.which)===1)return o.mousedrag(M);const k=ux(M,e);M.featureTarget=k,l.mousemove(M)},o.mousedown=function(M){n={time:new Date().getTime(),point:M.point};const A=ux(M,e);M.featureTarget=A,l.mousedown(M)},o.mouseup=function(M){const A=ux(M,e);M.featureTarget=A,DI(n,{point:M.point,time:new Date().getTime()})?l.click(M):l.mouseup(M)},o.mouseout=function(M){l.mouseout(M)},o.touchstart=function(M){if(!e.options.touchEnabled)return;i={time:new Date().getTime(),point:M.point};const A=Fy.touch(M,null,e)[0];M.featureTarget=A,l.touchstart(M)},o.touchmove=function(M){if(e.options.touchEnabled)return l.touchmove(M),o.touchdrag(M)},o.touchend=function(M){if(M.originalEvent.preventDefault(),!e.options.touchEnabled)return;const A=Fy.touch(M,null,e)[0];M.featureTarget=A,RI(i,{time:new Date().getTime(),point:M.point})?l.tap(M):l.touchend(M)};const s=M=>!(M===8||M===46||M>=48&&M<=57);o.keydown=function(M){(M.srcElement||M.target).classList.contains(Jo.CANVAS)&&((M.keyCode===8||M.keyCode===46)&&e.options.controls.trash?(M.preventDefault(),l.trash()):s(M.keyCode)?l.keydown(M):M.keyCode===49&&e.options.controls.point?f(Fr.DRAW_POINT):M.keyCode===50&&e.options.controls.line_string?f(Fr.DRAW_LINE_STRING):M.keyCode===51&&e.options.controls.polygon&&f(Fr.DRAW_POLYGON))},o.keyup=function(M){s(M.keyCode)&&l.keyup(M)},o.zoomend=function(){e.store.changeZoom()},o.data=function(M){if(M.dataType==="style"){const{setup:A,map:k,options:L,store:F}=e;L.styles.some(O=>k.getLayer(O.id))||(A.addLayers(),F.setDirty(),F.render())}};function f(M,A,k={}){l.stop();const L=t[M];if(L===void 0)throw new Error(`${M} is not valid`);u=M;const F=L(e,A);l=TI(F,e),k.silent||e.map.fire(Do.MODE_CHANGE,{mode:M}),e.store.setDirty(),e.store.render()}const y={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function b(M){let A=!1;Object.keys(M).forEach(k=>{if(y[k]===void 0)throw new Error("Invalid action type");y[k]!==M[k]&&(A=!0),y[k]=M[k]}),A&&e.map.fire(Do.ACTIONABLE,{actions:y})}return{start(){u=e.options.defaultMode,l=TI(t[u](e),e)},changeMode:f,actionable:b,currentModeName(){return u},currentModeRender(M,A){return l.render(M,A)},fire(M,A){e.map&&e.map.fire(M,A)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(M){l.trash(M)},combineFeatures(){l.combineFeatures()},uncombineFeatures(){l.uncombineFeatures()},getMode(){return u}}}function Y_(e){return[].concat(e).filter(t=>t!==void 0)}function zne(){const e=this;if(!(e.ctx.map&&e.ctx.map.getSource(cu.HOT)!==void 0))return f();const n=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:n});let i=[],o=[];e.isDirty?o=e.getAllIds():(i=e.getChangedIds().filter(y=>e.get(y)!==void 0),o=e.sources.hot.filter(y=>y.properties.id&&i.indexOf(y.properties.id)===-1&&e.get(y.properties.id)!==void 0).map(y=>y.properties.id)),e.sources.hot=[];const u=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(y=>{const b=y.properties.id||y.properties.parent;return i.indexOf(b)===-1});const l=u!==e.sources.cold.length||o.length>0;i.forEach(y=>s(y,"hot")),o.forEach(y=>s(y,"cold"));function s(y,b){const M=e.get(y).internal(n);e.ctx.events.currentModeRender(M,A=>{A.properties.mode=n,e.sources[b].push(A)})}l&&e.ctx.map.getSource(cu.COLD).setData({type:Wn.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(cu.HOT).setData({type:Wn.FEATURE_COLLECTION,features:e.sources.hot}),f();function f(){e.isDirty=!1,e.clearChangedIds()}}function Fi(e){this._features={},this._featureIds=new pu,this._selectedFeatureIds=new pu,this._selectedCoordinates=[],this._changedFeatureIds=new pu,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,zne.call(this),this._emitSelectionChange&&(this.ctx.events.fire(Do.SELECTION_CHANGE,{features:this.getSelected().map(n=>n.toGeoJSON()),points:this.getSelectedCoordinates().map(n=>({type:Wn.FEATURE,properties:{},geometry:{type:Wn.POINT,coordinates:n.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(Do.RENDER,{})}))},this.isDirty=!1}Fi.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Fi.prototype.setDirty=function(){return this.isDirty=!0,this};Fi.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){const i=this.get(e);this.ctx.events.fire(Do.CREATE,{features:[i.toGeoJSON()]})}return this};Fi.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(Do.UPDATE,{action:t.action?t.action:K_.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Fi.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Fi.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Fi.prototype.getAllIds=function(){return this._featureIds.values()};Fi.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Fi.prototype.delete=function(e,t={}){const n=[];return Y_(e).forEach(i=>{this._featureIds.has(i)&&(this._featureIds.delete(i),this._selectedFeatureIds.delete(i),t.silent||n.indexOf(this._features[i])===-1&&n.push(this._features[i].toGeoJSON()),delete this._features[i],this.isDirty=!0)}),n.length&&this.ctx.events.fire(Do.DELETE,{features:n}),U4(this,t),this};Fi.prototype.get=function(e){return this._features[e]};Fi.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Fi.prototype.select=function(e,t={}){return Y_(e).forEach(n=>{this._selectedFeatureIds.has(n)||(this._selectedFeatureIds.add(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),this};Fi.prototype.deselect=function(e,t={}){return Y_(e).forEach(n=>{this._selectedFeatureIds.has(n)&&(this._selectedFeatureIds.delete(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),U4(this,t),this};Fi.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Fi.prototype.setSelected=function(e,t={}){return e=Y_(e),this.deselect(this._selectedFeatureIds.values().filter(n=>e.indexOf(n)===-1),{silent:t.silent}),this.select(e.filter(n=>!this._selectedFeatureIds.has(n)),{silent:t.silent}),this};Fi.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Fi.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Fi.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Fi.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Fi.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Fi.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Fi.prototype.setFeatureProperty=function(e,t,n,i={}){this.get(e).setProperty(t,n),this.featureChanged(e,{silent:i.silent,action:K_.CHANGE_PROPERTIES})};function U4(e,t={}){const n=e._selectedCoordinates.filter(i=>e._selectedFeatureIds.has(i.feature_id));e._selectedCoordinates.length!==n.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=n}Fi.prototype.storeMapConfig=function(){z4.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Fi.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Fi.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};const Fne=["mode","feature","mouse"];function Bne(e){const t={};let n=null,i={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function u(){l({mode:null,feature:null,mouse:null}),s()}function l(A){o=Object.assign(o,A)}function s(){if(!e.container)return;const A=[],k=[];Fne.forEach(L=>{o[L]!==i[L]&&(A.push(`${L}-${i[L]}`),o[L]!==null&&k.push(`${L}-${o[L]}`))}),A.length>0&&e.container.classList.remove(...A),k.length>0&&e.container.classList.add(...k),i=Object.assign(i,o)}function f(A,k={}){const L=document.createElement("button");return L.className=`${Jo.CONTROL_BUTTON} ${k.className}`,L.setAttribute("title",k.title),k.container.appendChild(L),L.addEventListener("click",F=>{if(F.preventDefault(),F.stopPropagation(),F.target===n){y(),k.onDeactivate();return}b(A),k.onActivate()},!0),L}function y(){n&&(n.classList.remove(Jo.ACTIVE_BUTTON),n=null)}function b(A){y();const k=t[A];k&&k&&A!=="trash"&&(k.classList.add(Jo.ACTIVE_BUTTON),n=k)}function x(){const A=e.options.controls,k=document.createElement("div");return k.className=`${Jo.CONTROL_GROUP} ${Jo.CONTROL_BASE}`,A&&(A[tl.LINE]&&(t[tl.LINE]=f(tl.LINE,{container:k,className:Jo.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(Fr.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),A[tl.POLYGON]&&(t[tl.POLYGON]=f(tl.POLYGON,{container:k,className:Jo.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(Fr.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),A[tl.POINT]&&(t[tl.POINT]=f(tl.POINT,{container:k,className:Jo.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(Fr.DRAW_POINT),onDeactivate:()=>e.events.trash()})),A.trash&&(t.trash=f("trash",{container:k,className:Jo.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),A.combine_features&&(t.combine_features=f("combineFeatures",{container:k,className:Jo.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),A.uncombine_features&&(t.uncombine_features=f("uncombineFeatures",{container:k,className:Jo.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),k}function M(){Object.keys(t).forEach(A=>{const k=t[A];k.parentNode&&k.parentNode.removeChild(k),delete t[A]})}return{setActiveButton:b,queueMapClasses:l,updateMapClasses:s,clearMapClasses:u,addButtons:x,removeButtons:M}}function Nne(e){let t=null,n=null;const i={onRemove(){return e.map.off("load",i.connect),clearInterval(n),i.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",i.connect),clearInterval(n),i.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=One(e),e.ui=Bne(e),e.container=o.getContainer(),e.store=new Fi(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();const u=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),u||o.dragPan.disable()}return o.loaded()?i.connect():(o.on("load",i.connect),n=setInterval(()=>{o.loaded()&&i.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(cu.COLD,{data:{type:Wn.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(cu.HOT,{data:{type:Wn.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(cu.COLD)&&e.map.removeSource(cu.COLD),e.map.getSource(cu.HOT)&&e.map.removeSource(cu.HOT)}};return e.setup=i,i}const CC="#3bb2d0",v0="#fbb03b",DP="#fff",$4=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],v0,CC],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],v0,CC],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":DP}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],v0,CC]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":DP}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":v0}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":v0}}];function QA(e){return function(t){const n=t.featureTarget;return!n||!n.properties?!1:n.properties.meta===e}}function H4(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function Fm(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===va.ACTIVE&&e.featureTarget.properties.meta===eo.FEATURE}function mS(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===va.INACTIVE&&e.featureTarget.properties.meta===eo.FEATURE}function JA(e){return e.featureTarget===void 0}function gS(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===eo.FEATURE}function X_(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===eo.VERTEX}function Gx(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function ew(e){return e.keyCode===27}function tw(e){return e.keyCode===13}function Vne(){return!0}const jne=Object.freeze(Object.defineProperty({__proto__:null,isActiveFeature:Fm,isEnterKey:tw,isEscapeKey:ew,isFeature:gS,isInactiveFeature:mS,isOfMetaType:QA,isShiftDown:Gx,isShiftMousedown:H4,isTrue:Vne,isVertex:X_,noTarget:JA},Symbol.toStringTag,{value:"Module"}));function Lf(e,t){this.x=e,this.y=t}Lf.prototype={clone(){return new Lf(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),i=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=i,this.y=o,this},_rotateAround(e,t){const n=Math.cos(e),i=Math.sin(e),o=t.x+n*(this.x-t.x)-i*(this.y-t.y),u=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=o,this.y=u,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Lf};Lf.convert=function(e){if(e instanceof Lf)return e;if(Array.isArray(e))return new Lf(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Lf(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function yS(e,t){const n=t.getBoundingClientRect();return new Lf(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function By(e,t,n,i){return{type:Wn.FEATURE,properties:{meta:eo.VERTEX,parent:e,coord_path:n,active:i?va.ACTIVE:va.INACTIVE},geometry:{type:Wn.POINT,coordinates:t}}}function G4(e,t,n){const i=t.geometry.coordinates,o=n.geometry.coordinates;if(i[1]>LI||i[1]<kI||o[1]>LI||o[1]<kI)return null;const u={lng:(i[0]+o[0])/2,lat:(i[1]+o[1])/2};return{type:Wn.FEATURE,properties:{meta:eo.MIDPOINT,parent:e,lng:u.lng,lat:u.lat,coord_path:n.properties.coord_path},geometry:{type:Wn.POINT,coordinates:[u.lng,u.lat]}}}function nw(e,t={},n=null){const{type:i,coordinates:o}=e.geometry,u=e.properties&&e.properties.id;let l=[];i===Wn.POINT?l.push(By(u,o,n,f(n))):i===Wn.POLYGON?o.forEach((b,x)=>{s(b,n!==null?`${n}.${x}`:String(x))}):i===Wn.LINE_STRING?s(o,n):i.indexOf(Wn.MULTI_PREFIX)===0&&y();function s(b,x){let M="",A=null;b.forEach((k,L)=>{const F=x!=null?`${x}.${L}`:String(L),V=By(u,k,F,f(F));if(t.midpoints&&A){const N=G4(u,A,V);N&&l.push(N)}A=V;const O=JSON.stringify(k);M!==O&&l.push(V),L===0&&(M=O)})}function f(b){return t.selectedPaths?t.selectedPaths.indexOf(b)!==-1:!1}function y(){const b=i.replace(Wn.MULTI_PREFIX,"");o.forEach((x,M)=>{const A={type:Wn.FEATURE,properties:e.properties,geometry:{type:b,coordinates:x}};l=l.concat(nw(A,t,M))})}return l}const dc={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},{LAT_MIN:Fb,LAT_MAX:Bb,LAT_RENDERED_MIN:RP,LAT_RENDERED_MAX:OP,LNG_MIN:zP,LNG_MAX:FP}=F4;function Une(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],n=[e.geometry.coordinates].flat(t),i=n.map(s=>s[0]),o=n.map(s=>s[1]),u=s=>Math.min.apply(null,s),l=s=>Math.max.apply(null,s);return[u(i),u(o),l(i),l(o)]}function vS(e,t){let n=Fb,i=Bb,o=Fb,u=Bb,l=FP,s=zP;e.forEach(y=>{const b=Une(y),x=b[1],M=b[3],A=b[0],k=b[2];x>n&&(n=x),M<i&&(i=M),M>o&&(o=M),x<u&&(u=x),A<l&&(l=A),k>s&&(s=k)});const f=t;return n+f.lat>OP&&(f.lat=OP-n),o+f.lat>Bb&&(f.lat=Bb-o),i+f.lat<RP&&(f.lat=RP-i),u+f.lat<Fb&&(f.lat=Fb-u),l+f.lng<=zP&&(f.lng+=Math.ceil(Math.abs(f.lng)/360)*360),s+f.lng>=FP&&(f.lng-=Math.ceil(Math.abs(f.lng)/360)*360),f}function _S(e,t){const n=vS(e.map(i=>i.toGeoJSON()),t);e.forEach(i=>{const o=i.getCoordinates(),u=y=>{const b={lng:y[0]+n.lng,lat:y[1]+n.lat};return[b.lng,b.lat]},l=y=>y.map(b=>u(b)),s=y=>y.map(b=>l(b));let f;i.type===Wn.POINT?f=u(o):i.type===Wn.LINE_STRING||i.type===Wn.MULTI_POINT?f=o.map(u):i.type===Wn.POLYGON||i.type===Wn.MULTI_LINE_STRING?f=o.map(l):i.type===Wn.MULTI_POLYGON&&(f=o.map(s)),i.incomingCoords(f)})}const Si={};Si.onSetup=function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(n=>this.getFeature(n)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};Si.fireUpdate=function(){this.fire(Do.UPDATE,{action:K_.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};Si.fireActionable=function(){const e=this.getSelected(),t=e.filter(u=>this.isInstanceOf("MultiFeature",u));let n=!1;if(e.length>1){n=!0;const u=e[0].type.replace("Multi","");e.forEach(l=>{l.type.replace("Multi","")!==u&&(n=!1)})}const i=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:i,trash:o})};Si.getUniqueIds=function(e){return e.length?e.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,i)=>(n.add(i),n),new pu).values():[]};Si.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};Si.onStop=function(){dc.enable(this)};Si.onMouseMove=function(e,t){return gS(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};Si.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};Si.onTap=Si.onClick=function(e,t){if(JA(t))return this.clickAnywhere(e,t);if(QA(eo.VERTEX)(t))return this.clickOnVertex(e,t);if(gS(t))return this.clickOnFeature(e,t)};Si.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(n=>this.doRender(n))),dc.enable(this),this.stopExtendedInteractions(e)};Si.clickOnVertex=function(e,t){this.changeMode(Fr.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:Ji.MOVE})};Si.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Si.clickOnFeature=function(e,t){dc.disable(this),this.stopExtendedInteractions(e);const n=Gx(t),i=this.getSelectedIds(),o=t.featureTarget.properties.id,u=this.isSelected(o);if(!n&&u&&this.getFeature(o).type!==Wn.POINT)return this.changeMode(Fr.DIRECT_SELECT,{featureId:o});u&&n?(this.deselect(o),this.updateUIClasses({mouse:Ji.POINTER}),i.length===1&&dc.enable(this)):!u&&n?(this.select(o),this.updateUIClasses({mouse:Ji.MOVE})):!u&&!n&&(i.forEach(l=>this.doRender(l)),this.setSelected(o),this.updateUIClasses({mouse:Ji.MOVE})),this.doRender(o)};Si.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),Fm(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&H4(t))return this.startBoxSelect(e,t)};Si.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=yS(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};Si.onTouchStart=function(e,t){if(Fm(t))return this.startOnActiveFeature(e,t)};Si.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};Si.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:Ji.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(Jo.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=yS(t.originalEvent,this.map.getContainer()),i=Math.min(e.boxSelectStartLocation.x,n.x),o=Math.max(e.boxSelectStartLocation.x,n.x),u=Math.min(e.boxSelectStartLocation.y,n.y),l=Math.max(e.boxSelectStartLocation.y,n.y),s=`translate(${i}px, ${u}px)`;e.boxSelectElement.style.transform=s,e.boxSelectElement.style.WebkitTransform=s,e.boxSelectElement.style.width=`${o-i}px`,e.boxSelectElement.style.height=`${l-u}px`};Si.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};_S(this.getSelected(),n),e.dragMoveLocation=t.lngLat};Si.onTouchEnd=Si.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,yS(t.originalEvent,this.map.getContainer())],i=this.featuresAt(null,n,"click"),o=this.getUniqueIds(i).filter(u=>!this.isSelected(u));o.length&&(this.select(o),o.forEach(u=>this.doRender(u)),this.updateUIClasses({mouse:Ji.MOVE}))}this.stopExtendedInteractions(e)};Si.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?va.ACTIVE:va.INACTIVE,n(t),this.fireActionable(),!(t.properties.active!==va.ACTIVE||t.geometry.type===Wn.POINT)&&nw(t).forEach(n)};Si.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};Si.onCombineFeatures=function(){const e=this.getSelected();if(e.length===0||e.length<2)return;const t=[],n=[],i=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){const u=e[o];if(u.type.replace("Multi","")!==i)return;u.type.includes("Multi")?u.getCoordinates().forEach(l=>{t.push(l)}):t.push(u.getCoordinates()),n.push(u.toGeoJSON())}if(n.length>1){const o=this.newFeature({type:Wn.FEATURE,properties:n[0].properties,geometry:{type:`Multi${i}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(Do.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:n})}this.fireActionable()};Si.onUncombineFeatures=function(){const e=this.getSelected();if(e.length===0)return;const t=[],n=[];for(let i=0;i<e.length;i++){const o=e[i];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(u=>{this.addFeature(u),u.properties=o.properties,t.push(u.toGeoJSON()),this.select([u.id])}),this.deleteFeature(o.id,{silent:!0}),n.push(o.toGeoJSON()))}t.length>1&&this.fire(Do.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const Z4=QA(eo.VERTEX),W4=QA(eo.MIDPOINT),Ei={};Ei.fireUpdate=function(){this.fire(Do.UPDATE,{action:K_.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};Ei.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};Ei.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Ei.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};Ei.onVertex=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,i=e.selectedCoordPaths.indexOf(n.coord_path);!Gx(t)&&i===-1?e.selectedCoordPaths=[n.coord_path]:Gx(t)&&i===-1&&e.selectedCoordPaths.push(n.coord_path);const o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};Ei.onMidpoint=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]};Ei.pathsToCoordinates=function(e,t){return t.map(n=>({feature_id:e,coord_path:n}))};Ei.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};Ei.dragFeature=function(e,t,n){_S(this.getSelected(),n),e.dragMoveLocation=t.lngLat};Ei.dragVertex=function(e,t,n){const i=e.selectedCoordPaths.map(l=>e.feature.getCoordinate(l)),o=i.map(l=>({type:Wn.FEATURE,properties:{},geometry:{type:Wn.POINT,coordinates:l}})),u=vS(o,n);for(let l=0;l<i.length;l++){const s=i[l];e.feature.updateCoordinate(e.selectedCoordPaths[l],s[0]+u.lng,s[1]+u.lat)}};Ei.clickNoTarget=function(){this.changeMode(Fr.SIMPLE_SELECT)};Ei.clickInactive=function(){this.changeMode(Fr.SIMPLE_SELECT)};Ei.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};Ei.onSetup=function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===Wn.POINT)throw new TypeError("direct_select mode doesn't handle point features");const i={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,i.selectedCoordPaths)),this.setSelected(t),dc.disable(this),this.setActionableState({trash:!0}),i};Ei.onStop=function(){dc.enable(this),this.clearSelectedCoordinates()};Ei.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=va.ACTIVE,n(t),nw(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=va.INACTIVE,n(t)),this.fireActionable(e)};Ei.onTrash=function(e){e.selectedCoordPaths.sort((t,n)=>n.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(Fr.SIMPLE_SELECT,{}))};Ei.onMouseMove=function(e,t){const n=Fm(t),i=Z4(t),o=W4(t),u=e.selectedCoordPaths.length===0;return n&&u?this.updateUIClasses({mouse:Ji.MOVE}):i&&!u?this.updateUIClasses({mouse:Ji.MOVE}):this.updateUIClasses({mouse:Ji.NONE}),(i||n||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};Ei.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};Ei.onTouchStart=Ei.onMouseDown=function(e,t){if(Z4(t))return this.onVertex(e,t);if(Fm(t))return this.onFeature(e,t);if(W4(t))return this.onMidpoint(e,t)};Ei.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat};Ei.onClick=function(e,t){if(JA(t))return this.clickNoTarget(e,t);if(Fm(t))return this.clickActiveFeature(e,t);if(mS(t))return this.clickInactive(e,t);this.stopDragging(e)};Ei.onTap=function(e,t){if(JA(t))return this.clickNoTarget(e,t);if(Fm(t))return this.clickActiveFeature(e,t);if(mS(t))return this.clickInactive(e,t)};Ei.onTouchEnd=Ei.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const lh={};lh.onSetup=function(){const e=this.newFeature({type:Wn.FEATURE,properties:{},geometry:{type:Wn.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Ji.ADD}),this.activateUIButton(tl.POINT),this.setActionableState({trash:!0}),{point:e}};lh.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT)};lh.onTap=lh.onClick=function(e,t){this.updateUIClasses({mouse:Ji.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(Do.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.point.id]})};lh.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};lh.toDisplayFeatures=function(e,t,n){const i=t.properties.id===e.point.id;if(t.properties.active=i?va.ACTIVE:va.INACTIVE,!i)return n(t)};lh.onTrash=lh.stopDrawingAndRemove;lh.onKeyUp=function(e,t){if(ew(t)||tw(t))return this.stopDrawingAndRemove(e,t)};function Zx(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}const fc={};fc.onSetup=function(){const e=this.newFeature({type:Wn.FEATURE,properties:{},geometry:{type:Wn.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),dc.disable(this),this.updateUIClasses({mouse:Ji.ADD}),this.activateUIButton(tl.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};fc.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Zx(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:Ji.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};fc.clickOnVertex=function(e){return this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};fc.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),X_(t)&&this.updateUIClasses({mouse:Ji.POINTER})};fc.onTap=fc.onClick=function(e,t){return X_(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};fc.onKeyUp=function(e,t){ew(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT)):tw(t)&&this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};fc.onStop=function(e){this.updateUIClasses({mouse:Ji.NONE}),dc.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(Do.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT,{},{silent:!0})))};fc.toDisplayFeatures=function(e,t,n){const i=t.properties.id===e.polygon.id;if(t.properties.active=i?va.ACTIVE:va.INACTIVE,!i)return n(t);if(t.geometry.coordinates.length===0)return;const o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=eo.FEATURE,n(By(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){const u=t.geometry.coordinates[0].length-3;n(By(e.polygon.id,t.geometry.coordinates[0][u],`0.${u}`,!1))}if(o<=4){const u=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:Wn.FEATURE,properties:t.properties,geometry:{coordinates:u,type:Wn.LINE_STRING}}),o===3)return}return n(t)}};fc.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT)};const pc={};pc.onSetup=function(e){e=e||{};const t=e.featureId;let n,i,o="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let u=e.from;if(u&&u.type==="Feature"&&u.geometry&&u.geometry.type==="Point"&&(u=u.geometry),u&&u.type==="Point"&&u.coordinates&&u.coordinates.length===2&&(u=u.coordinates),!u||!Array.isArray(u))throw new Error("Please use the `from` property to indicate which point to continue the line from");const l=n.coordinates.length-1;if(n.coordinates[l][0]===u[0]&&n.coordinates[l][1]===u[1])i=l+1,n.addCoordinate(i,...n.coordinates[l]);else if(n.coordinates[0][0]===u[0]&&n.coordinates[0][1]===u[1])o="backwards",i=0,n.addCoordinate(i,...n.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else n=this.newFeature({type:Wn.FEATURE,properties:{},geometry:{type:Wn.LINE_STRING,coordinates:[]}}),i=0,this.addFeature(n);return this.clearSelectedFeatures(),dc.disable(this),this.updateUIClasses({mouse:Ji.ADD}),this.activateUIButton(tl.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:i,direction:o}};pc.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Zx(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&Zx(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:Ji.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};pc.clickOnVertex=function(e){return this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.line.id]})};pc.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),X_(t)&&this.updateUIClasses({mouse:Ji.POINTER})};pc.onTap=pc.onClick=function(e,t){if(X_(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};pc.onKeyUp=function(e,t){tw(t)?this.changeMode(Fr.SIMPLE_SELECT,{featureIds:[e.line.id]}):ew(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT))};pc.onStop=function(e){dc.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(Do.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT,{},{silent:!0})))};pc.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Fr.SIMPLE_SELECT)};pc.toDisplayFeatures=function(e,t,n){const i=t.properties.id===e.line.id;if(t.properties.active=i?va.ACTIVE:va.INACTIVE,!i)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=eo.FEATURE,n(By(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),n(t))};const q4={simple_select:Si,direct_select:Ei,draw_point:lh,draw_polygon:fc,draw_line_string:pc},$ne={defaultMode:Fr.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:$4,modes:q4,controls:{},userProperties:!1,suppressAPIEvents:!0},Hne={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Gne={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function BP(e,t){return e.map(n=>n.source?n:Object.assign({},n,{id:`${n.id}.${t}`,source:t==="hot"?cu.HOT:cu.COLD}))}function Zne(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},Gne,e.controls):t.controls=Object.assign({},Hne,e.controls),t=Object.assign({},$ne,t),t.styles=BP(t.styles,"cold").concat(BP(t.styles,"hot")),t}var Wne=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,o,u;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(o=i;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(u=Object.keys(t),i=u.length,i!==Object.keys(n).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,u[o]))return!1;for(o=i;o--!==0;){var l=u[o];if(!e(t[l],n[l]))return!1}return!0}return t!==t&&n!==n};const NP=fd(Wne);var qne=Yne,Kne={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Yne(e){if(!e||!e.type)return null;var t=Kne[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}const Xne=fd(qne);function K4(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(n=>n).sort())===JSON.stringify(t.map(n=>n).sort())}const Qne={Polygon:Bl,LineString:hh,Point:Qf,MultiPolygon:Lo,MultiLineString:Lo,MultiPoint:Lo};function Jne(e,t){t.modes=Fr;const n=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(i){return Fy.click({point:i},null,e).map(u=>u.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:Wn.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(i=>e.store.get(i)).map(i=>i.toGeoJSON())}},t.getSelectedPoints=function(){return{type:Wn.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(i=>({type:Wn.FEATURE,properties:{},geometry:{type:Wn.POINT,coordinates:i.coordinates}}))}},t.set=function(i){if(i.type===void 0||i.type!==Wn.FEATURE_COLLECTION||!Array.isArray(i.features))throw new Error("Invalid FeatureCollection");const o=e.store.createRenderBatch();let u=e.store.getAllIds().slice();const l=t.add(i),s=new pu(l);return u=u.filter(f=>!s.has(f)),u.length&&t.delete(u),o(),l},t.add=function(i){const u=JSON.parse(JSON.stringify(Xne(i))).features.map(l=>{if(l.id=l.id||pS(),l.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(l.id)===void 0||e.store.get(l.id).type!==l.geometry.type){const s=Qne[l.geometry.type];if(s===void 0)throw new Error(`Invalid geometry type: ${l.geometry.type}.`);const f=new s(e,l);e.store.add(f,{silent:n})}else{const s=e.store.get(l.id),f=s.properties;s.properties=l.properties,NP(f,l.properties)||e.store.featureChanged(s.id,{silent:n}),NP(s.getCoordinates(),l.geometry.coordinates)||s.incomingCoords(l.geometry.coordinates)}return l.id});return e.store.render(),u},t.get=function(i){const o=e.store.get(i);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:Wn.FEATURE_COLLECTION,features:e.store.getAll().map(i=>i.toGeoJSON())}},t.delete=function(i){return e.store.delete(i,{silent:n}),t.getMode()===Fr.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(Fr.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:n}),t.getMode()===Fr.DIRECT_SELECT?e.events.changeMode(Fr.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.changeMode=function(i,o={}){return i===Fr.SIMPLE_SELECT&&t.getMode()===Fr.SIMPLE_SELECT?(K4(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:n}),e.store.render()),t):(i===Fr.DIRECT_SELECT&&t.getMode()===Fr.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(i,o,{silent:n}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:n}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:n}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:n}),t},t.setFeatureProperty=function(i,o,u){return e.store.setFeatureProperty(i,o,u,{silent:n}),t},t}const ere=Object.freeze(Object.defineProperty({__proto__:null,CommonSelectors:jne,ModeHandler:TI,StringSet:pu,constrainFeatureMovement:vS,createMidPoint:G4,createSupplementaryPoints:nw,createVertex:By,doubleClickZoom:dc,euclideanDistance:fS,featuresAt:Fy,getFeatureAtAndSetCursors:ux,isClick:DI,isEventAtCoordinates:Zx,isTap:RI,mapEventToBoundingBox:N4,moveFeatures:_S,sortFeatures:B4,stringSetsAreEqual:K4,theme:$4,toDenseArray:Y_},Symbol.toStringTag,{value:"Module"})),tre=function(e,t){e=Zne(e);const n={options:e};t=Jne(n,t),n.api=t;const i=Nne(n);return t.onAdd=i.onAdd,t.onRemove=i.onRemove,t.types=tl,t.options=e,t};function rw(e){tre(e,this)}rw.modes=q4;rw.constants=F4;rw.lib=ere;const qc=al.createLogger().setNamespace("map:draw",2),nre="draw",rre=e=>zl(["map:core",e,nre],()=>(Kn(qc,e,"store").debug("init"),{control:null,state:yu({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}}))(),bS=e=>{const t=rre(e),n=U=>{Kn(qc,e,"store").debug("initDrawControl",U),t.control=U},i=(U,W)=>{if(!U)throw new Error("Need register id");Kn(qc,e,"store").debug("activateDraw",U,W);const ne=t.state,X=t.control;ne.register_id=U,ne.activated=!0,X.changeMode("simple_select"),W&&X.add(W)},o=()=>{Kn(qc,e,"store").debug("deactivateDraw");const U=t.control,W=s(t);t.action.save&&t.action.save(W.geojson),t.action.close&&t.action.close(),t.state.draw_support=[];const ne=t.state;ne.show=!1,t.action={},ne.register_id=void 0,ne.activated=!1,t.callback=void 0,t.featuresAdded={},t.featuresUpdated={},t.featuresDeleted={},U==null||U.deleteAll()};function u(U){const W=t.state;if(!W.activated)throw new Error("Need to call activateDraw first");if(W.register_id&&W.register_id!==U)throw new Error("register id not match")}const l=(U,W,ne,X)=>{Kn(qc,e,"store").debug("draw",{register_id:U,type:W,callback:ne,options:X}),u(U);const q=t.control;t.callback=ne,q.changeMode(W,X)};function s(U){const W=U.control,ne=U.featuresDeleted,X=U.featuresAdded,q=U.featuresUpdated,G={added:{},updated:{},deleted:ne,geojson:{type:"FeatureCollection",features:[]}},ee=W.getAll();return ee.features.forEach(ue=>{const Y=ue.id;X[Y]?(G.added[Y]=ue,ue.properties||(ue.properties={}),ue.properties.id=ue.id):q[Y]&&(G.updated[Y]=ue)}),G.geojson=ee,G}const f=(U,W)=>{const ne=t.state,X=t.action;if(u(U),W&&!(W instanceof Function))throw new Error("Callback is not available");const q=s(t);Kn(qc,e,"store").debug("saveDraw",{register_id:U,result:q}),X.deleteFeatures&&X.deleteFeatures(Object.values(q.deleted)),X.addFeatures&&X.addFeatures(Object.values(q.added)),X.updateFeatures&&X.updateFeatures(Object.values(q.updated)),X.reset&&X.reset(),W&&W(q),ne.activated=!1,b()};function y(){Kn(qc,e,"store").debug("cancelDraw");const U=t.state;b(),U.activated=!1}const b=()=>{Kn(qc,e,"store").debug("clearDraw");const U=t.state;t.featuresAdded={},t.featuresAdded={},t.featuresDeleted={},U.cleanAfterDone&&t.control.deleteAll(),t.control.changeMode("simple_select")};function x(U,W){switch(Kn(qc,e,"store").debug("setFeature",{type:U,feature:W}),U){case"added":t.featuresAdded[W.id]=!0;break;case"updated":if(t.featuresAdded[W.id])return;t.featuresUpdated[W.id]=!0;break;case"deleted":if(t.featuresAdded[W.id])return;t.featuresDeleted[W.id]=W;break}}function M(U){t.callback&&(f(U,t.callback),t.callback=void 0)}function A(U){Kn(qc,e,"store").debug("callDraw",{option:U});const W=hc(),ne=t.state,X=t.action;return ne.register_id=W,ne.show=!0,ne.cleanAfterDone=!!U.cleanAfterDone,ne.draw_support=U.draw_support,X.addFeatures=U.addFeatures,X.updateFeatures=U.updateFeatures,X.deleteFeatures=U.deleteFeatures,X.getFeatures=U.getFeatures,X.reset=U.reset,X.save=U.save,W}return{initDrawControl:n,activateDraw:i,deactivateDraw:o,callDraw:A,setFeature:x,checkAndCallDone:M,getDrawSupport:()=>t.state.draw_support,cancelDraw:y,draw:l,saveDraw:f,getDrawIsActivated:()=>t.state.activated,getDrawIsRegisterId:()=>t.state.register_id,getDrawIsShow:()=>t.state.show,getDrawAction:()=>t.action,getDrawControl:()=>t.control}},IC="#3bb2d0",_0="#fbb03b",VP="#fff",ire=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],_0,IC],"fill-opacity":.1}},{id:"gl-draw-lines-active",type:"line",filter:["all",["any",["==","$type","LineString"],["==","$type","Polygon"]],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":_0,"line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-lines-inactive",type:"line",filter:["all",["any",["==","$type","LineString"],["==","$type","Polygon"]],["!=","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":IC,"line-dasharray":[2,0],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":VP}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],_0,IC]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":VP}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":_0}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":_0}}],sre={key:0,class:"d-flex button-custom-container"},are={key:1,class:"d-flex button-custom-container"},ore={class:"context-menu"},lre=["onClick"],ure=["innerHTML"],cre=Dn({__name:"DrawControl",props:{...Ti,drawOptions:Object},setup(e){const t=e,n=t.drawOptions,{mapId:i,moduleContainerProps:o,callMap:u}=Nr(t),{initDrawControl:l,activateDraw:s,deactivateDraw:f,callDraw:y,cancelDraw:b,checkAndCallDone:x,draw:M,getDrawAction:A,getDrawControl:k,getDrawIsActivated:L,getDrawIsRegisterId:F,getDrawIsShow:V,getDrawSupport:O,saveDraw:N,setFeature:U}=bS(i.value),W=dn(()=>V());hs(W,lt=>{u(Pt=>{lt?(K("select"),Pt.on("draw.create",G),Pt.on("draw.update",ee),Pt.on("draw.delete",ue),Pt.addControl(q)):(Pt.off("draw.create",G),Pt.off("draw.update",ee),Pt.off("draw.delete",ue),Pt.removeControl(q))})});const{add:ne,remove:X}=Lx(i.value,new G_().setHandler(Tt));let q=new rw({displayControlsDefault:!1,boxSelect:!1,styles:ire});function G(lt){for(const Pt of lt.features)U("added",Pt);x(Se.value),K("select")}function ee(lt){for(const Pt of lt.features)U("updated",Pt);x(Se.value),K("select")}function ue(lt){for(const Pt of lt.features)U("deleted",Pt);x(Se.value),K("select")}l(q);const Y={add:Yf,delete:MM,update:Yk,save:IN,discard:Py,close:Py,draw:PN},ce=Qt("");function K(lt){switch(X(),ce.value=lt,lt){case"select":case"delete":ne();break}}const Se=dn(()=>F());function Ve(lt){s(Se.value),M(Se.value,lt)}const Ne=dn(()=>L()),et=dn(()=>O()),ot=dn(()=>Ne.value);function Zt(){N(Se.value)}function qe(){b()}function Ue(){f(),X()}async function Tt(lt){const Pt=A(),Lt=k(),on=await(Pt.getFeatures&&Pt.getFeatures([lt.lngLat.lng,lt.lngLat.lat]))||[];switch(ce.value){case"select":{const Ie=Lt==null?void 0:Lt.add({type:"FeatureCollection",features:on});Ie&&Ie.length>0&&(s(Se.value),M(Se.value,"direct_select",void 0,{featureId:Ie[0]}));break}case"delete":{Lt==null||Lt.delete(Lt.getSelectedIds()),Pt.deleteFeatures&&Pt.deleteFeatures(on),Pt.reset&&Pt.reset();break}}}const Bt=Qt(),kt=dn(()=>et.value.map(lt=>typeof lt=="string"?{id:lt,name:Mre[lt]||lt}:lt));function un(){Bt.value&&Bt.value.close()}function gt(lt){if(et.value.length>1){Bt.value&&Bt.value.open(lt);return}K("create"),Ve(et.value[0])}function ft(){n&&y(n)}return(lt,Pt)=>(Ae(),$t(se(ts),$i(zi(se(o))),{btn:dt(()=>[W.value?(Ae(),st("div",sre,[ot.value?(Ae(),$t(se(ky),{key:0,row:""},{default:dt(()=>[He(se(Br),{onClick:Pt[0]||(Pt[0]=Lt=>qe())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.discard},null,8,["path"])]),_:1}),He(se(Br),{onClick:Pt[1]||(Pt[1]=Lt=>Zt())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.save},null,8,["path"])]),_:1})]),_:1})):(Ae(),$t(se(ky),{key:1,row:""},{default:dt(()=>[He(se(Br),{onClick:Pt[2]||(Pt[2]=Lt=>Ue())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.close},null,8,["path"])]),_:1}),He(se(Br),{active:ce.value==="create",onClick:gt},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.add},null,8,["path"])]),_:1},8,["active"]),He(se(Br),{active:ce.value==="select",onClick:Pt[3]||(Pt[3]=Lt=>K("select"))},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.update},null,8,["path"])]),_:1},8,["active"]),He(se(Br),{active:ce.value==="delete",onClick:Pt[4]||(Pt[4]=Lt=>K("delete"))},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):se(n)?(Ae(),st("div",are,[He(se(Br),null,{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:Y.draw,onClick:ft},null,8,["path"])]),_:1})])):an("",!0)]),default:dt(()=>[He(se(oS),{ref_key:"contextMenuRef",ref:Bt},{default:dt(()=>[Le("ul",ore,[(Ae(!0),st(Gn,null,ii(kt.value,(Lt,on)=>(Ae(),st("li",{key:on,onClick:Rr(Ie=>{K("create"),Ve(Lt.id),un()},["stop"]),class:"context-menu__item"},[Le("span",{innerHTML:Lt.name},null,8,ure)],8,lre))),128))])]),_:1},512)]),_:1},16))}}),hre=Cn(cre,[["__scopeId","data-v-6d2dce73"]]);var OI={exports:{}};(function(e,t){(function(n,i){{var o=i();e&&e.exports&&(t=e.exports=o),t.randomColor=o}})(ra,function(){var n=null,i={};V();var o=[],u=function(X){if(X=X||{},X.seed!==void 0&&X.seed!==null&&X.seed===parseInt(X.seed,10))n=X.seed;else if(typeof X.seed=="string")n=W(X.seed);else{if(X.seed!==void 0&&X.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var q,G,ee;if(X.count!==null&&X.count!==void 0){for(var ue=X.count,Y=[],ce=0;ce<X.count;ce++)o.push(!1);for(X.count=null;ue>Y.length;){var K=u(X);n!==null&&(X.seed=n),Y.push(K)}return X.count=ue,Y}return q=l(X),G=s(q,X),ee=f(q,G,X),y([q,G,ee],X)};function l(X){if(o.length>0){var q=ne(X.hue),G=k(q),ee=(q[1]-q[0])/o.length,ue=parseInt((G-q[0])/ee);o[ue]===!0?ue=(ue+2)%o.length:o[ue]=!0;var Y=(q[0]+ue*ee)%359,ce=(q[0]+(ue+1)*ee)%359;return q=[Y,ce],G=k(q),G<0&&(G=360+G),G}else{var q=x(X.hue);return G=k(q),G<0&&(G=360+G),G}}function s(X,q){if(q.hue==="monochrome")return 0;if(q.luminosity==="random")return k([0,100]);var G=M(X),ee=G[0],ue=G[1];switch(q.luminosity){case"bright":ee=55;break;case"dark":ee=ue-10;break;case"light":ue=55;break}return k([ee,ue])}function f(X,q,G){var ee=b(X,q),ue=100;switch(G.luminosity){case"dark":ue=ee+20;break;case"light":ee=(ue+ee)/2;break;case"random":ee=0,ue=100;break}return k([ee,ue])}function y(X,q){switch(q.format){case"hsvArray":return X;case"hslArray":return U(X);case"hsl":var G=U(X);return"hsl("+G[0]+", "+G[1]+"%, "+G[2]+"%)";case"hsla":var ee=U(X),ce=q.alpha||Math.random();return"hsla("+ee[0]+", "+ee[1]+"%, "+ee[2]+"%, "+ce+")";case"rgbArray":return O(X);case"rgb":var ue=O(X);return"rgb("+ue.join(", ")+")";case"rgba":var Y=O(X),ce=q.alpha||Math.random();return"rgba("+Y.join(", ")+", "+ce+")";default:return L(X)}}function b(X,q){for(var G=A(X).lowerBounds,ee=0;ee<G.length-1;ee++){var ue=G[ee][0],Y=G[ee][1],ce=G[ee+1][0],K=G[ee+1][1];if(q>=ue&&q<=ce){var Se=(K-Y)/(ce-ue),Ve=Y-Se*ue;return Se*q+Ve}}return 0}function x(X){if(typeof parseInt(X)=="number"){var q=parseInt(X);if(q<360&&q>0)return[q,q]}if(typeof X=="string"){if(i[X]){var G=i[X];if(G.hueRange)return G.hueRange}else if(X.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ee=N(X)[0];return[ee,ee]}}return[0,360]}function M(X){return A(X).saturationRange}function A(X){X>=334&&X<=360&&(X-=360);for(var q in i){var G=i[q];if(G.hueRange&&X>=G.hueRange[0]&&X<=G.hueRange[1])return i[q]}return"Color not found"}function k(X){if(n===null){var q=.618033988749895,G=Math.random();return G+=q,G%=1,Math.floor(X[0]+G*(X[1]+1-X[0]))}else{var ee=X[1]||1,ue=X[0]||0;n=(n*9301+49297)%233280;var Y=n/233280;return Math.floor(ue+Y*(ee-ue))}}function L(X){var q=O(X);function G(ue){var Y=ue.toString(16);return Y.length==1?"0"+Y:Y}var ee="#"+G(q[0])+G(q[1])+G(q[2]);return ee}function F(X,q,G){var ee=G[0][0],ue=G[G.length-1][0],Y=G[G.length-1][1],ce=G[0][1];i[X]={hueRange:q,lowerBounds:G,saturationRange:[ee,ue],brightnessRange:[Y,ce]}}function V(){F("monochrome",null,[[0,0],[100,0]]),F("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),F("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),F("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),F("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),F("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),F("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),F("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function O(X){var q=X[0];q===0&&(q=1),q===360&&(q=359),q=q/360;var G=X[1]/100,ee=X[2]/100,ue=Math.floor(q*6),Y=q*6-ue,ce=ee*(1-G),K=ee*(1-Y*G),Se=ee*(1-(1-Y)*G),Ve=256,Ne=256,et=256;switch(ue){case 0:Ve=ee,Ne=Se,et=ce;break;case 1:Ve=K,Ne=ee,et=ce;break;case 2:Ve=ce,Ne=ee,et=Se;break;case 3:Ve=ce,Ne=K,et=ee;break;case 4:Ve=Se,Ne=ce,et=ee;break;case 5:Ve=ee,Ne=ce,et=K;break}var ot=[Math.floor(Ve*255),Math.floor(Ne*255),Math.floor(et*255)];return ot}function N(X){X=X.replace(/^#/,""),X=X.length===3?X.replace(/(.)/g,"$1$1"):X;var q=parseInt(X.substr(0,2),16)/255,G=parseInt(X.substr(2,2),16)/255,ee=parseInt(X.substr(4,2),16)/255,ue=Math.max(q,G,ee),Y=ue-Math.min(q,G,ee),ce=ue?Y/ue:0;switch(ue){case q:return[60*((G-ee)/Y%6)||0,ce,ue];case G:return[60*((ee-q)/Y+2)||0,ce,ue];case ee:return[60*((q-G)/Y+4)||0,ce,ue]}}function U(X){var q=X[0],G=X[1]/100,ee=X[2]/100,ue=(2-G)*ee;return[q,Math.round(G*ee/(ue<1?ue:2-ue)*1e4)/100,ue/2*100]}function W(X){for(var q=0,G=0;G!==X.length&&!(q>=Number.MAX_SAFE_INTEGER);G++)q+=X.charCodeAt(G);return q}function ne(X){if(isNaN(X)){if(typeof X=="string"){if(i[X]){var G=i[X];if(G.hueRange)return G.hueRange}else if(X.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var ee=N(X)[0];return A(ee).hueRange}}}else{var q=parseInt(X);if(q<360&&q>0)return A(X).hueRange}return[0,360]}return u})})(OI,OI.exports);var dre=OI.exports;const fre=fd(dre);function pre(e,t){let n="bright",i;return/water|ocean|lake|sea|river/.test(e)&&(i="blue"),/state|country|place/.test(e)&&(i="pink"),/road|highway|transport|streets/.test(e)&&(i="orange"),/contour|building|earth/.test(e)&&(i="monochrome"),/building/.test(e)&&(n="dark"),/earth/.test(e)&&(n="light"),/contour|landuse/.test(e)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(e)&&(i="green"),`rgba(${fre({luminosity:n,hue:i,seed:e,format:"rgbArray"}).join(", ")}, ${t||"1"})`}function mre(e){return e.metadata&&e.metadata["maplibregl-inspect:inspect"]}function gre(e){const t={};return Object.keys(e.style.sourceCaches).forEach(n=>{const i=e.style.sourceCaches[n]||{_source:{}},o=i._source.vectorLayerIds;o?t[n]=o:i._source.type==="geojson"&&(t[n]=[])}),t}function yre(e){return Object.assign(e,{metadata:Object.assign({},e.metadata,{"maplibregl-inspect:inspect":!0})})}function vre(e){return typeof e>"u"||e===null?e:e instanceof Date?e.toLocaleString():typeof e=="object"||typeof e=="number"||typeof e=="string"?e.toString():e}function MC(e,t){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${e}</div><div class="maplibregl-inspect_property-value">${vre(t)}</div></div>`}function _re(e){return`<div class="maplibregl-inspect_layer">${e}</div>`}function bre(e){const t=_re(e.layer["source-layer"]||e.layer.source),n=MC("$id",e.id),i=MC("$type",e.geometry.type),o=Object.keys(e.properties).map(u=>MC(u,e.properties[u]));return[t,n,i].concat(o).join("")}function xre(e){return e.map(t=>`<div class="maplibregl-inspect_feature">${bre(t)}</div>`).join("")}function Are(e){return`<div class="maplibregl-inspect_popup-container"><div class="maplibregl-inspect_popup" style="max-height: 200px; overflow-y: auto;">${xre(e)}</div></div>`}function jP(e,t,n){const i={id:[t,n,"circle"].join("_"),source:t,type:"circle",paint:{"circle-color":e,"circle-radius":2},filter:["==","$type","Point"]};return n&&(i["source-layer"]=n),i}function UP(e,t,n,i){const o={id:[n,i,"polygon"].join("_"),source:n,type:"fill",paint:{"fill-color":e,"fill-antialias":!0,"fill-outline-color":e},filter:["==","$type","Polygon"]};return i&&(o["source-layer"]=i),o}function $P(e,t,n){const i={id:[t,n,"line"].join("_"),source:t,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":e},filter:["==","$type","LineString"]};return n&&(i["source-layer"]=n),i}function wre(e,t){const n=[],i=[],o=[];function u(l){return{circle:t(l,.8),line:t(l,.6),polygon:t(l,.3),polygonOutline:t(l,.6),default:t(l,1)}}return Object.keys(e).forEach(l=>{const s=e[l];if(!s||s.length===0){const f=u(l);i.push(jP(f.circle,l)),o.push($P(f.line,l)),n.push(UP(f.polygon,f.polygonOutline,l))}else s.forEach(f=>{const y=u(f);i.push(jP(y.circle,l,f)),o.push($P(y.line,l,f)),n.push(UP(y.polygon,y.polygonOutline,l,f))})}),n.concat(o).concat(i)}function Cre(e,t,n){n=Object.assign({backgroundColor:"#fff"},n);const i={id:"background",type:"background",paint:{"background-color":n.backgroundColor}},o={};return Object.keys(e.sources).forEach(u=>{const l=e.sources[u];(l.type==="vector"||l.type==="geojson")&&(o[u]=l)}),Object.assign(e,{layers:[i].concat(t),sources:o})}const Ire=Dn({__name:"InspectControl",props:{...Ti,showInspectDefault:Boolean,useInspectStyle:{type:Boolean,default:!0},showInspectMapPopup:{type:Boolean,default:!0},showInspectMapPopupOnHover:{type:Boolean,default:!1},showMapPopup:{type:Boolean,default:!1},showMapPopupOnHover:{type:Boolean,default:!0},blockHoverPopupOnClick:{type:Boolean,default:!1},buildInspectStyle:{type:Function,default:Cre},backgroundColor:{type:String,default:"#fff"},assignLayerColor:{type:Function,default:pre},renderPopup:{type:Function,default:Are},selectThreshold:{type:Number,default:5},queryParameters:{type:Object,default:()=>({})}},setup(e){const t=e,n=Dl(new Pm.Popup({closeButton:!1,closeOnClick:!1})),{callMap:i,mapId:o,moduleContainerProps:u}=Nr(t,ee,ue),{getDrawIsShow:l}=bS(o.value),{trans:s,setLocaleDefault:f}=Hi(o.value),y=Qt(t.showInspectDefault);f({map:{"inspect-control":{button:"Toggle inspect"}}});const b=new G_().setHandler(V),x=new Yq().setHandler(V),M=Qt(!1),{add:A,remove:k}=Dx(o.value,b),{add:L,remove:F}=Dx(o.value,x);function V(Se){if(y.value){if(!t.showInspectMapPopup||Se.type==="mousemove"&&!t.showInspectMapPopupOnHover)return;Se.type==="click"&&t.showInspectMapPopupOnHover&&t.blockHoverPopupOnClick&&(M.value=!M.value)}else{if(!t.showMapPopup||Se.type==="mousemove"&&!t.showMapPopupOnHover)return;Se.type==="click"&&t.showMapPopupOnHover&&t.blockHoverPopupOnClick&&(M.value=!M.value)}if(!M.value&&n.value){let Ve;t.selectThreshold===0?Ve=Se.point:Ve=[[Se.point.x-t.selectThreshold,Se.point.y+t.selectThreshold],[Se.point.x+t.selectThreshold,Se.point.y-t.selectThreshold]],i(Ne=>{const et=Ne.queryRenderedFeatures(Ve,t.queryParameters)||[];if(Ne.getCanvas().style.cursor=et.length?"pointer":"",!et.length)n.value.remove();else{n.value.setLngLat(Se.lngLat);const ot=t.renderPopup(et);typeof ot=="string"?n.value.setHTML(ot):n.value.setDOMContent(ot),n.value.addTo(Ne)}})}}function O(){var Se;y.value=!y.value,y.value?(A(),L()):((Se=n.value)==null||Se.remove(),k(),F()),i(Ve=>Y(Ve))}const N={map:NN,inspect:jN};let U={},W;const ne=(Se,Ve)=>{if(Se.sourceDataType==="visibility"||!Se.isSourceLoaded)return;const Ne=Object.assign({},U);U=gre(Ve),!Dy.isEqual(Ne,U)&&Object.keys(U).length>0&&setTimeout(()=>Y(Ve),1e3)},X=Se=>{const Ve=Se.getStyle();mre(Ve)||(W=Ve)};let q,G;function ee(Se){q=Ve=>ne(Ve,Se),G=()=>X(Se),Object.keys(U).length===0&&(Se.on("tiledata",q),Se.on("sourcedata",q)),Se.on("styledata",G),Se.on("load",G)}function ue(Se){y.value=!1,Se.off("styledata",q),Se.off("load",q),Se.off("tiledata",G),Se.off("sourcedata",G),k(),F(),Y(Se)}function Y(Se){y.value?t.useInspectStyle&&Se.setStyle(yre(ce(Se))):W&&t.useInspectStyle&&Se.setStyle(W)}function ce(Se){const Ve=wre(U,t.assignLayerColor);return t.buildInspectStyle(Se.getStyle(),Ve,{backgroundColor:t.backgroundColor})}const K=dn(()=>l());return(Se,Ve)=>(Ae(),$t(se(ts),$i(zi(se(u))),{btn:dt(()=>[K.value?an("",!0):(Ae(),$t(se(Br),{key:0,tooltip:se(s)("map.inspect-control.button")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",onClick:Ve[0]||(Ve[0]=Ne=>O()),path:y.value?N.inspect:N.map},null,8,["path"])]),_:1},8,["tooltip"]))]),default:dt(()=>[In(Se.$slots,"default")]),_:3},16))}}),xy={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},Mre={[xy.POINT]:"draw point",[xy.LINE_STRING]:"draw line string",[xy.POLYGON]:"draw polygon"};function Sre(e){const{expr:t,layer:n}=e,i=Math.min(t(n,"paint","circle-radius"),8),o=Math.min(t(n,"paint","circle-stroke-width"),4),u=t(n,"paint","circle-color"),l=t(n,"paint","circle-opacity"),s=t(n,"paint","circle-stroke-color"),f=t(n,"paint","circle-stroke-opacity"),y=t(n,"paint","circle-blur"),b=i-o/2;return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{filter:`blur(${y*b}px)`}},children:[{element:"circle",attributes:{key:"l1",cx:10,cy:10,fill:u,opacity:l,r:b}},{element:"circle",attributes:{key:"l2",cx:10,cy:10,fill:"transparent",opacity:f,r:i,"stroke-width":o,stroke:s}}]}}function Ere(e){const{image:t,expr:n,layer:i}=e,o=n(i,"paint","fill-pattern"),u=t(o);return{element:"div",attributes:{style:{width:"100%",height:"100%",backgroundImage:o?`url(${u})`:void 0,backgroundColor:o?void 0:n(i,"paint","fill-color"),opacity:n(i,"paint","fill-opacity"),backgroundSize:"66% 66%",backgroundPosition:"center"}}}}function Tre(e){const{layer:t,image:n,expr:i}=e,o=n(i(t,"paint","line-pattern")),u={stroke:o?"url(#img1)":i(t,"paint","line-color"),strokeWidth:Math.max(2,Math.min(i(t,"paint","line-width"),8)),strokeOpacity:i(t,"paint","line-opacity"),strokeDasharray:i(t,"paint","line-dasharray")},l=u.strokeWidth;let s=`stroke: ${u.stroke};`;return u.strokeOpacity&&(s+=`stroke-opacity: ${u.strokeOpacity};`),u.strokeDasharray&&(s+=`stroke-dasharray: ${u.strokeDasharray};`),{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"defs",attributes:{key:"defs"},children:[{element:"pattern",attributes:{key:"pattern",id:"img1",x:0,y:0,width:u.strokeWidth,height:u.strokeWidth,patternUnits:"userSpaceOnUse",patternTransform:`translate(${-(l/2)} ${-(l/2)}) rotate(45)`},children:[{element:"image",attributes:{key:"img","xlink:href":o,x:0,y:0,width:u.strokeWidth,height:u.strokeWidth}}]}]},{element:"path",attributes:{key:"path",style:s,d:"M0 20 L 20 0"}}]}}function Pre({expr:e,layer:t,image:n}){const i=e(t,"layout","icon-image");if(!i)return null;const o=n(i);return o?{element:"div",attributes:{style:{backgroundImage:`url(${o})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}}}:null}function kre({expr:e,layer:t}){const n=e(t,"paint","text-color"),i=e(t,"paint","text-opacity"),o=e(t,"paint","text-halo-color"),u=e(t,"paint","text-halo-width"),l="M 4,4 L 16,4 L 16,7 L 11.5 7 L 11.5 16 L 8.5 16 L 8.5 7 L 4 7 Z";return{element:"svg",attributes:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},children:[{element:"path",attributes:{key:"l1",d:l,stroke:o,"stroke-width":u*2,fill:"transparent","stroke-linejoin":"round"}},{element:"path",attributes:{key:"l2",d:l,fill:"white"}},{element:"path",attributes:{key:"l3",d:l,fill:n,opacity:i}}]}}function Lre(e){return Pre(e)||kre(e)}var Dre=8,Rre={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Ore={"*":{type:"source"}},zre=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Fre={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Bre={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Nre={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Vre={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},jre={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ure={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},$re={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Hre=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Gre={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zre={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wre={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},qre={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kre={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yre={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xre={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Qre={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jre={type:"array",value:"*"},eie={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},tie={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},nie={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},rie={type:"array",value:"*",minimum:1},iie={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sie={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},aie={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},oie={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},lie=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],uie={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},cie={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},hie={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},die={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},fie={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},pie={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},mie={"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},gie={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},yie={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},vie={"*":{type:"string"}},_ie={$version:Dre,$root:Rre,sources:Ore,source:zre,source_vector:Fre,source_raster:Bre,source_raster_dem:Nre,source_geojson:Vre,source_video:jre,source_image:Ure,layer:$re,layout:Hre,layout_background:Gre,layout_fill:Zre,layout_circle:Wre,layout_heatmap:qre,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Kre,layout_symbol:Yre,layout_raster:Xre,layout_hillshade:Qre,filter:Jre,filter_operator:eie,geometry_type:tie,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:nie,expression:rie,light:iie,sky:sie,terrain:aie,projection:oie,paint:lie,paint_fill:uie,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:cie,paint_circle:hie,paint_heatmap:die,paint_symbol:fie,paint_raster:pie,paint_hillshade:mie,paint_background:gie,transition:yie,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:vie};function Y4(e,...t){for(const n of t)for(const i in n)e[i]=n[i];return e}class Xc extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class xS{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[i,o]of n)this.bindings[i]=o}concat(t){return new xS(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}}const iw={kind:"null"},vn={kind:"number"},Ir={kind:"string"},_r={kind:"boolean"},th={kind:"color"},sw={kind:"projectionDefinition"},wm={kind:"object"},gr={kind:"value"},bie={kind:"error"},aw={kind:"collator"},ow={kind:"formatted"},lw={kind:"padding"},b_={kind:"colorArray"},uw={kind:"numberArray"},Q_={kind:"resolvedImage"},cw={kind:"variableAnchorOffsetCollection"};function Tl(e,t){return{kind:"array",itemType:e,N:t}}function es(e){if(e.kind==="array"){const t=es(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const xie=[iw,vn,Ir,_r,th,sw,ow,wm,Tl(gr),lw,uw,b_,Q_,cw];function x_(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!x_(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of xie)if(!x_(n,t))return null}}return`Expected ${es(e)} but found ${es(t)} instead.`}function AS(e,t){return t.some(n=>n.kind===e.kind)}function Cm(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function _f(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const X4=.96422,Q4=1,J4=.82521,eD=4/29,Ay=6/29,tD=3*Ay*Ay,Aie=Ay*Ay*Ay,wie=Math.PI/180,Cie=180/Math.PI;function nD(e){return e=e%360,e<0&&(e+=360),e}function rD([e,t,n,i]){e=SC(e),t=SC(t),n=SC(n);let o,u;const l=EC((.2225045*e+.7168786*t+.0606169*n)/Q4);e===t&&t===n?o=u=l:(o=EC((.4360747*e+.3850649*t+.1430804*n)/X4),u=EC((.0139322*e+.0971045*t+.7141733*n)/J4));const s=116*l-16;return[s<0?0:s,500*(o-l),200*(l-u),i]}function SC(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function EC(e){return e>Aie?Math.pow(e,1/3):e/tD+eD}function iD([e,t,n,i]){let o=(e+16)/116,u=isNaN(t)?o:o+t/500,l=isNaN(n)?o:o-n/200;return o=Q4*PC(o),u=X4*PC(u),l=J4*PC(l),[TC(3.1338561*u-1.6168667*o-.4906146*l),TC(-.9787684*u+1.9161415*o+.033454*l),TC(.0719453*u-.2289914*o+1.4052427*l),i]}function TC(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function PC(e){return e>Ay?e*e*e:tD*(e-eD)}function Iie(e){const[t,n,i,o]=rD(e),u=Math.sqrt(n*n+i*i);return[Math.round(u*1e4)?nD(Math.atan2(i,n)*Cie):NaN,u,t,o]}function Mie([e,t,n,i]){return e=isNaN(e)?0:e*wie,iD([n,Math.cos(e)*t,Math.sin(e)*t,i])}function Sie([e,t,n,i]){e=nD(e),t/=100,n/=100;function o(u){const l=(u+e/30)%12,s=t*Math.min(n,1-n);return n-s*Math.max(-1,Math.min(l-3,9-l,1))}return[o(0),o(8),o(4),i]}const Eie=Object.hasOwn||function(t,n){return Object.prototype.hasOwnProperty.call(t,n)};function sD(e,t){return Eie(e,t)?e[t]:void 0}function Tie(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=sD(Pie,e);if(t){const[o,u,l]=t;return[o/255,u/255,l/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const u=e.length<6?1:2;let l=1;return[Nb(e.slice(l,l+=u)),Nb(e.slice(l,l+=u)),Nb(e.slice(l,l+=u)),Nb(e.slice(l,l+u)||"ff")]}if(e.startsWith("rgb")){const o=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,u=e.match(o);if(u){const[l,s,f,y,b,x,M,A,k,L,F,V]=u,O=[y||" ",M||" ",L].join("");if(O==="  "||O==="  /"||O===",,"||O===",,,"){const N=[f,x,k].join(""),U=N==="%%%"?100:N===""?255:0;if(U){const W=[ey(+s/U,0,1),ey(+b/U,0,1),ey(+A/U,0,1),F?HP(+F,V):1];if(GP(W))return W}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=e.match(n);if(i){const[o,u,l,s,f,y,b,x,M]=i,A=[l||" ",f||" ",b].join("");if(A==="  "||A==="  /"||A===",,"||A===",,,"){const k=[+u,ey(+s,0,100),ey(+y,0,100),x?HP(+x,M):1];if(GP(k))return Sie(k)}}}function Nb(e){return parseInt(e.padEnd(2,e),16)/255}function HP(e,t){return ey(t?e/100:e,0,1)}function ey(e,t,n){return Math.min(Math.max(t,e),n)}function GP(e){return!e.some(Number.isNaN)}const Pie={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Nf(e,t,n){return e+n*(t-e)}function Ny(e,t,n){return e.map((i,o)=>Nf(i,t[o],n))}function kie(e){return e==="rgb"||e==="hcl"||e==="lab"}class Kr{constructor(t,n,i,o=1,u=!0){this.r=t,this.g=n,this.b=i,this.a=o,u||(this.r*=o,this.g*=o,this.b*=o,o||this.overwriteGetter("rgb",[t,n,i,o]))}static parse(t){if(t instanceof Kr)return t;if(typeof t!="string")return;const n=Tie(t);if(n)return new Kr(...n,!1)}get rgb(){const{r:t,g:n,b:i,a:o}=this,u=o||1/0;return this.overwriteGetter("rgb",[t/u,n/u,i/u,o])}get hcl(){return this.overwriteGetter("hcl",Iie(this.rgb))}get lab(){return this.overwriteGetter("lab",rD(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,i,o]=this.rgb;return`rgba(${[t,n,i].map(u=>Math.round(u*255)).join(",")},${o})`}static interpolate(t,n,i,o="rgb"){switch(o){case"rgb":{const[u,l,s,f]=Ny(t.rgb,n.rgb,i);return new Kr(u,l,s,f,!1)}case"hcl":{const[u,l,s,f]=t.hcl,[y,b,x,M]=n.hcl;let A,k;if(!isNaN(u)&&!isNaN(y)){let N=y-u;y>u&&N>180?N-=360:y<u&&u-y>180&&(N+=360),A=u+i*N}else isNaN(u)?isNaN(y)?A=NaN:(A=y,(s===1||s===0)&&(k=b)):(A=u,(x===1||x===0)&&(k=l));const[L,F,V,O]=Mie([A,k??Nf(l,b,i),Nf(s,x,i),Nf(f,M,i)]);return new Kr(L,F,V,O,!1)}case"lab":{const[u,l,s,f]=iD(Ny(t.lab,n.lab,i));return new Kr(u,l,s,f,!1)}}}}Kr.black=new Kr(0,0,0,1);Kr.white=new Kr(1,1,1,1);Kr.transparent=new Kr(0,0,0,0);Kr.red=new Kr(1,0,0,1);class wS{constructor(t,n,i){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Lie=["bottom","center","top"];class zI{constructor(t,n,i,o,u,l){this.text=t,this.image=n,this.scale=i,this.fontStack=o,this.textColor=u,this.verticalAlign=l}}class nh{constructor(t){this.sections=t}static fromString(t){return new nh([new zI(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof nh?t:nh.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Po{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Po)return t;if(typeof t=="number")return new Po([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new Po(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i){return new Po(Ny(t.values,n.values,i))}}class ko{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ko)return t;if(typeof t=="number")return new ko([t]);if(Array.isArray(t)){for(const n of t)if(typeof n!="number")return;return new ko(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i){return new ko(Ny(t.values,n.values,i))}}class Oa{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Oa)return t;if(typeof t=="string"){const i=Kr.parse(t);return i?new Oa([i]):void 0}if(!Array.isArray(t))return;const n=[];for(const i of t){if(typeof i!="string")return;const o=Kr.parse(i);if(!o)return;n.push(o)}return new Oa(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i,o="rgb"){const u=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let l=0;l<t.values.length;l++)u.push(Kr.interpolate(t.values[l],n.values[l],i,o));return new Oa(u)}}class cs extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const Die=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class mu{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof mu)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const i=t[n],o=t[n+1];if(typeof i!="string"||!Die.has(i)||!Array.isArray(o)||o.length!==2||typeof o[0]!="number"||typeof o[1]!="number")return}return new mu(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,i){const o=t.values,u=n.values;if(o.length!==u.length)throw new cs(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);const l=[];for(let s=0;s<o.length;s+=2){if(o[s]!==u[s])throw new cs(`Cannot interpolate values containing mismatched anchors. from[${s}]: ${o[s]}, to[${s}]: ${u[s]}`);l.push(o[s]);const[f,y]=o[s+1],[b,x]=u[s+1];l.push([Nf(f,b,i),Nf(y,x,i)])}return new mu(l)}}class gd{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new gd({name:t,available:!1}):null}}class hu{constructor(t,n,i){this.from=t,this.to=n,this.transition=i}static interpolate(t,n,i){return new hu(t,n,i)}static parse(t){if(t instanceof hu)return t;if(Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number")return new hu(t[0],t[1],t[2]);if(typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number")return new hu(t.from,t.to,t.transition);if(typeof t=="string")return new hu(t,t,1)}}function aD(e,t,n,i){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[e,t,n,i]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function A_(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof hu||e instanceof Kr||e instanceof wS||e instanceof nh||e instanceof Po||e instanceof ko||e instanceof Oa||e instanceof mu||e instanceof gd)return!0;if(Array.isArray(e)){for(const t of e)if(!A_(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!A_(e[t]))return!1;return!0}else return!1}function js(e){if(e===null)return iw;if(typeof e=="string")return Ir;if(typeof e=="boolean")return _r;if(typeof e=="number")return vn;if(e instanceof Kr)return th;if(e instanceof hu)return sw;if(e instanceof wS)return aw;if(e instanceof nh)return ow;if(e instanceof Po)return lw;if(e instanceof ko)return uw;if(e instanceof Oa)return b_;if(e instanceof mu)return cw;if(e instanceof gd)return Q_;if(Array.isArray(e)){const t=e.length;let n;for(const i of e){const o=js(i);if(!n)n=o;else{if(n===o)continue;n=gr;break}}return Tl(n||gr,t)}else return wm}function X0(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof Kr||e instanceof hu||e instanceof nh||e instanceof Po||e instanceof ko||e instanceof Oa||e instanceof mu||e instanceof gd?e.toString():JSON.stringify(e)}class Vy{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!A_(t[1]))return n.error("invalid value");const i=t[1];let o=js(i);const u=n.expectedType;return o.kind==="array"&&o.N===0&&u&&u.kind==="array"&&(typeof u.N!="number"||u.N===0)&&(o=u),new Vy(o,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Vb={string:Ir,number:vn,boolean:_r,object:wm};class ic{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let i=1,o;const u=t[0];if(u==="array"){let s;if(t.length>2){const y=t[1];if(typeof y!="string"||!(y in Vb)||y==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);s=Vb[y],i++}else s=gr;let f;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);f=t[2],i++}o=Tl(s,f)}else{if(!Vb[u])throw new Error(`Types doesn't contain name = ${u}`);o=Vb[u]}const l=[];for(;i<t.length;i++){const s=n.parse(t[i],i,gr);if(!s)return null;l.push(s)}return new ic(o,l)}evaluate(t){for(let n=0;n<this.args.length;n++){const i=this.args[n].evaluate(t);if(x_(this.type,js(i))){if(n===this.args.length-1)throw new cs(`Expected value to be of type ${es(this.type)}, but found ${es(js(i))} instead.`)}else return i}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const ZP={"to-boolean":_r,"to-color":th,"to-number":vn,"to-string":Ir};class Df{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const i=t[0];if(!ZP[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&t.length!==2)return n.error("Expected one argument.");const o=ZP[i],u=[];for(let l=1;l<t.length;l++){const s=n.parse(t[l],l,gr);if(!s)return null;u.push(s)}return new Df(o,u)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,i;for(const o of this.args){if(n=o.evaluate(t),i=null,n instanceof Kr)return n;if(typeof n=="string"){const u=t.parseColor(n);if(u)return u}else if(Array.isArray(n)&&(n.length<3||n.length>4?i=`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:i=aD(n[0],n[1],n[2],n[3]),!i))return new Kr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new cs(i||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const i of this.args){n=i.evaluate(t);const o=Po.parse(n);if(o)return o}throw new cs(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(const i of this.args){n=i.evaluate(t);const o=ko.parse(n);if(o)return o}throw new cs(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(const i of this.args){n=i.evaluate(t);const o=Oa.parse(n);if(o)return o}throw new cs(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const i of this.args){n=i.evaluate(t);const o=mu.parse(n);if(o)return o}throw new cs(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const i of this.args){if(n=i.evaluate(t),n===null)return 0;const o=Number(n);if(!isNaN(o))return o}throw new cs(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return nh.fromString(X0(this.args[0].evaluate(t)));case"resolvedImage":return gd.fromString(X0(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return X0(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Rie=["Unknown","Point","LineString","Polygon"];class oD{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rie[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=Kr.parse(t),this._parseColorCache.set(t,n)),n}}class hw{constructor(t,n,i=[],o,u=new xS,l=[]){this.registry=t,this.path=i,this.key=i.map(s=>`[${s}]`).join(""),this.scope=u,this.errors=l,this.expectedType=o,this._isConstant=n}parse(t,n,i,o,u={}){return n?this.concat(n,i,o)._parse(t,u):this._parse(t,u)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function i(o,u,l){return l==="assert"?new ic(u,[o]):l==="coerce"?new Df(u,[o]):o}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=t[0];if(typeof o!="string")return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const u=this.registry[o];if(u){let l=u.parse(t,this);if(!l)return null;if(this.expectedType){const s=this.expectedType,f=l.type;if((s.kind==="string"||s.kind==="number"||s.kind==="boolean"||s.kind==="object"||s.kind==="array")&&f.kind==="value")l=i(l,s,n.typeAnnotation||"assert");else if(s.kind==="projectionDefinition"&&["string","array"].includes(f.kind)||["color","formatted","resolvedImage"].includes(s.kind)&&["value","string"].includes(f.kind)||["padding","numberArray"].includes(s.kind)&&["value","number","array"].includes(f.kind)||s.kind==="colorArray"&&["value","string","array"].includes(f.kind)||s.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(f.kind))l=i(l,s,n.typeAnnotation||"coerce");else if(this.checkSubtype(s,f))return null}if(!(l instanceof Vy)&&l.type.kind!=="resolvedImage"&&this._isConstant(l)){const s=new oD;try{l=new Vy(l.type,l.evaluate(s))}catch(f){return this.error(f.message),null}}return l}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,i){const o=typeof t=="number"?this.path.concat(t):this.path,u=i?this.scope.concat(i):this.scope;return new hw(this.registry,this._isConstant,o,n||null,u,this.errors)}error(t,...n){const i=`${this.key}${n.map(o=>`[${o}]`).join("")}`;this.errors.push(new Xc(i,t))}checkSubtype(t,n){const i=x_(t,n);return i&&this.error(i),i}}class dw{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let u=1;u<t.length-1;u+=2){const l=t[u];if(typeof l!="string")return n.error(`Expected string, but found ${typeof l} instead.`,u);if(/[^a-zA-Z0-9_]/.test(l))return n.error("Variable names must contain only alphanumeric characters or '_'.",u);const s=n.parse(t[u+1],u+1);if(!s)return null;i.push([l,s])}const o=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return o?new dw(i,o):null}outputDefined(){return this.result.outputDefined()}}class fw{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const i=t[1];return n.scope.has(i)?new fw(i,n.scope.get(i)):n.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class CS{constructor(t,n,i){this.type=t,this.index=n,this.input=i}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,vn),o=n.parse(t[2],2,Tl(n.expectedType||gr));if(!i||!o)return null;const u=o.type;return new CS(u.itemType,i,o)}evaluate(t){const n=this.index.evaluate(t),i=this.input.evaluate(t);if(n<0)throw new cs(`Array index out of bounds: ${n} < 0.`);if(n>=i.length)throw new cs(`Array index out of bounds: ${n} > ${i.length-1}.`);if(n!==Math.floor(n))throw new cs(`Array index must be an integer, but found ${n} instead.`);return i[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class IS{constructor(t,n){this.type=_r,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,gr),o=n.parse(t[2],2,gr);return!i||!o?null:AS(i.type,[_r,Ir,vn,iw,gr])?new IS(i,o):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${es(i.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!Cm(n,["boolean","string","number","null"]))throw new cs(`Expected first argument to be of type boolean, string, number or null, but found ${es(js(n))} instead.`);if(!Cm(i,["string","array"]))throw new cs(`Expected second argument to be of type array or string, but found ${es(js(i))} instead.`);return i.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Wx{constructor(t,n,i){this.type=vn,this.needle=t,this.haystack=n,this.fromIndex=i}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,gr),o=n.parse(t[2],2,gr);if(!i||!o)return null;if(!AS(i.type,[_r,Ir,vn,iw,gr]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${es(i.type)} instead`);if(t.length===4){const u=n.parse(t[3],3,vn);return u?new Wx(i,o,u):null}else return new Wx(i,o)}evaluate(t){const n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!Cm(n,["boolean","string","number","null"]))throw new cs(`Expected first argument to be of type boolean, string, number or null, but found ${es(js(n))} instead.`);let o;if(this.fromIndex&&(o=this.fromIndex.evaluate(t)),Cm(i,["string"])){const u=i.indexOf(n,o);return u===-1?-1:[...i.slice(0,u)].length}else{if(Cm(i,["array"]))return i.indexOf(n,o);throw new cs(`Expected second argument to be of type array or string, but found ${es(js(i))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class MS{constructor(t,n,i,o,u,l){this.inputType=t,this.type=n,this.input=i,this.cases=o,this.outputs=u,this.otherwise=l}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let i,o;n.expectedType&&n.expectedType.kind!=="value"&&(o=n.expectedType);const u={},l=[];for(let y=2;y<t.length-1;y+=2){let b=t[y];const x=t[y+1];Array.isArray(b)||(b=[b]);const M=n.concat(y);if(b.length===0)return M.error("Expected at least one branch label.");for(const k of b){if(typeof k!="number"&&typeof k!="string")return M.error("Branch labels must be numbers or strings.");if(typeof k=="number"&&Math.abs(k)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof k=="number"&&Math.floor(k)!==k)return M.error("Numeric branch labels must be integer values.");if(!i)i=js(k);else if(M.checkSubtype(i,js(k)))return null;if(typeof u[String(k)]<"u")return M.error("Branch labels must be unique.");u[String(k)]=l.length}const A=n.parse(x,y,o);if(!A)return null;o=o||A.type,l.push(A)}const s=n.parse(t[1],1,gr);if(!s)return null;const f=n.parse(t[t.length-1],t.length-1,o);return!f||s.type.kind!=="value"&&n.concat(1).checkSubtype(i,s.type)?null:new MS(i,o,s,u,l,f)}evaluate(t){const n=this.input.evaluate(t);return(js(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class SS{constructor(t,n,i){this.type=t,this.branches=n,this.otherwise=i}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let i;n.expectedType&&n.expectedType.kind!=="value"&&(i=n.expectedType);const o=[];for(let l=1;l<t.length-1;l+=2){const s=n.parse(t[l],l,_r);if(!s)return null;const f=n.parse(t[l+1],l+1,i);if(!f)return null;o.push([s,f]),i=i||f.type}const u=n.parse(t[t.length-1],t.length-1,i);if(!u)return null;if(!i)throw new Error("Can't infer output type");return new SS(i,o,u)}evaluate(t){for(const[n,i]of this.branches)if(n.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,i]of this.branches)t(n),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class qx{constructor(t,n,i,o){this.type=t,this.input=n,this.beginIndex=i,this.endIndex=o}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,gr),o=n.parse(t[2],2,vn);if(!i||!o)return null;if(!AS(i.type,[Tl(gr),Ir,gr]))return n.error(`Expected first argument to be of type array or string, but found ${es(i.type)} instead`);if(t.length===4){const u=n.parse(t[3],3,vn);return u?new qx(i.type,i,o,u):null}else return new qx(i.type,i,o)}evaluate(t){const n=this.input.evaluate(t),i=this.beginIndex.evaluate(t);let o;if(this.endIndex&&(o=this.endIndex.evaluate(t)),Cm(n,["string"]))return[...n].slice(i,o).join("");if(Cm(n,["array"]))return n.slice(i,o);throw new cs(`Expected first argument to be of type array or string, but found ${es(js(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function pw(e,t){const n=e.length-1;let i=0,o=n,u=0,l,s;for(;i<=o;)if(u=Math.floor((i+o)/2),l=e[u],s=e[u+1],l<=t){if(u===n||t<s)return u;i=u+1}else if(l>t)o=u-1;else throw new cs("Input is not a number.");return 0}class mw{constructor(t,n,i){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[o,u]of i)this.labels.push(o),this.outputs.push(u)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const i=n.parse(t[1],1,vn);if(!i)return null;const o=[];let u=null;n.expectedType&&n.expectedType.kind!=="value"&&(u=n.expectedType);for(let l=1;l<t.length;l+=2){const s=l===1?-1/0:t[l],f=t[l+1],y=l,b=l+1;if(typeof s!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',y);if(o.length&&o[o.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',y);const x=n.parse(f,b,u);if(!x)return null;u=u||x.type,o.push([s,x])}return new mw(u,i,o)}evaluate(t){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(t);const o=this.input.evaluate(t);if(o<=n[0])return i[0].evaluate(t);const u=n.length;if(o>=n[u-1])return i[u-1].evaluate(t);const l=pw(n,o);return i[l].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Oie(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var kC,WP;function zie(){if(WP)return kC;WP=1,kC=e;function e(t,n,i,o){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(o-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=o}return e.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var i=t,o=0;o<8;o++){var u=this.sampleCurveX(i)-t;if(Math.abs(u)<n)return i;var l=this.sampleCurveDerivativeX(i);if(Math.abs(l)<1e-6)break;i=i-u/l}var s=0,f=1;for(i=t,o=0;o<20&&(u=this.sampleCurveX(i),!(Math.abs(u-t)<n));o++)t>u?s=i:f=i,i=(f-s)*.5+s;return i},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},kC}var Fie=zie(),Bie=Oie(Fie);class gu{constructor(t,n,i,o,u){this.type=t,this.operator=n,this.interpolation=i,this.input=o,this.labels=[],this.outputs=[];for(const[l,s]of u)this.labels.push(l),this.outputs.push(s)}static interpolationFactor(t,n,i,o){let u=0;if(t.name==="exponential")u=LC(n,t.base,i,o);else if(t.name==="linear")u=LC(n,1,i,o);else if(t.name==="cubic-bezier"){const l=t.controlPoints;u=new Bie(l[0],l[1],l[2],l[3]).solve(LC(n,1,i,o))}return u}static parse(t,n){let[i,o,u,...l]=t;if(!Array.isArray(o)||o.length===0)return n.error("Expected an interpolation type expression.",1);if(o[0]==="linear")o={name:"linear"};else if(o[0]==="exponential"){const y=o[1];if(typeof y!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:y}}else if(o[0]==="cubic-bezier"){const y=o.slice(1);if(y.length!==4||y.some(b=>typeof b!="number"||b<0||b>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:y}}else return n.error(`Unknown interpolation type ${String(o[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(u=n.parse(u,2,vn),!u)return null;const s=[];let f=null;(i==="interpolate-hcl"||i==="interpolate-lab")&&n.expectedType!=b_?f=th:n.expectedType&&n.expectedType.kind!=="value"&&(f=n.expectedType);for(let y=0;y<l.length;y+=2){const b=l[y],x=l[y+1],M=y+3,A=y+4;if(typeof b!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(s.length&&s[s.length-1][0]>=b)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const k=n.parse(x,A,f);if(!k)return null;f=f||k.type,s.push([b,k])}return!_f(f,vn)&&!_f(f,sw)&&!_f(f,th)&&!_f(f,lw)&&!_f(f,uw)&&!_f(f,b_)&&!_f(f,cw)&&!_f(f,Tl(vn))?n.error(`Type ${es(f)} is not interpolatable.`):new gu(f,i,o,u,s)}evaluate(t){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(t);const o=this.input.evaluate(t);if(o<=n[0])return i[0].evaluate(t);const u=n.length;if(o>=n[u-1])return i[u-1].evaluate(t);const l=pw(n,o),s=n[l],f=n[l+1],y=gu.interpolationFactor(this.interpolation,o,s,f),b=i[l].evaluate(t),x=i[l+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Nf(b,x,y);case"color":return Kr.interpolate(b,x,y);case"padding":return Po.interpolate(b,x,y);case"colorArray":return Oa.interpolate(b,x,y);case"numberArray":return ko.interpolate(b,x,y);case"variableAnchorOffsetCollection":return mu.interpolate(b,x,y);case"array":return Ny(b,x,y);case"projectionDefinition":return hu.interpolate(b,x,y)}case"interpolate-hcl":switch(this.type.kind){case"color":return Kr.interpolate(b,x,y,"hcl");case"colorArray":return Oa.interpolate(b,x,y,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Kr.interpolate(b,x,y,"lab");case"colorArray":return Oa.interpolate(b,x,y,"lab")}}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function LC(e,t,n,i){const o=i-n,u=e-n;return o===0?0:t===1?u/o:(Math.pow(t,u)-1)/(Math.pow(t,o)-1)}const Nie={color:Kr.interpolate,number:Nf,padding:Po.interpolate,numberArray:ko.interpolate,colorArray:Oa.interpolate,variableAnchorOffsetCollection:mu.interpolate,array:Ny};class w_{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let i=null;const o=n.expectedType;o&&o.kind!=="value"&&(i=o);const u=[];for(const s of t.slice(1)){const f=n.parse(s,1+u.length,i,void 0,{typeAnnotation:"omit"});if(!f)return null;i=i||f.type,u.push(f)}if(!i)throw new Error("No output type");return o&&u.some(s=>x_(o,s.type))?new w_(gr,u):new w_(i,u)}evaluate(t){let n=null,i=0,o;for(const u of this.args)if(i++,n=u.evaluate(t),n&&n instanceof gd&&!n.available&&(o||(o=n.name),n=null,i===this.args.length&&(n=o)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function qP(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Vie(e,t,n){return t===n}function jie(e,t,n){return t!==n}function Uie(e,t,n){return t<n}function $ie(e,t,n){return t>n}function Hie(e,t,n){return t<=n}function Gie(e,t,n){return t>=n}function lD(e,t,n,i){return i.compare(t,n)===0}function Zie(e,t,n,i){return!lD(e,t,n,i)}function Wie(e,t,n,i){return i.compare(t,n)<0}function qie(e,t,n,i){return i.compare(t,n)>0}function Kie(e,t,n,i){return i.compare(t,n)<=0}function Yie(e,t,n,i){return i.compare(t,n)>=0}function Jy(e,t,n){const i=e!=="=="&&e!=="!=";return class uD{constructor(u,l,s){this.type=_r,this.lhs=u,this.rhs=l,this.collator=s,this.hasUntypedArgument=u.type.kind==="value"||l.type.kind==="value"}static parse(u,l){if(u.length!==3&&u.length!==4)return l.error("Expected two or three arguments.");const s=u[0];let f=l.parse(u[1],1,gr);if(!f)return null;if(!qP(s,f.type))return l.concat(1).error(`"${s}" comparisons are not supported for type '${es(f.type)}'.`);let y=l.parse(u[2],2,gr);if(!y)return null;if(!qP(s,y.type))return l.concat(2).error(`"${s}" comparisons are not supported for type '${es(y.type)}'.`);if(f.type.kind!==y.type.kind&&f.type.kind!=="value"&&y.type.kind!=="value")return l.error(`Cannot compare types '${es(f.type)}' and '${es(y.type)}'.`);i&&(f.type.kind==="value"&&y.type.kind!=="value"?f=new ic(y.type,[f]):f.type.kind!=="value"&&y.type.kind==="value"&&(y=new ic(f.type,[y])));let b=null;if(u.length===4){if(f.type.kind!=="string"&&y.type.kind!=="string"&&f.type.kind!=="value"&&y.type.kind!=="value")return l.error("Cannot use collator to compare non-string types.");if(b=l.parse(u[3],3,aw),!b)return null}return new uD(f,y,b)}evaluate(u){const l=this.lhs.evaluate(u),s=this.rhs.evaluate(u);if(i&&this.hasUntypedArgument){const f=js(l),y=js(s);if(f.kind!==y.kind||!(f.kind==="string"||f.kind==="number"))throw new cs(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${f.kind}, ${y.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const f=js(l),y=js(s);if(f.kind!=="string"||y.kind!=="string")return t(u,l,s)}return this.collator?n(u,l,s,this.collator.evaluate(u)):t(u,l,s)}eachChild(u){u(this.lhs),u(this.rhs),this.collator&&u(this.collator)}outputDefined(){return!0}}}const Xie=Jy("==",Vie,lD),Qie=Jy("!=",jie,Zie),Jie=Jy("<",Uie,Wie),ese=Jy(">",$ie,qie),tse=Jy("<=",Hie,Kie),nse=Jy(">=",Gie,Yie);class gw{constructor(t,n,i){this.type=aw,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const i=t[1];if(typeof i!="object"||Array.isArray(i))return n.error("Collator options argument must be an object.");const o=n.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,_r);if(!o)return null;const u=n.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,_r);if(!u)return null;let l=null;return i.locale&&(l=n.parse(i.locale,1,Ir),!l)?null:new gw(o,u,l)}evaluate(t){return new wS(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class ES{constructor(t,n,i,o,u){this.type=Ir,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=o,this.maxFractionDigits=u}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const i=n.parse(t[1],1,vn);if(!i)return null;const o=t[2];if(typeof o!="object"||Array.isArray(o))return n.error("NumberFormat options argument must be an object.");let u=null;if(o.locale&&(u=n.parse(o.locale,1,Ir),!u))return null;let l=null;if(o.currency&&(l=n.parse(o.currency,1,Ir),!l))return null;let s=null;if(o["min-fraction-digits"]&&(s=n.parse(o["min-fraction-digits"],1,vn),!s))return null;let f=null;return o["max-fraction-digits"]&&(f=n.parse(o["max-fraction-digits"],1,vn),!f)?null:new ES(i,u,l,s,f)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class TS{constructor(t){this.type=ow,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&typeof i=="object")return n.error("First argument must be an image or text section.");const o=[];let u=!1;for(let l=1;l<=t.length-1;++l){const s=t[l];if(u&&typeof s=="object"&&!Array.isArray(s)){u=!1;let f=null;if(s["font-scale"]&&(f=n.parse(s["font-scale"],1,vn),!f))return null;let y=null;if(s["text-font"]&&(y=n.parse(s["text-font"],1,Tl(Ir)),!y))return null;let b=null;if(s["text-color"]&&(b=n.parse(s["text-color"],1,th),!b))return null;let x=null;if(s["vertical-align"]){if(typeof s["vertical-align"]=="string"&&!Lie.includes(s["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(x=n.parse(s["vertical-align"],1,Ir),!x)return null}const M=o[o.length-1];M.scale=f,M.font=y,M.textColor=b,M.verticalAlign=x}else{const f=n.parse(t[l],1,gr);if(!f)return null;const y=f.type.kind;if(y!=="string"&&y!=="value"&&y!=="null"&&y!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");u=!0,o.push({content:f,scale:null,font:null,textColor:null,verticalAlign:null})}}return new TS(o)}evaluate(t){const n=i=>{const o=i.content.evaluate(t);return js(o)===Q_?new zI("",o,null,null,null,i.verticalAlign?i.verticalAlign.evaluate(t):null):new zI(X0(o),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null,i.verticalAlign?i.verticalAlign.evaluate(t):null)};return new nh(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class PS{constructor(t){this.type=Q_,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const i=n.parse(t[1],1,Ir);return i?new PS(i):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),i=gd.fromString(n);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(n)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}}class kS{constructor(t){this.type=vn,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=n.parse(t[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${es(i.type)} instead.`):new kS(i):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new cs(`Expected value to be of type string or array, but found ${es(js(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const rh=8192;function rse(e,t){const n=ise(e[0]),i=ase(e[1]),o=Math.pow(2,t.z);return[Math.round(n*o*rh),Math.round(i*o*rh)]}function LS(e,t){const n=Math.pow(2,t.z),i=(e[0]/rh+t.x)/n,o=(e[1]/rh+t.y)/n;return[sse(i),ose(o)]}function ise(e){return(180+e)/360}function sse(e){return e*360-180}function ase(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ose(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function J_(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function C_(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function lse(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function use(e,t,n){const i=e[0]-t[0],o=e[1]-t[1],u=e[0]-n[0],l=e[1]-n[1];return i*l-u*o===0&&i*u<=0&&o*l<=0}function yw(e,t,n,i){const o=[t[0]-e[0],t[1]-e[1]],u=[i[0]-n[0],i[1]-n[1]];return fse(u,o)===0?!1:!!(KP(e,t,n,i)&&KP(n,i,e,t))}function cse(e,t,n){for(const i of n)for(let o=0;o<i.length-1;++o)if(yw(e,t,i[o],i[o+1]))return!0;return!1}function ev(e,t,n=!1){let i=!1;for(const o of t)for(let u=0;u<o.length-1;u++){if(use(e,o[u],o[u+1]))return n;lse(e,o[u],o[u+1])&&(i=!i)}return i}function hse(e,t){for(const n of t)if(ev(e,n))return!0;return!1}function cD(e,t){for(const n of e)if(!ev(n,t))return!1;for(let n=0;n<e.length-1;++n)if(cse(e[n],e[n+1],t))return!1;return!0}function dse(e,t){for(const n of t)if(cD(e,n))return!0;return!1}function fse(e,t){return e[0]*t[1]-e[1]*t[0]}function KP(e,t,n,i){const o=e[0]-n[0],u=e[1]-n[1],l=t[0]-n[0],s=t[1]-n[1],f=i[0]-n[0],y=i[1]-n[1],b=o*y-f*u,x=l*y-f*s;return b>0&&x<0||b<0&&x>0}function DS(e,t,n){const i=[];for(let o=0;o<e.length;o++){const u=[];for(let l=0;l<e[o].length;l++){const s=rse(e[o][l],n);J_(t,s),u.push(s)}i.push(u)}return i}function hD(e,t,n){const i=[];for(let o=0;o<e.length;o++){const u=DS(e[o],t,n);i.push(u)}return i}function dD(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const o=i*.5;let u=e[0]-n[0]>o?-i:n[0]-e[0]>o?i:0;u===0&&(u=e[0]-n[2]>o?-i:n[2]-e[0]>o?i:0),e[0]+=u}J_(t,e)}function pse(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function YP(e,t,n,i){const o=Math.pow(2,i.z)*rh,u=[i.x*rh,i.y*rh],l=[];for(const s of e)for(const f of s){const y=[f.x+u[0],f.y+u[1]];dD(y,t,n,o),l.push(y)}return l}function XP(e,t,n,i){const o=Math.pow(2,i.z)*rh,u=[i.x*rh,i.y*rh],l=[];for(const s of e){const f=[];for(const y of s){const b=[y.x+u[0],y.y+u[1]];J_(t,b),f.push(b)}l.push(f)}if(t[2]-t[0]<=o/2){pse(t);for(const s of l)for(const f of s)dD(f,t,n,o)}return l}function mse(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(t.type==="Polygon"){const u=DS(t.coordinates,i,o),l=YP(e.geometry(),n,i,o);if(!C_(n,i))return!1;for(const s of l)if(!ev(s,u))return!1}if(t.type==="MultiPolygon"){const u=hD(t.coordinates,i,o),l=YP(e.geometry(),n,i,o);if(!C_(n,i))return!1;for(const s of l)if(!hse(s,u))return!1}return!0}function gse(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(t.type==="Polygon"){const u=DS(t.coordinates,i,o),l=XP(e.geometry(),n,i,o);if(!C_(n,i))return!1;for(const s of l)if(!cD(s,u))return!1}if(t.type==="MultiPolygon"){const u=hD(t.coordinates,i,o),l=XP(e.geometry(),n,i,o);if(!C_(n,i))return!1;for(const s of l)if(!dse(s,u))return!1}return!0}class Im{constructor(t,n){this.type=_r,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(A_(t[1])){const i=t[1];if(i.type==="FeatureCollection"){const o=[];for(const u of i.features){const{type:l,coordinates:s}=u.geometry;l==="Polygon"&&o.push(s),l==="MultiPolygon"&&o.push(...s)}if(o.length){const u={type:"MultiPolygon",coordinates:o};return new Im(i,u)}}else if(i.type==="Feature"){const o=i.geometry.type;if(o==="Polygon"||o==="MultiPolygon")return new Im(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new Im(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return mse(t,this.geometries);if(t.geometryType()==="LineString")return gse(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class fD{constructor(t=[],n=(i,o)=>i<o?-1:i>o?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,o=n[t];for(;t>0;){const u=t-1>>1,l=n[u];if(i(o,l)>=0)break;n[t]=l,t=u}n[t]=o}_down(t){const{data:n,compare:i}=this,o=this.length>>1,u=n[t];for(;t<o;){let l=(t<<1)+1;const s=l+1;if(s<this.length&&i(n[s],n[l])<0&&(l=s),i(n[l],u)>=0)break;n[t]=n[l],t=l}n[t]=u}}function yse(e,t){if(e.length<=1)return[e];const i=[];let o,u;for(const l of e){const s=vse(l);s!==0&&(l.area=Math.abs(s),u===void 0&&(u=s<0),u===s<0?(o&&i.push(o),o=[l]):o.push(l))}return o&&i.push(o),i}function vse(e){let t=0;for(let n=0,i=e.length,o=i-1,u,l;n<i;o=n++)u=e[n],l=e[o],t+=(l.x-u.x)*(u.y+l.y);return t}const _se=6378.137,QP=1/298.257223563,JP=QP*(2-QP),e3=Math.PI/180;class RS{constructor(t){const n=e3*_se*1e3,i=Math.cos(t*e3),o=1/(1-JP*(1-i*i)),u=Math.sqrt(o);this.kx=n*u*i,this.ky=n*u*o*(1-JP)}distance(t,n){const i=this.wrap(t[0]-n[0])*this.kx,o=(t[1]-n[1])*this.ky;return Math.sqrt(i*i+o*o)}pointOnLine(t,n){let i=1/0,o,u,l,s;for(let f=0;f<t.length-1;f++){let y=t[f][0],b=t[f][1],x=this.wrap(t[f+1][0]-y)*this.kx,M=(t[f+1][1]-b)*this.ky,A=0;(x!==0||M!==0)&&(A=(this.wrap(n[0]-y)*this.kx*x+(n[1]-b)*this.ky*M)/(x*x+M*M),A>1?(y=t[f+1][0],b=t[f+1][1]):A>0&&(y+=x/this.kx*A,b+=M/this.ky*A)),x=this.wrap(n[0]-y)*this.kx,M=(n[1]-b)*this.ky;const k=x*x+M*M;k<i&&(i=k,o=y,u=b,l=f,s=A)}return{point:[o,u],index:l,t:Math.max(0,Math.min(1,s))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}const FI=100,BI=50;function pD(e,t){return t[0]-e[0]}function Kx(e){return e[1]-e[0]+1}function hd(e,t){return e[1]>=e[0]&&e[1]<t}function NI(e,t){if(e[0]>e[1])return[null,null];const n=Kx(e);if(t){if(n===2)return[e,null];const o=Math.floor(n/2);return[[e[0],e[0]+o],[e[0]+o,e[1]]]}if(n===1)return[e,null];const i=Math.floor(n/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function VI(e,t){if(!hd(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)J_(n,e[i]);return n}function jI(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const i of n)J_(t,i);return t}function t3(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function OS(e,t,n){if(!t3(e)||!t3(t))return NaN;let i=0,o=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(o=e[1]-t[3]),e[3]<t[1]&&(o=t[1]-e[3]),n.distance([0,0],[i,o])}function ym(e,t,n){const i=n.pointOnLine(t,e);return n.distance(e,i.point)}function zS(e,t,n,i,o){const u=Math.min(ym(e,[n,i],o),ym(t,[n,i],o)),l=Math.min(ym(n,[e,t],o),ym(i,[e,t],o));return Math.min(u,l)}function bse(e,t,n,i,o){if(!(hd(t,e.length)&&hd(i,n.length)))return 1/0;let l=1/0;for(let s=t[0];s<t[1];++s){const f=e[s],y=e[s+1];for(let b=i[0];b<i[1];++b){const x=n[b],M=n[b+1];if(yw(f,y,x,M))return 0;l=Math.min(l,zS(f,y,x,M,o))}}return l}function xse(e,t,n,i,o){if(!(hd(t,e.length)&&hd(i,n.length)))return NaN;let l=1/0;for(let s=t[0];s<=t[1];++s)for(let f=i[0];f<=i[1];++f)if(l=Math.min(l,o.distance(e[s],n[f])),l===0)return l;return l}function Ase(e,t,n){if(ev(e,t,!0))return 0;let i=1/0;for(const o of t){const u=o[0],l=o[o.length-1];if(u!==l&&(i=Math.min(i,ym(e,[l,u],n)),i===0))return i;const s=n.pointOnLine(o,e);if(i=Math.min(i,n.distance(e,s.point)),i===0)return i}return i}function wse(e,t,n,i){if(!hd(t,e.length))return NaN;for(let u=t[0];u<=t[1];++u)if(ev(e[u],n,!0))return 0;let o=1/0;for(let u=t[0];u<t[1];++u){const l=e[u],s=e[u+1];for(const f of n)for(let y=0,b=f.length,x=b-1;y<b;x=y++){const M=f[x],A=f[y];if(yw(l,s,M,A))return 0;o=Math.min(o,zS(l,s,M,A,i))}}return o}function n3(e,t){for(const n of e)for(const i of n)if(ev(i,t,!0))return!0;return!1}function Cse(e,t,n,i=1/0){const o=jI(e),u=jI(t);if(i!==1/0&&OS(o,u,n)>=i)return i;if(C_(o,u)){if(n3(e,t))return 0}else if(n3(t,e))return 0;let l=1/0;for(const s of e)for(let f=0,y=s.length,b=y-1;f<y;b=f++){const x=s[b],M=s[f];for(const A of t)for(let k=0,L=A.length,F=L-1;k<L;F=k++){const V=A[F],O=A[k];if(yw(x,M,V,O))return 0;l=Math.min(l,zS(x,M,V,O,n))}}return l}function r3(e,t,n,i,o,u){if(!u)return;const l=OS(VI(i,u),o,n);l<t&&e.push([l,u,[0,0]])}function jb(e,t,n,i,o,u,l){if(!u||!l)return;const s=OS(VI(i,u),VI(o,l),n);s<t&&e.push([s,u,l])}function Yx(e,t,n,i,o=1/0){let u=Math.min(i.distance(e[0],n[0][0]),o);if(u===0)return u;const l=new fD([[0,[0,e.length-1],[0,0]]],pD),s=jI(n);for(;l.length>0;){const f=l.pop();if(f[0]>=u)continue;const y=f[1],b=t?BI:FI;if(Kx(y)<=b){if(!hd(y,e.length))return NaN;if(t){const x=wse(e,y,n,i);if(isNaN(x)||x===0)return x;u=Math.min(u,x)}else for(let x=y[0];x<=y[1];++x){const M=Ase(e[x],n,i);if(u=Math.min(u,M),u===0)return 0}}else{const x=NI(y,t);r3(l,u,i,e,s,x[0]),r3(l,u,i,e,s,x[1])}}return u}function Xx(e,t,n,i,o,u=1/0){let l=Math.min(u,o.distance(e[0],n[0]));if(l===0)return l;const s=new fD([[0,[0,e.length-1],[0,n.length-1]]],pD);for(;s.length>0;){const f=s.pop();if(f[0]>=l)continue;const y=f[1],b=f[2],x=t?BI:FI,M=i?BI:FI;if(Kx(y)<=x&&Kx(b)<=M){if(!hd(y,e.length)&&hd(b,n.length))return NaN;let A;if(t&&i)A=bse(e,y,n,b,o),l=Math.min(l,A);else if(t&&!i){const k=e.slice(y[0],y[1]+1);for(let L=b[0];L<=b[1];++L)if(A=ym(n[L],k,o),l=Math.min(l,A),l===0)return l}else if(!t&&i){const k=n.slice(b[0],b[1]+1);for(let L=y[0];L<=y[1];++L)if(A=ym(e[L],k,o),l=Math.min(l,A),l===0)return l}else A=xse(e,y,n,b,o),l=Math.min(l,A)}else{const A=NI(y,t),k=NI(b,i);jb(s,l,o,e,n,A[0],k[0]),jb(s,l,o,e,n,A[0],k[1]),jb(s,l,o,e,n,A[1],k[0]),jb(s,l,o,e,n,A[1],k[1])}}return l}function Ise(e,t){const n=e.geometry(),i=n.flat().map(l=>LS([l.x,l.y],e.canonical));if(n.length===0)return NaN;const o=new RS(i[0][1]);let u=1/0;for(const l of t){switch(l.type){case"Point":u=Math.min(u,Xx(i,!1,[l.coordinates],!1,o,u));break;case"LineString":u=Math.min(u,Xx(i,!1,l.coordinates,!0,o,u));break;case"Polygon":u=Math.min(u,Yx(i,!1,l.coordinates,o,u));break}if(u===0)return u}return u}function Mse(e,t){const n=e.geometry(),i=n.flat().map(l=>LS([l.x,l.y],e.canonical));if(n.length===0)return NaN;const o=new RS(i[0][1]);let u=1/0;for(const l of t){switch(l.type){case"Point":u=Math.min(u,Xx(i,!0,[l.coordinates],!1,o,u));break;case"LineString":u=Math.min(u,Xx(i,!0,l.coordinates,!0,o,u));break;case"Polygon":u=Math.min(u,Yx(i,!0,l.coordinates,o,u));break}if(u===0)return u}return u}function Sse(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const i=yse(n).map(l=>l.map(s=>s.map(f=>LS([f.x,f.y],e.canonical)))),o=new RS(i[0][0][0][1]);let u=1/0;for(const l of t)for(const s of i){switch(l.type){case"Point":u=Math.min(u,Yx([l.coordinates],!1,s,o,u));break;case"LineString":u=Math.min(u,Yx(l.coordinates,!0,s,o,u));break;case"Polygon":u=Math.min(u,Cse(s,l.coordinates,o,u));break}if(u===0)return u}return u}function DC(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}class Mm{constructor(t,n){this.type=vn,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(A_(t[1])){const i=t[1];if(i.type==="FeatureCollection")return new Mm(i,i.features.map(o=>DC(o.geometry)).flat());if(i.type==="Feature")return new Mm(i,DC(i.geometry));if("type"in i&&"coordinates"in i)return new Mm(i,DC(i))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return Ise(t,this.geometries);if(t.geometryType()==="LineString")return Mse(t,this.geometries);if(t.geometryType()==="Polygon")return Sse(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class vw{constructor(t){this.type=gr,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=t[1];return i==null?n.error("Global state property must be defined."):typeof i!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new vw(i)}evaluate(t){var n;const i=(n=t.globals)===null||n===void 0?void 0:n.globalState;return!i||Object.keys(i).length===0?null:sD(i,this.key)}eachChild(){}outputDefined(){return!1}}const FS={"==":Xie,"!=":Qie,">":ese,"<":Jie,">=":nse,"<=":tse,array:ic,at:CS,boolean:ic,case:SS,coalesce:w_,collator:gw,format:TS,image:PS,in:IS,"index-of":Wx,interpolate:gu,"interpolate-hcl":gu,"interpolate-lab":gu,length:kS,let:dw,literal:Vy,match:MS,number:ic,"number-format":ES,object:ic,slice:qx,step:mw,string:ic,"to-boolean":Df,"to-color":Df,"to-number":Df,"to-string":Df,var:fw,within:Im,distance:Mm,"global-state":vw};class ac{constructor(t,n,i,o){this.name=t,this.type=n,this._evaluate=i,this.args=o}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const i=t[0],o=ac.definitions[i];if(!o)return n.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const u=Array.isArray(o)?o[0]:o.type,l=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,s=l.filter(([y])=>!Array.isArray(y)||y.length===t.length-1);let f=null;for(const[y,b]of s){f=new hw(n.registry,Qx,n.path,null,n.scope);const x=[];let M=!1;for(let A=1;A<t.length;A++){const k=t[A],L=Array.isArray(y)?y[A-1]:y.type,F=f.parse(k,1+x.length,L);if(!F){M=!0;break}x.push(F)}if(!M){if(Array.isArray(y)&&y.length!==x.length){f.error(`Expected ${y.length} arguments, but found ${x.length} instead.`);continue}for(let A=0;A<x.length;A++){const k=Array.isArray(y)?y[A]:y.type,L=x[A];f.concat(A+1).checkSubtype(k,L.type)}if(f.errors.length===0)return new ac(i,u,b,x)}}if(s.length===1)n.errors.push(...f.errors);else{const b=(s.length?s:l).map(([M])=>Tse(M)).join(" | "),x=[];for(let M=1;M<t.length;M++){const A=n.parse(t[M],1+x.length);if(!A)return null;x.push(es(A.type))}n.error(`Expected arguments of type ${b}, but found (${x.join(", ")}) instead.`)}return null}static register(t,n){ac.definitions=n;for(const i in n)t[i]=ac}}function i3(e,[t,n,i,o]){t=t.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);const u=o?o.evaluate(e):1,l=aD(t,n,i,u);if(l)throw new cs(l);return new Kr(t/255,n/255,i/255,u,!1)}function s3(e,t){return e in t}function RC(e,t){const n=t[e];return typeof n>"u"?null:n}function Ese(e,t,n,i){for(;n<=i;){const o=n+i>>1;if(t[o]===e)return!0;t[o]>e?i=o-1:n=o+1}return!1}function lm(e){return{type:e}}ac.register(FS,{error:[bie,[Ir],(e,[t])=>{throw new cs(t.evaluate(e))}],typeof:[Ir,[gr],(e,[t])=>es(js(t.evaluate(e)))],"to-rgba":[Tl(vn,4),[th],(e,[t])=>{const[n,i,o,u]=t.evaluate(e).rgb;return[n*255,i*255,o*255,u]}],rgb:[th,[vn,vn,vn],i3],rgba:[th,[vn,vn,vn,vn],i3],has:{type:_r,overloads:[[[Ir],(e,[t])=>s3(t.evaluate(e),e.properties())],[[Ir,wm],(e,[t,n])=>s3(t.evaluate(e),n.evaluate(e))]]},get:{type:gr,overloads:[[[Ir],(e,[t])=>RC(t.evaluate(e),e.properties())],[[Ir,wm],(e,[t,n])=>RC(t.evaluate(e),n.evaluate(e))]]},"feature-state":[gr,[Ir],(e,[t])=>RC(t.evaluate(e),e.featureState||{})],properties:[wm,[],e=>e.properties()],"geometry-type":[Ir,[],e=>e.geometryType()],id:[gr,[],e=>e.id()],zoom:[vn,[],e=>e.globals.zoom],"heatmap-density":[vn,[],e=>e.globals.heatmapDensity||0],"line-progress":[vn,[],e=>e.globals.lineProgress||0],accumulated:[gr,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[vn,lm(vn),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[vn,lm(vn),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:vn,overloads:[[[vn,vn],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[vn],(e,[t])=>-t.evaluate(e)]]},"/":[vn,[vn,vn],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[vn,[vn,vn],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[vn,[],()=>Math.LN2],pi:[vn,[],()=>Math.PI],e:[vn,[],()=>Math.E],"^":[vn,[vn,vn],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[vn,[vn],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[vn,[vn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[vn,[vn],(e,[t])=>Math.log(t.evaluate(e))],log2:[vn,[vn],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[vn,[vn],(e,[t])=>Math.sin(t.evaluate(e))],cos:[vn,[vn],(e,[t])=>Math.cos(t.evaluate(e))],tan:[vn,[vn],(e,[t])=>Math.tan(t.evaluate(e))],asin:[vn,[vn],(e,[t])=>Math.asin(t.evaluate(e))],acos:[vn,[vn],(e,[t])=>Math.acos(t.evaluate(e))],atan:[vn,[vn],(e,[t])=>Math.atan(t.evaluate(e))],min:[vn,lm(vn),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[vn,lm(vn),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[vn,[vn],(e,[t])=>Math.abs(t.evaluate(e))],round:[vn,[vn],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[vn,[vn],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[vn,[vn],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[_r,[Ir,gr],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[_r,[gr],(e,[t])=>e.id()===t.value],"filter-type-==":[_r,[Ir],(e,[t])=>e.geometryType()===t.value],"filter-<":[_r,[Ir,gr],(e,[t,n])=>{const i=e.properties()[t.value],o=n.value;return typeof i==typeof o&&i<o}],"filter-id-<":[_r,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<i}],"filter->":[_r,[Ir,gr],(e,[t,n])=>{const i=e.properties()[t.value],o=n.value;return typeof i==typeof o&&i>o}],"filter-id->":[_r,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>i}],"filter-<=":[_r,[Ir,gr],(e,[t,n])=>{const i=e.properties()[t.value],o=n.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[_r,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<=i}],"filter->=":[_r,[Ir,gr],(e,[t,n])=>{const i=e.properties()[t.value],o=n.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[_r,[gr],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>=i}],"filter-has":[_r,[gr],(e,[t])=>t.value in e.properties()],"filter-has-id":[_r,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[_r,[Tl(Ir)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[_r,[Tl(gr)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[_r,[Ir,Tl(gr)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[_r,[Ir,Tl(gr)],(e,[t,n])=>Ese(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:_r,overloads:[[[_r,_r],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[lm(_r),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:_r,overloads:[[[_r,_r],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[lm(_r),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[_r,[_r],(e,[t])=>!t.evaluate(e)],"is-supported-script":[_r,[Ir],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[Ir,[Ir],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Ir,[Ir],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Ir,lm(gr),(e,t)=>t.map(n=>X0(n.evaluate(e))).join("")],"resolved-locale":[Ir,[aw],(e,[t])=>t.evaluate(e).resolvedLocale()]});function Tse(e){return Array.isArray(e)?`(${e.map(es).join(", ")})`:`(${es(e.type)}...)`}function Qx(e){if(e instanceof fw)return Qx(e.boundExpression);if(e instanceof ac&&e.name==="error")return!1;if(e instanceof gw)return!1;if(e instanceof Im)return!1;if(e instanceof Mm)return!1;if(e instanceof vw)return!1;const t=e instanceof Df||e instanceof ic;let n=!0;return e.eachChild(i=>{t?n=n&&Qx(i):n=n&&i instanceof Vy}),n?BS(e)&&VS(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function BS(e){if(e instanceof ac){if(e.name==="get"&&e.args.length===1)return!1;if(e.name==="feature-state")return!1;if(e.name==="has"&&e.args.length===1)return!1;if(e.name==="properties"||e.name==="geometry-type"||e.name==="id")return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Im||e instanceof Mm)return!1;let t=!0;return e.eachChild(n=>{t&&!BS(n)&&(t=!1)}),t}function NS(e){if(e instanceof ac&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!NS(n)&&(t=!1)}),t}function VS(e,t){if(e instanceof ac&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(i=>{n&&!VS(i,t)&&(n=!1)}),n}function UI(e){return{result:"success",value:e}}function ty(e){return{result:"error",value:e}}function Pse(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function kse(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function mD(e){return!!e.expression&&e.expression.interpolated}function jS(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function US(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&js(e)===wm}function Lse(e){return e}function Dse(e){switch(e.type){case"color":return Kr.parse;case"padding":return Po.parse;case"numberArray":return ko.parse;case"colorArray":return Oa.parse;default:return null}}function Rse(e){switch(e){case"exponential":return gD;case"interval":return zse;case"categorical":return Ose;case"identity":return Fse;default:throw new Error(`Unknown function type "${e}"`)}}function $S(e,t){const n=e.stops&&typeof e.stops[0][0]=="object",i=n||e.property!==void 0,o=n||!i,u=e.type||(mD(t)?"exponential":"interval"),l=Dse(t);if(l&&(e=Y4({},e),e.stops&&(e.stops=e.stops.map(b=>[b[0],l(b[1])])),e.default?e.default=l(e.default):e.default=l(t.default)),e.colorSpace&&!kie(e.colorSpace))throw new Error(`Unknown color space: "${e.colorSpace}"`);const s=Rse(u);let f,y;if(u==="categorical"){f=Object.create(null);for(const b of e.stops)f[b[0]]=b[1];y=typeof e.stops[0][0]}if(n){const b={},x=[];for(let k=0;k<e.stops.length;k++){const L=e.stops[k],F=L[0].zoom;b[F]===void 0&&(b[F]={zoom:F,type:e.type,property:e.property,default:e.default,stops:[]},x.push(F)),b[F].stops.push([L[0].value,L[1]])}const M=[];for(const k of x)M.push([b[k].zoom,$S(b[k],t)]);const A={name:"linear"};return{kind:"composite",interpolationType:A,interpolationFactor:gu.interpolationFactor.bind(void 0,A),zoomStops:M.map(k=>k[0]),evaluate({zoom:k},L){return gD({stops:M,base:e.base},t,k).evaluate(k,L)}}}else if(o){const b=u==="exponential"?{name:"exponential",base:e.base!==void 0?e.base:1}:null;return{kind:"camera",interpolationType:b,interpolationFactor:gu.interpolationFactor.bind(void 0,b),zoomStops:e.stops.map(x=>x[0]),evaluate:({zoom:x})=>s(e,t,x,f,y)}}else return{kind:"source",evaluate(b,x){const M=x&&x.properties?x.properties[e.property]:void 0;return M===void 0?e1(e.default,t.default):s(e,t,M,f,y)}}}function e1(e,t,n){if(e!==void 0)return e;if(t!==void 0)return t;if(n!==void 0)return n}function Ose(e,t,n,i,o){const u=typeof n===o?i[n]:void 0;return e1(u,e.default,t.default)}function zse(e,t,n){if(jS(n)!=="number")return e1(e.default,t.default);const i=e.stops.length;if(i===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=pw(e.stops.map(u=>u[0]),n);return e.stops[o][1]}function gD(e,t,n){const i=e.base!==void 0?e.base:1;if(jS(n)!=="number")return e1(e.default,t.default);const o=e.stops.length;if(o===1||n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[o-1][0])return e.stops[o-1][1];const u=pw(e.stops.map(b=>b[0]),n),l=Bse(n,i,e.stops[u][0],e.stops[u+1][0]),s=e.stops[u][1],f=e.stops[u+1][1],y=Nie[t.type]||Lse;return typeof s.evaluate=="function"?{evaluate(...b){const x=s.evaluate.apply(void 0,b),M=f.evaluate.apply(void 0,b);if(!(x===void 0||M===void 0))return y(x,M,l,e.colorSpace)}}:y(s,f,l,e.colorSpace)}function Fse(e,t,n){switch(t.type){case"color":n=Kr.parse(n);break;case"formatted":n=nh.fromString(n.toString());break;case"resolvedImage":n=gd.fromString(n.toString());break;case"padding":n=Po.parse(n);break;case"colorArray":n=Oa.parse(n);break;case"numberArray":n=ko.parse(n);break;default:jS(n)!==t.type&&(t.type!=="enum"||!t.values[n])&&(n=void 0)}return e1(n,e.default,t.default)}function Bse(e,t,n,i){const o=i-n,u=e-n;return o===0?0:t===1?u/o:(Math.pow(t,u)-1)/(Math.pow(t,o)-1)}class yD{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new oD,this._defaultValue=n?Use(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,i,o,u,l){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=o,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=l,this.expression.evaluate(this._evaluator)}evaluate(t,n,i,o,u,l){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=o,this._evaluator.availableImages=u||null,this._evaluator.formattedSection=l||null;try{const s=this.expression.evaluate(this._evaluator);if(s==null||typeof s=="number"&&s!==s)return this._defaultValue;if(this._enumValues&&!(s in this._enumValues))throw new cs(`Expected value to be one of ${Object.keys(this._enumValues).map(f=>JSON.stringify(f)).join(", ")}, but found ${JSON.stringify(s)} instead.`);return s}catch(s){return this._warningHistory[s.message]||(this._warningHistory[s.message]=!0,typeof console<"u"&&console.warn(s.message)),this._defaultValue}}}function vD(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in FS}function _D(e,t){const n=new hw(FS,Qx,[],t?jse(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?UI(new yD(i,t)):ty(n.errors)}class $I{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!NS(n.expression)}evaluateWithoutErrorHandling(t,n,i,o,u,l){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,o,u,l)}evaluate(t,n,i,o,u,l){return this._styleExpression.evaluate(t,n,i,o,u,l)}}class HI{constructor(t,n,i,o){this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!NS(n.expression),this.interpolationType=o}evaluateWithoutErrorHandling(t,n,i,o,u,l){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,o,u,l)}evaluate(t,n,i,o,u,l){return this._styleExpression.evaluate(t,n,i,o,u,l)}interpolationFactor(t,n,i){return this.interpolationType?gu.interpolationFactor(this.interpolationType,t,n,i):0}}function Nse(e){return e._styleExpression!==void 0}function bD(e,t){const n=_D(e,t);if(n.result==="error")return n;const i=n.value.expression,o=BS(i);if(!o&&!Pse(t))return ty([new Xc("","data expressions not supported")]);const u=VS(i,["zoom"]);if(!u&&!kse(t))return ty([new Xc("","zoom expressions not supported")]);const l=cx(i);if(!l&&!u)return ty([new Xc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(l instanceof Xc)return ty([l]);if(l instanceof gu&&!mD(t))return ty([new Xc("",'"interpolate" expressions cannot be used with this property')]);if(!l)return UI(o?new $I("constant",n.value):new $I("source",n.value));const s=l instanceof gu?l.interpolation:void 0;return UI(o?new HI("camera",n.value,l.labels,s):new HI("composite",n.value,l.labels,s))}class _w{constructor(t,n){this._parameters=t,this._specification=n,Y4(this,$S(this._parameters,this._specification))}static deserialize(t){return new _w(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Vse(e,t){if(US(e))return new _w(e,t);if(vD(e)){const n=bD(e,t);if(n.result==="error")throw new Error(n.value.map(i=>`${i.key}: ${i.message}`).join(", "));return n.value}else{let n=e;return t.type==="color"&&typeof e=="string"?n=Kr.parse(e):t.type==="padding"&&(typeof e=="number"||Array.isArray(e))?n=Po.parse(e):t.type==="numberArray"&&(typeof e=="number"||Array.isArray(e))?n=ko.parse(e):t.type==="colorArray"&&(typeof e=="string"||Array.isArray(e))?n=Oa.parse(e):t.type==="variableAnchorOffsetCollection"&&Array.isArray(e)?n=mu.parse(e):t.type==="projectionDefinition"&&typeof e=="string"&&(n=hu.parse(e)),{kind:"constant",evaluate:()=>n}}}function cx(e){let t=null;if(e instanceof dw)t=cx(e.result);else if(e instanceof w_){for(const n of e.args)if(t=cx(n),t)break}else(e instanceof mw||e instanceof gu)&&e.input instanceof ac&&e.input.name==="zoom"&&(t=e);return t instanceof Xc||e.eachChild(n=>{const i=cx(n);i instanceof Xc?t=i:!t&&i?t=new Xc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new Xc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function jse(e){const t={color:th,string:Ir,number:vn,enum:Ir,boolean:_r,formatted:ow,padding:lw,numberArray:uw,colorArray:b_,projectionDefinition:sw,resolvedImage:Q_,variableAnchorOffsetCollection:cw};return e.type==="array"?Tl(t[e.value]||gr,e.length):t[e.type]}function Use(e){if(e.type==="color"&&US(e.default))return new Kr(0,0,0,0);switch(e.type){case"color":return Kr.parse(e.default)||null;case"padding":return Po.parse(e.default)||null;case"numberArray":return ko.parse(e.default)||null;case"colorArray":return Oa.parse(e.default)||null;case"variableAnchorOffsetCollection":return mu.parse(e.default)||null;case"projectionDefinition":return hu.parse(e.default)||null;default:return e.default===void 0?null:e.default}}function xD(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!xD(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function I_(e){return typeof e=="object"?["literal",e]:e}function $se(e,t){let n=e.stops;if(!n)return Hse(e,t);const i=n&&typeof n[0][0]=="object",o=i||e.property!==void 0,u=i||!o;return n=n.map(l=>!o&&t.tokens&&typeof l[1]=="string"?[l[0],qse(l[1])]:[l[0],I_(l[1])]),i?Gse(e,t,n):u?Wse(e,t,n):GI(e,t,n)}function Hse(e,t){const n=["get",e.property];if(e.default===void 0)return t.type==="string"?["string",n]:n;if(t.type==="enum")return["match",n,Object.keys(t.values),n,e.default];{const i=[t.type==="color"?"to-color":t.type,n,I_(e.default)];return t.type==="array"&&i.splice(1,0,t.value,t.length||null),i}}function HS(e){switch(e.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Gse(e,t,n){const i={},o={},u=[];for(let s=0;s<n.length;s++){const f=n[s],y=f[0].zoom;i[y]===void 0&&(i[y]={zoom:y,type:e.type,property:e.property,default:e.default},o[y]=[],u.push(y)),o[y].push([f[0].value,f[1]])}if(ZS({},t)==="exponential"){const s=[HS(e),["linear"],["zoom"]];for(const f of u){const y=GI(i[f],t,o[f]);wy(s,f,y,!1)}return s}else{const s=["step",["zoom"]];for(const f of u){const y=GI(i[f],t,o[f]);wy(s,f,y,!0)}return GS(s),s}}function Zse(e,t){if(e!==void 0)return e;if(t!==void 0)return t}function a3(e,t){const n=I_(Zse(e.default,t.default));return n===void 0&&t.type==="resolvedImage"?"":n}function GI(e,t,n){const i=ZS(e,t),o=["get",e.property];if(i==="categorical"&&typeof n[0][0]=="boolean"){const u=["case"];for(const l of n)u.push(["==",o,l[0]],l[1]);return u.push(a3(e,t)),u}else if(i==="categorical"){const u=["match",o];for(const l of n)wy(u,l[0],l[1],!1);return u.push(a3(e,t)),u}else if(i==="interval"){const u=["step",["number",o]];for(const l of n)wy(u,l[0],l[1],!0);return GS(u),e.default===void 0?u:["case",["==",["typeof",o],"number"],u,I_(e.default)]}else if(i==="exponential"){const u=e.base!==void 0?e.base:1,l=[HS(e),u===1?["linear"]:["exponential",u],["number",o]];for(const s of n)wy(l,s[0],s[1],!1);return e.default===void 0?l:["case",["==",["typeof",o],"number"],l,I_(e.default)]}else throw new Error(`Unknown property function type ${i}`)}function Wse(e,t,n,i=["zoom"]){const o=ZS(e,t);let u,l=!1;if(o==="interval")u=["step",i],l=!0;else if(o==="exponential"){const s=e.base!==void 0?e.base:1;u=[HS(e),s===1?["linear"]:["exponential",s],i]}else throw new Error(`Unknown zoom function type "${o}"`);for(const s of n)wy(u,s[0],s[1],l);return GS(u),u}function GS(e){e[0]==="step"&&e.length===3&&(e.push(0),e.push(e[3]))}function wy(e,t,n,i){e.length>3&&t===e[e.length-2]||(i&&e.length===2||e.push(t),e.push(n))}function ZS(e,t){return e.type?e.type:t.expression.interpolated?"exponential":"interval"}function qse(e){const t=["concat"],n=/{([^{}]+)}/g;let i=0;for(let o=n.exec(e);o!==null;o=n.exec(e)){const u=e.slice(i,n.lastIndex-o[0].length);i=n.lastIndex,u.length>0&&t.push(u),t.push(["get",o[1]])}if(t.length===1)return e;if(i<e.length)t.push(e.slice(i));else if(t.length===2)return["to-string",t[1]];return t}const Kse={StyleExpression:yD,StylePropertyFunction:_w,ZoomConstantExpression:$I,ZoomDependentExpression:HI,createExpression:_D,createPropertyExpression:bD,isExpression:vD,isExpressionFilter:xD,isZoomExpression:Nse,normalizePropertyExpression:Vse},Yse={convertFunction:$se,createFunction:$S,isFunction:US},Xse=[["background"],["circle"],["fill-extrusion"],["fill"],["heatmap"],["hillshade"],["line"],["raster"],["icon","symbol"],["text","symbol"]];function Qse({zoom:e}){function t(n){const i=Xse.find(o=>{const u=o[0];return n.startsWith(u)});return i?i[1]||i[0]:null}return function(n,i,o){var y;const u=t(o);if(!u)return null;const l=(y=_ie[`${i}_${u}`])==null?void 0:y[o];if(!l)return null;const s=l.default;if(!n[i])return s;const f=n[i][o];if(typeof f>"u")return s;if(typeof f=="object"){let b;if(Array.isArray(f)){if(l.type==="array")return f;b=Kse.createExpression(f).value}else b=Yse.createFunction(f,l);if(!b.evaluate)return null;const x=b.evaluate({zoom:e},{});return(x==null?void 0:x.name)||x||null}else return f}}const OC={},Jse=({map:e,zoom:t,layer:n})=>{const o={circle:Sre,symbol:Lre,line:Tre,fill:Ere}[n.type],u=Qse({zoom:t}),l=s=>{if(!s)return"";if(OC[s])return OC[s];const f=e.getImage(s);if(!f)return"";const y=f.data,b=eae(y),x=document.createElement("canvas"),M=x.getContext("2d");x.width=y.width,x.height=y.height,M.putImageData(b,0,0);const A=x.toDataURL("image/png");return OC[s]=A,A};return o?o({layer:n,expr:u,image:l}):null};function eae(e){const{width:t,height:n,data:i}=e,o=new Uint8ClampedArray(i);return new ImageData(o,t,n)}function tae(){function e(t,n){const i=t==null?void 0:t.getZoom(),o=Jse({map:t,zoom:i,layer:n}),u=o?o.element==="div"?[ZI(o)]:o.element==="svg"?(o.attributes.style="height: 17px;",o.attributes.version="1.1",[ZI(o)]):So("div"):[So("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"black",class:"post-icon"},[So("path",{d:"M21,0H3A3,3,0,0,0,0,3V21a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V3A3,3,0,0,0,21,0ZM3,2H21a1,1,0,0,1,1,1V15.86L14.18,9.35a5.06,5.06,0,0,0-6.39-.06L2,13.92V3A1,1,0,0,1,3,2ZM21,22H3a1,1,0,0,1-1-1V16.48l7-5.63a3.06,3.06,0,0,1,3.86,0L22,18.47V21A1,1,0,0,1,21,22Z","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"}),So("path",{d:"M18,9a3,3,0,1,0-3-3A3,3,0,0,0,18,9Zm0-4a1,1,0,1,1-1,1A1,1,0,0,1,18,5Z","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})])],l=So("div",{class:"legend-item",style:(o==null?void 0:o.element)==="div"?{backgroundColor:o.attributes.style.backgroundColor,backgroundPosition:o.attributes.style.backgroundPosition,backgroundSize:o.attributes.style.backgroundSize,backgroundRepeat:o.attributes.style.backgroundRepeat,opacity:o.attributes.style.opacity}:{}},u);return So("div",{class:"legend-item-container"},[l])}return{getLayerLegendVNode:e}}function ZI(e){var n;const t=((n=e.children)==null?void 0:n.map(ZI))||[];return So(e.element,{...e.attributes},t)}function nae(e){var n;const t=(n=e==null?void 0:e.metadata)==null?void 0:n["maplibregl-legend:disable"];return t===!0||t==="true"||t==="1"}function rae(e){var n;return((n=e==null?void 0:e.metadata)==null?void 0:n["maplibregl-legend:name"])||e.id}function iae(e){return["circle","fill","line","symbol"].includes(e.type)&&!nae(e)}const sae={class:"legend-control-container"},aae={class:"legend-control"},oae={class:"legend-control-item__icon"},lae={class:"legend-action"},uae=Dn({__name:"LegendControl",props:{...Ti},setup(e){const t=e,[n,i]=ld(!1),{callMap:o,mapId:u,moduleContainerProps:l}=Nr(t),{trans:s,setLocaleDefault:f}=Hi(u.value),{getLayerLegendVNode:y}=tae();f({map:{"legend-control":{title:"Legend",onlyRendered:"Only rendered"}}});function b(){i(!n.value)}const x=Qt(!1),M=Dl([]);function A(F){let V=F==null?void 0:F.getStyle().layers,O=null;if(x.value){O=new Set;const N=F.queryRenderedFeatures();for(const U of N)O.add(U.layer.id)}M.value=V.slice().reverse().filter(N=>(!O||O&&O.has(N.id))&&iae(N)).map(N=>({icon:y(F,N),name:rae(N)}))}$T(u.value,"styledata",A);const{add:k,remove:L}=$T(u.value,"moveend",A,!1);return hs(x,F=>{F?(k(),o(V=>{A(V)})):L()}),(F,V)=>(Ae(),$t(se(ts),$i(zi(se(l))),{btn:dt(()=>[He(se(Br),{onClick:V[0]||(V[0]=Rr(O=>b(),["stop"])),tooltip:se(s)("map.legend-control.title")},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:se(VN)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:dt(O=>[se(n)?(Ae(),$t(se(ch),ar({key:0,height:400,width:400},O,{show:se(n),"onUpdate:show":V[2]||(V[2]=N=>Ii(n)?n.value=N:null),title:se(s)("map.legend-control.title")}),{default:dt(()=>[Le("div",sae,[Le("div",aae,[(Ae(!0),st(Gn,null,ii(M.value,(N,U)=>(Ae(),st("div",{key:U,class:"legend-control-item"},[Le("div",oae,[(Ae(),$t(Ls(N.icon)))]),Le("span",null,gn(N.name),1)]))),128))]),Le("div",lae,[He(se(Jk),{label:se(s)("map.legend-control.onlyRendered"),modelValue:x.value,"onUpdate:modelValue":V[1]||(V[1]=N=>x.value=N)},null,8,["label","modelValue"])])])]),_:2},1040,["show","title"])):an("",!0)]),default:dt(()=>[In(F.$slots,"default",{},void 0,!0)]),_:3},16))}}),cae=Cn(uae,[["__scopeId","data-v-557fce0f"]]),Zg=al.createLogger().setNamespace("map:measurement",2),hae={class:"field-container"},dae={class:"label-container"},fae={class:"label-field"},pae=["disabled","title"],mae=["disabled"],gae={class:"geometry-list-container"},yae={class:""},vae=["onUpdate:modelValue","onChange"],_ae={class:""},bae=["onUpdate:modelValue","onChange"],xae={class:""},Aae=["onClick"],wae={__name:"field-geometry",props:Ui({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:Ui(["click:remove","click:fillbound"],["update:modelValue"]),setup(e,{emit:t}){const n=e,i=Us(e,"modelValue"),o={add:Yf,fillBound:F_,delete:MM,download:TN},u=t,l=k=>{i.value=k},s=()=>{i.value||(i.value=[]),i.value.push([null,null])},f=()=>{l(i)},y=k=>{i.value.splice(k,1),u("click:remove",k),l(i)},b=k=>{if(!(!k||!k.length))return k.length==1?ga(k[0]):k.length==2?Ra(k):Yy([[...k,k[0]]])},x=()=>{let k={type:"FeatureCollection",features:[b(i.value)]};const L=new window.Blob([JSON.stringify(k)],{type:"text/plain;charset=utf-8"});$B.saveAs(L,"geojson.json")},M=()=>{u("click:fillbound",b(i.value))},A=dn(()=>!n.maxLength||i.value.length<n.maxLength);return(k,L)=>(Ae(),st("div",hae,[Le("div",dae,[Le("div",fae,gn(e.title),1),Le("div",null,[Le("button",{onClick:M,disabled:!e.modelValue||e.modelValue.length<1,class:"setting-button",title:e.titleActionFillBound},[He(se(An),{size:16,type:"mdi",path:o.fillBound,title:e.titleActionDownload},null,8,["path","title"])],8,pae),Le("button",{onClick:x,class:"setting-button",disabled:!e.modelValue||e.modelValue.length<1},[He(se(An),{size:16,type:"mdi",path:o.download,title:e.titleActionAddPoint},null,8,["path","title"])],8,mae),A.value?(Ae(),st("button",{key:0,onClick:s,class:"setting-button"},[He(se(An),{size:16,type:"mdi",path:o.add},null,8,["path"])])):an("",!0)])]),Le("div",gae,[(Ae(!0),st(Gn,null,ii(e.modelValue,(F,V)=>(Ae(),st("div",{class:"geometry-list-item",key:V},[Le("div",null,"#"+gn(V+1),1),Le("div",yae,[kl(Le("input",{class:"setting-input","onUpdate:modelValue":O=>i.value[V][0]=O,type:"number",step:"any",onChange:O=>f()},null,40,vae),[[sh,i.value[V][0]]])]),Le("div",_ae,[kl(Le("input",{class:"setting-input","onUpdate:modelValue":O=>i.value[V][1]=O,type:"number",step:"any",onChange:O=>f()},null,40,bae),[[sh,i.value[V][1]]])]),Le("div",xae,[Le("button",{onClick:O=>y(V),class:"setting-button"},[He(se(An),{size:16,type:"mdi",path:o.delete},null,8,["path"])],8,Aae)])]))),128))])]))}},Cae=Cn(wae,[["__scopeId","data-v-e28afdf9"]]),Iae={class:"label-container"},Mae={class:"label-field"},Sae={class:"label-field-value"},Eae={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(e){return(t,n)=>(Ae(),st("div",null,[(Ae(!0),st(Gn,null,ii(e.fields,(i,o)=>(Ae(),st("div",{class:"field-container label-value",key:o},[Le("div",Iae,[Le("div",Mae,gn(i.text),1),Le("div",Sae,gn(i.value),1)])]))),128))]))}},Tae=Cn(Eae,[["__scopeId","data-v-6556841c"]]),Pae={class:"setting-container"},kae={__name:"MeasurementSettingPopup",props:Ui({...Ti,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:Ui(["update:modelValue"],["update:modelValue","update:show"]),setup(e,{emit:t}){const n=t,i=e,{callMap:o,moduleContainerProps:u,mapId:l}=Nr(i),{trans:s}=Hi(l.value),f=Us(e,"modelValue"),y=Us(e,"show"),b=M=>{o(A=>{RA(A,M)})};function x(M){n("update:modelValue",M.value)}return(M,A)=>(Ae(),$t(se(ts),$i(zi(se(u))),{draggable:dt(k=>[y.value?(Ae(),$t(se(ch),ar({key:0},Object.assign(k,e.popUpPosition),{show:y.value,"onUpdate:show":A[0]||(A[0]=L=>y.value=L),title:se(s)("map.measurement.setting.title")}),{default:dt(()=>[Le("div",Pae,[He(Tae,{fields:e.fields},null,8,["fields"]),He(Cae,{"onUpdate:modelValue":x,modelValue:f.value,maxLength:e.maxLength,"onClick:fillbound":b,title:se(s)("map.measurement.setting.field.data"),titleActionDownload:se(s)("map.measurement.action.download"),titleActionFillBound:se(s)("map.measurement.action.fly-to"),titleActionAddPoint:se(s)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):an("",!0)]),default:dt(()=>[In(M.$slots,"default",{},void 0,!0)]),_:3},16))}},Lae=Cn(kae,[["__scopeId","data-v-150c3a34"]]);class bw{constructor(){this.value=[]}get coordinates(){return this.value.filter(t=>t[0]!=null&&t[1]!=null)}start(){}add(t){const n=Dae(this.value);n>=0?this.value[n]=t:this.value.push(t)}init(t){this.value=t}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function Dae(e=[]){return e.findIndex(t=>!t[0]||!t[1])}function Jx(e,t="vi"){return new Intl.NumberFormat(t).format(e)}class Rae extends bw{get name(){return"Measure Area"}get type(){return"area"}getResult(){const o={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return o;if(this.coordinates.length==1)return o.features=[ga(this.coordinates[0])],o;if(this.coordinates.length==2)return o.features=[Ra(this.coordinates)],o;const u=Yy([[...this.coordinates,this.coordinates[0]]]);return o.features=[u],o.value=JV(u),o.format=zC(o.value),o.features_label=[UV(u,{properties:{is_label:!0,is_center:!0,text:zC(o.value)}})],o.fields=[{trans:"map.measurement.setting.area",value:zC(o.value)}],o}}function zC(e=0){return e<1e6?`${Jx(e.toFixed(2))} m²`:`${Jx((e/1e6).toFixed(2))} km²`}class Oae extends bw{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(t){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(t)}getResult(){const o={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return o;if(this.coordinates.length==1)return o.features=[ga(this.coordinates[0])],o;const u=this.coordinates[this.coordinates.length-1],l=this.coordinates[this.coordinates.length-2],s=Ra(this.coordinates);o.features=[s];const f=uL(l,u);return o.value=rL(f).toFixed(3),o.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:u},properties:{is_label:!0,text:`${o.value} °`,rotation:f}}],o.fields=[{trans:"map.measurement.setting.azimuth",value:`${o.value} °`}],o}}class zae extends bw{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const o={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return o;if(this.coordinates.length==1)return o.features=[ga(this.coordinates[0])],o;const u=Ra(this.coordinates);return o.features=[u],o.value=TT(u),o.format=FC(o.value),o.features_label=this.coordinates.map((l,s,f)=>({type:"Feature",properties:{is_label:!0,text:FC(s<1?0:TT(Ra(f.slice(0,s+1))))},geometry:{type:"Point",coordinates:l}})),o.fields=[{trans:"map.measurement.setting.distance",value:FC(o.value)}],o}}function FC(e=0){return e<1?`${Jx((e*1e3).toFixed(2))} m`:`${Jx(e.toFixed(2))} km`}class Fae extends bw{constructor(t=[]){super(),this.crs_items=t}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(t){this.value.length>0&&(this.value=[]),this.value.push(t)}getResult(){const o={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return o;o.features=[ga(this.coordinates[0])];const u=this.coordinates[0][0],l=this.coordinates[0][1],s=bI({longitude:u,latitude:l},void 0,!1);if(s&&(o.value=`${s.longitude}, ${s.latitude}`),this.crs_items){const f=this.crs_items.find(y=>y.default);o.fields=[{trans:f==null?void 0:f.name,value:o.value}],this.crs_items.filter(y=>!y.default).forEach(y=>{var b;if(!y.default&&y.proj4js){const x=bI({longitude:u,latitude:l},y,!1);x&&((b=o.fields)==null||b.push({trans:y.name,value:`${x.longitude}, ${x.latitude}`}))}})}else o.fields=[{trans:"map.measurement.setting.point",value:o.value}];return o.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:o.value}}],o}}class WS{start(t){}view(t){}reset(){}destroy(){}}class Bae extends WS{constructor(t){super(),this.layers=[],this.map=t}init(t,n){return n.id||(n.id=`measurment-control-${hc()}`),this.map.addSource(n.id,n.data),t.forEach(i=>{i.id||(i.id=`measurment-control-${hc()}`),i.metadata||(i.metadata={}),i.metadata["maplibregl-legend:disable"]=!0,i.source||(i.source=n.id),this.map.addLayer(i)}),this.source=n,this.layers=t,this}start(){this.onStart&&this.onStart(),this.layers.forEach(t=>{const n=t.id;this.map.getLayer(n)&&this.map.moveLayer(n)})}reset(){const t=this.map.getSource(this.source.id);t&&t.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(t=>{const n=t.id;this.map.getLayer(n)&&this.map.removeLayer(n),this.map.getSource(n)&&this.map.removeSource(n)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:t=[],features_label:n=[]}={}){const i=this.map.getSource(this.source.id);i&&i.setData({type:"FeatureCollection",features:[...t,...n]})}}class Nae extends WS{constructor(t){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=t,this.markers=[]}setColor(t){return this.color=t,this}view({coordinates:t=[]}={}){const n=!!this.onDragMarker;if(t.length<this.markers.length)for(;t.length<this.markers.length;){const i=this.markers.pop();i&&i.remove()}t.forEach((i,o)=>{if(!i[0]||!i[1])return;let u=this.markers[o];u||(this.bindEvent[o]={},u=Vae({color:this.color,draggable:n}),this.markers[o]=u),u.setLngLat({lng:i[0],lat:i[1]}).addTo(this.map),n&&(this.bindEvent[o].dragend&&u.off("dragend",this.bindEvent[o].dragend),this.bindEvent[o].dragend=()=>{const s=u.getLngLat(),f=[s.lng,s.lat],y=t.slice();y[o]=f,this.onDragMarker&&this.onDragMarker(y,f,o,u)},u.on("dragend",this.bindEvent[o].dragend));const l=u.getElement();this.onRightClickMarker&&(this.bindEvent[o].contextmenu&&l.removeEventListener("contextmenu",this.bindEvent[o].contextmenu),this.bindEvent[o].contextmenu=s=>{s.preventDefault();const f=u.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([f.lng,f.lat],o,u)},l.addEventListener("contextmenu",this.bindEvent[o].contextmenu))})}reset(){this.markers.forEach(t=>{t.remove()}),this.markers=[]}destroy(){this.reset()}}function Vae({color:e,draggable:t=!1}={}){const n=document.createElement("div");return n.style.width="12px",n.style.height="12px",n.style.borderRadius="50%",n.style.background="#fff",n.style.boxSizing="border-box",n.style.border=`2px solid ${e}`,n.style.cursor="pointer",new Pm.Marker({element:n,draggable:t})}const jae=function(){let e=null;const t=[],n=x=>{for(let M=0;M<t.length;M++)x(t[M])},i=x=>{e=x},o=x=>{t.push(x)},u=()=>{e&&e.start(),n(x=>{x.start&&x.start(f())})},l=()=>{e&&e.reset(),n(x=>{x.reset&&x.reset()})},s=()=>{e&&e.destroy(),n(x=>{x.destroy()})},f=()=>({coordinates:e.value,setting:e.setting,...e.getResult()});return{get type(){return e?e.type:null},get action(){return e},setAction:i,addView:o,start:u,reset:l,destroy:s,add:x=>{e&&e.add(x),n(M=>{M.view&&M.view(f())})},init:(x=[])=>{e&&e.init(x),n(M=>{M.view(f())})},getResult:f}};class Uae extends WS{start({setting:t}={}){this.onChangeSetting&&this.onChangeSetting(t)}view({coordinates:t=[],setting:n={},fields:i=[]}={}){this.onChangeValue&&this.onChangeValue(t),this.onChangeSetting&&(n.fields=i,this.onChangeSetting(n))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const $ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",Hae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",b0="#004E98",Gae=Dn({__name:"MeasurementControl",props:{...Ti},setup(e){let t=jae();const n=e,i=Qt(""),o=Qt([]),u=Qt({show:!0,maxLength:0,fields:[]}),l={add:Yf,fillBound:F_,distance:WN,area:qN,azimuth:YN,point:LM,clear:MM,close:Py,setting:Gk},{callMap:s,mapId:f,moduleContainerProps:y}=Nr(n,V,O),b=rS(f.value),{trans:x,setLocaleDefault:M}=Hi(f.value),A=tK(f.value);M({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthị"},"no-data":{text:"Status",value:"Waiting..."}}}});const k=new G_().setHandler(N),{add:L,remove:F}=Dx(f.value,k);function V(K){A.addImage(K.id,"azimuth-arrow",$ae,{sdf:!0}),A.addImage(K.id,"measurment-round",Hae,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]});let Se=new Bae(K);Se.init([{type:"line",paint:{"line-color":b0,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":b0,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":b0},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":b0,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}}),Se.onStart=()=>{K&&L()},Se.onReset=()=>{F()};let Ve=new Nae(K);Ve.setColor(b0),Ve.onDragMarker=et=>{t.init(et)},Ve.onRightClickMarker=(et,ot)=>{o.value.splice(ot,1),t.init(o.value)};let Ne=new Uae;Ne.onChangeValue=et=>{o.value=(et||[]).slice()},Ne.onChangeSetting=(et={})=>{u.value.maxLength=et.maxLength||0;let ot=et.fields;(!ot||ot.length==0)&&(ot=[{text:x.value("map.measurement.no-data.text"),value:x.value("map.measurement.no-data.value")}]),u.value.fields=ot.map(Zt=>({...Zt,text:Zt.trans?x.value(Zt.trans):Zt.text}))},t.addView(Se),t.addView(Ve),t.addView(Ne),Kn(Zg,f.value,"control","MeasurementControl").debug("init",t)}function O(){t&&t.destroy(),Y()}function N(K){Kn(Zg,f.value,"control","MeasurementControl").debug("onMapClick",K);const Se=[K.lngLat.lng,K.lngLat.lat];t.action&&t.add(Se)}function U(K){return ue(!1),i.value==K?(i.value=void 0,t.setAction(null),!1):(i.value=K,!0)}function W(){U("distance")&&(Kn(Zg,f.value,"control","MeasurementControl").debug("setAction","distance"),t.setAction(new zae),t.start())}function ne(){U("area")&&(Kn(Zg,f.value,"control","MeasurementControl").debug("setAction","area"),t.setAction(new Rae),t.start())}function X(){U("azimuth")&&(Kn(Zg,f.value,"control","MeasurementControl").debug("setAction","azimuth"),t.setAction(new Oae),t.start())}function q(){U("point")&&(Kn(Zg,f.value,"control","MeasurementControl").debug("setAction","point"),t.setAction(new Fae(b.items.value)),t.start())}function G(){u.value.show=!u.value.show}function ee(){s(K=>{RA(K,hj(o.value))})}function ue(K=!0){t&&(t.reset(),K&&Rl(()=>{t.start()}))}function Y(){ue(!1),i.value=void 0,t&&t.setAction(null)}function ce(K=[]){t&&t.init(K)}return(K,Se)=>(Ae(),$t(se(ts),$i(zi(se(y))),{btn:dt(()=>[i.value?(Ae(),$t(se(ky),{key:1,row:""},{default:dt(()=>[He(se(Br),{tooltip:se(x)("map.measurement.action.setting"),onClick:Se[4]||(Se[4]=Ve=>G()),active:u.value.show},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),He(se(Br),{disabled:!o.value||o.value.length<1,tooltip:se(x)("map.measurement.action.fly-to"),onClick:Se[5]||(Se[5]=Ve=>ee())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),He(se(Br),{tooltip:se(x)("map.measurement.action.clear"),onClick:Se[6]||(Se[6]=Ve=>ue())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.clear},null,8,["path"])]),_:1},8,["tooltip"]),He(se(Br),{tooltip:se(x)("map.measurement.action.close"),onClick:Se[7]||(Se[7]=Ve=>Y())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(Ae(),$t(se(ky),{key:0,row:""},{default:dt(()=>[He(se(Br),{tooltip:se(x)("map.measurement.tools.distance"),onClick:Se[0]||(Se[0]=Ve=>W()),active:i.value=="distance"},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),He(se(Br),{tooltip:se(x)("map.measurement.tools.area"),onClick:Se[1]||(Se[1]=Ve=>ne()),active:i.value=="area"},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.area},null,8,["path"])]),_:1},8,["tooltip","active"]),He(se(Br),{tooltip:se(x)("map.measurement.tools.azimuth"),onClick:Se[2]||(Se[2]=Ve=>X()),active:i.value=="azimuth"},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),He(se(Br),{tooltip:se(x)("map.measurement.tools.point"),onClick:Se[3]||(Se[3]=Ve=>q()),active:i.value=="point"},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:l.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:dt(()=>[In(K.$slots,"default"),i.value?(Ae(),$t(Lae,{key:0,modelValue:o.value,show:u.value.show,"onUpdate:show":Se[8]||(Se[8]=Ve=>u.value.show=Ve),position:K.position,"onUpdate:modelValue":ce,maxLength:u.value.maxLength,fields:u.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):an("",!0)]),_:3},16))}});class Zae{constructor(t){this.mapCanvas=t,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const t=this.width/2,n=this.height/2;this.yLine.setAttribute("x1",`${t}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${t}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${n}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${n}px`)}}createCanvas(t){if(this.width!==void 0&&this.height!==void 0){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${this.width}px`),n.setAttribute("height",`${this.height}px`);const i=this.width/2,o=this.height/2;this.yLine=n.appendChild(this.createLine(i,0,i,this.height,this.color,"2px")),this.xLine=n.appendChild(this.createLine(0,o,this.width,o,this.color,"2px")),t.appendChild(n),this.svgCanvas=n}}createLine(t,n,i,o,u,l){const s=document.createElementNS("http://www.w3.org/2000/svg","line");return s.setAttribute("x1",t+""),s.setAttribute("y1",n+""),s.setAttribute("x2",i+""),s.setAttribute("y2",o+""),s.setAttribute("stroke-dasharray","5,5"),s.setAttribute("stroke",u),s.setAttribute("stroke-width",l),s}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function AD(e){const{renderMap:t,hidden:n}=wD(e,i=>{const o=e.getCanvas();i.style.width=o.clientWidth+"px",i.style.height=o.clientHeight+"px"});return new Promise(i=>{t.once("idle",()=>{var u;const o=t.getCanvas();i(o.toDataURL()),t.remove(),(u=n.parentNode)==null||u.removeChild(n)})})}async function Wae(e,t){const{renderMap:n,hidden:i}=wD(e,o=>{o.style.width=o3(+t.width,1),o.style.height=o3(+t.height,1)});return new Promise(o=>{n.once("idle",()=>{var l;const u=n.getCanvas();o(u.toDataURL()),n.remove(),(l=i.parentNode)==null||l.removeChild(i)})})}function o3(e,t=96){return`${t*e}px`}function wD(e,t){const n=document.createElement("div");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.padding="0",n.style.margin="0",n.style.background="transparent",n.style.zIndex="-1",document.body.appendChild(n);const i=document.createElement("div");t(i),n.appendChild(i);const o=new Pm.Map({container:i,style:e.getStyle(),center:e.getCenter(),zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch(),interactive:!1,canvasContextAttributes:{preserveDrawingBuffer:!0},fadeDuration:0,transformRequest:e._requestManager._transformRequestFn}),u=(e.style.imageManager||{}).images||[];return Object.keys(u).forEach(l=>{u[l].data&&o.addImage(l,u[l].data)}),{renderMap:o,hidden:n}}class qae{constructor(t,n){this.mapCanvas=t,this.setOption(n)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=this.mapCanvas.clientWidth,o=this.mapCanvas.clientHeight;n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",n.setAttribute("width",`${i}px`),n.setAttribute("height",`${o}px`);const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("style","fill:#888888;stroke-width:0"),u.setAttribute("fill-opacity","0.5"),n.append(u),t.appendChild(n),this.svgCanvas=n,this.svgPath=u}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const t=this.mapCanvas.clientWidth,n=this.mapCanvas.clientHeight,i=this.option.ratio;let o=n;o>t&&(o=t);let u=0,l=0;if(i>=1?(u=Math.floor(o*4/5-30),l=u/i):(l=Math.floor(o*4/5-30),u=Math.floor(l*i)),this.option.orientation!=="landscape"){if(u>l){const A=l;l=u,u=A}}else if(u<l){const A=l;l=u,u=A}this.cutStartX=t/2-u/2,this.cutStartY=n/2-l/2;const s=l,f=u;this.cutWidth=u,this.cutHeight=l;const y=this.cutStartX,b=y+f,x=this.cutStartY,M=x+s;this.svgCanvas.setAttribute("width",`${t}px`),this.svgCanvas.setAttribute("height",`${n}px`),this.svgPath.setAttribute("d",`M 0 0 L ${t} 0 L ${t} ${n} L 0 ${n} M ${y} ${x} L ${y} ${M} L ${b} ${M} L ${b} ${x}`)}setOption(t){this.option=t,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const Kae=Dn({__name:"PrintControl",props:{...Ti,fileName:{type:String,default:"map"}},setup(e){const t=e,n={print:ZN,close:Py,save:Zk},{callMap:i,mapId:o,moduleContainerProps:u}=Nr(t),{trans:l,setLocaleDefault:s}=Hi(o.value);s({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const f=Qt({show:!1,loading:!1});function y(x){i(async M=>{f.value.loading=!0;try{let A=await AD(M);x?x(A):await b(A)}finally{f.value.loading=!1}})}async function b(x){SA.saveAs(x,`${t.fileName}.png`)}return(x,M)=>(Ae(),$t(se(ts),$i(zi(se(u))),{btn:dt(()=>[He(se(Br),{tooltip:se(l)("map.print.title"),onClick:M[0]||(M[0]=Rr(A=>y(b),["stop"])),loading:f.value.loading},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),WI=al.createLogger().setNamespace("map:print",2),Yae="print",Xae=e=>zl(["map:core",e,Yae],()=>(Kn(WI,e,"store").debug("init"),{}))();function Qae(e){const t=Xae(e);function n({show:s,close:f,save:y,saveAll:b}){t.show=s,t.close=f,t.save=y,t.saveAll=b}function i(){var s;(s=t.close)==null||s.call(t)}function o(s={ratio:1,orientation:"portrait",format:"png"}){var f;(f=t.show)==null||f.call(t,s)}function u(s){var f;Kn(WI,e,"store").debug("savePrint",s),(f=t.save)==null||f.call(t,s)}function l(s){var f;Kn(WI,e,"store").debug("saveAllPrint",s),(f=t.saveAll)==null||f.call(t,s)}return{showPrint:o,closePrint:i,savePrint:u,saveAllPrint:l,initPrint:n}}const Jae={class:"setting-container"},eoe=Dn({__name:"PrintAdvancedControl",props:{...Ti,disabledCrosshair:Boolean,disabledPrintableArea:Boolean,fileName:{type:String,default:"map"}},setup(e){const t=e,n={print:GN,close:Py,save:Zk,setting:Gk},{callMap:i,mapId:o,moduleContainerProps:u}=Nr(t,b),{trans:l,setLocaleDefault:s}=Hi(o.value);s({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const f=Qt({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});uh(()=>{A()});const{initPrint:y}=Qae(o.value);function b(){y({show:X=>k(X),close:()=>A(),save:X=>M(X),saveAll:X=>x(X)})}function x(X){i(async q=>{f.value.loading=!0;try{let G=await AD(q);X?X(G):await L(G)}finally{f.value.loading=!1}})}async function M(X){i(async q=>{if(V)try{f.value.loading=!0;let G=await Wae(q,V.getCutSize());X?X(G):await L(G)}finally{f.value.loading=!1}})}function A(){f.value.loading=!1,f.value.show=!1,O(f.value.show),N(f.value.show,f.value.setting)}function k(X){f.value.show=!0,O(f.value.show),N(f.value.show,X)}async function L(X){SA.saveAs(X,`${t.fileName}.png`)}let F,V;function O(X){t.disabledCrosshair||i(q=>{X===!1?F!==void 0&&(F.destroy(),F=void 0):(F=new Zae(q.getCanvas()),F.create())})}function N(X,q){t.disabledPrintableArea||i(G=>{X===!1?(G.off("resize",U),V!==void 0&&(V.destroy(),V=void 0)):(G.on("resize",U),V=new qae(G.getCanvas(),q),V.create())})}function U(){V&&V.mapResize(),F&&F.mapResize()}function W(){f.value.setting_show=!f.value.setting_show}function ne(){V&&V.setOption(f.value.setting)}return(X,q)=>(Ae(),$t(se(ts),$i(zi(se(u))),{btn:dt(()=>[He(se(ky),{row:""},{default:dt(()=>[f.value.show?(Ae(),st(Gn,{key:1},[He(se(Br),{disabled:f.value.loading,loading:f.value.loading,tooltip:se(l)("map.print.actions.save"),onClick:q[1]||(q[1]=G=>M())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:n.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),He(se(Br),{disabled:f.value.loading,tooltip:se(l)("map.print.actions.clear"),onClick:q[2]||(q[2]=G=>A())},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:n.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(Ae(),$t(se(Br),{key:0,active:f.value.show,tooltip:se(l)("map.print.title"),onClick:q[0]||(q[0]=Rr(G=>k(f.value.setting),["stop"])),loading:f.value.loading},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:n.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),He(se(Br),{tooltip:se(l)("map.print.actions.setting"),onClick:q[3]||(q[3]=G=>W()),active:f.value.setting_show},{default:dt(()=>[He(se(An),{size:18,type:"mdi",path:n.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:dt(G=>[f.value.setting_show?(Ae(),$t(se(ch),ar({key:0},G,{height:220,show:f.value.setting_show,"onUpdate:show":q[9]||(q[9]=ee=>f.value.setting_show=ee),title:se(l)("map.print.setting.title")}),{default:dt(()=>[Le("div",Jae,[Le("div",null,[He(se(pi),{modelValue:f.value.setting.ratio,"onUpdate:modelValue":q[4]||(q[4]=ee=>f.value.setting.ratio=ee),label:se(l)("map.print.field.ratio"),onChange:q[5]||(q[5]=ee=>ne())},null,8,["modelValue","label"])]),Le("div",null,[He(se($f),{modelValue:f.value.setting.orientation,"onUpdate:modelValue":q[6]||(q[6]=ee=>f.value.setting.orientation=ee),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:se(l)("map.print.field.orientation"),onChange:q[7]||(q[7]=ee=>ne())},null,8,["modelValue","label"])]),q[10]||(q[10]=Le("div",{class:"grow"},null,-1)),f.value.show?(Ae(),$t(se(il),{key:0,class:"btn-container",onClick:q[8]||(q[8]=ee=>M())},{default:dt(()=>[Qi(gn(se(l)("map.print.btn.apply")),1)]),_:1})):an("",!0)])]),_:2},1040,["show","title"])):an("",!0)]),_:1},16))}}),toe=Cn(eoe,[["__scopeId","data-v-6ce280f8"]]),noe=Dn({__name:"AllMapView",setup(e){const{downloadFile:t}=bB(),n=Qt(),{convertList:i}=_B(),{convert:o}=yN();function u(b){const{addDataset:x}=Qy(b.id),M=El("Group test",null,!0),A=y4("source",{type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),k=dm("layer raster",[{type:"raster"}]),L=fm("test raster");L.color="#0000FF";const F=El("Group layer 1",null,!0);M.add(A),F.add(L),F.add(k),M.add(F),L.addMenu(Tb());const V=El("Group test",null,!0),O=rx("source",{type:"FeatureCollection",features:[]}),N=El("Group layer 1",null,!0),U=fm("test area");U.color="#0000FF",U.legend=gne([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const W=dm("layer area",[new hm().setStyleType("area").setColor(U.color).setOpacity(.5).build()]);N.add(W),N.add(U);const ne=El("Group layer 2",null,!0),X=fm("test point");X.color="#ff0000",X.legend=mne("color",{text:"color-test",color:"#fff"});const q=dm("layer point",[new hm().setStyleType("point").setColor(X.color).setOpacity(X.opacity).build(),new hm().setStyleType("line").setColor(X.color).setOpacity(.5).build()]);U.addMenus([Pb({location:"extra"}),Eb(),Tb(),lC()]),X.addMenus([Pb({location:"extra"}),Eb(),y(),f()]);const G=gP("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),ee=gP("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),ue=nx("test identify"),Y=dP("test identify 1"),ce=dP("test identify 2");ue.addMenus([Xg(),Qg()]),Y.addMenus([Xg(),Qg()]),ce.addMenus([Xg(),Qg()]);const K={id:"test",name:"test"};U.group=K,N.add(Y),X.group=K,ne.add(q),ne.add(X),ne.add(ce),ne.add(G);const Se=tx("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});Se.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),V.add(O),V.add(Se),V.add(N),V.add(ne),V.add(ue),V.add(ee),x(V),x(s()),x(l())}function l(){const b=El("Group test",null,!0),x=rx("source",{type:"FeatureCollection",features:[]}),M=El("Group layer 1",null,!0),A=fm("test line string"),k=dm("layer area",[new hm().setStyleType("line").setColor(A.color).build()]);M.add(k),M.add(A),A.addMenus([Pb({location:"extra"}),Eb(),Tb(),lC()]);const L=nx("test identify");L.addMenus([Xg(),Qg()]),b.add(L);const F=tx("data management",{fields:[{text:"Name",value:"name"}]});return F.setItems([{id:"2",name:"feature 2",geometry:{coordinates:[[104.3289285884349,21.35998263691249],[105.11257582166496,21.70421219227839],[105.16699576841705,21.35998263691249],[104.89489603465671,21.39038859819064]],type:"LineString"}}]),b.add(x),b.add(F),b.add(M),b}function s(){const b=El("Group test",null,!0),x=rx("source",{type:"FeatureCollection",features:[]}),M=El("Group layer 1",null,!0),A=fm("test point"),k=dm("layer area",[new hm().setStyleType("point").setColor(A.color).build()]),L=RY();M.add(k),M.add(L),M.add(A),A.addMenus([Pb({location:"extra"}),Eb(),Tb(),lC()]);const F=nx("test identify");F.addMenus([Xg(),Qg()]),b.add(F);const V=tx("data management",{fields:[{text:"Name",value:"name"}]});return V.setItems([{id:"2",name:"feature 2",geometry:{coordinates:[106.26447460804093,20.9143362367018],type:"Point"}}]),b.add(x),b.add(V),b.add(M),b}function f(){return{type:"item",name:"Download",icon:EN,click:async(b,x)=>{const M=bu(b,A=>A.type==="dataManagement");if(xI(M)){const A=await o(i(await M.getList()||[]),{filename:"download.geojson"});A&&t(A,"download.geojson")}}}}function y(){return{type:"item",name:"Edit feature",icon:Yk,click:(b,x)=>{const{callDraw:M}=bS(x),A=bu(b,k=>k.type==="dataManagement");xI(A)&&M({cleanAfterDone:!0,draw_support:[xy.POINT,xy.POLYGON,xy.LINE_STRING],getFeatures:A.getFeatures&&A.getFeatures.bind(A),addFeatures:A.addFeatures&&A.addFeatures.bind(A),updateFeatures:A.updateFeatures&&A.updateFeatures.bind(A),deleteFeatures:A.deleteFeatures&&A.deleteFeatures.bind(A),reset:async()=>{Ja(x,k=>{M0(A)&&A.addToMap(k)})}})}}}return(b,x)=>(Ae(),$t(se(V$),{ref_key:"mapRef",ref:n,onMapLoaded:u},{default:dt(()=>[He(se(kQ)),He(se(Gae),{position:"top-right"}),He(se(hre),{position:"top-right"}),He(se(Ire),{position:"top-right"}),He(se(vte),{position:"top-left",show:""},{endList:dt(({mapId:M})=>[He(se(GK),{mapId:M},null,8,["mapId"])]),_:1}),He(se(LJ),{position:"top-right"}),He(se(toe)),He(se(Kae)),He(se(lK),{position:"top-right"}),He(se(iK)),He(se(cae)),He(se(Zq)),He(se(EK)),He(se(rK)),He(se(nK)),He(se(TK)),He(se(uK)),He(se(CK)),He(se(eY),{position:"bottom-left"}),He(se(DJ)),He(se(Yte))]),_:1},512))}}),roe=Mz({history:nz("/demo-map/"),routes:[{path:"/",name:"home",component:noe},{path:"/legend/",component:()=>gf(()=>import("./legend-CNqM9vjt.js"),__vite__mapDeps([0,1]))},{path:"/draw/",component:()=>gf(()=>import("./example-BdxUxDv_.js"),__vite__mapDeps([2,3,4,5]))},{path:"/inspect/",component:()=>gf(()=>import("./inspect-DJF8B-_F.js"),__vite__mapDeps([6,3,4,5]))},{path:"/compare/",component:()=>gf(()=>import("./AllMapCompareView-cDR_vaqw.js"),__vite__mapDeps([7,5]))},{path:"/basemap/",component:()=>gf(()=>import("./example-Cb_wJ33d.js"),__vite__mapDeps([8,3,4,9]))},{path:"/measurement/",component:()=>gf(()=>import("./example-BfBrDM0M.js"),__vite__mapDeps([10,3,4,5]))},{path:"/story-telling/",component:()=>gf(()=>import("./example-Bq2EsELK.js"),__vite__mapDeps([11,12,13]))},{path:"/story-telling-gps/",component:()=>gf(()=>import("./example-gps-vRcwmNZE.js"),__vite__mapDeps([14,12,13]))}]}),ioe=Dn({__name:"App",setup(e){return(t,n)=>(Ae(),$t(se(bk)))}}),soe=Cn(ioe,[["__scopeId","data-v-b7680054"]]),qS=Ix(soe);qS.use(roe);qS.use(mj());qS.mount("#root");export{fd as $,Qt as A,eY as B,ti as C,hre as D,Ol as E,Gn as F,Nr as G,Hi as H,Jk as I,Cn as J,Ti as K,hm as L,CK as M,ld as N,ts as O,$i as P,zi as Q,In as R,an as S,ch as T,ar as U,Ii as V,An as W,wN as X,Rr as Y,Br as Z,lK as _,He as a,nd as a$,Sk as a0,hc as a1,bj as a2,Rl as a3,dn as a4,zf as a5,Dy as a6,Ja as a7,uh as a8,ei as a9,Tb as aA,Pb as aB,rx as aC,gne as aD,mne as aE,lC as aF,gP as aG,nx as aH,dP as aI,Xg as aJ,Qg as aK,tx as aL,ky as aM,cy as aN,GK as aO,Pz as aP,yu as aQ,w5 as aR,VR as aS,to as aT,So as aU,_L as aV,Az as aW,CL as aX,aoe as aY,Eo as aZ,f_ as a_,Sj as aa,P$ as ab,Ly as ac,QL as ad,uI as ae,gn as af,$f as ag,ZK as ah,hs as ai,Yr as aj,DM as ak,Qi as al,FN as am,s9 as an,kQ as ao,Gae as ap,vte as aq,LJ as ar,Zq as as,rK as at,Yte as au,Qy as av,El as aw,y4 as ax,dm as ay,fm as az,Le as b,FM as b0,ga as b1,BM as b2,DA as b3,uL as b4,VV as b5,Pm as b6,Ra as b7,TT as b8,$t as c,Dn as d,iK as e,EK as f,nK as g,TK as h,uK as i,st as j,Ls as k,V$ as l,tae as m,xy as n,Ae as o,Ire as p,loe as q,ii as r,Dl as s,Kn as t,se as u,uoe as v,dt as w,ooe as x,ud as y,wu as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/legend-CNqM9vjt.js","assets/legend-B_YV6Ksu.css","assets/example-BdxUxDv_.js","assets/aside-control-UJBpTefG.js","assets/aside-control-CNIY_DRj.css","assets/example-BRI0LJKA.css","assets/inspect-DJF8B-_F.js","assets/AllMapCompareView-cDR_vaqw.js","assets/example-Cb_wJ33d.js","assets/example-7vOpaiIK.css","assets/example-BfBrDM0M.js","assets/example-Bq2EsELK.js","assets/useStorytelling-CvQw7tB0.js","assets/example-Ca6w4nUQ.css","assets/example-gps-vRcwmNZE.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
