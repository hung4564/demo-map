import{g as fe,e as Te,r as I,d as A,f as de,o as f,h as w,i,a as d,u as e,I as O,_ as oe,j as xe,k as Pe,l as pe,c as k,w as x,S as Se,m as Re,n as Ue,p as we,q as Le,s as ee,t as Oe,v as T,x as te,y as Fe,z as Ne,A as Ie,C as Ae,E as Ge,F as Ye,G as je,H as ge,J as Q,K as Xe,L as E,N as _e,O as he,P as qe,Q as We,R as F,T as P,U as N,V as Ke,W as Ze,M as He,X as me,Y as ae,Z as Je,$ as Qe,a0 as ke,a1 as K,a2 as W,a3 as et,a4 as tt,a5 as at,a6 as ot,a7 as st,a8 as nt,a9 as ye,aa as lt,ab as rt,ac as it,ad as ct,ae as ut,af as dt,ag as pt,ah as mt,ai as vt,aj as ft,ak as gt,al as _t,am as ht,an as q,ao as yt,ap as se,aq as ne,ar as be,as as le,at as bt,au as Mt,av as re,aw as Ct,ax as $t,ay as Me,az as xt,aA as Ce,aB as ie,aC as ce,aD as St,aE as $e}from"./index-B_n5O5IR.js";const ue="map-compare";function Ee(t){Te(t,ue,{setting:I({compare:!0,split:!0,sync:!0,vertical:!1})})}function wt(t){const p=fe(t,ue);return p||(Ee(t),fe(t,ue))}function Z(t){return wt(t).setting}const Lt={class:"setting-field-container"},It=A({__name:"CompareSettingCard",props:{mapId:{type:String,required:!0}},setup(t){const p=t,{trans:n,setLocaleDefault:l}=de(p.mapId);l({map:{"setting-control":{title:"Setting",field:{compare:"compare",split:"split",sync:"sync",vertical:"vertical"},btn:{apply:"Apply"}}}});const m=Z(p.mapId);return(g,c)=>(f(),w("div",Lt,[i("div",null,[d(e(O),{label:e(n)("map.setting-control.field.split"),modelValue:e(m).split,"onUpdate:modelValue":c[0]||(c[0]=o=>e(m).split=o)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(n)("map.setting-control.field.vertical"),modelValue:e(m).vertical,"onUpdate:modelValue":c[1]||(c[1]=o=>e(m).vertical=o)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(n)("map.setting-control.field.sync"),modelValue:e(m).sync,"onUpdate:modelValue":c[2]||(c[2]=o=>e(m).sync=o)},null,8,["label","modelValue"])])]))}}),kt=oe(It,[["__scopeId","data-v-9e9523d0"]]),Et={class:"setting-container"},Bt={class:"setting-field-container"},Vt=A({__name:"CompareSettingControl",props:{...xe},setup(t){const p=t,[n,l]=Pe(!1),{mapId:m,moduleContainerProps:g}=pe(p),{trans:c,setLocaleDefault:o}=de(m.value);o({map:{"setting-control":{title:"Setting",field:{compare:"compare",split:"split",sync:"sync",vertical:"vertical"},btn:{apply:"Apply"}}}});const s=Z(m.value);return(u,a)=>(f(),k(Ie,Fe(Ne(e(g))),{btn:x(()=>[d(we,{onClick:a[0]||(a[0]=Ue(r=>e(l)(),["stop"])),tooltip:e(c)("map.setting-control.title")},{default:x(()=>[d(e(Se),{size:18,type:"mdi",path:e(Re)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:x(r=>[e(n)?(f(),k(e(Le),ee({key:0,height:400,width:400},r,{show:e(n),"onUpdate:show":a[4]||(a[4]=v=>Oe(n)?n.value=v:null),title:e(c)("map.setting-control.title")}),{default:x(()=>[i("div",Et,[i("div",Bt,[i("div",null,[d(e(O),{label:e(c)("map.setting-control.field.split"),modelValue:e(s).split,"onUpdate:modelValue":a[1]||(a[1]=v=>e(s).split=v)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(c)("map.setting-control.field.vertical"),modelValue:e(s).vertical,"onUpdate:modelValue":a[2]||(a[2]=v=>e(s).vertical=v)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(c)("map.setting-control.field.sync"),modelValue:e(s).sync,"onUpdate:modelValue":a[3]||(a[3]=v=>e(s).sync=v)},null,8,["label","modelValue"])])])])]),_:2},1040,["show","title"])):T("",!0)]),default:x(()=>[te(u.$slots,"default")]),_:3},16))}});function zt(t,p){var n=t.getCenter(),l=t.getZoom(),m=t.getBearing(),g=t.getPitch();p.forEach(function(c){c.jumpTo({center:n,zoom:l,bearing:m,pitch:g})})}function Dt(){var t,p=arguments.length;if(p===1)t=arguments[0];else{t=[];for(var n=0;n<p;n++)t.push(arguments[n])}var l=[];t.forEach(function(o,s){l[s]=c.bind(null,o,t.filter(function(u,a){return a!==s}))});function m(){t.forEach(function(o,s){o.on("move",l[s])})}function g(){t.forEach(function(o,s){o.off("move",l[s])})}function c(o,s){g(),zt(o,s),m()}return m(),function(){g(),l=[],t=[]}}var Tt=Dt;const Pt=Ae(Tt);function Rt(t,p,n){let l=n.getBoundingClientRect();const m=()=>{l=n.getBoundingClientRect()},g=_=>{let S=("touches"in _?_.touches[0].clientX:_.clientX)-l.left;return S=Math.max(0,Math.min(S,l.width)),S},c=_=>{const h=`translate(${_}px, 0)`;t.style.transform=h,t.style.webkitTransform=h,p.style.clip=`rect(0, ${_}px, ${l.height}px, 0)`,n.style.clip=`rect(0, 999em, ${l.height}px, ${_}px)`},o=_=>{c(g(_))},s=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)},u=()=>{document.removeEventListener("touchmove",o),document.removeEventListener("touchend",u)},a=_=>{"touches"in _?(document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchend",u)):(document.addEventListener("mousemove",o),document.addEventListener("mouseup",s))};t.addEventListener("mousedown",a),t.addEventListener("touchstart",a,{passive:!1});const r=()=>{t.removeEventListener("mousedown",a),t.removeEventListener("touchstart",a),p.style.clip="",n.style.clip=""},v=l.width/2;return c(v),{clear:r,resize:m}}function Ut(t,p,n){let l=n.getBoundingClientRect();const m=()=>{l=n.getBoundingClientRect(),c(l.height/2)},g=r=>{const _=("touches"in r?r.touches[0].clientY:r.clientY)-l.top;return Math.max(0,Math.min(_,l.height))},c=r=>{t.style.transform=`translateY(${r}px)`,p.style.clipPath=`inset(0px 0px ${l.height-r}px 0px)`,n.style.clipPath=`inset(${r}px 0px 0px 0px)`},o=r=>{r.preventDefault(),c(g(r))},s=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",s)},u=r=>{"touches"in r?(document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchend",s)):(document.addEventListener("mousemove",o),document.addEventListener("mouseup",s))};t.addEventListener("mousedown",u),t.addEventListener("touchstart",u,{passive:!1});const a=()=>{t.removeEventListener("mousedown",u),t.removeEventListener("touchstart",u),s(),p.style.clipPath="",n.style.clipPath=""};return c(l.height/2),{clear:a,resize:m}}const Be=t=>(Je("data-v-c5ffc01a"),t=t(),Qe(),t),Ot={key:0,class:""},Ft=Be(()=>i("div",{class:"not-support-map"},[i("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)),Nt=[Ft],At=["mapId"],Gt=Be(()=>i("div",{class:"compare-swiper-icon"},null,-1)),Yt=[Gt],jt=["id"],Xt=["id"],qt=["id"],Wt=["id"],Kt=A({__name:"MapCompare",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:p}){const n=Ge({mobile:0,tablet:640,laptop:1024,desktop:1280}),l=t,m=p,g=I(2),c=I(Ye.supported()),o=I(!1),s=I(je());ge(()=>{Q(()=>{u(),window.addEventListener("resize",u)})});function u(){b&&b()}Xe(()=>{window.removeEventListener("resize",u),ze()});let a=[];const r=E(()=>`map-draggable-${s.value}`),v=E(()=>`bottom-right-${s.value}`),_=E(()=>`bottom-left-${s.value}`),h=E(()=>`top-right-${s.value}`),S=E(()=>`top-left-${s.value}`);_e("$map.dragId",l.dragId||r.value),_e("$map.id",s.value);const G=n.smallerOrEqual("tablet");function R(y,L){a[L]=y,Ve()}function M(y,L){delete a[L]}let $,B,b;const C=I(null),V=I([]),Y=I([]),D=I({compare:!0,split:!0,sync:!0,vertical:!1}),H=E(()=>D.value.compare&&D.value.split);let j=null;function Ve(){a&&(Array.from({length:g.value},(y,L)=>L).some(y=>!a[y])||(o.value=!0,Q(()=>{m("map-loaded",{id:s.value,maps:a})}),a.forEach(y=>{y&&y.resize()}),me.actions.initMaps(s.value,a),Ee(s.value),ae(s,y=>{if(!y)return;j&&j();const L=Z(y);j=ae(L,z=>{D.value={...z},Q(()=>{ve()})},{deep:!0})},{immediate:!0}),ve()))}function ze(){$&&$(),B&&B(),he.removeMap(s.value),Q(()=>{a=[]}),j&&j()}function ve(){var y,L,z,U;if($&&$(),B&&B(),g.value=D.value.compare?2:1,H.value&&C.value){const X=D.value.vertical?Ut(C.value,(y=V.value)==null?void 0:y[0].$el,(L=V.value)==null?void 0:L[1].$el):Rt(C.value,(z=V.value)==null?void 0:z[0].$el,(U=V.value)==null?void 0:U[1].$el);$=X.clear,b=X.resize}D.value.sync&&(B=Pt(a)),a.forEach(X=>{X&&X.resize()})}let J;const De=qe.debounce(y=>{y.contentRect,he.getMap(s.value,L=>{L.resize()}),b&&b()},200);return ge(()=>{J=new ResizeObserver(y=>{for(const L of y)De(L)}),Y.value&&J.observe(Y.value)}),We(()=>{J&&Y.value&&J.unobserve(Y.value)}),(y,L)=>c.value?(f(),w("div",{key:1,class:F(["map-compare-container",{"map-mobile-container":e(G)}]),mapId:s.value},[i("div",{class:"map-viewer",ref_key:"containerRef",ref:Y},[i("div",{class:F(["map-compare__container",{"map-compare__split-vertical":H.value&&!D.value.vertical,"map-compare__split-horizontal":H.value&&D.value.vertical}])},[(f(!0),w(P,null,N(g.value,z=>(f(),k(He,ee({key:z,ref_for:!0},y.$attrs,{class:"map-compare__item",dragId:r.value,ref_for:!0,ref_key:"mapsRef",ref:V,onMapLoaded:U=>R(U,z-1),onMapDestroy:U=>M(U,z-1),initOptions:t.initOptions}),{default:x(()=>[o.value?te(y.$slots,`map-${z-1}`,{key:0},void 0,!0):T("",!0)]),_:2},1040,["dragId","onMapLoaded","onMapDestroy","initOptions"]))),128)),H.value?(f(),w("div",{key:0,class:"map-compare__swiper",ref_key:"swiperRef",ref:C},Yt,512)):T("",!0)],2),l.dragId?T("",!0):(f(),w(P,{key:0},[i("div",{class:"right-bottom-container",id:v.value},null,8,jt),i("div",{class:"left-bottom-container",id:_.value},null,8,Xt),i("div",{class:"right-top-container",id:h.value},null,8,qt),i("div",{class:"left-top-container",id:S.value},null,8,Wt),d(e(Ke),{class:"drag-container","container-id":r.value},null,8,["container-id"])],64)),o.value?te(y.$slots,"default",{key:1},void 0,!0):T("",!0),o.value?(f(),k(Ze,{key:2,mapId:s.value},null,8,["mapId"])):T("",!0)],512)],10,At)):(f(),w("div",Ot,Nt))}}),Zt=oe(Kt,[["__scopeId","data-v-c5ffc01a"]]),Ht={class:"base-map-card"},Jt={class:"base-map-card__image"},Qt={class:"base-map-card__content"},ea=A({__name:"CompareBaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){var u;const p=t,{mapId:n}=pe(p),l=Z(n.value),m=I(((u=me.actions.getMapStore(n.value))==null?void 0:u.maps.map(a=>a.id))||[]),g=E(()=>o.value.map(a=>a.currentBaseMap)),c=E(()=>o.value.map(a=>a.baseMaps)),o=E(()=>m.value.map(a=>ke(a))),s=(a,r)=>{o.value[a].setCurrent(r)};return(a,r)=>(f(),w("div",Ht,[i("div",Jt,[g.value?(f(),k(e(K),{key:0},{default:x(()=>[i("div",{class:F(["base-map-item-image-container",{_vertical:e(l).vertical}])},[(f(!0),w(P,null,N(g.value,(v,_)=>{var h;return f(),k(e(K),{src:(h=v.value)==null?void 0:h.thumbnail,key:_,class:"base-map-item-image"},null,8,["src"])}),128))],2)]),_:1})):T("",!0)]),i("div",Qt,[(f(!0),w(P,null,N(c.value,(v,_)=>(f(),w("div",{key:_,class:"base-map-card__item"},[i("div",null,"#"+W(_+1),1),i("div",null,[d(e(et),{modelValue:g.value[_].value,items:v.value,returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":h=>s(_,h)},null,8,["modelValue","items","onUpdate:modelValue"])])]))),128))])]))}}),ta=oe(ea,[["__scopeId","data-v-b09c9e4e"]]),aa={class:"base-map-button__content"},oa={class:"base-map-button__title"},sa={class:""},na={key:1},la={class:"control-container"},ra={class:"tabs-container"},ia=["onClick"],ca={class:"basemap-container"},ua={class:"base-map-control-setting"},da=["title","onClick"],pa={class:"base-map-control-setting-item__title",style:{"font-size":"14px"}},ma=A({__name:"CompareBaseMapControl",props:{...xe,baseMaps:{type:Array,default:()=>tt},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){var R;const p=t,{mapId:n,moduleContainerProps:l}=pe(p),m=Z(n.value),{trans:g,setLocaleDefault:c}=de(n.value),o=I(0),s=I(((R=me.actions.getMapStore(n.value))==null?void 0:R.maps.map(M=>M.id))||[]),u=E(()=>s.value.map(M=>ke(M))),a=E(()=>u.value.map(M=>M.currentBaseMap)),r=E(()=>u.value.map(M=>M.baseMaps));ae(()=>p.baseMaps,M=>{u.value.forEach($=>{$.setBaseMaps(M)})},{immediate:!0}),ae(()=>p.defaultBaseMap,M=>{u.value.forEach($=>{$.setDefaultBaseMap(M)})},{immediate:!0}),c({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const v=E(()=>70),_={layer:nt},h=I(!1);function S(M,$){u.value[M].setCurrent($)}function G(){h.value=!h.value}return(M,$)=>(f(),k(e(Ie),ee(e(l),{btnWidth:70}),{btn:x(()=>[a.value?(f(),k(e(we),{key:0,tooltip:t.title},{content:x(()=>[d(e(st),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:G},{default:x(()=>[i("div",aa,[d(e(K),null,{default:x(()=>[i("div",{class:F(["base-map-item-image-container",{_vertical:e(m).vertical}])},[(f(!0),w(P,null,N(a.value,(B,b)=>{var C;return f(),k(e(K),{src:(C=B.value)==null?void 0:C.thumbnail,key:b,class:"base-map-item-image"},null,8,["src"])}),128))],2),i("div",oa,[t.controlIcon?(f(),k(e(at),{key:0,dark:"",small:""},{default:x(()=>[ot(W(t.controlIcon),1)]),_:1})):(f(),k(e(Se),{key:1,type:"mdi",path:_.layer},null,8,["path"])),i("div",sa,W(t.title||e(g)("map.basemap.title")),1)])]),_:1})])]),_:1})]),_:1},8,["tooltip"])):(f(),w("div",na))]),draggable:x(B=>[h.value?(f(),k(e(Le),ee({key:0},B,{height:v.value*2+48+10+40,show:h.value,"onUpdate:show":$[0]||($[0]=b=>h.value=b),"is-resizable":!1,title:e(g)("map.basemap.setting"),width:v.value*3+24}),{default:x(()=>[i("div",la,[i("div",ra,[(f(!0),w(P,null,N(r.value,(b,C)=>(f(),w("div",{key:C,class:F(["tab-item",{_active:o.value==C}]),onClick:V=>o.value=C}," #"+W(C+1),11,ia))),128))]),i("div",ca,[i("div",ua,[(f(!0),w(P,null,N(r.value[o.value].value,b=>{var C;return f(),w("div",{key:b.id,class:F(["clickable base-map-control-setting-item",{"base-map-control-setting-item__active":a.value&&a.value[o.value]&&a.value[o.value].value&&b.id==((C=a.value[o.value].value)==null?void 0:C.id)}]),style:ye({width:v.value+"px"}),title:b.title,onClick:V=>S(o.value,b)},[i("div",{style:ye({width:v.value-34+"px",height:v.value-34+"px"})},[d(e(K),{src:b.thumbnail},null,8,["src"])],4),i("div",pa,W(b.title),1)],14,da)}),128))])])])]),_:2},1040,["height","show","title","width"])):T("",!0)]),default:x(()=>[te(M.$slots,"default",{},void 0,!0)]),_:3},16))}}),va=oe(ma,[["__scopeId","data-v-94238b78"]]),ga=A({__name:"AllMapCompareView",setup(t){const p=I();function n(l){const m=q("Group test",null,!0),g=yt("source",{name:"raster 1",type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),c=se("layer raster",[{type:"raster"}]),o=ne("test raster");o.color="#0000FF";const s=q("Group layer 1",null,!0);m.add(g),s.add(o),s.add(c),m.add(s),o.addMenu(be()),o.addMenu(le());const u=q("Group test",null,!0),a=bt("source",{type:"FeatureCollection",features:[]}),r=q("Group layer 1",null,!0),v=ne("test area");v.color="#0000FF",v.legend=Mt([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const _=se("layer area",[new re().setStyleType("area").setColor(v.color).setOpacity(.5).build()]);r.add(_),r.add(v);const h=q("Group layer 2",null,!0),S=ne("test point");S.color="#ff0000",S.legend=Ct("color",{text:"color-test",color:"#fff"});const G=se("layer point",[new re().setStyleType("point").setColor(S.color).setOpacity(S.opacity).build(),new re().setStyleType("line").setColor(S.color).setOpacity(.5).build()]);v.addMenus([le(),be(),$t()]),S.addMenus([le()]);const R=Me("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),M=Me("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),$=xt("test identify"),B=Ce("test identify 1"),b=Ce("test identify 2");$.addMenus([ie(),ce()]),B.addMenus([ie(),ce()]),b.addMenus([ie(),ce()]);const C={id:"test",name:"test"};v.group=C,r.add(B),S.group=C,h.add(G),h.add(S),h.add(b),h.add(R);const V=St("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});V.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),u.add(a),u.add(V),u.add(r),u.add(h),u.add($),u.add(M),$e(l.id,m),$e(l.id,u)}return(l,m)=>(f(),k(e(Zt),{ref_key:"mapRef",ref:p,onMapLoaded:n},{default:x(()=>[d(e(lt)),d(e(Vt)),d(e(rt),{position:"top-right"}),d(e(it),{position:"top-left",show:""},{endList:x(({mapId:g})=>[d(e(ta),{mapId:g},null,8,["mapId"]),d(e(kt),{mapId:g},null,8,["mapId"])]),_:1}),d(e(ct),{position:"top-right",immediately:""}),d(e(ut),{position:"top-right"}),d(e(dt)),d(e(pt)),d(e(mt)),d(e(vt)),d(e(ft)),d(e(gt)),d(e(_t)),d(e(va),{position:"bottom-left"}),d(e(ht))]),_:1},512))}});export{ga as default};
