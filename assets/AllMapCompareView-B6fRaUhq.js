import{g as pe,e as Le,r as I,d as O,f as le,o as i,h as S,i as r,a as u,u as e,I as X,_ as J,j as ye,k as Be,l as ie,c as k,w as C,S as be,m as Ee,n as Te,p as Me,q as Ce,s as K,t as Ve,v as T,x as Y,y as ze,z as De,A as Se,C as Pe,E as Ue,F as Oe,G as Re,H as Fe,J as W,K as Ae,L as x,N as me,O as Ne,P as Z,Q as D,R as U,T as Ge,U as je,M as qe,V as ce,W as H,X as We,Y as Xe,Z as $e,$ as j,a0 as G,a1 as Ke,a2 as Ye,a3 as Ze,a4 as He,a5 as Je,a6 as Qe,a7 as ve,a8 as et,a9 as tt,aa as at,ab as st,ac as ot,ad as nt,ae as rt,af as lt,ag as it,ah as ct,ai as ut,aj as dt,ak as pt,al as N,am as mt,an as ee,ao as te,ap as fe,aq as ae,ar as vt,as as ft,at as se,au as _t,av as gt,aw as _e,ax as ht,ay as ge,az as oe,aA as ne,aB as yt,aC as he}from"./index-CRHq7x36.js";const re="map-compare";function we(a){Le(a,re,{setting:I({compare:!0,split:!0,sync:!0})})}function bt(a){const v=pe(a,re);return v||(we(a),pe(a,re))}function ue(a){return bt(a).setting}const Mt={class:"setting-field-container"},Ct=O({__name:"CompareSettingCard",props:{mapId:{type:String,required:!0}},setup(a){const v=a,{trans:d,setLocaleDefault:n}=le(v.mapId);n({map:{"setting-control":{title:"Setting",field:{compare:"compare",split:"split",sync:"sync"},btn:{apply:"Apply"}}}});const c=ue(v.mapId);return(f,s)=>(i(),S("div",Mt,[r("div",null,[u(e(X),{label:e(d)("map.setting-control.field.split"),modelValue:e(c).split,"onUpdate:modelValue":s[0]||(s[0]=l=>e(c).split=l)},null,8,["label","modelValue"])]),r("div",null,[u(e(X),{label:e(d)("map.setting-control.field.sync"),modelValue:e(c).sync,"onUpdate:modelValue":s[1]||(s[1]=l=>e(c).sync=l)},null,8,["label","modelValue"])])]))}}),St=J(Ct,[["__scopeId","data-v-689214d6"]]),$t={class:"setting-container"},wt={class:"setting-field-container"},It=O({__name:"CompareSettingControl",props:{...ye},setup(a){const v=a,[d,n]=Be(!1),{mapId:c,moduleContainerProps:f}=ie(v),{trans:s,setLocaleDefault:l}=le(c.value);l({map:{"setting-control":{title:"Setting",field:{compare:"compare map",split:"split map",sync:"sync map"},btn:{apply:"Apply"}}}});const t=ue(c.value);return(p,o)=>(i(),k(Se,ze(De(e(f))),{btn:C(()=>[u(Me,{onClick:o[0]||(o[0]=Te(m=>e(n)(),["stop"])),tooltip:e(s)("map.setting-control.title")},{default:C(()=>[u(e(be),{size:18,type:"mdi",path:e(Ee)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:C(m=>[e(d)?(i(),k(e(Ce),K({key:0,height:400,width:400},m,{show:e(d),"onUpdate:show":o[3]||(o[3]=g=>Ve(d)?d.value=g:null),title:e(s)("map.setting-control.title")}),{default:C(()=>[r("div",$t,[r("div",wt,[r("div",null,[u(e(X),{label:e(s)("map.setting-control.field.split"),modelValue:e(t).split,"onUpdate:modelValue":o[1]||(o[1]=g=>e(t).split=g)},null,8,["label","modelValue"])]),r("div",null,[u(e(X),{label:e(s)("map.setting-control.field.sync"),modelValue:e(t).sync,"onUpdate:modelValue":o[2]||(o[2]=g=>e(t).sync=g)},null,8,["label","modelValue"])])])])]),_:2},1040,["show","title"])):T("",!0)]),default:C(()=>[Y(p.$slots,"default")]),_:3},16))}});function kt(a,v){var d=a.getCenter(),n=a.getZoom(),c=a.getBearing(),f=a.getPitch();v.forEach(function(s){s.jumpTo({center:d,zoom:n,bearing:c,pitch:f})})}function xt(){var a,v=arguments.length;if(v===1)a=arguments[0];else{a=[];for(var d=0;d<v;d++)a.push(arguments[d])}var n=[];a.forEach(function(l,t){n[t]=s.bind(null,l,a.filter(function(p,o){return o!==t}))});function c(){a.forEach(function(l,t){l.on("move",n[t])})}function f(){a.forEach(function(l,t){l.off("move",n[t])})}function s(l,t){f(),kt(l,t),c()}return c(),function(){f(),n=[],a=[]}}var Lt=xt;const Bt=Pe(Lt);function Et(a,v,d){let n=d.getBoundingClientRect();const c=()=>{n=d.getBoundingClientRect()},f=_=>{_.touches?(document.addEventListener("touchmove",s),document.addEventListener("touchend",p)):(document.addEventListener("mousemove",s),document.addEventListener("mouseup",t))},s=_=>{o(l(_))},l=_=>{_=_.touches?_.touches[0]:_;let b=_.clientX-n.left;return b<0&&(b=0),b>n.width&&(b=n.width),b},t=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)},p=()=>{document.removeEventListener("touchmove",s),document.removeEventListener("touchend",p)},o=_=>{_=Math.min(_,n.width);const b="translate("+_+"px, 0)";a.style.transform=b,a.style.WebkitTransform=b;const $="rect(0, "+_+"px, "+n.height+"px, 0)",h="rect(0, 999em, "+n.height+"px,"+_+"px)";v.style.clip=$,d.style.clip=h};a.addEventListener("mousedown",f),a.addEventListener("touchstart",f);const m=()=>{a.removeEventListener("mousedown",f),a.removeEventListener("touchstart",f)},g=n.width/2;return o(g),{clear:m,resize:c}}const Ie=a=>(We("data-v-fc844e28"),a=a(),Xe(),a),Tt={key:0,class:""},Vt=Ie(()=>r("div",{class:"not-support-map"},[r("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)),zt=[Vt],Dt=["mapId"],Pt={class:"map-viewer"},Ut=Ie(()=>r("div",{class:"compare-swiper-vertical"},null,-1)),Ot=[Ut],Rt=["id"],Ft=["id"],At=["id"],Nt=["id"],Gt=O({__name:"MapCompare",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(a,{emit:v}){const d=Ue({mobile:0,tablet:640,laptop:1024,desktop:1280}),n=a,c=v,f=I(2),s=I(Oe.supported()),l=I(!1),t=I(Re());Fe(()=>{W(()=>{p(),window.addEventListener("resize",p)})});function p(){z&&z()}Ae(()=>{window.removeEventListener("resize",p),xe()});let o=[];const m=x(()=>`map-draggable-${t.value}`),g=x(()=>`bottom-right-${t.value}`),_=x(()=>`bottom-left-${t.value}`),b=x(()=>`top-right-${t.value}`),$=x(()=>`top-left-${t.value}`);me("$map.dragId",n.dragId||m.value),me("$map.id",t.value);const h=d.smallerOrEqual("tablet");function L(M,E){o[E]=M,ke()}function V(M,E){delete o[E]}let y,w,z;const R=I(null),P=I([]),F=I({compare:!0,split:!0,sync:!0}),q=x(()=>F.value.compare&&F.value.split);let A=null;function ke(){o&&(Array.from({length:f.value},(M,E)=>E).some(M=>!o[M])||(l.value=!0,W(()=>{c("map-loaded",{id:t.value,maps:o})}),o.forEach(M=>{M&&M.resize()}),ce.actions.initMaps(t.value,o),we(t.value),H(t,M=>{if(!M)return;A&&A();const E=ue(M);A=H(E,B=>{F.value={...B},W(()=>{de()})},{deep:!0})},{immediate:!0}),de()))}function xe(){y&&y(),w&&w(),Ne.removeMap(t.value),W(()=>{o=[]}),A&&A()}function de(){var M,E;if(y&&y(),w&&w(),f.value=F.value.compare?2:1,q.value){const B=Et(R.value,(M=P.value)==null?void 0:M[0].$el,(E=P.value)==null?void 0:E[1].$el);y=B.clear,z=B.resize}F.value.sync&&(w=Bt(o)),o.forEach(B=>{B&&B.resize()})}return(M,E)=>s.value?(i(),S("div",{key:1,class:Z(["map-compare-container",{"map-mobile-container":e(h),"map-compare__split":q.value}]),mapId:t.value},[r("div",Pt,[r("div",{class:Z(["map-compare__container",{"map-compare__split":q.value}])},[(i(!0),S(D,null,U(f.value,B=>(i(),k(qe,K({key:B,ref_for:!0},M.$attrs,{class:"map-compare__item",dragId:m.value,ref_for:!0,ref_key:"mapsRef",ref:P,onMapLoaded:Q=>L(Q,B-1),onMapDestroy:Q=>V(Q,B-1),initOptions:a.initOptions}),{default:C(()=>[l.value?Y(M.$slots,`map-${B-1}`,{key:0},void 0,!0):T("",!0)]),_:2},1040,["dragId","onMapLoaded","onMapDestroy","initOptions"]))),128)),q.value?(i(),S("div",{key:0,class:"map-compare__swiper",ref_key:"swiperRef",ref:R},Ot,512)):T("",!0)],2),n.dragId?T("",!0):(i(),S(D,{key:0},[r("div",{class:"right-bottom-container",id:g.value},null,8,Rt),r("div",{class:"left-bottom-container",id:_.value},null,8,Ft),r("div",{class:"right-top-container",id:b.value},null,8,At),r("div",{class:"left-top-container",id:$.value},null,8,Nt),u(e(Ge),{class:"drag-container","container-id":m.value},null,8,["container-id"])],64)),l.value?Y(M.$slots,"default",{key:1},void 0,!0):T("",!0),l.value?(i(),k(je,{key:2,mapId:t.value},null,8,["mapId"])):T("",!0)])],10,Dt)):(i(),S("div",Tt,zt))}}),jt=J(Gt,[["__scopeId","data-v-fc844e28"]]),qt={class:"base-map-card"},Wt={class:"base-map-card__image"},Xt={class:"base-map-item-image-container"},Kt={class:"base-map-card__content"},Yt=O({__name:"CompareBaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(a){const v=a,{mapId:d}=ie(v),n=I(ce.actions.getMapStore(d.value).maps.map(t=>t.id)),c=x(()=>s.value.map(t=>t.currentBaseMap)),f=x(()=>s.value.map(t=>t.baseMaps)),s=x(()=>n.value.map(t=>$e(t))),l=(t,p)=>{s.value[t].setCurrent(p)};return(t,p)=>(i(),S("div",qt,[r("div",Wt,[c.value?(i(),k(e(j),{key:0},{default:C(()=>[r("div",Xt,[(i(!0),S(D,null,U(c.value,(o,m)=>{var g;return i(),k(e(j),{src:(g=o.value)==null?void 0:g.thumbnail,key:m,class:"base-map-item-image"},null,8,["src"])}),128))])]),_:1})):T("",!0)]),r("div",Kt,[(i(!0),S(D,null,U(f.value,(o,m)=>(i(),S("div",{key:m,class:"base-map-card__item"},[r("div",null,"#"+G(m+1),1),r("div",null,[u(e(Ke),{modelValue:c.value[m].value,items:o.value,returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":g=>l(m,g)},null,8,["modelValue","items","onUpdate:modelValue"])])]))),128))])]))}}),Zt=J(Yt,[["__scopeId","data-v-09da3527"]]),Ht={class:"base-map-button__content"},Jt={class:"base-map-item-image-container"},Qt={class:"base-map-button__title"},ea={class:""},ta={key:1},aa={class:"control-container"},sa={class:"tabs-container"},oa=["onClick"],na={class:"basemap-container"},ra={class:"base-map-control-setting"},la=["title","onClick"],ia={class:"base-map-control-setting-item__title",style:{"font-size":"14px"}},ca=O({__name:"CompareBaseMapControl",props:{...ye,baseMaps:{type:Array,default:()=>Ye},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(a){const v=a,{mapId:d,moduleContainerProps:n}=ie(v),{trans:c,setLocaleDefault:f}=le(d.value),s=I(0),l=I(ce.actions.getMapStore(d.value).maps.map(h=>h.id)),t=x(()=>l.value.map(h=>$e(h))),p=x(()=>t.value.map(h=>h.currentBaseMap)),o=x(()=>t.value.map(h=>h.baseMaps));H(()=>v.baseMaps,h=>{t.value.forEach(L=>{L.setBaseMaps(h)})},{immediate:!0}),H(()=>v.defaultBaseMap,h=>{t.value.forEach(L=>{L.setDefaultBaseMap(h)})},{immediate:!0}),f({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const m=x(()=>70),g={layer:Qe},_=I(!1);function b(h,L){t.value[h].setCurrent(L)}function $(){_.value=!_.value}return(h,L)=>(i(),k(e(Se),K(e(n),{btnWidth:70}),{btn:C(()=>[p.value?(i(),k(e(Me),{key:0,tooltip:a.title},{content:C(()=>[u(e(Je),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:$},{default:C(()=>[r("div",Ht,[u(e(j),{src:p.value.thumbnail},{default:C(()=>[r("div",Jt,[(i(!0),S(D,null,U(p.value,(V,y)=>(i(),k(e(j),{src:V.value.thumbnail,key:y,class:"base-map-item-image"},null,8,["src"]))),128))]),r("div",Qt,[a.controlIcon?(i(),k(e(Ze),{key:0,dark:"",small:""},{default:C(()=>[He(G(a.controlIcon),1)]),_:1})):(i(),k(e(be),{key:1,type:"mdi",path:g.layer},null,8,["path"])),r("div",ea,G(a.title||e(c)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(i(),S("div",ta))]),draggable:C(V=>[_.value?(i(),k(e(Ce),K({key:0},V,{height:m.value*2+48+10+40,show:_.value,"onUpdate:show":L[0]||(L[0]=y=>_.value=y),"is-resizable":!1,title:e(c)("map.basemap.setting"),width:m.value*3+24}),{default:C(()=>[r("div",aa,[r("div",sa,[(i(!0),S(D,null,U(o.value,(y,w)=>(i(),S("div",{key:w,class:Z(["tab-item",{_active:s.value==w}]),onClick:z=>s.value=w}," #"+G(w+1),11,oa))),128))]),r("div",na,[r("div",ra,[(i(!0),S(D,null,U(o.value[s.value].value,y=>(i(),S("div",{key:y.id,class:Z(["clickable base-map-control-setting-item",{"base-map-control-setting-item__active":p.value[s.value].value&&y.id==p.value[s.value].value.id}]),style:ve({width:m.value+"px"}),title:y.title,onClick:w=>b(s.value,y)},[r("div",{style:ve({width:m.value-34+"px",height:m.value-34+"px"})},[u(e(j),{src:y.thumbnail},null,8,["src"])],4),r("div",ia,G(y.title),1)],14,la))),128))])])])]),_:2},1040,["height","show","title","width"])):T("",!0)]),default:C(()=>[Y(h.$slots,"default",{},void 0,!0)]),_:3},16))}}),ua=J(ca,[["__scopeId","data-v-b22d645f"]]),pa=O({__name:"AllMapCompareView",setup(a){const v=I();function d(n){const c=N("Group test",null,!0),f=mt("source",{name:"raster 1",type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),s=ee("layer raster",[{type:"raster"}]),l=te("test raster");l.color="#0000FF";const t=N("Group layer 1",null,!0);c.add(f),t.add(l),t.add(s),c.add(t),l.addMenu(fe()),l.addMenu(ae());const p=N("Group test",null,!0),o=vt("source",{type:"FeatureCollection",features:[]}),m=N("Group layer 1",null,!0),g=te("test area");g.color="#0000FF",g.legend=ft([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const _=ee("layer area",[new se().setStyleType("area").setColor(g.color).setOpacity(.5).build()]);m.add(_),m.add(g);const b=N("Group layer 2",null,!0),$=te("test point");$.color="#ff0000",$.legend=_t("color",{text:"color-test",color:"#fff"});const h=ee("layer point",[new se().setStyleType("point").setColor($.color).setOpacity($.opacity).build(),new se().setStyleType("line").setColor($.color).setOpacity(.5).build()]);g.addMenus([ae(),fe(),gt()]),$.addMenus([ae()]);const L=_e("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),V=_e("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),y=ht("test identify"),w=ge("test identify 1"),z=ge("test identify 2");y.addMenus([oe(),ne()]),w.addMenus([oe(),ne()]),z.addMenus([oe(),ne()]);const R={id:"test",name:"test"};g.group=R,m.add(w),$.group=R,b.add(h),b.add($),b.add(z),b.add(L);const P=yt("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});P.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),p.add(o),p.add(P),p.add(m),p.add(b),p.add(y),p.add(V),he(n.id,c),he(n.id,p)}return(n,c)=>(i(),k(e(jt),{ref_key:"mapRef",ref:v,onMapLoaded:d},{default:C(()=>[u(e(et)),u(e(It)),u(e(tt),{position:"top-right"}),u(e(at),{position:"top-left",show:""},{endList:C(({mapId:f})=>[u(e(Zt),{mapId:f},null,8,["mapId"]),u(e(St),{mapId:f},null,8,["mapId"])]),_:1}),u(e(st),{position:"top-right"}),u(e(ot),{position:"top-right"}),u(e(nt)),u(e(rt)),u(e(lt)),u(e(it)),u(e(ct)),u(e(ut)),u(e(dt)),u(e(ua),{position:"bottom-left"}),u(e(pt))]),_:1},512))}});export{pa as default};
