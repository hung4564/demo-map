import{g as me,e as Ee,r as L,d as A,f as ce,o as f,h as w,i,a as d,u as e,I as O,_ as te,j as be,k as Be,l as ue,c as I,w as S,S as Me,m as Ve,n as ze,p as Ce,q as $e,s as J,t as Te,v as D,x as Q,y as De,z as Pe,A as Se,C as Ue,E as Re,F as Oe,G as Fe,H as Ne,J as H,K as Ae,L as k,N as ve,O as Ge,P as F,Q as P,R as N,T as Ye,U as je,M as Xe,V as de,W as ee,X as qe,Y as We,Z as xe,$ as W,a0 as q,a1 as Ke,a2 as Ze,a3 as He,a4 as Je,a5 as Qe,a6 as et,a7 as fe,a8 as tt,a9 as at,aa as ot,ab as st,ac as nt,ad as lt,ae as rt,af as it,ag as ct,ah as ut,ai as dt,aj as pt,ak as mt,al as X,am as vt,an as ae,ao as oe,ap as _e,aq as se,ar as ft,as as _t,at as ne,au as gt,av as ht,aw as ge,ax as yt,ay as he,az as le,aA as re,aB as bt,aC as ye}from"./index-ctUtFwLW.js";const ie="map-compare";function we(t){Ee(t,ie,{setting:L({compare:!0,split:!0,sync:!0,vertical:!1})})}function Mt(t){const p=me(t,ie);return p||(we(t),me(t,ie))}function K(t){return Mt(t).setting}const Ct={class:"setting-field-container"},$t=A({__name:"CompareSettingCard",props:{mapId:{type:String,required:!0}},setup(t){const p=t,{trans:n,setLocaleDefault:l}=ce(p.mapId);l({map:{"setting-control":{title:"Setting",field:{compare:"compare",split:"split",sync:"sync",vertical:"vertical"},btn:{apply:"Apply"}}}});const m=K(p.mapId);return(_,c)=>(f(),w("div",Ct,[i("div",null,[d(e(O),{label:e(n)("map.setting-control.field.split"),modelValue:e(m).split,"onUpdate:modelValue":c[0]||(c[0]=o=>e(m).split=o)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(n)("map.setting-control.field.vertical"),modelValue:e(m).vertical,"onUpdate:modelValue":c[1]||(c[1]=o=>e(m).vertical=o)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(n)("map.setting-control.field.sync"),modelValue:e(m).sync,"onUpdate:modelValue":c[2]||(c[2]=o=>e(m).sync=o)},null,8,["label","modelValue"])])]))}}),St=te($t,[["__scopeId","data-v-9e9523d0"]]),xt={class:"setting-container"},wt={class:"setting-field-container"},Lt=A({__name:"CompareSettingControl",props:{...be},setup(t){const p=t,[n,l]=Be(!1),{mapId:m,moduleContainerProps:_}=ue(p),{trans:c,setLocaleDefault:o}=ce(m.value);o({map:{"setting-control":{title:"Setting",field:{compare:"compare",split:"split",sync:"sync",vertical:"vertical"},btn:{apply:"Apply"}}}});const s=K(m.value);return(u,a)=>(f(),I(Se,De(Pe(e(_))),{btn:S(()=>[d(Ce,{onClick:a[0]||(a[0]=ze(r=>e(l)(),["stop"])),tooltip:e(c)("map.setting-control.title")},{default:S(()=>[d(e(Me),{size:18,type:"mdi",path:e(Ve)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:S(r=>[e(n)?(f(),I(e($e),J({key:0,height:400,width:400},r,{show:e(n),"onUpdate:show":a[4]||(a[4]=v=>Te(n)?n.value=v:null),title:e(c)("map.setting-control.title")}),{default:S(()=>[i("div",xt,[i("div",wt,[i("div",null,[d(e(O),{label:e(c)("map.setting-control.field.split"),modelValue:e(s).split,"onUpdate:modelValue":a[1]||(a[1]=v=>e(s).split=v)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(c)("map.setting-control.field.vertical"),modelValue:e(s).vertical,"onUpdate:modelValue":a[2]||(a[2]=v=>e(s).vertical=v)},null,8,["label","modelValue"])]),i("div",null,[d(e(O),{label:e(c)("map.setting-control.field.sync"),modelValue:e(s).sync,"onUpdate:modelValue":a[3]||(a[3]=v=>e(s).sync=v)},null,8,["label","modelValue"])])])])]),_:2},1040,["show","title"])):D("",!0)]),default:S(()=>[Q(u.$slots,"default")]),_:3},16))}});function It(t,p){var n=t.getCenter(),l=t.getZoom(),m=t.getBearing(),_=t.getPitch();p.forEach(function(c){c.jumpTo({center:n,zoom:l,bearing:m,pitch:_})})}function kt(){var t,p=arguments.length;if(p===1)t=arguments[0];else{t=[];for(var n=0;n<p;n++)t.push(arguments[n])}var l=[];t.forEach(function(o,s){l[s]=c.bind(null,o,t.filter(function(u,a){return a!==s}))});function m(){t.forEach(function(o,s){o.on("move",l[s])})}function _(){t.forEach(function(o,s){o.off("move",l[s])})}function c(o,s){_(),It(o,s),m()}return m(),function(){_(),l=[],t=[]}}var Et=kt;const Bt=Ue(Et);function Vt(t,p,n){let l=n.getBoundingClientRect();const m=()=>{l=n.getBoundingClientRect()},_=g=>{let x=("touches"in g?g.touches[0].clientX:g.clientX)-l.left;return x=Math.max(0,Math.min(x,l.width)),x},c=g=>{const h=`translate(${g}px, 0)`;t.style.transform=h,t.style.webkitTransform=h,p.style.clip=`rect(0, ${g}px, ${l.height}px, 0)`,n.style.clip=`rect(0, 999em, ${l.height}px, ${g}px)`},o=g=>{c(_(g))},s=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s)},u=()=>{document.removeEventListener("touchmove",o),document.removeEventListener("touchend",u)},a=g=>{"touches"in g?(document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchend",u)):(document.addEventListener("mousemove",o),document.addEventListener("mouseup",s))};t.addEventListener("mousedown",a),t.addEventListener("touchstart",a,{passive:!1});const r=()=>{t.removeEventListener("mousedown",a),t.removeEventListener("touchstart",a),p.style.clip="",n.style.clip=""},v=l.width/2;return c(v),{clear:r,resize:m}}function zt(t,p,n){let l=n.getBoundingClientRect();const m=()=>{l=n.getBoundingClientRect(),c(l.height/2)},_=r=>{const g=("touches"in r?r.touches[0].clientY:r.clientY)-l.top;return Math.max(0,Math.min(g,l.height))},c=r=>{t.style.transform=`translateY(${r}px)`,p.style.clipPath=`inset(0px 0px ${l.height-r}px 0px)`,n.style.clipPath=`inset(${r}px 0px 0px 0px)`},o=r=>{r.preventDefault(),c(_(r))},s=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",s),document.removeEventListener("touchmove",o),document.removeEventListener("touchend",s)},u=r=>{"touches"in r?(document.addEventListener("touchmove",o,{passive:!1}),document.addEventListener("touchend",s)):(document.addEventListener("mousemove",o),document.addEventListener("mouseup",s))};t.addEventListener("mousedown",u),t.addEventListener("touchstart",u,{passive:!1});const a=()=>{t.removeEventListener("mousedown",u),t.removeEventListener("touchstart",u),s(),p.style.clipPath="",n.style.clipPath=""};return c(l.height/2),{clear:a,resize:m}}const Le=t=>(qe("data-v-72f0a9cb"),t=t(),We(),t),Tt={key:0,class:""},Dt=Le(()=>i("div",{class:"not-support-map"},[i("p",{class:""}," Trình duyệt của bạn không hỗ trợ hiển thị bản đồ, vui lòng đổi trình duyệt hoặc cập nhật bản mới để xem. ")],-1)),Pt=[Dt],Ut=["mapId"],Rt={class:"map-viewer"},Ot=Le(()=>i("div",{class:"compare-swiper-icon"},null,-1)),Ft=[Ot],Nt=["id"],At=["id"],Gt=["id"],Yt=["id"],jt=A({__name:"MapCompare",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:p}){const n=Re({mobile:0,tablet:640,laptop:1024,desktop:1280}),l=t,m=p,_=L(2),c=L(Oe.supported()),o=L(!1),s=L(Fe());Ne(()=>{H(()=>{u(),window.addEventListener("resize",u)})});function u(){b&&b()}Ae(()=>{window.removeEventListener("resize",u),ke()});let a=[];const r=k(()=>`map-draggable-${s.value}`),v=k(()=>`bottom-right-${s.value}`),g=k(()=>`bottom-left-${s.value}`),h=k(()=>`top-right-${s.value}`),x=k(()=>`top-left-${s.value}`);ve("$map.dragId",l.dragId||r.value),ve("$map.id",s.value);const G=n.smallerOrEqual("tablet");function U(C,B){a[B]=C,Ie()}function y(C,B){delete a[B]}let $,E,b;const M=L(null),V=L([]),T=L({compare:!0,split:!0,sync:!0,vertical:!1}),Z=k(()=>T.value.compare&&T.value.split);let Y=null;function Ie(){a&&(Array.from({length:_.value},(C,B)=>B).some(C=>!a[C])||(o.value=!0,H(()=>{m("map-loaded",{id:s.value,maps:a})}),a.forEach(C=>{C&&C.resize()}),de.actions.initMaps(s.value,a),we(s.value),ee(s,C=>{if(!C)return;Y&&Y();const B=K(C);Y=ee(B,z=>{T.value={...z},H(()=>{pe()})},{deep:!0})},{immediate:!0}),pe()))}function ke(){$&&$(),E&&E(),Ge.removeMap(s.value),H(()=>{a=[]}),Y&&Y()}function pe(){var C,B,z,R;if($&&$(),E&&E(),_.value=T.value.compare?2:1,Z.value&&M.value){const j=T.value.vertical?zt(M.value,(C=V.value)==null?void 0:C[0].$el,(B=V.value)==null?void 0:B[1].$el):Vt(M.value,(z=V.value)==null?void 0:z[0].$el,(R=V.value)==null?void 0:R[1].$el);$=j.clear,b=j.resize}T.value.sync&&(E=Bt(a)),a.forEach(j=>{j&&j.resize()})}return(C,B)=>c.value?(f(),w("div",{key:1,class:F(["map-compare-container",{"map-mobile-container":e(G)}]),mapId:s.value},[i("div",Rt,[i("div",{class:F(["map-compare__container",{"map-compare__split-vertical":Z.value&&!T.value.vertical,"map-compare__split-horizontal":Z.value&&T.value.vertical}])},[(f(!0),w(P,null,N(_.value,z=>(f(),I(Xe,J({key:z,ref_for:!0},C.$attrs,{class:"map-compare__item",dragId:r.value,ref_for:!0,ref_key:"mapsRef",ref:V,onMapLoaded:R=>U(R,z-1),onMapDestroy:R=>y(R,z-1),initOptions:t.initOptions}),{default:S(()=>[o.value?Q(C.$slots,`map-${z-1}`,{key:0},void 0,!0):D("",!0)]),_:2},1040,["dragId","onMapLoaded","onMapDestroy","initOptions"]))),128)),Z.value?(f(),w("div",{key:0,class:"map-compare__swiper",ref_key:"swiperRef",ref:M},Ft,512)):D("",!0)],2),l.dragId?D("",!0):(f(),w(P,{key:0},[i("div",{class:"right-bottom-container",id:v.value},null,8,Nt),i("div",{class:"left-bottom-container",id:g.value},null,8,At),i("div",{class:"right-top-container",id:h.value},null,8,Gt),i("div",{class:"left-top-container",id:x.value},null,8,Yt),d(e(Ye),{class:"drag-container","container-id":r.value},null,8,["container-id"])],64)),o.value?Q(C.$slots,"default",{key:1},void 0,!0):D("",!0),o.value?(f(),I(je,{key:2,mapId:s.value},null,8,["mapId"])):D("",!0)])],10,Ut)):(f(),w("div",Tt,Pt))}}),Xt=te(jt,[["__scopeId","data-v-72f0a9cb"]]),qt={class:"base-map-card"},Wt={class:"base-map-card__image"},Kt={class:"base-map-card__content"},Zt=A({__name:"CompareBaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){var u;const p=t,{mapId:n}=ue(p),l=K(n.value),m=L(((u=de.actions.getMapStore(n.value))==null?void 0:u.maps.map(a=>a.id))||[]),_=k(()=>o.value.map(a=>a.currentBaseMap)),c=k(()=>o.value.map(a=>a.baseMaps)),o=k(()=>m.value.map(a=>xe(a))),s=(a,r)=>{o.value[a].setCurrent(r)};return(a,r)=>(f(),w("div",qt,[i("div",Wt,[_.value?(f(),I(e(W),{key:0},{default:S(()=>[i("div",{class:F(["base-map-item-image-container",{_vertical:e(l).vertical}])},[(f(!0),w(P,null,N(_.value,(v,g)=>{var h;return f(),I(e(W),{src:(h=v.value)==null?void 0:h.thumbnail,key:g,class:"base-map-item-image"},null,8,["src"])}),128))],2)]),_:1})):D("",!0)]),i("div",Kt,[(f(!0),w(P,null,N(c.value,(v,g)=>(f(),w("div",{key:g,class:"base-map-card__item"},[i("div",null,"#"+q(g+1),1),i("div",null,[d(e(Ke),{modelValue:_.value[g].value,items:v.value,returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":h=>s(g,h)},null,8,["modelValue","items","onUpdate:modelValue"])])]))),128))])]))}}),Ht=te(Zt,[["__scopeId","data-v-b09c9e4e"]]),Jt={class:"base-map-button__content"},Qt={class:"base-map-button__title"},ea={class:""},ta={key:1},aa={class:"control-container"},oa={class:"tabs-container"},sa=["onClick"],na={class:"basemap-container"},la={class:"base-map-control-setting"},ra=["title","onClick"],ia={class:"base-map-control-setting-item__title",style:{"font-size":"14px"}},ca=A({__name:"CompareBaseMapControl",props:{...be,baseMaps:{type:Array,default:()=>Ze},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){var U;const p=t,{mapId:n,moduleContainerProps:l}=ue(p),m=K(n.value),{trans:_,setLocaleDefault:c}=ce(n.value),o=L(0),s=L(((U=de.actions.getMapStore(n.value))==null?void 0:U.maps.map(y=>y.id))||[]),u=k(()=>s.value.map(y=>xe(y))),a=k(()=>u.value.map(y=>y.currentBaseMap)),r=k(()=>u.value.map(y=>y.baseMaps));ee(()=>p.baseMaps,y=>{u.value.forEach($=>{$.setBaseMaps(y)})},{immediate:!0}),ee(()=>p.defaultBaseMap,y=>{u.value.forEach($=>{$.setDefaultBaseMap(y)})},{immediate:!0}),c({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const v=k(()=>70),g={layer:et},h=L(!1);function x(y,$){u.value[y].setCurrent($)}function G(){h.value=!h.value}return(y,$)=>(f(),I(e(Se),J(e(l),{btnWidth:70}),{btn:S(()=>[a.value?(f(),I(e(Ce),{key:0,tooltip:t.title},{content:S(()=>[d(e(Qe),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:G},{default:S(()=>[i("div",Jt,[d(e(W),null,{default:S(()=>[i("div",{class:F(["base-map-item-image-container",{_vertical:e(m).vertical}])},[(f(!0),w(P,null,N(a.value,(E,b)=>{var M;return f(),I(e(W),{src:(M=E.value)==null?void 0:M.thumbnail,key:b,class:"base-map-item-image"},null,8,["src"])}),128))],2),i("div",Qt,[t.controlIcon?(f(),I(e(He),{key:0,dark:"",small:""},{default:S(()=>[Je(q(t.controlIcon),1)]),_:1})):(f(),I(e(Me),{key:1,type:"mdi",path:g.layer},null,8,["path"])),i("div",ea,q(t.title||e(_)("map.basemap.title")),1)])]),_:1})])]),_:1})]),_:1},8,["tooltip"])):(f(),w("div",ta))]),draggable:S(E=>[h.value?(f(),I(e($e),J({key:0},E,{height:v.value*2+48+10+40,show:h.value,"onUpdate:show":$[0]||($[0]=b=>h.value=b),"is-resizable":!1,title:e(_)("map.basemap.setting"),width:v.value*3+24}),{default:S(()=>[i("div",aa,[i("div",oa,[(f(!0),w(P,null,N(r.value,(b,M)=>(f(),w("div",{key:M,class:F(["tab-item",{_active:o.value==M}]),onClick:V=>o.value=M}," #"+q(M+1),11,sa))),128))]),i("div",na,[i("div",la,[(f(!0),w(P,null,N(r.value[o.value].value,b=>{var M;return f(),w("div",{key:b.id,class:F(["clickable base-map-control-setting-item",{"base-map-control-setting-item__active":a.value&&a.value[o.value]&&a.value[o.value].value&&b.id==((M=a.value[o.value].value)==null?void 0:M.id)}]),style:fe({width:v.value+"px"}),title:b.title,onClick:V=>x(o.value,b)},[i("div",{style:fe({width:v.value-34+"px",height:v.value-34+"px"})},[d(e(W),{src:b.thumbnail},null,8,["src"])],4),i("div",ia,q(b.title),1)],14,ra)}),128))])])])]),_:2},1040,["height","show","title","width"])):D("",!0)]),default:S(()=>[Q(y.$slots,"default",{},void 0,!0)]),_:3},16))}}),ua=te(ca,[["__scopeId","data-v-94238b78"]]),pa=A({__name:"AllMapCompareView",setup(t){const p=L();function n(l){const m=X("Group test",null,!0),_=vt("source",{name:"raster 1",type:"raster",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],maxzoom:6,bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]}),c=ae("layer raster",[{type:"raster"}]),o=oe("test raster");o.color="#0000FF";const s=X("Group layer 1",null,!0);m.add(_),s.add(o),s.add(c),m.add(s),o.addMenu(_e()),o.addMenu(se());const u=X("Group test",null,!0),a=ft("source",{type:"FeatureCollection",features:[]}),r=X("Group layer 1",null,!0),v=oe("test area");v.color="#0000FF",v.legend=_t([{type:"text",value:{text:"text-test",value:"test-value"}},{type:"linear",value:{text:"legend linear",items:[{value:"test 1",color:"#fff"},{value:"test 2",color:"#000"},{value:"test 3",color:"red"}]}}]);const g=ae("layer area",[new ne().setStyleType("area").setColor(v.color).setOpacity(.5).build()]);r.add(g),r.add(v);const h=X("Group layer 2",null,!0),x=oe("test point");x.color="#ff0000",x.legend=gt("color",{text:"color-test",color:"#fff"});const G=ae("layer point",[new ne().setStyleType("point").setColor(x.color).setOpacity(x.opacity).build(),new ne().setStyleType("line").setColor(x.color).setOpacity(.5).build()]);v.addMenus([se(),_e(),ht()]),x.addMenus([se()]);const U=ge("metadata for list2",{bbox:[105.88454157202995,20.878811643339404,106.16710803591963,21.0854254401454]}),y=ge("metadata",{bbox:[104.96327341667353,18.461221184685627,107.53334783357559,20.18022781865689]}),$=yt("test identify"),E=he("test identify 1"),b=he("test identify 2");$.addMenus([le(),re()]),E.addMenus([le(),re()]),b.addMenus([le(),re()]);const M={id:"test",name:"test"};v.group=M,r.add(E),x.group=M,h.add(G),h.add(x),h.add(b),h.add(U);const V=bt("data management",{fields:[{text:"Name rat dai rat dai rat dai rat dai",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"},{text:"Name",value:"name"}]});V.setItems([{id:"1",name:"feature 1",geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}},{id:"2",name:"feature 2",geometry:{coordinates:[[[105.80782070639765,20.18022781865689],[105.80782070639765,18.841791883714322],[107.53334783357559,18.841791883714322],[107.53334783357559,20.18022781865689],[105.80782070639765,20.18022781865689]]],type:"Polygon"}}]),u.add(a),u.add(V),u.add(r),u.add(h),u.add($),u.add(y),ye(l.id,m),ye(l.id,u)}return(l,m)=>(f(),I(e(Xt),{ref_key:"mapRef",ref:p,onMapLoaded:n},{default:S(()=>[d(e(tt)),d(e(Lt)),d(e(at),{position:"top-right"}),d(e(ot),{position:"top-left",show:""},{endList:S(({mapId:_})=>[d(e(Ht),{mapId:_},null,8,["mapId"]),d(e(St),{mapId:_},null,8,["mapId"])]),_:1}),d(e(st),{position:"top-right"}),d(e(nt),{position:"top-right"}),d(e(lt)),d(e(rt)),d(e(it)),d(e(ct)),d(e(ut)),d(e(dt)),d(e(pt)),d(e(ua),{position:"bottom-left"}),d(e(mt))]),_:1},512))}});export{pa as default};
