(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const o of m.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function a(h){if(h.ep)return;h.ep=!0;const m=i(h);fetch(h.href,m)}})();const kE="modulepreload",DE=function(t){return"/"+t},hA={},b1=function(n,i,a){let h=Promise.resolve();return i&&i.length>0&&(document.getElementsByTagName("link"),h=Promise.all(i.map(m=>{if(m=DE(m),m in hA)return;hA[m]=!0;const o=m.endsWith(".css"),y=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=o?"stylesheet":kE,o||(x.as="script",x.crossOrigin=""),x.href=m,document.head.appendChild(x),o)return new Promise((M,T)=>{x.addEventListener("load",M),x.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${m}`)))})}))),h.then(()=>n()).catch(m=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=m,window.dispatchEvent(o),!o.defaultPrevented)throw m})};/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ox(t,n){const i=new Set(t.split(","));return a=>i.has(a)}const vo={},pm=[],Qu=()=>{},RE=()=>!1,q0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Bx=t=>t.startsWith("onUpdate:"),ca=Object.assign,Fx=(t,n)=>{const i=t.indexOf(n);i>-1&&t.splice(i,1)},zE=Object.prototype.hasOwnProperty,xr=(t,n)=>zE.call(t,n),Xn=Array.isArray,dm=t=>_v(t)==="[object Map]",Pm=t=>_v(t)==="[object Set]",fA=t=>_v(t)==="[object Date]",Ni=t=>typeof t=="function",Go=t=>typeof t=="string",Qh=t=>typeof t=="symbol",ao=t=>t!==null&&typeof t=="object",M2=t=>(ao(t)||Ni(t))&&Ni(t.then)&&Ni(t.catch),E2=Object.prototype.toString,_v=t=>E2.call(t),OE=t=>_v(t).slice(8,-1),S2=t=>_v(t)==="[object Object]",Nx=t=>Go(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Rg=Ox(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),W0=t=>{const n=Object.create(null);return i=>n[i]||(n[i]=t(i))},BE=/-(\w)/g,Sc=W0(t=>t.replace(BE,(n,i)=>i?i.toUpperCase():"")),FE=/\B([A-Z])/g,od=W0(t=>t.replace(FE,"-$1").toLowerCase()),Z0=W0(t=>t.charAt(0).toUpperCase()+t.slice(1)),A1=W0(t=>t?`on${Z0(t)}`:""),sh=(t,n)=>!Object.is(t,n),n0=(t,...n)=>{for(let i=0;i<t.length;i++)t[i](...n)},T2=(t,n,i,a=!1)=>{Object.defineProperty(t,n,{configurable:!0,enumerable:!1,writable:a,value:i})},y0=t=>{const n=parseFloat(t);return isNaN(n)?t:n},NE=t=>{const n=Go(t)?Number(t):NaN;return isNaN(n)?t:n};let pA;const P2=()=>pA||(pA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ua(t){if(Xn(t)){const n={};for(let i=0;i<t.length;i++){const a=t[i],h=Go(a)?HE(a):Ua(a);if(h)for(const m in h)n[m]=h[m]}return n}else if(Go(t)||ao(t))return t}const VE=/;(?![^(]*\))/g,UE=/:([^]+)/,jE=/\/\*[^]*?\*\//g;function HE(t){const n={};return t.replace(jE,"").split(VE).forEach(i=>{if(i){const a=i.split(UE);a.length>1&&(n[a[0].trim()]=a[1].trim())}}),n}function bs(t){let n="";if(Go(t))n=t;else if(Xn(t))for(let i=0;i<t.length;i++){const a=bs(t[i]);a&&(n+=a+" ")}else if(ao(t))for(const i in t)t[i]&&(n+=i+" ");return n.trim()}function Sa(t){if(!t)return null;let{class:n,style:i}=t;return n&&!Go(n)&&(t.class=bs(n)),i&&(t.style=Ua(i)),t}const GE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qE=Ox(GE);function L2(t){return!!t||t===""}function WE(t,n){if(t.length!==n.length)return!1;let i=!0;for(let a=0;i&&a<t.length;a++)i=td(t[a],n[a]);return i}function td(t,n){if(t===n)return!0;let i=fA(t),a=fA(n);if(i||a)return i&&a?t.getTime()===n.getTime():!1;if(i=Qh(t),a=Qh(n),i||a)return t===n;if(i=Xn(t),a=Xn(n),i||a)return i&&a?WE(t,n):!1;if(i=ao(t),a=ao(n),i||a){if(!i||!a)return!1;const h=Object.keys(t).length,m=Object.keys(n).length;if(h!==m)return!1;for(const o in t){const y=t.hasOwnProperty(o),x=n.hasOwnProperty(o);if(y&&!x||!y&&x||!td(t[o],n[o]))return!1}}return String(t)===String(n)}function Vx(t,n){return t.findIndex(i=>td(i,n))}const oi=t=>Go(t)?t:t==null?"":Xn(t)||ao(t)&&(t.toString===E2||!Ni(t.toString))?JSON.stringify(t,k2,2):String(t),k2=(t,n)=>n&&n.__v_isRef?k2(t,n.value):dm(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((i,[a,h],m)=>(i[w1(a,m)+" =>"]=h,i),{})}:Pm(n)?{[`Set(${n.size})`]:[...n.values()].map(i=>w1(i))}:Qh(n)?w1(n):ao(n)&&!Xn(n)&&!S2(n)?String(n):n,w1=(t,n="")=>{var i;return Qh(t)?`Symbol(${(i=t.description)!=null?i:n})`:t};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hu;class ZE{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=hu,!n&&hu&&(this.index=(hu.scopes||(hu.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const i=hu;try{return hu=this,n()}finally{hu=i}}}on(){hu=this}off(){hu=this.parent}stop(n){if(this._active){let i,a;for(i=0,a=this.effects.length;i<a;i++)this.effects[i].stop();for(i=0,a=this.cleanups.length;i<a;i++)this.cleanups[i]();if(this.scopes)for(i=0,a=this.scopes.length;i<a;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!n){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0,this._active=!1}}}function YE(t,n=hu){n&&n.active&&n.effects.push(t)}function D2(){return hu}function XE(t){hu&&hu.cleanups.push(t)}let Qp;class Ux{constructor(n,i,a,h){this.fn=n,this.trigger=i,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,YE(this,h)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,up();for(let n=0;n<this._depsLength;n++){const i=this.deps[n];if(i.computed){if(i.computed.effect._dirtyLevel===2)return!0;if(KE(i.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),cp()}return this._dirtyLevel>=5}set dirty(n){this._dirtyLevel=n?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let n=Qf,i=Qp;try{return Qf=!0,Qp=this,this._runnings++,dA(this),this.fn()}finally{mA(this),this._runnings--,Qp=i,Qf=n}}stop(){this.active&&(dA(this),mA(this),this.onStop&&this.onStop(),this.active=!1)}}function KE(t){return t.value}function dA(t){t._trackId++,t._depsLength=0}function mA(t){if(t.deps.length>t._depsLength){for(let n=t._depsLength;n<t.deps.length;n++)R2(t.deps[n],t);t.deps.length=t._depsLength}}function R2(t,n){const i=t.get(n);i!==void 0&&n._trackId!==i&&(t.delete(n),t.size===0&&t.cleanup())}let Qf=!0,nx=0;const z2=[];function up(){z2.push(Qf),Qf=!1}function cp(){const t=z2.pop();Qf=t===void 0?!0:t}function jx(){nx++}function Hx(){for(nx--;!nx&&ix.length;)ix.shift()()}function O2(t,n,i){if(n.get(t)!==t._trackId){n.set(t,t._trackId);const a=t.deps[t._depsLength];a!==n?(a&&R2(a,t),t.deps[t._depsLength++]=n):t._depsLength++}}const ix=[];function B2(t,n,i){jx();for(const a of t.keys()){if(!t.computed&&a.computed&&t.get(a)===a._trackId&&a._runnings>0){a._dirtyLevel=2;continue}let h;a._dirtyLevel<n&&(h??(h=t.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a.computed&&a._dirtyLevel===2&&(a._shouldSchedule=!0),a._dirtyLevel=n),a._shouldSchedule&&(h??(h=t.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==3&&(a._shouldSchedule=!1,a.scheduler&&ix.push(a.scheduler)))}Hx()}const F2=(t,n)=>{const i=new Map;return i.cleanup=t,i.computed=n,i},rx=new WeakMap,$p=Symbol(""),ox=Symbol("");function Ul(t,n,i){if(Qf&&Qp){let a=rx.get(t);a||rx.set(t,a=new Map);let h=a.get(i);h||a.set(i,h=F2(()=>a.delete(i))),O2(Qp,h)}}function Yh(t,n,i,a,h,m){const o=rx.get(t);if(!o)return;let y=[];if(n==="clear")y=[...o.values()];else if(i==="length"&&Xn(t)){const x=Number(a);o.forEach((M,T)=>{(T==="length"||!Qh(T)&&T>=x)&&y.push(M)})}else switch(i!==void 0&&y.push(o.get(i)),n){case"add":Xn(t)?Nx(i)&&y.push(o.get("length")):(y.push(o.get($p)),dm(t)&&y.push(o.get(ox)));break;case"delete":Xn(t)||(y.push(o.get($p)),dm(t)&&y.push(o.get(ox)));break;case"set":dm(t)&&y.push(o.get($p));break}jx();for(const x of y)x&&B2(x,5);Hx()}const QE=Ox("__proto__,__v_isRef,__isVue"),N2=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Qh)),gA=$E();function $E(){const t={};return["includes","indexOf","lastIndexOf"].forEach(n=>{t[n]=function(...i){const a=Fr(this);for(let m=0,o=this.length;m<o;m++)Ul(a,"get",m+"");const h=a[n](...i);return h===-1||h===!1?a[n](...i.map(Fr)):h}}),["push","pop","shift","unshift","splice"].forEach(n=>{t[n]=function(...i){up(),jx();const a=Fr(this)[n].apply(this,i);return Hx(),cp(),a}}),t}function JE(t){Qh(t)||(t=String(t));const n=Fr(this);return Ul(n,"has",t),n.hasOwnProperty(t)}class V2{constructor(n=!1,i=!1){this._isReadonly=n,this._isShallow=i}get(n,i,a){const h=this._isReadonly,m=this._isShallow;if(i==="__v_isReactive")return!h;if(i==="__v_isReadonly")return h;if(i==="__v_isShallow")return m;if(i==="__v_raw")return a===(h?m?fS:G2:m?H2:j2).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(a)?n:void 0;const o=Xn(n);if(!h){if(o&&xr(gA,i))return Reflect.get(gA,i,a);if(i==="hasOwnProperty")return JE}const y=Reflect.get(n,i,a);return(Qh(i)?N2.has(i):QE(i))||(h||Ul(n,"get",i),m)?y:Ea(y)?o&&Nx(i)?y:y.value:ao(y)?h?X0(y):jl(y):y}}class U2 extends V2{constructor(n=!1){super(!1,n)}set(n,i,a,h){let m=n[i];if(!this._isShallow){const x=nv(m);if(!_0(a)&&!nv(a)&&(m=Fr(m),a=Fr(a)),!Xn(n)&&Ea(m)&&!Ea(a))return x?!1:(m.value=a,!0)}const o=Xn(n)&&Nx(i)?Number(i)<n.length:xr(n,i),y=Reflect.set(n,i,a,h);return n===Fr(h)&&(o?sh(a,m)&&Yh(n,"set",i,a):Yh(n,"add",i,a)),y}deleteProperty(n,i){const a=xr(n,i);n[i];const h=Reflect.deleteProperty(n,i);return h&&a&&Yh(n,"delete",i,void 0),h}has(n,i){const a=Reflect.has(n,i);return(!Qh(i)||!N2.has(i))&&Ul(n,"has",i),a}ownKeys(n){return Ul(n,"iterate",Xn(n)?"length":$p),Reflect.ownKeys(n)}}class tS extends V2{constructor(n=!1){super(!0,n)}set(n,i){return!0}deleteProperty(n,i){return!0}}const eS=new U2,nS=new tS,iS=new U2(!0);const Gx=t=>t,Y0=t=>Reflect.getPrototypeOf(t);function Uy(t,n,i=!1,a=!1){t=t.__v_raw;const h=Fr(t),m=Fr(n);i||(sh(n,m)&&Ul(h,"get",n),Ul(h,"get",m));const{has:o}=Y0(h),y=a?Gx:i?Zx:iv;if(o.call(h,n))return y(t.get(n));if(o.call(h,m))return y(t.get(m));t!==h&&t.get(n)}function jy(t,n=!1){const i=this.__v_raw,a=Fr(i),h=Fr(t);return n||(sh(t,h)&&Ul(a,"has",t),Ul(a,"has",h)),t===h?i.has(t):i.has(t)||i.has(h)}function Hy(t,n=!1){return t=t.__v_raw,!n&&Ul(Fr(t),"iterate",$p),Reflect.get(t,"size",t)}function vA(t){t=Fr(t);const n=Fr(this);return Y0(n).has.call(n,t)||(n.add(t),Yh(n,"add",t,t)),this}function yA(t,n){n=Fr(n);const i=Fr(this),{has:a,get:h}=Y0(i);let m=a.call(i,t);m||(t=Fr(t),m=a.call(i,t));const o=h.call(i,t);return i.set(t,n),m?sh(n,o)&&Yh(i,"set",t,n):Yh(i,"add",t,n),this}function _A(t){const n=Fr(this),{has:i,get:a}=Y0(n);let h=i.call(n,t);h||(t=Fr(t),h=i.call(n,t)),a&&a.call(n,t);const m=n.delete(t);return h&&Yh(n,"delete",t,void 0),m}function xA(){const t=Fr(this),n=t.size!==0,i=t.clear();return n&&Yh(t,"clear",void 0,void 0),i}function Gy(t,n){return function(a,h){const m=this,o=m.__v_raw,y=Fr(o),x=n?Gx:t?Zx:iv;return!t&&Ul(y,"iterate",$p),o.forEach((M,T)=>a.call(h,x(M),x(T),m))}}function qy(t,n,i){return function(...a){const h=this.__v_raw,m=Fr(h),o=dm(m),y=t==="entries"||t===Symbol.iterator&&o,x=t==="keys"&&o,M=h[t](...a),T=i?Gx:n?Zx:iv;return!n&&Ul(m,"iterate",x?ox:$p),{next(){const{value:P,done:L}=M.next();return L?{value:P,done:L}:{value:y?[T(P[0]),T(P[1])]:T(P),done:L}},[Symbol.iterator](){return this}}}}function Ff(t){return function(...n){return t==="delete"?!1:t==="clear"?void 0:this}}function rS(){const t={get(m){return Uy(this,m)},get size(){return Hy(this)},has:jy,add:vA,set:yA,delete:_A,clear:xA,forEach:Gy(!1,!1)},n={get(m){return Uy(this,m,!1,!0)},get size(){return Hy(this)},has:jy,add:vA,set:yA,delete:_A,clear:xA,forEach:Gy(!1,!0)},i={get(m){return Uy(this,m,!0)},get size(){return Hy(this,!0)},has(m){return jy.call(this,m,!0)},add:Ff("add"),set:Ff("set"),delete:Ff("delete"),clear:Ff("clear"),forEach:Gy(!0,!1)},a={get(m){return Uy(this,m,!0,!0)},get size(){return Hy(this,!0)},has(m){return jy.call(this,m,!0)},add:Ff("add"),set:Ff("set"),delete:Ff("delete"),clear:Ff("clear"),forEach:Gy(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{t[m]=qy(m,!1,!1),i[m]=qy(m,!0,!1),n[m]=qy(m,!1,!0),a[m]=qy(m,!0,!0)}),[t,i,n,a]}const[oS,aS,sS,lS]=rS();function qx(t,n){const i=n?t?lS:sS:t?aS:oS;return(a,h,m)=>h==="__v_isReactive"?!t:h==="__v_isReadonly"?t:h==="__v_raw"?a:Reflect.get(xr(i,h)&&h in a?i:a,h,m)}const uS={get:qx(!1,!1)},cS={get:qx(!1,!0)},hS={get:qx(!0,!1)};const j2=new WeakMap,H2=new WeakMap,G2=new WeakMap,fS=new WeakMap;function pS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dS(t){return t.__v_skip||!Object.isExtensible(t)?0:pS(OE(t))}function jl(t){return nv(t)?t:Wx(t,!1,eS,uS,j2)}function q2(t){return Wx(t,!1,iS,cS,H2)}function X0(t){return Wx(t,!0,nS,hS,G2)}function Wx(t,n,i,a,h){if(!ao(t)||t.__v_raw&&!(n&&t.__v_isReactive))return t;const m=h.get(t);if(m)return m;const o=dS(t);if(o===0)return t;const y=new Proxy(t,o===2?a:i);return h.set(t,y),y}function zg(t){return nv(t)?zg(t.__v_raw):!!(t&&t.__v_isReactive)}function nv(t){return!!(t&&t.__v_isReadonly)}function _0(t){return!!(t&&t.__v_isShallow)}function W2(t){return t?!!t.__v_raw:!1}function Fr(t){const n=t&&t.__v_raw;return n?Fr(n):t}function mS(t){return Object.isExtensible(t)&&T2(t,"__v_skip",!0),t}const iv=t=>ao(t)?jl(t):t,Zx=t=>ao(t)?X0(t):t;class Z2{constructor(n,i,a,h){this.getter=n,this._setter=i,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Ux(()=>n(this._value),()=>Og(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!h,this.__v_isReadonly=a}get value(){const n=Fr(this);return(!n._cacheable||n.effect.dirty)&&sh(n._value,n._value=n.effect.run())&&Og(n,5),Yx(n),n.effect._dirtyLevel>=2&&Og(n,3),n._value}set value(n){this._setter(n)}get _dirty(){return this.effect.dirty}set _dirty(n){this.effect.dirty=n}}function gS(t,n,i=!1){let a,h;const m=Ni(t);return m?(a=t,h=Qu):(a=t.get,h=t.set),new Z2(a,h,m||!h,i)}function Yx(t){var n;Qf&&Qp&&(t=Fr(t),O2(Qp,(n=t.dep)!=null?n:t.dep=F2(()=>t.dep=void 0,t instanceof Z2?t:void 0)))}function Og(t,n=5,i,a){t=Fr(t);const h=t.dep;h&&B2(h,n)}function Ea(t){return!!(t&&t.__v_isRef===!0)}function $e(t){return Y2(t,!1)}function xv(t){return Y2(t,!0)}function Y2(t,n){return Ea(t)?t:new vS(t,n)}class vS{constructor(n,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?n:Fr(n),this._value=i?n:iv(n)}get value(){return Yx(this),this._value}set value(n){const i=this.__v_isShallow||_0(n)||nv(n);n=i?n:Fr(n),sh(n,this._rawValue)&&(this._rawValue,this._rawValue=n,this._value=i?n:iv(n),Og(this,5))}}function X(t){return Ea(t)?t.value:t}const yS={get:(t,n,i)=>X(Reflect.get(t,n,i)),set:(t,n,i,a)=>{const h=t[n];return Ea(h)&&!Ea(i)?(h.value=i,!0):Reflect.set(t,n,i,a)}};function X2(t){return zg(t)?t:new Proxy(t,yS)}class _S{constructor(n){this.dep=void 0,this.__v_isRef=!0;const{get:i,set:a}=n(()=>Yx(this),()=>Og(this));this._get=i,this._set=a}get value(){return this._get()}set value(n){this._set(n)}}function xS(t){return new _S(t)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $f(t,n,i,a){try{return a?t(...a):t()}catch(h){K0(h,n,i)}}function $u(t,n,i,a){if(Ni(t)){const h=$f(t,n,i,a);return h&&M2(h)&&h.catch(m=>{K0(m,n,i)}),h}if(Xn(t)){const h=[];for(let m=0;m<t.length;m++)h.push($u(t[m],n,i,a));return h}}function K0(t,n,i,a=!0){const h=n?n.vnode:null;if(n){let m=n.parent;const o=n.proxy,y=`https://vuejs.org/error-reference/#runtime-${i}`;for(;m;){const M=m.ec;if(M){for(let T=0;T<M.length;T++)if(M[T](t,o,y)===!1)return}m=m.parent}const x=n.appContext.config.errorHandler;if(x){up(),$f(x,null,10,[t,o,y]),cp();return}}bS(t,i,h,a)}function bS(t,n,i,a=!0){console.error(t)}let rv=!1,ax=!1;const Us=[];let nh=0;const mm=[];let jf=null,Yp=0;const K2=Promise.resolve();let Xx=null;function gu(t){const n=Xx||K2;return t?n.then(this?t.bind(this):t):n}function AS(t){let n=nh+1,i=Us.length;for(;n<i;){const a=n+i>>>1,h=Us[a],m=ov(h);m<t||m===t&&h.pre?n=a+1:i=a}return n}function Kx(t){(!Us.length||!Us.includes(t,rv&&t.allowRecurse?nh+1:nh))&&(t.id==null?Us.push(t):Us.splice(AS(t.id),0,t),Q2())}function Q2(){!rv&&!ax&&(ax=!0,Xx=K2.then(J2))}function wS(t){const n=Us.indexOf(t);n>nh&&Us.splice(n,1)}function CS(t){Xn(t)?mm.push(...t):(!jf||!jf.includes(t,t.allowRecurse?Yp+1:Yp))&&mm.push(t),Q2()}function bA(t,n,i=rv?nh+1:0){for(;i<Us.length;i++){const a=Us[i];if(a&&a.pre){if(t&&a.id!==t.uid)continue;Us.splice(i,1),i--,a()}}}function $2(t){if(mm.length){const n=[...new Set(mm)].sort((i,a)=>ov(i)-ov(a));if(mm.length=0,jf){jf.push(...n);return}for(jf=n,Yp=0;Yp<jf.length;Yp++){const i=jf[Yp];i.active!==!1&&i()}jf=null,Yp=0}}const ov=t=>t.id==null?1/0:t.id,IS=(t,n)=>{const i=ov(t)-ov(n);if(i===0){if(t.pre&&!n.pre)return-1;if(n.pre&&!t.pre)return 1}return i};function J2(t){ax=!1,rv=!0,Us.sort(IS);try{for(nh=0;nh<Us.length;nh++){const n=Us[nh];n&&n.active!==!1&&$f(n,null,14)}}finally{nh=0,Us.length=0,$2(),rv=!1,Xx=null,(Us.length||mm.length)&&J2()}}function MS(t,n,...i){if(t.isUnmounted)return;const a=t.vnode.props||vo;let h=i;const m=n.startsWith("update:"),o=m&&n.slice(7);if(o&&o in a){const T=`${o==="modelValue"?"model":o}Modifiers`,{number:P,trim:L}=a[T]||vo;L&&(h=i.map(O=>Go(O)?O.trim():O)),P&&(h=i.map(y0))}let y,x=a[y=A1(n)]||a[y=A1(Sc(n))];!x&&m&&(x=a[y=A1(od(n))]),x&&$u(x,t,6,h);const M=a[y+"Once"];if(M){if(!t.emitted)t.emitted={};else if(t.emitted[y])return;t.emitted[y]=!0,$u(M,t,6,h)}}function tC(t,n,i=!1){const a=n.emitsCache,h=a.get(t);if(h!==void 0)return h;const m=t.emits;let o={},y=!1;if(!Ni(t)){const x=M=>{const T=tC(M,n,!0);T&&(y=!0,ca(o,T))};!i&&n.mixins.length&&n.mixins.forEach(x),t.extends&&x(t.extends),t.mixins&&t.mixins.forEach(x)}return!m&&!y?(ao(t)&&a.set(t,null),null):(Xn(m)?m.forEach(x=>o[x]=null):ca(o,m),ao(t)&&a.set(t,o),o)}function Q0(t,n){return!t||!q0(n)?!1:(n=n.slice(2).replace(/Once$/,""),xr(t,n[0].toLowerCase()+n.slice(1))||xr(t,od(n))||xr(t,n))}let is=null,$0=null;function x0(t){const n=is;return is=t,$0=t&&t.type.__scopeId||null,n}function fh(t){$0=t}function ph(){$0=null}function se(t,n=is,i){if(!n||t._n)return t;const a=(...h)=>{a._d&&OA(-1);const m=x0(n);let o;try{o=t(...h)}finally{x0(m),a._d&&OA(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function C1(t){const{type:n,vnode:i,proxy:a,withProxy:h,propsOptions:[m],slots:o,attrs:y,emit:x,render:M,renderCache:T,props:P,data:L,setupState:O,ctx:W,inheritAttrs:H}=t,nt=x0(t);let lt,K;try{if(i.shapeFlag&4){const yt=h||a,Rt=yt;lt=eh(M.call(Rt,yt,T,P,O,L,W)),K=y}else{const yt=n;lt=eh(yt.length>1?yt(P,{attrs:y,slots:o,emit:x}):yt(P,null)),K=n.props?y:ES(y)}}catch(yt){Ug.length=0,K0(yt,t,1),lt=jt(Vl)}let $=lt;if(K&&H!==!1){const yt=Object.keys(K),{shapeFlag:Rt}=$;yt.length&&Rt&7&&(m&&yt.some(Bx)&&(K=SS(K,m)),$=ip($,K,!1,!0))}return i.dirs&&($=ip($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(i.dirs):i.dirs),i.transition&&($.transition=i.transition),lt=$,x0(nt),lt}const ES=t=>{let n;for(const i in t)(i==="class"||i==="style"||q0(i))&&((n||(n={}))[i]=t[i]);return n},SS=(t,n)=>{const i={};for(const a in t)(!Bx(a)||!(a.slice(9)in n))&&(i[a]=t[a]);return i};function TS(t,n,i){const{props:a,children:h,component:m}=t,{props:o,children:y,patchFlag:x}=n,M=m.emitsOptions;if(n.dirs||n.transition)return!0;if(i&&x>=0){if(x&1024)return!0;if(x&16)return a?AA(a,o,M):!!o;if(x&8){const T=n.dynamicProps;for(let P=0;P<T.length;P++){const L=T[P];if(o[L]!==a[L]&&!Q0(M,L))return!0}}}else return(h||y)&&(!y||!y.$stable)?!0:a===o?!1:a?o?AA(a,o,M):!0:!!o;return!1}function AA(t,n,i){const a=Object.keys(n);if(a.length!==Object.keys(t).length)return!0;for(let h=0;h<a.length;h++){const m=a[h];if(n[m]!==t[m]&&!Q0(i,m))return!0}return!1}function PS({vnode:t,parent:n},i){for(;n;){const a=n.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=n.vnode).el=i,n=n.parent;else break}}const eC="components";function ih(t,n){return iC(eC,t,!0,n)||t}const nC=Symbol.for("v-ndc");function lh(t){return Go(t)?iC(eC,t,!1)||t:t||nC}function iC(t,n,i=!0,a=!1){const h=is||vs;if(h){const m=h.type;{const y=MT(m,!1);if(y&&(y===n||y===Sc(n)||y===Z0(Sc(n))))return m}const o=wA(h[t]||m[t],n)||wA(h.appContext[t],n);return!o&&a?m:o}}function wA(t,n){return t&&(t[n]||t[Sc(n)]||t[Z0(Sc(n))])}const LS=t=>t.__isSuspense;function kS(t,n){n&&n.pendingBranch?Xn(t)?n.effects.push(...t):n.effects.push(t):CS(t)}function J0(t,n,i=vs,a=!1){if(i){const h=i[t]||(i[t]=[]),m=n.__weh||(n.__weh=(...o)=>{up();const y=Av(i),x=$u(n,i,t,o);return y(),cp(),x});return a?h.unshift(m):h.push(m),m}}const nf=t=>(n,i=vs)=>{(!n_||t==="sp")&&J0(t,(...a)=>n(...a),i)},DS=nf("bm"),Hl=nf("m"),RS=nf("bu"),zS=nf("u"),bv=nf("bum"),ad=nf("um"),OS=nf("sp"),BS=nf("rtg"),FS=nf("rtc");function NS(t,n=vs){J0("ec",t,n)}function np(t,n){if(is===null)return t;const i=i_(is),a=t.dirs||(t.dirs=[]);for(let h=0;h<n.length;h++){let[m,o,y,x=vo]=n[h];m&&(Ni(m)&&(m={mounted:m,updated:m}),m.deep&&Zf(o),a.push({dir:m,instance:i,value:o,oldValue:void 0,arg:y,modifiers:x}))}return t}function Vp(t,n,i,a){const h=t.dirs,m=n&&n.dirs;for(let o=0;o<h.length;o++){const y=h[o];m&&(y.oldValue=m[o].value);let x=y.dir[a];x&&(up(),$u(x,i,8,[t.el,y,t,n]),cp())}}function ja(t,n,i,a){let h;const m=i;if(Xn(t)||Go(t)){h=new Array(t.length);for(let o=0,y=t.length;o<y;o++)h[o]=n(t[o],o,void 0,m)}else if(typeof t=="number"){h=new Array(t);for(let o=0;o<t;o++)h[o]=n(o+1,o,void 0,m)}else if(ao(t))if(t[Symbol.iterator])h=Array.from(t,(o,y)=>n(o,y,void 0,m));else{const o=Object.keys(t);h=new Array(o.length);for(let y=0,x=o.length;y<x;y++){const M=o[y];h[y]=n(t[M],M,y,m)}}else h=[];return h}/*! #__NO_SIDE_EFFECTS__ */function tr(t,n){return Ni(t)?ca({name:t.name},n,{setup:t}):t}const Bg=t=>!!t.type.__asyncLoader;function qn(t,n,i={},a,h){if(is.isCE||is.parent&&Bg(is.parent)&&is.parent.isCE)return n!=="default"&&(i.name=n),jt("slot",i,a&&a());let m=t[n];m&&m._c&&(m._d=!1),wt();const o=m&&rC(m(i)),y=Ve(Mi,{key:i.key||o&&o.key||`_${n}`},o||(a?a():[]),o&&t._===1?64:-2);return!h&&y.scopeId&&(y.slotScopeIds=[y.scopeId+"-s"]),m&&m._c&&(m._d=!0),y}function rC(t){return t.some(n=>C0(n)?!(n.type===Vl||n.type===Mi&&!rC(n.children)):!0)?t:null}const sx=t=>t?IC(t)?i_(t):sx(t.parent):null,Fg=ca(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sx(t.parent),$root:t=>sx(t.root),$emit:t=>t.emit,$options:t=>Qx(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Kx(t.update)}),$nextTick:t=>t.n||(t.n=gu.bind(t.proxy)),$watch:t=>lT.bind(t)}),I1=(t,n)=>t!==vo&&!t.__isScriptSetup&&xr(t,n),VS={get({_:t},n){if(n==="__v_skip")return!0;const{ctx:i,setupState:a,data:h,props:m,accessCache:o,type:y,appContext:x}=t;let M;if(n[0]!=="$"){const O=o[n];if(O!==void 0)switch(O){case 1:return a[n];case 2:return h[n];case 4:return i[n];case 3:return m[n]}else{if(I1(a,n))return o[n]=1,a[n];if(h!==vo&&xr(h,n))return o[n]=2,h[n];if((M=t.propsOptions[0])&&xr(M,n))return o[n]=3,m[n];if(i!==vo&&xr(i,n))return o[n]=4,i[n];lx&&(o[n]=0)}}const T=Fg[n];let P,L;if(T)return n==="$attrs"&&Ul(t.attrs,"get",""),T(t);if((P=y.__cssModules)&&(P=P[n]))return P;if(i!==vo&&xr(i,n))return o[n]=4,i[n];if(L=x.config.globalProperties,xr(L,n))return L[n]},set({_:t},n,i){const{data:a,setupState:h,ctx:m}=t;return I1(h,n)?(h[n]=i,!0):a!==vo&&xr(a,n)?(a[n]=i,!0):xr(t.props,n)||n[0]==="$"&&n.slice(1)in t?!1:(m[n]=i,!0)},has({_:{data:t,setupState:n,accessCache:i,ctx:a,appContext:h,propsOptions:m}},o){let y;return!!i[o]||t!==vo&&xr(t,o)||I1(n,o)||(y=m[0])&&xr(y,o)||xr(a,o)||xr(Fg,o)||xr(h.config.globalProperties,o)},defineProperty(t,n,i){return i.get!=null?t._.accessCache[n]=0:xr(i,"value")&&this.set(t,n,i.value,null),Reflect.defineProperty(t,n,i)}};function US(){return jS().slots}function jS(){const t=Lm();return t.setupContext||(t.setupContext=EC(t))}function b0(t){return Xn(t)?t.reduce((n,i)=>(n[i]=null,n),{}):t}function $h(t,n){return!t||!n?t||n:Xn(t)&&Xn(n)?t.concat(n):ca({},b0(t),b0(n))}let lx=!0;function HS(t){const n=Qx(t),i=t.proxy,a=t.ctx;lx=!1,n.beforeCreate&&CA(n.beforeCreate,t,"bc");const{data:h,computed:m,methods:o,watch:y,provide:x,inject:M,created:T,beforeMount:P,mounted:L,beforeUpdate:O,updated:W,activated:H,deactivated:nt,beforeDestroy:lt,beforeUnmount:K,destroyed:$,unmounted:yt,render:Rt,renderTracked:Ct,renderTriggered:Et,errorCaptured:Gt,serverPrefetch:kt,expose:Qt,inheritAttrs:Ut,components:Nt,directives:Bt,filters:de}=n;if(M&&GS(M,a,null),o)for(const He in o){const Ue=o[He];Ni(Ue)&&(a[He]=Ue.bind(i))}if(h){const He=h.call(i,i);ao(He)&&(t.data=jl(He))}if(lx=!0,m)for(const He in m){const Ue=m[He],Pi=Ni(Ue)?Ue.bind(i,i):Ni(Ue.get)?Ue.get.bind(i,i):Qu,ri=!Ni(Ue)&&Ni(Ue.set)?Ue.set.bind(i):Qu,Fn=rn({get:Pi,set:ri});Object.defineProperty(a,He,{enumerable:!0,configurable:!0,get:()=>Fn.value,set:mn=>Fn.value=mn})}if(y)for(const He in y)oC(y[He],a,i,He);if(x){const He=Ni(x)?x.call(i):x;Reflect.ownKeys(He).forEach(Ue=>{Jp(Ue,He[Ue])})}T&&CA(T,t,"c");function _e(He,Ue){Xn(Ue)?Ue.forEach(Pi=>He(Pi.bind(i))):Ue&&He(Ue.bind(i))}if(_e(DS,P),_e(Hl,L),_e(RS,O),_e(zS,W),_e(uT,H),_e(cT,nt),_e(NS,Gt),_e(FS,Ct),_e(BS,Et),_e(bv,K),_e(ad,yt),_e(OS,kt),Xn(Qt))if(Qt.length){const He=t.exposed||(t.exposed={});Qt.forEach(Ue=>{Object.defineProperty(He,Ue,{get:()=>i[Ue],set:Pi=>i[Ue]=Pi})})}else t.exposed||(t.exposed={});Rt&&t.render===Qu&&(t.render=Rt),Ut!=null&&(t.inheritAttrs=Ut),Nt&&(t.components=Nt),Bt&&(t.directives=Bt)}function GS(t,n,i=Qu){Xn(t)&&(t=ux(t));for(const a in t){const h=t[a];let m;ao(h)?"default"in h?m=xs(h.from||a,h.default,!0):m=xs(h.from||a):m=xs(h),Ea(m)?Object.defineProperty(n,a,{enumerable:!0,configurable:!0,get:()=>m.value,set:o=>m.value=o}):n[a]=m}}function CA(t,n,i){$u(Xn(t)?t.map(a=>a.bind(n.proxy)):t.bind(n.proxy),n,i)}function oC(t,n,i,a){const h=a.includes(".")?gC(i,a):()=>i[a];if(Go(t)){const m=n[t];Ni(m)&&hl(h,m)}else if(Ni(t))hl(h,t.bind(i));else if(ao(t))if(Xn(t))t.forEach(m=>oC(m,n,i,a));else{const m=Ni(t.handler)?t.handler.bind(i):n[t.handler];Ni(m)&&hl(h,m,t)}}function Qx(t){const n=t.type,{mixins:i,extends:a}=n,{mixins:h,optionsCache:m,config:{optionMergeStrategies:o}}=t.appContext,y=m.get(n);let x;return y?x=y:!h.length&&!i&&!a?x=n:(x={},h.length&&h.forEach(M=>A0(x,M,o,!0)),A0(x,n,o)),ao(n)&&m.set(n,x),x}function A0(t,n,i,a=!1){const{mixins:h,extends:m}=n;m&&A0(t,m,i,!0),h&&h.forEach(o=>A0(t,o,i,!0));for(const o in n)if(!(a&&o==="expose")){const y=qS[o]||i&&i[o];t[o]=y?y(t[o],n[o]):n[o]}return t}const qS={data:IA,props:MA,emits:MA,methods:Mg,computed:Mg,beforeCreate:sl,created:sl,beforeMount:sl,mounted:sl,beforeUpdate:sl,updated:sl,beforeDestroy:sl,beforeUnmount:sl,destroyed:sl,unmounted:sl,activated:sl,deactivated:sl,errorCaptured:sl,serverPrefetch:sl,components:Mg,directives:Mg,watch:ZS,provide:IA,inject:WS};function IA(t,n){return n?t?function(){return ca(Ni(t)?t.call(this,this):t,Ni(n)?n.call(this,this):n)}:n:t}function WS(t,n){return Mg(ux(t),ux(n))}function ux(t){if(Xn(t)){const n={};for(let i=0;i<t.length;i++)n[t[i]]=t[i];return n}return t}function sl(t,n){return t?[...new Set([].concat(t,n))]:n}function Mg(t,n){return t?ca(Object.create(null),t,n):n}function MA(t,n){return t?Xn(t)&&Xn(n)?[...new Set([...t,...n])]:ca(Object.create(null),b0(t),b0(n??{})):n}function ZS(t,n){if(!t)return n;if(!n)return t;const i=ca(Object.create(null),t);for(const a in n)i[a]=sl(t[a],n[a]);return i}function aC(){return{app:null,config:{isNativeTag:RE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let YS=0;function XS(t,n){return function(a,h=null){Ni(a)||(a=ca({},a)),h!=null&&!ao(h)&&(h=null);const m=aC(),o=new WeakSet;let y=!1;const x=m.app={_uid:YS++,_component:a,_props:h,_container:null,_context:m,_instance:null,version:ST,get config(){return m.config},set config(M){},use(M,...T){return o.has(M)||(M&&Ni(M.install)?(o.add(M),M.install(x,...T)):Ni(M)&&(o.add(M),M(x,...T))),x},mixin(M){return m.mixins.includes(M)||m.mixins.push(M),x},component(M,T){return T?(m.components[M]=T,x):m.components[M]},directive(M,T){return T?(m.directives[M]=T,x):m.directives[M]},mount(M,T,P){if(!y){const L=jt(a,h);return L.appContext=m,P===!0?P="svg":P===!1&&(P=void 0),T&&n?n(L,M):t(L,M,P),y=!0,x._container=M,M.__vue_app__=x,i_(L.component)}},unmount(){y&&(t(null,x._container),delete x._container.__vue_app__)},provide(M,T){return m.provides[M]=T,x},runWithContext(M){const T=Ng;Ng=x;try{return M()}finally{Ng=T}}};return x}}let Ng=null;function Jp(t,n){if(vs){let i=vs.provides;const a=vs.parent&&vs.parent.provides;a===i&&(i=vs.provides=Object.create(a)),i[t]=n}}function xs(t,n,i=!1){const a=vs||is;if(a||Ng){const h=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:Ng._context.provides;if(h&&t in h)return h[t];if(arguments.length>1)return i&&Ni(n)?n.call(a&&a.proxy):n}}const sC={},lC=()=>Object.create(sC),uC=t=>Object.getPrototypeOf(t)===sC;function KS(t,n,i,a=!1){const h={},m=lC();t.propsDefaults=Object.create(null),cC(t,n,h,m);for(const o in t.propsOptions[0])o in h||(h[o]=void 0);i?t.props=a?h:q2(h):t.type.props?t.props=h:t.props=m,t.attrs=m}function QS(t,n,i,a){const{props:h,attrs:m,vnode:{patchFlag:o}}=t,y=Fr(h),[x]=t.propsOptions;let M=!1;if((a||o>0)&&!(o&16)){if(o&8){const T=t.vnode.dynamicProps;for(let P=0;P<T.length;P++){let L=T[P];if(Q0(t.emitsOptions,L))continue;const O=n[L];if(x)if(xr(m,L))O!==m[L]&&(m[L]=O,M=!0);else{const W=Sc(L);h[W]=cx(x,y,W,O,t,!1)}else O!==m[L]&&(m[L]=O,M=!0)}}}else{cC(t,n,h,m)&&(M=!0);let T;for(const P in y)(!n||!xr(n,P)&&((T=od(P))===P||!xr(n,T)))&&(x?i&&(i[P]!==void 0||i[T]!==void 0)&&(h[P]=cx(x,y,P,void 0,t,!0)):delete h[P]);if(m!==y)for(const P in m)(!n||!xr(n,P))&&(delete m[P],M=!0)}M&&Yh(t.attrs,"set","")}function cC(t,n,i,a){const[h,m]=t.propsOptions;let o=!1,y;if(n)for(let x in n){if(Rg(x))continue;const M=n[x];let T;h&&xr(h,T=Sc(x))?!m||!m.includes(T)?i[T]=M:(y||(y={}))[T]=M:Q0(t.emitsOptions,x)||(!(x in a)||M!==a[x])&&(a[x]=M,o=!0)}if(m){const x=Fr(i),M=y||vo;for(let T=0;T<m.length;T++){const P=m[T];i[P]=cx(h,x,P,M[P],t,!xr(M,P))}}return o}function cx(t,n,i,a,h,m){const o=t[i];if(o!=null){const y=xr(o,"default");if(y&&a===void 0){const x=o.default;if(o.type!==Function&&!o.skipFactory&&Ni(x)){const{propsDefaults:M}=h;if(i in M)a=M[i];else{const T=Av(h);a=M[i]=x.call(null,n),T()}}else a=x}o[0]&&(m&&!y?a=!1:o[1]&&(a===""||a===od(i))&&(a=!0))}return a}function hC(t,n,i=!1){const a=n.propsCache,h=a.get(t);if(h)return h;const m=t.props,o={},y=[];let x=!1;if(!Ni(t)){const T=P=>{x=!0;const[L,O]=hC(P,n,!0);ca(o,L),O&&y.push(...O)};!i&&n.mixins.length&&n.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!m&&!x)return ao(t)&&a.set(t,pm),pm;if(Xn(m))for(let T=0;T<m.length;T++){const P=Sc(m[T]);EA(P)&&(o[P]=vo)}else if(m)for(const T in m){const P=Sc(T);if(EA(P)){const L=m[T],O=o[P]=Xn(L)||Ni(L)?{type:L}:ca({},L);if(O){const W=PA(Boolean,O.type),H=PA(String,O.type);O[0]=W>-1,O[1]=H<0||W<H,(W>-1||xr(O,"default"))&&y.push(P)}}}const M=[o,y];return ao(t)&&a.set(t,M),M}function EA(t){return t[0]!=="$"&&!Rg(t)}function SA(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function TA(t,n){return SA(t)===SA(n)}function PA(t,n){return Xn(n)?n.findIndex(i=>TA(i,t)):Ni(n)&&TA(n,t)?0:-1}const fC=t=>t[0]==="_"||t==="$stable",$x=t=>Xn(t)?t.map(eh):[eh(t)],$S=(t,n,i)=>{if(n._n)return n;const a=se((...h)=>$x(n(...h)),i);return a._c=!1,a},pC=(t,n,i)=>{const a=t._ctx;for(const h in t){if(fC(h))continue;const m=t[h];if(Ni(m))n[h]=$S(h,m,a);else if(m!=null){const o=$x(m);n[h]=()=>o}}},dC=(t,n)=>{const i=$x(n);t.slots.default=()=>i},JS=(t,n)=>{const i=t.slots=lC();if(t.vnode.shapeFlag&32){const a=n._;a?(ca(i,n),T2(i,"_",a,!0)):pC(n,i)}else n&&dC(t,n)},tT=(t,n,i)=>{const{vnode:a,slots:h}=t;let m=!0,o=vo;if(a.shapeFlag&32){const y=n._;y?i&&y===1?m=!1:(ca(h,n),!i&&y===1&&delete h._):(m=!n.$stable,pC(n,h)),o=n}else n&&(dC(t,n),o={default:1});if(m)for(const y in h)!fC(y)&&o[y]==null&&delete h[y]};function hx(t,n,i,a,h=!1){if(Xn(t)){t.forEach((L,O)=>hx(L,n&&(Xn(n)?n[O]:n),i,a,h));return}if(Bg(a)&&!h)return;const m=a.shapeFlag&4?i_(a.component):a.el,o=h?null:m,{i:y,r:x}=t,M=n&&n.r,T=y.refs===vo?y.refs={}:y.refs,P=y.setupState;if(M!=null&&M!==x&&(Go(M)?(T[M]=null,xr(P,M)&&(P[M]=null)):Ea(M)&&(M.value=null)),Ni(x))$f(x,y,12,[o,T]);else{const L=Go(x),O=Ea(x);if(L||O){const W=()=>{if(t.f){const H=L?xr(P,x)?P[x]:T[x]:x.value;h?Xn(H)&&Fx(H,m):Xn(H)?H.includes(m)||H.push(m):L?(T[x]=[m],xr(P,x)&&(P[x]=T[x])):(x.value=[m],t.k&&(T[t.k]=x.value))}else L?(T[x]=o,xr(P,x)&&(P[x]=o)):O&&(x.value=o,t.k&&(T[t.k]=o))};o?(W.id=-1,Nl(W,i)):W()}}}const Nl=kS;function eT(t){return nT(t)}function nT(t,n){const i=P2();i.__VUE__=!0;const{insert:a,remove:h,patchProp:m,createElement:o,createText:y,createComment:x,setText:M,setElementText:T,parentNode:P,nextSibling:L,setScopeId:O=Qu,insertStaticContent:W}=t,H=(ut,xt,$t,ae=null,pe=null,Oe=null,ln=void 0,we=null,De=!!xt.dynamicChildren)=>{if(ut===xt)return;ut&&!Xp(ut,xt)&&(ae=le(ut),mn(ut,pe,Oe,!0),ut=null),xt.patchFlag===-2&&(De=!1,xt.dynamicChildren=null);const{type:Se,ref:tn,shapeFlag:wn}=xt;switch(Se){case e_:nt(ut,xt,$t,ae);break;case Vl:lt(ut,xt,$t,ae);break;case i0:ut==null&&K(xt,$t,ae,ln);break;case Mi:Nt(ut,xt,$t,ae,pe,Oe,ln,we,De);break;default:wn&1?Rt(ut,xt,$t,ae,pe,Oe,ln,we,De):wn&6?Bt(ut,xt,$t,ae,pe,Oe,ln,we,De):(wn&64||wn&128)&&Se.process(ut,xt,$t,ae,pe,Oe,ln,we,De,Te)}tn!=null&&pe&&hx(tn,ut&&ut.ref,Oe,xt||ut,!xt)},nt=(ut,xt,$t,ae)=>{if(ut==null)a(xt.el=y(xt.children),$t,ae);else{const pe=xt.el=ut.el;xt.children!==ut.children&&M(pe,xt.children)}},lt=(ut,xt,$t,ae)=>{ut==null?a(xt.el=x(xt.children||""),$t,ae):xt.el=ut.el},K=(ut,xt,$t,ae)=>{[ut.el,ut.anchor]=W(ut.children,xt,$t,ae,ut.el,ut.anchor)},$=({el:ut,anchor:xt},$t,ae)=>{let pe;for(;ut&&ut!==xt;)pe=L(ut),a(ut,$t,ae),ut=pe;a(xt,$t,ae)},yt=({el:ut,anchor:xt})=>{let $t;for(;ut&&ut!==xt;)$t=L(ut),h(ut),ut=$t;h(xt)},Rt=(ut,xt,$t,ae,pe,Oe,ln,we,De)=>{xt.type==="svg"?ln="svg":xt.type==="math"&&(ln="mathml"),ut==null?Ct(xt,$t,ae,pe,Oe,ln,we,De):kt(ut,xt,pe,Oe,ln,we,De)},Ct=(ut,xt,$t,ae,pe,Oe,ln,we)=>{let De,Se;const{props:tn,shapeFlag:wn,transition:Cn,dirs:Pn}=ut;if(De=ut.el=o(ut.type,Oe,tn&&tn.is,tn),wn&8?T(De,ut.children):wn&16&&Gt(ut.children,De,null,ae,pe,M1(ut,Oe),ln,we),Pn&&Vp(ut,null,ae,"created"),Et(De,ut,ut.scopeId,ln,ae),tn){for(const Di in tn)Di!=="value"&&!Rg(Di)&&m(De,Di,null,tn[Di],Oe,ut.children,ae,pe,bi);"value"in tn&&m(De,"value",null,tn.value,Oe),(Se=tn.onVnodeBeforeMount)&&$c(Se,ae,ut)}Pn&&Vp(ut,null,ae,"beforeMount");const Qn=iT(pe,Cn);Qn&&Cn.beforeEnter(De),a(De,xt,$t),((Se=tn&&tn.onVnodeMounted)||Qn||Pn)&&Nl(()=>{Se&&$c(Se,ae,ut),Qn&&Cn.enter(De),Pn&&Vp(ut,null,ae,"mounted")},pe)},Et=(ut,xt,$t,ae,pe)=>{if($t&&O(ut,$t),ae)for(let Oe=0;Oe<ae.length;Oe++)O(ut,ae[Oe]);if(pe){let Oe=pe.subTree;if(xt===Oe){const ln=pe.vnode;Et(ut,ln,ln.scopeId,ln.slotScopeIds,pe.parent)}}},Gt=(ut,xt,$t,ae,pe,Oe,ln,we,De=0)=>{for(let Se=De;Se<ut.length;Se++){const tn=ut[Se]=we?Gf(ut[Se]):eh(ut[Se]);H(null,tn,xt,$t,ae,pe,Oe,ln,we)}},kt=(ut,xt,$t,ae,pe,Oe,ln)=>{const we=xt.el=ut.el;let{patchFlag:De,dynamicChildren:Se,dirs:tn}=xt;De|=ut.patchFlag&16;const wn=ut.props||vo,Cn=xt.props||vo;let Pn;if($t&&Up($t,!1),(Pn=Cn.onVnodeBeforeUpdate)&&$c(Pn,$t,xt,ut),tn&&Vp(xt,ut,$t,"beforeUpdate"),$t&&Up($t,!0),Se?Qt(ut.dynamicChildren,Se,we,$t,ae,M1(xt,pe),Oe):ln||Ue(ut,xt,we,null,$t,ae,M1(xt,pe),Oe,!1),De>0){if(De&16)Ut(we,xt,wn,Cn,$t,ae,pe);else if(De&2&&wn.class!==Cn.class&&m(we,"class",null,Cn.class,pe),De&4&&m(we,"style",wn.style,Cn.style,pe),De&8){const Qn=xt.dynamicProps;for(let Di=0;Di<Qn.length;Di++){const wi=Qn[Di],rr=wn[wi],Gr=Cn[wi];(Gr!==rr||wi==="value")&&m(we,wi,rr,Gr,pe,ut.children,$t,ae,bi)}}De&1&&ut.children!==xt.children&&T(we,xt.children)}else!ln&&Se==null&&Ut(we,xt,wn,Cn,$t,ae,pe);((Pn=Cn.onVnodeUpdated)||tn)&&Nl(()=>{Pn&&$c(Pn,$t,xt,ut),tn&&Vp(xt,ut,$t,"updated")},ae)},Qt=(ut,xt,$t,ae,pe,Oe,ln)=>{for(let we=0;we<xt.length;we++){const De=ut[we],Se=xt[we],tn=De.el&&(De.type===Mi||!Xp(De,Se)||De.shapeFlag&70)?P(De.el):$t;H(De,Se,tn,null,ae,pe,Oe,ln,!0)}},Ut=(ut,xt,$t,ae,pe,Oe,ln)=>{if($t!==ae){if($t!==vo)for(const we in $t)!Rg(we)&&!(we in ae)&&m(ut,we,$t[we],null,ln,xt.children,pe,Oe,bi);for(const we in ae){if(Rg(we))continue;const De=ae[we],Se=$t[we];De!==Se&&we!=="value"&&m(ut,we,Se,De,ln,xt.children,pe,Oe,bi)}"value"in ae&&m(ut,"value",$t.value,ae.value,ln)}},Nt=(ut,xt,$t,ae,pe,Oe,ln,we,De)=>{const Se=xt.el=ut?ut.el:y(""),tn=xt.anchor=ut?ut.anchor:y("");let{patchFlag:wn,dynamicChildren:Cn,slotScopeIds:Pn}=xt;Pn&&(we=we?we.concat(Pn):Pn),ut==null?(a(Se,$t,ae),a(tn,$t,ae),Gt(xt.children||[],$t,tn,pe,Oe,ln,we,De)):wn>0&&wn&64&&Cn&&ut.dynamicChildren?(Qt(ut.dynamicChildren,Cn,$t,pe,Oe,ln,we),(xt.key!=null||pe&&xt===pe.subTree)&&Jx(ut,xt,!0)):Ue(ut,xt,$t,tn,pe,Oe,ln,we,De)},Bt=(ut,xt,$t,ae,pe,Oe,ln,we,De)=>{xt.slotScopeIds=we,ut==null?xt.shapeFlag&512?pe.ctx.activate(xt,$t,ae,ln,De):de(xt,$t,ae,pe,Oe,ln,De):bn(ut,xt,De)},de=(ut,xt,$t,ae,pe,Oe,ln)=>{const we=ut.component=AT(ut,ae,pe);if(t_(ut)&&(we.ctx.renderer=Te),wT(we),we.asyncDep){if(pe&&pe.registerDep(we,_e,ln),!ut.el){const De=we.subTree=jt(Vl);lt(null,De,xt,$t)}}else _e(we,ut,xt,$t,pe,Oe,ln)},bn=(ut,xt,$t)=>{const ae=xt.component=ut.component;if(TS(ut,xt,$t))if(ae.asyncDep&&!ae.asyncResolved){He(ae,xt,$t);return}else ae.next=xt,wS(ae.update),ae.effect.dirty=!0,ae.update();else xt.el=ut.el,ae.vnode=xt},_e=(ut,xt,$t,ae,pe,Oe,ln)=>{const we=()=>{if(ut.isMounted){let{next:tn,bu:wn,u:Cn,parent:Pn,vnode:Qn}=ut;{const qo=mC(ut);if(qo){tn&&(tn.el=Qn.el,He(ut,tn,ln)),qo.asyncDep.then(()=>{ut.isUnmounted||we()});return}}let Di=tn,wi;Up(ut,!1),tn?(tn.el=Qn.el,He(ut,tn,ln)):tn=Qn,wn&&n0(wn),(wi=tn.props&&tn.props.onVnodeBeforeUpdate)&&$c(wi,Pn,tn,Qn),Up(ut,!0);const rr=C1(ut),Gr=ut.subTree;ut.subTree=rr,H(Gr,rr,P(Gr.el),le(Gr),ut,pe,Oe),tn.el=rr.el,Di===null&&PS(ut,rr.el),Cn&&Nl(Cn,pe),(wi=tn.props&&tn.props.onVnodeUpdated)&&Nl(()=>$c(wi,Pn,tn,Qn),pe)}else{let tn;const{el:wn,props:Cn}=xt,{bm:Pn,m:Qn,parent:Di}=ut,wi=Bg(xt);if(Up(ut,!1),Pn&&n0(Pn),!wi&&(tn=Cn&&Cn.onVnodeBeforeMount)&&$c(tn,Di,xt),Up(ut,!0),wn&&ki){const rr=()=>{ut.subTree=C1(ut),ki(wn,ut.subTree,ut,pe,null)};wi?xt.type.__asyncLoader().then(()=>!ut.isUnmounted&&rr()):rr()}else{const rr=ut.subTree=C1(ut);H(null,rr,$t,ae,ut,pe,Oe),xt.el=rr.el}if(Qn&&Nl(Qn,pe),!wi&&(tn=Cn&&Cn.onVnodeMounted)){const rr=xt;Nl(()=>$c(tn,Di,rr),pe)}(xt.shapeFlag&256||Di&&Bg(Di.vnode)&&Di.vnode.shapeFlag&256)&&ut.a&&Nl(ut.a,pe),ut.isMounted=!0,xt=$t=ae=null}},De=ut.effect=new Ux(we,Qu,()=>Kx(Se),ut.scope),Se=ut.update=()=>{De.dirty&&De.run()};Se.id=ut.uid,Up(ut,!0),Se()},He=(ut,xt,$t)=>{xt.component=ut;const ae=ut.vnode.props;ut.vnode=xt,ut.next=null,QS(ut,xt.props,ae,$t),tT(ut,xt.children,$t),up(),bA(ut),cp()},Ue=(ut,xt,$t,ae,pe,Oe,ln,we,De=!1)=>{const Se=ut&&ut.children,tn=ut?ut.shapeFlag:0,wn=xt.children,{patchFlag:Cn,shapeFlag:Pn}=xt;if(Cn>0){if(Cn&128){ri(Se,wn,$t,ae,pe,Oe,ln,we,De);return}else if(Cn&256){Pi(Se,wn,$t,ae,pe,Oe,ln,we,De);return}}Pn&8?(tn&16&&bi(Se,pe,Oe),wn!==Se&&T($t,wn)):tn&16?Pn&16?ri(Se,wn,$t,ae,pe,Oe,ln,we,De):bi(Se,pe,Oe,!0):(tn&8&&T($t,""),Pn&16&&Gt(wn,$t,ae,pe,Oe,ln,we,De))},Pi=(ut,xt,$t,ae,pe,Oe,ln,we,De)=>{ut=ut||pm,xt=xt||pm;const Se=ut.length,tn=xt.length,wn=Math.min(Se,tn);let Cn;for(Cn=0;Cn<wn;Cn++){const Pn=xt[Cn]=De?Gf(xt[Cn]):eh(xt[Cn]);H(ut[Cn],Pn,$t,null,pe,Oe,ln,we,De)}Se>tn?bi(ut,pe,Oe,!0,!1,wn):Gt(xt,$t,ae,pe,Oe,ln,we,De,wn)},ri=(ut,xt,$t,ae,pe,Oe,ln,we,De)=>{let Se=0;const tn=xt.length;let wn=ut.length-1,Cn=tn-1;for(;Se<=wn&&Se<=Cn;){const Pn=ut[Se],Qn=xt[Se]=De?Gf(xt[Se]):eh(xt[Se]);if(Xp(Pn,Qn))H(Pn,Qn,$t,null,pe,Oe,ln,we,De);else break;Se++}for(;Se<=wn&&Se<=Cn;){const Pn=ut[wn],Qn=xt[Cn]=De?Gf(xt[Cn]):eh(xt[Cn]);if(Xp(Pn,Qn))H(Pn,Qn,$t,null,pe,Oe,ln,we,De);else break;wn--,Cn--}if(Se>wn){if(Se<=Cn){const Pn=Cn+1,Qn=Pn<tn?xt[Pn].el:ae;for(;Se<=Cn;)H(null,xt[Se]=De?Gf(xt[Se]):eh(xt[Se]),$t,Qn,pe,Oe,ln,we,De),Se++}}else if(Se>Cn)for(;Se<=wn;)mn(ut[Se],pe,Oe,!0),Se++;else{const Pn=Se,Qn=Se,Di=new Map;for(Se=Qn;Se<=Cn;Se++){const Ar=xt[Se]=De?Gf(xt[Se]):eh(xt[Se]);Ar.key!=null&&Di.set(Ar.key,Se)}let wi,rr=0;const Gr=Cn-Qn+1;let qo=!1,pa=0;const Pa=new Array(Gr);for(Se=0;Se<Gr;Se++)Pa[Se]=0;for(Se=Pn;Se<=wn;Se++){const Ar=ut[Se];if(rr>=Gr){mn(Ar,pe,Oe,!0);continue}let Mo;if(Ar.key!=null)Mo=Di.get(Ar.key);else for(wi=Qn;wi<=Cn;wi++)if(Pa[wi-Qn]===0&&Xp(Ar,xt[wi])){Mo=wi;break}Mo===void 0?mn(Ar,pe,Oe,!0):(Pa[Mo-Qn]=Se+1,Mo>=pa?pa=Mo:qo=!0,H(Ar,xt[Mo],$t,null,pe,Oe,ln,we,De),rr++)}const Ga=qo?rT(Pa):pm;for(wi=Ga.length-1,Se=Gr-1;Se>=0;Se--){const Ar=Qn+Se,Mo=xt[Ar],Hs=Ar+1<tn?xt[Ar+1].el:ae;Pa[Se]===0?H(null,Mo,$t,Hs,pe,Oe,ln,we,De):qo&&(wi<0||Se!==Ga[wi]?Fn(Mo,$t,Hs,2):wi--)}}},Fn=(ut,xt,$t,ae,pe=null)=>{const{el:Oe,type:ln,transition:we,children:De,shapeFlag:Se}=ut;if(Se&6){Fn(ut.component.subTree,xt,$t,ae);return}if(Se&128){ut.suspense.move(xt,$t,ae);return}if(Se&64){ln.move(ut,xt,$t,Te);return}if(ln===Mi){a(Oe,xt,$t);for(let wn=0;wn<De.length;wn++)Fn(De[wn],xt,$t,ae);a(ut.anchor,xt,$t);return}if(ln===i0){$(ut,xt,$t);return}if(ae!==2&&Se&1&&we)if(ae===0)we.beforeEnter(Oe),a(Oe,xt,$t),Nl(()=>we.enter(Oe),pe);else{const{leave:wn,delayLeave:Cn,afterLeave:Pn}=we,Qn=()=>a(Oe,xt,$t),Di=()=>{wn(Oe,()=>{Qn(),Pn&&Pn()})};Cn?Cn(Oe,Qn,Di):Di()}else a(Oe,xt,$t)},mn=(ut,xt,$t,ae=!1,pe=!1)=>{const{type:Oe,props:ln,ref:we,children:De,dynamicChildren:Se,shapeFlag:tn,patchFlag:wn,dirs:Cn,memoIndex:Pn}=ut;if(we!=null&&hx(we,null,$t,ut,!0),Pn!=null&&(xt.renderCache[Pn]=void 0),tn&256){xt.ctx.deactivate(ut);return}const Qn=tn&1&&Cn,Di=!Bg(ut);let wi;if(Di&&(wi=ln&&ln.onVnodeBeforeUnmount)&&$c(wi,xt,ut),tn&6)ui(ut.component,$t,ae);else{if(tn&128){ut.suspense.unmount($t,ae);return}Qn&&Vp(ut,null,xt,"beforeUnmount"),tn&64?ut.type.remove(ut,xt,$t,pe,Te,ae):Se&&(Oe!==Mi||wn>0&&wn&64)?bi(Se,xt,$t,!1,!0):(Oe===Mi&&wn&384||!pe&&tn&16)&&bi(De,xt,$t),ae&&Kn(ut)}(Di&&(wi=ln&&ln.onVnodeUnmounted)||Qn)&&Nl(()=>{wi&&$c(wi,xt,ut),Qn&&Vp(ut,null,xt,"unmounted")},$t)},Kn=ut=>{const{type:xt,el:$t,anchor:ae,transition:pe}=ut;if(xt===Mi){Li($t,ae);return}if(xt===i0){yt(ut);return}const Oe=()=>{h($t),pe&&!pe.persisted&&pe.afterLeave&&pe.afterLeave()};if(ut.shapeFlag&1&&pe&&!pe.persisted){const{leave:ln,delayLeave:we}=pe,De=()=>ln($t,Oe);we?we(ut.el,Oe,De):De()}else Oe()},Li=(ut,xt)=>{let $t;for(;ut!==xt;)$t=L(ut),h(ut),ut=$t;h(xt)},ui=(ut,xt,$t)=>{const{bum:ae,scope:pe,update:Oe,subTree:ln,um:we,m:De,a:Se}=ut;LA(De),LA(Se),ae&&n0(ae),pe.stop(),Oe&&(Oe.active=!1,mn(ln,ut,xt,$t)),we&&Nl(we,xt),Nl(()=>{ut.isUnmounted=!0},xt),xt&&xt.pendingBranch&&!xt.isUnmounted&&ut.asyncDep&&!ut.asyncResolved&&ut.suspenseId===xt.pendingId&&(xt.deps--,xt.deps===0&&xt.resolve())},bi=(ut,xt,$t,ae=!1,pe=!1,Oe=0)=>{for(let ln=Oe;ln<ut.length;ln++)mn(ut[ln],xt,$t,ae,pe)},le=ut=>ut.shapeFlag&6?le(ut.component.subTree):ut.shapeFlag&128?ut.suspense.next():L(ut.anchor||ut.el);let Ke=!1;const me=(ut,xt,$t)=>{ut==null?xt._vnode&&mn(xt._vnode,null,null,!0):H(xt._vnode||null,ut,xt,null,null,null,$t),Ke||(Ke=!0,bA(),$2(),Ke=!1),xt._vnode=ut},Te={p:H,um:mn,m:Fn,r:Kn,mt:de,mc:Gt,pc:Ue,pbc:Qt,n:le,o:t};let Ai,ki;return{render:me,hydrate:Ai,createApp:XS(me,Ai)}}function M1({type:t,props:n},i){return i==="svg"&&t==="foreignObject"||i==="mathml"&&t==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:i}function Up({effect:t,update:n},i){t.allowRecurse=n.allowRecurse=i}function iT(t,n){return(!t||t&&!t.pendingBranch)&&n&&!n.persisted}function Jx(t,n,i=!1){const a=t.children,h=n.children;if(Xn(a)&&Xn(h))for(let m=0;m<a.length;m++){const o=a[m];let y=h[m];y.shapeFlag&1&&!y.dynamicChildren&&((y.patchFlag<=0||y.patchFlag===32)&&(y=h[m]=Gf(h[m]),y.el=o.el),!i&&y.patchFlag!==-2&&Jx(o,y)),y.type===e_&&(y.el=o.el)}}function rT(t){const n=t.slice(),i=[0];let a,h,m,o,y;const x=t.length;for(a=0;a<x;a++){const M=t[a];if(M!==0){if(h=i[i.length-1],t[h]<M){n[a]=h,i.push(a);continue}for(m=0,o=i.length-1;m<o;)y=m+o>>1,t[i[y]]<M?m=y+1:o=y;M<t[i[m]]&&(m>0&&(n[a]=i[m-1]),i[m]=a)}}for(m=i.length,o=i[m-1];m-- >0;)i[m]=o,o=n[o];return i}function mC(t){const n=t.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:mC(n)}function LA(t){if(t)for(let n=0;n<t.length;n++)t[n].active=!1}const oT=Symbol.for("v-scx"),aT=()=>xs(oT);function sT(t,n){return tb(t,null,{flush:"sync"})}const Wy={};function hl(t,n,i){return tb(t,n,i)}function tb(t,n,{immediate:i,deep:a,flush:h,once:m,onTrack:o,onTrigger:y}=vo){if(n&&m){const Ct=n;n=(...Et)=>{Ct(...Et),Rt()}}const x=vs,M=Ct=>a===!0?Ct:Zf(Ct,a===!1?1:void 0);let T,P=!1,L=!1;if(Ea(t)?(T=()=>t.value,P=_0(t)):zg(t)?(T=()=>M(t),P=!0):Xn(t)?(L=!0,P=t.some(Ct=>zg(Ct)||_0(Ct)),T=()=>t.map(Ct=>{if(Ea(Ct))return Ct.value;if(zg(Ct))return M(Ct);if(Ni(Ct))return $f(Ct,x,2)})):Ni(t)?n?T=()=>$f(t,x,2):T=()=>(O&&O(),$u(t,x,3,[W])):T=Qu,n&&a){const Ct=T;T=()=>Zf(Ct())}let O,W=Ct=>{O=$.onStop=()=>{$f(Ct,x,4),O=$.onStop=void 0}},H;if(n_)if(W=Qu,n?i&&$u(n,x,3,[T(),L?[]:void 0,W]):T(),h==="sync"){const Ct=aT();H=Ct.__watcherHandles||(Ct.__watcherHandles=[])}else return Qu;let nt=L?new Array(t.length).fill(Wy):Wy;const lt=()=>{if(!(!$.active||!$.dirty))if(n){const Ct=$.run();(a||P||(L?Ct.some((Et,Gt)=>sh(Et,nt[Gt])):sh(Ct,nt)))&&(O&&O(),$u(n,x,3,[Ct,nt===Wy?void 0:L&&nt[0]===Wy?[]:nt,W]),nt=Ct)}else $.run()};lt.allowRecurse=!!n;let K;h==="sync"?K=lt:h==="post"?K=()=>Nl(lt,x&&x.suspense):(lt.pre=!0,x&&(lt.id=x.uid),K=()=>Kx(lt));const $=new Ux(T,Qu,K),yt=D2(),Rt=()=>{$.stop(),yt&&Fx(yt.effects,$)};return n?i?lt():nt=$.run():h==="post"?Nl($.run.bind($),x&&x.suspense):$.run(),H&&H.push(Rt),Rt}function lT(t,n,i){const a=this.proxy,h=Go(t)?t.includes(".")?gC(a,t):()=>a[t]:t.bind(a,a);let m;Ni(n)?m=n:(m=n.handler,i=n);const o=Av(this),y=tb(h,m.bind(a),i);return o(),y}function gC(t,n){const i=n.split(".");return()=>{let a=t;for(let h=0;h<i.length&&a;h++)a=a[i[h]];return a}}function Zf(t,n=1/0,i){if(n<=0||!ao(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),n--,Ea(t))Zf(t.value,n,i);else if(Xn(t))for(let a=0;a<t.length;a++)Zf(t[a],n,i);else if(Pm(t)||dm(t))t.forEach(a=>{Zf(a,n,i)});else if(S2(t)){for(const a in t)Zf(t[a],n,i);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&Zf(t[a],n,i)}return t}const t_=t=>t.type.__isKeepAlive;function uT(t,n){vC(t,"a",n)}function cT(t,n){vC(t,"da",n)}function vC(t,n,i=vs){const a=t.__wdc||(t.__wdc=()=>{let h=i;for(;h;){if(h.isDeactivated)return;h=h.parent}return t()});if(J0(n,a,i),i){let h=i.parent;for(;h&&h.parent;)t_(h.parent.vnode)&&hT(a,n,i,h),h=h.parent}}function hT(t,n,i,a){const h=J0(n,t,a,!0);ad(()=>{Fx(a[n],h)},i)}const Hf=Symbol("_leaveCb"),Zy=Symbol("_enterCb");function fT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Hl(()=>{t.isMounted=!0}),bv(()=>{t.isUnmounting=!0}),t}const Wu=[Function,Array],yC={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wu,onEnter:Wu,onAfterEnter:Wu,onEnterCancelled:Wu,onBeforeLeave:Wu,onLeave:Wu,onAfterLeave:Wu,onLeaveCancelled:Wu,onBeforeAppear:Wu,onAppear:Wu,onAfterAppear:Wu,onAppearCancelled:Wu},_C=t=>{const n=t.subTree;return n.component?_C(n.component):n},pT={name:"BaseTransition",props:yC,setup(t,{slots:n}){const i=Lm(),a=fT();return()=>{const h=n.default&&bC(n.default(),!0);if(!h||!h.length)return;let m=h[0];if(h.length>1){for(const L of h)if(L.type!==Vl){m=L;break}}const o=Fr(t),{mode:y}=o;if(a.isLeaving)return E1(m);const x=kA(m);if(!x)return E1(m);let M=fx(x,o,a,i,L=>M=L);w0(x,M);const T=i.subTree,P=T&&kA(T);if(P&&P.type!==Vl&&!Xp(x,P)&&_C(i).type!==Vl){const L=fx(P,o,a,i);if(w0(P,L),y==="out-in"&&x.type!==Vl)return a.isLeaving=!0,L.afterLeave=()=>{a.isLeaving=!1,i.update.active!==!1&&(i.effect.dirty=!0,i.update())},E1(m);y==="in-out"&&x.type!==Vl&&(L.delayLeave=(O,W,H)=>{const nt=xC(a,P);nt[String(P.key)]=P,O[Hf]=()=>{W(),O[Hf]=void 0,delete M.delayedLeave},M.delayedLeave=H})}return m}}},dT=pT;function xC(t,n){const{leavingVNodes:i}=t;let a=i.get(n.type);return a||(a=Object.create(null),i.set(n.type,a)),a}function fx(t,n,i,a,h){const{appear:m,mode:o,persisted:y=!1,onBeforeEnter:x,onEnter:M,onAfterEnter:T,onEnterCancelled:P,onBeforeLeave:L,onLeave:O,onAfterLeave:W,onLeaveCancelled:H,onBeforeAppear:nt,onAppear:lt,onAfterAppear:K,onAppearCancelled:$}=n,yt=String(t.key),Rt=xC(i,t),Ct=(kt,Qt)=>{kt&&$u(kt,a,9,Qt)},Et=(kt,Qt)=>{const Ut=Qt[1];Ct(kt,Qt),Xn(kt)?kt.every(Nt=>Nt.length<=1)&&Ut():kt.length<=1&&Ut()},Gt={mode:o,persisted:y,beforeEnter(kt){let Qt=x;if(!i.isMounted)if(m)Qt=nt||x;else return;kt[Hf]&&kt[Hf](!0);const Ut=Rt[yt];Ut&&Xp(t,Ut)&&Ut.el[Hf]&&Ut.el[Hf](),Ct(Qt,[kt])},enter(kt){let Qt=M,Ut=T,Nt=P;if(!i.isMounted)if(m)Qt=lt||M,Ut=K||T,Nt=$||P;else return;let Bt=!1;const de=kt[Zy]=bn=>{Bt||(Bt=!0,bn?Ct(Nt,[kt]):Ct(Ut,[kt]),Gt.delayedLeave&&Gt.delayedLeave(),kt[Zy]=void 0)};Qt?Et(Qt,[kt,de]):de()},leave(kt,Qt){const Ut=String(t.key);if(kt[Zy]&&kt[Zy](!0),i.isUnmounting)return Qt();Ct(L,[kt]);let Nt=!1;const Bt=kt[Hf]=de=>{Nt||(Nt=!0,Qt(),de?Ct(H,[kt]):Ct(W,[kt]),kt[Hf]=void 0,Rt[Ut]===t&&delete Rt[Ut])};Rt[Ut]=t,O?Et(O,[kt,Bt]):Bt()},clone(kt){const Qt=fx(kt,n,i,a,h);return h&&h(Qt),Qt}};return Gt}function E1(t){if(t_(t))return t=ip(t),t.children=null,t}function kA(t){if(!t_(t))return t;const{shapeFlag:n,children:i}=t;if(i){if(n&16)return i[0];if(n&32&&Ni(i.default))return i.default()}}function w0(t,n){t.shapeFlag&6&&t.component?w0(t.component.subTree,n):t.shapeFlag&128?(t.ssContent.transition=n.clone(t.ssContent),t.ssFallback.transition=n.clone(t.ssFallback)):t.transition=n}function bC(t,n=!1,i){let a=[],h=0;for(let m=0;m<t.length;m++){let o=t[m];const y=i==null?o.key:String(i)+String(o.key!=null?o.key:m);o.type===Mi?(o.patchFlag&128&&h++,a=a.concat(bC(o.children,n,y))):(n||o.type!==Vl)&&a.push(y!=null?ip(o,{key:y}):o)}if(h>1)for(let m=0;m<a.length;m++)a[m].patchFlag=-2;return a}const mT=t=>t.__isTeleport,Vg=t=>t&&(t.disabled||t.disabled===""),DA=t=>typeof SVGElement<"u"&&t instanceof SVGElement,RA=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,px=(t,n)=>{const i=t&&t.to;return Go(i)?n?n(i):null:i},gT={name:"Teleport",__isTeleport:!0,process(t,n,i,a,h,m,o,y,x,M){const{mc:T,pc:P,pbc:L,o:{insert:O,querySelector:W,createText:H,createComment:nt}}=M,lt=Vg(n.props);let{shapeFlag:K,children:$,dynamicChildren:yt}=n;if(t==null){const Rt=n.el=H(""),Ct=n.anchor=H("");O(Rt,i,a),O(Ct,i,a);const Et=n.target=px(n.props,W),Gt=n.targetAnchor=H("");Et&&(O(Gt,Et),o==="svg"||DA(Et)?o="svg":(o==="mathml"||RA(Et))&&(o="mathml"));const kt=(Qt,Ut)=>{K&16&&T($,Qt,Ut,h,m,o,y,x)};lt?kt(i,Ct):Et&&kt(Et,Gt)}else{n.el=t.el;const Rt=n.anchor=t.anchor,Ct=n.target=t.target,Et=n.targetAnchor=t.targetAnchor,Gt=Vg(t.props),kt=Gt?i:Ct,Qt=Gt?Rt:Et;if(o==="svg"||DA(Ct)?o="svg":(o==="mathml"||RA(Ct))&&(o="mathml"),yt?(L(t.dynamicChildren,yt,kt,h,m,o,y),Jx(t,n,!0)):x||P(t,n,kt,Qt,h,m,o,y,!1),lt)Gt?n.props&&t.props&&n.props.to!==t.props.to&&(n.props.to=t.props.to):Yy(n,i,Rt,M,1);else if((n.props&&n.props.to)!==(t.props&&t.props.to)){const Ut=n.target=px(n.props,W);Ut&&Yy(n,Ut,null,M,0)}else Gt&&Yy(n,Ct,Et,M,1)}AC(n)},remove(t,n,i,a,{um:h,o:{remove:m}},o){const{shapeFlag:y,children:x,anchor:M,targetAnchor:T,target:P,props:L}=t;if(P&&m(T),o&&m(M),y&16){const O=o||!Vg(L);for(let W=0;W<x.length;W++){const H=x[W];h(H,n,i,O,!!H.dynamicChildren)}}},move:Yy,hydrate:vT};function Yy(t,n,i,{o:{insert:a},m:h},m=2){m===0&&a(t.targetAnchor,n,i);const{el:o,anchor:y,shapeFlag:x,children:M,props:T}=t,P=m===2;if(P&&a(o,n,i),(!P||Vg(T))&&x&16)for(let L=0;L<M.length;L++)h(M[L],n,i,2);P&&a(y,n,i)}function vT(t,n,i,a,h,m,{o:{nextSibling:o,parentNode:y,querySelector:x}},M){const T=n.target=px(n.props,x);if(T){const P=T._lpa||T.firstChild;if(n.shapeFlag&16)if(Vg(n.props))n.anchor=M(o(t),n,y(t),i,a,h,m),n.targetAnchor=P;else{n.anchor=o(t);let L=P;for(;L;)if(L=o(L),L&&L.nodeType===8&&L.data==="teleport anchor"){n.targetAnchor=L,T._lpa=n.targetAnchor&&o(n.targetAnchor);break}M(P,n,T,i,a,h,m)}AC(n)}return n.anchor&&o(n.anchor)}const zA=gT;function AC(t){const n=t.ctx;if(n&&n.ut){let i=t.children[0].el;for(;i&&i!==t.targetAnchor;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}const Mi=Symbol.for("v-fgt"),e_=Symbol.for("v-txt"),Vl=Symbol.for("v-cmt"),i0=Symbol.for("v-stc"),Ug=[];let Ic=null;function wt(t=!1){Ug.push(Ic=t?null:[])}function yT(){Ug.pop(),Ic=Ug[Ug.length-1]||null}let av=1;function OA(t){av+=t}function wC(t){return t.dynamicChildren=av>0?Ic||pm:null,yT(),av>0&&Ic&&Ic.push(t),t}function ce(t,n,i,a,h,m){return wC(zt(t,n,i,a,h,m,!0))}function Ve(t,n,i,a,h){return wC(jt(t,n,i,a,h,!0))}function C0(t){return t?t.__v_isVNode===!0:!1}function Xp(t,n){return t.type===n.type&&t.key===n.key}const CC=({key:t})=>t??null,r0=({ref:t,ref_key:n,ref_for:i})=>(typeof t=="number"&&(t=""+t),t!=null?Go(t)||Ea(t)||Ni(t)?{i:is,r:t,k:n,f:!!i}:t:null);function zt(t,n=null,i=null,a=0,h=null,m=t===Mi?0:1,o=!1,y=!1){const x={__v_isVNode:!0,__v_skip:!0,type:t,props:n,key:n&&CC(n),ref:n&&r0(n),scopeId:$0,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:a,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:is};return y?(nb(x,i),m&128&&t.normalize(x)):i&&(x.shapeFlag|=Go(i)?8:16),av>0&&!o&&Ic&&(x.patchFlag>0||m&6)&&x.patchFlag!==32&&Ic.push(x),x}const jt=_T;function _T(t,n=null,i=null,a=0,h=null,m=!1){if((!t||t===nC)&&(t=Vl),C0(t)){const y=ip(t,n,!0);return i&&nb(y,i),av>0&&!m&&Ic&&(y.shapeFlag&6?Ic[Ic.indexOf(t)]=y:Ic.push(y)),y.patchFlag=-2,y}if(ET(t)&&(t=t.__vccOpts),n){n=ha(n);let{class:y,style:x}=n;y&&!Go(y)&&(n.class=bs(y)),ao(x)&&(W2(x)&&!Xn(x)&&(x=ca({},x)),n.style=Ua(x))}const o=Go(t)?1:LS(t)?128:mT(t)?64:ao(t)?4:Ni(t)?2:0;return zt(t,n,i,a,h,o,m,!0)}function ha(t){return t?W2(t)||uC(t)?ca({},t):t:null}function ip(t,n,i=!1,a=!1){const{props:h,ref:m,patchFlag:o,children:y,transition:x}=t,M=n?mr(h||{},n):h,T={__v_isVNode:!0,__v_skip:!0,type:t.type,props:M,key:M&&CC(M),ref:n&&n.ref?i&&m?Xn(m)?m.concat(r0(n)):[m,r0(n)]:r0(n):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:y,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:n&&t.type!==Mi?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:x,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ip(t.ssContent),ssFallback:t.ssFallback&&ip(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return x&&a&&w0(T,x.clone(T)),T}function Va(t=" ",n=0){return jt(e_,null,t,n)}function eb(t,n){const i=jt(i0,null,t);return i.staticCount=n,i}function gn(t="",n=!1){return n?(wt(),Ve(Vl,null,t)):jt(Vl,null,t)}function eh(t){return t==null||typeof t=="boolean"?jt(Vl):Xn(t)?jt(Mi,null,t.slice()):typeof t=="object"?Gf(t):jt(e_,null,String(t))}function Gf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ip(t)}function nb(t,n){let i=0;const{shapeFlag:a}=t;if(n==null)n=null;else if(Xn(n))i=16;else if(typeof n=="object")if(a&65){const h=n.default;h&&(h._c&&(h._d=!1),nb(t,h()),h._c&&(h._d=!0));return}else{i=32;const h=n._;!h&&!uC(n)?n._ctx=is:h===3&&is&&(is.slots._===1?n._=1:(n._=2,t.patchFlag|=1024))}else Ni(n)?(n={default:n,_ctx:is},i=32):(n=String(n),a&64?(i=16,n=[Va(n)]):i=8);t.children=n,t.shapeFlag|=i}function mr(...t){const n={};for(let i=0;i<t.length;i++){const a=t[i];for(const h in a)if(h==="class")n.class!==a.class&&(n.class=bs([n.class,a.class]));else if(h==="style")n.style=Ua([n.style,a.style]);else if(q0(h)){const m=n[h],o=a[h];o&&m!==o&&!(Xn(m)&&m.includes(o))&&(n[h]=m?[].concat(m,o):o)}else h!==""&&(n[h]=a[h])}return n}function $c(t,n,i,a=null){$u(t,n,7,[i,a])}const xT=aC();let bT=0;function AT(t,n,i){const a=t.type,h=(n?n.appContext:t.appContext)||xT,m={uid:bT++,vnode:t,type:a,parent:n,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,scope:new ZE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(h.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hC(a,h),emitsOptions:tC(a,h),emit:null,emitted:null,propsDefaults:vo,inheritAttrs:a.inheritAttrs,ctx:vo,data:vo,props:vo,attrs:vo,slots:vo,refs:vo,setupState:vo,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=n?n.root:m,m.emit=MS.bind(null,m),t.ce&&t.ce(m),m}let vs=null;const Lm=()=>vs||is;let I0,dx;{const t=P2(),n=(i,a)=>{let h;return(h=t[i])||(h=t[i]=[]),h.push(a),m=>{h.length>1?h.forEach(o=>o(m)):h[0](m)}};I0=n("__VUE_INSTANCE_SETTERS__",i=>vs=i),dx=n("__VUE_SSR_SETTERS__",i=>n_=i)}const Av=t=>{const n=vs;return I0(t),t.scope.on(),()=>{t.scope.off(),I0(n)}},BA=()=>{vs&&vs.scope.off(),I0(null)};function IC(t){return t.vnode.shapeFlag&4}let n_=!1;function wT(t,n=!1){n&&dx(n);const{props:i,children:a}=t.vnode,h=IC(t);KS(t,i,h,n),JS(t,a);const m=h?CT(t,n):void 0;return n&&dx(!1),m}function CT(t,n){const i=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,VS);const{setup:a}=i;if(a){const h=t.setupContext=a.length>1?EC(t):null,m=Av(t);up();const o=$f(a,t,0,[t.props,h]);if(cp(),m(),M2(o)){if(o.then(BA,BA),n)return o.then(y=>{FA(t,y,n)}).catch(y=>{K0(y,t,0)});t.asyncDep=o}else FA(t,o,n)}else MC(t,n)}function FA(t,n,i){Ni(n)?t.type.__ssrInlineRender?t.ssrRender=n:t.render=n:ao(n)&&(t.setupState=X2(n)),MC(t,i)}let NA;function MC(t,n,i){const a=t.type;if(!t.render){if(!n&&NA&&!a.render){const h=a.template||Qx(t).template;if(h){const{isCustomElement:m,compilerOptions:o}=t.appContext.config,{delimiters:y,compilerOptions:x}=a,M=ca(ca({isCustomElement:m,delimiters:y},o),x);a.render=NA(h,M)}}t.render=a.render||Qu}{const h=Av(t);up();try{HS(t)}finally{cp(),h()}}}const IT={get(t,n){return Ul(t,"get",""),t[n]}};function EC(t){const n=i=>{t.exposed=i||{}};return{attrs:new Proxy(t.attrs,IT),slots:t.slots,emit:t.emit,expose:n}}function i_(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(X2(mS(t.exposed)),{get(n,i){if(i in n)return n[i];if(i in Fg)return Fg[i](t)},has(n,i){return i in n||i in Fg}})):t.proxy}function MT(t,n=!0){return Ni(t)?t.displayName||t.name:t.name||n&&t.__name}function ET(t){return Ni(t)&&"__vccOpts"in t}const rn=(t,n)=>gS(t,n,n_);function uh(t,n,i=vo){const a=Lm(),h=Sc(n),m=od(n),o=xS((x,M)=>{let T;return sT(()=>{const P=t[n];sh(T,P)&&(T=P,M())}),{get(){return x(),i.get?i.get(T):T},set(P){const L=a.vnode.props;!(L&&(n in L||h in L||m in L)&&(`onUpdate:${n}`in L||`onUpdate:${h}`in L||`onUpdate:${m}`in L))&&sh(P,T)&&(T=P,M()),a.emit(`update:${n}`,i.set?i.set(P):P)}}}),y=n==="modelValue"?"modelModifiers":`${n}Modifiers`;return o[Symbol.iterator]=()=>{let x=0;return{next(){return x<2?{value:x++?t[y]||{}:o,done:!1}:{done:!0}}}},o}function sv(t,n,i){const a=arguments.length;return a===2?ao(n)&&!Xn(n)?C0(n)?jt(t,null,[n]):jt(t,n):jt(t,null,n):(a>3?i=Array.prototype.slice.call(arguments,2):a===3&&C0(i)&&(i=[i]),jt(t,n,i))}const ST="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const TT="http://www.w3.org/2000/svg",PT="http://www.w3.org/1998/Math/MathML",qh=typeof document<"u"?document:null,VA=qh&&qh.createElement("template"),LT={insert:(t,n,i)=>{n.insertBefore(t,i||null)},remove:t=>{const n=t.parentNode;n&&n.removeChild(t)},createElement:(t,n,i,a)=>{const h=n==="svg"?qh.createElementNS(TT,t):n==="mathml"?qh.createElementNS(PT,t):i?qh.createElement(t,{is:i}):qh.createElement(t);return t==="select"&&a&&a.multiple!=null&&h.setAttribute("multiple",a.multiple),h},createText:t=>qh.createTextNode(t),createComment:t=>qh.createComment(t),setText:(t,n)=>{t.nodeValue=n},setElementText:(t,n)=>{t.textContent=n},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qh.querySelector(t),setScopeId(t,n){t.setAttribute(n,"")},insertStaticContent(t,n,i,a,h,m){const o=i?i.previousSibling:n.lastChild;if(h&&(h===m||h.nextSibling))for(;n.insertBefore(h.cloneNode(!0),i),!(h===m||!(h=h.nextSibling)););else{VA.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const y=VA.content;if(a==="svg"||a==="mathml"){const x=y.firstChild;for(;x.firstChild;)y.appendChild(x.firstChild);y.removeChild(x)}n.insertBefore(y,i)}return[o?o.nextSibling:n.firstChild,i?i.previousSibling:n.lastChild]}},Nf="transition",bg="animation",lv=Symbol("_vtc"),ib=(t,{slots:n})=>sv(dT,kT(t),n);ib.displayName="Transition";const SC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ib.props=ca({},yC,SC);const jp=(t,n=[])=>{Xn(t)?t.forEach(i=>i(...n)):t&&t(...n)},UA=t=>t?Xn(t)?t.some(n=>n.length>1):t.length>1:!1;function kT(t){const n={};for(const Nt in t)Nt in SC||(n[Nt]=t[Nt]);if(t.css===!1)return n;const{name:i="v",type:a,duration:h,enterFromClass:m=`${i}-enter-from`,enterActiveClass:o=`${i}-enter-active`,enterToClass:y=`${i}-enter-to`,appearFromClass:x=m,appearActiveClass:M=o,appearToClass:T=y,leaveFromClass:P=`${i}-leave-from`,leaveActiveClass:L=`${i}-leave-active`,leaveToClass:O=`${i}-leave-to`}=t,W=DT(h),H=W&&W[0],nt=W&&W[1],{onBeforeEnter:lt,onEnter:K,onEnterCancelled:$,onLeave:yt,onLeaveCancelled:Rt,onBeforeAppear:Ct=lt,onAppear:Et=K,onAppearCancelled:Gt=$}=n,kt=(Nt,Bt,de)=>{Hp(Nt,Bt?T:y),Hp(Nt,Bt?M:o),de&&de()},Qt=(Nt,Bt)=>{Nt._isLeaving=!1,Hp(Nt,P),Hp(Nt,O),Hp(Nt,L),Bt&&Bt()},Ut=Nt=>(Bt,de)=>{const bn=Nt?Et:K,_e=()=>kt(Bt,Nt,de);jp(bn,[Bt,_e]),jA(()=>{Hp(Bt,Nt?x:m),Vf(Bt,Nt?T:y),UA(bn)||HA(Bt,a,H,_e)})};return ca(n,{onBeforeEnter(Nt){jp(lt,[Nt]),Vf(Nt,m),Vf(Nt,o)},onBeforeAppear(Nt){jp(Ct,[Nt]),Vf(Nt,x),Vf(Nt,M)},onEnter:Ut(!1),onAppear:Ut(!0),onLeave(Nt,Bt){Nt._isLeaving=!0;const de=()=>Qt(Nt,Bt);Vf(Nt,P),Vf(Nt,L),OT(),jA(()=>{Nt._isLeaving&&(Hp(Nt,P),Vf(Nt,O),UA(yt)||HA(Nt,a,nt,de))}),jp(yt,[Nt,de])},onEnterCancelled(Nt){kt(Nt,!1),jp($,[Nt])},onAppearCancelled(Nt){kt(Nt,!0),jp(Gt,[Nt])},onLeaveCancelled(Nt){Qt(Nt),jp(Rt,[Nt])}})}function DT(t){if(t==null)return null;if(ao(t))return[S1(t.enter),S1(t.leave)];{const n=S1(t);return[n,n]}}function S1(t){return NE(t)}function Vf(t,n){n.split(/\s+/).forEach(i=>i&&t.classList.add(i)),(t[lv]||(t[lv]=new Set)).add(n)}function Hp(t,n){n.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const i=t[lv];i&&(i.delete(n),i.size||(t[lv]=void 0))}function jA(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let RT=0;function HA(t,n,i,a){const h=t._endId=++RT,m=()=>{h===t._endId&&a()};if(i)return setTimeout(m,i);const{type:o,timeout:y,propCount:x}=zT(t,n);if(!o)return a();const M=o+"end";let T=0;const P=()=>{t.removeEventListener(M,L),m()},L=O=>{O.target===t&&++T>=x&&P()};setTimeout(()=>{T<x&&P()},y+1),t.addEventListener(M,L)}function zT(t,n){const i=window.getComputedStyle(t),a=W=>(i[W]||"").split(", "),h=a(`${Nf}Delay`),m=a(`${Nf}Duration`),o=GA(h,m),y=a(`${bg}Delay`),x=a(`${bg}Duration`),M=GA(y,x);let T=null,P=0,L=0;n===Nf?o>0&&(T=Nf,P=o,L=m.length):n===bg?M>0&&(T=bg,P=M,L=x.length):(P=Math.max(o,M),T=P>0?o>M?Nf:bg:null,L=T?T===Nf?m.length:x.length:0);const O=T===Nf&&/\b(transform|all)(,|$)/.test(a(`${Nf}Property`).toString());return{type:T,timeout:P,propCount:L,hasTransform:O}}function GA(t,n){for(;t.length<n.length;)t=t.concat(t);return Math.max(...n.map((i,a)=>qA(i)+qA(t[a])))}function qA(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function OT(){return document.body.offsetHeight}function BT(t,n,i){const a=t[lv];a&&(n=(n?[n,...a]:[...a]).join(" ")),n==null?t.removeAttribute("class"):i?t.setAttribute("class",n):t.className=n}const M0=Symbol("_vod"),TC=Symbol("_vsh"),PC={beforeMount(t,{value:n},{transition:i}){t[M0]=t.style.display==="none"?"":t.style.display,i&&n?i.beforeEnter(t):Ag(t,n)},mounted(t,{value:n},{transition:i}){i&&n&&i.enter(t)},updated(t,{value:n,oldValue:i},{transition:a}){!n!=!i&&(a?n?(a.beforeEnter(t),Ag(t,!0),a.enter(t)):a.leave(t,()=>{Ag(t,!1)}):Ag(t,n))},beforeUnmount(t,{value:n}){Ag(t,n)}};function Ag(t,n){t.style.display=n?t[M0]:"none",t[TC]=!n}const FT=Symbol(""),NT=/(^|;)\s*display\s*:/;function VT(t,n,i){const a=t.style,h=Go(i);let m=!1;if(i&&!h){if(n)if(Go(n))for(const o of n.split(";")){const y=o.slice(0,o.indexOf(":")).trim();i[y]==null&&o0(a,y,"")}else for(const o in n)i[o]==null&&o0(a,o,"");for(const o in i)o==="display"&&(m=!0),o0(a,o,i[o])}else if(h){if(n!==i){const o=a[FT];o&&(i+=";"+o),a.cssText=i,m=NT.test(i)}}else n&&t.removeAttribute("style");M0 in t&&(t[M0]=m?a.display:"",t[TC]&&(a.display="none"))}const WA=/\s*!important$/;function o0(t,n,i){if(Xn(i))i.forEach(a=>o0(t,n,a));else if(i==null&&(i=""),n.startsWith("--"))t.setProperty(n,i);else{const a=UT(t,n);WA.test(i)?t.setProperty(od(a),i.replace(WA,""),"important"):t[a]=i}}const ZA=["Webkit","Moz","ms"],T1={};function UT(t,n){const i=T1[n];if(i)return i;let a=Sc(n);if(a!=="filter"&&a in t)return T1[n]=a;a=Z0(a);for(let h=0;h<ZA.length;h++){const m=ZA[h]+a;if(m in t)return T1[n]=m}return n}const YA="http://www.w3.org/1999/xlink";function XA(t,n,i,a,h,m=qE(n)){a&&n.startsWith("xlink:")?i==null?t.removeAttributeNS(YA,n.slice(6,n.length)):t.setAttributeNS(YA,n,i):i==null||m&&!L2(i)?t.removeAttribute(n):t.setAttribute(n,m?"":String(i))}function jT(t,n,i,a,h,m,o){if(n==="innerHTML"||n==="textContent"){a&&o(a,h,m),t[n]=i??"";return}const y=t.tagName;if(n==="value"&&y!=="PROGRESS"&&!y.includes("-")){const M=y==="OPTION"?t.getAttribute("value")||"":t.value,T=i==null?"":String(i);(M!==T||!("_value"in t))&&(t.value=T),i==null&&t.removeAttribute(n),t._value=i;return}let x=!1;if(i===""||i==null){const M=typeof t[n];M==="boolean"?i=L2(i):i==null&&M==="string"?(i="",x=!0):M==="number"&&(i=0,x=!0)}try{t[n]=i}catch{}x&&t.removeAttribute(n)}function Wh(t,n,i,a){t.addEventListener(n,i,a)}function HT(t,n,i,a){t.removeEventListener(n,i,a)}const KA=Symbol("_vei");function GT(t,n,i,a,h=null){const m=t[KA]||(t[KA]={}),o=m[n];if(a&&o)o.value=a;else{const[y,x]=qT(n);if(a){const M=m[n]=YT(a,h);Wh(t,y,M,x)}else o&&(HT(t,y,o,x),m[n]=void 0)}}const QA=/(?:Once|Passive|Capture)$/;function qT(t){let n;if(QA.test(t)){n={};let a;for(;a=t.match(QA);)t=t.slice(0,t.length-a[0].length),n[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):od(t.slice(2)),n]}let P1=0;const WT=Promise.resolve(),ZT=()=>P1||(WT.then(()=>P1=0),P1=Date.now());function YT(t,n){const i=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=i.attached)return;$u(XT(a,i.value),n,5,[a])};return i.value=t,i.attached=ZT(),i}function XT(t,n){if(Xn(n)){const i=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{i.call(t),t._stopped=!0},n.map(a=>h=>!h._stopped&&a&&a(h))}else return n}const $A=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,KT=(t,n,i,a,h,m,o,y,x)=>{const M=h==="svg";n==="class"?BT(t,a,M):n==="style"?VT(t,i,a):q0(n)?Bx(n)||GT(t,n,i,a,o):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):QT(t,n,a,M))?(jT(t,n,a,m,o,y,x),(n==="value"||n==="checked"||n==="selected")&&XA(t,n,a,M,o,n!=="value")):(n==="true-value"?t._trueValue=a:n==="false-value"&&(t._falseValue=a),XA(t,n,a,M))};function QT(t,n,i,a){if(a)return!!(n==="innerHTML"||n==="textContent"||n in t&&$A(n)&&Ni(i));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&t.tagName==="INPUT"||n==="type"&&t.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const h=t.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return $A(n)&&Go(i)?!1:n in t}const rp=t=>{const n=t.props["onUpdate:modelValue"]||!1;return Xn(n)?i=>n0(n,i):n};function $T(t){t.target.composing=!0}function JA(t){const n=t.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const Ju=Symbol("_assign"),uv={created(t,{modifiers:{lazy:n,trim:i,number:a}},h){t[Ju]=rp(h);const m=a||h.props&&h.props.type==="number";Wh(t,n?"change":"input",o=>{if(o.target.composing)return;let y=t.value;i&&(y=y.trim()),m&&(y=y0(y)),t[Ju](y)}),i&&Wh(t,"change",()=>{t.value=t.value.trim()}),n||(Wh(t,"compositionstart",$T),Wh(t,"compositionend",JA),Wh(t,"change",JA))},mounted(t,{value:n}){t.value=n??""},beforeUpdate(t,{value:n,oldValue:i,modifiers:{lazy:a,trim:h,number:m}},o){if(t[Ju]=rp(o),t.composing)return;const y=(m||t.type==="number")&&!/^0\d/.test(t.value)?y0(t.value):t.value,x=n??"";y!==x&&(document.activeElement===t&&t.type!=="range"&&(a&&n===i||h&&t.value.trim()===x)||(t.value=x))}},JT={deep:!0,created(t,n,i){t[Ju]=rp(i),Wh(t,"change",()=>{const a=t._modelValue,h=bm(t),m=t.checked,o=t[Ju];if(Xn(a)){const y=Vx(a,h),x=y!==-1;if(m&&!x)o(a.concat(h));else if(!m&&x){const M=[...a];M.splice(y,1),o(M)}}else if(Pm(a)){const y=new Set(a);m?y.add(h):y.delete(h),o(y)}else o(LC(t,m))})},mounted:tw,beforeUpdate(t,n,i){t[Ju]=rp(i),tw(t,n,i)}};function tw(t,{value:n,oldValue:i},a){t._modelValue=n,Xn(n)?t.checked=Vx(n,a.props.value)>-1:Pm(n)?t.checked=n.has(a.props.value):n!==i&&(t.checked=td(n,LC(t,!0)))}const t3={created(t,{value:n},i){t.checked=td(n,i.props.value),t[Ju]=rp(i),Wh(t,"change",()=>{t[Ju](bm(t))})},beforeUpdate(t,{value:n,oldValue:i},a){t[Ju]=rp(a),n!==i&&(t.checked=td(n,a.props.value))}},rb={deep:!0,created(t,{value:n,modifiers:{number:i}},a){const h=Pm(n);Wh(t,"change",()=>{const m=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>i?y0(bm(o)):bm(o));t[Ju](t.multiple?h?new Set(m):m:m[0]),t._assigning=!0,gu(()=>{t._assigning=!1})}),t[Ju]=rp(a)},mounted(t,{value:n,modifiers:{number:i}}){ew(t,n)},beforeUpdate(t,n,i){t[Ju]=rp(i)},updated(t,{value:n,modifiers:{number:i}}){t._assigning||ew(t,n)}};function ew(t,n,i){const a=t.multiple,h=Xn(n);if(!(a&&!h&&!Pm(n))){for(let m=0,o=t.options.length;m<o;m++){const y=t.options[m],x=bm(y);if(a)if(h){const M=typeof x;M==="string"||M==="number"?y.selected=n.some(T=>String(T)===String(x)):y.selected=Vx(n,x)>-1}else y.selected=n.has(x);else if(td(bm(y),n)){t.selectedIndex!==m&&(t.selectedIndex=m);return}}!a&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function bm(t){return"_value"in t?t._value:t.value}function LC(t,n){const i=n?"_trueValue":"_falseValue";return i in t?t[i]:n}const e3={created(t,n,i){Xy(t,n,i,null,"created")},mounted(t,n,i){Xy(t,n,i,null,"mounted")},beforeUpdate(t,n,i,a){Xy(t,n,i,a,"beforeUpdate")},updated(t,n,i,a){Xy(t,n,i,a,"updated")}};function n3(t,n){switch(t){case"SELECT":return rb;case"TEXTAREA":return uv;default:switch(n){case"checkbox":return JT;case"radio":return t3;default:return uv}}}function Xy(t,n,i,a,h){const o=n3(t.tagName,i.props&&i.props.type)[h];o&&o(t,n,i,a)}const i3=["ctrl","shift","alt","meta"],r3={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,n)=>i3.some(i=>t[`${i}Key`]&&!n.includes(i))},Ho=(t,n)=>{const i=t._withMods||(t._withMods={}),a=n.join(".");return i[a]||(i[a]=(h,...m)=>{for(let o=0;o<n.length;o++){const y=r3[n[o]];if(y&&y(h,n))return}return t(h,...m)})},o3=ca({patchProp:KT},LT);let nw;function a3(){return nw||(nw=eT(o3))}const s3=(...t)=>{const n=a3().createApp(...t),{mount:i}=n;return n.mount=a=>{const h=u3(a);if(!h)return;const m=n._component;!Ni(m)&&!m.render&&!m.template&&(m.template=h.innerHTML),h.innerHTML="";const o=i(h,!1,l3(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),o},n};function l3(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function u3(t){return Go(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const om=typeof document<"u";function c3(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const $r=Object.assign;function L1(t,n){const i={};for(const a in n){const h=n[a];i[a]=Tc(h)?h.map(t):t(h)}return i}const jg=()=>{},Tc=Array.isArray,kC=/#/g,h3=/&/g,f3=/\//g,p3=/=/g,d3=/\?/g,DC=/\+/g,m3=/%5B/g,g3=/%5D/g,RC=/%5E/g,v3=/%60/g,zC=/%7B/g,y3=/%7C/g,OC=/%7D/g,_3=/%20/g;function ob(t){return encodeURI(""+t).replace(y3,"|").replace(m3,"[").replace(g3,"]")}function x3(t){return ob(t).replace(zC,"{").replace(OC,"}").replace(RC,"^")}function mx(t){return ob(t).replace(DC,"%2B").replace(_3,"+").replace(kC,"%23").replace(h3,"%26").replace(v3,"`").replace(zC,"{").replace(OC,"}").replace(RC,"^")}function b3(t){return mx(t).replace(p3,"%3D")}function A3(t){return ob(t).replace(kC,"%23").replace(d3,"%3F")}function w3(t){return t==null?"":A3(t).replace(f3,"%2F")}function cv(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const C3=/\/$/,I3=t=>t.replace(C3,"");function k1(t,n,i="/"){let a,h={},m="",o="";const y=n.indexOf("#");let x=n.indexOf("?");return y<x&&y>=0&&(x=-1),x>-1&&(a=n.slice(0,x),m=n.slice(x+1,y>-1?y:n.length),h=t(m)),y>-1&&(a=a||n.slice(0,y),o=n.slice(y,n.length)),a=T3(a??n,i),{fullPath:a+(m&&"?")+m+o,path:a,query:h,hash:cv(o)}}function M3(t,n){const i=n.query?t(n.query):"";return n.path+(i&&"?")+i+(n.hash||"")}function iw(t,n){return!n||!t.toLowerCase().startsWith(n.toLowerCase())?t:t.slice(n.length)||"/"}function E3(t,n,i){const a=n.matched.length-1,h=i.matched.length-1;return a>-1&&a===h&&Am(n.matched[a],i.matched[h])&&BC(n.params,i.params)&&t(n.query)===t(i.query)&&n.hash===i.hash}function Am(t,n){return(t.aliasOf||t)===(n.aliasOf||n)}function BC(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(!S3(t[i],n[i]))return!1;return!0}function S3(t,n){return Tc(t)?rw(t,n):Tc(n)?rw(n,t):t===n}function rw(t,n){return Tc(n)?t.length===n.length&&t.every((i,a)=>i===n[a]):t.length===1&&t[0]===n}function T3(t,n){if(t.startsWith("/"))return t;if(!t)return n;const i=n.split("/"),a=t.split("/"),h=a[a.length-1];(h===".."||h===".")&&a.push("");let m=i.length-1,o,y;for(o=0;o<a.length;o++)if(y=a[o],y!==".")if(y==="..")m>1&&m--;else break;return i.slice(0,m).join("/")+"/"+a.slice(o).join("/")}var hv;(function(t){t.pop="pop",t.push="push"})(hv||(hv={}));var Hg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hg||(Hg={}));function P3(t){if(!t)if(om){const n=document.querySelector("base");t=n&&n.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),I3(t)}const L3=/^[^#]+#/;function k3(t,n){return t.replace(L3,"#")+n}function D3(t,n){const i=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:n.behavior,left:a.left-i.left-(n.left||0),top:a.top-i.top-(n.top||0)}}const r_=()=>({left:window.scrollX,top:window.scrollY});function R3(t){let n;if("el"in t){const i=t.el,a=typeof i=="string"&&i.startsWith("#"),h=typeof i=="string"?a?document.getElementById(i.slice(1)):document.querySelector(i):i;if(!h)return;n=D3(h,t)}else n=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function ow(t,n){return(history.state?history.state.position-n:-1)+t}const gx=new Map;function z3(t,n){gx.set(t,n)}function O3(t){const n=gx.get(t);return gx.delete(t),n}let B3=()=>location.protocol+"//"+location.host;function FC(t,n){const{pathname:i,search:a,hash:h}=n,m=t.indexOf("#");if(m>-1){let y=h.includes(t.slice(m))?t.slice(m).length:1,x=h.slice(y);return x[0]!=="/"&&(x="/"+x),iw(x,"")}return iw(i,t)+a+h}function F3(t,n,i,a){let h=[],m=[],o=null;const y=({state:L})=>{const O=FC(t,location),W=i.value,H=n.value;let nt=0;if(L){if(i.value=O,n.value=L,o&&o===W){o=null;return}nt=H?L.position-H.position:0}else a(O);h.forEach(lt=>{lt(i.value,W,{delta:nt,type:hv.pop,direction:nt?nt>0?Hg.forward:Hg.back:Hg.unknown})})};function x(){o=i.value}function M(L){h.push(L);const O=()=>{const W=h.indexOf(L);W>-1&&h.splice(W,1)};return m.push(O),O}function T(){const{history:L}=window;L.state&&L.replaceState($r({},L.state,{scroll:r_()}),"")}function P(){for(const L of m)L();m=[],window.removeEventListener("popstate",y),window.removeEventListener("beforeunload",T)}return window.addEventListener("popstate",y),window.addEventListener("beforeunload",T,{passive:!0}),{pauseListeners:x,listen:M,destroy:P}}function aw(t,n,i,a=!1,h=!1){return{back:t,current:n,forward:i,replaced:a,position:window.history.length,scroll:h?r_():null}}function N3(t){const{history:n,location:i}=window,a={value:FC(t,i)},h={value:n.state};h.value||m(a.value,{back:null,current:a.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function m(x,M,T){const P=t.indexOf("#"),L=P>-1?(i.host&&document.querySelector("base")?t:t.slice(P))+x:B3()+t+x;try{n[T?"replaceState":"pushState"](M,"",L),h.value=M}catch(O){console.error(O),i[T?"replace":"assign"](L)}}function o(x,M){const T=$r({},n.state,aw(h.value.back,x,h.value.forward,!0),M,{position:h.value.position});m(x,T,!0),a.value=x}function y(x,M){const T=$r({},h.value,n.state,{forward:x,scroll:r_()});m(T.current,T,!0);const P=$r({},aw(a.value,x,null),{position:T.position+1},M);m(x,P,!1),a.value=x}return{location:a,state:h,push:y,replace:o}}function V3(t){t=P3(t);const n=N3(t),i=F3(t,n.state,n.location,n.replace);function a(m,o=!0){o||i.pauseListeners(),history.go(m)}const h=$r({location:"",base:t,go:a,createHref:k3.bind(null,t)},n,i);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>n.state.value}),h}function U3(t){return typeof t=="string"||t&&typeof t=="object"}function NC(t){return typeof t=="string"||typeof t=="symbol"}const Uf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},VC=Symbol("");var sw;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(sw||(sw={}));function wm(t,n){return $r(new Error,{type:t,[VC]:!0},n)}function jh(t,n){return t instanceof Error&&VC in t&&(n==null||!!(t.type&n))}const lw="[^/]+?",j3={sensitive:!1,strict:!1,start:!0,end:!0},H3=/[.+*?^${}()[\]/\\]/g;function G3(t,n){const i=$r({},j3,n),a=[];let h=i.start?"^":"";const m=[];for(const M of t){const T=M.length?[]:[90];i.strict&&!M.length&&(h+="/");for(let P=0;P<M.length;P++){const L=M[P];let O=40+(i.sensitive?.25:0);if(L.type===0)P||(h+="/"),h+=L.value.replace(H3,"\\$&"),O+=40;else if(L.type===1){const{value:W,repeatable:H,optional:nt,regexp:lt}=L;m.push({name:W,repeatable:H,optional:nt});const K=lt||lw;if(K!==lw){O+=10;try{new RegExp(`(${K})`)}catch(yt){throw new Error(`Invalid custom RegExp for param "${W}" (${K}): `+yt.message)}}let $=H?`((?:${K})(?:/(?:${K}))*)`:`(${K})`;P||($=nt&&M.length<2?`(?:/${$})`:"/"+$),nt&&($+="?"),h+=$,O+=20,nt&&(O+=-8),H&&(O+=-20),K===".*"&&(O+=-50)}T.push(O)}a.push(T)}if(i.strict&&i.end){const M=a.length-1;a[M][a[M].length-1]+=.7000000000000001}i.strict||(h+="/?"),i.end?h+="$":i.strict&&(h+="(?:/|$)");const o=new RegExp(h,i.sensitive?"":"i");function y(M){const T=M.match(o),P={};if(!T)return null;for(let L=1;L<T.length;L++){const O=T[L]||"",W=m[L-1];P[W.name]=O&&W.repeatable?O.split("/"):O}return P}function x(M){let T="",P=!1;for(const L of t){(!P||!T.endsWith("/"))&&(T+="/"),P=!1;for(const O of L)if(O.type===0)T+=O.value;else if(O.type===1){const{value:W,repeatable:H,optional:nt}=O,lt=W in M?M[W]:"";if(Tc(lt)&&!H)throw new Error(`Provided param "${W}" is an array but it is not repeatable (* or + modifiers)`);const K=Tc(lt)?lt.join("/"):lt;if(!K)if(nt)L.length<2&&(T.endsWith("/")?T=T.slice(0,-1):P=!0);else throw new Error(`Missing required param "${W}"`);T+=K}}return T||"/"}return{re:o,score:a,keys:m,parse:y,stringify:x}}function q3(t,n){let i=0;for(;i<t.length&&i<n.length;){const a=n[i]-t[i];if(a)return a;i++}return t.length<n.length?t.length===1&&t[0]===80?-1:1:t.length>n.length?n.length===1&&n[0]===80?1:-1:0}function UC(t,n){let i=0;const a=t.score,h=n.score;for(;i<a.length&&i<h.length;){const m=q3(a[i],h[i]);if(m)return m;i++}if(Math.abs(h.length-a.length)===1){if(uw(a))return 1;if(uw(h))return-1}return h.length-a.length}function uw(t){const n=t[t.length-1];return t.length>0&&n[n.length-1]<0}const W3={type:0,value:""},Z3=/[a-zA-Z0-9_]/;function Y3(t){if(!t)return[[]];if(t==="/")return[[W3]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function n(O){throw new Error(`ERR (${i})/"${M}": ${O}`)}let i=0,a=i;const h=[];let m;function o(){m&&h.push(m),m=[]}let y=0,x,M="",T="";function P(){M&&(i===0?m.push({type:0,value:M}):i===1||i===2||i===3?(m.length>1&&(x==="*"||x==="+")&&n(`A repeatable param (${M}) must be alone in its segment. eg: '/:ids+.`),m.push({type:1,value:M,regexp:T,repeatable:x==="*"||x==="+",optional:x==="*"||x==="?"})):n("Invalid state to consume buffer"),M="")}function L(){M+=x}for(;y<t.length;){if(x=t[y++],x==="\\"&&i!==2){a=i,i=4;continue}switch(i){case 0:x==="/"?(M&&P(),o()):x===":"?(P(),i=1):L();break;case 4:L(),i=a;break;case 1:x==="("?i=2:Z3.test(x)?L():(P(),i=0,x!=="*"&&x!=="?"&&x!=="+"&&y--);break;case 2:x===")"?T[T.length-1]=="\\"?T=T.slice(0,-1)+x:i=3:T+=x;break;case 3:P(),i=0,x!=="*"&&x!=="?"&&x!=="+"&&y--,T="";break;default:n("Unknown state");break}}return i===2&&n(`Unfinished custom RegExp for param "${M}"`),P(),o(),h}function X3(t,n,i){const a=G3(Y3(t.path),i),h=$r(a,{record:t,parent:n,children:[],alias:[]});return n&&!h.record.aliasOf==!n.record.aliasOf&&n.children.push(h),h}function K3(t,n){const i=[],a=new Map;n=fw({strict:!1,end:!0,sensitive:!1},n);function h(T){return a.get(T)}function m(T,P,L){const O=!L,W=Q3(T);W.aliasOf=L&&L.record;const H=fw(n,T),nt=[W];if("alias"in T){const $=typeof T.alias=="string"?[T.alias]:T.alias;for(const yt of $)nt.push($r({},W,{components:L?L.record.components:W.components,path:yt,aliasOf:L?L.record:W}))}let lt,K;for(const $ of nt){const{path:yt}=$;if(P&&yt[0]!=="/"){const Rt=P.record.path,Ct=Rt[Rt.length-1]==="/"?"":"/";$.path=P.record.path+(yt&&Ct+yt)}if(lt=X3($,P,H),L?L.alias.push(lt):(K=K||lt,K!==lt&&K.alias.push(lt),O&&T.name&&!hw(lt)&&o(T.name)),jC(lt)&&x(lt),W.children){const Rt=W.children;for(let Ct=0;Ct<Rt.length;Ct++)m(Rt[Ct],lt,L&&L.children[Ct])}L=L||lt}return K?()=>{o(K)}:jg}function o(T){if(NC(T)){const P=a.get(T);P&&(a.delete(T),i.splice(i.indexOf(P),1),P.children.forEach(o),P.alias.forEach(o))}else{const P=i.indexOf(T);P>-1&&(i.splice(P,1),T.record.name&&a.delete(T.record.name),T.children.forEach(o),T.alias.forEach(o))}}function y(){return i}function x(T){const P=t5(T,i);i.splice(P,0,T),T.record.name&&!hw(T)&&a.set(T.record.name,T)}function M(T,P){let L,O={},W,H;if("name"in T&&T.name){if(L=a.get(T.name),!L)throw wm(1,{location:T});H=L.record.name,O=$r(cw(P.params,L.keys.filter(K=>!K.optional).concat(L.parent?L.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),T.params&&cw(T.params,L.keys.map(K=>K.name))),W=L.stringify(O)}else if(T.path!=null)W=T.path,L=i.find(K=>K.re.test(W)),L&&(O=L.parse(W),H=L.record.name);else{if(L=P.name?a.get(P.name):i.find(K=>K.re.test(P.path)),!L)throw wm(1,{location:T,currentLocation:P});H=L.record.name,O=$r({},P.params,T.params),W=L.stringify(O)}const nt=[];let lt=L;for(;lt;)nt.unshift(lt.record),lt=lt.parent;return{name:H,path:W,params:O,matched:nt,meta:J3(nt)}}return t.forEach(T=>m(T)),{addRoute:m,resolve:M,removeRoute:o,getRoutes:y,getRecordMatcher:h}}function cw(t,n){const i={};for(const a of n)a in t&&(i[a]=t[a]);return i}function Q3(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:$3(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function $3(t){const n={},i=t.props||!1;if("component"in t)n.default=i;else for(const a in t.components)n[a]=typeof i=="object"?i[a]:i;return n}function hw(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function J3(t){return t.reduce((n,i)=>$r(n,i.meta),{})}function fw(t,n){const i={};for(const a in t)i[a]=a in n?n[a]:t[a];return i}function t5(t,n){let i=0,a=n.length;for(;i!==a;){const m=i+a>>1;UC(t,n[m])<0?a=m:i=m+1}const h=e5(t);return h&&(a=n.lastIndexOf(h,a-1)),a}function e5(t){let n=t;for(;n=n.parent;)if(jC(n)&&UC(t,n)===0)return n}function jC({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function n5(t){const n={};if(t===""||t==="?")return n;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let h=0;h<a.length;++h){const m=a[h].replace(DC," "),o=m.indexOf("="),y=cv(o<0?m:m.slice(0,o)),x=o<0?null:cv(m.slice(o+1));if(y in n){let M=n[y];Tc(M)||(M=n[y]=[M]),M.push(x)}else n[y]=x}return n}function pw(t){let n="";for(let i in t){const a=t[i];if(i=b3(i),a==null){a!==void 0&&(n+=(n.length?"&":"")+i);continue}(Tc(a)?a.map(m=>m&&mx(m)):[a&&mx(a)]).forEach(m=>{m!==void 0&&(n+=(n.length?"&":"")+i,m!=null&&(n+="="+m))})}return n}function i5(t){const n={};for(const i in t){const a=t[i];a!==void 0&&(n[i]=Tc(a)?a.map(h=>h==null?null:""+h):a==null?a:""+a)}return n}const r5=Symbol(""),dw=Symbol(""),ab=Symbol(""),HC=Symbol(""),vx=Symbol("");function wg(){let t=[];function n(a){return t.push(a),()=>{const h=t.indexOf(a);h>-1&&t.splice(h,1)}}function i(){t=[]}return{add:n,list:()=>t.slice(),reset:i}}function qf(t,n,i,a,h,m=o=>o()){const o=a&&(a.enterCallbacks[h]=a.enterCallbacks[h]||[]);return()=>new Promise((y,x)=>{const M=L=>{L===!1?x(wm(4,{from:i,to:n})):L instanceof Error?x(L):U3(L)?x(wm(2,{from:n,to:L})):(o&&a.enterCallbacks[h]===o&&typeof L=="function"&&o.push(L),y())},T=m(()=>t.call(a&&a.instances[h],n,i,M));let P=Promise.resolve(T);t.length<3&&(P=P.then(M)),P.catch(L=>x(L))})}function D1(t,n,i,a,h=m=>m()){const m=[];for(const o of t)for(const y in o.components){let x=o.components[y];if(!(n!=="beforeRouteEnter"&&!o.instances[y]))if(o5(x)){const T=(x.__vccOpts||x)[n];T&&m.push(qf(T,i,a,o,y,h))}else{let M=x();m.push(()=>M.then(T=>{if(!T)return Promise.reject(new Error(`Couldn't resolve component "${y}" at "${o.path}"`));const P=c3(T)?T.default:T;o.components[y]=P;const O=(P.__vccOpts||P)[n];return O&&qf(O,i,a,o,y,h)()}))}}return m}function o5(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function mw(t){const n=xs(ab),i=xs(HC),a=rn(()=>{const x=X(t.to);return n.resolve(x)}),h=rn(()=>{const{matched:x}=a.value,{length:M}=x,T=x[M-1],P=i.matched;if(!T||!P.length)return-1;const L=P.findIndex(Am.bind(null,T));if(L>-1)return L;const O=gw(x[M-2]);return M>1&&gw(T)===O&&P[P.length-1].path!==O?P.findIndex(Am.bind(null,x[M-2])):L}),m=rn(()=>h.value>-1&&u5(i.params,a.value.params)),o=rn(()=>h.value>-1&&h.value===i.matched.length-1&&BC(i.params,a.value.params));function y(x={}){return l5(x)?n[X(t.replace)?"replace":"push"](X(t.to)).catch(jg):Promise.resolve()}return{route:a,href:rn(()=>a.value.href),isActive:m,isExactActive:o,navigate:y}}const a5=tr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mw,setup(t,{slots:n}){const i=jl(mw(t)),{options:a}=xs(ab),h=rn(()=>({[vw(t.activeClass,a.linkActiveClass,"router-link-active")]:i.isActive,[vw(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:i.isExactActive}));return()=>{const m=n.default&&n.default(i);return t.custom?m:sv("a",{"aria-current":i.isExactActive?t.ariaCurrentValue:null,href:i.href,onClick:i.navigate,class:h.value},m)}}}),s5=a5;function l5(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const n=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return t.preventDefault&&t.preventDefault(),!0}}function u5(t,n){for(const i in n){const a=n[i],h=t[i];if(typeof a=="string"){if(a!==h)return!1}else if(!Tc(h)||h.length!==a.length||a.some((m,o)=>m!==h[o]))return!1}return!0}function gw(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const vw=(t,n,i)=>t??n??i,c5=tr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:n,slots:i}){const a=xs(vx),h=rn(()=>t.route||a.value),m=xs(dw,0),o=rn(()=>{let M=X(m);const{matched:T}=h.value;let P;for(;(P=T[M])&&!P.components;)M++;return M}),y=rn(()=>h.value.matched[o.value]);Jp(dw,rn(()=>o.value+1)),Jp(r5,y),Jp(vx,h);const x=$e();return hl(()=>[x.value,y.value,t.name],([M,T,P],[L,O,W])=>{T&&(T.instances[P]=M,O&&O!==T&&M&&M===L&&(T.leaveGuards.size||(T.leaveGuards=O.leaveGuards),T.updateGuards.size||(T.updateGuards=O.updateGuards))),M&&T&&(!O||!Am(T,O)||!L)&&(T.enterCallbacks[P]||[]).forEach(H=>H(M))},{flush:"post"}),()=>{const M=h.value,T=t.name,P=y.value,L=P&&P.components[T];if(!L)return yw(i.default,{Component:L,route:M});const O=P.props[T],W=O?O===!0?M.params:typeof O=="function"?O(M):O:null,nt=sv(L,$r({},W,n,{onVnodeUnmounted:lt=>{lt.component.isUnmounted&&(P.instances[T]=null)},ref:x}));return yw(i.default,{Component:nt,route:M})||nt}}});function yw(t,n){if(!t)return null;const i=t(n);return i.length===1?i[0]:i}const GC=c5;function h5(t){const n=K3(t.routes,t),i=t.parseQuery||n5,a=t.stringifyQuery||pw,h=t.history,m=wg(),o=wg(),y=wg(),x=xv(Uf);let M=Uf;om&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const T=L1.bind(null,le=>""+le),P=L1.bind(null,w3),L=L1.bind(null,cv);function O(le,Ke){let me,Te;return NC(le)?(me=n.getRecordMatcher(le),Te=Ke):Te=le,n.addRoute(Te,me)}function W(le){const Ke=n.getRecordMatcher(le);Ke&&n.removeRoute(Ke)}function H(){return n.getRoutes().map(le=>le.record)}function nt(le){return!!n.getRecordMatcher(le)}function lt(le,Ke){if(Ke=$r({},Ke||x.value),typeof le=="string"){const xt=k1(i,le,Ke.path),$t=n.resolve({path:xt.path},Ke),ae=h.createHref(xt.fullPath);return $r(xt,$t,{params:L($t.params),hash:cv(xt.hash),redirectedFrom:void 0,href:ae})}let me;if(le.path!=null)me=$r({},le,{path:k1(i,le.path,Ke.path).path});else{const xt=$r({},le.params);for(const $t in xt)xt[$t]==null&&delete xt[$t];me=$r({},le,{params:P(xt)}),Ke.params=P(Ke.params)}const Te=n.resolve(me,Ke),Ai=le.hash||"";Te.params=T(L(Te.params));const ki=M3(a,$r({},le,{hash:x3(Ai),path:Te.path})),ut=h.createHref(ki);return $r({fullPath:ki,hash:Ai,query:a===pw?i5(le.query):le.query||{}},Te,{redirectedFrom:void 0,href:ut})}function K(le){return typeof le=="string"?k1(i,le,x.value.path):$r({},le)}function $(le,Ke){if(M!==le)return wm(8,{from:Ke,to:le})}function yt(le){return Et(le)}function Rt(le){return yt($r(K(le),{replace:!0}))}function Ct(le){const Ke=le.matched[le.matched.length-1];if(Ke&&Ke.redirect){const{redirect:me}=Ke;let Te=typeof me=="function"?me(le):me;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=K(Te):{path:Te},Te.params={}),$r({query:le.query,hash:le.hash,params:Te.path!=null?{}:le.params},Te)}}function Et(le,Ke){const me=M=lt(le),Te=x.value,Ai=le.state,ki=le.force,ut=le.replace===!0,xt=Ct(me);if(xt)return Et($r(K(xt),{state:typeof xt=="object"?$r({},Ai,xt.state):Ai,force:ki,replace:ut}),Ke||me);const $t=me;$t.redirectedFrom=Ke;let ae;return!ki&&E3(a,Te,me)&&(ae=wm(16,{to:$t,from:Te}),Fn(Te,Te,!0,!1)),(ae?Promise.resolve(ae):Qt($t,Te)).catch(pe=>jh(pe)?jh(pe,2)?pe:ri(pe):Ue(pe,$t,Te)).then(pe=>{if(pe){if(jh(pe,2))return Et($r({replace:ut},K(pe.to),{state:typeof pe.to=="object"?$r({},Ai,pe.to.state):Ai,force:ki}),Ke||$t)}else pe=Nt($t,Te,!0,ut,Ai);return Ut($t,Te,pe),pe})}function Gt(le,Ke){const me=$(le,Ke);return me?Promise.reject(me):Promise.resolve()}function kt(le){const Ke=Li.values().next().value;return Ke&&typeof Ke.runWithContext=="function"?Ke.runWithContext(le):le()}function Qt(le,Ke){let me;const[Te,Ai,ki]=f5(le,Ke);me=D1(Te.reverse(),"beforeRouteLeave",le,Ke);for(const xt of Te)xt.leaveGuards.forEach($t=>{me.push(qf($t,le,Ke))});const ut=Gt.bind(null,le,Ke);return me.push(ut),bi(me).then(()=>{me=[];for(const xt of m.list())me.push(qf(xt,le,Ke));return me.push(ut),bi(me)}).then(()=>{me=D1(Ai,"beforeRouteUpdate",le,Ke);for(const xt of Ai)xt.updateGuards.forEach($t=>{me.push(qf($t,le,Ke))});return me.push(ut),bi(me)}).then(()=>{me=[];for(const xt of ki)if(xt.beforeEnter)if(Tc(xt.beforeEnter))for(const $t of xt.beforeEnter)me.push(qf($t,le,Ke));else me.push(qf(xt.beforeEnter,le,Ke));return me.push(ut),bi(me)}).then(()=>(le.matched.forEach(xt=>xt.enterCallbacks={}),me=D1(ki,"beforeRouteEnter",le,Ke,kt),me.push(ut),bi(me))).then(()=>{me=[];for(const xt of o.list())me.push(qf(xt,le,Ke));return me.push(ut),bi(me)}).catch(xt=>jh(xt,8)?xt:Promise.reject(xt))}function Ut(le,Ke,me){y.list().forEach(Te=>kt(()=>Te(le,Ke,me)))}function Nt(le,Ke,me,Te,Ai){const ki=$(le,Ke);if(ki)return ki;const ut=Ke===Uf,xt=om?history.state:{};me&&(Te||ut?h.replace(le.fullPath,$r({scroll:ut&&xt&&xt.scroll},Ai)):h.push(le.fullPath,Ai)),x.value=le,Fn(le,Ke,me,ut),ri()}let Bt;function de(){Bt||(Bt=h.listen((le,Ke,me)=>{if(!ui.listening)return;const Te=lt(le),Ai=Ct(Te);if(Ai){Et($r(Ai,{replace:!0}),Te).catch(jg);return}M=Te;const ki=x.value;om&&z3(ow(ki.fullPath,me.delta),r_()),Qt(Te,ki).catch(ut=>jh(ut,12)?ut:jh(ut,2)?(Et(ut.to,Te).then(xt=>{jh(xt,20)&&!me.delta&&me.type===hv.pop&&h.go(-1,!1)}).catch(jg),Promise.reject()):(me.delta&&h.go(-me.delta,!1),Ue(ut,Te,ki))).then(ut=>{ut=ut||Nt(Te,ki,!1),ut&&(me.delta&&!jh(ut,8)?h.go(-me.delta,!1):me.type===hv.pop&&jh(ut,20)&&h.go(-1,!1)),Ut(Te,ki,ut)}).catch(jg)}))}let bn=wg(),_e=wg(),He;function Ue(le,Ke,me){ri(le);const Te=_e.list();return Te.length?Te.forEach(Ai=>Ai(le,Ke,me)):console.error(le),Promise.reject(le)}function Pi(){return He&&x.value!==Uf?Promise.resolve():new Promise((le,Ke)=>{bn.add([le,Ke])})}function ri(le){return He||(He=!le,de(),bn.list().forEach(([Ke,me])=>le?me(le):Ke()),bn.reset()),le}function Fn(le,Ke,me,Te){const{scrollBehavior:Ai}=t;if(!om||!Ai)return Promise.resolve();const ki=!me&&O3(ow(le.fullPath,0))||(Te||!me)&&history.state&&history.state.scroll||null;return gu().then(()=>Ai(le,Ke,ki)).then(ut=>ut&&R3(ut)).catch(ut=>Ue(ut,le,Ke))}const mn=le=>h.go(le);let Kn;const Li=new Set,ui={currentRoute:x,listening:!0,addRoute:O,removeRoute:W,hasRoute:nt,getRoutes:H,resolve:lt,options:t,push:yt,replace:Rt,go:mn,back:()=>mn(-1),forward:()=>mn(1),beforeEach:m.add,beforeResolve:o.add,afterEach:y.add,onError:_e.add,isReady:Pi,install(le){const Ke=this;le.component("RouterLink",s5),le.component("RouterView",GC),le.config.globalProperties.$router=Ke,Object.defineProperty(le.config.globalProperties,"$route",{enumerable:!0,get:()=>X(x)}),om&&!Kn&&x.value===Uf&&(Kn=!0,yt(h.location).catch(Ai=>{}));const me={};for(const Ai in Uf)Object.defineProperty(me,Ai,{get:()=>x.value[Ai],enumerable:!0});le.provide(ab,Ke),le.provide(HC,q2(me)),le.provide(vx,x);const Te=le.unmount;Li.add(le),le.unmount=function(){Li.delete(le),Li.size<1&&(M=Uf,Bt&&Bt(),Bt=null,x.value=Uf,Kn=!1,He=!1),Te()}}};function bi(le){return le.reduce((Ke,me)=>Ke.then(()=>kt(me)),Promise.resolve())}return ui}function f5(t,n){const i=[],a=[],h=[],m=Math.max(n.matched.length,t.matched.length);for(let o=0;o<m;o++){const y=n.matched[o];y&&(t.matched.find(M=>Am(M,y))?a.push(y):i.push(y));const x=t.matched[o];x&&(n.matched.find(M=>Am(M,x))||h.push(x))}return[i,a,h]}var p5="M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z",d5="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12",m5="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",g5="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",v5="M12,10A2,2 0 0,0 10,12C10,13.11 10.9,14 12,14C13.11,14 14,13.11 14,12A2,2 0 0,0 12,10Z",Cm="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",y5="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",qC="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z",_5="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",x5="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z",WC="M17 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3M19 19H5V5H16.17L19 7.83V19M12 12C10.34 12 9 13.34 9 15S10.34 18 12 18 15 16.66 15 15 13.66 12 12 12M6 6H15V10H6V6Z",wv="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M3.05,13H1V11H3.05C3.5,6.83 6.83,3.5 11,3.05V1H13V3.05C17.17,3.5 20.5,6.83 20.95,11H23V13H20.95C20.5,17.17 17.17,20.5 13,20.95V23H11V20.95C6.83,20.5 3.5,17.17 3.05,13M12,5A7,7 0 0,0 5,12A7,7 0 0,0 12,19A7,7 0 0,0 19,12A7,7 0 0,0 12,5Z",b5="M20.94 11C20.5 6.83 17.17 3.5 13 3.06V1H11V3.06C9.87 3.18 8.81 3.5 7.84 4.03L9.34 5.53C10.16 5.19 11.06 5 12 5C15.87 5 19 8.13 19 12C19 12.94 18.81 13.84 18.5 14.65L20 16.15C20.5 15.19 20.82 14.13 20.95 13H23V11H20.94M3 4.27L5.04 6.31C3.97 7.62 3.25 9.23 3.06 11H1V13H3.06C3.5 17.17 6.83 20.5 11 20.94V23H13V20.94C14.77 20.74 16.38 20.03 17.69 18.96L19.73 21L21 19.73L4.27 3L3 4.27M16.27 17.54C15.09 18.45 13.61 19 12 19C8.13 19 5 15.87 5 12C5 10.39 5.55 8.91 6.46 7.73L16.27 17.54Z",A5="M13.75,10.19L14.38,10.32L18.55,12.4C19.25,12.63 19.71,13.32 19.65,14.06V14.19L19.65,14.32L18.75,20.44C18.69,20.87 18.5,21.27 18.15,21.55C17.84,21.85 17.43,22 17,22H10.12C9.63,22 9.18,21.82 8.85,21.47L2.86,15.5L3.76,14.5C4,14.25 4.38,14.11 4.74,14.13H5.03L9,15V4.5A2,2 0 0,1 11,2.5A2,2 0 0,1 13,4.5V10.19H13.75Z",km="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",sb="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M8,9H16V19H8V9M15.5,4L14.5,3H9.5L8.5,4H5V6H19V4H15.5Z",lb="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",w5="M13,5V11H14.17L12,13.17L9.83,11H11V5H13M15,3H9V9H5L12,16L19,9H15V3M19,18H5V20H19V18Z",C5="M9.75 20.85C11.53 20.15 11.14 18.22 10.24 17C9.35 15.75 8.12 14.89 6.88 14.06C6 13.5 5.19 12.8 4.54 12C4.26 11.67 3.69 11.06 4.27 10.94C4.86 10.82 5.88 11.4 6.4 11.62C7.31 12 8.21 12.44 9.05 12.96L10.06 11.26C8.5 10.23 6.5 9.32 4.64 9.05C3.58 8.89 2.46 9.11 2.1 10.26C1.78 11.25 2.29 12.25 2.87 13.03C4.24 14.86 6.37 15.74 7.96 17.32C8.3 17.65 8.71 18.04 8.91 18.5C9.12 18.94 9.07 18.97 8.6 18.97C7.36 18.97 5.81 18 4.8 17.36L3.79 19.06C5.32 20 7.88 21.47 9.75 20.85M20.84 5.25C21.06 5.03 21.06 4.67 20.84 4.46L19.54 3.16C19.33 2.95 18.97 2.95 18.76 3.16L17.74 4.18L19.82 6.26M11 10.92V13H13.08L19.23 6.85L17.15 4.77L11 10.92Z",ub="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",cb="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",I5="M3,16H8V14H3V16M9.5,16H14.5V14H9.5V16M16,16H21V14H16V16M3,20H5V18H3V20M7,20H9V18H7V20M11,20H13V18H11V20M15,20H17V18H15V20M19,20H21V18H19V20M3,12H11V10H3V12M13,12H21V10H13V12M3,4V8H21V4H3Z",M5="M5,5H10V7H7V10H5V5M14,5H19V10H17V7H14V5M17,14H19V19H14V17H17V14M10,17V19H5V14H7V17H10Z",E5="M14,14H19V16H16V19H14V14M5,14H10V19H8V16H5V14M8,5H10V10H5V8H8V5M19,8V10H14V5H16V8H19Z",ZC="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",S5="M14,3V13L17.2,11.31L17.42,11.28C17.71,11.28 17.97,11.4 18.16,11.6L18.9,12.37L14,16.57C13.74,16.84 13.39,17 13,17H6.5C5.73,17 5,16.3 5,15.5V11.14C5,10.53 5.35,10 5.85,9.8L10.79,7.6L12,7.47V3A1,1 0 0,1 13,2A1,1 0 0,1 14,3M5,19H13V22H5V19Z",T5="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",P5="M19 3H5A2 2 0 0 0 3 5V19A2 2 0 0 0 5 21H19A2 2 0 0 0 21 19V5A2 2 0 0 0 19 3M5 19V17H8.13A4.13 4.13 0 0 0 9.4 19M19 19H14.6A4.13 4.13 0 0 0 15.87 17H19M19 15H14V16A2 2 0 0 1 10 16V15H5V5H19Z",L5="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",o_="M12,16L19.36,10.27L21,9L12,2L3,9L4.63,10.27M12,18.54L4.62,12.81L3,14.07L12,21.07L21,14.07L19.37,12.8L12,18.54Z",k5="M12,18.54L19.37,12.8L21,14.07L12,21.07L3,14.07L4.62,12.81L12,18.54M12,16L3,9L12,2L21,9L12,16M12,4.53L6.26,9L12,13.47L17.74,9L12,4.53Z",hb="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z",D5="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z",fb="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z",YC="M7,10L12,15L17,10H7Z",R5="M14,7L9,12L14,17V7Z",z5="M7,15L12,10L17,15H7Z",O5="M19,13H5V11H19V13Z",B5="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",F5="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z",hp="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",N5="M9.8 21C9.6 20.6 9.3 20.2 9.2 19.7L8.8 19H8V14H13C14.2 13.4 15.6 13 17 13C18.9 13 20.6 13.6 22 14.6V11C22 9.3 20.7 8 19 8H5C3.3 8 2 9.3 2 11V17H6V21H9.8M19 10C19.6 10 20 10.4 20 11S19.6 12 19 12 18 11.6 18 11 18.4 10 19 10M18 7H6V3H18V7M17 18C17.6 18 18 18.4 18 19S17.6 20 17 20 16 19.6 16 19 16.4 18 17 18M17 15C14.3 15 11.9 16.7 11 19C11.9 21.3 14.3 23 17 23S22.1 21.3 23 19C22.1 16.7 19.7 15 17 15M17 21.5C15.6 21.5 14.5 20.4 14.5 19S15.6 16.5 17 16.5 19.5 17.6 19.5 19 18.4 21.5 17 21.5Z",V5="M19 8C20.66 8 22 9.34 22 11V17H18V21H6V17H2V11C2 9.34 3.34 8 5 8H6V3H18V8H19M8 5V8H16V5H8M16 19V15H8V19H16M18 15H20V11C20 10.45 19.55 10 19 10H5C4.45 10 4 10.45 4 11V15H6V13H18V15M19 11.5C19 12.05 18.55 12.5 18 12.5C17.45 12.5 17 12.05 17 11.5C17 10.95 17.45 10.5 18 10.5C18.55 10.5 19 10.95 19 11.5Z",U5="M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z",j5="M20 19.88V22L18.2 20.83L13.41 11.83A4.94 4.94 0 0 0 15.19 10.83M15 7A3 3 0 0 1 12 10A3.27 3.27 0 0 1 11.56 10L5.8 20.83L4 22V19.88L9.79 9A3 3 0 0 1 12 4V2A1 1 0 0 1 13 3V4.18A3 3 0 0 1 15 7M13 7A1 1 0 1 0 12 8A1 1 0 0 0 13 7M4.22 10L6 11.8L4.56 14.56L2.1 12.1M12 17.76L10.5 16.25L9 19L12 22L15 19L13.53 16.23M19.78 10L18 11.8L19.5 14.56L21.9 12.1Z",H5="M4,3H5V5H3V4A1,1 0 0,1 4,3M20,3A1,1 0 0,1 21,4V5H19V3H20M15,5V3H17V5H15M11,5V3H13V5H11M7,5V3H9V5H7M21,20A1,1 0 0,1 20,21H19V19H21V20M15,21V19H17V21H15M11,21V19H13V21H11M7,21V19H9V21H7M4,21A1,1 0 0,1 3,20V19H5V21H4M3,15H5V17H3V15M21,15V17H19V15H21M3,11H5V13H3V11M21,11V13H19V11H21M3,7H5V9H3V7M21,7V9H19V7H21Z",G5="M1 6V19A2 2 0 0 0 3 21H9V11H21V6A2 2 0 0 0 19 4H3A2 2 0 0 0 1 6M3 6H7V9H3M7 19H3V16H7M7 14H3V11H7M9 9V6H13V9M19 9H15V6H19M17 16A1 1 0 1 1 16 17A1 1 0 0 1 17 16M17 13A6.45 6.45 0 0 1 23 17A6.5 6.5 0 0 1 11 17A6.45 6.45 0 0 1 17 13M17 14.5A2.5 2.5 0 1 0 19.5 17A2.5 2.5 0 0 0 17 14.5",q5="M2,2H6V3H13V2H17V6H16V9H18V8H22V12H21V18H22V22H18V21H12V22H8V18H9V16H6V17H2V13H3V6H2V2M18,12V11H16V13H17V17H13V16H11V18H12V19H18V18H19V12H18M13,6V5H6V6H5V13H6V14H9V12H8V8H12V9H14V6H13M12,12H11V14H13V13H14V11H12V12Z",W5="M9,10V16H15V10H19L12,3L5,10H9M12,5.8L14.2,8H13V14H11V8H9.8L12,5.8M19,18H5V20H19V18Z";const ii=(t,n)=>{const i=t.__vccOpts||t;for(const[a,h]of n)i[a]=h;return i},_w={mdi:{size:24,viewbox:"0 0 24 24"},"simple-icons":{size:24,viewbox:"0 0 24 24"},default:{size:0,viewbox:"0 0 0 0"}},Z5={name:"icon",props:{type:String,path:{type:String,required:!0},size:{type:[String,Number],default:24},viewbox:String,flip:{type:String,validator:t=>["horizontal","vertical","both","none"].includes(t)},rotate:{type:Number,default:0}},computed:{styles(){return{"--sx":["both","horizontal"].includes(this.flip)?"-1":"1","--sy":["both","vertical"].includes(this.flip)?"-1":"1","--r":isNaN(this.rotate)?this.rotate:this.rotate+"deg"}},defaults(){return _w[this.type]||_w.default},sizeValue(){return this.size||this.defaults.size},viewboxValue(){return this.viewbox||this.defaults.viewbox}}},Y5=["width","height","viewBox"],X5=["d"];function K5(t,n,i,a,h,m){return wt(),ce("svg",{width:m.sizeValue,height:m.sizeValue,viewBox:m.viewboxValue,style:Ua(m.styles)},[zt("path",{d:i.path},null,8,X5)],12,Y5)}const Nn=ii(Z5,[["render",K5],["__scopeId","data-v-0fb36228"]]),Q5={components:{SvgIcon:Nn},props:{height:{default:32},width:{default:32},loading:Boolean,active:Boolean,disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},path(){return{loading:hb}}}},$5=["disabled"],J5={class:"map-control-button__content"};function tP(t,n,i,a,h,m){const o=ih("SvgIcon");return wt(),ce("button",mr({class:"map-control-button",style:m.bindStyle,disabled:i.disabled},t.$attrs,{class:{"map-control-button-active":i.active,"map-control-button-disabled":i.disabled}}),[zt("span",J5,[i.loading?(wt(),Ve(o,{key:0,size:i.height*2/3,type:"mdi",path:m.path.loading,class:"spin"},null,8,["size","path"])):qn(t.$slots,"default",{key:1},void 0,!0)])],16,$5)}const XC=ii(Q5,[["render",tP],["__scopeId","data-v-fd870c76"]]),eP={props:{},computed:{iconName(){return""}}};function nP(t,n,i,a,h,m){return wt(),ce("i",{class:bs(["map-icon mdi",m.iconName])},null,2)}const pb=ii(eP,[["render",nP],["__scopeId","data-v-357655e9"]]),iP={components:{MapButton:XC,MapIcon:pb},props:{items:{type:Array,default:()=>[]},row:Boolean,size:{type:Number,default:32}},provide(){return{isGroup:!0,size:this.size}}};function rP(t,n,i,a,h,m){const o=ih("MapIcon"),y=ih("MapButton");return wt(),ce("div",{class:bs(["button-container button-group-container",{"button-group-row-container":i.row,"button-group-column-container":!i.row}]),style:Ua({width:i.row?null:i.size+"px",height:i.row?i.size+"px":null})},[zt("div",{class:bs(["button-group-sheet",{"button-group-sheet-column":!i.row}]),style:{"border-radius":"150px"}},[(wt(!0),ce(Mi,null,ja(i.items,(x,M)=>(wt(),Ve(y,{key:M+""+x.titl,height:i.size,text:"",title:x.title,width:i.size,onClick:x.onClick},{default:se(()=>[jt(o,null,{default:se(()=>[Va(oi(x.icon),1)]),_:2},1024)]),_:2},1032,["height","title","width","onClick"]))),128)),qn(t.$slots,"default",{},void 0,!0)],2)],6)}const Im=ii(iP,[["render",rP],["__scopeId","data-v-b66900d0"]]),oP={components:{MapButton:XC,MapIcon:pb},props:{icon:{type:[String,Boolean]},tooltip:String,title:String,loading:Boolean,size:{type:Number,default:32},active:Boolean,disabled:Boolean},inject:{isGroup:{default:!1},groupSize:{default:0,from:"size"}},computed:{}},aP={key:1,class:"button-container"},sP=["title"];function lP(t,n,i,a,h,m){const o=ih("MapIcon"),y=ih("MapButton");return m.isGroup?(wt(),Ve(y,mr({key:0},t.$attrs,{active:i.active,height:m.groupSize,title:i.tooltip||i.title,width:m.groupSize,disabled:i.disabled}),{default:se(()=>[qn(t.$slots,"default",{},()=>[jt(o,null,{default:se(()=>[Va(oi(i.icon),1)]),_:1})],!0)]),_:3},16,["active","height","title","width","disabled"])):(wt(),ce("div",aP,[zt("div",{title:i.tooltip||i.title},[qn(t.$slots,"content",{},()=>[jt(y,mr(t.$attrs,{active:i.active,height:i.size,loading:i.loading,width:i.size,disabled:i.disabled}),{default:se(()=>[qn(t.$slots,"default",{},()=>[jt(o,null,{default:se(()=>[Va(oi(i.icon),1)]),_:1})],!0)]),_:3},16,["active","height","loading","width","disabled"])],!0)],8,sP)]))}const Tr=ii(oP,[["render",lP],["__scopeId","data-v-0a0a4f26"]]),uP={props:{src:{}},data:()=>({}),computed:{styleImage(){return{"background-image":`url(${this.src})`}}},methods:{}},cP=t=>(fh("data-v-5fe5f915"),t=t(),ph(),t),hP={class:"map-image"},fP=cP(()=>zt("div",{class:"map-image__sizer",style:{"padding-bottom":"100%"}},null,-1)),pP={class:"map-image__content"};function dP(t,n,i,a,h,m){return wt(),ce("div",hP,[fP,zt("div",{class:"map-image__image",style:Ua(m.styleImage)},null,4),zt("div",pP,[qn(t.$slots,"default",{},void 0,!0)])])}const yx=ii(uP,[["render",dP],["__scopeId","data-v-5fe5f915"]]),mP={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},gP=eb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function vP(t,n,i,a,h,m){return wt(),ce("div",mr({class:"card",style:m.cardStyle},t.$attrs),[zt("div",null,[qn(t.$slots,"default")]),gP],16)}const yP=ii(mP,[["render",vP]]);let gm={},Gg={},Jf={};window.$_hungpv_map_queue?(gm=window.$_hungpv_map_queue.pendingFunctions,Gg=window.$_hungpv_map_queue.pendingRemoveFunctions,Jf=window.$_hungpv_map_queue.mapIds):window.$_hungpv_map_queue={pendingFunctions:gm,pendingRemoveFunctions:Gg,mapIds:Jf};function sd(t,n,i){gm[t]=n,KC()}function KC(){for(const t in Jf)if(Object.prototype.hasOwnProperty.call(Jf,t)){const n=Jf[t];for(const i in gm)if(Object.prototype.hasOwnProperty.call(gm,i)&&!n[i]){const a=gm[i];a(t),n[i]=!0}}}function _P(t){Jf[t]={},KC()}function xP(t){for(const n in Gg){const i=Jf[t];if(Object.prototype.hasOwnProperty.call(Gg,n)&&!i[n]){const a=Gg[n];a(t),i[n]=!0}}Jf[t]={}}let du={state:{},getters:{},actions:{getMapStore(t){const n=du.state[t];if(!n)throw"Not found map for id "+t;return n},initMap(t,n){du.state[t]={map:n},_P(t)},removeMap(t){delete du.state[t],xP(t)},getMap(t,n){var a;const i=(a=du.state[t])==null?void 0:a.map;if(!i)throw"Not found map for id "+t;return n?n(i):i}}};window.$_hungpv_drag?du=window.$_hungpv_drag:window.$_hungpv_drag=du;const{state:bP,getters:pj,actions:tp}=du;function rf(t,n,i){const a=tp.getMapStore(t);return a[n]||(a[n]=i||{}),a[n]}function ua(t,n){return tp.getMapStore(t)[n]}du.actions.getMap;const Xh="crs",xw=[{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"},{name:"VN-2000",epsg:"4756",unit:"degree",proj4js:"+proj=longlat +ellps=WGS84 +towgs84=-191.90441429,-39.30318279,-111.45032835,-0.00928836,0.01975479,-0.00427372,0.252906278 +no_defs +type=crs"}];function AP(t){rf(t,Xh,jl({crs:"4326",items:xw.slice(),item:xw[0]}))}sd(Xh,AP);async function wP(t,n){const i=ua(t,Xh);i.items=n}const CP=t=>ua(t,Xh).items,QC=t=>ua(t,Xh).item,IP=t=>ua(t,Xh).crs;function MP(t,n){ua(t,Xh).crs=n,ua(t,Xh).item=ua(t,Xh).items.find(i=>i.epsg==n)}const db=Object.freeze(Object.defineProperty({__proto__:null,getCrs:IP,getCrsItem:QC,getCrsItems:CP,setCrs:MP,setCrsItems:wP},Symbol.toStringTag,{value:"Module"}));function EP(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var ed=1,nd=2,vm=3,SP=4,_x=5,bw=6378137,TP=6356752314e-3,Aw=.0066943799901413165,qg=484813681109536e-20,Xe=Math.PI/2,PP=.16666666666666666,LP=.04722222222222222,kP=.022156084656084655,xn=1e-10,gs=.017453292519943295,rh=57.29577951308232,jr=Math.PI/4,fv=Math.PI*2,sa=3.14159265359,Gl={};Gl.greenwich=0;Gl.lisbon=-9.131906111111;Gl.paris=2.337229166667;Gl.bogota=-74.080916666667;Gl.madrid=-3.687938888889;Gl.rome=12.452333333333;Gl.bern=7.439583333333;Gl.jakarta=106.807719444444;Gl.ferro=-17.666666666667;Gl.brussels=4.367975;Gl.stockholm=18.058277777778;Gl.athens=23.7163375;Gl.oslo=10.722916666667;const DP={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ww=/[\s_\-\/\(\)]/g;function op(t,n){if(t[n])return t[n];for(var i=Object.keys(t),a=n.toLowerCase().replace(ww,""),h=-1,m,o;++h<i.length;)if(m=i[h],o=m.toLowerCase().replace(ww,""),o===a)return t[m]}function xx(t){var n={},i=t.split("+").map(function(y){return y.trim()}).filter(function(y){return y}).reduce(function(y,x){var M=x.split("=");return M.push(!0),y[M[0].toLowerCase()]=M[1],y},{}),a,h,m,o={proj:"projName",datum:"datumCode",rf:function(y){n.rf=parseFloat(y)},lat_0:function(y){n.lat0=y*gs},lat_1:function(y){n.lat1=y*gs},lat_2:function(y){n.lat2=y*gs},lat_ts:function(y){n.lat_ts=y*gs},lon_0:function(y){n.long0=y*gs},lon_1:function(y){n.long1=y*gs},lon_2:function(y){n.long2=y*gs},alpha:function(y){n.alpha=parseFloat(y)*gs},gamma:function(y){n.rectified_grid_angle=parseFloat(y)},lonc:function(y){n.longc=y*gs},x_0:function(y){n.x0=parseFloat(y)},y_0:function(y){n.y0=parseFloat(y)},k_0:function(y){n.k0=parseFloat(y)},k:function(y){n.k0=parseFloat(y)},a:function(y){n.a=parseFloat(y)},b:function(y){n.b=parseFloat(y)},r:function(y){n.a=n.b=parseFloat(y)},r_a:function(){n.R_A=!0},zone:function(y){n.zone=parseInt(y,10)},south:function(){n.utmSouth=!0},towgs84:function(y){n.datum_params=y.split(",").map(function(x){return parseFloat(x)})},to_meter:function(y){n.to_meter=parseFloat(y)},units:function(y){n.units=y;var x=op(DP,y);x&&(n.to_meter=x.to_meter)},from_greenwich:function(y){n.from_greenwich=y*gs},pm:function(y){var x=op(Gl,y);n.from_greenwich=(x||parseFloat(y))*gs},nadgrids:function(y){y==="@null"?n.datumCode="none":n.nadgrids=y},axis:function(y){var x="ewnsud";y.length===3&&x.indexOf(y.substr(0,1))!==-1&&x.indexOf(y.substr(1,1))!==-1&&x.indexOf(y.substr(2,1))!==-1&&(n.axis=y)},approx:function(){n.approx=!0}};for(a in i)h=i[a],a in o?(m=o[a],typeof m=="function"?m(h):n[m]=h):n[a]=h;return typeof n.datumCode=="string"&&n.datumCode!=="WGS84"&&(n.datumCode=n.datumCode.toLowerCase()),n}var pv=1,$C=2,JC=3,E0=4,tI=5,mb=-1,RP=/\s/,zP=/[A-Za-z]/,OP=/[A-Za-z84_]/,a_=/[,\]]/,eI=/[\d\.E\-\+]/;function of(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=pv}of.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==E0)for(;RP.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case pv:return this.neutral(t);case $C:return this.keyword(t);case E0:return this.quoted(t);case tI:return this.afterquote(t);case JC:return this.number(t);case mb:return}};of.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=E0;return}if(a_.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};of.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=pv;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=pv,this.currentObject=this.stack.pop(),this.currentObject||(this.state=mb);return}};of.prototype.number=function(t){if(eI.test(t)){this.word+=t;return}if(a_.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};of.prototype.quoted=function(t){if(t==='"'){this.state=tI;return}this.word+=t};of.prototype.keyword=function(t){if(OP.test(t)){this.word+=t;return}if(t==="["){var n=[];n.push(this.word),this.level++,this.root===null?this.root=n:this.currentObject.push(n),this.stack.push(this.currentObject),this.currentObject=n,this.state=pv;return}if(a_.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};of.prototype.neutral=function(t){if(zP.test(t)){this.word=t,this.state=$C;return}if(t==='"'){this.word="",this.state=E0;return}if(eI.test(t)){this.word=t,this.state=JC;return}if(a_.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};of.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===mb)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function BP(t){var n=new of(t);return n.output()}function Cw(t,n,i){Array.isArray(n)&&(i.unshift(n),n=null);var a=n?{}:t,h=i.reduce(function(m,o){return lm(o,m),m},a);n&&(t[n]=h)}function lm(t,n){if(!Array.isArray(t)){n[t]=!0;return}var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1){if(Array.isArray(t[0])){n[i]={},lm(t[0],n[i]);return}n[i]=t[0];return}if(!t.length){n[i]=!0;return}if(i==="TOWGS84"){n[i]=t;return}if(i==="AXIS"){i in n||(n[i]=[]),n[i].push(t);return}Array.isArray(i)||(n[i]={});var a;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":n[i]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&lm(t[2],n[i]);return;case"SPHEROID":case"ELLIPSOID":n[i]={name:t[0],a:t[1],rf:t[2]},t.length===4&&lm(t[3],n[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],Cw(n,i,t);return;default:for(a=-1;++a<t.length;)if(!Array.isArray(t[a]))return lm(t,n[i]);return Cw(n,i,t)}}var FP=.017453292519943295;function NP(t,n){var i=n[0],a=n[1];!(i in t)&&a in t&&(t[i]=t[a],n.length===3&&(t[i]=n[2](t[i])))}function Jc(t){return t*FP}function VP(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",i=0,a=t.AXIS.length;i<a;++i){var h=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];h[0].indexOf("north")!==-1||(h[0]==="y"||h[0]==="lat")&&h[1]==="north"?n+="n":h[0].indexOf("south")!==-1||(h[0]==="y"||h[0]==="lat")&&h[1]==="south"?n+="s":h[0].indexOf("east")!==-1||(h[0]==="x"||h[0]==="lon")&&h[1]==="east"?n+="e":(h[0].indexOf("west")!==-1||(h[0]==="x"||h[0]==="lon")&&h[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var m=t.GEOGCS;t.type==="GEOGCS"&&(m=t),m&&(m.DATUM?t.datumCode=m.DATUM.name.toLowerCase():t.datumCode=m.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),m.DATUM&&m.DATUM.SPHEROID&&(t.ellps=m.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=m.DATUM.SPHEROID.a,t.rf=parseFloat(m.DATUM.SPHEROID.rf,10)),m.DATUM&&m.DATUM.TOWGS84&&(t.datum_params=m.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function o(M){var T=t.to_meter||1;return M*T}var y=function(M){return NP(t,M)},x=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Jc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Jc],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Jc],["lat0","latitude_of_origin",Jc],["lat0","standard_parallel_1",Jc],["lat1","standard_parallel_1",Jc],["lat2","standard_parallel_2",Jc],["azimuth","Azimuth"],["alpha","azimuth",Jc],["srsCode","name"]];x.forEach(y),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Jc(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Jc(t.lat0>0?90:-90))}function nI(t){var n=BP(t),i=n.shift(),a=n.shift();n.unshift(["name",a]),n.unshift(["type",i]);var h={};return lm(n,h),VP(h),h}function ul(t){var n=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?ul[t]=xx(arguments[1]):ul[t]=nI(arguments[1]):ul[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(a){Array.isArray(a)?ul.apply(n,a):ul(a)});if(typeof t=="string"){if(t in ul)return ul[t]}else"EPSG"in t?ul["EPSG:"+t.EPSG]=t:"ESRI"in t?ul["ESRI:"+t.ESRI]=t:"IAU2000"in t?ul["IAU2000:"+t.IAU2000]=t:console.log(t);return}}EP(ul);function UP(t){return typeof t=="string"}function jP(t){return t in ul}var HP=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function GP(t){return HP.some(function(n){return t.indexOf(n)>-1})}var qP=["3857","900913","3785","102113"];function WP(t){var n=op(t,"authority");if(n){var i=op(n,"epsg");return i&&qP.indexOf(i)>-1}}function ZP(t){var n=op(t,"extension");if(n)return op(n,"proj4")}function YP(t){return t[0]==="+"}function XP(t){if(UP(t)){if(jP(t))return ul[t];if(GP(t)){var n=nI(t);if(WP(n))return ul["EPSG:3857"];var i=ZP(n);return i?xx(i):n}if(YP(t))return xx(t)}else return t}function Iw(t,n){t=t||{};var i,a;if(!n)return t;for(a in n)i=n[a],i!==void 0&&(t[a]=i);return t}function ch(t,n,i){var a=t*n;return i/Math.sqrt(1-a*a)}function Cv(t){return t<0?-1:1}function Tn(t){return Math.abs(t)<=sa?t:t-Cv(t)*fv}function Ec(t,n,i){var a=t*i,h=.5*t;return a=Math.pow((1-a)/(1+a),h),Math.tan(.5*(Xe-n))/a}function dv(t,n){for(var i=.5*t,a,h,m=Xe-2*Math.atan(n),o=0;o<=15;o++)if(a=t*Math.sin(m),h=Xe-2*Math.atan(n*Math.pow((1-a)/(1+a),i))-m,m+=h,Math.abs(h)<=1e-10)return m;return-9999}function KP(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function QP(t){var n=t.x,i=t.y;if(i*rh>90&&i*rh<-90&&n*rh>180&&n*rh<-180)return null;var a,h;if(Math.abs(Math.abs(i)-Xe)<=xn)return null;if(this.sphere)a=this.x0+this.a*this.k0*Tn(n-this.long0),h=this.y0+this.a*this.k0*Math.log(Math.tan(jr+.5*i));else{var m=Math.sin(i),o=Ec(this.e,i,m);a=this.x0+this.a*this.k0*Tn(n-this.long0),h=this.y0-this.a*this.k0*Math.log(o)}return t.x=a,t.y=h,t}function $P(t){var n=t.x-this.x0,i=t.y-this.y0,a,h;if(this.sphere)h=Xe-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var m=Math.exp(-i/(this.a*this.k0));if(h=dv(this.e,m),h===-9999)return null}return a=Tn(this.long0+n/(this.a*this.k0)),t.x=a,t.y=h,t}var JP=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const t4={init:KP,forward:QP,inverse:$P,names:JP};function e4(){}function Mw(t){return t}var n4=["longlat","identity"];const i4={init:e4,forward:Mw,inverse:Mw,names:n4};var r4=[t4,i4],a0={},S0=[];function iI(t,n){var i=S0.length;return t.names?(S0[i]=t,t.names.forEach(function(a){a0[a.toLowerCase()]=i}),this):(console.log(n),!0)}function o4(t){if(!t)return!1;var n=t.toLowerCase();if(typeof a0[n]<"u"&&S0[a0[n]])return S0[a0[n]]}function a4(){r4.forEach(iI)}const s4={start:a4,add:iI,get:o4};var Ti={};Ti.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ti.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ti.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ti.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ti.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ti.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ti.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ti.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ti.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ti.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ti.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ti.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ti.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ti.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ti.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ti.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ti.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ti.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ti.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ti.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ti.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ti.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ti.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ti.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ti.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ti.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ti.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ti.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ti.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ti.hough={a:6378270,rf:297,ellipseName:"Hough"};Ti.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ti.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ti.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ti.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ti.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ti.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ti.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ti.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ti.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ti.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ti.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ti.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var l4=Ti.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ti.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function u4(t,n,i,a){var h=t*t,m=n*n,o=(h-m)/h,y=0;a?(t*=1-o*(PP+o*(LP+o*kP)),h=t*t,o=0):y=Math.sqrt(o);var x=(h-m)/m;return{es:o,e:y,ep2:x}}function c4(t,n,i,a,h){if(!t){var m=op(Ti,a);m||(m=l4),t=m.a,n=m.b,i=m.rf}return i&&!n&&(n=(1-1/i)*t),(i===0||Math.abs(t-n)<xn)&&(h=!0,n=t),{a:t,b:n,rf:i,sphere:h}}var Ha={};Ha.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Ha.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Ha.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Ha.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Ha.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Ha.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Ha.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Ha.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Ha.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Ha.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Ha.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Ha.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Ha.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Ha.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Ha.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Ha.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Ha.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Ha.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function h4(t,n,i,a,h,m,o){var y={};return t===void 0||t==="none"?y.datum_type=_x:y.datum_type=SP,n&&(y.datum_params=n.map(parseFloat),(y.datum_params[0]!==0||y.datum_params[1]!==0||y.datum_params[2]!==0)&&(y.datum_type=ed),y.datum_params.length>3&&(y.datum_params[3]!==0||y.datum_params[4]!==0||y.datum_params[5]!==0||y.datum_params[6]!==0)&&(y.datum_type=nd,y.datum_params[3]*=qg,y.datum_params[4]*=qg,y.datum_params[5]*=qg,y.datum_params[6]=y.datum_params[6]/1e6+1)),o&&(y.datum_type=vm,y.grids=o),y.a=i,y.b=a,y.es=h,y.ep2=m,y}var rI={};function f4(t,n){var i=new DataView(n),a=m4(i),h=g4(i,a),m=v4(i,h,a),o={header:h,subgrids:m};return rI[t]=o,o}function p4(t){if(t===void 0)return null;var n=t.split(",");return n.map(d4)}function d4(t){if(t.length===0)return null;var n=t[0]==="@";return n&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:t,mandatory:!n,grid:rI[t]||null,isNull:!1}}function um(t){return t/3600*Math.PI/180}function m4(t){var n=t.getInt32(8,!1);return n===11?!1:(n=t.getInt32(8,!0),n!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function g4(t,n){return{nFields:t.getInt32(8,n),nSubgridFields:t.getInt32(24,n),nSubgrids:t.getInt32(40,n),shiftType:bx(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,n),fromSemiMinorAxis:t.getFloat64(136,n),toSemiMajorAxis:t.getFloat64(152,n),toSemiMinorAxis:t.getFloat64(168,n)}}function bx(t,n,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(n,i)))}function v4(t,n,i){for(var a=176,h=[],m=0;m<n.nSubgrids;m++){var o=_4(t,a,i),y=x4(t,a,o,i),x=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),M=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);h.push({ll:[um(o.lowerLongitude),um(o.lowerLatitude)],del:[um(o.longitudeInterval),um(o.latitudeInterval)],lim:[x,M],count:o.gridNodeCount,cvs:y4(y)}),a+=176+o.gridNodeCount*16}return h}function y4(t){return t.map(function(n){return[um(n.longitudeShift),um(n.latitudeShift)]})}function _4(t,n,i){return{name:bx(t,n+8,n+16).trim(),parent:bx(t,n+24,n+24+8).trim(),lowerLatitude:t.getFloat64(n+72,i),upperLatitude:t.getFloat64(n+88,i),lowerLongitude:t.getFloat64(n+104,i),upperLongitude:t.getFloat64(n+120,i),latitudeInterval:t.getFloat64(n+136,i),longitudeInterval:t.getFloat64(n+152,i),gridNodeCount:t.getInt32(n+168,i)}}function x4(t,n,i,a){for(var h=n+176,m=16,o=[],y=0;y<i.gridNodeCount;y++){var x={latitudeShift:t.getFloat32(h+y*m,a),longitudeShift:t.getFloat32(h+y*m+4,a),latitudeAccuracy:t.getFloat32(h+y*m+8,a),longitudeAccuracy:t.getFloat32(h+y*m+12,a)};o.push(x)}return o}function oh(t,n){if(!(this instanceof oh))return new oh(t);n=n||function(M){if(M)throw M};var i=XP(t);if(typeof i!="object"){n(t);return}var a=oh.projections.get(i.projName);if(!a){n(t);return}if(i.datumCode&&i.datumCode!=="none"){var h=op(Ha,i.datumCode);h&&(i.datum_params=i.datum_params||(h.towgs84?h.towgs84.split(","):null),i.ellps=h.ellipse,i.datumName=h.datumName?h.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var m=c4(i.a,i.b,i.rf,i.ellps,i.sphere),o=u4(m.a,m.b,m.rf,i.R_A),y=p4(i.nadgrids),x=i.datum||h4(i.datumCode,i.datum_params,m.a,m.b,o.es,o.ep2,y);Iw(this,i),Iw(this,a),this.a=m.a,this.b=m.b,this.rf=m.rf,this.sphere=m.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=x,this.init(),n(null,this)}oh.projections=s4;oh.projections.start();function b4(t,n){return t.datum_type!==n.datum_type||t.a!==n.a||Math.abs(t.es-n.es)>5e-11?!1:t.datum_type===ed?t.datum_params[0]===n.datum_params[0]&&t.datum_params[1]===n.datum_params[1]&&t.datum_params[2]===n.datum_params[2]:t.datum_type===nd?t.datum_params[0]===n.datum_params[0]&&t.datum_params[1]===n.datum_params[1]&&t.datum_params[2]===n.datum_params[2]&&t.datum_params[3]===n.datum_params[3]&&t.datum_params[4]===n.datum_params[4]&&t.datum_params[5]===n.datum_params[5]&&t.datum_params[6]===n.datum_params[6]:!0}function oI(t,n,i){var a=t.x,h=t.y,m=t.z?t.z:0,o,y,x,M;if(h<-Xe&&h>-1.001*Xe)h=-Xe;else if(h>Xe&&h<1.001*Xe)h=Xe;else{if(h<-Xe)return{x:-1/0,y:-1/0,z:t.z};if(h>Xe)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),y=Math.sin(h),M=Math.cos(h),x=y*y,o=i/Math.sqrt(1-n*x),{x:(o+m)*M*Math.cos(a),y:(o+m)*M*Math.sin(a),z:(o*(1-n)+m)*y}}function aI(t,n,i,a){var h=1e-12,m=h*h,o=30,y,x,M,T,P,L,O,W,H,nt,lt,K,$,yt=t.x,Rt=t.y,Ct=t.z?t.z:0,Et,Gt,kt;if(y=Math.sqrt(yt*yt+Rt*Rt),x=Math.sqrt(yt*yt+Rt*Rt+Ct*Ct),y/i<h){if(Et=0,x/i<h)return Gt=Xe,kt=-a,{x:t.x,y:t.y,z:t.z}}else Et=Math.atan2(Rt,yt);M=Ct/x,T=y/x,P=1/Math.sqrt(1-n*(2-n)*T*T),W=T*(1-n)*P,H=M*P,$=0;do $++,O=i/Math.sqrt(1-n*H*H),kt=y*W+Ct*H-O*(1-n*H*H),L=n*O/(O+kt),P=1/Math.sqrt(1-L*(2-L)*T*T),nt=T*(1-L)*P,lt=M*P,K=lt*W-nt*H,W=nt,H=lt;while(K*K>m&&$<o);return Gt=Math.atan(lt/Math.abs(nt)),{x:Et,y:Gt,z:kt}}function A4(t,n,i){if(n===ed)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(n===nd){var a=i[0],h=i[1],m=i[2],o=i[3],y=i[4],x=i[5],M=i[6];return{x:M*(t.x-x*t.y+y*t.z)+a,y:M*(x*t.x+t.y-o*t.z)+h,z:M*(-y*t.x+o*t.y+t.z)+m}}}function w4(t,n,i){if(n===ed)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(n===nd){var a=i[0],h=i[1],m=i[2],o=i[3],y=i[4],x=i[5],M=i[6],T=(t.x-a)/M,P=(t.y-h)/M,L=(t.z-m)/M;return{x:T+x*P-y*L,y:-x*T+P+o*L,z:y*T-o*P+L}}}function Ky(t){return t===ed||t===nd}function C4(t,n,i){if(b4(t,n)||t.datum_type===_x||n.datum_type===_x)return i;var a=t.a,h=t.es;if(t.datum_type===vm){var m=Ew(t,!1,i);if(m!==0)return;a=bw,h=Aw}var o=n.a,y=n.b,x=n.es;if(n.datum_type===vm&&(o=bw,y=TP,x=Aw),h===x&&a===o&&!Ky(t.datum_type)&&!Ky(n.datum_type))return i;if(i=oI(i,h,a),Ky(t.datum_type)&&(i=A4(i,t.datum_type,t.datum_params)),Ky(n.datum_type)&&(i=w4(i,n.datum_type,n.datum_params)),i=aI(i,x,o,y),n.datum_type===vm){var M=Ew(n,!0,i);if(M!==0)return}return i}function Ew(t,n,i){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var a={x:-i.x,y:i.y},h={x:Number.NaN,y:Number.NaN},m=[];t:for(var o=0;o<t.grids.length;o++){var y=t.grids[o];if(m.push(y.name),y.isNull){h=a;break}if(y.mandatory,y.grid===null){if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1;continue}for(var x=y.grid.subgrids,M=0,T=x.length;M<T;M++){var P=x[M],L=(Math.abs(P.del[1])+Math.abs(P.del[0]))/1e4,O=P.ll[0]-L,W=P.ll[1]-L,H=P.ll[0]+(P.lim[0]-1)*P.del[0]+L,nt=P.ll[1]+(P.lim[1]-1)*P.del[1]+L;if(!(W>a.y||O>a.x||nt<a.y||H<a.x)&&(h=I4(a,n,P),!isNaN(h.x)))break t}}return isNaN(h.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*rh+" "+a.y*rh+" tried: '"+m+"'"),-1):(i.x=-h.x,i.y=h.y,0)}function I4(t,n,i){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var h={x:t.x,y:t.y};h.x-=i.ll[0],h.y-=i.ll[1],h.x=Tn(h.x-Math.PI)+Math.PI;var m=Sw(h,i);if(n){if(isNaN(m.x))return a;m.x=h.x-m.x,m.y=h.y-m.y;var o=9,y=1e-12,x,M;do{if(M=Sw(m,i),isNaN(M.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}x={x:h.x-(M.x+m.x),y:h.y-(M.y+m.y)},m.x+=x.x,m.y+=x.y}while(o--&&Math.abs(x.x)>y&&Math.abs(x.y)>y);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=Tn(m.x+i.ll[0]),a.y=m.y+i.ll[1]}else isNaN(m.x)||(a.x=t.x+m.x,a.y=t.y+m.y);return a}function Sw(t,n){var i={x:t.x/n.del[0],y:t.y/n.del[1]},a={x:Math.floor(i.x),y:Math.floor(i.y)},h={x:i.x-1*a.x,y:i.y-1*a.y},m={x:Number.NaN,y:Number.NaN},o;if(a.x<0||a.x>=n.lim[0]||a.y<0||a.y>=n.lim[1])return m;o=a.y*n.lim[0]+a.x;var y={x:n.cvs[o][0],y:n.cvs[o][1]};o++;var x={x:n.cvs[o][0],y:n.cvs[o][1]};o+=n.lim[0];var M={x:n.cvs[o][0],y:n.cvs[o][1]};o--;var T={x:n.cvs[o][0],y:n.cvs[o][1]},P=h.x*h.y,L=h.x*(1-h.y),O=(1-h.x)*(1-h.y),W=(1-h.x)*h.y;return m.x=O*y.x+L*x.x+W*T.x+P*M.x,m.y=O*y.y+L*x.y+W*T.y+P*M.y,m}function Tw(t,n,i){var a=i.x,h=i.y,m=i.z||0,o,y,x,M={};for(x=0;x<3;x++)if(!(n&&x===2&&i.z===void 0))switch(x===0?(o=a,"ew".indexOf(t.axis[x])!==-1?y="x":y="y"):x===1?(o=h,"ns".indexOf(t.axis[x])!==-1?y="y":y="x"):(o=m,y="z"),t.axis[x]){case"e":M[y]=o;break;case"w":M[y]=-o;break;case"n":M[y]=o;break;case"s":M[y]=-o;break;case"u":i[y]!==void 0&&(M.z=o);break;case"d":i[y]!==void 0&&(M.z=-o);break;default:return null}return M}function sI(t){var n={x:t[0],y:t[1]};return t.length>2&&(n.z=t[2]),t.length>3&&(n.m=t[3]),n}function M4(t){Pw(t.x),Pw(t.y)}function Pw(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function E4(t,n){return(t.datum.datum_type===ed||t.datum.datum_type===nd||t.datum.datum_type===vm)&&n.datumCode!=="WGS84"||(n.datum.datum_type===ed||n.datum.datum_type===nd||n.datum.datum_type===vm)&&t.datumCode!=="WGS84"}function T0(t,n,i,a){var h;Array.isArray(i)?i=sI(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var m=i.z!==void 0;if(M4(i),t.datum&&n.datum&&E4(t,n)&&(h=new oh("WGS84"),i=T0(t,h,i,a),t=h),a&&t.axis!=="enu"&&(i=Tw(t,!1,i)),t.projName==="longlat")i={x:i.x*gs,y:i.y*gs,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=C4(t.datum,n.datum,i),!!i)return n.from_greenwich&&(i={x:i.x-n.from_greenwich,y:i.y,z:i.z||0}),n.projName==="longlat"?i={x:i.x*rh,y:i.y*rh,z:i.z||0}:(i=n.forward(i),n.to_meter&&(i={x:i.x/n.to_meter,y:i.y/n.to_meter,z:i.z||0})),a&&n.axis!=="enu"?Tw(n,!0,i):(i&&!m&&delete i.z,i)}var Lw=oh("WGS84");function R1(t,n,i,a){var h,m,o;return Array.isArray(i)?(h=T0(t,n,i,a)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"?typeof h.z=="number"?[h.x,h.y,h.z].concat(i.splice(3)):[h.x,h.y,i[2]].concat(i.splice(3)):[h.x,h.y].concat(i.splice(2)):[h.x,h.y]):(m=T0(t,n,i,a),o=Object.keys(i),o.length===2||o.forEach(function(y){if(typeof t.name<"u"&&t.name==="geocent"||typeof n.name<"u"&&n.name==="geocent"){if(y==="x"||y==="y"||y==="z")return}else if(y==="x"||y==="y")return;m[y]=i[y]}),m)}function kw(t){return t instanceof oh?t:t.oProj?t.oProj:oh(t)}function mu(t,n,i){t=kw(t);var a=!1,h;return typeof n>"u"?(n=t,t=Lw,a=!0):(typeof n.x<"u"||Array.isArray(n))&&(i=n,n=t,t=Lw,a=!0),n=kw(n),i?R1(t,n,i):(h={forward:function(m,o){return R1(t,n,m,o)},inverse:function(m,o){return R1(n,t,m,o)}},a&&(h.oProj=n),h)}var Dw=6,lI="AJSAJS",uI="AFAFAF",cm=65,Fl=73,Yu=79,Eg=86,Sg=90;const S4={forward:cI,inverse:T4,toPoint:hI};function cI(t,n){return n=n||5,k4(P4({lat:t[1],lon:t[0]}),n)}function T4(t){var n=gb(pI(t.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat,n.lon,n.lat]:[n.left,n.bottom,n.right,n.top]}function hI(t){var n=gb(pI(t.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat]:[(n.left+n.right)/2,(n.top+n.bottom)/2]}function z1(t){return t*(Math.PI/180)}function Rw(t){return 180*(t/Math.PI)}function P4(t){var n=t.lat,i=t.lon,a=6378137,h=.00669438,m=.9996,o,y,x,M,T,P,L,O=z1(n),W=z1(i),H,nt;nt=Math.floor((i+180)/6)+1,i===180&&(nt=60),n>=56&&n<64&&i>=3&&i<12&&(nt=32),n>=72&&n<84&&(i>=0&&i<9?nt=31:i>=9&&i<21?nt=33:i>=21&&i<33?nt=35:i>=33&&i<42&&(nt=37)),o=(nt-1)*6-180+3,H=z1(o),y=h/(1-h),x=a/Math.sqrt(1-h*Math.sin(O)*Math.sin(O)),M=Math.tan(O)*Math.tan(O),T=y*Math.cos(O)*Math.cos(O),P=Math.cos(O)*(W-H),L=a*((1-h/4-3*h*h/64-5*h*h*h/256)*O-(3*h/8+3*h*h/32+45*h*h*h/1024)*Math.sin(2*O)+(15*h*h/256+45*h*h*h/1024)*Math.sin(4*O)-35*h*h*h/3072*Math.sin(6*O));var lt=m*x*(P+(1-M+T)*P*P*P/6+(5-18*M+M*M+72*T-58*y)*P*P*P*P*P/120)+5e5,K=m*(L+x*Math.tan(O)*(P*P/2+(5-M+9*T+4*T*T)*P*P*P*P/24+(61-58*M+M*M+600*T-330*y)*P*P*P*P*P*P/720));return n<0&&(K+=1e7),{northing:Math.round(K),easting:Math.round(lt),zoneNumber:nt,zoneLetter:L4(n)}}function gb(t){var n=t.northing,i=t.easting,a=t.zoneLetter,h=t.zoneNumber;if(h<0||h>60)return null;var m=.9996,o=6378137,y=.00669438,x,M=(1-Math.sqrt(1-y))/(1+Math.sqrt(1-y)),T,P,L,O,W,H,nt,lt,K,$=i-5e5,yt=n;a<"N"&&(yt-=1e7),nt=(h-1)*6-180+3,x=y/(1-y),H=yt/m,lt=H/(o*(1-y/4-3*y*y/64-5*y*y*y/256)),K=lt+(3*M/2-27*M*M*M/32)*Math.sin(2*lt)+(21*M*M/16-55*M*M*M*M/32)*Math.sin(4*lt)+151*M*M*M/96*Math.sin(6*lt),T=o/Math.sqrt(1-y*Math.sin(K)*Math.sin(K)),P=Math.tan(K)*Math.tan(K),L=x*Math.cos(K)*Math.cos(K),O=o*(1-y)/Math.pow(1-y*Math.sin(K)*Math.sin(K),1.5),W=$/(T*m);var Rt=K-T*Math.tan(K)/O*(W*W/2-(5+3*P+10*L-4*L*L-9*x)*W*W*W*W/24+(61+90*P+298*L+45*P*P-252*x-3*L*L)*W*W*W*W*W*W/720);Rt=Rw(Rt);var Ct=(W-(1+2*P+L)*W*W*W/6+(5-2*L+28*P-3*L*L+8*x+24*P*P)*W*W*W*W*W/120)/Math.cos(K);Ct=nt+Rw(Ct);var Et;if(t.accuracy){var Gt=gb({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Et={top:Gt.lat,right:Gt.lon,bottom:Rt,left:Ct}}else Et={lat:Rt,lon:Ct};return Et}function L4(t){var n="Z";return 84>=t&&t>=72?n="X":72>t&&t>=64?n="W":64>t&&t>=56?n="V":56>t&&t>=48?n="U":48>t&&t>=40?n="T":40>t&&t>=32?n="S":32>t&&t>=24?n="R":24>t&&t>=16?n="Q":16>t&&t>=8?n="P":8>t&&t>=0?n="N":0>t&&t>=-8?n="M":-8>t&&t>=-16?n="L":-16>t&&t>=-24?n="K":-24>t&&t>=-32?n="J":-32>t&&t>=-40?n="H":-40>t&&t>=-48?n="G":-48>t&&t>=-56?n="F":-56>t&&t>=-64?n="E":-64>t&&t>=-72?n="D":-72>t&&t>=-80&&(n="C"),n}function k4(t,n){var i="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+D4(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,n)+a.substr(a.length-5,n)}function D4(t,n,i){var a=fI(i),h=Math.floor(t/1e5),m=Math.floor(n/1e5)%20;return R4(h,m,a)}function fI(t){var n=t%Dw;return n===0&&(n=Dw),n}function R4(t,n,i){var a=i-1,h=lI.charCodeAt(a),m=uI.charCodeAt(a),o=h+t-1,y=m+n,x=!1;o>Sg&&(o=o-Sg+cm-1,x=!0),(o===Fl||h<Fl&&o>Fl||(o>Fl||h<Fl)&&x)&&o++,(o===Yu||h<Yu&&o>Yu||(o>Yu||h<Yu)&&x)&&(o++,o===Fl&&o++),o>Sg&&(o=o-Sg+cm-1),y>Eg?(y=y-Eg+cm-1,x=!0):x=!1,(y===Fl||m<Fl&&y>Fl||(y>Fl||m<Fl)&&x)&&y++,(y===Yu||m<Yu&&y>Yu||(y>Yu||m<Yu)&&x)&&(y++,y===Fl&&y++),y>Eg&&(y=y-Eg+cm-1);var M=String.fromCharCode(o)+String.fromCharCode(y);return M}function pI(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var n=t.length,i=null,a="",h,m=0;!/[A-Z]/.test(h=t.charAt(m));){if(m>=2)throw"MGRSPoint bad conversion from: "+t;a+=h,m++}var o=parseInt(a,10);if(m===0||m+3>n)throw"MGRSPoint bad conversion from: "+t;var y=t.charAt(m++);if(y<="A"||y==="B"||y==="Y"||y>="Z"||y==="I"||y==="O")throw"MGRSPoint zone letter "+y+" not handled: "+t;i=t.substring(m,m+=2);for(var x=fI(o),M=z4(i.charAt(0),x),T=O4(i.charAt(1),x);T<B4(y);)T+=2e6;var P=n-m;if(P%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var L=P/2,O=0,W=0,H,nt,lt,K,$;return L>0&&(H=1e5/Math.pow(10,L),nt=t.substring(m,m+L),O=parseFloat(nt)*H,lt=t.substring(m+L),W=parseFloat(lt)*H),K=O+M,$=W+T,{easting:K,northing:$,zoneLetter:y,zoneNumber:o,accuracy:H}}function z4(t,n){for(var i=lI.charCodeAt(n-1),a=1e5,h=!1;i!==t.charCodeAt(0);){if(i++,i===Fl&&i++,i===Yu&&i++,i>Sg){if(h)throw"Bad character: "+t;i=cm,h=!0}a+=1e5}return a}function O4(t,n){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=uI.charCodeAt(n-1),a=0,h=!1;i!==t.charCodeAt(0);){if(i++,i===Fl&&i++,i===Yu&&i++,i>Eg){if(h)throw"Bad character: "+t;i=cm,h=!0}a+=1e5}return a}function B4(t){var n;switch(t){case"C":n=11e5;break;case"D":n=2e6;break;case"E":n=28e5;break;case"F":n=37e5;break;case"G":n=46e5;break;case"H":n=55e5;break;case"J":n=64e5;break;case"K":n=73e5;break;case"L":n=82e5;break;case"M":n=91e5;break;case"N":n=0;break;case"P":n=8e5;break;case"Q":n=17e5;break;case"R":n=26e5;break;case"S":n=35e5;break;case"T":n=44e5;break;case"U":n=53e5;break;case"V":n=62e5;break;case"W":n=7e6;break;case"X":n=79e5;break;default:n=-1}if(n>=0)return n;throw"Invalid zone letter: "+t}function Mm(t,n,i){if(!(this instanceof Mm))return new Mm(t,n,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof n>"u"){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=n,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Mm.fromMGRS=function(t){return new Mm(hI(t))};Mm.prototype.toMGRS=function(t){return cI([this.x,this.y],t)};var F4=1,N4=.25,zw=.046875,Ow=.01953125,Bw=.01068115234375,V4=.75,U4=.46875,j4=.013020833333333334,H4=.007120768229166667,G4=.3645833333333333,q4=.005696614583333333,W4=.3076171875;function dI(t){var n=[];n[0]=F4-t*(N4+t*(zw+t*(Ow+t*Bw))),n[1]=t*(V4-t*(zw+t*(Ow+t*Bw)));var i=t*t;return n[2]=i*(U4-t*(j4+t*H4)),i*=t,n[3]=i*(G4-t*q4),n[4]=i*t*W4,n}function s_(t,n,i,a){return i*=n,n*=n,a[0]*t-i*(a[1]+n*(a[2]+n*(a[3]+n*a[4])))}var Z4=20;function mI(t,n,i){for(var a=1/(1-n),h=t,m=Z4;m;--m){var o=Math.sin(h),y=1-n*o*o;if(y=(s_(h,o,Math.cos(h),i)-t)*(y*Math.sqrt(y))*a,h-=y,Math.abs(y)<xn)return h}return h}function Y4(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=dI(this.es),this.ml0=s_(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function X4(t){var n=t.x,i=t.y,a=Tn(n-this.long0),h,m,o,y=Math.sin(i),x=Math.cos(i);if(this.es){var T=x*a,P=Math.pow(T,2),L=this.ep2*Math.pow(x,2),O=Math.pow(L,2),W=Math.abs(x)>xn?Math.tan(i):0,H=Math.pow(W,2),nt=Math.pow(H,2);h=1-this.es*Math.pow(y,2),T=T/Math.sqrt(h);var lt=s_(i,y,x,this.en);m=this.a*(this.k0*T*(1+P/6*(1-H+L+P/20*(5-18*H+nt+14*L-58*H*L+P/42*(61+179*nt-nt*H-479*H)))))+this.x0,o=this.a*(this.k0*(lt-this.ml0+y*a*T/2*(1+P/12*(5-H+9*L+4*O+P/30*(61+nt-58*H+270*L-330*H*L+P/56*(1385+543*nt-nt*H-3111*H))))))+this.y0}else{var M=x*Math.sin(a);if(Math.abs(Math.abs(M)-1)<xn)return 93;if(m=.5*this.a*this.k0*Math.log((1+M)/(1-M))+this.x0,o=x*Math.cos(a)/Math.sqrt(1-Math.pow(M,2)),M=Math.abs(o),M>=1){if(M-1>xn)return 93;o=0}else o=Math.acos(o);i<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=m,t.y=o,t}function K4(t){var n,i,a,h,m=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(n=this.ml0+o/this.k0,i=mI(n,this.es,this.en),Math.abs(i)<Xe){var P=Math.sin(i),L=Math.cos(i),O=Math.abs(L)>xn?Math.tan(i):0,W=this.ep2*Math.pow(L,2),H=Math.pow(W,2),nt=Math.pow(O,2),lt=Math.pow(nt,2);n=1-this.es*Math.pow(P,2);var K=m*Math.sqrt(n)/this.k0,$=Math.pow(K,2);n=n*O,a=i-n*$/(1-this.es)*.5*(1-$/12*(5+3*nt-9*W*nt+W-4*H-$/30*(61+90*nt-252*W*nt+45*lt+46*W-$/56*(1385+3633*nt+4095*lt+1574*lt*nt)))),h=Tn(this.long0+K*(1-$/6*(1+2*nt+W-$/20*(5+28*nt+24*lt+8*W*nt+6*W-$/42*(61+662*nt+1320*lt+720*lt*nt))))/L)}else a=Xe*Cv(o),h=0;else{var y=Math.exp(m/this.k0),x=.5*(y-1/y),M=this.lat0+o/this.k0,T=Math.cos(M);n=Math.sqrt((1-Math.pow(T,2))/(1+Math.pow(x,2))),a=Math.asin(n),o<0&&(a=-a),x===0&&T===0?h=0:h=Tn(Math.atan2(x,T)+this.long0)}return t.x=h,t.y=a,t}var Q4=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const s0={init:Y4,forward:X4,inverse:K4,names:Q4};function gI(t){var n=Math.exp(t);return n=(n-1/n)/2,n}function Ku(t,n){t=Math.abs(t),n=Math.abs(n);var i=Math.max(t,n),a=Math.min(t,n)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))}function $4(t){var n=1+t,i=n-1;return i===0?t:t*Math.log(n)/i}function J4(t){var n=Math.abs(t);return n=$4(n*(1+n/(Ku(1,n)+1))),t<0?-n:n}function vb(t,n){for(var i=2*Math.cos(2*n),a=t.length-1,h=t[a],m=0,o;--a>=0;)o=-m+i*h+t[a],m=h,h=o;return n+o*Math.sin(2*n)}function tL(t,n){for(var i=2*Math.cos(n),a=t.length-1,h=t[a],m=0,o;--a>=0;)o=-m+i*h+t[a],m=h,h=o;return Math.sin(n)*o}function eL(t){var n=Math.exp(t);return n=(n+1/n)/2,n}function vI(t,n,i){for(var a=Math.sin(n),h=Math.cos(n),m=gI(i),o=eL(i),y=2*h*o,x=-2*a*m,M=t.length-1,T=t[M],P=0,L=0,O=0,W,H;--M>=0;)W=L,H=P,L=T,P=O,T=-W+y*L-x*P+t[M],O=-H+x*L+y*P;return y=a*o,x=h*m,[y*T-x*O,y*O+x*T]}function nL(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(s0.init.apply(this),this.forward=s0.forward,this.inverse=s0.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),n=t/(2-t),i=n;this.cgb[0]=n*(2+n*(-2/3+n*(-2+n*(116/45+n*(26/45+n*(-2854/675)))))),this.cbg[0]=n*(-2+n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725)))))),i=i*n,this.cgb[1]=i*(7/3+n*(-8/5+n*(-227/45+n*(2704/315+n*(2323/945))))),this.cbg[1]=i*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945))))),i=i*n,this.cgb[2]=i*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835)))),this.cbg[2]=i*(-26/15+n*(34/21+n*(8/5+n*(-12686/2835)))),i=i*n,this.cgb[3]=i*(4279/630+n*(-332/35+n*(-399572/14175))),this.cbg[3]=i*(1237/630+n*(-12/5+n*(-24832/14175))),i=i*n,this.cgb[4]=i*(4174/315+n*(-144838/6237)),this.cbg[4]=i*(-734/315+n*(109598/31185)),i=i*n,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(n,2),this.Qn=this.k0/(1+n)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=n*(-.5+n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800)))))),this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800)))))),this.utg[1]=i*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720))))),this.gtu[1]=i*(13/48+n*(-3/5+n*(557/1440+n*(281/630+n*(-1983433/1935360))))),i=i*n,this.utg[2]=i*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720)))),this.gtu[2]=i*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440)))),i=i*n,this.utg[3]=i*(-4397/161280+n*(11/504+n*(830251/7257600))),this.gtu[3]=i*(49561/161280+n*(-179/168+n*(6601661/7257600))),i=i*n,this.utg[4]=i*(-4583/161280+n*(108847/3991680)),this.gtu[4]=i*(34729/80640+n*(-3418889/1995840)),i=i*n,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var a=vb(this.cbg,this.lat0);this.Zb=-this.Qn*(a+tL(this.gtu,2*a))}function iL(t){var n=Tn(t.x-this.long0),i=t.y;i=vb(this.cbg,i);var a=Math.sin(i),h=Math.cos(i),m=Math.sin(n),o=Math.cos(n);i=Math.atan2(a,o*h),n=Math.atan2(m*h,Ku(a,h*o)),n=J4(Math.tan(n));var y=vI(this.gtu,2*i,2*n);i=i+y[0],n=n+y[1];var x,M;return Math.abs(n)<=2.623395162778?(x=this.a*(this.Qn*n)+this.x0,M=this.a*(this.Qn*i+this.Zb)+this.y0):(x=1/0,M=1/0),t.x=x,t.y=M,t}function rL(t){var n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,n=n/this.Qn;var a,h;if(Math.abs(n)<=2.623395162778){var m=vI(this.utg,2*i,2*n);i=i+m[0],n=n+m[1],n=Math.atan(gI(n));var o=Math.sin(i),y=Math.cos(i),x=Math.sin(n),M=Math.cos(n);i=Math.atan2(o*M,Ku(x,M*y)),n=Math.atan2(x,M*y),a=Tn(n+this.long0),h=vb(this.cgb,i)}else a=1/0,h=1/0;return t.x=a,t.y=h,t}var oL=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const l0={init:nL,forward:iL,inverse:rL,names:oL};function aL(t,n){if(t===void 0){if(t=Math.floor((Tn(n)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var sL="etmerc";function lL(){var t=aL(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*gs,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,l0.init.apply(this),this.forward=l0.forward,this.inverse=l0.inverse}var uL=["Universal Transverse Mercator System","utm"];const cL={init:lL,names:uL,dependsOn:sL};function yb(t,n){return Math.pow((1-t)/(1+t),n)}var hL=20;function fL(){var t=Math.sin(this.lat0),n=Math.cos(this.lat0);n*=n,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*n*n/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+jr)/(Math.pow(Math.tan(.5*this.lat0+jr),this.C)*yb(this.e*t,this.ratexp))}function pL(t){var n=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+jr),this.C)*yb(this.e*Math.sin(i),this.ratexp))-Xe,t.x=this.C*n,t}function dL(t){for(var n=1e-14,i=t.x/this.C,a=t.y,h=Math.pow(Math.tan(.5*a+jr)/this.K,1/this.C),m=hL;m>0&&(a=2*Math.atan(h*yb(this.e*Math.sin(t.y),-.5*this.e))-Xe,!(Math.abs(a-t.y)<n));--m)t.y=a;return m?(t.x=i,t.y=a,t):null}var mL=["gauss"];const _b={init:fL,forward:pL,inverse:dL,names:mL};function gL(){_b.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function vL(t){var n,i,a,h;return t.x=Tn(t.x-this.long0),_b.forward.apply(this,[t]),n=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),h=this.k0*this.R2/(1+this.sinc0*n+this.cosc0*i*a),t.x=h*i*Math.sin(t.x),t.y=h*(this.cosc0*n-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function yL(t){var n,i,a,h,m;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,m=Ku(t.x,t.y)){var o=2*Math.atan2(m,this.R2);n=Math.sin(o),i=Math.cos(o),h=Math.asin(i*this.sinc0+t.y*n*this.cosc0/m),a=Math.atan2(t.x*n,m*this.cosc0*i-t.y*this.sinc0*n)}else h=this.phic0,a=0;return t.x=a,t.y=h,_b.inverse.apply(this,[t]),t.x=Tn(t.x+this.long0),t}var _L=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const xL={init:gL,forward:vL,inverse:yL,names:_L};function bL(t,n,i){return n*=i,Math.tan(.5*(Xe+t))*Math.pow((1-n)/(1+n),.5*i)}function AL(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=xn&&(this.k0=.5*(1+Cv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=xn&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=xn&&Math.abs(Math.cos(this.lat_ts))>xn&&(this.k0=.5*this.cons*ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ec(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ch(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Xe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function wL(t){var n=t.x,i=t.y,a=Math.sin(i),h=Math.cos(i),m,o,y,x,M,T,P=Tn(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=xn&&Math.abs(i+this.lat0)<=xn?(t.x=NaN,t.y=NaN,t):this.sphere?(m=2*this.k0/(1+this.sinlat0*a+this.coslat0*h*Math.cos(P)),t.x=this.a*m*h*Math.sin(P)+this.x0,t.y=this.a*m*(this.coslat0*a-this.sinlat0*h*Math.cos(P))+this.y0,t):(o=2*Math.atan(this.ssfn_(i,a,this.e))-Xe,x=Math.cos(o),y=Math.sin(o),Math.abs(this.coslat0)<=xn?(M=Ec(this.e,i*this.con,this.con*a),T=2*this.a*this.k0*M/this.cons,t.x=this.x0+T*Math.sin(n-this.long0),t.y=this.y0-this.con*T*Math.cos(n-this.long0),t):(Math.abs(this.sinlat0)<xn?(m=2*this.a*this.k0/(1+x*Math.cos(P)),t.y=m*y):(m=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*y+this.cosX0*x*Math.cos(P))),t.y=m*(this.cosX0*y-this.sinX0*x*Math.cos(P))+this.y0),t.x=m*x*Math.sin(P)+this.x0,t))}function CL(t){t.x-=this.x0,t.y-=this.y0;var n,i,a,h,m,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var y=2*Math.atan(o/(2*this.a*this.k0));return n=this.long0,i=this.lat0,o<=xn?(t.x=n,t.y=i,t):(i=Math.asin(Math.cos(y)*this.sinlat0+t.y*Math.sin(y)*this.coslat0/o),Math.abs(this.coslat0)<xn?this.lat0>0?n=Tn(this.long0+Math.atan2(t.x,-1*t.y)):n=Tn(this.long0+Math.atan2(t.x,t.y)):n=Tn(this.long0+Math.atan2(t.x*Math.sin(y),o*this.coslat0*Math.cos(y)-t.y*this.sinlat0*Math.sin(y))),t.x=n,t.y=i,t)}else if(Math.abs(this.coslat0)<=xn){if(o<=xn)return i=this.lat0,n=this.long0,t.x=n,t.y=i,t;t.x*=this.con,t.y*=this.con,a=o*this.cons/(2*this.a*this.k0),i=this.con*dv(this.e,a),n=this.con*Tn(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else h=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,o<=xn?m=this.X0:(m=Math.asin(Math.cos(h)*this.sinX0+t.y*Math.sin(h)*this.cosX0/o),n=Tn(this.long0+Math.atan2(t.x*Math.sin(h),o*this.cosX0*Math.cos(h)-t.y*this.sinX0*Math.sin(h)))),i=-1*dv(this.e,Math.tan(.5*(Xe+m)));return t.x=n,t.y=i,t}var IL=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const ML={init:AL,forward:wL,inverse:CL,names:IL,ssfn_:bL};function EL(){var t=this.lat0;this.lambda0=this.long0;var n=Math.sin(t),i=this.a,a=this.rf,h=1/a,m=2*h-Math.pow(h,2),o=this.e=Math.sqrt(m);this.R=this.k0*i*Math.sqrt(1-m)/(1-m*Math.pow(n,2)),this.alpha=Math.sqrt(1+m/(1-m)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(n/this.alpha);var y=Math.log(Math.tan(Math.PI/4+this.b0/2)),x=Math.log(Math.tan(Math.PI/4+t/2)),M=Math.log((1+o*n)/(1-o*n));this.K=y-this.alpha*x+this.alpha*o/2*M}function SL(t){var n=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(n+i)+this.K,h=2*(Math.atan(Math.exp(a))-Math.PI/4),m=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(m)/(Math.sin(this.b0)*Math.tan(h)+Math.cos(this.b0)*Math.cos(m))),y=Math.asin(Math.cos(this.b0)*Math.sin(h)-Math.sin(this.b0)*Math.cos(h)*Math.cos(m));return t.y=this.R/2*Math.log((1+Math.sin(y))/(1-Math.sin(y)))+this.y0,t.x=this.R*o+this.x0,t}function TL(t){for(var n=t.x-this.x0,i=t.y-this.y0,a=n/this.R,h=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),m=Math.asin(Math.cos(this.b0)*Math.sin(h)+Math.sin(this.b0)*Math.cos(h)*Math.cos(a)),o=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(h))),y=this.lambda0+o/this.alpha,x=0,M=m,T=-1e3,P=0;Math.abs(M-T)>1e-7;){if(++P>20)return;x=1/this.alpha*(Math.log(Math.tan(Math.PI/4+m/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(M))/2)),T=M,M=2*Math.atan(Math.exp(x))-Math.PI/2}return t.x=y,t.y=M,t}var PL=["somerc"];const LL={init:EL,forward:SL,inverse:TL,names:PL};var am=1e-7;function kL(t){var n=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||n.indexOf(i)!==-1}function DL(){var t,n,i,a,h,m,o,y,x,M,T=0,P,L=0,O=0,W=0,H=0,nt=0,lt=0;this.no_off=kL(this),this.no_rot="no_rot"in this;var K=!1;"alpha"in this&&(K=!0);var $=!1;if("rectified_grid_angle"in this&&($=!0),K&&(lt=this.alpha),$&&(T=this.rectified_grid_angle*gs),K||$)L=this.longc;else if(O=this.long1,H=this.lat1,W=this.long2,nt=this.lat2,Math.abs(H-nt)<=am||(t=Math.abs(H))<=am||Math.abs(t-Xe)<=am||Math.abs(Math.abs(this.lat0)-Xe)<=am||Math.abs(Math.abs(nt)-Xe)<=am)throw new Error;var yt=1-this.es;n=Math.sqrt(yt),Math.abs(this.lat0)>xn?(y=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*y*y,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/yt),this.A=this.B*this.k0*n/t,a=this.B*n/(i*Math.sqrt(t)),h=a*a-1,h<=0?h=0:(h=Math.sqrt(h),this.lat0<0&&(h=-h)),this.E=h+=a,this.E*=Math.pow(Ec(this.e,this.lat0,y),this.B)):(this.B=1/n,this.A=this.k0,this.E=a=h=1),K||$?(K?(P=Math.asin(Math.sin(lt)/a),$||(T=lt)):(P=T,lt=Math.asin(a*Math.sin(P))),this.lam0=L-Math.asin(.5*(h-1/h)*Math.tan(P))/this.B):(m=Math.pow(Ec(this.e,H,Math.sin(H)),this.B),o=Math.pow(Ec(this.e,nt,Math.sin(nt)),this.B),h=this.E/m,x=(o-m)/(o+m),M=this.E*this.E,M=(M-o*m)/(M+o*m),t=O-W,t<-Math.pi?W-=fv:t>Math.pi&&(W+=fv),this.lam0=Tn(.5*(O+W)-Math.atan(M*Math.tan(.5*this.B*(O-W))/x)/this.B),P=Math.atan(2*Math.sin(this.B*Tn(O-this.lam0))/(h-1/h)),T=lt=Math.asin(a*Math.sin(P))),this.singam=Math.sin(P),this.cosgam=Math.cos(P),this.sinrot=Math.sin(T),this.cosrot=Math.cos(T),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(lt))),this.lat0<0&&(this.u_0=-this.u_0)),h=.5*P,this.v_pole_n=this.ArB*Math.log(Math.tan(jr-h)),this.v_pole_s=this.ArB*Math.log(Math.tan(jr+h))}function RL(t){var n={},i,a,h,m,o,y,x,M;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Xe)>xn){if(o=this.E/Math.pow(Ec(this.e,t.y,Math.sin(t.y)),this.B),y=1/o,i=.5*(o-y),a=.5*(o+y),m=Math.sin(this.B*t.x),h=(i*this.singam-m*this.cosgam)/a,Math.abs(Math.abs(h)-1)<xn)throw new Error;M=.5*this.ArB*Math.log((1-h)/(1+h)),y=Math.cos(this.B*t.x),Math.abs(y)<am?x=this.A*t.x:x=this.ArB*Math.atan2(i*this.cosgam+m*this.singam,y)}else M=t.y>0?this.v_pole_n:this.v_pole_s,x=this.ArB*t.y;return this.no_rot?(n.x=x,n.y=M):(x-=this.u_0,n.x=M*this.cosrot+x*this.sinrot,n.y=x*this.cosrot-M*this.sinrot),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function zL(t){var n,i,a,h,m,o,y,x={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,n=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,n=t.y*this.cosrot+t.x*this.sinrot+this.u_0),a=Math.exp(-this.BrA*i),h=.5*(a-1/a),m=.5*(a+1/a),o=Math.sin(this.BrA*n),y=(o*this.cosgam+h*this.singam)/m,Math.abs(Math.abs(y)-1)<xn)x.x=0,x.y=y<0?-Xe:Xe;else{if(x.y=this.E/Math.sqrt((1+y)/(1-y)),x.y=dv(this.e,Math.pow(x.y,1/this.B)),x.y===1/0)throw new Error;x.x=-this.rB*Math.atan2(h*this.cosgam-o*this.singam,Math.cos(this.BrA*n))}return x.x+=this.lam0,x}var OL=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const BL={init:DL,forward:RL,inverse:zL,names:OL};function FL(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<xn)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var n=Math.sin(this.lat1),i=Math.cos(this.lat1),a=ch(this.e,n,i),h=Ec(this.e,this.lat1,n),m=Math.sin(this.lat2),o=Math.cos(this.lat2),y=ch(this.e,m,o),x=Ec(this.e,this.lat2,m),M=Ec(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>xn?this.ns=Math.log(a/y)/Math.log(h/x):this.ns=n,isNaN(this.ns)&&(this.ns=n),this.f0=a/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(M,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function NL(t){var n=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=xn&&(i=Cv(i)*(Xe-2*xn));var a=Math.abs(Math.abs(i)-Xe),h,m;if(a>xn)h=Ec(this.e,i,Math.sin(i)),m=this.a*this.f0*Math.pow(h,this.ns);else{if(a=i*this.ns,a<=0)return null;m=0}var o=this.ns*Tn(n-this.long0);return t.x=this.k0*(m*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-m*Math.cos(o))+this.y0,t}function VL(t){var n,i,a,h,m,o=(t.x-this.x0)/this.k0,y=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(o*o+y*y),i=1):(n=-Math.sqrt(o*o+y*y),i=-1);var x=0;if(n!==0&&(x=Math.atan2(i*o,i*y)),n!==0||this.ns>0){if(i=1/this.ns,a=Math.pow(n/(this.a*this.f0),i),h=dv(this.e,a),h===-9999)return null}else h=-Xe;return m=Tn(x/this.ns+this.long0),t.x=m,t.y=h,t}var UL=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const jL={init:FL,forward:NL,inverse:VL,names:UL};function HL(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function GL(t){var n,i,a,h,m,o,y,x=t.x,M=t.y,T=Tn(x-this.long0);return n=Math.pow((1+this.e*Math.sin(M))/(1-this.e*Math.sin(M)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(M/2+this.s45),this.alfa)/n)-this.s45),a=-T*this.alfa,h=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),m=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(h)),o=this.n*m,y=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(h/2+this.s45),this.n),t.y=y*Math.cos(o)/1,t.x=y*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function qL(t){var n,i,a,h,m,o,y,x,M=t.x;t.x=t.y,t.y=M,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.y,t.x),h=m/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),n=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(h)),i=Math.asin(Math.cos(a)*Math.sin(h)/Math.cos(n)),t.x=this.long0-i/this.alfa,y=n,x=0;var T=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(n/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(y))/(1-this.e*Math.sin(y)),this.e/2))-this.s45),Math.abs(y-t.y)<1e-10&&(x=1),y=t.y,T+=1;while(x===0&&T<15);return T>=15?null:t}var WL=["Krovak","krovak"];const ZL={init:HL,forward:GL,inverse:qL,names:WL};function cl(t,n,i,a,h){return t*h-n*Math.sin(2*h)+i*Math.sin(4*h)-a*Math.sin(6*h)}function Iv(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Mv(t){return .375*t*(1+.25*t*(1+.46875*t))}function Ev(t){return .05859375*t*t*(1+.75*t)}function Sv(t){return t*t*t*(35/3072)}function Em(t,n,i){var a=n*i;return t/Math.sqrt(1-a*a)}function Dm(t){return Math.abs(t)<Xe?t:t-Cv(t)*Math.PI}function P0(t,n,i,a,h){var m,o;m=t/n;for(var y=0;y<15;y++)if(o=(t-(n*m-i*Math.sin(2*m)+a*Math.sin(4*m)-h*Math.sin(6*m)))/(n-2*i*Math.cos(2*m)+4*a*Math.cos(4*m)-6*h*Math.cos(6*m)),m+=o,Math.abs(o)<=1e-10)return m;return NaN}function YL(){this.sphere||(this.e0=Iv(this.es),this.e1=Mv(this.es),this.e2=Ev(this.es),this.e3=Sv(this.es),this.ml0=this.a*cl(this.e0,this.e1,this.e2,this.e3,this.lat0))}function XL(t){var n,i,a=t.x,h=t.y;if(a=Tn(a-this.long0),this.sphere)n=this.a*Math.asin(Math.cos(h)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(h),Math.cos(a))-this.lat0);else{var m=Math.sin(h),o=Math.cos(h),y=Em(this.a,this.e,m),x=Math.tan(h)*Math.tan(h),M=a*Math.cos(h),T=M*M,P=this.es*o*o/(1-this.es),L=this.a*cl(this.e0,this.e1,this.e2,this.e3,h);n=y*M*(1-T*x*(1/6-(8-x+8*P)*T/120)),i=L-this.ml0+y*m/o*T*(.5+(5-x+6*P)*T/24)}return t.x=n+this.x0,t.y=i+this.y0,t}function KL(t){t.x-=this.x0,t.y-=this.y0;var n=t.x/this.a,i=t.y/this.a,a,h;if(this.sphere){var m=i+this.lat0;a=Math.asin(Math.sin(m)*Math.cos(n)),h=Math.atan2(Math.tan(n),Math.cos(m))}else{var o=this.ml0/this.a+i,y=P0(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(y)-Xe)<=xn)return t.x=this.long0,t.y=Xe,i<0&&(t.y*=-1),t;var x=Em(this.a,this.e,Math.sin(y)),M=x*x*x/this.a/this.a*(1-this.es),T=Math.pow(Math.tan(y),2),P=n*this.a/x,L=P*P;a=y-x*Math.tan(y)/M*P*P*(.5-(1+3*T)*P*P/24),h=P*(1-L*(T/3+(1+3*T)*T*L/15))/Math.cos(y)}return t.x=Tn(h+this.long0),t.y=Dm(a),t}var QL=["Cassini","Cassini_Soldner","cass"];const $L={init:YL,forward:XL,inverse:KL,names:QL};function ep(t,n){var i;return t>1e-7?(i=t*n,(1-t*t)*(n/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*n}var JL=1,tk=2,ek=3,nk=4;function ik(){var t=Math.abs(this.lat0);if(Math.abs(t-Xe)<xn?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<xn?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var n;switch(this.qp=ep(this.e,1),this.mmf=.5/(1-this.es),this.apa=fk(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=ep(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function rk(t){var n,i,a,h,m,o,y,x,M,T,P=t.x,L=t.y;if(P=Tn(P-this.long0),this.sphere){if(m=Math.sin(L),T=Math.cos(L),a=Math.cos(P),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+T*a:1+this.sinph0*m+this.cosph0*T*a,i<=xn)return null;i=Math.sqrt(2/i),n=i*T*Math.sin(P),i*=this.mode===this.EQUIT?m:this.cosph0*m-this.sinph0*T*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(L+this.lat0)<xn)return null;i=jr-L*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),n=i*Math.sin(P),i*=a}}else{switch(y=0,x=0,M=0,a=Math.cos(P),h=Math.sin(P),m=Math.sin(L),o=ep(this.e,m),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=o/this.qp,x=Math.sqrt(1-y*y)),this.mode){case this.OBLIQ:M=1+this.sinb1*y+this.cosb1*x*a;break;case this.EQUIT:M=1+x*a;break;case this.N_POLE:M=Xe+L,o=this.qp-o;break;case this.S_POLE:M=L-Xe,o=this.qp+o;break}if(Math.abs(M)<xn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:M=Math.sqrt(2/M),this.mode===this.OBLIQ?i=this.ymf*M*(this.cosb1*y-this.sinb1*x*a):i=(M=Math.sqrt(2/(1+x*a)))*y*this.ymf,n=this.xmf*M*x*h;break;case this.N_POLE:case this.S_POLE:o>=0?(n=(M=Math.sqrt(o))*h,i=a*(this.mode===this.S_POLE?M:-M)):n=i=0;break}}return t.x=this.a*n+this.x0,t.y=this.a*i+this.y0,t}function ok(t){t.x-=this.x0,t.y-=this.y0;var n=t.x/this.a,i=t.y/this.a,a,h,m,o,y,x,M;if(this.sphere){var T=0,P,L=0;if(P=Math.sqrt(n*n+i*i),h=P*.5,h>1)return null;switch(h=2*Math.asin(h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(L=Math.sin(h),T=Math.cos(h)),this.mode){case this.EQUIT:h=Math.abs(P)<=xn?0:Math.asin(i*L/P),n*=L,i=T*P;break;case this.OBLIQ:h=Math.abs(P)<=xn?this.lat0:Math.asin(T*this.sinph0+i*L*this.cosph0/P),n*=L*this.cosph0,i=(T-Math.sin(h)*this.sinph0)*P;break;case this.N_POLE:i=-i,h=Xe-h;break;case this.S_POLE:h-=Xe;break}a=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(n,i)}else{if(M=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,i*=this.dd,x=Math.sqrt(n*n+i*i),x<xn)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*x/this.rq),m=Math.cos(o),n*=o=Math.sin(o),this.mode===this.OBLIQ?(M=m*this.sinb1+i*o*this.cosb1/x,y=this.qp*M,i=x*this.cosb1*m-i*this.sinb1*o):(M=i*o/x,y=this.qp*M,i=x*m)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),y=n*n+i*i,!y)return t.x=this.long0,t.y=this.lat0,t;M=1-y/this.qp,this.mode===this.S_POLE&&(M=-M)}a=Math.atan2(n,i),h=pk(Math.asin(M),this.apa)}return t.x=Tn(this.long0+a),t.y=h,t}var ak=.3333333333333333,sk=.17222222222222222,lk=.10257936507936508,uk=.06388888888888888,ck=.0664021164021164,hk=.016415012942191543;function fk(t){var n,i=[];return i[0]=t*ak,n=t*t,i[0]+=n*sk,i[1]=n*uk,n*=t,i[0]+=n*lk,i[1]+=n*ck,i[2]=n*hk,i}function pk(t,n){var i=t+t;return t+n[0]*Math.sin(i)+n[1]*Math.sin(i+i)+n[2]*Math.sin(i+i+i)}var dk=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const mk={init:ik,forward:rk,inverse:ok,names:dk,S_POLE:JL,N_POLE:tk,EQUIT:ek,OBLIQ:nk};function ap(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function gk(){Math.abs(this.lat1+this.lat2)<xn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ch(this.e3,this.sin_po,this.cos_po),this.qs1=ep(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ch(this.e3,this.sin_po,this.cos_po),this.qs2=ep(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ep(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>xn?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function vk(t){var n=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=ep(this.e3,this.sin_phi),h=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,m=this.ns0*Tn(n-this.long0),o=h*Math.sin(m)+this.x0,y=this.rh-h*Math.cos(m)+this.y0;return t.x=o,t.y=y,t}function yk(t){var n,i,a,h,m,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),h=0,n!==0&&(h=Math.atan2(a*t.x,a*t.y)),a=n*this.ns0/this.a,this.sphere?o=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,o=this.phi1z(this.e3,i)),m=Tn(h/this.ns0+this.long0),t.x=m,t.y=o,t}function _k(t,n){var i,a,h,m,o,y=ap(.5*n);if(t<xn)return y;for(var x=t*t,M=1;M<=25;M++)if(i=Math.sin(y),a=Math.cos(y),h=t*i,m=1-h*h,o=.5*m*m/a*(n/(1-x)-i/m+.5/t*Math.log((1-h)/(1+h))),y=y+o,Math.abs(o)<=1e-7)return y;return null}var xk=["Albers_Conic_Equal_Area","Albers","aea"];const bk={init:gk,forward:vk,inverse:yk,names:xk,phi1z:_k};function Ak(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function wk(t){var n,i,a,h,m,o,y,x,M=t.x,T=t.y;return a=Tn(M-this.long0),n=Math.sin(T),i=Math.cos(T),h=Math.cos(a),o=this.sin_p14*n+this.cos_p14*i*h,m=1,o>0||Math.abs(o)<=xn?(y=this.x0+this.a*m*i*Math.sin(a)/o,x=this.y0+this.a*m*(this.cos_p14*n-this.sin_p14*i*h)/o):(y=this.x0+this.infinity_dist*i*Math.sin(a),x=this.y0+this.infinity_dist*(this.cos_p14*n-this.sin_p14*i*h)),t.x=y,t.y=x,t}function Ck(t){var n,i,a,h,m,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(n=Math.sqrt(t.x*t.x+t.y*t.y))?(h=Math.atan2(n,this.rc),i=Math.sin(h),a=Math.cos(h),o=ap(a*this.sin_p14+t.y*i*this.cos_p14/n),m=Math.atan2(t.x*i,n*this.cos_p14*a-t.y*this.sin_p14*i),m=Tn(this.long0+m)):(o=this.phic0,m=0),t.x=m,t.y=o,t}var Ik=["gnom"];const Mk={init:Ak,forward:wk,inverse:Ck,names:Ik};function Ek(t,n){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(n)-i)<1e-6)return n<0?-1*Xe:Xe;for(var a=Math.asin(.5*n),h,m,o,y,x=0;x<30;x++)if(m=Math.sin(a),o=Math.cos(a),y=t*m,h=Math.pow(1-y*y,2)/(2*o)*(n/(1-t*t)-m/(1-y*y)+.5/t*Math.log((1-y)/(1+y))),a+=h,Math.abs(h)<=1e-10)return a;return NaN}function Sk(){this.sphere||(this.k0=ch(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Tk(t){var n=t.x,i=t.y,a,h,m=Tn(n-this.long0);if(this.sphere)a=this.x0+this.a*m*Math.cos(this.lat_ts),h=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=ep(this.e,Math.sin(i));a=this.x0+this.a*this.k0*m,h=this.y0+this.a*o*.5/this.k0}return t.x=a,t.y=h,t}function Pk(t){t.x-=this.x0,t.y-=this.y0;var n,i;return this.sphere?(n=Tn(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=Ek(this.e,2*t.y*this.k0/this.a),n=Tn(this.long0+t.x/(this.a*this.k0))),t.x=n,t.y=i,t}var Lk=["cea"];const kk={init:Sk,forward:Tk,inverse:Pk,names:Lk};function Dk(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Rk(t){var n=t.x,i=t.y,a=Tn(n-this.long0),h=Dm(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*h,t}function zk(t){var n=t.x,i=t.y;return t.x=Tn(this.long0+(n-this.x0)/(this.a*this.rc)),t.y=Dm(this.lat0+(i-this.y0)/this.a),t}var Ok=["Equirectangular","Equidistant_Cylindrical","eqc"];const Bk={init:Dk,forward:Rk,inverse:zk,names:Ok};var Fw=20;function Fk(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Iv(this.es),this.e1=Mv(this.es),this.e2=Ev(this.es),this.e3=Sv(this.es),this.ml0=this.a*cl(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Nk(t){var n=t.x,i=t.y,a,h,m,o=Tn(n-this.long0);if(m=o*Math.sin(i),this.sphere)Math.abs(i)<=xn?(a=this.a*o,h=-1*this.a*this.lat0):(a=this.a*Math.sin(m)/Math.tan(i),h=this.a*(Dm(i-this.lat0)+(1-Math.cos(m))/Math.tan(i)));else if(Math.abs(i)<=xn)a=this.a*o,h=-1*this.ml0;else{var y=Em(this.a,this.e,Math.sin(i))/Math.tan(i);a=y*Math.sin(m),h=this.a*cl(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+y*(1-Math.cos(m))}return t.x=a+this.x0,t.y=h+this.y0,t}function Vk(t){var n,i,a,h,m,o,y,x,M;if(a=t.x-this.x0,h=t.y-this.y0,this.sphere)if(Math.abs(h+this.a*this.lat0)<=xn)n=Tn(a/this.a+this.long0),i=0;else{o=this.lat0+h/this.a,y=a*a/this.a/this.a+o*o,x=o;var T;for(m=Fw;m;--m)if(T=Math.tan(x),M=-1*(o*(x*T+1)-x-.5*(x*x+y)*T)/((x-o)/T-1),x+=M,Math.abs(M)<=xn){i=x;break}n=Tn(this.long0+Math.asin(a*Math.tan(x)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=xn)i=0,n=Tn(this.long0+a/this.a);else{o=(this.ml0+h)/this.a,y=a*a/this.a/this.a+o*o,x=o;var P,L,O,W,H;for(m=Fw;m;--m)if(H=this.e*Math.sin(x),P=Math.sqrt(1-H*H)*Math.tan(x),L=this.a*cl(this.e0,this.e1,this.e2,this.e3,x),O=this.e0-2*this.e1*Math.cos(2*x)+4*this.e2*Math.cos(4*x)-6*this.e3*Math.cos(6*x),W=L/this.a,M=(o*(P*W+1)-W-.5*P*(W*W+y))/(this.es*Math.sin(2*x)*(W*W+y-2*o*W)/(4*P)+(o-W)*(P*O-2/Math.sin(2*x))-O),x-=M,Math.abs(M)<=xn){i=x;break}P=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),n=Tn(this.long0+Math.asin(a*P/this.a)/Math.sin(i))}return t.x=n,t.y=i,t}var Uk=["Polyconic","poly"];const jk={init:Fk,forward:Nk,inverse:Vk,names:Uk};function Hk(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Gk(t){var n,i=t.x,a=t.y,h=a-this.lat0,m=i-this.long0,o=h/qg*1e-5,y=m,x=1,M=0;for(n=1;n<=10;n++)x=x*o,M=M+this.A[n]*x;var T=M,P=y,L=1,O=0,W,H,nt=0,lt=0;for(n=1;n<=6;n++)W=L*T-O*P,H=O*T+L*P,L=W,O=H,nt=nt+this.B_re[n]*L-this.B_im[n]*O,lt=lt+this.B_im[n]*L+this.B_re[n]*O;return t.x=lt*this.a+this.x0,t.y=nt*this.a+this.y0,t}function qk(t){var n,i=t.x,a=t.y,h=i-this.x0,m=a-this.y0,o=m/this.a,y=h/this.a,x=1,M=0,T,P,L=0,O=0;for(n=1;n<=6;n++)T=x*o-M*y,P=M*o+x*y,x=T,M=P,L=L+this.C_re[n]*x-this.C_im[n]*M,O=O+this.C_im[n]*x+this.C_re[n]*M;for(var W=0;W<this.iterations;W++){var H=L,nt=O,lt,K,$=o,yt=y;for(n=2;n<=6;n++)lt=H*L-nt*O,K=nt*L+H*O,H=lt,nt=K,$=$+(n-1)*(this.B_re[n]*H-this.B_im[n]*nt),yt=yt+(n-1)*(this.B_im[n]*H+this.B_re[n]*nt);H=1,nt=0;var Rt=this.B_re[1],Ct=this.B_im[1];for(n=2;n<=6;n++)lt=H*L-nt*O,K=nt*L+H*O,H=lt,nt=K,Rt=Rt+n*(this.B_re[n]*H-this.B_im[n]*nt),Ct=Ct+n*(this.B_im[n]*H+this.B_re[n]*nt);var Et=Rt*Rt+Ct*Ct;L=($*Rt+yt*Ct)/Et,O=(yt*Rt-$*Ct)/Et}var Gt=L,kt=O,Qt=1,Ut=0;for(n=1;n<=9;n++)Qt=Qt*Gt,Ut=Ut+this.D[n]*Qt;var Nt=this.lat0+Ut*qg*1e5,Bt=this.long0+kt;return t.x=Bt,t.y=Nt,t}var Wk=["New_Zealand_Map_Grid","nzmg"];const Zk={init:Hk,forward:Gk,inverse:qk,names:Wk};function Yk(){}function Xk(t){var n=t.x,i=t.y,a=Tn(n-this.long0),h=this.x0+this.a*a,m=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=h,t.y=m,t}function Kk(t){t.x-=this.x0,t.y-=this.y0;var n=Tn(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=n,t.y=i,t}var Qk=["Miller_Cylindrical","mill"];const $k={init:Yk,forward:Xk,inverse:Kk,names:Qk};var Jk=20;function t6(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=dI(this.es)}function e6(t){var n,i,a=t.x,h=t.y;if(a=Tn(a-this.long0),this.sphere){if(!this.m)h=this.n!==1?Math.asin(this.n*Math.sin(h)):h;else for(var m=this.n*Math.sin(h),o=Jk;o;--o){var y=(this.m*h+Math.sin(h)-m)/(this.m+Math.cos(h));if(h-=y,Math.abs(y)<xn)break}n=this.a*this.C_x*a*(this.m+Math.cos(h)),i=this.a*this.C_y*h}else{var x=Math.sin(h),M=Math.cos(h);i=this.a*s_(h,x,M,this.en),n=this.a*a*M/Math.sqrt(1-this.es*x*x)}return t.x=n,t.y=i,t}function n6(t){var n,i,a,h;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,n=t.y/this.a,this.sphere?(n/=this.C_y,a=a/(this.C_x*(this.m+Math.cos(n))),this.m?n=ap((this.m*n+Math.sin(n))/this.n):this.n!==1&&(n=ap(Math.sin(n)/this.n)),a=Tn(a+this.long0),n=Dm(n)):(n=mI(t.y/this.a,this.es,this.en),h=Math.abs(n),h<Xe?(h=Math.sin(n),i=this.long0+t.x*Math.sqrt(1-this.es*h*h)/(this.a*Math.cos(n)),a=Tn(i)):h-xn<Xe&&(a=this.long0)),t.x=a,t.y=n,t}var i6=["Sinusoidal","sinu"];const r6={init:t6,forward:e6,inverse:n6,names:i6};function o6(){}function a6(t){for(var n=t.x,i=t.y,a=Tn(n-this.long0),h=i,m=Math.PI*Math.sin(i);;){var o=-(h+Math.sin(h)-m)/(1+Math.cos(h));if(h+=o,Math.abs(o)<xn)break}h/=2,Math.PI/2-Math.abs(i)<xn&&(a=0);var y=.900316316158*this.a*a*Math.cos(h)+this.x0,x=1.4142135623731*this.a*Math.sin(h)+this.y0;return t.x=y,t.y=x,t}function s6(t){var n,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),n=Math.asin(i);var a=Tn(this.long0+t.x/(.900316316158*this.a*Math.cos(n)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*n+Math.sin(2*n))/Math.PI,Math.abs(i)>1&&(i=1);var h=Math.asin(i);return t.x=a,t.y=h,t}var l6=["Mollweide","moll"];const u6={init:o6,forward:a6,inverse:s6,names:l6};function c6(){Math.abs(this.lat1+this.lat2)<xn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Iv(this.es),this.e1=Mv(this.es),this.e2=Ev(this.es),this.e3=Sv(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ch(this.e,this.sinphi,this.cosphi),this.ml1=cl(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<xn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ch(this.e,this.sinphi,this.cosphi),this.ml2=cl(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=cl(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function h6(t){var n=t.x,i=t.y,a;if(this.sphere)a=this.a*(this.g-i);else{var h=cl(this.e0,this.e1,this.e2,this.e3,i);a=this.a*(this.g-h)}var m=this.ns*Tn(n-this.long0),o=this.x0+a*Math.sin(m),y=this.y0+this.rh-a*Math.cos(m);return t.x=o,t.y=y,t}function f6(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var n,i,a,h;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1);var m=0;if(i!==0&&(m=Math.atan2(n*t.x,n*t.y)),this.sphere)return h=Tn(this.long0+m/this.ns),a=Dm(this.g-i/this.a),t.x=h,t.y=a,t;var o=this.g-i/this.a;return a=P0(o,this.e0,this.e1,this.e2,this.e3),h=Tn(this.long0+m/this.ns),t.x=h,t.y=a,t}var p6=["Equidistant_Conic","eqdc"];const d6={init:c6,forward:h6,inverse:f6,names:p6};function m6(){this.R=this.a}function g6(t){var n=t.x,i=t.y,a=Tn(n-this.long0),h,m;Math.abs(i)<=xn&&(h=this.x0+this.R*a,m=this.y0);var o=ap(2*Math.abs(i/Math.PI));(Math.abs(a)<=xn||Math.abs(Math.abs(i)-Xe)<=xn)&&(h=this.x0,i>=0?m=this.y0+Math.PI*this.R*Math.tan(.5*o):m=this.y0+Math.PI*this.R*-Math.tan(.5*o));var y=.5*Math.abs(Math.PI/a-a/Math.PI),x=y*y,M=Math.sin(o),T=Math.cos(o),P=T/(M+T-1),L=P*P,O=P*(2/M-1),W=O*O,H=Math.PI*this.R*(y*(P-W)+Math.sqrt(x*(P-W)*(P-W)-(W+x)*(L-W)))/(W+x);a<0&&(H=-H),h=this.x0+H;var nt=x+P;return H=Math.PI*this.R*(O*nt-y*Math.sqrt((W+x)*(x+1)-nt*nt))/(W+x),i>=0?m=this.y0+H:m=this.y0-H,t.x=h,t.y=m,t}function v6(t){var n,i,a,h,m,o,y,x,M,T,P,L,O;return t.x-=this.x0,t.y-=this.y0,P=Math.PI*this.R,a=t.x/P,h=t.y/P,m=a*a+h*h,o=-Math.abs(h)*(1+m),y=o-2*h*h+a*a,x=-2*o+1+2*h*h+m*m,O=h*h/x+(2*y*y*y/x/x/x-9*o*y/x/x)/27,M=(o-y*y/3/x)/x,T=2*Math.sqrt(-M/3),P=3*O/M/T,Math.abs(P)>1&&(P>=0?P=1:P=-1),L=Math.acos(P)/3,t.y>=0?i=(-T*Math.cos(L+Math.PI/3)-y/3/x)*Math.PI:i=-(-T*Math.cos(L+Math.PI/3)-y/3/x)*Math.PI,Math.abs(a)<xn?n=this.long0:n=Tn(this.long0+Math.PI*(m-1+Math.sqrt(1+2*(a*a-h*h)+m*m))/2/a),t.x=n,t.y=i,t}var y6=["Van_der_Grinten_I","VanDerGrinten","vandg"];const _6={init:m6,forward:g6,inverse:v6,names:y6};function x6(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function b6(t){var n=t.x,i=t.y,a=Math.sin(t.y),h=Math.cos(t.y),m=Tn(n-this.long0),o,y,x,M,T,P,L,O,W,H,nt,lt,K,$,yt,Rt,Ct,Et,Gt,kt,Qt,Ut,Nt;return this.sphere?Math.abs(this.sin_p12-1)<=xn?(t.x=this.x0+this.a*(Xe-i)*Math.sin(m),t.y=this.y0-this.a*(Xe-i)*Math.cos(m),t):Math.abs(this.sin_p12+1)<=xn?(t.x=this.x0+this.a*(Xe+i)*Math.sin(m),t.y=this.y0+this.a*(Xe+i)*Math.cos(m),t):(Et=this.sin_p12*a+this.cos_p12*h*Math.cos(m),Rt=Math.acos(Et),Ct=Rt?Rt/Math.sin(Rt):1,t.x=this.x0+this.a*Ct*h*Math.sin(m),t.y=this.y0+this.a*Ct*(this.cos_p12*a-this.sin_p12*h*Math.cos(m)),t):(o=Iv(this.es),y=Mv(this.es),x=Ev(this.es),M=Sv(this.es),Math.abs(this.sin_p12-1)<=xn?(T=this.a*cl(o,y,x,M,Xe),P=this.a*cl(o,y,x,M,i),t.x=this.x0+(T-P)*Math.sin(m),t.y=this.y0-(T-P)*Math.cos(m),t):Math.abs(this.sin_p12+1)<=xn?(T=this.a*cl(o,y,x,M,Xe),P=this.a*cl(o,y,x,M,i),t.x=this.x0+(T+P)*Math.sin(m),t.y=this.y0+(T+P)*Math.cos(m),t):(L=a/h,O=Em(this.a,this.e,this.sin_p12),W=Em(this.a,this.e,a),H=Math.atan((1-this.es)*L+this.es*O*this.sin_p12/(W*h)),nt=Math.atan2(Math.sin(m),this.cos_p12*Math.tan(H)-this.sin_p12*Math.cos(m)),nt===0?Gt=Math.asin(this.cos_p12*Math.sin(H)-this.sin_p12*Math.cos(H)):Math.abs(Math.abs(nt)-Math.PI)<=xn?Gt=-Math.asin(this.cos_p12*Math.sin(H)-this.sin_p12*Math.cos(H)):Gt=Math.asin(Math.sin(m)*Math.cos(H)/Math.sin(nt)),lt=this.e*this.sin_p12/Math.sqrt(1-this.es),K=this.e*this.cos_p12*Math.cos(nt)/Math.sqrt(1-this.es),$=lt*K,yt=K*K,kt=Gt*Gt,Qt=kt*Gt,Ut=Qt*Gt,Nt=Ut*Gt,Rt=O*Gt*(1-kt*yt*(1-yt)/6+Qt/8*$*(1-2*yt)+Ut/120*(yt*(4-7*yt)-3*lt*lt*(1-7*yt))-Nt/48*$),t.x=this.x0+Rt*Math.sin(nt),t.y=this.y0+Rt*Math.cos(nt),t))}function A6(t){t.x-=this.x0,t.y-=this.y0;var n,i,a,h,m,o,y,x,M,T,P,L,O,W,H,nt,lt,K,$,yt,Rt,Ct,Et,Gt;return this.sphere?(n=Math.sqrt(t.x*t.x+t.y*t.y),n>2*Xe*this.a?void 0:(i=n/this.a,a=Math.sin(i),h=Math.cos(i),m=this.long0,Math.abs(n)<=xn?o=this.lat0:(o=ap(h*this.sin_p12+t.y*a*this.cos_p12/n),y=Math.abs(this.lat0)-Xe,Math.abs(y)<=xn?this.lat0>=0?m=Tn(this.long0+Math.atan2(t.x,-t.y)):m=Tn(this.long0-Math.atan2(-t.x,t.y)):m=Tn(this.long0+Math.atan2(t.x*a,n*this.cos_p12*h-t.y*this.sin_p12*a))),t.x=m,t.y=o,t)):(x=Iv(this.es),M=Mv(this.es),T=Ev(this.es),P=Sv(this.es),Math.abs(this.sin_p12-1)<=xn?(L=this.a*cl(x,M,T,P,Xe),n=Math.sqrt(t.x*t.x+t.y*t.y),O=L-n,o=P0(O/this.a,x,M,T,P),m=Tn(this.long0+Math.atan2(t.x,-1*t.y)),t.x=m,t.y=o,t):Math.abs(this.sin_p12+1)<=xn?(L=this.a*cl(x,M,T,P,Xe),n=Math.sqrt(t.x*t.x+t.y*t.y),O=n-L,o=P0(O/this.a,x,M,T,P),m=Tn(this.long0+Math.atan2(t.x,t.y)),t.x=m,t.y=o,t):(n=Math.sqrt(t.x*t.x+t.y*t.y),nt=Math.atan2(t.x,t.y),W=Em(this.a,this.e,this.sin_p12),lt=Math.cos(nt),K=this.e*this.cos_p12*lt,$=-K*K/(1-this.es),yt=3*this.es*(1-$)*this.sin_p12*this.cos_p12*lt/(1-this.es),Rt=n/W,Ct=Rt-$*(1+$)*Math.pow(Rt,3)/6-yt*(1+3*$)*Math.pow(Rt,4)/24,Et=1-$*Ct*Ct/2-Rt*Ct*Ct*Ct/6,H=Math.asin(this.sin_p12*Math.cos(Ct)+this.cos_p12*Math.sin(Ct)*lt),m=Tn(this.long0+Math.asin(Math.sin(nt)*Math.sin(Ct)/Math.cos(H))),Gt=Math.sin(H),o=Math.atan2((Gt-this.es*Et*this.sin_p12)*Math.tan(H),Gt*(1-this.es)),t.x=m,t.y=o,t))}var w6=["Azimuthal_Equidistant","aeqd"];const C6={init:x6,forward:b6,inverse:A6,names:w6};function I6(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function M6(t){var n,i,a,h,m,o,y,x,M=t.x,T=t.y;return a=Tn(M-this.long0),n=Math.sin(T),i=Math.cos(T),h=Math.cos(a),o=this.sin_p14*n+this.cos_p14*i*h,m=1,(o>0||Math.abs(o)<=xn)&&(y=this.a*m*i*Math.sin(a),x=this.y0+this.a*m*(this.cos_p14*n-this.sin_p14*i*h)),t.x=y,t.y=x,t}function E6(t){var n,i,a,h,m,o,y;return t.x-=this.x0,t.y-=this.y0,n=Math.sqrt(t.x*t.x+t.y*t.y),i=ap(n/this.a),a=Math.sin(i),h=Math.cos(i),o=this.long0,Math.abs(n)<=xn?(y=this.lat0,t.x=o,t.y=y,t):(y=ap(h*this.sin_p14+t.y*a*this.cos_p14/n),m=Math.abs(this.lat0)-Xe,Math.abs(m)<=xn?(this.lat0>=0?o=Tn(this.long0+Math.atan2(t.x,-t.y)):o=Tn(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=y,t):(o=Tn(this.long0+Math.atan2(t.x*a,n*this.cos_p14*h-t.y*this.sin_p14*a)),t.x=o,t.y=y,t))}var S6=["ortho"];const T6={init:I6,forward:M6,inverse:E6,names:S6};var jo={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Hr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function P6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Xe-jr/2?this.face=jo.TOP:this.lat0<=-(Xe-jr/2)?this.face=jo.BOTTOM:Math.abs(this.long0)<=jr?this.face=jo.FRONT:Math.abs(this.long0)<=Xe+jr?this.face=this.long0>0?jo.RIGHT:jo.LEFT:this.face=jo.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function L6(t){var n={x:0,y:0},i,a,h,m,o,y,x={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,a=t.x,this.face===jo.TOP)m=Xe-i,a>=jr&&a<=Xe+jr?(x.value=Hr.AREA_0,h=a-Xe):a>Xe+jr||a<=-(Xe+jr)?(x.value=Hr.AREA_1,h=a>0?a-sa:a+sa):a>-(Xe+jr)&&a<=-jr?(x.value=Hr.AREA_2,h=a+Xe):(x.value=Hr.AREA_3,h=a);else if(this.face===jo.BOTTOM)m=Xe+i,a>=jr&&a<=Xe+jr?(x.value=Hr.AREA_0,h=-a+Xe):a<jr&&a>=-jr?(x.value=Hr.AREA_1,h=-a):a<-jr&&a>=-(Xe+jr)?(x.value=Hr.AREA_2,h=-a-Xe):(x.value=Hr.AREA_3,h=a>0?-a+sa:-a-sa);else{var M,T,P,L,O,W,H;this.face===jo.RIGHT?a=ym(a,+Xe):this.face===jo.BACK?a=ym(a,+sa):this.face===jo.LEFT&&(a=ym(a,-Xe)),L=Math.sin(i),O=Math.cos(i),W=Math.sin(a),H=Math.cos(a),M=O*H,T=O*W,P=L,this.face===jo.FRONT?(m=Math.acos(M),h=Qy(m,P,T,x)):this.face===jo.RIGHT?(m=Math.acos(T),h=Qy(m,P,-M,x)):this.face===jo.BACK?(m=Math.acos(-M),h=Qy(m,P,-T,x)):this.face===jo.LEFT?(m=Math.acos(-T),h=Qy(m,P,M,x)):(m=h=0,x.value=Hr.AREA_0)}return y=Math.atan(12/sa*(h+Math.acos(Math.sin(h)*Math.cos(jr))-Xe)),o=Math.sqrt((1-Math.cos(m))/(Math.cos(y)*Math.cos(y))/(1-Math.cos(Math.atan(1/Math.cos(h))))),x.value===Hr.AREA_1?y+=Xe:x.value===Hr.AREA_2?y+=sa:x.value===Hr.AREA_3&&(y+=1.5*sa),n.x=o*Math.cos(y),n.y=o*Math.sin(y),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,t.x=n.x,t.y=n.y,t}function k6(t){var n={lam:0,phi:0},i,a,h,m,o,y,x,M,T,P={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,a=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?P.value=Hr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(P.value=Hr.AREA_1,i-=Xe):t.x<0&&-t.x>=Math.abs(t.y)?(P.value=Hr.AREA_2,i=i<0?i+sa:i-sa):(P.value=Hr.AREA_3,i+=Xe),T=sa/12*Math.tan(i),o=Math.sin(T)/(Math.cos(T)-1/Math.sqrt(2)),y=Math.atan(o),h=Math.cos(i),m=Math.tan(a),x=1-h*h*m*m*(1-Math.cos(Math.atan(1/Math.cos(y)))),x<-1?x=-1:x>1&&(x=1),this.face===jo.TOP)M=Math.acos(x),n.phi=Xe-M,P.value===Hr.AREA_0?n.lam=y+Xe:P.value===Hr.AREA_1?n.lam=y<0?y+sa:y-sa:P.value===Hr.AREA_2?n.lam=y-Xe:n.lam=y;else if(this.face===jo.BOTTOM)M=Math.acos(x),n.phi=M-Xe,P.value===Hr.AREA_0?n.lam=-y+Xe:P.value===Hr.AREA_1?n.lam=-y:P.value===Hr.AREA_2?n.lam=-y-Xe:n.lam=y<0?-y-sa:-y+sa;else{var L,O,W;L=x,T=L*L,T>=1?W=0:W=Math.sqrt(1-T)*Math.sin(y),T+=W*W,T>=1?O=0:O=Math.sqrt(1-T),P.value===Hr.AREA_1?(T=O,O=-W,W=T):P.value===Hr.AREA_2?(O=-O,W=-W):P.value===Hr.AREA_3&&(T=O,O=W,W=-T),this.face===jo.RIGHT?(T=L,L=-O,O=T):this.face===jo.BACK?(L=-L,O=-O):this.face===jo.LEFT&&(T=L,L=O,O=-T),n.phi=Math.acos(-W)-Xe,n.lam=Math.atan2(O,L),this.face===jo.RIGHT?n.lam=ym(n.lam,-Xe):this.face===jo.BACK?n.lam=ym(n.lam,-sa):this.face===jo.LEFT&&(n.lam=ym(n.lam,+Xe))}if(this.es!==0){var H,nt,lt;H=n.phi<0?1:0,nt=Math.tan(n.phi),lt=this.b/Math.sqrt(nt*nt+this.one_minus_f_squared),n.phi=Math.atan(Math.sqrt(this.a*this.a-lt*lt)/(this.one_minus_f*lt)),H&&(n.phi=-n.phi)}return n.lam+=this.long0,t.x=n.lam,t.y=n.phi,t}function Qy(t,n,i,a){var h;return t<xn?(a.value=Hr.AREA_0,h=0):(h=Math.atan2(n,i),Math.abs(h)<=jr?a.value=Hr.AREA_0:h>jr&&h<=Xe+jr?(a.value=Hr.AREA_1,h-=Xe):h>Xe+jr||h<=-(Xe+jr)?(a.value=Hr.AREA_2,h=h>=0?h-sa:h+sa):(a.value=Hr.AREA_3,h+=Xe)),h}function ym(t,n){var i=t+n;return i<-sa?i+=fv:i>+sa&&(i-=fv),i}var D6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const R6={init:P6,forward:L6,inverse:k6,names:D6};var Ax=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Tg=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],yI=.8487,_I=1.3523,xI=rh/5,z6=1/xI,hm=18,L0=function(t,n){return t[0]+n*(t[1]+n*(t[2]+n*t[3]))},O6=function(t,n){return t[1]+n*(2*t[2]+n*3*t[3])};function B6(t,n,i,a){for(var h=n;a;--a){var m=t(h);if(h-=m,Math.abs(m)<i)break}return h}function F6(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function N6(t){var n=Tn(t.x-this.long0),i=Math.abs(t.y),a=Math.floor(i*xI);a<0?a=0:a>=hm&&(a=hm-1),i=rh*(i-z6*a);var h={x:L0(Ax[a],i)*n,y:L0(Tg[a],i)};return t.y<0&&(h.y=-h.y),h.x=h.x*this.a*yI+this.x0,h.y=h.y*this.a*_I+this.y0,h}function V6(t){var n={x:(t.x-this.x0)/(this.a*yI),y:Math.abs(t.y-this.y0)/(this.a*_I)};if(n.y>=1)n.x/=Ax[hm][0],n.y=t.y<0?-Xe:Xe;else{var i=Math.floor(n.y*hm);for(i<0?i=0:i>=hm&&(i=hm-1);;)if(Tg[i][0]>n.y)--i;else if(Tg[i+1][0]<=n.y)++i;else break;var a=Tg[i],h=5*(n.y-a[0])/(Tg[i+1][0]-a[0]);h=B6(function(m){return(L0(a,m)-n.y)/O6(a,m)},h,xn,100),n.x/=L0(Ax[i],h),n.y=(5*i+h)*gs,t.y<0&&(n.y=-n.y)}return n.x=Tn(n.x+this.long0),n}var U6=["Robinson","robin"];const j6={init:F6,forward:N6,inverse:V6,names:U6};function H6(){this.name="geocent"}function G6(t){var n=oI(t,this.es,this.a);return n}function q6(t){var n=aI(t,this.es,this.a,this.b);return n}var W6=["Geocentric","geocentric","geocent","Geocent"];const Z6={init:H6,forward:G6,inverse:q6,names:W6};var Vs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Cg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Y6(){if(Object.keys(Cg).forEach((function(i){if(typeof this[i]>"u")this[i]=Cg[i].def;else{if(Cg[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);Cg[i].num&&(this[i]=parseFloat(this[i]))}Cg[i].degrees&&(this[i]=this[i]*gs)}).bind(this)),Math.abs(Math.abs(this.lat0)-Xe)<xn?this.mode=this.lat0<0?Vs.S_POLE:Vs.N_POLE:Math.abs(this.lat0)<xn?this.mode=Vs.EQUIT:(this.mode=Vs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(t),this.sw=Math.sin(t)}function X6(t){t.x-=this.long0;var n=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),h,m;switch(this.mode){case Vs.OBLIQ:m=this.sinph0*n+this.cosph0*i*a;break;case Vs.EQUIT:m=i*a;break;case Vs.S_POLE:m=-n;break;case Vs.N_POLE:m=n;break}switch(m=this.pn1/(this.p-m),h=m*i*Math.sin(t.x),this.mode){case Vs.OBLIQ:m*=this.cosph0*n-this.sinph0*i*a;break;case Vs.EQUIT:m*=n;break;case Vs.N_POLE:m*=-(i*a);break;case Vs.S_POLE:m*=i*a;break}var o,y;return o=m*this.cg+h*this.sg,y=1/(o*this.sw*this.h1+this.cw),h=(h*this.cg-m*this.sg)*this.cw*y,m=o*y,t.x=h*this.a,t.y=m*this.a,t}function K6(t){t.x/=this.a,t.y/=this.a;var n={x:t.x,y:t.y},i,a,h;h=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*h,a=this.pn1*t.y*this.cw*h,t.x=i*this.cg+a*this.sg,t.y=a*this.cg-i*this.sg;var m=Ku(t.x,t.y);if(Math.abs(m)<xn)n.x=0,n.y=t.y;else{var o,y;switch(y=1-m*m*this.pfact,y=(this.p-Math.sqrt(y))/(this.pn1/m+m/this.pn1),o=Math.sqrt(1-y*y),this.mode){case Vs.OBLIQ:n.y=Math.asin(o*this.sinph0+t.y*y*this.cosph0/m),t.y=(o-this.sinph0*Math.sin(n.y))*m,t.x*=y*this.cosph0;break;case Vs.EQUIT:n.y=Math.asin(t.y*y/m),t.y=o*m,t.x*=y;break;case Vs.N_POLE:n.y=Math.asin(o),t.y=-t.y;break;case Vs.S_POLE:n.y=-Math.asin(o);break}n.x=Math.atan2(t.x,t.y)}return t.x=n.x+this.long0,t.y=n.y,t}var Q6=["Tilted_Perspective","tpers"];const $6={init:Y6,forward:X6,inverse:K6,names:Q6};function J6(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,n=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=n,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function tD(t){var n=t.x,i=t.y,a,h,m,o;if(n=n-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var y=this.radius_p/Ku(this.radius_p*Math.cos(i),Math.sin(i));if(h=y*Math.cos(n)*Math.cos(i),m=y*Math.sin(n)*Math.cos(i),o=y*Math.sin(i),(this.radius_g-h)*h-m*m-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=this.radius_g-h,this.flip_axis?(t.x=this.radius_g_1*Math.atan(m/Ku(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(m/a),t.y=this.radius_g_1*Math.atan(o/Ku(m,a)))}else this.shape==="sphere"&&(a=Math.cos(i),h=Math.cos(n)*a,m=Math.sin(n)*a,o=Math.sin(i),a=this.radius_g-h,this.flip_axis?(t.x=this.radius_g_1*Math.atan(m/Ku(o,a)),t.y=this.radius_g_1*Math.atan(o/a)):(t.x=this.radius_g_1*Math.atan(m/a),t.y=this.radius_g_1*Math.atan(o/Ku(m,a))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function eD(t){var n=-1,i=0,a=0,h,m,o,y;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Ku(1,a)):(i=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Ku(1,i));var x=a/this.radius_p;if(h=i*i+x*x+n*n,m=2*this.radius_g*n,o=m*m-4*h*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;y=(-m-Math.sqrt(o))/(2*h),n=this.radius_g+y*n,i*=y,a*=y,t.x=Math.atan2(i,n),t.y=Math.atan(a*Math.cos(t.x)/n),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(i=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),h=i*i+a*a+n*n,m=2*this.radius_g*n,o=m*m-4*h*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;y=(-m-Math.sqrt(o))/(2*h),n=this.radius_g+y*n,i*=y,a*=y,t.x=Math.atan2(i,n),t.y=Math.atan(a*Math.cos(t.x)/n)}return t.x=t.x+this.long0,t}var nD=["Geostationary Satellite View","Geostationary_Satellite","geos"];const iD={init:J6,forward:tD,inverse:eD,names:nD};var Wg=1.340264,Zg=-.081106,Yg=893e-6,Xg=.003796,k0=Math.sqrt(3)/2;function rD(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function oD(t){var n=Tn(t.x-this.long0),i=t.y,a=Math.asin(k0*Math.sin(i)),h=a*a,m=h*h*h;return t.x=n*Math.cos(a)/(k0*(Wg+3*Zg*h+m*(7*Yg+9*Xg*h))),t.y=a*(Wg+Zg*h+m*(Yg+Xg*h)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function aD(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var n=1e-9,i=12,a=t.y,h,m,o,y,x,M;for(M=0;M<i&&(h=a*a,m=h*h*h,o=a*(Wg+Zg*h+m*(Yg+Xg*h))-t.y,y=Wg+3*Zg*h+m*(7*Yg+9*Xg*h),a-=x=o/y,!(Math.abs(x)<n));++M);return h=a*a,m=h*h*h,t.x=k0*t.x*(Wg+3*Zg*h+m*(7*Yg+9*Xg*h))/Math.cos(a),t.y=Math.asin(Math.sin(a)/k0),t.x=Tn(t.x+this.long0),t}var sD=["eqearth","Equal Earth","Equal_Earth"];const lD={init:rD,forward:oD,inverse:aD,names:sD};function uD(t){t.Proj.projections.add(s0),t.Proj.projections.add(l0),t.Proj.projections.add(cL),t.Proj.projections.add(xL),t.Proj.projections.add(ML),t.Proj.projections.add(LL),t.Proj.projections.add(BL),t.Proj.projections.add(jL),t.Proj.projections.add(ZL),t.Proj.projections.add($L),t.Proj.projections.add(mk),t.Proj.projections.add(bk),t.Proj.projections.add(Mk),t.Proj.projections.add(kk),t.Proj.projections.add(Bk),t.Proj.projections.add(jk),t.Proj.projections.add(Zk),t.Proj.projections.add($k),t.Proj.projections.add(r6),t.Proj.projections.add(u6),t.Proj.projections.add(d6),t.Proj.projections.add(_6),t.Proj.projections.add(C6),t.Proj.projections.add(T6),t.Proj.projections.add(R6),t.Proj.projections.add(j6),t.Proj.projections.add(Z6),t.Proj.projections.add($6),t.Proj.projections.add(iD),t.Proj.projections.add(lD)}mu.defaultDatum="WGS84";mu.Proj=oh;mu.WGS84=new mu.Proj("WGS84");mu.Point=Mm;mu.toPoint=sI;mu.defs=ul;mu.nadgrid=f4;mu.transform=T0;mu.mgrs=S4;mu.version="__VERSION__";uD(mu);function bI(t){function n({longitude:i,latitude:a},h=!1){const m=QC(t)||{name:"WGS 84",epsg:"4326",default:!0,unit:"degree"};return wx({longitude:i,latitude:a},m,h)}return{format:n}}function wx({longitude:t,latitude:n},i,a=!1){const h={longitude:"0",latitude:"0"};return!t||!n||(i&&!i.default&&i.proj4js&&([t,n]=mu(i.proj4js,[t,n])),i&&i.unit==="meter"?(h.longitude=t.toFixed(0),h.latitude=n.toFixed(0)):a?(h.longitude=hD(+t),h.latitude=cD(+n)):(h.longitude=t.toFixed(6),h.latitude=n.toFixed(6))),h}const cD=t=>`${xb(t)} ${bb(t)}' ${parseFloat(AI(t).toFixed(2))}" ${t>0?"N":"S"}`,hD=t=>`${xb(t)} ${bb(t)}' ${parseFloat(AI(t).toFixed(2))}" ${t>0?"E":"W"}`,xb=t=>t===0?0:Math.floor(Math.abs(t)),bb=t=>t===0?0:Math.floor((Math.abs(t)-Math.floor(Math.abs(t)))*60),AI=t=>t===0?0:(Math.abs(t)-xb(t)-bb(t)/60)*3600,ld="event";function fD(t){rf(t,ld,jl({items:[],current:{}}))}sd(ld,fD);async function pD(t,n){ua(t,ld).items.unshift(n)}async function dD(t,n){const i=ua(t,ld);if(!i||!i.items||i.items.length<1)return;const h=i.items.findIndex(m=>m.id===n.id);h<0||i.items.splice(h,1)}function mD(t,n){return(ua(t,ld).current||{})[n]}function Nw(t,n,i){const a=ua(t,ld);a.current[n]=i}function Cx(t,n,i=!1){const{add:a,remove:h,isActive:m}=wI(t,n);return bv(()=>{h()}),i&&Hl(()=>{a()}),{add:a,remove:h,isActive:m}}function wI(t,n){const i=()=>{pD(t,n)},a=()=>{dD(t,n)},h=rn(()=>{const m=mD(t,n.event_map_type);return m&&m.id===n.id});return{add:i,remove:a,isActive:h}}function Rm(t){return D2()?(XE(t),!0):!1}function gD(){const t=new Set,n=h=>{t.delete(h)};return{on:h=>{t.add(h);const m=()=>n(h);return Rm(m),{off:m}},off:n,trigger:(...h)=>Promise.all(Array.from(t).map(m=>m(...h)))}}/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function CI(t){return typeof t>"u"||t===null}function vD(t){return typeof t=="object"&&t!==null}function yD(t){return Array.isArray(t)?t:CI(t)?[]:[t]}function _D(t,n){var i,a,h,m;if(n)for(m=Object.keys(n),i=0,a=m.length;i<a;i+=1)h=m[i],t[h]=n[h];return t}function xD(t,n){var i="",a;for(a=0;a<n;a+=1)i+=t;return i}function bD(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var AD=CI,wD=vD,CD=yD,ID=xD,MD=bD,ED=_D,Ab={isNothing:AD,isObject:wD,toArray:CD,repeat:ID,isNegativeZero:MD,extend:ED};function II(t,n){var i="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!n&&t.mark.snippet&&(i+=`

`+t.mark.snippet),a+" "+i):a}function mv(t,n){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=n,this.message=II(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}mv.prototype=Object.create(Error.prototype);mv.prototype.constructor=mv;mv.prototype.toString=function(n){return this.name+": "+II(this,n)};var Kp=mv,SD=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],TD=["scalar","sequence","mapping"];function PD(t){var n={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(a){n[String(a)]=i})}),n}function LD(t,n){if(n=n||{},Object.keys(n).forEach(function(i){if(SD.indexOf(i)===-1)throw new Kp('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=n,this.tag=t,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(i){return i},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=PD(n.styleAliases||null),TD.indexOf(this.kind)===-1)throw new Kp('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var js=LD;function Vw(t,n){var i=[];return t[n].forEach(function(a){var h=i.length;i.forEach(function(m,o){m.tag===a.tag&&m.kind===a.kind&&m.multi===a.multi&&(h=o)}),i[h]=a}),i}function kD(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,i;function a(h){h.multi?(t.multi[h.kind].push(h),t.multi.fallback.push(h)):t[h.kind][h.tag]=t.fallback[h.tag]=h}for(n=0,i=arguments.length;n<i;n+=1)arguments[n].forEach(a);return t}function Ix(t){return this.extend(t)}Ix.prototype.extend=function(n){var i=[],a=[];if(n instanceof js)a.push(n);else if(Array.isArray(n))a=a.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(i=i.concat(n.implicit)),n.explicit&&(a=a.concat(n.explicit));else throw new Kp("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(m){if(!(m instanceof js))throw new Kp("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(m.loadKind&&m.loadKind!=="scalar")throw new Kp("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(m.multi)throw new Kp("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(m){if(!(m instanceof js))throw new Kp("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var h=Object.create(Ix.prototype);return h.implicit=(this.implicit||[]).concat(i),h.explicit=(this.explicit||[]).concat(a),h.compiledImplicit=Vw(h,"implicit"),h.compiledExplicit=Vw(h,"explicit"),h.compiledTypeMap=kD(h.compiledImplicit,h.compiledExplicit),h};var DD=Ix,RD=new js("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),zD=new js("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),OD=new js("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),BD=new DD({explicit:[RD,zD,OD]});function FD(t){if(t===null)return!0;var n=t.length;return n===1&&t==="~"||n===4&&(t==="null"||t==="Null"||t==="NULL")}function ND(){return null}function VD(t){return t===null}var UD=new js("tag:yaml.org,2002:null",{kind:"scalar",resolve:FD,construct:ND,predicate:VD,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function jD(t){if(t===null)return!1;var n=t.length;return n===4&&(t==="true"||t==="True"||t==="TRUE")||n===5&&(t==="false"||t==="False"||t==="FALSE")}function HD(t){return t==="true"||t==="True"||t==="TRUE"}function GD(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var qD=new js("tag:yaml.org,2002:bool",{kind:"scalar",resolve:jD,construct:HD,predicate:GD,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function WD(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function ZD(t){return 48<=t&&t<=55}function YD(t){return 48<=t&&t<=57}function XD(t){if(t===null)return!1;var n=t.length,i=0,a=!1,h;if(!n)return!1;if(h=t[i],(h==="-"||h==="+")&&(h=t[++i]),h==="0"){if(i+1===n)return!0;if(h=t[++i],h==="b"){for(i++;i<n;i++)if(h=t[i],h!=="_"){if(h!=="0"&&h!=="1")return!1;a=!0}return a&&h!=="_"}if(h==="x"){for(i++;i<n;i++)if(h=t[i],h!=="_"){if(!WD(t.charCodeAt(i)))return!1;a=!0}return a&&h!=="_"}if(h==="o"){for(i++;i<n;i++)if(h=t[i],h!=="_"){if(!ZD(t.charCodeAt(i)))return!1;a=!0}return a&&h!=="_"}}if(h==="_")return!1;for(;i<n;i++)if(h=t[i],h!=="_"){if(!YD(t.charCodeAt(i)))return!1;a=!0}return!(!a||h==="_")}function KD(t){var n=t,i=1,a;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),a=n[0],(a==="-"||a==="+")&&(a==="-"&&(i=-1),n=n.slice(1),a=n[0]),n==="0")return 0;if(a==="0"){if(n[1]==="b")return i*parseInt(n.slice(2),2);if(n[1]==="x")return i*parseInt(n.slice(2),16);if(n[1]==="o")return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)}function QD(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ab.isNegativeZero(t)}var $D=new js("tag:yaml.org,2002:int",{kind:"scalar",resolve:XD,construct:KD,predicate:QD,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),JD=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function tR(t){return!(t===null||!JD.test(t)||t[t.length-1]==="_")}function eR(t){var n,i;return n=t.replace(/_/g,"").toLowerCase(),i=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:i*parseFloat(n,10)}var nR=/^[-+]?[0-9]+e/;function iR(t,n){var i;if(isNaN(t))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ab.isNegativeZero(t))return"-0.0";return i=t.toString(10),nR.test(i)?i.replace("e",".e"):i}function rR(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ab.isNegativeZero(t))}var oR=new js("tag:yaml.org,2002:float",{kind:"scalar",resolve:tR,construct:eR,predicate:rR,represent:iR,defaultStyle:"lowercase"}),aR=BD.extend({implicit:[UD,qD,$D,oR]}),sR=aR,MI=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),EI=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function lR(t){return t===null?!1:MI.exec(t)!==null||EI.exec(t)!==null}function uR(t){var n,i,a,h,m,o,y,x=0,M=null,T,P,L;if(n=MI.exec(t),n===null&&(n=EI.exec(t)),n===null)throw new Error("Date resolve error");if(i=+n[1],a=+n[2]-1,h=+n[3],!n[4])return new Date(Date.UTC(i,a,h));if(m=+n[4],o=+n[5],y=+n[6],n[7]){for(x=n[7].slice(0,3);x.length<3;)x+="0";x=+x}return n[9]&&(T=+n[10],P=+(n[11]||0),M=(T*60+P)*6e4,n[9]==="-"&&(M=-M)),L=new Date(Date.UTC(i,a,h,m,o,y,x)),M&&L.setTime(L.getTime()-M),L}function cR(t){return t.toISOString()}var hR=new js("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:lR,construct:uR,instanceOf:Date,represent:cR});function fR(t){return t==="<<"||t===null}var pR=new js("tag:yaml.org,2002:merge",{kind:"scalar",resolve:fR}),wb=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function dR(t){if(t===null)return!1;var n,i,a=0,h=t.length,m=wb;for(i=0;i<h;i++)if(n=m.indexOf(t.charAt(i)),!(n>64)){if(n<0)return!1;a+=6}return a%8===0}function mR(t){var n,i,a=t.replace(/[\r\n=]/g,""),h=a.length,m=wb,o=0,y=[];for(n=0;n<h;n++)n%4===0&&n&&(y.push(o>>16&255),y.push(o>>8&255),y.push(o&255)),o=o<<6|m.indexOf(a.charAt(n));return i=h%4*6,i===0?(y.push(o>>16&255),y.push(o>>8&255),y.push(o&255)):i===18?(y.push(o>>10&255),y.push(o>>2&255)):i===12&&y.push(o>>4&255),new Uint8Array(y)}function gR(t){var n="",i=0,a,h,m=t.length,o=wb;for(a=0;a<m;a++)a%3===0&&a&&(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[i&63]),i=(i<<8)+t[a];return h=m%3,h===0?(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[i&63]):h===2?(n+=o[i>>10&63],n+=o[i>>4&63],n+=o[i<<2&63],n+=o[64]):h===1&&(n+=o[i>>2&63],n+=o[i<<4&63],n+=o[64],n+=o[64]),n}function vR(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var yR=new js("tag:yaml.org,2002:binary",{kind:"scalar",resolve:dR,construct:mR,predicate:vR,represent:gR}),_R=Object.prototype.hasOwnProperty,xR=Object.prototype.toString;function bR(t){if(t===null)return!0;var n=[],i,a,h,m,o,y=t;for(i=0,a=y.length;i<a;i+=1){if(h=y[i],o=!1,xR.call(h)!=="[object Object]")return!1;for(m in h)if(_R.call(h,m))if(!o)o=!0;else return!1;if(!o)return!1;if(n.indexOf(m)===-1)n.push(m);else return!1}return!0}function AR(t){return t!==null?t:[]}var wR=new js("tag:yaml.org,2002:omap",{kind:"sequence",resolve:bR,construct:AR}),CR=Object.prototype.toString;function IR(t){if(t===null)return!0;var n,i,a,h,m,o=t;for(m=new Array(o.length),n=0,i=o.length;n<i;n+=1){if(a=o[n],CR.call(a)!=="[object Object]"||(h=Object.keys(a),h.length!==1))return!1;m[n]=[h[0],a[h[0]]]}return!0}function MR(t){if(t===null)return[];var n,i,a,h,m,o=t;for(m=new Array(o.length),n=0,i=o.length;n<i;n+=1)a=o[n],h=Object.keys(a),m[n]=[h[0],a[h[0]]];return m}var ER=new js("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:IR,construct:MR}),SR=Object.prototype.hasOwnProperty;function TR(t){if(t===null)return!0;var n,i=t;for(n in i)if(SR.call(i,n)&&i[n]!==null)return!1;return!0}function PR(t){return t!==null?t:{}}var LR=new js("tag:yaml.org,2002:set",{kind:"mapping",resolve:TR,construct:PR});sR.extend({implicit:[hR,pR],explicit:[yR,wR,ER,LR]});function Uw(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}var kR=new Array(256),DR=new Array(256);for(var tm=0;tm<256;tm++)kR[tm]=Uw(tm)?1:0,DR[tm]=Uw(tm);function sp(t){return typeof t=="function"?t():X(t)}function Mx(t){return JSON.parse(JSON.stringify(t))}const zm=typeof window<"u"&&typeof document<"u",RR=t=>t!=null,zR=Object.prototype.toString,OR=t=>zR.call(t)==="[object Object]",u0=()=>{},BR=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),FR=NR();function NR(){var t,n;return zm&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((n=window==null?void 0:window.navigator)==null?void 0:n.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}const Jh=function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))};function SI(t){return Lm()}function VR(t){let n;function i(){return n||(n=t()),n}return i.reset=async()=>{const a=n;n=void 0,a&&await a},i}function UR(t,n){SI()&&ad(t,n)}function Xf(t){const n=sp(t);return(n==null?void 0:n.$el)??n}function jR(t,n,i={}){const{immediate:a=!0}=i,h=$e(!1);let m=null;function o(){m&&(clearTimeout(m),m=null)}function y(){h.value=!1,o()}function x(...M){o(),h.value=!0,m=setTimeout(()=>{h.value=!1,m=null,t(...M)},sp(n))}return a&&(h.value=!0,zm&&x()),Rm(y),{isPending:X0(h),start:x,stop:y}}function TI(t,n=!0,i){SI()?Hl(t,i):n?t():gu(t)}class Cb{get id(){return this._id}constructor(){this._id=`${Jh()}`}}class fp{constructor(n,i,a){this.key=n,this.option=Object.assign({},a,i)}setBuild(n){return this.build=n,this}}class Om extends Cb{constructor(){super(...arguments),this.parent=void 0}setParent(n){this.parent=n,this.data_id=n.id,this.runAfterSetParent&&this.runAfterSetParent()}}let PI=class extends Cb{constructor(n,i="map"){super(),this.event_map_type=n,this.type_select=i,this.options={}}setHandler(n){return this.handler=n,this}addToMap(n){return this.handler&&n.on(this.event_map_type,this.handler),this}removeFromMap(n){return this.handler&&n.off(this.event_map_type,this.handler),this}};class HR extends PI{constructor(){super("click","map"),this.setClassPointer("pointer")}setClassPointer(n){this.options.classPointer=n}setHandler(n){return this.handler=n,this}addToMap(n){return this.handler?(this.options.classPointer&&n.getCanvas().classList.add(this.options.classPointer),n.dragPan.disable(),n.boxZoom.disable(),this.map_ranger=GR(n.getCanvasContainer(),this.handler),this):this}removeFromMap(n){return this.options.classPointer&&n.getCanvas().classList.remove(this.options.classPointer),this.map_ranger&&(this.map_ranger.destroy(),this.map_ranger=void 0),n.dragPan.enable(),n.boxZoom.enable(),this}}function GR(t,n){let i=!0,a,h,m;t.addEventListener("mousedown",y,!0);function o(O){const W=t.getBoundingClientRect();return{x:O.clientX-W.left-t.clientLeft,y:O.clientY-W.top-t.clientTop}}function y(O){document.addEventListener("mousemove",x),document.addEventListener("mouseup",M),document.addEventListener("keydown",T),a=o(O)}function x(O){if(!i)return;h=o(O),m||(m=document.createElement("div"),m.classList.add("boxdraw"),t.appendChild(m));const W=Math.min(a.x,h.x),H=Math.max(a.x,h.x),nt=Math.min(a.y,h.y),lt=Math.max(a.y,h.y),K=`translate(${W}px, ${nt}px)`;m.style.transform=K,m.style.width=H-W+"px",m.style.height=lt-nt+"px"}function M(O){P([a,o(O)])}function T(O){O.keyCode===27&&P()}function P(O){document.removeEventListener("mousemove",x),document.removeEventListener("keydown",T),document.removeEventListener("mouseup",M),m&&(m.parentNode&&m.parentNode.removeChild(m),m=void 0),O&&n&&n(O)}function L(){t.removeEventListener("mousedown",y),i=!1,n=void 0,P()}return{destroy:L}}class Ib extends PI{constructor(n="map"){super("click",n),this.setClassPointer("pointer")}setClassPointer(n){this.options.classPointer=n}addToMap(n){return this.options.classPointer&&n.getCanvas().classList.add(this.options.classPointer),this.handler&&(n.on("click",this.handler),n.on("touchstart",this.handler)),this}removeFromMap(n){return this.options.classPointer&&n.getCanvas().classList.remove(this.options.classPointer),this.handler&&(n.off("click",this.handler),n.off("touchstart",this.handler)),this}}function qR(t,n,i,a={}){return new Promise((h,m)=>{t.loadImage(i,(o,y)=>{o&&m(o),t.hasImage(n)||t.addImage(n,y,a),h(!0)})})}const Mb="image";function LI(t){rf(t,Mb,jl({images:{}}))}sd(Mb,LI);async function WR(t,n,i,a={}){const h=ua(t,Mb);return h.images[n]={path:i,id:n,name:n,is_sprite:!1,category:"custom"},tp.getMap(t,async o=>qR(o,n,i,a))}const ZR=Object.freeze(Object.defineProperty({__proto__:null,addImage:WR,initMapImage:LI},Symbol.toStringTag,{value:"Module"}));var ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Eb(t){if(t.__esModule)return t;var n=t.default;if(typeof n=="function"){var i=function a(){return this instanceof a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var h=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(i,a,h.get?h:{enumerable:!0,get:function(){return t[a]}})}),i}var D0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */D0.exports;(function(t,n){(function(){var i,a="4.17.21",h=200,m="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",y="Invalid `variable` option passed into `_.template`",x="__lodash_hash_undefined__",M=500,T="__lodash_placeholder__",P=1,L=2,O=4,W=1,H=2,nt=1,lt=2,K=4,$=8,yt=16,Rt=32,Ct=64,Et=128,Gt=256,kt=512,Qt=30,Ut="...",Nt=800,Bt=16,de=1,bn=2,_e=3,He=1/0,Ue=9007199254740991,Pi=17976931348623157e292,ri=NaN,Fn=4294967295,mn=Fn-1,Kn=Fn>>>1,Li=[["ary",Et],["bind",nt],["bindKey",lt],["curry",$],["curryRight",yt],["flip",kt],["partial",Rt],["partialRight",Ct],["rearg",Gt]],ui="[object Arguments]",bi="[object Array]",le="[object AsyncFunction]",Ke="[object Boolean]",me="[object Date]",Te="[object DOMException]",Ai="[object Error]",ki="[object Function]",ut="[object GeneratorFunction]",xt="[object Map]",$t="[object Number]",ae="[object Null]",pe="[object Object]",Oe="[object Promise]",ln="[object Proxy]",we="[object RegExp]",De="[object Set]",Se="[object String]",tn="[object Symbol]",wn="[object Undefined]",Cn="[object WeakMap]",Pn="[object WeakSet]",Qn="[object ArrayBuffer]",Di="[object DataView]",wi="[object Float32Array]",rr="[object Float64Array]",Gr="[object Int8Array]",qo="[object Int16Array]",pa="[object Int32Array]",Pa="[object Uint8Array]",Ga="[object Uint8ClampedArray]",Ar="[object Uint16Array]",Mo="[object Uint32Array]",Hs=/\b__p \+= '';/g,Gs=/\b(__p \+=) '' \+/g,fl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,La=/&(?:amp|lt|gt|quot|#39);/g,so=/[&<>"']/g,qs=RegExp(La.source),vu=RegExp(so.source),qr=/<%-([\s\S]+?)%>/g,U=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,at=/^\w*$/,dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,St=/[\\^$.*+?()[\]{}|]/g,Dt=RegExp(St.source),tt=/^\s+/,vt=/\s/,Zt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,be=/,? & /,ie=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ye=/[()=,{}\[\]\/\s]/,sn=/\\(\\)?/g,on=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,oe=/\w*$/,ke=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,je=/^\[object .+?Constructor\]$/,ei=/^0o[0-7]+$/i,Ze=/^(?:0|[1-9]\d*)$/,_i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vi=/($^)/,ci=/['\n\r\u2028\u2029\\]/g,mi="\\ud800-\\udfff",gi="\\u0300-\\u036f",Eo="\\ufe20-\\ufe2f",Hn="\\u20d0-\\u20ff",Pr=gi+Eo+Hn,Wi="\\u2700-\\u27bf",Wn="a-z\\xdf-\\xf6\\xf8-\\xff",ai="\\xac\\xb1\\xd7\\xf7",So="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",os="\\u2000-\\u206f",Lr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ro="A-Z\\xc0-\\xd6\\xd8-\\xde",Pc="\\ufe0e\\ufe0f",yu=ai+So+os+Lr,kr="[']",_u="["+mi+"]",yo="["+yu+"]",Wr="["+Pr+"]",da="\\d+",gr="["+Wi+"]",qa="["+Wn+"]",ma="[^"+mi+yu+da+Wi+Wn+Ro+"]",ql="\\ud83c[\\udffb-\\udfff]",C="(?:"+Wr+"|"+ql+")",R="[^"+mi+"]",Y="(?:\\ud83c[\\udde6-\\uddff]){2}",mt="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="["+Ro+"]",Pt="\\u200d",Ht="(?:"+qa+"|"+ma+")",Pe="(?:"+Tt+"|"+ma+")",Fe="(?:"+kr+"(?:d|ll|m|re|s|t|ve))?",en="(?:"+kr+"(?:D|LL|M|RE|S|T|VE))?",an=C+"?",Ge="["+Pc+"]?",$n="(?:"+Pt+"(?:"+[R,Y,mt].join("|")+")"+Ge+an+")*",Nr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",si="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",wr=Ge+an+$n,xe="(?:"+[gr,Y,mt].join("|")+")"+wr,An="(?:"+[R+Wr+"?",Wr,Y,mt,_u].join("|")+")",or=RegExp(kr,"g"),eo=RegExp(Wr,"g"),Qi=RegExp(ql+"(?="+ql+")|"+An+wr,"g"),ws=RegExp([Tt+"?"+qa+"+"+Fe+"(?="+[yo,Tt,"$"].join("|")+")",Pe+"+"+en+"(?="+[yo,Tt+Ht,"$"].join("|")+")",Tt+"?"+Ht+"+"+Fe,Tt+"+"+en,si,Nr,da,xe].join("|"),"g"),pl=RegExp("["+Pt+mi+Pr+Pc+"]"),er=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ws=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dl=-1,Ui={};Ui[wi]=Ui[rr]=Ui[Gr]=Ui[qo]=Ui[pa]=Ui[Pa]=Ui[Ga]=Ui[Ar]=Ui[Mo]=!0,Ui[ui]=Ui[bi]=Ui[Qn]=Ui[Ke]=Ui[Di]=Ui[me]=Ui[Ai]=Ui[ki]=Ui[xt]=Ui[$t]=Ui[pe]=Ui[we]=Ui[De]=Ui[Se]=Ui[Cn]=!1;var Ci={};Ci[ui]=Ci[bi]=Ci[Qn]=Ci[Di]=Ci[Ke]=Ci[me]=Ci[wi]=Ci[rr]=Ci[Gr]=Ci[qo]=Ci[pa]=Ci[xt]=Ci[$t]=Ci[pe]=Ci[we]=Ci[De]=Ci[Se]=Ci[tn]=Ci[Pa]=Ci[Ga]=Ci[Ar]=Ci[Mo]=!0,Ci[Ai]=Ci[ki]=Ci[Cn]=!1;var Zr={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Wl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Lc={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uf=parseFloat,dh=parseInt,kc=typeof ys=="object"&&ys&&ys.Object===Object&&ys,mh=typeof self=="object"&&self&&self.Object===Object&&self,lo=kc||mh||Function("return this")(),ec=n&&!n.nodeType&&n,Zs=ec&&!0&&t&&!t.nodeType&&t,cf=Zs&&Zs.exports===ec,Zl=cf&&kc.process,_o=function(){try{var Ot=Zs&&Zs.require&&Zs.require("util").types;return Ot||Zl&&Zl.binding&&Zl.binding("util")}catch{}}(),nc=_o&&_o.isArrayBuffer,uo=_o&&_o.isDate,ka=_o&&_o.isMap,Cs=_o&&_o.isRegExp,Is=_o&&_o.isSet,ml=_o&&_o.isTypedArray;function co(Ot,he,Kt){switch(Kt.length){case 0:return Ot.call(he);case 1:return Ot.call(he,Kt[0]);case 2:return Ot.call(he,Kt[0],Kt[1]);case 3:return Ot.call(he,Kt[0],Kt[1],Kt[2])}return Ot.apply(he,Kt)}function as(Ot,he,Kt,Ae){for(var Vn=-1,li=Ot==null?0:Ot.length;++Vn<li;){var Ii=Ot[Vn];he(Ae,Ii,Kt(Ii),Ot)}return Ae}function xo(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length;++Kt<Ae&&he(Ot[Kt],Kt,Ot)!==!1;);return Ot}function gl(Ot,he){for(var Kt=Ot==null?0:Ot.length;Kt--&&he(Ot[Kt],Kt,Ot)!==!1;);return Ot}function Ys(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length;++Kt<Ae;)if(!he(Ot[Kt],Kt,Ot))return!1;return!0}function $o(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length,Vn=0,li=[];++Kt<Ae;){var Ii=Ot[Kt];he(Ii,Kt,Ot)&&(li[Vn++]=Ii)}return li}function xu(Ot,he){var Kt=Ot==null?0:Ot.length;return!!Kt&&Yl(Ot,he,0)>-1}function $i(Ot,he,Kt){for(var Ae=-1,Vn=Ot==null?0:Ot.length;++Ae<Vn;)if(Kt(he,Ot[Ae]))return!0;return!1}function Vr(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length,Vn=Array(Ae);++Kt<Ae;)Vn[Kt]=he(Ot[Kt],Kt,Ot);return Vn}function Da(Ot,he){for(var Kt=-1,Ae=he.length,Vn=Ot.length;++Kt<Ae;)Ot[Vn+Kt]=he[Kt];return Ot}function vl(Ot,he,Kt,Ae){var Vn=-1,li=Ot==null?0:Ot.length;for(Ae&&li&&(Kt=Ot[++Vn]);++Vn<li;)Kt=he(Kt,Ot[Vn],Vn,Ot);return Kt}function Dc(Ot,he,Kt,Ae){var Vn=Ot==null?0:Ot.length;for(Ae&&Vn&&(Kt=Ot[--Vn]);Vn--;)Kt=he(Kt,Ot[Vn],Vn,Ot);return Kt}function bu(Ot,he){for(var Kt=-1,Ae=Ot==null?0:Ot.length;++Kt<Ae;)if(he(Ot[Kt],Kt,Ot))return!0;return!1}var Rc=Jo("length");function ss(Ot){return Ot.split("")}function yl(Ot){return Ot.match(ie)||[]}function _l(Ot,he,Kt){var Ae;return Kt(Ot,function(Vn,li,Ii){if(he(Vn,li,Ii))return Ae=li,!1}),Ae}function ic(Ot,he,Kt,Ae){for(var Vn=Ot.length,li=Kt+(Ae?1:-1);Ae?li--:++li<Vn;)if(he(Ot[li],li,Ot))return li;return-1}function Yl(Ot,he,Kt){return he===he?Fc(Ot,he,Kt):ic(Ot,Xs,Kt)}function gh(Ot,he,Kt,Ae){for(var Vn=Kt-1,li=Ot.length;++Vn<li;)if(Ae(Ot[Vn],he))return Vn;return-1}function Xs(Ot){return Ot!==Ot}function rc(Ot,he){var Kt=Ot==null?0:Ot.length;return Kt?Ri(Ot,he)/Kt:ri}function Jo(Ot){return function(he){return he==null?i:he[Ot]}}function zo(Ot){return function(he){return Ot==null?i:Ot[he]}}function Ks(Ot,he,Kt,Ae,Vn){return Vn(Ot,function(li,Ii,pn){Kt=Ae?(Ae=!1,li):he(Kt,li,Ii,pn)}),Kt}function xl(Ot,he){var Kt=Ot.length;for(Ot.sort(he);Kt--;)Ot[Kt]=Ot[Kt].value;return Ot}function Ri(Ot,he){for(var Kt,Ae=-1,Vn=Ot.length;++Ae<Vn;){var li=he(Ot[Ae]);li!==i&&(Kt=Kt===i?li:Kt+li)}return Kt}function Au(Ot,he){for(var Kt=-1,Ae=Array(Ot);++Kt<Ot;)Ae[Kt]=he(Kt);return Ae}function zc(Ot,he){return Vr(he,function(Kt){return[Kt,Ot[Kt]]})}function ls(Ot){return Ot&&Ot.slice(0,Wt(Ot)+1).replace(tt,"")}function ta(Ot){return function(he){return Ot(he)}}function Oc(Ot,he){return Vr(he,function(Kt){return Ot[Kt]})}function wu(Ot,he){return Ot.has(he)}function oc(Ot,he){for(var Kt=-1,Ae=Ot.length;++Kt<Ae&&Yl(he,Ot[Kt],0)>-1;);return Kt}function bl(Ot,he){for(var Kt=Ot.length;Kt--&&Yl(he,Ot[Kt],0)>-1;);return Kt}function Cu(Ot,he){for(var Kt=Ot.length,Ae=0;Kt--;)Ot[Kt]===he&&++Ae;return Ae}var Xl=zo(Zr),Ms=zo(Wl);function Iu(Ot){return"\\"+lf[Ot]}function Qs(Ot,he){return Ot==null?i:Ot[he]}function us(Ot){return pl.test(Ot)}function Oo(Ot){return er.test(Ot)}function vh(Ot){for(var he,Kt=[];!(he=Ot.next()).done;)Kt.push(he.value);return Kt}function Bc(Ot){var he=-1,Kt=Array(Ot.size);return Ot.forEach(function(Ae,Vn){Kt[++he]=[Vn,Ae]}),Kt}function Mu(Ot,he){return function(Kt){return Ot(he(Kt))}}function Wo(Ot,he){for(var Kt=-1,Ae=Ot.length,Vn=0,li=[];++Kt<Ae;){var Ii=Ot[Kt];(Ii===he||Ii===T)&&(Ot[Kt]=T,li[Vn++]=Kt)}return li}function $s(Ot){var he=-1,Kt=Array(Ot.size);return Ot.forEach(function(Ae){Kt[++he]=Ae}),Kt}function ac(Ot){var he=-1,Kt=Array(Ot.size);return Ot.forEach(function(Ae){Kt[++he]=[Ae,Ae]}),Kt}function Fc(Ot,he,Kt){for(var Ae=Kt-1,Vn=Ot.length;++Ae<Vn;)if(Ot[Ae]===he)return Ae;return-1}function Al(Ot,he,Kt){for(var Ae=Kt+1;Ae--;)if(Ot[Ae]===he)return Ae;return Ae}function Kl(Ot){return us(Ot)?nn(Ot):Rc(Ot)}function ga(Ot){return us(Ot)?Dn(Ot):ss(Ot)}function Wt(Ot){for(var he=Ot.length;he--&&vt.test(Ot.charAt(he)););return he}var ue=zo(Lc);function nn(Ot){for(var he=Qi.lastIndex=0;Qi.test(Ot);)++he;return he}function Dn(Ot){return Ot.match(Qi)||[]}function vr(Ot){return Ot.match(ws)||[]}var zi=function Ot(he){he=he==null?lo:cr.defaults(lo.Object(),he,cr.pick(lo,Ws));var Kt=he.Array,Ae=he.Date,Vn=he.Error,li=he.Function,Ii=he.Math,pn=he.Object,ji=he.RegExp,Zo=he.String,no=he.TypeError,Ra=Kt.prototype,Eu=li.prototype,Su=pn.prototype,Nc=he["__core-js_shared__"],Zi=Eu.toString,Ln=Su.hasOwnProperty,Wa=0,hr=function(){var f=/[^.]+$/.exec(Nc&&Nc.keys&&Nc.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Es=Su.toString,za=Zi.call(pn),ar=lo._,Ye=ji("^"+Zi.call(Ln).replace(St,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),io=cf?he.Buffer:i,va=he.Symbol,ya=he.Uint8Array,To=io?io.allocUnsafe:i,Po=Mu(pn.getPrototypeOf,pn),Ql=pn.create,Re=Su.propertyIsEnumerable,Js=Ra.splice,wl=va?va.isConcatSpreadable:i,Cl=va?va.iterator:i,ro=va?va.toStringTag:i,ho=function(){try{var f=ps(pn,"defineProperty");return f({},"",{}),f}catch{}}(),hf=he.clearTimeout!==lo.clearTimeout&&he.clearTimeout,ff=Ae&&Ae.now!==lo.Date.now&&Ae.now,Za=he.setTimeout!==lo.setTimeout&&he.setTimeout,Ss=Ii.ceil,yh=Ii.floor,sc=pn.getOwnPropertySymbols,pp=io?io.isBuffer:i,pf=he.isFinite,tl=Ra.join,cs=Mu(pn.keys,pn),Rn=Ii.max,Yr=Ii.min,Ts=Ae.now,Yo=he.parseInt,Tu=Ii.random,Pu=Ra.reverse,hs=ps(he,"DataView"),Lo=ps(he,"Map"),lc=ps(he,"Promise"),vn=ps(he,"Set"),un=ps(he,"WeakMap"),Lu=ps(pn,"create"),Bo=un&&new un,_a={},Xo=Zc(hs),Il=Zc(Lo),dp=Zc(lc),df=Zc(vn),Ji=Zc(un),fo=va?va.prototype:i,Vc=fo?fo.valueOf:i,ku=fo?fo.toString:i;function rt(f){if(Qr(f)&&!Gn(f)&&!(f instanceof di)){if(f instanceof na)return f;if(Ln.call(f,"__wrapped__"))return rg(f)}return new na(f)}var Ya=function(){function f(){}return function(g){if(!Kr(g))return{};if(Ql)return Ql(g);f.prototype=g;var I=new f;return f.prototype=i,I}}();function ea(){}function na(f,g){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=i}rt.templateSettings={escape:qr,evaluate:U,interpolate:q,variable:"",imports:{_:rt}},rt.prototype=ea.prototype,rt.prototype.constructor=rt,na.prototype=Ya(ea.prototype),na.prototype.constructor=na;function di(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fn,this.__views__=[]}function mf(){var f=new di(this.__wrapped__);return f.__actions__=zs(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=zs(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=zs(this.__views__),f}function Uc(){if(this.__filtered__){var f=new di(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function _h(){var f=this.__wrapped__.value(),g=this.__dir__,I=Gn(f),z=g<0,G=I?f.length:0,st=O_(0,G,this.__views__),Mt=st.start,Ft=st.end,Xt=Ft-Mt,Ie=z?Ft:Mt-1,Ee=this.__iteratees__,ze=Ee.length,_n=0,jn=Yr(Xt,this.__takeCount__);if(!I||!z&&G==Xt&&jn==Xt)return Gm(f,this.__actions__);var fi=[];t:for(;Xt--&&_n<jn;){Ie+=g;for(var Ki=-1,pi=f[Ie];++Ki<ze;){var ir=Ee[Ki],pr=ir.iteratee,su=ir.type,al=pr(pi);if(su==bn)pi=al;else if(!al){if(su==de)continue t;break t}}fi[_n++]=pi}return fi}di.prototype=Ya(ea.prototype),di.prototype.constructor=di;function $l(f){var g=-1,I=f==null?0:f.length;for(this.clear();++g<I;){var z=f[g];this.set(z[0],z[1])}}function jc(){this.__data__=Lu?Lu(null):{},this.size=0}function uc(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}function mp(f){var g=this.__data__;if(Lu){var I=g[f];return I===x?i:I}return Ln.call(g,f)?g[f]:i}function Du(f){var g=this.__data__;return Lu?g[f]!==i:Ln.call(g,f)}function Ru(f,g){var I=this.__data__;return this.size+=this.has(f)?0:1,I[f]=Lu&&g===i?x:g,this}$l.prototype.clear=jc,$l.prototype.delete=uc,$l.prototype.get=mp,$l.prototype.has=Du,$l.prototype.set=Ru;function Ps(f){var g=-1,I=f==null?0:f.length;for(this.clear();++g<I;){var z=f[g];this.set(z[0],z[1])}}function zu(){this.__data__=[],this.size=0}function Ls(f){var g=this.__data__,I=ne(g,f);if(I<0)return!1;var z=g.length-1;return I==z?g.pop():Js.call(g,I,1),--this.size,!0}function gp(f){var g=this.__data__,I=ne(g,f);return I<0?i:g[I][1]}function xh(f){return ne(this.__data__,f)>-1}function vp(f,g){var I=this.__data__,z=ne(I,f);return z<0?(++this.size,I.push([f,g])):I[z][1]=g,this}Ps.prototype.clear=zu,Ps.prototype.delete=Ls,Ps.prototype.get=gp,Ps.prototype.has=xh,Ps.prototype.set=vp;function ks(f){var g=-1,I=f==null?0:f.length;for(this.clear();++g<I;){var z=f[g];this.set(z[0],z[1])}}function l(){this.size=0,this.__data__={hash:new $l,map:new(Lo||Ps),string:new $l}}function c(f){var g=sr(this,f).delete(f);return this.size-=g?1:0,g}function u(f){return sr(this,f).get(f)}function d(f){return sr(this,f).has(f)}function b(f,g){var I=sr(this,f),z=I.size;return I.set(f,g),this.size+=I.size==z?0:1,this}ks.prototype.clear=l,ks.prototype.delete=c,ks.prototype.get=u,ks.prototype.has=d,ks.prototype.set=b;function w(f){var g=-1,I=f==null?0:f.length;for(this.__data__=new ks;++g<I;)this.add(f[g])}function E(f){return this.__data__.set(f,x),this}function k(f){return this.__data__.has(f)}w.prototype.add=w.prototype.push=E,w.prototype.has=k;function F(f){var g=this.__data__=new Ps(f);this.size=g.size}function j(){this.__data__=new Ps,this.size=0}function et(f){var g=this.__data__,I=g.delete(f);return this.size=g.size,I}function it(f){return this.__data__.get(f)}function ot(f){return this.__data__.has(f)}function gt(f,g){var I=this.__data__;if(I instanceof Ps){var z=I.__data__;if(!Lo||z.length<h-1)return z.push([f,g]),this.size=++I.size,this;I=this.__data__=new ks(z)}return I.set(f,g),this.size=I.size,this}F.prototype.clear=j,F.prototype.delete=et,F.prototype.get=it,F.prototype.has=ot,F.prototype.set=gt;function ft(f,g){var I=Gn(f),z=!I&&Ja(f),G=!I&&!z&&ol(f),st=!I&&!z&&!G&&Uu(f),Mt=I||z||G||st,Ft=Mt?Au(f.length,Zo):[],Xt=Ft.length;for(var Ie in f)(g||Ln.call(f,Ie))&&!(Mt&&(Ie=="length"||G&&(Ie=="offset"||Ie=="parent")||st&&(Ie=="buffer"||Ie=="byteLength"||Ie=="byteOffset")||Os(Ie,Xt)))&&Ft.push(Ie);return Ft}function bt(f){var g=f.length;return g?f[Um(0,g-1)]:i}function ht(f,g){return mc(zs(f),qe(g,0,f.length))}function At(f){return mc(zs(f))}function Lt(f,g,I){(I!==i&&!ur(f[g],I)||I===i&&!(g in f))&&Ce(f,g,I)}function qt(f,g,I){var z=f[g];(!(Ln.call(f,g)&&ur(z,I))||I===i&&!(g in f))&&Ce(f,g,I)}function ne(f,g){for(var I=f.length;I--;)if(ur(f[I][0],g))return I;return-1}function te(f,g,I,z){return kn(f,function(G,st,Mt){g(z,G,I(G),Mt)}),z}function re(f,g){return f&&Bu(g,oa(g),f)}function ve(f,g){return f&&Bu(g,Ko(g),f)}function Ce(f,g,I){g=="__proto__"&&ho?ho(f,g,{configurable:!0,enumerable:!0,value:I,writable:!0}):f[g]=I}function Le(f,g){for(var I=-1,z=g.length,G=Kt(z),st=f==null;++I<z;)G[I]=st?i:Kd(f,g[I]);return G}function qe(f,g,I){return f===f&&(I!==i&&(f=f<=I?f:I),g!==i&&(f=f>=g?f:g)),f}function cn(f,g,I,z,G,st){var Mt,Ft=g&P,Xt=g&L,Ie=g&O;if(I&&(Mt=G?I(f,z,G,st):I(f)),Mt!==i)return Mt;if(!Kr(f))return f;var Ee=Gn(f);if(Ee){if(Mt=F_(f),!Ft)return zs(f,Mt)}else{var ze=Ka(f),_n=ze==ki||ze==ut;if(ol(f))return Bv(f,Ft);if(ze==pe||ze==ui||_n&&!G){if(Mt=Xt||_n?{}:Qv(f),!Ft)return Xt?_f(f,ve(Mt,f)):Vv(f,re(Mt,f))}else{if(!Ci[ze])return G?f:{};Mt=N_(f,ze,Ft)}}st||(st=new F);var jn=st.get(f);if(jn)return jn;st.set(f,Mt),Oh(f)?f.forEach(function(pi){Mt.add(cn(pi,g,I,pi,f,st))}):_c(f)&&f.forEach(function(pi,ir){Mt.set(ir,cn(pi,g,I,ir,f,st))});var fi=Ie?Xt?Qm:Km:Xt?Ko:oa,Ki=Ee?i:fi(f);return xo(Ki||f,function(pi,ir){Ki&&(ir=pi,pi=f[ir]),qt(Mt,ir,cn(pi,g,I,ir,f,st))}),Mt}function Sn(f){var g=oa(f);return function(I){return Mn(I,f,g)}}function Mn(f,g,I){var z=I.length;if(f==null)return!z;for(f=pn(f);z--;){var G=I[z],st=g[G],Mt=f[G];if(Mt===i&&!(G in f)||!st(Mt))return!1}return!0}function Oi(f,g,I){if(typeof f!="function")throw new no(o);return Sh(function(){f.apply(i,I)},g)}function Je(f,g,I,z){var G=-1,st=xu,Mt=!0,Ft=f.length,Xt=[],Ie=g.length;if(!Ft)return Xt;I&&(g=Vr(g,ta(I))),z?(st=$i,Mt=!1):g.length>=h&&(st=wu,Mt=!1,g=new w(g));t:for(;++G<Ft;){var Ee=f[G],ze=I==null?Ee:I(Ee);if(Ee=z||Ee!==0?Ee:0,Mt&&ze===ze){for(var _n=Ie;_n--;)if(g[_n]===ze)continue t;Xt.push(Ee)}else st(g,ze,z)||Xt.push(Ee)}return Xt}var kn=Wm(Ur),Jn=Wm(bo,!0);function Un(f,g){var I=!0;return kn(f,function(z,G,st){return I=!!g(z,G,st),I}),I}function On(f,g,I){for(var z=-1,G=f.length;++z<G;){var st=f[z],Mt=g(st);if(Mt!=null&&(Ft===i?Mt===Mt&&!Ca(Mt):I(Mt,Ft)))var Ft=Mt,Xt=st}return Xt}function ti(f,g,I,z){var G=f.length;for(I=Si(I),I<0&&(I=-I>G?0:G+I),z=z===i||z>G?G:Si(z),z<0&&(z+=G),z=I>z?0:Cy(z);I<z;)f[I++]=g;return f}function Bn(f,g){var I=[];return kn(f,function(z,G,st){g(z,G,st)&&I.push(z)}),I}function dn(f,g,I,z,G){var st=-1,Mt=f.length;for(I||(I=Md),G||(G=[]);++st<Mt;){var Ft=f[st];g>0&&I(Ft)?g>1?dn(Ft,g-1,I,z,G):Da(G,Ft):z||(G[G.length]=Ft)}return G}var po=Zm(),Xr=Zm(!0);function Ur(f,g){return f&&po(f,g,oa)}function bo(f,g){return f&&Xr(f,g,oa)}function Cr(f,g){return $o(g,function(I){return Rl(f[I])})}function yr(f,g){g=pc(g,f);for(var I=0,z=g.length;f!=null&&I<z;)f=f[ou(g[I++])];return I&&I==z?f:i}function Oa(f,g,I){var z=g(f);return Gn(f)?z:Da(z,I(f))}function dr(f){return f==null?f===i?wn:ae:ro&&ro in pn(f)?Af(f):Td(f)}function Ml(f,g){return f>g}function Ba(f,g){return f!=null&&Ln.call(f,g)}function el(f,g){return f!=null&&g in pn(f)}function Ds(f,g,I){return f>=Yr(g,I)&&f<Rn(g,I)}function cc(f,g,I){for(var z=I?$i:xu,G=f[0].length,st=f.length,Mt=st,Ft=Kt(st),Xt=1/0,Ie=[];Mt--;){var Ee=f[Mt];Mt&&g&&(Ee=Vr(Ee,ta(g))),Xt=Yr(Ee.length,Xt),Ft[Mt]=!I&&(g||G>=120&&Ee.length>=120)?new w(Mt&&Ee):i}Ee=f[0];var ze=-1,_n=Ft[0];t:for(;++ze<G&&Ie.length<Xt;){var jn=Ee[ze],fi=g?g(jn):jn;if(jn=I||jn!==0?jn:0,!(_n?wu(_n,fi):z(Ie,fi,I))){for(Mt=st;--Mt;){var Ki=Ft[Mt];if(!(Ki?wu(Ki,fi):z(f[Mt],fi,I)))continue t}_n&&_n.push(fi),Ie.push(jn)}}return Ie}function Hc(f,g,I,z){return Ur(f,function(G,st,Mt){g(z,I(G),st,Mt)}),z}function Rs(f,g,I){g=pc(g,f),f=tg(f,g);var z=f==null?f:f[ou(kl(g))];return z==null?i:co(z,f,I)}function hc(f){return Qr(f)&&dr(f)==ui}function bh(f){return Qr(f)&&dr(f)==Qn}function El(f){return Qr(f)&&dr(f)==me}function Jl(f,g,I,z,G){return f===g?!0:f==null||g==null||!Qr(f)&&!Qr(g)?f!==f&&g!==g:Sl(f,g,I,z,Jl,G)}function Sl(f,g,I,z,G,st){var Mt=Gn(f),Ft=Gn(g),Xt=Mt?bi:Ka(f),Ie=Ft?bi:Ka(g);Xt=Xt==ui?pe:Xt,Ie=Ie==ui?pe:Ie;var Ee=Xt==pe,ze=Ie==pe,_n=Xt==Ie;if(_n&&ol(f)){if(!ol(g))return!1;Mt=!0,Ee=!1}if(_n&&!Ee)return st||(st=new F),Mt||Uu(f)?Yv(f,g,I,z,G,st):R_(f,g,Xt,I,z,G,st);if(!(I&W)){var jn=Ee&&Ln.call(f,"__wrapped__"),fi=ze&&Ln.call(g,"__wrapped__");if(jn||fi){var Ki=jn?f.value():f,pi=fi?g.value():g;return st||(st=new F),G(Ki,pi,I,z,st)}}return _n?(st||(st=new F),z_(f,g,I,z,G,st)):!1}function ko(f){return Qr(f)&&Ka(f)==xt}function nl(f,g,I,z){var G=I.length,st=G,Mt=!z;if(f==null)return!st;for(f=pn(f);G--;){var Ft=I[G];if(Mt&&Ft[2]?Ft[1]!==f[Ft[0]]:!(Ft[0]in f))return!1}for(;++G<st;){Ft=I[G];var Xt=Ft[0],Ie=f[Xt],Ee=Ft[1];if(Mt&&Ft[2]){if(Ie===i&&!(Xt in f))return!1}else{var ze=new F;if(z)var _n=z(Ie,Ee,Xt,f,g,ze);if(!(_n===i?Jl(Ee,Ie,W|H,z,ze):_n))return!1}}return!0}function tu(f){if(!Kr(f)||$v(f))return!1;var g=Rl(f)?Ye:je;return g.test(Zc(f))}function fc(f){return Qr(f)&&dr(f)==we}function Yi(f){return Qr(f)&&Ka(f)==De}function fs(f){return Qr(f)&&zl(f.length)&&!!Ui[dr(f)]}function xa(f){return typeof f=="function"?f:f==null?Ol:typeof f=="object"?Gn(f)?yp(f[0],f[1]):qc(f):uA(f)}function eu(f){if(!dc(f))return cs(f);var g=[];for(var I in pn(f))Ln.call(f,I)&&I!="constructor"&&g.push(I);return g}function Nm(f){if(!Kr(f))return Sd(f);var g=dc(f),I=[];for(var z in f)z=="constructor"&&(g||!Ln.call(f,z))||I.push(z);return I}function Gc(f,g){return f<g}function cd(f,g){var I=-1,z=Xi(f)?Kt(f.length):[];return kn(f,function(G,st,Mt){z[++I]=g(G,st,Mt)}),z}function qc(f){var g=Cd(f);return g.length==1&&g[0][2]?ds(g[0][0],g[0][1]):function(I){return I===f||nl(I,f,g)}}function yp(f,g){return $m(f)&&wf(g)?ds(ou(f),g):function(I){var z=Kd(I,f);return z===i&&z===g?Rf(I,f):Jl(g,z,W|H)}}function nu(f,g,I,z,G){f!==g&&po(g,function(st,Mt){if(G||(G=new F),Kr(st))gf(f,g,Mt,I,nu,z,G);else{var Ft=z?z(eg(f,Mt),st,Mt+"",f,g,G):i;Ft===i&&(Ft=st),Lt(f,Mt,Ft)}},Ko)}function gf(f,g,I,z,G,st,Mt){var Ft=eg(f,I),Xt=eg(g,I),Ie=Mt.get(Xt);if(Ie){Lt(f,I,Ie);return}var Ee=st?st(Ft,Xt,I+"",f,g,Mt):i,ze=Ee===i;if(ze){var _n=Gn(Xt),jn=!_n&&ol(Xt),fi=!_n&&!jn&&Uu(Xt);Ee=Xt,_n||jn||fi?Gn(Ft)?Ee=Ft:Er(Ft)?Ee=zs(Ft):jn?(ze=!1,Ee=Bv(Xt,!0)):fi?(ze=!1,Ee=vd(Xt,!0)):Ee=[]:xc(Xt)||Ja(Xt)?(Ee=Ft,Ja(Ft)?Ee=to(Ft):(!Kr(Ft)||Rl(Ft))&&(Ee=Qv(Xt))):ze=!1}ze&&(Mt.set(Xt,Ee),G(Ee,Xt,z,st,Mt),Mt.delete(Xt)),Lt(f,I,Ee)}function hd(f,g){var I=f.length;if(I)return g+=g<0?I:0,Os(g,I)?f[g]:i}function Wc(f,g,I){g.length?g=Vr(g,function(st){return Gn(st)?function(Mt){return yr(Mt,st.length===1?st[0]:st)}:st}):g=[Ol];var z=-1;g=Vr(g,ta(Zn()));var G=cd(f,function(st,Mt,Ft){var Xt=Vr(g,function(Ie){return Ie(st)});return{criteria:Xt,index:++z,value:st}});return xl(G,function(st,Mt){return iu(st,Mt,I)})}function Xa(f,g){return kv(f,g,function(I,z){return Rf(f,z)})}function kv(f,g,I){for(var z=-1,G=g.length,st={};++z<G;){var Mt=g[z],Ft=yr(f,Mt);I(Ft,Mt)&&Tl(st,pc(Mt,f),Ft)}return st}function Dv(f){return function(g){return yr(g,f)}}function Vm(f,g,I,z){var G=z?gh:Yl,st=-1,Mt=g.length,Ft=f;for(f===g&&(g=zs(g)),I&&(Ft=Vr(f,ta(I)));++st<Mt;)for(var Xt=0,Ie=g[st],Ee=I?I(Ie):Ie;(Xt=G(Ft,Ee,Xt,z))>-1;)Ft!==f&&Js.call(Ft,Xt,1),Js.call(f,Xt,1);return f}function Rv(f,g){for(var I=f?g.length:0,z=I-1;I--;){var G=g[I];if(I==z||G!==st){var st=G;Os(G)?Js.call(f,G,1):Hm(f,G)}}return f}function Um(f,g){return f+yh(Tu()*(g-f+1))}function M_(f,g,I,z){for(var G=-1,st=Rn(Ss((g-f)/(I||1)),0),Mt=Kt(st);st--;)Mt[z?st:++G]=f,f+=I;return Mt}function _p(f,g){var I="";if(!f||g<1||g>Ue)return I;do g%2&&(I+=f),g=yh(g/2),g&&(f+=f);while(g);return I}function Hi(f,g){return Ip($a(f,g,Ol),f+"")}function fd(f){return bt(Vh(f))}function zv(f,g){var I=Vh(f);return mc(I,qe(g,0,I.length))}function Tl(f,g,I,z){if(!Kr(f))return f;g=pc(g,f);for(var G=-1,st=g.length,Mt=st-1,Ft=f;Ft!=null&&++G<st;){var Xt=ou(g[G]),Ie=I;if(Xt==="__proto__"||Xt==="constructor"||Xt==="prototype")return f;if(G!=Mt){var Ee=Ft[Xt];Ie=z?z(Ee,Xt,Ft):i,Ie===i&&(Ie=Kr(Ee)?Ee:Os(g[G+1])?[]:{})}qt(Ft,Xt,Ie),Ft=Ft[Xt]}return f}var vf=Bo?function(f,g){return Bo.set(f,g),f}:Ol,E_=ho?function(f,g){return ho(f,"toString",{configurable:!0,enumerable:!1,value:m1(g),writable:!0})}:Ol;function S_(f){return mc(Vh(f))}function Pl(f,g,I){var z=-1,G=f.length;g<0&&(g=-g>G?0:G+g),I=I>G?G:I,I<0&&(I+=G),G=g>I?0:I-g>>>0,g>>>=0;for(var st=Kt(G);++z<G;)st[z]=f[z+g];return st}function T_(f,g){var I;return kn(f,function(z,G,st){return I=g(z,G,st),!I}),!!I}function pd(f,g,I){var z=0,G=f==null?z:f.length;if(typeof g=="number"&&g===g&&G<=Kn){for(;z<G;){var st=z+G>>>1,Mt=f[st];Mt!==null&&!Ca(Mt)&&(I?Mt<=g:Mt<g)?z=st+1:G=st}return G}return jm(f,g,Ol,I)}function jm(f,g,I,z){var G=0,st=f==null?0:f.length;if(st===0)return 0;g=I(g);for(var Mt=g!==g,Ft=g===null,Xt=Ca(g),Ie=g===i;G<st;){var Ee=yh((G+st)/2),ze=I(f[Ee]),_n=ze!==i,jn=ze===null,fi=ze===ze,Ki=Ca(ze);if(Mt)var pi=z||fi;else Ie?pi=fi&&(z||_n):Ft?pi=fi&&_n&&(z||!jn):Xt?pi=fi&&_n&&!jn&&(z||!Ki):jn||Ki?pi=!1:pi=z?ze<=g:ze<g;pi?G=Ee+1:st=Ee}return Yr(st,mn)}function Ov(f,g){for(var I=-1,z=f.length,G=0,st=[];++I<z;){var Mt=f[I],Ft=g?g(Mt):Mt;if(!I||!ur(Ft,Xt)){var Xt=Ft;st[G++]=Mt===0?0:Mt}}return st}function dd(f){return typeof f=="number"?f:Ca(f)?ri:+f}function il(f){if(typeof f=="string")return f;if(Gn(f))return Vr(f,il)+"";if(Ca(f))return ku?ku.call(f):"";var g=f+"";return g=="0"&&1/f==-He?"-0":g}function rl(f,g,I){var z=-1,G=xu,st=f.length,Mt=!0,Ft=[],Xt=Ft;if(I)Mt=!1,G=$i;else if(st>=h){var Ie=g?null:Fa(f);if(Ie)return $s(Ie);Mt=!1,G=wu,Xt=new w}else Xt=g?[]:Ft;t:for(;++z<st;){var Ee=f[z],ze=g?g(Ee):Ee;if(Ee=I||Ee!==0?Ee:0,Mt&&ze===ze){for(var _n=Xt.length;_n--;)if(Xt[_n]===ze)continue t;g&&Xt.push(ze),Ft.push(Ee)}else G(Xt,ze,I)||(Xt!==Ft&&Xt.push(ze),Ft.push(Ee))}return Ft}function Hm(f,g){return g=pc(g,f),f=tg(f,g),f==null||delete f[ou(kl(g))]}function mo(f,g,I,z){return Tl(f,g,I(yr(f,g)),z)}function Ah(f,g,I,z){for(var G=f.length,st=z?G:-1;(z?st--:++st<G)&&g(f[st],st,f););return I?Pl(f,z?0:st,z?st+1:G):Pl(f,z?st+1:0,z?G:st)}function Gm(f,g){var I=f;return I instanceof di&&(I=I.value()),vl(g,function(z,G){return G.func.apply(G.thisArg,Da([z],G.args))},I)}function yf(f,g,I){var z=f.length;if(z<2)return z?rl(f[0]):[];for(var G=-1,st=Kt(z);++G<z;)for(var Mt=f[G],Ft=-1;++Ft<z;)Ft!=G&&(st[G]=Je(st[G]||Mt,f[Ft],g,I));return rl(dn(st,1),g,I)}function xp(f,g,I){for(var z=-1,G=f.length,st=g.length,Mt={};++z<G;){var Ft=z<st?g[z]:i;I(Mt,f[z],Ft)}return Mt}function wh(f){return Er(f)?f:[]}function md(f){return typeof f=="function"?f:Ol}function pc(f,g){return Gn(f)?f:$m(f,g)?[f]:Pd(Sr(f))}var bp=Hi;function Ou(f,g,I){var z=f.length;return I=I===i?z:I,!g&&I>=z?f:Pl(f,g,I)}var gd=hf||function(f){return lo.clearTimeout(f)};function Bv(f,g){if(g)return f.slice();var I=f.length,z=To?To(I):new f.constructor(I);return f.copy(z),z}function Ch(f){var g=new f.constructor(f.byteLength);return new ya(g).set(new ya(f)),g}function P_(f,g){var I=g?Ch(f.buffer):f.buffer;return new f.constructor(I,f.byteOffset,f.byteLength)}function qm(f){var g=new f.constructor(f.source,oe.exec(f));return g.lastIndex=f.lastIndex,g}function L_(f){return Vc?pn(Vc.call(f)):{}}function vd(f,g){var I=g?Ch(f.buffer):f.buffer;return new f.constructor(I,f.byteOffset,f.length)}function yd(f,g){if(f!==g){var I=f!==i,z=f===null,G=f===f,st=Ca(f),Mt=g!==i,Ft=g===null,Xt=g===g,Ie=Ca(g);if(!Ft&&!Ie&&!st&&f>g||st&&Mt&&Xt&&!Ft&&!Ie||z&&Mt&&Xt||!I&&Xt||!G)return 1;if(!z&&!st&&!Ie&&f<g||Ie&&I&&G&&!z&&!st||Ft&&I&&G||!Mt&&G||!Xt)return-1}return 0}function iu(f,g,I){for(var z=-1,G=f.criteria,st=g.criteria,Mt=G.length,Ft=I.length;++z<Mt;){var Xt=yd(G[z],st[z]);if(Xt){if(z>=Ft)return Xt;var Ie=I[z];return Xt*(Ie=="desc"?-1:1)}}return f.index-g.index}function Fv(f,g,I,z){for(var G=-1,st=f.length,Mt=I.length,Ft=-1,Xt=g.length,Ie=Rn(st-Mt,0),Ee=Kt(Xt+Ie),ze=!z;++Ft<Xt;)Ee[Ft]=g[Ft];for(;++G<Mt;)(ze||G<st)&&(Ee[I[G]]=f[G]);for(;Ie--;)Ee[Ft++]=f[G++];return Ee}function Nv(f,g,I,z){for(var G=-1,st=f.length,Mt=-1,Ft=I.length,Xt=-1,Ie=g.length,Ee=Rn(st-Ft,0),ze=Kt(Ee+Ie),_n=!z;++G<Ee;)ze[G]=f[G];for(var jn=G;++Xt<Ie;)ze[jn+Xt]=g[Xt];for(;++Mt<Ft;)(_n||G<st)&&(ze[jn+I[Mt]]=f[G++]);return ze}function zs(f,g){var I=-1,z=f.length;for(g||(g=Kt(z));++I<z;)g[I]=f[I];return g}function Bu(f,g,I,z){var G=!I;I||(I={});for(var st=-1,Mt=g.length;++st<Mt;){var Ft=g[st],Xt=z?z(I[Ft],f[Ft],Ft,I,f):i;Xt===i&&(Xt=f[Ft]),G?Ce(I,Ft,Xt):qt(I,Ft,Xt)}return I}function Vv(f,g){return Bu(f,Id(f),g)}function _f(f,g){return Bu(f,Xv(f),g)}function _d(f,g){return function(I,z){var G=Gn(I)?as:te,st=g?g():{};return G(I,f,Zn(z,2),st)}}function xf(f){return Hi(function(g,I){var z=-1,G=I.length,st=G>1?I[G-1]:i,Mt=G>2?I[2]:i;for(st=f.length>3&&typeof st=="function"?(G--,st):i,Mt&&Qa(I[0],I[1],Mt)&&(st=G<3?i:st,G=1),g=pn(g);++z<G;){var Ft=I[z];Ft&&f(g,Ft,z,st)}return g})}function Wm(f,g){return function(I,z){if(I==null)return I;if(!Xi(I))return f(I,z);for(var G=I.length,st=g?G:-1,Mt=pn(I);(g?st--:++st<G)&&z(Mt[st],st,Mt)!==!1;);return I}}function Zm(f){return function(g,I,z){for(var G=-1,st=pn(g),Mt=z(g),Ft=Mt.length;Ft--;){var Xt=Mt[f?Ft:++G];if(I(st[Xt],Xt,st)===!1)break}return g}}function k_(f,g,I){var z=g&nt,G=Ap(f);function st(){var Mt=this&&this!==lo&&this instanceof st?G:f;return Mt.apply(z?I:this,arguments)}return st}function Uv(f){return function(g){g=Sr(g);var I=us(g)?ga(g):i,z=I?I[0]:g.charAt(0),G=I?Ou(I,1).join(""):g.slice(1);return z[f]()+G}}function ru(f){return function(g){return vl(sA(xg(g).replace(or,"")),f,"")}}function Ap(f){return function(){var g=arguments;switch(g.length){case 0:return new f;case 1:return new f(g[0]);case 2:return new f(g[0],g[1]);case 3:return new f(g[0],g[1],g[2]);case 4:return new f(g[0],g[1],g[2],g[3]);case 5:return new f(g[0],g[1],g[2],g[3],g[4]);case 6:return new f(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new f(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var I=Ya(f.prototype),z=f.apply(I,g);return Kr(z)?z:I}}function Ym(f,g,I){var z=Ap(f);function G(){for(var st=arguments.length,Mt=Kt(st),Ft=st,Xt=Eh(G);Ft--;)Mt[Ft]=arguments[Ft];var Ie=st<3&&Mt[0]!==Xt&&Mt[st-1]!==Xt?[]:Wo(Mt,Xt);if(st-=Ie.length,st<I)return Gv(f,g,xd,G.placeholder,i,Mt,Ie,i,i,I-st);var Ee=this&&this!==lo&&this instanceof G?z:f;return co(Ee,this,Mt)}return G}function bf(f){return function(g,I,z){var G=pn(g);if(!Xi(g)){var st=Zn(I,3);g=oa(g),I=function(Ft){return st(G[Ft],Ft,G)}}var Mt=f(g,I,z);return Mt>-1?G[st?g[Mt]:Mt]:i}}function Ll(f){return Nu(function(g){var I=g.length,z=I,G=na.prototype.thru;for(f&&g.reverse();z--;){var st=g[z];if(typeof st!="function")throw new no(o);if(G&&!Mt&&Cp(st)=="wrapper")var Mt=new na([],!0)}for(z=Mt?z:I;++z<I;){st=g[z];var Ft=Cp(st),Xt=Ft=="wrapper"?Mh(st):i;Xt&&Jm(Xt[0])&&Xt[1]==(Et|$|Rt|Gt)&&!Xt[4].length&&Xt[9]==1?Mt=Mt[Cp(Xt[0])].apply(Mt,Xt[3]):Mt=st.length==1&&Jm(st)?Mt[Ft]():Mt.thru(st)}return function(){var Ie=arguments,Ee=Ie[0];if(Mt&&Ie.length==1&&Gn(Ee))return Mt.plant(Ee).value();for(var ze=0,_n=I?g[ze].apply(this,Ie):Ee;++ze<I;)_n=g[ze].call(this,_n);return _n}})}function xd(f,g,I,z,G,st,Mt,Ft,Xt,Ie){var Ee=g&Et,ze=g&nt,_n=g&lt,jn=g&($|yt),fi=g&kt,Ki=_n?i:Ap(f);function pi(){for(var ir=arguments.length,pr=Kt(ir),su=ir;su--;)pr[su]=arguments[su];if(jn)var al=Eh(pi),lu=Cu(pr,al);if(z&&(pr=Fv(pr,z,G,jn)),st&&(pr=Nv(pr,st,Mt,jn)),ir-=lu,jn&&ir<Ie){var aa=Wo(pr,al);return Gv(f,g,xd,pi.placeholder,I,pr,aa,Ft,Xt,Ie-ir)}var Ac=ze?I:this,Uh=_n?Ac[f]:f;return ir=pr.length,Ft?pr=Jv(pr,Ft):fi&&ir>1&&pr.reverse(),Ee&&Xt<ir&&(pr.length=Xt),this&&this!==lo&&this instanceof pi&&(Uh=Ki||Ap(Uh)),Uh.apply(Ac,pr)}return pi}function jv(f,g){return function(I,z){return Hc(I,f,g(z),{})}}function bd(f,g){return function(I,z){var G;if(I===i&&z===i)return g;if(I!==i&&(G=I),z!==i){if(G===i)return z;typeof I=="string"||typeof z=="string"?(I=il(I),z=il(z)):(I=dd(I),z=dd(z)),G=f(I,z)}return G}}function Ih(f){return Nu(function(g){return g=Vr(g,ta(Zn())),Hi(function(I){var z=this;return f(g,function(G){return co(G,z,I)})})})}function wp(f,g){g=g===i?" ":il(g);var I=g.length;if(I<2)return I?_p(g,f):g;var z=_p(g,Ss(f/Kl(g)));return us(g)?Ou(ga(z),0,f).join(""):z.slice(0,f)}function D_(f,g,I,z){var G=g&nt,st=Ap(f);function Mt(){for(var Ft=-1,Xt=arguments.length,Ie=-1,Ee=z.length,ze=Kt(Ee+Xt),_n=this&&this!==lo&&this instanceof Mt?st:f;++Ie<Ee;)ze[Ie]=z[Ie];for(;Xt--;)ze[Ie++]=arguments[++Ft];return co(_n,G?I:this,ze)}return Mt}function Hv(f){return function(g,I,z){return z&&typeof z!="number"&&Qa(g,I,z)&&(I=z=i),g=ju(g),I===i?(I=g,g=0):I=ju(I),z=z===i?g<I?1:-1:ju(z),M_(g,I,z,f)}}function Ad(f){return function(g,I){return typeof g=="string"&&typeof I=="string"||(g=ts(g),I=ts(I)),f(g,I)}}function Gv(f,g,I,z,G,st,Mt,Ft,Xt,Ie){var Ee=g&$,ze=Ee?Mt:i,_n=Ee?i:Mt,jn=Ee?st:i,fi=Ee?i:st;g|=Ee?Rt:Ct,g&=~(Ee?Ct:Rt),g&K||(g&=~(nt|lt));var Ki=[f,g,G,jn,ze,fi,_n,Ft,Xt,Ie],pi=I.apply(i,Ki);return Jm(f)&&ng(pi,Ki),pi.placeholder=z,ty(pi,f,g)}function wd(f){var g=Ii[f];return function(I,z){if(I=ts(I),z=z==null?0:Yr(Si(z),292),z&&pf(I)){var G=(Sr(I)+"e").split("e"),st=g(G[0]+"e"+(+G[1]+z));return G=(Sr(st)+"e").split("e"),+(G[0]+"e"+(+G[1]-z))}return g(I)}}var Fa=vn&&1/$s(new vn([,-0]))[1]==He?function(f){return new vn(f)}:y1;function qv(f){return function(g){var I=Ka(g);return I==xt?Bc(g):I==De?ac(g):zc(g,f(g))}}function Fu(f,g,I,z,G,st,Mt,Ft){var Xt=g&lt;if(!Xt&&typeof f!="function")throw new no(o);var Ie=z?z.length:0;if(Ie||(g&=~(Rt|Ct),z=G=i),Mt=Mt===i?Mt:Rn(Si(Mt),0),Ft=Ft===i?Ft:Si(Ft),Ie-=G?G.length:0,g&Ct){var Ee=z,ze=G;z=G=i}var _n=Xt?i:Mh(f),jn=[f,g,I,z,G,Ee,ze,st,Mt,Ft];if(_n&&ba(jn,_n),f=jn[0],g=jn[1],I=jn[2],z=jn[3],G=jn[4],Ft=jn[9]=jn[9]===i?Xt?0:f.length:Rn(jn[9]-Ie,0),!Ft&&g&($|yt)&&(g&=~($|yt)),!g||g==nt)var fi=k_(f,g,I);else g==$||g==yt?fi=Ym(f,g,Ft):(g==Rt||g==(nt|Rt))&&!G.length?fi=D_(f,g,I,z):fi=xd.apply(i,jn);var Ki=_n?vf:ng;return ty(Ki(fi,jn),f,g)}function Xm(f,g,I,z){return f===i||ur(f,Su[I])&&!Ln.call(z,I)?g:f}function Wv(f,g,I,z,G,st){return Kr(f)&&Kr(g)&&(st.set(g,f),nu(f,g,i,Wv,st),st.delete(g)),f}function Zv(f){return xc(f)?i:f}function Yv(f,g,I,z,G,st){var Mt=I&W,Ft=f.length,Xt=g.length;if(Ft!=Xt&&!(Mt&&Xt>Ft))return!1;var Ie=st.get(f),Ee=st.get(g);if(Ie&&Ee)return Ie==g&&Ee==f;var ze=-1,_n=!0,jn=I&H?new w:i;for(st.set(f,g),st.set(g,f);++ze<Ft;){var fi=f[ze],Ki=g[ze];if(z)var pi=Mt?z(Ki,fi,ze,g,f,st):z(fi,Ki,ze,f,g,st);if(pi!==i){if(pi)continue;_n=!1;break}if(jn){if(!bu(g,function(ir,pr){if(!wu(jn,pr)&&(fi===ir||G(fi,ir,I,z,st)))return jn.push(pr)})){_n=!1;break}}else if(!(fi===Ki||G(fi,Ki,I,z,st))){_n=!1;break}}return st.delete(f),st.delete(g),_n}function R_(f,g,I,z,G,st,Mt){switch(I){case Di:if(f.byteLength!=g.byteLength||f.byteOffset!=g.byteOffset)return!1;f=f.buffer,g=g.buffer;case Qn:return!(f.byteLength!=g.byteLength||!st(new ya(f),new ya(g)));case Ke:case me:case $t:return ur(+f,+g);case Ai:return f.name==g.name&&f.message==g.message;case we:case Se:return f==g+"";case xt:var Ft=Bc;case De:var Xt=z&W;if(Ft||(Ft=$s),f.size!=g.size&&!Xt)return!1;var Ie=Mt.get(f);if(Ie)return Ie==g;z|=H,Mt.set(f,g);var Ee=Yv(Ft(f),Ft(g),z,G,st,Mt);return Mt.delete(f),Ee;case tn:if(Vc)return Vc.call(f)==Vc.call(g)}return!1}function z_(f,g,I,z,G,st){var Mt=I&W,Ft=Km(f),Xt=Ft.length,Ie=Km(g),Ee=Ie.length;if(Xt!=Ee&&!Mt)return!1;for(var ze=Xt;ze--;){var _n=Ft[ze];if(!(Mt?_n in g:Ln.call(g,_n)))return!1}var jn=st.get(f),fi=st.get(g);if(jn&&fi)return jn==g&&fi==f;var Ki=!0;st.set(f,g),st.set(g,f);for(var pi=Mt;++ze<Xt;){_n=Ft[ze];var ir=f[_n],pr=g[_n];if(z)var su=Mt?z(pr,ir,_n,g,f,st):z(ir,pr,_n,f,g,st);if(!(su===i?ir===pr||G(ir,pr,I,z,st):su)){Ki=!1;break}pi||(pi=_n=="constructor")}if(Ki&&!pi){var al=f.constructor,lu=g.constructor;al!=lu&&"constructor"in f&&"constructor"in g&&!(typeof al=="function"&&al instanceof al&&typeof lu=="function"&&lu instanceof lu)&&(Ki=!1)}return st.delete(f),st.delete(g),Ki}function Nu(f){return Ip($a(f,i,sy),f+"")}function Km(f){return Oa(f,oa,Id)}function Qm(f){return Oa(f,Ko,Xv)}var Mh=Bo?function(f){return Bo.get(f)}:y1;function Cp(f){for(var g=f.name+"",I=_a[g],z=Ln.call(_a,g)?I.length:0;z--;){var G=I[z],st=G.func;if(st==null||st==f)return G.name}return g}function Eh(f){var g=Ln.call(rt,"placeholder")?rt:f;return g.placeholder}function Zn(){var f=rt.iteratee||g1;return f=f===g1?xa:f,arguments.length?f(arguments[0],arguments[1]):f}function sr(f,g){var I=f.__data__;return U_(g)?I[typeof g=="string"?"string":"hash"]:I.map}function Cd(f){for(var g=oa(f),I=g.length;I--;){var z=g[I],G=f[z];g[I]=[z,G,wf(G)]}return g}function ps(f,g){var I=Qs(f,g);return tu(I)?I:i}function Af(f){var g=Ln.call(f,ro),I=f[ro];try{f[ro]=i;var z=!0}catch{}var G=Es.call(f);return z&&(g?f[ro]=I:delete f[ro]),G}var Id=sc?function(f){return f==null?[]:(f=pn(f),$o(sc(f),function(g){return Re.call(f,g)}))}:_1,Xv=sc?function(f){for(var g=[];f;)Da(g,Id(f)),f=Po(f);return g}:_1,Ka=dr;(hs&&Ka(new hs(new ArrayBuffer(1)))!=Di||Lo&&Ka(new Lo)!=xt||lc&&Ka(lc.resolve())!=Oe||vn&&Ka(new vn)!=De||un&&Ka(new un)!=Cn)&&(Ka=function(f){var g=dr(f),I=g==pe?f.constructor:i,z=I?Zc(I):"";if(z)switch(z){case Xo:return Di;case Il:return xt;case dp:return Oe;case df:return De;case Ji:return Cn}return g});function O_(f,g,I){for(var z=-1,G=I.length;++z<G;){var st=I[z],Mt=st.size;switch(st.type){case"drop":f+=Mt;break;case"dropRight":g-=Mt;break;case"take":g=Yr(g,f+Mt);break;case"takeRight":f=Rn(f,g-Mt);break}}return{start:f,end:g}}function B_(f){var g=f.match(ge);return g?g[1].split(be):[]}function Kv(f,g,I){g=pc(g,f);for(var z=-1,G=g.length,st=!1;++z<G;){var Mt=ou(g[z]);if(!(st=f!=null&&I(f,Mt)))break;f=f[Mt]}return st||++z!=G?st:(G=f==null?0:f.length,!!G&&zl(G)&&Os(Mt,G)&&(Gn(f)||Ja(f)))}function F_(f){var g=f.length,I=new f.constructor(g);return g&&typeof f[0]=="string"&&Ln.call(f,"index")&&(I.index=f.index,I.input=f.input),I}function Qv(f){return typeof f.constructor=="function"&&!dc(f)?Ya(Po(f)):{}}function N_(f,g,I){var z=f.constructor;switch(g){case Qn:return Ch(f);case Ke:case me:return new z(+f);case Di:return P_(f,I);case wi:case rr:case Gr:case qo:case pa:case Pa:case Ga:case Ar:case Mo:return vd(f,I);case xt:return new z;case $t:case Se:return new z(f);case we:return qm(f);case De:return new z;case tn:return L_(f)}}function V_(f,g){var I=g.length;if(!I)return f;var z=I-1;return g[z]=(I>1?"& ":"")+g[z],g=g.join(I>2?", ":" "),f.replace(Zt,`{
/* [wrapped with `+g+`] */
`)}function Md(f){return Gn(f)||Ja(f)||!!(wl&&f&&f[wl])}function Os(f,g){var I=typeof f;return g=g??Ue,!!g&&(I=="number"||I!="symbol"&&Ze.test(f))&&f>-1&&f%1==0&&f<g}function Qa(f,g,I){if(!Kr(I))return!1;var z=typeof g;return(z=="number"?Xi(I)&&Os(g,I.length):z=="string"&&g in I)?ur(I[g],f):!1}function $m(f,g){if(Gn(f))return!1;var I=typeof f;return I=="number"||I=="symbol"||I=="boolean"||f==null||Ca(f)?!0:at.test(f)||!Q.test(f)||g!=null&&f in pn(g)}function U_(f){var g=typeof f;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?f!=="__proto__":f===null}function Jm(f){var g=Cp(f),I=rt[g];if(typeof I!="function"||!(g in di.prototype))return!1;if(f===I)return!0;var z=Mh(I);return!!z&&f===z[0]}function $v(f){return!!hr&&hr in f}var Ed=Nc?Rl:x1;function dc(f){var g=f&&f.constructor,I=typeof g=="function"&&g.prototype||Su;return f===I}function wf(f){return f===f&&!Kr(f)}function ds(f,g){return function(I){return I==null?!1:I[f]===g&&(g!==i||f in pn(I))}}function Cf(f){var g=zr(f,function(z){return I.size===M&&I.clear(),z}),I=g.cache;return g}function ba(f,g){var I=f[1],z=g[1],G=I|z,st=G<(nt|lt|Et),Mt=z==Et&&I==$||z==Et&&I==Gt&&f[7].length<=g[8]||z==(Et|Gt)&&g[7].length<=g[8]&&I==$;if(!(st||Mt))return f;z&nt&&(f[2]=g[2],G|=I&nt?0:K);var Ft=g[3];if(Ft){var Xt=f[3];f[3]=Xt?Fv(Xt,Ft,g[4]):Ft,f[4]=Xt?Wo(f[3],T):g[4]}return Ft=g[5],Ft&&(Xt=f[5],f[5]=Xt?Nv(Xt,Ft,g[6]):Ft,f[6]=Xt?Wo(f[5],T):g[6]),Ft=g[7],Ft&&(f[7]=Ft),z&Et&&(f[8]=f[8]==null?g[8]:Yr(f[8],g[8])),f[9]==null&&(f[9]=g[9]),f[0]=g[0],f[1]=G,f}function Sd(f){var g=[];if(f!=null)for(var I in pn(f))g.push(I);return g}function Td(f){return Es.call(f)}function $a(f,g,I){return g=Rn(g===i?f.length-1:g,0),function(){for(var z=arguments,G=-1,st=Rn(z.length-g,0),Mt=Kt(st);++G<st;)Mt[G]=z[g+G];G=-1;for(var Ft=Kt(g+1);++G<g;)Ft[G]=z[G];return Ft[g]=I(Mt),co(f,this,Ft)}}function tg(f,g){return g.length<2?f:yr(f,Pl(g,0,-1))}function Jv(f,g){for(var I=f.length,z=Yr(g.length,I),G=zs(f);z--;){var st=g[z];f[z]=Os(st,I)?G[st]:i}return f}function eg(f,g){if(!(g==="constructor"&&typeof f[g]=="function")&&g!="__proto__")return f[g]}var ng=ig(vf),Sh=Za||function(f,g){return lo.setTimeout(f,g)},Ip=ig(E_);function ty(f,g,I){var z=g+"";return Ip(f,V_(z,j_(B_(z),I)))}function ig(f){var g=0,I=0;return function(){var z=Ts(),G=Bt-(z-I);if(I=z,G>0){if(++g>=Nt)return arguments[0]}else g=0;return f.apply(i,arguments)}}function mc(f,g){var I=-1,z=f.length,G=z-1;for(g=g===i?z:g;++I<g;){var st=Um(I,G),Mt=f[st];f[st]=f[I],f[I]=Mt}return f.length=g,f}var Pd=Cf(function(f){var g=[];return f.charCodeAt(0)===46&&g.push(""),f.replace(dt,function(I,z,G,st){g.push(G?st.replace(sn,"$1"):z||I)}),g});function ou(f){if(typeof f=="string"||Ca(f))return f;var g=f+"";return g=="0"&&1/f==-He?"-0":g}function Zc(f){if(f!=null){try{return Zi.call(f)}catch{}try{return f+""}catch{}}return""}function j_(f,g){return xo(Li,function(I){var z="_."+I[0];g&I[1]&&!xu(f,z)&&f.push(z)}),f.sort()}function rg(f){if(f instanceof di)return f.clone();var g=new na(f.__wrapped__,f.__chain__);return g.__actions__=zs(f.__actions__),g.__index__=f.__index__,g.__values__=f.__values__,g}function ey(f,g,I){(I?Qa(f,g,I):g===i)?g=1:g=Rn(Si(g),0);var z=f==null?0:f.length;if(!z||g<1)return[];for(var G=0,st=0,Mt=Kt(Ss(z/g));G<z;)Mt[st++]=Pl(f,G,G+=g);return Mt}function ny(f){for(var g=-1,I=f==null?0:f.length,z=0,G=[];++g<I;){var st=f[g];st&&(G[z++]=st)}return G}function iy(){var f=arguments.length;if(!f)return[];for(var g=Kt(f-1),I=arguments[0],z=f;z--;)g[z-1]=arguments[z];return Da(Gn(I)?zs(I):[I],dn(g,1))}var H_=Hi(function(f,g){return Er(f)?Je(f,dn(g,1,Er,!0)):[]}),G_=Hi(function(f,g){var I=kl(g);return Er(I)&&(I=i),Er(f)?Je(f,dn(g,1,Er,!0),Zn(I,2)):[]}),ry=Hi(function(f,g){var I=kl(g);return Er(I)&&(I=i),Er(f)?Je(f,dn(g,1,Er,!0),i,I):[]});function oy(f,g,I){var z=f==null?0:f.length;return z?(g=I||g===i?1:Si(g),Pl(f,g<0?0:g,z)):[]}function Ld(f,g,I){var z=f==null?0:f.length;return z?(g=I||g===i?1:Si(g),g=z-g,Pl(f,0,g<0?0:g)):[]}function ay(f,g){return f&&f.length?Ah(f,Zn(g,3),!0,!0):[]}function kd(f,g){return f&&f.length?Ah(f,Zn(g,3),!0):[]}function Dd(f,g,I,z){var G=f==null?0:f.length;return G?(I&&typeof I!="number"&&Qa(f,g,I)&&(I=0,z=G),ti(f,g,I,z)):[]}function Mp(f,g,I){var z=f==null?0:f.length;if(!z)return-1;var G=I==null?0:Si(I);return G<0&&(G=Rn(z+G,0)),ic(f,Zn(g,3),G)}function Th(f,g,I){var z=f==null?0:f.length;if(!z)return-1;var G=z-1;return I!==i&&(G=Si(I),G=I<0?Rn(z+G,0):Yr(G,z-1)),ic(f,Zn(g,3),G,!0)}function sy(f){var g=f==null?0:f.length;return g?dn(f,1):[]}function q_(f){var g=f==null?0:f.length;return g?dn(f,He):[]}function W_(f,g){var I=f==null?0:f.length;return I?(g=g===i?1:Si(g),dn(f,g)):[]}function If(f){for(var g=-1,I=f==null?0:f.length,z={};++g<I;){var G=f[g];z[G[0]]=G[1]}return z}function Rd(f){return f&&f.length?f[0]:i}function ly(f,g,I){var z=f==null?0:f.length;if(!z)return-1;var G=I==null?0:Si(I);return G<0&&(G=Rn(z+G,0)),Yl(f,g,G)}function og(f){var g=f==null?0:f.length;return g?Pl(f,0,-1):[]}var uy=Hi(function(f){var g=Vr(f,wh);return g.length&&g[0]===f[0]?cc(g):[]}),cy=Hi(function(f){var g=kl(f),I=Vr(f,wh);return g===kl(I)?g=i:I.pop(),I.length&&I[0]===f[0]?cc(I,Zn(g,2)):[]}),Z_=Hi(function(f){var g=kl(f),I=Vr(f,wh);return g=typeof g=="function"?g:i,g&&I.pop(),I.length&&I[0]===f[0]?cc(I,i,g):[]});function Y_(f,g){return f==null?"":tl.call(f,g)}function kl(f){var g=f==null?0:f.length;return g?f[g-1]:i}function zd(f,g,I){var z=f==null?0:f.length;if(!z)return-1;var G=z;return I!==i&&(G=Si(I),G=G<0?Rn(z+G,0):Yr(G,z-1)),g===g?Al(f,g,G):ic(f,Xs,G,!0)}function ag(f,g){return f&&f.length?hd(f,Si(g)):i}var X_=Hi(Ph);function Ph(f,g){return f&&f.length&&g&&g.length?Vm(f,g):f}function Ep(f,g,I){return f&&f.length&&g&&g.length?Vm(f,g,Zn(I,2)):f}function lr(f,g,I){return f&&f.length&&g&&g.length?Vm(f,g,i,I):f}var K_=Nu(function(f,g){var I=f==null?0:f.length,z=Le(f,g);return Rv(f,Vr(g,function(G){return Os(G,I)?+G:G}).sort(yd)),z});function sg(f,g){var I=[];if(!(f&&f.length))return I;var z=-1,G=[],st=f.length;for(g=Zn(g,3);++z<st;){var Mt=f[z];g(Mt,z,f)&&(I.push(Mt),G.push(z))}return Rv(f,G),I}function Yc(f){return f==null?f:Pu.call(f)}function Q_(f,g,I){var z=f==null?0:f.length;return z?(I&&typeof I!="number"&&Qa(f,g,I)?(g=0,I=z):(g=g==null?0:Si(g),I=I===i?z:Si(I)),Pl(f,g,I)):[]}function $_(f,g){return pd(f,g)}function J_(f,g,I){return jm(f,g,Zn(I,2))}function t1(f,g){var I=f==null?0:f.length;if(I){var z=pd(f,g);if(z<I&&ur(f[z],g))return z}return-1}function e1(f,g){return pd(f,g,!0)}function n1(f,g,I){return jm(f,g,Zn(I,2),!0)}function i1(f,g){var I=f==null?0:f.length;if(I){var z=pd(f,g,!0)-1;if(ur(f[z],g))return z}return-1}function hy(f){return f&&f.length?Ov(f):[]}function fy(f,g){return f&&f.length?Ov(f,Zn(g,2)):[]}function py(f){var g=f==null?0:f.length;return g?Pl(f,1,g):[]}function dy(f,g,I){return f&&f.length?(g=I||g===i?1:Si(g),Pl(f,0,g<0?0:g)):[]}function Od(f,g,I){var z=f==null?0:f.length;return z?(g=I||g===i?1:Si(g),g=z-g,Pl(f,g<0?0:g,z)):[]}function Lh(f,g){return f&&f.length?Ah(f,Zn(g,3),!1,!0):[]}function lg(f,g){return f&&f.length?Ah(f,Zn(g,3)):[]}var Mf=Hi(function(f){return rl(dn(f,1,Er,!0))}),my=Hi(function(f){var g=kl(f);return Er(g)&&(g=i),rl(dn(f,1,Er,!0),Zn(g,2))}),Ao=Hi(function(f){var g=kl(f);return g=typeof g=="function"?g:i,rl(dn(f,1,Er,!0),i,g)});function Dr(f){return f&&f.length?rl(f):[]}function gy(f,g){return f&&f.length?rl(f,Zn(g,2)):[]}function vy(f,g){return g=typeof g=="function"?g:i,f&&f.length?rl(f,i,g):[]}function Bd(f){if(!(f&&f.length))return[];var g=0;return f=$o(f,function(I){if(Er(I))return g=Rn(I.length,g),!0}),Au(g,function(I){return Vr(f,Jo(I))})}function ug(f,g){if(!(f&&f.length))return[];var I=Bd(f);return g==null?I:Vr(I,function(z){return co(g,i,z)})}var yy=Hi(function(f,g){return Er(f)?Je(f,g):[]}),cg=Hi(function(f){return yf($o(f,Er))}),kh=Hi(function(f){var g=kl(f);return Er(g)&&(g=i),yf($o(f,Er),Zn(g,2))}),Dh=Hi(function(f){var g=kl(f);return g=typeof g=="function"?g:i,yf($o(f,Er),i,g)}),_y=Hi(Bd);function wo(f,g){return xp(f||[],g||[],qt)}function Sp(f,g){return xp(f||[],g||[],Tl)}var gc=Hi(function(f){var g=f.length,I=g>1?f[g-1]:i;return I=typeof I=="function"?(f.pop(),I):i,ug(f,I)});function Tp(f){var g=rt(f);return g.__chain__=!0,g}function Fd(f,g){return g(f),f}function Ef(f,g){return g(f)}var Sf=Nu(function(f){var g=f.length,I=g?f[0]:0,z=this.__wrapped__,G=function(st){return Le(st,f)};return g>1||this.__actions__.length||!(z instanceof di)||!Os(I)?this.thru(G):(z=z.slice(I,+I+(g?1:0)),z.__actions__.push({func:Ef,args:[G],thisArg:i}),new na(z,this.__chain__).thru(function(st){return g&&!st.length&&st.push(i),st}))});function vc(){return Tp(this)}function xy(){return new na(this.value(),this.__chain__)}function by(){this.__values__===i&&(this.__values__=Gd(this.value()));var f=this.__index__>=this.__values__.length,g=f?i:this.__values__[this.__index__++];return{done:f,value:g}}function r1(){return this}function Fo(f){for(var g,I=this;I instanceof ea;){var z=rg(I);z.__index__=0,z.__values__=i,g?G.__wrapped__=z:g=z;var G=z;I=I.__wrapped__}return G.__wrapped__=f,g}function Xc(){var f=this.__wrapped__;if(f instanceof di){var g=f;return this.__actions__.length&&(g=new di(this)),g=g.reverse(),g.__actions__.push({func:Ef,args:[Yc],thisArg:i}),new na(g,this.__chain__)}return this.thru(Yc)}function Ay(){return Gm(this.__wrapped__,this.__actions__)}var e=_d(function(f,g,I){Ln.call(f,I)?++f[I]:Ce(f,I,1)});function r(f,g,I){var z=Gn(f)?Ys:Un;return I&&Qa(f,g,I)&&(g=i),z(f,Zn(g,3))}function s(f,g){var I=Gn(f)?$o:Bn;return I(f,Zn(g,3))}var p=bf(Mp),v=bf(Th);function _(f,g){return dn(ct(f,g),1)}function A(f,g){return dn(ct(f,g),He)}function S(f,g,I){return I=I===i?1:Si(I),dn(ct(f,g),I)}function D(f,g){var I=Gn(f)?xo:kn;return I(f,Zn(g,3))}function B(f,g){var I=Gn(f)?gl:Jn;return I(f,Zn(g,3))}var N=_d(function(f,g,I){Ln.call(f,I)?f[I].push(g):Ce(f,I,[g])});function V(f,g,I,z){f=Xi(f)?f:Vh(f),I=I&&!z?Si(I):0;var G=f.length;return I<0&&(I=Rn(G+I,0)),Bh(f)?I<=G&&f.indexOf(g,I)>-1:!!G&&Yl(f,g,I)>-1}var Z=Hi(function(f,g,I){var z=-1,G=typeof g=="function",st=Xi(f)?Kt(f.length):[];return kn(f,function(Mt){st[++z]=G?co(g,Mt,I):Rs(Mt,g,I)}),st}),J=_d(function(f,g,I){Ce(f,I,g)});function ct(f,g){var I=Gn(f)?Vr:cd;return I(f,Zn(g,3))}function pt(f,g,I,z){return f==null?[]:(Gn(g)||(g=g==null?[]:[g]),I=z?i:I,Gn(I)||(I=I==null?[]:[I]),Wc(f,g,I))}var It=_d(function(f,g,I){f[I?0:1].push(g)},function(){return[[],[]]});function _t(f,g,I){var z=Gn(f)?vl:Ks,G=arguments.length<3;return z(f,Zn(g,4),I,G,kn)}function Vt(f,g,I){var z=Gn(f)?Dc:Ks,G=arguments.length<3;return z(f,Zn(g,4),I,G,Jn)}function Yt(f,g){var I=Gn(f)?$o:Bn;return I(f,Ir(Zn(g,3)))}function Jt(f){var g=Gn(f)?bt:fd;return g(f)}function ee(f,g,I){(I?Qa(f,g,I):g===i)?g=1:g=Si(g);var z=Gn(f)?ht:zv;return z(f,g)}function fe(f){var g=Gn(f)?At:S_;return g(f)}function Me(f){if(f==null)return 0;if(Xi(f))return Bh(f)?Kl(f):f.length;var g=Ka(f);return g==xt||g==De?f.size:eu(f).length}function Be(f,g,I){var z=Gn(f)?bu:T_;return I&&Qa(f,g,I)&&(g=i),z(f,Zn(g,3))}var yn=Hi(function(f,g){if(f==null)return[];var I=g.length;return I>1&&Qa(f,g[0],g[1])?g=[]:I>2&&Qa(g[0],g[1],g[2])&&(g=[g[0]]),Wc(f,dn(g,1),[])}),We=ff||function(){return lo.Date.now()};function In(f,g){if(typeof g!="function")throw new no(o);return f=Si(f),function(){if(--f<1)return g.apply(this,arguments)}}function Qe(f,g,I){return g=I?i:g,g=f&&g==null?f.length:g,Fu(f,Et,i,i,i,i,g)}function ni(f,g){var I;if(typeof g!="function")throw new no(o);return f=Si(f),function(){return--f>0&&(I=g.apply(this,arguments)),f<=1&&(g=i),I}}var zn=Hi(function(f,g,I){var z=nt;if(I.length){var G=Wo(I,Eh(zn));z|=Rt}return Fu(f,z,g,I,G)}),hn=Hi(function(f,g,I){var z=nt|lt;if(I.length){var G=Wo(I,Eh(hn));z|=Rt}return Fu(g,z,f,I,G)});function hi(f,g,I){g=I?i:g;var z=Fu(f,$,i,i,i,i,i,g);return z.placeholder=hi.placeholder,z}function Yn(f,g,I){g=I?i:g;var z=Fu(f,yt,i,i,i,i,i,g);return z.placeholder=Yn.placeholder,z}function Ei(f,g,I){var z,G,st,Mt,Ft,Xt,Ie=0,Ee=!1,ze=!1,_n=!0;if(typeof f!="function")throw new no(o);g=ts(g)||0,Kr(I)&&(Ee=!!I.leading,ze="maxWait"in I,st=ze?Rn(ts(I.maxWait)||0,g):st,_n="trailing"in I?!!I.trailing:_n);function jn(aa){var Ac=z,Uh=G;return z=G=i,Ie=aa,Mt=f.apply(Uh,Ac),Mt}function fi(aa){return Ie=aa,Ft=Sh(ir,g),Ee?jn(aa):Mt}function Ki(aa){var Ac=aa-Xt,Uh=aa-Ie,cA=g-Ac;return ze?Yr(cA,st-Uh):cA}function pi(aa){var Ac=aa-Xt,Uh=aa-Ie;return Xt===i||Ac>=g||Ac<0||ze&&Uh>=st}function ir(){var aa=We();if(pi(aa))return pr(aa);Ft=Sh(ir,Ki(aa))}function pr(aa){return Ft=i,_n&&z?jn(aa):(z=G=i,Mt)}function su(){Ft!==i&&gd(Ft),Ie=0,z=Xt=G=Ft=i}function al(){return Ft===i?Mt:pr(We())}function lu(){var aa=We(),Ac=pi(aa);if(z=arguments,G=this,Xt=aa,Ac){if(Ft===i)return fi(Xt);if(ze)return gd(Ft),Ft=Sh(ir,g),jn(Xt)}return Ft===i&&(Ft=Sh(ir,g)),Mt}return lu.cancel=su,lu.flush=al,lu}var En=Hi(function(f,g){return Oi(f,1,g)}),Gi=Hi(function(f,g,I){return Oi(f,ts(g)||0,I)});function Rr(f){return Fu(f,kt)}function zr(f,g){if(typeof f!="function"||g!=null&&typeof g!="function")throw new no(o);var I=function(){var z=arguments,G=g?g.apply(this,z):z[0],st=I.cache;if(st.has(G))return st.get(G);var Mt=f.apply(this,z);return I.cache=st.set(G,Mt)||st,Mt};return I.cache=new(zr.Cache||ks),I}zr.Cache=ks;function Ir(f){if(typeof f!="function")throw new no(o);return function(){var g=arguments;switch(g.length){case 0:return!f.call(this);case 1:return!f.call(this,g[0]);case 2:return!f.call(this,g[0],g[1]);case 3:return!f.call(this,g[0],g[1],g[2])}return!f.apply(this,g)}}function Or(f){return ni(2,f)}var Jr=bp(function(f,g){g=g.length==1&&Gn(g[0])?Vr(g[0],ta(Zn())):Vr(dn(g,1),ta(Zn()));var I=g.length;return Hi(function(z){for(var G=-1,st=Yr(z.length,I);++G<st;)z[G]=g[G].call(this,z[G]);return co(f,this,z)})}),go=Hi(function(f,g){var I=Wo(g,Eh(go));return Fu(f,Rt,i,g,I)}),Co=Hi(function(f,g){var I=Wo(g,Eh(Co));return Fu(f,Ct,i,g,I)}),Aa=Nu(function(f,g){return Fu(f,Gt,i,i,i,g)});function No(f,g){if(typeof f!="function")throw new no(o);return g=g===i?g:Si(g),Hi(f,g)}function wa(f,g){if(typeof f!="function")throw new no(o);return g=g==null?0:Rn(Si(g),0),Hi(function(I){var z=I[g],G=Ou(I,0,g);return z&&Da(G,z),co(f,this,G)})}function oo(f,g,I){var z=!0,G=!0;if(typeof f!="function")throw new no(o);return Kr(I)&&(z="leading"in I?!!I.leading:z,G="trailing"in I?!!I.trailing:G),Ei(f,g,{leading:z,maxWait:g,trailing:G})}function Vo(f){return Qe(f,1)}function xi(f,g){return go(md(g),f)}function fr(){if(!arguments.length)return[];var f=arguments[0];return Gn(f)?f:[f]}function nr(f){return cn(f,O)}function Fi(f,g){return g=typeof g=="function"?g:i,cn(f,O,g)}function Na(f){return cn(f,P|O)}function ia(f,g){return g=typeof g=="function"?g:i,cn(f,P|O,g)}function Mr(f,g){return g==null||Mn(f,g,oa(g))}function ur(f,g){return f===g||f!==f&&g!==g}var ra=Ad(Ml),qi=Ad(function(f,g){return f>=g}),Ja=hc(function(){return arguments}())?hc:function(f){return Qr(f)&&Ln.call(f,"callee")&&!Re.call(f,"callee")},Gn=Kt.isArray,Vu=nc?ta(nc):bh;function Xi(f){return f!=null&&zl(f.length)&&!Rl(f)}function Er(f){return Qr(f)&&Xi(f)}function Dl(f){return f===!0||f===!1||Qr(f)&&dr(f)==Ke}var ol=pp||x1,Rh=uo?ta(uo):El;function Tf(f){return Qr(f)&&f.nodeType===1&&!xc(f)}function yc(f){if(f==null)return!0;if(Xi(f)&&(Gn(f)||typeof f=="string"||typeof f.splice=="function"||ol(f)||Uu(f)||Ja(f)))return!f.length;var g=Ka(f);if(g==xt||g==De)return!f.size;if(dc(f))return!eu(f).length;for(var I in f)if(Ln.call(f,I))return!1;return!0}function Pf(f,g){return Jl(f,g)}function Nd(f,g,I){I=typeof I=="function"?I:i;var z=I?I(f,g):i;return z===i?Jl(f,g,i,I):!!z}function Kc(f){if(!Qr(f))return!1;var g=dr(f);return g==Ai||g==Te||typeof f.message=="string"&&typeof f.name=="string"&&!xc(f)}function Pp(f){return typeof f=="number"&&pf(f)}function Rl(f){if(!Kr(f))return!1;var g=dr(f);return g==ki||g==ut||g==le||g==ln}function Lp(f){return typeof f=="number"&&f==Si(f)}function zl(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Ue}function Kr(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}function Qr(f){return f!=null&&typeof f=="object"}var _c=ka?ta(ka):ko;function Lf(f,g){return f===g||nl(f,g,Cd(g))}function Vd(f,g,I){return I=typeof I=="function"?I:i,nl(f,g,Cd(g),I)}function Ud(f){return kf(f)&&f!=+f}function kp(f){if(Ed(f))throw new Vn(m);return tu(f)}function Dp(f){return f===null}function jd(f){return f==null}function kf(f){return typeof f=="number"||Qr(f)&&dr(f)==$t}function xc(f){if(!Qr(f)||dr(f)!=pe)return!1;var g=Po(f);if(g===null)return!0;var I=Ln.call(g,"constructor")&&g.constructor;return typeof I=="function"&&I instanceof I&&Zi.call(I)==za}var zh=Cs?ta(Cs):fc;function Hd(f){return Lp(f)&&f>=-Ue&&f<=Ue}var Oh=Is?ta(Is):Yi;function Bh(f){return typeof f=="string"||!Gn(f)&&Qr(f)&&dr(f)==Se}function Ca(f){return typeof f=="symbol"||Qr(f)&&dr(f)==tn}var Uu=ml?ta(ml):fs;function Fh(f){return f===i}function Rp(f){return Qr(f)&&Ka(f)==Cn}function Df(f){return Qr(f)&&dr(f)==Pn}var hg=Ad(Gc),wy=Ad(function(f,g){return f<=g});function Gd(f){if(!f)return[];if(Xi(f))return Bh(f)?ga(f):zs(f);if(Cl&&f[Cl])return vh(f[Cl]());var g=Ka(f),I=g==xt?Bc:g==De?$s:Vh;return I(f)}function ju(f){if(!f)return f===0?f:0;if(f=ts(f),f===He||f===-He){var g=f<0?-1:1;return g*Pi}return f===f?f:0}function Si(f){var g=ju(f),I=g%1;return g===g?I?g-I:g:0}function Cy(f){return f?qe(Si(f),0,Fn):0}function ts(f){if(typeof f=="number")return f;if(Ca(f))return ri;if(Kr(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=Kr(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=ls(f);var I=Ne.test(f);return I||ei.test(f)?dh(f.slice(2),I?2:8):ke.test(f)?ri:+f}function to(f){return Bu(f,Ko(f))}function au(f){return f?qe(Si(f),-Ue,Ue):f===0?f:0}function Sr(f){return f==null?"":il(f)}var Qc=xf(function(f,g){if(dc(g)||Xi(g)){Bu(g,oa(g),f);return}for(var I in g)Ln.call(g,I)&&qt(f,I,g[I])}),qd=xf(function(f,g){Bu(g,Ko(g),f)}),zp=xf(function(f,g,I,z){Bu(g,Ko(g),f,z)}),Wd=xf(function(f,g,I,z){Bu(g,oa(g),f,z)}),Hu=Nu(Le);function Zd(f,g){var I=Ya(f);return g==null?I:re(I,g)}var Op=Hi(function(f,g){f=pn(f);var I=-1,z=g.length,G=z>2?g[2]:i;for(G&&Qa(g[0],g[1],G)&&(z=1);++I<z;)for(var st=g[I],Mt=Ko(st),Ft=-1,Xt=Mt.length;++Ft<Xt;){var Ie=Mt[Ft],Ee=f[Ie];(Ee===i||ur(Ee,Su[Ie])&&!Ln.call(f,Ie))&&(f[Ie]=st[Ie])}return f}),Yd=Hi(function(f){return f.push(i,Wv),co(Nh,i,f)});function Xd(f,g){return _l(f,Zn(g,3),Ur)}function fg(f,g){return _l(f,Zn(g,3),bo)}function Iy(f,g){return f==null?f:po(f,Zn(g,3),Ko)}function Bp(f,g){return f==null?f:Xr(f,Zn(g,3),Ko)}function My(f,g){return f&&Ur(f,Zn(g,3))}function Ey(f,g){return f&&bo(f,Zn(g,3))}function Sy(f){return f==null?[]:Cr(f,oa(f))}function Ty(f){return f==null?[]:Cr(f,Ko(f))}function Kd(f,g,I){var z=f==null?i:yr(f,g);return z===i?I:z}function Bs(f,g){return f!=null&&Kv(f,g,Ba)}function Rf(f,g){return f!=null&&Kv(f,g,el)}var Py=jv(function(f,g,I){g!=null&&typeof g.toString!="function"&&(g=Es.call(g)),f[g]=I},m1(Ol)),Gu=jv(function(f,g,I){g!=null&&typeof g.toString!="function"&&(g=Es.call(g)),Ln.call(f,g)?f[g].push(I):f[g]=[I]},Zn),o1=Hi(Rs);function oa(f){return Xi(f)?ft(f):eu(f)}function Ko(f){return Xi(f)?ft(f,!0):Nm(f)}function zf(f,g){var I={};return g=Zn(g,3),Ur(f,function(z,G,st){Ce(I,g(z,G,st),z)}),I}function Of(f,g){var I={};return g=Zn(g,3),Ur(f,function(z,G,st){Ce(I,G,g(z,G,st))}),I}var Bf=xf(function(f,g,I){nu(f,g,I)}),Nh=xf(function(f,g,I,z){nu(f,g,I,z)}),Ly=Nu(function(f,g){var I={};if(f==null)return I;var z=!1;g=Vr(g,function(st){return st=pc(st,f),z||(z=st.length>1),st}),Bu(f,Qm(f),I),z&&(I=cn(I,P|L|O,Zv));for(var G=g.length;G--;)Hm(I,g[G]);return I});function ky(f,g){return pg(f,Ir(Zn(g)))}var Dy=Nu(function(f,g){return f==null?{}:Xa(f,g)});function pg(f,g){if(f==null)return{};var I=Vr(Qm(f),function(z){return[z]});return g=Zn(g),kv(f,I,function(z,G){return g(z,G[0])})}function dg(f,g,I){g=pc(g,f);var z=-1,G=g.length;for(G||(G=1,f=i);++z<G;){var st=f==null?i:f[ou(g[z])];st===i&&(z=G,st=I),f=Rl(st)?st.call(f):st}return f}function mg(f,g,I){return f==null?f:Tl(f,g,I)}function bc(f,g,I,z){return z=typeof z=="function"?z:i,f==null?f:Tl(f,g,I,z)}var gg=qv(oa),Qd=qv(Ko);function vg(f,g,I){var z=Gn(f),G=z||ol(f)||Uu(f);if(g=Zn(g,4),I==null){var st=f&&f.constructor;G?I=z?new st:[]:Kr(f)?I=Rl(st)?Ya(Po(f)):{}:I={}}return(G?xo:Ur)(f,function(Mt,Ft,Xt){return g(I,Mt,Ft,Xt)}),I}function Ry(f,g){return f==null?!0:Hm(f,g)}function yg(f,g,I){return f==null?f:mo(f,g,md(I))}function zy(f,g,I,z){return z=typeof z=="function"?z:i,f==null?f:mo(f,g,md(I),z)}function Vh(f){return f==null?[]:Oc(f,oa(f))}function _g(f){return f==null?[]:Oc(f,Ko(f))}function Oy(f,g,I){return I===i&&(I=g,g=i),I!==i&&(I=ts(I),I=I===I?I:0),g!==i&&(g=ts(g),g=g===g?g:0),qe(ts(f),g,I)}function Fp(f,g,I){return g=ju(g),I===i?(I=g,g=0):I=ju(I),f=ts(f),Ds(f,g,I)}function By(f,g,I){if(I&&typeof I!="boolean"&&Qa(f,g,I)&&(g=I=i),I===i&&(typeof g=="boolean"?(I=g,g=i):typeof f=="boolean"&&(I=f,f=i)),f===i&&g===i?(f=0,g=1):(f=ju(f),g===i?(g=f,f=0):g=ju(g)),f>g){var z=f;f=g,g=z}if(I||f%1||g%1){var G=Tu();return Yr(f+G*(g-f+uf("1e-"+((G+"").length-1))),g)}return Um(f,g)}var $d=ru(function(f,g,I){return g=g.toLowerCase(),f+(I?Fy(g):g)});function Fy(f){return d1(Sr(f).toLowerCase())}function xg(f){return f=Sr(f),f&&f.replace(_i,Xl).replace(eo,"")}function a1(f,g,I){f=Sr(f),g=il(g);var z=f.length;I=I===i?z:qe(Si(I),0,z);var G=I;return I-=g.length,I>=0&&f.slice(I,G)==g}function s1(f){return f=Sr(f),f&&vu.test(f)?f.replace(so,Ms):f}function l1(f){return f=Sr(f),f&&Dt.test(f)?f.replace(St,"\\$&"):f}var u1=ru(function(f,g,I){return f+(I?"-":"")+g.toLowerCase()}),c1=ru(function(f,g,I){return f+(I?" ":"")+g.toLowerCase()}),h1=Uv("toLowerCase");function f1(f,g,I){f=Sr(f),g=Si(g);var z=g?Kl(f):0;if(!g||z>=g)return f;var G=(g-z)/2;return wp(yh(G),I)+f+wp(Ss(G),I)}function p1(f,g,I){f=Sr(f),g=Si(g);var z=g?Kl(f):0;return g&&z<g?f+wp(g-z,I):f}function qu(f,g,I){f=Sr(f),g=Si(g);var z=g?Kl(f):0;return g&&z<g?wp(g-z,I)+f:f}function Jd(f,g,I){return I||g==null?g=0:g&&(g=+g),Yo(Sr(f).replace(tt,""),g||0)}function Ny(f,g,I){return(I?Qa(f,g,I):g===i)?g=1:g=Si(g),_p(Sr(f),g)}function Np(){var f=arguments,g=Sr(f[0]);return f.length<3?g:g.replace(f[1],f[2])}var Vy=ru(function(f,g,I){return f+(I?"_":"")+g.toLowerCase()});function zM(f,g,I){return I&&typeof I!="number"&&Qa(f,g,I)&&(g=I=i),I=I===i?Fn:I>>>0,I?(f=Sr(f),f&&(typeof g=="string"||g!=null&&!zh(g))&&(g=il(g),!g&&us(f))?Ou(ga(f),0,I):f.split(g,I)):[]}var OM=ru(function(f,g,I){return f+(I?" ":"")+d1(g)});function BM(f,g,I){return f=Sr(f),I=I==null?0:qe(Si(I),0,f.length),g=il(g),f.slice(I,I+g.length)==g}function FM(f,g,I){var z=rt.templateSettings;I&&Qa(f,g,I)&&(g=i),f=Sr(f),g=zp({},g,z,Xm);var G=zp({},g.imports,z.imports,Xm),st=oa(G),Mt=Oc(G,st),Ft,Xt,Ie=0,Ee=g.interpolate||Vi,ze="__p += '",_n=ji((g.escape||Vi).source+"|"+Ee.source+"|"+(Ee===q?on:Vi).source+"|"+(g.evaluate||Vi).source+"|$","g"),jn="//# sourceURL="+(Ln.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dl+"]")+`
`;f.replace(_n,function(pi,ir,pr,su,al,lu){return pr||(pr=su),ze+=f.slice(Ie,lu).replace(ci,Iu),ir&&(Ft=!0,ze+=`' +
__e(`+ir+`) +
'`),al&&(Xt=!0,ze+=`';
`+al+`;
__p += '`),pr&&(ze+=`' +
((__t = (`+pr+`)) == null ? '' : __t) +
'`),Ie=lu+pi.length,pi}),ze+=`';
`;var fi=Ln.call(g,"variable")&&g.variable;if(!fi)ze=`with (obj) {
`+ze+`
}
`;else if(ye.test(fi))throw new Vn(y);ze=(Xt?ze.replace(Hs,""):ze).replace(Gs,"$1").replace(fl,"$1;"),ze="function("+(fi||"obj")+`) {
`+(fi?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ft?", __e = _.escape":"")+(Xt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ze+`return __p
}`;var Ki=lA(function(){return li(st,jn+"return "+ze).apply(i,Mt)});if(Ki.source=ze,Kc(Ki))throw Ki;return Ki}function NM(f){return Sr(f).toLowerCase()}function VM(f){return Sr(f).toUpperCase()}function UM(f,g,I){if(f=Sr(f),f&&(I||g===i))return ls(f);if(!f||!(g=il(g)))return f;var z=ga(f),G=ga(g),st=oc(z,G),Mt=bl(z,G)+1;return Ou(z,st,Mt).join("")}function jM(f,g,I){if(f=Sr(f),f&&(I||g===i))return f.slice(0,Wt(f)+1);if(!f||!(g=il(g)))return f;var z=ga(f),G=bl(z,ga(g))+1;return Ou(z,0,G).join("")}function HM(f,g,I){if(f=Sr(f),f&&(I||g===i))return f.replace(tt,"");if(!f||!(g=il(g)))return f;var z=ga(f),G=oc(z,ga(g));return Ou(z,G).join("")}function GM(f,g){var I=Qt,z=Ut;if(Kr(g)){var G="separator"in g?g.separator:G;I="length"in g?Si(g.length):I,z="omission"in g?il(g.omission):z}f=Sr(f);var st=f.length;if(us(f)){var Mt=ga(f);st=Mt.length}if(I>=st)return f;var Ft=I-Kl(z);if(Ft<1)return z;var Xt=Mt?Ou(Mt,0,Ft).join(""):f.slice(0,Ft);if(G===i)return Xt+z;if(Mt&&(Ft+=Xt.length-Ft),zh(G)){if(f.slice(Ft).search(G)){var Ie,Ee=Xt;for(G.global||(G=ji(G.source,Sr(oe.exec(G))+"g")),G.lastIndex=0;Ie=G.exec(Ee);)var ze=Ie.index;Xt=Xt.slice(0,ze===i?Ft:ze)}}else if(f.indexOf(il(G),Ft)!=Ft){var _n=Xt.lastIndexOf(G);_n>-1&&(Xt=Xt.slice(0,_n))}return Xt+z}function qM(f){return f=Sr(f),f&&qs.test(f)?f.replace(La,ue):f}var WM=ru(function(f,g,I){return f+(I?" ":"")+g.toUpperCase()}),d1=Uv("toUpperCase");function sA(f,g,I){return f=Sr(f),g=I?i:g,g===i?Oo(f)?vr(f):yl(f):f.match(g)||[]}var lA=Hi(function(f,g){try{return co(f,i,g)}catch(I){return Kc(I)?I:new Vn(I)}}),ZM=Nu(function(f,g){return xo(g,function(I){I=ou(I),Ce(f,I,zn(f[I],f))}),f});function YM(f){var g=f==null?0:f.length,I=Zn();return f=g?Vr(f,function(z){if(typeof z[1]!="function")throw new no(o);return[I(z[0]),z[1]]}):[],Hi(function(z){for(var G=-1;++G<g;){var st=f[G];if(co(st[0],this,z))return co(st[1],this,z)}})}function XM(f){return Sn(cn(f,P))}function m1(f){return function(){return f}}function KM(f,g){return f==null||f!==f?g:f}var QM=Ll(),$M=Ll(!0);function Ol(f){return f}function g1(f){return xa(typeof f=="function"?f:cn(f,P))}function JM(f){return qc(cn(f,P))}function tE(f,g){return yp(f,cn(g,P))}var eE=Hi(function(f,g){return function(I){return Rs(I,f,g)}}),nE=Hi(function(f,g){return function(I){return Rs(f,I,g)}});function v1(f,g,I){var z=oa(g),G=Cr(g,z);I==null&&!(Kr(g)&&(G.length||!z.length))&&(I=g,g=f,f=this,G=Cr(g,oa(g)));var st=!(Kr(I)&&"chain"in I)||!!I.chain,Mt=Rl(f);return xo(G,function(Ft){var Xt=g[Ft];f[Ft]=Xt,Mt&&(f.prototype[Ft]=function(){var Ie=this.__chain__;if(st||Ie){var Ee=f(this.__wrapped__),ze=Ee.__actions__=zs(this.__actions__);return ze.push({func:Xt,args:arguments,thisArg:f}),Ee.__chain__=Ie,Ee}return Xt.apply(f,Da([this.value()],arguments))})}),f}function iE(){return lo._===this&&(lo._=ar),this}function y1(){}function rE(f){return f=Si(f),Hi(function(g){return hd(g,f)})}var oE=Ih(Vr),aE=Ih(Ys),sE=Ih(bu);function uA(f){return $m(f)?Jo(ou(f)):Dv(f)}function lE(f){return function(g){return f==null?i:yr(f,g)}}var uE=Hv(),cE=Hv(!0);function _1(){return[]}function x1(){return!1}function hE(){return{}}function fE(){return""}function pE(){return!0}function dE(f,g){if(f=Si(f),f<1||f>Ue)return[];var I=Fn,z=Yr(f,Fn);g=Zn(g),f-=Fn;for(var G=Au(z,g);++I<f;)g(I);return G}function mE(f){return Gn(f)?Vr(f,ou):Ca(f)?[f]:zs(Pd(Sr(f)))}function gE(f){var g=++Wa;return Sr(f)+g}var vE=bd(function(f,g){return f+g},0),yE=wd("ceil"),_E=bd(function(f,g){return f/g},1),xE=wd("floor");function bE(f){return f&&f.length?On(f,Ol,Ml):i}function AE(f,g){return f&&f.length?On(f,Zn(g,2),Ml):i}function wE(f){return rc(f,Ol)}function CE(f,g){return rc(f,Zn(g,2))}function IE(f){return f&&f.length?On(f,Ol,Gc):i}function ME(f,g){return f&&f.length?On(f,Zn(g,2),Gc):i}var EE=bd(function(f,g){return f*g},1),SE=wd("round"),TE=bd(function(f,g){return f-g},0);function PE(f){return f&&f.length?Ri(f,Ol):0}function LE(f,g){return f&&f.length?Ri(f,Zn(g,2)):0}return rt.after=In,rt.ary=Qe,rt.assign=Qc,rt.assignIn=qd,rt.assignInWith=zp,rt.assignWith=Wd,rt.at=Hu,rt.before=ni,rt.bind=zn,rt.bindAll=ZM,rt.bindKey=hn,rt.castArray=fr,rt.chain=Tp,rt.chunk=ey,rt.compact=ny,rt.concat=iy,rt.cond=YM,rt.conforms=XM,rt.constant=m1,rt.countBy=e,rt.create=Zd,rt.curry=hi,rt.curryRight=Yn,rt.debounce=Ei,rt.defaults=Op,rt.defaultsDeep=Yd,rt.defer=En,rt.delay=Gi,rt.difference=H_,rt.differenceBy=G_,rt.differenceWith=ry,rt.drop=oy,rt.dropRight=Ld,rt.dropRightWhile=ay,rt.dropWhile=kd,rt.fill=Dd,rt.filter=s,rt.flatMap=_,rt.flatMapDeep=A,rt.flatMapDepth=S,rt.flatten=sy,rt.flattenDeep=q_,rt.flattenDepth=W_,rt.flip=Rr,rt.flow=QM,rt.flowRight=$M,rt.fromPairs=If,rt.functions=Sy,rt.functionsIn=Ty,rt.groupBy=N,rt.initial=og,rt.intersection=uy,rt.intersectionBy=cy,rt.intersectionWith=Z_,rt.invert=Py,rt.invertBy=Gu,rt.invokeMap=Z,rt.iteratee=g1,rt.keyBy=J,rt.keys=oa,rt.keysIn=Ko,rt.map=ct,rt.mapKeys=zf,rt.mapValues=Of,rt.matches=JM,rt.matchesProperty=tE,rt.memoize=zr,rt.merge=Bf,rt.mergeWith=Nh,rt.method=eE,rt.methodOf=nE,rt.mixin=v1,rt.negate=Ir,rt.nthArg=rE,rt.omit=Ly,rt.omitBy=ky,rt.once=Or,rt.orderBy=pt,rt.over=oE,rt.overArgs=Jr,rt.overEvery=aE,rt.overSome=sE,rt.partial=go,rt.partialRight=Co,rt.partition=It,rt.pick=Dy,rt.pickBy=pg,rt.property=uA,rt.propertyOf=lE,rt.pull=X_,rt.pullAll=Ph,rt.pullAllBy=Ep,rt.pullAllWith=lr,rt.pullAt=K_,rt.range=uE,rt.rangeRight=cE,rt.rearg=Aa,rt.reject=Yt,rt.remove=sg,rt.rest=No,rt.reverse=Yc,rt.sampleSize=ee,rt.set=mg,rt.setWith=bc,rt.shuffle=fe,rt.slice=Q_,rt.sortBy=yn,rt.sortedUniq=hy,rt.sortedUniqBy=fy,rt.split=zM,rt.spread=wa,rt.tail=py,rt.take=dy,rt.takeRight=Od,rt.takeRightWhile=Lh,rt.takeWhile=lg,rt.tap=Fd,rt.throttle=oo,rt.thru=Ef,rt.toArray=Gd,rt.toPairs=gg,rt.toPairsIn=Qd,rt.toPath=mE,rt.toPlainObject=to,rt.transform=vg,rt.unary=Vo,rt.union=Mf,rt.unionBy=my,rt.unionWith=Ao,rt.uniq=Dr,rt.uniqBy=gy,rt.uniqWith=vy,rt.unset=Ry,rt.unzip=Bd,rt.unzipWith=ug,rt.update=yg,rt.updateWith=zy,rt.values=Vh,rt.valuesIn=_g,rt.without=yy,rt.words=sA,rt.wrap=xi,rt.xor=cg,rt.xorBy=kh,rt.xorWith=Dh,rt.zip=_y,rt.zipObject=wo,rt.zipObjectDeep=Sp,rt.zipWith=gc,rt.entries=gg,rt.entriesIn=Qd,rt.extend=qd,rt.extendWith=zp,v1(rt,rt),rt.add=vE,rt.attempt=lA,rt.camelCase=$d,rt.capitalize=Fy,rt.ceil=yE,rt.clamp=Oy,rt.clone=nr,rt.cloneDeep=Na,rt.cloneDeepWith=ia,rt.cloneWith=Fi,rt.conformsTo=Mr,rt.deburr=xg,rt.defaultTo=KM,rt.divide=_E,rt.endsWith=a1,rt.eq=ur,rt.escape=s1,rt.escapeRegExp=l1,rt.every=r,rt.find=p,rt.findIndex=Mp,rt.findKey=Xd,rt.findLast=v,rt.findLastIndex=Th,rt.findLastKey=fg,rt.floor=xE,rt.forEach=D,rt.forEachRight=B,rt.forIn=Iy,rt.forInRight=Bp,rt.forOwn=My,rt.forOwnRight=Ey,rt.get=Kd,rt.gt=ra,rt.gte=qi,rt.has=Bs,rt.hasIn=Rf,rt.head=Rd,rt.identity=Ol,rt.includes=V,rt.indexOf=ly,rt.inRange=Fp,rt.invoke=o1,rt.isArguments=Ja,rt.isArray=Gn,rt.isArrayBuffer=Vu,rt.isArrayLike=Xi,rt.isArrayLikeObject=Er,rt.isBoolean=Dl,rt.isBuffer=ol,rt.isDate=Rh,rt.isElement=Tf,rt.isEmpty=yc,rt.isEqual=Pf,rt.isEqualWith=Nd,rt.isError=Kc,rt.isFinite=Pp,rt.isFunction=Rl,rt.isInteger=Lp,rt.isLength=zl,rt.isMap=_c,rt.isMatch=Lf,rt.isMatchWith=Vd,rt.isNaN=Ud,rt.isNative=kp,rt.isNil=jd,rt.isNull=Dp,rt.isNumber=kf,rt.isObject=Kr,rt.isObjectLike=Qr,rt.isPlainObject=xc,rt.isRegExp=zh,rt.isSafeInteger=Hd,rt.isSet=Oh,rt.isString=Bh,rt.isSymbol=Ca,rt.isTypedArray=Uu,rt.isUndefined=Fh,rt.isWeakMap=Rp,rt.isWeakSet=Df,rt.join=Y_,rt.kebabCase=u1,rt.last=kl,rt.lastIndexOf=zd,rt.lowerCase=c1,rt.lowerFirst=h1,rt.lt=hg,rt.lte=wy,rt.max=bE,rt.maxBy=AE,rt.mean=wE,rt.meanBy=CE,rt.min=IE,rt.minBy=ME,rt.stubArray=_1,rt.stubFalse=x1,rt.stubObject=hE,rt.stubString=fE,rt.stubTrue=pE,rt.multiply=EE,rt.nth=ag,rt.noConflict=iE,rt.noop=y1,rt.now=We,rt.pad=f1,rt.padEnd=p1,rt.padStart=qu,rt.parseInt=Jd,rt.random=By,rt.reduce=_t,rt.reduceRight=Vt,rt.repeat=Ny,rt.replace=Np,rt.result=dg,rt.round=SE,rt.runInContext=Ot,rt.sample=Jt,rt.size=Me,rt.snakeCase=Vy,rt.some=Be,rt.sortedIndex=$_,rt.sortedIndexBy=J_,rt.sortedIndexOf=t1,rt.sortedLastIndex=e1,rt.sortedLastIndexBy=n1,rt.sortedLastIndexOf=i1,rt.startCase=OM,rt.startsWith=BM,rt.subtract=TE,rt.sum=PE,rt.sumBy=LE,rt.template=FM,rt.times=dE,rt.toFinite=ju,rt.toInteger=Si,rt.toLength=Cy,rt.toLower=NM,rt.toNumber=ts,rt.toSafeInteger=au,rt.toString=Sr,rt.toUpper=VM,rt.trim=UM,rt.trimEnd=jM,rt.trimStart=HM,rt.truncate=GM,rt.unescape=qM,rt.uniqueId=gE,rt.upperCase=WM,rt.upperFirst=d1,rt.each=D,rt.eachRight=B,rt.first=Rd,v1(rt,function(){var f={};return Ur(rt,function(g,I){Ln.call(rt.prototype,I)||(f[I]=g)}),f}(),{chain:!1}),rt.VERSION=a,xo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){rt[f].placeholder=rt}),xo(["drop","take"],function(f,g){di.prototype[f]=function(I){I=I===i?1:Rn(Si(I),0);var z=this.__filtered__&&!g?new di(this):this.clone();return z.__filtered__?z.__takeCount__=Yr(I,z.__takeCount__):z.__views__.push({size:Yr(I,Fn),type:f+(z.__dir__<0?"Right":"")}),z},di.prototype[f+"Right"]=function(I){return this.reverse()[f](I).reverse()}}),xo(["filter","map","takeWhile"],function(f,g){var I=g+1,z=I==de||I==_e;di.prototype[f]=function(G){var st=this.clone();return st.__iteratees__.push({iteratee:Zn(G,3),type:I}),st.__filtered__=st.__filtered__||z,st}}),xo(["head","last"],function(f,g){var I="take"+(g?"Right":"");di.prototype[f]=function(){return this[I](1).value()[0]}}),xo(["initial","tail"],function(f,g){var I="drop"+(g?"":"Right");di.prototype[f]=function(){return this.__filtered__?new di(this):this[I](1)}}),di.prototype.compact=function(){return this.filter(Ol)},di.prototype.find=function(f){return this.filter(f).head()},di.prototype.findLast=function(f){return this.reverse().find(f)},di.prototype.invokeMap=Hi(function(f,g){return typeof f=="function"?new di(this):this.map(function(I){return Rs(I,f,g)})}),di.prototype.reject=function(f){return this.filter(Ir(Zn(f)))},di.prototype.slice=function(f,g){f=Si(f);var I=this;return I.__filtered__&&(f>0||g<0)?new di(I):(f<0?I=I.takeRight(-f):f&&(I=I.drop(f)),g!==i&&(g=Si(g),I=g<0?I.dropRight(-g):I.take(g-f)),I)},di.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},di.prototype.toArray=function(){return this.take(Fn)},Ur(di.prototype,function(f,g){var I=/^(?:filter|find|map|reject)|While$/.test(g),z=/^(?:head|last)$/.test(g),G=rt[z?"take"+(g=="last"?"Right":""):g],st=z||/^find/.test(g);G&&(rt.prototype[g]=function(){var Mt=this.__wrapped__,Ft=z?[1]:arguments,Xt=Mt instanceof di,Ie=Ft[0],Ee=Xt||Gn(Mt),ze=function(ir){var pr=G.apply(rt,Da([ir],Ft));return z&&_n?pr[0]:pr};Ee&&I&&typeof Ie=="function"&&Ie.length!=1&&(Xt=Ee=!1);var _n=this.__chain__,jn=!!this.__actions__.length,fi=st&&!_n,Ki=Xt&&!jn;if(!st&&Ee){Mt=Ki?Mt:new di(this);var pi=f.apply(Mt,Ft);return pi.__actions__.push({func:Ef,args:[ze],thisArg:i}),new na(pi,_n)}return fi&&Ki?f.apply(this,Ft):(pi=this.thru(ze),fi?z?pi.value()[0]:pi.value():pi)})}),xo(["pop","push","shift","sort","splice","unshift"],function(f){var g=Ra[f],I=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",z=/^(?:pop|shift)$/.test(f);rt.prototype[f]=function(){var G=arguments;if(z&&!this.__chain__){var st=this.value();return g.apply(Gn(st)?st:[],G)}return this[I](function(Mt){return g.apply(Gn(Mt)?Mt:[],G)})}}),Ur(di.prototype,function(f,g){var I=rt[g];if(I){var z=I.name+"";Ln.call(_a,z)||(_a[z]=[]),_a[z].push({name:g,func:I})}}),_a[xd(i,lt).name]=[{name:"wrapper",func:i}],di.prototype.clone=mf,di.prototype.reverse=Uc,di.prototype.value=_h,rt.prototype.at=Sf,rt.prototype.chain=vc,rt.prototype.commit=xy,rt.prototype.next=by,rt.prototype.plant=Fo,rt.prototype.reverse=Xc,rt.prototype.toJSON=rt.prototype.valueOf=rt.prototype.value=Ay,rt.prototype.first=rt.prototype.head,Cl&&(rt.prototype[Cl]=r1),rt},cr=zi();Zs?((Zs.exports=cr)._=cr,ec._=cr):lo._=cr}).call(ys)})(D0,D0.exports);var Sb=D0.exports;const Tb="lang";function YR(t){rf(t,Tb,jl({locale:{}}))}function kI(t){return ua(t,Tb).locale}function XR(t,n){const i=kI(t);i&&(i.locale=Sb.merge(i.locale||{},n))}sd(Tb,YR);function fa(t){const n=rn(()=>kI(t));function i(m){var o;return DI((o=n.value)==null?void 0:o.locale,m,m)}const a=rn(()=>i);function h(m){XR(t,m)}return{trans:a,setLocale:h}}function DI(t,n,i){const a=Array.isArray(n)?n:n.split(".").filter(h=>h.length);return a.length<1?t===void 0?i:t:t==null?i:DI(t[a.shift()],a,i)}const KR={class:"form-group"},QR={key:0},$R={class:"input-container"},JR=["disabled"],tz=tr({__name:"input-text",props:$h({label:String,disabled:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const n=uh(t,"modelValue");return(i,a)=>(wt(),ce("div",KR,[t.label?(wt(),ce("label",QR,oi(t.label),1)):gn("v-if",!0),zt("div",$R,[np(zt("input",mr(i.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=h=>n.value=h),disabled:t.disabled}),null,16,JR),[[e3,n.value]])])]))}}),la=ii(tz,[["__scopeId","data-v-d6fc7962"]]),ez={class:"form-group"},nz={key:0},iz={class:"input-container"},rz={value:"",disabled:"",selected:"",hidden:""},oz=["value"],az=tr({__name:"input-select",props:$h({label:String,items:{type:Array,default:()=>[]},itemValue:{type:String,default:"value"},itemText:{type:String,default:"text"},returnObject:Boolean},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const n=uh(t,"modelValue"),i=t;function a(o){return typeof o=="string"||i.returnObject?o:o[i.itemValue]}function h(o){return typeof o=="string"?o:o[i.itemText]}function m(o){return typeof o=="string"?o:o[i.itemValue]}return(o,y)=>(wt(),ce("div",ez,[t.label?(wt(),ce("label",nz,oi(t.label),1)):gn("v-if",!0),zt("div",iz,[np(zt("select",mr(o.$attrs,{"onUpdate:modelValue":y[0]||(y[0]=x=>n.value=x),required:""}),[zt("option",rz,oi(o.$attrs.placeholder),1),(wt(!0),ce(Mi,null,ja(t.items,x=>(wt(),ce("option",{value:a(x),key:m(x)},oi(h(x)),9,oz))),128))],16),[[rb,n.value]])])]))}}),Tv=ii(az,[["__scopeId","data-v-8d582f56"]]),sz={__name:"base-button",props:{active:Boolean,disabled:Boolean},setup(t){const n=t;return(i,a)=>(wt(),ce("button",mr({class:"map-control__button clickable"},i.$attrs,{class:{"map-control__button-active":n.active,"map-control__button-disabled":n.disabled}}),[qn(i.$slots,"default",{},void 0,!0)],16))}},id=ii(sz,[["__scopeId","data-v-498b68f7"]]),lz=["aria-expanded"],uz={class:"collapse-header__title"},cz={class:"collapse-header__icon"},hz={key:0,class:"collapse-content"},fz={class:"collapse-content-box"},pz={name:"Collapse"},dz=Object.assign(pz,{props:{selected:{type:Boolean,default:!0}},emits:["update:selected","open","close"],setup(t,{emit:n}){const i=t,a=n,h=$e(i.selected),m=()=>{h.value=!h.value,a("update:selected",h.value),h.value?a("open"):a("close")},o={open:YC,close:z5};return(y,x)=>(wt(),ce("div",{class:bs(["collapse collapse-item",{"is-active":h.value}])},[zt("div",{class:"collapse-header touchable",role:"tab","aria-expanded":h.value?"true":"false",onClick:Ho(m,["prevent"])},[zt("div",uz,[qn(y.$slots,"header",{},void 0,!0)]),zt("div",cz,[h.value?(wt(),Ve(X(Nn),{key:0,size:"14",type:"mdi",path:o.close},null,8,["path"])):(wt(),Ve(X(Nn),{key:1,size:"14",type:"mdi",path:o.open},null,8,["path"]))])],8,lz),jt(ib,{name:"fade"},{default:se(()=>[h.value?(wt(),ce("div",hz,[zt("div",fz,[qn(y.$slots,"default",{},void 0,!0)])])):gn("v-if",!0)]),_:3})],2))}}),mz=ii(dz,[["__scopeId","data-v-73b8eee6"]]),gz={class:"form-group"},vz={key:0},yz={class:"input-container"},_z=tr({__name:"input-textarea",props:$h({label:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const n=uh(t,"modelValue");return(i,a)=>(wt(),ce("div",gz,[t.label?(wt(),ce("label",vz,oi(t.label),1)):gn("v-if",!0),zt("div",yz,[np(zt("textarea",mr(i.$attrs,{"onUpdate:modelValue":a[0]||(a[0]=h=>n.value=h)}),null,16),[[uv,n.value]])])]))}}),RI=ii(_z,[["__scopeId","data-v-be112bd4"]]),Io=(t={},n,i)=>{const a=xs("$map.id"),h=rn(()=>t.mapId||a);Hl(()=>{tp.getMap(h.value,async y=>{n instanceof Function&&await n(y)})}),ad(async()=>{i instanceof Function&&tp.getMap(h.value,async y=>{n instanceof Function&&await i(y)})});function m(y){return tp.getMap(h.value,y)}const o={mapId:t.mapId,dragId:t.dragId,btnWidth:t.btnWidth,position:t.position,controlVisible:t.controlVisible,order:t.order};return{callMap:m,mapId:h,moduleContainerProps:o}},rs={mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}};function rd(t=!1){const n=$e(t);function i(a){if(a!=null){n.value=a;return}n.value=!n.value}return[n,i]}let br={state:jl({container:{}}),getters:{getItems(t){return br.actions.getContainer(t).items},getItemsShow(t){return br.actions.getContainer(t).show},getWidth(t){return br.actions.getContainer(t).width},getHeight(t){return br.actions.getContainer(t).height},getIsMobile(t){return br.actions.getContainer(t).isMobile}},actions:{initContainer(t){br.state.container[t]={items:[],show:[],actions:{},height:0,width:0,isMobile:!1}},removeContainer(t){delete br.state.container[t]},getContainer(t){if(!t)throw"Not set container id";const n=br.state.container[t];if(!n)throw"Not found container for id "+t;return n},setParentProps(t,n){const i=br.actions.getContainer(t);i.width=n.width,i.height=n.height,i.isMobile=n.isMobile},registerItem(t,n){br.actions.getContainer(t).items.push(n)},registerAction(t,n,i){const a=br.actions.getContainer(t);a.actions[n]=i},unRegisterItem(t,n){const i=br.state.container[t];i&&(i.items=i.items.filter(a=>a!==n),i.show=i.show.filter(a=>a!==n),delete i.actions[n])},registerItemShow(t,n,i){xz(t,n,i),O1(t)},setToBack(t,n){if(!t||!n)return;const i=jw(t),a=i.show.findIndex(h=>h==n);a>0&&(i.show.splice(a,1),i.show.unshift(n),O1(t))},setToFront(t,n){if(!t||!n)return;const i=jw(t),a=i.show.findIndex(h=>h==n);a<i.show.length-1&&(i.show.splice(a,1),i.show.push(n),O1(t))}}};function xz(t,n,i){const a=br.actions.getContainer(t),h=a.show;if(i&&!h.includes(n))h.push(n);else if(!i){const m=h.indexOf(n);m!==-1&&h.splice(m,1)}a.show=h}function O1(t){br.actions.getContainer(t).show.forEach((i,a)=>{const h=bz(t,i);h&&h.setZIndex(a<0?1:a+2)})}function bz(t,n){return br.actions.getContainer(t).actions[n]}function jw(t){const n=br.state.container[t];if(!n)throw"Not found container for id "+t;return n}window.$_hungpv_store?br=window.$_hungpv_store:window.$_hungpv_store=br;function Az(t){br.actions.initContainer(t)}function wz(t){br.actions.removeContainer(t)}const Cz=br.actions.setParentProps;function Iz(t,n){br.actions.registerItem(t,n)}function Mz(t,n){br.actions.unRegisterItem(t,n)}const Hw=br.actions.registerItemShow,Ez=br.actions.registerAction,Sz=br.actions.setToFront,Tz=br.actions.setToBack,Pz=["id"],Lz=tr({__name:"draggable-container",props:{containerId:{}},emits:{init:t=>!0,destroy:t=>!0},setup(t,{emit:n}){const i=n,a=$e(),{containerId:h}=t,m=$e(h||`draggable-container-${Jh()}`),o=$e(!1);rn(()=>br.state),Hl(()=>{Az(m.value),window.addEventListener("resize",y),gu(()=>{y(),o.value=!0,i("init",m.value)})}),ad(()=>{wz(m.value),window.removeEventListener("resize",y),i("destroy",m.value)}),Jp("containerId",m);function y(){var M,T;const x=((M=a.value)==null?void 0:M.clientWidth)||0;Cz(m.value,{width:x,height:((T=a.value)==null?void 0:T.clientHeight)||0,isMobile:x<600})}return(x,M)=>(wt(),ce("div",{class:"draggable-container",ref_key:"box",ref:a,id:x.containerId},[m.value&&o.value?qn(x.$slots,"default",{key:0,containerId:x.containerId},void 0,!0):gn("v-if",!0)],8,Pz))}}),kz=ii(Lz,[["__scopeId","data-v-57a91267"]]),Dz={props:{height:{},width:{}},data:()=>({}),computed:{cardStyle(){return{height:this.height,width:this.width}}},methods:{}},Rz={class:"card-container"},zz=eb('<div class="card-arrow"><div class="card-arrow-top-left"></div><div class="card-arrow-top-right"></div><div class="card-arrow-bottom-left"></div><div class="card-arrow-bottom-right"></div></div>',1);function Oz(t,n,i,a,h,m){return wt(),ce("div",mr({class:"card",style:m.cardStyle},t.$attrs),[zt("div",Rz,[qn(t.$slots,"default")]),zz],16)}const u_=ii(Dz,[["render",Oz]]),Bz={props:{height:{default:32},width:{default:32},disabled:Boolean},computed:{bindStyle(){return{width:`${this.width}px`,height:`${this.height}px`}},bindClass(){return{"map-control-button--disabled":this.disabled}}}},Fz={class:"map-control-button__content"};function Nz(t,n,i,a,h,m){return wt(),ce("button",mr({class:"map-control-button"},t.$attrs,{style:m.bindStyle,class:m.bindClass}),[zt("span",Fz,[qn(t.$slots,"default",{},void 0,!0)])],16)}const es=ii(Bz,[["render",Nz],["__scopeId","data-v-0974994b"]]);function Vz(t,n){return n.length<1?!1:n[n.length-1]==t}function Uz(t,n){return n.length<1?!1:n[0]==t}function c_(t,n,i){const a=$e(`draggable-item-${Jh()}`),h=$e(0);function m(o){h.value=o}return Hl(()=>{Iz(t,a.value),Ez(t,a.value,{setZIndex:m}),n.value&&Hw(t,a.value,n.value)}),ad(()=>{Mz(t,a.value)}),hl(n,o=>{Hw(t,a.value,o)}),{itemId:a,zIndex:h}}function h_(t,n){const i=rn(()=>br.getters.getItems(t)),a=rn(()=>br.getters.getItemsShow(t)),h=rn(()=>Vz(n,a.value)),m=rn(()=>Uz(n,a.value)),o=rn(()=>a.value.length>1);function y(){Tz(t,n)}function x(){Sz(t,n)}return{items:i,itemShows:a,isLast:h,isFirst:m,isHasItems:o,onToBack:y,onToFront:x}}function jz(t){const n=rn(()=>br.getters.getWidth(t)),i=rn(()=>br.getters.getHeight(t));return{containerWidth:n,containerHeight:i}}const f_={disabledExpand:Boolean,disabledHeader:Boolean,disabledClose:Boolean,disabledOrder:Boolean,containerId:String,title:{type:String,default:""}};function p_(t,n,i){const a=$e(!!t.show||!!i);return hl(()=>t.show,m=>{a.value=m}),{show:rn({get(){return a.value},set(m){a.value=m,n("update:show",m),m||n("close")}})}}const d_={show:Boolean},m_={"update:show":t=>Boolean,close:()=>Boolean};function g_(t,n,i){const a=$e(!!i);hl(()=>t.expand,o=>{a.value=o});const h=rn({get(){return a.value},set(o){a.value=o,n("update:expand",o)}});function m(){h.value=!h.value}return{expand:h,toggle:m}}const v_={expand:Boolean},y_={"update:expand":t=>Boolean},Hz={name:"ArrangeBringForwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Gz=["aria-hidden","aria-label"],qz=["fill","width","height"],Wz={d:"M2,2H16V16H2V2M22,8V22H8V18H10V20H20V10H18V8H22Z"},Zz={key:0};function Yz(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrange-bring-forward-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",Wz,[i.title?(wt(),ce("title",Zz,oi(i.title),1)):gn("v-if",!0)])],8,qz))],16,Gz)}const Xz=ii(Hz,[["render",Yz]]),Kz={name:"ArrangeSendBackwardIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Qz=["aria-hidden","aria-label"],$z=["fill","width","height"],Jz={d:"M2,2H16V16H2V2M22,8V22H8V18H18V8H22M4,4V14H14V4H4Z"},tO={key:0};function eO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrange-send-backward-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",Jz,[i.title?(wt(),ce("title",tO,oi(i.title),1)):gn("v-if",!0)])],8,$z))],16,Qz)}const nO=ii(Kz,[["render",eO]]),iO={name:"ArrowDownDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},rO=["aria-hidden","aria-label"],oO=["fill","width","height"],aO={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M7,10L12,15L17,10H7Z"},sO={key:0};function lO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrow-down-drop-circle-outline-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",aO,[i.title?(wt(),ce("title",sO,oi(i.title),1)):gn("v-if",!0)])],8,oO))],16,rO)}const Gw=ii(iO,[["render",lO]]),uO={name:"ArrowUpDropCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},cO=["aria-hidden","aria-label"],hO=["fill","width","height"],fO={d:"M12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M17,14L12,9L7,14H17Z"},pO={key:0};function dO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon arrow-up-drop-circle-outline-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",fO,[i.title?(wt(),ce("title",pO,oi(i.title),1)):gn("v-if",!0)])],8,hO))],16,cO)}const qw=ii(uO,[["render",dO]]),mO={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},gO=["aria-hidden","aria-label"],vO=["fill","width","height"],yO={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},_O={key:0};function xO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon close-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",yO,[i.title?(wt(),ce("title",_O,oi(i.title),1)):gn("v-if",!0)])],8,vO))],16,gO)}const bO=ii(mO,[["render",xO]]),AO={name:"DragVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},wO=["aria-hidden","aria-label"],CO=["fill","width","height"],IO={d:"M22.67,12L18.18,16.5L15.67,14L17.65,12L15.67,10.04L18.18,7.53L22.67,12M12,1.33L16.47,5.82L13.96,8.33L12,6.35L10,8.33L7.5,5.82L12,1.33M12,22.67L7.53,18.18L10.04,15.67L12,17.65L14,15.67L16.5,18.18L12,22.67M1.33,12L5.82,7.5L8.33,10L6.35,12L8.33,13.96L5.82,16.47L1.33,12M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10Z"},MO={key:0};function EO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon drag-variant-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",IO,[i.title?(wt(),ce("title",MO,oi(i.title),1)):gn("v-if",!0)])],8,CO))],16,wO)}const SO=ii(AO,[["render",EO]]),TO={name:"MenuLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},PO=["aria-hidden","aria-label"],LO=["fill","width","height"],kO={d:"M14,7L9,12L14,17V7Z"},DO={key:0};function RO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon menu-left-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",kO,[i.title?(wt(),ce("title",DO,oi(i.title),1)):gn("v-if",!0)])],8,LO))],16,PO)}const Ww=ii(TO,[["render",RO]]),zO={name:"MenuRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},OO=["aria-hidden","aria-label"],BO=["fill","width","height"],FO={d:"M10,17L15,12L10,7V17Z"},NO={key:0};function VO(t,n,i,a,h,m){return wt(),ce("span",mr(t.$attrs,{"aria-hidden":i.title?null:!0,"aria-label":i.title,class:"material-design-icon menu-right-icon",role:"img",onClick:n[0]||(n[0]=o=>t.$emit("click",o))}),[(wt(),ce("svg",{fill:i.fillColor,class:"material-design-icon__svg",width:i.size,height:i.size,viewBox:"0 0 24 24"},[zt("path",FO,[i.title?(wt(),ce("title",NO,oi(i.title),1)):gn("v-if",!0)])],8,BO))],16,OO)}const Zw=ii(zO,[["render",VO]]);function __(){return{CloseIcon:bO,FullscreenIcon:Gw,OffFullscreenIcon:qw,ToBackIcon:nO,ToFrontIcon:Xz,ExpandedIcon:qw,CloseExpandedIcon:Gw,DragIcon:SO,SidebarLeftExpandedIcon:Ww,SidebarLeftCloseExpandedIcon:Zw,SidebarRightExpandedIcon:Zw,SidebarRightCloseExpandedIcon:Ww}}const zI=t=>(fh("data-v-c46aeee6"),t=t(),ph(),t),UO={class:"sidebar-container--content"},jO={class:"draggable-sidebar"},HO={class:"draggable-sidebar-heading"},GO={class:"draggable-sidebar-heading__content"},qO={class:"draggable-sidebar-heading__title"},WO=zI(()=>zt("div",{class:"map-spacer"},null,-1)),ZO=zI(()=>zt("hr",{class:"map-divider"},null,-1)),YO={class:"draggable-sidebar-content"},XO={key:0,class:"complex-button-close"},KO={key:0},QO={key:1},$O={name:"DraggableItemSideBar"},JO=tr({...$O,props:{...d_,...v_,...f_,width:{type:[Number,String],default:"auto"},right:Boolean},emits:{...m_,...y_},setup(t,{emit:n}){const{CloseIcon:i,SidebarLeftExpandedIcon:a,SidebarLeftCloseExpandedIcon:h,SidebarRightExpandedIcon:m,SidebarRightCloseExpandedIcon:o,ToBackIcon:y,ToFrontIcon:x}=__(),M=t,T=n,P=xs("containerId",$e(M.containerId||""));if(!P.value)throw"Not set container id";const{show:L}=p_(M,T),{zIndex:O,itemId:W}=c_(P.value,L),{isLast:H,isFirst:nt,isHasItems:lt,onToBack:K,onToFront:$}=h_(P.value,W.value),{expand:yt,toggle:Rt}=g_(M,T,!0),Ct=rn(()=>!M.width||M.width=="auto"),Et=u_;function Gt(){L.value=!1}const kt=rn(()=>{let Qt={};return Qt.zIndex=O.value,M.width&&M.width!="auto"&&(M.width&&!isNaN(+M.width)?Qt.width=M.width+"px":Qt.width=M.width),Qt});return(Qt,Ut)=>X(L)?(wt(),ce("div",{key:0,class:bs(["sidebar-container",{expand:X(yt),"left-sidebar-container":!t.right,"right-sidebar-container":t.right,"auto-sidebar-container":Ct.value}]),style:Ua(kt.value)},[zt("div",UO,[(wt(),Ve(lh(X(Et)),{width:"100%",height:"100%"},{default:se(()=>[zt("div",jO,[Qt.disabledHeader?gn("v-if",!0):(wt(),ce(Mi,{key:0},[zt("div",HO,[zt("div",GO,[zt("div",qO,[qn(Qt.$slots,"title",{},()=>[Va(oi(Qt.title),1)],!0)]),WO,qn(Qt.$slots,"extra-btn",{},void 0,!0),X(lt)&&!Qt.disabledOrder?(wt(),ce(Mi,{key:0},[jt(es,{disabled:X(nt),onClick:Ut[0]||(Ut[0]=Nt=>X(K)())},{default:se(()=>[jt(X(y),{size:16})]),_:1},8,["disabled"]),jt(es,{disabled:X(H),onClick:Ut[1]||(Ut[1]=Nt=>X($)())},{default:se(()=>[jt(X(x),{size:16})]),_:1},8,["disabled"])],64)):gn("v-if",!0),Qt.disabledClose?gn("v-if",!0):(wt(),Ve(es,{key:1,onClick:Gt},{default:se(()=>[jt(X(i),{size:16})]),_:1}))])]),ZO],64)),zt("div",YO,[qn(Qt.$slots,"default",{},void 0,!0)])])]),_:3}))]),X(L)&&!Qt.disabledExpand?(wt(),ce("div",XO,[zt("button",{onClick:Ut[2]||(Ut[2]=(...Nt)=>X(Rt)&&X(Rt)(...Nt))},[t.right?(wt(),ce("span",QO,[X(yt)?(wt(),Ve(X(m),{key:0,size:16})):(wt(),Ve(X(o),{key:1,size:16}))])):(wt(),ce("span",KO,[X(yt)?(wt(),Ve(X(a),{key:0,size:16})):(wt(),Ve(X(h),{key:1,size:16}))]))])])):gn("v-if",!0)],6)):gn("v-if",!0)}}),tB=ii(JO,[["__scopeId","data-v-c46aeee6"]]);function Yw(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function em(t,n,i,a=1){const[h,m]=typeof a=="number"?[a,a]:a,o=Math.round(n/h/t[0])*t[0],y=Math.round(i/m/t[1])*t[1];return[o,y]}function B1(t,n,i){return t-n-i}function F1(t,n,i){return t-n-i}function Zu(t,n,i){return n!==null&&t<n?n:i!==null&&i<t?i:t}function Xw(t,n,i){let a=t;const h=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(m=>Yw(a[m]));if(!Yw(a[h]))return!1;do{if(a[h](n))return!0;if(a===i)return!1;a=a.parentNode}while(a);return!1}function eB(t){const n=window.getComputedStyle(t);return[parseFloat(n.getPropertyValue("width"),10),parseFloat(n.getPropertyValue("height"),10)]}function Gp(t,n,i){t&&(t.attachEvent?t.attachEvent("on"+n,i):t.addEventListener?t.addEventListener(n,i,!0):t["on"+n]=i)}function Hh(t,n,i){t&&(t.detachEvent?t.detachEvent("on"+n,i):t.removeEventListener?t.removeEventListener(n,i,!0):t["on"+n]=null)}const nB=(t,n)=>{const i=t.__vccOpts||t;for(const[a,h]of n)i[a]=h;return i},c0={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},iB={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},rB={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let Gh=c0.mouse;const oB={replace:!0,name:"vue-draggable-resizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},h:{type:[Number,String],default:200,validator:t=>typeof t=="number"?t>0:t==="auto"},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>typeof t=="string"?t==="auto":t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const n=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter(i=>n.has(i))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:Boolean,default:!1},scale:{type:[Number,Array],default:1,validator:t=>typeof t=="number"?t>0:t.length===2&&t[0]>0&&t[1]>0},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},data:function(){return{left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,handle:null,enabled:this.active,resizing:!1,dragging:!1,dragEnable:!1,resizeEnable:!1,zIndex:this.z}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxHeight&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,n]=this.getParentSize();this.parentWidth=t,this.parentHeight=n;const[i,a]=eB(this.$el);this.aspectFactor=(this.w!=="auto"?this.w:i)/(this.h!=="auto"?this.h:a),this.width=this.w!=="auto"?this.w:i,this.height=this.h!=="auto"?this.h:a,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.active&&this.$emit("activated"),Gp(document.documentElement,"mousedown",this.deselect),Gp(document.documentElement,"touchend touchcancel",this.deselect),Gp(window,"resize",this.checkParentSize)},beforeUnmount:function(){Hh(document.documentElement,"mousedown",this.deselect),Hh(document.documentElement,"touchstart",this.handleUp),Hh(document.documentElement,"mousemove",this.move),Hh(document.documentElement,"touchmove",this.move),Hh(document.documentElement,"mouseup",this.handleUp),Hh(document.documentElement,"touchend touchcancel",this.deselect),Hh(window,"resize",this.checkParentSize)},methods:{resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,n]=this.getParentSize();this.parentWidth=t,this.parentHeight=n,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top}},getParentSize(){if(this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}return[null,null]},elementTouchDown(t){Gh=c0.touch,this.elementDown(t)},elementMouseDown(t){Gh=c0.mouse,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&t.button!==0)return;const n=t.target||t.srcElement;if(this.$el.contains(n)){if(this.onDragStart(t)===!1)return;if(this.dragHandle&&!Xw(n,this.dragHandle,this.$el)||this.dragCancel&&Xw(n,this.dragCancel,this.$el)){this.dragging=!1;return}this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragEnable=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.parent&&(this.bounds=this.calcDragLimits()),Gp(document.documentElement,Gh.move,this.move),Gp(document.documentElement,Gh.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const n=t.target||t.srcElement,i=new RegExp(this.className+"-([trmbl]{2})","");!this.$el.contains(n)&&!i.test(n.className)&&(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated"),this.$emit("update:active",!1)),Hh(document.documentElement,Gh.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,n){Gh=c0.touch,this.handleDown(t,n)},handleDown(t,n){n instanceof MouseEvent&&n.which!==1||this.onResizeStart(t,n)!==!1&&(n.stopPropagation&&n.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizeEnable=!0,this.mouseClickPosition.mouseX=n.touches?n.touches[0].pageX:n.pageX,this.mouseClickPosition.mouseY=n.touches?n.touches[0].pageY:n.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.bounds=this.calcResizeLimits(),Gp(document.documentElement,Gh.move,this.handleResize),Gp(document.documentElement,Gh.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,n=this.minH,i=this.maxW,a=this.maxH;const h=this.aspectFactor,[m,o]=this.grid,y=this.width,x=this.height,M=this.left,T=this.top,P=this.right,L=this.bottom;this.lockAspectRatio&&(t/n>h?n=t/h:t=h*n,i&&a?(i=Math.min(i,h*a),a=Math.min(a,i/h)):i?a=i/h:a&&(i=h*a)),i=i-i%m,a=a-a%o;const O={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(O.minLeft=M%m,O.maxLeft=M+Math.floor((y-t)/m)*m,O.minTop=T%o,O.maxTop=T+Math.floor((x-n)/o)*o,O.minRight=P%m,O.maxRight=P+Math.floor((y-t)/m)*m,O.minBottom=L%o,O.maxBottom=L+Math.floor((x-n)/o)*o,i&&(O.minLeft=Math.max(O.minLeft,this.parentWidth-P-i),O.minRight=Math.max(O.minRight,this.parentWidth-M-i)),a&&(O.minTop=Math.max(O.minTop,this.parentHeight-L-a),O.minBottom=Math.max(O.minBottom,this.parentHeight-T-a)),this.lockAspectRatio&&(O.minLeft=Math.max(O.minLeft,M-T*h),O.minTop=Math.max(O.minTop,T-M/h),O.minRight=Math.max(O.minRight,P-L*h),O.minBottom=Math.max(O.minBottom,L-P/h))):(O.minLeft=null,O.maxLeft=M+Math.floor((y-t)/m)*m,O.minTop=null,O.maxTop=T+Math.floor((x-n)/o)*o,O.minRight=null,O.maxRight=P+Math.floor((y-t)/m)*m,O.minBottom=null,O.maxBottom=L+Math.floor((x-n)/o)*o,i&&(O.minLeft=-(P+i),O.minRight=-(M+i)),a&&(O.minTop=-(L+a),O.minBottom=-(T+a)),this.lockAspectRatio&&i&&a&&(O.minLeft=Math.min(O.minLeft,-(P+i)),O.minTop=Math.min(O.minTop,-(a+L)),O.minRight=Math.min(O.minRight,-M-i),O.minBottom=Math.min(O.minBottom,-T-a))),O},move(t){this.resizing?this.handleResize(t):this.dragEnable&&this.handleDrag(t)},handleDrag(t){const n=this.axis,i=this.grid,a=this.bounds,h=this.mouseClickPosition,m=n&&n!=="y"?h.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=n&&n!=="x"?h.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[y,x]=em(i,m,o,this.scale),M=Zu(h.left-y,a.minLeft,a.maxLeft),T=Zu(h.top-x,a.minTop,a.maxTop);if(this.onDrag(M,T)===!1)return;const P=Zu(h.right+y,a.minRight,a.maxRight),L=Zu(h.bottom+x,a.minBottom,a.maxBottom);this.left=M,this.top=T,this.right=P,this.bottom=L,this.$emit("dragging",this.left,this.top),this.dragging=!0},moveHorizontally(t){const[n,i]=em(this.grid,t,this.top,1),a=Zu(n,this.bounds.minLeft,this.bounds.maxLeft);this.left=a,this.right=this.parentWidth-this.width-a},moveVertically(t){const[n,i]=em(this.grid,this.left,t,1),a=Zu(i,this.bounds.minTop,this.bounds.maxTop);this.top=a,this.bottom=this.parentHeight-this.height-a},handleResize(t){let n=this.left,i=this.top,a=this.right,h=this.bottom;const m=this.mouseClickPosition,o=this.aspectFactor,y=m.mouseX-(t.touches?t.touches[0].pageX:t.pageX),x=m.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&y&&(this.widthTouched=!0),!this.heightTouched&&x&&(this.heightTouched=!0);const[M,T]=em(this.grid,y,x,this.scale);this.handle.includes("b")?(h=Zu(m.bottom+T,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(a=this.right-(this.bottom-h)*o)):this.handle.includes("t")&&(i=Zu(m.top-T,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(n=this.left-(this.top-i)*o)),this.handle.includes("r")?(a=Zu(m.right+M,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(h=this.bottom-(this.right-a)/o)):this.handle.includes("l")&&(n=Zu(m.left-M,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(i=this.top-(this.left-n)/o));const P=B1(this.parentWidth,n,a),L=F1(this.parentHeight,i,h);this.onResize(this.handle,n,i,P,L)!==!1&&(this.left=n,this.top=i,this.right=a,this.bottom=h,this.width=P,this.height=L,this.$emit("resizing",this.left,this.top,this.width,this.height),this.resizing=!0)},changeWidth(t){const[n,i]=em(this.grid,t,0,1),a=Zu(this.parentWidth-n-this.left,this.bounds.minRight,this.bounds.maxRight);let h=this.bottom;this.lockAspectRatio&&(h=this.bottom-(this.right-a)/this.aspectFactor);const m=B1(this.parentWidth,this.left,a),o=F1(this.parentHeight,this.top,h);this.right=a,this.bottom=h,this.width=m,this.height=o},changeHeight(t){const[n,i]=em(this.grid,0,t,1),a=Zu(this.parentHeight-i-this.top,this.bounds.minBottom,this.bounds.maxBottom);let h=this.right;this.lockAspectRatio&&(h=this.right-(this.bottom-a)*this.aspectFactor);const m=B1(this.parentWidth,this.left,h),o=F1(this.parentHeight,this.top,a);this.right=h,this.bottom=a,this.width=m,this.height=o},handleUp(t){this.handle=null,this.resetBoundsAndMouseState(),this.dragEnable=!1,this.resizeEnable=!1,this.resizing&&(this.resizing=!1,this.$emit("resizeStop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,this.$emit("dragStop",this.left,this.top)),Hh(document.documentElement,Gh.move,this.handleResize)}},computed:{style(){return{transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex,...this.dragging&&this.disableUserSelect?iB:rB}},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return this.w==="auto"&&!this.widthTouched?"auto":this.width+"px"},computedHeight(){return this.h==="auto"&&!this.heightTouched?"auto":this.height+"px"},minW(){return this.minWidth},minH(){return this.minHeight},maxW(){return this.maxWidth},maxH(){return this.maxHeight},resizingOnX(){return!!this.handle&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return!!this.handle&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return!!this.handle&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||t==="auto")&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){t?this.aspectFactor=this.width/this.height:this.aspectFactor=void 0},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}}},aB=["onMousedown","onTouchstart"];function sB(t,n,i,a,h,m){return wt(),ce("div",{style:Ua(m.style),class:bs([{[i.classNameActive]:t.enabled,[i.classNameDragging]:t.dragging,[i.classNameResizing]:t.resizing,[i.classNameDraggable]:i.draggable,[i.classNameResizable]:i.resizable},i.className]),onMousedown:n[0]||(n[0]=(...o)=>m.elementMouseDown&&m.elementMouseDown(...o)),onTouchstart:n[1]||(n[1]=(...o)=>m.elementTouchDown&&m.elementTouchDown(...o))},[(wt(!0),ce(Mi,null,ja(m.actualHandles,o=>(wt(),ce("div",{key:o,class:bs([i.classNameHandle,i.classNameHandle+"-"+o]),style:Ua({display:t.enabled?"block":"none"}),onMousedown:Ho(y=>m.handleDown(o,y),["stop","prevent"]),onTouchstart:Ho(y=>m.handleTouchDown(o,y),["stop","prevent"])},[qn(t.$slots,o)],46,aB))),128)),qn(t.$slots,"default")],38)}const OI=nB(oB,[["render",sB]]);function Ex(t){Ex.installed||(Ex.installed=!0,t.component("VueDraggableResizable",OI))}const lB={install:Ex};let R0=null;typeof window<"u"?R0=window.Vue:typeof global<"u"&&(R0=global.Vue);R0&&R0.use(lB);const Pb=t=>(fh("data-v-670cf942"),t=t(),ph(),t),uB={class:"draggable-popup-desktop"},cB={class:"draggable-popup-desktop-heading"},hB={class:"draggable-popup-desktop-heading__content"},fB={class:"draggable-popup-desktop-heading__icon"},pB=Pb(()=>zt("div",{class:"drag grabbing"},null,-1)),dB={class:"draggable-popup-desktop-heading__title"},mB=Pb(()=>zt("div",{class:"map-spacer"},null,-1)),gB=Pb(()=>zt("hr",{class:"map-divider"},null,-1)),vB={class:"draggable-popup-desktop-content"},yB={name:"DraggableItemPopup"},_B=tr({...yB,props:{...d_,...v_,...f_,sticks:{type:Array,default:()=>["bl","br"]},top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},centerX:Boolean,centerY:Boolean,center:Boolean},emits:{...m_,...y_},setup(t,{emit:n}){const{CloseIcon:i,CloseExpandedIcon:a,DragIcon:h,ExpandedIcon:m,ToBackIcon:o,ToFrontIcon:y}=__(),x=t,M=n,T=xs("containerId",$e(x.containerId||""));if(!T.value)throw"Not set container id";const{show:P}=p_(x,M),{zIndex:L,itemId:O}=c_(T.value,P),{containerWidth:W,containerHeight:H}=jz(T.value),{isLast:nt,isFirst:lt,isHasItems:K,onToBack:$,onToFront:yt}=h_(T.value,O.value),Rt=$e(!1),Ct=$e(!1),Et=$e(x.height||200),Gt=$e(Et.value),kt=$e(x.width||200),Qt=$e(0),Ut=$e(0),{expand:Nt}=g_(x,M,!0);function Bt(){Ct.value=!0}function de(){Ct.value=!1}const bn=u_;function _e(ri,Fn,mn,Kn){kt.value=mn,Et.value=Kn}function He(){P.value=!1}hl(P,()=>{Ue()},{immediate:!0});function Ue(){Rt.value=!1,P&&(x.left!=null&&(Qt.value=x.left),x.top!=null&&(Ut.value=x.top),x.right&&(Qt.value=W.value-x.right-kt.value),x.bottom&&(Ut.value=H.value-x.bottom-Et.value),(x.center||x.centerX)&&(Qt.value=(W.value-kt.value)/2),(x.center||x.centerY)&&(Ut.value=(H.value-Et.value)/2),Rt.value=!0)}function Pi(){Nt.value&&Et.value>50&&(Gt.value=Et.value),Nt.value=!Nt.value,Et.value=Nt.value?Gt.value:50}return(ri,Fn)=>X(P)&&Rt.value?(wt(),Ve(X(OI),mr({key:0},ri.$attrs,{dragHandle:".drag",parent:!0,handles:t.sticks,w:kt.value,h:Et.value,x:Qt.value,y:Ut.value,z:X(L),onResizing:_e,active:Ct.value,onActivated:Fn[2]||(Fn[2]=mn=>Bt()),onDeactivated:Fn[3]||(Fn[3]=mn=>de())}),{default:se(()=>[(wt(),Ve(lh(X(bn)),{width:kt.value,height:Et.value},{default:se(()=>[zt("div",uB,[ri.disabledHeader?gn("v-if",!0):(wt(),ce(Mi,{key:0},[zt("div",cB,[zt("div",hB,[zt("div",fB,[jt(X(h),{size:16}),pB]),zt("div",dB,[qn(ri.$slots,"title",{},()=>[Va(oi(ri.title),1)],!0)]),mB,qn(ri.$slots,"extra-btn",{},void 0,!0),X(K)&&!ri.disabledOrder?(wt(),ce(Mi,{key:0},[jt(es,{disabled:X(lt),onClick:Fn[0]||(Fn[0]=mn=>X($)())},{default:se(()=>[jt(X(o),{size:16})]),_:1},8,["disabled"]),jt(es,{disabled:X(nt),onClick:Fn[1]||(Fn[1]=mn=>X(yt)())},{default:se(()=>[jt(X(y),{size:16})]),_:1},8,["disabled"])],64)):gn("v-if",!0),jt(es,{onClick:Pi},{default:se(()=>[X(Nt)?(wt(),Ve(X(m),{key:0,size:16})):(wt(),Ve(X(a),{key:1,size:16}))]),_:1}),ri.disabledClose?gn("v-if",!0):(wt(),Ve(es,{key:1,onClick:He},{default:se(()=>[jt(X(i),{size:16})]),_:1}))])]),gB],64)),np(zt("div",vB,[qn(ri.$slots,"default",{},void 0,!0)],512),[[PC,X(Nt)]])])]),_:3},8,["width","height"]))]),_:3},16,["handles","w","h","x","y","z","active"])):gn("v-if",!0)}}),xB=ii(_B,[["__scopeId","data-v-670cf942"]]),x_=t=>(fh("data-v-64bf3674"),t=t(),ph(),t),bB={class:"draggable-float"},AB={class:"draggable-float-heading"},wB={class:"draggable-float-heading__content"},CB={class:"draggable-float-heading__title"},IB=x_(()=>zt("div",{class:"map-spacer"},null,-1)),MB=x_(()=>zt("hr",{class:"map-divider"},null,-1)),EB={class:"draggable-float-heading"},SB={class:"draggable-float-heading__content"},TB={class:"draggable-float-heading__title"},PB=x_(()=>zt("div",{class:"map-spacer"},null,-1)),LB=x_(()=>zt("hr",{class:"map-divider"},null,-1)),kB={name:"DraggableItemFloat"},DB=tr({...kB,props:{...d_,...v_,...f_,top:{type:Number,default:void 0},left:{type:Number,default:void 0},bottom:{type:Number,default:void 0},right:{type:Number,default:void 0},width:{type:[Number,String],default:"auto"},maxHeight:{type:Number,default:500},headerLocation:{type:String,default:"top",validator:function(t){return["top","bottom"].includes(t)}}},emits:{...m_,...y_},setup(t,{emit:n}){const{CloseIcon:i,ToBackIcon:a,ToFrontIcon:h,ExpandedIcon:m,CloseExpandedIcon:o}=__(),y=t,x=n,M=xs("containerId",$e(y.containerId||""));if(!M.value)throw"Not set container id";const{show:T}=p_(y,x),{zIndex:P,itemId:L}=c_(M.value,T),{isLast:O,isFirst:W,isHasItems:H,onToBack:nt,onToFront:lt}=h_(M.value,L.value),{expand:K,toggle:$}=g_(y,x,!0),yt=u_;function Rt(){T.value=!1}const Ct=rn(()=>{let kt={};return kt.zIndex=P.value,y.top&&(kt.top=y.top+"px"),y.left&&(kt.left=y.left+"px"),y.right&&(kt.right=y.right+"px"),y.bottom&&(kt.bottom=y.bottom+"px"),y.width&&y.width!="auto"&&(y.width&&!isNaN(+y.width)?kt.width=y.width+"px":kt.width=y.width),kt}),Et=rn(()=>{let kt={};return kt.maxHeight=y.maxHeight+"px",kt}),Gt=rn(()=>!y.width||y.width=="auto");return(kt,Qt)=>X(T)?(wt(),ce("div",{key:0,class:bs(["float-container",{"auto-float-container":Gt.value}]),style:Ua(Ct.value)},[(wt(),Ve(lh(X(yt)),null,{default:se(()=>[zt("div",bB,[!kt.disabledHeader&&t.headerLocation==="top"?(wt(),ce(Mi,{key:0},[zt("div",AB,[zt("div",wB,[zt("div",CB,[qn(kt.$slots,"title",{},()=>[Va(oi(kt.title),1)],!0)]),IB,qn(kt.$slots,"extra-btn",{},void 0,!0),jt(es,{onClick:X($)},{default:se(()=>[X(K)?(wt(),Ve(X(m),{key:0,size:16})):(wt(),Ve(X(o),{key:1,size:16}))]),_:1},8,["onClick"]),X(H)&&!kt.disabledOrder?(wt(),ce(Mi,{key:0},[jt(es,{disabled:X(W),onClick:Qt[0]||(Qt[0]=Ut=>X(nt)())},{default:se(()=>[jt(X(a),{size:16})]),_:1},8,["disabled"]),jt(es,{disabled:X(O),onClick:Qt[1]||(Qt[1]=Ut=>X(lt)())},{default:se(()=>[jt(X(h),{size:16})]),_:1},8,["disabled"])],64)):gn("v-if",!0),kt.disabledClose?gn("v-if",!0):(wt(),Ve(es,{key:1,onClick:Rt},{default:se(()=>[jt(X(i),{size:16})]),_:1}))])]),MB],64)):gn("v-if",!0),np(zt("div",{class:"draggable-float-content",style:Ua(Et.value)},[qn(kt.$slots,"default",{},void 0,!0)],4),[[PC,X(K)]]),!kt.disabledHeader&&t.headerLocation==="bottom"?(wt(),ce(Mi,{key:1},[zt("div",EB,[zt("div",SB,[zt("div",TB,[qn(kt.$slots,"title",{},()=>[Va(oi(kt.title),1)],!0)]),PB,qn(kt.$slots,"extra-btn",{},void 0,!0),jt(es,{onClick:X($)},{default:se(()=>[X(K)?(wt(),Ve(X(m),{key:0,size:16})):(wt(),Ve(X(o),{key:1,size:16}))]),_:1},8,["onClick"]),X(H)&&!kt.disabledOrder?(wt(),ce(Mi,{key:0},[jt(es,{disabled:X(W),onClick:Qt[2]||(Qt[2]=Ut=>X(nt)())},{default:se(()=>[jt(X(a),{size:16})]),_:1},8,["disabled"]),jt(es,{disabled:X(O),onClick:Qt[3]||(Qt[3]=Ut=>X(lt)())},{default:se(()=>[jt(X(h),{size:16})]),_:1},8,["disabled"])],64)):gn("v-if",!0),kt.disabledClose?gn("v-if",!0):(wt(),Ve(es,{key:1,onClick:Rt},{default:se(()=>[jt(X(i),{size:16})]),_:1}))])]),LB],64)):gn("v-if",!0)])]),_:3}))],6)):gn("v-if",!0)}}),RB=ii(DB,[["__scopeId","data-v-64bf3674"]]),Lb=t=>(fh("data-v-992bacd4"),t=t(),ph(),t),zB={class:"draggable-bottom"},OB={class:"draggable-bottom-heading"},BB={class:"draggable-bottom-heading__title"},FB=Lb(()=>zt("div",{class:"draggable-bottom-heading__content"},null,-1)),NB=Lb(()=>zt("div",{class:"map-spacer"},null,-1)),VB=Lb(()=>zt("hr",{class:"map-divider"},null,-1)),UB={class:"draggable-bottom-content"},jB={name:"DraggableItemBottom"},HB=tr({...jB,props:{...d_,...v_,...f_},emits:{...m_,...y_},setup(t,{emit:n}){const{CloseIcon:i,ToBackIcon:a,FullscreenIcon:h,OffFullscreenIcon:m}=__(),o=t,y=n,x=xs("containerId",$e(o.containerId||""));if(!x.value)throw"Not set container id";const{show:M}=p_(o,y),{zIndex:T,itemId:P}=c_(x.value,M),{isFirst:L,isHasItems:O,onToBack:W}=h_(x.value,P.value),{expand:H,toggle:nt}=g_(o,y,!1),lt=u_;function K(){M.value=!1}const $=rn(()=>{let yt={};return yt.zIndex=T.value,yt.height=H.value?"100%":"45%",yt});return(yt,Rt)=>X(M)?(wt(),ce("div",{key:0,class:"popup-mobile-container",style:Ua($.value)},[(wt(),Ve(lh(X(lt)),null,{default:se(()=>[zt("div",zB,[yt.disabledHeader?gn("v-if",!0):(wt(),ce(Mi,{key:0},[zt("div",OB,[zt("div",BB,[qn(yt.$slots,"title",{},()=>[Va(oi(yt.title),1)],!0)]),FB,NB,qn(yt.$slots,"extra-btn",{},void 0,!0),X(O)&&!yt.disabledOrder?(wt(),Ve(es,{key:0,disabled:X(L),onClick:Rt[0]||(Rt[0]=Ho(Ct=>X(W)(),["prevent","stop"]))},{default:se(()=>[jt(X(a),{size:16})]),_:1},8,["disabled"])):gn("v-if",!0),jt(es,{onClick:Rt[1]||(Rt[1]=Ct=>X(nt)())},{default:se(()=>[X(H)?(wt(),Ve(X(h),{key:0,size:16})):(wt(),Ve(X(m),{key:1,size:16}))]),_:1}),yt.disabledClose?gn("v-if",!0):(wt(),Ve(es,{key:1,onClick:K},{default:se(()=>[jt(X(i),{size:16})]),_:1}))]),VB],64)),zt("div",UB,[qn(yt.$slots,"default",{},void 0,!0)])])]),_:3}))],4)):gn("v-if",!0)}}),kb=ii(HB,[["__scopeId","data-v-992bacd4"]]);function Db(t,n){return tr({name:"WithMobileHandle"+t.name,props:{containerId:String},setup(i){const a=xs("containerId",$e(i.containerId||"")),h=rn(()=>br.getters.getIsMobile(a.value));return{p_containerId:a,isMobile:h}},render(){return this.isMobile?sv(n,{...this.$attrs,containerId:this.p_containerId},this.$slots):sv(t,{...this.$attrs,containerId:this.p_containerId},this.$slots)}})}const BI=Db(tB,kb),af=Db(xB,kb);Db(RB,kb);const GB={class:"module__container"},qB={name:"ModuleContainer"},WB=Object.assign(qB,{props:{mapId:{type:String,default:""},dragId:{type:String,default:""},btnWidth:{type:Number,default:40},position:{type:String,default:"bottom-right",validator(t){return["top-left","top-right","bottom-left","bottom-right"].indexOf(t)!==-1}},controlVisible:{type:Boolean,default:!0},order:{type:Number,default:0}},setup(t){const n=US(),i=t,a=rn(()=>!!n.btn),h=rn(()=>!!n.draggable),m=xs("$map.dragId"),o=xs("$map.id"),y=rn(()=>i.dragId||m),x=rn(()=>i.mapId||o),M=rn(()=>`#map-draggable-${x.value}`),T=rn(()=>`#${i.position}-${x.value}`),P=rn(()=>{let L={};return i.position.includes("left")&&(L.left=18+i.btnWidth),i.position.includes("right")&&(L.right=18+i.btnWidth),i.position.includes("top")&&(L.top=10),i.position.includes("bottom")&&(L.bottom=10),L.containerId=y.value,L});return(L,O)=>(wt(),ce("div",GB,[t.controlVisible&&a.value?(wt(),Ve(zA,{key:0,to:T.value},[qn(L.$slots,"btn",{},void 0,!0)],8,["to"])):gn("v-if",!0),qn(L.$slots,"default",{},void 0,!0),y.value&&h.value?(wt(),Ve(zA,{key:1,to:M.value},[qn(L.$slots,"draggable",Sa(ha(P.value)),void 0,!0)],8,["to"])):gn("v-if",!0)]))}}),Ta=ii(WB,[["__scopeId","data-v-b1b771a9"]]),ZB={class:"crs-container"},YB={class:"grow"},XB={class:"crs-item-header"},KB={class:"crs-item-header__title"},QB={class:"crs-item-header__action"},$B=["onClick"],JB={class:"crs-item"},t8={key:0},e8={key:1},n8={class:"crs-item__add"},i8=tr({__name:"CrsControl",props:{...rs},setup(t){const{getCrsItems:n,setCrsItems:i}=db,a=t,{mapId:h,moduleContainerProps:m}=Io(a),{trans:o,setLocale:y}=fa(h.value);y({map:{"crs-control":{title:"Crs setting",field:{name:"name",unit:"unit",epsg:"epsg",proj4js:"proj4js"}}}});const[x,M]=rd(!1);function T(){M(!x.value)}const P=rn(()=>n(h.value)),L=[{text:"degree",value:"degree"},{text:"meter",value:"meter"}],O={delete:km,plus:hp},W=nt=>{i(h.value,P.value.filter(lt=>lt.epsg!==nt.epsg))},H=()=>{P.value.push({name:"",unit:"degree",epsg:""})};return(nt,lt)=>(wt(),Ve(Ta,Sa(ha(X(m))),{btn:se(()=>[jt(Tr,{onClick:Ho(T,["stop"]),tooltip:X(o)("map.crs-control.title")},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:X(P5)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:se(K=>[X(x)?(wt(),Ve(X(af),mr({key:0,height:200,width:400},K,{show:X(x),"onUpdate:show":lt[1]||(lt[1]=$=>Ea(x)?x.value=$:null),title:X(o)("map.crs-control.title")}),{default:se(()=>[zt("div",ZB,[zt("div",YB,[(wt(!0),ce(Mi,null,ja(P.value,$=>(wt(),Ve(X(mz),{key:$.epsg,selected:!1},{header:se(()=>[zt("div",XB,[zt("div",KB,oi($.name),1),zt("div",QB,[$.default?gn("v-if",!0):(wt(),ce("button",{key:0,class:"clickable",onClick:Ho(yt=>W($),["stop"])},[jt(X(Nn),{size:"14",type:"mdi",path:O.delete},null,8,["path"])],8,$B))])])]),default:se(()=>[zt("div",JB,[zt("div",null,[jt(X(la),{readonly:$.default,modelValue:$.name,"onUpdate:modelValue":yt=>$.name=yt,label:X(o)("map.crs-control.field.name")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),zt("div",null,[jt(X(la),{readonly:$.default,modelValue:$.epsg,"onUpdate:modelValue":yt=>$.epsg=yt,label:X(o)("map.crs-control.field.epsg")},null,8,["readonly","modelValue","onUpdate:modelValue","label"])]),$.default?gn("v-if",!0):(wt(),ce("div",t8,[jt(X(la),{modelValue:$.proj4js,"onUpdate:modelValue":yt=>$.proj4js=yt,label:X(o)("map.crs-control.field.proj4js")},null,8,["modelValue","onUpdate:modelValue","label"])])),$.default?gn("v-if",!0):(wt(),ce("div",e8,[jt(X(Tv),{modelValue:$.unit,"onUpdate:modelValue":yt=>$.unit=yt,label:X(o)("map.crs-control.field.unit"),items:L},null,8,["modelValue","onUpdate:modelValue","label"])]))])]),_:2},1024))),128))]),zt("div",n8,[zt("button",{class:"layer-item__button clickable",onClick:lt[0]||(lt[0]=Ho($=>H(),["stop"]))},[jt(X(Nn),{size:"14",type:"mdi",path:O.plus},null,8,["path"])])])])]),_:2},1040,["show","title"])):gn("v-if",!0)]),default:se(()=>[qn(nt.$slots,"default",{},void 0,!0)]),_:3},16))}}),r8=ii(i8,[["__scopeId","data-v-e6b1db63"]]),FI=zm?window:void 0,Rb=zm?window.document:void 0,zb=zm?window.navigator:void 0;function Mc(...t){let n,i,a,h;if(typeof t[0]=="string"||Array.isArray(t[0])?([i,a,h]=t,n=FI):[n,i,a,h]=t,!n)return u0;Array.isArray(i)||(i=[i]),Array.isArray(a)||(a=[a]);const m=[],o=()=>{m.forEach(T=>T()),m.length=0},y=(T,P,L,O)=>(T.addEventListener(P,L,O),()=>T.removeEventListener(P,L,O)),x=hl(()=>[Xf(n),sp(h)],([T,P])=>{if(o(),!T)return;const L=OR(P)?{...P}:P;m.push(...i.flatMap(O=>a.map(W=>y(T,O,W,L))))},{immediate:!0,flush:"post"}),M=()=>{x(),o()};return Rm(M),M}let Kw=!1;function o8(t,n,i={}){const{window:a=FI,ignore:h=[],capture:m=!0,detectIframe:o=!1}=i;if(!a)return u0;FR&&!Kw&&(Kw=!0,Array.from(a.document.body.children).forEach(L=>L.addEventListener("click",u0)),a.document.documentElement.addEventListener("click",u0));let y=!0;const x=L=>h.some(O=>{if(typeof O=="string")return Array.from(a.document.querySelectorAll(O)).some(W=>W===L.target||L.composedPath().includes(W));{const W=Xf(O);return W&&(L.target===W||L.composedPath().includes(W))}}),T=[Mc(a,"click",L=>{const O=Xf(t);if(!(!O||O===L.target||L.composedPath().includes(O))){if(L.detail===0&&(y=!x(L)),!y){y=!0;return}n(L)}},{passive:!0,capture:m}),Mc(a,"pointerdown",L=>{const O=Xf(t);y=!x(L)&&!!(O&&!L.composedPath().includes(O))},{passive:!0}),o&&Mc(a,"blur",L=>{setTimeout(()=>{var W;const O=Xf(t);((W=a.document.activeElement)==null?void 0:W.tagName)==="IFRAME"&&!(O!=null&&O.contains(a.document.activeElement))&&n(L)},0)})].filter(Boolean);return()=>T.forEach(L=>L())}function a8(){const t=$e(!1),n=Lm();return n&&Hl(()=>{t.value=!0},n),t}function b_(t){const n=a8();return rn(()=>(n.value,!!t()))}function Qw(t,n={}){const{controls:i=!1,navigator:a=zb}=n,h=b_(()=>a&&"permissions"in a);let m;const o=typeof t=="string"?{name:t}:t,y=$e(),x=()=>{m&&(y.value=m.state)},M=VR(async()=>{if(h.value){if(!m)try{m=await a.permissions.query(o),Mc(m,"change",x),x()}catch{y.value="prompt"}return m}});return M(),i?{state:y,isSupported:h,query:M}:y}function s8(t={}){const{navigator:n=zb,read:i=!1,source:a,copiedDuring:h=1500,legacy:m=!0}=t,o=b_(()=>n&&"clipboard"in n),y=Qw("clipboard-read"),x=Qw("clipboard-write"),M=rn(()=>o.value||m),T=$e(""),P=$e(!1),L=jR(()=>P.value=!1,h);function O(){o.value&&lt(y.value)?n.clipboard.readText().then(K=>{T.value=K}):T.value=nt()}M.value&&i&&Mc(["copy","cut"],O);async function W(K=sp(a)){M.value&&K!=null&&(o.value&&lt(x.value)?await n.clipboard.writeText(K):H(K),T.value=K,P.value=!0,L.start())}function H(K){const $=document.createElement("textarea");$.value=K??"",$.style.position="absolute",$.style.opacity="0",document.body.appendChild($),$.select(),document.execCommand("copy"),$.remove()}function nt(){var K,$;return(($=(K=document==null?void 0:document.getSelection)==null?void 0:K.call(document))==null?void 0:$.toString())??""}function lt(K){return K==="granted"||K==="prompt"}return{isSupported:M,text:T,copied:P,copy:W}}function l8(t,n={}){const i=$e(!1),a=xv(null);let h=0,m=!0;if(zm){const o=typeof n=="function"?{onDrop:n}:n,y=x=>{var T;const M=Array.from(((T=x.dataTransfer)==null?void 0:T.files)??[]);return a.value=M.length===0?null:M};Mc(t,"dragenter",x=>{var T,P;const M=Array.from(((T=x==null?void 0:x.dataTransfer)==null?void 0:T.items)||[]).map(L=>L.kind==="file"?L.type:null).filter(RR);if(o.dataTypes&&x.dataTransfer){const L=X(o.dataTypes);if(m=typeof L=="function"?L(M):L?L.some(O=>M.includes(O)):!0,!m)return}x.preventDefault(),h+=1,i.value=!0,(P=o.onEnter)==null||P.call(o,y(x),x)}),Mc(t,"dragover",x=>{var M;m&&(x.preventDefault(),(M=o.onOver)==null||M.call(o,y(x),x))}),Mc(t,"dragleave",x=>{var M;m&&(x.preventDefault(),h-=1,h===0&&(i.value=!1),(M=o.onLeave)==null||M.call(o,y(x),x))}),Mc(t,"drop",x=>{var M;x.preventDefault(),h=0,i.value=!1,(M=o.onDrop)==null||M.call(o,y(x),x)})}return{files:a,isOverDropZone:i}}const $w=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function u8(t,n={}){const{document:i=Rb,autoExit:a=!1}=n,h=rn(()=>Xf(t)??(i==null?void 0:i.querySelector("html"))),m=$e(!1),o=rn(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(lt=>i&&lt in i||h.value&&lt in h.value)),y=rn(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(lt=>i&&lt in i||h.value&&lt in h.value)),x=rn(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(lt=>i&&lt in i||h.value&&lt in h.value)),M=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(lt=>i&&lt in i),T=b_(()=>h.value&&i&&o.value!==void 0&&y.value!==void 0&&x.value!==void 0),P=()=>M?(i==null?void 0:i[M])===h.value:!1,L=()=>{if(x.value){if(i&&i[x.value]!=null)return i[x.value];{const lt=h.value;if((lt==null?void 0:lt[x.value])!=null)return!!lt[x.value]}}return!1};async function O(){if(!(!T.value||!m.value)){if(y.value)if((i==null?void 0:i[y.value])!=null)await i[y.value]();else{const lt=h.value;(lt==null?void 0:lt[y.value])!=null&&await lt[y.value]()}m.value=!1}}async function W(){if(!T.value||m.value)return;L()&&await O();const lt=h.value;o.value&&(lt==null?void 0:lt[o.value])!=null&&(await lt[o.value](),m.value=!0)}async function H(){await(m.value?O():W())}const nt=()=>{const lt=L();(!lt||lt&&P())&&(m.value=lt)};return Mc(i,$w,nt,!1),Mc(()=>Xf(h),$w,nt,!1),a&&Rm(O),{isSupported:T,isFullscreen:m,enter:W,exit:O,toggle:H}}function c8(t={}){const{enableHighAccuracy:n=!0,maximumAge:i=3e4,timeout:a=27e3,navigator:h=zb,immediate:m=!0}=t,o=b_(()=>h&&"geolocation"in h),y=$e(null),x=xv(null),M=$e({accuracy:0,latitude:Number.POSITIVE_INFINITY,longitude:Number.POSITIVE_INFINITY,altitude:null,altitudeAccuracy:null,heading:null,speed:null});function T(W){y.value=W.timestamp,M.value=W.coords,x.value=null}let P;function L(){o.value&&(P=h.geolocation.watchPosition(T,W=>x.value=W,{enableHighAccuracy:n,maximumAge:i,timeout:a}))}m&&L();function O(){P&&h&&h.geolocation.clearWatch(P)}return Rm(()=>{O()}),{isSupported:o,coords:M,locatedAt:y,error:x,resume:L,pause:O}}const h8=tr({__name:"FullScreenControl",props:{...rs,type:{type:String,default:"body"}},setup(t){const n={fullscreen:M5,exitFullscreen:E5},i=t,{callMap:a,mapId:h,moduleContainerProps:m}=Io(i),{trans:o,setLocale:y}=fa(h.value);y({map:{action:{"fullscreen-control-enter":"Enter fullscreen","fullscreen-control-exit":"Exit fullscreen"}}});const{isFullscreen:x,enter:M,exit:T,toggle:P}=u8(i.type=="body"?document.querySelector("body"):L());function L(O){return a(W=>{if(O||(O=W.getContainer()),O.classList.contains("map-container")||O.tagName==="BODY")return O;O=L(O.parentElement)}),O}return(O,W)=>(wt(),Ve(Ta,Sa(ha(X(m))),{btn:se(()=>[jt(Tr,{icon:"",title:X(x)?X(o)("map.action.fullscreen-control-exit"):X(o)("map.action.fullscreen-control-enter"),onClick:W[0]||(W[0]=H=>X(P)())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:X(x)?n.exitFullscreen:n.fullscreen},null,8,["path"])]),_:1},8,["title"])]),default:se(()=>[qn(O.$slots,"default")]),_:3},16))}});var NI={exports:{}};(function(t,n){(function(i,a){t.exports=a()})(ys,function(){var i,a,h;function m(o,y){if(!i)i=y;else if(!a)a=y;else{var x="var sharedChunk = {}; ("+i+")(sharedChunk); ("+a+")(sharedChunk);",M={};i(M),h=y(M),typeof window<"u"&&(h.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}return m(["exports"],function(o){function y(e,r){return e(r={exports:{}},r.exports),r.exports}var x=M;function M(e,r,s,p){this.cx=3*e,this.bx=3*(s-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(p-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=p,this.p2x=s,this.p2y=p}M.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},M.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},M.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},M.prototype.solveCurveX=function(e,r){var s,p,v,_,A;for(r===void 0&&(r=1e-6),v=e,A=0;A<8;A++){if(_=this.sampleCurveX(v)-e,Math.abs(_)<r)return v;var S=this.sampleCurveDerivativeX(v);if(Math.abs(S)<1e-6)break;v-=_/S}if((v=e)<(s=0))return s;if(v>(p=1))return p;for(;s<p;){if(_=this.sampleCurveX(v),Math.abs(_-e)<r)return v;e>_?s=v:p=v,v=.5*(p-s)+s}return v},M.prototype.solve=function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))};var T=P;function P(e,r){this.x=e,this.y=r}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,r){return this.clone()._rotateAround(e,r)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var r=e.x-this.x,s=e.y-this.y;return r*r+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,r){return Math.atan2(this.x*r-this.y*e,this.x*e+this.y*r)},_matMult:function(e){var r=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var r=Math.cos(e),s=Math.sin(e),p=s*this.x+r*this.y;return this.x=r*this.x-s*this.y,this.y=p,this},_rotateAround:function(e,r){var s=Math.cos(e),p=Math.sin(e),v=r.y+p*(this.x-r.x)+s*(this.y-r.y);return this.x=r.x+s*(this.x-r.x)-p*(this.y-r.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(e){return e instanceof P?e:Array.isArray(e)?new P(e[0],e[1]):e};var L=typeof self<"u"?self:{},O=Math.pow(2,53)-1;function W(e,r,s,p){var v=new x(e,r,s,p);return function(_){return v.solve(_)}}var H=W(.25,.1,.25,1);function nt(e,r,s){return Math.min(s,Math.max(r,e))}function lt(e,r,s){var p=s-r,v=((e-r)%p+p)%p+r;return v===r?s:v}function K(e){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];for(var p=0,v=r;p<v.length;p+=1){var _=v[p];for(var A in _)e[A]=_[A]}return e}var $=1;function yt(){return $++}function Rt(){return function e(r){return r?(r^16*Math.random()>>r/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function Ct(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function Et(e,r){e.forEach(function(s){r[s]&&(r[s]=r[s].bind(r))})}function Gt(e,r){return e.indexOf(r,e.length-r.length)!==-1}function kt(e,r,s){var p={};for(var v in e)p[v]=r.call(s||this,e[v],v,e);return p}function Qt(e,r,s){var p={};for(var v in e)r.call(s||this,e[v],v,e)&&(p[v]=e[v]);return p}function Ut(e){return Array.isArray(e)?e.map(Ut):typeof e=="object"&&e?kt(e,Ut):e}var Nt={};function Bt(e){Nt[e]||(typeof console<"u"&&console.warn(e),Nt[e]=!0)}function de(e,r,s){return(s.y-e.y)*(r.x-e.x)>(r.y-e.y)*(s.x-e.x)}function bn(e){for(var r=0,s=0,p=e.length,v=p-1,_=void 0,A=void 0;s<p;v=s++)r+=((A=e[v]).x-(_=e[s]).x)*(_.y+A.y);return r}function _e(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function He(e){var r={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(p,v,_,A){var S=_||A;return r[v]=!S||S.toLowerCase(),""}),r["max-age"]){var s=parseInt(r["max-age"],10);isNaN(s)?delete r["max-age"]:r["max-age"]=s}return r}var Ue=null;function Pi(e){if(Ue==null){var r=e.navigator?e.navigator.userAgent:null;Ue=!!e.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Ue}function ri(e){try{var r=L[e];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}var Fn,mn,Kn,Li,ui=L.performance&&L.performance.now?L.performance.now.bind(L.performance):Date.now.bind(Date),bi=L.requestAnimationFrame||L.mozRequestAnimationFrame||L.webkitRequestAnimationFrame||L.msRequestAnimationFrame,le=L.cancelAnimationFrame||L.mozCancelAnimationFrame||L.webkitCancelAnimationFrame||L.msCancelAnimationFrame,Ke={now:ui,frame:function(e){var r=bi(e);return{cancel:function(){return le(r)}}},getImageData:function(e,r){r===void 0&&(r=0);var s=L.document.createElement("canvas"),p=s.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return s.width=e.width,s.height=e.height,p.drawImage(e,0,0,e.width,e.height),p.getImageData(-r,-r,e.width+2*r,e.height+2*r)},resolveURL:function(e){return Fn||(Fn=L.document.createElement("a")),Fn.href=e,Fn.href},hardwareConcurrency:L.navigator&&L.navigator.hardwareConcurrency||4,get devicePixelRatio(){return L.devicePixelRatio},get prefersReducedMotion(){return!!L.matchMedia&&(mn==null&&(mn=L.matchMedia("(prefers-reduced-motion: reduce)")),mn.matches)}},me={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Te={supported:!1,testSupport:function(e){!Ai&&Li&&(ki?ut(e):Kn=e)}},Ai=!1,ki=!1;function ut(e){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Li),e.isContextLost())return;Te.supported=!0}catch{}e.deleteTexture(r),Ai=!0}L.document&&((Li=L.document.createElement("img")).onload=function(){Kn&&ut(Kn),Kn=null,ki=!0},Li.onerror=function(){Ai=!0,Kn=null},Li.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var xt="01",$t=function(e,r){this._transformRequestFn=e,this._customAccessToken=r,this._createSkuToken()};function ae(e){return e.indexOf("mapbox:")===0}$t.prototype._createSkuToken=function(){var e=function(){for(var r="",s=0;s<10;s++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",xt,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},$t.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},$t.prototype.transformRequest=function(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}},$t.prototype.normalizeStyleURL=function(e,r){if(!ae(e))return e;var s=we(e);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||r)},$t.prototype.normalizeGlyphsURL=function(e,r){if(!ae(e))return e;var s=we(e);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||r)},$t.prototype.normalizeSourceURL=function(e,r){if(!ae(e))return e;var s=we(e);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||r)},$t.prototype.normalizeSpriteURL=function(e,r,s,p){var v=we(e);return ae(e)?(v.path="/styles/v1"+v.path+"/sprite"+r+s,this._makeAPIURL(v,this._customAccessToken||p)):(v.path+=""+r+s,De(v))},$t.prototype.normalizeTileURL=function(e,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ae(e))return e;var s=we(e);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ke.devicePixelRatio>=2||r===512?"@2x":"")+(Te.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var p=this._customAccessToken||function(v){for(var _=0,A=v;_<A.length;_+=1){var S=A[_].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(s.params)||me.ACCESS_TOKEN;return me.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,p)},$t.prototype.canonicalizeTileURL=function(e,r){var s=we(e);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return e;var p="mapbox://tiles/";p+=s.path.replace("/v4/","");var v=s.params;return r&&(v=v.filter(function(_){return!_.match(/^access_token=/)})),v.length&&(p+="?"+v.join("&")),p},$t.prototype.canonicalizeTileset=function(e,r){for(var s=!!r&&ae(r),p=[],v=0,_=e.tiles||[];v<_.length;v+=1){var A=_[v];Oe(A)?p.push(this.canonicalizeTileURL(A,s)):p.push(A)}return p},$t.prototype._makeAPIURL=function(e,r){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",p=we(me.API_URL);if(e.protocol=p.protocol,e.authority=p.authority,e.protocol==="http"){var v=e.params.indexOf("secure");v>=0&&e.params.splice(v,1)}if(p.path!=="/"&&(e.path=""+p.path+e.path),!me.REQUIRE_ACCESS_TOKEN)return De(e);if(!(r=r||me.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(r[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return e.params=e.params.filter(function(_){return _.indexOf("access_token")===-1}),e.params.push("access_token="+r),De(e)};var pe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Oe(e){return pe.test(e)}var ln=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(e){var r=e.match(ln);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function De(e){var r=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+r}function Se(e){if(!e)return null;var r=e.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(L.atob(r[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var tn=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};tn.prototype.getStorageKey=function(e){var r,s=Se(me.ACCESS_TOKEN);return r=s&&s.u?L.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(p,v){return String.fromCharCode(+("0x"+v))})):me.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},tn.prototype.fetchEventData=function(){var e=ri("localStorage"),r=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{var p=L.localStorage.getItem(r);p&&(this.eventData=JSON.parse(p));var v=L.localStorage.getItem(s);v&&(this.anonId=v)}catch{Bt("Unable to read from LocalStorage")}},tn.prototype.saveEventData=function(){var e=ri("localStorage"),r=this.getStorageKey(),s=this.getStorageKey("uuid");if(e)try{L.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&L.localStorage.setItem(r,JSON.stringify(this.eventData))}catch{Bt("Unable to write to LocalStorage")}},tn.prototype.processRequests=function(e){},tn.prototype.postEvent=function(e,r,s,p){var v=this;if(me.EVENTS_URL){var _=we(me.EVENTS_URL);_.params.push("access_token="+(p||me.ACCESS_TOKEN||""));var A={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:xt,userId:this.anonId},S=r?K(A,r):A,D={url:De(_),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=qr(D,function(B){v.pendingRequest=null,s(B),v.saveEventData(),v.processRequests(p)})}},tn.prototype.queueRequest=function(e,r){this.queue.push(e),this.processRequests(r)};var wn,Cn,Pn=function(e){function r(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postMapLoadEvent=function(s,p,v,_){this.skuToken=v;var A=!(!_&&!me.ACCESS_TOKEN),S=Array.isArray(s)&&s.some(function(D){return ae(D)||Oe(D)});me.EVENTS_URL&&A&&S&&this.queueRequest({id:p,timestamp:Date.now()},_)},r.prototype.processRequests=function(s){var p=this;if(!this.pendingRequest&&this.queue.length!==0){var v=this.queue.shift(),_=v.id,A=v.timestamp;_&&this.success[_]||(this.anonId||this.fetchEventData(),Ct(this.anonId)||(this.anonId=Rt()),this.postEvent(A,{skuToken:this.skuToken},function(S){S||_&&(p.success[_]=!0)},s))}},r}(tn),Qn=new(function(e){function r(s){e.call(this,"appUserTurnstile"),this._customAccessToken=s}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.postTurnstileEvent=function(s,p){me.EVENTS_URL&&me.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(v){return ae(v)||Oe(v)})&&this.queueRequest(Date.now(),p)},r.prototype.processRequests=function(s){var p=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var v=Se(me.ACCESS_TOKEN),_=v?v.u:me.ACCESS_TOKEN,A=_!==this.eventData.tokenU;Ct(this.anonId)||(this.anonId=Rt(),A=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var D=new Date(this.eventData.lastSuccess),B=new Date(S),N=(S-this.eventData.lastSuccess)/864e5;A=A||N>=1||N<-1||D.getDate()!==B.getDate()}else A=!0;if(!A)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(V){V||(p.eventData.lastSuccess=S,p.eventData.tokenU=_)},s)}},r}(tn)),Di=Qn.postTurnstileEvent.bind(Qn),wi=new Pn,rr=wi.postMapLoadEvent.bind(wi),Gr=500,qo=50;function pa(){L.caches&&!wn&&(wn=L.caches.open("mapbox-tiles"))}function Pa(e){var r=e.indexOf("?");return r<0?e:e.slice(0,r)}var Ga,Ar=1/0;function Mo(){return Ga==null&&(Ga=L.OffscreenCanvas&&new L.OffscreenCanvas(1,1).getContext("2d")&&typeof L.createImageBitmap=="function"),Ga}var Hs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Hs);var Gs=function(e){function r(s,p,v){p===401&&Oe(v)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,s),this.status=p,this.url=v,this.name=this.constructor.name,this.message=s}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},r}(Error),fl=_e()?function(){return self.worker&&self.worker.referrer}:function(){return(L.location.protocol==="blob:"?L.parent:L).location.href},La,so,qs=function(e,r){if(!(/^file:/.test(s=e.url)||/^file:/.test(fl())&&!/^\w+:/.test(s))){if(L.fetch&&L.Request&&L.AbortController&&L.Request.prototype.hasOwnProperty("signal"))return function(p,v){var _,A=new L.AbortController,S=new L.Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:fl(),signal:A.signal}),D=!1,B=!1,N=(_=S.url).indexOf("sku=")>0&&Oe(_);p.type==="json"&&S.headers.set("Accept","application/json");var V=function(J,ct,pt){if(!B){if(J&&J.message!=="SecurityError"&&Bt(J),ct&&pt)return Z(ct);var It=Date.now();L.fetch(S).then(function(_t){if(_t.ok){var Vt=N?_t.clone():null;return Z(_t,Vt,It)}return v(new Gs(_t.statusText,_t.status,p.url))}).catch(function(_t){_t.code!==20&&v(new Error(_t.message))})}},Z=function(J,ct,pt){(p.type==="arrayBuffer"?J.arrayBuffer():p.type==="json"?J.json():J.text()).then(function(It){B||(ct&&pt&&function(_t,Vt,Yt){if(pa(),wn){var Jt={status:Vt.status,statusText:Vt.statusText,headers:new L.Headers};Vt.headers.forEach(function(fe,Me){return Jt.headers.set(Me,fe)});var ee=He(Vt.headers.get("Cache-Control")||"");ee["no-store"]||(ee["max-age"]&&Jt.headers.set("Expires",new Date(Yt+1e3*ee["max-age"]).toUTCString()),new Date(Jt.headers.get("Expires")).getTime()-Yt<42e4||function(fe,Me){if(Cn===void 0)try{new Response(new ReadableStream),Cn=!0}catch{Cn=!1}Cn?Me(fe.body):fe.blob().then(Me)}(Vt,function(fe){var Me=new L.Response(fe,Jt);pa(),wn&&wn.then(function(Be){return Be.put(Pa(_t.url),Me)}).catch(function(Be){return Bt(Be.message)})}))}}(S,ct,pt),D=!0,v(null,It,J.headers.get("Cache-Control"),J.headers.get("Expires")))}).catch(function(It){B||v(new Error(It.message))})};return N?function(J,ct){if(pa(),!wn)return ct(null);var pt=Pa(J.url);wn.then(function(It){It.match(pt).then(function(_t){var Vt=function(Yt){if(!Yt)return!1;var Jt=new Date(Yt.headers.get("Expires")||0),ee=He(Yt.headers.get("Cache-Control")||"");return Jt>Date.now()&&!ee["no-cache"]}(_t);It.delete(pt),Vt&&It.put(pt,_t.clone()),ct(null,_t,Vt)}).catch(ct)}).catch(ct)}(S,V):V(null,null),{cancel:function(){B=!0,D||A.abort()}}}(e,r);if(_e()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,r,void 0,!0)}var s;return function(p,v){var _=new L.XMLHttpRequest;for(var A in _.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(_.responseType="arraybuffer"),p.headers)_.setRequestHeader(A,p.headers[A]);return p.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=p.credentials==="include",_.onerror=function(){v(new Error(_.statusText))},_.onload=function(){if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){var S=_.response;if(p.type==="json")try{S=JSON.parse(_.response)}catch(D){return v(D)}v(null,S,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else v(new Gs(_.statusText,_.status,p.url))},_.send(p.body),{cancel:function(){return _.abort()}}}(e,r)},vu=function(e,r){return qs(K(e,{type:"arrayBuffer"}),r)},qr=function(e,r){return qs(K(e,{method:"POST"}),r)},U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";La=[],so=0;var q=function(e,r){if(Te.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),so>=me.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:e,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return La.push(s),s}so++;var p=!1,v=function(){if(!p)for(p=!0,so--;La.length&&so<me.MAX_PARALLEL_IMAGE_REQUESTS;){var A=La.shift();A.cancelled||(A.cancel=q(A.requestParameters,A.callback).cancel)}},_=vu(e,function(A,S,D,B){v(),A?r(A):S&&(Mo()?function(N,V){var Z=new L.Blob([new Uint8Array(N)],{type:"image/png"});L.createImageBitmap(Z).then(function(J){V(null,J)}).catch(function(J){V(new Error("Could not load image because of "+J.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,r):function(N,V,Z,J){var ct=new L.Image,pt=L.URL;ct.onload=function(){V(null,ct),pt.revokeObjectURL(ct.src),ct.onload=null,L.requestAnimationFrame(function(){ct.src=U})},ct.onerror=function(){return V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var It=new L.Blob([new Uint8Array(N)],{type:"image/png"});ct.cacheControl=Z,ct.expires=J,ct.src=N.byteLength?pt.createObjectURL(It):U}(S,r,D,B))});return{cancel:function(){_.cancel(),v()}}};function Q(e,r,s){s[e]&&s[e].indexOf(r)!==-1||(s[e]=s[e]||[],s[e].push(r))}function at(e,r,s){if(s&&s[e]){var p=s[e].indexOf(r);p!==-1&&s[e].splice(p,1)}}var dt=function(e,r){r===void 0&&(r={}),K(this,r),this.type=e},St=function(e){function r(s,p){p===void 0&&(p={}),e.call(this,"error",K({error:s},p))}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(dt),Dt=function(){};Dt.prototype.on=function(e,r){return this._listeners=this._listeners||{},Q(e,r,this._listeners),this},Dt.prototype.off=function(e,r){return at(e,r,this._listeners),at(e,r,this._oneTimeListeners),this},Dt.prototype.once=function(e,r){return this._oneTimeListeners=this._oneTimeListeners||{},Q(e,r,this._oneTimeListeners),this},Dt.prototype.fire=function(e,r){typeof e=="string"&&(e=new dt(e,r||{}));var s=e.type;if(this.listens(s)){e.target=this;for(var p=0,v=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];p<v.length;p+=1)v[p].call(this,e);for(var _=0,A=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];_<A.length;_+=1){var S=A[_];at(s,S,this._oneTimeListeners),S.call(this,e)}var D=this._eventedParent;D&&(K(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),D.fire(e))}else e instanceof St&&console.error(e.error);return this},Dt.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Dt.prototype.setEventedParent=function(e,r){return this._eventedParent=e,this._eventedParentData=r,this};var tt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},vt=function(e,r,s,p){this.message=(e?e+": ":"")+s,p&&(this.identifier=p),r!=null&&r.__line__&&(this.line=r.__line__)};function Zt(e){var r=e.value;return r?[new vt(e.key,r,"constants have been deprecated as of v8")]:[]}function ge(e){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];for(var p=0,v=r;p<v.length;p+=1){var _=v[p];for(var A in _)e[A]=_[A]}return e}function be(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function ie(e){if(Array.isArray(e))return e.map(ie);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var r={};for(var s in e)r[s]=ie(e[s]);return r}return be(e)}var ye=function(e){function r(s,p){e.call(this,p),this.message=p,this.key=s}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Error),sn=function(e,r){r===void 0&&(r=[]),this.parent=e,this.bindings={};for(var s=0,p=r;s<p.length;s+=1){var v=p[s];this.bindings[v[0]]=v[1]}};sn.prototype.concat=function(e){return new sn(this,e)},sn.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},sn.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var on={kind:"null"},oe={kind:"number"},ke={kind:"string"},Ne={kind:"boolean"},je={kind:"color"},ei={kind:"object"},Ze={kind:"value"},_i={kind:"collator"},Vi={kind:"formatted"},ci={kind:"resolvedImage"};function mi(e,r){return{kind:"array",itemType:e,N:r}}function gi(e){if(e.kind==="array"){var r=gi(e.itemType);return typeof e.N=="number"?"array<"+r+", "+e.N+">":e.itemType.kind==="value"?"array":"array<"+r+">"}return e.kind}var Eo=[on,oe,ke,Ne,je,Vi,ei,mi(Ze),ci];function Hn(e,r){if(r.kind==="error")return null;if(e.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Hn(e.itemType,r.itemType))&&(typeof e.N!="number"||e.N===r.N))return null}else{if(e.kind===r.kind)return null;if(e.kind==="value"){for(var s=0,p=Eo;s<p.length;s+=1)if(!Hn(p[s],r))return null}}return"Expected "+gi(e)+" but found "+gi(r)+" instead."}function Pr(e,r){return r.some(function(s){return s.kind===e.kind})}function Wi(e,r){return r.some(function(s){return s==="null"?e===null:s==="array"?Array.isArray(e):s==="object"?e&&!Array.isArray(e)&&typeof e=="object":s===typeof e})}var Wn=y(function(e,r){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function p(S){return(S=Math.round(S))<0?0:S>255?255:S}function v(S){return p(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function _(S){return(D=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:D>1?1:D;var D}function A(S,D,B){return B<0?B+=1:B>1&&(B-=1),6*B<1?S+(D-S)*B*6:2*B<1?D:3*B<2?S+(D-S)*(2/3-B)*6:S}try{r.parseCSSColor=function(S){var D,B=S.replace(/ /g,"").toLowerCase();if(B in s)return s[B].slice();if(B[0]==="#")return B.length===4?(D=parseInt(B.substr(1),16))>=0&&D<=4095?[(3840&D)>>4|(3840&D)>>8,240&D|(240&D)>>4,15&D|(15&D)<<4,1]:null:B.length===7&&(D=parseInt(B.substr(1),16))>=0&&D<=16777215?[(16711680&D)>>16,(65280&D)>>8,255&D,1]:null;var N=B.indexOf("("),V=B.indexOf(")");if(N!==-1&&V+1===B.length){var Z=B.substr(0,N),J=B.substr(N+1,V-(N+1)).split(","),ct=1;switch(Z){case"rgba":if(J.length!==4)return null;ct=_(J.pop());case"rgb":return J.length!==3?null:[v(J[0]),v(J[1]),v(J[2]),ct];case"hsla":if(J.length!==4)return null;ct=_(J.pop());case"hsl":if(J.length!==3)return null;var pt=(parseFloat(J[0])%360+360)%360/360,It=_(J[1]),_t=_(J[2]),Vt=_t<=.5?_t*(It+1):_t+It-_t*It,Yt=2*_t-Vt;return[p(255*A(Yt,Vt,pt+1/3)),p(255*A(Yt,Vt,pt)),p(255*A(Yt,Vt,pt-1/3)),ct];default:return null}}return null}}catch{}}).parseCSSColor,ai=function(e,r,s,p){p===void 0&&(p=1),this.r=e,this.g=r,this.b=s,this.a=p};ai.parse=function(e){if(e){if(e instanceof ai)return e;if(typeof e=="string"){var r=Wn(e);if(r)return new ai(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}}},ai.prototype.toString=function(){var e=this.toArray(),r=e[1],s=e[2],p=e[3];return"rgba("+Math.round(e[0])+","+Math.round(r)+","+Math.round(s)+","+p+")"},ai.prototype.toArray=function(){var e=this.a;return e===0?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},ai.black=new ai(0,0,0,1),ai.white=new ai(1,1,1,1),ai.transparent=new ai(0,0,0,0),ai.red=new ai(1,0,0,1);var So=function(e,r,s){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};So.prototype.compare=function(e,r){return this.collator.compare(e,r)},So.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var os=function(e,r,s,p,v){this.text=e,this.image=r,this.scale=s,this.fontStack=p,this.textColor=v},Lr=function(e){this.sections=e};Lr.fromString=function(e){return new Lr([new os(e,null,null,null,null)])},Lr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(e){return e.text.length!==0||e.image&&e.image.name.length!==0})},Lr.factory=function(e){return e instanceof Lr?e:Lr.fromString(e)},Lr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(e){return e.text}).join("")},Lr.prototype.serialize=function(){for(var e=["format"],r=0,s=this.sections;r<s.length;r+=1){var p=s[r];if(p.image)e.push(["image",p.image.name]);else{e.push(p.text);var v={};p.fontStack&&(v["text-font"]=["literal",p.fontStack.split(",")]),p.scale&&(v["font-scale"]=p.scale),p.textColor&&(v["text-color"]=["rgba"].concat(p.textColor.toArray())),e.push(v)}}return e};var Ro=function(e){this.name=e.name,this.available=e.available};function Pc(e,r,s,p){return typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof s=="number"&&s>=0&&s<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:"Invalid rgba value ["+[e,r,s,p].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof p=="number"?[e,r,s,p]:[e,r,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function yu(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof ai||e instanceof So||e instanceof Lr||e instanceof Ro)return!0;if(Array.isArray(e)){for(var r=0,s=e;r<s.length;r+=1)if(!yu(s[r]))return!1;return!0}if(typeof e=="object"){for(var p in e)if(!yu(e[p]))return!1;return!0}return!1}function kr(e){if(e===null)return on;if(typeof e=="string")return ke;if(typeof e=="boolean")return Ne;if(typeof e=="number")return oe;if(e instanceof ai)return je;if(e instanceof So)return _i;if(e instanceof Lr)return Vi;if(e instanceof Ro)return ci;if(Array.isArray(e)){for(var r,s=e.length,p=0,v=e;p<v.length;p+=1){var _=kr(v[p]);if(r){if(r===_)continue;r=Ze;break}r=_}return mi(r||Ze,s)}return ei}function _u(e){var r=typeof e;return e===null?"":r==="string"||r==="number"||r==="boolean"?String(e):e instanceof ai||e instanceof Lr||e instanceof Ro?e.toString():JSON.stringify(e)}Ro.prototype.toString=function(){return this.name},Ro.fromString=function(e){return e?new Ro({name:e,available:!1}):null},Ro.prototype.serialize=function(){return["image",this.name]};var yo=function(e,r){this.type=e,this.value=r};yo.parse=function(e,r){if(e.length!==2)return r.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!yu(e[1]))return r.error("invalid value");var s=e[1],p=kr(s),v=r.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new yo(p,s)},yo.prototype.evaluate=function(){return this.value},yo.prototype.eachChild=function(){},yo.prototype.outputDefined=function(){return!0},yo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ai?["rgba"].concat(this.value.toArray()):this.value instanceof Lr?this.value.serialize():this.value};var Wr=function(e){this.name="ExpressionEvaluationError",this.message=e};Wr.prototype.toJSON=function(){return this.message};var da={string:ke,number:oe,boolean:Ne,object:ei},gr=function(e,r){this.type=e,this.args=r};gr.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var s,p=1,v=e[0];if(v==="array"){var _,A;if(e.length>2){var S=e[1];if(typeof S!="string"||!(S in da)||S==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);_=da[S],p++}else _=Ze;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);A=e[2],p++}s=mi(_,A)}else s=da[v];for(var D=[];p<e.length;p++){var B=r.parse(e[p],p,Ze);if(!B)return null;D.push(B)}return new gr(s,D)},gr.prototype.evaluate=function(e){for(var r=0;r<this.args.length;r++){var s=this.args[r].evaluate(e);if(!Hn(this.type,kr(s)))return s;if(r===this.args.length-1)throw new Wr("Expected value to be of type "+gi(this.type)+", but found "+gi(kr(s))+" instead.")}return null},gr.prototype.eachChild=function(e){this.args.forEach(e)},gr.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},gr.prototype.serialize=function(){var e=this.type,r=[e.kind];if(e.kind==="array"){var s=e.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){r.push(s.kind);var p=e.N;(typeof p=="number"||this.args.length>1)&&r.push(p)}}return r.concat(this.args.map(function(v){return v.serialize()}))};var qa=function(e){this.type=Vi,this.sections=e};qa.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var s=e[1];if(!Array.isArray(s)&&typeof s=="object")return r.error("First argument must be an image or text section.");for(var p=[],v=!1,_=1;_<=e.length-1;++_){var A=e[_];if(v&&typeof A=="object"&&!Array.isArray(A)){v=!1;var S=null;if(A["font-scale"]&&!(S=r.parse(A["font-scale"],1,oe)))return null;var D=null;if(A["text-font"]&&!(D=r.parse(A["text-font"],1,mi(ke))))return null;var B=null;if(A["text-color"]&&!(B=r.parse(A["text-color"],1,je)))return null;var N=p[p.length-1];N.scale=S,N.font=D,N.textColor=B}else{var V=r.parse(e[_],1,Ze);if(!V)return null;var Z=V.type.kind;if(Z!=="string"&&Z!=="value"&&Z!=="null"&&Z!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:V,scale:null,font:null,textColor:null})}}return new qa(p)},qa.prototype.evaluate=function(e){return new Lr(this.sections.map(function(r){var s=r.content.evaluate(e);return kr(s)===ci?new os("",s,null,null,null):new os(_u(s),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null)}))},qa.prototype.eachChild=function(e){for(var r=0,s=this.sections;r<s.length;r+=1){var p=s[r];e(p.content),p.scale&&e(p.scale),p.font&&e(p.font),p.textColor&&e(p.textColor)}},qa.prototype.outputDefined=function(){return!1},qa.prototype.serialize=function(){for(var e=["format"],r=0,s=this.sections;r<s.length;r+=1){var p=s[r];e.push(p.content.serialize());var v={};p.scale&&(v["font-scale"]=p.scale.serialize()),p.font&&(v["text-font"]=p.font.serialize()),p.textColor&&(v["text-color"]=p.textColor.serialize()),e.push(v)}return e};var ma=function(e){this.type=ci,this.input=e};ma.parse=function(e,r){if(e.length!==2)return r.error("Expected two arguments.");var s=r.parse(e[1],1,ke);return s?new ma(s):r.error("No image name provided.")},ma.prototype.evaluate=function(e){var r=this.input.evaluate(e),s=Ro.fromString(r);return s&&e.availableImages&&(s.available=e.availableImages.indexOf(r)>-1),s},ma.prototype.eachChild=function(e){e(this.input)},ma.prototype.outputDefined=function(){return!1},ma.prototype.serialize=function(){return["image",this.input.serialize()]};var ql={"to-boolean":Ne,"to-color":je,"to-number":oe,"to-string":ke},C=function(e,r){this.type=e,this.args=r};C.parse=function(e,r){if(e.length<2)return r.error("Expected at least one argument.");var s=e[0];if((s==="to-boolean"||s==="to-string")&&e.length!==2)return r.error("Expected one argument.");for(var p=ql[s],v=[],_=1;_<e.length;_++){var A=r.parse(e[_],_,Ze);if(!A)return null;v.push(A)}return new C(p,v)},C.prototype.evaluate=function(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){for(var r,s,p=0,v=this.args;p<v.length;p+=1){if(s=null,(r=v[p].evaluate(e))instanceof ai)return r;if(typeof r=="string"){var _=e.parseColor(r);if(_)return _}else if(Array.isArray(r)&&!(s=r.length<3||r.length>4?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":Pc(r[0],r[1],r[2],r[3])))return new ai(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Wr(s||"Could not parse color from value '"+(typeof r=="string"?r:String(JSON.stringify(r)))+"'")}if(this.type.kind==="number"){for(var A=null,S=0,D=this.args;S<D.length;S+=1){if((A=D[S].evaluate(e))===null)return 0;var B=Number(A);if(!isNaN(B))return B}throw new Wr("Could not convert "+JSON.stringify(A)+" to number.")}return this.type.kind==="formatted"?Lr.fromString(_u(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Ro.fromString(_u(this.args[0].evaluate(e))):_u(this.args[0].evaluate(e))},C.prototype.eachChild=function(e){this.args.forEach(e)},C.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},C.prototype.serialize=function(){if(this.type.kind==="formatted")return new qa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ma(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(r){e.push(r.serialize())}),e};var R=["Unknown","Point","LineString","Polygon"],Y=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Y.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Y.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?R[this.feature.type]:this.feature.type:null},Y.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Y.prototype.canonicalID=function(){return this.canonical},Y.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Y.prototype.parseColor=function(e){var r=this._parseColorCache[e];return r||(r=this._parseColorCache[e]=ai.parse(e)),r};var mt=function(e,r,s,p){this.name=e,this.type=r,this._evaluate=s,this.args=p};mt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},mt.prototype.eachChild=function(e){this.args.forEach(e)},mt.prototype.outputDefined=function(){return!1},mt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))},mt.parse=function(e,r){var s,p=e[0],v=mt.definitions[p];if(!v)return r.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0);for(var _=Array.isArray(v)?v[0]:v.type,A=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,S=A.filter(function(In){var Qe=In[0];return!Array.isArray(Qe)||Qe.length===e.length-1}),D=null,B=0,N=S;B<N.length;B+=1){var V=N[B],Z=V[0],J=V[1];D=new dl(r.registry,r.path,null,r.scope);for(var ct=[],pt=!1,It=1;It<e.length;It++){var _t=e[It],Vt=Array.isArray(Z)?Z[It-1]:Z.type,Yt=D.parse(_t,1+ct.length,Vt);if(!Yt){pt=!0;break}ct.push(Yt)}if(!pt)if(Array.isArray(Z)&&Z.length!==ct.length)D.error("Expected "+Z.length+" arguments, but found "+ct.length+" instead.");else{for(var Jt=0;Jt<ct.length;Jt++){var ee=Array.isArray(Z)?Z[Jt]:Z.type,fe=ct[Jt];D.concat(Jt+1).checkSubtype(ee,fe.type)}if(D.errors.length===0)return new mt(p,_,J,ct)}}if(S.length===1)(s=r.errors).push.apply(s,D.errors);else{for(var Me=(S.length?S:A).map(function(In){var Qe;return Qe=In[0],Array.isArray(Qe)?"("+Qe.map(gi).join(", ")+")":"("+gi(Qe.type)+"...)"}).join(" | "),Be=[],yn=1;yn<e.length;yn++){var We=r.parse(e[yn],1+Be.length);if(!We)return null;Be.push(gi(We.type))}r.error("Expected arguments of type "+Me+", but found ("+Be.join(", ")+") instead.")}return null},mt.register=function(e,r){for(var s in mt.definitions=r,r)e[s]=mt};var Tt=function(e,r,s){this.type=_i,this.locale=s,this.caseSensitive=e,this.diacriticSensitive=r};function Pt(e,r){e[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[0]),e[3]=Math.max(e[3],r[1])}function Ht(e,r){return!(e[0]<=r[0]||e[2]>=r[2]||e[1]<=r[1]||e[3]>=r[3])}function Pe(e,r){var s=(180+e[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,v=Math.pow(2,r.z);return[Math.round(s*v*8192),Math.round(p*v*8192)]}function Fe(e,r,s){return r[1]>e[1]!=s[1]>e[1]&&e[0]<(s[0]-r[0])*(e[1]-r[1])/(s[1]-r[1])+r[0]}function en(e,r){for(var s,p,v,_,A,S,D,B=!1,N=0,V=r.length;N<V;N++)for(var Z=r[N],J=0,ct=Z.length;J<ct-1;J++){if((_=(s=e)[0]-(p=Z[J])[0])*(D=s[1]-(v=Z[J+1])[1])-(S=s[0]-v[0])*(A=s[1]-p[1])==0&&_*S<=0&&A*D<=0)return!1;Fe(e,Z[J],Z[J+1])&&(B=!B)}return B}function an(e,r){for(var s=0;s<r.length;s++)if(en(e,r[s]))return!0;return!1}function Ge(e,r,s,p){var v=p[0]-s[0],_=p[1]-s[1],A=(e[0]-s[0])*_-v*(e[1]-s[1]),S=(r[0]-s[0])*_-v*(r[1]-s[1]);return A>0&&S<0||A<0&&S>0}function $n(e,r,s){for(var p=0,v=s;p<v.length;p+=1)for(var _=v[p],A=0;A<_.length-1;++A)if((V=[(N=_[A+1])[0]-(B=_[A])[0],N[1]-B[1]])[0]*(Z=[(D=r)[0]-(S=e)[0],D[1]-S[1]])[1]-V[1]*Z[0]!=0&&Ge(S,D,B,N)&&Ge(B,N,S,D))return!0;var S,D,B,N,V,Z;return!1}function Nr(e,r){for(var s=0;s<e.length;++s)if(!en(e[s],r))return!1;for(var p=0;p<e.length-1;++p)if($n(e[p],e[p+1],r))return!1;return!0}function si(e,r){for(var s=0;s<r.length;s++)if(Nr(e,r[s]))return!0;return!1}function wr(e,r,s){for(var p=[],v=0;v<e.length;v++){for(var _=[],A=0;A<e[v].length;A++){var S=Pe(e[v][A],s);Pt(r,S),_.push(S)}p.push(_)}return p}function xe(e,r,s){for(var p=[],v=0;v<e.length;v++){var _=wr(e[v],r,s);p.push(_)}return p}function An(e,r,s,p){if(e[0]<s[0]||e[0]>s[2]){var v=.5*p,_=e[0]-s[0]>v?-p:s[0]-e[0]>v?p:0;_===0&&(_=e[0]-s[2]>v?-p:s[2]-e[0]>v?p:0),e[0]+=_}Pt(r,e)}function or(e,r,s,p){for(var v=8192*Math.pow(2,p.z),_=[8192*p.x,8192*p.y],A=[],S=0,D=e;S<D.length;S+=1)for(var B=0,N=D[S];B<N.length;B+=1){var V=N[B],Z=[V.x+_[0],V.y+_[1]];An(Z,r,s,v),A.push(Z)}return A}function eo(e,r,s,p){for(var v,_=8192*Math.pow(2,p.z),A=[8192*p.x,8192*p.y],S=[],D=0,B=e;D<B.length;D+=1){for(var N=[],V=0,Z=B[D];V<Z.length;V+=1){var J=Z[V],ct=[J.x+A[0],J.y+A[1]];Pt(r,ct),N.push(ct)}S.push(N)}if(r[2]-r[0]<=_/2){(v=r)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(var pt=0,It=S;pt<It.length;pt+=1)for(var _t=0,Vt=It[pt];_t<Vt.length;_t+=1)An(Vt[_t],r,s,_)}return S}Tt.parse=function(e,r){if(e.length!==2)return r.error("Expected one argument.");var s=e[1];if(typeof s!="object"||Array.isArray(s))return r.error("Collator options argument must be an object.");var p=r.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,Ne);if(!p)return null;var v=r.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,Ne);if(!v)return null;var _=null;return s.locale&&!(_=r.parse(s.locale,1,ke))?null:new Tt(p,v,_)},Tt.prototype.evaluate=function(e){return new So(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},Tt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},Tt.prototype.outputDefined=function(){return!1},Tt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Qi=function(e,r){this.type=Ne,this.geojson=e,this.geometries=r};function ws(e){if(e instanceof mt&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Qi)return!1;var r=!0;return e.eachChild(function(s){r&&!ws(s)&&(r=!1)}),r}function pl(e){if(e instanceof mt&&e.name==="feature-state")return!1;var r=!0;return e.eachChild(function(s){r&&!pl(s)&&(r=!1)}),r}function er(e,r){if(e instanceof mt&&r.indexOf(e.name)>=0)return!1;var s=!0;return e.eachChild(function(p){s&&!er(p,r)&&(s=!1)}),s}Qi.parse=function(e,r){if(e.length!==2)return r.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(yu(e[1])){var s=e[1];if(s.type==="FeatureCollection")for(var p=0;p<s.features.length;++p){var v=s.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Qi(s,s.features[p].geometry)}else if(s.type==="Feature"){var _=s.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Qi(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new Qi(s,s)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Qi.prototype.evaluate=function(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(r,s){var p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=r.canonicalID();if(s.type==="Polygon"){var A=wr(s.coordinates,v,_),S=or(r.geometry(),p,v,_);if(!Ht(p,v))return!1;for(var D=0,B=S;D<B.length;D+=1)if(!en(B[D],A))return!1}if(s.type==="MultiPolygon"){var N=xe(s.coordinates,v,_),V=or(r.geometry(),p,v,_);if(!Ht(p,v))return!1;for(var Z=0,J=V;Z<J.length;Z+=1)if(!an(J[Z],N))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(r,s){var p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=r.canonicalID();if(s.type==="Polygon"){var A=wr(s.coordinates,v,_),S=eo(r.geometry(),p,v,_);if(!Ht(p,v))return!1;for(var D=0,B=S;D<B.length;D+=1)if(!Nr(B[D],A))return!1}if(s.type==="MultiPolygon"){var N=xe(s.coordinates,v,_),V=eo(r.geometry(),p,v,_);if(!Ht(p,v))return!1;for(var Z=0,J=V;Z<J.length;Z+=1)if(!si(J[Z],N))return!1}return!0}(e,this.geometries)}return!1},Qi.prototype.eachChild=function(){},Qi.prototype.outputDefined=function(){return!0},Qi.prototype.serialize=function(){return["within",this.geojson]};var Ws=function(e,r){this.type=r.type,this.name=e,this.boundExpression=r};Ws.parse=function(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");var s=e[1];return r.scope.has(s)?new Ws(s,r.scope.get(s)):r.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Ws.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Ws.prototype.eachChild=function(){},Ws.prototype.outputDefined=function(){return!1},Ws.prototype.serialize=function(){return["var",this.name]};var dl=function(e,r,s,p,v){r===void 0&&(r=[]),p===void 0&&(p=new sn),v===void 0&&(v=[]),this.registry=e,this.path=r,this.key=r.map(function(_){return"["+_+"]"}).join(""),this.scope=p,this.errors=v,this.expectedType=s};function Ui(e,r){for(var s,p=e.length-1,v=0,_=p,A=0;v<=_;)if((s=e[A=Math.floor((v+_)/2)])<=r){if(A===p||r<e[A+1])return A;v=A+1}else{if(!(s>r))throw new Wr("Input is not a number.");_=A-1}return 0}dl.prototype.parse=function(e,r,s,p,v){return v===void 0&&(v={}),r?this.concat(r,s,p)._parse(e,v):this._parse(e,v)},dl.prototype._parse=function(e,r){function s(B,N,V){return V==="assert"?new gr(N,[B]):V==="coerce"?new C(N,[B]):B}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var p=e[0];if(typeof p!="string")return this.error("Expression name must be a string, but found "+typeof p+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var v=this.registry[p];if(v){var _=v.parse(e,this);if(!_)return null;if(this.expectedType){var A=this.expectedType,S=_.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||S.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(A,S))return null}else _=s(_,A,r.typeAnnotation||"coerce");else _=s(_,A,r.typeAnnotation||"assert")}if(!(_ instanceof yo)&&_.type.kind!=="resolvedImage"&&function B(N){if(N instanceof Ws)return B(N.boundExpression);if(N instanceof mt&&N.name==="error"||N instanceof Tt||N instanceof Qi)return!1;var V=N instanceof C||N instanceof gr,Z=!0;return N.eachChild(function(J){Z=V?Z&&B(J):Z&&J instanceof yo}),!!Z&&ws(N)&&er(N,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(_)){var D=new Y;try{_=new yo(_.type,_.evaluate(D))}catch(B){return this.error(B.message),null}}return _}return this.error('Unknown expression "'+p+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},dl.prototype.concat=function(e,r,s){var p=typeof e=="number"?this.path.concat(e):this.path,v=s?this.scope.concat(s):this.scope;return new dl(this.registry,p,r||null,v,this.errors)},dl.prototype.error=function(e){for(var r=[],s=arguments.length-1;s-- >0;)r[s]=arguments[s+1];var p=""+this.key+r.map(function(v){return"["+v+"]"}).join("");this.errors.push(new ye(p,e))},dl.prototype.checkSubtype=function(e,r){var s=Hn(e,r);return s&&this.error(s),s};var Ci=function(e,r,s){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(var p=0,v=s;p<v.length;p+=1){var _=v[p],A=_[1];this.labels.push(_[0]),this.outputs.push(A)}};function Zr(e,r,s){return e*(1-s)+r*s}Ci.parse=function(e,r){if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");var s=r.parse(e[1],1,oe);if(!s)return null;var p=[],v=null;r.expectedType&&r.expectedType.kind!=="value"&&(v=r.expectedType);for(var _=1;_<e.length;_+=2){var A=_===1?-1/0:e[_],S=e[_+1],D=_,B=_+1;if(typeof A!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(p.length&&p[p.length-1][0]>=A)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);var N=r.parse(S,B,v);if(!N)return null;v=v||N.type,p.push([A,N])}return new Ci(v,s,p)},Ci.prototype.evaluate=function(e){var r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(e);var p=this.input.evaluate(e);if(p<=r[0])return s[0].evaluate(e);var v=r.length;return p>=r[v-1]?s[v-1].evaluate(e):s[Ui(r,p)].evaluate(e)},Ci.prototype.eachChild=function(e){e(this.input);for(var r=0,s=this.outputs;r<s.length;r+=1)e(s[r])},Ci.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},Ci.prototype.serialize=function(){for(var e=["step",this.input.serialize()],r=0;r<this.labels.length;r++)r>0&&e.push(this.labels[r]),e.push(this.outputs[r].serialize());return e};var Wl=Object.freeze({__proto__:null,number:Zr,color:function(e,r,s){return new ai(Zr(e.r,r.r,s),Zr(e.g,r.g,s),Zr(e.b,r.b,s),Zr(e.a,r.a,s))},array:function(e,r,s){return e.map(function(p,v){return Zr(p,r[v],s)})}}),Lc=6/29*3*(6/29),lf=Math.PI/180,uf=180/Math.PI;function dh(e){return e>.008856451679035631?Math.pow(e,1/3):e/Lc+4/29}function kc(e){return e>6/29?e*e*e:Lc*(e-4/29)}function mh(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function lo(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ec(e){var r=lo(e.r),s=lo(e.g),p=lo(e.b),v=dh((.4124564*r+.3575761*s+.1804375*p)/.95047),_=dh((.2126729*r+.7151522*s+.072175*p)/1);return{l:116*_-16,a:500*(v-_),b:200*(_-dh((.0193339*r+.119192*s+.9503041*p)/1.08883)),alpha:e.a}}function Zs(e){var r=(e.l+16)/116,s=isNaN(e.a)?r:r+e.a/500,p=isNaN(e.b)?r:r-e.b/200;return r=1*kc(r),s=.95047*kc(s),p=1.08883*kc(p),new ai(mh(3.2404542*s-1.5371385*r-.4985314*p),mh(-.969266*s+1.8760108*r+.041556*p),mh(.0556434*s-.2040259*r+1.0572252*p),e.alpha)}function cf(e,r,s){var p=r-e;return e+s*(p>180||p<-180?p-360*Math.round(p/360):p)}var Zl={forward:ec,reverse:Zs,interpolate:function(e,r,s){return{l:Zr(e.l,r.l,s),a:Zr(e.a,r.a,s),b:Zr(e.b,r.b,s),alpha:Zr(e.alpha,r.alpha,s)}}},_o={forward:function(e){var r=ec(e),s=r.l,p=r.a,v=r.b,_=Math.atan2(v,p)*uf;return{h:_<0?_+360:_,c:Math.sqrt(p*p+v*v),l:s,alpha:e.a}},reverse:function(e){var r=e.h*lf,s=e.c;return Zs({l:e.l,a:Math.cos(r)*s,b:Math.sin(r)*s,alpha:e.alpha})},interpolate:function(e,r,s){return{h:cf(e.h,r.h,s),c:Zr(e.c,r.c,s),l:Zr(e.l,r.l,s),alpha:Zr(e.alpha,r.alpha,s)}}},nc=Object.freeze({__proto__:null,lab:Zl,hcl:_o}),uo=function(e,r,s,p,v){this.type=e,this.operator=r,this.interpolation=s,this.input=p,this.labels=[],this.outputs=[];for(var _=0,A=v;_<A.length;_+=1){var S=A[_],D=S[1];this.labels.push(S[0]),this.outputs.push(D)}};function ka(e,r,s,p){var v=p-s,_=e-s;return v===0?0:r===1?_/v:(Math.pow(r,_)-1)/(Math.pow(r,v)-1)}uo.interpolationFactor=function(e,r,s,p){var v=0;if(e.name==="exponential")v=ka(r,e.base,s,p);else if(e.name==="linear")v=ka(r,1,s,p);else if(e.name==="cubic-bezier"){var _=e.controlPoints;v=new x(_[0],_[1],_[2],_[3]).solve(ka(r,1,s,p))}return v},uo.parse=function(e,r){var s=e[0],p=e[1],v=e[2],_=e.slice(3);if(!Array.isArray(p)||p.length===0)return r.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){var A=p[1];if(typeof A!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:A}}else{if(p[0]!=="cubic-bezier")return r.error("Unknown interpolation type "+String(p[0]),1,0);var S=p.slice(1);if(S.length!==4||S.some(function(It){return typeof It!="number"||It<0||It>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:S}}if(e.length-1<4)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(v=r.parse(v,2,oe)))return null;var D=[],B=null;s==="interpolate-hcl"||s==="interpolate-lab"?B=je:r.expectedType&&r.expectedType.kind!=="value"&&(B=r.expectedType);for(var N=0;N<_.length;N+=2){var V=_[N],Z=_[N+1],J=N+3,ct=N+4;if(typeof V!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(D.length&&D[D.length-1][0]>=V)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);var pt=r.parse(Z,ct,B);if(!pt)return null;B=B||pt.type,D.push([V,pt])}return B.kind==="number"||B.kind==="color"||B.kind==="array"&&B.itemType.kind==="number"&&typeof B.N=="number"?new uo(B,s,p,v,D):r.error("Type "+gi(B)+" is not interpolatable.")},uo.prototype.evaluate=function(e){var r=this.labels,s=this.outputs;if(r.length===1)return s[0].evaluate(e);var p=this.input.evaluate(e);if(p<=r[0])return s[0].evaluate(e);var v=r.length;if(p>=r[v-1])return s[v-1].evaluate(e);var _=Ui(r,p),A=uo.interpolationFactor(this.interpolation,p,r[_],r[_+1]),S=s[_].evaluate(e),D=s[_+1].evaluate(e);return this.operator==="interpolate"?Wl[this.type.kind.toLowerCase()](S,D,A):this.operator==="interpolate-hcl"?_o.reverse(_o.interpolate(_o.forward(S),_o.forward(D),A)):Zl.reverse(Zl.interpolate(Zl.forward(S),Zl.forward(D),A))},uo.prototype.eachChild=function(e){e(this.input);for(var r=0,s=this.outputs;r<s.length;r+=1)e(s[r])},uo.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})},uo.prototype.serialize=function(){var e;e=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var r=[this.operator,e,this.input.serialize()],s=0;s<this.labels.length;s++)r.push(this.labels[s],this.outputs[s].serialize());return r};var Cs=function(e,r){this.type=e,this.args=r};Cs.parse=function(e,r){if(e.length<2)return r.error("Expectected at least one argument.");var s=null,p=r.expectedType;p&&p.kind!=="value"&&(s=p);for(var v=[],_=0,A=e.slice(1);_<A.length;_+=1){var S=r.parse(A[_],1+v.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,v.push(S)}var D=p&&v.some(function(B){return Hn(p,B.type)});return new Cs(D?Ze:s,v)},Cs.prototype.evaluate=function(e){for(var r,s=null,p=0,v=0,_=this.args;v<_.length&&(p++,(s=_[v].evaluate(e))&&s instanceof Ro&&!s.available&&(r||(r=s.name),s=null,p===this.args.length&&(s=r)),s===null);v+=1);return s},Cs.prototype.eachChild=function(e){this.args.forEach(e)},Cs.prototype.outputDefined=function(){return this.args.every(function(e){return e.outputDefined()})},Cs.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Is=function(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r};Is.prototype.evaluate=function(e){return this.result.evaluate(e)},Is.prototype.eachChild=function(e){for(var r=0,s=this.bindings;r<s.length;r+=1)e(s[r][1]);e(this.result)},Is.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var s=[],p=1;p<e.length-1;p+=2){var v=e[p];if(typeof v!="string")return r.error("Expected string, but found "+typeof v+" instead.",p);if(/[^a-zA-Z0-9_]/.test(v))return r.error("Variable names must contain only alphanumeric characters or '_'.",p);var _=r.parse(e[p+1],p+1);if(!_)return null;s.push([v,_])}var A=r.parse(e[e.length-1],e.length-1,r.expectedType,s);return A?new Is(s,A):null},Is.prototype.outputDefined=function(){return this.result.outputDefined()},Is.prototype.serialize=function(){for(var e=["let"],r=0,s=this.bindings;r<s.length;r+=1){var p=s[r];e.push(p[0],p[1].serialize())}return e.push(this.result.serialize()),e};var ml=function(e,r,s){this.type=e,this.index=r,this.input=s};ml.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=r.parse(e[1],1,oe),p=r.parse(e[2],2,mi(r.expectedType||Ze));return s&&p?new ml(p.type.itemType,s,p):null},ml.prototype.evaluate=function(e){var r=this.index.evaluate(e),s=this.input.evaluate(e);if(r<0)throw new Wr("Array index out of bounds: "+r+" < 0.");if(r>=s.length)throw new Wr("Array index out of bounds: "+r+" > "+(s.length-1)+".");if(r!==Math.floor(r))throw new Wr("Array index must be an integer, but found "+r+" instead.");return s[r]},ml.prototype.eachChild=function(e){e(this.index),e(this.input)},ml.prototype.outputDefined=function(){return!1},ml.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var co=function(e,r){this.type=Ne,this.needle=e,this.haystack=r};co.parse=function(e,r){if(e.length!==3)return r.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var s=r.parse(e[1],1,Ze),p=r.parse(e[2],2,Ze);return s&&p?Pr(s.type,[Ne,ke,oe,on,Ze])?new co(s,p):r.error("Expected first argument to be of type boolean, string, number or null, but found "+gi(s.type)+" instead"):null},co.prototype.evaluate=function(e){var r=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!s)return!1;if(!Wi(r,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+gi(kr(r))+" instead.");if(!Wi(s,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+gi(kr(s))+" instead.");return s.indexOf(r)>=0},co.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},co.prototype.outputDefined=function(){return!0},co.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var as=function(e,r,s){this.type=oe,this.needle=e,this.haystack=r,this.fromIndex=s};as.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var s=r.parse(e[1],1,Ze),p=r.parse(e[2],2,Ze);if(!s||!p)return null;if(!Pr(s.type,[Ne,ke,oe,on,Ze]))return r.error("Expected first argument to be of type boolean, string, number or null, but found "+gi(s.type)+" instead");if(e.length===4){var v=r.parse(e[3],3,oe);return v?new as(s,p,v):null}return new as(s,p)},as.prototype.evaluate=function(e){var r=this.needle.evaluate(e),s=this.haystack.evaluate(e);if(!Wi(r,["boolean","string","number","null"]))throw new Wr("Expected first argument to be of type boolean, string, number or null, but found "+gi(kr(r))+" instead.");if(!Wi(s,["string","array"]))throw new Wr("Expected second argument to be of type array or string, but found "+gi(kr(s))+" instead.");if(this.fromIndex){var p=this.fromIndex.evaluate(e);return s.indexOf(r,p)}return s.indexOf(r)},as.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},as.prototype.outputDefined=function(){return!1},as.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var xo=function(e,r,s,p,v,_){this.inputType=e,this.type=r,this.input=s,this.cases=p,this.outputs=v,this.otherwise=_};xo.parse=function(e,r){if(e.length<5)return r.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return r.error("Expected an even number of arguments.");var s,p;r.expectedType&&r.expectedType.kind!=="value"&&(p=r.expectedType);for(var v={},_=[],A=2;A<e.length-1;A+=2){var S=e[A],D=e[A+1];Array.isArray(S)||(S=[S]);var B=r.concat(A);if(S.length===0)return B.error("Expected at least one branch label.");for(var N=0,V=S;N<V.length;N+=1){var Z=V[N];if(typeof Z!="number"&&typeof Z!="string")return B.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return B.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Z=="number"&&Math.floor(Z)!==Z)return B.error("Numeric branch labels must be integer values.");if(s){if(B.checkSubtype(s,kr(Z)))return null}else s=kr(Z);if(v[String(Z)]!==void 0)return B.error("Branch labels must be unique.");v[String(Z)]=_.length}var J=r.parse(D,A,p);if(!J)return null;p=p||J.type,_.push(J)}var ct=r.parse(e[1],1,Ze);if(!ct)return null;var pt=r.parse(e[e.length-1],e.length-1,p);return pt?ct.type.kind!=="value"&&r.concat(1).checkSubtype(s,ct.type)?null:new xo(s,p,ct,v,_,pt):null},xo.prototype.evaluate=function(e){var r=this.input.evaluate(e);return(kr(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)},xo.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},xo.prototype.outputDefined=function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()},xo.prototype.serialize=function(){for(var e=this,r=["match",this.input.serialize()],s=[],p={},v=0,_=Object.keys(this.cases).sort();v<_.length;v+=1){var A=_[v];(V=p[this.cases[A]])===void 0?(p[this.cases[A]]=s.length,s.push([this.cases[A],[A]])):s[V][1].push(A)}for(var S=function(J){return e.inputType.kind==="number"?Number(J):J},D=0,B=s;D<B.length;D+=1){var N=B[D],V=N[0],Z=N[1];r.push(Z.length===1?S(Z[0]):Z.map(S)),r.push(this.outputs[outputIndex$1].serialize())}return r.push(this.otherwise.serialize()),r};var gl=function(e,r,s){this.type=e,this.branches=r,this.otherwise=s};gl.parse=function(e,r){if(e.length<4)return r.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return r.error("Expected an odd number of arguments.");var s;r.expectedType&&r.expectedType.kind!=="value"&&(s=r.expectedType);for(var p=[],v=1;v<e.length-1;v+=2){var _=r.parse(e[v],v,Ne);if(!_)return null;var A=r.parse(e[v+1],v+1,s);if(!A)return null;p.push([_,A]),s=s||A.type}var S=r.parse(e[e.length-1],e.length-1,s);return S?new gl(s,p,S):null},gl.prototype.evaluate=function(e){for(var r=0,s=this.branches;r<s.length;r+=1){var p=s[r],v=p[1];if(p[0].evaluate(e))return v.evaluate(e)}return this.otherwise.evaluate(e)},gl.prototype.eachChild=function(e){for(var r=0,s=this.branches;r<s.length;r+=1){var p=s[r],v=p[1];e(p[0]),e(v)}e(this.otherwise)},gl.prototype.outputDefined=function(){return this.branches.every(function(e){return e[1].outputDefined()})&&this.otherwise.outputDefined()},gl.prototype.serialize=function(){var e=["case"];return this.eachChild(function(r){e.push(r.serialize())}),e};var Ys=function(e,r,s,p){this.type=e,this.input=r,this.beginIndex=s,this.endIndex=p};function $o(e,r){return e==="=="||e==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function xu(e,r,s,p){return p.compare(r,s)===0}function $i(e,r,s){var p=e!=="=="&&e!=="!=";return function(){function v(_,A,S){this.type=Ne,this.lhs=_,this.rhs=A,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||A.type.kind==="value"}return v.parse=function(_,A){if(_.length!==3&&_.length!==4)return A.error("Expected two or three arguments.");var S=_[0],D=A.parse(_[1],1,Ze);if(!D)return null;if(!$o(S,D.type))return A.concat(1).error('"'+S+`" comparisons are not supported for type '`+gi(D.type)+"'.");var B=A.parse(_[2],2,Ze);if(!B)return null;if(!$o(S,B.type))return A.concat(2).error('"'+S+`" comparisons are not supported for type '`+gi(B.type)+"'.");if(D.type.kind!==B.type.kind&&D.type.kind!=="value"&&B.type.kind!=="value")return A.error("Cannot compare types '"+gi(D.type)+"' and '"+gi(B.type)+"'.");p&&(D.type.kind==="value"&&B.type.kind!=="value"?D=new gr(B.type,[D]):D.type.kind!=="value"&&B.type.kind==="value"&&(B=new gr(D.type,[B])));var N=null;if(_.length===4){if(D.type.kind!=="string"&&B.type.kind!=="string"&&D.type.kind!=="value"&&B.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(!(N=A.parse(_[3],3,_i)))return null}return new v(D,B,N)},v.prototype.evaluate=function(_){var A=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(p&&this.hasUntypedArgument){var D=kr(A),B=kr(S);if(D.kind!==B.kind||D.kind!=="string"&&D.kind!=="number")throw new Wr('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+D.kind+", "+B.kind+") instead.")}if(this.collator&&!p&&this.hasUntypedArgument){var N=kr(A),V=kr(S);if(N.kind!=="string"||V.kind!=="string")return r(_,A,S)}return this.collator?s(_,A,S,this.collator.evaluate(_)):r(_,A,S)},v.prototype.eachChild=function(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)},v.prototype.outputDefined=function(){return!0},v.prototype.serialize=function(){var _=[e];return this.eachChild(function(A){_.push(A.serialize())}),_},v}()}Ys.parse=function(e,r){if(e.length<=2||e.length>=5)return r.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var s=r.parse(e[1],1,Ze),p=r.parse(e[2],2,oe);if(!s||!p)return null;if(!Pr(s.type,[mi(Ze),ke,Ze]))return r.error("Expected first argument to be of type array or string, but found "+gi(s.type)+" instead");if(e.length===4){var v=r.parse(e[3],3,oe);return v?new Ys(s.type,s,p,v):null}return new Ys(s.type,s,p)},Ys.prototype.evaluate=function(e){var r=this.input.evaluate(e),s=this.beginIndex.evaluate(e);if(!Wi(r,["string","array"]))throw new Wr("Expected first argument to be of type array or string, but found "+gi(kr(r))+" instead.");if(this.endIndex){var p=this.endIndex.evaluate(e);return r.slice(s,p)}return r.slice(s)},Ys.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},Ys.prototype.outputDefined=function(){return!1},Ys.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Vr=$i("==",function(e,r,s){return r===s},xu),Da=$i("!=",function(e,r,s){return r!==s},function(e,r,s,p){return!xu(0,r,s,p)}),vl=$i("<",function(e,r,s){return r<s},function(e,r,s,p){return p.compare(r,s)<0}),Dc=$i(">",function(e,r,s){return r>s},function(e,r,s,p){return p.compare(r,s)>0}),bu=$i("<=",function(e,r,s){return r<=s},function(e,r,s,p){return p.compare(r,s)<=0}),Rc=$i(">=",function(e,r,s){return r>=s},function(e,r,s,p){return p.compare(r,s)>=0}),ss=function(e,r,s,p,v){this.type=ke,this.number=e,this.locale=r,this.currency=s,this.minFractionDigits=p,this.maxFractionDigits=v};ss.parse=function(e,r){if(e.length!==3)return r.error("Expected two arguments.");var s=r.parse(e[1],1,oe);if(!s)return null;var p=e[2];if(typeof p!="object"||Array.isArray(p))return r.error("NumberFormat options argument must be an object.");var v=null;if(p.locale&&!(v=r.parse(p.locale,1,ke)))return null;var _=null;if(p.currency&&!(_=r.parse(p.currency,1,ke)))return null;var A=null;if(p["min-fraction-digits"]&&!(A=r.parse(p["min-fraction-digits"],1,oe)))return null;var S=null;return p["max-fraction-digits"]&&!(S=r.parse(p["max-fraction-digits"],1,oe))?null:new ss(s,v,_,A,S)},ss.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},ss.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},ss.prototype.outputDefined=function(){return!1},ss.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var yl=function(e){this.type=oe,this.input=e};yl.parse=function(e,r){if(e.length!==2)return r.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var s=r.parse(e[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?r.error("Expected argument of type string or array, but found "+gi(s.type)+" instead."):new yl(s):null},yl.prototype.evaluate=function(e){var r=this.input.evaluate(e);if(typeof r=="string"||Array.isArray(r))return r.length;throw new Wr("Expected value to be of type string or array, but found "+gi(kr(r))+" instead.")},yl.prototype.eachChild=function(e){e(this.input)},yl.prototype.outputDefined=function(){return!1},yl.prototype.serialize=function(){var e=["length"];return this.eachChild(function(r){e.push(r.serialize())}),e};var _l={"==":Vr,"!=":Da,">":Dc,"<":vl,">=":Rc,"<=":bu,array:gr,at:ml,boolean:gr,case:gl,coalesce:Cs,collator:Tt,format:qa,image:ma,in:co,"index-of":as,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:yl,let:Is,literal:yo,match:xo,number:gr,"number-format":ss,object:gr,slice:Ys,step:Ci,string:gr,"to-boolean":C,"to-color":C,"to-number":C,"to-string":C,var:Ws,within:Qi};function ic(e,r){var s=r[0],p=r[1],v=r[2],_=r[3];s=s.evaluate(e),p=p.evaluate(e),v=v.evaluate(e);var A=_?_.evaluate(e):1,S=Pc(s,p,v,A);if(S)throw new Wr(S);return new ai(s/255*A,p/255*A,v/255*A,A)}function Yl(e,r){return e in r}function gh(e,r){var s=r[e];return s===void 0?null:s}function Xs(e){return{type:e}}function rc(e){return{result:"success",value:e}}function Jo(e){return{result:"error",value:e}}function zo(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Ks(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function xl(e){return!!e.expression&&e.expression.interpolated}function Ri(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Au(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function zc(e){return e}function ls(e,r,s){return e!==void 0?e:r!==void 0?r:s!==void 0?s:void 0}function ta(e,r,s,p,v){return ls(typeof s===v?p[s]:void 0,e.default,r.default)}function Oc(e,r,s){if(Ri(s)!=="number")return ls(e.default,r.default);var p=e.stops.length;if(p===1||s<=e.stops[0][0])return e.stops[0][1];if(s>=e.stops[p-1][0])return e.stops[p-1][1];var v=Ui(e.stops.map(function(_){return _[0]}),s);return e.stops[v][1]}function wu(e,r,s){var p=e.base!==void 0?e.base:1;if(Ri(s)!=="number")return ls(e.default,r.default);var v=e.stops.length;if(v===1||s<=e.stops[0][0])return e.stops[0][1];if(s>=e.stops[v-1][0])return e.stops[v-1][1];var _=Ui(e.stops.map(function(V){return V[0]}),s),A=function(V,Z,J,ct){var pt=ct-J,It=V-J;return pt===0?0:Z===1?It/pt:(Math.pow(Z,It)-1)/(Math.pow(Z,pt)-1)}(s,p,e.stops[_][0],e.stops[_+1][0]),S=e.stops[_][1],D=e.stops[_+1][1],B=Wl[r.type]||zc;if(e.colorSpace&&e.colorSpace!=="rgb"){var N=nc[e.colorSpace];B=function(V,Z){return N.reverse(N.interpolate(N.forward(V),N.forward(Z),A))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var V=[],Z=arguments.length;Z--;)V[Z]=arguments[Z];var J=S.evaluate.apply(void 0,V),ct=D.evaluate.apply(void 0,V);if(J!==void 0&&ct!==void 0)return B(J,ct,A)}}:B(S,D,A)}function oc(e,r,s){return r.type==="color"?s=ai.parse(s):r.type==="formatted"?s=Lr.fromString(s.toString()):r.type==="resolvedImage"?s=Ro.fromString(s.toString()):Ri(s)===r.type||r.type==="enum"&&r.values[s]||(s=void 0),ls(s,e.default,r.default)}mt.register(_l,{error:[{kind:"error"},[ke],function(e,r){throw new Wr(r[0].evaluate(e))}],typeof:[ke,[Ze],function(e,r){return gi(kr(r[0].evaluate(e)))}],"to-rgba":[mi(oe,4),[je],function(e,r){return r[0].evaluate(e).toArray()}],rgb:[je,[oe,oe,oe],ic],rgba:[je,[oe,oe,oe,oe],ic],has:{type:Ne,overloads:[[[ke],function(e,r){return Yl(r[0].evaluate(e),e.properties())}],[[ke,ei],function(e,r){var s=r[1];return Yl(r[0].evaluate(e),s.evaluate(e))}]]},get:{type:Ze,overloads:[[[ke],function(e,r){return gh(r[0].evaluate(e),e.properties())}],[[ke,ei],function(e,r){var s=r[1];return gh(r[0].evaluate(e),s.evaluate(e))}]]},"feature-state":[Ze,[ke],function(e,r){return gh(r[0].evaluate(e),e.featureState||{})}],properties:[ei,[],function(e){return e.properties()}],"geometry-type":[ke,[],function(e){return e.geometryType()}],id:[Ze,[],function(e){return e.id()}],zoom:[oe,[],function(e){return e.globals.zoom}],"heatmap-density":[oe,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[oe,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ze,[],function(e){return e.globals.accumulated===void 0?null:e.globals.accumulated}],"+":[oe,Xs(oe),function(e,r){for(var s=0,p=0,v=r;p<v.length;p+=1)s+=v[p].evaluate(e);return s}],"*":[oe,Xs(oe),function(e,r){for(var s=1,p=0,v=r;p<v.length;p+=1)s*=v[p].evaluate(e);return s}],"-":{type:oe,overloads:[[[oe,oe],function(e,r){var s=r[1];return r[0].evaluate(e)-s.evaluate(e)}],[[oe],function(e,r){return-r[0].evaluate(e)}]]},"/":[oe,[oe,oe],function(e,r){var s=r[1];return r[0].evaluate(e)/s.evaluate(e)}],"%":[oe,[oe,oe],function(e,r){var s=r[1];return r[0].evaluate(e)%s.evaluate(e)}],ln2:[oe,[],function(){return Math.LN2}],pi:[oe,[],function(){return Math.PI}],e:[oe,[],function(){return Math.E}],"^":[oe,[oe,oe],function(e,r){var s=r[1];return Math.pow(r[0].evaluate(e),s.evaluate(e))}],sqrt:[oe,[oe],function(e,r){return Math.sqrt(r[0].evaluate(e))}],log10:[oe,[oe],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN10}],ln:[oe,[oe],function(e,r){return Math.log(r[0].evaluate(e))}],log2:[oe,[oe],function(e,r){return Math.log(r[0].evaluate(e))/Math.LN2}],sin:[oe,[oe],function(e,r){return Math.sin(r[0].evaluate(e))}],cos:[oe,[oe],function(e,r){return Math.cos(r[0].evaluate(e))}],tan:[oe,[oe],function(e,r){return Math.tan(r[0].evaluate(e))}],asin:[oe,[oe],function(e,r){return Math.asin(r[0].evaluate(e))}],acos:[oe,[oe],function(e,r){return Math.acos(r[0].evaluate(e))}],atan:[oe,[oe],function(e,r){return Math.atan(r[0].evaluate(e))}],min:[oe,Xs(oe),function(e,r){return Math.min.apply(Math,r.map(function(s){return s.evaluate(e)}))}],max:[oe,Xs(oe),function(e,r){return Math.max.apply(Math,r.map(function(s){return s.evaluate(e)}))}],abs:[oe,[oe],function(e,r){return Math.abs(r[0].evaluate(e))}],round:[oe,[oe],function(e,r){var s=r[0].evaluate(e);return s<0?-Math.round(-s):Math.round(s)}],floor:[oe,[oe],function(e,r){return Math.floor(r[0].evaluate(e))}],ceil:[oe,[oe],function(e,r){return Math.ceil(r[0].evaluate(e))}],"filter-==":[Ne,[ke,Ze],function(e,r){var s=r[0],p=r[1];return e.properties()[s.value]===p.value}],"filter-id-==":[Ne,[Ze],function(e,r){var s=r[0];return e.id()===s.value}],"filter-type-==":[Ne,[ke],function(e,r){var s=r[0];return e.geometryType()===s.value}],"filter-<":[Ne,[ke,Ze],function(e,r){var s=r[0],p=r[1],v=e.properties()[s.value],_=p.value;return typeof v==typeof _&&v<_}],"filter-id-<":[Ne,[Ze],function(e,r){var s=r[0],p=e.id(),v=s.value;return typeof p==typeof v&&p<v}],"filter->":[Ne,[ke,Ze],function(e,r){var s=r[0],p=r[1],v=e.properties()[s.value],_=p.value;return typeof v==typeof _&&v>_}],"filter-id->":[Ne,[Ze],function(e,r){var s=r[0],p=e.id(),v=s.value;return typeof p==typeof v&&p>v}],"filter-<=":[Ne,[ke,Ze],function(e,r){var s=r[0],p=r[1],v=e.properties()[s.value],_=p.value;return typeof v==typeof _&&v<=_}],"filter-id-<=":[Ne,[Ze],function(e,r){var s=r[0],p=e.id(),v=s.value;return typeof p==typeof v&&p<=v}],"filter->=":[Ne,[ke,Ze],function(e,r){var s=r[0],p=r[1],v=e.properties()[s.value],_=p.value;return typeof v==typeof _&&v>=_}],"filter-id->=":[Ne,[Ze],function(e,r){var s=r[0],p=e.id(),v=s.value;return typeof p==typeof v&&p>=v}],"filter-has":[Ne,[Ze],function(e,r){return r[0].value in e.properties()}],"filter-has-id":[Ne,[],function(e){return e.id()!==null&&e.id()!==void 0}],"filter-type-in":[Ne,[mi(ke)],function(e,r){return r[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ne,[mi(Ze)],function(e,r){return r[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ne,[ke,mi(Ze)],function(e,r){var s=r[0];return r[1].value.indexOf(e.properties()[s.value])>=0}],"filter-in-large":[Ne,[ke,mi(Ze)],function(e,r){var s=r[0],p=r[1];return function(v,_,A,S){for(;A<=S;){var D=A+S>>1;if(_[D]===v)return!0;_[D]>v?S=D-1:A=D+1}return!1}(e.properties()[s.value],p.value,0,p.value.length-1)}],all:{type:Ne,overloads:[[[Ne,Ne],function(e,r){var s=r[1];return r[0].evaluate(e)&&s.evaluate(e)}],[Xs(Ne),function(e,r){for(var s=0,p=r;s<p.length;s+=1)if(!p[s].evaluate(e))return!1;return!0}]]},any:{type:Ne,overloads:[[[Ne,Ne],function(e,r){var s=r[1];return r[0].evaluate(e)||s.evaluate(e)}],[Xs(Ne),function(e,r){for(var s=0,p=r;s<p.length;s+=1)if(p[s].evaluate(e))return!0;return!1}]]},"!":[Ne,[Ne],function(e,r){return!r[0].evaluate(e)}],"is-supported-script":[Ne,[ke],function(e,r){var s=e.globals&&e.globals.isSupportedScript;return!s||s(r[0].evaluate(e))}],upcase:[ke,[ke],function(e,r){return r[0].evaluate(e).toUpperCase()}],downcase:[ke,[ke],function(e,r){return r[0].evaluate(e).toLowerCase()}],concat:[ke,Xs(Ze),function(e,r){return r.map(function(s){return _u(s.evaluate(e))}).join("")}],"resolved-locale":[ke,[_i],function(e,r){return r[0].evaluate(e).resolvedLocale()}]});var bl=function(e,r){this.expression=e,this._warningHistory={},this._evaluator=new Y,this._defaultValue=r?function(s){return s.type==="color"&&Au(s.default)?new ai(0,0,0,0):s.type==="color"?ai.parse(s.default)||null:s.default===void 0?null:s.default}(r):null,this._enumValues=r&&r.type==="enum"?r.values:null};function Cu(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in _l}function Xl(e,r){var s=new dl(_l,[],r?function(v){var _={color:je,string:ke,number:oe,enum:ke,boolean:Ne,formatted:Vi,resolvedImage:ci};return v.type==="array"?mi(_[v.value]||Ze,v.length):_[v.type]}(r):void 0),p=s.parse(e,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?rc(new bl(p,r)):Jo(s.errors)}bl.prototype.evaluateWithoutErrorHandling=function(e,r,s,p,v,_){return this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=s,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)},bl.prototype.evaluate=function(e,r,s,p,v,_){this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=s||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{var A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Wr("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Ms=function(e,r){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!pl(r.expression)};Ms.prototype.evaluateWithoutErrorHandling=function(e,r,s,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(e,r,s,p,v,_)},Ms.prototype.evaluate=function(e,r,s,p,v,_){return this._styleExpression.evaluate(e,r,s,p,v,_)};var Iu=function(e,r,s,p){this.kind=e,this.zoomStops=s,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!pl(r.expression),this.interpolationType=p};function Qs(e,r){if((e=Xl(e,r)).result==="error")return e;var s=e.value.expression,p=ws(s);if(!p&&!zo(r))return Jo([new ye("","data expressions not supported")]);var v=er(s,["zoom"]);if(!v&&!Ks(r))return Jo([new ye("","zoom expressions not supported")]);var _=function A(S){var D=null;if(S instanceof Is)D=A(S.result);else if(S instanceof Cs)for(var B=0,N=S.args;B<N.length&&!(D=A(N[B]));B+=1);else(S instanceof Ci||S instanceof uo)&&S.input instanceof mt&&S.input.name==="zoom"&&(D=S);return D instanceof ye||S.eachChild(function(V){var Z=A(V);Z instanceof ye?D=Z:!D&&Z?D=new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Z&&D!==Z&&(D=new ye("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}(s);return _||v?_ instanceof ye?Jo([_]):_ instanceof uo&&!xl(r)?Jo([new ye("",'"interpolate" expressions cannot be used with this property')]):rc(_?new Iu(p?"camera":"composite",e.value,_.labels,_ instanceof uo?_.interpolation:void 0):new Ms(p?"constant":"source",e.value)):Jo([new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Iu.prototype.evaluateWithoutErrorHandling=function(e,r,s,p,v,_){return this._styleExpression.evaluateWithoutErrorHandling(e,r,s,p,v,_)},Iu.prototype.evaluate=function(e,r,s,p,v,_){return this._styleExpression.evaluate(e,r,s,p,v,_)},Iu.prototype.interpolationFactor=function(e,r,s){return this.interpolationType?uo.interpolationFactor(this.interpolationType,e,r,s):0};var us=function(e,r){this._parameters=e,this._specification=r,ge(this,function s(p,v){var _,A,S,D=v.type==="color",B=p.stops&&typeof p.stops[0][0]=="object",N=B||!(B||p.property!==void 0),V=p.type||(xl(v)?"exponential":"interval");if(D&&((p=ge({},p)).stops&&(p.stops=p.stops.map(function(We){return[We[0],ai.parse(We[1])]})),p.default=ai.parse(p.default?p.default:v.default)),p.colorSpace&&p.colorSpace!=="rgb"&&!nc[p.colorSpace])throw new Error("Unknown color space: "+p.colorSpace);if(V==="exponential")_=wu;else if(V==="interval")_=Oc;else if(V==="categorical"){_=ta,A=Object.create(null);for(var Z=0,J=p.stops;Z<J.length;Z+=1){var ct=J[Z];A[ct[0]]=ct[1]}S=typeof p.stops[0][0]}else{if(V!=="identity")throw new Error('Unknown function type "'+V+'"');_=oc}if(B){for(var pt={},It=[],_t=0;_t<p.stops.length;_t++){var Vt=p.stops[_t],Yt=Vt[0].zoom;pt[Yt]===void 0&&(pt[Yt]={zoom:Yt,type:p.type,property:p.property,default:p.default,stops:[]},It.push(Yt)),pt[Yt].stops.push([Vt[0].value,Vt[1]])}for(var Jt=[],ee=0,fe=It;ee<fe.length;ee+=1){var Me=fe[ee];Jt.push([pt[Me].zoom,s(pt[Me],v)])}var Be={name:"linear"};return{kind:"composite",interpolationType:Be,interpolationFactor:uo.interpolationFactor.bind(void 0,Be),zoomStops:Jt.map(function(We){return We[0]}),evaluate:function(We,In){var Qe=We.zoom;return wu({stops:Jt,base:p.base},v,Qe).evaluate(Qe,In)}}}if(N){var yn=V==="exponential"?{name:"exponential",base:p.base!==void 0?p.base:1}:null;return{kind:"camera",interpolationType:yn,interpolationFactor:uo.interpolationFactor.bind(void 0,yn),zoomStops:p.stops.map(function(We){return We[0]}),evaluate:function(We){return _(p,v,We.zoom,A,S)}}}return{kind:"source",evaluate:function(We,In){var Qe=In&&In.properties?In.properties[p.property]:void 0;return Qe===void 0?ls(p.default,v.default):_(p,v,Qe,A,S)}}}(this._parameters,this._specification))};function Oo(e){var r=e.key,s=e.value,p=e.valueSpec||{},v=e.objectElementValidators||{},_=e.style,A=e.styleSpec,S=[],D=Ri(s);if(D!=="object")return[new vt(r,s,"object expected, "+D+" found")];for(var B in s){var N=B.split(".")[0],V=p[N]||p["*"],Z=void 0;if(v[N])Z=v[N];else if(p[N])Z=pn;else if(v["*"])Z=v["*"];else{if(!p["*"]){S.push(new vt(r,s[B],'unknown property "'+B+'"'));continue}Z=pn}S=S.concat(Z({key:(r&&r+".")+B,value:s[B],valueSpec:V,style:_,styleSpec:A,object:s,objectKey:B},s))}for(var J in p)v[J]||p[J].required&&p[J].default===void 0&&s[J]===void 0&&S.push(new vt(r,s,'missing required property "'+J+'"'));return S}function vh(e){var r=e.value,s=e.valueSpec,p=e.style,v=e.styleSpec,_=e.key,A=e.arrayElementValidator||pn;if(Ri(r)!=="array")return[new vt(_,r,"array expected, "+Ri(r)+" found")];if(s.length&&r.length!==s.length)return[new vt(_,r,"array length "+s.length+" expected, length "+r.length+" found")];if(s["min-length"]&&r.length<s["min-length"])return[new vt(_,r,"array length at least "+s["min-length"]+" expected, length "+r.length+" found")];var S={type:s.value,values:s.values};v.$version<7&&(S.function=s.function),Ri(s.value)==="object"&&(S=s.value);for(var D=[],B=0;B<r.length;B++)D=D.concat(A({array:r,arrayIndex:B,value:r[B],valueSpec:S,style:p,styleSpec:v,key:_+"["+B+"]"}));return D}function Bc(e){var r=e.key,s=e.value,p=e.valueSpec,v=Ri(s);return v==="number"&&s!=s&&(v="NaN"),v!=="number"?[new vt(r,s,"number expected, "+v+" found")]:"minimum"in p&&s<p.minimum?[new vt(r,s,s+" is less than the minimum value "+p.minimum)]:"maximum"in p&&s>p.maximum?[new vt(r,s,s+" is greater than the maximum value "+p.maximum)]:[]}function Mu(e){var r,s,p,v=e.valueSpec,_=be(e.value.type),A={},S=_!=="categorical"&&e.value.property===void 0,D=!S,B=Ri(e.value.stops)==="array"&&Ri(e.value.stops[0])==="array"&&Ri(e.value.stops[0][0])==="object",N=Oo({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(J){if(_==="identity")return[new vt(J.key,J.value,'identity function may not have a "stops" property')];var ct=[],pt=J.value;return ct=ct.concat(vh({key:J.key,value:pt,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:V})),Ri(pt)==="array"&&pt.length===0&&ct.push(new vt(J.key,pt,"array must have at least one stop")),ct},default:function(J){return pn({key:J.key,value:J.value,valueSpec:v,style:J.style,styleSpec:J.styleSpec})}}});return _==="identity"&&S&&N.push(new vt(e.key,e.value,'missing required property "property"')),_==="identity"||e.value.stops||N.push(new vt(e.key,e.value,'missing required property "stops"')),_==="exponential"&&e.valueSpec.expression&&!xl(e.valueSpec)&&N.push(new vt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(D&&!zo(e.valueSpec)?N.push(new vt(e.key,e.value,"property functions not supported")):S&&!Ks(e.valueSpec)&&N.push(new vt(e.key,e.value,"zoom functions not supported"))),_!=="categorical"&&!B||e.value.property!==void 0||N.push(new vt(e.key,e.value,'"property" property is required')),N;function V(J){var ct=[],pt=J.value,It=J.key;if(Ri(pt)!=="array")return[new vt(It,pt,"array expected, "+Ri(pt)+" found")];if(pt.length!==2)return[new vt(It,pt,"array length 2 expected, length "+pt.length+" found")];if(B){if(Ri(pt[0])!=="object")return[new vt(It,pt,"object expected, "+Ri(pt[0])+" found")];if(pt[0].zoom===void 0)return[new vt(It,pt,"object stop key must have zoom")];if(pt[0].value===void 0)return[new vt(It,pt,"object stop key must have value")];if(p&&p>be(pt[0].zoom))return[new vt(It,pt[0].zoom,"stop zoom values must appear in ascending order")];be(pt[0].zoom)!==p&&(p=be(pt[0].zoom),s=void 0,A={}),ct=ct.concat(Oo({key:It+"[0]",value:pt[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Bc,value:Z}}))}else ct=ct.concat(Z({key:It+"[0]",value:pt[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},pt));return Cu(ie(pt[1]))?ct.concat([new vt(It+"[1]",pt[1],"expressions are not allowed in function stops.")]):ct.concat(pn({key:It+"[1]",value:pt[1],valueSpec:v,style:J.style,styleSpec:J.styleSpec}))}function Z(J,ct){var pt=Ri(J.value),It=be(J.value),_t=J.value!==null?J.value:ct;if(r){if(pt!==r)return[new vt(J.key,_t,pt+" stop domain type must match previous stop domain type "+r)]}else r=pt;if(pt!=="number"&&pt!=="string"&&pt!=="boolean")return[new vt(J.key,_t,"stop domain value must be a number, string, or boolean")];if(pt!=="number"&&_!=="categorical"){var Vt="number expected, "+pt+" found";return zo(v)&&_===void 0&&(Vt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vt(J.key,_t,Vt)]}return _!=="categorical"||pt!=="number"||isFinite(It)&&Math.floor(It)===It?_!=="categorical"&&pt==="number"&&s!==void 0&&It<s?[new vt(J.key,_t,"stop domain values must appear in ascending order")]:(s=It,_==="categorical"&&It in A?[new vt(J.key,_t,"stop domain values must be unique")]:(A[It]=!0,[])):[new vt(J.key,_t,"integer expected, found "+It)]}}function Wo(e){var r=(e.expressionContext==="property"?Qs:Xl)(ie(e.value),e.valueSpec);if(r.result==="error")return r.value.map(function(p){return new vt(""+e.key+p.key,e.value,p.message)});var s=r.value.expression||r.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!s.outputDefined())return[new vt(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!pl(s))return[new vt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!pl(s))return[new vt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!er(s,["zoom","feature-state"]))return[new vt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!ws(s))return[new vt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $s(e){var r=e.key,s=e.value,p=e.valueSpec,v=[];return Array.isArray(p.values)?p.values.indexOf(be(s))===-1&&v.push(new vt(r,s,"expected one of ["+p.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(p.values).indexOf(be(s))===-1&&v.push(new vt(r,s,"expected one of ["+Object.keys(p.values).join(", ")+"], "+JSON.stringify(s)+" found")),v}function ac(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var r=0,s=e.slice(1);r<s.length;r+=1){var p=s[r];if(!ac(p)&&typeof p!="boolean")return!1}return!0;default:return!0}}us.deserialize=function(e){return new us(e._parameters,e._specification)},us.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var Fc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Al(e){if(e==null)return{filter:function(){return!0},needGeometry:!1};ac(e)||(e=ga(e));var r=Xl(e,Fc);if(r.result==="error")throw new Error(r.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,p,v){return r.value.evaluate(s,p,{},v)},needGeometry:function s(p){if(!Array.isArray(p))return!1;if(p[0]==="within")return!0;for(var v=1;v<p.length;v++)if(s(p[v]))return!0;return!1}(e)}}function Kl(e,r){return e<r?-1:e>r?1:0}function ga(e){if(!e)return!0;var r,s=e[0];return e.length<=1?s!=="any":s==="=="?Wt(e[1],e[2],"=="):s==="!="?Dn(Wt(e[1],e[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Wt(e[1],e[2],s):s==="any"?(r=e.slice(1),["any"].concat(r.map(ga))):s==="all"?["all"].concat(e.slice(1).map(ga)):s==="none"?["all"].concat(e.slice(1).map(ga).map(Dn)):s==="in"?ue(e[1],e.slice(2)):s==="!in"?Dn(ue(e[1],e.slice(2))):s==="has"?nn(e[1]):s==="!has"?Dn(nn(e[1])):s!=="within"||e}function Wt(e,r,s){switch(e){case"$type":return["filter-type-"+s,r];case"$id":return["filter-id-"+s,r];default:return["filter-"+s,e,r]}}function ue(e,r){if(r.length===0)return!1;switch(e){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(function(s){return typeof s!=typeof r[0]})?["filter-in-large",e,["literal",r.sort(Kl)]]:["filter-in-small",e,["literal",r]]}}function nn(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Dn(e){return["!",e]}function vr(e){return ac(ie(e.value))?Wo(ge({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function r(s){var p=s.value,v=s.key;if(Ri(p)!=="array")return[new vt(v,p,"array expected, "+Ri(p)+" found")];var _,A=s.styleSpec,S=[];if(p.length<1)return[new vt(v,p,"filter array must have at least 1 element")];switch(S=S.concat($s({key:v+"[0]",value:p[0],valueSpec:A.filter_operator,style:s.style,styleSpec:s.styleSpec})),be(p[0])){case"<":case"<=":case">":case">=":p.length>=2&&be(p[1])==="$type"&&S.push(new vt(v,p,'"$type" cannot be use with operator "'+p[0]+'"'));case"==":case"!=":p.length!==3&&S.push(new vt(v,p,'filter array for operator "'+p[0]+'" must have 3 elements'));case"in":case"!in":p.length>=2&&(_=Ri(p[1]))!=="string"&&S.push(new vt(v+"[1]",p[1],"string expected, "+_+" found"));for(var D=2;D<p.length;D++)_=Ri(p[D]),be(p[1])==="$type"?S=S.concat($s({key:v+"["+D+"]",value:p[D],valueSpec:A.geometry_type,style:s.style,styleSpec:s.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new vt(v+"["+D+"]",p[D],"string, number, or boolean expected, "+_+" found"));break;case"any":case"all":case"none":for(var B=1;B<p.length;B++)S=S.concat(r({key:v+"["+B+"]",value:p[B],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":_=Ri(p[1]),p.length!==2?S.push(new vt(v,p,'filter array for "'+p[0]+'" operator must have 2 elements')):_!=="string"&&S.push(new vt(v+"[1]",p[1],"string expected, "+_+" found"));break;case"within":_=Ri(p[1]),p.length!==2?S.push(new vt(v,p,'filter array for "'+p[0]+'" operator must have 2 elements')):_!=="object"&&S.push(new vt(v+"[1]",p[1],"object expected, "+_+" found"))}return S}(e)}function zi(e,r){var s=e.key,p=e.style,v=e.styleSpec,_=e.value,A=e.objectKey,S=v[r+"_"+e.layerType];if(!S)return[];var D=A.match(/^(.*)-transition$/);if(r==="paint"&&D&&S[D[1]]&&S[D[1]].transition)return pn({key:s,value:_,valueSpec:v.transition,style:p,styleSpec:v});var B,N=e.valueSpec||S[A];if(!N)return[new vt(s,_,'unknown property "'+A+'"')];if(Ri(_)==="string"&&zo(N)&&!N.tokens&&(B=/^{([^}]+)}$/.exec(_)))return[new vt(s,_,'"'+A+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(B[1])+" }`.")];var V=[];return e.layerType==="symbol"&&(A==="text-field"&&p&&!p.glyphs&&V.push(new vt(s,_,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Au(ie(_))&&be(_.type)==="identity"&&V.push(new vt(s,_,'"text-font" does not support identity functions'))),V.concat(pn({key:e.key,value:_,valueSpec:N,style:p,styleSpec:v,expressionContext:"property",propertyType:r,propertyKey:A}))}function cr(e){return zi(e,"paint")}function Ot(e){return zi(e,"layout")}function he(e){var r=[],s=e.value,p=e.key,v=e.style,_=e.styleSpec;s.type||s.ref||r.push(new vt(p,s,'either "type" or "ref" is required'));var A,S=be(s.type),D=be(s.ref);if(s.id)for(var B=be(s.id),N=0;N<e.arrayIndex;N++){var V=v.layers[N];be(V.id)===B&&r.push(new vt(p,s.id,'duplicate layer id "'+s.id+'", previously used at line '+V.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(ct){ct in s&&r.push(new vt(p,s[ct],'"'+ct+'" is prohibited for ref layers'))}),v.layers.forEach(function(ct){be(ct.id)===D&&(A=ct)}),A?A.ref?r.push(new vt(p,s.ref,"ref cannot reference another ref layer")):S=be(A.type):r.push(new vt(p,s.ref,'ref layer "'+D+'" not found'));else if(S!=="background")if(s.source){var Z=v.sources&&v.sources[s.source],J=Z&&be(Z.type);Z?J==="vector"&&S==="raster"?r.push(new vt(p,s.source,'layer "'+s.id+'" requires a raster source')):J==="raster"&&S!=="raster"?r.push(new vt(p,s.source,'layer "'+s.id+'" requires a vector source')):J!=="vector"||s["source-layer"]?J==="raster-dem"&&S!=="hillshade"?r.push(new vt(p,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||J==="geojson"&&Z.lineMetrics||r.push(new vt(p,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):r.push(new vt(p,s,'layer "'+s.id+'" must specify a "source-layer"')):r.push(new vt(p,s.source,'source "'+s.source+'" not found'))}else r.push(new vt(p,s,'missing required property "source"'));return r=r.concat(Oo({key:p,value:s,valueSpec:_.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return pn({key:p+".type",value:s.type,valueSpec:_.layer.type,style:e.style,styleSpec:e.styleSpec,object:s,objectKey:"type"})},filter:vr,layout:function(ct){return Oo({layer:s,key:ct.key,value:ct.value,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{"*":function(pt){return Ot(ge({layerType:S},pt))}}})},paint:function(ct){return Oo({layer:s,key:ct.key,value:ct.value,style:ct.style,styleSpec:ct.styleSpec,objectElementValidators:{"*":function(pt){return cr(ge({layerType:S},pt))}}})}}}))}function Kt(e){var r=e.value,s=e.key,p=Ri(r);return p!=="string"?[new vt(s,r,"string expected, "+p+" found")]:[]}var Ae={promoteId:function(e){var r=e.key,s=e.value;if(Ri(s)==="string")return Kt({key:r,value:s});var p=[];for(var v in s)p.push.apply(p,Kt({key:r+"."+v,value:s[v]}));return p}};function Vn(e){var r=e.value,s=e.key,p=e.styleSpec,v=e.style;if(!r.type)return[new vt(s,r,'"type" is required')];var _,A=be(r.type);switch(A){case"vector":case"raster":case"raster-dem":return Oo({key:s,value:r,valueSpec:p["source_"+A.replace("-","_")],style:e.style,styleSpec:p,objectElementValidators:Ae});case"geojson":if(_=Oo({key:s,value:r,valueSpec:p.source_geojson,style:v,styleSpec:p,objectElementValidators:Ae}),r.cluster)for(var S in r.clusterProperties){var D=r.clusterProperties[S],B=D[0],N=typeof B=="string"?[B,["accumulated"],["get",S]]:B;_.push.apply(_,Wo({key:s+"."+S+".map",value:D[1],expressionContext:"cluster-map"})),_.push.apply(_,Wo({key:s+"."+S+".reduce",value:N,expressionContext:"cluster-reduce"}))}return _;case"video":return Oo({key:s,value:r,valueSpec:p.source_video,style:v,styleSpec:p});case"image":return Oo({key:s,value:r,valueSpec:p.source_image,style:v,styleSpec:p});case"canvas":return[new vt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $s({key:s+".type",value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,styleSpec:p})}}function li(e){var r=e.value,s=e.styleSpec,p=s.light,v=e.style,_=[],A=Ri(r);if(r===void 0)return _;if(A!=="object")return _.concat([new vt("light",r,"object expected, "+A+" found")]);for(var S in r){var D=S.match(/^(.*)-transition$/);_=_.concat(D&&p[D[1]]&&p[D[1]].transition?pn({key:S,value:r[S],valueSpec:s.transition,style:v,styleSpec:s}):p[S]?pn({key:S,value:r[S],valueSpec:p[S],style:v,styleSpec:s}):[new vt(S,r[S],'unknown property "'+S+'"')])}return _}var Ii={"*":function(){return[]},array:vh,boolean:function(e){var r=e.value,s=e.key,p=Ri(r);return p!=="boolean"?[new vt(s,r,"boolean expected, "+p+" found")]:[]},number:Bc,color:function(e){var r=e.key,s=e.value,p=Ri(s);return p!=="string"?[new vt(r,s,"color expected, "+p+" found")]:Wn(s)===null?[new vt(r,s,'color expected, "'+s+'" found')]:[]},constants:Zt,enum:$s,filter:vr,function:Mu,layer:he,object:Oo,source:Vn,light:li,string:Kt,formatted:function(e){return Kt(e).length===0?[]:Wo(e)},resolvedImage:function(e){return Kt(e).length===0?[]:Wo(e)}};function pn(e){var r=e.value,s=e.valueSpec,p=e.styleSpec;return s.expression&&Au(be(r))?Mu(e):s.expression&&Cu(ie(r))?Wo(e):s.type&&Ii[s.type]?Ii[s.type](e):Oo(ge({},e,{valueSpec:s.type?p[s.type]:s}))}function ji(e){var r=e.value,s=e.key,p=Kt(e);return p.length||(r.indexOf("{fontstack}")===-1&&p.push(new vt(s,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&p.push(new vt(s,r,'"glyphs" url must include a "{range}" token'))),p}function Zo(e,r){r===void 0&&(r=tt);var s=[];return s=s.concat(pn({key:"",value:e,valueSpec:r.$root,styleSpec:r,style:e,objectElementValidators:{glyphs:ji,"*":function(){return[]}}})),e.constants&&(s=s.concat(Zt({key:"constants",value:e.constants,style:e,styleSpec:r}))),no(s)}function no(e){return[].concat(e).sort(function(r,s){return r.line-s.line})}function Ra(e){return function(){for(var r=[],s=arguments.length;s--;)r[s]=arguments[s];return no(e.apply(this,r))}}Zo.source=Ra(Vn),Zo.light=Ra(li),Zo.layer=Ra(he),Zo.filter=Ra(vr),Zo.paintProperty=Ra(cr),Zo.layoutProperty=Ra(Ot);var Eu=Zo,Su=Eu.light,Nc=Eu.paintProperty,Zi=Eu.layoutProperty;function Ln(e,r){var s=!1;if(r&&r.length)for(var p=0,v=r;p<v.length;p+=1)e.fire(new St(new Error(v[p].message))),s=!0;return s}var Wa=hr;function hr(e,r,s){var p=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var v=new Int32Array(this.arrayBuffer);e=v[0],this.d=(r=v[1])+2*(s=v[2]);for(var _=0;_<this.d*this.d;_++){var A=v[3+_],S=v[3+_+1];p.push(A===S?null:v.subarray(A,S))}var D=v[3+p.length+1];this.keys=v.subarray(v[3+p.length],D),this.bboxes=v.subarray(D),this.insert=this._insertReadonly}else{this.d=r+2*s;for(var B=0;B<this.d*this.d;B++)p.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=s,this.scale=r/e,this.uid=0;var N=s/r*e;this.min=-N,this.max=e+N}hr.prototype.insert=function(e,r,s,p,v){this._forEachCell(r,s,p,v,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(s),this.bboxes.push(p),this.bboxes.push(v)},hr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},hr.prototype._insertCell=function(e,r,s,p,v,_){this.cells[v].push(_)},hr.prototype.query=function(e,r,s,p,v){var _=this.min,A=this.max;if(e<=_&&r<=_&&A<=s&&A<=p&&!v)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(e,r,s,p,this._queryCell,S,{},v),S},hr.prototype._queryCell=function(e,r,s,p,v,_,A,S){var D=this.cells[v];if(D!==null)for(var B=this.keys,N=this.bboxes,V=0;V<D.length;V++){var Z=D[V];if(A[Z]===void 0){var J=4*Z;(S?S(N[J+0],N[J+1],N[J+2],N[J+3]):e<=N[J+2]&&r<=N[J+3]&&s>=N[J+0]&&p>=N[J+1])?(A[Z]=!0,_.push(B[Z])):A[Z]=!1}}},hr.prototype._forEachCell=function(e,r,s,p,v,_,A,S){for(var D=this._convertToCellCoord(e),B=this._convertToCellCoord(r),N=this._convertToCellCoord(s),V=this._convertToCellCoord(p),Z=D;Z<=N;Z++)for(var J=B;J<=V;J++){var ct=this.d*J+Z;if((!S||S(this._convertFromCellCoord(Z),this._convertFromCellCoord(J),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(J+1)))&&v.call(this,e,r,s,p,ct,_,A,S))return}},hr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},hr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},hr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,r=3+this.cells.length+1+1,s=0,p=0;p<this.cells.length;p++)s+=this.cells[p].length;var v=new Int32Array(r+s+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var _=r,A=0;A<e.length;A++){var S=e[A];v[3+A]=_,v.set(S,_),_+=S.length}return v[3+e.length]=_,v.set(this.keys,_),v[3+e.length+1]=_+=this.keys.length,v.set(this.bboxes,_),_+=this.bboxes.length,v.buffer};var Es=L.ImageData,za=L.ImageBitmap,ar={};function Ye(e,r,s){s===void 0&&(s={}),Object.defineProperty(r,"_classRegistryKey",{value:e,writeable:!1}),ar[e]={klass:r,omit:s.omit||[],shallow:s.shallow||[]}}for(var io in Ye("Object",Object),Wa.serialize=function(e,r){var s=e.toArrayBuffer();return r&&r.push(s),{buffer:s}},Wa.deserialize=function(e){return new Wa(e.buffer)},Ye("Grid",Wa),Ye("Color",ai),Ye("Error",Error),Ye("ResolvedImage",Ro),Ye("StylePropertyFunction",us),Ye("StyleExpression",bl,{omit:["_evaluator"]}),Ye("ZoomDependentExpression",Iu),Ye("ZoomConstantExpression",Ms),Ye("CompoundExpression",mt,{omit:["_evaluate"]}),_l)_l[io]._classRegistryKey||Ye("Expression_"+io,_l[io]);function va(e){return e&&typeof ArrayBuffer<"u"&&(e instanceof ArrayBuffer||e.constructor&&e.constructor.name==="ArrayBuffer")}function ya(e){return za&&e instanceof za}function To(e,r){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(va(e)||ya(e))return r&&r.push(e),e;if(ArrayBuffer.isView(e)){var s=e;return r&&r.push(s.buffer),s}if(e instanceof Es)return r&&r.push(e.data.buffer),e;if(Array.isArray(e)){for(var p=[],v=0,_=e;v<_.length;v+=1)p.push(To(_[v],r));return p}if(typeof e=="object"){var A=e.constructor,S=A._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var D=A.serialize?A.serialize(e,r):{};if(!A.serialize){for(var B in e)if(e.hasOwnProperty(B)&&!(ar[S].omit.indexOf(B)>=0)){var N=e[B];D[B]=ar[S].shallow.indexOf(B)>=0?N:To(N,r)}e instanceof Error&&(D.message=e.message)}if(D.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(D.$name=S),D}throw new Error("can't serialize object of type "+typeof e)}function Po(e){if(e==null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||va(e)||ya(e)||ArrayBuffer.isView(e)||e instanceof Es)return e;if(Array.isArray(e))return e.map(Po);if(typeof e=="object"){var r=e.$name||"Object",s=ar[r].klass;if(!s)throw new Error("can't deserialize unregistered class "+r);if(s.deserialize)return s.deserialize(e);for(var p=Object.create(s.prototype),v=0,_=Object.keys(e);v<_.length;v+=1){var A=_[v];if(A!=="$name"){var S=e[A];p[A]=ar[r].shallow.indexOf(A)>=0?S:Po(S)}}return p}throw new Error("can't deserialize object of type "+typeof e)}var Ql=function(){this.first=!0};Ql.prototype.update=function(e,r){var s=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=s,!0))};var Re={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Js(e){for(var r=0,s=e;r<s.length;r+=1)if(wl(s[r].charCodeAt(0)))return!0;return!1}function wl(e){return!(e!==746&&e!==747&&(e<4352||!(Re["Bopomofo Extended"](e)||Re.Bopomofo(e)||Re["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Re["CJK Compatibility Ideographs"](e)||Re["CJK Compatibility"](e)||Re["CJK Radicals Supplement"](e)||Re["CJK Strokes"](e)||!(!Re["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||e===12336)||Re["CJK Unified Ideographs Extension A"](e)||Re["CJK Unified Ideographs"](e)||Re["Enclosed CJK Letters and Months"](e)||Re["Hangul Compatibility Jamo"](e)||Re["Hangul Jamo Extended-A"](e)||Re["Hangul Jamo Extended-B"](e)||Re["Hangul Jamo"](e)||Re["Hangul Syllables"](e)||Re.Hiragana(e)||Re["Ideographic Description Characters"](e)||Re.Kanbun(e)||Re["Kangxi Radicals"](e)||Re["Katakana Phonetic Extensions"](e)||Re.Katakana(e)&&e!==12540||!(!Re["Halfwidth and Fullwidth Forms"](e)||e===65288||e===65289||e===65293||e>=65306&&e<=65310||e===65339||e===65341||e===65343||e>=65371&&e<=65503||e===65507||e>=65512&&e<=65519)||!(!Re["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Re["Unified Canadian Aboriginal Syllabics"](e)||Re["Unified Canadian Aboriginal Syllabics Extended"](e)||Re["Vertical Forms"](e)||Re["Yijing Hexagram Symbols"](e)||Re["Yi Syllables"](e)||Re["Yi Radicals"](e))))}function Cl(e){return!(wl(e)||function(r){return!!(Re["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Re["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Re["Letterlike Symbols"](r)||Re["Number Forms"](r)||Re["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Re["Control Pictures"](r)&&r!==9251||Re["Optical Character Recognition"](r)||Re["Enclosed Alphanumerics"](r)||Re["Geometric Shapes"](r)||Re["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Re["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Re["CJK Symbols and Punctuation"](r)||Re.Katakana(r)||Re["Private Use Area"](r)||Re["CJK Compatibility Forms"](r)||Re["Small Form Variants"](r)||Re["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(e))}function ro(e){return e>=1424&&e<=2303||Re["Arabic Presentation Forms-A"](e)||Re["Arabic Presentation Forms-B"](e)}function ho(e,r){return!(!r&&ro(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Re.Khmer(e))}function hf(e){for(var r=0,s=e;r<s.length;r+=1)if(ro(s[r].charCodeAt(0)))return!0;return!1}var ff=null,Za="unavailable",Ss=null,yh=function(e){e&&typeof e=="string"&&e.indexOf("NetworkError")>-1&&(Za="error"),ff&&ff(e)};function sc(){pp.fire(new dt("pluginStateChange",{pluginStatus:Za,pluginURL:Ss}))}var pp=new Dt,pf=function(){return Za},tl=function(){if(Za!=="deferred"||!Ss)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Za="loading",sc(),Ss&&vu({url:Ss},function(e){e?yh(e):(Za="loaded",sc())})},cs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Za==="loaded"||cs.applyArabicShaping!=null},isLoading:function(){return Za==="loading"},setState:function(e){Za=e.pluginStatus,Ss=e.pluginURL},isParsed:function(){return cs.applyArabicShaping!=null&&cs.processBidirectionalText!=null&&cs.processStyledBidirectionalText!=null},getPluginURL:function(){return Ss}},Rn=function(e,r){this.zoom=e,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ql,this.transition={})};Rn.prototype.isSupportedScript=function(e){return function(r,s){for(var p=0,v=r;p<v.length;p+=1)if(!ho(v[p].charCodeAt(0),s))return!1;return!0}(e,cs.isLoaded())},Rn.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Rn.prototype.getCrossfadeParameters=function(){var e=this.zoom,r=e-Math.floor(e),s=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*r}};var Yr=function(e,r){this.property=e,this.value=r,this.expression=function(s,p){if(Au(s))return new us(s,p);if(Cu(s)){var v=Qs(s,p);if(v.result==="error")throw new Error(v.value.map(function(A){return A.key+": "+A.message}).join(", "));return v.value}var _=s;return typeof s=="string"&&p.type==="color"&&(_=ai.parse(s)),{kind:"constant",evaluate:function(){return _}}}(r===void 0?e.specification.default:r,e.specification)};Yr.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Yr.prototype.possiblyEvaluate=function(e,r,s){return this.property.possiblyEvaluate(this,e,r,s)};var Ts=function(e){this.property=e,this.value=new Yr(e,void 0)};Ts.prototype.transitioned=function(e,r){return new Tu(this.property,this.value,r,K({},e.transition,this.transition),e.now)},Ts.prototype.untransitioned=function(){return new Tu(this.property,this.value,null,{},0)};var Yo=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};Yo.prototype.getValue=function(e){return Ut(this._values[e].value.value)},Yo.prototype.setValue=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Ts(this._values[e].property)),this._values[e].value=new Yr(this._values[e].property,r===null?void 0:Ut(r))},Yo.prototype.getTransition=function(e){return Ut(this._values[e].transition)},Yo.prototype.setTransition=function(e,r){this._values.hasOwnProperty(e)||(this._values[e]=new Ts(this._values[e].property)),this._values[e].transition=Ut(r)||void 0},Yo.prototype.serialize=function(){for(var e={},r=0,s=Object.keys(this._values);r<s.length;r+=1){var p=s[r],v=this.getValue(p);v!==void 0&&(e[p]=v);var _=this.getTransition(p);_!==void 0&&(e[p+"-transition"]=_)}return e},Yo.prototype.transitioned=function(e,r){for(var s=new Pu(this._properties),p=0,v=Object.keys(this._values);p<v.length;p+=1){var _=v[p];s._values[_]=this._values[_].transitioned(e,r._values[_])}return s},Yo.prototype.untransitioned=function(){for(var e=new Pu(this._properties),r=0,s=Object.keys(this._values);r<s.length;r+=1){var p=s[r];e._values[p]=this._values[p].untransitioned()}return e};var Tu=function(e,r,s,p,v){this.property=e,this.value=r,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,e.specification.transition&&(p.delay||p.duration)&&(this.prior=s)};Tu.prototype.possiblyEvaluate=function(e,r,s){var p=e.now||0,v=this.value.possiblyEvaluate(e,r,s),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(e,r,s);var A=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(e,r,s),v,function(S){if(S<=0)return 0;if(S>=1)return 1;var D=S*S,B=D*S;return 4*(S<.5?B:3*(S-D)+B-.75)}(A))}return v};var Pu=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Pu.prototype.possiblyEvaluate=function(e,r,s){for(var p=new lc(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var A=_[v];p._values[A]=this._values[A].possiblyEvaluate(e,r,s)}return p},Pu.prototype.hasTransition=function(){for(var e=0,r=Object.keys(this._values);e<r.length;e+=1)if(this._values[r[e]].prior)return!0;return!1};var hs=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};hs.prototype.getValue=function(e){return Ut(this._values[e].value)},hs.prototype.setValue=function(e,r){this._values[e]=new Yr(this._values[e].property,r===null?void 0:Ut(r))},hs.prototype.serialize=function(){for(var e={},r=0,s=Object.keys(this._values);r<s.length;r+=1){var p=s[r],v=this.getValue(p);v!==void 0&&(e[p]=v)}return e},hs.prototype.possiblyEvaluate=function(e,r,s){for(var p=new lc(this._properties),v=0,_=Object.keys(this._values);v<_.length;v+=1){var A=_[v];p._values[A]=this._values[A].possiblyEvaluate(e,r,s)}return p};var Lo=function(e,r,s){this.property=e,this.value=r,this.parameters=s};Lo.prototype.isConstant=function(){return this.value.kind==="constant"},Lo.prototype.constantOr=function(e){return this.value.kind==="constant"?this.value.value:e},Lo.prototype.evaluate=function(e,r,s,p){return this.property.evaluate(this.value,this.parameters,e,r,s,p)};var lc=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};lc.prototype.get=function(e){return this._values[e]};var vn=function(e){this.specification=e};vn.prototype.possiblyEvaluate=function(e,r){return e.expression.evaluate(r)},vn.prototype.interpolate=function(e,r,s){var p=Wl[this.specification.type];return p?p(e,r,s):e};var un=function(e,r){this.specification=e,this.overrides=r};un.prototype.possiblyEvaluate=function(e,r,s,p){return new Lo(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},s,p)}:e.expression,r)},un.prototype.interpolate=function(e,r,s){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Lo(this,{kind:"constant",value:void 0},e.parameters);var p=Wl[this.specification.type];return p?new Lo(this,{kind:"constant",value:p(e.value.value,r.value.value,s)},e.parameters):e},un.prototype.evaluate=function(e,r,s,p,v,_){return e.kind==="constant"?e.value:e.evaluate(r,s,p,v,_)};var Lu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(s,p,v,_){if(s.value===void 0)return new Lo(this,{kind:"constant",value:void 0},p);if(s.expression.kind==="constant"){var A=s.expression.evaluate(p,null,{},v,_),S=s.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,D=this._calculate(S,S,S,p);return new Lo(this,{kind:"constant",value:D},p)}if(s.expression.kind==="camera"){var B=this._calculate(s.expression.evaluate({zoom:p.zoom-1}),s.expression.evaluate({zoom:p.zoom}),s.expression.evaluate({zoom:p.zoom+1}),p);return new Lo(this,{kind:"constant",value:B},p)}return new Lo(this,s.expression,p)},r.prototype.evaluate=function(s,p,v,_,A,S){if(s.kind==="source"){var D=s.evaluate(p,v,_,A,S);return this._calculate(D,D,D,p)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(p.zoom)-1},v,_),s.evaluate({zoom:Math.floor(p.zoom)},v,_),s.evaluate({zoom:Math.floor(p.zoom)+1},v,_),p):s.value},r.prototype._calculate=function(s,p,v,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:p}:{from:v,to:p}},r.prototype.interpolate=function(s){return s},r}(un),Bo=function(e){this.specification=e};Bo.prototype.possiblyEvaluate=function(e,r,s,p){if(e.value!==void 0){if(e.expression.kind==="constant"){var v=e.expression.evaluate(r,null,{},s,p);return this._calculate(v,v,v,r)}return this._calculate(e.expression.evaluate(new Rn(Math.floor(r.zoom-1),r)),e.expression.evaluate(new Rn(Math.floor(r.zoom),r)),e.expression.evaluate(new Rn(Math.floor(r.zoom+1),r)),r)}},Bo.prototype._calculate=function(e,r,s,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:s,to:r}},Bo.prototype.interpolate=function(e){return e};var _a=function(e){this.specification=e};_a.prototype.possiblyEvaluate=function(e,r,s,p){return!!e.expression.evaluate(r,null,{},s,p)},_a.prototype.interpolate=function(){return!1};var Xo=function(e){for(var r in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var s=e[r];s.specification.overridable&&this.overridableProperties.push(r);var p=this.defaultPropertyValues[r]=new Yr(s,void 0),v=this.defaultTransitionablePropertyValues[r]=new Ts(s);this.defaultTransitioningPropertyValues[r]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=p.possiblyEvaluate({})}};Ye("DataDrivenProperty",un),Ye("DataConstantProperty",vn),Ye("CrossFadedDataDrivenProperty",Lu),Ye("CrossFadedProperty",Bo),Ye("ColorRampProperty",_a);var Il=function(e){function r(s,p){if(e.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),p.layout&&(this._unevaluatedLayout=new hs(p.layout)),p.paint)){for(var v in this._transitionablePaint=new Yo(p.paint),s.paint)this.setPaintProperty(v,s.paint[v],{validate:!1});for(var _ in s.layout)this.setLayoutProperty(_,s.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new lc(p.paint)}}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},r.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},r.prototype.setLayoutProperty=function(s,p,v){v===void 0&&(v={}),p!=null&&this._validate(Zi,"layers."+this.id+".layout."+s,s,p,v)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,p):this.visibility=p)},r.prototype.getPaintProperty=function(s){return Gt(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},r.prototype.setPaintProperty=function(s,p,v){if(v===void 0&&(v={}),p!=null&&this._validate(Nc,"layers."+this.id+".paint."+s,s,p,v))return!1;if(Gt(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),p||void 0),!1;var _=this._transitionablePaint._values[s],A=_.property.specification["property-type"]==="cross-faded-data-driven",S=_.value.isDataDriven(),D=_.value;this._transitionablePaint.setValue(s,p),this._handleSpecialPaintPropertyUpdate(s);var B=this._transitionablePaint._values[s].value;return B.isDataDriven()||S||A||this._handleOverridablePaintPropertyUpdate(s,D,B)},r.prototype._handleSpecialPaintPropertyUpdate=function(s){},r.prototype._handleOverridablePaintPropertyUpdate=function(s,p,v){return!1},r.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},r.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},r.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},r.prototype.recalculate=function(s,p){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,p)},r.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Qt(s,function(p,v){return!(p===void 0||v==="layout"&&!Object.keys(p).length||v==="paint"&&!Object.keys(p).length)})},r.prototype._validate=function(s,p,v,_,A){return A===void 0&&(A={}),(!A||A.validate!==!1)&&Ln(this,s.call(Eu,{key:p,layerType:this.type,objectKey:v,value:_,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))},r.prototype.is3D=function(){return!1},r.prototype.isTileClipped=function(){return!1},r.prototype.hasOffscreenPass=function(){return!1},r.prototype.resize=function(){},r.prototype.isStateDependent=function(){for(var s in this.paint._values){var p=this.paint.get(s);if(p instanceof Lo&&zo(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1},r}(Dt),dp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},df=function(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ji=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function fo(e,r){r===void 0&&(r=1);var s=0,p=0;return{members:e.map(function(v){var _=dp[v.type].BYTES_PER_ELEMENT,A=s=Vc(s,Math.max(r,_)),S=v.components||1;return p=Math.max(p,_),s+=_*S,{name:v.name,type:v.type,components:S,offset:A}}),size:Vc(s,Math.max(p,r)),alignment:r}}function Vc(e,r){return Math.ceil(e/r)*r}Ji.serialize=function(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Ji.deserialize=function(e){var r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r},Ji.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ji.prototype.clear=function(){this.length=0},Ji.prototype.resize=function(e){this.reserve(e),this.length=e},Ji.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}},Ji.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ku=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p){var v=this.length;return this.resize(v+1),this.emplace(v,s,p)},r.prototype.emplace=function(s,p,v){var _=2*s;return this.int16[_+0]=p,this.int16[_+1]=v,s},r}(Ji);ku.prototype.bytesPerElement=4,Ye("StructArrayLayout2i4",ku);var rt=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_){var A=this.length;return this.resize(A+1),this.emplace(A,s,p,v,_)},r.prototype.emplace=function(s,p,v,_,A){var S=4*s;return this.int16[S+0]=p,this.int16[S+1]=v,this.int16[S+2]=_,this.int16[S+3]=A,s},r}(Ji);rt.prototype.bytesPerElement=8,Ye("StructArrayLayout4i8",rt);var Ya=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S){var D=this.length;return this.resize(D+1),this.emplace(D,s,p,v,_,A,S)},r.prototype.emplace=function(s,p,v,_,A,S,D){var B=6*s;return this.int16[B+0]=p,this.int16[B+1]=v,this.int16[B+2]=_,this.int16[B+3]=A,this.int16[B+4]=S,this.int16[B+5]=D,s},r}(Ji);Ya.prototype.bytesPerElement=12,Ye("StructArrayLayout2i4i12",Ya);var ea=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S){var D=this.length;return this.resize(D+1),this.emplace(D,s,p,v,_,A,S)},r.prototype.emplace=function(s,p,v,_,A,S,D){var B=4*s,N=8*s;return this.int16[B+0]=p,this.int16[B+1]=v,this.uint8[N+4]=_,this.uint8[N+5]=A,this.uint8[N+6]=S,this.uint8[N+7]=D,s},r}(Ji);ea.prototype.bytesPerElement=8,Ye("StructArrayLayout2i4ub8",ea);var na=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p){var v=this.length;return this.resize(v+1),this.emplace(v,s,p)},r.prototype.emplace=function(s,p,v){var _=2*s;return this.float32[_+0]=p,this.float32[_+1]=v,s},r}(Ji);na.prototype.bytesPerElement=8,Ye("StructArrayLayout2f8",na);var di=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S,D,B,N,V){var Z=this.length;return this.resize(Z+1),this.emplace(Z,s,p,v,_,A,S,D,B,N,V)},r.prototype.emplace=function(s,p,v,_,A,S,D,B,N,V,Z){var J=10*s;return this.uint16[J+0]=p,this.uint16[J+1]=v,this.uint16[J+2]=_,this.uint16[J+3]=A,this.uint16[J+4]=S,this.uint16[J+5]=D,this.uint16[J+6]=B,this.uint16[J+7]=N,this.uint16[J+8]=V,this.uint16[J+9]=Z,s},r}(Ji);di.prototype.bytesPerElement=20,Ye("StructArrayLayout10ui20",di);var mf=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S,D,B,N,V,Z,J){var ct=this.length;return this.resize(ct+1),this.emplace(ct,s,p,v,_,A,S,D,B,N,V,Z,J)},r.prototype.emplace=function(s,p,v,_,A,S,D,B,N,V,Z,J,ct){var pt=12*s;return this.int16[pt+0]=p,this.int16[pt+1]=v,this.int16[pt+2]=_,this.int16[pt+3]=A,this.uint16[pt+4]=S,this.uint16[pt+5]=D,this.uint16[pt+6]=B,this.uint16[pt+7]=N,this.int16[pt+8]=V,this.int16[pt+9]=Z,this.int16[pt+10]=J,this.int16[pt+11]=ct,s},r}(Ji);mf.prototype.bytesPerElement=24,Ye("StructArrayLayout4i4ui4i24",mf);var Uc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v){var _=this.length;return this.resize(_+1),this.emplace(_,s,p,v)},r.prototype.emplace=function(s,p,v,_){var A=3*s;return this.float32[A+0]=p,this.float32[A+1]=v,this.float32[A+2]=_,s},r}(Ji);Uc.prototype.bytesPerElement=12,Ye("StructArrayLayout3f12",Uc);var _h=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var p=this.length;return this.resize(p+1),this.emplace(p,s)},r.prototype.emplace=function(s,p){return this.uint32[1*s+0]=p,s},r}(Ji);_h.prototype.bytesPerElement=4,Ye("StructArrayLayout1ul4",_h);var $l=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S,D,B,N){var V=this.length;return this.resize(V+1),this.emplace(V,s,p,v,_,A,S,D,B,N)},r.prototype.emplace=function(s,p,v,_,A,S,D,B,N,V){var Z=10*s,J=5*s;return this.int16[Z+0]=p,this.int16[Z+1]=v,this.int16[Z+2]=_,this.int16[Z+3]=A,this.int16[Z+4]=S,this.int16[Z+5]=D,this.uint32[J+3]=B,this.uint16[Z+8]=N,this.uint16[Z+9]=V,s},r}(Ji);$l.prototype.bytesPerElement=20,Ye("StructArrayLayout6i1ul2ui20",$l);var jc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S){var D=this.length;return this.resize(D+1),this.emplace(D,s,p,v,_,A,S)},r.prototype.emplace=function(s,p,v,_,A,S,D){var B=6*s;return this.int16[B+0]=p,this.int16[B+1]=v,this.int16[B+2]=_,this.int16[B+3]=A,this.int16[B+4]=S,this.int16[B+5]=D,s},r}(Ji);jc.prototype.bytesPerElement=12,Ye("StructArrayLayout2i2i2i12",jc);var uc=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A){var S=this.length;return this.resize(S+1),this.emplace(S,s,p,v,_,A)},r.prototype.emplace=function(s,p,v,_,A,S){var D=4*s,B=8*s;return this.float32[D+0]=p,this.float32[D+1]=v,this.float32[D+2]=_,this.int16[B+6]=A,this.int16[B+7]=S,s},r}(Ji);uc.prototype.bytesPerElement=16,Ye("StructArrayLayout2f1f2i16",uc);var mp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_){var A=this.length;return this.resize(A+1),this.emplace(A,s,p,v,_)},r.prototype.emplace=function(s,p,v,_,A){var S=12*s,D=3*s;return this.uint8[S+0]=p,this.uint8[S+1]=v,this.float32[D+1]=_,this.float32[D+2]=A,s},r}(Ji);mp.prototype.bytesPerElement=12,Ye("StructArrayLayout2ub2f12",mp);var Du=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v){var _=this.length;return this.resize(_+1),this.emplace(_,s,p,v)},r.prototype.emplace=function(s,p,v,_){var A=3*s;return this.uint16[A+0]=p,this.uint16[A+1]=v,this.uint16[A+2]=_,s},r}(Ji);Du.prototype.bytesPerElement=6,Ye("StructArrayLayout3ui6",Du);var Ru=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt,It,_t,Vt){var Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt,It,_t,Vt)},r.prototype.emplace=function(s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt,It,_t,Vt,Yt){var Jt=24*s,ee=12*s,fe=48*s;return this.int16[Jt+0]=p,this.int16[Jt+1]=v,this.uint16[Jt+2]=_,this.uint16[Jt+3]=A,this.uint32[ee+2]=S,this.uint32[ee+3]=D,this.uint32[ee+4]=B,this.uint16[Jt+10]=N,this.uint16[Jt+11]=V,this.uint16[Jt+12]=Z,this.float32[ee+7]=J,this.float32[ee+8]=ct,this.uint8[fe+36]=pt,this.uint8[fe+37]=It,this.uint8[fe+38]=_t,this.uint32[ee+10]=Vt,this.int16[Jt+22]=Yt,s},r}(Ji);Ru.prototype.bytesPerElement=48,Ye("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ru);var Ps=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt,It,_t,Vt,Yt,Jt,ee,fe,Me,Be,yn,We,In,Qe,ni){var zn=this.length;return this.resize(zn+1),this.emplace(zn,s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt,It,_t,Vt,Yt,Jt,ee,fe,Me,Be,yn,We,In,Qe,ni)},r.prototype.emplace=function(s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt,It,_t,Vt,Yt,Jt,ee,fe,Me,Be,yn,We,In,Qe,ni,zn){var hn=34*s,hi=17*s;return this.int16[hn+0]=p,this.int16[hn+1]=v,this.int16[hn+2]=_,this.int16[hn+3]=A,this.int16[hn+4]=S,this.int16[hn+5]=D,this.int16[hn+6]=B,this.int16[hn+7]=N,this.uint16[hn+8]=V,this.uint16[hn+9]=Z,this.uint16[hn+10]=J,this.uint16[hn+11]=ct,this.uint16[hn+12]=pt,this.uint16[hn+13]=It,this.uint16[hn+14]=_t,this.uint16[hn+15]=Vt,this.uint16[hn+16]=Yt,this.uint16[hn+17]=Jt,this.uint16[hn+18]=ee,this.uint16[hn+19]=fe,this.uint16[hn+20]=Me,this.uint16[hn+21]=Be,this.uint16[hn+22]=yn,this.uint32[hi+12]=We,this.float32[hi+13]=In,this.float32[hi+14]=Qe,this.float32[hi+15]=ni,this.float32[hi+16]=zn,s},r}(Ji);Ps.prototype.bytesPerElement=68,Ye("StructArrayLayout8i15ui1ul4f68",Ps);var zu=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var p=this.length;return this.resize(p+1),this.emplace(p,s)},r.prototype.emplace=function(s,p){return this.float32[1*s+0]=p,s},r}(Ji);zu.prototype.bytesPerElement=4,Ye("StructArrayLayout1f4",zu);var Ls=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v){var _=this.length;return this.resize(_+1),this.emplace(_,s,p,v)},r.prototype.emplace=function(s,p,v,_){var A=3*s;return this.int16[A+0]=p,this.int16[A+1]=v,this.int16[A+2]=_,s},r}(Ji);Ls.prototype.bytesPerElement=6,Ye("StructArrayLayout3i6",Ls);var gp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v){var _=this.length;return this.resize(_+1),this.emplace(_,s,p,v)},r.prototype.emplace=function(s,p,v,_){var A=4*s;return this.uint32[2*s+0]=p,this.uint16[A+2]=v,this.uint16[A+3]=_,s},r}(Ji);gp.prototype.bytesPerElement=8,Ye("StructArrayLayout1ul2ui8",gp);var xh=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p){var v=this.length;return this.resize(v+1),this.emplace(v,s,p)},r.prototype.emplace=function(s,p,v){var _=2*s;return this.uint16[_+0]=p,this.uint16[_+1]=v,s},r}(Ji);xh.prototype.bytesPerElement=4,Ye("StructArrayLayout2ui4",xh);var vp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s){var p=this.length;return this.resize(p+1),this.emplace(p,s)},r.prototype.emplace=function(s,p){return this.uint16[1*s+0]=p,s},r}(Ji);vp.prototype.bytesPerElement=2,Ye("StructArrayLayout1ui2",vp);var ks=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},r.prototype.emplaceBack=function(s,p,v,_){var A=this.length;return this.resize(A+1),this.emplace(A,s,p,v,_)},r.prototype.emplace=function(s,p,v,_,A){var S=4*s;return this.float32[S+0]=p,this.float32[S+1]=v,this.float32[S+2]=_,this.float32[S+3]=A,s},r}(Ji);ks.prototype.bytesPerElement=16,Ye("StructArrayLayout4f16",ks);var l=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(r.prototype,s),r}(df);l.prototype.size=20;var c=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(s){return new l(this,s)},r}($l);Ye("CollisionBoxArray",c);var u=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(p){this._structArray.uint8[this._pos1+37]=p},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(p){this._structArray.uint8[this._pos1+38]=p},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(p){this._structArray.uint32[this._pos4+10]=p},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(r.prototype,s),r}(df);u.prototype.size=48;var d=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(s){return new u(this,s)},r}(Ru);Ye("PlacedSymbolArray",d);var b=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(p){this._structArray.uint32[this._pos4+12]=p},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(r.prototype,s),r}(df);b.prototype.size=68;var w=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(s){return new b(this,s)},r}(Ps);Ye("SymbolInstanceArray",w);var E=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getoffsetX=function(s){return this.float32[1*s+0]},r}(zu);Ye("GlyphOffsetArray",E);var k=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.getx=function(s){return this.int16[3*s+0]},r.prototype.gety=function(s){return this.int16[3*s+1]},r.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},r}(Ls);Ye("SymbolLineVertexArray",k);var F=function(e){function r(){e.apply(this,arguments)}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(r.prototype,s),r}(df);F.prototype.size=8;var j=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.get=function(s){return new F(this,s)},r}(gp);Ye("FeatureIndexArray",j);var et=fo([{name:"a_pos",components:2,type:"Int16"}],4).members,it=function(e){e===void 0&&(e=[]),this.segments=e};function ot(e,r){return 256*(e=nt(Math.floor(e),0,255))+nt(Math.floor(r),0,255)}it.prototype.prepareSegment=function(e,r,s,p){var v=this.segments[this.segments.length-1];return e>it.MAX_VERTEX_ARRAY_LENGTH&&Bt("Max vertices per segment is "+it.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!v||v.vertexLength+e>it.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:r.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v},it.prototype.get=function(){return this.segments},it.prototype.destroy=function(){for(var e=0,r=this.segments;e<r.length;e+=1){var s=r[e];for(var p in s.vaos)s.vaos[p].destroy()}},it.simpleSegment=function(e,r,s,p){return new it([{vertexOffset:e,primitiveOffset:r,vertexLength:s,primitiveLength:p,vaos:{},sortKey:0}])},it.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ye("SegmentVector",it);var gt=fo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ft=y(function(e){e.exports=function(r,s){var p,v,_,A,S,D,B,N;for(v=r.length-(p=3&r.length),_=s,S=3432918353,D=461845907,N=0;N<v;)B=255&r.charCodeAt(N)|(255&r.charCodeAt(++N))<<8|(255&r.charCodeAt(++N))<<16|(255&r.charCodeAt(++N))<<24,++N,_=27492+(65535&(A=5*(65535&(_=(_^=B=(65535&(B=(B=(65535&B)*S+(((B>>>16)*S&65535)<<16)&4294967295)<<15|B>>>17))*D+(((B>>>16)*D&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(B=0,p){case 3:B^=(255&r.charCodeAt(N+2))<<16;case 2:B^=(255&r.charCodeAt(N+1))<<8;case 1:_^=B=(65535&(B=(B=(65535&(B^=255&r.charCodeAt(N)))*S+(((B>>>16)*S&65535)<<16)&4294967295)<<15|B>>>17))*D+(((B>>>16)*D&65535)<<16)&4294967295}return _^=r.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}}),bt=y(function(e){e.exports=function(r,s){for(var p,v=r.length,_=s^v,A=0;v>=4;)p=1540483477*(65535&(p=255&r.charCodeAt(A)|(255&r.charCodeAt(++A))<<8|(255&r.charCodeAt(++A))<<16|(255&r.charCodeAt(++A))<<24))+((1540483477*(p>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++A;switch(v){case 3:_^=(255&r.charCodeAt(A+2))<<16;case 2:_^=(255&r.charCodeAt(A+1))<<8;case 1:_=1540483477*(65535&(_^=255&r.charCodeAt(A)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}}),ht=ft,At=bt;ht.murmur3=ft,ht.murmur2=At;var Lt=function(){this.ids=[],this.positions=[],this.indexed=!1};Lt.prototype.add=function(e,r,s,p){this.ids.push(ne(e)),this.positions.push(r,s,p)},Lt.prototype.getPositions=function(e){for(var r=ne(e),s=0,p=this.ids.length-1;s<p;){var v=s+p>>1;this.ids[v]>=r?p=v:s=v+1}for(var _=[];this.ids[s]===r;)_.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return _},Lt.serialize=function(e,r){var s=new Float64Array(e.ids),p=new Uint32Array(e.positions);return function v(_,A,S,D){for(;S<D;){for(var B=_[S+D>>1],N=S-1,V=D+1;;){do N++;while(_[N]<B);do V--;while(_[V]>B);if(N>=V)break;te(_,N,V),te(A,3*N,3*V),te(A,3*N+1,3*V+1),te(A,3*N+2,3*V+2)}V-S<D-V?(v(_,A,S,V),S=V+1):(v(_,A,V+1,D),D=V)}}(s,p,0,s.length-1),r&&r.push(s.buffer,p.buffer),{ids:s,positions:p}},Lt.deserialize=function(e){var r=new Lt;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r};var qt=Math.pow(2,53)-1;function ne(e){var r=+e;return!isNaN(r)&&r<=qt?r:ht(String(e))}function te(e,r,s){var p=e[r];e[r]=e[s],e[s]=p}Ye("FeaturePositionMap",Lt);var re=function(e,r){this.gl=e.gl,this.location=r},ve=function(e){function r(s,p){e.call(this,s,p),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},r}(re),Ce=function(e){function r(s,p){e.call(this,s,p),this.current=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},r}(re),Le=function(e){function r(s,p){e.call(this,s,p),this.current=[0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},r}(re),qe=function(e){function r(s,p){e.call(this,s,p),this.current=[0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},r}(re),cn=function(e){function r(s,p){e.call(this,s,p),this.current=[0,0,0,0]}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},r}(re),Sn=function(e){function r(s,p){e.call(this,s,p),this.current=ai.transparent}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},r}(re),Mn=new Float32Array(16),Oi=function(e){function r(s,p){e.call(this,s,p),this.current=Mn}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var p=1;p<16;p++)if(s[p]!==this.current[p]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},r}(re);function Je(e){return[ot(255*e.r,255*e.g),ot(255*e.b,255*e.a)]}var kn=function(e,r,s){this.value=e,this.uniformNames=r.map(function(p){return"u_"+p}),this.type=s};kn.prototype.setUniform=function(e,r,s){e.set(s.constantOr(this.value))},kn.prototype.getBinding=function(e,r,s){return this.type==="color"?new Sn(e,r):new Ce(e,r)};var Jn=function(e,r){this.uniformNames=r.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Jn.prototype.setConstantPatternPositions=function(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr},Jn.prototype.setUniform=function(e,r,s,p){var v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&e.set(v)},Jn.prototype.getBinding=function(e,r,s){return s.substr(0,9)==="u_pattern"?new cn(e,r):new Ce(e,r)};var Un=function(e,r,s,p){this.expression=e,this.type=s,this.maxValue=0,this.paintVertexAttributes=r.map(function(v){return{name:"a_"+v,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new p};Un.prototype.populatePaintArray=function(e,r,s,p,v){var _=this.paintVertexArray.length,A=this.expression.evaluate(new Rn(0),r,{},p,[],v);this.paintVertexArray.resize(e),this._setPaintValue(_,e,A)},Un.prototype.updatePaintArray=function(e,r,s,p){var v=this.expression.evaluate({zoom:0},s,p);this._setPaintValue(e,r,v)},Un.prototype._setPaintValue=function(e,r,s){if(this.type==="color")for(var p=Je(s),v=e;v<r;v++)this.paintVertexArray.emplace(v,p[0],p[1]);else{for(var _=e;_<r;_++)this.paintVertexArray.emplace(_,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Un.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Un.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var On=function(e,r,s,p,v,_){this.expression=e,this.uniformNames=r.map(function(A){return"u_"+A+"_t"}),this.type=s,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=r.map(function(A){return{name:"a_"+A,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new _};On.prototype.populatePaintArray=function(e,r,s,p,v){var _=this.expression.evaluate(new Rn(this.zoom),r,{},p,[],v),A=this.expression.evaluate(new Rn(this.zoom+1),r,{},p,[],v),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,_,A)},On.prototype.updatePaintArray=function(e,r,s,p){var v=this.expression.evaluate({zoom:this.zoom},s,p),_=this.expression.evaluate({zoom:this.zoom+1},s,p);this._setPaintValue(e,r,v,_)},On.prototype._setPaintValue=function(e,r,s,p){if(this.type==="color")for(var v=Je(s),_=Je(p),A=e;A<r;A++)this.paintVertexArray.emplace(A,v[0],v[1],_[0],_[1]);else{for(var S=e;S<r;S++)this.paintVertexArray.emplace(S,s,p);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(p))}},On.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},On.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},On.prototype.setUniform=function(e,r){var s=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,p=nt(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);e.set(p)},On.prototype.getBinding=function(e,r,s){return new Ce(e,r)};var ti=function(e,r,s,p,v,_){this.expression=e,this.type=r,this.useIntegerZoom=s,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v};ti.prototype.populatePaintArray=function(e,r,s){var p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(p,e,r.patterns&&r.patterns[this.layerId],s)},ti.prototype.updatePaintArray=function(e,r,s,p,v){this._setPaintValues(e,r,s.patterns&&s.patterns[this.layerId],v)},ti.prototype._setPaintValues=function(e,r,s,p){if(p&&s){var v=p[s.min],_=p[s.mid],A=p[s.max];if(v&&_&&A)for(var S=e;S<r;S++)this.zoomInPaintVertexArray.emplace(S,_.tl[0],_.tl[1],_.br[0],_.br[1],v.tl[0],v.tl[1],v.br[0],v.br[1],_.pixelRatio,v.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,_.tl[0],_.tl[1],_.br[0],_.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],_.pixelRatio,A.pixelRatio)}},ti.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,gt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,gt.members,this.expression.isStateDependent))},ti.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Bn=function(e,r,s){this.binders={},this._buffers=[];var p=[];for(var v in e.paint._values)if(s(v)){var _=e.paint.get(v);if(_ instanceof Lo&&zo(_.property.specification)){var A=po(v,e.type),S=_.value,D=_.property.specification.type,B=_.property.useIntegerZoom,N=_.property.specification["property-type"],V=N==="cross-faded"||N==="cross-faded-data-driven";if(S.kind==="constant")this.binders[v]=V?new Jn(S.value,A):new kn(S.value,A,D),p.push("/u_"+v);else if(S.kind==="source"||V){var Z=Xr(v,D,"source");this.binders[v]=V?new ti(S,D,B,r,Z,e.id):new Un(S,A,D,Z),p.push("/a_"+v)}else{var J=Xr(v,D,"composite");this.binders[v]=new On(S,A,D,B,r,J),p.push("/z_"+v)}}}this.cacheKey=p.sort().join("")};Bn.prototype.getMaxValue=function(e){var r=this.binders[e];return r instanceof Un||r instanceof On?r.maxValue:0},Bn.prototype.populatePaintArrays=function(e,r,s,p,v){for(var _ in this.binders){var A=this.binders[_];(A instanceof Un||A instanceof On||A instanceof ti)&&A.populatePaintArray(e,r,s,p,v)}},Bn.prototype.setConstantPatternPositions=function(e,r){for(var s in this.binders){var p=this.binders[s];p instanceof Jn&&p.setConstantPatternPositions(e,r)}},Bn.prototype.updatePaintArrays=function(e,r,s,p,v){var _=!1;for(var A in e)for(var S=0,D=r.getPositions(A);S<D.length;S+=1){var B=D[S],N=s.feature(B.index);for(var V in this.binders){var Z=this.binders[V];if((Z instanceof Un||Z instanceof On||Z instanceof ti)&&Z.expression.isStateDependent===!0){var J=p.paint.get(V);Z.expression=J.value,Z.updatePaintArray(B.start,B.end,N,e[A],v),_=!0}}}return _},Bn.prototype.defines=function(){var e=[];for(var r in this.binders){var s=this.binders[r];(s instanceof kn||s instanceof Jn)&&e.push.apply(e,s.uniformNames.map(function(p){return"#define HAS_UNIFORM_"+p}))}return e},Bn.prototype.getBinderAttributes=function(){var e=[];for(var r in this.binders){var s=this.binders[r];if(s instanceof Un||s instanceof On)for(var p=0;p<s.paintVertexAttributes.length;p++)e.push(s.paintVertexAttributes[p].name);else if(s instanceof ti)for(var v=0;v<gt.members.length;v++)e.push(gt.members[v].name)}return e},Bn.prototype.getBinderUniforms=function(){var e=[];for(var r in this.binders){var s=this.binders[r];if(s instanceof kn||s instanceof Jn||s instanceof On)for(var p=0,v=s.uniformNames;p<v.length;p+=1)e.push(v[p])}return e},Bn.prototype.getPaintVertexBuffers=function(){return this._buffers},Bn.prototype.getUniforms=function(e,r){var s=[];for(var p in this.binders){var v=this.binders[p];if(v instanceof kn||v instanceof Jn||v instanceof On)for(var _=0,A=v.uniformNames;_<A.length;_+=1){var S=A[_];if(r[S]){var D=v.getBinding(e,r[S],S);s.push({name:S,property:p,binding:D})}}}return s},Bn.prototype.setUniforms=function(e,r,s,p){for(var v=0,_=r;v<_.length;v+=1){var A=_[v],S=A.name,D=A.property;this.binders[D].setUniform(A.binding,p,s.get(D),S)}},Bn.prototype.updatePaintBuffers=function(e){for(var r in this._buffers=[],this.binders){var s=this.binders[r];if(e&&s instanceof ti){var p=e.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(s instanceof Un||s instanceof On)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},Bn.prototype.upload=function(e){for(var r in this.binders){var s=this.binders[r];(s instanceof Un||s instanceof On||s instanceof ti)&&s.upload(e)}this.updatePaintBuffers()},Bn.prototype.destroy=function(){for(var e in this.binders){var r=this.binders[e];(r instanceof Un||r instanceof On||r instanceof ti)&&r.destroy()}};var dn=function(e,r,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var p=0,v=e;p<v.length;p+=1){var _=v[p];this.programConfigurations[_.id]=new Bn(_,r,s)}this.needsUpload=!1,this._featureMap=new Lt,this._bufferOffset=0};function po(e,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(r+"-","").replace(/-/g,"_")]}function Xr(e,r,s){var p={color:{source:na,composite:ks},number:{source:zu,composite:na}},v=function(_){return{"line-pattern":{source:di,composite:di},"fill-pattern":{source:di,composite:di},"fill-extrusion-pattern":{source:di,composite:di}}[_]}(e);return v&&v[s]||p[r][s]}dn.prototype.populatePaintArrays=function(e,r,s,p,v,_){for(var A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(e,r,p,v,_);r.id!==void 0&&this._featureMap.add(r.id,s,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},dn.prototype.updatePaintArrays=function(e,r,s,p){for(var v=0,_=s;v<_.length;v+=1){var A=_[v];this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(e,this._featureMap,r,A,p)||this.needsUpload}},dn.prototype.get=function(e){return this.programConfigurations[e]},dn.prototype.upload=function(e){if(this.needsUpload){for(var r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}},dn.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Ye("ConstantBinder",kn),Ye("CrossFadedConstantBinder",Jn),Ye("SourceExpressionBinder",Un),Ye("CrossFadedCompositeBinder",ti),Ye("CompositeExpressionBinder",On),Ye("ProgramConfiguration",Bn,{omit:["_buffers"]}),Ye("ProgramConfigurationSet",dn);var Ur=Math.pow(2,14)-1,bo=-Ur-1;function Cr(e){for(var r=8192/e.extent,s=e.loadGeometry(),p=0;p<s.length;p++)for(var v=s[p],_=0;_<v.length;_++){var A=v[_],S=Math.round(A.x*r),D=Math.round(A.y*r);A.x=nt(S,bo,Ur),A.y=nt(D,bo,Ur),(S<A.x||S>A.x+1||D<A.y||D>A.y+1)&&Bt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function yr(e,r){return{type:e.type,id:e.id,properties:e.properties,geometry:r?Cr(e):[]}}function Oa(e,r,s,p,v){e.emplaceBack(2*r+(p+1)/2,2*s+(v+1)/2)}var dr=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new ku,this.indexArray=new Du,this.segments=new it,this.programConfigurations=new dn(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function Ml(e,r){for(var s=0;s<e.length;s++)if(El(r,e[s]))return!0;for(var p=0;p<r.length;p++)if(El(e,r[p]))return!0;return!!cc(e,r)}function Ba(e,r,s){return!!El(e,r)||!!Rs(r,e,s)}function el(e,r){if(e.length===1)return bh(r,e[0]);for(var s=0;s<r.length;s++)for(var p=r[s],v=0;v<p.length;v++)if(El(e,p[v]))return!0;for(var _=0;_<e.length;_++)if(bh(r,e[_]))return!0;for(var A=0;A<r.length;A++)if(cc(e,r[A]))return!0;return!1}function Ds(e,r,s){if(e.length>1){if(cc(e,r))return!0;for(var p=0;p<r.length;p++)if(Rs(r[p],e,s))return!0}for(var v=0;v<e.length;v++)if(Rs(e[v],r,s))return!0;return!1}function cc(e,r){if(e.length===0||r.length===0)return!1;for(var s=0;s<e.length-1;s++)for(var p=e[s],v=e[s+1],_=0;_<r.length-1;_++)if(Hc(p,v,r[_],r[_+1]))return!0;return!1}function Hc(e,r,s,p){return de(e,s,p)!==de(r,s,p)&&de(e,r,s)!==de(e,r,p)}function Rs(e,r,s){var p=s*s;if(r.length===1)return e.distSqr(r[0])<p;for(var v=1;v<r.length;v++)if(hc(e,r[v-1],r[v])<p)return!0;return!1}function hc(e,r,s){var p=r.distSqr(s);if(p===0)return e.distSqr(r);var v=((e.x-r.x)*(s.x-r.x)+(e.y-r.y)*(s.y-r.y))/p;return e.distSqr(v<0?r:v>1?s:s.sub(r)._mult(v)._add(r))}function bh(e,r){for(var s,p,v,_=!1,A=0;A<e.length;A++)for(var S=0,D=(s=e[A]).length-1;S<s.length;D=S++)(p=s[S]).y>r.y!=(v=s[D]).y>r.y&&r.x<(v.x-p.x)*(r.y-p.y)/(v.y-p.y)+p.x&&(_=!_);return _}function El(e,r){for(var s=!1,p=0,v=e.length-1;p<e.length;v=p++){var _=e[p],A=e[v];_.y>r.y!=A.y>r.y&&r.x<(A.x-_.x)*(r.y-_.y)/(A.y-_.y)+_.x&&(s=!s)}return s}function Jl(e,r,s){var p=s[0],v=s[2];if(e.x<p.x&&r.x<p.x||e.x>v.x&&r.x>v.x||e.y<p.y&&r.y<p.y||e.y>v.y&&r.y>v.y)return!1;var _=de(e,r,s[0]);return _!==de(e,r,s[1])||_!==de(e,r,s[2])||_!==de(e,r,s[3])}function Sl(e,r,s){var p=r.paint.get(e).value;return p.kind==="constant"?p.value:s.programConfigurations.get(r.id).getMaxValue(e)}function ko(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function nl(e,r,s,p,v){if(!r[0]&&!r[1])return e;var _=T.convert(r)._mult(v);s==="viewport"&&_._rotate(-p);for(var A=[],S=0;S<e.length;S++)A.push(e[S].sub(_));return A}dr.prototype.populate=function(e,r,s){var p=this.layers[0],v=[],_=null;p.type==="circle"&&(_=p.layout.get("circle-sort-key"));for(var A=0,S=e;A<S.length;A+=1){var D=S[A],B=D.feature,N=D.id,V=D.index,Z=D.sourceLayerIndex,J=this.layers[0]._featureFilter.needGeometry,ct=yr(B,J);if(this.layers[0]._featureFilter.filter(new Rn(this.zoom),ct,s)){var pt=_?_.evaluate(ct,{},s):void 0,It={id:N,properties:B.properties,type:B.type,sourceLayerIndex:Z,index:V,geometry:J?ct.geometry:Cr(B),patterns:{},sortKey:pt};v.push(It)}}_&&v.sort(function(Be,yn){return Be.sortKey-yn.sortKey});for(var _t=0,Vt=v;_t<Vt.length;_t+=1){var Yt=Vt[_t],Jt=Yt.geometry,ee=Yt.index,fe=Yt.sourceLayerIndex,Me=e[ee].feature;this.addFeature(Yt,Jt,ee,s),r.featureIndex.insert(Me,Jt,ee,fe,this.index)}},dr.prototype.update=function(e,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,s)},dr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},dr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},dr.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,et),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},dr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},dr.prototype.addFeature=function(e,r,s,p){for(var v=0,_=r;v<_.length;v+=1)for(var A=0,S=_[v];A<S.length;A+=1){var D=S[A],B=D.x,N=D.y;if(!(B<0||B>=8192||N<0||N>=8192)){var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),Z=V.vertexLength;Oa(this.layoutVertexArray,B,N,-1,-1),Oa(this.layoutVertexArray,B,N,1,-1),Oa(this.layoutVertexArray,B,N,1,1),Oa(this.layoutVertexArray,B,N,-1,1),this.indexArray.emplaceBack(Z,Z+1,Z+2),this.indexArray.emplaceBack(Z,Z+3,Z+2),V.vertexLength+=4,V.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,{},p)},Ye("CircleBucket",dr,{omit:["layers"]});var tu=new Xo({"circle-sort-key":new un(tt.layout_circle["circle-sort-key"])}),fc={paint:new Xo({"circle-radius":new un(tt.paint_circle["circle-radius"]),"circle-color":new un(tt.paint_circle["circle-color"]),"circle-blur":new un(tt.paint_circle["circle-blur"]),"circle-opacity":new un(tt.paint_circle["circle-opacity"]),"circle-translate":new vn(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new vn(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vn(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vn(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new un(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new un(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new un(tt.paint_circle["circle-stroke-opacity"])}),layout:tu},Yi=typeof Float32Array<"u"?Float32Array:Array;function fs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xa(e,r,s){var p=r[0],v=r[1],_=r[2],A=r[3],S=r[4],D=r[5],B=r[6],N=r[7],V=r[8],Z=r[9],J=r[10],ct=r[11],pt=r[12],It=r[13],_t=r[14],Vt=r[15],Yt=s[0],Jt=s[1],ee=s[2],fe=s[3];return e[0]=Yt*p+Jt*S+ee*V+fe*pt,e[1]=Yt*v+Jt*D+ee*Z+fe*It,e[2]=Yt*_+Jt*B+ee*J+fe*_t,e[3]=Yt*A+Jt*N+ee*ct+fe*Vt,e[4]=(Yt=s[4])*p+(Jt=s[5])*S+(ee=s[6])*V+(fe=s[7])*pt,e[5]=Yt*v+Jt*D+ee*Z+fe*It,e[6]=Yt*_+Jt*B+ee*J+fe*_t,e[7]=Yt*A+Jt*N+ee*ct+fe*Vt,e[8]=(Yt=s[8])*p+(Jt=s[9])*S+(ee=s[10])*V+(fe=s[11])*pt,e[9]=Yt*v+Jt*D+ee*Z+fe*It,e[10]=Yt*_+Jt*B+ee*J+fe*_t,e[11]=Yt*A+Jt*N+ee*ct+fe*Vt,e[12]=(Yt=s[12])*p+(Jt=s[13])*S+(ee=s[14])*V+(fe=s[15])*pt,e[13]=Yt*v+Jt*D+ee*Z+fe*It,e[14]=Yt*_+Jt*B+ee*J+fe*_t,e[15]=Yt*A+Jt*N+ee*ct+fe*Vt,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,r=0,s=arguments.length;s--;)r+=e[s]*e[s];return Math.sqrt(r)});var eu,Nm=xa;function Gc(e,r,s){var p=r[0],v=r[1],_=r[2],A=r[3];return e[0]=s[0]*p+s[4]*v+s[8]*_+s[12]*A,e[1]=s[1]*p+s[5]*v+s[9]*_+s[13]*A,e[2]=s[2]*p+s[6]*v+s[10]*_+s[14]*A,e[3]=s[3]*p+s[7]*v+s[11]*_+s[15]*A,e}eu=new Yi(3),Yi!=Float32Array&&(eu[0]=0,eu[1]=0,eu[2]=0),function(){var e=new Yi(4);Yi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var cd=(function(){var e=new Yi(2);Yi!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function r(s){e.call(this,s,fc)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(s){return new dr(s)},r.prototype.queryRadius=function(s){var p=s;return Sl("circle-radius",this,p)+Sl("circle-stroke-width",this,p)+ko(this.paint.get("circle-translate"))},r.prototype.queryIntersectsFeature=function(s,p,v,_,A,S,D,B){for(var N=nl(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,D),V=this.paint.get("circle-radius").evaluate(p,v)+this.paint.get("circle-stroke-width").evaluate(p,v),Z=this.paint.get("circle-pitch-alignment")==="map",J=Z?N:function(Me,Be){return Me.map(function(yn){return qc(yn,Be)})}(N,B),ct=Z?V*D:V,pt=0,It=_;pt<It.length;pt+=1)for(var _t=0,Vt=It[pt];_t<Vt.length;_t+=1){var Yt=Vt[_t],Jt=Z?Yt:qc(Yt,B),ee=ct,fe=Gc([],[Yt.x,Yt.y,0,1],B);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ee*=fe[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ee*=S.cameraToCenterDistance/fe[3]),Ba(J,Jt,ee))return!0}return!1},r}(Il));function qc(e,r){var s=Gc([],[e.x,e.y,0,1],r);return new T(s[0]/s[3],s[1]/s[3])}var yp=function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(dr);function nu(e,r,s,p){var v=r.width,_=r.height;if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==v*_*s)throw new RangeError("mismatched image size")}else p=new Uint8Array(v*_*s);return e.width=v,e.height=_,e.data=p,e}function gf(e,r,s){var p=r.width,v=r.height;if(p!==e.width||v!==e.height){var _=nu({},{width:p,height:v},s);hd(e,_,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,p),height:Math.min(e.height,v)},s),e.width=p,e.height=v,e.data=_.data}}function hd(e,r,s,p,v,_){if(v.width===0||v.height===0)return r;if(v.width>e.width||v.height>e.height||s.x>e.width-v.width||s.y>e.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>r.width||v.height>r.height||p.x>r.width-v.width||p.y>r.height-v.height)throw new RangeError("out of range destination coordinates for image copy");for(var A=e.data,S=r.data,D=0;D<v.height;D++)for(var B=((s.y+D)*e.width+s.x)*_,N=((p.y+D)*r.width+p.x)*_,V=0;V<v.width*_;V++)S[N+V]=A[B+V];return r}Ye("HeatmapBucket",yp,{omit:["layers"]});var Wc=function(e,r){nu(this,e,1,r)};Wc.prototype.resize=function(e){gf(this,e,1)},Wc.prototype.clone=function(){return new Wc({width:this.width,height:this.height},new Uint8Array(this.data))},Wc.copy=function(e,r,s,p,v){hd(e,r,s,p,v,1)};var Xa=function(e,r){nu(this,e,4,r)};Xa.prototype.resize=function(e){gf(this,e,4)},Xa.prototype.replace=function(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},Xa.prototype.clone=function(){return new Xa({width:this.width,height:this.height},new Uint8Array(this.data))},Xa.copy=function(e,r,s,p,v){hd(e,r,s,p,v,4)},Ye("AlphaImage",Wc),Ye("RGBAImage",Xa);var kv={paint:new Xo({"heatmap-radius":new un(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new un(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vn(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _a(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vn(tt.paint_heatmap["heatmap-opacity"])})};function Dv(e){var r={},s=e.resolution||256,p=e.clips?e.clips.length:1,v=e.image||new Xa({width:s,height:p}),_=function(ct,pt,It){r[e.evaluationKey]=It;var _t=e.expression.evaluate(r);v.data[ct+pt+0]=Math.floor(255*_t.r/_t.a),v.data[ct+pt+1]=Math.floor(255*_t.g/_t.a),v.data[ct+pt+2]=Math.floor(255*_t.b/_t.a),v.data[ct+pt+3]=Math.floor(255*_t.a)};if(e.clips)for(var A=0,S=0;A<p;++A,S+=4*s)for(var D=0,B=0;D<s;D++,B+=4){var N=D/(s-1),V=e.clips[A];_(S,B,V.start*(1-N)+V.end*N)}else for(var Z=0,J=0;Z<s;Z++,J+=4)_(0,J,Z/(s-1));return v}var Vm=function(e){function r(s){e.call(this,s,kv),this._updateColorRamp()}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(s){return new yp(s)},r.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},r.prototype._updateColorRamp=function(){this.colorRamp=Dv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},r.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},r}(Il),Rv={paint:new Xo({"hillshade-illumination-direction":new vn(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vn(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vn(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vn(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vn(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vn(tt.paint_hillshade["hillshade-accent-color"])})},Um=function(e){function r(s){e.call(this,s,Rv)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},r}(Il),M_=fo([{name:"a_pos",components:2,type:"Int16"}],4).members,_p=fd,Hi=fd;function fd(e,r,s){s=s||2;var p,v,_,A,S,D,B,N=r&&r.length,V=N?r[0]*s:e.length,Z=zv(e,0,V,s,!0),J=[];if(!Z||Z.next===Z.prev)return J;if(N&&(Z=function(pt,It,_t,Vt){var Yt,Jt,ee,fe=[];for(Yt=0,Jt=It.length;Yt<Jt;Yt++)(ee=zv(pt,It[Yt]*Vt,Yt<Jt-1?It[Yt+1]*Vt:pt.length,Vt,!1))===ee.next&&(ee.steiner=!0),fe.push(il(ee));for(fe.sort(pd),Yt=0;Yt<fe.length;Yt++)jm(fe[Yt],_t),_t=Tl(_t,_t.next);return _t}(e,r,Z,s)),e.length>80*s){p=_=e[0],v=A=e[1];for(var ct=s;ct<V;ct+=s)(S=e[ct])<p&&(p=S),(D=e[ct+1])<v&&(v=D),S>_&&(_=S),D>A&&(A=D);B=(B=Math.max(_-p,A-v))!==0?1/B:0}return vf(Z,J,s,p,v,B),J}function zv(e,r,s,p,v){var _,A;if(v===gd(e,r,s,p)>0)for(_=r;_<s;_+=p)A=pc(_,e[_],e[_+1],A);else for(_=s-p;_>=r;_-=p)A=pc(_,e[_],e[_+1],A);return A&&Ah(A,A.next)&&(bp(A),A=A.next),A}function Tl(e,r){if(!e)return e;r||(r=e);var s,p=e;do if(s=!1,p.steiner||!Ah(p,p.next)&&mo(p.prev,p,p.next)!==0)p=p.next;else{if(bp(p),(p=r=p.prev)===p.next)break;s=!0}while(s||p!==r);return r}function vf(e,r,s,p,v,_,A){if(e){!A&&_&&function(N,V,Z,J){var ct=N;do ct.z===null&&(ct.z=dd(ct.x,ct.y,V,Z,J)),ct.prevZ=ct.prev,ct.nextZ=ct.next,ct=ct.next;while(ct!==N);ct.prevZ.nextZ=null,ct.prevZ=null,function(pt){var It,_t,Vt,Yt,Jt,ee,fe,Me,Be=1;do{for(_t=pt,pt=null,Jt=null,ee=0;_t;){for(ee++,Vt=_t,fe=0,It=0;It<Be&&(fe++,Vt=Vt.nextZ);It++);for(Me=Be;fe>0||Me>0&&Vt;)fe!==0&&(Me===0||!Vt||_t.z<=Vt.z)?(Yt=_t,_t=_t.nextZ,fe--):(Yt=Vt,Vt=Vt.nextZ,Me--),Jt?Jt.nextZ=Yt:pt=Yt,Yt.prevZ=Jt,Jt=Yt;_t=Vt}Jt.nextZ=null,Be*=2}while(ee>1)}(ct)}(e,p,v,_);for(var S,D,B=e;e.prev!==e.next;)if(S=e.prev,D=e.next,_?S_(e,p,v,_):E_(e))r.push(S.i/s),r.push(e.i/s),r.push(D.i/s),bp(e),e=D.next,B=D.next;else if((e=D)===B){A?A===1?vf(e=Pl(Tl(e),r,s),r,s,p,v,_,2):A===2&&T_(e,r,s,p,v,_):vf(Tl(e),r,s,p,v,_,1);break}}}function E_(e){var r=e.prev,s=e,p=e.next;if(mo(r,s,p)>=0)return!1;for(var v=e.next.next;v!==e.prev;){if(rl(r.x,r.y,s.x,s.y,p.x,p.y,v.x,v.y)&&mo(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function S_(e,r,s,p){var v=e.prev,_=e,A=e.next;if(mo(v,_,A)>=0)return!1;for(var S=v.x>_.x?v.x>A.x?v.x:A.x:_.x>A.x?_.x:A.x,D=v.y>_.y?v.y>A.y?v.y:A.y:_.y>A.y?_.y:A.y,B=dd(v.x<_.x?v.x<A.x?v.x:A.x:_.x<A.x?_.x:A.x,v.y<_.y?v.y<A.y?v.y:A.y:_.y<A.y?_.y:A.y,r,s,p),N=dd(S,D,r,s,p),V=e.prevZ,Z=e.nextZ;V&&V.z>=B&&Z&&Z.z<=N;){if(V!==e.prev&&V!==e.next&&rl(v.x,v.y,_.x,_.y,A.x,A.y,V.x,V.y)&&mo(V.prev,V,V.next)>=0||(V=V.prevZ,Z!==e.prev&&Z!==e.next&&rl(v.x,v.y,_.x,_.y,A.x,A.y,Z.x,Z.y)&&mo(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;V&&V.z>=B;){if(V!==e.prev&&V!==e.next&&rl(v.x,v.y,_.x,_.y,A.x,A.y,V.x,V.y)&&mo(V.prev,V,V.next)>=0)return!1;V=V.prevZ}for(;Z&&Z.z<=N;){if(Z!==e.prev&&Z!==e.next&&rl(v.x,v.y,_.x,_.y,A.x,A.y,Z.x,Z.y)&&mo(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function Pl(e,r,s){var p=e;do{var v=p.prev,_=p.next.next;!Ah(v,_)&&Gm(v,p,p.next,_)&&wh(v,_)&&wh(_,v)&&(r.push(v.i/s),r.push(p.i/s),r.push(_.i/s),bp(p),bp(p.next),p=e=_),p=p.next}while(p!==e);return Tl(p)}function T_(e,r,s,p,v,_){var A=e;do{for(var S=A.next.next;S!==A.prev;){if(A.i!==S.i&&Hm(A,S)){var D=md(A,S);return A=Tl(A,A.next),D=Tl(D,D.next),vf(A,r,s,p,v,_),void vf(D,r,s,p,v,_)}S=S.next}A=A.next}while(A!==e)}function pd(e,r){return e.x-r.x}function jm(e,r){if(r=function(p,v){var _,A=v,S=p.x,D=p.y,B=-1/0;do{if(D<=A.y&&D>=A.next.y&&A.next.y!==A.y){var N=A.x+(D-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(N<=S&&N>B){if(B=N,N===S){if(D===A.y)return A;if(D===A.next.y)return A.next}_=A.x<A.next.x?A:A.next}}A=A.next}while(A!==v);if(!_)return null;if(S===B)return _;var V,Z=_,J=_.x,ct=_.y,pt=1/0;A=_;do S>=A.x&&A.x>=J&&S!==A.x&&rl(D<ct?S:B,D,J,ct,D<ct?B:S,D,A.x,A.y)&&(V=Math.abs(D-A.y)/(S-A.x),wh(A,p)&&(V<pt||V===pt&&(A.x>_.x||A.x===_.x&&Ov(_,A)))&&(_=A,pt=V)),A=A.next;while(A!==Z);return _}(e,r)){var s=md(r,e);Tl(r,r.next),Tl(s,s.next)}}function Ov(e,r){return mo(e.prev,e,r.prev)<0&&mo(r.next,e,e.next)<0}function dd(e,r,s,p,v){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)*v)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-p)*v)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function il(e){var r=e,s=e;do(r.x<s.x||r.x===s.x&&r.y<s.y)&&(s=r),r=r.next;while(r!==e);return s}function rl(e,r,s,p,v,_,A,S){return(v-A)*(r-S)-(e-A)*(_-S)>=0&&(e-A)*(p-S)-(s-A)*(r-S)>=0&&(s-A)*(_-S)-(v-A)*(p-S)>=0}function Hm(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!function(s,p){var v=s;do{if(v.i!==s.i&&v.next.i!==s.i&&v.i!==p.i&&v.next.i!==p.i&&Gm(v,v.next,s,p))return!0;v=v.next}while(v!==s);return!1}(e,r)&&(wh(e,r)&&wh(r,e)&&function(s,p){var v=s,_=!1,A=(s.x+p.x)/2,S=(s.y+p.y)/2;do v.y>S!=v.next.y>S&&v.next.y!==v.y&&A<(v.next.x-v.x)*(S-v.y)/(v.next.y-v.y)+v.x&&(_=!_),v=v.next;while(v!==s);return _}(e,r)&&(mo(e.prev,e,r.prev)||mo(e,r.prev,r))||Ah(e,r)&&mo(e.prev,e,e.next)>0&&mo(r.prev,r,r.next)>0)}function mo(e,r,s){return(r.y-e.y)*(s.x-r.x)-(r.x-e.x)*(s.y-r.y)}function Ah(e,r){return e.x===r.x&&e.y===r.y}function Gm(e,r,s,p){var v=xp(mo(e,r,s)),_=xp(mo(e,r,p)),A=xp(mo(s,p,e)),S=xp(mo(s,p,r));return v!==_&&A!==S||!(v!==0||!yf(e,s,r))||!(_!==0||!yf(e,p,r))||!(A!==0||!yf(s,e,p))||!(S!==0||!yf(s,r,p))}function yf(e,r,s){return r.x<=Math.max(e.x,s.x)&&r.x>=Math.min(e.x,s.x)&&r.y<=Math.max(e.y,s.y)&&r.y>=Math.min(e.y,s.y)}function xp(e){return e>0?1:e<0?-1:0}function wh(e,r){return mo(e.prev,e,e.next)<0?mo(e,r,e.next)>=0&&mo(e,e.prev,r)>=0:mo(e,r,e.prev)<0||mo(e,e.next,r)<0}function md(e,r){var s=new Ou(e.i,e.x,e.y),p=new Ou(r.i,r.x,r.y),v=e.next,_=r.prev;return e.next=r,r.prev=e,s.next=v,v.prev=s,p.next=s,s.prev=p,_.next=p,p.prev=_,p}function pc(e,r,s,p){var v=new Ou(e,r,s);return p?(v.next=p.next,v.prev=p,p.next.prev=v,p.next=v):(v.prev=v,v.next=v),v}function bp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ou(e,r,s){this.i=e,this.x=r,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function gd(e,r,s,p){for(var v=0,_=r,A=s-p;_<s;_+=p)v+=(e[A]-e[_])*(e[_+1]+e[A+1]),A=_;return v}function Bv(e,r,s,p,v){(function _(A,S,D,B,N){for(;B>D;){if(B-D>600){var V=B-D+1,Z=S-D+1,J=Math.log(V),ct=.5*Math.exp(2*J/3),pt=.5*Math.sqrt(J*ct*(V-ct)/V)*(Z-V/2<0?-1:1);_(A,S,Math.max(D,Math.floor(S-Z*ct/V+pt)),Math.min(B,Math.floor(S+(V-Z)*ct/V+pt)),N)}var It=A[S],_t=D,Vt=B;for(Ch(A,D,S),N(A[B],It)>0&&Ch(A,D,B);_t<Vt;){for(Ch(A,_t,Vt),_t++,Vt--;N(A[_t],It)<0;)_t++;for(;N(A[Vt],It)>0;)Vt--}N(A[D],It)===0?Ch(A,D,Vt):Ch(A,++Vt,B),Vt<=S&&(D=Vt+1),S<=Vt&&(B=Vt-1)}})(e,r,s,p||e.length-1,v||P_)}function Ch(e,r,s){var p=e[r];e[r]=e[s],e[s]=p}function P_(e,r){return e<r?-1:e>r?1:0}function qm(e,r){var s=e.length;if(s<=1)return[e];for(var p,v,_=[],A=0;A<s;A++){var S=bn(e[A]);S!==0&&(e[A].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(p&&_.push(p),p=[e[A]]):p.push(e[A]))}if(p&&_.push(p),r>1)for(var D=0;D<_.length;D++)_[D].length<=r||(Bv(_[D],r,1,_[D].length-1,L_),_[D]=_[D].slice(0,r));return _}function L_(e,r){return r.area-e.area}function vd(e,r,s){for(var p=s.patternDependencies,v=!1,_=0,A=r;_<A.length;_+=1){var S=A[_].paint.get(e+"-pattern");S.isConstant()||(v=!0);var D=S.constantOr(null);D&&(v=!0,p[D.to]=!0,p[D.from]=!0)}return v}function yd(e,r,s,p,v){for(var _=v.patternDependencies,A=0,S=r;A<S.length;A+=1){var D=S[A],B=D.paint.get(e+"-pattern").value;if(B.kind!=="constant"){var N=B.evaluate({zoom:p-1},s,{},v.availableImages),V=B.evaluate({zoom:p},s,{},v.availableImages),Z=B.evaluate({zoom:p+1},s,{},v.availableImages);V=V&&V.name?V.name:V,Z=Z&&Z.name?Z.name:Z,_[N=N&&N.name?N.name:N]=!0,_[V]=!0,_[Z]=!0,s.patterns[D.id]={min:N,mid:V,max:Z}}}return s}fd.deviation=function(e,r,s,p){var v=r&&r.length,_=Math.abs(gd(e,0,v?r[0]*s:e.length,s));if(v)for(var A=0,S=r.length;A<S;A++)_-=Math.abs(gd(e,r[A]*s,A<S-1?r[A+1]*s:e.length,s));var D=0;for(A=0;A<p.length;A+=3){var B=p[A]*s,N=p[A+1]*s,V=p[A+2]*s;D+=Math.abs((e[B]-e[V])*(e[N+1]-e[B+1])-(e[B]-e[N])*(e[V+1]-e[B+1]))}return _===0&&D===0?0:Math.abs((D-_)/_)},fd.flatten=function(e){for(var r=e[0][0].length,s={vertices:[],holes:[],dimensions:r},p=0,v=0;v<e.length;v++){for(var _=0;_<e[v].length;_++)for(var A=0;A<r;A++)s.vertices.push(e[v][_][A]);v>0&&s.holes.push(p+=e[v-1].length)}return s},_p.default=Hi;var iu=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ku,this.indexArray=new Du,this.indexArray2=new xh,this.programConfigurations=new dn(e.layers,e.zoom),this.segments=new it,this.segments2=new it,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};iu.prototype.populate=function(e,r,s){this.hasPattern=vd("fill",this.layers,r);for(var p=this.layers[0].layout.get("fill-sort-key"),v=[],_=0,A=e;_<A.length;_+=1){var S=A[_],D=S.feature,B=S.id,N=S.index,V=S.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,J=yr(D,Z);if(this.layers[0]._featureFilter.filter(new Rn(this.zoom),J,s)){var ct=p?p.evaluate(J,{},s,r.availableImages):void 0,pt={id:B,properties:D.properties,type:D.type,sourceLayerIndex:V,index:N,geometry:Z?J.geometry:Cr(D),patterns:{},sortKey:ct};v.push(pt)}}p&&v.sort(function(Me,Be){return Me.sortKey-Be.sortKey});for(var It=0,_t=v;It<_t.length;It+=1){var Vt=_t[It],Yt=Vt.geometry,Jt=Vt.index,ee=Vt.sourceLayerIndex;if(this.hasPattern){var fe=yd("fill",this.layers,Vt,this.zoom,r);this.patternFeatures.push(fe)}else this.addFeature(Vt,Yt,Jt,s,{});r.featureIndex.insert(e[Jt].feature,Yt,Jt,ee,this.index)}},iu.prototype.update=function(e,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,s)},iu.prototype.addFeatures=function(e,r,s){for(var p=0,v=this.patternFeatures;p<v.length;p+=1){var _=v[p];this.addFeature(_,_.geometry,_.index,r,s)}},iu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},iu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},iu.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,M_),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},iu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},iu.prototype.addFeature=function(e,r,s,p,v){for(var _=0,A=qm(r,500);_<A.length;_+=1){for(var S=A[_],D=0,B=0,N=S;B<N.length;B+=1)D+=N[B].length;for(var V=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),Z=V.vertexLength,J=[],ct=[],pt=0,It=S;pt<It.length;pt+=1){var _t=It[pt];if(_t.length!==0){_t!==S[0]&&ct.push(J.length/2);var Vt=this.segments2.prepareSegment(_t.length,this.layoutVertexArray,this.indexArray2),Yt=Vt.vertexLength;this.layoutVertexArray.emplaceBack(_t[0].x,_t[0].y),this.indexArray2.emplaceBack(Yt+_t.length-1,Yt),J.push(_t[0].x),J.push(_t[0].y);for(var Jt=1;Jt<_t.length;Jt++)this.layoutVertexArray.emplaceBack(_t[Jt].x,_t[Jt].y),this.indexArray2.emplaceBack(Yt+Jt-1,Yt+Jt),J.push(_t[Jt].x),J.push(_t[Jt].y);Vt.vertexLength+=_t.length,Vt.primitiveLength+=_t.length}}for(var ee=_p(J,ct),fe=0;fe<ee.length;fe+=3)this.indexArray.emplaceBack(Z+ee[fe],Z+ee[fe+1],Z+ee[fe+2]);V.vertexLength+=D,V.primitiveLength+=ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,v,p)},Ye("FillBucket",iu,{omit:["layers","patternFeatures"]});var Fv=new Xo({"fill-sort-key":new un(tt.layout_fill["fill-sort-key"])}),Nv={paint:new Xo({"fill-antialias":new vn(tt.paint_fill["fill-antialias"]),"fill-opacity":new un(tt.paint_fill["fill-opacity"]),"fill-color":new un(tt.paint_fill["fill-color"]),"fill-outline-color":new un(tt.paint_fill["fill-outline-color"]),"fill-translate":new vn(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new vn(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Lu(tt.paint_fill["fill-pattern"])}),layout:Fv},zs=function(e){function r(s){e.call(this,s,Nv)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(s,p){e.prototype.recalculate.call(this,s,p);var v=this.paint._values["fill-outline-color"];v.value.kind==="constant"&&v.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},r.prototype.createBucket=function(s){return new iu(s)},r.prototype.queryRadius=function(){return ko(this.paint.get("fill-translate"))},r.prototype.queryIntersectsFeature=function(s,p,v,_,A,S,D){return el(nl(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,D),_)},r.prototype.isTileClipped=function(){return!0},r}(Il),Bu=fo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Vv=_f;function _f(e,r,s,p,v){this.properties={},this.extent=s,this.type=0,this._pbf=e,this._geometry=-1,this._keys=p,this._values=v,e.readFields(_d,this,r)}function _d(e,r,s){e==1?r.id=s.readVarint():e==2?function(p,v){for(var _=p.readVarint()+p.pos;p.pos<_;){var A=v._keys[p.readVarint()],S=v._values[p.readVarint()];v.properties[A]=S}}(s,r):e==3?r.type=s.readVarint():e==4&&(r._geometry=s.pos)}function xf(e){for(var r,s,p=0,v=0,_=e.length,A=_-1;v<_;A=v++)p+=((s=e[A]).x-(r=e[v]).x)*(r.y+s.y);return p}_f.types=["Unknown","Point","LineString","Polygon"],_f.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var r,s=e.readVarint()+e.pos,p=1,v=0,_=0,A=0,S=[];e.pos<s;){if(v<=0){var D=e.readVarint();p=7&D,v=D>>3}if(v--,p===1||p===2)_+=e.readSVarint(),A+=e.readSVarint(),p===1&&(r&&S.push(r),r=[]),r.push(new T(_,A));else{if(p!==7)throw new Error("unknown command "+p);r&&r.push(r[0].clone())}}return r&&S.push(r),S},_f.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var r=e.readVarint()+e.pos,s=1,p=0,v=0,_=0,A=1/0,S=-1/0,D=1/0,B=-1/0;e.pos<r;){if(p<=0){var N=e.readVarint();s=7&N,p=N>>3}if(p--,s===1||s===2)(v+=e.readSVarint())<A&&(A=v),v>S&&(S=v),(_+=e.readSVarint())<D&&(D=_),_>B&&(B=_);else if(s!==7)throw new Error("unknown command "+s)}return[A,D,S,B]},_f.prototype.toGeoJSON=function(e,r,s){var p,v,_=this.extent*Math.pow(2,s),A=this.extent*e,S=this.extent*r,D=this.loadGeometry(),B=_f.types[this.type];function N(J){for(var ct=0;ct<J.length;ct++){var pt=J[ct];J[ct]=[360*(pt.x+A)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(pt.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(p=0;p<D.length;p++)V[p]=D[p][0];N(D=V);break;case 2:for(p=0;p<D.length;p++)N(D[p]);break;case 3:for(D=function(J){var ct=J.length;if(ct<=1)return[J];for(var pt,It,_t=[],Vt=0;Vt<ct;Vt++){var Yt=xf(J[Vt]);Yt!==0&&(It===void 0&&(It=Yt<0),It===Yt<0?(pt&&_t.push(pt),pt=[J[Vt]]):pt.push(J[Vt]))}return pt&&_t.push(pt),_t}(D),p=0;p<D.length;p++)for(v=0;v<D[p].length;v++)N(D[p][v])}D.length===1?D=D[0]:B="Multi"+B;var Z={type:"Feature",geometry:{type:B,coordinates:D},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var Wm=Zm;function Zm(e,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(k_,this,r),this.length=this._features.length}function k_(e,r,s){e===15?r.version=s.readVarint():e===1?r.name=s.readString():e===5?r.extent=s.readVarint():e===2?r._features.push(s.pos):e===3?r._keys.push(s.readString()):e===4&&r._values.push(function(p){for(var v=null,_=p.readVarint()+p.pos;p.pos<_;){var A=p.readVarint()>>3;v=A===1?p.readString():A===2?p.readFloat():A===3?p.readDouble():A===4?p.readVarint64():A===5?p.readVarint():A===6?p.readSVarint():A===7?p.readBoolean():null}return v}(s))}function Uv(e,r,s){if(e===3){var p=new Wm(s,s.readVarint()+s.pos);p.length&&(r[p.name]=p)}}Zm.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var r=this._pbf.readVarint()+this._pbf.pos;return new Vv(this._pbf,r,this.extent,this._keys,this._values)};var ru={VectorTile:function(e,r){this.layers=e.readFields(Uv,{},r)},VectorTileFeature:Vv,VectorTileLayer:Wm},Ap=ru.VectorTileFeature.types,Ym=Math.pow(2,13);function bf(e,r,s,p,v,_,A,S){e.emplaceBack(r,s,2*Math.floor(p*Ym)+A,v*Ym*2,_*Ym*2,Math.round(S))}var Ll=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(r){return r.id}),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ya,this.indexArray=new Du,this.programConfigurations=new dn(e.layers,e.zoom),this.segments=new it,this.stateDependentLayerIds=this.layers.filter(function(r){return r.isStateDependent()}).map(function(r){return r.id})};function xd(e,r){return e.x===r.x&&(e.x<0||e.x>8192)||e.y===r.y&&(e.y<0||e.y>8192)}Ll.prototype.populate=function(e,r,s){this.features=[],this.hasPattern=vd("fill-extrusion",this.layers,r);for(var p=0,v=e;p<v.length;p+=1){var _=v[p],A=_.feature,S=_.id,D=_.index,B=_.sourceLayerIndex,N=this.layers[0]._featureFilter.needGeometry,V=yr(A,N);if(this.layers[0]._featureFilter.filter(new Rn(this.zoom),V,s)){var Z={id:S,sourceLayerIndex:B,index:D,geometry:N?V.geometry:Cr(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(yd("fill-extrusion",this.layers,Z,this.zoom,r)):this.addFeature(Z,Z.geometry,D,s,{}),r.featureIndex.insert(A,Z.geometry,D,B,this.index,!0)}}},Ll.prototype.addFeatures=function(e,r,s){for(var p=0,v=this.features;p<v.length;p+=1){var _=v[p];this.addFeature(_,_.geometry,_.index,r,s)}},Ll.prototype.update=function(e,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,s)},Ll.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ll.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ll.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bu),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ll.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ll.prototype.addFeature=function(e,r,s,p,v){for(var _=0,A=qm(r,500);_<A.length;_+=1){for(var S=A[_],D=0,B=0,N=S;B<N.length;B+=1)D+=N[B].length;for(var V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Z=0,J=S;Z<J.length;Z+=1){var ct=J[Z];if(ct.length!==0&&!((hi=ct).every(function(Yn){return Yn.x<0})||hi.every(function(Yn){return Yn.x>8192})||hi.every(function(Yn){return Yn.y<0})||hi.every(function(Yn){return Yn.y>8192})))for(var pt=0,It=0;It<ct.length;It++){var _t=ct[It];if(It>=1){var Vt=ct[It-1];if(!xd(_t,Vt)){V.vertexLength+4>it.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Yt=_t.sub(Vt)._perp()._unit(),Jt=Vt.dist(_t);pt+Jt>32768&&(pt=0),bf(this.layoutVertexArray,_t.x,_t.y,Yt.x,Yt.y,0,0,pt),bf(this.layoutVertexArray,_t.x,_t.y,Yt.x,Yt.y,0,1,pt),bf(this.layoutVertexArray,Vt.x,Vt.y,Yt.x,Yt.y,0,0,pt+=Jt),bf(this.layoutVertexArray,Vt.x,Vt.y,Yt.x,Yt.y,0,1,pt);var ee=V.vertexLength;this.indexArray.emplaceBack(ee,ee+2,ee+1),this.indexArray.emplaceBack(ee+1,ee+2,ee+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+D>it.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),Ap[e.type]==="Polygon"){for(var fe=[],Me=[],Be=V.vertexLength,yn=0,We=S;yn<We.length;yn+=1){var In=We[yn];if(In.length!==0){In!==S[0]&&Me.push(fe.length/2);for(var Qe=0;Qe<In.length;Qe++){var ni=In[Qe];bf(this.layoutVertexArray,ni.x,ni.y,0,0,1,1,0),fe.push(ni.x),fe.push(ni.y)}}}for(var zn=_p(fe,Me),hn=0;hn<zn.length;hn+=3)this.indexArray.emplaceBack(Be+zn[hn],Be+zn[hn+2],Be+zn[hn+1]);V.primitiveLength+=zn.length/3,V.vertexLength+=D}}var hi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,v,p)},Ye("FillExtrusionBucket",Ll,{omit:["layers","features"]});var jv={paint:new Xo({"fill-extrusion-opacity":new vn(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new un(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vn(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vn(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Lu(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new un(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new un(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vn(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},bd=function(e){function r(s){e.call(this,s,jv)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.createBucket=function(s){return new Ll(s)},r.prototype.queryRadius=function(){return ko(this.paint.get("fill-extrusion-translate"))},r.prototype.is3D=function(){return!0},r.prototype.queryIntersectsFeature=function(s,p,v,_,A,S,D,B){var N=nl(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,D),V=this.paint.get("fill-extrusion-height").evaluate(p,v),Z=this.paint.get("fill-extrusion-base").evaluate(p,v),J=function(pt,It,_t,Vt){for(var Yt=[],Jt=0,ee=pt;Jt<ee.length;Jt+=1){var fe=ee[Jt],Me=[fe.x,fe.y,0,1];Gc(Me,Me,It),Yt.push(new T(Me[0]/Me[3],Me[1]/Me[3]))}return Yt}(N,B),ct=function(pt,It,_t,Vt){for(var Yt=[],Jt=[],ee=Vt[8]*It,fe=Vt[9]*It,Me=Vt[10]*It,Be=Vt[11]*It,yn=Vt[8]*_t,We=Vt[9]*_t,In=Vt[10]*_t,Qe=Vt[11]*_t,ni=0,zn=pt;ni<zn.length;ni+=1){for(var hn=[],hi=[],Yn=0,Ei=zn[ni];Yn<Ei.length;Yn+=1){var En=Ei[Yn],Gi=En.x,Rr=En.y,zr=Vt[0]*Gi+Vt[4]*Rr+Vt[12],Ir=Vt[1]*Gi+Vt[5]*Rr+Vt[13],Or=Vt[2]*Gi+Vt[6]*Rr+Vt[14],Jr=Vt[3]*Gi+Vt[7]*Rr+Vt[15],go=Or+Me,Co=Jr+Be,Aa=zr+yn,No=Ir+We,wa=Or+In,oo=Jr+Qe,Vo=new T((zr+ee)/Co,(Ir+fe)/Co);Vo.z=go/Co,hn.push(Vo);var xi=new T(Aa/oo,No/oo);xi.z=wa/oo,hi.push(xi)}Yt.push(hn),Jt.push(hi)}return[Yt,Jt]}(_,Z,V,B);return function(pt,It,_t){var Vt=1/0;el(_t,It)&&(Vt=wp(_t,It[0]));for(var Yt=0;Yt<It.length;Yt++)for(var Jt=It[Yt],ee=pt[Yt],fe=0;fe<Jt.length-1;fe++){var Me=Jt[fe],Be=[Me,Jt[fe+1],ee[fe+1],ee[fe],Me];Ml(_t,Be)&&(Vt=Math.min(Vt,wp(_t,Be)))}return Vt!==1/0&&Vt}(ct[0],ct[1],J)},r}(Il);function Ih(e,r){return e.x*r.x+e.y*r.y}function wp(e,r){if(e.length===1){for(var s,p=0,v=r[p++];!s||v.equals(s);)if(!(s=r[p++]))return 1/0;for(;p<r.length;p++){var _=r[p],A=e[0],S=s.sub(v),D=_.sub(v),B=A.sub(v),N=Ih(S,S),V=Ih(S,D),Z=Ih(D,D),J=Ih(B,S),ct=Ih(B,D),pt=N*Z-V*V,It=(Z*J-V*ct)/pt,_t=(N*ct-V*J)/pt,Vt=v.z*(1-It-_t)+s.z*It+_.z*_t;if(isFinite(Vt))return Vt}return 1/0}for(var Yt=1/0,Jt=0,ee=r;Jt<ee.length;Jt+=1)Yt=Math.min(Yt,ee[Jt].z);return Yt}var D_=fo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Hv=fo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ad=ru.VectorTileFeature.types,Gv=Math.cos(Math.PI/180*37.5),wd=Math.pow(2,14)/.5,Fa=function(e){var r=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){r.gradients[s.id]={}}),this.layoutVertexArray=new ea,this.layoutVertexArray2=new na,this.indexArray=new Du,this.programConfigurations=new dn(e.layers,e.zoom),this.segments=new it,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};Fa.prototype.populate=function(e,r,s){this.hasPattern=vd("line",this.layers,r);for(var p=this.layers[0].layout.get("line-sort-key"),v=[],_=0,A=e;_<A.length;_+=1){var S=A[_],D=S.feature,B=S.id,N=S.index,V=S.sourceLayerIndex,Z=this.layers[0]._featureFilter.needGeometry,J=yr(D,Z);if(this.layers[0]._featureFilter.filter(new Rn(this.zoom),J,s)){var ct=p?p.evaluate(J,{},s):void 0,pt={id:B,properties:D.properties,type:D.type,sourceLayerIndex:V,index:N,geometry:Z?J.geometry:Cr(D),patterns:{},sortKey:ct};v.push(pt)}}p&&v.sort(function(Me,Be){return Me.sortKey-Be.sortKey});for(var It=0,_t=v;It<_t.length;It+=1){var Vt=_t[It],Yt=Vt.geometry,Jt=Vt.index,ee=Vt.sourceLayerIndex;if(this.hasPattern){var fe=yd("line",this.layers,Vt,this.zoom,r);this.patternFeatures.push(fe)}else this.addFeature(Vt,Yt,Jt,s,{});r.featureIndex.insert(e[Jt].feature,Yt,Jt,ee,this.index)}},Fa.prototype.update=function(e,r,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,s)},Fa.prototype.addFeatures=function(e,r,s){for(var p=0,v=this.patternFeatures;p<v.length;p+=1){var _=v[p];this.addFeature(_,_.geometry,_.index,r,s)}},Fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fa.prototype.upload=function(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Hv)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,D_),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fa.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Fa.prototype.addFeature=function(e,r,s,p,v){var _=this.layers[0].layout,A=_.get("line-join").evaluate(e,{}),S=_.get("line-cap"),D=_.get("line-miter-limit"),B=_.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var N=0,V=r;N<V.length;N+=1)this.addLine(V[N],e,A,S,D,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,s,v,p)},Fa.prototype.addLine=function(e,r,s,p,v,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var A=0;A<e.length-1;A++)this.totalDistance+=e[A].dist(e[A+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=Ad[r.type]==="Polygon",D=e.length;D>=2&&e[D-1].equals(e[D-2]);)D--;for(var B=0;B<D-1&&e[B].equals(e[B+1]);)B++;if(!(D<(S?3:2))){s==="bevel"&&(v=1.05);var N,V=this.overscaling<=16?122880/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray),J=void 0,ct=void 0,pt=void 0,It=void 0;this.e1=this.e2=-1,S&&(It=e[B].sub(N=e[D-2])._unit()._perp());for(var _t=B;_t<D;_t++)if(!(ct=_t===D-1?S?e[B+1]:void 0:e[_t+1])||!e[_t].equals(ct)){It&&(pt=It),N&&(J=N),N=e[_t],It=ct?ct.sub(N)._unit()._perp():pt;var Vt=(pt=pt||It).add(It);Vt.x===0&&Vt.y===0||Vt._unit();var Yt=pt.x*It.x+pt.y*It.y,Jt=Vt.x*It.x+Vt.y*It.y,ee=Jt!==0?1/Jt:1/0,fe=2*Math.sqrt(2-2*Jt),Me=Jt<Gv&&J&&ct,Be=pt.x*It.y-pt.y*It.x>0;if(Me&&_t>B){var yn=N.dist(J);if(yn>2*V){var We=N.sub(N.sub(J)._mult(V/yn)._round());this.updateDistance(J,We),this.addCurrentVertex(We,pt,0,0,Z),J=We}}var In=J&&ct,Qe=In?s:S?"butt":p;if(In&&Qe==="round"&&(ee<_?Qe="miter":ee<=2&&(Qe="fakeround")),Qe==="miter"&&ee>v&&(Qe="bevel"),Qe==="bevel"&&(ee>2&&(Qe="flipbevel"),ee<v&&(Qe="miter")),J&&this.updateDistance(J,N),Qe==="miter")Vt._mult(ee),this.addCurrentVertex(N,Vt,0,0,Z);else if(Qe==="flipbevel"){if(ee>100)Vt=It.mult(-1);else{var ni=ee*pt.add(It).mag()/pt.sub(It).mag();Vt._perp()._mult(ni*(Be?-1:1))}this.addCurrentVertex(N,Vt,0,0,Z),this.addCurrentVertex(N,Vt.mult(-1),0,0,Z)}else if(Qe==="bevel"||Qe==="fakeround"){var zn=-Math.sqrt(ee*ee-1),hn=Be?zn:0,hi=Be?0:zn;if(J&&this.addCurrentVertex(N,pt,hn,hi,Z),Qe==="fakeround")for(var Yn=Math.round(180*fe/Math.PI/20),Ei=1;Ei<Yn;Ei++){var En=Ei/Yn;if(En!==.5){var Gi=En-.5;En+=En*Gi*(En-1)*((1.0904+Yt*(Yt*(3.55645-1.43519*Yt)-3.2452))*Gi*Gi+(.848013+Yt*(.215638*Yt-1.06021)))}var Rr=It.sub(pt)._mult(En)._add(pt)._unit()._mult(Be?-1:1);this.addHalfVertex(N,Rr.x,Rr.y,!1,Be,0,Z)}ct&&this.addCurrentVertex(N,It,-hn,-hi,Z)}else if(Qe==="butt")this.addCurrentVertex(N,Vt,0,0,Z);else if(Qe==="square"){var zr=J?1:-1;this.addCurrentVertex(N,Vt,zr,zr,Z)}else Qe==="round"&&(J&&(this.addCurrentVertex(N,pt,0,0,Z),this.addCurrentVertex(N,pt,1,1,Z,!0)),ct&&(this.addCurrentVertex(N,It,-1,-1,Z,!0),this.addCurrentVertex(N,It,0,0,Z)));if(Me&&_t<D-1){var Ir=N.dist(ct);if(Ir>2*V){var Or=N.add(ct.sub(N)._mult(V/Ir)._round());this.updateDistance(N,Or),this.addCurrentVertex(Or,It,0,0,Z),N=Or}}}}},Fa.prototype.addCurrentVertex=function(e,r,s,p,v,_){_===void 0&&(_=!1);var A=r.y*p-r.x,S=-r.y-r.x*p;this.addHalfVertex(e,r.x+r.y*s,r.y-r.x*s,_,!1,s,v),this.addHalfVertex(e,A,S,_,!0,-p,v),this.distance>wd/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,r,s,p,v,_))},Fa.prototype.addHalfVertex=function(e,r,s,p,v,_,A){var S=.5*(this.lineClips?this.scaledDistance*(wd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(p?1:0),(e.y<<1)+(v?1:0),Math.round(63*r)+128,Math.round(63*s)+128,1+(_===0?0:_<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var D=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,D),A.primitiveLength++),v?this.e2=D:this.e1=D},Fa.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Fa.prototype.updateDistance=function(e,r){this.distance+=e.dist(r),this.updateScaledDistance()},Ye("LineBucket",Fa,{omit:["layers","patternFeatures"]});var qv=new Xo({"line-cap":new vn(tt.layout_line["line-cap"]),"line-join":new un(tt.layout_line["line-join"]),"line-miter-limit":new vn(tt.layout_line["line-miter-limit"]),"line-round-limit":new vn(tt.layout_line["line-round-limit"]),"line-sort-key":new un(tt.layout_line["line-sort-key"])}),Fu={paint:new Xo({"line-opacity":new un(tt.paint_line["line-opacity"]),"line-color":new un(tt.paint_line["line-color"]),"line-translate":new vn(tt.paint_line["line-translate"]),"line-translate-anchor":new vn(tt.paint_line["line-translate-anchor"]),"line-width":new un(tt.paint_line["line-width"]),"line-gap-width":new un(tt.paint_line["line-gap-width"]),"line-offset":new un(tt.paint_line["line-offset"]),"line-blur":new un(tt.paint_line["line-blur"]),"line-dasharray":new Bo(tt.paint_line["line-dasharray"]),"line-pattern":new Lu(tt.paint_line["line-pattern"]),"line-gradient":new _a(tt.paint_line["line-gradient"])}),layout:qv},Xm=new(function(e){function r(){e.apply(this,arguments)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.possiblyEvaluate=function(s,p){return p=new Rn(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),e.prototype.possiblyEvaluate.call(this,s,p)},r.prototype.evaluate=function(s,p,v,_){return p=K({},p,{zoom:Math.floor(p.zoom)}),e.prototype.evaluate.call(this,s,p,v,_)},r}(un))(Fu.paint.properties["line-width"].specification);Xm.useIntegerZoom=!0;var Wv=function(e){function r(s){e.call(this,s,Fu),this.gradientVersion=0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ci,this.gradientVersion=(this.gradientVersion+1)%O)},r.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},r.prototype.recalculate=function(s,p){e.prototype.recalculate.call(this,s,p),this.paint._values["line-floorwidth"]=Xm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},r.prototype.createBucket=function(s){return new Fa(s)},r.prototype.queryRadius=function(s){var p=s,v=Zv(Sl("line-width",this,p),Sl("line-gap-width",this,p)),_=Sl("line-offset",this,p);return v/2+Math.abs(_)+ko(this.paint.get("line-translate"))},r.prototype.queryIntersectsFeature=function(s,p,v,_,A,S,D){var B=nl(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,D),N=D/2*Zv(this.paint.get("line-width").evaluate(p,v),this.paint.get("line-gap-width").evaluate(p,v)),V=this.paint.get("line-offset").evaluate(p,v);return V&&(_=function(Z,J){for(var ct=[],pt=new T(0,0),It=0;It<Z.length;It++){for(var _t=Z[It],Vt=[],Yt=0;Yt<_t.length;Yt++){var Jt=_t[Yt],ee=_t[Yt+1],fe=Yt===0?pt:Jt.sub(_t[Yt-1])._unit()._perp(),Me=Yt===_t.length-1?pt:ee.sub(Jt)._unit()._perp(),Be=fe._add(Me)._unit();Be._mult(1/(Be.x*Me.x+Be.y*Me.y)),Vt.push(Be._mult(J)._add(Jt))}ct.push(Vt)}return ct}(_,V*D)),function(Z,J,ct){for(var pt=0;pt<J.length;pt++){var It=J[pt];if(Z.length>=3){for(var _t=0;_t<It.length;_t++)if(El(Z,It[_t]))return!0}if(Ds(Z,It,ct))return!0}return!1}(B,_,N)},r.prototype.isTileClipped=function(){return!0},r}(Il);function Zv(e,r){return r>0?r+2*e:e}var Yv=fo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),R_=fo([{name:"a_projected_pos",components:3,type:"Float32"}],4),z_=(fo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),fo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Nu=(fo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),fo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Km=fo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Qm(e,r,s){return e.sections.forEach(function(p){p.text=function(v,_,A){var S=_.layout.get("text-transform").evaluate(A,{});return S==="uppercase"?v=v.toLocaleUpperCase():S==="lowercase"&&(v=v.toLocaleLowerCase()),cs.applyArabicShaping&&(v=cs.applyArabicShaping(v)),v}(p.text,r,s)}),e}fo([{name:"triangle",components:3,type:"Uint16"}]),fo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fo([{type:"Float32",name:"offsetX"}]),fo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Mh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Cp=function(e,r,s,p,v){var _,A,S=8*v-p-1,D=(1<<S)-1,B=D>>1,N=-7,V=v-1,Z=-1,J=e[r+V];for(V+=Z,_=J&(1<<-N)-1,J>>=-N,N+=S;N>0;_=256*_+e[r+V],V+=Z,N-=8);for(A=_&(1<<-N)-1,_>>=-N,N+=p;N>0;A=256*A+e[r+V],V+=Z,N-=8);if(_===0)_=1-B;else{if(_===D)return A?NaN:1/0*(J?-1:1);A+=Math.pow(2,p),_-=B}return(J?-1:1)*A*Math.pow(2,_-p)},Eh=function(e,r,s,p,v,_){var A,S,D,B=8*_-v-1,N=(1<<B)-1,V=N>>1,Z=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=0,ct=1,pt=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,A=N):(A=Math.floor(Math.log(r)/Math.LN2),r*(D=Math.pow(2,-A))<1&&(A--,D*=2),(r+=A+V>=1?Z/D:Z*Math.pow(2,1-V))*D>=2&&(A++,D/=2),A+V>=N?(S=0,A=N):A+V>=1?(S=(r*D-1)*Math.pow(2,v),A+=V):(S=r*Math.pow(2,V-1)*Math.pow(2,v),A=0));v>=8;e[s+J]=255&S,J+=ct,S/=256,v-=8);for(A=A<<v|S,B+=v;B>0;e[s+J]=255&A,J+=ct,A/=256,B-=8);e[s+J-ct]|=128*pt},Zn=sr;function sr(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}sr.Varint=0,sr.Fixed64=1,sr.Bytes=2,sr.Fixed32=5;var Cd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ps(e){return e.type===sr.Bytes?e.readVarint()+e.pos:e.pos+1}function Af(e,r,s){return s?4294967296*r+(e>>>0):4294967296*(r>>>0)+(e>>>0)}function Id(e,r,s){var p=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));s.realloc(p);for(var v=s.pos-1;v>=e;v--)s.buf[v+p]=s.buf[v]}function Xv(e,r){for(var s=0;s<e.length;s++)r.writeVarint(e[s])}function Ka(e,r){for(var s=0;s<e.length;s++)r.writeSVarint(e[s])}function O_(e,r){for(var s=0;s<e.length;s++)r.writeFloat(e[s])}function B_(e,r){for(var s=0;s<e.length;s++)r.writeDouble(e[s])}function Kv(e,r){for(var s=0;s<e.length;s++)r.writeBoolean(e[s])}function F_(e,r){for(var s=0;s<e.length;s++)r.writeFixed32(e[s])}function Qv(e,r){for(var s=0;s<e.length;s++)r.writeSFixed32(e[s])}function N_(e,r){for(var s=0;s<e.length;s++)r.writeFixed64(e[s])}function V_(e,r){for(var s=0;s<e.length;s++)r.writeSFixed64(e[s])}function Md(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+16777216*e[r+3]}function Os(e,r,s){e[s]=r,e[s+1]=r>>>8,e[s+2]=r>>>16,e[s+3]=r>>>24}function Qa(e,r){return(e[r]|e[r+1]<<8|e[r+2]<<16)+(e[r+3]<<24)}function $m(e,r,s){e===1&&s.readMessage(U_,r)}function U_(e,r,s){if(e===3){var p=s.readMessage(Jm,{}),v=p.width,_=p.height,A=p.left,S=p.top,D=p.advance;r.push({id:p.id,bitmap:new Wc({width:v+6,height:_+6},p.bitmap),metrics:{width:v,height:_,left:A,top:S,advance:D}})}}function Jm(e,r,s){e===1?r.id=s.readVarint():e===2?r.bitmap=s.readBytes():e===3?r.width=s.readVarint():e===4?r.height=s.readVarint():e===5?r.left=s.readSVarint():e===6?r.top=s.readSVarint():e===7&&(r.advance=s.readVarint())}function $v(e){for(var r=0,s=0,p=0,v=e;p<v.length;p+=1){var _=v[p];r+=_.w*_.h,s=Math.max(s,_.w)}e.sort(function(pt,It){return It.h-pt.h});for(var A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),s),h:1/0}],S=0,D=0,B=0,N=e;B<N.length;B+=1)for(var V=N[B],Z=A.length-1;Z>=0;Z--){var J=A[Z];if(!(V.w>J.w||V.h>J.h)){if(V.x=J.x,V.y=J.y,D=Math.max(D,V.y+V.h),S=Math.max(S,V.x+V.w),V.w===J.w&&V.h===J.h){var ct=A.pop();Z<A.length&&(A[Z]=ct)}else V.h===J.h?(J.x+=V.w,J.w-=V.w):V.w===J.w?(J.y+=V.h,J.h-=V.h):(A.push({x:J.x+V.w,y:J.y,w:J.w-V.w,h:V.h}),J.y+=V.h,J.h-=V.h);break}}return{w:S,h:D,fill:r/(S*D)||0}}sr.prototype={destroy:function(){this.buf=null},readFields:function(e,r,s){for(s=s||this.length;this.pos<s;){var p=this.readVarint(),v=p>>3,_=this.pos;this.type=7&p,e(v,r,this),this.pos===_&&this.skip(p)}return r},readMessage:function(e,r){return this.readFields(e,r,this.readVarint()+this.pos)},readFixed32:function(){var e=Md(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Qa(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Md(this.buf,this.pos)+4294967296*Md(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Md(this.buf,this.pos)+4294967296*Qa(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Cp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Cp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var r,s,p=this.buf;return r=127&(s=p[this.pos++]),s<128?r:(r|=(127&(s=p[this.pos++]))<<7,s<128?r:(r|=(127&(s=p[this.pos++]))<<14,s<128?r:(r|=(127&(s=p[this.pos++]))<<21,s<128?r:function(v,_,A){var S,D,B=A.buf;if(S=(112&(D=B[A.pos++]))>>4,D<128||(S|=(127&(D=B[A.pos++]))<<3,D<128)||(S|=(127&(D=B[A.pos++]))<<10,D<128)||(S|=(127&(D=B[A.pos++]))<<17,D<128)||(S|=(127&(D=B[A.pos++]))<<24,D<128)||(S|=(1&(D=B[A.pos++]))<<31,D<128))return Af(v,S,_);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(s=p[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&Cd?function(s,p,v){return Cd.decode(s.subarray(p,v))}(this.buf,r,e):function(s,p,v){for(var _="",A=p;A<v;){var S,D,B,N=s[A],V=null,Z=N>239?4:N>223?3:N>191?2:1;if(A+Z>v)break;Z===1?N<128&&(V=N):Z===2?(192&(S=s[A+1]))==128&&(V=(31&N)<<6|63&S)<=127&&(V=null):Z===3?(D=s[A+2],(192&(S=s[A+1]))==128&&(192&D)==128&&((V=(15&N)<<12|(63&S)<<6|63&D)<=2047||V>=55296&&V<=57343)&&(V=null)):Z===4&&(D=s[A+2],B=s[A+3],(192&(S=s[A+1]))==128&&(192&D)==128&&(192&B)==128&&((V=(15&N)<<18|(63&S)<<12|(63&D)<<6|63&B)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,Z=1):V>65535&&(V-=65536,_+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),_+=String.fromCharCode(V),A+=Z}return _}(this.buf,r,e)},readBytes:function(){var e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r},readPackedVarint:function(e,r){if(this.type!==sr.Bytes)return e.push(this.readVarint(r));var s=ps(this);for(e=e||[];this.pos<s;)e.push(this.readVarint(r));return e},readPackedSVarint:function(e){if(this.type!==sr.Bytes)return e.push(this.readSVarint());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==sr.Bytes)return e.push(this.readBoolean());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==sr.Bytes)return e.push(this.readFloat());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==sr.Bytes)return e.push(this.readDouble());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==sr.Bytes)return e.push(this.readFixed32());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==sr.Bytes)return e.push(this.readSFixed32());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==sr.Bytes)return e.push(this.readFixed64());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==sr.Bytes)return e.push(this.readSFixed64());var r=ps(this);for(e=e||[];this.pos<r;)e.push(this.readSFixed64());return e},skip:function(e){var r=7&e;if(r===sr.Varint)for(;this.buf[this.pos++]>127;);else if(r===sr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===sr.Fixed32)this.pos+=4;else{if(r!==sr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(e,r){this.writeVarint(e<<3|r)},realloc:function(e){for(var r=this.length||16;r<this.pos+e;)r*=2;if(r!==this.length){var s=new Uint8Array(r);s.set(this.buf),this.buf=s,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Os(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Os(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Os(this.buf,-1&e,this.pos),Os(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Os(this.buf,-1&e,this.pos),Os(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(r,s){var p,v;if(r>=0?(p=r%4294967296|0,v=r/4294967296|0):(v=~(-r/4294967296),4294967295^(p=~(-r%4294967296))?p=p+1|0:(p=0,v=v+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,A,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(p,0,s),function(_,A){var S=(7&_)<<4;A.buf[A.pos++]|=S|((_>>>=3)?128:0),_&&(A.buf[A.pos++]=127&_|((_>>>=7)?128:0),_&&(A.buf[A.pos++]=127&_|((_>>>=7)?128:0),_&&(A.buf[A.pos++]=127&_|((_>>>=7)?128:0),_&&(A.buf[A.pos++]=127&_|((_>>>=7)?128:0),_&&(A.buf[A.pos++]=127&_)))))}(v,s)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(!!e)},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var r=this.pos;this.pos=function(p,v,_){for(var A,S,D=0;D<v.length;D++){if((A=v.charCodeAt(D))>55295&&A<57344){if(!S){A>56319||D+1===v.length?(p[_++]=239,p[_++]=191,p[_++]=189):S=A;continue}if(A<56320){p[_++]=239,p[_++]=191,p[_++]=189,S=A;continue}A=S-55296<<10|A-56320|65536,S=null}else S&&(p[_++]=239,p[_++]=191,p[_++]=189,S=null);A<128?p[_++]=A:(A<2048?p[_++]=A>>6|192:(A<65536?p[_++]=A>>12|224:(p[_++]=A>>18|240,p[_++]=A>>12&63|128),p[_++]=A>>6&63|128),p[_++]=63&A|128)}return _}(this.buf,e,this.pos);var s=this.pos-r;s>=128&&Id(r,s,this),this.pos=r-1,this.writeVarint(s),this.pos+=s},writeFloat:function(e){this.realloc(4),Eh(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Eh(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var r=e.length;this.writeVarint(r),this.realloc(r);for(var s=0;s<r;s++)this.buf[this.pos++]=e[s]},writeRawMessage:function(e,r){this.pos++;var s=this.pos;e(r,this);var p=this.pos-s;p>=128&&Id(s,p,this),this.pos=s-1,this.writeVarint(p),this.pos+=p},writeMessage:function(e,r,s){this.writeTag(e,sr.Bytes),this.writeRawMessage(r,s)},writePackedVarint:function(e,r){r.length&&this.writeMessage(e,Xv,r)},writePackedSVarint:function(e,r){r.length&&this.writeMessage(e,Ka,r)},writePackedBoolean:function(e,r){r.length&&this.writeMessage(e,Kv,r)},writePackedFloat:function(e,r){r.length&&this.writeMessage(e,O_,r)},writePackedDouble:function(e,r){r.length&&this.writeMessage(e,B_,r)},writePackedFixed32:function(e,r){r.length&&this.writeMessage(e,F_,r)},writePackedSFixed32:function(e,r){r.length&&this.writeMessage(e,Qv,r)},writePackedFixed64:function(e,r){r.length&&this.writeMessage(e,N_,r)},writePackedSFixed64:function(e,r){r.length&&this.writeMessage(e,V_,r)},writeBytesField:function(e,r){this.writeTag(e,sr.Bytes),this.writeBytes(r)},writeFixed32Field:function(e,r){this.writeTag(e,sr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(e,r){this.writeTag(e,sr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(e,r){this.writeTag(e,sr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(e,r){this.writeTag(e,sr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(e,r){this.writeTag(e,sr.Varint),this.writeVarint(r)},writeSVarintField:function(e,r){this.writeTag(e,sr.Varint),this.writeSVarint(r)},writeStringField:function(e,r){this.writeTag(e,sr.Bytes),this.writeString(r)},writeFloatField:function(e,r){this.writeTag(e,sr.Fixed32),this.writeFloat(r)},writeDoubleField:function(e,r){this.writeTag(e,sr.Fixed64),this.writeDouble(r)},writeBooleanField:function(e,r){this.writeVarintField(e,!!r)}};var Ed=function(e,r){var s=r.pixelRatio,p=r.version,v=r.stretchX,_=r.stretchY,A=r.content;this.paddedRect=e,this.pixelRatio=s,this.stretchX=v,this.stretchY=_,this.content=A,this.version=p},dc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};dc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},dc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},dc.tlbr.get=function(){return this.tl.concat(this.br)},dc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ed.prototype,dc);var wf=function(e,r){var s={},p={};this.haveRenderCallbacks=[];var v=[];this.addImages(e,s,v),this.addImages(r,p,v);var _=$v(v),A=new Xa({width:_.w||1,height:_.h||1});for(var S in e){var D=e[S],B=s[S].paddedRect;Xa.copy(D.data,A,{x:0,y:0},{x:B.x+1,y:B.y+1},D.data)}for(var N in r){var V=r[N],Z=p[N].paddedRect,J=Z.x+1,ct=Z.y+1,pt=V.data.width,It=V.data.height;Xa.copy(V.data,A,{x:0,y:0},{x:J,y:ct},V.data),Xa.copy(V.data,A,{x:0,y:It-1},{x:J,y:ct-1},{width:pt,height:1}),Xa.copy(V.data,A,{x:0,y:0},{x:J,y:ct+It},{width:pt,height:1}),Xa.copy(V.data,A,{x:pt-1,y:0},{x:J-1,y:ct},{width:1,height:It}),Xa.copy(V.data,A,{x:0,y:0},{x:J+pt,y:ct},{width:1,height:It})}this.image=A,this.iconPositions=s,this.patternPositions=p};wf.prototype.addImages=function(e,r,s){for(var p in e){var v=e[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};s.push(_),r[p]=new Ed(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}},wf.prototype.patchUpdatedImages=function(e,r){for(var s in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[s],e.getImage(s),r),this.patchUpdatedImage(this.patternPositions[s],e.getImage(s),r)},wf.prototype.patchUpdatedImage=function(e,r,s){if(e&&r&&e.version!==r.version){e.version=r.version;var p=e.tl;s.update(r.data,void 0,{x:p[0],y:p[1]})}},Ye("ImagePosition",Ed),Ye("ImageAtlas",wf);var ds={horizontal:1,vertical:2,horizontalOnly:3},Cf=function(){this.scale=1,this.fontStack="",this.imageName=null};Cf.forText=function(e,r){var s=new Cf;return s.scale=e||1,s.fontStack=r,s},Cf.forImage=function(e){var r=new Cf;return r.imageName=e,r};var ba=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Sd(e,r,s,p,v,_,A,S,D,B,N,V,Z,J,ct,pt){var It,_t=ba.fromFeature(e,v);V===ds.vertical&&_t.verticalizePunctuation();var Vt=cs.processBidirectionalText,Yt=cs.processStyledBidirectionalText;if(Vt&&_t.sections.length===1){It=[];for(var Jt=0,ee=Vt(_t.toString(),Sh(_t,B,_,r,p,J,ct));Jt<ee.length;Jt+=1){var fe=ee[Jt],Me=new ba;Me.text=fe,Me.sections=_t.sections;for(var Be=0;Be<fe.length;Be++)Me.sectionIndex.push(0);It.push(Me)}}else if(Yt){It=[];for(var yn=0,We=Yt(_t.text,_t.sectionIndex,Sh(_t,B,_,r,p,J,ct));yn<We.length;yn+=1){var In=We[yn],Qe=new ba;Qe.text=In[0],Qe.sectionIndex=In[1],Qe.sections=_t.sections,It.push(Qe)}}else It=function(hn,hi){for(var Yn=[],Ei=hn.text,En=0,Gi=0,Rr=hi;Gi<Rr.length;Gi+=1){var zr=Rr[Gi];Yn.push(hn.substring(En,zr)),En=zr}return En<Ei.length&&Yn.push(hn.substring(En,Ei.length)),Yn}(_t,Sh(_t,B,_,r,p,J,ct));var ni=[],zn={positionedLines:ni,text:_t.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(hn,hi,Yn,Ei,En,Gi,Rr,zr,Ir,Or,Jr,go){for(var Co=0,Aa=-17,No=0,wa=0,oo=zr==="right"?1:zr==="left"?0:.5,Vo=0,xi=0,fr=En;xi<fr.length;xi+=1){var nr=fr[xi];nr.trim();var Fi=nr.getMaxScale(),Na=24*(Fi-1),ia={positionedGlyphs:[],lineOffset:0};hn.positionedLines[Vo]=ia;var Mr=ia.positionedGlyphs,ur=0;if(nr.length()){for(var ra=0;ra<nr.length();ra++){var qi=nr.getSection(ra),Ja=nr.getSectionIndex(ra),Gn=nr.getCharCode(ra),Vu=0,Xi=null,Er=null,Dl=null,ol=24,Rh=!(Ir===ds.horizontal||!Jr&&!wl(Gn)||Jr&&(Td[Gn]||(zl=Gn,Re.Arabic(zl)||Re["Arabic Supplement"](zl)||Re["Arabic Extended-A"](zl)||Re["Arabic Presentation Forms-A"](zl)||Re["Arabic Presentation Forms-B"](zl))));if(qi.imageName){var Tf=Ei[qi.imageName];if(!Tf)continue;Dl=qi.imageName,hn.iconsInText=hn.iconsInText||!0,Er=Tf.paddedRect;var yc=Tf.displaySize;qi.scale=24*qi.scale/go,Vu=Na+(24-yc[1]*qi.scale),ol=(Xi={width:yc[0],height:yc[1],left:1,top:-3,advance:Rh?yc[1]:yc[0]}).advance;var Pf=Rh?yc[0]*qi.scale-24*Fi:yc[1]*qi.scale-24*Fi;Pf>0&&Pf>ur&&(ur=Pf)}else{var Nd=Yn[qi.fontStack],Kc=Nd&&Nd[Gn];if(Kc&&Kc.rect)Er=Kc.rect,Xi=Kc.metrics;else{var Pp=hi[qi.fontStack],Rl=Pp&&Pp[Gn];if(!Rl)continue;Xi=Rl.metrics}Vu=24*(Fi-qi.scale)}Rh?(hn.verticalizable=!0,Mr.push({glyph:Gn,imageName:Dl,x:Co,y:Aa+Vu,vertical:Rh,scale:qi.scale,fontStack:qi.fontStack,sectionIndex:Ja,metrics:Xi,rect:Er}),Co+=ol*qi.scale+Or):(Mr.push({glyph:Gn,imageName:Dl,x:Co,y:Aa+Vu,vertical:Rh,scale:qi.scale,fontStack:qi.fontStack,sectionIndex:Ja,metrics:Xi,rect:Er}),Co+=Xi.advance*qi.scale+Or)}Mr.length!==0&&(No=Math.max(Co-Or,No),ty(Mr,0,Mr.length-1,oo,ur)),Co=0;var Lp=Gi*Fi+ur;ia.lineOffset=Math.max(ur,Na),Aa+=Lp,wa=Math.max(Lp,wa),++Vo}else Aa+=Gi,++Vo}var zl,Kr=Aa- -17,Qr=Ip(Rr),_c=Qr.horizontalAlign,Lf=Qr.verticalAlign;(function(Vd,Ud,kp,Dp,jd,kf,xc,zh,Hd){var Oh,Bh=(Ud-kp)*jd;Oh=kf!==xc?-zh*Dp- -17:(-Dp*Hd+.5)*xc;for(var Ca=0,Uu=Vd;Ca<Uu.length;Ca+=1)for(var Fh=0,Rp=Uu[Ca].positionedGlyphs;Fh<Rp.length;Fh+=1){var Df=Rp[Fh];Df.x+=Bh,Df.y+=Oh}})(hn.positionedLines,oo,_c,Lf,No,wa,Gi,Kr,En.length),hn.top+=-Lf*Kr,hn.bottom=hn.top+Kr,hn.left+=-_c*No,hn.right=hn.left+No}(zn,r,s,p,It,A,S,D,V,B,Z,pt),!function(hn){for(var hi=0,Yn=hn;hi<Yn.length;hi+=1)if(Yn[hi].positionedGlyphs.length!==0)return!1;return!0}(ni)&&zn}ba.fromFeature=function(e,r){for(var s=new ba,p=0;p<e.sections.length;p++){var v=e.sections[p];v.image?s.addImageSection(v):s.addTextSection(v,r)}return s},ba.prototype.length=function(){return this.text.length},ba.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},ba.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},ba.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},ba.prototype.verticalizePunctuation=function(){this.text=function(e){for(var r="",s=0;s<e.length;s++){var p=e.charCodeAt(s+1)||null,v=e.charCodeAt(s-1)||null;r+=p&&Cl(p)&&!Mh[e[s+1]]||v&&Cl(v)&&!Mh[e[s-1]]||!Mh[e[s]]?e[s]:Mh[e[s]]}return r}(this.text)},ba.prototype.trim=function(){for(var e=0,r=0;r<this.text.length&&Td[this.text.charCodeAt(r)];r++)e++;for(var s=this.text.length,p=this.text.length-1;p>=0&&p>=e&&Td[this.text.charCodeAt(p)];p--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)},ba.prototype.substring=function(e,r){var s=new ba;return s.text=this.text.substring(e,r),s.sectionIndex=this.sectionIndex.slice(e,r),s.sections=this.sections,s},ba.prototype.toString=function(){return this.text},ba.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce(function(r,s){return Math.max(r,e.sections[s].scale)},0)},ba.prototype.addTextSection=function(e,r){this.text+=e.text,this.sections.push(Cf.forText(e.scale,e.fontStack||r));for(var s=this.sections.length-1,p=0;p<e.text.length;++p)this.sectionIndex.push(s)},ba.prototype.addImageSection=function(e){var r=e.image?e.image.name:"";if(r.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Cf.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Bt("Reached maximum number of images 6401")}else Bt("Can't add FormattedSection with an empty image.")},ba.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Td={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$a={};function tg(e,r,s,p,v,_){if(r.imageName){var A=p[r.imageName];return A?A.displaySize[0]*r.scale*24/_+v:0}var S=s[r.fontStack],D=S&&S[e];return D?D.metrics.advance*r.scale+v:0}function Jv(e,r,s,p){var v=Math.pow(e-r,2);return p?e<r?v/2:2*v:v+Math.abs(s)*s}function eg(e,r,s){var p=0;return e===10&&(p-=1e4),s&&(p+=150),e!==40&&e!==65288||(p+=50),r!==41&&r!==65289||(p+=50),p}function ng(e,r,s,p,v,_){for(var A=null,S=Jv(r,s,v,_),D=0,B=p;D<B.length;D+=1){var N=B[D],V=Jv(r-N.x,s,v,_)+N.badness;V<=S&&(A=N,S=V)}return{index:e,x:r,priorBreak:A,badness:S}}function Sh(e,r,s,p,v,_,A){if(_!=="point")return[];if(!e)return[];for(var S,D=[],B=function(It,_t,Vt,Yt,Jt,ee){for(var fe=0,Me=0;Me<It.length();Me++){var Be=It.getSection(Me);fe+=tg(It.getCharCode(Me),Be,Yt,Jt,_t,ee)}return fe/Math.max(1,Math.ceil(fe/Vt))}(e,r,s,p,v,A),N=e.text.indexOf("")>=0,V=0,Z=0;Z<e.length();Z++){var J=e.getSection(Z),ct=e.getCharCode(Z);if(Td[ct]||(V+=tg(ct,J,p,v,r,A)),Z<e.length()-1){var pt=!((S=ct)<11904||!(Re["Bopomofo Extended"](S)||Re.Bopomofo(S)||Re["CJK Compatibility Forms"](S)||Re["CJK Compatibility Ideographs"](S)||Re["CJK Compatibility"](S)||Re["CJK Radicals Supplement"](S)||Re["CJK Strokes"](S)||Re["CJK Symbols and Punctuation"](S)||Re["CJK Unified Ideographs Extension A"](S)||Re["CJK Unified Ideographs"](S)||Re["Enclosed CJK Letters and Months"](S)||Re["Halfwidth and Fullwidth Forms"](S)||Re.Hiragana(S)||Re["Ideographic Description Characters"](S)||Re["Kangxi Radicals"](S)||Re["Katakana Phonetic Extensions"](S)||Re.Katakana(S)||Re["Vertical Forms"](S)||Re["Yi Radicals"](S)||Re["Yi Syllables"](S)));($a[ct]||pt||J.imageName)&&D.push(ng(Z+1,V,B,D,eg(ct,e.getCharCode(Z+1),pt&&N),!1))}}return function It(_t){return _t?It(_t.priorBreak).concat(_t.index):[]}(ng(e.length(),V,B,D,0,!0))}function Ip(e){var r=.5,s=.5;switch(e){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:r,verticalAlign:s}}function ty(e,r,s,p,v){if(p||v)for(var _=e[s],A=(e[s].x+_.metrics.advance*_.scale)*p,S=r;S<=s;S++)e[S].x-=A,e[S].y+=v}function ig(e,r,s,p,v,_){var A,S=e.image;if(S.content){var D=S.content,B=S.pixelRatio||1;A=[D[0]/B,D[1]/B,S.displaySize[0]-D[2]/B,S.displaySize[1]-D[3]/B]}var N,V,Z,J,ct=r.left*_,pt=r.right*_;s==="width"||s==="both"?(J=v[0]+ct-p[3],V=v[0]+pt+p[1]):V=(J=v[0]+(ct+pt-S.displaySize[0])/2)+S.displaySize[0];var It=r.top*_,_t=r.bottom*_;return s==="height"||s==="both"?(N=v[1]+It-p[0],Z=v[1]+_t+p[2]):Z=(N=v[1]+(It+_t-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:N,right:V,bottom:Z,left:J,collisionPadding:A}}$a[10]=!0,$a[32]=!0,$a[38]=!0,$a[40]=!0,$a[41]=!0,$a[43]=!0,$a[45]=!0,$a[47]=!0,$a[173]=!0,$a[183]=!0,$a[8203]=!0,$a[8208]=!0,$a[8211]=!0,$a[8231]=!0;var mc=function(e){function r(s,p,v,_){e.call(this,s,p),this.angle=v,_!==void 0&&(this.segment=_)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.clone=function(){return new r(this.x,this.y,this.angle,this.segment)},r}(T);function Pd(e,r){var s=r.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Rn(e+1))};if(s.kind==="source")return{kind:"source"};for(var p=s.zoomStops,v=s.interpolationType,_=0;_<p.length&&p[_]<=e;)_++;for(var A=_=Math.max(0,_-1);A<p.length&&p[A]<e+1;)A++;A=Math.min(p.length-1,A);var S=p[_],D=p[A];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:D,interpolationType:v}:{kind:"camera",minZoom:S,maxZoom:D,minSize:s.evaluate(new Rn(S)),maxSize:s.evaluate(new Rn(D)),interpolationType:v}}function ou(e,r,s){var p=r.uSize,v=s.lowerSize;return e.kind==="source"?v/128:e.kind==="composite"?Zr(v/128,s.upperSize/128,r.uSizeT):p}function Zc(e,r){var s=0,p=0;if(e.kind==="constant")p=e.layoutSize;else if(e.kind!=="source"){var v=e.interpolationType,_=v?nt(uo.interpolationFactor(v,r,e.minZoom,e.maxZoom),0,1):0;e.kind==="camera"?p=Zr(e.minSize,e.maxSize,_):s=_}return{uSizeT:s,uSize:p}}Ye("Anchor",mc);var j_=Object.freeze({__proto__:null,getSizeData:Pd,evaluateSizeForFeature:ou,evaluateSizeForZoom:Zc,SIZE_PACK_FACTOR:128});function rg(e,r,s,p,v){if(r.segment===void 0)return!0;for(var _=r,A=r.segment+1,S=0;S>-s/2;){if(--A<0)return!1;S-=e[A].dist(_),_=e[A]}S+=e[A].dist(e[A+1]),A++;for(var D=[],B=0;S<s/2;){var N=e[A],V=e[A+1];if(!V)return!1;var Z=e[A-1].angleTo(N)-N.angleTo(V);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:S,angleDelta:Z}),B+=Z;S-D[0].distance>p;)B-=D.shift().angleDelta;if(B>v)return!1;A++,S+=N.dist(V)}return!0}function ey(e){for(var r=0,s=0;s<e.length-1;s++)r+=e[s].dist(e[s+1]);return r}function ny(e,r,s){return e?.6*r*s:0}function iy(e,r){return Math.max(e?e.right-e.left:0,r?r.right-r.left:0)}function H_(e,r,s,p,v,_){for(var A=ny(s,v,_),S=iy(s,p)*_,D=0,B=ey(e)/2,N=0;N<e.length-1;N++){var V=e[N],Z=e[N+1],J=V.dist(Z);if(D+J>B){var ct=(B-D)/J,pt=Zr(V.x,Z.x,ct),It=Zr(V.y,Z.y,ct),_t=new mc(pt,It,Z.angleTo(V),N);return _t._round(),!A||rg(e,_t,S,A,r)?_t:void 0}D+=J}}function G_(e,r,s,p,v,_,A,S,D){var B=ny(p,_,A),N=iy(p,v),V=N*A,Z=e[0].x===0||e[0].x===D||e[0].y===0||e[0].y===D;return r-V<r/4&&(r=V+r/4),function J(ct,pt,It,_t,Vt,Yt,Jt,ee,fe){for(var Me=Yt/2,Be=ey(ct),yn=0,We=pt-It,In=[],Qe=0;Qe<ct.length-1;Qe++){for(var ni=ct[Qe],zn=ct[Qe+1],hn=ni.dist(zn),hi=zn.angleTo(ni);We+It<yn+hn;){var Yn=((We+=It)-yn)/hn,Ei=Zr(ni.x,zn.x,Yn),En=Zr(ni.y,zn.y,Yn);if(Ei>=0&&Ei<fe&&En>=0&&En<fe&&We-Me>=0&&We+Me<=Be){var Gi=new mc(Ei,En,hi,Qe);Gi._round(),_t&&!rg(ct,Gi,Yt,_t,Vt)||In.push(Gi)}}yn+=hn}return ee||In.length||Jt||(In=J(ct,yn/2,It,_t,Vt,Yt,Jt,!0,fe)),In}(e,Z?r/2*S%r:(N/2+2*_)*A*S%r,r,B,s,V,Z,!1,D)}function ry(e,r,s,p,v){for(var _=[],A=0;A<e.length;A++)for(var S=e[A],D=void 0,B=0;B<S.length-1;B++){var N=S[B],V=S[B+1];N.x<r&&V.x<r||(N.x<r?N=new T(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<r&&(V=new T(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<s&&V.y<s||(N.y<s?N=new T(N.x+(s-N.y)/(V.y-N.y)*(V.x-N.x),s)._round():V.y<s&&(V=new T(N.x+(s-N.y)/(V.y-N.y)*(V.x-N.x),s)._round()),N.x>=p&&V.x>=p||(N.x>=p?N=new T(p,N.y+(p-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=p&&(V=new T(p,N.y+(p-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=v&&V.y>=v||(N.y>=v?N=new T(N.x+(v-N.y)/(V.y-N.y)*(V.x-N.x),v)._round():V.y>=v&&(V=new T(N.x+(v-N.y)/(V.y-N.y)*(V.x-N.x),v)._round()),D&&N.equals(D[D.length-1])||_.push(D=[N]),D.push(V)))))}return _}function oy(e,r,s,p){var v=[],_=e.image,A=_.pixelRatio,S=_.paddedRect.w-2,D=_.paddedRect.h-2,B=e.right-e.left,N=e.bottom-e.top,V=_.stretchX||[[0,S]],Z=_.stretchY||[[0,D]],J=function(Ei,En){return Ei+En[1]-En[0]},ct=V.reduce(J,0),pt=Z.reduce(J,0),It=S-ct,_t=D-pt,Vt=0,Yt=ct,Jt=0,ee=pt,fe=0,Me=It,Be=0,yn=_t;if(_.content&&p){var We=_.content;Vt=Ld(V,0,We[0]),Jt=Ld(Z,0,We[1]),Yt=Ld(V,We[0],We[2]),ee=Ld(Z,We[1],We[3]),fe=We[0]-Vt,Be=We[1]-Jt,Me=We[2]-We[0]-Yt,yn=We[3]-We[1]-ee}var In=function(Ei,En,Gi,Rr){var zr=kd(Ei.stretch-Vt,Yt,B,e.left),Ir=Dd(Ei.fixed-fe,Me,Ei.stretch,ct),Or=kd(En.stretch-Jt,ee,N,e.top),Jr=Dd(En.fixed-Be,yn,En.stretch,pt),go=kd(Gi.stretch-Vt,Yt,B,e.left),Co=Dd(Gi.fixed-fe,Me,Gi.stretch,ct),Aa=kd(Rr.stretch-Jt,ee,N,e.top),No=Dd(Rr.fixed-Be,yn,Rr.stretch,pt),wa=new T(zr,Or),oo=new T(go,Or),Vo=new T(go,Aa),xi=new T(zr,Aa),fr=new T(Ir/A,Jr/A),nr=new T(Co/A,No/A),Fi=r*Math.PI/180;if(Fi){var Na=Math.sin(Fi),ia=Math.cos(Fi),Mr=[ia,-Na,Na,ia];wa._matMult(Mr),oo._matMult(Mr),xi._matMult(Mr),Vo._matMult(Mr)}var ur=Ei.stretch+Ei.fixed,ra=En.stretch+En.fixed;return{tl:wa,tr:oo,bl:xi,br:Vo,tex:{x:_.paddedRect.x+1+ur,y:_.paddedRect.y+1+ra,w:Gi.stretch+Gi.fixed-ur,h:Rr.stretch+Rr.fixed-ra},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fr,pixelOffsetBR:nr,minFontScaleX:Me/A/B,minFontScaleY:yn/A/N,isSDF:s}};if(p&&(_.stretchX||_.stretchY))for(var Qe=ay(V,It,ct),ni=ay(Z,_t,pt),zn=0;zn<Qe.length-1;zn++)for(var hn=Qe[zn],hi=Qe[zn+1],Yn=0;Yn<ni.length-1;Yn++)v.push(In(hn,ni[Yn],hi,ni[Yn+1]));else v.push(In({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:D+1}));return v}function Ld(e,r,s){for(var p=0,v=0,_=e;v<_.length;v+=1){var A=_[v];p+=Math.max(r,Math.min(s,A[1]))-Math.max(r,Math.min(s,A[0]))}return p}function ay(e,r,s){for(var p=[{fixed:-1,stretch:0}],v=0,_=e;v<_.length;v+=1){var A=_[v],S=A[0],D=A[1],B=p[p.length-1];p.push({fixed:S-B.stretch,stretch:B.stretch}),p.push({fixed:S-B.stretch,stretch:B.stretch+(D-S)})}return p.push({fixed:r+1,stretch:s}),p}function kd(e,r,s,p){return e/r*s+p}function Dd(e,r,s,p){return e-r*s/p}var Mp=function(e,r,s,p,v,_,A,S,D,B){if(this.boxStartIndex=e.length,D){var N=_.top,V=_.bottom,Z=_.collisionPadding;Z&&(N-=Z[1],V+=Z[3]);var J=V-N;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{var ct=_.top*A-S,pt=_.bottom*A+S,It=_.left*A-S,_t=_.right*A+S,Vt=_.collisionPadding;if(Vt&&(It-=Vt[0]*A,ct-=Vt[1]*A,_t+=Vt[2]*A,pt+=Vt[3]*A),B){var Yt=new T(It,ct),Jt=new T(_t,ct),ee=new T(It,pt),fe=new T(_t,pt),Me=B*Math.PI/180;Yt._rotate(Me),Jt._rotate(Me),ee._rotate(Me),fe._rotate(Me),It=Math.min(Yt.x,Jt.x,ee.x,fe.x),_t=Math.max(Yt.x,Jt.x,ee.x,fe.x),ct=Math.min(Yt.y,Jt.y,ee.y,fe.y),pt=Math.max(Yt.y,Jt.y,ee.y,fe.y)}e.emplaceBack(r.x,r.y,It,ct,_t,pt,s,p,v)}this.boxEndIndex=e.length},Th=function(e,r){if(e===void 0&&(e=[]),r===void 0&&(r=sy),this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function sy(e,r){return e<r?-1:e>r?1:0}function q_(e,r,s){s===void 0&&(s=!1);for(var p=1/0,v=1/0,_=-1/0,A=-1/0,S=e[0],D=0;D<S.length;D++){var B=S[D];(!D||B.x<p)&&(p=B.x),(!D||B.y<v)&&(v=B.y),(!D||B.x>_)&&(_=B.x),(!D||B.y>A)&&(A=B.y)}var N=Math.min(_-p,A-v),V=N/2,Z=new Th([],W_);if(N===0)return new T(p,v);for(var J=p;J<_;J+=N)for(var ct=v;ct<A;ct+=N)Z.push(new If(J+V,ct+V,V,e));for(var pt=function(Vt){for(var Yt=0,Jt=0,ee=0,fe=Vt[0],Me=0,Be=fe.length,yn=Be-1;Me<Be;yn=Me++){var We=fe[Me],In=fe[yn],Qe=We.x*In.y-In.x*We.y;Jt+=(We.x+In.x)*Qe,ee+=(We.y+In.y)*Qe,Yt+=3*Qe}return new If(Jt/Yt,ee/Yt,0,Vt)}(e),It=Z.length;Z.length;){var _t=Z.pop();(_t.d>pt.d||!pt.d)&&(pt=_t,s&&console.log("found best %d after %d probes",Math.round(1e4*_t.d)/1e4,It)),_t.max-pt.d<=r||(Z.push(new If(_t.p.x-(V=_t.h/2),_t.p.y-V,V,e)),Z.push(new If(_t.p.x+V,_t.p.y-V,V,e)),Z.push(new If(_t.p.x-V,_t.p.y+V,V,e)),Z.push(new If(_t.p.x+V,_t.p.y+V,V,e)),It+=4)}return s&&(console.log("num probes: "+It),console.log("best distance: "+pt.d)),pt.p}function W_(e,r){return r.max-e.max}function If(e,r,s,p){this.p=new T(e,r),this.h=s,this.d=function(v,_){for(var A=!1,S=1/0,D=0;D<_.length;D++)for(var B=_[D],N=0,V=B.length,Z=V-1;N<V;Z=N++){var J=B[N],ct=B[Z];J.y>v.y!=ct.y>v.y&&v.x<(ct.x-J.x)*(v.y-J.y)/(ct.y-J.y)+J.x&&(A=!A),S=Math.min(S,hc(v,J,ct))}return(A?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}Th.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Th.prototype.pop=function(){if(this.length!==0){var e=this.data[0],r=this.data.pop();return this.length--,this.length>0&&(this.data[0]=r,this._down(0)),e}},Th.prototype.peek=function(){return this.data[0]},Th.prototype._up=function(e){for(var r=this.data,s=this.compare,p=r[e];e>0;){var v=e-1>>1,_=r[v];if(s(p,_)>=0)break;r[e]=_,e=v}r[e]=p},Th.prototype._down=function(e){for(var r=this.data,s=this.compare,p=this.length>>1,v=r[e];e<p;){var _=1+(e<<1),A=r[_],S=_+1;if(S<this.length&&s(r[S],A)<0&&(_=S,A=r[S]),s(A,v)>=0)break;r[e]=A,e=_}r[e]=v};var Rd=Number.POSITIVE_INFINITY;function ly(e,r){return r[1]!==Rd?function(s,p,v){var _=0,A=0;switch(p=Math.abs(p),v=Math.abs(v),s){case"top-right":case"top-left":case"top":A=v-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-v}switch(s){case"top-right":case"bottom-right":case"right":_=-p;break;case"top-left":case"bottom-left":case"left":_=p}return[_,A]}(e,r[0],r[1]):function(s,p){var v=0,_=0;p<0&&(p=0);var A=p/Math.sqrt(2);switch(s){case"top-right":case"top-left":_=A-7;break;case"bottom-right":case"bottom-left":_=7-A;break;case"bottom":_=7-p;break;case"top":_=p-7}switch(s){case"top-right":case"bottom-right":v=-A;break;case"top-left":case"bottom-left":v=A;break;case"left":v=p;break;case"right":v=-p}return[v,_]}(e,r[0])}function og(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uy(e,r,s,p,v,_,A,S,D,B,N,V,Z,J,ct){var pt=function(Jt,ee,fe,Me,Be,yn,We,In){for(var Qe=Me.layout.get("text-rotate").evaluate(yn,{})*Math.PI/180,ni=[],zn=0,hn=ee.positionedLines;zn<hn.length;zn+=1)for(var hi=hn[zn],Yn=0,Ei=hi.positionedGlyphs;Yn<Ei.length;Yn+=1){var En=Ei[Yn];if(En.rect){var Gi=En.rect||{},Rr=4,zr=!0,Ir=1,Or=0,Jr=(Be||In)&&En.vertical,go=En.metrics.advance*En.scale/2;if(In&&ee.verticalizable&&(Or=hi.lineOffset/2-(En.imageName?-(24-En.metrics.width*En.scale)/2:24*(En.scale-1))),En.imageName){var Co=We[En.imageName];zr=Co.sdf,Rr=1/(Ir=Co.pixelRatio)}var Aa=Be?[En.x+go,En.y]:[0,0],No=Be?[0,0]:[En.x+go+fe[0],En.y+fe[1]-Or],wa=[0,0];Jr&&(wa=No,No=[0,0]);var oo=(En.metrics.left-Rr)*En.scale-go+No[0],Vo=(-En.metrics.top-Rr)*En.scale+No[1],xi=oo+Gi.w*En.scale/Ir,fr=Vo+Gi.h*En.scale/Ir,nr=new T(oo,Vo),Fi=new T(xi,Vo),Na=new T(oo,fr),ia=new T(xi,fr);if(Jr){var Mr=new T(-go,go- -17),ur=-Math.PI/2,ra=12-go,qi=new T(22-ra,-(En.imageName?ra:0)),Ja=new(Function.prototype.bind.apply(T,[null].concat(wa)));nr._rotateAround(ur,Mr)._add(qi)._add(Ja),Fi._rotateAround(ur,Mr)._add(qi)._add(Ja),Na._rotateAround(ur,Mr)._add(qi)._add(Ja),ia._rotateAround(ur,Mr)._add(qi)._add(Ja)}if(Qe){var Gn=Math.sin(Qe),Vu=Math.cos(Qe),Xi=[Vu,-Gn,Gn,Vu];nr._matMult(Xi),Fi._matMult(Xi),Na._matMult(Xi),ia._matMult(Xi)}var Er=new T(0,0),Dl=new T(0,0);ni.push({tl:nr,tr:Fi,bl:Na,br:ia,tex:Gi,writingMode:ee.writingMode,glyphOffset:Aa,sectionIndex:En.sectionIndex,isSDF:zr,pixelOffsetTL:Er,pixelOffsetBR:Dl,minFontScaleX:0,minFontScaleY:0})}}return ni}(0,s,S,v,_,A,p,e.allowVerticalPlacement),It=e.textSizeData,_t=null;It.kind==="source"?(_t=[128*v.layout.get("text-size").evaluate(A,{})])[0]>32640&&Bt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):It.kind==="composite"&&((_t=[128*J.compositeTextSizes[0].evaluate(A,{},ct),128*J.compositeTextSizes[1].evaluate(A,{},ct)])[0]>32640||_t[1]>32640)&&Bt(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,pt,_t,S,_,A,B,r,D.lineStartIndex,D.lineLength,Z,ct);for(var Vt=0,Yt=N;Vt<Yt.length;Vt+=1)V[Yt[Vt]]=e.text.placedSymbolArray.length-1;return 4*pt.length}function cy(e){for(var r in e)return e[r];return null}function Z_(e,r,s,p){var v=e.compareText;if(r in v){for(var _=v[r],A=_.length-1;A>=0;A--)if(p.dist(_[A])<s)return!0}else v[r]=[];return v[r].push(p),!1}var Y_=ru.VectorTileFeature.types,kl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zd(e,r,s,p,v,_,A,S,D,B,N,V,Z){var J=S?Math.min(32640,Math.round(S[0])):0,ct=S?Math.min(32640,Math.round(S[1])):0;e.emplaceBack(r,s,Math.round(32*p),Math.round(32*v),_,A,(J<<1)+(D?1:0),ct,16*B,16*N,256*V,256*Z)}function ag(e,r,s){e.emplaceBack(r.x,r.y,s),e.emplaceBack(r.x,r.y,s),e.emplaceBack(r.x,r.y,s),e.emplaceBack(r.x,r.y,s)}function X_(e){for(var r=0,s=e.sections;r<s.length;r+=1)if(hf(s[r].text))return!0;return!1}var Ph=function(e){this.layoutVertexArray=new mf,this.indexArray=new Du,this.programConfigurations=e,this.segments=new it,this.dynamicLayoutVertexArray=new Uc,this.opacityVertexArray=new _h,this.placedSymbolArray=new d};Ph.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ph.prototype.upload=function(e,r,s,p){this.isEmpty()||(s&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yv.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,R_.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,kl,!0),this.opacityVertexBuffer.itemSize=1),(s||p)&&this.programConfigurations.upload(e))},Ph.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ye("SymbolBuffers",Ph);var Ep=function(e,r,s){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new s,this.segments=new it,this.collisionVertexArray=new mp};Ep.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,z_.members,!0)},Ep.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ye("CollisionBuffers",Ep);var lr=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(_){return _.id}),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fs([]),this.placementViewportMatrix=fs([]);var r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pd(this.zoom,r["text-size"]),this.iconSizeData=Pd(this.zoom,r["icon-size"]);var s=this.layers[0].layout,p=s.get("symbol-sort-key"),v=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(_){return ds[_]})),this.stateDependentLayerIds=this.layers.filter(function(_){return _.isStateDependent()}).map(function(_){return _.id}),this.sourceID=e.sourceID};lr.prototype.createArrays=function(){this.text=new Ph(new dn(this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new Ph(new dn(this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.glyphOffsetArray=new E,this.lineVertexArray=new k,this.symbolInstances=new w},lr.prototype.calculateGlyphDependencies=function(e,r,s,p,v){for(var _=0;_<e.length;_++)if(r[e.charCodeAt(_)]=!0,(s||p)&&v){var A=Mh[e.charAt(_)];A&&(r[A.charCodeAt(0)]=!0)}},lr.prototype.populate=function(e,r,s){var p=this.layers[0],v=p.layout,_=v.get("text-font"),A=v.get("text-field"),S=v.get("icon-image"),D=(A.value.kind!=="constant"||A.value.value instanceof Lr&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),B=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,N=v.get("symbol-sort-key");if(this.features=[],D||B){for(var V=r.iconDependencies,Z=r.glyphDependencies,J=r.availableImages,ct=new Rn(this.zoom),pt=0,It=e;pt<It.length;pt+=1){var _t=It[pt],Vt=_t.feature,Yt=_t.id,Jt=_t.index,ee=_t.sourceLayerIndex,fe=p._featureFilter.needGeometry,Me=yr(Vt,fe);if(p._featureFilter.filter(ct,Me,s)){fe||(Me.geometry=Cr(Vt));var Be=void 0;if(D){var yn=p.getValueAndResolveTokens("text-field",Me,s,J),We=Lr.factory(yn);X_(We)&&(this.hasRTLText=!0),(!this.hasRTLText||pf()==="unavailable"||this.hasRTLText&&cs.isParsed())&&(Be=Qm(We,p,Me))}var In=void 0;if(B){var Qe=p.getValueAndResolveTokens("icon-image",Me,s,J);In=Qe instanceof Ro?Qe:Ro.fromString(Qe)}if(Be||In){var ni=this.sortFeaturesByKey?N.evaluate(Me,{},s):void 0;if(this.features.push({id:Yt,text:Be,icon:In,index:Jt,sourceLayerIndex:ee,geometry:Me.geometry,properties:Vt.properties,type:Y_[Vt.type],sortKey:ni}),In&&(V[In.name]=!0),Be){var zn=_.evaluate(Me,{},s).join(","),hn=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ds.vertical)>=0;for(var hi=0,Yn=Be.sections;hi<Yn.length;hi+=1){var Ei=Yn[hi];if(Ei.image)V[Ei.image.name]=!0;else{var En=Js(Be.toString()),Gi=Ei.fontStack||zn,Rr=Z[Gi]=Z[Gi]||{};this.calculateGlyphDependencies(Ei.text,Rr,hn,this.allowVerticalPlacement,En)}}}}}}v.get("symbol-placement")==="line"&&(this.features=function(zr){var Ir={},Or={},Jr=[],go=0;function Co(Mr){Jr.push(zr[Mr]),go++}function Aa(Mr,ur,ra){var qi=Or[Mr];return delete Or[Mr],Or[ur]=qi,Jr[qi].geometry[0].pop(),Jr[qi].geometry[0]=Jr[qi].geometry[0].concat(ra[0]),qi}function No(Mr,ur,ra){var qi=Ir[ur];return delete Ir[ur],Ir[Mr]=qi,Jr[qi].geometry[0].shift(),Jr[qi].geometry[0]=ra[0].concat(Jr[qi].geometry[0]),qi}function wa(Mr,ur,ra){var qi=ra?ur[0][ur[0].length-1]:ur[0][0];return Mr+":"+qi.x+":"+qi.y}for(var oo=0;oo<zr.length;oo++){var Vo=zr[oo],xi=Vo.geometry,fr=Vo.text?Vo.text.toString():null;if(fr){var nr=wa(fr,xi),Fi=wa(fr,xi,!0);if(nr in Or&&Fi in Ir&&Or[nr]!==Ir[Fi]){var Na=No(nr,Fi,xi),ia=Aa(nr,Fi,Jr[Na].geometry);delete Ir[nr],delete Or[Fi],Or[wa(fr,Jr[ia].geometry,!0)]=ia,Jr[Na].geometry=null}else nr in Or?Aa(nr,Fi,xi):Fi in Ir?No(nr,Fi,xi):(Co(oo),Ir[nr]=go-1,Or[Fi]=go-1)}else Co(oo)}return Jr.filter(function(Mr){return Mr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(zr,Ir){return zr.sortKey-Ir.sortKey})}},lr.prototype.update=function(e,r,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,s),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,s))},lr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},lr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},lr.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},lr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},lr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},lr.prototype.addToLineVertexArray=function(e,r){var s=this.lineVertexArray.length;if(e.segment!==void 0){for(var p=e.dist(r[e.segment+1]),v=e.dist(r[e.segment]),_={},A=e.segment+1;A<r.length;A++)_[A]={x:r[A].x,y:r[A].y,tileUnitDistanceFromAnchor:p},A<r.length-1&&(p+=r[A+1].dist(r[A]));for(var S=e.segment||0;S>=0;S--)_[S]={x:r[S].x,y:r[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=r[S-1].dist(r[S]));for(var D=0;D<r.length;D++){var B=_[D];this.lineVertexArray.emplaceBack(B.x,B.y,B.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},lr.prototype.addSymbols=function(e,r,s,p,v,_,A,S,D,B,N,V){for(var Z=e.indexArray,J=e.layoutVertexArray,ct=e.segments.prepareSegment(4*r.length,J,Z,this.canOverlap?_.sortKey:void 0),pt=this.glyphOffsetArray.length,It=ct.vertexLength,_t=this.allowVerticalPlacement&&A===ds.vertical?Math.PI/2:0,Vt=_.text&&_.text.sections,Yt=0;Yt<r.length;Yt++){var Jt=r[Yt],ee=Jt.tl,fe=Jt.tr,Me=Jt.bl,Be=Jt.br,yn=Jt.tex,We=Jt.pixelOffsetTL,In=Jt.pixelOffsetBR,Qe=Jt.minFontScaleX,ni=Jt.minFontScaleY,zn=Jt.glyphOffset,hn=Jt.isSDF,hi=Jt.sectionIndex,Yn=ct.vertexLength,Ei=zn[1];zd(J,S.x,S.y,ee.x,Ei+ee.y,yn.x,yn.y,s,hn,We.x,We.y,Qe,ni),zd(J,S.x,S.y,fe.x,Ei+fe.y,yn.x+yn.w,yn.y,s,hn,In.x,We.y,Qe,ni),zd(J,S.x,S.y,Me.x,Ei+Me.y,yn.x,yn.y+yn.h,s,hn,We.x,In.y,Qe,ni),zd(J,S.x,S.y,Be.x,Ei+Be.y,yn.x+yn.w,yn.y+yn.h,s,hn,In.x,In.y,Qe,ni),ag(e.dynamicLayoutVertexArray,S,_t),Z.emplaceBack(Yn,Yn+1,Yn+2),Z.emplaceBack(Yn+1,Yn+2,Yn+3),ct.vertexLength+=4,ct.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zn[0]),Yt!==r.length-1&&hi===r[Yt+1].sectionIndex||e.programConfigurations.populatePaintArrays(J.length,_,_.index,{},V,Vt&&Vt[hi])}e.placedSymbolArray.emplaceBack(S.x,S.y,pt,this.glyphOffsetArray.length-pt,It,D,B,S.segment,s?s[0]:0,s?s[1]:0,p[0],p[1],A,0,!1,0,N)},lr.prototype._addCollisionDebugVertex=function(e,r,s,p,v,_){return r.emplaceBack(0,0),e.emplaceBack(s.x,s.y,p,v,Math.round(_.x),Math.round(_.y))},lr.prototype.addCollisionDebugVertices=function(e,r,s,p,v,_,A){var S=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),D=S.vertexLength,B=v.layoutVertexArray,N=v.collisionVertexArray,V=A.anchorX,Z=A.anchorY;this._addCollisionDebugVertex(B,N,_,V,Z,new T(e,r)),this._addCollisionDebugVertex(B,N,_,V,Z,new T(s,r)),this._addCollisionDebugVertex(B,N,_,V,Z,new T(s,p)),this._addCollisionDebugVertex(B,N,_,V,Z,new T(e,p)),S.vertexLength+=4;var J=v.indexArray;J.emplaceBack(D,D+1),J.emplaceBack(D+1,D+2),J.emplaceBack(D+2,D+3),J.emplaceBack(D+3,D),S.primitiveLength+=4},lr.prototype.addDebugCollisionBoxes=function(e,r,s,p){for(var v=e;v<r;v++){var _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,s)}},lr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ep(jc,Nu.members,xh),this.iconCollisionBox=new Ep(jc,Nu.members,xh);for(var e=0;e<this.symbolInstances.length;e++){var r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}},lr.prototype._deserializeCollisionBoxesForSymbol=function(e,r,s,p,v,_,A,S,D){for(var B={},N=r;N<s;N++){var V=e.get(N);B.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},B.textFeatureIndex=V.featureIndex;break}for(var Z=p;Z<v;Z++){var J=e.get(Z);B.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},B.verticalTextFeatureIndex=J.featureIndex;break}for(var ct=_;ct<A;ct++){var pt=e.get(ct);B.iconBox={x1:pt.x1,y1:pt.y1,x2:pt.x2,y2:pt.y2,anchorPointX:pt.anchorPointX,anchorPointY:pt.anchorPointY},B.iconFeatureIndex=pt.featureIndex;break}for(var It=S;It<D;It++){var _t=e.get(It);B.verticalIconBox={x1:_t.x1,y1:_t.y1,x2:_t.x2,y2:_t.y2,anchorPointX:_t.anchorPointX,anchorPointY:_t.anchorPointY},B.verticalIconFeatureIndex=_t.featureIndex;break}return B},lr.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var r=0;r<this.symbolInstances.length;r++){var s=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},lr.prototype.hasTextData=function(){return this.text.segments.get().length>0},lr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},lr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},lr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},lr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},lr.prototype.addIndicesForPlacedSymbol=function(e,r){for(var s=e.placedSymbolArray.get(r),p=s.vertexStartIndex+4*s.numGlyphs,v=s.vertexStartIndex;v<p;v+=4)e.indexArray.emplaceBack(v,v+1,v+2),e.indexArray.emplaceBack(v+1,v+2,v+3)},lr.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var r=Math.sin(e),s=Math.cos(e),p=[],v=[],_=[],A=0;A<this.symbolInstances.length;++A){_.push(A);var S=this.symbolInstances.get(A);p.push(0|Math.round(r*S.anchorX+s*S.anchorY)),v.push(S.featureIndex)}return _.sort(function(D,B){return p[D]-p[B]||v[B]-v[D]}),_},lr.prototype.addToSortKeyRanges=function(e,r){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===r?s.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})},lr.prototype.sortFeatures=function(e){var r=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,p=this.symbolInstanceIndexes;s<p.length;s+=1){var v=this.symbolInstances.get(p[s]);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach(function(_,A,S){_>=0&&S.indexOf(_)===A&&r.addIndicesForPlacedSymbol(r.text,_)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ye("SymbolBucket",lr,{omit:["layers","collisionBoxArray","features","compareText"]}),lr.MAX_GLYPHS=65535,lr.addDynamicAttributes=ag;var K_=new Xo({"symbol-placement":new vn(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new vn(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vn(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new un(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vn(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vn(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new vn(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new vn(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vn(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new un(tt.layout_symbol["icon-size"]),"icon-text-fit":new vn(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vn(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new un(tt.layout_symbol["icon-image"]),"icon-rotate":new un(tt.layout_symbol["icon-rotate"]),"icon-padding":new vn(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new vn(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new un(tt.layout_symbol["icon-offset"]),"icon-anchor":new un(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vn(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vn(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vn(tt.layout_symbol["text-rotation-alignment"]),"text-field":new un(tt.layout_symbol["text-field"]),"text-font":new un(tt.layout_symbol["text-font"]),"text-size":new un(tt.layout_symbol["text-size"]),"text-max-width":new un(tt.layout_symbol["text-max-width"]),"text-line-height":new vn(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new un(tt.layout_symbol["text-letter-spacing"]),"text-justify":new un(tt.layout_symbol["text-justify"]),"text-radial-offset":new un(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vn(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new un(tt.layout_symbol["text-anchor"]),"text-max-angle":new vn(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new vn(tt.layout_symbol["text-writing-mode"]),"text-rotate":new un(tt.layout_symbol["text-rotate"]),"text-padding":new vn(tt.layout_symbol["text-padding"]),"text-keep-upright":new vn(tt.layout_symbol["text-keep-upright"]),"text-transform":new un(tt.layout_symbol["text-transform"]),"text-offset":new un(tt.layout_symbol["text-offset"]),"text-allow-overlap":new vn(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new vn(tt.layout_symbol["text-ignore-placement"]),"text-optional":new vn(tt.layout_symbol["text-optional"])}),sg={paint:new Xo({"icon-opacity":new un(tt.paint_symbol["icon-opacity"]),"icon-color":new un(tt.paint_symbol["icon-color"]),"icon-halo-color":new un(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new un(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new un(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new vn(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new vn(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new un(tt.paint_symbol["text-opacity"]),"text-color":new un(tt.paint_symbol["text-color"],{runtimeType:je,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new un(tt.paint_symbol["text-halo-color"]),"text-halo-width":new un(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new un(tt.paint_symbol["text-halo-blur"]),"text-translate":new vn(tt.paint_symbol["text-translate"]),"text-translate-anchor":new vn(tt.paint_symbol["text-translate-anchor"])}),layout:K_},Yc=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:on,this.defaultValue=e};Yc.prototype.evaluate=function(e){if(e.formattedSection){var r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},Yc.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},Yc.prototype.outputDefined=function(){return!1},Yc.prototype.serialize=function(){return null},Ye("FormatSectionOverride",Yc,{omit:["defaultValue"]});var Q_=function(e){function r(s){e.call(this,s,sg)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.recalculate=function(s,p){if(e.prototype.recalculate.call(this,s,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var v=this.layout.get("text-writing-mode");if(v){for(var _=[],A=0,S=v;A<S.length;A+=1){var D=S[A];_.indexOf(D)<0&&_.push(D)}this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},r.prototype.getValueAndResolveTokens=function(s,p,v,_){var A=this.layout.get(s).evaluate(p,{},v,_),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||Cu(S.value)||!A?A:function(D,B){return B.replace(/{([^{}]+)}/g,function(N,V){return V in D?String(D[V]):""})}(p.properties,A)},r.prototype.createBucket=function(s){return new lr(s)},r.prototype.queryRadius=function(){return 0},r.prototype.queryIntersectsFeature=function(){return!1},r.prototype._setPaintOverrides=function(){for(var s=0,p=sg.paint.overridableProperties;s<p.length;s+=1){var v=p[s];if(r.hasPaintOverride(this.layout,v)){var _,A=this.paint.get(v),S=new Yc(A),D=new bl(S,A.property.specification);_=A.value.kind==="constant"||A.value.kind==="source"?new Ms("source",D):new Iu("composite",D,A.value.zoomStops,A.value._interpolationType),this.paint._values[v]=new Lo(A.property,_,A.parameters)}}},r.prototype._handleOverridablePaintPropertyUpdate=function(s,p,v){return!(!this.layout||p.isDataDriven()||v.isDataDriven())&&r.hasPaintOverride(this.layout,s)},r.hasPaintOverride=function(s,p){var v=s.get("text-field"),_=sg.paint.properties[p],A=!1,S=function(N){for(var V=0,Z=N;V<Z.length;V+=1)if(_.overrides&&_.overrides.hasOverride(Z[V]))return void(A=!0)};if(v.value.kind==="constant"&&v.value.value instanceof Lr)S(v.value.value.sections);else if(v.value.kind==="source"){var D=function(N){A||(N instanceof yo&&kr(N.value)===Vi?S(N.value.sections):N instanceof qa?S(N.sections):N.eachChild(D))},B=v.value;B._styleExpression&&D(B._styleExpression.expression)}return A},r}(Il),$_={paint:new Xo({"background-color":new vn(tt.paint_background["background-color"]),"background-pattern":new Bo(tt.paint_background["background-pattern"]),"background-opacity":new vn(tt.paint_background["background-opacity"])})},J_=function(e){function r(s){e.call(this,s,$_)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Il),t1={paint:new Xo({"raster-opacity":new vn(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new vn(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vn(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vn(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new vn(tt.paint_raster["raster-saturation"]),"raster-contrast":new vn(tt.paint_raster["raster-contrast"]),"raster-resampling":new vn(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new vn(tt.paint_raster["raster-fade-duration"])})},e1=function(e){function r(s){e.call(this,s,t1)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r}(Il),n1=function(e){function r(s){e.call(this,s,{}),this.implementation=s}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},r.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},r.prototype.recalculate=function(){},r.prototype.updateTransitions=function(){},r.prototype.hasTransition=function(){},r.prototype.serialize=function(){},r.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},r.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},r}(Il),i1={circle:cd,heatmap:Vm,hillshade:Um,fill:zs,"fill-extrusion":bd,line:Wv,symbol:Q_,background:J_,raster:e1},hy=L.HTMLImageElement,fy=L.HTMLCanvasElement,py=L.HTMLVideoElement,dy=L.ImageData,Od=L.ImageBitmap,Lh=function(e,r,s,p){this.context=e,this.format=s,this.texture=e.gl.createTexture(),this.update(r,p)};Lh.prototype.update=function(e,r,s){var p=e.width,v=e.height,_=!(this.size&&this.size[0]===p&&this.size[1]===v||s),A=this.context,S=A.gl;if(this.useMipmap=!!(r&&r.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!r||r.premultiply!==!1)),_)this.size=[p,v],e instanceof hy||e instanceof fy||e instanceof py||e instanceof dy||Od&&e instanceof Od?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,e):S.texImage2D(S.TEXTURE_2D,0,this.format,p,v,0,this.format,S.UNSIGNED_BYTE,e.data);else{var D=s||{x:0,y:0},B=D.x,N=D.y;e instanceof hy||e instanceof fy||e instanceof py||e instanceof dy||Od&&e instanceof Od?S.texSubImage2D(S.TEXTURE_2D,0,B,N,S.RGBA,S.UNSIGNED_BYTE,e):S.texSubImage2D(S.TEXTURE_2D,0,B,N,p,v,S.RGBA,S.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Lh.prototype.bind=function(e,r,s){var p=this.context.gl;p.bindTexture(p.TEXTURE_2D,this.texture),s!==p.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=p.LINEAR),e!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,e),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,s||e),this.filter=e),r!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,r),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,r),this.wrap=r)},Lh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Lh.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var lg=function(e){var r=this;this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){r._triggered=!1,r._callback()})};lg.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){e._triggered=!1,e._callback()},0))},lg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Mf=function(e,r,s){this.target=e,this.parent=r,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},Et(["receive","process"],this),this.invoker=new lg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_e()?e:L};function my(e,r,s){var p=2*Math.PI*6378137/256/Math.pow(2,s);return[e*p-2*Math.PI*6378137/2,r*p-2*Math.PI*6378137/2]}Mf.prototype.send=function(e,r,s,p,v){var _=this;v===void 0&&(v=!1);var A=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[A]=s);var S=Pi(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:e,hasCallback:!!s,targetMapId:p,mustQueue:v,sourceMapId:this.mapId,data:To(r,S)},S),{cancel:function(){s&&delete _.callbacks[A],_.target.postMessage({id:A,type:"<cancel>",targetMapId:p,sourceMapId:_.mapId})}}},Mf.prototype.receive=function(e){var r=e.data,s=r.id;if(s&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){delete this.tasks[s];var p=this.cancelCallbacks[s];delete this.cancelCallbacks[s],p&&p()}else _e()||r.mustQueue?(this.tasks[s]=r,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,r)},Mf.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),r=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),r&&this.processTask(e,r)}},Mf.prototype.processTask=function(e,r){var s=this;if(r.type==="<response>"){var p=this.callbacks[e];delete this.callbacks[e],p&&(r.error?p(Po(r.error)):p(null,Po(r.data)))}else{var v=!1,_=Pi(this.globalScope)?void 0:[],A=r.hasCallback?function(N,V){v=!0,delete s.cancelCallbacks[e],s.target.postMessage({id:e,type:"<response>",sourceMapId:s.mapId,error:N?To(N):null,data:To(V,_)},_)}:function(N){v=!0},S=null,D=Po(r.data);if(this.parent[r.type])S=this.parent[r.type](r.sourceMapId,D,A);else if(this.parent.getWorkerSource){var B=r.type.split(".");S=this.parent.getWorkerSource(r.sourceMapId,B[0],D.source)[B[1]](D,A)}else A(new Error("Could not find function "+r.type));!v&&S&&S.cancel&&(this.cancelCallbacks[e]=S.cancel)}},Mf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Ao=function(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Ao.prototype.setNorthEast=function(e){return this._ne=e instanceof Dr?new Dr(e.lng,e.lat):Dr.convert(e),this},Ao.prototype.setSouthWest=function(e){return this._sw=e instanceof Dr?new Dr(e.lng,e.lat):Dr.convert(e),this},Ao.prototype.extend=function(e){var r,s,p=this._sw,v=this._ne;if(e instanceof Dr)r=e,s=e;else{if(!(e instanceof Ao))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ao.convert(e)):this.extend(Dr.convert(e)):this;if(s=e._ne,!(r=e._sw)||!s)return this}return p||v?(p.lng=Math.min(r.lng,p.lng),p.lat=Math.min(r.lat,p.lat),v.lng=Math.max(s.lng,v.lng),v.lat=Math.max(s.lat,v.lat)):(this._sw=new Dr(r.lng,r.lat),this._ne=new Dr(s.lng,s.lat)),this},Ao.prototype.getCenter=function(){return new Dr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Ao.prototype.getSouthWest=function(){return this._sw},Ao.prototype.getNorthEast=function(){return this._ne},Ao.prototype.getNorthWest=function(){return new Dr(this.getWest(),this.getNorth())},Ao.prototype.getSouthEast=function(){return new Dr(this.getEast(),this.getSouth())},Ao.prototype.getWest=function(){return this._sw.lng},Ao.prototype.getSouth=function(){return this._sw.lat},Ao.prototype.getEast=function(){return this._ne.lng},Ao.prototype.getNorth=function(){return this._ne.lat},Ao.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Ao.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Ao.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Ao.prototype.contains=function(e){var r=Dr.convert(e),s=r.lng,p=r.lat,v=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&v},Ao.convert=function(e){return!e||e instanceof Ao?e:new Ao(e)};var Dr=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid LngLat object: ("+e+", "+r+")");if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Dr.prototype.wrap=function(){return new Dr(lt(this.lng,-180,180),this.lat)},Dr.prototype.toArray=function(){return[this.lng,this.lat]},Dr.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Dr.prototype.distanceTo=function(e){var r=Math.PI/180,s=this.lat*r,p=e.lat*r,v=Math.sin(s)*Math.sin(p)+Math.cos(s)*Math.cos(p)*Math.cos((e.lng-this.lng)*r);return 63710088e-1*Math.acos(Math.min(v,1))},Dr.prototype.toBounds=function(e){e===void 0&&(e=0);var r=360*e/40075017,s=r/Math.cos(Math.PI/180*this.lat);return new Ao(new Dr(this.lng-s,this.lat-r),new Dr(this.lng+s,this.lat+r))},Dr.convert=function(e){if(e instanceof Dr)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Dr(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Dr(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var gy=2*Math.PI*63710088e-1;function vy(e){return gy*Math.cos(e*Math.PI/180)}function Bd(e){return(180+e)/360}function ug(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function yy(e,r){return e/vy(r)}function cg(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var kh=function(e,r,s){s===void 0&&(s=0),this.x=+e,this.y=+r,this.z=+s};kh.fromLngLat=function(e,r){r===void 0&&(r=0);var s=Dr.convert(e);return new kh(Bd(s.lng),ug(s.lat),yy(r,s.lat))},kh.prototype.toLngLat=function(){return new Dr(360*this.x-180,cg(this.y))},kh.prototype.toAltitude=function(){return this.z*vy(cg(this.y))},kh.prototype.meterInMercatorCoordinateUnits=function(){return 1/gy*(e=cg(this.y),1/Math.cos(e*Math.PI/180));var e};var Dh=function(e,r,s){this.z=e,this.x=r,this.y=s,this.key=Sp(0,e,e,r,s)};Dh.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Dh.prototype.url=function(e,r){var s,p,v,_,A,S=(p=this.y,v=this.z,_=my(256*(s=this.x),256*(p=Math.pow(2,v)-p-1),v),A=my(256*(s+1),256*(p+1),v),_[0]+","+_[1]+","+A[0]+","+A[1]),D=function(B,N,V){for(var Z,J="",ct=B;ct>0;ct--)J+=(N&(Z=1<<ct-1)?1:0)+(V&Z?2:0);return J}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(r==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",D).replace("{bbox-epsg-3857}",S)},Dh.prototype.getTilePoint=function(e){var r=Math.pow(2,this.z);return new T(8192*(e.x*r-this.x),8192*(e.y*r-this.y))},Dh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var _y=function(e,r){this.wrap=e,this.canonical=r,this.key=Sp(e,r.z,r.z,r.x,r.y)},wo=function(e,r,s,p,v){this.overscaledZ=e,this.wrap=r,this.canonical=new Dh(s,+p,+v),this.key=Sp(r,e,s,p,v)};function Sp(e,r,s,p,v){(e*=2)<0&&(e=-1*e-1);var _=1<<s;return(_*_*e+_*v+p).toString(36)+s.toString(36)+r.toString(36)}wo.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},wo.prototype.scaledTo=function(e){var r=this.canonical.z-e;return e>this.canonical.z?new wo(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wo(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)},wo.prototype.calculateScaledKey=function(e,r){var s=this.canonical.z-e;return e>this.canonical.z?Sp(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):Sp(this.wrap*+r,e,e,this.canonical.x>>s,this.canonical.y>>s)},wo.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var r=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r},wo.prototype.children=function(e){if(this.overscaledZ>=e)return[new wo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var r=this.canonical.z+1,s=2*this.canonical.x,p=2*this.canonical.y;return[new wo(r,this.wrap,r,s,p),new wo(r,this.wrap,r,s+1,p),new wo(r,this.wrap,r,s,p+1),new wo(r,this.wrap,r,s+1,p+1)]},wo.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},wo.prototype.wrapped=function(){return new wo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.unwrapTo=function(e){return new wo(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},wo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},wo.prototype.toUnwrapped=function(){return new _y(this.wrap,this.canonical)},wo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},wo.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new kh(e.x-this.wrap,e.y))},Ye("CanonicalTileID",Dh),Ye("OverscaledTileID",wo,{omit:["posMatrix"]});var gc=function(e,r,s){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return Bt('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=r.height;var p=this.dim=r.height-2;this.data=new Uint32Array(r.data.buffer),this.encoding=s||"mapbox";for(var v=0;v<p;v++)this.data[this._idx(-1,v)]=this.data[this._idx(0,v)],this.data[this._idx(p,v)]=this.data[this._idx(p-1,v)],this.data[this._idx(v,-1)]=this.data[this._idx(v,0)],this.data[this._idx(v,p)]=this.data[this._idx(v,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)]};gc.prototype.get=function(e,r){var s=new Uint8Array(this.data.buffer),p=4*this._idx(e,r);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[p],s[p+1],s[p+2])},gc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},gc.prototype._idx=function(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(e+1)},gc.prototype._unpackMapbox=function(e,r,s){return(256*e*256+256*r+s)/10-1e4},gc.prototype._unpackTerrarium=function(e,r,s){return 256*e+r+s/256-32768},gc.prototype.getPixels=function(){return new Xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},gc.prototype.backfillBorder=function(e,r,s){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var p=r*this.dim,v=r*this.dim+this.dim,_=s*this.dim,A=s*this.dim+this.dim;switch(r){case-1:p=v-1;break;case 1:v=p+1}switch(s){case-1:_=A-1;break;case 1:A=_+1}for(var S=-r*this.dim,D=-s*this.dim,B=_;B<A;B++)for(var N=p;N<v;N++)this.data[this._idx(N,B)]=e.data[this._idx(N+S,B+D)]},Ye("DEMData",gc);var Tp=function(e){this._stringToNumber={},this._numberToString=[];for(var r=0;r<e.length;r++){var s=e[r];this._stringToNumber[s]=r,this._numberToString[r]=s}};Tp.prototype.encode=function(e){return this._stringToNumber[e]},Tp.prototype.decode=function(e){return this._numberToString[e]};var Fd=function(e,r,s,p,v){this.type="Feature",this._vectorTileFeature=e,e._z=r,e._x=s,e._y=p,this.properties=e.properties,this.id=v},Ef={geometry:{configurable:!0}};Ef.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Ef.geometry.set=function(e){this._geometry=e},Fd.prototype.toJSON=function(){var e={geometry:this.geometry};for(var r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(e[r]=this[r]);return e},Object.defineProperties(Fd.prototype,Ef);var Sf=function(){this.state={},this.stateChanges={},this.deletedStates={}};Sf.prototype.updateState=function(e,r,s){var p=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][p]=this.stateChanges[e][p]||{},K(this.stateChanges[e][p],s),this.deletedStates[e]===null)for(var v in this.deletedStates[e]={},this.state[e])v!==p&&(this.deletedStates[e][v]=null);else if(this.deletedStates[e]&&this.deletedStates[e][p]===null)for(var _ in this.deletedStates[e][p]={},this.state[e][p])s[_]||(this.deletedStates[e][p][_]=null);else for(var A in s)this.deletedStates[e]&&this.deletedStates[e][p]&&this.deletedStates[e][p][A]===null&&delete this.deletedStates[e][p][A]},Sf.prototype.removeFeatureState=function(e,r,s){if(this.deletedStates[e]!==null){var p=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},s&&r!==void 0)this.deletedStates[e][p]!==null&&(this.deletedStates[e][p]=this.deletedStates[e][p]||{},this.deletedStates[e][p][s]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][p])for(s in this.deletedStates[e][p]={},this.stateChanges[e][p])this.deletedStates[e][p][s]=null;else this.deletedStates[e][p]=null;else this.deletedStates[e]=null}},Sf.prototype.getState=function(e,r){var s=String(r),p=K({},(this.state[e]||{})[s],(this.stateChanges[e]||{})[s]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){var v=this.deletedStates[e][r];if(v===null)return{};for(var _ in v)delete p[_]}return p},Sf.prototype.initializeTileState=function(e,r){e.setFeatureState(this.state,r)},Sf.prototype.coalesceChanges=function(e,r){var s={};for(var p in this.stateChanges){this.state[p]=this.state[p]||{};var v={};for(var _ in this.stateChanges[p])this.state[p][_]||(this.state[p][_]={}),K(this.state[p][_],this.stateChanges[p][_]),v[_]=this.state[p][_];s[p]=v}for(var A in this.deletedStates){this.state[A]=this.state[A]||{};var S={};if(this.deletedStates[A]===null)for(var D in this.state[A])S[D]={},this.state[A][D]={};else for(var B in this.deletedStates[A]){if(this.deletedStates[A][B]===null)this.state[A][B]={};else for(var N=0,V=Object.keys(this.deletedStates[A][B]);N<V.length;N+=1)delete this.state[A][B][V[N]];S[B]=this.state[A][B]}s[A]=s[A]||{},K(s[A],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var Z in e)e[Z].setFeatureState(s,r)};var vc=function(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Wa(8192,16,0),this.grid3D=new Wa(8192,16,0),this.featureIndexArray=new j,this.promoteId=r};function xy(e,r,s,p,v){return kt(e,function(_,A){var S=r instanceof lc?r.get(A):null;return S&&S.evaluate?S.evaluate(s,p,v):S})}function by(e){for(var r=1/0,s=1/0,p=-1/0,v=-1/0,_=0,A=e;_<A.length;_+=1){var S=A[_];r=Math.min(r,S.x),s=Math.min(s,S.y),p=Math.max(p,S.x),v=Math.max(v,S.y)}return{minX:r,minY:s,maxX:p,maxY:v}}function r1(e,r){return r-e}vc.prototype.insert=function(e,r,s,p,v,_){var A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,p,v);for(var S=_?this.grid3D:this.grid,D=0;D<r.length;D++){for(var B=r[D],N=[1/0,1/0,-1/0,-1/0],V=0;V<B.length;V++){var Z=B[V];N[0]=Math.min(N[0],Z.x),N[1]=Math.min(N[1],Z.y),N[2]=Math.max(N[2],Z.x),N[3]=Math.max(N[3],Z.y)}N[0]<8192&&N[1]<8192&&N[2]>=0&&N[3]>=0&&S.insert(A,N[0],N[1],N[2],N[3])}},vc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ru.VectorTile(new Zn(this.rawTileData)).layers,this.sourceLayerCoder=new Tp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},vc.prototype.query=function(e,r,s,p){var v=this;this.loadVTLayers();for(var _=e.params||{},A=8192/e.tileSize/e.scale,S=Al(_.filter),D=e.queryGeometry,B=e.queryPadding*A,N=by(D),V=this.grid.query(N.minX-B,N.minY-B,N.maxX+B,N.maxY+B),Z=by(e.cameraQueryGeometry),J=this.grid3D.query(Z.minX-B,Z.minY-B,Z.maxX+B,Z.maxY+B,function(Jt,ee,fe,Me){return function(Be,yn,We,In,Qe){for(var ni=0,zn=Be;ni<zn.length;ni+=1){var hn=zn[ni];if(yn<=hn.x&&We<=hn.y&&In>=hn.x&&Qe>=hn.y)return!0}var hi=[new T(yn,We),new T(yn,Qe),new T(In,Qe),new T(In,We)];if(Be.length>2){for(var Yn=0,Ei=hi;Yn<Ei.length;Yn+=1)if(El(Be,Ei[Yn]))return!0}for(var En=0;En<Be.length-1;En++)if(Jl(Be[En],Be[En+1],hi))return!0;return!1}(e.cameraQueryGeometry,Jt-B,ee-B,fe+B,Me+B)}),ct=0,pt=J;ct<pt.length;ct+=1)V.push(pt[ct]);V.sort(r1);for(var It,_t={},Vt=function(Jt){var ee=V[Jt];if(ee!==It){It=ee;var fe=v.featureIndexArray.get(ee),Me=null;v.loadMatchingFeature(_t,fe.bucketIndex,fe.sourceLayerIndex,fe.featureIndex,S,_.layers,_.availableImages,r,s,p,function(Be,yn,We){return Me||(Me=Cr(Be)),yn.queryIntersectsFeature(D,Be,We,Me,v.z,e.transform,A,e.pixelPosMatrix)})}},Yt=0;Yt<V.length;Yt++)Vt(Yt);return _t},vc.prototype.loadMatchingFeature=function(e,r,s,p,v,_,A,S,D,B,N){var V=this.bucketLayerIDs[r];if(!_||function(Be,yn){for(var We=0;We<Be.length;We++)if(yn.indexOf(Be[We])>=0)return!0;return!1}(_,V)){var Z=this.sourceLayerCoder.decode(s),J=this.vtLayers[Z].feature(p);if(v.needGeometry){var ct=yr(J,!0);if(!v.filter(new Rn(this.tileID.overscaledZ),ct,this.tileID.canonical))return}else if(!v.filter(new Rn(this.tileID.overscaledZ),J))return;for(var pt=this.getId(J,Z),It=0;It<V.length;It++){var _t=V[It];if(!(_&&_.indexOf(_t)<0)){var Vt=S[_t];if(Vt){var Yt={};pt!==void 0&&B&&(Yt=B.getState(Vt.sourceLayer||"_geojsonTileLayer",pt));var Jt=K({},D[_t]);Jt.paint=xy(Jt.paint,Vt.paint,J,Yt,A),Jt.layout=xy(Jt.layout,Vt.layout,J,Yt,A);var ee=!N||N(J,Vt,Yt);if(ee){var fe=new Fd(J,this.z,this.x,this.y,pt);fe.layer=Jt;var Me=e[_t];Me===void 0&&(Me=e[_t]=[]),Me.push({featureIndex:p,feature:fe,intersectionZ:ee})}}}}}},vc.prototype.lookupSymbolFeatures=function(e,r,s,p,v,_,A,S){var D={};this.loadVTLayers();for(var B=Al(v),N=0,V=e;N<V.length;N+=1)this.loadMatchingFeature(D,s,p,V[N],B,_,A,S,r);return D},vc.prototype.hasLayer=function(e){for(var r=0,s=this.bucketLayerIDs;r<s.length;r+=1)for(var p=0,v=s[r];p<v.length;p+=1)if(e===v[p])return!0;return!1},vc.prototype.getId=function(e,r){var s=e.id;return this.promoteId&&typeof(s=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]])=="boolean"&&(s=Number(s)),s},Ye("FeatureIndex",vc,{omit:["rawTileData","sourceLayerCoder"]});var Fo=function(e,r){this.tileID=e,this.uid=yt(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Fo.prototype.registerFadeDuration=function(e){var r=e+this.timeAdded;r<Ke.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)},Fo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Fo.prototype.loadVectorData=function(e,r,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var p in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(B,N){var V={};if(!N)return V;for(var Z=function(){var pt=ct[J],It=pt.layerIds.map(function(Yt){return N.getLayer(Yt)}).filter(Boolean);if(It.length!==0){pt.layers=It,pt.stateDependentLayerIds&&(pt.stateDependentLayers=pt.stateDependentLayerIds.map(function(Yt){return It.filter(function(Jt){return Jt.id===Yt})[0]}));for(var _t=0,Vt=It;_t<Vt.length;_t+=1)V[Vt[_t].id]=pt}},J=0,ct=B;J<ct.length;J+=1)Z();return V}(e.buckets,r.style),this.hasSymbolBuckets=!1,this.buckets){var v=this.buckets[p];if(v instanceof lr){if(this.hasSymbolBuckets=!0,!s)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var _ in this.buckets){var A=this.buckets[_];if(A instanceof lr&&A.hasRTLText){this.hasRTLText=!0,cs.isLoading()||cs.isLoaded()||pf()!=="deferred"||tl();break}}for(var S in this.queryPadding=0,this.buckets){var D=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(S).queryRadius(D))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new c},Fo.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Fo.prototype.getBucket=function(e){return this.buckets[e.id]},Fo.prototype.upload=function(e){for(var r in this.buckets){var s=this.buckets[r];s.uploadPending()&&s.upload(e)}var p=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Lh(e,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Lh(e,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)},Fo.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},Fo.prototype.queryRenderedFeatures=function(e,r,s,p,v,_,A,S,D,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:v,scale:_,tileSize:this.tileSize,pixelPosMatrix:B,transform:S,params:A,queryPadding:this.queryPadding*D},e,r,s):{}},Fo.prototype.querySourceFeatures=function(e,r){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var p=s.loadVTLayers(),v=r?r.sourceLayer:"",_=p._geojsonTileLayer||p[v];if(_)for(var A=Al(r&&r.filter),S=this.tileID.canonical,D=S.z,B=S.x,N=S.y,V={z:D,x:B,y:N},Z=0;Z<_.length;Z++){var J=_.feature(Z);if(A.needGeometry){var ct=yr(J,!0);if(!A.filter(new Rn(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!A.filter(new Rn(this.tileID.overscaledZ),J))continue;var pt=s.getId(J,v),It=new Fd(J,D,B,N,pt);It.tile=V,e.push(It)}}},Fo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Fo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Fo.prototype.setExpiryData=function(e){var r=this.expirationTime;if(e.cacheControl){var s=He(e.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var p=Date.now(),v=!1;if(this.expirationTime>p)v=!1;else if(r)if(this.expirationTime<r)v=!0;else{var _=this.expirationTime-r;_?this.expirationTime=p+Math.max(_,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Fo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Fo.prototype.setFeatureState=function(e,r){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(e).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var p in this.buckets)if(r.style.hasLayer(p)){var v=this.buckets[p],_=v.layers[0].sourceLayer||"_geojsonTileLayer",A=s[_],S=e[_];if(A&&S&&Object.keys(S).length!==0){v.update(S,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});var D=r&&r.style&&r.style.getLayer(p);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(v)))}}}},Fo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Fo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ke.now()},Fo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Fo.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=Ke.now()+e},Fo.prototype.setDependencies=function(e,r){for(var s={},p=0,v=r;p<v.length;p+=1)s[v[p]]=!0;this.dependencies[e]=s},Fo.prototype.hasDependency=function(e,r){for(var s=0,p=e;s<p.length;s+=1){var v=this.dependencies[p[s]];if(v){for(var _=0,A=r;_<A.length;_+=1)if(v[A[_]])return!0}}return!1};var Xc=L.performance,Ay=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},Xc.mark(this._marks.start)};Ay.prototype.finish=function(){Xc.mark(this._marks.end);var e=Xc.getEntriesByName(this._marks.measure);return e.length===0&&(Xc.measure(this._marks.measure,this._marks.start,this._marks.end),e=Xc.getEntriesByName(this._marks.measure),Xc.clearMarks(this._marks.start),Xc.clearMarks(this._marks.end),Xc.clearMeasures(this._marks.measure)),e},o.Actor=Mf,o.AlphaImage=Wc,o.CanonicalTileID=Dh,o.CollisionBoxArray=c,o.Color=ai,o.DEMData=gc,o.DataConstantProperty=vn,o.DictionaryCoder=Tp,o.EXTENT=8192,o.ErrorEvent=St,o.EvaluationParameters=Rn,o.Event=dt,o.Evented=Dt,o.FeatureIndex=vc,o.FillBucket=iu,o.FillExtrusionBucket=Ll,o.ImageAtlas=wf,o.ImagePosition=Ed,o.LineBucket=Fa,o.LngLat=Dr,o.LngLatBounds=Ao,o.MercatorCoordinate=kh,o.ONE_EM=24,o.OverscaledTileID=wo,o.Point=T,o.Point$1=T,o.Properties=Xo,o.Protobuf=Zn,o.RGBAImage=Xa,o.RequestManager=$t,o.RequestPerformance=Ay,o.ResourceType=Hs,o.SegmentVector=it,o.SourceFeatureState=Sf,o.StructArrayLayout1ui2=vp,o.StructArrayLayout2f1f2i16=uc,o.StructArrayLayout2i4=ku,o.StructArrayLayout3ui6=Du,o.StructArrayLayout4i8=rt,o.SymbolBucket=lr,o.Texture=Lh,o.Tile=Fo,o.Transitionable=Yo,o.Uniform1f=Ce,o.Uniform1i=ve,o.Uniform2f=Le,o.Uniform3f=qe,o.Uniform4f=cn,o.UniformColor=Sn,o.UniformMatrix4f=Oi,o.UnwrappedTileID=_y,o.ValidationError=vt,o.WritingMode=ds,o.ZoomHistory=Ql,o.add=function(e,r,s){return e[0]=r[0]+s[0],e[1]=r[1]+s[1],e[2]=r[2]+s[2],e},o.addDynamicAttributes=ag,o.asyncAll=function(e,r,s){if(!e.length)return s(null,[]);var p=e.length,v=new Array(e.length),_=null;e.forEach(function(A,S){r(A,function(D,B){D&&(_=D),v[S]=B,--p==0&&s(_,v)})})},o.bezier=W,o.bindAll=Et,o.browser=Ke,o.cacheEntryPossiblyAdded=function(e){++Ar>qo&&(e.getActor().send("enforceCacheSizeLimit",Gr),Ar=0)},o.clamp=nt,o.clearTileCache=function(e){var r=L.caches.delete("mapbox-tiles");e&&r.catch(e).then(function(){return e()})},o.clipLine=ry,o.clone=function(e){var r=new Yi(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},o.clone$1=Ut,o.clone$2=function(e){var r=new Yi(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r},o.collisionCircleLayout=Km,o.config=me,o.create=function(){var e=new Yi(16);return Yi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},o.create$1=function(){var e=new Yi(9);return Yi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},o.create$2=function(){var e=new Yi(4);return Yi!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},o.createCommonjsModule=y,o.createExpression=Xl,o.createLayout=fo,o.createStyleLayer=function(e){return e.type==="custom"?new n1(e):new i1[e.type](e)},o.cross=function(e,r,s){var p=r[0],v=r[1],_=r[2],A=s[0],S=s[1],D=s[2];return e[0]=v*D-_*S,e[1]=_*A-p*D,e[2]=p*S-v*A,e},o.deepEqual=function e(r,s){if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(var p=0;p<r.length;p++)if(!e(r[p],s[p]))return!1;return!0}if(typeof r=="object"&&r!==null&&s!==null){if(typeof s!="object"||Object.keys(r).length!==Object.keys(s).length)return!1;for(var v in r)if(!e(r[v],s[v]))return!1;return!0}return r===s},o.dot=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]},o.dot$1=function(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]},o.ease=H,o.emitValidationErrors=Ln,o.endsWith=Gt,o.enforceCacheSizeLimit=function(e){pa(),wn&&wn.then(function(r){r.keys().then(function(s){for(var p=0;p<s.length-e;p++)r.delete(s[p])})})},o.evaluateSizeForFeature=ou,o.evaluateSizeForZoom=Zc,o.evaluateVariableOffset=ly,o.evented=pp,o.extend=K,o.featureFilter=Al,o.filterObject=Qt,o.fromRotation=function(e,r){var s=Math.sin(r),p=Math.cos(r);return e[0]=p,e[1]=s,e[2]=0,e[3]=-s,e[4]=p,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.getAnchorAlignment=Ip,o.getAnchorJustification=og,o.getArrayBuffer=vu,o.getImage=q,o.getJSON=function(e,r){return qs(K(e,{type:"json"}),r)},o.getRTLTextPluginStatus=pf,o.getReferrer=fl,o.getVideo=function(e,r){var s,p,v=L.document.createElement("video");v.muted=!0,v.onloadstart=function(){r(null,v)};for(var _=0;_<e.length;_++){var A=L.document.createElement("source");s=e[_],p=void 0,(p=L.document.createElement("a")).href=s,(p.protocol!==L.document.location.protocol||p.host!==L.document.location.host)&&(v.crossOrigin="Anonymous"),A.src=e[_],v.appendChild(A)}return{cancel:function(){}}},o.identity=fs,o.invert=function(e,r){var s=r[0],p=r[1],v=r[2],_=r[3],A=r[4],S=r[5],D=r[6],B=r[7],N=r[8],V=r[9],Z=r[10],J=r[11],ct=r[12],pt=r[13],It=r[14],_t=r[15],Vt=s*S-p*A,Yt=s*D-v*A,Jt=s*B-_*A,ee=p*D-v*S,fe=p*B-_*S,Me=v*B-_*D,Be=N*pt-V*ct,yn=N*It-Z*ct,We=N*_t-J*ct,In=V*It-Z*pt,Qe=V*_t-J*pt,ni=Z*_t-J*It,zn=Vt*ni-Yt*Qe+Jt*In+ee*We-fe*yn+Me*Be;return zn?(e[0]=(S*ni-D*Qe+B*In)*(zn=1/zn),e[1]=(v*Qe-p*ni-_*In)*zn,e[2]=(pt*Me-It*fe+_t*ee)*zn,e[3]=(Z*fe-V*Me-J*ee)*zn,e[4]=(D*We-A*ni-B*yn)*zn,e[5]=(s*ni-v*We+_*yn)*zn,e[6]=(It*Jt-ct*Me-_t*Yt)*zn,e[7]=(N*Me-Z*Jt+J*Yt)*zn,e[8]=(A*Qe-S*We+B*Be)*zn,e[9]=(p*We-s*Qe-_*Be)*zn,e[10]=(ct*fe-pt*Jt+_t*Vt)*zn,e[11]=(V*Jt-N*fe-J*Vt)*zn,e[12]=(S*yn-A*In-D*Be)*zn,e[13]=(s*In-p*yn+v*Be)*zn,e[14]=(pt*Yt-ct*ee-It*Vt)*zn,e[15]=(N*ee-V*Yt+Z*Vt)*zn,e):null},o.isChar=Re,o.isMapboxURL=ae,o.keysDifference=function(e,r){var s=[];for(var p in e)p in r||s.push(p);return s},o.makeRequest=qs,o.mapObject=kt,o.mercatorXfromLng=Bd,o.mercatorYfromLat=ug,o.mercatorZfromAltitude=yy,o.mul=Nm,o.multiply=xa,o.mvt=ru,o.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},o.normalize=function(e,r){var s=r[0],p=r[1],v=r[2],_=s*s+p*p+v*v;return _>0&&(_=1/Math.sqrt(_)),e[0]=r[0]*_,e[1]=r[1]*_,e[2]=r[2]*_,e},o.number=Zr,o.offscreenCanvasSupported=Mo,o.ortho=function(e,r,s,p,v,_,A){var S=1/(r-s),D=1/(p-v),B=1/(_-A);return e[0]=-2*S,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*D,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*B,e[11]=0,e[12]=(r+s)*S,e[13]=(v+p)*D,e[14]=(A+_)*B,e[15]=1,e},o.parseGlyphPBF=function(e){return new Zn(e).readFields($m,[])},o.pbf=Zn,o.performSymbolLayout=function(e,r,s,p,v,_,A){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var S=e.layers[0].layout,D=e.layers[0]._unevaluatedLayout._values,B={};if(e.textSizeData.kind==="composite"){var N=e.textSizeData,V=N.maxZoom;B.compositeTextSizes=[D["text-size"].possiblyEvaluate(new Rn(N.minZoom),A),D["text-size"].possiblyEvaluate(new Rn(V),A)]}if(e.iconSizeData.kind==="composite"){var Z=e.iconSizeData,J=Z.maxZoom;B.compositeIconSizes=[D["icon-size"].possiblyEvaluate(new Rn(Z.minZoom),A),D["icon-size"].possiblyEvaluate(new Rn(J),A)]}B.layoutTextSize=D["text-size"].possiblyEvaluate(new Rn(e.zoom+1),A),B.layoutIconSize=D["icon-size"].possiblyEvaluate(new Rn(e.zoom+1),A),B.textMaxSize=D["text-size"].possiblyEvaluate(new Rn(18));for(var ct=24*S.get("text-line-height"),pt=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",It=S.get("text-keep-upright"),_t=S.get("text-size"),Vt=function(){var ee=Jt[Yt],fe=S.get("text-font").evaluate(ee,{},A).join(","),Me=_t.evaluate(ee,{},A),Be=B.layoutTextSize.evaluate(ee,{},A),yn=B.layoutIconSize.evaluate(ee,{},A),We={horizontal:{},vertical:void 0},In=ee.text,Qe=[0,0];if(In){var ni=In.toString(),zn=24*S.get("text-letter-spacing").evaluate(ee,{},A),hn=function(xi){for(var fr=0,nr=xi;fr<nr.length;fr+=1)if(Fi=nr[fr].charCodeAt(0),Re.Arabic(Fi)||Re["Arabic Supplement"](Fi)||Re["Arabic Extended-A"](Fi)||Re["Arabic Presentation Forms-A"](Fi)||Re["Arabic Presentation Forms-B"](Fi))return!1;var Fi;return!0}(ni)?zn:0,hi=S.get("text-anchor").evaluate(ee,{},A),Yn=S.get("text-variable-anchor");if(!Yn){var Ei=S.get("text-radial-offset").evaluate(ee,{},A);Qe=Ei?ly(hi,[24*Ei,Rd]):S.get("text-offset").evaluate(ee,{},A).map(function(xi){return 24*xi})}var En=pt?"center":S.get("text-justify").evaluate(ee,{},A),Gi=S.get("symbol-placement"),Rr=Gi==="point"?24*S.get("text-max-width").evaluate(ee,{},A):0,zr=function(){e.allowVerticalPlacement&&Js(ni)&&(We.vertical=Sd(In,r,s,v,fe,Rr,ct,hi,"left",hn,Qe,ds.vertical,!0,Gi,Be,Me))};if(!pt&&Yn){for(var Ir=En==="auto"?Yn.map(function(xi){return og(xi)}):[En],Or=!1,Jr=0;Jr<Ir.length;Jr++){var go=Ir[Jr];if(!We.horizontal[go])if(Or)We.horizontal[go]=We.horizontal[0];else{var Co=Sd(In,r,s,v,fe,Rr,ct,"center",go,hn,Qe,ds.horizontal,!1,Gi,Be,Me);Co&&(We.horizontal[go]=Co,Or=Co.positionedLines.length===1)}}zr()}else{En==="auto"&&(En=og(hi));var Aa=Sd(In,r,s,v,fe,Rr,ct,hi,En,hn,Qe,ds.horizontal,!1,Gi,Be,Me);Aa&&(We.horizontal[En]=Aa),zr(),Js(ni)&&pt&&It&&(We.vertical=Sd(In,r,s,v,fe,Rr,ct,hi,En,hn,Qe,ds.vertical,!1,Gi,Be,Me))}}var No=void 0,wa=!1;if(ee.icon&&ee.icon.name){var oo=p[ee.icon.name];oo&&(No=function(xi,fr,nr){var Fi=Ip(nr),Na=fr[0]-xi.displaySize[0]*Fi.horizontalAlign,ia=fr[1]-xi.displaySize[1]*Fi.verticalAlign;return{image:xi,top:ia,bottom:ia+xi.displaySize[1],left:Na,right:Na+xi.displaySize[0]}}(v[ee.icon.name],S.get("icon-offset").evaluate(ee,{},A),S.get("icon-anchor").evaluate(ee,{},A)),wa=oo.sdf,e.sdfIcons===void 0?e.sdfIcons=oo.sdf:e.sdfIcons!==oo.sdf&&Bt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(oo.pixelRatio!==e.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(e.iconsNeedLinear=!0))}var Vo=cy(We.horizontal)||We.vertical;e.iconsInText=!!Vo&&Vo.iconsInText,(Vo||No)&&function(xi,fr,nr,Fi,Na,ia,Mr,ur,ra,qi,Ja){var Gn=ia.textMaxSize.evaluate(fr,{});Gn===void 0&&(Gn=Mr);var Vu,Xi=xi.layers[0].layout,Er=Xi.get("icon-offset").evaluate(fr,{},Ja),Dl=cy(nr.horizontal),ol=Mr/24,Rh=xi.tilePixelRatio*ol,Tf=xi.tilePixelRatio*Gn/24,yc=xi.tilePixelRatio*ur,Pf=xi.tilePixelRatio*Xi.get("symbol-spacing"),Nd=Xi.get("text-padding")*xi.tilePixelRatio,Kc=Xi.get("icon-padding")*xi.tilePixelRatio,Pp=Xi.get("text-max-angle")/180*Math.PI,Rl=Xi.get("text-rotation-alignment")==="map"&&Xi.get("symbol-placement")!=="point",Lp=Xi.get("icon-rotation-alignment")==="map"&&Xi.get("symbol-placement")!=="point",zl=Xi.get("symbol-placement"),Kr=Pf/2,Qr=Xi.get("icon-text-fit");Fi&&Qr!=="none"&&(xi.allowVerticalPlacement&&nr.vertical&&(Vu=ig(Fi,nr.vertical,Qr,Xi.get("icon-text-fit-padding"),Er,ol)),Dl&&(Fi=ig(Fi,Dl,Qr,Xi.get("icon-text-fit-padding"),Er,ol)));var _c=function(Cy,ts){ts.x<0||ts.x>=8192||ts.y<0||ts.y>=8192||function(to,au,Sr,Qc,qd,zp,Wd,Hu,Zd,Op,Yd,Xd,fg,Iy,Bp,My,Ey,Sy,Ty,Kd,Bs,Rf,Py,Gu,o1){var oa,Ko,zf,Of,Bf,Nh=to.addToLineVertexArray(au,Sr),Ly=0,ky=0,Dy=0,pg=0,dg=-1,mg=-1,bc={},gg=ht(""),Qd=0,vg=0;if(Hu._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Qd=(oa=Hu.layout.get("text-offset").evaluate(Bs,{},Gu).map(function(Np){return 24*Np}))[0],vg=oa[1]):(Qd=24*Hu.layout.get("text-radial-offset").evaluate(Bs,{},Gu),vg=Rd),to.allowVerticalPlacement&&Qc.vertical){var Ry=Hu.layout.get("text-rotate").evaluate(Bs,{},Gu)+90;Of=new Mp(Zd,au,Op,Yd,Xd,Qc.vertical,fg,Iy,Bp,Ry),Wd&&(Bf=new Mp(Zd,au,Op,Yd,Xd,Wd,Ey,Sy,Bp,Ry))}if(qd){var yg=Hu.layout.get("icon-rotate").evaluate(Bs,{}),zy=Hu.layout.get("icon-text-fit")!=="none",Vh=oy(qd,yg,Py,zy),_g=Wd?oy(Wd,yg,Py,zy):void 0;zf=new Mp(Zd,au,Op,Yd,Xd,qd,Ey,Sy,!1,yg),Ly=4*Vh.length;var Oy=to.iconSizeData,Fp=null;Oy.kind==="source"?(Fp=[128*Hu.layout.get("icon-size").evaluate(Bs,{})])[0]>32640&&Bt(to.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Oy.kind==="composite"&&((Fp=[128*Rf.compositeIconSizes[0].evaluate(Bs,{},Gu),128*Rf.compositeIconSizes[1].evaluate(Bs,{},Gu)])[0]>32640||Fp[1]>32640)&&Bt(to.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),to.addSymbols(to.icon,Vh,Fp,Kd,Ty,Bs,!1,au,Nh.lineStartIndex,Nh.lineLength,-1,Gu),dg=to.icon.placedSymbolArray.length-1,_g&&(ky=4*_g.length,to.addSymbols(to.icon,_g,Fp,Kd,Ty,Bs,ds.vertical,au,Nh.lineStartIndex,Nh.lineLength,-1,Gu),mg=to.icon.placedSymbolArray.length-1)}for(var By in Qc.horizontal){var $d=Qc.horizontal[By];if(!Ko){gg=ht($d.text);var Fy=Hu.layout.get("text-rotate").evaluate(Bs,{},Gu);Ko=new Mp(Zd,au,Op,Yd,Xd,$d,fg,Iy,Bp,Fy)}var xg=$d.positionedLines.length===1;if(Dy+=uy(to,au,$d,zp,Hu,Bp,Bs,My,Nh,Qc.vertical?ds.horizontal:ds.horizontalOnly,xg?Object.keys(Qc.horizontal):[By],bc,dg,Rf,Gu),xg)break}Qc.vertical&&(pg+=uy(to,au,Qc.vertical,zp,Hu,Bp,Bs,My,Nh,ds.vertical,["vertical"],bc,mg,Rf,Gu));var a1=Ko?Ko.boxStartIndex:to.collisionBoxArray.length,s1=Ko?Ko.boxEndIndex:to.collisionBoxArray.length,l1=Of?Of.boxStartIndex:to.collisionBoxArray.length,u1=Of?Of.boxEndIndex:to.collisionBoxArray.length,c1=zf?zf.boxStartIndex:to.collisionBoxArray.length,h1=zf?zf.boxEndIndex:to.collisionBoxArray.length,f1=Bf?Bf.boxStartIndex:to.collisionBoxArray.length,p1=Bf?Bf.boxEndIndex:to.collisionBoxArray.length,qu=-1,Jd=function(Np,Vy){return Np&&Np.circleDiameter?Math.max(Np.circleDiameter,Vy):Vy};qu=Jd(Ko,qu),qu=Jd(Of,qu),qu=Jd(zf,qu);var Ny=(qu=Jd(Bf,qu))>-1?1:0;Ny&&(qu*=o1/24),to.glyphOffsetArray.length>=lr.MAX_GLYPHS&&Bt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Bs.sortKey!==void 0&&to.addToSortKeyRanges(to.symbolInstances.length,Bs.sortKey),to.symbolInstances.emplaceBack(au.x,au.y,bc.right>=0?bc.right:-1,bc.center>=0?bc.center:-1,bc.left>=0?bc.left:-1,bc.vertical||-1,dg,mg,gg,a1,s1,l1,u1,c1,h1,f1,p1,Op,Dy,pg,Ly,ky,Ny,0,fg,Qd,vg,qu)}(xi,ts,Cy,nr,Fi,Na,Vu,xi.layers[0],xi.collisionBoxArray,fr.index,fr.sourceLayerIndex,xi.index,Rh,Nd,Rl,ra,yc,Kc,Lp,Er,fr,ia,qi,Ja,Mr)};if(zl==="line")for(var Lf=0,Vd=ry(fr.geometry,0,0,8192,8192);Lf<Vd.length;Lf+=1)for(var Ud=Vd[Lf],kp=0,Dp=G_(Ud,Pf,Pp,nr.vertical||Dl,Fi,24,Tf,xi.overscaling,8192);kp<Dp.length;kp+=1){var jd=Dp[kp];Dl&&Z_(xi,Dl.text,Kr,jd)||_c(Ud,jd)}else if(zl==="line-center")for(var kf=0,xc=fr.geometry;kf<xc.length;kf+=1){var zh=xc[kf];if(zh.length>1){var Hd=H_(zh,Pp,nr.vertical||Dl,Fi,24,Tf);Hd&&_c(zh,Hd)}}else if(fr.type==="Polygon")for(var Oh=0,Bh=qm(fr.geometry,0);Oh<Bh.length;Oh+=1){var Ca=Bh[Oh],Uu=q_(Ca,16);_c(Ca[0],new mc(Uu.x,Uu.y,0))}else if(fr.type==="LineString")for(var Fh=0,Rp=fr.geometry;Fh<Rp.length;Fh+=1){var Df=Rp[Fh];_c(Df,new mc(Df[0].x,Df[0].y,0))}else if(fr.type==="Point")for(var hg=0,wy=fr.geometry;hg<wy.length;hg+=1)for(var Gd=0,ju=wy[hg];Gd<ju.length;Gd+=1){var Si=ju[Gd];_c([Si],new mc(Si.x,Si.y,0))}}(e,ee,We,No,p,B,Be,yn,Qe,wa,A)},Yt=0,Jt=e.features;Yt<Jt.length;Yt+=1)Vt();_&&e.generateCollisionDebugBuffers()},o.perspective=function(e,r,s,p,v){var _,A=1/Math.tan(r/2);return e[0]=A/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=A,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,v!=null&&v!==1/0?(e[10]=(v+p)*(_=1/(p-v)),e[14]=2*v*p*_):(e[10]=-1,e[14]=-2*p),e},o.pick=function(e,r){for(var s={},p=0;p<r.length;p++){var v=r[p];v in e&&(s[v]=e[v])}return s},o.plugin=cs,o.polygonIntersectsPolygon=Ml,o.postMapLoadEvent=rr,o.postTurnstileEvent=Di,o.potpack=$v,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Ye,o.registerForPluginStateChange=function(e){return e({pluginStatus:Za,pluginURL:Ss}),pp.on("pluginStateChange",e),e},o.renderColorRamp=Dv,o.rotate=function(e,r,s){var p=r[0],v=r[1],_=r[2],A=r[3],S=Math.sin(s),D=Math.cos(s);return e[0]=p*D+_*S,e[1]=v*D+A*S,e[2]=p*-S+_*D,e[3]=v*-S+A*D,e},o.rotateX=function(e,r,s){var p=Math.sin(s),v=Math.cos(s),_=r[4],A=r[5],S=r[6],D=r[7],B=r[8],N=r[9],V=r[10],Z=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=_*v+B*p,e[5]=A*v+N*p,e[6]=S*v+V*p,e[7]=D*v+Z*p,e[8]=B*v-_*p,e[9]=N*v-A*p,e[10]=V*v-S*p,e[11]=Z*v-D*p,e},o.rotateZ=function(e,r,s){var p=Math.sin(s),v=Math.cos(s),_=r[0],A=r[1],S=r[2],D=r[3],B=r[4],N=r[5],V=r[6],Z=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=_*v+B*p,e[1]=A*v+N*p,e[2]=S*v+V*p,e[3]=D*v+Z*p,e[4]=B*v-_*p,e[5]=N*v-A*p,e[6]=V*v-S*p,e[7]=Z*v-D*p,e},o.scale=function(e,r,s){var p=s[0],v=s[1],_=s[2];return e[0]=r[0]*p,e[1]=r[1]*p,e[2]=r[2]*p,e[3]=r[3]*p,e[4]=r[4]*v,e[5]=r[5]*v,e[6]=r[6]*v,e[7]=r[7]*v,e[8]=r[8]*_,e[9]=r[9]*_,e[10]=r[10]*_,e[11]=r[11]*_,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},o.scale$1=function(e,r,s){return e[0]=r[0]*s,e[1]=r[1]*s,e[2]=r[2]*s,e[3]=r[3]*s,e},o.scale$2=function(e,r,s){return e[0]=r[0]*s,e[1]=r[1]*s,e[2]=r[2]*s,e},o.setCacheLimits=function(e,r){Gr=e,qo=r},o.setRTLTextPlugin=function(e,r,s){if(s===void 0&&(s=!1),Za==="deferred"||Za==="loading"||Za==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Ss=Ke.resolveURL(e),Za="deferred",ff=r,sc(),s||tl()},o.sphericalToCartesian=function(e){var r=e[0],s=e[1],p=e[2];return s+=90,s*=Math.PI/180,p*=Math.PI/180,{x:r*Math.cos(s)*Math.sin(p),y:r*Math.sin(s)*Math.sin(p),z:r*Math.cos(p)}},o.sqrLen=function(e){var r=e[0],s=e[1];return r*r+s*s},o.styleSpec=tt,o.sub=function(e,r,s){return e[0]=r[0]-s[0],e[1]=r[1]-s[1],e[2]=r[2]-s[2],e},o.symbolSize=j_,o.transformMat3=function(e,r,s){var p=r[0],v=r[1],_=r[2];return e[0]=p*s[0]+v*s[3]+_*s[6],e[1]=p*s[1]+v*s[4]+_*s[7],e[2]=p*s[2]+v*s[5]+_*s[8],e},o.transformMat4=Gc,o.translate=function(e,r,s){var p,v,_,A,S,D,B,N,V,Z,J,ct,pt=s[0],It=s[1],_t=s[2];return r===e?(e[12]=r[0]*pt+r[4]*It+r[8]*_t+r[12],e[13]=r[1]*pt+r[5]*It+r[9]*_t+r[13],e[14]=r[2]*pt+r[6]*It+r[10]*_t+r[14],e[15]=r[3]*pt+r[7]*It+r[11]*_t+r[15]):(v=r[1],_=r[2],A=r[3],S=r[4],D=r[5],B=r[6],N=r[7],V=r[8],Z=r[9],J=r[10],ct=r[11],e[0]=p=r[0],e[1]=v,e[2]=_,e[3]=A,e[4]=S,e[5]=D,e[6]=B,e[7]=N,e[8]=V,e[9]=Z,e[10]=J,e[11]=ct,e[12]=p*pt+S*It+V*_t+r[12],e[13]=v*pt+D*It+Z*_t+r[13],e[14]=_*pt+B*It+J*_t+r[14],e[15]=A*pt+N*It+ct*_t+r[15]),e},o.triggerPluginCompletionEvent=yh,o.uniqueId=yt,o.validateCustomStyleLayer=function(e){var r=[],s=e.id;return s===void 0&&r.push({message:"layers."+s+': missing required property "id"'}),e.render===void 0&&r.push({message:"layers."+s+': missing required method "render"'}),e.renderingMode&&e.renderingMode!=="2d"&&e.renderingMode!=="3d"&&r.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),r},o.validateLight=Su,o.validateStyle=Eu,o.values=function(e){var r=[];for(var s in e)r.push(e[s]);return r},o.vectorTile=ru,o.version="1.13.3",o.warnOnce=Bt,o.webpSupported=Te,o.window=L,o.wrap=lt}),m(["./shared"],function(o){function y(U){var q=typeof U;if(q==="number"||q==="boolean"||q==="string"||U==null)return JSON.stringify(U);if(Array.isArray(U)){for(var Q="[",at=0,dt=U;at<dt.length;at+=1)Q+=y(dt[at])+",";return Q+"]"}for(var St=Object.keys(U).sort(),Dt="{",tt=0;tt<St.length;tt++)Dt+=JSON.stringify(St[tt])+":"+y(U[St[tt]])+",";return Dt+"}"}function x(U){for(var q="",Q=0,at=o.refProperties;Q<at.length;Q+=1)q+="/"+y(U[at[Q]]);return q}var M=function(U){this.keyCache={},U&&this.replace(U)};M.prototype.replace=function(U){this._layerConfigs={},this._layers={},this.update(U,[])},M.prototype.update=function(U,q){for(var Q=this,at=0,dt=U;at<dt.length;at+=1){var St=dt[at];this._layerConfigs[St.id]=St;var Dt=this._layers[St.id]=o.createStyleLayer(St);Dt._featureFilter=o.featureFilter(Dt.filter),this.keyCache[St.id]&&delete this.keyCache[St.id]}for(var tt=0,vt=q;tt<vt.length;tt+=1){var Zt=vt[tt];delete this.keyCache[Zt],delete this._layerConfigs[Zt],delete this._layers[Zt]}this.familiesBySource={};for(var ge=0,be=function(Ne,je){for(var ei={},Ze=0;Ze<Ne.length;Ze++){var _i=je&&je[Ne[Ze].id]||x(Ne[Ze]);je&&(je[Ne[Ze].id]=_i);var Vi=ei[_i];Vi||(Vi=ei[_i]=[]),Vi.push(Ne[Ze])}var ci=[];for(var mi in ei)ci.push(ei[mi]);return ci}(o.values(this._layerConfigs),this.keyCache);ge<be.length;ge+=1){var ie=be[ge].map(function(Ne){return Q._layers[Ne.id]}),ye=ie[0];if(ye.visibility!=="none"){var sn=ye.source||"",on=this.familiesBySource[sn];on||(on=this.familiesBySource[sn]={});var oe=ye.sourceLayer||"_geojsonTileLayer",ke=on[oe];ke||(ke=on[oe]=[]),ke.push(ie)}}};var T=function(U){var q={},Q=[];for(var at in U){var dt=U[at],St=q[at]={};for(var Dt in dt){var tt=dt[+Dt];if(tt&&tt.bitmap.width!==0&&tt.bitmap.height!==0){var vt={x:0,y:0,w:tt.bitmap.width+2,h:tt.bitmap.height+2};Q.push(vt),St[Dt]={rect:vt,metrics:tt.metrics}}}}var Zt=o.potpack(Q),ge=new o.AlphaImage({width:Zt.w||1,height:Zt.h||1});for(var be in U){var ie=U[be];for(var ye in ie){var sn=ie[+ye];if(sn&&sn.bitmap.width!==0&&sn.bitmap.height!==0){var on=q[be][ye].rect;o.AlphaImage.copy(sn.bitmap,ge,{x:0,y:0},{x:on.x+1,y:on.y+1},sn.bitmap)}}}this.image=ge,this.positions=q};o.register("GlyphAtlas",T);var P=function(U){this.tileID=new o.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId};function L(U,q,Q){for(var at=new o.EvaluationParameters(q),dt=0,St=U;dt<St.length;dt+=1)St[dt].recalculate(at,Q)}function O(U,q){var Q=o.getArrayBuffer(U.request,function(at,dt,St,Dt){at?q(at):dt&&q(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(dt)),rawData:dt,cacheControl:St,expires:Dt})});return function(){Q.cancel(),q()}}P.prototype.parse=function(U,q,Q,at,dt){var St=this;this.status="parsing",this.data=U,this.collisionBoxArray=new o.CollisionBoxArray;var Dt=new o.DictionaryCoder(Object.keys(U.layers).sort()),tt=new o.FeatureIndex(this.tileID,this.promoteId);tt.bucketLayerIDs=[];var vt,Zt,ge,be,ie={},ye={featureIndex:tt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},sn=q.familiesBySource[this.source];for(var on in sn){var oe=U.layers[on];if(oe){oe.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+on+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ke=Dt.encode(on),Ne=[],je=0;je<oe.length;je++){var ei=oe.feature(je),Ze=tt.getId(ei,on);Ne.push({feature:ei,id:Ze,index:je,sourceLayerIndex:ke})}for(var _i=0,Vi=sn[on];_i<Vi.length;_i+=1){var ci=Vi[_i],mi=ci[0];mi.minzoom&&this.zoom<Math.floor(mi.minzoom)||mi.maxzoom&&this.zoom>=mi.maxzoom||mi.visibility!=="none"&&(L(ci,this.zoom,Q),(ie[mi.id]=mi.createBucket({index:tt.bucketLayerIDs.length,layers:ci,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ke,sourceID:this.source})).populate(Ne,ye,this.tileID.canonical),tt.bucketLayerIDs.push(ci.map(function(Wi){return Wi.id})))}}}var gi=o.mapObject(ye.glyphDependencies,function(Wi){return Object.keys(Wi).map(Number)});Object.keys(gi).length?at.send("getGlyphs",{uid:this.uid,stacks:gi},function(Wi,Wn){vt||(vt=Wi,Zt=Wn,Pr.call(St))}):Zt={};var Eo=Object.keys(ye.iconDependencies);Eo.length?at.send("getImages",{icons:Eo,source:this.source,tileID:this.tileID,type:"icons"},function(Wi,Wn){vt||(vt=Wi,ge=Wn,Pr.call(St))}):ge={};var Hn=Object.keys(ye.patternDependencies);function Pr(){if(vt)return dt(vt);if(Zt&&ge&&be){var Wi=new T(Zt),Wn=new o.ImageAtlas(ge,be);for(var ai in ie){var So=ie[ai];So instanceof o.SymbolBucket?(L(So.layers,this.zoom,Q),o.performSymbolLayout(So,Zt,Wi.positions,ge,Wn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):So.hasPattern&&(So instanceof o.LineBucket||So instanceof o.FillBucket||So instanceof o.FillExtrusionBucket)&&(L(So.layers,this.zoom,Q),So.addFeatures(ye,this.tileID.canonical,Wn.patternPositions))}this.status="done",dt(null,{buckets:o.values(ie).filter(function(os){return!os.isEmpty()}),featureIndex:tt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wi.image,imageAtlas:Wn,glyphMap:this.returnDependencies?Zt:null,iconMap:this.returnDependencies?ge:null,glyphPositions:this.returnDependencies?Wi.positions:null})}}Hn.length?at.send("getImages",{icons:Hn,source:this.source,tileID:this.tileID,type:"patterns"},function(Wi,Wn){vt||(vt=Wi,be=Wn,Pr.call(St))}):be={},Pr.call(this)};var W=function(U,q,Q,at){this.actor=U,this.layerIndex=q,this.availableImages=Q,this.loadVectorData=at||O,this.loading={},this.loaded={}};W.prototype.loadTile=function(U,q){var Q=this,at=U.uid;this.loading||(this.loading={});var dt=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request),St=this.loading[at]=new P(U);St.abort=this.loadVectorData(U,function(Dt,tt){if(delete Q.loading[at],Dt||!tt)return St.status="done",Q.loaded[at]=St,q(Dt);var vt=tt.rawData,Zt={};tt.expires&&(Zt.expires=tt.expires),tt.cacheControl&&(Zt.cacheControl=tt.cacheControl);var ge={};if(dt){var be=dt.finish();be&&(ge.resourceTiming=JSON.parse(JSON.stringify(be)))}St.vectorTile=tt.vectorTile,St.parse(tt.vectorTile,Q.layerIndex,Q.availableImages,Q.actor,function(ie,ye){if(ie||!ye)return q(ie);q(null,o.extend({rawTileData:vt.slice(0)},ye,Zt,ge))}),Q.loaded=Q.loaded||{},Q.loaded[at]=St})},W.prototype.reloadTile=function(U,q){var Q=this,at=this.loaded,dt=U.uid,St=this;if(at&&at[dt]){var Dt=at[dt];Dt.showCollisionBoxes=U.showCollisionBoxes;var tt=function(vt,Zt){var ge=Dt.reloadCallback;ge&&(delete Dt.reloadCallback,Dt.parse(Dt.vectorTile,St.layerIndex,Q.availableImages,St.actor,ge)),q(vt,Zt)};Dt.status==="parsing"?Dt.reloadCallback=tt:Dt.status==="done"&&(Dt.vectorTile?Dt.parse(Dt.vectorTile,this.layerIndex,this.availableImages,this.actor,tt):tt())}},W.prototype.abortTile=function(U,q){var Q=this.loading,at=U.uid;Q&&Q[at]&&Q[at].abort&&(Q[at].abort(),delete Q[at]),q()},W.prototype.removeTile=function(U,q){var Q=this.loaded,at=U.uid;Q&&Q[at]&&delete Q[at],q()};var H=o.window.ImageBitmap,nt=function(){this.loaded={}};function lt(U,q){if(U.length!==0){K(U[0],q);for(var Q=1;Q<U.length;Q++)K(U[Q],!q)}}function K(U,q){for(var Q=0,at=0,dt=0,St=U.length,Dt=St-1;dt<St;Dt=dt++){var tt=(U[dt][0]-U[Dt][0])*(U[Dt][1]+U[dt][1]),vt=Q+tt;at+=Math.abs(Q)>=Math.abs(tt)?Q-vt+tt:tt-vt+Q,Q=vt}Q+at>=0!=!!q&&U.reverse()}nt.prototype.loadTile=function(U,q){var Q=U.uid,at=U.encoding,dt=U.rawImageData,St=H&&dt instanceof H?this.getImageData(dt):dt,Dt=new o.DEMData(Q,St,at);this.loaded=this.loaded||{},this.loaded[Q]=Dt,q(null,Dt)},nt.prototype.getImageData=function(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);var q=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:q.width,height:q.height},q.data)},nt.prototype.removeTile=function(U){var q=this.loaded,Q=U.uid;q&&q[Q]&&delete q[Q]};var $=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,yt=function(U){this._feature=U,this.extent=o.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))};yt.prototype.loadGeometry=function(){if(this._feature.type===1){for(var U=[],q=0,Q=this._feature.geometry;q<Q.length;q+=1){var at=Q[q];U.push([new o.Point$1(at[0],at[1])])}return U}for(var dt=[],St=0,Dt=this._feature.geometry;St<Dt.length;St+=1){for(var tt=[],vt=0,Zt=Dt[St];vt<Zt.length;vt+=1){var ge=Zt[vt];tt.push(new o.Point$1(ge[0],ge[1]))}dt.push(tt)}return dt},yt.prototype.toGeoJSON=function(U,q,Q){return $.call(this,U,q,Q)};var Rt=function(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=U.length,this._features=U};Rt.prototype.feature=function(U){return new yt(this._features[U])};var Ct=o.vectorTile.VectorTileFeature,Et=Gt;function Gt(U,q){this.options=q||{},this.features=U,this.length=U.length}function kt(U,q){this.id=typeof U.id=="number"?U.id:void 0,this.type=U.type,this.rawGeometry=U.type===1?[U.geometry]:U.geometry,this.properties=U.tags,this.extent=q||4096}Gt.prototype.feature=function(U){return new kt(this.features[U],this.options.extent)},kt.prototype.loadGeometry=function(){var U=this.rawGeometry;this.geometry=[];for(var q=0;q<U.length;q++){for(var Q=U[q],at=[],dt=0;dt<Q.length;dt++)at.push(new o.Point$1(Q[dt][0],Q[dt][1]));this.geometry.push(at)}return this.geometry},kt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var U=this.geometry,q=1/0,Q=-1/0,at=1/0,dt=-1/0,St=0;St<U.length;St++)for(var Dt=U[St],tt=0;tt<Dt.length;tt++){var vt=Dt[tt];q=Math.min(q,vt.x),Q=Math.max(Q,vt.x),at=Math.min(at,vt.y),dt=Math.max(dt,vt.y)}return[q,at,Q,dt]},kt.prototype.toGeoJSON=Ct.prototype.toGeoJSON;var Qt=Nt,Ut=Et;function Nt(U){var q=new o.pbf;return function(Q,at){for(var dt in Q.layers)at.writeMessage(3,Bt,Q.layers[dt])}(U,q),q.finish()}function Bt(U,q){var Q;q.writeVarintField(15,U.version||1),q.writeStringField(1,U.name||""),q.writeVarintField(5,U.extent||4096);var at={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<U.length;Q++)at.feature=U.feature(Q),q.writeMessage(2,de,at);var dt=at.keys;for(Q=0;Q<dt.length;Q++)q.writeStringField(3,dt[Q]);var St=at.values;for(Q=0;Q<St.length;Q++)q.writeMessage(4,Pi,St[Q])}function de(U,q){var Q=U.feature;Q.id!==void 0&&q.writeVarintField(1,Q.id),q.writeMessage(2,bn,U),q.writeVarintField(3,Q.type),q.writeMessage(4,Ue,Q)}function bn(U,q){var Q=U.feature,at=U.keys,dt=U.values,St=U.keycache,Dt=U.valuecache;for(var tt in Q.properties){var vt=St[tt];vt===void 0&&(at.push(tt),St[tt]=vt=at.length-1),q.writeVarint(vt);var Zt=Q.properties[tt],ge=typeof Zt;ge!=="string"&&ge!=="boolean"&&ge!=="number"&&(Zt=JSON.stringify(Zt));var be=ge+":"+Zt,ie=Dt[be];ie===void 0&&(dt.push(Zt),Dt[be]=ie=dt.length-1),q.writeVarint(ie)}}function _e(U,q){return(q<<3)+(7&U)}function He(U){return U<<1^U>>31}function Ue(U,q){for(var Q=U.loadGeometry(),at=U.type,dt=0,St=0,Dt=Q.length,tt=0;tt<Dt;tt++){var vt=Q[tt],Zt=1;at===1&&(Zt=vt.length),q.writeVarint(_e(1,Zt));for(var ge=at===3?vt.length-1:vt.length,be=0;be<ge;be++){be===1&&at!==1&&q.writeVarint(_e(2,ge-1));var ie=vt[be].x-dt,ye=vt[be].y-St;q.writeVarint(He(ie)),q.writeVarint(He(ye)),dt+=ie,St+=ye}at===3&&q.writeVarint(_e(7,1))}}function Pi(U,q){var Q=typeof U;Q==="string"?q.writeStringField(1,U):Q==="boolean"?q.writeBooleanField(7,U):Q==="number"&&(U%1!=0?q.writeDoubleField(3,U):U<0?q.writeSVarintField(6,U):q.writeVarintField(5,U))}function ri(U,q,Q,at){Fn(U,Q,at),Fn(q,2*Q,2*at),Fn(q,2*Q+1,2*at+1)}function Fn(U,q,Q){var at=U[q];U[q]=U[Q],U[Q]=at}function mn(U,q,Q,at){var dt=U-Q,St=q-at;return dt*dt+St*St}Qt.fromVectorTileJs=Nt,Qt.fromGeojsonVt=function(U,q){q=q||{};var Q={};for(var at in U)Q[at]=new Et(U[at].features,q),Q[at].name=at,Q[at].version=q.version,Q[at].extent=q.extent;return Nt({layers:Q})},Qt.GeoJSONWrapper=Ut;var Kn=function(U){return U[0]},Li=function(U){return U[1]},ui=function(U,q,Q,at,dt){q===void 0&&(q=Kn),Q===void 0&&(Q=Li),at===void 0&&(at=64),dt===void 0&&(dt=Float64Array),this.nodeSize=at,this.points=U;for(var St=U.length<65536?Uint16Array:Uint32Array,Dt=this.ids=new St(U.length),tt=this.coords=new dt(2*U.length),vt=0;vt<U.length;vt++)Dt[vt]=vt,tt[2*vt]=q(U[vt]),tt[2*vt+1]=Q(U[vt]);(function Zt(ge,be,ie,ye,sn,on){if(!(sn-ye<=ie)){var oe=ye+sn>>1;(function ke(Ne,je,ei,Ze,_i,Vi){for(;_i>Ze;){if(_i-Ze>600){var ci=_i-Ze+1,mi=ei-Ze+1,gi=Math.log(ci),Eo=.5*Math.exp(2*gi/3),Hn=.5*Math.sqrt(gi*Eo*(ci-Eo)/ci)*(mi-ci/2<0?-1:1);ke(Ne,je,ei,Math.max(Ze,Math.floor(ei-mi*Eo/ci+Hn)),Math.min(_i,Math.floor(ei+(ci-mi)*Eo/ci+Hn)),Vi)}var Pr=je[2*ei+Vi],Wi=Ze,Wn=_i;for(ri(Ne,je,Ze,ei),je[2*_i+Vi]>Pr&&ri(Ne,je,Ze,_i);Wi<Wn;){for(ri(Ne,je,Wi,Wn),Wi++,Wn--;je[2*Wi+Vi]<Pr;)Wi++;for(;je[2*Wn+Vi]>Pr;)Wn--}je[2*Ze+Vi]===Pr?ri(Ne,je,Ze,Wn):ri(Ne,je,++Wn,_i),Wn<=ei&&(Ze=Wn+1),ei<=Wn&&(_i=Wn-1)}})(ge,be,oe,ye,sn,on%2),Zt(ge,be,ie,ye,oe-1,on+1),Zt(ge,be,ie,oe+1,sn,on+1)}})(Dt,tt,at,0,Dt.length-1,0)};ui.prototype.range=function(U,q,Q,at){return function(dt,St,Dt,tt,vt,Zt,ge){for(var be,ie,ye=[0,dt.length-1,0],sn=[];ye.length;){var on=ye.pop(),oe=ye.pop(),ke=ye.pop();if(oe-ke<=ge)for(var Ne=ke;Ne<=oe;Ne++)ie=St[2*Ne+1],(be=St[2*Ne])>=Dt&&be<=vt&&ie>=tt&&ie<=Zt&&sn.push(dt[Ne]);else{var je=Math.floor((ke+oe)/2);ie=St[2*je+1],(be=St[2*je])>=Dt&&be<=vt&&ie>=tt&&ie<=Zt&&sn.push(dt[je]);var ei=(on+1)%2;(on===0?Dt<=be:tt<=ie)&&(ye.push(ke),ye.push(je-1),ye.push(ei)),(on===0?vt>=be:Zt>=ie)&&(ye.push(je+1),ye.push(oe),ye.push(ei))}}return sn}(this.ids,this.coords,U,q,Q,at,this.nodeSize)},ui.prototype.within=function(U,q,Q){return function(at,dt,St,Dt,tt,vt){for(var Zt=[0,at.length-1,0],ge=[],be=tt*tt;Zt.length;){var ie=Zt.pop(),ye=Zt.pop(),sn=Zt.pop();if(ye-sn<=vt)for(var on=sn;on<=ye;on++)mn(dt[2*on],dt[2*on+1],St,Dt)<=be&&ge.push(at[on]);else{var oe=Math.floor((sn+ye)/2),ke=dt[2*oe],Ne=dt[2*oe+1];mn(ke,Ne,St,Dt)<=be&&ge.push(at[oe]);var je=(ie+1)%2;(ie===0?St-tt<=ke:Dt-tt<=Ne)&&(Zt.push(sn),Zt.push(oe-1),Zt.push(je)),(ie===0?St+tt>=ke:Dt+tt>=Ne)&&(Zt.push(oe+1),Zt.push(ye),Zt.push(je))}}return ge}(this.ids,this.coords,U,q,Q,this.nodeSize)};var bi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(U){return U}},le=function(U){this.options=xt(Object.create(bi),U),this.trees=new Array(this.options.maxZoom+1)};function Ke(U,q,Q,at,dt){return{x:U,y:q,zoom:1/0,id:Q,parentId:-1,numPoints:at,properties:dt}}function me(U,q){var Q=U.geometry.coordinates,at=Q[1];return{x:ki(Q[0]),y:ut(at),zoom:1/0,index:q,parentId:-1}}function Te(U){return{type:"Feature",id:U.id,properties:Ai(U),geometry:{type:"Point",coordinates:[(at=U.x,360*(at-.5)),(q=U.y,Q=(180-360*q)*Math.PI/180,360*Math.atan(Math.exp(Q))/Math.PI-90)]}};var q,Q,at}function Ai(U){var q=U.numPoints,Q=q>=1e4?Math.round(q/1e3)+"k":q>=1e3?Math.round(q/100)/10+"k":q;return xt(xt({},U.properties),{cluster:!0,cluster_id:U.id,point_count:q,point_count_abbreviated:Q})}function ki(U){return U/360+.5}function ut(U){var q=Math.sin(U*Math.PI/180),Q=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return Q<0?0:Q>1?1:Q}function xt(U,q){for(var Q in q)U[Q]=q[Q];return U}function $t(U){return U.x}function ae(U){return U.y}function pe(U,q,Q,at,dt,St){var Dt=dt-Q,tt=St-at;if(Dt!==0||tt!==0){var vt=((U-Q)*Dt+(q-at)*tt)/(Dt*Dt+tt*tt);vt>1?(Q=dt,at=St):vt>0&&(Q+=Dt*vt,at+=tt*vt)}return(Dt=U-Q)*Dt+(tt=q-at)*tt}function Oe(U,q,Q,at){var dt={id:U===void 0?null:U,type:q,geometry:Q,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(St){var Dt=St.geometry,tt=St.type;if(tt==="Point"||tt==="MultiPoint"||tt==="LineString")ln(St,Dt);else if(tt==="Polygon"||tt==="MultiLineString")for(var vt=0;vt<Dt.length;vt++)ln(St,Dt[vt]);else if(tt==="MultiPolygon")for(vt=0;vt<Dt.length;vt++)for(var Zt=0;Zt<Dt[vt].length;Zt++)ln(St,Dt[vt][Zt])}(dt),dt}function ln(U,q){for(var Q=0;Q<q.length;Q+=3)U.minX=Math.min(U.minX,q[Q]),U.minY=Math.min(U.minY,q[Q+1]),U.maxX=Math.max(U.maxX,q[Q]),U.maxY=Math.max(U.maxY,q[Q+1])}function we(U,q,Q,at){if(q.geometry){var dt=q.geometry.coordinates,St=q.geometry.type,Dt=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),tt=[],vt=q.id;if(Q.promoteId?vt=q.properties[Q.promoteId]:Q.generateId&&(vt=at||0),St==="Point")De(dt,tt);else if(St==="MultiPoint")for(var Zt=0;Zt<dt.length;Zt++)De(dt[Zt],tt);else if(St==="LineString")Se(dt,tt,Dt,!1);else if(St==="MultiLineString"){if(Q.lineMetrics){for(Zt=0;Zt<dt.length;Zt++)Se(dt[Zt],tt=[],Dt,!1),U.push(Oe(vt,"LineString",tt,q.properties));return}tn(dt,tt,Dt,!1)}else if(St==="Polygon")tn(dt,tt,Dt,!0);else{if(St!=="MultiPolygon"){if(St==="GeometryCollection"){for(Zt=0;Zt<q.geometry.geometries.length;Zt++)we(U,{id:vt,geometry:q.geometry.geometries[Zt],properties:q.properties},Q,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Zt=0;Zt<dt.length;Zt++){var ge=[];tn(dt[Zt],ge,Dt,!0),tt.push(ge)}}U.push(Oe(vt,St,tt,q.properties))}}function De(U,q){q.push(wn(U[0])),q.push(Cn(U[1])),q.push(0)}function Se(U,q,Q,at){for(var dt,St,Dt=0,tt=0;tt<U.length;tt++){var vt=wn(U[tt][0]),Zt=Cn(U[tt][1]);q.push(vt),q.push(Zt),q.push(0),tt>0&&(Dt+=at?(dt*Zt-vt*St)/2:Math.sqrt(Math.pow(vt-dt,2)+Math.pow(Zt-St,2))),dt=vt,St=Zt}var ge=q.length-3;q[2]=1,function be(ie,ye,sn,on){for(var oe,ke=on,Ne=sn-ye>>1,je=sn-ye,ei=ie[ye],Ze=ie[ye+1],_i=ie[sn],Vi=ie[sn+1],ci=ye+3;ci<sn;ci+=3){var mi=pe(ie[ci],ie[ci+1],ei,Ze,_i,Vi);if(mi>ke)oe=ci,ke=mi;else if(mi===ke){var gi=Math.abs(ci-Ne);gi<je&&(oe=ci,je=gi)}}ke>on&&(oe-ye>3&&be(ie,ye,oe,on),ie[oe+2]=ke,sn-oe>3&&be(ie,oe,sn,on))}(q,0,ge,Q),q[ge+2]=1,q.size=Math.abs(Dt),q.start=0,q.end=q.size}function tn(U,q,Q,at){for(var dt=0;dt<U.length;dt++){var St=[];Se(U[dt],St,Q,at),q.push(St)}}function wn(U){return U/360+.5}function Cn(U){var q=Math.sin(U*Math.PI/180),Q=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return Q<0?0:Q>1?1:Q}function Pn(U,q,Q,at,dt,St,Dt,tt){if(at/=q,St>=(Q/=q)&&Dt<at)return U;if(Dt<Q||St>=at)return null;for(var vt=[],Zt=0;Zt<U.length;Zt++){var ge=U[Zt],be=ge.geometry,ie=ge.type,ye=dt===0?ge.minX:ge.minY,sn=dt===0?ge.maxX:ge.maxY;if(ye>=Q&&sn<at)vt.push(ge);else if(!(sn<Q||ye>=at)){var on=[];if(ie==="Point"||ie==="MultiPoint")Qn(be,on,Q,at,dt);else if(ie==="LineString")Di(be,on,Q,at,dt,!1,tt.lineMetrics);else if(ie==="MultiLineString")rr(be,on,Q,at,dt,!1);else if(ie==="Polygon")rr(be,on,Q,at,dt,!0);else if(ie==="MultiPolygon")for(var oe=0;oe<be.length;oe++){var ke=[];rr(be[oe],ke,Q,at,dt,!0),ke.length&&on.push(ke)}if(on.length){if(tt.lineMetrics&&ie==="LineString"){for(oe=0;oe<on.length;oe++)vt.push(Oe(ge.id,ie,on[oe],ge.tags));continue}ie!=="LineString"&&ie!=="MultiLineString"||(on.length===1?(ie="LineString",on=on[0]):ie="MultiLineString"),ie!=="Point"&&ie!=="MultiPoint"||(ie=on.length===3?"Point":"MultiPoint"),vt.push(Oe(ge.id,ie,on,ge.tags))}}}return vt.length?vt:null}function Qn(U,q,Q,at,dt){for(var St=0;St<U.length;St+=3){var Dt=U[St+dt];Dt>=Q&&Dt<=at&&(q.push(U[St]),q.push(U[St+1]),q.push(U[St+2]))}}function Di(U,q,Q,at,dt,St,Dt){for(var tt,vt,Zt=wi(U),ge=dt===0?qo:pa,be=U.start,ie=0;ie<U.length-3;ie+=3){var ye=U[ie],sn=U[ie+1],on=U[ie+2],oe=U[ie+3],ke=U[ie+4],Ne=dt===0?ye:sn,je=dt===0?oe:ke,ei=!1;Dt&&(tt=Math.sqrt(Math.pow(ye-oe,2)+Math.pow(sn-ke,2))),Ne<Q?je>Q&&(vt=ge(Zt,ye,sn,oe,ke,Q),Dt&&(Zt.start=be+tt*vt)):Ne>at?je<at&&(vt=ge(Zt,ye,sn,oe,ke,at),Dt&&(Zt.start=be+tt*vt)):Gr(Zt,ye,sn,on),je<Q&&Ne>=Q&&(vt=ge(Zt,ye,sn,oe,ke,Q),ei=!0),je>at&&Ne<=at&&(vt=ge(Zt,ye,sn,oe,ke,at),ei=!0),!St&&ei&&(Dt&&(Zt.end=be+tt*vt),q.push(Zt),Zt=wi(U)),Dt&&(be+=tt)}var Ze=U.length-3;ye=U[Ze],sn=U[Ze+1],on=U[Ze+2],(Ne=dt===0?ye:sn)>=Q&&Ne<=at&&Gr(Zt,ye,sn,on),Ze=Zt.length-3,St&&Ze>=3&&(Zt[Ze]!==Zt[0]||Zt[Ze+1]!==Zt[1])&&Gr(Zt,Zt[0],Zt[1],Zt[2]),Zt.length&&q.push(Zt)}function wi(U){var q=[];return q.size=U.size,q.start=U.start,q.end=U.end,q}function rr(U,q,Q,at,dt,St){for(var Dt=0;Dt<U.length;Dt++)Di(U[Dt],q,Q,at,dt,St,!1)}function Gr(U,q,Q,at){U.push(q),U.push(Q),U.push(at)}function qo(U,q,Q,at,dt,St){var Dt=(St-q)/(at-q);return U.push(St),U.push(Q+(dt-Q)*Dt),U.push(1),Dt}function pa(U,q,Q,at,dt,St){var Dt=(St-Q)/(dt-Q);return U.push(q+(at-q)*Dt),U.push(St),U.push(1),Dt}function Pa(U,q){for(var Q=[],at=0;at<U.length;at++){var dt,St=U[at],Dt=St.type;if(Dt==="Point"||Dt==="MultiPoint"||Dt==="LineString")dt=Ga(St.geometry,q);else if(Dt==="MultiLineString"||Dt==="Polygon"){dt=[];for(var tt=0;tt<St.geometry.length;tt++)dt.push(Ga(St.geometry[tt],q))}else if(Dt==="MultiPolygon")for(dt=[],tt=0;tt<St.geometry.length;tt++){for(var vt=[],Zt=0;Zt<St.geometry[tt].length;Zt++)vt.push(Ga(St.geometry[tt][Zt],q));dt.push(vt)}Q.push(Oe(St.id,Dt,dt,St.tags))}return Q}function Ga(U,q){var Q=[];Q.size=U.size,U.start!==void 0&&(Q.start=U.start,Q.end=U.end);for(var at=0;at<U.length;at+=3)Q.push(U[at]+q,U[at+1],U[at+2]);return Q}function Ar(U,q){if(U.transformed)return U;var Q,at,dt,St=1<<U.z,Dt=U.x,tt=U.y;for(Q=0;Q<U.features.length;Q++){var vt=U.features[Q],Zt=vt.geometry,ge=vt.type;if(vt.geometry=[],ge===1)for(at=0;at<Zt.length;at+=2)vt.geometry.push(Mo(Zt[at],Zt[at+1],q,St,Dt,tt));else for(at=0;at<Zt.length;at++){var be=[];for(dt=0;dt<Zt[at].length;dt+=2)be.push(Mo(Zt[at][dt],Zt[at][dt+1],q,St,Dt,tt));vt.geometry.push(be)}}return U.transformed=!0,U}function Mo(U,q,Q,at,dt,St){return[Math.round(Q*(U*at-dt)),Math.round(Q*(q*at-St))]}function Hs(U,q,Q,at,dt){for(var St=q===dt.maxZoom?0:dt.tolerance/((1<<q)*dt.extent),Dt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:at,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},tt=0;tt<U.length;tt++){Dt.numFeatures++,Gs(Dt,U[tt],St,dt);var vt=U[tt].minX,Zt=U[tt].minY,ge=U[tt].maxX,be=U[tt].maxY;vt<Dt.minX&&(Dt.minX=vt),Zt<Dt.minY&&(Dt.minY=Zt),ge>Dt.maxX&&(Dt.maxX=ge),be>Dt.maxY&&(Dt.maxY=be)}return Dt}function Gs(U,q,Q,at){var dt=q.geometry,St=q.type,Dt=[];if(St==="Point"||St==="MultiPoint")for(var tt=0;tt<dt.length;tt+=3)Dt.push(dt[tt]),Dt.push(dt[tt+1]),U.numPoints++,U.numSimplified++;else if(St==="LineString")fl(Dt,dt,U,Q,!1,!1);else if(St==="MultiLineString"||St==="Polygon")for(tt=0;tt<dt.length;tt++)fl(Dt,dt[tt],U,Q,St==="Polygon",tt===0);else if(St==="MultiPolygon")for(var vt=0;vt<dt.length;vt++){var Zt=dt[vt];for(tt=0;tt<Zt.length;tt++)fl(Dt,Zt[tt],U,Q,!0,tt===0)}if(Dt.length){var ge=q.tags||null;if(St==="LineString"&&at.lineMetrics){for(var be in ge={},q.tags)ge[be]=q.tags[be];ge.mapbox_clip_start=dt.start/dt.size,ge.mapbox_clip_end=dt.end/dt.size}var ie={geometry:Dt,type:St==="Polygon"||St==="MultiPolygon"?3:St==="LineString"||St==="MultiLineString"?2:1,tags:ge};q.id!==null&&(ie.id=q.id),U.features.push(ie)}}function fl(U,q,Q,at,dt,St){var Dt=at*at;if(at>0&&q.size<(dt?Dt:at))Q.numPoints+=q.length/3;else{for(var tt=[],vt=0;vt<q.length;vt+=3)(at===0||q[vt+2]>Dt)&&(Q.numSimplified++,tt.push(q[vt]),tt.push(q[vt+1])),Q.numPoints++;dt&&function(Zt,ge){for(var be=0,ie=0,ye=Zt.length,sn=ye-2;ie<ye;sn=ie,ie+=2)be+=(Zt[ie]-Zt[sn])*(Zt[ie+1]+Zt[sn+1]);if(be>0===ge)for(ie=0,ye=Zt.length;ie<ye/2;ie+=2){var on=Zt[ie],oe=Zt[ie+1];Zt[ie]=Zt[ye-2-ie],Zt[ie+1]=Zt[ye-1-ie],Zt[ye-2-ie]=on,Zt[ye-1-ie]=oe}}(tt,St),U.push(tt)}}function La(U,q){var Q=(q=this.options=function(dt,St){for(var Dt in St)dt[Dt]=St[Dt];return dt}(Object.create(this.options),q)).debug;if(Q&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");var at=function(dt,St){var Dt=[];if(dt.type==="FeatureCollection")for(var tt=0;tt<dt.features.length;tt++)we(Dt,dt.features[tt],St,tt);else we(Dt,dt.type==="Feature"?dt:{geometry:dt},St);return Dt}(U,q);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(at=function(dt,St){var Dt=St.buffer/St.extent,tt=dt,vt=Pn(dt,1,-1-Dt,Dt,0,-1,2,St),Zt=Pn(dt,1,1-Dt,2+Dt,0,-1,2,St);return(vt||Zt)&&(tt=Pn(dt,1,-Dt,1+Dt,0,-1,2,St)||[],vt&&(tt=Pa(vt,1).concat(tt)),Zt&&(tt=tt.concat(Pa(Zt,-1)))),tt}(at,q)).length&&this.splitTile(at,0,0,0),Q&&(at.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function so(U,q,Q){return 32*((1<<U)*Q+q)+U}function qs(U,q){var Q=U.tileID.canonical;if(!this._geoJSONIndex)return q(null,null);var at=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!at)return q(null,null);var dt=new Rt(at.features),St=Qt(dt);St.byteOffset===0&&St.byteLength===St.buffer.byteLength||(St=new Uint8Array(St)),q(null,{vectorTile:dt,rawData:St.buffer})}le.prototype.load=function(U){var q=this.options,Q=q.log,at=q.minZoom,dt=q.maxZoom,St=q.nodeSize;Q&&console.time("total time");var Dt="prepare "+U.length+" points";Q&&console.time(Dt),this.points=U;for(var tt=[],vt=0;vt<U.length;vt++)U[vt].geometry&&tt.push(me(U[vt],vt));this.trees[dt+1]=new ui(tt,$t,ae,St,Float32Array),Q&&console.timeEnd(Dt);for(var Zt=dt;Zt>=at;Zt--){var ge=+Date.now();tt=this._cluster(tt,Zt),this.trees[Zt]=new ui(tt,$t,ae,St,Float32Array),Q&&console.log("z%d: %d clusters in %dms",Zt,tt.length,+Date.now()-ge)}return Q&&console.timeEnd("total time"),this},le.prototype.getClusters=function(U,q){var Q=((U[0]+180)%360+360)%360-180,at=Math.max(-90,Math.min(90,U[1])),dt=U[2]===180?180:((U[2]+180)%360+360)%360-180,St=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)Q=-180,dt=180;else if(Q>dt){var Dt=this.getClusters([Q,at,180,St],q),tt=this.getClusters([-180,at,dt,St],q);return Dt.concat(tt)}for(var vt=this.trees[this._limitZoom(q)],Zt=[],ge=0,be=vt.range(ki(Q),ut(St),ki(dt),ut(at));ge<be.length;ge+=1){var ie=vt.points[be[ge]];Zt.push(ie.numPoints?Te(ie):this.points[ie.index])}return Zt},le.prototype.getChildren=function(U){var q=this._getOriginId(U),Q=this._getOriginZoom(U),at="No cluster with the specified id.",dt=this.trees[Q];if(!dt)throw new Error(at);var St=dt.points[q];if(!St)throw new Error(at);for(var Dt=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),tt=[],vt=0,Zt=dt.within(St.x,St.y,Dt);vt<Zt.length;vt+=1){var ge=dt.points[Zt[vt]];ge.parentId===U&&tt.push(ge.numPoints?Te(ge):this.points[ge.index])}if(tt.length===0)throw new Error(at);return tt},le.prototype.getLeaves=function(U,q,Q){var at=[];return this._appendLeaves(at,U,q=q||10,Q=Q||0,0),at},le.prototype.getTile=function(U,q,Q){var at=this.trees[this._limitZoom(U)],dt=Math.pow(2,U),St=this.options,Dt=St.radius/St.extent,tt=(Q-Dt)/dt,vt=(Q+1+Dt)/dt,Zt={features:[]};return this._addTileFeatures(at.range((q-Dt)/dt,tt,(q+1+Dt)/dt,vt),at.points,q,Q,dt,Zt),q===0&&this._addTileFeatures(at.range(1-Dt/dt,tt,1,vt),at.points,dt,Q,dt,Zt),q===dt-1&&this._addTileFeatures(at.range(0,tt,Dt/dt,vt),at.points,-1,Q,dt,Zt),Zt.features.length?Zt:null},le.prototype.getClusterExpansionZoom=function(U){for(var q=this._getOriginZoom(U)-1;q<=this.options.maxZoom;){var Q=this.getChildren(U);if(q++,Q.length!==1)break;U=Q[0].properties.cluster_id}return q},le.prototype._appendLeaves=function(U,q,Q,at,dt){for(var St=0,Dt=this.getChildren(q);St<Dt.length;St+=1){var tt=Dt[St],vt=tt.properties;if(vt&&vt.cluster?dt+vt.point_count<=at?dt+=vt.point_count:dt=this._appendLeaves(U,vt.cluster_id,Q,at,dt):dt<at?dt++:U.push(tt),U.length===Q)break}return dt},le.prototype._addTileFeatures=function(U,q,Q,at,dt,St){for(var Dt=0,tt=U;Dt<tt.length;Dt+=1){var vt=q[tt[Dt]],Zt=vt.numPoints,ge={type:1,geometry:[[Math.round(this.options.extent*(vt.x*dt-Q)),Math.round(this.options.extent*(vt.y*dt-at))]],tags:Zt?Ai(vt):this.points[vt.index].properties},be=void 0;Zt?be=vt.id:this.options.generateId?be=vt.index:this.points[vt.index].id&&(be=this.points[vt.index].id),be!==void 0&&(ge.id=be),St.features.push(ge)}},le.prototype._limitZoom=function(U){return Math.max(this.options.minZoom,Math.min(+U,this.options.maxZoom+1))},le.prototype._cluster=function(U,q){for(var Q=[],at=this.options,dt=at.reduce,St=at.minPoints,Dt=at.radius/(at.extent*Math.pow(2,q)),tt=0;tt<U.length;tt++){var vt=U[tt];if(!(vt.zoom<=q)){vt.zoom=q;for(var Zt=this.trees[q+1],ge=Zt.within(vt.x,vt.y,Dt),be=vt.numPoints||1,ie=be,ye=0,sn=ge;ye<sn.length;ye+=1){var on=Zt.points[sn[ye]];on.zoom>q&&(ie+=on.numPoints||1)}if(ie>=St){for(var oe=vt.x*be,ke=vt.y*be,Ne=dt&&be>1?this._map(vt,!0):null,je=(tt<<5)+(q+1)+this.points.length,ei=0,Ze=ge;ei<Ze.length;ei+=1){var _i=Zt.points[Ze[ei]];if(!(_i.zoom<=q)){_i.zoom=q;var Vi=_i.numPoints||1;oe+=_i.x*Vi,ke+=_i.y*Vi,_i.parentId=je,dt&&(Ne||(Ne=this._map(vt,!0)),dt(Ne,this._map(_i)))}}vt.parentId=je,Q.push(Ke(oe/ie,ke/ie,je,ie,Ne))}else if(Q.push(vt),ie>1)for(var ci=0,mi=ge;ci<mi.length;ci+=1){var gi=Zt.points[mi[ci]];gi.zoom<=q||(gi.zoom=q,Q.push(gi))}}}return Q},le.prototype._getOriginId=function(U){return U-this.points.length>>5},le.prototype._getOriginZoom=function(U){return(U-this.points.length)%32},le.prototype._map=function(U,q){if(U.numPoints)return q?xt({},U.properties):U.properties;var Q=this.points[U.index].properties,at=this.options.map(Q);return q&&at===Q?xt({},at):at},La.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},La.prototype.splitTile=function(U,q,Q,at,dt,St,Dt){for(var tt=[U,q,Q,at],vt=this.options,Zt=vt.debug;tt.length;){at=tt.pop(),Q=tt.pop(),q=tt.pop(),U=tt.pop();var ge=1<<q,be=so(q,Q,at),ie=this.tiles[be];if(!ie&&(Zt>1&&console.time("creation"),ie=this.tiles[be]=Hs(U,q,Q,at,vt),this.tileCoords.push({z:q,x:Q,y:at}),Zt)){Zt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,Q,at,ie.numFeatures,ie.numPoints,ie.numSimplified),console.timeEnd("creation"));var ye="z"+q;this.stats[ye]=(this.stats[ye]||0)+1,this.total++}if(ie.source=U,dt){if(q===vt.maxZoom||q===dt)continue;var sn=1<<dt-q;if(Q!==Math.floor(St/sn)||at!==Math.floor(Dt/sn))continue}else if(q===vt.indexMaxZoom||ie.numPoints<=vt.indexMaxPoints)continue;if(ie.source=null,U.length!==0){Zt>1&&console.time("clipping");var on,oe,ke,Ne,je,ei,Ze=.5*vt.buffer/vt.extent,_i=.5-Ze,Vi=.5+Ze,ci=1+Ze;on=oe=ke=Ne=null,je=Pn(U,ge,Q-Ze,Q+Vi,0,ie.minX,ie.maxX,vt),ei=Pn(U,ge,Q+_i,Q+ci,0,ie.minX,ie.maxX,vt),U=null,je&&(on=Pn(je,ge,at-Ze,at+Vi,1,ie.minY,ie.maxY,vt),oe=Pn(je,ge,at+_i,at+ci,1,ie.minY,ie.maxY,vt),je=null),ei&&(ke=Pn(ei,ge,at-Ze,at+Vi,1,ie.minY,ie.maxY,vt),Ne=Pn(ei,ge,at+_i,at+ci,1,ie.minY,ie.maxY,vt),ei=null),Zt>1&&console.timeEnd("clipping"),tt.push(on||[],q+1,2*Q,2*at),tt.push(oe||[],q+1,2*Q,2*at+1),tt.push(ke||[],q+1,2*Q+1,2*at),tt.push(Ne||[],q+1,2*Q+1,2*at+1)}}},La.prototype.getTile=function(U,q,Q){var at=this.options,dt=at.extent,St=at.debug;if(U<0||U>24)return null;var Dt=1<<U,tt=so(U,q=(q%Dt+Dt)%Dt,Q);if(this.tiles[tt])return Ar(this.tiles[tt],dt);St>1&&console.log("drilling down to z%d-%d-%d",U,q,Q);for(var vt,Zt=U,ge=q,be=Q;!vt&&Zt>0;)Zt--,ge=Math.floor(ge/2),be=Math.floor(be/2),vt=this.tiles[so(Zt,ge,be)];return vt&&vt.source?(St>1&&console.log("found parent tile z%d-%d-%d",Zt,ge,be),St>1&&console.time("drilling down"),this.splitTile(vt.source,Zt,ge,be,U,q,Q),St>1&&console.timeEnd("drilling down"),this.tiles[tt]?Ar(this.tiles[tt],dt):null):null};var vu=function(U){function q(Q,at,dt,St){U.call(this,Q,at,dt,qs),St&&(this.loadGeoJSON=St)}return U&&(q.__proto__=U),(q.prototype=Object.create(U&&U.prototype)).constructor=q,q.prototype.loadData=function(Q,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=at,this._pendingLoadDataParams=Q,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},q.prototype._loadData=function(){var Q=this;if(this._pendingCallback&&this._pendingLoadDataParams){var at=this._pendingCallback,dt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var St=!!(dt&&dt.request&&dt.request.collectResourceTiming)&&new o.RequestPerformance(dt.request);this.loadGeoJSON(dt,function(Dt,tt){if(Dt||!tt)return at(Dt);if(typeof tt!="object")return at(new Error("Input data given to '"+dt.source+"' is not a valid GeoJSON object."));(function ie(ye,sn){var on,oe=ye&&ye.type;if(oe==="FeatureCollection")for(on=0;on<ye.features.length;on++)ie(ye.features[on],sn);else if(oe==="GeometryCollection")for(on=0;on<ye.geometries.length;on++)ie(ye.geometries[on],sn);else if(oe==="Feature")ie(ye.geometry,sn);else if(oe==="Polygon")lt(ye.coordinates,sn);else if(oe==="MultiPolygon")for(on=0;on<ye.coordinates.length;on++)lt(ye.coordinates[on],sn);return ye})(tt,!0);try{if(dt.filter){var vt=o.createExpression(dt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(vt.result==="error")throw new Error(vt.value.map(function(ie){return ie.key+": "+ie.message}).join(", "));var Zt=tt.features.filter(function(ie){return vt.value.evaluate({zoom:0},ie)});tt={type:"FeatureCollection",features:Zt}}Q._geoJSONIndex=dt.cluster?new le(function(ie){var ye=ie.superclusterOptions,sn=ie.clusterProperties;if(!sn||!ye)return ye;for(var on={},oe={},ke={accumulated:null,zoom:0},Ne={properties:null},je=Object.keys(sn),ei=0,Ze=je;ei<Ze.length;ei+=1){var _i=Ze[ei],Vi=sn[_i],ci=Vi[0],mi=o.createExpression(Vi[1]),gi=o.createExpression(typeof ci=="string"?[ci,["accumulated"],["get",_i]]:ci);on[_i]=mi.value,oe[_i]=gi.value}return ye.map=function(Eo){Ne.properties=Eo;for(var Hn={},Pr=0,Wi=je;Pr<Wi.length;Pr+=1){var Wn=Wi[Pr];Hn[Wn]=on[Wn].evaluate(ke,Ne)}return Hn},ye.reduce=function(Eo,Hn){Ne.properties=Hn;for(var Pr=0,Wi=je;Pr<Wi.length;Pr+=1){var Wn=Wi[Pr];ke.accumulated=Eo[Wn],Eo[Wn]=oe[Wn].evaluate(ke,Ne)}},ye}(dt)).load(tt.features):function(ie,ye){return new La(ie,ye)}(tt,dt.geojsonVtOptions)}catch(ie){return at(ie)}Q.loaded={};var ge={};if(St){var be=St.finish();be&&(ge.resourceTiming={},ge.resourceTiming[dt.source]=JSON.parse(JSON.stringify(be)))}at(null,ge)})}},q.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},q.prototype.reloadTile=function(Q,at){var dt=this.loaded;return dt&&dt[Q.uid]?U.prototype.reloadTile.call(this,Q,at):this.loadTile(Q,at)},q.prototype.loadGeoJSON=function(Q,at){if(Q.request)o.getJSON(Q.request,at);else{if(typeof Q.data!="string")return at(new Error("Input data given to '"+Q.source+"' is not a valid GeoJSON object."));try{return at(null,JSON.parse(Q.data))}catch{return at(new Error("Input data given to '"+Q.source+"' is not a valid GeoJSON object."))}}},q.prototype.removeSource=function(Q,at){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),at()},q.prototype.getClusterExpansionZoom=function(Q,at){try{at(null,this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId))}catch(dt){at(dt)}},q.prototype.getClusterChildren=function(Q,at){try{at(null,this._geoJSONIndex.getChildren(Q.clusterId))}catch(dt){at(dt)}},q.prototype.getClusterLeaves=function(Q,at){try{at(null,this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset))}catch(dt){at(dt)}},q}(W),qr=function(U){var q=this;this.self=U,this.actor=new o.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:W,geojson:vu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Q,at){if(q.workerSourceTypes[Q])throw new Error('Worker source with name "'+Q+'" already registered.');q.workerSourceTypes[Q]=at},this.self.registerRTLTextPlugin=function(Q){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Q.applyArabicShaping,o.plugin.processBidirectionalText=Q.processBidirectionalText,o.plugin.processStyledBidirectionalText=Q.processStyledBidirectionalText}};return qr.prototype.setReferrer=function(U,q){this.referrer=q},qr.prototype.setImages=function(U,q,Q){for(var at in this.availableImages[U]=q,this.workerSources[U]){var dt=this.workerSources[U][at];for(var St in dt)dt[St].availableImages=q}Q()},qr.prototype.setLayers=function(U,q,Q){this.getLayerIndex(U).replace(q),Q()},qr.prototype.updateLayers=function(U,q,Q){this.getLayerIndex(U).update(q.layers,q.removedIds),Q()},qr.prototype.loadTile=function(U,q,Q){this.getWorkerSource(U,q.type,q.source).loadTile(q,Q)},qr.prototype.loadDEMTile=function(U,q,Q){this.getDEMWorkerSource(U,q.source).loadTile(q,Q)},qr.prototype.reloadTile=function(U,q,Q){this.getWorkerSource(U,q.type,q.source).reloadTile(q,Q)},qr.prototype.abortTile=function(U,q,Q){this.getWorkerSource(U,q.type,q.source).abortTile(q,Q)},qr.prototype.removeTile=function(U,q,Q){this.getWorkerSource(U,q.type,q.source).removeTile(q,Q)},qr.prototype.removeDEMTile=function(U,q){this.getDEMWorkerSource(U,q.source).removeTile(q)},qr.prototype.removeSource=function(U,q,Q){if(this.workerSources[U]&&this.workerSources[U][q.type]&&this.workerSources[U][q.type][q.source]){var at=this.workerSources[U][q.type][q.source];delete this.workerSources[U][q.type][q.source],at.removeSource!==void 0?at.removeSource(q,Q):Q()}},qr.prototype.loadWorkerSource=function(U,q,Q){try{this.self.importScripts(q.url),Q()}catch(at){Q(at.toString())}},qr.prototype.syncRTLPluginState=function(U,q,Q){try{o.plugin.setState(q);var at=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&at!=null){this.self.importScripts(at);var dt=o.plugin.isParsed();Q(dt?void 0:new Error("RTL Text Plugin failed to import scripts from "+at),dt)}}catch(St){Q(St.toString())}},qr.prototype.getAvailableImages=function(U){var q=this.availableImages[U];return q||(q=[]),q},qr.prototype.getLayerIndex=function(U){var q=this.layerIndexes[U];return q||(q=this.layerIndexes[U]=new M),q},qr.prototype.getWorkerSource=function(U,q,Q){var at=this;return this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][q]||(this.workerSources[U][q]={}),this.workerSources[U][q][Q]||(this.workerSources[U][q][Q]=new this.workerSourceTypes[q]({send:function(dt,St,Dt){at.actor.send(dt,St,Dt,U)}},this.getLayerIndex(U),this.getAvailableImages(U))),this.workerSources[U][q][Q]},qr.prototype.getDEMWorkerSource=function(U,q){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][q]||(this.demWorkerSources[U][q]=new nt),this.demWorkerSources[U][q]},qr.prototype.enforceCacheSizeLimit=function(U,q){o.enforceCacheSizeLimit(q)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new qr(self)),qr}),m(["./shared"],function(o){var y=o.createCommonjsModule(function(l){function c(b){return!u(b)}function u(b){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,k,F=new Blob([""],{type:"text/javascript"}),j=URL.createObjectURL(F);try{k=new Worker(j),E=!0}catch{E=!1}return k&&k.terminate(),URL.revokeObjectURL(j),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var k=E.getContext("2d");if(!k)return!1;var F=k.getImageData(0,0,1,1);return F&&F.width===E.width}()?(d[w=b&&b.failIfMajorPerformanceCaveat]===void 0&&(d[w]=function(E){var k=function(j){var et=document.createElement("canvas"),it=Object.create(c.webGLContextAttributes);return it.failIfMajorPerformanceCaveat=j,et.probablySupportsContext?et.probablySupportsContext("webgl",it)||et.probablySupportsContext("experimental-webgl",it):et.supportsContext?et.supportsContext("webgl",it)||et.supportsContext("experimental-webgl",it):et.getContext("webgl",it)||et.getContext("experimental-webgl",it)}(E);if(!k)return!1;var F=k.createShader(k.VERTEX_SHADER);return!(!F||k.isContextLost())&&(k.shaderSource(F,"void main() {}"),k.compileShader(F),k.getShaderParameter(F,k.COMPILE_STATUS)===!0)}(w)),d[w]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var w}l.exports?l.exports=c:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=c,window.mapboxgl.notSupportedReason=u);var d={};c.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(l,c,u){var d=o.window.document.createElement(l);return c!==void 0&&(d.className=c),u&&u.appendChild(d),d},createNS:function(l,c){return o.window.document.createElementNS(l,c)}},M=o.window.document&&o.window.document.documentElement.style;function T(l){if(!M)return l[0];for(var c=0;c<l.length;c++)if(l[c]in M)return l[c];return l[0]}var P,L=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){M&&L&&(P=M[L],M[L]="none")},x.enableDrag=function(){M&&L&&(M[L]=P)};var O=T(["transform","WebkitTransform"]);x.setTransform=function(l,c){l.style[O]=c};var W=!1;try{var H=Object.defineProperty({},"passive",{get:function(){W=!0}});o.window.addEventListener("test",H,H),o.window.removeEventListener("test",H,H)}catch{W=!1}x.addEventListener=function(l,c,u,d){d===void 0&&(d={}),l.addEventListener(c,u,"passive"in d&&W?d:d.capture)},x.removeEventListener=function(l,c,u,d){d===void 0&&(d={}),l.removeEventListener(c,u,"passive"in d&&W?d:d.capture)};var nt=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",nt,!0)};function lt(l){var c=l.userImage;return!!(c&&c.render&&c.render())&&(l.data.replace(new Uint8Array(c.data.buffer)),!0)}x.suppressClick=function(){o.window.addEventListener("click",nt,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",nt,!0)},0)},x.mousePos=function(l,c){var u=l.getBoundingClientRect();return new o.Point(c.clientX-u.left-l.clientLeft,c.clientY-u.top-l.clientTop)},x.touchPos=function(l,c){for(var u=l.getBoundingClientRect(),d=[],b=0;b<c.length;b++)d.push(new o.Point(c[b].clientX-u.left-l.clientLeft,c[b].clientY-u.top-l.clientTop));return d},x.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},x.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var K=function(l){function c(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.isLoaded=function(){return this.loaded},c.prototype.setLoaded=function(u){if(this.loaded!==u&&(this.loaded=u,u)){for(var d=0,b=this.requestors;d<b.length;d+=1){var w=b[d];this._notify(w.ids,w.callback)}this.requestors=[]}},c.prototype.getImage=function(u){return this.images[u]},c.prototype.addImage=function(u,d){this._validate(u,d)&&(this.images[u]=d)},c.prototype._validate=function(u,d){var b=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchX" value'))),b=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchY" value'))),b=!1),this._validateContent(d.content,d)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "content" value'))),b=!1),b},c.prototype._validateStretch=function(u,d){if(!u)return!0;for(var b=0,w=0,E=u;w<E.length;w+=1){var k=E[w];if(k[0]<b||k[1]<k[0]||d<k[1])return!1;b=k[1]}return!0},c.prototype._validateContent=function(u,d){return!(u&&(u.length!==4||u[0]<0||d.data.width<u[0]||u[1]<0||d.data.height<u[1]||u[2]<0||d.data.width<u[2]||u[3]<0||d.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))},c.prototype.updateImage=function(u,d){d.version=this.images[u].version+1,this.images[u]=d,this.updatedImages[u]=!0},c.prototype.removeImage=function(u){var d=this.images[u];delete this.images[u],delete this.patterns[u],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()},c.prototype.listImages=function(){return Object.keys(this.images)},c.prototype.getImages=function(u,d){var b=!0;if(!this.isLoaded())for(var w=0,E=u;w<E.length;w+=1)this.images[E[w]]||(b=!1);this.isLoaded()||b?this._notify(u,d):this.requestors.push({ids:u,callback:d})},c.prototype._notify=function(u,d){for(var b={},w=0,E=u;w<E.length;w+=1){var k=E[w];this.images[k]||this.fire(new o.Event("styleimagemissing",{id:k}));var F=this.images[k];F?b[k]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:!!(F.userImage&&F.userImage.render)}:o.warnOnce('Image "'+k+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}d(null,b)},c.prototype.getPixelSize=function(){var u=this.atlasImage;return{width:u.width,height:u.height}},c.prototype.getPattern=function(u){var d=this.patterns[u],b=this.getImage(u);if(!b)return null;if(d&&d.position.version===b.version)return d.position;if(d)d.position.version=b.version;else{var w={w:b.data.width+2,h:b.data.height+2,x:0,y:0},E=new o.ImagePosition(w,b);this.patterns[u]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[u].position},c.prototype.bind=function(u){var d=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)},c.prototype._updatePatternAtlas=function(){var u=[];for(var d in this.patterns)u.push(this.patterns[d].bin);var b=o.potpack(u),w=b.w,E=b.h,k=this.atlasImage;for(var F in k.resize({width:w||1,height:E||1}),this.patterns){var j=this.patterns[F].bin,et=j.x+1,it=j.y+1,ot=this.images[F].data,gt=ot.width,ft=ot.height;o.RGBAImage.copy(ot,k,{x:0,y:0},{x:et,y:it},{width:gt,height:ft}),o.RGBAImage.copy(ot,k,{x:0,y:ft-1},{x:et,y:it-1},{width:gt,height:1}),o.RGBAImage.copy(ot,k,{x:0,y:0},{x:et,y:it+ft},{width:gt,height:1}),o.RGBAImage.copy(ot,k,{x:gt-1,y:0},{x:et-1,y:it},{width:1,height:ft}),o.RGBAImage.copy(ot,k,{x:0,y:0},{x:et+gt,y:it},{width:1,height:ft})}this.dirty=!0},c.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},c.prototype.dispatchRenderCallbacks=function(u){for(var d=0,b=u;d<b.length;d+=1){var w=b[d];if(!this.callbackDispatchedThisFrame[w]){this.callbackDispatchedThisFrame[w]=!0;var E=this.images[w];lt(E)&&this.updateImage(w,E)}}},c}(o.Evented),$=Ct,yt=Ct,Rt=1e20;function Ct(l,c,u,d,b,w){this.fontSize=l||24,this.buffer=c===void 0?3:c,this.cutoff=d||.25,this.fontFamily=b||"sans-serif",this.fontWeight=w||"normal",this.radius=u||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Et(l,c,u,d,b,w,E){for(var k=0;k<c;k++){for(var F=0;F<u;F++)d[F]=l[F*c+k];for(Gt(d,b,w,E,u),F=0;F<u;F++)l[F*c+k]=b[F]}for(F=0;F<u;F++){for(k=0;k<c;k++)d[k]=l[F*c+k];for(Gt(d,b,w,E,c),k=0;k<c;k++)l[F*c+k]=Math.sqrt(b[k])}}function Gt(l,c,u,d,b){u[0]=0,d[0]=-Rt,d[1]=+Rt;for(var w=1,E=0;w<b;w++){for(var k=(l[w]+w*w-(l[u[E]]+u[E]*u[E]))/(2*w-2*u[E]);k<=d[E];)E--,k=(l[w]+w*w-(l[u[E]]+u[E]*u[E]))/(2*w-2*u[E]);u[++E]=w,d[E]=k,d[E+1]=+Rt}for(w=0,E=0;w<b;w++){for(;d[E+1]<w;)E++;c[w]=(w-u[E])*(w-u[E])+l[u[E]]}}Ct.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var c=this.ctx.getImageData(0,0,this.size,this.size),u=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var b=c.data[4*d+3]/255;this.gridOuter[d]=b===1?0:b===0?Rt:Math.pow(Math.max(0,.5-b),2),this.gridInner[d]=b===1?Rt:b===0?0:Math.pow(Math.max(0,b-.5),2)}for(Et(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),Et(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++)u[d]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[d]-this.gridInner[d])/this.radius+this.cutoff))));return u},$.default=yt;var kt=function(l,c){this.requestManager=l,this.localIdeographFontFamily=c,this.entries={}};kt.prototype.setURL=function(l){this.url=l},kt.prototype.getGlyphs=function(l,c){var u=this,d=[];for(var b in l)for(var w=0,E=l[b];w<E.length;w+=1)d.push({stack:b,id:E[w]});o.asyncAll(d,function(k,F){var j=k.stack,et=k.id,it=u.entries[j];it||(it=u.entries[j]={glyphs:{},requests:{},ranges:{}});var ot=it.glyphs[et];if(ot===void 0){if(ot=u._tinySDF(it,j,et))return it.glyphs[et]=ot,void F(null,{stack:j,id:et,glyph:ot});var gt=Math.floor(et/256);if(256*gt>65535)F(new Error("glyphs > 65535 not supported"));else if(it.ranges[gt])F(null,{stack:j,id:et,glyph:ot});else{var ft=it.requests[gt];ft||(ft=it.requests[gt]=[],kt.loadGlyphRange(j,gt,u.url,u.requestManager,function(bt,ht){if(ht){for(var At in ht)u._doesCharSupportLocalGlyph(+At)||(it.glyphs[+At]=ht[+At]);it.ranges[gt]=!0}for(var Lt=0,qt=ft;Lt<qt.length;Lt+=1)(0,qt[Lt])(bt,ht);delete it.requests[gt]})),ft.push(function(bt,ht){bt?F(bt):ht&&F(null,{stack:j,id:et,glyph:ht[et]||null})})}}else F(null,{stack:j,id:et,glyph:ot})},function(k,F){if(k)c(k);else if(F){for(var j={},et=0,it=F;et<it.length;et+=1){var ot=it[et],gt=ot.stack,ft=ot.id,bt=ot.glyph;(j[gt]||(j[gt]={}))[ft]=bt&&{id:bt.id,bitmap:bt.bitmap.clone(),metrics:bt.metrics}}c(null,j)}})},kt.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},kt.prototype._tinySDF=function(l,c,u){var d=this.localIdeographFontFamily;if(d&&this._doesCharSupportLocalGlyph(u)){var b=l.tinySDF;if(!b){var w="400";/bold/i.test(c)?w="900":/medium/i.test(c)?w="500":/light/i.test(c)&&(w="200"),b=l.tinySDF=new kt.TinySDF(24,3,8,.25,d,w)}return{id:u,bitmap:new o.AlphaImage({width:30,height:30},b.draw(String.fromCharCode(u))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},kt.loadGlyphRange=function(l,c,u,d,b){var w=256*c,E=w+255,k=d.transformRequest(d.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",w+"-"+E),o.ResourceType.Glyphs);o.getArrayBuffer(k,function(F,j){if(F)b(F);else if(j){for(var et={},it=0,ot=o.parseGlyphPBF(j);it<ot.length;it+=1){var gt=ot[it];et[gt.id]=gt}b(null,et)}})},kt.TinySDF=$;var Qt=function(){this.specification=o.styleSpec.light.position};Qt.prototype.possiblyEvaluate=function(l,c){return o.sphericalToCartesian(l.expression.evaluate(c))},Qt.prototype.interpolate=function(l,c,u){return{x:o.number(l.x,c.x,u),y:o.number(l.y,c.y,u),z:o.number(l.z,c.z,u)}};var Ut=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new Qt,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Nt=function(l){function c(u){l.call(this),this._transitionable=new o.Transitionable(Ut),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getLight=function(){return this._transitionable.serialize()},c.prototype.setLight=function(u,d){if(d===void 0&&(d={}),!this._validate(o.validateLight,u,d))for(var b in u){var w=u[b];o.endsWith(b,"-transition")?this._transitionable.setTransition(b.slice(0,-11),w):this._transitionable.setValue(b,w)}},c.prototype.updateTransitions=function(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)},c.prototype.hasTransition=function(){return this._transitioning.hasTransition()},c.prototype.recalculate=function(u){this.properties=this._transitioning.possiblyEvaluate(u)},c.prototype._validate=function(u,d,b){return(!b||b.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},c}(o.Evented),Bt=function(l,c){this.width=l,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Bt.prototype.getDash=function(l,c){var u=l.join(",")+String(c);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(l,c)),this.dashEntry[u]},Bt.prototype.getDashRanges=function(l,c,u){var d=[],b=l.length%2==1?-l[l.length-1]*u:0,w=l[0]*u,E=!0;d.push({left:b,right:w,isDash:E,zeroLength:l[0]===0});for(var k=l[0],F=1;F<l.length;F++){var j=l[F];d.push({left:b=k*u,right:w=(k+=j)*u,isDash:E=!E,zeroLength:j===0})}return d},Bt.prototype.addRoundDash=function(l,c,u){for(var d=c/2,b=-u;b<=u;b++)for(var w=this.width*(this.nextRow+u+b),E=0,k=l[E],F=0;F<this.width;F++){F/k.right>1&&(k=l[++E]);var j=Math.abs(F-k.left),et=Math.abs(F-k.right),it=Math.min(j,et),ot=void 0,gt=b/u*(d+1);if(k.isDash){var ft=d-Math.abs(gt);ot=Math.sqrt(it*it+ft*ft)}else ot=d-Math.sqrt(it*it+gt*gt);this.data[w+F]=Math.max(0,Math.min(255,ot+128))}},Bt.prototype.addRegularDash=function(l){for(var c=l.length-1;c>=0;--c){var u=l[c],d=l[c+1];u.zeroLength?l.splice(c,1):d&&d.isDash===u.isDash&&(d.left=u.left,l.splice(c,1))}var b=l[0],w=l[l.length-1];b.isDash===w.isDash&&(b.left=w.left-this.width,w.right=b.right+this.width);for(var E=this.width*this.nextRow,k=0,F=l[k],j=0;j<this.width;j++){j/F.right>1&&(F=l[++k]);var et=Math.abs(j-F.left),it=Math.abs(j-F.right),ot=Math.min(et,it);this.data[E+j]=Math.max(0,Math.min(255,(F.isDash?ot:-ot)+128))}},Bt.prototype.addDash=function(l,c){var u=c?7:0,d=2*u+1;if(this.nextRow+d>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var b=0,w=0;w<l.length;w++)b+=l[w];if(b!==0){var E=this.width/b,k=this.getDashRanges(l,this.width,E);c?this.addRoundDash(k,E,u):this.addRegularDash(k)}var F={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:b};return this.nextRow+=d,this.dirty=!0,F},Bt.prototype.bind=function(l){var c=l.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))};var de=function l(c,u){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var d=this.workerPool.acquire(this.id),b=0;b<d.length;b++){var w=new l.Actor(d[b],u,this.id);w.name="Worker "+b,this.actors.push(w)}};function bn(l,c,u){var d=function(b,w){if(b)return u(b);if(w){var E=o.pick(o.extend(w,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);w.vector_layers&&(E.vectorLayers=w.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(k){return k.id})),E.tiles=c.canonicalizeTileset(E,l.url),u(null,E)}};return l.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(l.url),o.ResourceType.Source),d):o.browser.frame(function(){return d(null,l)})}de.prototype.broadcast=function(l,c,u){o.asyncAll(this.actors,function(d,b){d.send(l,c,b)},u=u||function(){})},de.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},de.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},de.Actor=o.Actor;var _e=function(l,c,u){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=c||0,this.maxzoom=u||24};_e.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},_e.prototype.contains=function(l){var c=Math.pow(2,l.z),u=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*c),d=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*c),b=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*c),w=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*c);return l.x>=u&&l.x<b&&l.y>=d&&l.y<w};var He=function(l){function c(u,d,b,w){if(l.call(this),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(d,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=bn(this._options,this.map._requestManager,function(d,b){u._tileJSONRequest=null,u._loaded=!0,d?u.fire(new o.ErrorEvent(d)):b&&(o.extend(u,b),b.bounds&&(u.tileBounds=new _e(b.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(b.tiles,u.map._requestManager._customAccessToken),o.postMapLoadEvent(b.tiles,u.map._getMapId(),u.map._requestManager._skuToken,u.map._requestManager._customAccessToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},c.prototype.onAdd=function(u){this.map=u,this.load()},c.prototype.setSourceProperty=function(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},c.prototype.setTiles=function(u){var d=this;return this.setSourceProperty(function(){d._options.tiles=u}),this},c.prototype.setUrl=function(u){var d=this;return this.setSourceProperty(function(){d.url=u,d._options.url=u}),this},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return o.extend({},this._options)},c.prototype.loadTile=function(u,d){var b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),w={request:this.map._requestManager.transformRequest(b,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(k,F){return delete u.request,u.aborted?d(null):k&&k.status!==404?d(k):(F&&F.resourceTiming&&(u.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&u.setExpiryData(F),u.loadVectorData(F,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=d:u.request=u.actor.send("reloadTile",w,E.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",w,E.bind(this)))},c.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)},c.prototype.unloadTile=function(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)},c.prototype.hasTransition=function(){return!1},c}(o.Evented),Ue=function(l){function c(u,d,b,w){l.call(this),this.id=u,this.dispatcher=b,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},d),o.extend(this,o.pick(d,["url","scheme","tileSize"]))}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=bn(this._options,this.map._requestManager,function(d,b){u._tileJSONRequest=null,u._loaded=!0,d?u.fire(new o.ErrorEvent(d)):b&&(o.extend(u,b),b.bounds&&(u.tileBounds=new _e(b.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(b.tiles),o.postMapLoadEvent(b.tiles,u.map._getMapId(),u.map._requestManager._skuToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},c.prototype.loaded=function(){return this._loaded},c.prototype.onAdd=function(u){this.map=u,this.load()},c.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},c.prototype.serialize=function(){return o.extend({},this._options)},c.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},c.prototype.loadTile=function(u,d){var b=this,w=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(w,o.ResourceType.Tile),function(E,k){if(delete u.request,u.aborted)u.state="unloaded",d(null);else if(E)u.state="errored",d(E);else if(k){b.map._refreshExpiredTiles&&u.setExpiryData(k),delete k.cacheControl,delete k.expires;var F=b.map.painter.context,j=F.gl;u.texture=b.map.painter.getTileTexture(k.width),u.texture?u.texture.update(k,{useMipmap:!0}):(u.texture=new o.Texture(F,k,j.RGBA,{useMipmap:!0}),u.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST),F.extTextureFilterAnisotropic&&j.texParameterf(j.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(b.dispatcher),d(null)}})},c.prototype.abortTile=function(u,d){u.request&&(u.request.cancel(),delete u.request),d()},c.prototype.unloadTile=function(u,d){u.texture&&this.map.painter.saveTileTexture(u.texture),d()},c.prototype.hasTransition=function(){return!1},c}(o.Evented),Pi=function(l){function c(u,d,b,w){l.call(this,u,d,b,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},c.prototype.loadTile=function(u,d){var b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function w(E,k){E&&(u.state="errored",d(E)),k&&(u.dem=k,u.needsHillshadePrepare=!0,u.state="loaded",d(null))}u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(function(E,k){if(delete u.request,u.aborted)u.state="unloaded",d(null);else if(E)u.state="errored",d(E);else if(k){this.map._refreshExpiredTiles&&u.setExpiryData(k),delete k.cacheControl,delete k.expires;var F=o.window.ImageBitmap&&k instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?k:o.browser.getImageData(k,1),j={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:F,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",j,w.bind(this)))}}).bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)},c.prototype._getNeighboringTiles=function(u){var d=u.canonical,b=Math.pow(2,d.z),w=(d.x-1+b)%b,E=d.x===0?u.wrap-1:u.wrap,k=(d.x+1+b)%b,F=d.x+1===b?u.wrap+1:u.wrap,j={};return j[new o.OverscaledTileID(u.overscaledZ,E,d.z,w,d.y).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,F,d.z,k,d.y).key]={backfilled:!1},d.y>0&&(j[new o.OverscaledTileID(u.overscaledZ,E,d.z,w,d.y-1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,u.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,F,d.z,k,d.y-1).key]={backfilled:!1}),d.y+1<b&&(j[new o.OverscaledTileID(u.overscaledZ,E,d.z,w,d.y+1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,u.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},j[new o.OverscaledTileID(u.overscaledZ,F,d.z,k,d.y+1).key]={backfilled:!1}),j},c.prototype.unloadTile=function(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})},c}(Ue),ri=function(l){function c(u,d,b,w){l.call(this),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=b.getActor(),this.setEventedParent(w),this._data=d.data,this._options=o.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*E,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.EXTENT,radius:(d.clusterRadius||50)*E,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.load=function(){var u=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)u.fire(new o.ErrorEvent(d));else{var b={dataType:"source",sourceDataType:"metadata"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(b.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new o.Event("data",b))}})},c.prototype.onAdd=function(u){this.map=u,this.load()},c.prototype.setData=function(u){var d=this;return this._data=u,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(b){if(b)d.fire(new o.ErrorEvent(b));else{var w={dataType:"source",sourceDataType:"content"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(w.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new o.Event("data",w))}}),this},c.prototype.getClusterExpansionZoom=function(u,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},d),this},c.prototype.getClusterChildren=function(u,d){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},d),this},c.prototype.getClusterLeaves=function(u,d,b,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:d,offset:b},w),this},c.prototype._updateWorkerData=function(u){var d=this;this._loaded=!1;var b=o.extend({},this.workerOptions),w=this._data;typeof w=="string"?(b.request=this.map._requestManager.transformRequest(o.browser.resolveURL(w),o.ResourceType.Source),b.request.collectResourceTiming=this._collectResourceTiming):b.data=JSON.stringify(w),this.actor.send(this.type+".loadData",b,function(E,k){d._removed||k&&k.abandoned||(d._loaded=!0,k&&k.resourceTiming&&k.resourceTiming[d.id]&&(d._resourceTiming=k.resourceTiming[d.id].slice(0)),d.actor.send(d.type+".coalesce",{source:b.source},null),u(E))})},c.prototype.loaded=function(){return this._loaded},c.prototype.loadTile=function(u,d){var b=this,w=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(w,{type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,k){return delete u.request,u.unloadVectorData(),u.aborted?d(null):E?d(E):(u.loadVectorData(k,b.map.painter,w==="reloadTile"),d(null))})},c.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0},c.prototype.unloadTile=function(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})},c.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},c.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},c.prototype.hasTransition=function(){return!1},c}(o.Evented),Fn=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),mn=function(l){function c(u,d,b,w){l.call(this),this.id=u,this.dispatcher=b,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.load=function(u,d){var b=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(w,E){b._loaded=!0,w?b.fire(new o.ErrorEvent(w)):E&&(b.image=E,u&&(b.coordinates=u),d&&d(),b._finishLoading())})},c.prototype.loaded=function(){return this._loaded},c.prototype.updateImage=function(u){var d=this;return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,function(){d.texture=null}),this):this},c.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},c.prototype.onAdd=function(u){this.map=u,this.load()},c.prototype.setCoordinates=function(u){var d=this;this.coordinates=u;var b=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var k=1/0,F=1/0,j=-1/0,et=-1/0,it=0,ot=E;it<ot.length;it+=1){var gt=ot[it];k=Math.min(k,gt.x),F=Math.min(F,gt.y),j=Math.max(j,gt.x),et=Math.max(et,gt.y)}var ft=Math.max(j-k,et-F),bt=Math.max(0,Math.floor(-Math.log(ft)/Math.LN2)),ht=Math.pow(2,bt);return new o.CanonicalTileID(bt,Math.floor((k+j)/2*ht),Math.floor((F+et)/2*ht))}(b),this.minzoom=this.maxzoom=this.tileID.z;var w=b.map(function(E){return d.tileID.getTilePoint(E)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(w[0].x,w[0].y,0,0),this._boundsArray.emplaceBack(w[1].x,w[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(w[3].x,w[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(w[2].x,w[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},c.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var u=this.map.painter.context,d=u.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Fn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(u,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},c.prototype.loadTile=function(u,d){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},d(null)):(u.state="errored",d(null))},c.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return!1},c}(o.Evented),Kn=function(l){function c(u,d,b,w){l.call(this,u,d,b,w),this.roundZoom=!0,this.type="video",this.options=d}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.load=function(){var u=this;this._loaded=!1;var d=this.options;this.urls=[];for(var b=0,w=d.urls;b<w.length;b+=1)this.urls.push(this.map._requestManager.transformRequest(w[b],o.ResourceType.Source).url);o.getVideo(this.urls,function(E,k){u._loaded=!0,E?u.fire(new o.ErrorEvent(E)):k&&(u.video=k,u.video.loop=!0,u.video.setAttribute("playsinline",""),u.video.addEventListener("playing",function(){u.map.triggerRepaint()}),u.map&&u.video.play(),u._finishLoading())})},c.prototype.pause=function(){this.video&&this.video.pause()},c.prototype.play=function(){this.video&&this.video.play()},c.prototype.seek=function(u){if(this.video){var d=this.video.seekable;u<d.start(0)||u>d.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+d.start(0)+" and "+d.end(0)+"-second mark."))):this.video.currentTime=u}},c.prototype.getVideo=function(){return this.video},c.prototype.onAdd=function(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},c.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var u=this.map.painter.context,d=u.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Fn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},c.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this.video&&!this.video.paused},c}(mn),Li=function(l){function c(u,d,b,w){l.call(this,u,d,b,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(k){return typeof k!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},c.prototype.getCanvas=function(){return this.canvas},c.prototype.onAdd=function(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()},c.prototype.onRemove=function(){this.pause()},c.prototype.prepare=function(){var u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var d=this.map.painter.context,b=d.gl;for(var w in this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Fn.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(d,this.canvas,b.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},c.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},c.prototype.hasTransition=function(){return this._playing},c.prototype._hasInvalidDimensions=function(){for(var u=0,d=[this.canvas.width,this.canvas.height];u<d.length;u+=1){var b=d[u];if(isNaN(b)||b<=0)return!0}return!1},c}(mn),ui={vector:He,raster:Ue,"raster-dem":Pi,geojson:ri,video:Kn,image:mn,canvas:Li};function bi(l,c){var u=o.identity([]);return o.translate(u,u,[1,1,0]),o.scale(u,u,[.5*l.width,.5*l.height,1]),o.multiply(u,u,l.calculatePosMatrix(c.toUnwrapped()))}function le(l,c,u,d,b,w){var E=function(bt,ht,At){if(bt)for(var Lt=0,qt=bt;Lt<qt.length;Lt+=1){var ne=ht[qt[Lt]];if(ne&&ne.source===At&&ne.type==="fill-extrusion")return!0}else for(var te in ht){var re=ht[te];if(re.source===At&&re.type==="fill-extrusion")return!0}return!1}(b&&b.layers,c,l.id),k=w.maxPitchScaleFactor(),F=l.tilesIn(d,k,E);F.sort(Ke);for(var j=[],et=0,it=F;et<it.length;et+=1){var ot=it[et];j.push({wrappedTileID:ot.tileID.wrapped().key,queryResults:ot.tile.queryRenderedFeatures(c,u,l._state,ot.queryGeometry,ot.cameraQueryGeometry,ot.scale,b,w,k,bi(l.transform,ot.tileID))})}var gt=function(bt){for(var ht={},At={},Lt=0,qt=bt;Lt<qt.length;Lt+=1){var ne=qt[Lt],te=ne.queryResults,re=ne.wrappedTileID,ve=At[re]=At[re]||{};for(var Ce in te)for(var Le=te[Ce],qe=ve[Ce]=ve[Ce]||{},cn=ht[Ce]=ht[Ce]||[],Sn=0,Mn=Le;Sn<Mn.length;Sn+=1){var Oi=Mn[Sn];qe[Oi.featureIndex]||(qe[Oi.featureIndex]=!0,cn.push(Oi))}}return ht}(j);for(var ft in gt)gt[ft].forEach(function(bt){var ht=bt.feature,At=l.getFeatureState(ht.layer["source-layer"],ht.id);ht.source=ht.layer.source,ht.layer["source-layer"]&&(ht.sourceLayer=ht.layer["source-layer"]),ht.state=At});return gt}function Ke(l,c){var u=l.tileID,d=c.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}var me=function(l,c){this.max=l,this.onRemove=c,this.reset()};me.prototype.reset=function(){for(var l in this.data)for(var c=0,u=this.data[l];c<u.length;c+=1){var d=u[c];d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value)}return this.data={},this.order=[],this},me.prototype.add=function(l,c,u){var d=this,b=l.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);var w={value:c,timeout:void 0};if(u!==void 0&&(w.timeout=setTimeout(function(){d.remove(l,w)},u)),this.data[b].push(w),this.order.push(b),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},me.prototype.has=function(l){return l.wrapped().key in this.data},me.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},me.prototype._getAndRemoveByKey=function(l){var c=this.data[l].shift();return c.timeout&&clearTimeout(c.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),c.value},me.prototype.getByKey=function(l){var c=this.data[l];return c?c[0].value:null},me.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},me.prototype.remove=function(l,c){if(!this.has(l))return this;var u=l.wrapped().key,d=c===void 0?0:this.data[u].indexOf(c),b=this.data[u][d];return this.data[u].splice(d,1),b.timeout&&clearTimeout(b.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(b.value),this.order.splice(this.order.indexOf(u),1),this},me.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this},me.prototype.filter=function(l){var c=[];for(var u in this.data)for(var d=0,b=this.data[u];d<b.length;d+=1){var w=b[d];l(w.value)||c.push(w)}for(var E=0,k=c;E<k.length;E+=1){var F=k[E];this.remove(F.value.tileID,F)}};var Te=function(l,c,u){this.context=l;var d=l.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer};Te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Te.prototype.updateData=function(l){var c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},Te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Ai={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ki=function(l,c,u,d){this.length=c.length,this.attributes=u,this.itemSize=c.bytesPerElement,this.dynamicDraw=d,this.context=l;var b=l.gl;this.buffer=b.createBuffer(),l.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer};ki.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ki.prototype.updateData=function(l){var c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,l.arrayBuffer)},ki.prototype.enableAttributes=function(l,c){for(var u=0;u<this.attributes.length;u++){var d=c.attributes[this.attributes[u].name];d!==void 0&&l.enableVertexAttribArray(d)}},ki.prototype.setVertexAttribPointers=function(l,c,u){for(var d=0;d<this.attributes.length;d++){var b=this.attributes[d],w=c.attributes[b.name];w!==void 0&&l.vertexAttribPointer(w,b.components,l[Ai[b.type]],!1,this.itemSize,b.offset+this.itemSize*(u||0))}},ki.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ut=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ut.prototype.get=function(){return this.current},ut.prototype.set=function(l){},ut.prototype.getDefault=function(){return this.default},ut.prototype.setDefault=function(){this.set(this.default)};var xt=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return o.Color.transparent},c.prototype.set=function(u){var d=this.current;(u.r!==d.r||u.g!==d.g||u.b!==d.b||u.a!==d.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},c}(ut),$t=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return 1},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)},c}(ut),ae=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return 0},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)},c}(ut),pe=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return[!0,!0,!0,!0]},c.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||u[3]!==d[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},c}(ut),Oe=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!0},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)},c}(ut),ln=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return 255},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)},c}(ut),we=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},c.prototype.set=function(u){var d=this.current;(u.func!==d.func||u.ref!==d.ref||u.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)},c}(ut),De=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){var u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]},c.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)},c}(ut),Se=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=u,this.dirty=!1}},c}(ut),tn=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return[0,1]},c.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)},c}(ut),wn=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=u,this.dirty=!1}},c}(ut),Cn=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return this.gl.LESS},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)},c}(ut),Pn=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.BLEND):d.disable(d.BLEND),this.current=u,this.dirty=!1}},c}(ut),Qn=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){var u=this.gl;return[u.ONE,u.ZERO]},c.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)},c}(ut),Di=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return o.Color.transparent},c.prototype.set=function(u){var d=this.current;(u.r!==d.r||u.g!==d.g||u.b!==d.b||u.a!==d.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},c}(ut),wi=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return this.gl.FUNC_ADD},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)},c}(ut),rr=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=u,this.dirty=!1}},c}(ut),Gr=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return this.gl.BACK},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)},c}(ut),qo=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return this.gl.CCW},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)},c}(ut),pa=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)},c}(ut),Pa=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return this.gl.TEXTURE0},c.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)},c}(ut),Ga=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){var u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]},c.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||u[3]!==d[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},c}(ut),Ar=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,u),this.current=u,this.dirty=!1}},c}(ut),Mo=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,u),this.current=u,this.dirty=!1}},c}(ut),Hs=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindTexture(d.TEXTURE_2D,u),this.current=u,this.dirty=!1}},c}(ut),Gs=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}},c}(ut),fl=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){var d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1},c}(ut),La=function(l){function c(u){l.call(this,u),this.vao=u.extVertexArrayObject}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c.prototype.set=function(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)},c}(ut),so=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return 4},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}},c}(ut),qs=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}},c}(ut),vu=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return!1},c.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}},c}(ut),qr=function(l){function c(u,d){l.call(this,u),this.context=u,this.parent=d}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getDefault=function(){return null},c}(ut),U=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.setDirty=function(){this.dirty=!0},c.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}},c}(qr),q=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,u),this.current=u,this.dirty=!1}},c}(qr),Q=function(l,c,u,d){this.context=l,this.width=c,this.height=u;var b=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new U(l,b),d&&(this.depthAttachment=new q(l,b))};Q.prototype.destroy=function(){var l=this.context.gl,c=this.colorAttachment.get();if(c&&l.deleteTexture(c),this.depthAttachment){var u=this.depthAttachment.get();u&&l.deleteRenderbuffer(u)}l.deleteFramebuffer(this.framebuffer)};var at=function(l,c,u){this.func=l,this.mask=c,this.range=u};at.ReadOnly=!1,at.ReadWrite=!0,at.disabled=new at(519,at.ReadOnly,[0,1]);var dt=function(l,c,u,d,b,w){this.test=l,this.ref=c,this.mask=u,this.fail=d,this.depthFail=b,this.pass=w};dt.disabled=new dt({func:519,mask:0},0,0,7680,7680,7680);var St=function(l,c,u){this.blendFunction=l,this.blendColor=c,this.mask=u};St.disabled=new St(St.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),St.unblended=new St(St.Replace,o.Color.transparent,[!0,!0,!0,!0]),St.alphaBlended=new St([1,771],o.Color.transparent,[!0,!0,!0,!0]);var Dt=function(l,c,u){this.enable=l,this.mode=c,this.frontFace=u};Dt.disabled=new Dt(!1,1029,2305),Dt.backCCW=new Dt(!0,1029,2305);var tt=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new xt(this),this.clearDepth=new $t(this),this.clearStencil=new ae(this),this.colorMask=new pe(this),this.depthMask=new Oe(this),this.stencilMask=new ln(this),this.stencilFunc=new we(this),this.stencilOp=new De(this),this.stencilTest=new Se(this),this.depthRange=new tn(this),this.depthTest=new wn(this),this.depthFunc=new Cn(this),this.blend=new Pn(this),this.blendFunc=new Qn(this),this.blendColor=new Di(this),this.blendEquation=new wi(this),this.cullFace=new rr(this),this.cullFaceSide=new Gr(this),this.frontFace=new qo(this),this.program=new pa(this),this.activeTexture=new Pa(this),this.viewport=new Ga(this),this.bindFramebuffer=new Ar(this),this.bindRenderbuffer=new Mo(this),this.bindTexture=new Hs(this),this.bindVertexBuffer=new Gs(this),this.bindElementBuffer=new fl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new La(this),this.pixelStoreUnpack=new so(this),this.pixelStoreUnpackPremultiplyAlpha=new qs(this),this.pixelStoreUnpackFlipY=new vu(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};tt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},tt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},tt.prototype.createIndexBuffer=function(l,c){return new Te(this,l,c)},tt.prototype.createVertexBuffer=function(l,c,u){return new ki(this,l,c,u)},tt.prototype.createRenderbuffer=function(l,c,u){var d=this.gl,b=d.createRenderbuffer();return this.bindRenderbuffer.set(b),d.renderbufferStorage(d.RENDERBUFFER,l,c,u),this.bindRenderbuffer.set(null),b},tt.prototype.createFramebuffer=function(l,c,u){return new Q(this,l,c,u)},tt.prototype.clear=function(l){var c=l.color,u=l.depth,d=this.gl,b=0;c&&(b|=d.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(b|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d.clear(b)},tt.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},tt.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},tt.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},tt.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,St.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},tt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var vt=function(l){function c(u,d,b){var w=this;l.call(this),this.id=u,this.dispatcher=b,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(w._sourceLoaded=!0),w._sourceLoaded&&!w._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(w.reload(),w.transform&&w.update(w.transform))}),this.on("error",function(){w._sourceErrored=!0}),this._source=function(E,k,F,j){var et=new ui[k.type](E,k,F,j);if(et.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+et.id);return o.bindAll(["load","abort","unload","serialize","prepare"],et),et}(u,d,b,this),this._tiles={},this._cache=new me(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.onAdd=function(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)},c.prototype.onRemove=function(u){this._source&&this._source.onRemove&&this._source.onRemove(u)},c.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var u in this._tiles){var d=this._tiles[u];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0},c.prototype.getSource=function(){return this._source},c.prototype.pause=function(){this._paused=!0},c.prototype.resume=function(){if(this._paused){var u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform)}},c.prototype._loadTile=function(u,d){return this._source.loadTile(u,d)},c.prototype._unloadTile=function(u){if(this._source.unloadTile)return this._source.unloadTile(u,function(){})},c.prototype._abortTile=function(u){if(this._source.abortTile)return this._source.abortTile(u,function(){})},c.prototype.serialize=function(){return this._source.serialize()},c.prototype.prepare=function(u){for(var d in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var b=this._tiles[d];b.upload(u),b.prepare(this.map.style.imageManager)}},c.prototype.getIds=function(){return o.values(this._tiles).map(function(u){return u.tileID}).sort(Zt).map(function(u){return u.key})},c.prototype.getRenderableIds=function(u){var d=this,b=[];for(var w in this._tiles)this._isIdRenderable(w,u)&&b.push(this._tiles[w]);return u?b.sort(function(E,k){var F=E.tileID,j=k.tileID,et=new o.Point(F.canonical.x,F.canonical.y)._rotate(d.transform.angle),it=new o.Point(j.canonical.x,j.canonical.y)._rotate(d.transform.angle);return F.overscaledZ-j.overscaledZ||it.y-et.y||it.x-et.x}).map(function(E){return E.tileID.key}):b.map(function(E){return E.tileID}).sort(Zt).map(function(E){return E.key})},c.prototype.hasRenderableParent=function(u){var d=this.findLoadedParent(u,0);return!!d&&this._isIdRenderable(d.tileID.key)},c.prototype._isIdRenderable=function(u,d){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(d||!this._tiles[u].holdingForFade())},c.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var u in this._cache.reset(),this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")},c.prototype._reloadTile=function(u,d){var b=this._tiles[u];b&&(b.state!=="loading"&&(b.state=d),this._loadTile(b,this._tileLoaded.bind(this,b,u,d)))},c.prototype._tileLoaded=function(u,d,b,w){if(w)return u.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:u})):this.update(this.transform));u.timeAdded=o.browser.now(),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(d,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))},c.prototype._backfillDEM=function(u){for(var d=this.getRenderableIds(),b=0;b<d.length;b++){var w=d[b];if(u.neighboringTiles&&u.neighboringTiles[w]){var E=this.getTileByID(w);k(u,E),k(E,u)}}function k(F,j){F.needsHillshadePrepare=!0;var et=j.tileID.canonical.x-F.tileID.canonical.x,it=j.tileID.canonical.y-F.tileID.canonical.y,ot=Math.pow(2,F.tileID.canonical.z),gt=j.tileID.key;et===0&&it===0||Math.abs(it)>1||(Math.abs(et)>1&&(Math.abs(et+ot)===1?et+=ot:Math.abs(et-ot)===1&&(et-=ot)),j.dem&&F.dem&&(F.dem.backfillBorder(j.dem,et,it),F.neighboringTiles&&F.neighboringTiles[gt]&&(F.neighboringTiles[gt].backfilled=!0)))}},c.prototype.getTile=function(u){return this.getTileByID(u.key)},c.prototype.getTileByID=function(u){return this._tiles[u]},c.prototype._retainLoadedChildren=function(u,d,b,w){for(var E in this._tiles){var k=this._tiles[E];if(!(w[E]||!k.hasData()||k.tileID.overscaledZ<=d||k.tileID.overscaledZ>b)){for(var F=k.tileID;k&&k.tileID.overscaledZ>d+1;){var j=k.tileID.scaledTo(k.tileID.overscaledZ-1);(k=this._tiles[j.key])&&k.hasData()&&(F=j)}for(var et=F;et.overscaledZ>d;)if(u[(et=et.scaledTo(et.overscaledZ-1)).key]){w[F.key]=F;break}}}},c.prototype.findLoadedParent=function(u,d){if(u.key in this._loadedParentTiles){var b=this._loadedParentTiles[u.key];return b&&b.tileID.overscaledZ>=d?b:null}for(var w=u.overscaledZ-1;w>=d;w--){var E=u.scaledTo(w),k=this._getLoadedTile(E);if(k)return k}},c.prototype._getLoadedTile=function(u){var d=this._tiles[u.key];return d&&d.hasData()?d:this._cache.getByKey(u.wrapped().key)},c.prototype.updateCacheSize=function(u){var d=Math.ceil(u.width/this._source.tileSize)+1,b=Math.ceil(u.height/this._source.tileSize)+1,w=Math.floor(d*b*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)},c.prototype.handleWrapJump=function(u){var d=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,d){var b={};for(var w in this._tiles){var E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),b[E.tileID.key]=E}for(var k in this._tiles=b,this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(var F in this._tiles)this._setTileReloadTimer(F,this._tiles[F])}},c.prototype.update=function(u){var d=this;if(this.transform=u,this._sourceLoaded&&!this._paused){var b;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?b=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ve){return new o.OverscaledTileID(ve.canonical.z,ve.wrap,ve.canonical.z,ve.canonical.x,ve.canonical.y)}):(b=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(b=b.filter(function(ve){return d._source.hasTile(ve)}))):b=[];var w=u.coveringZoomLevel(this._source),E=Math.max(w-c.maxOverzooming,this._source.minzoom),k=Math.max(w+c.maxUnderzooming,this._source.minzoom),F=this._updateRetainedTiles(b,w);if(ge(this._source.type)){for(var j={},et={},it=0,ot=Object.keys(F);it<ot.length;it+=1){var gt=ot[it],ft=F[gt],bt=this._tiles[gt];if(bt&&!(bt.fadeEndTime&&bt.fadeEndTime<=o.browser.now())){var ht=this.findLoadedParent(ft,E);ht&&(this._addTile(ht.tileID),j[ht.tileID.key]=ht.tileID),et[gt]=ft}}for(var At in this._retainLoadedChildren(et,w,k,F),j)F[At]||(this._coveredTiles[At]=!0,F[At]=j[At])}for(var Lt in F)this._tiles[Lt].clearFadeHold();for(var qt=0,ne=o.keysDifference(this._tiles,F);qt<ne.length;qt+=1){var te=ne[qt],re=this._tiles[te];re.hasSymbolBuckets&&!re.holdingForFade()?re.setHoldDuration(this.map._fadeDuration):re.hasSymbolBuckets&&!re.symbolFadeFinished()||this._removeTile(te)}this._updateLoadedParentTileCache()}},c.prototype.releaseSymbolFadeTiles=function(){for(var u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)},c.prototype._updateRetainedTiles=function(u,d){for(var b={},w={},E=Math.max(d-c.maxOverzooming,this._source.minzoom),k=Math.max(d+c.maxUnderzooming,this._source.minzoom),F={},j=0,et=u;j<et.length;j+=1){var it=et[j],ot=this._addTile(it);b[it.key]=it,ot.hasData()||d<this._source.maxzoom&&(F[it.key]=it)}this._retainLoadedChildren(F,d,k,b);for(var gt=0,ft=u;gt<ft.length;gt+=1){var bt=ft[gt],ht=this._tiles[bt.key];if(!ht.hasData()){if(d+1>this._source.maxzoom){var At=bt.children(this._source.maxzoom)[0],Lt=this.getTile(At);if(Lt&&Lt.hasData()){b[At.key]=At;continue}}else{var qt=bt.children(this._source.maxzoom);if(b[qt[0].key]&&b[qt[1].key]&&b[qt[2].key]&&b[qt[3].key])continue}for(var ne=ht.wasRequested(),te=bt.overscaledZ-1;te>=E;--te){var re=bt.scaledTo(te);if(w[re.key]||(w[re.key]=!0,!(ht=this.getTile(re))&&ne&&(ht=this._addTile(re)),ht&&(b[re.key]=re,ne=ht.wasRequested(),ht.hasData())))break}}}return b},c.prototype._updateLoadedParentTileCache=function(){for(var u in this._loadedParentTiles={},this._tiles){for(var d=[],b=void 0,w=this._tiles[u].tileID;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){b=this._loadedParentTiles[w.key];break}d.push(w.key);var E=w.scaledTo(w.overscaledZ-1);if(b=this._getLoadedTile(E))break;w=E}for(var k=0,F=d;k<F.length;k+=1)this._loadedParentTiles[F[k]]=b}},c.prototype._addTile=function(u){var d=this._tiles[u.key];if(d)return d;(d=this._cache.getAndRemove(u))&&(this._setTileReloadTimer(u.key,d),d.tileID=u,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,d)));var b=!!d;return b||(d=new o.Tile(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,u.key,d.state))),d?(d.uses++,this._tiles[u.key]=d,b||this._source.fire(new o.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null},c.prototype._setTileReloadTimer=function(u,d){var b=this;u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);var w=d.getExpiryTimeout();w&&(this._timers[u]=setTimeout(function(){b._reloadTile(u,"expired"),delete b._timers[u]},w))},c.prototype._removeTile=function(u){var d=this._tiles[u];d&&(d.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))},c.prototype.clearTiles=function(){for(var u in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(u);this._cache.reset()},c.prototype.tilesIn=function(u,d,b){var w=this,E=[],k=this.transform;if(!k)return E;for(var F=b?k.getCameraQueryGeometry(u):u,j=u.map(function(te){return k.pointCoordinate(te)}),et=F.map(function(te){return k.pointCoordinate(te)}),it=this.getIds(),ot=1/0,gt=1/0,ft=-1/0,bt=-1/0,ht=0,At=et;ht<At.length;ht+=1){var Lt=At[ht];ot=Math.min(ot,Lt.x),gt=Math.min(gt,Lt.y),ft=Math.max(ft,Lt.x),bt=Math.max(bt,Lt.y)}for(var qt=function(te){var re=w._tiles[it[te]];if(!re.holdingForFade()){var ve=re.tileID,Ce=Math.pow(2,k.zoom-re.tileID.overscaledZ),Le=d*re.queryPadding*o.EXTENT/re.tileSize/Ce,qe=[ve.getTilePoint(new o.MercatorCoordinate(ot,gt)),ve.getTilePoint(new o.MercatorCoordinate(ft,bt))];if(qe[0].x-Le<o.EXTENT&&qe[0].y-Le<o.EXTENT&&qe[1].x+Le>=0&&qe[1].y+Le>=0){var cn=j.map(function(Mn){return ve.getTilePoint(Mn)}),Sn=et.map(function(Mn){return ve.getTilePoint(Mn)});E.push({tile:re,tileID:ve,queryGeometry:cn,cameraQueryGeometry:Sn,scale:Ce})}}},ne=0;ne<it.length;ne++)qt(ne);return E},c.prototype.getVisibleCoordinates=function(u){for(var d=this,b=this.getRenderableIds(u).map(function(F){return d._tiles[F].tileID}),w=0,E=b;w<E.length;w+=1){var k=E[w];k.posMatrix=this.transform.calculatePosMatrix(k.toUnwrapped())}return b},c.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ge(this._source.type))for(var u in this._tiles){var d=this._tiles[u];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=o.browser.now())return!0}return!1},c.prototype.setFeatureState=function(u,d,b){this._state.updateState(u=u||"_geojsonTileLayer",d,b)},c.prototype.removeFeatureState=function(u,d,b){this._state.removeFeatureState(u=u||"_geojsonTileLayer",d,b)},c.prototype.getFeatureState=function(u,d){return this._state.getState(u=u||"_geojsonTileLayer",d)},c.prototype.setDependencies=function(u,d,b){var w=this._tiles[u];w&&w.setDependencies(d,b)},c.prototype.reloadTilesForDependencies=function(u,d){for(var b in this._tiles)this._tiles[b].hasDependency(u,d)&&this._reloadTile(b,"reloading");this._cache.filter(function(w){return!w.hasDependency(u,d)})},c}(o.Evented);function Zt(l,c){var u=Math.abs(2*l.wrap)-+(l.wrap<0),d=Math.abs(2*c.wrap)-+(c.wrap<0);return l.overscaledZ-c.overscaledZ||d-u||c.canonical.y-l.canonical.y||c.canonical.x-l.canonical.x}function ge(l){return l==="raster"||l==="image"||l==="video"}function be(){return new o.window.Worker(ks.workerUrl)}vt.maxOverzooming=10,vt.maxUnderzooming=3;var ie="mapboxgl_preloaded_worker_pool",ye=function(){this.active={}};ye.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<ye.workerCount;)this.workers.push(new be);return this.active[l]=!0,this.workers.slice()},ye.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(c){c.terminate()}),this.workers=null)},ye.prototype.isPreloaded=function(){return!!this.active[ie]},ye.prototype.numActive=function(){return Object.keys(this.active).length};var sn,on=Math.floor(o.browser.hardwareConcurrency/2);function oe(){return sn||(sn=new ye),sn}function ke(l,c){var u={};for(var d in l)d!=="ref"&&(u[d]=l[d]);return o.refProperties.forEach(function(b){b in c&&(u[b]=c[b])}),u}function Ne(l){l=l.slice();for(var c=Object.create(null),u=0;u<l.length;u++)c[l[u].id]=l[u];for(var d=0;d<l.length;d++)"ref"in l[d]&&(l[d]=ke(l[d],c[l[d].ref]));return l}ye.workerCount=Math.max(Math.min(on,6),1);var je={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ei(l,c,u){u.push({command:je.addSource,args:[l,c[l]]})}function Ze(l,c,u){c.push({command:je.removeSource,args:[l]}),u[l]=!0}function _i(l,c,u,d){Ze(l,u,d),ei(l,c,u)}function Vi(l,c,u){var d;for(d in l[u])if(l[u].hasOwnProperty(d)&&d!=="data"&&!o.deepEqual(l[u][d],c[u][d]))return!1;for(d in c[u])if(c[u].hasOwnProperty(d)&&d!=="data"&&!o.deepEqual(l[u][d],c[u][d]))return!1;return!0}function ci(l,c,u,d,b,w){var E;for(E in c=c||{},l=l||{})l.hasOwnProperty(E)&&(o.deepEqual(l[E],c[E])||u.push({command:w,args:[d,E,c[E],b]}));for(E in c)c.hasOwnProperty(E)&&!l.hasOwnProperty(E)&&(o.deepEqual(l[E],c[E])||u.push({command:w,args:[d,E,c[E],b]}))}function mi(l){return l.id}function gi(l,c){return l[c.id]=c,l}var Eo=function(l,c){this.reset(l,c)};Eo.prototype.reset=function(l,c){this.points=l||[],this._distances=[0];for(var u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Eo.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var c=1,u=this._distances[c],d=l*this.paddedLength+this.padding;u<d&&c<this._distances.length;)u=this._distances[++c];var b=c-1,w=this._distances[b],E=u-w,k=E>0?(d-w)/E:0;return this.points[b].mult(1-k).add(this.points[c].mult(k))};var Hn=function(l,c,u){var d=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(l/u),this.yCellCount=Math.ceil(c/u);for(var w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=c,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0};function Pr(l,c,u,d,b){var w=o.create();return c?(o.scale(w,w,[1/b,1/b,1]),u||o.rotateZ(w,w,d.angle)):o.multiply(w,d.labelPlaneMatrix,l),w}function Wi(l,c,u,d,b){if(c){var w=o.clone(l);return o.scale(w,w,[b,b,1]),u||o.rotateZ(w,w,-d.angle),w}return d.glCoordMatrix}function Wn(l,c){var u=[l.x,l.y,0,1];Wr(u,u,c);var d=u[3];return{point:new o.Point(u[0]/d,u[1]/d),signedDistanceFromCamera:d}}function ai(l,c){return .5+l/c*.5}function So(l,c){var u=l[0]/l[3],d=l[1]/l[3];return u>=-c[0]&&u<=c[0]&&d>=-c[1]&&d<=c[1]}function os(l,c,u,d,b,w,E,k){var F=d?l.textSizeData:l.iconSizeData,j=o.evaluateSizeForZoom(F,u.transform.zoom),et=[256/u.width*2+1,256/u.height*2+1],it=d?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;it.clear();for(var ot=l.lineVertexArray,gt=d?l.text.placedSymbolArray:l.icon.placedSymbolArray,ft=u.transform.width/u.transform.height,bt=!1,ht=0;ht<gt.length;ht++){var At=gt.get(ht);if(At.hidden||At.writingMode===o.WritingMode.vertical&&!bt)yo(At.numGlyphs,it);else{bt=!1;var Lt=[At.anchorX,At.anchorY,0,1];if(o.transformMat4(Lt,Lt,c),So(Lt,et)){var qt=ai(u.transform.cameraToCenterDistance,Lt[3]),ne=o.evaluateSizeForFeature(F,j,At),te=E?ne/qt:ne*qt,re=new o.Point(At.anchorX,At.anchorY),ve=Wn(re,b).point,Ce={},Le=Pc(At,te,!1,k,c,b,w,l.glyphOffsetArray,ot,it,ve,re,Ce,ft);bt=Le.useVertical,(Le.notEnoughRoom||bt||Le.needsFlipping&&Pc(At,te,!0,k,c,b,w,l.glyphOffsetArray,ot,it,ve,re,Ce,ft).notEnoughRoom)&&yo(At.numGlyphs,it)}else yo(At.numGlyphs,it)}}d?l.text.dynamicLayoutVertexBuffer.updateData(it):l.icon.dynamicLayoutVertexBuffer.updateData(it)}function Lr(l,c,u,d,b,w,E,k,F,j,et){var it=k.glyphStartIndex+k.numGlyphs,ot=k.lineStartIndex,gt=k.lineStartIndex+k.lineLength,ft=c.getoffsetX(k.glyphStartIndex),bt=c.getoffsetX(it-1),ht=kr(l*ft,u,d,b,w,E,k.segment,ot,gt,F,j,et);if(!ht)return null;var At=kr(l*bt,u,d,b,w,E,k.segment,ot,gt,F,j,et);return At?{first:ht,last:At}:null}function Ro(l,c,u,d){return l===o.WritingMode.horizontal&&Math.abs(u.y-c.y)>Math.abs(u.x-c.x)*d?{useVertical:!0}:(l===o.WritingMode.vertical?c.y<u.y:c.x>u.x)?{needsFlipping:!0}:null}function Pc(l,c,u,d,b,w,E,k,F,j,et,it,ot,gt){var ft,bt=c/24,ht=l.lineOffsetX*bt,At=l.lineOffsetY*bt;if(l.numGlyphs>1){var Lt=l.glyphStartIndex+l.numGlyphs,qt=l.lineStartIndex,ne=l.lineStartIndex+l.lineLength,te=Lr(bt,k,ht,At,u,et,it,l,F,w,ot);if(!te)return{notEnoughRoom:!0};var re=Wn(te.first.point,E).point,ve=Wn(te.last.point,E).point;if(d&&!u){var Ce=Ro(l.writingMode,re,ve,gt);if(Ce)return Ce}ft=[te.first];for(var Le=l.glyphStartIndex+1;Le<Lt-1;Le++)ft.push(kr(bt*k.getoffsetX(Le),ht,At,u,et,it,l.segment,qt,ne,F,w,ot));ft.push(te.last)}else{if(d&&!u){var qe=Wn(it,b).point,cn=l.lineStartIndex+l.segment+1,Sn=new o.Point(F.getx(cn),F.gety(cn)),Mn=Wn(Sn,b),Oi=Mn.signedDistanceFromCamera>0?Mn.point:yu(it,Sn,qe,1,b),Je=Ro(l.writingMode,qe,Oi,gt);if(Je)return Je}var kn=kr(bt*k.getoffsetX(l.glyphStartIndex),ht,At,u,et,it,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,F,w,ot);if(!kn)return{notEnoughRoom:!0};ft=[kn]}for(var Jn=0,Un=ft;Jn<Un.length;Jn+=1){var On=Un[Jn];o.addDynamicAttributes(j,On.point,On.angle)}return{}}function yu(l,c,u,d,b){var w=Wn(l.add(l.sub(c)._unit()),b).point,E=u.sub(w);return u.add(E._mult(d/E.mag()))}function kr(l,c,u,d,b,w,E,k,F,j,et,it){var ot=d?l-c:l+c,gt=ot>0?1:-1,ft=0;d&&(gt*=-1,ft=Math.PI),gt<0&&(ft+=Math.PI);for(var bt=gt>0?k+E:k+E+1,ht=b,At=b,Lt=0,qt=0,ne=Math.abs(ot),te=[];Lt+qt<=ne;){if((bt+=gt)<k||bt>=F)return null;if(At=ht,te.push(ht),(ht=it[bt])===void 0){var re=new o.Point(j.getx(bt),j.gety(bt)),ve=Wn(re,et);if(ve.signedDistanceFromCamera>0)ht=it[bt]=ve.point;else{var Ce=bt-gt;ht=yu(Lt===0?w:new o.Point(j.getx(Ce),j.gety(Ce)),re,At,ne-Lt+1,et)}}Lt+=qt,qt=At.dist(ht)}var Le=(ne-Lt)/qt,qe=ht.sub(At),cn=qe.mult(Le)._add(At);cn._add(qe._unit()._perp()._mult(u*gt));var Sn=ft+Math.atan2(ht.y-At.y,ht.x-At.x);return te.push(cn),{point:cn,angle:Sn,path:te}}Hn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Hn.prototype.insert=function(l,c,u,d,b){this._forEachCell(c,u,d,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(c),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(b)},Hn.prototype.insertCircle=function(l,c,u,d){this._forEachCell(c-d,u-d,c+d,u+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(c),this.circles.push(u),this.circles.push(d)},Hn.prototype._insertBoxCell=function(l,c,u,d,b,w){this.boxCells[b].push(w)},Hn.prototype._insertCircleCell=function(l,c,u,d,b,w){this.circleCells[b].push(w)},Hn.prototype._query=function(l,c,u,d,b,w){if(u<0||l>this.width||d<0||c>this.height)return!b&&[];var E=[];if(l<=0&&c<=0&&this.width<=u&&this.height<=d){if(b)return!0;for(var k=0;k<this.boxKeys.length;k++)E.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(var F=0;F<this.circleKeys.length;F++){var j=this.circles[3*F],et=this.circles[3*F+1],it=this.circles[3*F+2];E.push({key:this.circleKeys[F],x1:j-it,y1:et-it,x2:j+it,y2:et+it})}return w?E.filter(w):E}return this._forEachCell(l,c,u,d,this._queryCell,E,{hitTest:b,seenUids:{box:{},circle:{}}},w),b?E.length>0:E},Hn.prototype._queryCircle=function(l,c,u,d,b){var w=l-u,E=l+u,k=c-u,F=c+u;if(E<0||w>this.width||F<0||k>this.height)return!d&&[];var j=[];return this._forEachCell(w,k,E,F,this._queryCellCircle,j,{hitTest:d,circle:{x:l,y:c,radius:u},seenUids:{box:{},circle:{}}},b),d?j.length>0:j},Hn.prototype.query=function(l,c,u,d,b){return this._query(l,c,u,d,!1,b)},Hn.prototype.hitTest=function(l,c,u,d,b){return this._query(l,c,u,d,!0,b)},Hn.prototype.hitTestCircle=function(l,c,u,d){return this._queryCircle(l,c,u,!0,d)},Hn.prototype._queryCell=function(l,c,u,d,b,w,E,k){var F=E.seenUids,j=this.boxCells[b];if(j!==null)for(var et=this.bboxes,it=0,ot=j;it<ot.length;it+=1){var gt=ot[it];if(!F.box[gt]){F.box[gt]=!0;var ft=4*gt;if(l<=et[ft+2]&&c<=et[ft+3]&&u>=et[ft+0]&&d>=et[ft+1]&&(!k||k(this.boxKeys[gt]))){if(E.hitTest)return w.push(!0),!0;w.push({key:this.boxKeys[gt],x1:et[ft],y1:et[ft+1],x2:et[ft+2],y2:et[ft+3]})}}}var bt=this.circleCells[b];if(bt!==null)for(var ht=this.circles,At=0,Lt=bt;At<Lt.length;At+=1){var qt=Lt[At];if(!F.circle[qt]){F.circle[qt]=!0;var ne=3*qt;if(this._circleAndRectCollide(ht[ne],ht[ne+1],ht[ne+2],l,c,u,d)&&(!k||k(this.circleKeys[qt]))){if(E.hitTest)return w.push(!0),!0;var te=ht[ne],re=ht[ne+1],ve=ht[ne+2];w.push({key:this.circleKeys[qt],x1:te-ve,y1:re-ve,x2:te+ve,y2:re+ve})}}}},Hn.prototype._queryCellCircle=function(l,c,u,d,b,w,E,k){var F=E.circle,j=E.seenUids,et=this.boxCells[b];if(et!==null)for(var it=this.bboxes,ot=0,gt=et;ot<gt.length;ot+=1){var ft=gt[ot];if(!j.box[ft]){j.box[ft]=!0;var bt=4*ft;if(this._circleAndRectCollide(F.x,F.y,F.radius,it[bt+0],it[bt+1],it[bt+2],it[bt+3])&&(!k||k(this.boxKeys[ft])))return w.push(!0),!0}}var ht=this.circleCells[b];if(ht!==null)for(var At=this.circles,Lt=0,qt=ht;Lt<qt.length;Lt+=1){var ne=qt[Lt];if(!j.circle[ne]){j.circle[ne]=!0;var te=3*ne;if(this._circlesCollide(At[te],At[te+1],At[te+2],F.x,F.y,F.radius)&&(!k||k(this.circleKeys[ne])))return w.push(!0),!0}}},Hn.prototype._forEachCell=function(l,c,u,d,b,w,E,k){for(var F=this._convertToXCellCoord(l),j=this._convertToYCellCoord(c),et=this._convertToXCellCoord(u),it=this._convertToYCellCoord(d),ot=F;ot<=et;ot++)for(var gt=j;gt<=it;gt++)if(b.call(this,l,c,u,d,this.xCellCount*gt+ot,w,E,k))return},Hn.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Hn.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Hn.prototype._circlesCollide=function(l,c,u,d,b,w){var E=d-l,k=b-c,F=u+w;return F*F>E*E+k*k},Hn.prototype._circleAndRectCollide=function(l,c,u,d,b,w,E){var k=(w-d)/2,F=Math.abs(l-(d+k));if(F>k+u)return!1;var j=(E-b)/2,et=Math.abs(c-(b+j));if(et>j+u)return!1;if(F<=k||et<=j)return!0;var it=F-k,ot=et-j;return it*it+ot*ot<=u*u};var _u=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function yo(l,c){for(var u=0;u<l;u++){var d=c.length;c.resize(d+4),c.float32.set(_u,3*d)}}function Wr(l,c,u){var d=c[0],b=c[1];return l[0]=u[0]*d+u[4]*b+u[12],l[1]=u[1]*d+u[5]*b+u[13],l[3]=u[3]*d+u[7]*b+u[15],l}var da=function(l,c,u){c===void 0&&(c=new Hn(l.width+200,l.height+200,25)),u===void 0&&(u=new Hn(l.width+200,l.height+200,25)),this.transform=l,this.grid=c,this.ignoredGrid=u,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function gr(l,c,u){return c*(o.EXTENT/(l.tileSize*Math.pow(2,u-l.tileID.overscaledZ)))}da.prototype.placeCollisionBox=function(l,c,u,d,b){var w=this.projectAndGetPerspectiveRatio(d,l.anchorPointX,l.anchorPointY),E=u*w.perspectiveRatio,k=l.x1*E+w.point.x,F=l.y1*E+w.point.y,j=l.x2*E+w.point.x,et=l.y2*E+w.point.y;return!this.isInsideGrid(k,F,j,et)||!c&&this.grid.hitTest(k,F,j,et,b)?{box:[],offscreen:!1}:{box:[k,F,j,et],offscreen:this.isOffscreen(k,F,j,et)}},da.prototype.placeCollisionCircles=function(l,c,u,d,b,w,E,k,F,j,et,it,ot){var gt=[],ft=new o.Point(c.anchorX,c.anchorY),bt=Wn(ft,w),ht=ai(this.transform.cameraToCenterDistance,bt.signedDistanceFromCamera),At=(j?b/ht:b*ht)/o.ONE_EM,Lt=Wn(ft,E).point,qt=Lr(At,d,c.lineOffsetX*At,c.lineOffsetY*At,!1,Lt,ft,c,u,E,{}),ne=!1,te=!1,re=!0;if(qt){for(var ve=.5*it*ht+ot,Ce=new o.Point(-100,-100),Le=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),qe=new Eo,cn=qt.first,Sn=qt.last,Mn=[],Oi=cn.path.length-1;Oi>=1;Oi--)Mn.push(cn.path[Oi]);for(var Je=1;Je<Sn.path.length;Je++)Mn.push(Sn.path[Je]);var kn=2.5*ve;if(k){var Jn=Mn.map(function(Ds){return Wn(Ds,k)});Mn=Jn.some(function(Ds){return Ds.signedDistanceFromCamera<=0})?[]:Jn.map(function(Ds){return Ds.point})}var Un=[];if(Mn.length>0){for(var On=Mn[0].clone(),ti=Mn[0].clone(),Bn=1;Bn<Mn.length;Bn++)On.x=Math.min(On.x,Mn[Bn].x),On.y=Math.min(On.y,Mn[Bn].y),ti.x=Math.max(ti.x,Mn[Bn].x),ti.y=Math.max(ti.y,Mn[Bn].y);Un=On.x>=Ce.x&&ti.x<=Le.x&&On.y>=Ce.y&&ti.y<=Le.y?[Mn]:ti.x<Ce.x||On.x>Le.x||ti.y<Ce.y||On.y>Le.y?[]:o.clipLine([Mn],Ce.x,Ce.y,Le.x,Le.y)}for(var dn=0,po=Un;dn<po.length;dn+=1){var Xr;qe.reset(po[dn],.25*ve),Xr=qe.length<=.5*ve?1:Math.ceil(qe.paddedLength/kn)+1;for(var Ur=0;Ur<Xr;Ur++){var bo=Ur/Math.max(Xr-1,1),Cr=qe.lerp(bo),yr=Cr.x+100,Oa=Cr.y+100;gt.push(yr,Oa,ve,0);var dr=yr-ve,Ml=Oa-ve,Ba=yr+ve,el=Oa+ve;if(re=re&&this.isOffscreen(dr,Ml,Ba,el),te=te||this.isInsideGrid(dr,Ml,Ba,el),!l&&this.grid.hitTestCircle(yr,Oa,ve,et)&&(ne=!0,!F))return{circles:[],offscreen:!1,collisionDetected:ne}}}}return{circles:!F&&ne||!te?[]:gt,offscreen:re,collisionDetected:ne}},da.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var c=[],u=1/0,d=1/0,b=-1/0,w=-1/0,E=0,k=l;E<k.length;E+=1){var F=k[E],j=new o.Point(F.x+100,F.y+100);u=Math.min(u,j.x),d=Math.min(d,j.y),b=Math.max(b,j.x),w=Math.max(w,j.y),c.push(j)}for(var et={},it={},ot=0,gt=this.grid.query(u,d,b,w).concat(this.ignoredGrid.query(u,d,b,w));ot<gt.length;ot+=1){var ft=gt[ot],bt=ft.key;if(et[bt.bucketInstanceId]===void 0&&(et[bt.bucketInstanceId]={}),!et[bt.bucketInstanceId][bt.featureIndex]){var ht=[new o.Point(ft.x1,ft.y1),new o.Point(ft.x2,ft.y1),new o.Point(ft.x2,ft.y2),new o.Point(ft.x1,ft.y2)];o.polygonIntersectsPolygon(c,ht)&&(et[bt.bucketInstanceId][bt.featureIndex]=!0,it[bt.bucketInstanceId]===void 0&&(it[bt.bucketInstanceId]=[]),it[bt.bucketInstanceId].push(bt.featureIndex))}}return it},da.prototype.insertCollisionBox=function(l,c,u,d,b){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:d,collisionGroupID:b},l[0],l[1],l[2],l[3])},da.prototype.insertCollisionCircles=function(l,c,u,d,b){for(var w=c?this.ignoredGrid:this.grid,E={bucketInstanceId:u,featureIndex:d,collisionGroupID:b},k=0;k<l.length;k+=4)w.insertCircle(E,l[k],l[k+1],l[k+2])},da.prototype.projectAndGetPerspectiveRatio=function(l,c,u){var d=[c,u,0,1];return Wr(d,d,l),{point:new o.Point((d[0]/d[3]+1)/2*this.transform.width+100,(-d[1]/d[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}},da.prototype.isOffscreen=function(l,c,u,d){return u<100||l>=this.screenRightBoundary||d<100||c>this.screenBottomBoundary},da.prototype.isInsideGrid=function(l,c,u,d){return u>=0&&l<this.gridRightBoundary&&d>=0&&c<this.gridBottomBoundary},da.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var qa=function(l,c,u,d){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?c:-c))):d&&u?1:0,this.placed=u};qa.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ma=function(l,c,u,d,b){this.text=new qa(l?l.text:null,c,u,b),this.icon=new qa(l?l.icon:null,c,d,b)};ma.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ql=function(l,c,u){this.text=l,this.icon=c,this.skipFade=u},C=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},R=function(l,c,u,d,b){this.bucketInstanceId=l,this.featureIndex=c,this.sourceLayerIndex=u,this.bucketIndex=d,this.tileID=b},Y=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function mt(l,c,u,d,b){var w=o.getAnchorAlignment(l),E=-(w.horizontalAlign-.5)*c,k=-(w.verticalAlign-.5)*u,F=o.evaluateVariableOffset(l,d);return new o.Point(E+F[0]*b,k+F[1]*b)}function Tt(l,c,u,d,b,w){var E=l.x1,k=l.x2,F=l.y1,j=l.y2,et=l.anchorPointX,it=l.anchorPointY,ot=new o.Point(c,u);return d&&ot._rotate(b?w:-w),{x1:E+ot.x,y1:F+ot.y,x2:k+ot.x,y2:j+ot.y,anchorPointX:et,anchorPointY:it}}Y.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var c=++this.maxGroupID;this.collisionGroups[l]={ID:c,predicate:function(u){return u.collisionGroupID===c}}}return this.collisionGroups[l]};var Pt=function(l,c,u,d){this.transform=l.clone(),this.collisionIndex=new da(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Y(u),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}};function Ht(l,c,u,d,b){l.emplaceBack(c?1:0,u?1:0,d||0,b||0),l.emplaceBack(c?1:0,u?1:0,d||0,b||0),l.emplaceBack(c?1:0,u?1:0,d||0,b||0),l.emplaceBack(c?1:0,u?1:0,d||0,b||0)}Pt.prototype.getBucketParts=function(l,c,u,d){var b=u.getBucket(c),w=u.latestFeatureIndex;if(b&&w&&c.id===b.layerIds[0]){var E=u.collisionBoxArray,k=b.layers[0].layout,F=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),j=u.tileSize/o.EXTENT,et=this.transform.calculatePosMatrix(u.tileID.toUnwrapped()),it=k.get("text-pitch-alignment")==="map",ot=k.get("text-rotation-alignment")==="map",gt=gr(u,1,this.transform.zoom),ft=Pr(et,it,ot,this.transform,gt),bt=null;if(it){var ht=Wi(et,it,ot,this.transform,gt);bt=o.multiply([],this.transform.labelPlaneMatrix,ht)}this.retainedQueryData[b.bucketInstanceId]=new R(b.bucketInstanceId,w,b.sourceLayerIndex,b.index,u.tileID);var At={bucket:b,layout:k,posMatrix:et,textLabelPlaneMatrix:ft,labelToScreenMatrix:bt,scale:F,textPixelRatio:j,holdingForFade:u.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(d)for(var Lt=0,qt=b.sortKeyRanges;Lt<qt.length;Lt+=1){var ne=qt[Lt];l.push({sortKey:ne.sortKey,symbolInstanceStart:ne.symbolInstanceStart,symbolInstanceEnd:ne.symbolInstanceEnd,parameters:At})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:At})}},Pt.prototype.attemptAnchorPlacement=function(l,c,u,d,b,w,E,k,F,j,et,it,ot,gt,ft){var bt,ht=[it.textOffset0,it.textOffset1],At=mt(l,u,d,ht,b),Lt=this.collisionIndex.placeCollisionBox(Tt(c,At.x,At.y,w,E,this.transform.angle),et,k,F,j.predicate);if(!ft||this.collisionIndex.placeCollisionBox(Tt(ft,At.x,At.y,w,E,this.transform.angle),et,k,F,j.predicate).box.length!==0)return Lt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[it.crossTileID]&&this.prevPlacement.placements[it.crossTileID]&&this.prevPlacement.placements[it.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[it.crossTileID].anchor),this.variableOffsets[it.crossTileID]={textOffset:ht,width:u,height:d,anchor:l,textBoxScale:b,prevAnchor:bt},this.markUsedJustification(ot,l,it,gt),ot.allowVerticalPlacement&&(this.markUsedOrientation(ot,gt,it),this.placedOrientations[it.crossTileID]=gt),{shift:At,placedGlyphBoxes:Lt}):void 0},Pt.prototype.placeLayerBucketPart=function(l,c,u){var d=this,b=l.parameters,w=b.bucket,E=b.layout,k=b.posMatrix,F=b.textLabelPlaneMatrix,j=b.labelToScreenMatrix,et=b.textPixelRatio,it=b.holdingForFade,ot=b.collisionBoxArray,gt=b.partiallyEvaluatedTextSize,ft=b.collisionGroup,bt=E.get("text-optional"),ht=E.get("icon-optional"),At=E.get("text-allow-overlap"),Lt=E.get("icon-allow-overlap"),qt=E.get("text-rotation-alignment")==="map",ne=E.get("text-pitch-alignment")==="map",te=E.get("icon-text-fit")!=="none",re=E.get("symbol-z-order")==="viewport-y",ve=At&&(Lt||!w.hasIconData()||ht),Ce=Lt&&(At||!w.hasTextData()||bt);!w.collisionArrays&&ot&&w.deserializeCollisionBoxes(ot);var Le=function(Je,kn){if(!c[Je.crossTileID])if(it)d.placements[Je.crossTileID]=new ql(!1,!1,!1);else{var Jn,Un=!1,On=!1,ti=!0,Bn=null,dn={box:null,offscreen:null},po={box:null,offscreen:null},Xr=null,Ur=null,bo=0,Cr=0,yr=0;kn.textFeatureIndex?bo=kn.textFeatureIndex:Je.useRuntimeCollisionCircles&&(bo=Je.featureIndex),kn.verticalTextFeatureIndex&&(Cr=kn.verticalTextFeatureIndex);var Oa=kn.textBox;if(Oa){var dr=function(Yi){var fs=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Yi&&d.prevPlacement){var xa=d.prevPlacement.placedOrientations[Je.crossTileID];xa&&(d.placedOrientations[Je.crossTileID]=xa,d.markUsedOrientation(w,fs=xa,Je))}return fs},Ml=function(Yi,fs){if(w.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&kn.verticalTextBox)for(var xa=0,eu=w.writingModes;xa<eu.length&&(eu[xa]===o.WritingMode.vertical?(dn=fs(),po=dn):dn=Yi(),!(dn&&dn.box&&dn.box.length));xa+=1);else dn=Yi()};if(E.get("text-variable-anchor")){var Ba=E.get("text-variable-anchor");if(d.prevPlacement&&d.prevPlacement.variableOffsets[Je.crossTileID]){var el=d.prevPlacement.variableOffsets[Je.crossTileID];Ba.indexOf(el.anchor)>0&&(Ba=Ba.filter(function(Yi){return Yi!==el.anchor})).unshift(el.anchor)}var Ds=function(Yi,fs,xa){for(var eu=Yi.x2-Yi.x1,Nm=Yi.y2-Yi.y1,Gc=Je.textBoxScale,cd=te&&!Lt?fs:null,qc={box:[],offscreen:!1},yp=At?2*Ba.length:Ba.length,nu=0;nu<yp;++nu){var gf=d.attemptAnchorPlacement(Ba[nu%Ba.length],Yi,eu,Nm,Gc,qt,ne,et,k,ft,nu>=Ba.length,Je,w,xa,cd);if(gf&&(qc=gf.placedGlyphBoxes)&&qc.box&&qc.box.length){Un=!0,Bn=gf.shift;break}}return qc};Ml(function(){return Ds(Oa,kn.iconBox,o.WritingMode.horizontal)},function(){var Yi=kn.verticalTextBox;return w.allowVerticalPlacement&&!(dn&&dn.box&&dn.box.length)&&Je.numVerticalGlyphVertices>0&&Yi?Ds(Yi,kn.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),dn&&(Un=dn.box,ti=dn.offscreen);var cc=dr(dn&&dn.box);if(!Un&&d.prevPlacement){var Hc=d.prevPlacement.variableOffsets[Je.crossTileID];Hc&&(d.variableOffsets[Je.crossTileID]=Hc,d.markUsedJustification(w,Hc.anchor,Je,cc))}}else{var Rs=function(Yi,fs){var xa=d.collisionIndex.placeCollisionBox(Yi,At,et,k,ft.predicate);return xa&&xa.box&&xa.box.length&&(d.markUsedOrientation(w,fs,Je),d.placedOrientations[Je.crossTileID]=fs),xa};Ml(function(){return Rs(Oa,o.WritingMode.horizontal)},function(){var Yi=kn.verticalTextBox;return w.allowVerticalPlacement&&Je.numVerticalGlyphVertices>0&&Yi?Rs(Yi,o.WritingMode.vertical):{box:null,offscreen:null}}),dr(dn&&dn.box&&dn.box.length)}}if(Un=(Jn=dn)&&Jn.box&&Jn.box.length>0,ti=Jn&&Jn.offscreen,Je.useRuntimeCollisionCircles){var hc=w.text.placedSymbolArray.get(Je.centerJustifiedTextSymbolIndex),bh=o.evaluateSizeForFeature(w.textSizeData,gt,hc),El=E.get("text-padding");Xr=d.collisionIndex.placeCollisionCircles(At,hc,w.lineVertexArray,w.glyphOffsetArray,bh,k,F,j,u,ne,ft.predicate,Je.collisionCircleDiameter,El),Un=At||Xr.circles.length>0&&!Xr.collisionDetected,ti=ti&&Xr.offscreen}if(kn.iconFeatureIndex&&(yr=kn.iconFeatureIndex),kn.iconBox){var Jl=function(Yi){var fs=te&&Bn?Tt(Yi,Bn.x,Bn.y,qt,ne,d.transform.angle):Yi;return d.collisionIndex.placeCollisionBox(fs,Lt,et,k,ft.predicate)};On=po&&po.box&&po.box.length&&kn.verticalIconBox?(Ur=Jl(kn.verticalIconBox)).box.length>0:(Ur=Jl(kn.iconBox)).box.length>0,ti=ti&&Ur.offscreen}var Sl=bt||Je.numHorizontalGlyphVertices===0&&Je.numVerticalGlyphVertices===0,ko=ht||Je.numIconVertices===0;if(Sl||ko?ko?Sl||(On=On&&Un):Un=On&&Un:On=Un=On&&Un,Un&&Jn&&Jn.box&&d.collisionIndex.insertCollisionBox(Jn.box,E.get("text-ignore-placement"),w.bucketInstanceId,po&&po.box&&Cr?Cr:bo,ft.ID),On&&Ur&&d.collisionIndex.insertCollisionBox(Ur.box,E.get("icon-ignore-placement"),w.bucketInstanceId,yr,ft.ID),Xr&&(Un&&d.collisionIndex.insertCollisionCircles(Xr.circles,E.get("text-ignore-placement"),w.bucketInstanceId,bo,ft.ID),u)){var nl=w.bucketInstanceId,tu=d.collisionCircleArrays[nl];tu===void 0&&(tu=d.collisionCircleArrays[nl]=new C);for(var fc=0;fc<Xr.circles.length;fc+=4)tu.circles.push(Xr.circles[fc+0]),tu.circles.push(Xr.circles[fc+1]),tu.circles.push(Xr.circles[fc+2]),tu.circles.push(Xr.collisionDetected?1:0)}d.placements[Je.crossTileID]=new ql(Un||ve,On||Ce,ti||w.justReloaded),c[Je.crossTileID]=!0}};if(re)for(var qe=w.getSortedSymbolIndexes(this.transform.angle),cn=qe.length-1;cn>=0;--cn){var Sn=qe[cn];Le(w.symbolInstances.get(Sn),w.collisionArrays[Sn])}else for(var Mn=l.symbolInstanceStart;Mn<l.symbolInstanceEnd;Mn++)Le(w.symbolInstances.get(Mn),w.collisionArrays[Mn]);if(u&&w.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[w.bucketInstanceId];o.invert(Oi.invProjMatrix,k),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1},Pt.prototype.markUsedJustification=function(l,c,u,d){var b;b=d===o.WritingMode.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(c)];for(var w=0,E=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];w<E.length;w+=1){var k=E[w];k>=0&&(l.text.placedSymbolArray.get(k).crossTileID=b>=0&&k!==b?0:u.crossTileID)}},Pt.prototype.markUsedOrientation=function(l,c,u){for(var d=c===o.WritingMode.horizontal||c===o.WritingMode.horizontalOnly?c:0,b=c===o.WritingMode.vertical?c:0,w=0,E=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];w<E.length;w+=1)l.text.placedSymbolArray.get(E[w]).placedOrientation=d;u.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=b)},Pt.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var c=this.prevPlacement,u=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;var d=c?c.symbolFadeChange(l):1,b=c?c.opacities:{},w=c?c.variableOffsets:{},E=c?c.placedOrientations:{};for(var k in this.placements){var F=this.placements[k],j=b[k];j?(this.opacities[k]=new ma(j,d,F.text,F.icon),u=u||F.text!==j.text.placed||F.icon!==j.icon.placed):(this.opacities[k]=new ma(null,d,F.text,F.icon,F.skipFade),u=u||F.text||F.icon)}for(var et in b){var it=b[et];if(!this.opacities[et]){var ot=new ma(it,d,!1,!1);ot.isHidden()||(this.opacities[et]=ot,u=u||it.text.placed||it.icon.placed)}}for(var gt in w)this.variableOffsets[gt]||!this.opacities[gt]||this.opacities[gt].isHidden()||(this.variableOffsets[gt]=w[gt]);for(var ft in E)this.placedOrientations[ft]||!this.opacities[ft]||this.opacities[ft].isHidden()||(this.placedOrientations[ft]=E[ft]);u?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:l)},Pt.prototype.updateLayerOpacities=function(l,c){for(var u={},d=0,b=c;d<b.length;d+=1){var w=b[d],E=w.getBucket(l);E&&w.latestFeatureIndex&&l.id===E.layerIds[0]&&this.updateBucketOpacities(E,u,w.collisionBoxArray)}},Pt.prototype.updateBucketOpacities=function(l,c,u){var d=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var b=l.layers[0].layout,w=new ma(null,0,!1,!1,!0),E=b.get("text-allow-overlap"),k=b.get("icon-allow-overlap"),F=b.get("text-variable-anchor"),j=b.get("text-rotation-alignment")==="map",et=b.get("text-pitch-alignment")==="map",it=b.get("icon-text-fit")!=="none",ot=new ma(null,0,E&&(k||!l.hasIconData()||b.get("icon-optional")),k&&(E||!l.hasTextData()||b.get("text-optional")),!0);!l.collisionArrays&&u&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(u);for(var gt=function(At,Lt,qt){for(var ne=0;ne<Lt/4;ne++)At.opacityVertexArray.emplaceBack(qt)},ft=function(At){var Lt=l.symbolInstances.get(At),qt=Lt.numHorizontalGlyphVertices,ne=Lt.numVerticalGlyphVertices,te=Lt.crossTileID,re=d.opacities[te];c[te]?re=w:re||(d.opacities[te]=re=ot),c[te]=!0;var ve=Lt.numIconVertices>0,Ce=d.placedOrientations[Lt.crossTileID],Le=Ce===o.WritingMode.vertical,qe=Ce===o.WritingMode.horizontal||Ce===o.WritingMode.horizontalOnly;if(qt>0||ne>0){var cn=si(re.text);gt(l.text,qt,Le?wr:cn),gt(l.text,ne,qe?wr:cn);var Sn=re.text.isHidden();[Lt.rightJustifiedTextSymbolIndex,Lt.centerJustifiedTextSymbolIndex,Lt.leftJustifiedTextSymbolIndex].forEach(function(dn){dn>=0&&(l.text.placedSymbolArray.get(dn).hidden=Sn||Le?1:0)}),Lt.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Lt.verticalPlacedTextSymbolIndex).hidden=Sn||qe?1:0);var Mn=d.variableOffsets[Lt.crossTileID];Mn&&d.markUsedJustification(l,Mn.anchor,Lt,Ce);var Oi=d.placedOrientations[Lt.crossTileID];Oi&&(d.markUsedJustification(l,"left",Lt,Oi),d.markUsedOrientation(l,Oi,Lt))}if(ve){var Je=si(re.icon),kn=!(it&&Lt.verticalPlacedIconSymbolIndex&&Le);Lt.placedIconSymbolIndex>=0&&(gt(l.icon,Lt.numIconVertices,kn?Je:wr),l.icon.placedSymbolArray.get(Lt.placedIconSymbolIndex).hidden=re.icon.isHidden()),Lt.verticalPlacedIconSymbolIndex>=0&&(gt(l.icon,Lt.numVerticalIconVertices,kn?wr:Je),l.icon.placedSymbolArray.get(Lt.verticalPlacedIconSymbolIndex).hidden=re.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var Jn=l.collisionArrays[At];if(Jn){var Un=new o.Point(0,0);if(Jn.textBox||Jn.verticalTextBox){var On=!0;if(F){var ti=d.variableOffsets[te];ti?(Un=mt(ti.anchor,ti.width,ti.height,ti.textOffset,ti.textBoxScale),j&&Un._rotate(et?d.transform.angle:-d.transform.angle)):On=!1}Jn.textBox&&Ht(l.textCollisionBox.collisionVertexArray,re.text.placed,!On||Le,Un.x,Un.y),Jn.verticalTextBox&&Ht(l.textCollisionBox.collisionVertexArray,re.text.placed,!On||qe,Un.x,Un.y)}var Bn=!!(!qe&&Jn.verticalIconBox);Jn.iconBox&&Ht(l.iconCollisionBox.collisionVertexArray,re.icon.placed,Bn,it?Un.x:0,it?Un.y:0),Jn.verticalIconBox&&Ht(l.iconCollisionBox.collisionVertexArray,re.icon.placed,!Bn,it?Un.x:0,it?Un.y:0)}}},bt=0;bt<l.symbolInstances.length;bt++)ft(bt);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var ht=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ht.invProjMatrix,l.placementViewportMatrix=ht.viewportMatrix,l.collisionCircleArray=ht.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},Pt.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Pt.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},Pt.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},Pt.prototype.stillRecent=function(l,c){var u=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*u>l},Pt.prototype.setStale=function(){this.stale=!0};var Pe=Math.pow(2,25),Fe=Math.pow(2,24),en=Math.pow(2,17),an=Math.pow(2,16),Ge=Math.pow(2,9),$n=Math.pow(2,8),Nr=Math.pow(2,1);function si(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var c=l.placed?1:0,u=Math.floor(127*l.opacity);return u*Pe+c*Fe+u*en+c*an+u*Ge+c*$n+u*Nr+c}var wr=0,xe=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};xe.prototype.continuePlacement=function(l,c,u,d,b){for(var w=this._bucketParts;this._currentTileIndex<l.length;)if(c.getBucketParts(w,d,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort(function(E,k){return E.sortKey-k.sortKey}));this._currentPartIndex<w.length;)if(c.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,b())return!0;return!1};var An=function(l,c,u,d,b,w,E){this.placement=new Pt(l,b,w,E),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=d,this._done=!1};An.prototype.isDone=function(){return this._done},An.prototype.continuePlacement=function(l,c,u){for(var d=this,b=o.browser.now(),w=function(){var F=o.browser.now()-b;return!d._forceFullPlacement&&F>2};this._currentPlacementIndex>=0;){var E=c[l[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=k)&&(!E.maxzoom||E.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new xe(E)),this._inProgressLayer.continuePlacement(u[E.source],this.placement,this._showCollisionBoxes,E,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},An.prototype.commit=function(l){return this.placement.commit(l),this.placement};var or=512/o.EXTENT/2,eo=function(l,c,u){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=u;for(var d=0;d<c.length;d++){var b=c.get(d),w=b.key;this.indexedSymbolInstances[w]||(this.indexedSymbolInstances[w]=[]),this.indexedSymbolInstances[w].push({crossTileID:b.crossTileID,coord:this.getScaledCoordinates(b,l)})}};eo.prototype.getScaledCoordinates=function(l,c){var u=or/Math.pow(2,c.canonical.z-this.tileID.canonical.z);return{x:Math.floor((c.canonical.x*o.EXTENT+l.anchorX)*u),y:Math.floor((c.canonical.y*o.EXTENT+l.anchorY)*u)}},eo.prototype.findMatches=function(l,c,u){for(var d=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),b=0;b<l.length;b++){var w=l.get(b);if(!w.crossTileID){var E=this.indexedSymbolInstances[w.key];if(E)for(var k=this.getScaledCoordinates(w,c),F=0,j=E;F<j.length;F+=1){var et=j[F];if(Math.abs(et.coord.x-k.x)<=d&&Math.abs(et.coord.y-k.y)<=d&&!u[et.crossTileID]){u[et.crossTileID]=!0,w.crossTileID=et.crossTileID;break}}}}};var Qi=function(){this.maxCrossTileID=0};Qi.prototype.generate=function(){return++this.maxCrossTileID};var ws=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ws.prototype.handleWrapJump=function(l){var c=Math.round((l-this.lng)/360);if(c!==0)for(var u in this.indexes){var d=this.indexes[u],b={};for(var w in d){var E=d[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),b[E.tileID.key]=E}this.indexes[u]=b}this.lng=l},ws.prototype.addBucket=function(l,c,u){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var d=0;d<c.symbolInstances.length;d++)c.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var b=this.usedCrossTileIDs[l.overscaledZ];for(var w in this.indexes){var E=this.indexes[w];if(Number(w)>l.overscaledZ)for(var k in E){var F=E[k];F.tileID.isChildOf(l)&&F.findMatches(c.symbolInstances,l,b)}else{var j=E[l.scaledTo(Number(w)).key];j&&j.findMatches(c.symbolInstances,l,b)}}for(var et=0;et<c.symbolInstances.length;et++){var it=c.symbolInstances.get(et);it.crossTileID||(it.crossTileID=u.generate(),b[it.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new eo(l,c.symbolInstances,c.bucketInstanceId),!0},ws.prototype.removeBucketCrossTileIDs=function(l,c){for(var u in c.indexedSymbolInstances)for(var d=0,b=c.indexedSymbolInstances[u];d<b.length;d+=1)delete this.usedCrossTileIDs[l][b[d].crossTileID]},ws.prototype.removeStaleBuckets=function(l){var c=!1;for(var u in this.indexes){var d=this.indexes[u];for(var b in d)l[d[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,d[b]),delete d[b],c=!0)}return c};var pl=function(){this.layerIndexes={},this.crossTileIDs=new Qi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};pl.prototype.addLayer=function(l,c,u){var d=this.layerIndexes[l.id];d===void 0&&(d=this.layerIndexes[l.id]=new ws);var b=!1,w={};d.handleWrapJump(u);for(var E=0,k=c;E<k.length;E+=1){var F=k[E],j=F.getBucket(l);j&&l.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(F.tileID,j,this.crossTileIDs)&&(b=!0),w[j.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(b=!0),b},pl.prototype.pruneUnusedLayers=function(l){var c={};for(var u in l.forEach(function(d){c[d]=!0}),this.layerIndexes)c[u]||delete this.layerIndexes[u]};var er=function(l,c){return o.emitValidationErrors(l,c&&c.filter(function(u){return u.identifier!=="source.canvas"}))},Ws=o.pick(je,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),dl=o.pick(je,["setCenter","setZoom","setBearing","setPitch"]),Ui=function(){var l={},c=o.styleSpec.$version;for(var u in o.styleSpec.$root){var d,b=o.styleSpec.$root[u];b.required&&(d=u==="version"?c:b.type==="array"?[]:{})!=null&&(l[u]=d)}return l}(),Ci=function(l){function c(u,d){var b=this;d===void 0&&(d={}),l.call(this),this.map=u,this.dispatcher=new de(oe(),this),this.imageManager=new K,this.imageManager.setEventedParent(this),this.glyphManager=new kt(u._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Bt(256,512),this.crossTileSymbolIndex=new pl,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var w=this;this._rtlTextPluginCallback=c.registerForPluginStateChange(function(E){w.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(k,F){if(o.triggerPluginCompletionEvent(k),F&&F.every(function(et){return et}))for(var j in w.sourceCaches)w.sourceCaches[j].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var k=b.sourceCaches[E.sourceId];if(k){var F=k.getSource();if(F&&F.vectorLayerIds)for(var j in b._layers){var et=b._layers[j];et.source===F.id&&b._validateLayer(et)}}}})}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.loadURL=function(u,d){var b=this;d===void 0&&(d={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var w=typeof d.validate=="boolean"?d.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,d.accessToken);var E=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(E,function(k,F){b._request=null,k?b.fire(new o.ErrorEvent(k)):F&&b._load(F,w)})},c.prototype.loadJSON=function(u,d){var b=this;d===void 0&&(d={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){b._request=null,b._load(u,d.validate!==!1)})},c.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Ui,!1)},c.prototype._load=function(u,d){if(!d||!er(this,o.validateStyle(u))){for(var b in this._loaded=!0,this.stylesheet=u,u.sources)this.addSource(b,u.sources[b],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);var w=Ne(this.stylesheet.layers);this._order=w.map(function(j){return j.id}),this._layers={},this._serializedLayers={};for(var E=0,k=w;E<k.length;E+=1){var F=k[E];(F=o.createStyleLayer(F)).setEventedParent(this,{layer:{id:F.id}}),this._layers[F.id]=F,this._serializedLayers[F.id]=F.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Nt(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},c.prototype._loadSprite=function(u){var d=this;this._spriteRequest=function(b,w,E){var k,F,j,et=o.browser.devicePixelRatio>1?"@2x":"",it=o.getJSON(w.transformRequest(w.normalizeSpriteURL(b,et,".json"),o.ResourceType.SpriteJSON),function(ft,bt){it=null,j||(j=ft,k=bt,gt())}),ot=o.getImage(w.transformRequest(w.normalizeSpriteURL(b,et,".png"),o.ResourceType.SpriteImage),function(ft,bt){ot=null,j||(j=ft,F=bt,gt())});function gt(){if(j)E(j);else if(k&&F){var ft=o.browser.getImageData(F),bt={};for(var ht in k){var At=k[ht],Lt=At.width,qt=At.height,ne=At.x,te=At.y,re=At.sdf,ve=At.pixelRatio,Ce=At.stretchX,Le=At.stretchY,qe=At.content,cn=new o.RGBAImage({width:Lt,height:qt});o.RGBAImage.copy(ft,cn,{x:ne,y:te},{x:0,y:0},{width:Lt,height:qt}),bt[ht]={data:cn,pixelRatio:ve,sdf:re,stretchX:Ce,stretchY:Le,content:qe}}E(null,bt)}}return{cancel:function(){it&&(it.cancel(),it=null),ot&&(ot.cancel(),ot=null)}}}(u,this.map._requestManager,function(b,w){if(d._spriteRequest=null,b)d.fire(new o.ErrorEvent(b));else if(w)for(var E in w)d.imageManager.addImage(E,w[E]);d.imageManager.setLoaded(!0),d._availableImages=d.imageManager.listImages(),d.dispatcher.broadcast("setImages",d._availableImages),d.fire(new o.Event("data",{dataType:"style"}))})},c.prototype._validateLayer=function(u){var d=this.sourceCaches[u.source];if(d){var b=u.sourceLayer;if(b){var w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(b)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+b+'" does not exist on source "'+w.id+'" as specified by style layer "'+u.id+'"')))}}},c.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()},c.prototype._serializeLayers=function(u){for(var d=[],b=0,w=u;b<w.length;b+=1){var E=this._layers[w[b]];E.type!=="custom"&&d.push(E.serialize())}return d},c.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(var d in this._layers)if(this._layers[d].hasTransition())return!0;return!1},c.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},c.prototype.update=function(u){if(this._loaded){var d=this._changed;if(this._changed){var b=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);for(var E in(b.length||w.length)&&this._updateWorkerLayers(b,w),this._updatedSources){var k=this._updatedSources[E];k==="reload"?this._reloadSource(E):k==="clear"&&this._clearSource(E)}for(var F in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[F].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}var j={};for(var et in this.sourceCaches){var it=this.sourceCaches[et];j[et]=it.used,it.used=!1}for(var ot=0,gt=this._order;ot<gt.length;ot+=1){var ft=this._layers[gt[ot]];ft.recalculate(u,this._availableImages),!ft.isHidden(u.zoom)&&ft.source&&(this.sourceCaches[ft.source].used=!0)}for(var bt in j){var ht=this.sourceCaches[bt];j[bt]!==ht.used&&ht.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:bt}))}this.light.recalculate(u),this.z=u.zoom,d&&this.fire(new o.Event("data",{dataType:"style"}))}},c.prototype._updateTilesForChangedImages=function(){var u=Object.keys(this._changedImages);if(u.length){for(var d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}},c.prototype._updateWorkerLayers=function(u,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:d})},c.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},c.prototype.setState=function(u){var d=this;if(this._checkLoaded(),er(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=Ne(u.layers);var b=function(E,k){if(!E)return[{command:je.setStyle,args:[k]}];var F=[];try{if(!o.deepEqual(E.version,k.version))return[{command:je.setStyle,args:[k]}];o.deepEqual(E.center,k.center)||F.push({command:je.setCenter,args:[k.center]}),o.deepEqual(E.zoom,k.zoom)||F.push({command:je.setZoom,args:[k.zoom]}),o.deepEqual(E.bearing,k.bearing)||F.push({command:je.setBearing,args:[k.bearing]}),o.deepEqual(E.pitch,k.pitch)||F.push({command:je.setPitch,args:[k.pitch]}),o.deepEqual(E.sprite,k.sprite)||F.push({command:je.setSprite,args:[k.sprite]}),o.deepEqual(E.glyphs,k.glyphs)||F.push({command:je.setGlyphs,args:[k.glyphs]}),o.deepEqual(E.transition,k.transition)||F.push({command:je.setTransition,args:[k.transition]}),o.deepEqual(E.light,k.light)||F.push({command:je.setLight,args:[k.light]});var j={},et=[];(function(ot,gt,ft,bt){var ht;for(ht in gt=gt||{},ot=ot||{})ot.hasOwnProperty(ht)&&(gt.hasOwnProperty(ht)||Ze(ht,ft,bt));for(ht in gt)gt.hasOwnProperty(ht)&&(ot.hasOwnProperty(ht)?o.deepEqual(ot[ht],gt[ht])||(ot[ht].type==="geojson"&&gt[ht].type==="geojson"&&Vi(ot,gt,ht)?ft.push({command:je.setGeoJSONSourceData,args:[ht,gt[ht].data]}):_i(ht,gt,ft,bt)):ei(ht,gt,ft))})(E.sources,k.sources,et,j);var it=[];E.layers&&E.layers.forEach(function(ot){j[ot.source]?F.push({command:je.removeLayer,args:[ot.id]}):it.push(ot)}),F=F.concat(et),function(ot,gt,ft){gt=gt||[];var bt,ht,At,Lt,qt,ne,te,re=(ot=ot||[]).map(mi),ve=gt.map(mi),Ce=ot.reduce(gi,{}),Le=gt.reduce(gi,{}),qe=re.slice(),cn=Object.create(null);for(bt=0,ht=0;bt<re.length;bt++)Le.hasOwnProperty(At=re[bt])?ht++:(ft.push({command:je.removeLayer,args:[At]}),qe.splice(qe.indexOf(At,ht),1));for(bt=0,ht=0;bt<ve.length;bt++)qe[qe.length-1-bt]!==(At=ve[ve.length-1-bt])&&(Ce.hasOwnProperty(At)?(ft.push({command:je.removeLayer,args:[At]}),qe.splice(qe.lastIndexOf(At,qe.length-ht),1)):ht++,ft.push({command:je.addLayer,args:[Le[At],ne=qe[qe.length-bt]]}),qe.splice(qe.length-bt,0,At),cn[At]=!0);for(bt=0;bt<ve.length;bt++)if(Lt=Ce[At=ve[bt]],qt=Le[At],!cn[At]&&!o.deepEqual(Lt,qt))if(o.deepEqual(Lt.source,qt.source)&&o.deepEqual(Lt["source-layer"],qt["source-layer"])&&o.deepEqual(Lt.type,qt.type)){for(te in ci(Lt.layout,qt.layout,ft,At,null,je.setLayoutProperty),ci(Lt.paint,qt.paint,ft,At,null,je.setPaintProperty),o.deepEqual(Lt.filter,qt.filter)||ft.push({command:je.setFilter,args:[At,qt.filter]}),o.deepEqual(Lt.minzoom,qt.minzoom)&&o.deepEqual(Lt.maxzoom,qt.maxzoom)||ft.push({command:je.setLayerZoomRange,args:[At,qt.minzoom,qt.maxzoom]}),Lt)Lt.hasOwnProperty(te)&&te!=="layout"&&te!=="paint"&&te!=="filter"&&te!=="metadata"&&te!=="minzoom"&&te!=="maxzoom"&&(te.indexOf("paint.")===0?ci(Lt[te],qt[te],ft,At,te.slice(6),je.setPaintProperty):o.deepEqual(Lt[te],qt[te])||ft.push({command:je.setLayerProperty,args:[At,te,qt[te]]}));for(te in qt)qt.hasOwnProperty(te)&&!Lt.hasOwnProperty(te)&&te!=="layout"&&te!=="paint"&&te!=="filter"&&te!=="metadata"&&te!=="minzoom"&&te!=="maxzoom"&&(te.indexOf("paint.")===0?ci(Lt[te],qt[te],ft,At,te.slice(6),je.setPaintProperty):o.deepEqual(Lt[te],qt[te])||ft.push({command:je.setLayerProperty,args:[At,te,qt[te]]}))}else ft.push({command:je.removeLayer,args:[At]}),ne=qe[qe.lastIndexOf(At)+1],ft.push({command:je.addLayer,args:[qt,ne]})}(it,k.layers,F)}catch(ot){console.warn("Unable to compute style diff:",ot),F=[{command:je.setStyle,args:[k]}]}return F}(this.serialize(),u).filter(function(E){return!(E.command in dl)});if(b.length===0)return!1;var w=b.filter(function(E){return!(E.command in Ws)});if(w.length>0)throw new Error("Unimplemented: "+w.map(function(E){return E.command}).join(", ")+".");return b.forEach(function(E){E.command!=="setTransition"&&d[E.command].apply(d,E.args)}),this.stylesheet=u,!0},c.prototype.addImage=function(u,d){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(u,d),this._afterImageUpdated(u)},c.prototype.updateImage=function(u,d){this.imageManager.updateImage(u,d)},c.prototype.getImage=function(u){return this.imageManager.getImage(u)},c.prototype.removeImage=function(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(u),this._afterImageUpdated(u)},c.prototype._afterImageUpdated=function(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},c.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},c.prototype.addSource=function(u,d,b){var w=this;if(b===void 0&&(b={}),this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(d).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.validateStyle.source,"sources."+u,d,null,b))){this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);var E=this.sourceCaches[u]=new vt(u,d,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:w.loaded(),source:E.serialize(),sourceId:u}}),E.onAdd(this.map),this._changed=!0}},c.prototype.removeSource=function(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(var d in this._layers)if(this._layers[d].source===u)return this.fire(new o.ErrorEvent(new Error('Source "'+u+'" cannot be removed while layer "'+d+'" is using it.')));var b=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),b.setEventedParent(null),b.clearTiles(),b.onRemove&&b.onRemove(this.map),this._changed=!0},c.prototype.setGeoJSONSourceData=function(u,d){this._checkLoaded(),this.sourceCaches[u].getSource().setData(d),this._changed=!0},c.prototype.getSource=function(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()},c.prototype.addLayer=function(u,d,b){b===void 0&&(b={}),this._checkLoaded();var w=u.id;if(this.getLayer(w))this.fire(new o.ErrorEvent(new Error('Layer with id "'+w+'" already exists on this map')));else{var E;if(u.type==="custom"){if(er(this,o.validateCustomStyleLayer(u)))return;E=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(w,u.source),u=o.clone$1(u),u=o.extend(u,{source:w})),this._validate(o.validateStyle.layer,"layers."+w,u,{arrayIndex:-1},b))return;E=o.createStyleLayer(u),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}var k=d?this._order.indexOf(d):this._order.length;if(d&&k===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.')));else{if(this._order.splice(k,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){var F=this._removedLayers[w];delete this._removedLayers[w],F.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},c.prototype.moveLayer=function(u,d){if(this._checkLoaded(),this._changed=!0,this._layers[u]){if(u!==d){var b=this._order.indexOf(u);this._order.splice(b,1);var w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.'))):(this._order.splice(w,0,u),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be moved.")))},c.prototype.removeLayer=function(u){this._checkLoaded();var d=this._layers[u];if(d){d.setEventedParent(null);var b=this._order.indexOf(u);this._order.splice(b,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=d,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],d.onRemove&&d.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be removed.")))},c.prototype.getLayer=function(u){return this._layers[u]},c.prototype.hasLayer=function(u){return u in this._layers},c.prototype.setLayerZoomRange=function(u,d,b){this._checkLoaded();var w=this.getLayer(u);w?w.minzoom===d&&w.maxzoom===b||(d!=null&&(w.minzoom=d),b!=null&&(w.maxzoom=b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot have zoom extent.")))},c.prototype.setFilter=function(u,d,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);if(w){if(!o.deepEqual(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,"layers."+w.id+".filter",d,null,b)||(w.filter=o.clone$1(d),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be filtered.")))},c.prototype.getFilter=function(u){return o.clone$1(this.getLayer(u).filter)},c.prototype.setLayoutProperty=function(u,d,b,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(u);E?o.deepEqual(E.getLayoutProperty(d),b)||(E.setLayoutProperty(d,b,w),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getLayoutProperty=function(u,d){var b=this.getLayer(u);if(b)return b.getLayoutProperty(d);this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style.")))},c.prototype.setPaintProperty=function(u,d,b,w){w===void 0&&(w={}),this._checkLoaded();var E=this.getLayer(u);E?o.deepEqual(E.getPaintProperty(d),b)||(E.setPaintProperty(d,b,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},c.prototype.getPaintProperty=function(u,d){return this.getLayer(u).getPaintProperty(d)},c.prototype.setFeatureState=function(u,d){this._checkLoaded();var b=u.source,w=u.sourceLayer,E=this.sourceCaches[b];if(E!==void 0){var k=E.getSource().type;k==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||w?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,u.id,d)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},c.prototype.removeFeatureState=function(u,d){this._checkLoaded();var b=u.source,w=this.sourceCaches[b];if(w!==void 0){var E=w.getSource().type,k=E==="vector"?u.sourceLayer:void 0;E!=="vector"||k?d&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(k,u.id,d):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+b+"' does not exist in the map's style.")))},c.prototype.getFeatureState=function(u){this._checkLoaded();var d=u.source,b=u.sourceLayer,w=this.sourceCaches[d];if(w!==void 0){if(w.getSource().type!=="vector"||b)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(b,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},c.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},c.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(u){return u.serialize()}),layers:this._serializeLayers(this._order)},function(u){return u!==void 0})},c.prototype._updateLayer=function(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0},c.prototype._flattenAndSortRenderedFeatures=function(u){for(var d=this,b=function(Ce){return d._layers[Ce].type==="fill-extrusion"},w={},E=[],k=this._order.length-1;k>=0;k--){var F=this._order[k];if(b(F)){w[F]=k;for(var j=0,et=u;j<et.length;j+=1){var it=et[j][F];if(it)for(var ot=0,gt=it;ot<gt.length;ot+=1)E.push(gt[ot])}}}E.sort(function(Ce,Le){return Le.intersectionZ-Ce.intersectionZ});for(var ft=[],bt=this._order.length-1;bt>=0;bt--){var ht=this._order[bt];if(b(ht))for(var At=E.length-1;At>=0;At--){var Lt=E[At].feature;if(w[Lt.layer.id]<bt)break;ft.push(Lt),E.pop()}else for(var qt=0,ne=u;qt<ne.length;qt+=1){var te=ne[qt][ht];if(te)for(var re=0,ve=te;re<ve.length;re+=1)ft.push(ve[re].feature)}}return ft},c.prototype.queryRenderedFeatures=function(u,d,b){d&&d.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,k=d.layers;E<k.length;E+=1){var F=k[E],j=this._layers[F];if(!j)return this.fire(new o.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be queried for features."))),[];w[j.source]=!0}}var et=[];for(var it in d.availableImages=this._availableImages,this.sourceCaches)d.layers&&!w[it]||et.push(le(this.sourceCaches[it],this._layers,this._serializedLayers,u,d,b));return this.placement&&et.push(function(ot,gt,ft,bt,ht,At,Lt){for(var qt={},ne=At.queryRenderedSymbols(bt),te=[],re=0,ve=Object.keys(ne).map(Number);re<ve.length;re+=1)te.push(Lt[ve[re]]);te.sort(Ke);for(var Ce=function(){var Mn=qe[Le],Oi=Mn.featureIndex.lookupSymbolFeatures(ne[Mn.bucketInstanceId],gt,Mn.bucketIndex,Mn.sourceLayerIndex,ht.filter,ht.layers,ht.availableImages,ot);for(var Je in Oi){var kn=qt[Je]=qt[Je]||[],Jn=Oi[Je];Jn.sort(function(ti,Bn){var dn=Mn.featureSortOrder;if(dn){var po=dn.indexOf(ti.featureIndex);return dn.indexOf(Bn.featureIndex)-po}return Bn.featureIndex-ti.featureIndex});for(var Un=0,On=Jn;Un<On.length;Un+=1)kn.push(On[Un])}},Le=0,qe=te;Le<qe.length;Le+=1)Ce();var cn=function(Mn){qt[Mn].forEach(function(Oi){var Je=Oi.feature,kn=ft[ot[Mn].source].getFeatureState(Je.layer["source-layer"],Je.id);Je.source=Je.layer.source,Je.layer["source-layer"]&&(Je.sourceLayer=Je.layer["source-layer"]),Je.state=kn})};for(var Sn in qt)cn(Sn);return qt}(this._layers,this._serializedLayers,this.sourceCaches,u,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(et)},c.prototype.querySourceFeatures=function(u,d){d&&d.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);var b=this.sourceCaches[u];return b?function(w,E){for(var k=w.getRenderableIds().map(function(gt){return w.getTileByID(gt)}),F=[],j={},et=0;et<k.length;et++){var it=k[et],ot=it.tileID.canonical.key;j[ot]||(j[ot]=!0,it.querySourceFeatures(F,E))}return F}(b,d):[]},c.prototype.addSourceType=function(u,d,b){return c.getSourceType(u)?b(new Error('A source type called "'+u+'" already exists.')):(c.setSourceType(u,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:d.workerSourceURL},b):b(null,null))},c.prototype.getLight=function(){return this.light.getLight()},c.prototype.setLight=function(u,d){d===void 0&&(d={}),this._checkLoaded();var b=this.light.getLight(),w=!1;for(var E in u)if(!o.deepEqual(u[E],b[E])){w=!0;break}if(w){var k={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,d),this.light.updateTransitions(k)}},c.prototype._validate=function(u,d,b,w,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&er(this,u.call(o.validateStyle,o.extend({key:d,style:this.serialize(),value:b,styleSpec:o.styleSpec},w)))},c.prototype._remove=function(){for(var u in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[u].setEventedParent(null);for(var d in this.sourceCaches)this.sourceCaches[d].clearTiles(),this.sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},c.prototype._clearSource=function(u){this.sourceCaches[u].clearTiles()},c.prototype._reloadSource=function(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()},c.prototype._updateSources=function(u){for(var d in this.sourceCaches)this.sourceCaches[d].update(u)},c.prototype._generateCollisionBoxes=function(){for(var u in this.sourceCaches)this._reloadSource(u)},c.prototype._updatePlacement=function(u,d,b,w,E){E===void 0&&(E=!1);for(var k=!1,F=!1,j={},et=0,it=this._order;et<it.length;et+=1){var ot=this._layers[it[et]];if(ot.type==="symbol"){if(!j[ot.source]){var gt=this.sourceCaches[ot.source];j[ot.source]=gt.getRenderableIds(!0).map(function(Lt){return gt.getTileByID(Lt)}).sort(function(Lt,qt){return qt.tileID.overscaledZ-Lt.tileID.overscaledZ||(Lt.tileID.isLessThan(qt.tileID)?-1:1)})}var ft=this.crossTileSymbolIndex.addLayer(ot,j[ot.source],u.center.lng);k=k||ft}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),u.zoom))&&(this.pauseablePlacement=new An(u,this._order,E,d,b,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,j),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),F=!0),k&&this.pauseablePlacement.placement.setStale()),F||k)for(var bt=0,ht=this._order;bt<ht.length;bt+=1){var At=this._layers[ht[bt]];At.type==="symbol"&&this.placement.updateLayerOpacities(At,j[At.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},c.prototype._releaseSymbolFadeTiles=function(){for(var u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()},c.prototype.getImages=function(u,d,b){this.imageManager.getImages(d.icons,b),this._updateTilesForChangedImages();var w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,d.icons)},c.prototype.getGlyphs=function(u,d,b){this.glyphManager.getGlyphs(d.stacks,b)},c.prototype.getResource=function(u,d,b){return o.makeRequest(d,b)},c}(o.Evented);Ci.getSourceType=function(l){return ui[l]},Ci.setSourceType=function(l,c){ui[l]=c},Ci.registerForPluginStateChange=o.registerForPluginStateChange;var Zr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Wl=$i(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Lc=$i(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),lf=$i(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),uf=$i(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),dh=$i("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kc=$i(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),mh=$i(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),lo=$i("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),ec=$i("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Zs=$i("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),cf=$i(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Zl=$i(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),_o=$i(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),nc=$i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),uo=$i(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),ka=$i(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Cs=$i(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Is=$i(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ml=$i(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),co=$i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),as=$i(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),xo=$i(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),gl=$i(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ys=$i(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),$o=$i(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),xu=$i(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function $i(l,c){var u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=c.match(/attribute ([\w]+) ([\w]+)/g),b=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=w?w.concat(b):b,k={};return{fragmentSource:l=l.replace(u,function(F,j,et,it,ot){return k[ot]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
varying `+et+" "+it+" "+ot+`;
#else
uniform `+et+" "+it+" u_"+ot+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ot+`
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`}),vertexSource:c=c.replace(u,function(F,j,et,it,ot){var gt=it==="float"?"vec2":"vec4",ft=ot.match(/color/)?"color":gt;return k[ot]?j==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
uniform lowp float u_`+ot+`_t;
attribute `+et+" "+gt+" a_"+ot+`;
varying `+et+" "+it+" "+ot+`;
#else
uniform `+et+" "+it+" u_"+ot+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+ot+" = a_"+ot+`;
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+ot+" = unpack_mix_"+ft+"(a_"+ot+", u_"+ot+`_t);
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_`+ot+`
uniform lowp float u_`+ot+`_t;
attribute `+et+" "+gt+" a_"+ot+`;
#else
uniform `+et+" "+it+" u_"+ot+`;
#endif
`:ft==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+et+" "+it+" "+ot+" = a_"+ot+`;
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ot+`
    `+et+" "+it+" "+ot+" = unpack_mix_"+ft+"(a_"+ot+", u_"+ot+`_t);
#else
    `+et+" "+it+" "+ot+" = u_"+ot+`;
#endif
`}),staticAttributes:d,staticUniforms:E}}var Vr=Object.freeze({__proto__:null,prelude:Wl,background:Lc,backgroundPattern:lf,circle:uf,clippingMask:dh,heatmap:kc,heatmapTexture:mh,collisionBox:lo,collisionCircle:ec,debug:Zs,fill:cf,fillOutline:Zl,fillOutlinePattern:_o,fillPattern:nc,fillExtrusion:uo,fillExtrusionPattern:ka,hillshadePrepare:Cs,hillshade:Is,line:ml,lineGradient:co,linePattern:as,lineSDF:xo,raster:gl,symbolIcon:Ys,symbolSDF:$o,symbolTextAndIcon:xu}),Da=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function vl(l){for(var c=[],u=0;u<l.length;u++)if(l[u]!==null){var d=l[u].split(" ");c.push(d.pop())}return c}Da.prototype.bind=function(l,c,u,d,b,w,E,k){this.context=l;for(var F=this.boundPaintVertexBuffers.length!==d.length,j=0;!F&&j<d.length;j++)this.boundPaintVertexBuffers[j]!==d[j]&&(F=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===c&&this.boundLayoutVertexBuffer===u&&!F&&this.boundIndexBuffer===b&&this.boundVertexOffset===w&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===k?(l.bindVertexArrayOES.set(this.vao),E&&E.bind(),b&&b.dynamicDraw&&b.bind(),k&&k.bind()):this.freshBind(c,u,d,b,w,E,k)},Da.prototype.freshBind=function(l,c,u,d,b,w,E){var k,F=l.numAttributes,j=this.context,et=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=l,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=d,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=E;else{k=j.currentNumAttributes||0;for(var it=F;it<k;it++)et.disableVertexAttribArray(it)}c.enableAttributes(et,l);for(var ot=0,gt=u;ot<gt.length;ot+=1)gt[ot].enableAttributes(et,l);w&&w.enableAttributes(et,l),E&&E.enableAttributes(et,l),c.bind(),c.setVertexAttribPointers(et,l,b);for(var ft=0,bt=u;ft<bt.length;ft+=1){var ht=bt[ft];ht.bind(),ht.setVertexAttribPointers(et,l,b)}w&&(w.bind(),w.setVertexAttribPointers(et,l,b)),d&&d.bind(),E&&(E.bind(),E.setVertexAttribPointers(et,l,b)),j.currentNumAttributes=F},Da.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Dc=function(l,c,u,d,b,w){var E=l.gl;this.program=E.createProgram();for(var k=vl(u.staticAttributes),F=d?d.getBinderAttributes():[],j=k.concat(F),et=u.staticUniforms?vl(u.staticUniforms):[],it=d?d.getBinderUniforms():[],ot=[],gt=0,ft=et.concat(it);gt<ft.length;gt+=1){var bt=ft[gt];ot.indexOf(bt)<0&&ot.push(bt)}var ht=d?d.defines():[];w&&ht.push("#define OVERDRAW_INSPECTOR;");var At=ht.concat(Wl.fragmentSource,u.fragmentSource).join(`
`),Lt=ht.concat(Wl.vertexSource,u.vertexSource).join(`
`),qt=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(qt,At),E.compileShader(qt),E.attachShader(this.program,qt);var ne=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(ne,Lt),E.compileShader(ne),E.attachShader(this.program,ne),this.attributes={};var te={};this.numAttributes=j.length;for(var re=0;re<this.numAttributes;re++)j[re]&&(E.bindAttribLocation(this.program,re,j[re]),this.attributes[j[re]]=re);E.linkProgram(this.program),E.deleteShader(ne),E.deleteShader(qt);for(var ve=0;ve<ot.length;ve++){var Ce=ot[ve];if(Ce&&!te[Ce]){var Le=E.getUniformLocation(this.program,Ce);Le&&(te[Ce]=Le)}}this.fixedUniforms=b(l,te),this.binderUniforms=d?d.getUniforms(l,te):[]}}};function bu(l,c,u){var d=1/gr(u,1,c.transform.tileZoom),b=Math.pow(2,u.tileID.overscaledZ),w=u.tileSize*Math.pow(2,c.transform.tileZoom)/b,E=w*(u.tileID.canonical.x+u.tileID.wrap*b),k=w*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[E>>16,k>>16],u_pixel_coord_lower:[65535&E,65535&k]}}Dc.prototype.draw=function(l,c,u,d,b,w,E,k,F,j,et,it,ot,gt,ft,bt){var ht,At=l.gl;if(!this.failedToCreate){for(var Lt in l.program.set(this.program),l.setDepthMode(u),l.setStencilMode(d),l.setColorMode(b),l.setCullFace(w),this.fixedUniforms)this.fixedUniforms[Lt].set(E[Lt]);gt&&gt.setUniforms(l,this.binderUniforms,it,{zoom:ot});for(var qt=(ht={},ht[At.LINES]=2,ht[At.TRIANGLES]=3,ht[At.LINE_STRIP]=1,ht)[c],ne=0,te=et.get();ne<te.length;ne+=1){var re=te[ne],ve=re.vaos||(re.vaos={});(ve[k]||(ve[k]=new Da)).bind(l,this,F,gt?gt.getPaintVertexBuffers():[],j,re.vertexOffset,ft,bt),At.drawElements(c,re.primitiveLength*qt,At.UNSIGNED_SHORT,re.primitiveOffset*qt*2)}}};var Rc=function(l,c,u,d){var b=c.style.light,w=b.properties.get("position"),E=[w.x,w.y,w.z],k=o.create$1();b.properties.get("anchor")==="viewport"&&o.fromRotation(k,-c.transform.angle),o.transformMat3(E,E,k);var F=b.properties.get("color");return{u_matrix:l,u_lightpos:E,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+u,u_opacity:d}},ss=function(l,c,u,d,b,w,E){return o.extend(Rc(l,c,u,d),bu(w,c,E),{u_height_factor:-Math.pow(2,b.overscaledZ)/E.tileSize/8})},yl=function(l){return{u_matrix:l}},_l=function(l,c,u,d){return o.extend(yl(l),bu(u,c,d))},ic=function(l,c){return{u_matrix:l,u_world:c}},Yl=function(l,c,u,d,b){return o.extend(_l(l,c,u,d),{u_world:b})},gh=function(l,c,u,d){var b,w,E=l.transform;if(d.paint.get("circle-pitch-alignment")==="map"){var k=gr(u,1,E.zoom);b=!0,w=[k,k]}else b=!1,w=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(c.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:w}},Xs=function(l,c,u){var d=gr(u,1,c.zoom),b=Math.pow(2,c.zoom-u.tileID.overscaledZ),w=u.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[c.pixelsToGLUnits[0]/(d*b),c.pixelsToGLUnits[1]/(d*b)],u_overscale_factor:w}},rc=function(l,c,u){return{u_matrix:l,u_inv_matrix:c,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}},Jo=function(l,c,u){return u===void 0&&(u=1),{u_matrix:l,u_color:c,u_overlay:0,u_overlay_scale:u}},zo=function(l){return{u_matrix:l}},Ks=function(l,c,u,d){return{u_matrix:l,u_extrude_scale:gr(c,1,u),u_intensity:d}},xl=function(l,c,u){var d=l.transform;return{u_matrix:ta(l,c,u),u_ratio:1/gr(c,1,d.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Ri=function(l,c,u,d){return o.extend(xl(l,c,u),{u_image:0,u_image_height:d})},Au=function(l,c,u,d){var b=l.transform,w=ls(c,b);return{u_matrix:ta(l,c,u),u_texsize:c.imageAtlasTexture.size,u_ratio:1/gr(c,1,b.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},zc=function(l,c,u,d,b){var w=l.lineAtlas,E=ls(c,l.transform),k=u.layout.get("line-cap")==="round",F=w.getDash(d.from,k),j=w.getDash(d.to,k),et=F.width*b.fromScale,it=j.width*b.toScale;return o.extend(xl(l,c,u),{u_patternscale_a:[E/et,-F.height/2],u_patternscale_b:[E/it,-j.height/2],u_sdfgamma:w.width/(256*Math.min(et,it)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:j.y,u_mix:b.t})};function ls(l,c){return 1/gr(l,1,c.tileZoom)}function ta(l,c,u){return l.translatePosMatrix(c.tileID.posMatrix,c,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}var Oc=function(l,c,u,d,b){return{u_matrix:l,u_tl_parent:c,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(E=b.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(w=b.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:wu(b.paint.get("raster-hue-rotate"))};var w,E};function wu(l){l*=Math.PI/180;var c=Math.sin(l),u=Math.cos(l);return[(2*u+1)/3,(-Math.sqrt(3)*c-u+1)/3,(Math.sqrt(3)*c-u+1)/3]}var oc,bl=function(l,c,u,d,b,w,E,k,F,j){var et=b.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:et.cameraToCenterDistance,u_pitch:et.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:et.width/et.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+F,u_pitch_with_map:+d,u_texsize:j,u_texture:0}},Cu=function(l,c,u,d,b,w,E,k,F,j,et){var it=b.transform;return o.extend(bl(l,c,u,d,b,w,E,k,F,j),{u_gamma_scale:d?Math.cos(it._pitch)*it.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+et})},Xl=function(l,c,u,d,b,w,E,k,F,j){return o.extend(Cu(l,c,u,d,b,w,E,k,!0,F,!0),{u_texsize_icon:j,u_texture_icon:1})},Ms=function(l,c,u){return{u_matrix:l,u_opacity:c,u_color:u}},Iu=function(l,c,u,d,b,w){return o.extend(function(E,k,F,j){var et=F.imageManager.getPattern(E.from.toString()),it=F.imageManager.getPattern(E.to.toString()),ot=F.imageManager.getPixelSize(),gt=ot.width,ft=ot.height,bt=Math.pow(2,j.tileID.overscaledZ),ht=j.tileSize*Math.pow(2,F.transform.tileZoom)/bt,At=ht*(j.tileID.canonical.x+j.tileID.wrap*bt),Lt=ht*j.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:et.tl,u_pattern_br_a:et.br,u_pattern_tl_b:it.tl,u_pattern_br_b:it.br,u_texsize:[gt,ft],u_mix:k.t,u_pattern_size_a:et.displaySize,u_pattern_size_b:it.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/gr(j,1,F.transform.tileZoom),u_pixel_coord_upper:[At>>16,Lt>>16],u_pixel_coord_lower:[65535&At,65535&Lt]}}(d,w,u,b),{u_matrix:l,u_opacity:c})},Qs={fillExtrusion:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_lightpos:new o.Uniform3f(l,c.u_lightpos),u_lightintensity:new o.Uniform1f(l,c.u_lightintensity),u_lightcolor:new o.Uniform3f(l,c.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,c.u_vertical_gradient),u_opacity:new o.Uniform1f(l,c.u_opacity)}},fillExtrusionPattern:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_lightpos:new o.Uniform3f(l,c.u_lightpos),u_lightintensity:new o.Uniform1f(l,c.u_lightintensity),u_lightcolor:new o.Uniform3f(l,c.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,c.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,c.u_height_factor),u_image:new o.Uniform1i(l,c.u_image),u_texsize:new o.Uniform2f(l,c.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,c.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,c.u_scale),u_fade:new o.Uniform1f(l,c.u_fade),u_opacity:new o.Uniform1f(l,c.u_opacity)}},fill:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix)}},fillPattern:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_image:new o.Uniform1i(l,c.u_image),u_texsize:new o.Uniform2f(l,c.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,c.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,c.u_scale),u_fade:new o.Uniform1f(l,c.u_fade)}},fillOutline:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_world:new o.Uniform2f(l,c.u_world)}},fillOutlinePattern:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_world:new o.Uniform2f(l,c.u_world),u_image:new o.Uniform1i(l,c.u_image),u_texsize:new o.Uniform2f(l,c.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,c.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,c.u_scale),u_fade:new o.Uniform1f(l,c.u_fade)}},circle:function(l,c){return{u_camera_to_center_distance:new o.Uniform1f(l,c.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,c.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,c.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,c.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,c.u_matrix)}},collisionBox:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,c.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,c.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,c.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,c.u_overscale_factor)}},collisionCircle:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,c.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,c.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,c.u_viewport_size)}},debug:function(l,c){return{u_color:new o.UniformColor(l,c.u_color),u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_overlay:new o.Uniform1i(l,c.u_overlay),u_overlay_scale:new o.Uniform1f(l,c.u_overlay_scale)}},clippingMask:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix)}},heatmap:function(l,c){return{u_extrude_scale:new o.Uniform1f(l,c.u_extrude_scale),u_intensity:new o.Uniform1f(l,c.u_intensity),u_matrix:new o.UniformMatrix4f(l,c.u_matrix)}},heatmapTexture:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_world:new o.Uniform2f(l,c.u_world),u_image:new o.Uniform1i(l,c.u_image),u_color_ramp:new o.Uniform1i(l,c.u_color_ramp),u_opacity:new o.Uniform1f(l,c.u_opacity)}},hillshade:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_image:new o.Uniform1i(l,c.u_image),u_latrange:new o.Uniform2f(l,c.u_latrange),u_light:new o.Uniform2f(l,c.u_light),u_shadow:new o.UniformColor(l,c.u_shadow),u_highlight:new o.UniformColor(l,c.u_highlight),u_accent:new o.UniformColor(l,c.u_accent)}},hillshadePrepare:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_image:new o.Uniform1i(l,c.u_image),u_dimension:new o.Uniform2f(l,c.u_dimension),u_zoom:new o.Uniform1f(l,c.u_zoom),u_unpack:new o.Uniform4f(l,c.u_unpack)}},line:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_ratio:new o.Uniform1f(l,c.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,c.u_units_to_pixels)}},lineGradient:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_ratio:new o.Uniform1f(l,c.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,c.u_units_to_pixels),u_image:new o.Uniform1i(l,c.u_image),u_image_height:new o.Uniform1f(l,c.u_image_height)}},linePattern:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_texsize:new o.Uniform2f(l,c.u_texsize),u_ratio:new o.Uniform1f(l,c.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_image:new o.Uniform1i(l,c.u_image),u_units_to_pixels:new o.Uniform2f(l,c.u_units_to_pixels),u_scale:new o.Uniform3f(l,c.u_scale),u_fade:new o.Uniform1f(l,c.u_fade)}},lineSDF:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_ratio:new o.Uniform1f(l,c.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,c.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,c.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,c.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,c.u_sdfgamma),u_image:new o.Uniform1i(l,c.u_image),u_tex_y_a:new o.Uniform1f(l,c.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,c.u_tex_y_b),u_mix:new o.Uniform1f(l,c.u_mix)}},raster:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_tl_parent:new o.Uniform2f(l,c.u_tl_parent),u_scale_parent:new o.Uniform1f(l,c.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,c.u_buffer_scale),u_fade_t:new o.Uniform1f(l,c.u_fade_t),u_opacity:new o.Uniform1f(l,c.u_opacity),u_image0:new o.Uniform1i(l,c.u_image0),u_image1:new o.Uniform1i(l,c.u_image1),u_brightness_low:new o.Uniform1f(l,c.u_brightness_low),u_brightness_high:new o.Uniform1f(l,c.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,c.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,c.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,c.u_spin_weights)}},symbolIcon:function(l,c){return{u_is_size_zoom_constant:new o.Uniform1i(l,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,c.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,c.u_size_t),u_size:new o.Uniform1f(l,c.u_size),u_camera_to_center_distance:new o.Uniform1f(l,c.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,c.u_pitch),u_rotate_symbol:new o.Uniform1i(l,c.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,c.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,c.u_fade_change),u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,c.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,c.u_coord_matrix),u_is_text:new o.Uniform1i(l,c.u_is_text),u_pitch_with_map:new o.Uniform1i(l,c.u_pitch_with_map),u_texsize:new o.Uniform2f(l,c.u_texsize),u_texture:new o.Uniform1i(l,c.u_texture)}},symbolSDF:function(l,c){return{u_is_size_zoom_constant:new o.Uniform1i(l,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,c.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,c.u_size_t),u_size:new o.Uniform1f(l,c.u_size),u_camera_to_center_distance:new o.Uniform1f(l,c.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,c.u_pitch),u_rotate_symbol:new o.Uniform1i(l,c.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,c.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,c.u_fade_change),u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,c.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,c.u_coord_matrix),u_is_text:new o.Uniform1i(l,c.u_is_text),u_pitch_with_map:new o.Uniform1i(l,c.u_pitch_with_map),u_texsize:new o.Uniform2f(l,c.u_texsize),u_texture:new o.Uniform1i(l,c.u_texture),u_gamma_scale:new o.Uniform1f(l,c.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,c.u_is_halo)}},symbolTextAndIcon:function(l,c){return{u_is_size_zoom_constant:new o.Uniform1i(l,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,c.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,c.u_size_t),u_size:new o.Uniform1f(l,c.u_size),u_camera_to_center_distance:new o.Uniform1f(l,c.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,c.u_pitch),u_rotate_symbol:new o.Uniform1i(l,c.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,c.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,c.u_fade_change),u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,c.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,c.u_coord_matrix),u_is_text:new o.Uniform1i(l,c.u_is_text),u_pitch_with_map:new o.Uniform1i(l,c.u_pitch_with_map),u_texsize:new o.Uniform2f(l,c.u_texsize),u_texsize_icon:new o.Uniform2f(l,c.u_texsize_icon),u_texture:new o.Uniform1i(l,c.u_texture),u_texture_icon:new o.Uniform1i(l,c.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,c.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,c.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,c.u_is_halo)}},background:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_opacity:new o.Uniform1f(l,c.u_opacity),u_color:new o.UniformColor(l,c.u_color)}},backgroundPattern:function(l,c){return{u_matrix:new o.UniformMatrix4f(l,c.u_matrix),u_opacity:new o.Uniform1f(l,c.u_opacity),u_image:new o.Uniform1i(l,c.u_image),u_pattern_tl_a:new o.Uniform2f(l,c.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,c.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,c.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,c.u_pattern_br_b),u_texsize:new o.Uniform2f(l,c.u_texsize),u_mix:new o.Uniform1f(l,c.u_mix),u_pattern_size_a:new o.Uniform2f(l,c.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,c.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,c.u_scale_a),u_scale_b:new o.Uniform1f(l,c.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,c.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,c.u_tile_units_to_pixels)}}};function us(l,c,u,d,b,w,E){for(var k=l.context,F=k.gl,j=l.useProgram("collisionBox"),et=[],it=0,ot=0,gt=0;gt<d.length;gt++){var ft=d[gt],bt=c.getTile(ft),ht=bt.getBucket(u);if(ht){var At=ft.posMatrix;b[0]===0&&b[1]===0||(At=l.translatePosMatrix(ft.posMatrix,bt,b,w));var Lt=E?ht.textCollisionBox:ht.iconCollisionBox,qt=ht.collisionCircleArray;if(qt.length>0){var ne=o.create(),te=At;o.mul(ne,ht.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(ne,ne,ht.placementViewportMatrix),et.push({circleArray:qt,circleOffset:ot,transform:te,invTransform:ne}),ot=it+=qt.length/4}Lt&&j.draw(k,F.LINES,at.disabled,dt.disabled,l.colorModeForRenderPass(),Dt.disabled,Xs(At,l.transform,bt),u.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,null,l.transform.zoom,null,null,Lt.collisionVertexBuffer)}}if(E&&et.length){var re=l.useProgram("collisionCircle"),ve=new o.StructArrayLayout2f1f2i16;ve.resize(4*it),ve._trim();for(var Ce=0,Le=0,qe=et;Le<qe.length;Le+=1)for(var cn=qe[Le],Sn=0;Sn<cn.circleArray.length/4;Sn++){var Mn=4*Sn,Oi=cn.circleArray[Mn+0],Je=cn.circleArray[Mn+1],kn=cn.circleArray[Mn+2],Jn=cn.circleArray[Mn+3];ve.emplace(Ce++,Oi,Je,kn,Jn,0),ve.emplace(Ce++,Oi,Je,kn,Jn,1),ve.emplace(Ce++,Oi,Je,kn,Jn,2),ve.emplace(Ce++,Oi,Je,kn,Jn,3)}(!oc||oc.length<2*it)&&(oc=function(Xr){var Ur=2*Xr,bo=new o.StructArrayLayout3ui6;bo.resize(Ur),bo._trim();for(var Cr=0;Cr<Ur;Cr++){var yr=6*Cr;bo.uint16[yr+0]=4*Cr+0,bo.uint16[yr+1]=4*Cr+1,bo.uint16[yr+2]=4*Cr+2,bo.uint16[yr+3]=4*Cr+2,bo.uint16[yr+4]=4*Cr+3,bo.uint16[yr+5]=4*Cr+0}return bo}(it));for(var Un=k.createIndexBuffer(oc,!0),On=k.createVertexBuffer(ve,o.collisionCircleLayout.members,!0),ti=0,Bn=et;ti<Bn.length;ti+=1){var dn=Bn[ti],po=rc(dn.transform,dn.invTransform,l.transform);re.draw(k,F.TRIANGLES,at.disabled,dt.disabled,l.colorModeForRenderPass(),Dt.disabled,po,u.id,On,Un,o.SegmentVector.simpleSegment(0,2*dn.circleOffset,dn.circleArray.length,dn.circleArray.length/2),null,l.transform.zoom,null,null,null)}On.destroy(),Un.destroy()}}var Oo=o.identity(new Float32Array(16));function vh(l,c,u,d,b,w){var E=o.getAnchorAlignment(l),k=-(E.horizontalAlign-.5)*c,F=-(E.verticalAlign-.5)*u,j=o.evaluateVariableOffset(l,d);return new o.Point((k/b+j[0])*w,(F/b+j[1])*w)}function Bc(l,c,u,d,b,w,E,k,F,j,et){var it=l.text.placedSymbolArray,ot=l.text.dynamicLayoutVertexArray,gt=l.icon.dynamicLayoutVertexArray,ft={};ot.clear();for(var bt=0;bt<it.length;bt++){var ht=it.get(bt),At=ht.hidden||!ht.crossTileID||l.allowVerticalPlacement&&!ht.placedOrientation?null:d[ht.crossTileID];if(At){var Lt=new o.Point(ht.anchorX,ht.anchorY),qt=Wn(Lt,u?k:E),ne=ai(w.cameraToCenterDistance,qt.signedDistanceFromCamera),te=b.evaluateSizeForFeature(l.textSizeData,j,ht)*ne/o.ONE_EM;u&&(te*=l.tilePixelRatio/F);for(var re=vh(At.anchor,At.width,At.height,At.textOffset,At.textBoxScale,te),ve=u?Wn(Lt.add(re),E).point:qt.point.add(c?re.rotate(-w.angle):re),Ce=l.allowVerticalPlacement&&ht.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Le=0;Le<ht.numGlyphs;Le++)o.addDynamicAttributes(ot,ve,Ce);et&&ht.associatedIconIndex>=0&&(ft[ht.associatedIconIndex]={shiftedAnchor:ve,angle:Ce})}else yo(ht.numGlyphs,ot)}if(et){gt.clear();for(var qe=l.icon.placedSymbolArray,cn=0;cn<qe.length;cn++){var Sn=qe.get(cn);if(Sn.hidden)yo(Sn.numGlyphs,gt);else{var Mn=ft[cn];if(Mn)for(var Oi=0;Oi<Sn.numGlyphs;Oi++)o.addDynamicAttributes(gt,Mn.shiftedAnchor,Mn.angle);else yo(Sn.numGlyphs,gt)}}l.icon.dynamicLayoutVertexBuffer.updateData(gt)}l.text.dynamicLayoutVertexBuffer.updateData(ot)}function Mu(l,c,u){return u.iconsInText&&c?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function Wo(l,c,u,d,b,w,E,k,F,j,et,it){for(var ot=l.context,gt=ot.gl,ft=l.transform,bt=k==="map",ht=F==="map",At=bt&&u.layout.get("symbol-placement")!=="point",Lt=bt&&!ht&&!At,qt=u.layout.get("symbol-sort-key").constantOr(1)!==void 0,ne=!1,te=l.depthModeForSublayer(0,at.ReadOnly),re=u.layout.get("text-variable-anchor"),ve=[],Ce=0,Le=d;Ce<Le.length;Ce+=1){var qe=Le[Ce],cn=c.getTile(qe),Sn=cn.getBucket(u);if(Sn){var Mn=b?Sn.text:Sn.icon;if(Mn&&Mn.segments.get().length){var Oi=Mn.programConfigurations.get(u.id),Je=b||Sn.sdfIcons,kn=b?Sn.textSizeData:Sn.iconSizeData,Jn=ht||ft.pitch!==0,Un=l.useProgram(Mu(Je,b,Sn),Oi),On=o.evaluateSizeForZoom(kn,ft.zoom),ti=void 0,Bn=[0,0],dn=void 0,po=void 0,Xr=null,Ur=void 0;if(b)dn=cn.glyphAtlasTexture,po=gt.LINEAR,ti=cn.glyphAtlasTexture.size,Sn.iconsInText&&(Bn=cn.imageAtlasTexture.size,Xr=cn.imageAtlasTexture,Ur=Jn||l.options.rotating||l.options.zooming||kn.kind==="composite"||kn.kind==="camera"?gt.LINEAR:gt.NEAREST);else{var bo=u.layout.get("icon-size").constantOr(0)!==1||Sn.iconsNeedLinear;dn=cn.imageAtlasTexture,po=Je||l.options.rotating||l.options.zooming||bo||Jn?gt.LINEAR:gt.NEAREST,ti=cn.imageAtlasTexture.size}var Cr=gr(cn,1,l.transform.zoom),yr=Pr(qe.posMatrix,ht,bt,l.transform,Cr),Oa=Wi(qe.posMatrix,ht,bt,l.transform,Cr),dr=re&&Sn.hasTextData(),Ml=u.layout.get("icon-text-fit")!=="none"&&dr&&Sn.hasIconData();At&&os(Sn,qe.posMatrix,l,b,yr,Oa,ht,j);var Ba=l.translatePosMatrix(qe.posMatrix,cn,w,E),el=At||b&&re||Ml?Oo:yr,Ds=l.translatePosMatrix(Oa,cn,w,E,!0),cc=Je&&u.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Hc={program:Un,buffers:Mn,uniformValues:Je?Sn.iconsInText?Xl(kn.kind,On,Lt,ht,l,Ba,el,Ds,ti,Bn):Cu(kn.kind,On,Lt,ht,l,Ba,el,Ds,b,ti,!0):bl(kn.kind,On,Lt,ht,l,Ba,el,Ds,b,ti),atlasTexture:dn,atlasTextureIcon:Xr,atlasInterpolation:po,atlasInterpolationIcon:Ur,isSDF:Je,hasHalo:cc};if(qt&&Sn.canOverlap){ne=!0;for(var Rs=0,hc=Mn.segments.get();Rs<hc.length;Rs+=1){var bh=hc[Rs];ve.push({segments:new o.SegmentVector([bh]),sortKey:bh.sortKey,state:Hc})}}else ve.push({segments:Mn.segments,sortKey:0,state:Hc})}}}ne&&ve.sort(function(tu,fc){return tu.sortKey-fc.sortKey});for(var El=0,Jl=ve;El<Jl.length;El+=1){var Sl=Jl[El],ko=Sl.state;if(ot.activeTexture.set(gt.TEXTURE0),ko.atlasTexture.bind(ko.atlasInterpolation,gt.CLAMP_TO_EDGE),ko.atlasTextureIcon&&(ot.activeTexture.set(gt.TEXTURE1),ko.atlasTextureIcon&&ko.atlasTextureIcon.bind(ko.atlasInterpolationIcon,gt.CLAMP_TO_EDGE)),ko.isSDF){var nl=ko.uniformValues;ko.hasHalo&&(nl.u_is_halo=1,$s(ko.buffers,Sl.segments,u,l,ko.program,te,et,it,nl)),nl.u_is_halo=0}$s(ko.buffers,Sl.segments,u,l,ko.program,te,et,it,ko.uniformValues)}}function $s(l,c,u,d,b,w,E,k,F){var j=d.context;b.draw(j,j.gl.TRIANGLES,w,E,k,Dt.disabled,F,u.id,l.layoutVertexBuffer,l.indexBuffer,c,u.paint,d.transform.zoom,l.programConfigurations.get(u.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function ac(l,c,u,d,b,w,E){var k,F,j,et,it,ot=l.context.gl,gt=u.paint.get("fill-pattern"),ft=gt&&gt.constantOr(1),bt=u.getCrossfadeParameters();E?(F=ft&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=ot.LINES):(F=ft?"fillPattern":"fill",k=ot.TRIANGLES);for(var ht=0,At=d;ht<At.length;ht+=1){var Lt=At[ht],qt=c.getTile(Lt);if(!ft||qt.patternsLoaded()){var ne=qt.getBucket(u);if(ne){var te=ne.programConfigurations.get(u.id),re=l.useProgram(F,te);ft&&(l.context.activeTexture.set(ot.TEXTURE0),qt.imageAtlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),te.updatePaintBuffers(bt));var ve=gt.constantOr(null);if(ve&&qt.imageAtlas){var Ce=qt.imageAtlas,Le=Ce.patternPositions[ve.to.toString()],qe=Ce.patternPositions[ve.from.toString()];Le&&qe&&te.setConstantPatternPositions(Le,qe)}var cn=l.translatePosMatrix(Lt.posMatrix,qt,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(E){et=ne.indexBuffer2,it=ne.segments2;var Sn=[ot.drawingBufferWidth,ot.drawingBufferHeight];j=F==="fillOutlinePattern"&&ft?Yl(cn,l,bt,qt,Sn):ic(cn,Sn)}else et=ne.indexBuffer,it=ne.segments,j=ft?_l(cn,l,bt,qt):yl(cn);re.draw(l.context,k,b,l.stencilModeForClipping(Lt),w,Dt.disabled,j,u.id,ne.layoutVertexBuffer,et,it,u.paint,l.transform.zoom,te)}}}}function Fc(l,c,u,d,b,w,E){for(var k=l.context,F=k.gl,j=u.paint.get("fill-extrusion-pattern"),et=j.constantOr(1),it=u.getCrossfadeParameters(),ot=u.paint.get("fill-extrusion-opacity"),gt=0,ft=d;gt<ft.length;gt+=1){var bt=ft[gt],ht=c.getTile(bt),At=ht.getBucket(u);if(At){var Lt=At.programConfigurations.get(u.id),qt=l.useProgram(et?"fillExtrusionPattern":"fillExtrusion",Lt);et&&(l.context.activeTexture.set(F.TEXTURE0),ht.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Lt.updatePaintBuffers(it));var ne=j.constantOr(null);if(ne&&ht.imageAtlas){var te=ht.imageAtlas,re=te.patternPositions[ne.to.toString()],ve=te.patternPositions[ne.from.toString()];re&&ve&&Lt.setConstantPatternPositions(re,ve)}var Ce=l.translatePosMatrix(bt.posMatrix,ht,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Le=u.paint.get("fill-extrusion-vertical-gradient"),qe=et?ss(Ce,l,Le,ot,bt,it,ht):Rc(Ce,l,Le,ot);qt.draw(k,k.gl.TRIANGLES,b,w,E,Dt.backCCW,qe,u.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,u.paint,l.transform.zoom,Lt)}}}function Al(l,c,u,d,b,w){var E=l.context,k=E.gl,F=c.fbo;if(F){var j=l.useProgram("hillshade");E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,F.colorAttachment.get());var et=function(it,ot,gt){var ft=gt.paint.get("hillshade-shadow-color"),bt=gt.paint.get("hillshade-highlight-color"),ht=gt.paint.get("hillshade-accent-color"),At=gt.paint.get("hillshade-illumination-direction")*(Math.PI/180);gt.paint.get("hillshade-illumination-anchor")==="viewport"&&(At-=it.transform.angle);var Lt,qt,ne,te=!it.options.moving;return{u_matrix:it.transform.calculatePosMatrix(ot.tileID.toUnwrapped(),te),u_image:0,u_latrange:(Lt=ot.tileID,qt=Math.pow(2,Lt.canonical.z),ne=Lt.canonical.y,[new o.MercatorCoordinate(0,ne/qt).toLngLat().lat,new o.MercatorCoordinate(0,(ne+1)/qt).toLngLat().lat]),u_light:[gt.paint.get("hillshade-exaggeration"),At],u_shadow:ft,u_highlight:bt,u_accent:ht}}(l,c,u);j.draw(E,k.TRIANGLES,d,b,w,Dt.disabled,et,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function Kl(l,c,u,d,b,w){var E=l.context,k=E.gl,F=c.dem;if(F&&F.data){var j=F.dim,et=F.stride,it=F.getPixels();if(E.activeTexture.set(k.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||l.getTileTexture(et),c.demTexture){var ot=c.demTexture;ot.update(it,{premultiply:!1}),ot.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else c.demTexture=new o.Texture(E,it,k.RGBA,{premultiply:!1}),c.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);E.activeTexture.set(k.TEXTURE0);var gt=c.fbo;if(!gt){var ft=new o.Texture(E,{width:j,height:j,data:null},k.RGBA);ft.bind(k.LINEAR,k.CLAMP_TO_EDGE),(gt=c.fbo=E.createFramebuffer(j,j,!0)).colorAttachment.set(ft.texture)}E.bindFramebuffer.set(gt.framebuffer),E.viewport.set([0,0,j,j]),l.useProgram("hillshadePrepare").draw(E,k.TRIANGLES,d,b,w,Dt.disabled,function(bt,ht){var At=ht.stride,Lt=o.create();return o.ortho(Lt,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Lt,Lt,[0,-o.EXTENT,0]),{u_matrix:Lt,u_image:1,u_dimension:[At,At],u_zoom:bt.overscaledZ,u_unpack:ht.getUnpackVector()}}(c.tileID,F),u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function ga(l,c,u,d,b){var w=d.paint.get("raster-fade-duration");if(w>0){var E=o.browser.now(),k=(E-l.timeAdded)/w,F=c?(E-c.timeAdded)/w:-1,j=u.getSource(),et=b.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),it=!c||Math.abs(c.tileID.overscaledZ-et)>Math.abs(l.tileID.overscaledZ-et),ot=it&&l.refreshedUponExpiration?1:o.clamp(it?k:1-F,0,1);return l.refreshedUponExpiration&&k>=1&&(l.refreshedUponExpiration=!1),c?{opacity:1,mix:1-ot}:{opacity:ot,mix:0}}return{opacity:1,mix:0}}var Wt=new o.Color(1,0,0,1),ue=new o.Color(0,1,0,1),nn=new o.Color(0,0,1,1),Dn=new o.Color(1,0,1,1),vr=new o.Color(0,1,1,1);function zi(l,c,u,d){Ot(l,0,c+u/2,l.transform.width,u,d)}function cr(l,c,u,d){Ot(l,c-u/2,0,u,l.transform.height,d)}function Ot(l,c,u,d,b,w){var E=l.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(c*o.browser.devicePixelRatio,u*o.browser.devicePixelRatio,d*o.browser.devicePixelRatio,b*o.browser.devicePixelRatio),E.clear({color:w}),k.disable(k.SCISSOR_TEST)}function he(l,c,u){var d=l.context,b=d.gl,w=u.posMatrix,E=l.useProgram("debug"),k=at.disabled,F=dt.disabled,j=l.colorModeForRenderPass();d.activeTexture.set(b.TEXTURE0),l.emptyTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),E.draw(d,b.LINE_STRIP,k,F,j,Dt.disabled,Jo(w,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var et=c.getTileByID(u.key).latestRawTileData,it=Math.floor((et&&et.byteLength||0)/1024),ot=c.getTile(u).tileSize,gt=512/Math.min(ot,512)*(u.overscaledZ/l.transform.zoom)*.5,ft=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ft+=" => "+u.overscaledZ),function(bt,ht){bt.initDebugOverlayCanvas();var At=bt.debugOverlayCanvas,Lt=bt.context.gl,qt=bt.debugOverlayCanvas.getContext("2d");qt.clearRect(0,0,At.width,At.height),qt.shadowColor="white",qt.shadowBlur=2,qt.lineWidth=1.5,qt.strokeStyle="white",qt.textBaseline="top",qt.font="bold 36px Open Sans, sans-serif",qt.fillText(ht,5,5),qt.strokeText(ht,5,5),bt.debugOverlayTexture.update(At),bt.debugOverlayTexture.bind(Lt.LINEAR,Lt.CLAMP_TO_EDGE)}(l,ft+" "+it+"kb"),E.draw(d,b.TRIANGLES,k,F,St.alphaBlended,Dt.disabled,Jo(w,o.Color.transparent,gt),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var Kt={symbol:function(l,c,u,d,b){if(l.renderPass==="translucent"){var w=dt.disabled,E=l.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(k,F,j,et,it,ot,gt){for(var ft=F.transform,bt=it==="map",ht=ot==="map",At=0,Lt=k;At<Lt.length;At+=1){var qt=Lt[At],ne=et.getTile(qt),te=ne.getBucket(j);if(te&&te.text&&te.text.segments.get().length){var re=o.evaluateSizeForZoom(te.textSizeData,ft.zoom),ve=gr(ne,1,F.transform.zoom),Ce=Pr(qt.posMatrix,ht,bt,F.transform,ve),Le=j.layout.get("icon-text-fit")!=="none"&&te.hasIconData();if(re){var qe=Math.pow(2,ft.zoom-ne.tileID.overscaledZ);Bc(te,bt,ht,gt,o.symbolSize,ft,Ce,qt.posMatrix,qe,re,Le)}}}}(d,l,u,c,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),b),u.paint.get("icon-opacity").constantOr(1)!==0&&Wo(l,c,u,d,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),w,E),u.paint.get("text-opacity").constantOr(1)!==0&&Wo(l,c,u,d,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),w,E),c.map.showCollisionBoxes&&(us(l,c,u,d,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),us(l,c,u,d,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))}},circle:function(l,c,u,d){if(l.renderPass==="translucent"){var b=u.paint.get("circle-opacity"),w=u.paint.get("circle-stroke-width"),E=u.paint.get("circle-stroke-opacity"),k=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)!==0||w.constantOr(1)!==0&&E.constantOr(1)!==0){for(var F=l.context,j=F.gl,et=l.depthModeForSublayer(0,at.ReadOnly),it=dt.disabled,ot=l.colorModeForRenderPass(),gt=[],ft=0;ft<d.length;ft++){var bt=d[ft],ht=c.getTile(bt),At=ht.getBucket(u);if(At){var Lt=At.programConfigurations.get(u.id),qt={programConfiguration:Lt,program:l.useProgram("circle",Lt),layoutVertexBuffer:At.layoutVertexBuffer,indexBuffer:At.indexBuffer,uniformValues:gh(l,bt,ht,u)};if(k)for(var ne=0,te=At.segments.get();ne<te.length;ne+=1){var re=te[ne];gt.push({segments:new o.SegmentVector([re]),sortKey:re.sortKey,state:qt})}else gt.push({segments:At.segments,sortKey:0,state:qt})}}k&&gt.sort(function(cn,Sn){return cn.sortKey-Sn.sortKey});for(var ve=0,Ce=gt;ve<Ce.length;ve+=1){var Le=Ce[ve],qe=Le.state;qe.program.draw(F,j.TRIANGLES,et,it,ot,Dt.disabled,qe.uniformValues,u.id,qe.layoutVertexBuffer,qe.indexBuffer,Le.segments,u.paint,l.transform.zoom,qe.programConfiguration)}}}},heatmap:function(l,c,u,d){if(u.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var b=l.context,w=b.gl,E=dt.disabled,k=new St([w.ONE,w.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(gt,ft,bt){var ht=gt.gl;gt.activeTexture.set(ht.TEXTURE1),gt.viewport.set([0,0,ft.width/4,ft.height/4]);var At=bt.heatmapFbo;if(At)ht.bindTexture(ht.TEXTURE_2D,At.colorAttachment.get()),gt.bindFramebuffer.set(At.framebuffer);else{var Lt=ht.createTexture();ht.bindTexture(ht.TEXTURE_2D,Lt),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.CLAMP_TO_EDGE),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.LINEAR),At=bt.heatmapFbo=gt.createFramebuffer(ft.width/4,ft.height/4,!1),function(qt,ne,te,re){var ve=qt.gl;ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,ne.width/4,ne.height/4,0,ve.RGBA,qt.extRenderToTextureHalfFloat?qt.extTextureHalfFloat.HALF_FLOAT_OES:ve.UNSIGNED_BYTE,null),re.colorAttachment.set(te)}(gt,ft,Lt,At)}})(b,l,u),b.clear({color:o.Color.transparent});for(var F=0;F<d.length;F++){var j=d[F];if(!c.hasRenderableParent(j)){var et=c.getTile(j),it=et.getBucket(u);if(it){var ot=it.programConfigurations.get(u.id);l.useProgram("heatmap",ot).draw(b,w.TRIANGLES,at.disabled,E,k,Dt.disabled,Ks(j.posMatrix,et,l.transform.zoom,u.paint.get("heatmap-intensity")),u.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,u.paint,l.transform.zoom,ot)}}}b.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(gt,ft){var bt=gt.context,ht=bt.gl,At=ft.heatmapFbo;if(At){bt.activeTexture.set(ht.TEXTURE0),ht.bindTexture(ht.TEXTURE_2D,At.colorAttachment.get()),bt.activeTexture.set(ht.TEXTURE1);var Lt=ft.colorRampTexture;Lt||(Lt=ft.colorRampTexture=new o.Texture(bt,ft.colorRamp,ht.RGBA)),Lt.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),gt.useProgram("heatmapTexture").draw(bt,ht.TRIANGLES,at.disabled,dt.disabled,gt.colorModeForRenderPass(),Dt.disabled,function(qt,ne,te,re){var ve=o.create();o.ortho(ve,0,qt.width,qt.height,0,0,1);var Ce=qt.context.gl;return{u_matrix:ve,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ne.paint.get("heatmap-opacity")}}(gt,ft),ft.id,gt.viewportBuffer,gt.quadTriangleIndexBuffer,gt.viewportSegments,ft.paint,gt.transform.zoom)}}(l,u))},line:function(l,c,u,d){if(l.renderPass==="translucent"){var b=u.paint.get("line-opacity"),w=u.paint.get("line-width");if(b.constantOr(1)!==0&&w.constantOr(1)!==0)for(var E=l.depthModeForSublayer(0,at.ReadOnly),k=l.colorModeForRenderPass(),F=u.paint.get("line-dasharray"),j=u.paint.get("line-pattern"),et=j.constantOr(1),it=u.paint.get("line-gradient"),ot=u.getCrossfadeParameters(),gt=et?"linePattern":F?"lineSDF":it?"lineGradient":"line",ft=l.context,bt=ft.gl,ht=!0,At=0,Lt=d;At<Lt.length;At+=1){var qt=Lt[At],ne=c.getTile(qt);if(!et||ne.patternsLoaded()){var te=ne.getBucket(u);if(te){var re=te.programConfigurations.get(u.id),ve=l.context.program.get(),Ce=l.useProgram(gt,re),Le=ht||Ce.program!==ve,qe=j.constantOr(null);if(qe&&ne.imageAtlas){var cn=ne.imageAtlas,Sn=cn.patternPositions[qe.to.toString()],Mn=cn.patternPositions[qe.from.toString()];Sn&&Mn&&re.setConstantPatternPositions(Sn,Mn)}var Oi=et?Au(l,ne,u,ot):F?zc(l,ne,u,F,ot):it?Ri(l,ne,u,te.lineClipsArray.length):xl(l,ne,u);if(et)ft.activeTexture.set(bt.TEXTURE0),ne.imageAtlasTexture.bind(bt.LINEAR,bt.CLAMP_TO_EDGE),re.updatePaintBuffers(ot);else if(F&&(Le||l.lineAtlas.dirty))ft.activeTexture.set(bt.TEXTURE0),l.lineAtlas.bind(ft);else if(it){var Je=te.gradients[u.id],kn=Je.texture;if(u.gradientVersion!==Je.version){var Jn=256;if(u.stepInterpolant){var Un=c.getSource().maxzoom,On=qt.canonical.z===Un?Math.ceil(1<<l.transform.maxZoom-qt.canonical.z):1;Jn=o.clamp(o.nextPowerOfTwo(te.maxLineLength/o.EXTENT*1024*On),256,ft.maxTextureSize)}Je.gradient=o.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Jn,image:Je.gradient||void 0,clips:te.lineClipsArray}),Je.texture?Je.texture.update(Je.gradient):Je.texture=new o.Texture(ft,Je.gradient,bt.RGBA),Je.version=u.gradientVersion,kn=Je.texture}ft.activeTexture.set(bt.TEXTURE0),kn.bind(u.stepInterpolant?bt.NEAREST:bt.LINEAR,bt.CLAMP_TO_EDGE)}Ce.draw(ft,bt.TRIANGLES,E,l.stencilModeForClipping(qt),k,Dt.disabled,Oi,u.id,te.layoutVertexBuffer,te.indexBuffer,te.segments,u.paint,l.transform.zoom,re,te.layoutVertexBuffer2),ht=!1}}}}},fill:function(l,c,u,d){var b=u.paint.get("fill-color"),w=u.paint.get("fill-opacity");if(w.constantOr(1)!==0){var E=l.colorModeForRenderPass(),k=u.paint.get("fill-pattern"),F=l.opaquePassEnabledForLayer()&&!k.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===F){var j=l.depthModeForSublayer(1,l.renderPass==="opaque"?at.ReadWrite:at.ReadOnly);ac(l,c,u,d,j,E,!1)}if(l.renderPass==="translucent"&&u.paint.get("fill-antialias")){var et=l.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,at.ReadOnly);ac(l,c,u,d,et,E,!0)}}},"fill-extrusion":function(l,c,u,d){var b=u.paint.get("fill-extrusion-opacity");if(b!==0&&l.renderPass==="translucent"){var w=new at(l.context.gl.LEQUAL,at.ReadWrite,l.depthRangeFor3D);if(b!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Fc(l,c,u,d,w,dt.disabled,St.disabled),Fc(l,c,u,d,w,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var E=l.colorModeForRenderPass();Fc(l,c,u,d,w,dt.disabled,E)}}},hillshade:function(l,c,u,d){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var b=l.context,w=l.depthModeForSublayer(0,at.ReadOnly),E=l.colorModeForRenderPass(),k=l.renderPass==="translucent"?l.stencilConfigForOverlap(d):[{},d],F=k[0],j=0,et=k[1];j<et.length;j+=1){var it=et[j],ot=c.getTile(it);ot.needsHillshadePrepare&&l.renderPass==="offscreen"?Kl(l,ot,u,w,dt.disabled,E):l.renderPass==="translucent"&&Al(l,ot,u,w,F[it.overscaledZ],E)}b.viewport.set([0,0,l.width,l.height])}},raster:function(l,c,u,d){if(l.renderPass==="translucent"&&u.paint.get("raster-opacity")!==0&&d.length)for(var b=l.context,w=b.gl,E=c.getSource(),k=l.useProgram("raster"),F=l.colorModeForRenderPass(),j=E instanceof mn?[{},d]:l.stencilConfigForOverlap(d),et=j[0],it=j[1],ot=it[it.length-1].overscaledZ,gt=!l.options.moving,ft=0,bt=it;ft<bt.length;ft+=1){var ht=bt[ft],At=l.depthModeForSublayer(ht.overscaledZ-ot,u.paint.get("raster-opacity")===1?at.ReadWrite:at.ReadOnly,w.LESS),Lt=c.getTile(ht),qt=l.transform.calculatePosMatrix(ht.toUnwrapped(),gt);Lt.registerFadeDuration(u.paint.get("raster-fade-duration"));var ne=c.findLoadedParent(ht,0),te=ga(Lt,ne,c,u,l.transform),re=void 0,ve=void 0,Ce=u.paint.get("raster-resampling")==="nearest"?w.NEAREST:w.LINEAR;b.activeTexture.set(w.TEXTURE0),Lt.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),b.activeTexture.set(w.TEXTURE1),ne?(ne.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST),re=Math.pow(2,ne.tileID.overscaledZ-Lt.tileID.overscaledZ),ve=[Lt.tileID.canonical.x*re%1,Lt.tileID.canonical.y*re%1]):Lt.texture.bind(Ce,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST);var Le=Oc(qt,ve||[0,0],re||1,te,u);E instanceof mn?k.draw(b,w.TRIANGLES,At,dt.disabled,F,Dt.disabled,Le,u.id,E.boundsBuffer,l.quadTriangleIndexBuffer,E.boundsSegments):k.draw(b,w.TRIANGLES,At,et[ht.overscaledZ],F,Dt.disabled,Le,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,c,u){var d=u.paint.get("background-color"),b=u.paint.get("background-opacity");if(b!==0){var w=l.context,E=w.gl,k=l.transform,F=k.tileSize,j=u.paint.get("background-pattern");if(!l.isPatternMissing(j)){var et=!j&&d.a===1&&b===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===et){var it=dt.disabled,ot=l.depthModeForSublayer(0,et==="opaque"?at.ReadWrite:at.ReadOnly),gt=l.colorModeForRenderPass(),ft=l.useProgram(j?"backgroundPattern":"background"),bt=k.coveringTiles({tileSize:F});j&&(w.activeTexture.set(E.TEXTURE0),l.imageManager.bind(l.context));for(var ht=u.getCrossfadeParameters(),At=0,Lt=bt;At<Lt.length;At+=1){var qt=Lt[At],ne=l.transform.calculatePosMatrix(qt.toUnwrapped()),te=j?Iu(ne,b,l,j,{tileID:qt,tileSize:F},ht):Ms(ne,b,d);ft.draw(w,E.TRIANGLES,ot,it,gt,Dt.disabled,te,u.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,c,u){for(var d=0;d<u.length;d++)he(l,c,u[d])},custom:function(l,c,u){var d=l.context,b=u.implementation;if(l.renderPass==="offscreen"){var w=b.prerender;w&&(l.setCustomLayerDefaults(),d.setColorMode(l.colorModeForRenderPass()),w.call(b,d.gl,l.transform.customLayerMatrix()),d.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),d.setColorMode(l.colorModeForRenderPass()),d.setStencilMode(dt.disabled);var E=b.renderingMode==="3d"?new at(l.context.gl.LEQUAL,at.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,at.ReadOnly);d.setDepthMode(E),b.render(d.gl,l.transform.customLayerMatrix()),d.setDirty(),l.setBaseState(),d.bindFramebuffer.set(null)}}},Ae=function(l,c){this.context=new tt(l),this.transform=c,this._tileTextures={},this.setup(),this.numSublayers=vt.maxUnderzooming+vt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pl,this.gpuTimers={}};Ae.prototype.resize=function(l,c){if(this.width=l*o.browser.devicePixelRatio,this.height=c*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var u=0,d=this.style._order;u<d.length;u+=1)this.style._layers[d[u]].resize()},Ae.prototype.setup=function(){var l=this.context,c=new o.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(o.EXTENT,0),c.emplaceBack(0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(c,Zr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var u=new o.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(o.EXTENT,0),u.emplaceBack(0,o.EXTENT),u.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(u,Zr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var d=new o.StructArrayLayout4i8;d.emplaceBack(0,0,0,0),d.emplaceBack(o.EXTENT,0,o.EXTENT,0),d.emplaceBack(0,o.EXTENT,0,o.EXTENT),d.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(d,Fn.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout2i4;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(b,Zr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var w=new o.StructArrayLayout1ui2;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(w);var E=new o.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(E),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var k=this.context.gl;this.stencilClearMode=new dt({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)},Ae.prototype.clearStencil=function(){var l=this.context,c=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var u=o.create();o.ortho(u,0,this.width,this.height,0,0,1),o.scale(u,u,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,c.TRIANGLES,at.disabled,this.stencilClearMode,St.disabled,Dt.disabled,zo(u),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ae.prototype._renderTileClippingMasks=function(l,c){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&c&&c.length){this.currentStencilSource=l.source;var u=this.context,d=u.gl;this.nextStencilID+c.length>256&&this.clearStencil(),u.setColorMode(St.disabled),u.setDepthMode(at.disabled);var b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var w=0,E=c;w<E.length;w+=1){var k=E[w],F=this._tileClippingMaskIDs[k.key]=this.nextStencilID++;b.draw(u,d.TRIANGLES,at.disabled,new dt({func:d.ALWAYS,mask:0},F,255,d.KEEP,d.KEEP,d.REPLACE),St.disabled,Dt.disabled,zo(k.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ae.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,c=this.context.gl;return new dt({func:c.NOTEQUAL,mask:255},l,255,c.KEEP,c.KEEP,c.REPLACE)},Ae.prototype.stencilModeForClipping=function(l){var c=this.context.gl;return new dt({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,c.KEEP,c.KEEP,c.REPLACE)},Ae.prototype.stencilConfigForOverlap=function(l){var c,u=this.context.gl,d=l.sort(function(F,j){return j.overscaledZ-F.overscaledZ}),b=d[d.length-1].overscaledZ,w=d[0].overscaledZ-b+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();for(var E={},k=0;k<w;k++)E[k+b]=new dt({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[E,d]}return[(c={},c[b]=dt.disabled,c),d]},Ae.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new St([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?St.unblended:St.alphaBlended},Ae.prototype.depthModeForSublayer=function(l,c,u){if(!this.opaquePassEnabledForLayer())return at.disabled;var d=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new at(u||this.context.gl.LEQUAL,c,[d,d])},Ae.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ae.prototype.render=function(l,c){var u=this;this.style=l,this.options=c,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var d=this.style._order,b=this.style.sourceCaches;for(var w in b){var E=b[w];E.used&&E.prepare(this.context)}var k,F,j={},et={},it={};for(var ot in b){var gt=b[ot];j[ot]=gt.getVisibleCoordinates(),et[ot]=j[ot].slice().reverse(),it[ot]=gt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ft=0;ft<d.length;ft++)if(this.style._layers[d[ft]].is3D()){this.opaquePassCutoff=ft;break}this.renderPass="offscreen";for(var bt=0,ht=d;bt<ht.length;bt+=1){var At=this.style._layers[ht[bt]];if(At.hasOffscreenPass()&&!At.isHidden(this.transform.zoom)){var Lt=et[At.source];(At.type==="custom"||Lt.length)&&this.renderLayer(this,b[At.source],At,Lt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){var qt=this.style._layers[d[this.currentLayer]],ne=b[qt.source],te=j[qt.source];this._renderTileClippingMasks(qt,te),this.renderLayer(this,ne,qt,te)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){var re=this.style._layers[d[this.currentLayer]],ve=b[re.source],Ce=(re.type==="symbol"?it:et)[re.source];this._renderTileClippingMasks(re,j[re.source]),this.renderLayer(this,ve,re,Ce)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Le){Le.source&&!Le.isHidden(u.transform.zoom)&&(Le.source!==(F&&F.id)&&(F=u.style.sourceCaches[Le.source]),(!k||k.getSource().maxzoom<F.getSource().maxzoom)&&(k=F))}),k&&Kt.debug(this,k,k.getVisibleCoordinates())),this.options.showPadding&&function(Le){var qe=Le.transform.padding;zi(Le,Le.transform.height-(qe.top||0),3,Wt),zi(Le,qe.bottom||0,3,ue),cr(Le,qe.left||0,3,nn),cr(Le,Le.transform.width-(qe.right||0),3,Dn);var cn=Le.transform.centerPoint;(function(Sn,Mn,Oi,Je){Ot(Sn,Mn-1,Oi-10,2,20,Je),Ot(Sn,Mn-10,Oi-1,20,2,Je)})(Le,cn.x,Le.transform.height-cn.y,vr)}(this),this.context.setDefault()},Ae.prototype.renderLayer=function(l,c,u,d){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||d.length)&&(this.id=u.id,this.gpuTimingStart(u),Kt[u.type](l,c,u,d,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ae.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var c=this.context.extTimerQuery,u=this.gpuTimers[l.id];u||(u=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),u.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,u.query)}},Ae.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},Ae.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},Ae.prototype.queryGpuTimers=function(l){var c={};for(var u in l){var d=l[u],b=this.context.extTimerQuery,w=b.getQueryObjectEXT(d.query,b.QUERY_RESULT_EXT)/1e6;b.deleteQueryEXT(d.query),c[u]=w}return c},Ae.prototype.translatePosMatrix=function(l,c,u,d,b){if(!u[0]&&!u[1])return l;var w=b?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){var E=Math.sin(w),k=Math.cos(w);u=[u[0]*k-u[1]*E,u[0]*E+u[1]*k]}var F=[b?u[0]:gr(c,u[0],this.transform.zoom),b?u[1]:gr(c,u[1],this.transform.zoom),0],j=new Float32Array(16);return o.translate(j,l,F),j},Ae.prototype.saveTileTexture=function(l){var c=this._tileTextures[l.size[0]];c?c.push(l):this._tileTextures[l.size[0]]=[l]},Ae.prototype.getTileTexture=function(l){var c=this._tileTextures[l];return c&&c.length>0?c.pop():null},Ae.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var c=this.imageManager.getPattern(l.from.toString()),u=this.imageManager.getPattern(l.to.toString());return!c||!u},Ae.prototype.useProgram=function(l,c){this.cache=this.cache||{};var u=""+l+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[u]||(this.cache[u]=new Dc(this.context,l,Vr[l],c,Qs[l],this._showOverdrawInspector)),this.cache[u]},Ae.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ae.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},Ae.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ae.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Vn=function(l,c){this.points=l,this.planes=c};Vn.fromInvProjectionMatrix=function(l,c,u){var d=Math.pow(2,u),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return o.transformMat4([],E,l)}).map(function(E){return o.scale$1([],E,1/E[3]/c*d)}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var k=o.sub([],b[E[0]],b[E[1]]),F=o.sub([],b[E[2]],b[E[1]]),j=o.normalize([],o.cross([],k,F)),et=-o.dot(j,b[E[1]]);return j.concat(et)});return new Vn(b,w)};var li=function(l,c){this.min=l,this.max=c,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};li.prototype.quadrant=function(l){for(var c=[l%2==0,l<2],u=o.clone$2(this.min),d=o.clone$2(this.max),b=0;b<c.length;b++)u[b]=c[b]?this.min[b]:this.center[b],d[b]=c[b]?this.center[b]:this.max[b];return d[2]=this.max[2],new li(u,d)},li.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},li.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},li.prototype.intersects=function(l){for(var c=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],u=!0,d=0;d<l.planes.length;d++){for(var b=l.planes[d],w=0,E=0;E<c.length;E++)w+=o.dot$1(b,c[E])>=0;if(w===0)return 0;w!==c.length&&(u=!1)}if(u)return 2;for(var k=0;k<3;k++){for(var F=Number.MAX_VALUE,j=-Number.MAX_VALUE,et=0;et<l.points.length;et++){var it=l.points[et][k]-this.min[k];F=Math.min(F,it),j=Math.max(j,it)}if(j<0||F>this.max[k]-this.min[k])return 0}return 1};var Ii=function(l,c,u,d){if(l===void 0&&(l=0),c===void 0&&(c=0),u===void 0&&(u=0),d===void 0&&(d=0),isNaN(l)||l<0||isNaN(c)||c<0||isNaN(u)||u<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=c,this.left=u,this.right=d};Ii.prototype.interpolate=function(l,c,u){return c.top!=null&&l.top!=null&&(this.top=o.number(l.top,c.top,u)),c.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,c.bottom,u)),c.left!=null&&l.left!=null&&(this.left=o.number(l.left,c.left,u)),c.right!=null&&l.right!=null&&(this.right=o.number(l.right,c.right,u)),this},Ii.prototype.getCenter=function(l,c){var u=o.clamp((this.left+l-this.right)/2,0,l),d=o.clamp((this.top+c-this.bottom)/2,0,c);return new o.Point(u,d)},Ii.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},Ii.prototype.clone=function(){return new Ii(this.top,this.bottom,this.left,this.right)},Ii.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var pn=function(l,c,u,d,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||b,this._minZoom=l||0,this._maxZoom=c||22,this._minPitch=u??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ii,this._posMatrixCache={},this._alignedPosMatrixCache={}},ji={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};pn.prototype.clone=function(){var l=new pn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},ji.minZoom.get=function(){return this._minZoom},ji.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},ji.maxZoom.get=function(){return this._maxZoom},ji.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},ji.minPitch.get=function(){return this._minPitch},ji.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},ji.maxPitch.get=function(){return this._maxPitch},ji.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},ji.renderWorldCopies.get=function(){return this._renderWorldCopies},ji.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},ji.worldSize.get=function(){return this.tileSize*this.scale},ji.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ji.size.get=function(){return new o.Point(this.width,this.height)},ji.bearing.get=function(){return-this.angle/Math.PI*180},ji.bearing.set=function(l){var c=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ji.pitch.get=function(){return this._pitch/Math.PI*180},ji.pitch.set=function(l){var c=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())},ji.fov.get=function(){return this._fov/Math.PI*180},ji.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},ji.zoom.get=function(){return this._zoom},ji.zoom.set=function(l){var c=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom,this._constrain(),this._calcMatrices())},ji.center.get=function(){return this._center},ji.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},ji.padding.get=function(){return this._edgeInsets.toJSON()},ji.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},ji.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},pn.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},pn.prototype.interpolatePadding=function(l,c,u){this._unmodified=!1,this._edgeInsets.interpolate(l,c,u),this._constrain(),this._calcMatrices()},pn.prototype.coveringZoomLevel=function(l){var c=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,c)},pn.prototype.getVisibleUnwrappedCoordinates=function(l){var c=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var u=this.pointCoordinate(new o.Point(0,0)),d=this.pointCoordinate(new o.Point(this.width,0)),b=this.pointCoordinate(new o.Point(this.width,this.height)),w=this.pointCoordinate(new o.Point(0,this.height)),E=Math.floor(Math.min(u.x,d.x,b.x,w.x)),k=Math.floor(Math.max(u.x,d.x,b.x,w.x)),F=E-1;F<=k+1;F++)F!==0&&c.push(new o.UnwrappedTileID(F,l));return c},pn.prototype.coveringTiles=function(l){var c=this.coveringZoomLevel(l),u=c;if(l.minzoom!==void 0&&c<l.minzoom)return[];l.maxzoom!==void 0&&c>l.maxzoom&&(c=l.maxzoom);var d=o.MercatorCoordinate.fromLngLat(this.center),b=Math.pow(2,c),w=[b*d.x,b*d.y,0],E=Vn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c),k=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(k=c);var F=function(Le){return{aabb:new li([Le*b,0,0],[(Le+1)*b,b,0]),zoom:0,x:0,y:0,wrap:Le,fullyVisible:!1}},j=[],et=[],it=c,ot=l.reparseOverscaled?u:c;if(this._renderWorldCopies)for(var gt=1;gt<=3;gt++)j.push(F(-gt)),j.push(F(gt));for(j.push(F(0));j.length>0;){var ft=j.pop(),bt=ft.x,ht=ft.y,At=ft.fullyVisible;if(!At){var Lt=ft.aabb.intersects(E);if(Lt===0)continue;At=Lt===2}var qt=ft.aabb.distanceX(w),ne=ft.aabb.distanceY(w),te=Math.max(Math.abs(qt),Math.abs(ne));if(ft.zoom===it||te>3+(1<<it-ft.zoom)-2&&ft.zoom>=k)et.push({tileID:new o.OverscaledTileID(ft.zoom===it?ot:ft.zoom,ft.wrap,ft.zoom,bt,ht),distanceSq:o.sqrLen([w[0]-.5-bt,w[1]-.5-ht])});else for(var re=0;re<4;re++){var ve=(bt<<1)+re%2,Ce=(ht<<1)+(re>>1);j.push({aabb:ft.aabb.quadrant(re),zoom:ft.zoom+1,x:ve,y:Ce,wrap:ft.wrap,fullyVisible:At})}}return et.sort(function(Le,qe){return Le.distanceSq-qe.distanceSq}).map(function(Le){return Le.tileID})},pn.prototype.resize=function(l,c){this.width=l,this.height=c,this.pixelsToGLUnits=[2/l,-2/c],this._constrain(),this._calcMatrices()},ji.unmodified.get=function(){return this._unmodified},pn.prototype.zoomScale=function(l){return Math.pow(2,l)},pn.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},pn.prototype.project=function(l){var c=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(c)*this.worldSize)},pn.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},ji.point.get=function(){return this.project(this.center)},pn.prototype.setLocationAtPoint=function(l,c){var u=this.pointCoordinate(c),d=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(l),w=new o.MercatorCoordinate(b.x-(u.x-d.x),b.y-(u.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())},pn.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},pn.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},pn.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},pn.prototype.coordinateLocation=function(l){return l.toLngLat()},pn.prototype.pointCoordinate=function(l){var c=[l.x,l.y,0,1],u=[l.x,l.y,1,1];o.transformMat4(c,c,this.pixelMatrixInverse),o.transformMat4(u,u,this.pixelMatrixInverse);var d=c[3],b=u[3],w=c[1]/d,E=u[1]/b,k=c[2]/d,F=u[2]/b,j=k===F?0:(0-k)/(F-k);return new o.MercatorCoordinate(o.number(c[0]/d,u[0]/b,j)/this.worldSize,o.number(w,E,j)/this.worldSize)},pn.prototype.coordinatePoint=function(l){var c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(c,c,this.pixelMatrix),new o.Point(c[0]/c[3],c[1]/c[3])},pn.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},pn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},pn.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},pn.prototype.calculatePosMatrix=function(l,c){c===void 0&&(c=!1);var u=l.key,d=c?this._alignedPosMatrixCache:this._posMatrixCache;if(d[u])return d[u];var b=l.canonical,w=this.worldSize/this.zoomScale(b.z),E=b.x+Math.pow(2,b.z)*l.wrap,k=o.identity(new Float64Array(16));return o.translate(k,k,[E*w,b.y*w,0]),o.scale(k,k,[w/o.EXTENT,w/o.EXTENT,1]),o.multiply(k,c?this.alignedProjMatrix:this.projMatrix,k),d[u]=new Float32Array(k),d[u]},pn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},pn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,c,u,d,b=-90,w=90,E=-180,k=180,F=this.size,j=this._unmodified;if(this.latRange){var et=this.latRange;b=o.mercatorYfromLat(et[1])*this.worldSize,l=(w=o.mercatorYfromLat(et[0])*this.worldSize)-b<F.y?F.y/(w-b):0}if(this.lngRange){var it=this.lngRange;E=o.mercatorXfromLng(it[0])*this.worldSize,c=(k=o.mercatorXfromLng(it[1])*this.worldSize)-E<F.x?F.x/(k-E):0}var ot=this.point,gt=Math.max(c||0,l||0);if(gt)return this.center=this.unproject(new o.Point(c?(k+E)/2:ot.x,l?(w+b)/2:ot.y)),this.zoom+=this.scaleZoom(gt),this._unmodified=j,void(this._constraining=!1);if(this.latRange){var ft=ot.y,bt=F.y/2;ft-bt<b&&(d=b+bt),ft+bt>w&&(d=w-bt)}if(this.lngRange){var ht=ot.x,At=F.x/2;ht-At<E&&(u=E+At),ht+At>k&&(u=k-At)}u===void 0&&d===void 0||(this.center=this.unproject(new o.Point(u!==void 0?u:ot.x,d!==void 0?d:ot.y))),this._unmodified=j,this._constraining=!1}},pn.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var c=Math.PI/2+this._pitch,u=this._fov*(.5+l.y/this.height),d=Math.sin(u)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-c-u,.01,Math.PI-.01)),b=this.point,w=b.x,E=b.y,k=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),F=this.height/50,j=new Float64Array(16);o.perspective(j,this._fov,this.width/this.height,F,k),j[8]=2*-l.x/this.width,j[9]=2*l.y/this.height,o.scale(j,j,[1,-1,1]),o.translate(j,j,[0,0,-this.cameraToCenterDistance]),o.rotateX(j,j,this._pitch),o.rotateZ(j,j,this.angle),o.translate(j,j,[-w,-E,0]),this.mercatorMatrix=o.scale([],j,[this.worldSize,this.worldSize,this.worldSize]),o.scale(j,j,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=j,this.invProjMatrix=o.invert([],this.projMatrix);var et=this.width%2/2,it=this.height%2/2,ot=Math.cos(this.angle),gt=Math.sin(this.angle),ft=w-Math.round(w)+ot*et+gt*it,bt=E-Math.round(E)+ot*it+gt*et,ht=new Float64Array(j);if(o.translate(ht,ht,[ft>.5?ft-1:ft,bt>.5?bt-1:bt,0]),this.alignedProjMatrix=ht,j=o.create(),o.scale(j,j,[this.width/2,-this.height/2,1]),o.translate(j,j,[1,-1,0]),this.labelPlaneMatrix=j,j=o.create(),o.scale(j,j,[1,-1,1]),o.translate(j,j,[-1,-1,0]),o.scale(j,j,[2/this.width,2/this.height,1]),this.glCoordMatrix=j,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(j=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=j,this._posMatrixCache={},this._alignedPosMatrixCache={}}},pn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),c=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance},pn.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},pn.prototype.getCameraQueryGeometry=function(l){var c=this.getCameraPoint();if(l.length===1)return[l[0],c];for(var u=c.x,d=c.y,b=c.x,w=c.y,E=0,k=l;E<k.length;E+=1){var F=k[E];u=Math.min(u,F.x),d=Math.min(d,F.y),b=Math.max(b,F.x),w=Math.max(w,F.y)}return[new o.Point(u,d),new o.Point(b,d),new o.Point(b,w),new o.Point(u,w),new o.Point(u,d)]},Object.defineProperties(pn.prototype,ji);var Zo=function(l){var c,u,d,b;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(c=this._updateHashUnthrottled.bind(this),u=!1,d=null,b=function(){d=null,u&&(c(),d=setTimeout(b,300),u=!1)},function(){return u=!0,d||b(),d})};Zo.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Zo.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Zo.prototype.getHashString=function(l){var c=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,d=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,d),w=Math.round(c.lng*b)/b,E=Math.round(c.lat*b)/b,k=this._map.getBearing(),F=this._map.getPitch(),j="";if(j+=l?"/"+w+"/"+E+"/"+u:u+"/"+E+"/"+w,(k||F)&&(j+="/"+Math.round(10*k)/10),F&&(j+="/"+Math.round(F)),this._hashName){var et=this._hashName,it=!1,ot=o.window.location.hash.slice(1).split("&").map(function(gt){var ft=gt.split("=")[0];return ft===et?(it=!0,ft+"="+j):gt}).filter(function(gt){return gt});return it||ot.push(et+"="+j),"#"+ot.join("&")}return"#"+j},Zo.prototype._getCurrentHash=function(){var l,c=this,u=o.window.location.hash.replace("#","");return this._hashName?(u.split("&").map(function(d){return d.split("=")}).forEach(function(d){d[0]===c._hashName&&(l=d)}),(l&&l[1]||"").split("/")):u.split("/")},Zo.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(u){return isNaN(u)})){var c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:c,pitch:+(l[4]||0)}),!0}return!1},Zo.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var no={linearity:.3,easing:o.bezier(0,0,.3,1)},Ra=o.extend({deceleration:2500,maxSpeed:1400},no),Eu=o.extend({deceleration:20,maxSpeed:1400},no),Su=o.extend({deceleration:1e3,maxSpeed:360},no),Nc=o.extend({deceleration:1e3,maxSpeed:90},no),Zi=function(l){this._map=l,this.clear()};function Ln(l,c){(!l.duration||l.duration<c.duration)&&(l.duration=c.duration,l.easing=c.easing)}function Wa(l,c,u){var d=u.maxSpeed,b=u.linearity,w=u.deceleration,E=o.clamp(l*b/(c/1e3),-d,d),k=Math.abs(E)/(w*b);return{easing:u.easing,duration:1e3*k,amount:E*(k/2)}}Zi.prototype.clear=function(){this._inertiaBuffer=[]},Zi.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},Zi.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,c=o.browser.now();l.length>0&&c-l[0].time>160;)l.shift()},Zi.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var c={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},u=0,d=this._inertiaBuffer;u<d.length;u+=1){var b=d[u].settings;c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround)}var w=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(c.pan.mag()){var k=Wa(c.pan.mag(),w,o.extend({},Ra,l||{}));E.offset=c.pan.mult(k.amount/c.pan.mag()),E.center=this._map.transform.center,Ln(E,k)}if(c.zoom){var F=Wa(c.zoom,w,Eu);E.zoom=this._map.transform.zoom+F.amount,Ln(E,F)}if(c.bearing){var j=Wa(c.bearing,w,Su);E.bearing=this._map.transform.bearing+o.clamp(j.amount,-179,179),Ln(E,j)}if(c.pitch){var et=Wa(c.pitch,w,Nc);E.pitch=this._map.transform.pitch+et.amount,Ln(E,et)}if(E.zoom||E.bearing){var it=c.pinchAround===void 0?c.around:c.pinchAround;E.around=it?this._map.unproject(it):this._map.getCenter()}return this.clear(),o.extend(E,{noMoveStart:!0})}};var hr=function(l){function c(d,b,w,E){E===void 0&&(E={});var k=x.mousePos(b.getCanvasContainer(),w),F=b.unproject(k);l.call(this,d,o.extend({point:k,lngLat:F,originalEvent:w},E)),this._defaultPrevented=!1,this.target=b}l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c;var u={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,u),c}(o.Event),Es=function(l){function c(d,b,w){var E=d==="touchend"?w.changedTouches:w.touches,k=x.touchPos(b.getCanvasContainer(),E),F=k.map(function(it){return b.unproject(it)}),j=k.reduce(function(it,ot,gt,ft){return it.add(ot.div(ft.length))},new o.Point(0,0)),et=b.unproject(j);l.call(this,d,{points:k,point:j,lngLats:F,lngLat:et,originalEvent:w}),this._defaultPrevented=!1}l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c;var u={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,u),c}(o.Event),za=function(l){function c(d,b,w){l.call(this,d,{originalEvent:w}),this._defaultPrevented=!1}l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c;var u={defaultPrevented:{configurable:!0}};return c.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(c.prototype,u),c}(o.Event),ar=function(l,c){this._map=l,this._clickTolerance=c.clickTolerance};ar.prototype.reset=function(){delete this._mousedownPos},ar.prototype.wheel=function(l){return this._firePreventable(new za(l.type,this._map,l))},ar.prototype.mousedown=function(l,c){return this._mousedownPos=c,this._firePreventable(new hr(l.type,this._map,l))},ar.prototype.mouseup=function(l){this._map.fire(new hr(l.type,this._map,l))},ar.prototype.click=function(l,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new hr(l.type,this._map,l))},ar.prototype.dblclick=function(l){return this._firePreventable(new hr(l.type,this._map,l))},ar.prototype.mouseover=function(l){this._map.fire(new hr(l.type,this._map,l))},ar.prototype.mouseout=function(l){this._map.fire(new hr(l.type,this._map,l))},ar.prototype.touchstart=function(l){return this._firePreventable(new Es(l.type,this._map,l))},ar.prototype.touchmove=function(l){this._map.fire(new Es(l.type,this._map,l))},ar.prototype.touchend=function(l){this._map.fire(new Es(l.type,this._map,l))},ar.prototype.touchcancel=function(l){this._map.fire(new Es(l.type,this._map,l))},ar.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},ar.prototype.isEnabled=function(){return!0},ar.prototype.isActive=function(){return!1},ar.prototype.enable=function(){},ar.prototype.disable=function(){};var Ye=function(l){this._map=l};Ye.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ye.prototype.mousemove=function(l){this._map.fire(new hr(l.type,this._map,l))},Ye.prototype.mousedown=function(){this._delayContextMenu=!0},Ye.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new hr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ye.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new hr(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},Ye.prototype.isEnabled=function(){return!0},Ye.prototype.isActive=function(){return!1},Ye.prototype.enable=function(){},Ye.prototype.disable=function(){};var io=function(l,c){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=c.clickTolerance||1};function va(l,c){for(var u={},d=0;d<l.length;d++)u[l[d].identifier]=c[d];return u}io.prototype.isEnabled=function(){return!!this._enabled},io.prototype.isActive=function(){return!!this._active},io.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},io.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},io.prototype.mousedown=function(l,c){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)},io.prototype.mousemoveWindow=function(l,c){if(this._active){var u=c;if(!(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=u,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var b=Math.min(d.x,u.x),w=Math.max(d.x,u.x),E=Math.min(d.y,u.y),k=Math.max(d.y,u.y);x.setTransform(this._box,"translate("+b+"px,"+E+"px)"),this._box.style.width=w-b+"px",this._box.style.height=k-E+"px"}}},io.prototype.mouseupWindow=function(l,c){var u=this;if(this._active&&l.button===0){var d=this._startPos,b=c;if(this.reset(),x.suppressClick(),d.x!==b.x||d.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(w){return w.fitScreenCoordinates(d,b,u._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},io.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},io.prototype.blur=function(){this.reset()},io.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},io.prototype._fireEvent=function(l,c){return this._map.fire(new o.Event(l,{originalEvent:c}))};var ya=function(l){this.reset(),this.numTouches=l.numTouches};ya.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ya.prototype.touchstart=function(l,c,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),u.length===this.numTouches&&(this.centroid=function(d){for(var b=new o.Point(0,0),w=0,E=d;w<E.length;w+=1)b._add(E[w]);return b.div(d.length)}(c),this.touches=va(u,c)))},ya.prototype.touchmove=function(l,c,u){if(!this.aborted&&this.centroid){var d=va(u,c);for(var b in this.touches){var w=d[b];(!w||w.dist(this.touches[b])>30)&&(this.aborted=!0)}}},ya.prototype.touchend=function(l,c,u){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){var d=!this.aborted&&this.centroid;if(this.reset(),d)return d}};var To=function(l){this.singleTap=new ya(l),this.numTaps=l.numTaps,this.reset()};To.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},To.prototype.touchstart=function(l,c,u){this.singleTap.touchstart(l,c,u)},To.prototype.touchmove=function(l,c,u){this.singleTap.touchmove(l,c,u)},To.prototype.touchend=function(l,c,u){var d=this.singleTap.touchend(l,c,u);if(d){var b=l.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(b&&w||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}};var Po=function(){this._zoomIn=new To({numTouches:1,numTaps:2}),this._zoomOut=new To({numTouches:2,numTaps:1}),this.reset()};Po.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Po.prototype.touchstart=function(l,c,u){this._zoomIn.touchstart(l,c,u),this._zoomOut.touchstart(l,c,u)},Po.prototype.touchmove=function(l,c,u){this._zoomIn.touchmove(l,c,u),this._zoomOut.touchmove(l,c,u)},Po.prototype.touchend=function(l,c,u){var d=this,b=this._zoomIn.touchend(l,c,u),w=this._zoomOut.touchend(l,c,u);return b?(this._active=!0,l.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(b)},{originalEvent:l})}}):w?(this._active=!0,l.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(w)},{originalEvent:l})}}):void 0},Po.prototype.touchcancel=function(){this.reset()},Po.prototype.enable=function(){this._enabled=!0},Po.prototype.disable=function(){this._enabled=!1,this.reset()},Po.prototype.isEnabled=function(){return this._enabled},Po.prototype.isActive=function(){return this._active};var Ql={0:1,2:2},Re=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};Re.prototype.blur=function(){this.reset()},Re.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Re.prototype._correctButton=function(l,c){return!1},Re.prototype._move=function(l,c){return{}},Re.prototype.mousedown=function(l,c){if(!this._lastPoint){var u=x.mouseButton(l);this._correctButton(l,u)&&(this._lastPoint=c,this._eventButton=u)}},Re.prototype.mousemoveWindow=function(l,c){var u=this._lastPoint;if(u){if(l.preventDefault(),function(d,b){var w=Ql[b];return d.buttons===void 0||(d.buttons&w)!==w}(l,this._eventButton))this.reset();else if(this._moved||!(c.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(u,c)}},Re.prototype.mouseupWindow=function(l){this._lastPoint&&x.mouseButton(l)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},Re.prototype.enable=function(){this._enabled=!0},Re.prototype.disable=function(){this._enabled=!1,this.reset()},Re.prototype.isEnabled=function(){return this._enabled},Re.prototype.isActive=function(){return this._active};var Js=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.mousedown=function(u,d){l.prototype.mousedown.call(this,u,d),this._lastPoint&&(this._active=!0)},c.prototype._correctButton=function(u,d){return d===0&&!u.ctrlKey},c.prototype._move=function(u,d){return{around:d,panDelta:d.sub(u)}},c}(Re),wl=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype._correctButton=function(u,d){return d===0&&u.ctrlKey||d===2},c.prototype._move=function(u,d){var b=.8*(d.x-u.x);if(b)return this._active=!0,{bearingDelta:b}},c.prototype.contextmenu=function(u){u.preventDefault()},c}(Re),Cl=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype._correctButton=function(u,d){return d===0&&u.ctrlKey||d===2},c.prototype._move=function(u,d){var b=-.5*(d.y-u.y);if(b)return this._active=!0,{pitchDelta:b}},c.prototype.contextmenu=function(u){u.preventDefault()},c}(Re),ro=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};ro.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},ro.prototype.touchstart=function(l,c,u){return this._calculateTransform(l,c,u)},ro.prototype.touchmove=function(l,c,u){if(this._active&&!(u.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,c,u)},ro.prototype.touchend=function(l,c,u){this._calculateTransform(l,c,u),this._active&&u.length<this._minTouches&&this.reset()},ro.prototype.touchcancel=function(){this.reset()},ro.prototype._calculateTransform=function(l,c,u){u.length>0&&(this._active=!0);var d=va(u,c),b=new o.Point(0,0),w=new o.Point(0,0),E=0;for(var k in d){var F=d[k],j=this._touches[k];j&&(b._add(F),w._add(F.sub(j)),E++,d[k]=F)}if(this._touches=d,!(E<this._minTouches)&&w.mag()){var et=w.div(E);if(this._sum._add(et),!(this._sum.mag()<this._clickTolerance))return{around:b.div(E),panDelta:et}}},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var ho=function(){this.reset()};function hf(l,c,u){for(var d=0;d<l.length;d++)if(l[d].identifier===u)return c[d]}function ff(l,c){return Math.log(l/c)/Math.LN2}ho.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ho.prototype._start=function(l){},ho.prototype._move=function(l,c,u){return{}},ho.prototype.touchstart=function(l,c,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([c[0],c[1]]))},ho.prototype.touchmove=function(l,c,u){if(this._firstTwoTouches){l.preventDefault();var d=this._firstTwoTouches,b=d[1],w=hf(u,c,d[0]),E=hf(u,c,b);if(w&&E){var k=this._aroundCenter?null:w.add(E).div(2);return this._move([w,E],k,l)}}},ho.prototype.touchend=function(l,c,u){if(this._firstTwoTouches){var d=this._firstTwoTouches,b=d[1],w=hf(u,c,d[0]),E=hf(u,c,b);w&&E||(this._active&&x.suppressClick(),this.reset())}},ho.prototype.touchcancel=function(){this.reset()},ho.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var Za=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},c.prototype._start=function(u){this._startDistance=this._distance=u[0].dist(u[1])},c.prototype._move=function(u,d){var b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(ff(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ff(this._distance,b),pinchAround:d}},c}(ho);function Ss(l,c){return 180*l.angleWith(c)/Math.PI}var yh=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},c.prototype._start=function(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])},c.prototype._move=function(u,d){var b=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ss(this._vector,b),pinchAround:d}},c.prototype._isBelowThreshold=function(u){this._minDiameter=Math.min(this._minDiameter,u.mag());var d=25/(Math.PI*this._minDiameter)*360,b=Ss(u,this._startVector);return Math.abs(b)<d},c}(ho);function sc(l){return Math.abs(l.y)>Math.abs(l.x)}var pp=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},c.prototype._start=function(u){this._lastPoints=u,sc(u[0].sub(u[1]))&&(this._valid=!1)},c.prototype._move=function(u,d,b){var w=u[0].sub(this._lastPoints[0]),E=u[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(w,E,b.timeStamp),this._valid)return this._lastPoints=u,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}},c.prototype.gestureBeginsVertically=function(u,d,b){if(this._valid!==void 0)return this._valid;var w=u.mag()>=2,E=d.mag()>=2;if(w||E){if(!w||!E)return this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0;var k=u.y>0==d.y>0;return sc(u)&&sc(d)&&k}},c}(ho),pf={panStep:100,bearingStep:15,pitchStep:10},tl=function(){var l=pf;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function cs(l){return l*(2-l)}tl.prototype.blur=function(){this.reset()},tl.prototype.reset=function(){this._active=!1},tl.prototype.keydown=function(l){var c=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=0,d=0,b=0,w=0,E=0;switch(l.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:l.shiftKey?d=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?d=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?b=1:(l.preventDefault(),E=-1);break;case 40:l.shiftKey?b=-1:(l.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,b=0),{cameraAnimation:function(k){var F=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:cs,zoom:u?Math.round(F)+u*(l.shiftKey?2:1):F,bearing:k.getBearing()+d*c._bearingStep,pitch:k.getPitch()+b*c._pitchStep,offset:[-w*c._panStep,-E*c._panStep],center:k.getCenter()},{originalEvent:l})}}}},tl.prototype.enable=function(){this._enabled=!0},tl.prototype.disable=function(){this._enabled=!1,this.reset()},tl.prototype.isEnabled=function(){return this._enabled},tl.prototype.isActive=function(){return this._active},tl.prototype.disableRotation=function(){this._rotationDisabled=!0},tl.prototype.enableRotation=function(){this._rotationDisabled=!1};var Rn=function(l,c){this._map=l,this._el=l.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};Rn.prototype.setZoomRate=function(l){this._defaultZoomRate=l},Rn.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},Rn.prototype.isEnabled=function(){return!!this._enabled},Rn.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Rn.prototype.isZooming=function(){return!!this._zooming},Rn.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},Rn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Rn.prototype.wheel=function(l){if(this.isEnabled()){var c=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,u=o.browser.now(),d=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,c!==0&&c%4.000244140625==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(d*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),l.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=l,this._delta-=c,this._active||this._start(l)),l.preventDefault()}},Rn.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},Rn.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var c=x.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(c)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Rn.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var c=this._map.transform;if(this._delta!==0){var u=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,d=2/(1+Math.exp(-Math.abs(this._delta*u)));this._delta<0&&d!==0&&(d=1/d);var b=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(b*d))),this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var w,E=typeof this._targetZoom=="number"?this._targetZoom:c.zoom,k=this._startZoom,F=this._easing,j=!1;if(this._type==="wheel"&&k&&F){var et=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),it=F(et);w=o.number(k,E,it),et<1?this._frameId||(this._frameId=!0):j=!0}else w=E,j=!0;return this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:w-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Rn.prototype._smoothOutEasing=function(l){var c=o.ease;if(this._prevEase){var u=this._prevEase,d=(o.browser.now()-u.start)/u.duration,b=u.easing(d+.01)-u.easing(d),w=.27/Math.sqrt(b*b+1e-4)*.01,E=Math.sqrt(.0729-w*w);c=o.bezier(w,E,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:c},c},Rn.prototype.blur=function(){this.reset()},Rn.prototype.reset=function(){this._active=!1};var Yr=function(l,c){this._clickZoom=l,this._tapZoom=c};Yr.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Yr.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Yr.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Yr.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ts=function(){this.reset()};Ts.prototype.reset=function(){this._active=!1},Ts.prototype.blur=function(){this.reset()},Ts.prototype.dblclick=function(l,c){return l.preventDefault(),{cameraAnimation:function(u){u.easeTo({duration:300,zoom:u.getZoom()+(l.shiftKey?-1:1),around:u.unproject(c)},{originalEvent:l})}}},Ts.prototype.enable=function(){this._enabled=!0},Ts.prototype.disable=function(){this._enabled=!1,this.reset()},Ts.prototype.isEnabled=function(){return this._enabled},Ts.prototype.isActive=function(){return this._active};var Yo=function(){this._tap=new To({numTouches:1,numTaps:1}),this.reset()};Yo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Yo.prototype.touchstart=function(l,c,u){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=c[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(l,c,u))},Yo.prototype.touchmove=function(l,c,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;var d=c[0],b=d.y-this._swipePoint.y;return this._swipePoint=d,l.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(l,c,u)},Yo.prototype.touchend=function(l,c,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(l,c,u)&&(this._tapTime=l.timeStamp)},Yo.prototype.touchcancel=function(){this.reset()},Yo.prototype.enable=function(){this._enabled=!0},Yo.prototype.disable=function(){this._enabled=!1,this.reset()},Yo.prototype.isEnabled=function(){return this._enabled},Yo.prototype.isActive=function(){return this._active};var Tu=function(l,c,u){this._el=l,this._mousePan=c,this._touchPan=u};Tu.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Tu.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Tu.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Tu.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Pu=function(l,c,u){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=c,this._mousePitch=u};Pu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Pu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Pu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Pu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var hs=function(l,c,u,d){this._el=l,this._touchZoom=c,this._touchRotate=u,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0};hs.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},hs.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},hs.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},hs.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},hs.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},hs.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Lo=function(l){return l.zoom||l.drag||l.pitch||l.rotate},lc=function(l){function c(){l.apply(this,arguments)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c}(o.Event);function vn(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var un=function(l,c){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zi(l),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c),o.bindAll(["handleEvent","handleWindowEvent"],this);var u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[o.window,"blur",void 0]];for(var d=0,b=this._listeners;d<b.length;d+=1){var w=b[d],E=w[0];x.addEventListener(E,w[1],E===o.window.document?this.handleWindowEvent:this.handleEvent,w[2])}};un.prototype.destroy=function(){for(var l=0,c=this._listeners;l<c.length;l+=1){var u=c[l],d=u[0];x.removeEventListener(d,u[1],d===o.window.document?this.handleWindowEvent:this.handleEvent,u[2])}},un.prototype._addDefaultHandlers=function(l){var c=this._map,u=c.getCanvasContainer();this._add("mapEvent",new ar(c,l));var d=c.boxZoom=new io(c,l);this._add("boxZoom",d);var b=new Po,w=new Ts;c.doubleClickZoom=new Yr(w,b),this._add("tapZoom",b),this._add("clickZoom",w);var E=new Yo;this._add("tapDragZoom",E);var k=c.touchPitch=new pp;this._add("touchPitch",k);var F=new wl(l),j=new Cl(l);c.dragRotate=new Pu(l,F,j),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);var et=new Js(l),it=new ro(l);c.dragPan=new Tu(u,et,it),this._add("mousePan",et),this._add("touchPan",it,["touchZoom","touchRotate"]);var ot=new yh,gt=new Za;c.touchZoomRotate=new hs(u,gt,ot,E),this._add("touchRotate",ot,["touchPan","touchZoom"]),this._add("touchZoom",gt,["touchPan","touchRotate"]);var ft=c.scrollZoom=new Rn(c,this);this._add("scrollZoom",ft,["mousePan"]);var bt=c.keyboard=new tl;this._add("keyboard",bt),this._add("blockableMapEvent",new Ye(c));for(var ht=0,At=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ht<At.length;ht+=1){var Lt=At[ht];l.interactive&&l[Lt]&&c[Lt].enable(l[Lt])}},un.prototype._add=function(l,c,u){this._handlers.push({handlerName:l,handler:c,allowed:u}),this._handlersById[l]=c},un.prototype.stop=function(l){if(!this._updatingCamera){for(var c=0,u=this._handlers;c<u.length;c+=1)u[c].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},un.prototype.isActive=function(){for(var l=0,c=this._handlers;l<c.length;l+=1)if(c[l].handler.isActive())return!0;return!1},un.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},un.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},un.prototype.isMoving=function(){return!!Lo(this._eventsInProgress)||this.isZooming()},un.prototype._blockedByActive=function(l,c,u){for(var d in l)if(d!==u&&(!c||c.indexOf(d)<0))return!0;return!1},un.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},un.prototype._getMapTouches=function(l){for(var c=[],u=0,d=l;u<d.length;u+=1){var b=d[u];this._el.contains(b.target)&&c.push(b)}return c},un.prototype.handleEvent=function(l,c){this._updatingCamera=!0;for(var u=l.type==="renderFrame"?void 0:l,d={needsRenderFrame:!1},b={},w={},E=l.touches?this._getMapTouches(l.touches):void 0,k=E?x.touchPos(this._el,E):x.mousePos(this._el,l),F=0,j=this._handlers;F<j.length;F+=1){var et=j[F],it=et.handlerName,ot=et.handler,gt=et.allowed;if(ot.isEnabled()){var ft=void 0;this._blockedByActive(w,gt,it)?ot.reset():ot[c||l.type]&&(ft=ot[c||l.type](l,k,E),this.mergeHandlerResult(d,b,ft,it,u),ft&&ft.needsRenderFrame&&this._triggerRenderFrame()),(ft||ot.isActive())&&(w[it]=ot)}}var bt={};for(var ht in this._previousActiveHandlers)w[ht]||(bt[ht]=u);this._previousActiveHandlers=w,(Object.keys(bt).length||vn(d))&&(this._changes.push([d,b,bt]),this._triggerRenderFrame()),(Object.keys(w).length||vn(d))&&this._map._stop(!0),this._updatingCamera=!1;var At=d.cameraAnimation;At&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],At(this._map))},un.prototype.mergeHandlerResult=function(l,c,u,d,b){if(u){o.extend(l,u);var w={handlerName:d,originalEvent:u.originalEvent||b};u.zoomDelta!==void 0&&(c.zoom=w),u.panDelta!==void 0&&(c.drag=w),u.pitchDelta!==void 0&&(c.pitch=w),u.bearingDelta!==void 0&&(c.rotate=w)}},un.prototype._applyChanges=function(){for(var l={},c={},u={},d=0,b=this._changes;d<b.length;d+=1){var w=b[d],E=w[0],k=w[1],F=w[2];E.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(l.around=E.around),E.pinchAround!==void 0&&(l.pinchAround=E.pinchAround),E.noInertia&&(l.noInertia=E.noInertia),o.extend(c,k),o.extend(u,F)}this._updateMapTransform(l,c,u),this._changes=[]},un.prototype._updateMapTransform=function(l,c,u){var d=this._map,b=d.transform;if(!vn(l))return this._fireEvents(c,u,!0);var w=l.panDelta,E=l.zoomDelta,k=l.bearingDelta,F=l.pitchDelta,j=l.around,et=l.pinchAround;et!==void 0&&(j=et),d._stop(!0),j=j||d.transform.centerPoint;var it=b.pointLocation(w?j.sub(w):j);k&&(b.bearing+=k),F&&(b.pitch+=F),E&&(b.zoom+=E),b.setLocationAtPoint(it,j),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(c,u,!0)},un.prototype._fireEvents=function(l,c,u){var d=this,b=Lo(this._eventsInProgress),w=Lo(l),E={};for(var k in l)this._eventsInProgress[k]||(E[k+"start"]=l[k].originalEvent),this._eventsInProgress[k]=l[k];for(var F in!b&&w&&this._fireEvent("movestart",w.originalEvent),E)this._fireEvent(F,E[F]);for(var j in w&&this._fireEvent("move",w.originalEvent),l)this._fireEvent(j,l[j].originalEvent);var et,it={};for(var ot in this._eventsInProgress){var gt=this._eventsInProgress[ot],ft=gt.handlerName,bt=gt.originalEvent;this._handlersById[ft].isActive()||(delete this._eventsInProgress[ot],it[ot+"end"]=et=c[ft]||bt)}for(var ht in it)this._fireEvent(ht,it[ht]);var At=Lo(this._eventsInProgress);if(u&&(b||w)&&!At){this._updatingCamera=!0;var Lt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qt=function(ne){return ne!==0&&-d._bearingSnap<ne&&ne<d._bearingSnap};Lt?(qt(Lt.bearing||this._map.getBearing())&&(Lt.bearing=0),this._map.easeTo(Lt,{originalEvent:et})):(this._map.fire(new o.Event("moveend",{originalEvent:et})),qt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},un.prototype._fireEvent=function(l,c){this._map.fire(new o.Event(l,c?{originalEvent:c}:{}))},un.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(c){delete l._frameId,l.handleEvent(new lc("renderFrame",{timeStamp:c})),l._applyChanges()})},un.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Lu=function(l){function c(u,d){l.call(this),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=d.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},c.prototype.setCenter=function(u,d){return this.jumpTo({center:u},d)},c.prototype.panBy=function(u,d,b){return u=o.Point.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},d),b)},c.prototype.panTo=function(u,d,b){return this.easeTo(o.extend({center:u},d),b)},c.prototype.getZoom=function(){return this.transform.zoom},c.prototype.setZoom=function(u,d){return this.jumpTo({zoom:u},d),this},c.prototype.zoomTo=function(u,d,b){return this.easeTo(o.extend({zoom:u},d),b)},c.prototype.zoomIn=function(u,d){return this.zoomTo(this.getZoom()+1,u,d),this},c.prototype.zoomOut=function(u,d){return this.zoomTo(this.getZoom()-1,u,d),this},c.prototype.getBearing=function(){return this.transform.bearing},c.prototype.setBearing=function(u,d){return this.jumpTo({bearing:u},d),this},c.prototype.getPadding=function(){return this.transform.padding},c.prototype.setPadding=function(u,d){return this.jumpTo({padding:u},d),this},c.prototype.rotateTo=function(u,d,b){return this.easeTo(o.extend({bearing:u},d),b)},c.prototype.resetNorth=function(u,d){return this.rotateTo(0,o.extend({duration:1e3},u),d),this},c.prototype.resetNorthPitch=function(u,d){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),d),this},c.prototype.snapToNorth=function(u,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,d):this},c.prototype.getPitch=function(){return this.transform.pitch},c.prototype.setPitch=function(u,d){return this.jumpTo({pitch:u},d),this},c.prototype.cameraForBounds=function(u,d){u=o.LngLatBounds.convert(u);var b=d&&d.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,d)},c.prototype._cameraForBoxAndBearing=function(u,d,b,w){var E={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){var k=w.padding;w.padding={top:k,bottom:k,right:k,left:k}}w.padding=o.extend(E,w.padding);var F=this.transform,j=F.padding,et=F.project(o.LngLat.convert(u)),it=F.project(o.LngLat.convert(d)),ot=et.rotate(-b*Math.PI/180),gt=it.rotate(-b*Math.PI/180),ft=new o.Point(Math.max(ot.x,gt.x),Math.max(ot.y,gt.y)),bt=new o.Point(Math.min(ot.x,gt.x),Math.min(ot.y,gt.y)),ht=ft.sub(bt),At=(F.width-(j.left+j.right+w.padding.left+w.padding.right))/ht.x,Lt=(F.height-(j.top+j.bottom+w.padding.top+w.padding.bottom))/ht.y;if(!(Lt<0||At<0)){var qt=Math.min(F.scaleZoom(F.scale*Math.min(At,Lt)),w.maxZoom),ne=typeof w.offset.x=="number"?new o.Point(w.offset.x,w.offset.y):o.Point.convert(w.offset),te=new o.Point((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(b*Math.PI/180),re=ne.add(te).mult(F.scale/F.zoomScale(qt));return{center:F.unproject(et.add(it).div(2).sub(re)),zoom:qt,bearing:b}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},c.prototype.fitBounds=function(u,d,b){return this._fitInternal(this.cameraForBounds(u,d),d,b)},c.prototype.fitScreenCoordinates=function(u,d,b,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(u)),this.transform.pointLocation(o.Point.convert(d)),b,w),w,E)},c.prototype._fitInternal=function(u,d,b){return u?(delete(d=o.extend(u,d)).padding,d.linear?this.easeTo(d,b):this.flyTo(d,b)):this},c.prototype.jumpTo=function(u,d){this.stop();var b=this.transform,w=!1,E=!1,k=!1;return"zoom"in u&&b.zoom!==+u.zoom&&(w=!0,b.zoom=+u.zoom),u.center!==void 0&&(b.center=o.LngLat.convert(u.center)),"bearing"in u&&b.bearing!==+u.bearing&&(E=!0,b.bearing=+u.bearing),"pitch"in u&&b.pitch!==+u.pitch&&(k=!0,b.pitch=+u.pitch),u.padding==null||b.isPaddingEqual(u.padding)||(b.padding=u.padding),this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),w&&this.fire(new o.Event("zoomstart",d)).fire(new o.Event("zoom",d)).fire(new o.Event("zoomend",d)),E&&this.fire(new o.Event("rotatestart",d)).fire(new o.Event("rotate",d)).fire(new o.Event("rotateend",d)),k&&this.fire(new o.Event("pitchstart",d)).fire(new o.Event("pitch",d)).fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d))},c.prototype.easeTo=function(u,d){var b=this;this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.browser.prefersReducedMotion)&&(u.duration=0);var w=this.transform,E=this.getZoom(),k=this.getBearing(),F=this.getPitch(),j=this.getPadding(),et="zoom"in u?+u.zoom:E,it="bearing"in u?this._normalizeBearing(u.bearing,k):k,ot="pitch"in u?+u.pitch:F,gt="padding"in u?u.padding:w.padding,ft=o.Point.convert(u.offset),bt=w.centerPoint.add(ft),ht=w.pointLocation(bt),At=o.LngLat.convert(u.center||ht);this._normalizeCenter(At);var Lt,qt,ne=w.project(ht),te=w.project(At).sub(ne),re=w.zoomScale(et-E);u.around&&(Lt=o.LngLat.convert(u.around),qt=w.locationPoint(Lt));var ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||et!==E,this._rotating=this._rotating||k!==it,this._pitching=this._pitching||ot!==F,this._padding=!w.isPaddingEqual(gt),this._easeId=u.easeId,this._prepareEase(d,u.noMoveStart,ve),this._ease(function(Ce){if(b._zooming&&(w.zoom=o.number(E,et,Ce)),b._rotating&&(w.bearing=o.number(k,it,Ce)),b._pitching&&(w.pitch=o.number(F,ot,Ce)),b._padding&&(w.interpolatePadding(j,gt,Ce),bt=w.centerPoint.add(ft)),Lt)w.setLocationAtPoint(Lt,qt);else{var Le=w.zoomScale(w.zoom-E),qe=et>E?Math.min(2,re):Math.max(.5,re),cn=Math.pow(qe,1-Ce),Sn=w.unproject(ne.add(te.mult(Ce*cn)).mult(Le));w.setLocationAtPoint(w.renderWorldCopies?Sn.wrap():Sn,bt)}b._fireMoveEvents(d)},function(Ce){b._afterEase(d,Ce)},u),this},c.prototype._prepareEase=function(u,d,b){b===void 0&&(b={}),this._moving=!0,d||b.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!b.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new o.Event("pitchstart",u))},c.prototype._fireMoveEvents=function(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))},c.prototype._afterEase=function(u,d){if(!this._easeId||!d||this._easeId!==d){delete this._easeId;var b=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,b&&this.fire(new o.Event("zoomend",u)),w&&this.fire(new o.Event("rotateend",u)),E&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}},c.prototype.flyTo=function(u,d){var b=this;if(!u.essential&&o.browser.prefersReducedMotion){var w=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(w,d)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);var E=this.transform,k=this.getZoom(),F=this.getBearing(),j=this.getPitch(),et=this.getPadding(),it="zoom"in u?o.clamp(+u.zoom,E.minZoom,E.maxZoom):k,ot="bearing"in u?this._normalizeBearing(u.bearing,F):F,gt="pitch"in u?+u.pitch:j,ft="padding"in u?u.padding:E.padding,bt=E.zoomScale(it-k),ht=o.Point.convert(u.offset),At=E.centerPoint.add(ht),Lt=E.pointLocation(At),qt=o.LngLat.convert(u.center||Lt);this._normalizeCenter(qt);var ne=E.project(Lt),te=E.project(qt).sub(ne),re=u.curve,ve=Math.max(E.width,E.height),Ce=ve/bt,Le=te.mag();if("minZoom"in u){var qe=o.clamp(Math.min(u.minZoom,k,it),E.minZoom,E.maxZoom),cn=ve/E.zoomScale(qe-k);re=Math.sqrt(cn/Le*2)}var Sn=re*re;function Mn(Bn){var dn=(Ce*Ce-ve*ve+(Bn?-1:1)*Sn*Sn*Le*Le)/(2*(Bn?Ce:ve)*Sn*Le);return Math.log(Math.sqrt(dn*dn+1)-dn)}function Oi(Bn){return(Math.exp(Bn)-Math.exp(-Bn))/2}function Je(Bn){return(Math.exp(Bn)+Math.exp(-Bn))/2}var kn=Mn(0),Jn=function(Bn){return Je(kn)/Je(kn+re*Bn)},Un=function(Bn){return ve*((Je(kn)*(Oi(dn=kn+re*Bn)/Je(dn))-Oi(kn))/Sn)/Le;var dn},On=(Mn(1)-kn)/re;if(Math.abs(Le)<1e-6||!isFinite(On)){if(Math.abs(ve-Ce)<1e-6)return this.easeTo(u,d);var ti=Ce<ve?-1:1;On=Math.abs(Math.log(Ce/ve))/re,Un=function(){return 0},Jn=function(Bn){return Math.exp(ti*re*Bn)}}return u.duration="duration"in u?+u.duration:1e3*On/("screenSpeed"in u?+u.screenSpeed/re:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=F!==ot,this._pitching=gt!==j,this._padding=!E.isPaddingEqual(ft),this._prepareEase(d,!1),this._ease(function(Bn){var dn=Bn*On,po=1/Jn(dn);E.zoom=Bn===1?it:k+E.scaleZoom(po),b._rotating&&(E.bearing=o.number(F,ot,Bn)),b._pitching&&(E.pitch=o.number(j,gt,Bn)),b._padding&&(E.interpolatePadding(et,ft,Bn),At=E.centerPoint.add(ht));var Xr=Bn===1?qt:E.unproject(ne.add(te.mult(Un(dn))).mult(po));E.setLocationAtPoint(E.renderWorldCopies?Xr.wrap():Xr,At),b._fireMoveEvents(d)},function(){return b._afterEase(d)},u),this},c.prototype.isEasing=function(){return!!this._easeFrameId},c.prototype.stop=function(){return this._stop()},c.prototype._stop=function(u,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,d)}if(!u){var w=this.handlers;w&&w.stop(!1)}return this},c.prototype._ease=function(u,d,b){b.animate===!1||b.duration===0?(u(1),d()):(this._easeStart=o.browser.now(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},c.prototype._renderFrameCallback=function(){var u=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},c.prototype._normalizeBearing=function(u,d){u=o.wrap(u,-180,180);var b=Math.abs(u-d);return Math.abs(u-360-d)<b&&(u-=360),Math.abs(u+360-d)<b&&(u+=360),u},c.prototype._normalizeCenter=function(u){var d=this.transform;if(d.renderWorldCopies&&!d.lngRange){var b=u.lng-d.center.lng;u.lng+=b>180?-360:b<-180?360:0}},c}(o.Evented),Bo=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Bo.prototype.getDefaultPosition=function(){return"bottom-right"},Bo.prototype.onAdd=function(l){var c=this.options&&this.options.compact;return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Bo.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Bo.prototype._setElementTitle=function(l,c){var u=this._map._getUIString("AttributionControl."+c);l.title=u,l.setAttribute("aria-label",u)},Bo.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Bo.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var u=c.reduce(function(d,b,w){return b.value&&(d+=b.key+"="+b.value+(w<c.length-1?"&":"")),d},"?");l.href=o.config.FEEDBACK_URL+"/"+u+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},Bo.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Bo.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(k){return typeof k!="string"?"":k})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var c=this._map.style.stylesheet;this.styleOwner=c.owner,this.styleId=c.id}var u=this._map.style.sourceCaches;for(var d in u){var b=u[d];if(b.used){var w=b.getSource();w.attribution&&l.indexOf(w.attribution)<0&&l.push(w.attribution)}}l.sort(function(k,F){return k.length-F.length});var E=(l=l.filter(function(k,F){for(var j=F+1;j<l.length;j++)if(l[j].indexOf(k)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,l.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Bo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var _a=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};_a.prototype.onAdd=function(l){this._map=l,this._container=x.create("div","mapboxgl-ctrl");var c=x.create("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},_a.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},_a.prototype.getDefaultPosition=function(){return"bottom-left"},_a.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},_a.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var c in l)if(l[c].getSource().mapbox_logo)return!0;return!1}},_a.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var c=l[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}};var Xo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Xo.prototype.add=function(l){var c=++this._id;return this._queue.push({callback:l,id:c,cancelled:!1}),c},Xo.prototype.remove=function(l){for(var c=this._currentlyRunning,u=0,d=c?this._queue.concat(c):this._queue;u<d.length;u+=1){var b=d[u];if(b.id===l)return void(b.cancelled=!0)}},Xo.prototype.run=function(l){l===void 0&&(l=0);var c=this._currentlyRunning=this._queue;this._queue=[];for(var u=0,d=c;u<d.length;u+=1){var b=d[u];if(!b.cancelled&&(b.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Xo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Il={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},dp=o.window.HTMLImageElement,df=o.window.HTMLElement,Ji=o.window.ImageBitmap,fo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Vc=function(l){function c(d){var b=this;if((d=o.extend({},fo,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var w=new pn(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(l.call(this,w,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new Xo,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Il,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new o.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=o.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else{if(!(d.container instanceof df))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return b._update(!1)}),this.on("moveend",function(){return b._update(!1)}),this.on("zoom",function(){return b._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new un(this,d),this._hash=d.hash&&new Zo(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,o.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Bo({customAttribution:d.customAttribution})),this.addControl(new _a,d.logoPosition),this.on("style.load",function(){b.transform.unmodified&&b.jumpTo(b.style.stylesheet)}),this.on("data",function(E){b._update(E.dataType==="style"),b.fire(new o.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){b.fire(new o.Event(E.dataType+"dataloading",E))})}l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c;var u={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return c.prototype._getMapId=function(){return this._mapId},c.prototype.addControl=function(d,b){if(b===void 0&&(b=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var w=d.onAdd(this);this._controls.push(d);var E=this._controlPositions[b];return b.indexOf("bottom")!==-1?E.insertBefore(w,E.firstChild):E.appendChild(w),this},c.prototype.removeControl=function(d){if(!d||!d.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var b=this._controls.indexOf(d);return b>-1&&this._controls.splice(b,1),d.onRemove(this),this},c.prototype.hasControl=function(d){return this._controls.indexOf(d)>-1},c.prototype.resize=function(d){var b=this._containerDimensions(),w=b[0],E=b[1];if(w===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(w,E),this.transform.resize(w,E),this.painter.resize(w,E);var k=!this._moving;return k&&this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),this.fire(new o.Event("resize",d)),k&&this.fire(new o.Event("moveend",d)),this},c.prototype.getBounds=function(){return this.transform.getBounds()},c.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},c.prototype.setMaxBounds=function(d){return this.transform.setMaxBounds(o.LngLatBounds.convert(d)),this._update()},c.prototype.setMinZoom=function(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},c.prototype.getMinZoom=function(){return this.transform.minZoom},c.prototype.setMaxZoom=function(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")},c.prototype.getMaxZoom=function(){return this.transform.maxZoom},c.prototype.setMinPitch=function(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},c.prototype.getMinPitch=function(){return this.transform.minPitch},c.prototype.setMaxPitch=function(d){if((d=d??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")},c.prototype.getMaxPitch=function(){return this.transform.maxPitch},c.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},c.prototype.setRenderWorldCopies=function(d){return this.transform.renderWorldCopies=d,this._update()},c.prototype.project=function(d){return this.transform.locationPoint(o.LngLat.convert(d))},c.prototype.unproject=function(d){return this.transform.pointLocation(o.Point.convert(d))},c.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},c.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},c.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},c.prototype._createDelegatedListener=function(d,b,w){var E,k=this;if(d==="mouseenter"||d==="mouseover"){var F=!1;return{layer:b,listener:w,delegates:{mousemove:function(et){var it=k.getLayer(b)?k.queryRenderedFeatures(et.point,{layers:[b]}):[];it.length?F||(F=!0,w.call(k,new hr(d,k,et.originalEvent,{features:it}))):F=!1},mouseout:function(){F=!1}}}}if(d==="mouseleave"||d==="mouseout"){var j=!1;return{layer:b,listener:w,delegates:{mousemove:function(et){(k.getLayer(b)?k.queryRenderedFeatures(et.point,{layers:[b]}):[]).length?j=!0:j&&(j=!1,w.call(k,new hr(d,k,et.originalEvent)))},mouseout:function(et){j&&(j=!1,w.call(k,new hr(d,k,et.originalEvent)))}}}}return{layer:b,listener:w,delegates:(E={},E[d]=function(et){var it=k.getLayer(b)?k.queryRenderedFeatures(et.point,{layers:[b]}):[];it.length&&(et.features=it,w.call(k,et),delete et.features)},E)}},c.prototype.on=function(d,b,w){if(w===void 0)return l.prototype.on.call(this,d,b);var E=this._createDelegatedListener(d,b,w);for(var k in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(E),E.delegates)this.on(k,E.delegates[k]);return this},c.prototype.once=function(d,b,w){if(w===void 0)return l.prototype.once.call(this,d,b);var E=this._createDelegatedListener(d,b,w);for(var k in E.delegates)this.once(k,E.delegates[k]);return this},c.prototype.off=function(d,b,w){var E=this;return w===void 0?l.prototype.off.call(this,d,b):(this._delegatedListeners&&this._delegatedListeners[d]&&function(k){for(var F=k[d],j=0;j<F.length;j++){var et=F[j];if(et.layer===b&&et.listener===w){for(var it in et.delegates)E.off(it,et.delegates[it]);return F.splice(j,1),E}}}(this._delegatedListeners),this)},c.prototype.queryRenderedFeatures=function(d,b){if(!this.style)return[];var w;if(b!==void 0||d===void 0||d instanceof o.Point||Array.isArray(d)||(b=d,d=void 0),b=b||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof d[0]=="number")w=[o.Point.convert(d)];else{var E=o.Point.convert(d[0]),k=o.Point.convert(d[1]);w=[E,new o.Point(k.x,E.y),k,new o.Point(E.x,k.y),E]}return this.style.queryRenderedFeatures(w,b,this.transform)},c.prototype.querySourceFeatures=function(d,b){return this.style.querySourceFeatures(d,b)},c.prototype.setStyle=function(d,b){return(b=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},b)).diff!==!1&&b.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,b),this):(this._localIdeographFontFamily=b.localIdeographFontFamily,this._updateStyle(d,b))},c.prototype._getUIString=function(d){var b=this._locale[d];if(b==null)throw new Error("Missing UI string '"+d+"'");return b},c.prototype._updateStyle=function(d,b){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new Ci(this,b||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)},c.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ci(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},c.prototype._diffStyle=function(d,b){var w=this;if(typeof d=="string"){var E=this._requestManager.normalizeStyleURL(d),k=this._requestManager.transformRequest(E,o.ResourceType.Style);o.getJSON(k,function(F,j){F?w.fire(new o.ErrorEvent(F)):j&&w._updateDiff(j,b)})}else typeof d=="object"&&this._updateDiff(d,b)},c.prototype._updateDiff=function(d,b){try{this.style.setState(d)&&this._update(!0)}catch(w){o.warnOnce("Unable to perform style diff: "+(w.message||w.error||w)+".  Rebuilding the style from scratch."),this._updateStyle(d,b)}},c.prototype.getStyle=function(){if(this.style)return this.style.serialize()},c.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},c.prototype.addSource=function(d,b){return this._lazyInitEmptyStyle(),this.style.addSource(d,b),this._update(!0)},c.prototype.isSourceLoaded=function(d){var b=this.style&&this.style.sourceCaches[d];if(b!==void 0)return b.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+d+"'")))},c.prototype.areTilesLoaded=function(){var d=this.style&&this.style.sourceCaches;for(var b in d){var w=d[b]._tiles;for(var E in w){var k=w[E];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0},c.prototype.addSourceType=function(d,b,w){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,b,w)},c.prototype.removeSource=function(d){return this.style.removeSource(d),this._update(!0)},c.prototype.getSource=function(d){return this.style.getSource(d)},c.prototype.addImage=function(d,b,w){w===void 0&&(w={});var E=w.pixelRatio;E===void 0&&(E=1);var k=w.sdf;k===void 0&&(k=!1);var F=w.stretchX,j=w.stretchY,et=w.content;if(this._lazyInitEmptyStyle(),b instanceof dp||Ji&&b instanceof Ji){var it=o.browser.getImageData(b);this.style.addImage(d,{data:new o.RGBAImage({width:it.width,height:it.height},it.data),pixelRatio:E,stretchX:F,stretchY:j,content:et,sdf:k,version:0})}else{if(b.width===void 0||b.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ot=b;this.style.addImage(d,{data:new o.RGBAImage({width:b.width,height:b.height},new Uint8Array(b.data)),pixelRatio:E,stretchX:F,stretchY:j,content:et,sdf:k,version:0,userImage:ot}),ot.onAdd&&ot.onAdd(this,d)}},c.prototype.updateImage=function(d,b){var w=this.style.getImage(d);if(!w)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=b instanceof dp||Ji&&b instanceof Ji?o.browser.getImageData(b):b,k=E.width,F=E.height,j=E.data;return k===void 0||F===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):k!==w.data.width||F!==w.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(w.data.replace(j,!(b instanceof dp||Ji&&b instanceof Ji)),void this.style.updateImage(d,w))},c.prototype.hasImage=function(d){return d?!!this.style.getImage(d):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},c.prototype.removeImage=function(d){this.style.removeImage(d)},c.prototype.loadImage=function(d,b){o.getImage(this._requestManager.transformRequest(d,o.ResourceType.Image),b)},c.prototype.listImages=function(){return this.style.listImages()},c.prototype.addLayer=function(d,b){return this._lazyInitEmptyStyle(),this.style.addLayer(d,b),this._update(!0)},c.prototype.moveLayer=function(d,b){return this.style.moveLayer(d,b),this._update(!0)},c.prototype.removeLayer=function(d){return this.style.removeLayer(d),this._update(!0)},c.prototype.getLayer=function(d){return this.style.getLayer(d)},c.prototype.setLayerZoomRange=function(d,b,w){return this.style.setLayerZoomRange(d,b,w),this._update(!0)},c.prototype.setFilter=function(d,b,w){return w===void 0&&(w={}),this.style.setFilter(d,b,w),this._update(!0)},c.prototype.getFilter=function(d){return this.style.getFilter(d)},c.prototype.setPaintProperty=function(d,b,w,E){return E===void 0&&(E={}),this.style.setPaintProperty(d,b,w,E),this._update(!0)},c.prototype.getPaintProperty=function(d,b){return this.style.getPaintProperty(d,b)},c.prototype.setLayoutProperty=function(d,b,w,E){return E===void 0&&(E={}),this.style.setLayoutProperty(d,b,w,E),this._update(!0)},c.prototype.getLayoutProperty=function(d,b){return this.style.getLayoutProperty(d,b)},c.prototype.setLight=function(d,b){return b===void 0&&(b={}),this._lazyInitEmptyStyle(),this.style.setLight(d,b),this._update(!0)},c.prototype.getLight=function(){return this.style.getLight()},c.prototype.setFeatureState=function(d,b){return this.style.setFeatureState(d,b),this._update()},c.prototype.removeFeatureState=function(d,b){return this.style.removeFeatureState(d,b),this._update()},c.prototype.getFeatureState=function(d){return this.style.getFeatureState(d)},c.prototype.getContainer=function(){return this._container},c.prototype.getCanvasContainer=function(){return this._canvasContainer},c.prototype.getCanvas=function(){return this._canvas},c.prototype._containerDimensions=function(){var d=0,b=0;return this._container&&(d=this._container.clientWidth||400,b=this._container.clientHeight||300),[d,b]},c.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},c.prototype._setupContainer=function(){var d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();var b=this._canvasContainer=x.create("div","mapboxgl-canvas-container",d);this._interactive&&b.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",b),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var w=this._containerDimensions();this._resizeCanvas(w[0],w[1]);var E=this._controlContainer=x.create("div","mapboxgl-control-container",d),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(F){k[F]=x.create("div","mapboxgl-ctrl-"+F,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},c.prototype._resizeCanvas=function(d,b){var w=o.browser.devicePixelRatio||1;this._canvas.width=w*d,this._canvas.height=w*b,this._canvas.style.width=d+"px",this._canvas.style.height=b+"px"},c.prototype._setupPainter=function(){var d=o.extend({},y.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),b=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);b?(this.painter=new Ae(b,this.transform),o.webpSupported.testSupport(b)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},c.prototype._contextLost=function(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:d}))},c.prototype._contextRestored=function(d){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:d}))},c.prototype._onMapScroll=function(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},c.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},c.prototype._update=function(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this},c.prototype._requestRenderFrame=function(d){return this._update(),this._renderTaskQueue.add(d)},c.prototype._cancelRenderFrame=function(d){this._renderTaskQueue.remove(d)},c.prototype._render=function(d){var b,w=this,E=0,k=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(b=k.createQueryEXT(),k.beginQueryEXT(k.TIME_ELAPSED_EXT,b),E=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),!this._removed){var F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var j=this.transform.zoom,et=o.browser.now();this.style.zoomHistory.update(j,et);var it=new o.EvaluationParameters(j,{now:et,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ot=it.crossFadingFactor();ot===1&&ot===this._crossFadingFactor||(F=!0,this._crossFadingFactor=ot),this.style.update(it)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var gt=o.browser.now()-E;k.endQueryEXT(k.TIME_ELAPSED_EXT,b),setTimeout(function(){var ht=k.getQueryObjectEXT(b,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(b),w.fire(new o.Event("gpu-timing-frame",{cpuTime:gt,gpuTime:ht}))},50)}if(this.listens("gpu-timing-layer")){var ft=this.painter.collectGpuTimers();setTimeout(function(){var ht=w.painter.queryGpuTimers(ft);w.fire(new o.Event("gpu-timing-layer",{layerTimes:ht}))},50)}var bt=this._sourcesDirty||this._styleDirty||this._placementDirty;return bt||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||bt||(this._fullyLoaded=!0),this}},c.prototype.remove=function(){this._hash&&this._hash.remove();for(var d=0,b=this._controls;d<b.length;d+=1)b[d].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var w=this.painter.context.gl.getExtension("WEBGL_lose_context");w&&w.loseContext(),ku(this._canvasContainer),ku(this._controlContainer),ku(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},c.prototype.triggerRepaint=function(){var d=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(b){d._frame=null,d._render(b)}))},c.prototype._onWindowOnline=function(){this._update()},c.prototype._onWindowResize=function(d){this._trackResize&&this.resize({originalEvent:d})._update()},u.showTileBoundaries.get=function(){return!!this._showTileBoundaries},u.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},u.showPadding.get=function(){return!!this._showPadding},u.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},u.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},u.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},u.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},u.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},u.repaint.get=function(){return!!this._repaint},u.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},u.vertices.get=function(){return!!this._vertices},u.vertices.set=function(d){this._vertices=d,this._update()},c.prototype._setCacheLimits=function(d,b){o.setCacheLimits(d,b)},u.version.get=function(){return o.version},Object.defineProperties(c.prototype,u),c}(Lu);function ku(l){l.parentNode&&l.parentNode.removeChild(l)}var rt={showCompass:!0,showZoom:!0,visualizePitch:!1},Ya=function(l){var c=this;this.options=o.extend({},rt,l),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(u){return u.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(u){return c._map.zoomIn({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(u){return c._map.zoomOut({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(u){c.options.visualizePitch?c._map.resetNorthPitch({},{originalEvent:u}):c._map.resetNorth({},{originalEvent:u})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ya.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),c=l===this._map.getMaxZoom(),u=l===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},Ya.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},Ya.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ea(this._map,this._compass,this.options.visualizePitch)),this._container},Ya.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ya.prototype._createButton=function(l,c){var u=x.create("button",l,this._container);return u.type="button",u.addEventListener("click",c),u},Ya.prototype._setButtonTitle=function(l,c){var u=this._map._getUIString("NavigationControl."+c);l.title=u,l.setAttribute("aria-label",u)};var ea=function(l,c,u){u===void 0&&(u=!1),this._clickTolerance=10,this.element=c,this.mouseRotate=new wl({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,u&&(this.mousePitch=new Cl({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(c,"mousedown",this.mousedown),x.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(c,"touchmove",this.touchmove),x.addEventListener(c,"touchend",this.touchend),x.addEventListener(c,"touchcancel",this.reset)};function na(l,c,u){if(l=new o.LngLat(l.lng,l.lat),c){var d=new o.LngLat(l.lng-360,l.lat),b=new o.LngLat(l.lng+360,l.lat),w=u.locationPoint(l).distSqr(c);u.locationPoint(d).distSqr(c)<w?l=d:u.locationPoint(b).distSqr(c)<w&&(l=b)}for(;Math.abs(l.lng-u.center.lng)>180;){var E=u.locationPoint(l);if(E.x>=0&&E.y>=0&&E.x<=u.width&&E.y<=u.height)break;l.lng>u.center.lng?l.lng-=360:l.lng+=360}return l}ea.prototype.down=function(l,c){this.mouseRotate.mousedown(l,c),this.mousePitch&&this.mousePitch.mousedown(l,c),x.disableDrag()},ea.prototype.move=function(l,c){var u=this.map,d=this.mouseRotate.mousemoveWindow(l,c);if(d&&d.bearingDelta&&u.setBearing(u.getBearing()+d.bearingDelta),this.mousePitch){var b=this.mousePitch.mousemoveWindow(l,c);b&&b.pitchDelta&&u.setPitch(u.getPitch()+b.pitchDelta)}},ea.prototype.off=function(){var l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(l,"touchmove",this.touchmove),x.removeEventListener(l,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},ea.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(o.window,"mousemove",this.mousemove),x.removeEventListener(o.window,"mouseup",this.mouseup)},ea.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),x.mousePos(this.element,l)),x.addEventListener(o.window,"mousemove",this.mousemove),x.addEventListener(o.window,"mouseup",this.mouseup)},ea.prototype.mousemove=function(l){this.move(l,x.mousePos(this.element,l))},ea.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},ea.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},ea.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},ea.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ea.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var di={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function mf(l,c,u){var d=l.classList;for(var b in di)d.remove("mapboxgl-"+u+"-anchor-"+b);d.add("mapboxgl-"+u+"-anchor-"+c)}var Uc,_h=function(l){function c(u,d){if(l.call(this),(u instanceof o.window.HTMLElement||d)&&(u=o.extend({element:u},d)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var b=x.createNS("http://www.w3.org/2000/svg","svg");b.setAttributeNS(null,"display","block"),b.setAttributeNS(null,"height","41px"),b.setAttributeNS(null,"width","27px"),b.setAttributeNS(null,"viewBox","0 0 27 41");var w=x.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");var E=x.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var k=x.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");for(var F=0,j=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];F<j.length;F+=1){var et=j[F],it=x.createNS("http://www.w3.org/2000/svg","ellipse");it.setAttributeNS(null,"opacity","0.04"),it.setAttributeNS(null,"cx","10.5"),it.setAttributeNS(null,"cy","5.80029008"),it.setAttributeNS(null,"rx",et.rx),it.setAttributeNS(null,"ry",et.ry),k.appendChild(it)}var ot=x.createNS("http://www.w3.org/2000/svg","g");ot.setAttributeNS(null,"fill",this._color);var gt=x.createNS("http://www.w3.org/2000/svg","path");gt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ot.appendChild(gt);var ft=x.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"fill","#000000");var bt=x.createNS("http://www.w3.org/2000/svg","path");bt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ft.appendChild(bt);var ht=x.createNS("http://www.w3.org/2000/svg","g");ht.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ht.setAttributeNS(null,"fill","#FFFFFF");var At=x.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Lt=x.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#000000"),Lt.setAttributeNS(null,"opacity","0.25"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962");var qt=x.createNS("http://www.w3.org/2000/svg","circle");qt.setAttributeNS(null,"fill","#FFFFFF"),qt.setAttributeNS(null,"cx","5.5"),qt.setAttributeNS(null,"cy","5.5"),qt.setAttributeNS(null,"r","5.4999962"),At.appendChild(Lt),At.appendChild(qt),E.appendChild(k),E.appendChild(ot),E.appendChild(ft),E.appendChild(ht),E.appendChild(At),b.appendChild(E),b.setAttributeNS(null,"height",41*this._scale+"px"),b.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(b),this._offset=o.Point.convert(u&&u.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ne){ne.preventDefault()}),this._element.addEventListener("mousedown",function(ne){ne.preventDefault()}),mf(this._element,this._anchor,"marker"),this._popup=null}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.addTo=function(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},c.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},c.prototype.getElement=function(){return this._element},c.prototype.setPopup=function(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){var d=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(24.6+d)],"bottom-right":[-d,-1*(24.6+d)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},c.prototype._onKeyPress=function(u){var d=u.code,b=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&b!==32&&b!==13||this.togglePopup()},c.prototype._onMapClick=function(u){var d=u.originalEvent.target,b=this._element;this._popup&&(d===b||b.contains(d))&&this.togglePopup()},c.prototype.getPopup=function(){return this._popup},c.prototype.togglePopup=function(){var u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this},c.prototype._update=function(u){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=na(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(d="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b="rotateX("+this._map.getPitch()+"deg)"),u&&u.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,di[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+b+" "+d)}},c.prototype.getOffset=function(){return this._offset},c.prototype.setOffset=function(u){return this._offset=o.Point.convert(u),this._update(),this},c.prototype._onMove=function(u){if(!this._isDragging){var d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},c.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},c.prototype._addDragHandler=function(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},c.prototype.setDraggable=function(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},c.prototype.isDraggable=function(){return this._draggable},c.prototype.setRotation=function(u){return this._rotation=u||0,this._update(),this},c.prototype.getRotation=function(){return this._rotation},c.prototype.setRotationAlignment=function(u){return this._rotationAlignment=u||"auto",this._update(),this},c.prototype.getRotationAlignment=function(){return this._rotationAlignment},c.prototype.setPitchAlignment=function(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this},c.prototype.getPitchAlignment=function(){return this._pitchAlignment},c}(o.Evented),$l={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},jc=0,uc=!1,mp=function(l){function c(u){l.call(this),this.options=o.extend({},$l,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.onAdd=function(u){var d;return this._map=u,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,Uc!==void 0?d(Uc):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(b){d(Uc=b.state!=="denied")}):d(Uc=!!o.window.navigator.geolocation),this._container},c.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,jc=0,uc=!1},c.prototype._isOutOfMapMaxBounds=function(u){var d=this._map.getMaxBounds(),b=u.coords;return d&&(b.longitude<d.getWest()||b.longitude>d.getEast()||b.latitude<d.getSouth()||b.latitude>d.getNorth())},c.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},c.prototype._onSuccess=function(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}},c.prototype._updateCamera=function(u){var d=new o.LngLat(u.coords.longitude,u.coords.latitude),b=u.coords.accuracy,w=this._map.getBearing(),E=o.extend({bearing:w},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(b),E,{geolocateSource:!0})},c.prototype._updateMarker=function(u){if(u){var d=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},c.prototype._updateCircleRadius=function(){var u=this._map._container.clientHeight/2,d=this._map.unproject([0,u]),b=this._map.unproject([1,u]),w=d.distanceTo(b),E=Math.ceil(2*this._accuracy/w);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},c.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},c.prototype._onError=function(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&uc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}},c.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},c.prototype._setupUI=function(u){var d=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",u===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}else{var w=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=w,this._geolocateButton.setAttribute("aria-label",w)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new _h(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new _h({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||d._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(d._watchState="BACKGROUND",d._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),d._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),d.fire(new o.Event("trackuserlocationend")))})},c.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jc--,uc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++jc>1?(u={maximumAge:6e5,timeout:0},uc=!0):(u=this.options.positionOptions,uc=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},c.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},c}(o.Evented),Du={maxWidth:100,unit:"metric"},Ru=function(l){this.options=o.extend({},Du,l),o.bindAll(["_onMove","setUnit"],this)};function Ps(l,c,u){var d=u&&u.maxWidth||100,b=l._container.clientHeight/2,w=l.unproject([0,b]),E=l.unproject([d,b]),k=w.distanceTo(E);if(u&&u.unit==="imperial"){var F=3.2808*k;F>5280?zu(c,d,F/5280,l._getUIString("ScaleControl.Miles")):zu(c,d,F,l._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?zu(c,d,k/1852,l._getUIString("ScaleControl.NauticalMiles")):k>=1e3?zu(c,d,k/1e3,l._getUIString("ScaleControl.Kilometers")):zu(c,d,k,l._getUIString("ScaleControl.Meters"))}function zu(l,c,u,d){var b,w,E,k=(b=u,(w=Math.pow(10,(""+Math.floor(b)).length-1))*(E=(E=b/w)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(F){var j=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*j)/j}(E)));l.style.width=c*(k/u)+"px",l.innerHTML=k+"&nbsp;"+d}Ru.prototype.getDefaultPosition=function(){return"bottom-left"},Ru.prototype._onMove=function(){Ps(this._map,this._container,this.options)},Ru.prototype.onAdd=function(l){return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ru.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ru.prototype.setUnit=function(l){this.options.unit=l,Ps(this._map,this._container,this.options)};var Ls=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ls.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ls.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ls.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},Ls.prototype._setupUI=function(){var l=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ls.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},Ls.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ls.prototype._isFullscreen=function(){return this._fullscreen},Ls.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ls.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var gp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),vp=function(l){function c(u){l.call(this),this.options=o.extend(Object.create(gp),u),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(c.__proto__=l),(c.prototype=Object.create(l&&l.prototype)).constructor=c,c.prototype.addTo=function(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},c.prototype.isOpen=function(){return!!this._map},c.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},c.prototype.getLngLat=function(){return this._lngLat},c.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},c.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},c.prototype.getElement=function(){return this._container},c.prototype.setText=function(u){return this.setDOMContent(o.window.document.createTextNode(u))},c.prototype.setHTML=function(u){var d,b=o.window.document.createDocumentFragment(),w=o.window.document.createElement("body");for(w.innerHTML=u;d=w.firstChild;)b.appendChild(d);return this.setDOMContent(b)},c.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},c.prototype.setMaxWidth=function(u){return this.options.maxWidth=u,this._update(),this},c.prototype.setDOMContent=function(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this},c.prototype.addClassName=function(u){this._container&&this._container.classList.add(u)},c.prototype.removeClassName=function(u){this._container&&this._container.classList.remove(u)},c.prototype.setOffset=function(u){return this.options.offset=u,this._update(),this},c.prototype.toggleClassName=function(u){if(this._container)return this._container.classList.toggle(u)},c.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},c.prototype._onMouseUp=function(u){this._update(u.point)},c.prototype._onMouseMove=function(u){this._update(u.point)},c.prototype._onDrag=function(u){this._update(u.point)},c.prototype._update=function(u){var d=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(it){return d._container.classList.add(it)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=na(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||u)){var b=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat),w=this.options.anchor,E=function it(ot){if(ot){if(typeof ot=="number"){var gt=Math.round(Math.sqrt(.5*Math.pow(ot,2)));return{center:new o.Point(0,0),top:new o.Point(0,ot),"top-left":new o.Point(gt,gt),"top-right":new o.Point(-gt,gt),bottom:new o.Point(0,-ot),"bottom-left":new o.Point(gt,-gt),"bottom-right":new o.Point(-gt,-gt),left:new o.Point(ot,0),right:new o.Point(-ot,0)}}if(ot instanceof o.Point||Array.isArray(ot)){var ft=o.Point.convert(ot);return{center:ft,top:ft,"top-left":ft,"top-right":ft,bottom:ft,"bottom-left":ft,"bottom-right":ft,left:ft,right:ft}}return{center:o.Point.convert(ot.center||[0,0]),top:o.Point.convert(ot.top||[0,0]),"top-left":o.Point.convert(ot["top-left"]||[0,0]),"top-right":o.Point.convert(ot["top-right"]||[0,0]),bottom:o.Point.convert(ot.bottom||[0,0]),"bottom-left":o.Point.convert(ot["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(ot["bottom-right"]||[0,0]),left:o.Point.convert(ot.left||[0,0]),right:o.Point.convert(ot.right||[0,0])}}return it(new o.Point(0,0))}(this.options.offset);if(!w){var k,F=this._container.offsetWidth,j=this._container.offsetHeight;k=b.y+E.bottom.y<j?["top"]:b.y>this._map.transform.height-j?["bottom"]:[],b.x<F/2?k.push("left"):b.x>this._map.transform.width-F/2&&k.push("right"),w=k.length===0?"bottom":k.join("-")}var et=b.add(E[w]).round();x.setTransform(this._container,di[w]+" translate("+et.x+"px,"+et.y+"px)"),mf(this._container,w,"popup")}},c.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var u=this._container.querySelector(xh);u&&u.focus()}},c.prototype._onClose=function(){this.remove()},c}(o.Evented),ks={version:o.version,supported:y,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Vc,NavigationControl:Ya,GeolocateControl:mp,AttributionControl:Bo,ScaleControl:Ru,FullscreenControl:Ls,Popup:vp,Marker:_h,Style:Ci,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){oe().acquire(ie)},clearPrewarmedResources:function(){var l=sn;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(ie),sn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return ye.workerCount},set workerCount(l){ye.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return ks}),h})})(NI);var z0=NI.exports;const Pg=l_(z0),f8=tr({__name:"GeoLocateControl",props:{...rs},setup(t){const{coords:n,error:i,resume:a,pause:h}=c8({immediate:!1}),m=t,{mapId:o,callMap:y,moduleContainerProps:x}=Io(m),{trans:M,setLocale:T}=fa(o.value);T({map:{action:{"geolocate-control-find-my-location":"Find my location","geolocate-control-location-not-available":"Location not available"}}});const P=$e(!1),L=$e(),O=$e(0);let W,H,nt=$e(void 0),lt=$e(void 0);const K=rn(()=>i.value?b5:wv),$=rn(()=>i.value?i.value.message||M.value("map.action.geolocate-control-location-not-available"):M.value("map.action.geolocate-control-find-my-location"));hl(n,Ut=>{Ut.longitude==Number.POSITIVE_INFINITY||Ut.latitude==Number.POSITIVE_INFINITY||(L.value=[Ut.longitude,Ut.latitude],Ct(),O.value=Ut.accuracy)});async function yt(){y(Ut=>{if(!P.value){P.value=!0,a(),gu(()=>{L.value&&Ut.flyTo({center:sp(L),zoom:14})});return}if(Qt(Ut,sp(n))){Ut.flyTo({center:L.value,zoom:14});return}h(),P.value=!1,L.value=void 0,Rt()})}UR(()=>{Rt()});function Rt(){y(Ut=>{Ut.off("zoom",Gt)}),nt.value&&nt.value.remove(),lt.value&&lt.value.remove()}TI(()=>{W||(W=kt("div","mapboxgl-user-location"),W.classList.add("mapboxgl-user-location"),W.appendChild(kt("div","mapboxgl-user-location-dot")),W.appendChild(kt("div","mapboxgl-user-location-heading"))),H||(H=kt("div","mapboxgl-user-location-accuracy-circle"))});function Ct(){nt.value=new z0.Marker({element:W,rotationAlignment:"map",pitchAlignment:"map"}),lt.value=new z0.Marker({element:H,pitchAlignment:"map"}),y(Ut=>{Ut.on("zoom",Gt),L.value&&(nt.value&&nt.value.setLngLat(L.value).addTo(Ut),lt.value&&lt.value.setLngLat(L.value).addTo(Ut)),Et(Ut)})}function Et(Ut){const Nt=Ut.getContainer().getBoundingClientRect().height/2,Bt=Ut.unproject([0,Nt]),de=Ut.unproject([100,Nt]),bn=Bt.distanceTo(de)/100,_e=Math.ceil(2*O.value/bn);H.style.width=`${_e}px`,H.style.height=`${_e}px`}function Gt(Ut){Et(Ut.target)}const kt=function(Ut,Nt,Bt){const de=window.document.createElement(Ut);return Nt!==void 0&&(de.className=Nt),de};function Qt(Ut,Nt){const Bt=Ut.getBounds();return Bt&&(Nt.longitude<Bt.getWest()||Nt.longitude>Bt.getEast()||Nt.latitude<Bt.getSouth()||Nt.latitude>Bt.getNorth())}return(Ut,Nt)=>(wt(),Ve(Ta,Sa(ha(X(x))),{btn:se(()=>[jt(Tr,{disabled:!!X(i),icon:K.value,tooltip:$.value,active:P.value,onClick:Ho(yt,["stop"])},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:K.value},null,8,["path"])]),_:1},8,["disabled","icon","tooltip","active"])]),default:se(()=>[qn(Ut.$slots,"default")]),_:3},16))}}),p8={class:"setting-container"},d8={class:"setting-field-container"},m8={class:"setting-center-container"},g8={__name:"GotoControl",props:{...rs},setup(t){const n=t,[i,a]=rd(!1),{callMap:h,mapId:m,moduleContainerProps:o}=Io(n),{trans:y,setLocale:x}=fa(m.value);x({map:{"goto-control":{title:"Go to",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Go to"}}}});function M(){a(!i.value),i.value&&h(L=>{T.value.zoom=L.getZoom(),T.value.center=[L.getCenter().lng.toFixed(6),L.getCenter().lat.toFixed(6)],T.value.sprite=L.getStyle().sprite,T.value.glyphs=L.getStyle().glyphs})}const T=$e({zoom:null,center:null,sprite:null,glyphs:null}),P=()=>{h(L=>{T.value.zoom&&L.setZoom(T.value.zoom),T.value.center&&L.setCenter(T.value.center)})};return(L,O)=>(wt(),Ve(Ta,Sa(ha(X(o))),{btn:se(()=>[jt(Tr,{onClick:O[0]||(O[0]=Ho(W=>M(),["stop"])),tooltip:X(y)("map.goto-control.title")},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:X(fb)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:se(W=>[X(i)?(wt(),Ve(X(af),mr({key:0,height:300,width:400},W,{show:X(i),"onUpdate:show":O[5]||(O[5]=H=>Ea(i)?i.value=H:null),title:X(y)("map.goto-control.title")}),{default:se(()=>[zt("div",p8,[zt("div",d8,[zt("div",null,[zt("label",null,oi(X(y)("map.goto-control.field.center")),1),zt("div",m8,[jt(X(la),{modelValue:T.value.center[0],"onUpdate:modelValue":O[1]||(O[1]=H=>T.value.center[0]=H),type:"number",step:"0.0000001"},null,8,["modelValue"]),jt(X(la),{modelValue:T.value.center[1],"onUpdate:modelValue":O[2]||(O[2]=H=>T.value.center[1]=H),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),zt("div",null,[jt(X(la),{label:X(y)("map.goto-control.field.zoom"),modelValue:T.value.zoom,"onUpdate:modelValue":O[3]||(O[3]=H=>T.value.zoom=H),type:"number",min:"0",max:"24"},null,8,["label","modelValue"])])]),jt(X(id),{class:"btn-container",onClick:O[4]||(O[4]=H=>P())},{default:se(()=>[Va(oi(X(y)("map.goto-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):gn("v-if",!0)]),default:se(()=>[qn(L.$slots,"default")]),_:3},16))}},v8=tr({__name:"HomeControl",props:{...rs,zoom:Number,center:Array},setup(t){const n=t,i=$e({lat:0,lng:0}),a=$e(n.zoom||0),{callMap:h,mapId:m,moduleContainerProps:o}=Io(n,T),{trans:y,setLocale:x}=fa(m.value);x({map:{home:{title:"Default view"}}});function M(){h(P=>{P.setZoom(a.value),P.setCenter(i.value)})}function T(P){n.zoom!=null?a.value=n.zoom:a.value=P.getZoom(),n.center!=null?(i.value.lat=n.center[1],i.value.lng=n.center[0]):i.value=P.getCenter()}return(P,L)=>(wt(),Ve(Ta,Sa(ha(X(o))),{btn:se(()=>[jt(Tr,{onClick:M,tooltip:X(y)("map.home.title")},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:X(T5)},null,8,["path"])]),_:1},8,["tooltip"])]),default:se(()=>[qn(P.$slots,"default")]),_:3},16))}}),y8=tr({__name:"ActionControl",props:{...rs},setup(t){const n=t,{callMap:i,mapId:a,moduleContainerProps:h}=Io(n),m={},o=ua(a.value,ld),y=rn(()=>o.items);hl(y,M=>{x(M)},{deep:!0});function x(M){const T=Sb.groupBy(M,L=>L.event_map_type),P=[];i(L=>{for(const O in T)if(P.push(O),Object.prototype.hasOwnProperty.call(T,O)){const W=T[O],H=m[O],nt=W[0];if(H&&H.id===nt.id)return;H&&H.removeFromMap(L),m[O]=nt,nt&&nt.addToMap(L),Nw(a.value,O,nt)}for(const O in m)if(Object.prototype.hasOwnProperty.call(m,O)){const W=m[O];!P.includes(O)&&W&&(W.removeFromMap(L),Nw(a.value,O,void 0),m[O]=void 0)}})}return(M,T)=>(wt(),Ve(Ta,Sa(ha(X(h))),null,16))}}),_8=t=>(fh("data-v-b565a2ae"),t=t(),ph(),t),x8={key:0,class:""},b8=_8(()=>zt("div",{class:"not-support-map"},[zt("p",{class:""}," Trnh duyt ca bn khng h tr hin th bn , vui lng i trnh duyt hoc cp nht bn mi  xem. ")],-1)),A8=[b8],w8=["mapId"],C8={class:"map-viewer"},I8=["id"],M8=["id"],E8=["id"],S8=["id"],T8=["id"],P8=tr({__name:"Map",props:{mapboxAccessToken:{type:String,default:""},initOptions:{type:Object,default:()=>({attributionControl:!1,zoomControl:!1})},dragId:{type:String}},emits:["map-loaded","map-destroy"],setup(t,{emit:n}){if(!Pg)throw new Error("mapboxgl is not installed.");const i={center:[105.19084739818732,15.827971829957548],zoom:5.297175623863693,maxZoom:22},a=t,h=n;Pg.accessToken=a.mapboxAccessToken;const m=$e(),o=$e(Pg.supported()),y=$e(!1);let x;const M=$e(Jh());rn(()=>bP[M.value]),Hl(()=>{const H=Object.assign({},i,a.initOptions);x=new Pg.Map({accessToken:a.mapboxAccessToken,container:m.value,style:{version:8,metadata:{},sources:{},sprite:"https://tiles.eofactory.ai/styles/basic/sprite",glyphs:"https://tiles.eofactory.ai/fonts/{fontstack}/{range}.pbf",layers:[]},...H}),x.id=M.value,tp.initMap(M.value,x),x.once("load",()=>{y.value=!0,h("map-loaded",x)})}),ad(()=>{x&&(x.remove(),h("map-destroy",x)),x=void 0,tp.removeMap(M.value)});const T=rn(()=>`map-draggable-${M.value}`),P=rn(()=>`bottom-right-${M.value}`),L=rn(()=>`bottom-left-${M.value}`),O=rn(()=>`top-right-${M.value}`),W=rn(()=>`top-left-${M.value}`);return Jp("$map.dragId",a.dragId||T.value),Jp("$map.id",M.value),(H,nt)=>o.value?(wt(),ce("div",{key:1,class:"map-container",mapId:M.value},[zt("div",C8,[zt("div",{ref_key:"mapContainer",ref:m,class:"map-content",id:M.value},null,8,I8),a.dragId?gn("v-if",!0):(wt(),ce(Mi,{key:0},[zt("div",{class:"right-bottom-container",id:P.value},null,8,M8),zt("div",{class:"left-bottom-container",id:L.value},null,8,E8),zt("div",{class:"right-top-container",id:O.value},null,8,S8),zt("div",{class:"left-top-container",id:W.value},null,8,T8),jt(X(kz),{class:"drag-container","container-id":T.value},null,8,["container-id"])],64)),y.value?qn(H.$slots,"default",{key:1},void 0,!0):gn("v-if",!0),y.value?(wt(),Ve(y8,{key:2})):gn("v-if",!0)])],8,w8)):(wt(),ce("div",x8,A8))}}),L8=ii(P8,[["__scopeId","data-v-b565a2ae"]]),k8={class:"button-container mouse-coordinates-container"},D8={class:"mouse-coordinates"},R8={class:"mouse-coordinates-zoom"},z8={title:"Current Zoom",class:"icon"},O8={style:{"margin-left":"4px"}},B8={class:"mouse-coordinates"},F8={class:"mouse-coordinates-point"},N8=["innerHTML"],V8=["title"],U8={class:"mouse-coordinates"},j8={class:"mouse-coordinates-point"},H8=["value"],G8=tr({__name:"MouseCoordinatesControl",props:{...rs},setup(t){const{getCrsItems:n,setCrs:i,getCrs:a,getCrsItem:h}=db,m=t,o={icon:fb,zoom:D5,change:d5},y=$e(),x=$e(""),M=$e({latitude:0,longitude:0}),T=$e(0),P=$e(!1),{callMap:L,mapId:O,moduleContainerProps:W}=Io(m,Rt,Ct),{format:H}=bI(O.value),nt=rn(()=>n(O.value)),lt=$e(a(O.value)),K=$e(h(O.value)),$=rn({get(){return lt.value},set(_e){return lt.value=_e,K.value=nt.value.find(He=>He.epsg==_e),i(O.value,_e)}}),yt=rn(()=>{var _e;return((_e=K.value)==null?void 0:_e.unit)==="degree"});function Rt(_e){T.value=+_e.getZoom().toFixed(2),_e.on("zoomend",Ut),_e.on("mousemove",Gt),_e.on("move",Et),T.value=+_e.getZoom().toFixed(2);let He=_e.getCenter();M.value.latitude=He.lat,M.value.longitude=He.lng,Qt(),gu(()=>{Nt(_e,y.value)})}function Ct(_e){_e.off("zoomend",Ut),_e.off("mousemove",Gt),_e.off("move",Et)}function Et(){L(_e=>{Nt(_e,y.value)})}const Gt=Sb.debounce(function(_e){let He=[_e.lngLat.lng,_e.lngLat.lat];M.value.latitude=He[1],M.value.longitude=He[0],Qt()},15);function kt(){P.value=!P.value,Qt()}function Qt(){const _e=H(M.value,P.value);x.value=_e.longitude+", &nbsp;"+_e.latitude}function Ut(){L(_e=>{T.value=+_e.getZoom().toFixed(2)})}function Nt(_e,He){const Pi=_e.getContainer().clientHeight/2,ri=_e.unproject([0,Pi]),Fn=_e.unproject([100,Pi]),mn=ri.distanceTo(Fn);mn>=1e3?Bt(He,mn/1e3,"km"):Bt(He,mn,"m")}function Bt(_e,He,Ue){const Pi=bn(He);_e&&(_e.innerHTML=`${Pi}&nbsp;${Ue}`)}function de(_e){const He=Math.pow(10,Math.ceil(-Math.log(_e)/Math.LN10));return Math.round(_e*He)/He}function bn(_e){const He=Math.pow(10,`${Math.floor(_e)}`.length-1);let Ue=_e/He;return Ue=Ue>=10?10:Ue>=5?5:Ue>=3?3:Ue>=2?2:Ue>=1?1:de(Ue),He*Ue}return(_e,He)=>(wt(),Ve(Ta,Sa(ha(X(W))),{btn:se(()=>[zt("div",k8,[zt("div",D8,[zt("div",R8,[zt("span",z8,[jt(X(Nn),{size:14,type:"mdi",path:o.zoom},null,8,["path"])]),zt("div",O8,oi(T.value),1)])]),zt("div",B8,[zt("div",F8,[zt("div",{style:Ua([{"margin-left":"4px"},{"min-width":P.value?"220px":"100px"}]),class:"selectable",innerHTML:x.value},null,12,N8),yt.value?(wt(),ce("i",{key:0,title:P.value?"DMS <=> Latitude, Longitude":"Latitude, Longitude <=> DMS",style:{"margin-left":"4px"},onClick:kt,class:"icon icon-clickable"},[jt(X(Nn),{size:14,type:"mdi",path:o.change},null,8,["path"])],8,V8)):gn("v-if",!0)])]),zt("div",U8,[zt("div",j8,[np(zt("select",{"onUpdate:modelValue":He[0]||(He[0]=Ue=>$.value=Ue),class:"crs-select",style:{width:"70px"}},[(wt(!0),ce(Mi,null,ja(nt.value,Ue=>(wt(),ce("option",{value:Ue.epsg,key:Ue.epsg},oi(Ue.name||Ue.epsg),9,H8))),128))],512),[[rb,$.value]])])]),zt("div",{ref_key:"scale",ref:y,class:"scale-custom"},null,512)])]),_:1},16))}}),q8=ii(G8,[["__scopeId","data-v-255bc28e"]]),W8={class:"setting-container"},Z8={class:"setting-field-container"},Y8={class:"setting-center-container"},X8={__name:"SettingControl",props:{...rs},setup(t){const n=t,[i,a]=rd(!1),{callMap:h,mapId:m,moduleContainerProps:o}=Io(n),{trans:y,setLocale:x}=fa(m.value);x({map:{"setting-control":{title:"Setting",field:{zoom:"Zoom",center:"Center",sprite:"Sprite url",glyphs:"Glyphs url"},btn:{apply:"Apply"}}}});function M(){a(!i.value),i.value&&h(L=>{T.value.zoom=L.getZoom(),T.value.center=[L.getCenter().lng.toFixed(6),L.getCenter().lat.toFixed(6)],T.value.sprite=L.getStyle().sprite,T.value.glyphs=L.getStyle().glyphs})}const T=$e({zoom:null,center:null,sprite:null,glyphs:null}),P=()=>{h(L=>{T.value.zoom&&L.setZoom(T.value.zoom),T.value.center&&L.setCenter(T.value.center);const O=L.getStyle();T.value.sprite&&(O.sprite=T.value.sprite),T.value.glyphs&&(O.glyphs=T.value.glyphs),L.setStyle(O)})};return(L,O)=>(wt(),Ve(Ta,Sa(ha(X(o))),{btn:se(()=>[jt(Tr,{onClick:O[0]||(O[0]=Ho(W=>M(),["stop"])),tooltip:X(y)("map.setting-control.title")},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:X(y5)},null,8,["path"])]),_:1},8,["tooltip"])]),draggable:se(W=>[X(i)?(wt(),Ve(X(af),mr({key:0,height:400,width:400},W,{show:X(i),"onUpdate:show":O[7]||(O[7]=H=>Ea(i)?i.value=H:null),title:X(y)("map.setting-control.title")}),{default:se(()=>[zt("div",W8,[zt("div",Z8,[zt("div",null,[zt("label",null,oi(X(y)("map.setting-control.field.center")),1),zt("div",Y8,[jt(X(la),{modelValue:T.value.center[0],"onUpdate:modelValue":O[1]||(O[1]=H=>T.value.center[0]=H),type:"number",step:"0.0000001"},null,8,["modelValue"]),jt(X(la),{modelValue:T.value.center[1],"onUpdate:modelValue":O[2]||(O[2]=H=>T.value.center[1]=H),type:"number",step:"0.0000001"},null,8,["modelValue"])])]),zt("div",null,[jt(X(la),{label:X(y)("map.setting-control.field.zoom"),modelValue:T.value.zoom,"onUpdate:modelValue":O[3]||(O[3]=H=>T.value.zoom=H)},null,8,["label","modelValue"])]),zt("div",null,[jt(X(la),{label:X(y)("map.setting-control.field.sprite"),modelValue:T.value.sprite,"onUpdate:modelValue":O[4]||(O[4]=H=>T.value.sprite=H)},null,8,["label","modelValue"])]),zt("div",null,[jt(X(la),{label:X(y)("map.setting-control.field.glyphs"),modelValue:T.value.glyphs,"onUpdate:modelValue":O[5]||(O[5]=H=>T.value.glyphs=H)},null,8,["label","modelValue"])])]),jt(X(id),{class:"btn-container",onClick:O[6]||(O[6]=H=>P())},{default:se(()=>[Va(oi(X(y)("map.setting-control.btn.apply")),1)]),_:1})])]),_:2},1040,["show","title"])):gn("v-if",!0)]),default:se(()=>[qn(L.$slots,"default")]),_:3},16))}},K8=zt("g",{fill:"none","fill-rule":"evenodd"},[zt("path",{d:"M0 0h24v24H0z"}),zt("path",{d:"M12 3l4 8H8z",fill:"#f44336"}),zt("path",{d:"M12 21l-4-8h8z",fill:"#9E9E9E"})],-1),Q8=[K8],$8={__name:"ZoomControl",props:{...rs,showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0}},setup(t){const n={plus:hp,minus:O5},i=t,a=$e("rotate(0deg)"),{callMap:h,mapId:m,moduleContainerProps:o}=Io(i,T,P),{trans:y,setLocale:x}=fa(m.value);x({map:{action:{"navigation-control-zoom-in":"Zoom in","navigation-control-zoom-out":"Zoom out","navigation-control-reset-bearing":"Reset bearing to north"}}});let M=null;function T(nt){M=H.bind(null,nt),nt.on("rotate",M)}function P(nt){nt.off("rotate",M)}function L(nt){h(lt=>{lt.zoomIn({},{originalEvent:nt})})}function O(nt){h(lt=>{lt.zoomOut({},{originalEvent:nt})})}function W(){h(nt=>{nt.easeTo({bearing:0,pitch:0})})}function H(nt){const lt=nt.getBearing()*-1;a.value=`rotate(${lt}deg)`}return(nt,lt)=>(wt(),Ve(Ta,Sa(ha(X(o))),{btn:se(()=>[jt(Im,null,{default:se(()=>[t.showCompass?(wt(),Ve(Tr,{key:0,onClick:W,title:X(y)("map.action.navigation-control-reset-bearing")},{default:se(()=>[(wt(),ce("svg",{height:"22",style:Ua({transform:a.value}),viewBox:"0 0 24 24",width:"22",xmlns:"http://www.w3.org/2000/svg"},Q8,4))]),_:1},8,["title"])):gn("v-if",!0),t.showZoom?(wt(),Ve(Tr,{key:1,onClick:L,title:X(y)("map.action.navigation-control-zoom-in")},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:n.plus},null,8,["path"])]),_:1},8,["title"])):gn("v-if",!0),t.showZoom?(wt(),Ve(Tr,{key:2,onClick:O,title:X(y)("map.action.navigation-control-zoom-out")},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:n.minus},null,8,["path"])]),_:1},8,["title"])):gn("v-if",!0)]),_:1})]),default:se(()=>[qn(nt.$slots,"default")]),_:3},16))}};function h0(){const t=Math.floor(Math.random()*Jw.length);return Jw[t]}const Jw=["#0E9F6E","#84A2AE","#BAC9CF","#D7E3E8","#EBF1F3","#da251d","#ffbd99","#ffa07f","#ff8365","#ff664c","#fb4834","#b90004","#9a0000","#7c0000","#600000","#25CCF7","#FD7272","#54a0ff","#00d2d3","#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d","#55efc4","#81ecec","#74b9ff","#a29bfe","#dfe6e9","#00b894","#00cec9","#0984e3","#6c5ce7","#ffeaa7","#fab1a0","#ff7675","#fd79a8","#fdcb6e","#e17055","#d63031","#feca57","#5f27cd","#54a0ff","#01a3a4"];var Ns=63710088e-1,Ob={centimeters:Ns*100,centimetres:Ns*100,degrees:Ns/111325,feet:Ns*3.28084,inches:Ns*39.37,kilometers:Ns/1e3,kilometres:Ns/1e3,meters:Ns,metres:Ns,miles:Ns/1609.344,millimeters:Ns*1e3,millimetres:Ns*1e3,nauticalmiles:Ns/1852,radians:1,yards:Ns*1.0936},J8={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Ns,yards:1.0936133},Sx={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function tc(t,n,i){i===void 0&&(i={});var a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=n||{},a.geometry=t,a}function tF(t,n,i){switch(t){case"Point":return ns(n).geometry;case"LineString":return _s(n).geometry;case"Polygon":return Bm(n).geometry;case"MultiPoint":return VI(n).geometry;case"MultiLineString":return Bb(n).geometry;case"MultiPolygon":return UI(n).geometry;default:throw new Error(t+" is invalid")}}function ns(t,n,i){if(i===void 0&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!O0(t[0])||!O0(t[1]))throw new Error("coordinates must contain numbers");var a={type:"Point",coordinates:t};return tc(a,n,i)}function eF(t,n,i){return i===void 0&&(i={}),lp(t.map(function(a){return ns(a,n)}),i)}function Bm(t,n,i){i===void 0&&(i={});for(var a=0,h=t;a<h.length;a++){var m=h[a];if(m.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<m[m.length-1].length;o++)if(m[m.length-1][o]!==m[0][o])throw new Error("First and last Position are not equivalent.")}var y={type:"Polygon",coordinates:t};return tc(y,n,i)}function nF(t,n,i){return i===void 0&&(i={}),lp(t.map(function(a){return Bm(a,n)}),i)}function _s(t,n,i){if(i===void 0&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var a={type:"LineString",coordinates:t};return tc(a,n,i)}function iF(t,n,i){return i===void 0&&(i={}),lp(t.map(function(a){return _s(a,n)}),i)}function lp(t,n){n===void 0&&(n={});var i={type:"FeatureCollection"};return n.id&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.features=t,i}function Bb(t,n,i){i===void 0&&(i={});var a={type:"MultiLineString",coordinates:t};return tc(a,n,i)}function VI(t,n,i){i===void 0&&(i={});var a={type:"MultiPoint",coordinates:t};return tc(a,n,i)}function UI(t,n,i){i===void 0&&(i={});var a={type:"MultiPolygon",coordinates:t};return tc(a,n,i)}function rF(t,n,i){i===void 0&&(i={});var a={type:"GeometryCollection",geometries:t};return tc(a,n,i)}function oF(t,n){if(n===void 0&&(n=0),n&&!(n>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,n||0);return Math.round(t*i)/i}function Fb(t,n){n===void 0&&(n="kilometers");var i=Ob[n];if(!i)throw new Error(n+" units is invalid");return t*i}function Nb(t,n){n===void 0&&(n="kilometers");var i=Ob[n];if(!i)throw new Error(n+" units is invalid");return t/i}function aF(t,n){return Vb(Nb(t,n))}function jI(t){var n=t%360;return n<0&&(n+=360),n}function Vb(t){var n=t%(2*Math.PI);return n*180/Math.PI}function Zh(t){var n=t%360;return n*Math.PI/180}function sF(t,n,i){if(n===void 0&&(n="kilometers"),i===void 0&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return Fb(Nb(t,n),i)}function lF(t,n,i){if(n===void 0&&(n="meters"),i===void 0&&(i="kilometers"),!(t>=0))throw new Error("area must be a positive number");var a=Sx[n];if(!a)throw new Error("invalid original units");var h=Sx[i];if(!h)throw new Error("invalid final units");return t/a*h}function O0(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Ub(t){return!!t&&t.constructor===Object}function uF(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(n){if(!O0(n))throw new Error("bbox must only contain numbers")})}function cF(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const hF=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Sx,bearingToAzimuth:jI,convertArea:lF,convertLength:sF,degreesToRadians:Zh,earthRadius:Ns,factors:Ob,feature:tc,featureCollection:lp,geometry:tF,geometryCollection:rF,isNumber:O0,isObject:Ub,lengthToDegrees:aF,lengthToRadians:Nb,lineString:_s,lineStrings:iF,multiLineString:Bb,multiPoint:VI,multiPolygon:UI,point:ns,points:eF,polygon:Bm,polygons:nF,radiansToDegrees:Vb,radiansToLength:Fb,round:oF,unitsFactors:J8,validateBBox:uF,validateId:cF},Symbol.toStringTag,{value:"Module"}));function ud(t,n,i){if(t!==null)for(var a,h,m,o,y,x,M,T=0,P=0,L,O=t.type,W=O==="FeatureCollection",H=O==="Feature",nt=W?t.features.length:1,lt=0;lt<nt;lt++){M=W?t.features[lt].geometry:H?t.geometry:t,L=M?M.type==="GeometryCollection":!1,y=L?M.geometries.length:1;for(var K=0;K<y;K++){var $=0,yt=0;if(o=L?M.geometries[K]:M,o!==null){x=o.coordinates;var Rt=o.type;switch(T=i&&(Rt==="Polygon"||Rt==="MultiPolygon")?1:0,Rt){case null:break;case"Point":if(n(x,P,lt,$,yt)===!1)return!1;P++,$++;break;case"LineString":case"MultiPoint":for(a=0;a<x.length;a++){if(n(x[a],P,lt,$,yt)===!1)return!1;P++,Rt==="MultiPoint"&&$++}Rt==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(a=0;a<x.length;a++){for(h=0;h<x[a].length-T;h++){if(n(x[a][h],P,lt,$,yt)===!1)return!1;P++}Rt==="MultiLineString"&&$++,Rt==="Polygon"&&yt++}Rt==="Polygon"&&$++;break;case"MultiPolygon":for(a=0;a<x.length;a++){for(yt=0,h=0;h<x[a].length;h++){for(m=0;m<x[a][h].length-T;m++){if(n(x[a][h][m],P,lt,$,yt)===!1)return!1;P++}yt++}$++}break;case"GeometryCollection":for(a=0;a<o.geometries.length;a++)if(ud(o.geometries[a],n,i)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function fF(t,n,i,a){var h=i;return ud(t,function(m,o,y,x,M){o===0&&i===void 0?h=m:h=n(h,m,o,y,x,M)},a),h}function HI(t,n){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&n(t.features[i].properties,i)!==!1;i++);break;case"Feature":n(t.properties,0);break}}function pF(t,n,i){var a=i;return HI(t,function(h,m){m===0&&i===void 0?a=h:a=n(a,h,m)}),a}function B0(t,n){if(t.type==="Feature")n(t,0);else if(t.type==="FeatureCollection")for(var i=0;i<t.features.length&&n(t.features[i],i)!==!1;i++);}function dF(t,n,i){var a=i;return B0(t,function(h,m){m===0&&i===void 0?a=h:a=n(a,h,m)}),a}function mF(t){var n=[];return ud(t,function(i){n.push(i)}),n}function jb(t,n){var i,a,h,m,o,y,x,M,T,P,L=0,O=t.type==="FeatureCollection",W=t.type==="Feature",H=O?t.features.length:1;for(i=0;i<H;i++){for(y=O?t.features[i].geometry:W?t.geometry:t,M=O?t.features[i].properties:W?t.properties:{},T=O?t.features[i].bbox:W?t.bbox:void 0,P=O?t.features[i].id:W?t.id:void 0,x=y?y.type==="GeometryCollection":!1,o=x?y.geometries.length:1,h=0;h<o;h++){if(m=x?y.geometries[h]:y,m===null){if(n(null,L,M,T,P)===!1)return!1;continue}switch(m.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(m,L,M,T,P)===!1)return!1;break}case"GeometryCollection":{for(a=0;a<m.geometries.length;a++)if(n(m.geometries[a],L,M,T,P)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}L++}}function GI(t,n,i){var a=i;return jb(t,function(h,m,o,y,x){m===0&&i===void 0?a=h:a=n(a,h,m,o,y,x)}),a}function tf(t,n){jb(t,function(i,a,h,m,o){var y=i===null?null:i.type;switch(y){case null:case"Point":case"LineString":case"Polygon":return n(tc(i,h,{bbox:m,id:o}),a,0)===!1?!1:void 0}var x;switch(y){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon";break}for(var M=0;M<i.coordinates.length;M++){var T=i.coordinates[M],P={type:x,coordinates:T};if(n(tc(P,h),a,M)===!1)return!1}})}function gF(t,n,i){var a=i;return tf(t,function(h,m,o){m===0&&o===0&&i===void 0?a=h:a=n(a,h,m,o)}),a}function qI(t,n){tf(t,function(i,a,h){var m=0;if(i.geometry){var o=i.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var y,x=0,M=0,T=0;if(ud(i,function(P,L,O,W,H){if(y===void 0||a>x||W>M||H>T){y=P,x=a,M=W,T=H,m=0;return}var nt=_s([y,P],i.properties);if(n(nt,a,h,H,m)===!1)return!1;m++,y=P})===!1)return!1}}})}function WI(t,n,i){var a=i,h=!1;return qI(t,function(m,o,y,x,M){h===!1&&i===void 0?a=m:a=n(a,m,o,y,x,M),h=!0}),a}function ZI(t,n){if(!t)throw new Error("geojson is required");tf(t,function(i,a,h){if(i.geometry!==null){var m=i.geometry.type,o=i.geometry.coordinates;switch(m){case"LineString":if(n(i,a,h,0,0)===!1)return!1;break;case"Polygon":for(var y=0;y<o.length;y++)if(n(_s(o[y],i.properties),a,h,y)===!1)return!1;break}}})}function vF(t,n,i){var a=i;return ZI(t,function(h,m,o,y){m===0&&i===void 0?a=h:a=n(a,h,m,o,y)}),a}function yF(t,n){if(n=n||{},!Ub(n))throw new Error("options is invalid");var i=n.featureIndex||0,a=n.multiFeatureIndex||0,h=n.geometryIndex||0,m=n.segmentIndex||0,o=n.properties,y;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),o=o||t.features[i].properties,y=t.features[i].geometry;break;case"Feature":o=o||t.properties,y=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=t;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var x=y.coordinates;switch(y.type){case"Point":case"MultiPoint":return null;case"LineString":return m<0&&(m=x.length+m-1),_s([x[m],x[m+1]],o,n);case"Polygon":return h<0&&(h=x.length+h),m<0&&(m=x[h].length+m-1),_s([x[h][m],x[h][m+1]],o,n);case"MultiLineString":return a<0&&(a=x.length+a),m<0&&(m=x[a].length+m-1),_s([x[a][m],x[a][m+1]],o,n);case"MultiPolygon":return a<0&&(a=x.length+a),h<0&&(h=x[a].length+h),m<0&&(m=x[a][h].length-m-1),_s([x[a][h][m],x[a][h][m+1]],o,n)}throw new Error("geojson is invalid")}function _F(t,n){if(n=n||{},!Ub(n))throw new Error("options is invalid");var i=n.featureIndex||0,a=n.multiFeatureIndex||0,h=n.geometryIndex||0,m=n.coordIndex||0,o=n.properties,y;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),o=o||t.features[i].properties,y=t.features[i].geometry;break;case"Feature":o=o||t.properties,y=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":y=t;break;default:throw new Error("geojson is invalid")}if(y===null)return null;var x=y.coordinates;switch(y.type){case"Point":return ns(x,o,n);case"MultiPoint":return a<0&&(a=x.length+a),ns(x[a],o,n);case"LineString":return m<0&&(m=x.length+m),ns(x[m],o,n);case"Polygon":return h<0&&(h=x.length+h),m<0&&(m=x[h].length+m),ns(x[h][m],o,n);case"MultiLineString":return a<0&&(a=x.length+a),m<0&&(m=x[a].length+m),ns(x[a][m],o,n);case"MultiPolygon":return a<0&&(a=x.length+a),h<0&&(h=x[a].length+h),m<0&&(m=x[a][h].length-m),ns(x[a][h][m],o,n)}throw new Error("geojson is invalid")}const xF=Object.freeze(Object.defineProperty({__proto__:null,coordAll:mF,coordEach:ud,coordReduce:fF,featureEach:B0,featureReduce:dF,findPoint:_F,findSegment:yF,flattenEach:tf,flattenReduce:gF,geomEach:jb,geomReduce:GI,lineEach:ZI,lineReduce:vF,propEach:HI,propReduce:pF,segmentEach:qI,segmentReduce:WI},Symbol.toStringTag,{value:"Module"}));function Sm(t){var n=[1/0,1/0,-1/0,-1/0];return ud(t,function(i){n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}Sm.default=Sm;const bF=Object.freeze(Object.defineProperty({__proto__:null,default:Sm},Symbol.toStringTag,{value:"Module"}));function gv(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function vv(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function A_(t){return t.type==="Feature"?t.geometry:t}function yv(t,n,i){if(i===void 0&&(i={}),!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");var a=gv(t),h=A_(n),m=h.type,o=n.bbox,y=h.coordinates;if(o&&AF(a,o)===!1)return!1;m==="Polygon"&&(y=[y]);for(var x=!1,M=0;M<y.length&&!x;M++)if(t2(a,y[M][0],i.ignoreBoundary)){for(var T=!1,P=1;P<y[M].length&&!T;)t2(a,y[M][P],!i.ignoreBoundary)&&(T=!0),P++;T||(x=!0)}return x}function t2(t,n,i){var a=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var h=0,m=n.length-1;h<n.length;m=h++){var o=n[h][0],y=n[h][1],x=n[m][0],M=n[m][1],T=t[1]*(o-x)+y*(x-t[0])+M*(t[0]-o)===0&&(o-t[0])*(x-t[0])<=0&&(y-t[1])*(M-t[1])<=0;if(T)return!i;var P=y>t[1]!=M>t[1]&&t[0]<(x-o)*(t[1]-y)/(M-y)+o;P&&(a=!a)}return a}function AF(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}function wF(t,n,i){i===void 0&&(i={});var a=gv(t),h=gv(n),m=Zh(h[1]-a[1]),o=Zh(h[0]-a[0]),y=Zh(a[1]),x=Zh(h[1]),M=Math.pow(Math.sin(m/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(y)*Math.cos(x);return Fb(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)),i.units)}function YI(t,n,i){if(i===void 0&&(i={}),i.final===!0)return CF(t,n);var a=gv(t),h=gv(n),m=Zh(a[0]),o=Zh(h[0]),y=Zh(a[1]),x=Zh(h[1]),M=Math.sin(o-m)*Math.cos(x),T=Math.cos(y)*Math.sin(x)-Math.sin(y)*Math.cos(x)*Math.cos(o-m);return Vb(Math.atan2(M,T))}function CF(t,n){var i=YI(n,t);return i=(i+180)%360,i}function IF(t,n){n===void 0&&(n={});var i=0,a=0,h=0;return ud(t,function(m){i+=m[0],a+=m[1],h++},!0),ns([i/h,a/h],n.properties)}function e2(t){if(!t)throw new Error("geojson is required");var n=[];return tf(t,function(i){MF(i,n)}),lp(n)}function MF(t,n){var i=[],a=t.geometry;if(a!==null){switch(a.type){case"Polygon":i=vv(a);break;case"LineString":i=[vv(a)]}i.forEach(function(h){var m=EF(h,t.properties);m.forEach(function(o){o.id=n.length,n.push(o)})})}}function EF(t,n){var i=[];return t.reduce(function(a,h){var m=_s([a,h],n);return m.bbox=SF(a,h),i.push(m),h}),i}function SF(t,n){var i=t[0],a=t[1],h=n[0],m=n[1],o=i<h?i:h,y=a<m?a:m,x=i>h?i:h,M=a>m?a:m;return[o,y,x,M]}var Hb={exports:{}},XI={exports:{}};(function(t,n){(function(i,a){t.exports=a()})(ys,function(){function i(K,$,yt,Rt,Ct){(function Et(Gt,kt,Qt,Ut,Nt){for(;Ut>Qt;){if(Ut-Qt>600){var Bt=Ut-Qt+1,de=kt-Qt+1,bn=Math.log(Bt),_e=.5*Math.exp(2*bn/3),He=.5*Math.sqrt(bn*_e*(Bt-_e)/Bt)*(de-Bt/2<0?-1:1),Ue=Math.max(Qt,Math.floor(kt-de*_e/Bt+He)),Pi=Math.min(Ut,Math.floor(kt+(Bt-de)*_e/Bt+He));Et(Gt,kt,Ue,Pi,Nt)}var ri=Gt[kt],Fn=Qt,mn=Ut;for(a(Gt,Qt,kt),Nt(Gt[Ut],ri)>0&&a(Gt,Qt,Ut);Fn<mn;){for(a(Gt,Fn,mn),Fn++,mn--;Nt(Gt[Fn],ri)<0;)Fn++;for(;Nt(Gt[mn],ri)>0;)mn--}Nt(Gt[Qt],ri)===0?a(Gt,Qt,mn):a(Gt,++mn,Ut),mn<=kt&&(Qt=mn+1),kt<=mn&&(Ut=mn-1)}})(K,$,yt||0,Rt||K.length-1,Ct||h)}function a(K,$,yt){var Rt=K[$];K[$]=K[yt],K[yt]=Rt}function h(K,$){return K<$?-1:K>$?1:0}var m=function(K){K===void 0&&(K=9),this._maxEntries=Math.max(4,K),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(K,$,yt){if(!yt)return $.indexOf(K);for(var Rt=0;Rt<$.length;Rt++)if(yt(K,$[Rt]))return Rt;return-1}function y(K,$){x(K,0,K.children.length,$,K)}function x(K,$,yt,Rt,Ct){Ct||(Ct=nt(null)),Ct.minX=1/0,Ct.minY=1/0,Ct.maxX=-1/0,Ct.maxY=-1/0;for(var Et=$;Et<yt;Et++){var Gt=K.children[Et];M(Ct,K.leaf?Rt(Gt):Gt)}return Ct}function M(K,$){return K.minX=Math.min(K.minX,$.minX),K.minY=Math.min(K.minY,$.minY),K.maxX=Math.max(K.maxX,$.maxX),K.maxY=Math.max(K.maxY,$.maxY),K}function T(K,$){return K.minX-$.minX}function P(K,$){return K.minY-$.minY}function L(K){return(K.maxX-K.minX)*(K.maxY-K.minY)}function O(K){return K.maxX-K.minX+(K.maxY-K.minY)}function W(K,$){return K.minX<=$.minX&&K.minY<=$.minY&&$.maxX<=K.maxX&&$.maxY<=K.maxY}function H(K,$){return $.minX<=K.maxX&&$.minY<=K.maxY&&$.maxX>=K.minX&&$.maxY>=K.minY}function nt(K){return{children:K,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function lt(K,$,yt,Rt,Ct){for(var Et=[$,yt];Et.length;)if(!((yt=Et.pop())-($=Et.pop())<=Rt)){var Gt=$+Math.ceil((yt-$)/Rt/2)*Rt;i(K,Gt,$,yt,Ct),Et.push($,Gt,Gt,yt)}}return m.prototype.all=function(){return this._all(this.data,[])},m.prototype.search=function(K){var $=this.data,yt=[];if(!H(K,$))return yt;for(var Rt=this.toBBox,Ct=[];$;){for(var Et=0;Et<$.children.length;Et++){var Gt=$.children[Et],kt=$.leaf?Rt(Gt):Gt;H(K,kt)&&($.leaf?yt.push(Gt):W(K,kt)?this._all(Gt,yt):Ct.push(Gt))}$=Ct.pop()}return yt},m.prototype.collides=function(K){var $=this.data;if(!H(K,$))return!1;for(var yt=[];$;){for(var Rt=0;Rt<$.children.length;Rt++){var Ct=$.children[Rt],Et=$.leaf?this.toBBox(Ct):Ct;if(H(K,Et)){if($.leaf||W(K,Et))return!0;yt.push(Ct)}}$=yt.pop()}return!1},m.prototype.load=function(K){if(!K||!K.length)return this;if(K.length<this._minEntries){for(var $=0;$<K.length;$++)this.insert(K[$]);return this}var yt=this._build(K.slice(),0,K.length-1,0);if(this.data.children.length)if(this.data.height===yt.height)this._splitRoot(this.data,yt);else{if(this.data.height<yt.height){var Rt=this.data;this.data=yt,yt=Rt}this._insert(yt,this.data.height-yt.height-1,!0)}else this.data=yt;return this},m.prototype.insert=function(K){return K&&this._insert(K,this.data.height-1),this},m.prototype.clear=function(){return this.data=nt([]),this},m.prototype.remove=function(K,$){if(!K)return this;for(var yt,Rt,Ct,Et=this.data,Gt=this.toBBox(K),kt=[],Qt=[];Et||kt.length;){if(Et||(Et=kt.pop(),Rt=kt[kt.length-1],yt=Qt.pop(),Ct=!0),Et.leaf){var Ut=o(K,Et.children,$);if(Ut!==-1)return Et.children.splice(Ut,1),kt.push(Et),this._condense(kt),this}Ct||Et.leaf||!W(Et,Gt)?Rt?(yt++,Et=Rt.children[yt],Ct=!1):Et=null:(kt.push(Et),Qt.push(yt),yt=0,Rt=Et,Et=Et.children[0])}return this},m.prototype.toBBox=function(K){return K},m.prototype.compareMinX=function(K,$){return K.minX-$.minX},m.prototype.compareMinY=function(K,$){return K.minY-$.minY},m.prototype.toJSON=function(){return this.data},m.prototype.fromJSON=function(K){return this.data=K,this},m.prototype._all=function(K,$){for(var yt=[];K;)K.leaf?$.push.apply($,K.children):yt.push.apply(yt,K.children),K=yt.pop();return $},m.prototype._build=function(K,$,yt,Rt){var Ct,Et=yt-$+1,Gt=this._maxEntries;if(Et<=Gt)return y(Ct=nt(K.slice($,yt+1)),this.toBBox),Ct;Rt||(Rt=Math.ceil(Math.log(Et)/Math.log(Gt)),Gt=Math.ceil(Et/Math.pow(Gt,Rt-1))),(Ct=nt([])).leaf=!1,Ct.height=Rt;var kt=Math.ceil(Et/Gt),Qt=kt*Math.ceil(Math.sqrt(Gt));lt(K,$,yt,Qt,this.compareMinX);for(var Ut=$;Ut<=yt;Ut+=Qt){var Nt=Math.min(Ut+Qt-1,yt);lt(K,Ut,Nt,kt,this.compareMinY);for(var Bt=Ut;Bt<=Nt;Bt+=kt){var de=Math.min(Bt+kt-1,Nt);Ct.children.push(this._build(K,Bt,de,Rt-1))}}return y(Ct,this.toBBox),Ct},m.prototype._chooseSubtree=function(K,$,yt,Rt){for(;Rt.push($),!$.leaf&&Rt.length-1!==yt;){for(var Ct=1/0,Et=1/0,Gt=void 0,kt=0;kt<$.children.length;kt++){var Qt=$.children[kt],Ut=L(Qt),Nt=(Bt=K,de=Qt,(Math.max(de.maxX,Bt.maxX)-Math.min(de.minX,Bt.minX))*(Math.max(de.maxY,Bt.maxY)-Math.min(de.minY,Bt.minY))-Ut);Nt<Et?(Et=Nt,Ct=Ut<Ct?Ut:Ct,Gt=Qt):Nt===Et&&Ut<Ct&&(Ct=Ut,Gt=Qt)}$=Gt||$.children[0]}var Bt,de;return $},m.prototype._insert=function(K,$,yt){var Rt=yt?K:this.toBBox(K),Ct=[],Et=this._chooseSubtree(Rt,this.data,$,Ct);for(Et.children.push(K),M(Et,Rt);$>=0&&Ct[$].children.length>this._maxEntries;)this._split(Ct,$),$--;this._adjustParentBBoxes(Rt,Ct,$)},m.prototype._split=function(K,$){var yt=K[$],Rt=yt.children.length,Ct=this._minEntries;this._chooseSplitAxis(yt,Ct,Rt);var Et=this._chooseSplitIndex(yt,Ct,Rt),Gt=nt(yt.children.splice(Et,yt.children.length-Et));Gt.height=yt.height,Gt.leaf=yt.leaf,y(yt,this.toBBox),y(Gt,this.toBBox),$?K[$-1].children.push(Gt):this._splitRoot(yt,Gt)},m.prototype._splitRoot=function(K,$){this.data=nt([K,$]),this.data.height=K.height+1,this.data.leaf=!1,y(this.data,this.toBBox)},m.prototype._chooseSplitIndex=function(K,$,yt){for(var Rt,Ct,Et,Gt,kt,Qt,Ut,Nt=1/0,Bt=1/0,de=$;de<=yt-$;de++){var bn=x(K,0,de,this.toBBox),_e=x(K,de,yt,this.toBBox),He=(Ct=bn,Et=_e,Gt=void 0,kt=void 0,Qt=void 0,Ut=void 0,Gt=Math.max(Ct.minX,Et.minX),kt=Math.max(Ct.minY,Et.minY),Qt=Math.min(Ct.maxX,Et.maxX),Ut=Math.min(Ct.maxY,Et.maxY),Math.max(0,Qt-Gt)*Math.max(0,Ut-kt)),Ue=L(bn)+L(_e);He<Nt?(Nt=He,Rt=de,Bt=Ue<Bt?Ue:Bt):He===Nt&&Ue<Bt&&(Bt=Ue,Rt=de)}return Rt||yt-$},m.prototype._chooseSplitAxis=function(K,$,yt){var Rt=K.leaf?this.compareMinX:T,Ct=K.leaf?this.compareMinY:P;this._allDistMargin(K,$,yt,Rt)<this._allDistMargin(K,$,yt,Ct)&&K.children.sort(Rt)},m.prototype._allDistMargin=function(K,$,yt,Rt){K.children.sort(Rt);for(var Ct=this.toBBox,Et=x(K,0,$,Ct),Gt=x(K,yt-$,yt,Ct),kt=O(Et)+O(Gt),Qt=$;Qt<yt-$;Qt++){var Ut=K.children[Qt];M(Et,K.leaf?Ct(Ut):Ut),kt+=O(Et)}for(var Nt=yt-$-1;Nt>=$;Nt--){var Bt=K.children[Nt];M(Gt,K.leaf?Ct(Bt):Bt),kt+=O(Gt)}return kt},m.prototype._adjustParentBBoxes=function(K,$,yt){for(var Rt=yt;Rt>=0;Rt--)M($[Rt],K)},m.prototype._condense=function(K){for(var $=K.length-1,yt=void 0;$>=0;$--)K[$].children.length===0?$>0?(yt=K[$-1].children).splice(yt.indexOf(K[$]),1):this.clear():y(K[$],this.toBBox)},m})})(XI);var TF=XI.exports;const PF=Eb(hF),LF=Eb(xF),kF=Eb(bF);var th=TF,KI=PF,QI=LF,nm=kF.default,DF=QI.featureEach;QI.coordEach;KI.polygon;var n2=KI.featureCollection;function $I(t){var n=new th(t);return n.insert=function(i){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:nm(i),th.prototype.insert.call(this,i)},n.load=function(i){var a=[];return Array.isArray(i)?i.forEach(function(h){if(h.type!=="Feature")throw new Error("invalid features");h.bbox=h.bbox?h.bbox:nm(h),a.push(h)}):DF(i,function(h){if(h.type!=="Feature")throw new Error("invalid features");h.bbox=h.bbox?h.bbox:nm(h),a.push(h)}),th.prototype.load.call(this,a)},n.remove=function(i,a){if(i.type!=="Feature")throw new Error("invalid feature");return i.bbox=i.bbox?i.bbox:nm(i),th.prototype.remove.call(this,i,a)},n.clear=function(){return th.prototype.clear.call(this)},n.search=function(i){var a=th.prototype.search.call(this,this.toBBox(i));return n2(a)},n.collides=function(i){return th.prototype.collides.call(this,this.toBBox(i))},n.all=function(){var i=th.prototype.all.call(this);return n2(i)},n.toJSON=function(){return th.prototype.toJSON.call(this)},n.fromJSON=function(i){return th.prototype.fromJSON.call(this,i)},n.toBBox=function(i){var a;if(i.bbox)a=i.bbox;else if(Array.isArray(i)&&i.length===4)a=i;else if(Array.isArray(i)&&i.length===6)a=[i[0],i[1],i[3],i[4]];else if(i.type==="Feature")a=nm(i);else if(i.type==="FeatureCollection")a=nm(i);else throw new Error("invalid geojson");return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}},n}Hb.exports=$I;Hb.exports.default=$I;var RF=Hb.exports;const zF=l_(RF);function Gb(t,n){var i={},a=[];if(t.type==="LineString"&&(t=tc(t)),n.type==="LineString"&&(n=tc(n)),t.type==="Feature"&&n.type==="Feature"&&t.geometry!==null&&n.geometry!==null&&t.geometry.type==="LineString"&&n.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&n.geometry.coordinates.length===2){var h=i2(t,n);return h&&a.push(h),lp(a)}var m=zF();return m.load(e2(n)),B0(e2(t),function(o){B0(m.search(o),function(y){var x=i2(o,y);if(x){var M=vv(x).join(",");i[M]||(i[M]=!0,a.push(x))}})}),lp(a)}function i2(t,n){var i=vv(t),a=vv(n);if(i.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var h=i[0][0],m=i[0][1],o=i[1][0],y=i[1][1],x=a[0][0],M=a[0][1],T=a[1][0],P=a[1][1],L=(P-M)*(o-h)-(T-x)*(y-m),O=(T-x)*(m-M)-(P-M)*(h-x),W=(o-h)*(m-M)-(y-m)*(h-x);if(L===0)return null;var H=O/L,nt=W/L;if(H>=0&&H<=1&&nt>=0&&nt<=1){var lt=h+H*(o-h),K=m+H*(y-m);return ns([lt,K])}return null}var r2=6378137;function OF(t){return GI(t,function(n,i){return n+BF(i)},0)}function BF(t){var n=0,i;switch(t.type){case"Polygon":return o2(t.coordinates);case"MultiPolygon":for(i=0;i<t.coordinates.length;i++)n+=o2(t.coordinates[i]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function o2(t){var n=0;if(t&&t.length>0){n+=Math.abs(a2(t[0]));for(var i=1;i<t.length;i++)n-=Math.abs(a2(t[i]))}return n}function a2(t){var n,i,a,h,m,o,y,x=0,M=t.length;if(M>2){for(y=0;y<M;y++)y===M-2?(h=M-2,m=M-1,o=0):y===M-1?(h=M-1,m=0,o=1):(h=y,m=y+1,o=y+2),n=t[h],i=t[m],a=t[o],x+=(N1(a[0])-N1(n[0]))*Math.sin(N1(i[1]));x=x*r2*r2/2}return x}function N1(t){return t*Math.PI/180}function s2(t,n){return n===void 0&&(n={}),WI(t,function(i,a){var h=a.geometry.coordinates;return i+wF(h[0],h[1],n)},0)}function Tx(t,n){n===void 0&&(n={});var i=A_(t);switch(!n.properties&&t.type==="Feature"&&(n.properties=t.properties),i.type){case"Polygon":return FF(i,n);case"MultiPolygon":return NF(i,n);default:throw new Error("invalid poly")}}function FF(t,n){n===void 0&&(n={});var i=A_(t),a=i.coordinates,h=n.properties?n.properties:t.type==="Feature"?t.properties:{};return JI(a,h)}function NF(t,n){n===void 0&&(n={});var i=A_(t),a=i.coordinates,h=n.properties?n.properties:t.type==="Feature"?t.properties:{},m=[];return a.forEach(function(o){m.push(JI(o,h))}),lp(m)}function JI(t,n){return t.length>1?Bb(t,n):_s(t[0],n)}function VF(t,n){var i=!0;return tf(t,function(a){tf(n,function(h){if(i===!1)return!1;i=UF(a.geometry,h.geometry)})}),i}function UF(t,n){switch(t.type){case"Point":switch(n.type){case"Point":return!qF(t.coordinates,n.coordinates);case"LineString":return!l2(n,t);case"Polygon":return!yv(t,n)}break;case"LineString":switch(n.type){case"Point":return!l2(t,n);case"LineString":return!jF(t,n);case"Polygon":return!u2(n,t)}break;case"Polygon":switch(n.type){case"Point":return!yv(n,t);case"LineString":return!u2(t,n);case"Polygon":return!HF(n,t)}}return!1}function l2(t,n){for(var i=0;i<t.coordinates.length-1;i++)if(GF(t.coordinates[i],t.coordinates[i+1],n.coordinates))return!0;return!1}function jF(t,n){var i=Gb(t,n);return i.features.length>0}function u2(t,n){for(var i=0,a=n.coordinates;i<a.length;i++){var h=a[i];if(yv(h,t))return!0}var m=Gb(n,Tx(t));return m.features.length>0}function HF(t,n){for(var i=0,a=t.coordinates[0];i<a.length;i++){var h=a[i];if(yv(h,n))return!0}for(var m=0,o=n.coordinates[0];m<o.length;m++){var y=o[m];if(yv(y,t))return!0}var x=Gb(Tx(t),Tx(n));return x.features.length>0}function GF(t,n,i){var a=i[0]-t[0],h=i[1]-t[1],m=n[0]-t[0],o=n[1]-t[1],y=a*o-h*m;return y!==0?!1:Math.abs(m)>=Math.abs(o)?m>0?t[0]<=i[0]&&i[0]<=n[0]:n[0]<=i[0]&&i[0]<=t[0]:o>0?t[1]<=i[1]&&i[1]<=n[1]:n[1]<=i[1]&&i[1]<=t[1]}function qF(t,n){return t[0]===n[0]&&t[1]===n[1]}function WF(t,n){var i=!1;return tf(t,function(a){tf(n,function(h){if(i===!0)return!0;i=!VF(a.geometry,h.geometry)})}),i}function tM(t,n,{zoom:i=15}={}){if(!n||!t)return;const a={top:50,bottom:50,left:50,right:50};if(["Point"].includes(n.type)){t.easeTo({center:n.coordinates,zoom:i,duration:0,padding:a});return}a.left=a.left,a.right=a.right;let h;n.length==4?h=n:h=ZF(n),h&&t.fitBounds(h,{padding:a,duration:0})}function ZF(t){if(!t.type)return;let n;return["Feature","FeatureCollection"].includes(t.type)?n=Sm(t):n=Sm({type:"Feature",properties:{},geometry:t}),n}function YF(t,n={}){if(t.length!=0)return t.length==1?ns(t[0],n):t.length==2?_s(t,n):Bm([[...t,t[0]]],n)}const Kg="base_map_control_";class XF{constructor(){this._baseMap=void 0,this.layers=[],this.sources={}}getBeforeId(){return this.layers[0].id}async setBaseMap(n){if(this._baseMap&&this._baseMap.id===n.id)return;this._baseMap=n;const{sources:i,layers:a}=await KF(n.type)(n);this.layers=a,this.sources=i}addToMap(n,i){for(const a in this.sources)if(Object.hasOwnProperty.call(this.sources,a)){const h=this.sources[a];n.getSource(a)||n.addSource(a,h)}this.layers.forEach(a=>{n.getLayer(a.id)||n.addLayer(a,i)})}removeFromMap(n){this.layers.forEach(i=>{n.getLayer(i.id)&&n.removeLayer(i.id)});for(const i in this.sources)n.getSource(i)&&n.removeSource(i)}}function KF(t){switch(t){case"vector":return $F;case"raster":return JF;case"no-basemap":return QF;default:throw new Error(`Not support ${t}`)}}async function QF(){return{layers:[],sources:{}}}async function $F(t){const n=await fetch(t.links[0]).then(o=>o.json()),i=[],a={};for(const o in n.sources){const y=Kg+o;a[y]=n.sources[o]}for(const o of n.layers){const y=Kg+o.id,x=Kg+o.source;i.push(Object.assign(o,{id:y,source:x}))}const h=n.glyphs,m=n.sprite;return{layers:i,sources:a,glyphs:h,sprite:m}}async function JF(t){if(!t)throw new Error("Not found item");const n=`${Kg}layer`,i=`${Kg}source`,a={};return a[i]={type:"raster",tiles:t.links,scheme:t.scheme||"xyz",maxzoom:t.maxzoom||22,minzoom:t.minzoom||0,tileSize:t.tileSize||256},{layers:[{id:n,type:"raster",source:i}],sources:a}}const qb="basemap";function eM(t){const n=rf(t,qb,jl({baseMaps:[],defaultBaseMap:"",current:void 0,layer:void 0,loading:!1}));function i(y){n.baseMaps=y}function a(y){n.defaultBaseMap=y,n.current||h(t9(t))}function h(y){n.current=y,n9(t,n.current)}const m=rn(()=>n.baseMaps),o=rn(()=>n.current);return{setBaseMaps:i,baseMaps:m,setDefaultBaseMap:a,setCurrent:h,currentBaseMap:o}}function t9(t){const n=ua(t,qb),i=n.baseMaps.findIndex(h=>h.default||h.title===n.defaultBaseMap),a=i<0?0:i;return n.baseMaps[a]}function e9(t){const n=t.getStyle().layers;return n.length>0?n[0].id:void 0}const n9=async(t,n)=>{if(!n)return;const i=ua(t,qb);if(i.loading)return;i.current=n,i.loading=!0;let a=i.layer;a||(i.layer=new XF,a=i.layer),await du.actions.getMap(t,async h=>{await a.removeFromMap(h)}),await a.setBaseMap(n),await du.actions.getMap(t,async h=>{a.addToMap(h,e9(h))}),i.loading=!1},i9={class:"base-map-card"},r9={class:"base-map-card__image"},o9={class:"base-map-card__content"},a9=tr({__name:"BaseMapCard",props:{mapId:{type:String,required:!0},title:{type:String,default:""}},setup(t){const n=t,{mapId:i}=Io(n),{trans:a}=fa(i.value),{baseMaps:h,setCurrent:m,currentBaseMap:o}=eM(i.value),y=x=>{m(x)};return(x,M)=>(wt(),ce("div",i9,[zt("div",r9,[X(o)?(wt(),Ve(X(yx),{key:0,src:X(o).thumbnail},null,8,["src"])):gn("v-if",!0)]),zt("div",o9,[zt("div",null,oi(t.title||X(a)("map.basemap.title")),1),zt("div",null,[jt(X(Tv),{modelValue:X(o),items:X(h),returnObject:"",itemText:"title",itemValue:"id","onUpdate:modelValue":y},null,8,["modelValue","items"])])])]))}}),s9=ii(a9,[["__scopeId","data-v-17ae855b"]]),l9=[{link:"",thumbnail:"/static/img/icon-stack.png",type:"no-basemap",title:"None",id:"null"},{id:1,title:"Streets",type:"vector",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9TfE2haV8QDcaOLS60zxBp9rHc2wJDfaGeEOYiOATgLk8fNzk4Iat+y1f3em+K9U014pESRFadHjwYnTcBnJGDk4xtJOe2Kzfhc15q1vrer2MNlNdwoqTWHkJ/pysvOG+8nKbgOjFeQTk1l+BvHN18LvihcXWppPMxaS3v4xIXdsnOQWPzEEAgk8jPPOa+5WGnPDYnK6UlJxUXyt3alo5WvrZ7rVpN77pfkMcfRhjMJm1SLgpSknJKycLtRvbS61T0TaWq2b92+J3jjTfBnh6T7dcxxyXMbiCFgS1xgDIAHPcc8AZGTXyw0nnOzEsxYkks24k+57mtPxl4ouPF3im81GWWVjNMzQ7mJ8lNxKquScAA9BTNS1K78X6kh8lGlWIqkcEeMKoLtgcn+83tzjA4r2chyf+zaV5auSvJt2tbZJW83d36Hi8UcQLN63uqyg7QSV3K+7bv5KyS6/Mb4Y8OXHi3W4bC12edMT8zkhUAGSTjPAFdV4r+BWoaFp32mzmGoLDEZJ0CbJFx1Krk7gPz9qufCq9sfDPhDVNUt2Da0lnM+6bmKFVYBVwOfmYoTnrlRkd+40DTI/Eej2Sz2l7NbWkiyxPfEidmAYZK8lhl+S2AcngACvk+JOLsdg8bzUPdo03ytOKvN2u7XadtUlZ66vZWfr5Hwxg8Tg7VveqzXMmm/dTdlsmr7t3Wmi3PMPDHgDW9e8PvaW9htt725SRrxpQqL5YddrDqy5fOVzgg/eIwvdeDPhlZWGo2PnWzQ3+n2MTSH5XXzWkk37uSDkAgZH3T2YA13fI9fancKDxgtySO56fyA/Kvgsz48x2OjOCSpxfZu+umt3reOlrJfjf7HLeEMJhXGUm5uPe3rppprre7fntZxG8YPIP61Sm8M6ZPNE0mnWLtCCsZNuh2ArtIHHTHGPpU3lZuBJuk3Ku0DzG2Y/3c4J98ZqTLZr4uGJnDWk2vQ+pnThP41f8TjdG+Amhabp0sE32y9M6pueSXbsZQfmQKBjOe+7oPfPK67+zje288f8AZ15Dcw7RvM/7uQNk5wACCMY6kd69H8T+O9M8GRw/2lc+Q0+fLVUZ2YDqcKDx2z0rBufjdZWcTXclneHSnlaG1uUXLXjLt3FVbbtUZYEk84GBncF/QMozrimUvrWH5pqf8y91tae7eyvpqo9m2rJtfGZnlfDqj9XrcsHDs/eSevvWvp5y72WrV/LPHHw91DwFLEt5GrJIDtuInLRSe3IBUjI4PXPFdZYfs6vqPh62uF1eEXU6CUqIxJAARkAOrc/7wyD29+Y8XfFDUvFN/duks1na3aoptRMXjGw5XsO4BPHJ9uK9Oi+Leh6H4XtJ/tN5fCRmU/ulWbd947lAVRyeMYHB5yDX3Od47iTD4PDKjFe2k3zcq5ul7O6aXW9nZ2urbL5HJ8HkFfFYh1X+6ily8z5etrqzTfTdXV7Pu+R0b4Da7p2rrcrLpTGxnSSIPIzLOVIYZAXIHGDnHQ/WivTfDXirT/GmlPNYP9ohy0ciuu109iPoR7Givz7M+K8fUrcmY0488dLOG3/ky9T7zLuHsJQpc2Xzlyy1up6P8GUNC1DStN0zUtTtxHZC7KXFykyiFYW2Koz8vQ4znkElsck15F8SPE0PivUFuPKhgvIWMEghAcSoANrmQN87dR04GOTir3xd8b2niq5tlsYEWBk815iiiSc8gKw6jYQ2MnvnpiuNr9H4O4Zlh3/aWJ5lUlok3dxilaz+S6q60WjTv+fcV5/CsvqGGs4R1bSsm3rdf1Z67poK0/Ct5LZ6luit/PxtZ2ETyGFQwJb5CDjs3PKkjvWZXd/AfwvqOpeImv7YywW0IMBnULjedpA+Yjpwx4bgYx81fXZ5iIUcDUqTSats21fstE3+B87kGFq4jMKdKje7fRXa7vVpeup0fh7w9o+gpa6fdQ6TdvNP+9jZkmAZs4BJm6YTI+Q8KBlmGTr2/ivwzaapFZTtYqJ2WWKK56RMxPIDqFQdRndnoAvNZPib4HhdPkudDvZ4XUN5pvhKkkxZlDH7o9BztIOe2ARZ0fwtqXh/WVstWv8Aw9dWJncM7ZMm9tzqJlYqGBAcqGLHjjjNfkGIwFDER+sVMQ6js/dfutPul7yt5XWnVW0/aMPUxmHq/V44VU03H3lZxt2bvF36Xs7PWzur9hb+JoNVubyK133LWJUv5ajDblDAK5IU/KwOc4+YYPWrMd5mMM0ckDt/yzfaSecfwsR75z3Ga5XS4dEi1e9kimttN1C4hRQovjHDNtLncmzaHXhgWB+8p+UHk6ug6dBpF3e6lJYeYxbcblD9paRcHDJ8ztjGM4A+UrwccfMYrBKDTSlFNLddbK9rbq97eVj6HDTlNNTkm05bdru1/O1r+Zp3Kz/Z90ccsrNwBB5ZZf8Aay7AEcfy46062sysSRruVIkCjnPTjBPfp196rz682voBpt9GjKfmJh3qQfUHHTrXD/G26m8OaZpd2s9zJcvcAThbh0imUDkCLcVXAAG4Lnk85PPPgsto4zEQwdF+9K+/e2n9dPvMsxxVLCUJYme0d/S6/rz2Mb49XWn392n2WFJr6BVN1cx5bylJxGjEcf3uozyvPauCv9dudS06xtJXzBp0bxwIOi7nLsfqSQPoo9KjuZbdLcQ20cqoGDM8rKWcgEZwANo5PGT9TjNQV/Q2RZRHBYOnhpXlyapy3V013dt2kk9Iu3c/nzOczeKxdSvCy591HZ637K+ybb3av2ClZy55JPGOT2pKK908Y6H4X+Lp/CPi2B4lMsV2wt5od2BJu4U9DyGIOcZ6juaKwIJ3tp0kjO2SNg6sOxByDRXwvE/B8MzxMcTCMea1m22r222/rp0PsuHeKJZfQdCbdr3Widu+5v8AhvwdceLjd/YZLYwW2B+/DF8sDjaEUt/CegwPfGaztc8L3nh6d1niJRCAZUBKAnOASQCp4PysAeOmK7n4F6tYLbT2s/2aO4ifzh5zf61euVycArj5uCcY5GK9HvrK18Q2XlTW1te2U65bLhxxgjGOvOMEHjivnMx42xuU5rPCVqd6St/ia095PZt6vt00aPoMJwnhM0y2GKoztUa/7dT/AJWt1bbe/XU+b69O+E3jm30zwp9lN1HDc2zEossssagFi24hSVcZbGCoJ5BOMVynxU0XTfDni+Wy0xZUSBF81WcsquQGwpPOMEZyeua5wjNfd4zCUs9y6Ek5QUrTW1/mtd0+58hl2YV8hzGbjaUo3i+2+tn6rsfSWneMYtW0z7bb3UNx8u0rADdRwNlsHCqJMnGMZAx9Caj8SS3HiDRDHbsyMZEmhdLcCa2kRt+/95Iv8SjGQODg7gTXknwVgN/rl3A1q9zGIBPmJlSWJ1YKpDFl4+c8ZxnBxxXomv262mhapcJPeSSW9tKYZryR2ihkALBgG/dtyAFOCVzx97FfjOcYOvlua/UqdS+sbOye9rX+f4bJn7HledrMMs+tVY6WakvTe3y8zivjV8RNX1C7l0a5e2jiUhpUt3ck85COSFDdFbhe4561l+CfiPJ4X8IajbeZvvIyraZ5yiSO23EiUoD904JI7EscgiuZ1OwurGZGvElSW6QXA80/O6sThjnnnBPPJBB6EVXr9no5Dg5ZfDBySlG6baWjkt3u9Hazu3ppc/HcTxHjXmE8a5SUmnGzeqi1tsrWvdWS11sdn4G+JM+mWd1FqMt7c2rMZBIsu145G/iLY3MOM4z3JwQMVzt9Nc6yZLu9e5lMwcwTXUpbOzllDHgnBA/HgZIqDStZm0Z5/KEbrcwtBLHICUkVh3AIPBwQQeCK0Ev77xe1tp9vbfaJkiCQpDAqyfKMliVC5JwMsRnAGSSMnKOVwweMqYqjTjGM7OUr2tZb2731lsuXu9m8ynjMJTw1SblON1FW3v3fpot3zdkYtFdVrng278O6dcxalo6RSWiRStdwF/lR/lGfm2N820HA7nvzXKjp/hXs4HHwxUXKmtF1umnpe6s30fWz7o8fG4CphZKFXd9LNNdNbpdV0uvMKM0UV3HCFFFFAHRfCaIv8QNPfZI625eVti5KAIQGI64BI6c+nNek/FTxdF4Q0CRLe6u/t+oBTAhZ0aLDcy84YD5SPfp0rifgbcxaX4h1HUZZVjTT9PkmIb+IZXr3xwOnPSuS1TUrnWL17q7eSWaclyzknOSentnNfA5hkcM1z32mI/h0Iw0/mbblb02v5WXVn3WBzuWWZJ7Oh/ErSk7/AMqSjG/r2+8ju7uW/u5Z55HlmmYvI7sWZmPU5NR0UV95CEYRUIKyR8POcpyc5u7Zs/D/AMRr4X8VW9xLJNFbyZgmaN2Uqj8bvlycKdrEY/hrofjB8QbPxXDb21olrNwsktygYnA+6gLorDGWJGO475A4WivExPD2Fr5jTzOr8cFZLp1s35q+n/APaw+f4mhl88up/DN3b69Lpettf+CWta1mfX9QNzcFTIUSPCLtVVRQigDtwoqrRQRivZp04U4KnTVktEuyR405ynJzm7t6sK9X+DHxB8O+C/A0jXxt7fUfPkQlId9xcJhSOQM7ecDJA+U15RRXDmmWU8fR9hVbSunp5dD08mzerluI+s0Ypys1rqtep9I+HPGGk+ONAvZo7qbULUIftMFxCu+BTn5WVF5yAcfezjg5r5zv3tzf3BtN/wBkMreRvB3eXuO3Oec4x15ptvcG3LYAIdGRgehBBH5jOR7in2EkEV2jXMTzwrkmNH2bzjgE+mcZxzjOMda8rKMgWWVa1SlJyjJK0fS/nZvzsj1c94klnEKMK8FGUb3l3vbpul5XZCw2sQeoOCPSin3N1Ley75XeR9qruYknCgKBk88AAfhTK+lhzOK5tz5afKpPl2CiiiqJOPtPiDrGly+bb3hicqUJEafMp6g8cioh4w1Ef8tx/wB+k/woorg295bs9KyfuvYP+Ex1H/n4H/fpP8Kmh8VX72sjGflen7tf8KKKpSl3Dkj2If8AhMNR/wCfgf8AfpP8KP8AhMNR/wCfgf8AfpP8KKKXPLuHJHsH/CYaj/z8D/v0n+FH/CYaj/z8D/v0n+FFFHPLuHJHsH/CYaj/AM/A/wC/Sf4Uf8JhqP8Az8D/AL9J/hRRRzy7hyR7B/wmGo/8/A/79J/hR/wmGo/8/A/79J/hRRRzy7hyR7B/wmGo/wDPwP8Av0n+FH/CYaj/AM/A/wC/Sf4UUUc8u4ckewf8JhqP/PwP+/Sf4UUUUc8u4ckex//Z",links:["https://tiles.eofactory.ai/styles/basic/style.json"]},{id:2,title:"ArcGIS Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABgESAAMAAAABAAEAAAMBAAUAAAABAAAAVgMDAAEAAAABAAAAAFEQAAEAAAABAQAAAFERAAQAAAABAAAAAFESAAQAAAABAAAAAAAAAAAAAYagAACxj//bAEMAAgEBAgEBAgICAgICAgIDBQMDAwMDBgQEAwUHBgcHBwYHBwgJCwkICAoIBwcKDQoKCwwMDAwHCQ4PDQwOCwwMDP/bAEMBAgICAwMDBgMDBgwIBwgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/AABEIAEMAeAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APM/GWnaJ+074c1Hw/qNndab4gjCy6BNazG4kku5Yg7W0qyScrKFVWZFOJhGcgErJ7V/wbkfF/X/AIRftrT/AA/ulure28ZWNxZ6pY3MJRorixjmmjchiCsiASJt2klZGzjbkfH+meLxPf6jdraWKfaosXVgIAbe8TKkruOWT5lVgBxlRnPOdj9jD/goJdfsF/t+6T488QWGo69pNsbqHVLa3vGWa8SeCSPfvkJEmx3DYfOdnUHBH22HwtX6vicqhJS5Ixai3eSlpKVr62d9NWruyd7pfHvFQlXo4+StzOV2lZOOqje2l++z022b/cT/AILLftTeB/gp+zDqnhvxJ4gttP1rxRaytpunfZpbmbUvLHzIqxjK/M0fzM0a5YZcDIr+bH4nBHlur64huGkZsqZWBON2Bk45OOpGMntXdftI/tba5+0v+0h4u+IGsaldXaavqM81qkrvhIS58qNVLHYqR7QFBwvaqOvatefGxYY9UtLW1kECmFLK3S3CxofvOqj5iSTnufbFe9kmUvL4cz3krybdlG2yStru7ttbHnZtmTxVTsov3VbV33bd/JWSRzPwj8P6lca1Htt447aRS7SOdqBNpbPHPABJ9B9QD6lc6DDANtrcrcMsRdwQE3DjlBkk9e+DweOlY9vp9p4c8NWtvatfNOxML/KNgj3AhQe5IGTyMYH1OZdtfWN1/q4txAMe3O9Rg7hjGCAducHGM9wK+V4i4vxuCxrdH3aVN8rTivfaV5Wu07apKz11e294XLcPWo3qaykrpp7Lp3V+915HZafDeSaJNp8MSiO6uY5ZJd+CPLEgww6lcybuO4/iIAW9Y6N5dxG8lobea2Cwhi48uVleQv7FmDAZxkADoRkcLpmpalaTRzGO4WGNx82DnnIGPp0+oB7VutrU1ppsdqzOqTAMW2bQoxxz9P5V+b51xtjsxTg7U4t3tFu+1nd3100tZK3Te/0GW5dh8PrbmaVk3bvdWVtNde/meoS+KYZ7eO8kvj9nGAttHGdznjgnsMEnj6cZyMWXxpa6r4sW1utPtZreRzGmVw+37pBPOPQ4OSABk9/KrXxNPb3En79lWFtqbeBz9fw/L6Vq219qBuFvLi0nkDLiOVuAMHg/Xp1/rXx8cRKEuaDa9Ox7TzDnVrfqd0vhnTND0ljI015G0qxMHJUuyjBYbSP72fqQM9zip4T/ALTuY4rCV7hmTPlyLiRjnHy/w+nVh+PStDQfHEI0uZr+OTznby1VUHJP3iQf9liMj+tU9Q+L+j+CrdZbgTx2szfZoWiTM1xJ2xzhFAzkk9h64H6Fk+ecVO+Kw/PNT6yV4ya093msm1baPRNtWi7eHi8HlErUqijG3RaNddba29e+m5H4s8GXXg54kuogVcZ89JPMikzggDgbSARkHOazvEv7OGj+MYYLm+1Sy0+7mIH2mORWXGOhxnfjI5GeDVLw98f3+I5uobS6u7JDjNlLNvGxG3K4/wCBHJx34ORiuq1rxH4X8PaTeaxr2qTtBIVEMawFt2d/mblVkJcN5e1VIBzJyCoB+5z7MeJaGCwsaaXtZN83KuZbJpSunFO99nZ2urLReLl+Gyt4mq9eVJW5nbrurNNrbddbPXV8r4G+F1p8NvENjPBf6fezpKJI5ZFdYWVXBAYEA4bHOOg57jJXU6tdaVJo0l5oGqWfi/wveosMV49olveafIRlYpwy7o5PlcAcrKsZIwMhSvzzMuKMyq1eTMqceeGlnDVfiv68j6bCYPD0I3w8pWlro/8Ahzh7XxTeaxaR3kdg0UkkSl0mUrvzjJxkFsjHK8HPFct49j03W9EvI7rULO2urVRcsxfdLb/MBygyxB3Y9+PY1V/aS+It5ovhzSm0+4kWPXGadr1GwzhVUBAw5G1XHHB6HArwG2vRc6p5cbuGzgnOOvWv0Dg3h+phUsfjLqrLRRb1jG3Kk++m6aurLZpnz+YYiVePsqcvcWu27vv/AFo9dzsNO1S6v7ZlWT93GCykcZP8+a9I/Zv+KLp4jNldaZdX088kam6htHuDbxBgQJNvKoMAEgYxnPXNeTp4pt9FsbiytfLaaVfmZhu3H09up6V9z/8ABEj9hb4j/GL4gXnjjQ4ZNH8JxxSaPda1NawzLLO7RFo4vNON6rIh4VwdwVhhiR9RxHmFLC5bVr1bcqjtJtJvorpN3fSyZz5bgJYrEwoxTvJ6WWvm9Wl+IkNnoenXjWAjhuFWUGUuT5cEj7gu5ckhDtwCc4C8+77y68OaZq1vb6vqVha31+uEgnYbgHZkU/T5ScnnpxzX2T8av+CCNjqfg9F+DvxAuo/iG8so1OXxBPK0dwZJIo2KtBH+7J8t8+ZEykt1jK710PhF/wAEwfGH7OHxn0vRvjF4i+EfiT4eeIL6aCxurSzkXVdTuUinlEBea3KwFSsk5jEpI8kKjMd238HxlXAYug8ZLGSrNKTcZXjO6s20mpKz3tpddVZ2+2o5XiqNdYV0VBNqzWsfK+sXv1/B3R5v8Fv2ENL+POnzT6PqUOqW/hu+W0vn8wCO3meFZFA5+YbJFII4LMMZYEDN+Lv7KEfhDSrnT2uNJFxkC23OJJEOQu9gv8Az1JAGRzX114S8D+Bf2Rvjf4msf7at9C1TxFHp0f2W9uI4bS5t0juHiubcSKpYZadHMbYEsW0qpUVx3i34kaX8DPi63iXU9C0nVfD2vBrmy1Oytft0tsN21pzE0jySRlgdjooKhcKhUkj5XEUeXlnGMuVxi1fS7cU3bur3s+qsfUU6FF03GfLe7Tt0SbSv20te+zPkjU/+CZ11f6FZR6FrVnrV/M6x3kxnj+zx7MYaJh8rKeQDzjAyK4H46/sg658DdLhj1S6aa8tYi14qyAQxxAfJ5ZY5O7oCechielfSH7QH/BUe/ufGNrY+DFgk+wSl5zNay24vICCGV1Khdqgghhg5UY74+VPif8Rv+Em8PXWtazeL/aUky3M7yuSrqSxaMHgKB97GDjBxg5qsoy+vmGMjhKd05OyvprbT0Xm9tfM8fOp4HDYeTiru3R6afm/66o8c8T+JF0q21ItKZV0vyvNKTKFgzyMsWAVccZPoRivD/id8ZLrxrrlv5KPHY2cJiijzyzHBZyCO5AABHQAnByA74r+NLPVvDpsdFsWt7O3vd00rndLOQjCNiMAKOXOOuRnPauDbUI4ooF2tnP71jlTntj/P4V/TeT5ZHBYKnhG3JU3eLlve1rrV2WrSSeidnrc/OeXnqOs1rLRr/Pvt950dp8Urqwnhkt7bT4LiH/VzCN3dDkkHDOVyM91I4FO1Tx1qXim/jm1LULrUJEGFM0hbYD2UfdUeygCsR7RdT2mzhJkP3ju3bvwxxUFv5kcjBty+hHGa9nmd9Q9lDoj2X4M+Mn0zWPsskK3FrfYgaEyGPeW4GGwcEHB5BGQCQcYJXmvh/UbrSNQguI53WS3kWVOejKQR+oor43iThOOZ144iCipWs221e22x0YHHSw0XTu7Xvsn+Z7LaeB5PiRY32n2uswtpkce5P7WkeZvNIyRwQsONp+ZTkcYzXA+Mvg1deDdQW8s4o7vT9iuWhbfszwWAb5ymejEY+YDPSvQ/g9ZzfFPwillpMMb61pLzSXNiHVZL2E7pDcRRcNIUUbXVQxVURujceifD74eXD62WuJo5LNomgdWVTvU7PkYMTlCSflA2nbnPINfM5pxticpzSph60E6UWla1pNWXvJqyber106aNHVhsrnWoxdPeXXp6fLY+Sbewktr7zvs6XEJbJBO0/Q+lfq1/wSx/4LSaX+y1+zNoPw51PRdLvIfDstw++fLSK8t3LN8q4UfL5pCnLHI69APzv/av0HQ/APjuLTfDUNxatDbRtqIYkw+ew3YiznK7SOehJ4wBXBTWcY0GKRkVm5O7HP8Ak19fmmVYbiXKYQk5QjLlnHRXWjtdarVN9eqZng8dXyzFOcbOSvF9V0v+KR/QHZf8F5/hbqHhS8ml0DUNUGofK2y7WFvlUqzo6cuTgKctyoAB4IOH8af+Cjfhv9s/4WaZoPh3T9Stbgyw3Saj5AafRLuGVZIZ1wSMiRFyD8sgYrwDivxz/Y98Gah8W/7csIdLutRt9LtxdM1suWtyzBB0GeRkg9th7Zz754WbWP2b/Cur3Olx3mj6gIJxbXk1w0Zhl8sqXKhgkn3FChlJXdkcFg34JnnDiyrOI4PDzvJOLi3/AHrW5rdn0s7q2mtj77L88r4qjKriaa5LO9r9F09fz69T17/gtJ/wVB+JXjHRYvgReN4Es9HuLK0v9at9Dea+uWIk8yOGaeeGIQyMY45mihjPyyRqZnUstfLPwl/aruPDX7N2vaLeTK2rWjINDkumJEI8xfNjAPXbGWZVOBnjByAfE/EHhC903xLJH4gW7GparbnUzNcMWuAG3sGcMckvtJ+b5uVPfB5vxBfNHPDCrN+7UvISflLnjj8Av41/QGX8L5fTyungOWMoJqTaWjlFq71b3tyu7b5dLn5/is1xFXGyxEW02mtekWnpsl1vstdbH1F8EfiXH4y0+b/hIGurtvOJa88394jOqqMjHzhVRTtJ5DY6DB8v+Nq3/imy1htcvZVjRpH0a2mfAYxZc4HA3Op4xnkkDPNee+C/itffC3xLJPGI5o/9Tc2zMQtwF46j05wea9Y8L6jfftHaqLHw/ot9Z3yIs/ntF9pU/wB7a3y/3QDx0B5GOaWW0sJi6uJw9OMVOzlK9kklq0rWWustVFxXVnDKpWkoRk3JLbTXW2nd+Wjep4VpOlT/ANjTL+4fcq/LM/CHrnp16/5zUUWi3CFRcKo3HcgIyrfj6H619OfFH9mt/h9oMk1/pEs11GiLM0Fmvku0hI3Yyo3A5G3k8jkDmvGdXdb6C2tVt0S6t4mUAhkGB0BUndnAJxzjHU162X42ljIOdLVLS6cWnondOLfRrez7rYmrKpTlyzVn2aaa6dbdjg21F5pifLjjJ+QsBxwO3p9cfj1qa8W5ljjjmZXVcsjY5Offv06Hpz6mrmteD7vS7Vby4YeTMc/ux359cdcHH0ptlbyzXnl2p86PIKZ+Uc4OOenJx712KL6lc8WrxG6dZNDMrfMFXruNFaUljIs+1gY2wCVaitDllLmd2e1f8E9rufRf2yvBusWsLTT6KLu8i2gkQsLSZI3O3nasjoxxgnHUdR7T+0JJb/s+eA4dSbVoUv8AUYVEFnJahZ5WOAG642D5sn249R55/wAE020yx+OV14g1C+stOtfDOlT3zLM5DXnymMxJg7tw3l/lDHEZwO483/aybxR488bWuqXUn262kjJVGuFVkYn5iAxHy8YGCcba/P8AMuG1m+fe2xH8KhGF1a/M25SS16fzb3WnW696jmCw+XQpRdpzlN3vaySir+r2Xzfk+A8aatN8QNRuNQub1pry4l3OpTAxwBz9PQDGKrT6VjS44SzLxkkk7R71TttPvLO7kWaAx+WdjMrB1B+oyD+BrfhRtZslVNzMowUxwwr9ApwSXLFW6WXkeDUk01qep/8ABO74/aZ8Av2kNNm1eSSPw3q1s2j6iyNsJSVgRKf9yQI3uqYyCcjuv+CgH7Vuh/Eu6utN8O3cWoRxyRs12oIVMEKsUeRk4Vck8jIHPUV8tX+gSRFtsa7mOHUDp6Cl0abGrwrextN5IVYYUAHTpn3+tfP4nhvCV81pZtUv7SmuVL7L3s2u6u7a/ketTzatDAzwMLcknd9+l0n2dlf/AIJsfFzxTqHi7xzeapNNCJJlghHkLsjIijWNQo9BsB9jz6Vmi2OrWxkk+aSMDcW7joKm8TPa6lKqKs1u6ttfzjyn+fpXQan4X/4RTS4LmC6i1CyukA8+NflDAcoeeoz3r6Clh4U4qnTVopWSXRdDyKlZytKXxM47X9Ms4GmuFmlkmEhKq0Xy4J5IOTnr3r7I/Yw/a68D/B34IabDrF9puh6pbyTW900DC4uLqIsHVioyxHO3bkAAAdBx8pzLDqke75VYdgMVj6loy5P3Sx4BI59BXi8Q8P4fN8L9TxDag2m+V2bt066a9j1cmzqtl+IWIo25kmtVda/1/SP1cvP2o/hv8WP2a7yLS7iHV5JpGS9a4ijYQhgdqLvJAOF56/eOOhA/OBNQh8YRap9hcSxpfTCDcP3i27FvLYk4/wBk7j3681zPhCe48D3k0kM3l2+oW0lrcDBdSGUgEgHsSMHqPfkHU+ANmT8SreSVJGhhjkZ4Vk8vz8IQEJ54yRk4zj0JBry+FuEaWRVK31eUpQna0dLq1/NJvs9P1OniDiCpmyjUrqMZR6pWv+bXyv8Aocz8Qxc6abbR5451nt5JJpd3UsflX2JChun96sSzvPKKrICVHGBwcV3fxm8VWt7rs0ccNnc3mSklyssjNEy/KUAJA4AHIyO3UGuHW1a5j29G+lfWWl1362PIpSvBXNbT75ZFX/nmORu6iiqemaTLFchW4ORxRVxu1oYVIxuavw18Vah4X1SGexuWgkf90xwGDKeoIIIPqPQgEYIBqW78Q3+tXcIvL26uMjJ8yUt70UUoRSSkt3v8tvzZdT4ix4hnk1PT2FxJJN9gtneDcxPlnBf8RuycHjk+pqjoFxJFGWWR1YBuQ31ooq+pEfg+f6GRqusXU+qqGmkbbgDmqsl7Lb6o0sblZN33h2oorF7nXyrT0HxXk1y7+ZI8m05G45wT1/kK9C1a1S28G3Ece5Y/Jjn27jtDlsEgfTt0ooraicuI+KPr/kcmkjQxJtO3K/4U2Ri0KsSS2ev40UVHQnqvU0tDcyRyK3zKyHIPOcVQ13Vrrw9cCSxuJrWSZWhZomKsUODjPb8KKKqTfKOlrUszGiG4LnknGTXVeG7SO4gi3orfX6GiilS3NMRsFzMz2MchP7yMEKw4xzRRRRJsyif/2Q==",links:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],maxzoom:19},{id:3,title:"Dark",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAIBAQIBAQICAgICAgICAwUDAwMDAwYEBAMFBwYHBwcGBwcICQsJCAgKCAcHCg0KCgsMDAwMBwkODw0MDgsMDAz/2wBDAQICAgMDAwYDAwYMCAcIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABDAHgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8VdE1S88J+XfebFd6ZdTPFIQCPLCuVD57Drj2/S58X4YbvS7G7WRG5IjZWyHDYPHHPTOc/nmpfGYg0qbTdPuJbiOCRi0d15hH2YqePl+63DY9QDxgcVoa94fh8Y+DII7IxIAqS2zFdqjjoQBxwT26/SgDz3w14euvEOoBbaJ3WNh5jggCLOcEk/Q+/FexRx+VGqgABQAABgD6CqXh/RY9E0SC1VEGyMCTAHztj5ifXJpbW0t/Ddk37wrG0m5nkbqzEAc9PQflQA/WtYh0HTZLqfPlxjoOrHsBWBoPxUtNTvBDcIbUyPsibO5TnoCex/T3qt4+guNa8QWVjMGXTmnjXCcPIWBycnjgBvpzXLanqD6de3XlS26TTB0cWynygu4cDPT7vGPbk5NAHca34w0zS9WW4kui0ttCyC2EZJbftbcP7rYXHzYz7A5PKeI/GNze29ztm32l3cvsAyp2BU249McZ9x3BrmSP1ozuP8vagAB5zznOc1Yj1e7hR1W6uVEhDMBK3zEHIzz6/wA6hEpERT5ME5zsG7/vrGaZmgDpNQ+KOqXt7HMn2e38ottVEzuDY4bOfTtit3TPjJBJE32y2kjk3fL5XzJjHcnnPXoDXHaH4ZvvEbOLOAyiLG9iwULnpySOa1IPhtdXUwtkuLf7csYlnhZuLcHOASM5JGDwO/PbIB3Xhbxja+KlkMLlXTGYHXEij16kMPpWDdfGEWmrTRHT5DBGxQFn2ScHklSOPp1ra0DwNZ6FZQK0cdxcQFiJ/LCudwwR+XH/ANfmuJb4fanqWuXEPkwWxUAjDkxhegwSSfTrzyOMGgDodS+Kul3umtF5d9/pMbJJtUBogQQec4z/APW96K4nXPD934YvFS5TY2AUZTkN9DRQBPqEF9e3NrYylrjyA0UBjO8yDcx9evtxgAZ6V6F4H0SbQbMxb5ZbaRRIhk+UxsScqExwOh69c8CqPw58FtoD3E93tN3nylXGfKUc5Dd85HT0+tdXQAVR8QxLJp7brj7O2CsZMioCxBx14z1x+dXq5b4naxaQadHayhJZmcSiNhkBRkZIx35A6evagDAu9e1TVX+1wy3EcSQ4+UyBXAwMhgic85PPfsKz7jwte3WlvcLat5cG7cYoxhcY9yx4x29eeCa1dH+IA85IdTt4ZIuNgtzHsiChsDr7n+LP1zgxXN5Yazab7O11KG4MaqEG3YBwvyYBIJ4BwADmgDnW0t4IbaWQxxpdI0iMzcYBIyQAe4IA68VCyYON6yIOrqCAv5gH8K3BJqNtZRoiztDBI4Bjtl3xscBlc87TwOMdD1rP1HF/Oq+dvuHONrkqQc9DkADuMetAFSGNHbl1AHOX3YPt8oJpk7DezEglmJPGPyHapXsWsSDcRSBc4wG2k/Q4P8q6H4VWceoardRvGGTydwk2g+U2cDnGeQTwDzjpQBqfCmK7slPnTGO1mYiCF+PNYDLMo68cfk3pXX2ekQWN7dXCJia8dXlb12qFA+nB/Emi0tZxcmaeUMdmxY0XCRjIJ56seBzx04Ayas0AJtz3NCRiMYUADOeB1NLRQBj+ONAi17QJg52PApljkxymOT+YGP8A9VFa00K3ELxuNyOpVh6g8GigDD1XxFF4fFt9sjmS4myWEB+TCnkksQD1HXmtLR9ettcg3wP/AMBYYYf4j3HFcl8VNOuku47iITyRSpsyg/1TDPBwM/NnjnGc8Vx1rcz6NP5sUsttdITtwmDz15PTqe386APaRmuL8d+G57nXftIi328u1XKRLI4+XHTGew53VtfD/U7/AFnw8tzfvG5ldvKZVCsVBx8wHHUHoOlbdAHkOoeH5tNZle3mOxjn91IjkY7nBT34zSaW0Wn7Lh/LdXDI0bTH51IKkMqoSOP1wR2rt/iiIodOtLh/IMkc21VmQsrqQSRwCR90elcpZGS41awH2WKGCWdA6Wq7WlUsARkfMOOo46e3AB0/w20G2WxS8ie9KqzLGJCUjY9C4TcfcZPoeBVjxP4LXWPElpcYdbWUFb1Ym2mXA+TOOvofYVu2F5b3Ubi2ZGjt28k+WPlUgDgduM44+naplJPWgDmPE3hCzlvInt0t4bhlCLGdoVgOgC4xk+uO2Mgmte2hi0sxQW8cCGIr50UEY438AnAyBnJz6DmrGp6Wmpxx5LRyQuJYpF6ow/oehHcGs1dGs/DKz3cjRwJLIXmcudrluBwd3TJwAe57GgDborntK8SRapdxmy1DzFuGdEhnHO5fmOMcgYyRn0+mN9cqOeff1oAdRjmgNn+VGaACigjIooAxfiJN5fg+7UFN0u1FDMFB+YEjJ46A1xng3we/iS7h89bc2cB/feWRk4HCZXucgnnpXT/FK3kv9GtLWNCzXN2iAg4weQP510GnWMGmWiwW6okcQ24Ue3f3oAdaWkdhapDCixxRKFRV6KKkoooAyfHGinXfDc8SKGmjxNEpXO5l5x+IyPxrN8B+FpdOvXvJ0lg+Ty4onCK3JyxITjHTGeevtXUUUAQadp0el2ghj3lQWbLtuYkkk5P41PRQDmgArhfiF4W1XxB4nC26yzWpiVhufbFE3IPU4zxnjn5hXdUUAeO6/pF34X1GNZYEtZgd0UkLsRIRjlSSemR7167ZCU2UH2jH2gRr5uOm/HzY/HNLcWwuQucgo6uCOoIIP64wfakvklltWWCRYpGwA7Lu2DPJA9cZx2zjNAEisHUEcg8ilqO0tI7GARxKFQEnA7knJP1JJP41JQAUUUUAQ3Fsl9H5cqh1znB7Ed6fuNFFAADg1YgiD2krH7y9DnpRRQBX3GjcaKKADcaNxoooANxo3GiigA3GjcaKKADcaNxoooANxooooA//2Q==",links:["https://cartodb-basemaps-1.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-2.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png","https://cartodb-basemaps-3.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"]},{id:4,title:"Open Street Map",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4RFkRXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM4OjM3AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAABJEAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A9oEG5Rng96yr20aFy4GUJ6+/NW5riaCGIn7zZz1qZWW6tiCAW29PfFXFuOphNRmuXqYanDA+9blhKr26qDkjP8zWNNG0cjKykc8cVpaYSUHAAHU+vWrqq8bmOHbU7GlSHoaWoJ7mKAYducZwCM1zJXO5tJXZmakT5gGcr1/HmqNTXM/nSkjO3tmoa7YKyPMqO8mwoopQMkD1qiBAMnFKVK9R1rVtLFAiu4yTzz0qeazilUgqF9CoArJ1Vex0LDycbmFU1qFNym445GPc5qSeykhkC9QehoitJX5jzuBzuGcf/rqnJNGahJS2I7osbl89mIH0zViCz8yzaQ9TjH51NHprup85vmPIIPOffIqwImt7NoyR8vQ/jWbmrWRtGk7uUkMtLUQHJ53de2MVeAxSAZAyMH2oBrGTb1OqMVFWQpGab5Sc8cnrzT6Km5ViD7HD5vmbfm+prOurN3uAsSfw56+9a3z5H3cfrS7RnOBnpmrjNoznSjJWMyHT3NuyyHac9MZ7fWq1xYyQkY+YHv0rdprIrfeUH6imqruRLDxasc0ylGwwwaStybTopnLcr/u4H9KjXS48EMT+H/6q2VWNjneHnfQyTGyqGI4PSm1dvLOSHlSzR9u+KrRR+bIELBc92OKtSTVzKUGpWGrG7KWAyBTa6NLaFE2iNcfQVG9jA4+4F+gArL2yOh4V20ZgVPZsiXKNIcKM5/Krx0pTISGOz68/yqU6ZDgAFgfXI/wqnUi1YmNCadypdESlD5mV54DVYsmi8sorMG65YjP/AOqs6ElpVUjPXitKW2CW4lhG2Tbk988e9TJJLlKpttuSKV9IXm2nadvGR+NWdKl+9GcdsfrVCdJFYGTqw3fnRbztbyhwM47VbjeFkZqfLU5mbF9dG2QbMFj6/hWNNM8773PNTXt0LllIGMZqrRThyrzCtU5paPQuWy27RkyFQR2OOaguDGZj5f3aioqlGzuQ53VrBVqzt2klDMCEU5JI4qsQV61uw+Uke0DALe9TUlZaF0YKUtegs0hRFjg2lzxj0HrxSRLN0nZCT/cJ/rUDusV+u05ymAPxqyvmNLkrtA985rnasjsUrtoZDC7j982QOnP+NWlRUGFUKPQDFIgwNpOcd6dUt3LjFJBTWQN97kelOopFBRRRQAUUUYoADRmiigAoqOWeOEDzG259iahN/BtJV9xHbBH9Kai3sS5xW7LVB4FZ0V6/liWXhe3v2qObVC0eI12t65z/AEqvZyuZutBK7Hz34ScxumU9x3z9elVI5I/tJZosqSSAi81Wd2kbc5yaktpFjnV35A7fhXQoJI5HVcpam/Ecxg4Yf73Wn1ELiMxlwcgVVOpxqwHUev8AkVzcreyO1zjFasvDv9aRhkccVFBcxzDKHv6VPUtNFpprQx5dOEc8ah8q+e3TA+takQKRIvUKAM02OSO4Cvj5hnAbqKexwPlxmrlJvRmcIRjdxK19bG4iyOGXke/WsWRGjcowwRWpNeSiXy3CqmcFgCP1qhdhDLuR92ffNbU7rRnNX5XqtyCiiitjmCpraEzyhAce+KhpyOyHKMVPqDik9tBxaTuy5dxs8a3H8Jzx6dqktLWVE3GP5g2RyKktR58AD4ZB/CvPfvVsJtGNzfga55TaXKdsKak+crpayCZppPmyOnTHOasxtjjGB9aUNgAbgR7mgtGuOR+NZttm8YqKJaTvTUcOMqcikMihgrOAx6DNTYd0PoyfSkJwcjJPTFAb1BA96Big57UtNJA5HX0FHzHrx9KAFPrngUituJ9B0NMkLKOOfWiJiV+7j8KBEmQKDnB45pBz1pc460DMW/in80ySD5eg6dOaprjcM9K0tRnViUBzgY/HmsyuuF3E82qkp6GlqcykiFf4ev6Gs2nO7SMWYkk9zTaqMeVWJqT55XClA9TikopkEvnFQAg2jv3zUVFFFgbbJbeUwyhh+Nb0MwlQYPOBmucq7YXLRyFDk7un4ZrOpC6ub0KnK+V7GotvtIwQPUjrVS+vBEPKjJL92/Ordzcrbx7jyT0HrWFNJ5szPjGSTWdOPM7s2rzUFaO4kkryY3MTj3plFFdBxN33CiiimAVNaRrLcojdDn+VQ1PaJI9wojba3POM44qZbMqHxI0HkjsUIRWBb+8PT/8AXVdb2VhuboTtIXP5j3q+9vHK+J2346DGMflUdxYoE/cR4cHI5/xrCMo9dztnCf2dhkVwvIcghRkev0+tK8bXgSSNiijPGcH/ADxVJba5MjDb8wyTyKkR72H5QMD0yKfKt0yFUbVpJ2LlrFNAWDOCnuTmop2aO7jkwCDhcN9etWkLlAGXce5zilMSTAGWP5lOR81Z82t2buHu2QFpCAV2c+uaUO2MPtP0p+0AAAcY6ZpNoJI24A9+tQaDlUjk4pe+MfjQOOCaWgBuc8ZU0uKQIqkkDk9adQBC9zHG+wnBqne3zxMERQMr3H1pmqKUdHXoc5/SoJZorhxK64wNu3J5/GtoQWjOWpVesdiM58lpHGWZu/v3qvU00wkAVV2qoxjOahrdHJJ6hRRRVEhRRRQAUUUUAFTWpC3KFiAOev0qGgHFJq6GnZ3J49zRNHjOcY56VCylDgipZovIcYYMOxBzSq8vlkLHlT3waSfVFNdGQUUpBHUEUlMgKKKKYDkXc6r6nFbFpAsceM/P3PrWRDxPGf8AaH866CFwYxgjHrWFZvY68LFasBEhOQME9af0ORTW5/Ghs5yB09a5zsHZ65NJkYxmj5ivOMGlX5QB29aAIIJHKFCu51+9zjrRLE5IkT5HHB78U10ZLkTDG0/ez9MCmT3wRM7GJ7HHFXZt6GTaStIZPfPbkK8e/vnOKmtbxbkfd2kdRnNY00pmkLkAfSltpBFOrnoM/wAq2dJcvmcyxD5/I6IjNQ+ahkCBsk9sVBqF0YY1VQCW/pisdCBIrHoCDxWcKd1c2qV1GXKdIDt4NMe4ijBLtjHsarRzpJEIxncRxVC9QxsFJB9MUowu7MupU5Y8yHX1ytwRtb5R0GPpVKplQNb7gfm9PxqGumKSVkcE22+ZhRRRVEBRRRQAUUUUAFFLngj1pKQBRRRTAnhZ5GEe0P8AUZNa8aokaKYuSAD8vFZ2m7ftIz17fka2COQPxrmqvWx3YaN43ZBNaRTJjYF91AFZt1YtAu4cr3rbx6UySJZU2uMj0qY1Gi6lKMltqc3RWvLpSHJjbb6DGf61mTRGGQoeorojNS2OKdKUNyPpV21vjCNsmWX25NUqKbimrMmM3F3RpvqinBRT+I/+vVi2uUuGKqZeBn5qxKt2E3lTgYzu+Xr6kVnKmraG9OvJy1ZtdRjn0ppQKDudsH3p69KjuCPlBbaD1OM1zo7RrFcElwfUE8VlXdx5gCKEC9crVi/mEahYv4up/Ksyt6UOpyYirryIKKKK3OQlknaVMPyR0NRDrRRSSsNtvcuCNhb+YrEFe6n26VFHFNdvnk+5zin29wBE0Mg+VgcfXpU9vM9tu2xb04wd2MVm7q5suWVr7EDf6NcMoUlRjqPaqxBHUVZll8wFiPnPvUaum4+YmQRjOelUr2IkleyZDRWg1nFJCHjbBx0weTVN4jHkMcN6U1JMUqco6sjooIxRVEBRRRQAUUUUAFFFFACg4ORWzZ3MckSRj74xkVi1c00Zuvov9RWdSKaubUJuMrLqbSscnK4H1pST2GajYPuB+XApTJtQs+MDuK5D0SO9lMNqzKcNxj8xWC7F3LHqTk1avL77SAoXCj1HNU66qceVannV6nPLTYKKKK1MQqa1XdcxgnHzD+dQ06NtkqN6EGk9hx3R0WCCPn+X0xSMwHGetMhldgpYx7SgIx1qR3VVLk/L3riPVvpczb90mEcanLjP9Kr3Np9miBY5Yt+lMSRPtIY52/8A1qkv7hZ5VKfdC/410xTVkjgnKMk5PcqUUUVqYBRRRQAUUVJBGJZlRjgHP8qT0BK7sPtoJLiQKnAHf0rRj0uNVbed57dv61djjEa4BP404sB1IFc0qrb0O+FCKWurMj7A4SUkbduWXnOfTvVFy33W7V0oIIyDkVmapbf8twf979BVU6l3ZmdWjaN4mZnjFJSg4OaStzkAjFFFFMAooooAKKKKACtDSkPnM+OMYz+VZ9aul5ELYG47jxnHYVnUfum1BXmjRchVLHoBzWVfXm5PKi4Hf9Kfe3zqTEq7cjB5zWYSWOT1rOnT6s1r1vsxEoooroOQKKKKACiiigDSs7yOODEuSwOBjHTFR3d8sq7IgwU9c1RorP2avc1daXLyhRRRWhkFFFFABRRRQAUqsVYEHBpKKQG1LqcKcKGY+2CP51XGqFnAeNdh68c/zrNorNUoo2eIm2dJDIksYaPGPbtVPVJgsPld2/piqNrdSxERo+1WPoDTbyR3nId92O+MdqiNO0jWdfmplelAJ6UlTRqUUylNyg4xnHvW7djmjFydiGinOQzFgMAnOPSm0EvRhRRRTAKKKKACtix2x2bMT2JP5CserdvOogeJ+NwPP4YrOoro1oyUZFeVt8zsOhYkUynZ2MwXBByKbVozYUUUUxBRRRQAUUUUAFFFFABRRRQAUdqKKACiiigAooooAKKKKACiiigAqae4knI3npUNFKw7tKwUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAH//ZAP/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo3NjE0NWViZS03M2ZjLTQ0ZjUtYWU5Ny1hMGY3ZTlhOTA2ZjciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzYyNDYxMzAtZTBmNy00YTAyLThkMDUtMTAxODVjMjYxMzY4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6ZjNlMTAxNmEtMjc5My00Njk1LThjMGItMzdiOGY0Y2I3MGM4IiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTEyMDg1MTU4NSIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJmMWZjYzliLTdmMDQtNDIzNC1iYjIxLWI5MDc0OTVlYjQyYiIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzg6NDArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAGwAAAgMBAQEAAAAAAAAAAAAAAAQCAwUBBgf/xAAZAQADAQEBAAAAAAAAAAAAAAAAAwQCAQX/2gAMAwEAAhADEAAAAfvrI6dr1ZrfJen4VmduppjrOpPboz116ymydJ0yLpnk0x7yXNLsSttIGiizRnscW4DocCrS1mKxq/P2ZPQYW6vWMKzzEXTMYduReqxht2e953gSDFr87Kphr1gBxVDK3ZNMIGlPa4qi3LL1uYwyRxF03nrvJq1gACR1xNK7E06X6CH19BFcO8yKvP51cuNSdKqycADocDdi9XTRX5u/xk2o1pr9WX0PL+l4UO5uyy7DZc6k6bhwAB1VG3H6nmvQ8WHctqoeTVl0wVawBux+lpT2eT9Pw49zwANJFibZqdYAAAA6HAAtzuPecCPcgWc1DuQOAAAAAAAAAAAB/8QAIhAAAgICAgIDAQEAAAAAAAAAAgMBBAAREBIFEyAwMSIz/9oACAEBAAEFAmgL88fMwbmisZ/VrlhNpEELQwwVXEZyQGcGksRPx87dXJOR4/YBRYJV9nimyiw1ksYRS0qvVagCCj4McCsm4MY20TCiysFrYLRDoMWThhYkupikAj2CJdtzk71GX+s4TJIeKrZUy5Yg+aQz3OrOgA+0CPeI1n7ltkqEpjXMTqRSTcYolTlIo9UFvDjsNt+8RalaUWp0RS35UZGQMBYNlYqZlAv7bvRb3gH0yWeyCXAj8KkbsPd6AMpMsrH0bddEwxnsLimSwVEi8C1Bc0v9GMlpfQDJDB1uZ3PAnIff/8QAJxEAAgIBAwMEAgMAAAAAAAAAAQIAEQMEEBIgITETIjJBMFEzQoH/2gAIAQMBAT8BdVy+37mlJBKzI6oO+yIXNCPpmUWImJ2WqiYgK/exVT9QaZAKjaU/1MyYmx+YNLa3cXTODcxW1uImQ4shLR3LtcZjkMwcVQv9wDkBfS2RU+U9dR3+o+ZnM9ZFW7iurixFCiyJmYMb2xNxMGJB2hdQeMBB6NVX+wuSAP1vhfg01GXl2XfSq3KxGwEd0MVWv31BXI753KAEQkVQ6Aa7wYy/xjoyedtMw4VPMYWJqch+FTFnKoRMOft74Tzuz1aQjjUZQ4ozMio1LtpD3Ij2ASI1+W2R+ML8xxqFAB7hR6dP/IJlyemsZixs7YH4PNTlFcVjtzN76coqcjLXIIexNdGl7MTHcubP4Vcr4i1feMeRvdWK+Pz/AP/EACQRAAICAQQCAgMBAAAAAAAAAAECABEDEBIhMSBBEzAiMlJh/9oACAECAQE/AVJTn1M/VxFLHjRjtFxcwPcZ1BuM5OlmHMxgzj3FcP1Pno9Q5lIj0KWMu9OIq7RUACzJZbb6hNeKqW6nxHqLjCz42JjKVPMNngzGCo0cWIXY8zaSLleGG4Fo3rkXcJiSuTrmIqoMg6aEivxnNa4l3cQeJcL3AwbrTMDuvQcTEnuPjtrj4v5gG3ryzA3cBK8iY2LCzpnHFxe6gr1oRc27eYGs8Hxy/oYibzAKFDTIu5ZiQ9mKNuuUMWoTlDB14ZuqiqFFD6SAYf8AIBWpF/f/AP/EACkQAAEDAgUDBAMBAAAAAAAAAAEAAhEhMRASIkFRIGGRMDJSgQNicaH/2gAIAQEABj8CLYyvAlOatRwyhSNSyhtzdNpqAw9qIqZWkyO6E+UDnqp00T3gCfjyiX/aLvCt4Tng64QoYvU9Oowpg5djyjs07IHNK0mUXCkqYh2FpUf4omp2R7dH7Jrdm4jgoNZ7b/3EuFoU/jNd8yh4Ye6d8uMWuB3soHnolHJDgOVDhGEbjDuskBOG4sjmP2nS4njqIioKg1CytODhtdEjhS7fA7goNiYtARzMLXDjpajWuyLjc4CsTRZWx9KccxgO5RsWoxboceApJ9EwTVVt0U9f/8QAIRABAAICAQUAAwAAAAAAAAAAAQARITFBECBRYXEwkbH/2gAIAQEAAT8hDtDD3jURRXn1GdBejzFaYD2strgZOYpoFmfiXhU9/czZHCw8DWo4PqYMV8kJg4eDiNWLl1WIBtlst3Fdw7pAqObDHQrnbgh7CwqjKFG7DxGCyxbI9oJvaga8moKkXzEtMPzMv1CUXNyOKleAmkM37vpUYh3fEv0G21QNddCgQjasy/3HoLfE08RMUWdvgic0Y6Ku5ylhSAbjJMdWimC6uZyr5dwdG39MtjsZU8WFLc8QA22TCru1c9iENmZWOBODLIeh+fNmYqNnyWBkGRrTGwGc1mXHvmyus/zL4R5a7ucqLKciy/poyPHRijdLMY3o6zL8i8reemMqhSSuihUIhVjeRXuPrs/cf5Lpk9GKzezpxw2QayXao13GArrd+0itzfCxCG7Cg+uzFLQuY9c+PX4cGAKQamDn8R7nqwvIpHn8/wD/2gAMAwEAAgADAAAAEFTd6EMr0j2vaa0FntdF+3zUtv5k99sMNnkxNssg8bcFptjJr/s3BsTttltl9iVtttttt//EACYRAQACAgECBgIDAAAAAAAAAAEAESExQRCBIFFhcaHwMLGRwfH/2gAIAQMBAT8QIaUC/jUYhLS4tqwHulyb84gOzv2v7iP2MA/nNzZNoIyVtwTwespQd+IobfiZOMfMVEF5PPvudwmMW+0DYz6Eoh0ZgjB4SRVXElx4D5+0cU0PEAVaXJsgOHefKVYU6f8Aei4S7hd8r9++0BpyxRDjpVyqxLdGHxGbroVdxxOHEEGvfv1QsRVTmhzf39zFlDzt+fpAWHLXVEudec+cHz8CIHEvyqHnj9RWjXRtbk3BBYxahp4g8qX3ljLTX30i2F3j3N6dvFbHcrHZLndFKuEi2QDE3keiXOHDKQWrWP6tiUcK1rvGuPAL736ho88RHuehDenEUGu91FsdcGBzmC9ZGEFp4KK8Es/+GztuYTrNIrqgvKX+b//EACIRAQACAgICAgMBAAAAAAAAAAEAESExEEEgUTBhcYGRsf/aAAgBAgEBPxCm2UAiMAQKKg2InWEtR11DHOFmoF3EBMSpjLyEIaSgZzDaOPfqCB+sIQQHf9lUiLLTnx0+CtHP+QgvLFMqpQobGSpSFs47SIUhSDBFAL3wVGVGdQEG3gAgr7IrdvNAty9Rj6meSRUTqPAJR1A3b4JZTKBxYVa4+kMStkdrdQu8E+juFYj9QKA/PkQdI52cnQpAEL3KCunGP7IWKd7zEBJGfnwVQYDqEWji4+oRqgijnZgieoxKF34ZEdsoB8NbZqWr2lCuROfn/8QAJhABAQACAgEEAgIDAQAAAAAAAREAITFBURBhcaGBsSDBMJHw0f/aAAgBAQABPxAYVIx2r5f+4u3ghNovOLyoa8x0ZWFVVq1yXnmeA85ocUlB5Q7MmBZOA2I+SvX30ybKHZTX9/jCcWvGV1gYWiT9ZwhisIl2T5zViPA32yyHyZ/RPzh6Cps2OKP3nB0aiMfjBxNAtgnTycXw49jVSvPO+evxgmRaF2aDEQOFKQ2/24QPFToDg15ZjMBoSk3d+/GjnWAABo6DACwlzjJTGE+tFX8GbCQKWyWHg3iXIC6CNHjFehqhK5aABivcURInyYabYcFQNzrXuW5ezD1A4XB9LysCCxd8eeHXC5EfVFavUvtrXXnNaxqd7s5ye5gg6Usvx+816Toc3BJEPyykEYO24TxQgrs0PXn684wu4E91V/7xgzrItLCF6MEgWB+7x94zCFwToa9p3/Xq9CadEumERvH/ADgdzitlJ7e3f7w6pKOrbQ30bZ1MMwRDiIcJSuu/b2w9gB4OsQJUuvOJaAOm1bPr7yuytPvw11y/wc2OB9zGCc0jYa4efnKFHnkfh49JwBE3q0c0T7mk/wB/WSFSpaBvjs6+LgWohSEb41o+8iRMnjHn/XOBLy3S79ybD+zHhNbaKbSeZNfwuvSWQRk2PCf9+8RuE1ZvqJjUGD3T1fj026hAKiMOPlzT0oFEQWp3kS0/NF5+vR0wXf4ez3MaHiYL26FtmBWJG2tCKzf7/GAvKeH+DDLpTPlgh8NO7fY6MrgVXosyDQmrxyJzMa41sAHBT9ZCpoRwAT1TAzTsadf7OMnyLUbT3oRyqzS7rTjbHrz6kKWTRrY9/GLieA9Lwf4ZxkI60x14uF0g7Zq+35xFKvgD9erGG4igenFWV449v83/2Q==",links:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},{id:5,title:"Google Satellite",type:"raster",thumbnail:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4Rn+RXhpZgAASUkqAAgAAAAHABIBAwABAAAAAQAAABoBBQABAAAAYgAAABsBBQABAAAAagAAACgBAwABAAAAAgAAADEBAgANAAAAcgAAADIBAgAUAAAAgAAAAGmHBAABAAAAlAAAAKYAAABIAAAAAQAAAEgAAAABAAAAR0lNUCAyLjEwLjI0AAAyMDIxOjA1OjExIDEzOjM5OjE4AAEAAaADAAEAAAABAAAAAAAAAAgAAAEEAAEAAAAAAQAAAQEEAAEAAACRAAAAAgEDAAMAAAAMAQAAAwEDAAEAAAAGAAAABgEDAAEAAAAGAAAAFQEDAAEAAAADAAAAAQIEAAEAAAASAQAAAgIEAAEAAADkGAAAAAAAAAgACAAIAP/Y/+AAEEpGSUYAAQEAAAEAAQAA/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAkQEAAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8AqW98IroP5/H8Q2e3FUNZst4N3bt5kchyzYxhzkkYP86pRgvI2JH/AO+uta8F8ZbM6dJBGd3+rYJ8xbG0c10UnOl7z2Mp8stOphWbMCVPGP0Ne1/DHXEuNJXS2fMsHQY/vM7en9a8ae2ltLxkkQof9oEZ5rvvhlOV8QpEoC7s7s8FvkcjHriurFJSp8xjTdpWPZ6o6vIItMnZhkbGz7cGr1c54q17TdNspIbyUhzGWCIy7jww6E+xrzkm3ZHS3ZHjPiq8juLyTyuVBKE/7WWrkpYWZi2M1tardi+vJpIotkRkYoNuCRk4J98GsqQspPUV69KLjBJnJJ3ZQYBfc1LA4Dgn1qCMNK20datRWkhYkkADkmrXck1EIMYbtinAgjjpVBpTGoXcQB0GetMS8ZW7Y965ZYyClY0VN2uamKXdsw3oaijnR03foKWSZFHzdMdO9byqQcL3JSaZKW3nce9MZ8OAD0qAXK5G0HHvRv3Sgjv2rlniFyqMHroaRhrdjnlycCozJtFMYg/xcj3oikVwQRkV59Sbm7s3iktByyl22qPrTjhDwaYzrGuEXnPXFMZi6+lQVcnEjSjaDUkbeWh3tnn0rPDsrYUkfjVlnwnPPNbU684O9zNxUlYsmZScjmnLKrZHpVJ22oMdxTBcMq9OfWtIYuopXewnTjaxpg5paow3ZztI/SrCyMzDGAPU12LGU7XZl7KXQl70YpAwzg4zSk4Ga6IVFKPNchxadijeWUc54OHrNfT54+q8fUf41pn5m3eYQf8Aep4dACXYMPrmuRY2LeqNPYu25n29oznGK1UTy0C+wFQ+fEiEoqg+wFIt2rHD8e9XPF0muXuSqckywIhCWKnPSo3kkJUoxR1O4MDj9fWpZGwhzVZZgz7T0zgVNaKjFU2y4Nt8xZuLmSVEedwzKoG4nJP1Jrs/hhqEB8RQwFIy7btr4GRhHPXNef3hPkZU5AP9KXw/r02gaxDfwjc0eeMgZypHcH1rWVNSpcqIUvfue9+P/FLeHtNVbeSMXEuduW5GCuehB6GvEtS8Q3WsX5lupmkPT5mJAGTwMk8cmtDxz4vj8UG0kSPY8e/cuc9duP4R/drk4ePnP4UsPT5I3a1CpK78jah8qR9skoQEcHcAKhvIlBZYnWTGMMpzn8azxI8rbVq3CSmFPJ9K1jBqTlclvSxn21vIsmdpz9K0LiURRgKM8849KsJGoJPes25l+XAXnuc9qyxFRwhaPUcFd6kWfNZnfcEGcH+lQkqWwCce9WVUyWRUJgbtxbPtVVotpGHz6jFedONkjTm1Lb3CqB5XGetQNOznO4n6mo8EDBOcUAegqJyctwuTpLweTmpUlI53HP1qqn3sZqXAA9ajYqLJWfNMjk2UmciomO0jmgcn1LXmgnml83jHFVg/r1p27LYA5pE8zHg5JNTrKrDDZFVQSpxil3cigFKxoBQyrxx6ioJkAf5cEHtUsMhMWxY93HrilEbEjcmPxq1TnLZFOSsMWMJyafuccdqdNtjyScDufSqj3ipHuVdwzjrjmtfqtRuyBVEaSDcgz1pWBKHBx9TVazu1uE6YYcYq1ICyEL1r0VRUIO29jFzbeplTswkKj/x2neRLg7wUwM4ORmp4oFF2pkG5ecjOM8Vc8+zRo/tz7wXAMmCML6YH415apTk3ZGzkkZS+WcBiw7U+aALGGQ5HrmtfUtKspYhd6VL50ATL/Ky7W5J+8c9MViPNKIymz5enUVLi46Mdy2LvfC77eVx365qkZC5YnuTUbPJEWQ8jjJXoajDE+oGa1q1ZzspdCIuK1RaScfcb7pG3/wCvUN5biNBKhyrfp2qzFbRmPzFYs+MhSc1KYWmtGjdQpHTIwOtduGUorlexnNp6ox0dc57VI0q44Paq9wnkzFFdWHqpyKI8sDXSSXra5WPtyenuauoz4M7Djsv6VguzIeM5BzWjYajGF8ufJ+uMd/U0O7TS3EatsdjGMnkVFdSJJwGypGDxSmRQd6HIP8VViDgnB4rz6tdwXs0WlfUkZl8gIi8Dvn2qq6bqnGdmRjbinpFvUMAee2K5JVJTepViv5PAz361IkIIxt/WrUMAdwGNa9vpsUjbAV3E9DjP8qjU0jC5gQ2hkdjjABx1qYWG47T1rqodDKqx8sdz0/8ArVFNpjIchcH3H/1qnmNFRRys9j5fbIqltXbkdc11N5p7SYjHD+g//VU9t4ZjjzHOjBjyCRx+op3JdJt6HIGFiAfXpU0aBEyeW9K6Gbw/J5pjijcgNkHHBH5VD/YNzHOWlQiL6H0+lPmVheykmYbS/NjHNJv7MP1rQvNPCXO1FbA6nHt9KoOu7kcADJzQmZyTT1L0E6eVhOo6ipUk8z61RgISFnI45/KmNqCQ4bBVffjP05r2qEm6a5jF7lW8uACE657VArGQbUO4Zz6VQnuHkmMjcH0HQUGdlb5SV+nFKlH2cVEp6mmsckUyFPvcMK011AQJm6bHA5x/gK5tryUgfOQQMZBOaaZncYeR3H+02a05n0FY3LjWEZcRruz/ABZxj9KzmneZw0jbiBjOMVU3U9G5pJAalpKUkQg4ZWDKcdCOlW7ud5P3gHzkku3qT3xWRG5DAitOG4YqBsjYgDhhnNYYilzrmW5UXYlmKBdoCkn1FRKscR8yZlC9QuR/I09I/Mck9B39Ky9RnJn8sdF+X9TXPh6bm+aWwMmn1UqWWBVVcnBxg4/A1GmrTeWyOxIbHJJyP1rPYgDk0wGu/bYViwGJbPJq9BHmLccCqsSqoyam8/CFVOMCqTEQXLYYjvmp9OiEzsHXJ7Aj61UDGWXLHvWxo1lNcXo8kYXv09D61E/hb2HHV2NS4t4rW3XaxwfuhiPXmqMczMNxQsM42qM13tp4QW7jRruTzAM/Ltxj8Q30q1f+BbW3tT9hXdKe2SOx9W9cV5dPE0F7s9X3OyWEqtcyWh56DGTw3PXYSOPwqzBbTXREcBCnv1H8qsr4Q1mS+mEUHzIGbG9OQD0+9T4tK1+wugPs3lk9BvjPb6+9buEE705K/qYKEl8SdiGPSrxZNwcEduT/AIVq6Y0trqMRmjXLkJ+8B4BI5Ga63T9EjOnKs8W+4XOTux3PocdKqS6VE1xG8qbmXBDZI7/WuOOITm3L0Ol4dxSsaTMnlEr5ZGzoOuawb6SZpSqJ+YPtWwtuzDbF2OSPasrWfMtAJV4YdentXOtzWWiJLXQpbtRNJMAfXcfp6Vof2WdhL3LSEf3Xz/Sqmmat59uPKfEf93HufakuNUa1Usj8EYxjr+lVrcSStcsxCAOY/OXevJBYZ4qpqeowWqeWyq+fUA+nvXOXeutHdmaOPDkbTz15z6Vm3GrSXsh8wfQf5HtS5ddSZVlFWJbq8d4cCMB26nb71gt5hBA7j3rYV/OU8dKzrkraLluc969KhQjZTtdHDOTbKs0z21qd2CSeM9OlY81w8z5Y/RR0H0q1qVwXjVc/KcN/Os4fM3Wu2PmTYftPUijG4Ywc06Zgvyqc+tLGy456561QEJBzg0o4qaQofujn1qHnPWkA7PvT1YCoR6U7NO4WLSSirltMDKMGsxRU8bNGwYdqHqrAby3G5Qhb94OrYrEvoXSZ36qzE5/Or5tYYow7M+/0BFMYTNC3lxMU91OalPS62ZNtb3MRgxp0StuFaE9o7QCTawYDnI46VUjBRuadi7hK7AGo1LnntUkoJ/8ArUxHCkChIRqaLZG+1K3tgcebIqZ+pA/rXteg+HLbSbGMEbplzvOSN3Jx3I6GvHNEuEj1a0kzwkiMc+zCvV7PxfaQ4jxz36f/ABVefmUp8qjHY7cF7NNuZ0gh322Ryx/xpixTkhnb5QeRgVSPiG0uWVjLGoHqwH9as2msWIkMrTpwMYDr9fWvE5Zdj1PaRvdMvQ3CRK0atubk9MY9qS6JltCWGG7fnVK51nTWlRo7hS2QcF1/xqG71y1jh3+Yn03DP86PeTFeDiUdEu52la1mP72L7/TvkjpWvqWmNeFLqKTy50wpbGcoMnGM461xsd+kuqrfW/KH/WBuv3cDGK2NV8aQ2FqZIbaaQjo2wFQcHrhvau105OalSW5zRnFwaqPYxdY1y58P3nlT2nmCT5lk8wDIJI6AH0pkHiaC6tWmaPEvGFyeOcdcVweua1NrWqPdzpGrHIAQEDG4nuT60mmXOyRl4wcZ/WvT+pxdPVe8ee67U9NjbmlTzvMj+R/XrUF5c3kqhTNvB4+6BUOpTJDs2HO7P9KpwTBpADgDvWNHCuceZkznZ2QB2DFJeWHAp6o7t8o6+9OaFVJkXcQDkfWo7i5K24yp3Htj3qaVDnnyy0IlJsWW+SwHzcuep9P85rFuL9rkgtxxjFWZLd3tSWVh6jHvWSB8/FejFKK5VsiUWmxJbfd3MG9cYGKrFB9Pap4jtjYnHeonk3HocVQxpQgZpURmbC9acoJHANSLI0fykDBoENGVO1hUmEK4ximedgkjHpTWYv2OaYA8IwWPSmKcU4OdpXHFIKQyQNT15PWogtSJxVWJNUOzEjAIHdhUouREuC3ttU1Ha/6RFNt++u3A9arSKRIQ3UHmvOxkve5UUu5aFyZM7guzpt9qT7LDecRLsdfUAZ/ziqwOO1WbV3EmY/lPc9azpYiUN9gauZzxGN9rKR7EU0wo3Pet1rFbrcWXa/8Aezmse9Q2kxjBzj2r0KdaFT4WJprcjV/IKlMhwavw6q4H7zII7jv9eay0ZpH5qdo12e9XOCmrSFsa664SNu6T8/8A69XDq0yRZWU7SccMf8a5XIQZ71p2cguFMTcYO6uWphYcj5VqUpM0W1SYkP5jAg9mOf51NFqctxgSTOQPVj/jWe9vlgEOO2KltoFSUo5+93x0rzLIpNnVaci2A3yyq0HqGyD1/DqayPFviCC5tY7OyKgFhIzR454YEZB+lQ6rqDxWYt4j8o68e4PpXMBCzgOcD1ruwmHvapI2nWtH2cRVIdcHhvWprfMco56+hprweXhlOV9cUDIXf029a9I5Se5vfOwOMDpTYZgpBJGCcVQ307f8n40kktgOmt5kbagAKkDg+vr9KS/W3VAXwMdBxntWRYXgEiB3wVIA47cVqzxw3qqxmwR1+U/57Vi5SSdlr0AzpZ3aQBVfaevHy1mC0eI5YZ/Cte72xZWNuPTFJbxtdnZ5fQ5zuqo33e4FBVAiyUUnOORTAiyybQig+wrQe38qdkdMryevvUTCCOdWQY9eT6U41Iy0QFWSAxNgEio5FynvWhcqj4YNgfSqMzIowpzmtGgRVA4PrmnKcHmkOc4pUjLt1wKgZKyKRlelNEZJpAxBxTw2TTQhQmKXAFKcjrSdaoCW1me3uVlXquf5V0EFlBrCF7WTN0qZePaeT3OTgdTXPMDsKjvW/wCCAI9ddj2hJ/8AHlrlxMFKF+xrS1lZ9Ss1s0ExjlXaVODznmrMUA+8D1q3qziXVJ3wceY3P/AjVbzxtEYBzXkpNuyG0othcyyJE4iPPGelc1dbmldmPzZOa2L64UIVBBJ7jp2rGnLNzjjPWvXw1H2cPe3M5SuxsH3qtPynWqkakkVOwOzAroQis/3q1vD9sbq+2A4IG768jisoIS4GK2dLuEttVt9rApvXJz/tCk03F2BWvqbVzpkqSNkY9Bx/jUC2jJy3IrtFgjeDzt+FZd4568ZrC1J0Dv1wcc/lXgptux2TpKKuc7LCZCsYOSaqaharZoqg5Yn9Of8ACp1uUXUxvPA64+lQa1cCW6jK9Ao/ma9eMZQcYR26nLo02yKNytpt3dW6Y7YqvPkJgdDUYmw+cVKW85QK6LkWKo4qS5URuADxjNKUp1yrM4xzx2oAqF/QVPbiWX5Ix834VGIyhLMCM1s6BHHJdgFsDuM89D0qbpK7Gk27Iv6Rp07RDzVy3pkcdfetk2LjgHmr8T+QGXg46YqUP5kiqnUkDmvJq46bfuaI9OGAjb3nqc9f2kvkHJ27ep4PY1hzW8gAfduU9sYr0fULXyrMGTdkrkAfQ1xmqIsSvIQ3OOPyrow2M9pK0zlr4f2exgudsgO3ge9PMS55FWnw8IkB6VWnzEcIMgjvXo2scokkKmIsvGBmqBcq2Vq9O22xJOMtxj6iswHHFS9xomb95IWPGalWJT1fafpmoQ/SnqCx4xQBMyYAwcgULSLx1p4Az1qhDTyK3fC+5LqaRf8AnmR79VrDCHFb2gAxTsAM7o8/qK58U7UmaUfjRbuwXnb5erE9Pes+8mS0TcceYegrTvHWIPI/G3Jrk9SvftVydv3R0/IVhhsPa05fIKj1aQ0z5bJAPsac0iyL9xRxjgVVzT0Y13mZNGgHIpzZx0pYSM05yB2oAgLLGfU1HA/lyK/oc0503ZbOPQVGF7k8UgO2sPES/wBmiOV87Rjk+w96ytR1cXMgSPIXufy96wUkZTt3YTPPHanySpkbOawWGp8/P1NHVk48rJI5Ee/3HJU/4UXI81gRnAot4No3nr2FSSKwQ44ro6GZRIG7AxUiErUZBD/jUyDOKSQEroOuKc8oBBWNSPcU8gEemKa0Yxwc1QitcShwMLg+wp2nyiG4WUybMZ/ix2NI8XrUZiHpUtDOsPiK3SQOWDDuAQf61La+J7d5lI2pgg/NgH+dcV5eKaoOQR2rljg6SVmjo+s1ejPT7jWxd22WkXgcEntj61yWtXgkXYrZz0IP0qrYXzEeTN8y7cDt6DHFQ6gVMo2DCj/61Y0sJyVL9B1MRKcbMs2zpNbFBjcO34057Uupx6d6zrWYwy5Fb7AFDsX5jx1r0W0kcpzl8zhlix8q4Offmq2DjNbN1YTSHcV/Uf41myx+X8pHtU26sq5BnFPVyOhpCB3puAOlAFhXz1qQNiqqk5xUqHJ5piJ0c5FdTo8MY083TH59/l/hgGuPjfmtnT7hf7yjaOcnr06VjXjzxsi4PldzVvovtMMkYON2ecfWuXutMmhlOz5h68D+tbcupwHKgPkfTH86zp7pZGO3rW+lrEamc9tPGm512g+4NIisMZ71pxGJ2XzN4A9MVDc/KxWL5l6+poAgQ4PSrC4cYI5qru55696nicA9KABoW7jFRvGCuB161caVOhzVSSZF6HNDBEDI2KRVCMC34VMsoKnGOneq8jZcmkMvx3UgXK0Ndl1II61HBcLEnuajaZGPOc44p3JJIVR5wHPGf61rGzhe3HlL831PrWGvLD1zWhYyNbybipI9ccd6aBkD/JxSK9S37Zfdg4P/ANaqinnNAFk4PSo2AHXik3cUFxikMYy8Z70scJI5GKaxzT1koACgikVjyMjIouGR8Mgx6ipVxIMHrio2Qg4osAWcXmTqCOP/AK1dBJGEQktgAZPFc/byLHdKz8KM8/hV2+1ZJIjFGM7hyT+PvSSjuwdyvfzAnET5XoeO/NZ3XrQRk05RQAD0pdmelSrHn61IsRXmiwXK3l881MkdStGrLuB5+tIh2nmmBTToKuWv3qKKlAI/+sf6mox/rKKKYFkdDQv3qKKYFM/6x/8AfNTR9aKKSBiyVSfqKKKBj0+6aY33qKKAFHSk/iFFFAE8f31+taaf6j/PrRRVITIr7/VJ+P8ASqa9KKKHuJCnpTTRRSGJ3pR1oooAni6int940UUwKcn3BUH8QooqEMkHSlXvRRTAsx9an/5ZtRRVEkafcP1pj0UUugz/2f/hDHdodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDQuNC4wLUV4aXYyIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6R0lNUD0iaHR0cDovL3d3dy5naW1wLm9yZy94bXAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9ImdpbXA6ZG9jaWQ6Z2ltcDo2ZjdlNWMyYS1mODAzLTQ0NjktYmQzZC1kNjYyNGRjMWU3MWYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDFiZjkwZDMtZWVlNy00YzVjLWI4NjEtNGNjMTA4OGU0MjY5IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MTQzYzI0NTctY2Q4OC00Yzg3LTg2ZDYtZjRhZDExYjQwZmYxIiBkYzpGb3JtYXQ9ImltYWdlL2pwZWciIEdJTVA6QVBJPSIyLjAiIEdJTVA6UGxhdGZvcm09IkxpbnV4IiBHSU1QOlRpbWVTdGFtcD0iMTYyMDcxNTE2MDczODM3MyIgR0lNUDpWZXJzaW9uPSIyLjEwLjI0IiB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDpjaGFuZ2VkPSIvIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmYxNGJlZGJkLWJjMWItNDQ4Mi04Yzk1LTQ0MTZhNTlhNGU2MyIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChMaW51eCkiIHN0RXZ0OndoZW49IjIwMjEtMDUtMTFUMTM6Mzk6MjArMDc6MDAiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gKwSUNDX1BST0ZJTEUAAQEAAAKgbGNtcwQwAABtbnRyUkdCIFhZWiAH5QAFAAsABgAmAAJhY3NwQVBQTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWxjbXMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1kZXNjAAABIAAAAEBjcHJ0AAABYAAAADZ3dHB0AAABmAAAABRjaGFkAAABrAAAACxyWFlaAAAB2AAAABRiWFlaAAAB7AAAABRnWFlaAAACAAAAABRyVFJDAAACFAAAACBnVFJDAAACFAAAACBiVFJDAAACFAAAACBjaHJtAAACNAAAACRkbW5kAAACWAAAACRkbWRkAAACfAAAACRtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACQAAAAcAEcASQBNAFAAIABiAHUAaQBsAHQALQBpAG4AIABzAFIARwBCbWx1YwAAAAAAAAABAAAADGVuVVMAAAAaAAAAHABQAHUAYgBsAGkAYwAgAEQAbwBtAGEAaQBuAABYWVogAAAAAAAA9tYAAQAAAADTLXNmMzIAAAAAAAEMQgAABd7///MlAAAHkwAA/ZD///uh///9ogAAA9wAAMBuWFlaIAAAAAAAAG+gAAA49QAAA5BYWVogAAAAAAAAJJ8AAA+EAAC2xFhZWiAAAAAAAABilwAAt4cAABjZcGFyYQAAAAAAAwAAAAJmZgAA8qcAAA1ZAAAT0AAACltjaHJtAAAAAAADAAAAAKPXAABUfAAATM0AAJmaAAAmZwAAD1xtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAEcASQBNAFBtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEL/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABEAHgDAREAAhEBAxEB/8QAHAAAAgIDAQEAAAAAAAAAAAAAAwUEBgABAgcI/8QAGgEAAgMBAQAAAAAAAAAAAAAAAQIAAwQFBv/aAAwDAQACEAMQAAABru7NfdFXrfO0/Ifo+cNCwyWSGgeXpFz7+XU+yom6mTsrWYrcZZId1fWtuRewBz7F/NfnPJAu4lZBJ1zZpU/WpDyL90sues3apSaVZVBjw7h52tFOvFYUC01K+5iQ7YCyZIyoJs0ru4zXW5crdecG3daPqLF1aK2FQ6POpnbpVtOjOAZcDrOqy5olg9n8117hyti6xK92stI287S1r9QRWnkzINAkdXfFtkYIt76w9SNeY7rkX131OaIwJUW1cKIr1BcjYQZg/wAWmbxhWPR0CaWLHon43q3TzAtQYl94fYsXM1+c+w84qVosEto/w3x9lCFhOaRFnRhTJRABIitLSFcbkTgkMmVk1q8yCkjgjk3I4sVep4kkSDQxDJzLsH//xAAnEAACAgICAgEDBQEAAAAAAAABAgMEABEFEgYTIRQiJAcQFTEyI//aAAgBAQABBQLuLsX6e2pK/KeVchFS4u3/AHX7JkdhXJlC40mdvj2fJn1iWA2b3k0STNEI4ckIGcF5B/Cc1y/NPynKN+Qky6O2RgTvtgkzZORHuraiFaZJQY1DTRLGHZyXiHqVywqWA+O7FvWMp8L9Utji+gPjzEW+MlqqknrW1c9souFS1l5TXk3luVoV77cShF8a4ee5JZ8RPSt41LWsQ0l4+ZpkoW7nkQR5bX1mW5gybGEb/aNipeP2rJV9ZC6bx/yaKjQXyul1ueQw3I/K/IJHijvFqifkC4GKIp6dDnb5O8UYimeGCNu14LC+v+dHc6V3aoHVnlkbIrRgkXVx56PqV9EPEy4N71nCnpykjekTn3kr9nAWkrW+Ytx9rcjNPruJIwM4qzDFUnevLR+JcsNoK2Kd5xC7sct7GkXYP+1KEYh7NLp8aEwAqGxo8hZocob994oG1vEB3TlZHew8pk+5YmIx5T37ESdyxb4r71hOIdj2tA3+jGoOH+v/xAApEQACAgEEAQIFBQAAAAAAAAABAgARAwQSITEQIEEFExQwUSIjMjNS/9oACAEDAQE/AXAfj3mHg1HYAczuAbjUbHXUVSRUVAJcNXBjUCfJ/wAx8ZTuDDx3BiYGIbtop2vzGNm4TuiUBcuXL4lyzN494MgEbITN4qBrgcDqMd3PkLU494uNTGxifT/iPiK9xvFeFNGE+dLhfK1iZfhxAvG1zHpjv25KqbFxOYSFbmNlC/xmTIW9QHPnS6tcKbCJ9djmbVJmoL3NZlYftkRclLUDfmD1BbHE23CAD4UXFJx8iEk8n0EEd+nT/wBgjGvOBgj/AKupqGUmlhO7nzo3wItt3MpwZUtZ0YPODhrhbcbP2QfTdff/AP/EACoRAAICAQQBBAEDBQAAAAAAAAECAAMRBBIhMRAFEyBBUSIyQhQwM2GR/9oACAECAQE/AaWej9R5BmsAIDSutrDhZ0I7ipdxlWtVzhuJZqKkfJMt1DNnB4PgMw4Bjay1jkcRPUF/mJTet3UOvAcjbxG11TLt55moCptrYyysW1AJKk2JiKoqXuanc9gQ/thYoxx8a6nt/YJ/SN1nmU6ZK1H5h01jORjEeo1nDR97EK3M06GtcZ48WjeuI+otc7hBW7LuA4jZXBP3MzfN26aEsBk9TaAxcfcyfF9fuJNNQU/U/czMz1C2utMN3KfUlJ22rgf6lmorKbqc5hZrKh+J2MTbmaStbCVM57mfPfce5awN/BiMtgysE9R07Nbv/MOncdyhDU2T1PT9OufdzLtKHsDfX3L9IMg1/wDJsWsAATmY+GuB3A/USxqzlZp7HtTc3jXLlA0QBmAaKFHC/XhxugTZlswOWI2HImfzDB41n+EzT0+8/PUCBV2r41dfu0nHYmhpZTvcRU9sYHgzWrfZZsXqBbtPZzxFyygmHzrOUCj8xahUNqj+yyBu5+r+MxjjwIVDDn5/Xw6Pw//EAC8QAAEDAwMCBQIGAwAAAAAAAAEAAhESITEDIkEQUQQTMmGBIEIjJDNDUnFyseH/2gAIAQEABj8COm/1ftxe6d4Y41Gw4HuFqV6jWPcNoN5TnEKojaows9Jmyjj6L295VjfuowFp6+oC7Rw6nK1/EueXaZcaAe3Chwp/pM070o4U9ZRtKElQMjunO1TSF+G9viNM4c1AFEF4teTx0LXTV3UqTZS0yAiLShS4Pdyt9jyE6TYLb6UCAAVudUqTgoEHc7lZRAyvMaI0+XlflterXOQ+yDPGeSdI4c03KexrqZiyLtRgLHYeboDSpcR25Ti8qGC0oLb1pmf8lUNze4WJC0vDu05p5+Uag6fay02aQMzNX8Sm+D8rTEtBJyf+Lc6XNsFP3J4O0DAR5V1iFfpUwen1Be2EBp/KlOEHanFsyidUms3kqFfHZHygas7lMT3CAi6k4UC/TRdwJ/0nOtCqn4UKh/6bxBThpR8JzlPKLpn2TJpY7mpTUHOTiMyms5yetQ+0SU0Bp8v2VxHXehBV7z1pnae6tjlYl/eetkKiv6HHWVdETbP0SwwcKTnpK//EACUQAQACAgEFAAICAwAAAAAAAAEAESExQVFhcYGRscEQ8KHR8f/aAAgBAQABPyEF6Jyv4c9fzLWBwWcqfuA2E2szgPkYtresuwrTymG+Y1NOLmr0gmONtwMbLi61MXTcB/pGqRnHKcmqHx5PkCrsishN57zPoCFHFXGIwh440vzGM3Vg3Gh0XGIEZeZYKuOYvBLhR8xMwvGJTKF+xWnY2lU39xsiWHSPccnPyDYqYHdxlqAOL43EgOCKdmAv7OBqxBshbrKK5M9LgY/oWzgvAsohBxSy0Ef00Yt4wPrCR3nML3+UoIX0GpWo+Q7QWJK7ZT0rrE3HwWX2+zn+ZtP75l1c7RK0We5ZKYlquGakFKlwmdzxER5pLy4Ix65esqOXWDmMwUe8GN6l9SQvPntWotaeUqZF8SAYN7DVNmAda7VMeRBHslhzc9ZfzT/kyw2F4n9kXOkRnmJwZVthwPs6Qi+gRCW9Ohcd/Efww7sdI+Wa8BjQZXBdAzE4uajmhYqmcSiB7su1kObRXivZzqBZodAmZwcnWCYBdIOE8VL3X5nTlae0uhF8usx0ohaWllQs3V4ZxmPpMKDRjxN55RqqrhtWUKKSsbcaOJhGIYVGU5v6Jov/ABB7pfNWYXjX7JeE25Wy3E7GPB8mZCntxAPQODmGp9sQBiBdmoXZB4h7oXGlwPsMOs2F2CidL+EBWmen1UfZseF+ZYUxomIblla4cioUIIRVlkOcRaxDKXkLW2Glk0Apn//aAAwDAQACAAMAAAAQmzVu8s1W1nzW/vxGlh9XjIpgwdesdisODvLuOoM7ZARAtGWxX8OTVLDMHlpsxtg0ECD3/8QAJhEBAAMAAgIBAQkAAAAAAAAAAQARITFBEFFxYSCBobHB0eHw8f/aAAgBAwEBPxBOpQiVUsSnKNQii1cXg57lRZofvAVdxLREg7FLq4mAiIeUItmRqBvr3FZ+/HdMV2ESw7KJDewOJc4Z3SonpMjb6lIpuCMlgjmXseARyBhlB1OJbqHEOYWKWwsjTAwHy0oC0SsiVOIodxBcd3/kOAs77/GBm6cz9SWDg9zU1U3WBKnzKlVLbBsusYsE+xvyzDBgNj6vUEClg+3+IqN04icKK2WXLnzLqXGR6cwU1gfDJAlvyRiy18VcBujZwipXqGx8Is+fymmpdtsuGe7GXDslq3gZS0NWsdqP99ZGkDicLleEWuhiJ4OPCZC4N+C4hxEO4eGoLhCEQYFcRL5nU7+wAmwi1PpP/8QAJhEBAAIBAwMEAwEBAAAAAAAAAQARITFBUWFx8IGRoeEQscHR8f/aAAgBAgEBPxClS0ns1cIzKUSqjiP9MlfrOkJXEHFc1no94XrB9qK++sqG2ghmqnmbiBwPTJBleeN/uaQDHD7fyMKYKeksIB0ePTRlXGyQCJms948FUu7CfORpvcuQC4xt50iXmakriUy2LK83g6EY2nHeACWbz3iE9zHu2sqxTElNMG958+JYNtRtXStYXAVKdu3idYlZAONvH5jC4N5QByIBzKGUxMykTLT0OXdgPM/wV+IMw0vU0Zc9J29es11DjAOZN0Neu+J0Ujw/qO1I20Da8c/MDUwunvqP+f7DuJcZhnbYeGZoqrg2miY2l1HBN0TGptr/ADSWTsgp0i+zQK9CI1hEGVYTk806y2LaUDQ+4Xils+PfSMDL+X2yiI5rXMBEtvNdJSwJbrox/YLemUnDit5tCScjXv8A8mn8pfvCsYYY2ly0I0jcJLS8tuOmWtI4CtnDZx6eby2AQVv+VC3p+44AaasJYAlbRwcw9NfiOKlYLh69lfduBzAGYasaiBp6/cABUaebxhNMrYEuFawuukQrgft6wZrpEYNtMQiVGIGkrqjXJcunLrKmmZUDCXBs7y248wWotuYYbJrK/IzFcE2gDNrn/8QAJBABAQACAgICAQUBAAAAAAAAAREAITFBUWFxgZGhscHR8OH/2gAIAQEAAT8QZzF2xILVog4HQ4OUaVRAFG3SCJLv04n9Q/GUe1r2Au0Mdpaj4XBriNt5J1++c9Hh6cb6mKRr7/XHOFIK+jJppB3H1fGLJUoQYVwjhp94ikDwBzjHQzlmjnERp5JvHzTZpAL3h376nXf94zOXIrDZuId+MtwEQpgJeA15wV1Cug6fZ0fRgpCDQ0Yu3l0/EyFAFBkPBr44x4KV0jGzAT4zcoSE4wcVHRGFaSzQNtbriKawl5dHrHZUbLTz8ZHmxAo7+3YEpz6ibT+1oYSJQRN0lMNPCyxvIcv9TA/FAraJyhv25ahvE0ODDZk4nR4Trq7wOVEhIT2vJXv3kLjUGD/3LHFjBBFlkeR16zm7RQor6694YKtoFJsRiJx9ZWVL4SR98fnHBVhgaebXqc/eXM0Q7gb/AE/n4P8ArDdPYXn5uIspoLQ+QNGCvCkq+LHwYOdDBFmcvd6xQKER5yH7bdrkXC2aWUFLDhezzgitpQBUNQ73g/VwoIugPInXeEfnDHUoks52aompASMupq2JyF4ZOb6sAAEUCbATWtk494w/fqI9E8F1kIBg9sGlfD/GHJVa+E+MnJe2S+zprO/8MXEJUA8HaBftnR8aQvH+845WzV5f8ywYNk4KHZeXmes1PDNAzbR3XPFB9o0R3UidjLvL5mWGUmhFT2x8tu0rB1bcfQ9YUyCVdQNkH6PxiijV1WbVQ3S8+8r/ADgBz52+8YaRtAu/vJVc4pqa6wjwWx4W44O0+M2SdF86OdjV6T2YFdEkpD2RxP6xSFBKVHRcG3Xajiu5KPJPzrX3hJXelBTdOwlPeS6NqrAee5DXjGeUoeHj+P1w3BXEaTi/78YHSpeQ6gzjUwGMk9fUm5tMQ6VgEj/ObRrbtiNkpQuucVC0wU0TC5hgcJOJ8pzi0hEjboH3m6msBaBxm0Y+LjCQGe2/Rx8L5y0pBB6ChF7ZvD7tJqhIg/WPAEQwxLnQe/3yKZLDrY3wl/3KhWSmniJPGNIj3MGxxu2AJPWn5yKEh32wQVT0vOQKCwG3E+/wZOlEJpebPrKCRpGT6yhCMIg24jVS7N8MOeDgVXl840mtjOjlvFg9XrJMD1hLBeNGMATLadE8OT4tacCY3L10b0oHPr3mnQp6zXR54cVwad/vhyFboP2Y6LGSgpzw5wxQ09YWKB6JctNq6u8FRK2zHMUDGxWOEY9XClcTQW2+speVQsNOveKpG1OVec54JbjAYPYc/Of/2Q==",links:["https://mt0.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt2.google.com/vt/lyrs=s&x={x}&y={y}&z={z}","https://mt3.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"]}],u9={class:"base-map-button__content"},c9={class:"base-map-button__title"},h9={class:""},f9={key:1},p9={class:"base-map-control-setting"},d9=["title","onClick"],m9=tr({__name:"BaseMapControl",props:{...rs,baseMaps:{type:Array,default:()=>l9},title:{type:String,default:""},defaultBaseMap:{type:String,default:"Open Street Map"},controlIcon:{type:String,default:""}},setup(t){const n=t,{mapId:i,moduleContainerProps:a}=Io(n),{trans:h,setLocale:m}=fa(i.value),{setBaseMaps:o,baseMaps:y,setDefaultBaseMap:x,setCurrent:M,currentBaseMap:T}=eM(i.value);hl(()=>n.baseMaps,nt=>{o(nt)},{immediate:!0}),hl(()=>n.defaultBaseMap,nt=>{x(nt)},{immediate:!0}),m({map:{basemap:{title:"Map basemap",setting:"Setting"}}});const P=rn(()=>70),L={layer:k5},O=$e(!1);function W(nt){M(nt)}function H(){O.value=!O.value}return(nt,lt)=>(wt(),Ve(X(Ta),mr(X(a),{btnWidth:70}),{btn:se(()=>[X(T)?(wt(),Ve(X(Tr),{key:0,tooltip:t.title},{content:se(()=>[jt(X(yP),{class:"clickable base-map-button__container",height:"70px",width:"70px",onClick:H},{default:se(()=>[zt("div",u9,[jt(X(yx),{src:X(T).thumbnail},{default:se(()=>[zt("div",c9,[t.controlIcon?(wt(),Ve(X(pb),{key:0,dark:"",small:""},{default:se(()=>[Va(oi(t.controlIcon),1)]),_:1})):(wt(),Ve(X(Nn),{key:1,type:"mdi",path:L.layer},null,8,["path"])),zt("div",h9,oi(t.title||X(h)("map.basemap.title")),1)])]),_:1},8,["src"])])]),_:1})]),_:1},8,["tooltip"])):(wt(),ce("div",f9))]),draggable:se(K=>[O.value?(wt(),Ve(X(af),mr({key:0},K,{height:P.value*(Math.floor(X(y).length/3)+1)+48+10,show:O.value,"onUpdate:show":lt[0]||(lt[0]=$=>O.value=$),"is-resizable":!1,title:X(h)("map.basemap.setting"),width:P.value*3+24}),{default:se(()=>[zt("div",p9,[(wt(!0),ce(Mi,null,ja(X(y),$=>(wt(),ce("div",{key:$.id,class:"clickable base-map-control-setting-item",style:Ua({width:P.value+"px"}),title:$.title,onClick:yt=>W($)},[zt("div",{style:Ua({width:P.value-34+"px",height:P.value-34+"px"})},[jt(X(yx),{src:$.thumbnail},null,8,["src"])],4),zt("div",{class:bs(["base-map-control-setting-item__title",{"base-map-control-setting-item__active":X(T)&&$.id==X(T).id}]),style:{"font-size":"14px"}},oi($.title),3)],12,d9))),128))])]),_:2},1040,["height","show","title","width"])):gn("v-if",!0)]),default:se(()=>[qn(nt.$slots,"default",{},void 0,!0)]),_:3},16))}}),g9=ii(m9,[["__scopeId","data-v-a0fbab5a"]]),Wb="draw";function v9(t){rf(t,Wb,{control:null,state:jl({activated:!1,register_id:void 0,show:!1,draw_support:[],cleanAfterDone:!1}),featuresAdded:{},featuresUpdated:{},featuresDeleted:{},action:{}})}sd(Wb,v9);function As(t){return ua(t,Wb)}const y9=(t,n)=>{As(t).control=n},c2=(t,n,i)=>{if(!n)throw new Error("Need register id");const a=As(t),h=a.state,m=a.control;h.register_id=n,h.activated=!0,m.changeMode("simple_select")},_9=t=>{const n=As(t),i=n.control,a=iM(n);n.action.save&&n.action.save(a.geojson),n.action.close&&n.action.close(),n.state.draw_support=[];const h=n.state;h.show=!1,n.action={},h.register_id=void 0,h.activated=!1,n.callback=void 0,n.featuresAdded={},n.featuresUpdated={},n.featuresDeleted={},i==null||i.deleteAll()};function nM(t,n){const a=As(t).state;if(!a.activated)throw new Error("Need to call activateDraw first");if(a.register_id&&a.register_id!==n)throw new Error("register id not match")}const h2=(t,n,i,a,h)=>{const m=As(t);nM(t,n);const o=m.control;m.callback=a,o.changeMode(i,h)};function iM(t){const n=t.control,i=t.featuresDeleted,a=t.featuresAdded,h=t.featuresUpdated,m={added:{},updated:{},deleted:i,geojson:{type:"FeatureCollection",features:[]}},o=n.getAll();return o.features.forEach(y=>{const x=y.id;a[x]?(m.added[x]=y,y.properties||(y.properties={}),y.properties.id=y.id):h[x]&&(m.updated[x]=y)}),m.geojson=o,m}const rM=(t,n,i)=>{const a=As(t),h=a.state,m=a.action;if(nM(t,n),i&&!(i instanceof Function))throw new Error("Callback is not available");const o=iM(a);m.deleteFeatures&&m.deleteFeatures(Object.values(o.deleted)),m.addFeatures&&m.addFeatures(Object.values(o.added)),m.updateFeatures&&m.updateFeatures(Object.values(o.updated)),m.reset&&m.reset(),i&&i(o),h.activated=!1,oM(t)};function x9(t){const i=As(t).state;oM(t),i.activated=!1}const oM=t=>{const n=As(t),i=n.state;n.featuresAdded={},n.featuresAdded={},n.featuresDeleted={},i.cleanAfterDone&&n.control.deleteAll(),n.control.changeMode("simple_select")};function V1(t,n,i){const a=As(t);switch(n){case"added":a.featuresAdded[i.id]=!0;break;case"updated":if(a.featuresAdded[i.id])return;a.featuresUpdated[i.id]=!0;break;case"deleted":if(a.featuresAdded[i.id])return;a.featuresDeleted[i.id]=i;break}}function U1(t,n){const i=As(t);i.callback&&(rM(t,n,i.callback),i.callback=void 0)}function aM(t,n){const i=Jh(),a=As(t),h=a.state,m=a.action;return h.register_id=i,h.show=!0,h.cleanAfterDone=!!n.cleanAfterDone,h.draw_support=n.draw_support,m.addFeatures=n.addFeatures,m.updateFeatures=n.updateFeatures,m.deleteFeatures=n.deleteFeatures,m.getFeatures=n.getFeatures,m.reset=n.reset,m.save=n.save,i}function b9(t,n){const i=n.getView("draw").handler;return i.setLayer(n),aM(t,{cleanAfterDone:!0,draw_support:n.getView("draw").draw_support,getFeatures:i.getFeatures&&i.getFeatures.bind(i),addFeatures:i.addFeatures&&i.addFeatures.bind(i),updateFeatures:i.updateFeatures&&i.updateFeatures.bind(i),deleteFeatures:i.deleteFeatures&&i.deleteFeatures.bind(i),reset:async()=>{du.actions.getMap(t,a=>{i.updateLayer(n),n.getView("source").updateForMap(a)})}})}const A9=t=>As(t).state.activated,w9=t=>As(t).state.draw_support,C9=t=>As(t).state.register_id,I9=t=>As(t).state.show,M9=t=>As(t).action,E9=t=>As(t).control;class S9{constructor(){this.geojson={type:"FeatureCollection",features:[]},this.field_id="id"}setLayer(n){const i=n.getView("source").geojson;this.setData(i)}updateLayer(n){n.getView("source").setData(this.geojson)}getAll(){return this.geojson}setData(n){n&&(this.geojson=n)}async addFeatures(n=[]){this.geojson.features.push(...n.map(i=>(delete i.id,i))),this.geojson=Mx(this.geojson)}async updateFeatures(n=[]){const i=n.reduce((a,h)=>(a[h.properties.id]=h,a),{});this.geojson.features.forEach((a,h)=>{i[a.properties.id]&&(this.geojson.features[h]=i[a.properties.id])})}async deleteFeatures(n=[]){const i=n.reduce((a,h)=>(a[h.properties.id]=h,a),{});this.geojson.features=this.geojson.features.filter(a=>!i[a.properties.id])}async getFeatures(n){return this.geojson.features.filter(i=>WF(i,ns(n)))}}const j1="draw",T9=new S9;class P9 extends fp{constructor(n={draw_support:[],handler:T9}){super(j1,n),this.setBuild((i,a)=>new L9(a))}setDrawSupport(n){return this.option.draw_support=n,this}setHandler(n){this.option.handler=n}setForLayer(n){return n.getView("action").addAction({id:j1,menu:{id:j1,location:"menu",name:"draw",type:"item",click(i,a){b9(a,i)}}}),this}}class L9 extends Om{constructor(n){super(),this.option=n}get draw_support(){return this.option.draw_support}get handler(){return this.option.handler}}const sM=tr({__name:"context-menu",props:{zIndex:{type:[String,Number],default:"9"}},setup(t,{expose:n}){const i=t,a=$e(),h=$e(!1),m=$e(null),o=$e(null);o8(a,()=>x());function y(M){h.value=!0;const T=a.value;T&&((!m.value||!o.value)&&(T.style.visibility="hidden",T.style.display="block",m.value=T.offsetWidth,o.value=T.offsetHeight,T.removeAttribute("style")),T.style.position="absolute",T.style.zIndex=i.zIndex+"",m.value+M.pageX>=window.innerWidth?T.style.left=M.pageX-m.value+10+"px":T.style.left=M.pageX-10+"px",o.value+M.pageY>=window.innerHeight?T.style.top=M.pageY-o.value+10+"px":T.style.top=M.pageY-10+"px")}function x(){m.value=null,o.value=null,h.value=!1;const M=a.value;M&&(M.style.display="none")}return n({open:y,close:x}),(M,T)=>(wt(),ce("div",{class:"menu-container",ref_key:"target",ref:a,style:{position:"absolute","z-index":"9"}},[qn(M.$slots,"default")],512))}});var lM={exports:{}};(function(t,n){(function(i,a){t.exports=a()})(ys,function(){var i=function(C,R){var Y={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},mt={on:function(Pt,Ht,Pe){if(Y[Pt]===void 0)throw new Error("Invalid event type: "+Pt);Y[Pt].push({selector:Ht,fn:Pe})},render:function(Pt){R.store.featureChanged(Pt)}},Tt=function(Pt,Ht){for(var Pe=Y[Pt],Fe=Pe.length;Fe--;){var en=Pe[Fe];if(en.selector(Ht)){en.fn.call(mt,Ht)||R.store.render(),R.ui.updateMapClasses();break}}};return C.start.call(mt),{render:C.render,stop:function(){C.stop&&C.stop()},trash:function(){C.trash&&(C.trash(),R.store.render())},combineFeatures:function(){C.combineFeatures&&C.combineFeatures()},uncombineFeatures:function(){C.uncombineFeatures&&C.uncombineFeatures()},drag:function(Pt){Tt("drag",Pt)},click:function(Pt){Tt("click",Pt)},mousemove:function(Pt){Tt("mousemove",Pt)},mousedown:function(Pt){Tt("mousedown",Pt)},mouseup:function(Pt){Tt("mouseup",Pt)},mouseout:function(Pt){Tt("mouseout",Pt)},keydown:function(Pt){Tt("keydown",Pt)},keyup:function(Pt){Tt("keyup",Pt)},touchstart:function(Pt){Tt("touchstart",Pt)},touchmove:function(Pt){Tt("touchmove",Pt)},touchend:function(Pt){Tt("touchend",Pt)},tap:function(Pt){Tt("tap",Pt)}}};function a(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function h(C){if(C.__esModule)return C;var R=C.default;if(typeof R=="function"){var Y=function mt(){if(this instanceof mt){var Tt=[null];Tt.push.apply(Tt,arguments);var Pt=Function.bind.apply(R,Tt);return new Pt}return R.apply(this,arguments)};Y.prototype=R.prototype}else Y={};return Object.defineProperty(Y,"__esModule",{value:!0}),Object.keys(C).forEach(function(mt){var Tt=Object.getOwnPropertyDescriptor(C,mt);Object.defineProperty(Y,mt,Tt.get?Tt:{enumerable:!0,get:function(){return C[mt]}})}),Y}var m={},o={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},y=o;function x(C){var R=0;if(C&&C.length>0){R+=Math.abs(M(C[0]));for(var Y=1;Y<C.length;Y++)R-=Math.abs(M(C[Y]))}return R}function M(C){var R,Y,mt,Tt,Pt,Ht,Pe=0,Fe=C.length;if(Fe>2){for(Ht=0;Ht<Fe;Ht++)Ht===Fe-2?(mt=Fe-2,Tt=Fe-1,Pt=0):Ht===Fe-1?(mt=Fe-1,Tt=0,Pt=1):(mt=Ht,Tt=Ht+1,Pt=Ht+2),R=C[mt],Y=C[Tt],Pe+=(T(C[Pt][0])-T(R[0]))*Math.sin(T(Y[1]));Pe=Pe*y.RADIUS*y.RADIUS/2}return Pe}function T(C){return C*Math.PI/180}m.geometry=function C(R){var Y,mt=0;switch(R.type){case"Polygon":return x(R.coordinates);case"MultiPolygon":for(Y=0;Y<R.coordinates.length;Y++)mt+=x(R.coordinates[Y]);return mt;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(Y=0;Y<R.geometries.length;Y++)mt+=C(R.geometries[Y]);return mt}},m.ring=M;var P={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},L={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},O={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},W={POLYGON:"polygon",LINE:"line_string",POINT:"point"},H={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},nt={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},lt={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},K={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},$={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},yt={ACTIVE:"true",INACTIVE:"false"},Rt=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Ct=-85,Et=Object.freeze({__proto__:null,classes:P,sources:L,cursors:O,types:W,geojsonTypes:H,modes:nt,events:lt,updateActions:K,meta:$,activeStates:yt,interactions:Rt,LAT_MIN:-90,LAT_RENDERED_MIN:Ct,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),Gt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function kt(C,R){var Y=Gt[C.geometry.type]-Gt[R.geometry.type];return Y===0&&C.geometry.type===H.POLYGON?C.area-R.area:Y}function Qt(C){return C.map(function(R){return R.geometry.type===H.POLYGON&&(R.area=m.geometry({type:H.FEATURE,property:{},geometry:R.geometry})),R}).sort(kt).map(function(R){return delete R.area,R})}function Ut(C,R){return R===void 0&&(R=0),[[C.point.x-R,C.point.y-R],[C.point.x+R,C.point.y+R]]}function Nt(C){if(this._items={},this._nums={},this._length=C?C.length:0,C)for(var R=0,Y=C.length;R<Y;R++)this.add(C[R]),C[R]!==void 0&&(typeof C[R]=="string"?this._items[C[R]]=R:this._nums[C[R]]=R)}Nt.prototype.add=function(C){return this.has(C)||(this._length++,typeof C=="string"?this._items[C]=this._length:this._nums[C]=this._length),this},Nt.prototype.delete=function(C){return this.has(C)===!1||(this._length--,delete this._items[C],delete this._nums[C]),this},Nt.prototype.has=function(C){return(typeof C=="string"||typeof C=="number")&&(this._items[C]!==void 0||this._nums[C]!==void 0)},Nt.prototype.values=function(){var C=this,R=[];return Object.keys(this._items).forEach(function(Y){R.push({k:Y,v:C._items[Y]})}),Object.keys(this._nums).forEach(function(Y){R.push({k:JSON.parse(Y),v:C._nums[Y]})}),R.sort(function(Y,mt){return Y.v-mt.v}).map(function(Y){return Y.k})},Nt.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Bt=[$.FEATURE,$.MIDPOINT,$.VERTEX],de={click:function(C,R,Y){return bn(C,R,Y,Y.options.clickBuffer)},touch:function(C,R,Y){return bn(C,R,Y,Y.options.touchBuffer)}};function bn(C,R,Y,mt){if(Y.map===null)return[];var Tt=C?Ut(C,mt):R,Pt={};Y.options.styles&&(Pt.layers=Y.options.styles.map(function(en){return en.id}).filter(function(en){return Y.map.getLayer(en)!=null}));var Ht=Y.map.queryRenderedFeatures(Tt,Pt).filter(function(en){return Bt.indexOf(en.properties.meta)!==-1}),Pe=new Nt,Fe=[];return Ht.forEach(function(en){var an=en.properties.id;Pe.has(an)||(Pe.add(an),Fe.push(en))}),Qt(Fe)}function _e(C,R){var Y=de.click(C,null,R),mt={mouse:O.NONE};return Y[0]&&(mt.mouse=Y[0].properties.active===yt.ACTIVE?O.MOVE:O.POINTER,mt.feature=Y[0].properties.meta),R.events.currentModeName().indexOf("draw")!==-1&&(mt.mouse=O.ADD),R.ui.queueMapClasses(mt),R.ui.updateMapClasses(),Y[0]}function He(C,R){var Y=C.x-R.x,mt=C.y-R.y;return Math.sqrt(Y*Y+mt*mt)}function Ue(C,R,Y){Y===void 0&&(Y={});var mt=Y.fineTolerance!=null?Y.fineTolerance:4,Tt=Y.grossTolerance!=null?Y.grossTolerance:12,Pt=Y.interval!=null?Y.interval:500;C.point=C.point||R.point,C.time=C.time||R.time;var Ht=He(C.point,R.point);return Ht<mt||Ht<Tt&&R.time-C.time<Pt}function Pi(C,R,Y){Y===void 0&&(Y={});var mt=Y.tolerance!=null?Y.tolerance:25,Tt=Y.interval!=null?Y.interval:250;return C.point=C.point||R.point,C.time=C.time||R.time,He(C.point,R.point)<mt&&R.time-C.time<Tt}var ri={exports:{}},Fn=ri.exports=function(C,R){if(R||(R=16),C===void 0&&(C=128),C<=0)return"0";for(var Y=Math.log(Math.pow(2,C))/Math.log(R),mt=2;Y===1/0;mt*=2)Y=Math.log(Math.pow(2,C/mt))/Math.log(R)*mt;var Tt=Y-Math.floor(Y),Pt="";for(mt=0;mt<Math.floor(Y);mt++)Pt=Math.floor(Math.random()*R).toString(R)+Pt;if(Tt){var Ht=Math.pow(R,Tt);Pt=Math.floor(Math.random()*Ht).toString(R)+Pt}var Pe=parseInt(Pt,R);return Pe!==1/0&&Pe>=Math.pow(2,C)?Fn(C,R):Pt};Fn.rack=function(C,R,Y){var mt=function(Pt){var Ht=0;do{if(Ht++>10){if(!Y)throw new Error("too many ID collisions, use more bits");C+=Y}var Pe=Fn(C,R)}while(Object.hasOwnProperty.call(Tt,Pe));return Tt[Pe]=Pt,Pe},Tt=mt.hats={};return mt.get=function(Pt){return mt.hats[Pt]},mt.set=function(Pt,Ht){return mt.hats[Pt]=Ht,mt},mt.bits=C||128,mt.base=R||16,mt};var mn=a(ri.exports),Kn=function(C,R){this.ctx=C,this.properties=R.properties||{},this.coordinates=R.geometry.coordinates,this.id=R.id||mn(),this.type=R.geometry.type};Kn.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Kn.prototype.incomingCoords=function(C){this.setCoordinates(C)},Kn.prototype.setCoordinates=function(C){this.coordinates=C,this.changed()},Kn.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Kn.prototype.setProperty=function(C,R){this.properties[C]=R},Kn.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:H.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Kn.prototype.internal=function(C){var R={id:this.id,meta:$.FEATURE,"meta:type":this.type,active:yt.INACTIVE,mode:C};if(this.ctx.options.userProperties)for(var Y in this.properties)R["user_"+Y]=this.properties[Y];return{type:H.FEATURE,properties:R,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Li=function(C,R){Kn.call(this,C,R)};(Li.prototype=Object.create(Kn.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Li.prototype.updateCoordinate=function(C,R,Y){this.coordinates=arguments.length===3?[R,Y]:[C,R],this.changed()},Li.prototype.getCoordinate=function(){return this.getCoordinates()};var ui=function(C,R){Kn.call(this,C,R)};(ui.prototype=Object.create(Kn.prototype)).isValid=function(){return this.coordinates.length>1},ui.prototype.addCoordinate=function(C,R,Y){this.changed();var mt=parseInt(C,10);this.coordinates.splice(mt,0,[R,Y])},ui.prototype.getCoordinate=function(C){var R=parseInt(C,10);return JSON.parse(JSON.stringify(this.coordinates[R]))},ui.prototype.removeCoordinate=function(C){this.changed(),this.coordinates.splice(parseInt(C,10),1)},ui.prototype.updateCoordinate=function(C,R,Y){var mt=parseInt(C,10);this.coordinates[mt]=[R,Y],this.changed()};var bi=function(C,R){Kn.call(this,C,R),this.coordinates=this.coordinates.map(function(Y){return Y.slice(0,-1)})};(bi.prototype=Object.create(Kn.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(C){return C.length>2})},bi.prototype.incomingCoords=function(C){this.coordinates=C.map(function(R){return R.slice(0,-1)}),this.changed()},bi.prototype.setCoordinates=function(C){this.coordinates=C,this.changed()},bi.prototype.addCoordinate=function(C,R,Y){this.changed();var mt=C.split(".").map(function(Tt){return parseInt(Tt,10)});this.coordinates[mt[0]].splice(mt[1],0,[R,Y])},bi.prototype.removeCoordinate=function(C){this.changed();var R=C.split(".").map(function(mt){return parseInt(mt,10)}),Y=this.coordinates[R[0]];Y&&(Y.splice(R[1],1),Y.length<3&&this.coordinates.splice(R[0],1))},bi.prototype.getCoordinate=function(C){var R=C.split(".").map(function(mt){return parseInt(mt,10)}),Y=this.coordinates[R[0]];return JSON.parse(JSON.stringify(Y[R[1]]))},bi.prototype.getCoordinates=function(){return this.coordinates.map(function(C){return C.concat([C[0]])})},bi.prototype.updateCoordinate=function(C,R,Y){this.changed();var mt=C.split("."),Tt=parseInt(mt[0],10),Pt=parseInt(mt[1],10);this.coordinates[Tt]===void 0&&(this.coordinates[Tt]=[]),this.coordinates[Tt][Pt]=[R,Y]};var le={MultiPoint:Li,MultiLineString:ui,MultiPolygon:bi},Ke=function(C,R,Y,mt,Tt){var Pt=Y.split("."),Ht=parseInt(Pt[0],10),Pe=Pt[1]?Pt.slice(1).join("."):null;return C[Ht][R](Pe,mt,Tt)},me=function(C,R){if(Kn.call(this,C,R),delete this.coordinates,this.model=le[R.geometry.type],this.model===void 0)throw new TypeError(R.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(R.geometry.coordinates)};function Te(C){this.map=C.map,this.drawConfig=JSON.parse(JSON.stringify(C.options||{})),this._ctx=C}(me.prototype=Object.create(Kn.prototype))._coordinatesToFeatures=function(C){var R=this,Y=this.model.bind(this);return C.map(function(mt){return new Y(R.ctx,{id:mn(),type:H.FEATURE,properties:{},geometry:{coordinates:mt,type:R.type.replace("Multi","")}})})},me.prototype.isValid=function(){return this.features.every(function(C){return C.isValid()})},me.prototype.setCoordinates=function(C){this.features=this._coordinatesToFeatures(C),this.changed()},me.prototype.getCoordinate=function(C){return Ke(this.features,"getCoordinate",C)},me.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(C){return C.type===H.POLYGON?C.getCoordinates():C.coordinates})))},me.prototype.updateCoordinate=function(C,R,Y){Ke(this.features,"updateCoordinate",C,R,Y),this.changed()},me.prototype.addCoordinate=function(C,R,Y){Ke(this.features,"addCoordinate",C,R,Y),this.changed()},me.prototype.removeCoordinate=function(C){Ke(this.features,"removeCoordinate",C),this.changed()},me.prototype.getFeatures=function(){return this.features},Te.prototype.setSelected=function(C){return this._ctx.store.setSelected(C)},Te.prototype.setSelectedCoordinates=function(C){var R=this;this._ctx.store.setSelectedCoordinates(C),C.reduce(function(Y,mt){return Y[mt.feature_id]===void 0&&(Y[mt.feature_id]=!0,R._ctx.store.get(mt.feature_id).changed()),Y},{})},Te.prototype.getSelected=function(){return this._ctx.store.getSelected()},Te.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Te.prototype.isSelected=function(C){return this._ctx.store.isSelected(C)},Te.prototype.getFeature=function(C){return this._ctx.store.get(C)},Te.prototype.select=function(C){return this._ctx.store.select(C)},Te.prototype.deselect=function(C){return this._ctx.store.deselect(C)},Te.prototype.deleteFeature=function(C,R){return R===void 0&&(R={}),this._ctx.store.delete(C,R)},Te.prototype.addFeature=function(C){return this._ctx.store.add(C)},Te.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Te.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Te.prototype.setActionableState=function(C){C===void 0&&(C={});var R={trash:C.trash||!1,combineFeatures:C.combineFeatures||!1,uncombineFeatures:C.uncombineFeatures||!1};return this._ctx.events.actionable(R)},Te.prototype.changeMode=function(C,R,Y){return R===void 0&&(R={}),Y===void 0&&(Y={}),this._ctx.events.changeMode(C,R,Y)},Te.prototype.updateUIClasses=function(C){return this._ctx.ui.queueMapClasses(C)},Te.prototype.activateUIButton=function(C){return this._ctx.ui.setActiveButton(C)},Te.prototype.featuresAt=function(C,R,Y){if(Y===void 0&&(Y="click"),Y!=="click"&&Y!=="touch")throw new Error("invalid buffer type");return de[Y](C,R,this._ctx)},Te.prototype.newFeature=function(C){var R=C.geometry.type;return R===H.POINT?new Li(this._ctx,C):R===H.LINE_STRING?new ui(this._ctx,C):R===H.POLYGON?new bi(this._ctx,C):new me(this._ctx,C)},Te.prototype.isInstanceOf=function(C,R){if(C===H.POINT)return R instanceof Li;if(C===H.LINE_STRING)return R instanceof ui;if(C===H.POLYGON)return R instanceof bi;if(C==="MultiFeature")return R instanceof me;throw new Error("Unknown feature class: "+C)},Te.prototype.doRender=function(C){return this._ctx.store.featureChanged(C)},Te.prototype.onSetup=function(){},Te.prototype.onDrag=function(){},Te.prototype.onClick=function(){},Te.prototype.onMouseMove=function(){},Te.prototype.onMouseDown=function(){},Te.prototype.onMouseUp=function(){},Te.prototype.onMouseOut=function(){},Te.prototype.onKeyUp=function(){},Te.prototype.onKeyDown=function(){},Te.prototype.onTouchStart=function(){},Te.prototype.onTouchMove=function(){},Te.prototype.onTouchEnd=function(){},Te.prototype.onTap=function(){},Te.prototype.onStop=function(){},Te.prototype.onTrash=function(){},Te.prototype.onCombineFeature=function(){},Te.prototype.onUncombineFeature=function(){},Te.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ai={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},ki=Object.keys(Ai);function ut(C){var R=Object.keys(C);return function(Y,mt){mt===void 0&&(mt={});var Tt={},Pt=R.reduce(function(Ht,Pe){return Ht[Pe]=C[Pe],Ht},new Te(Y));return{start:function(){var Ht=this;Tt=Pt.onSetup(mt),ki.forEach(function(Pe){var Fe,en=Ai[Pe],an=function(){return!1};C[en]&&(an=function(){return!0}),Ht.on(Pe,an,(Fe=en,function(Ge){return Pt[Fe](Tt,Ge)}))})},stop:function(){Pt.onStop(Tt)},trash:function(){Pt.onTrash(Tt)},combineFeatures:function(){Pt.onCombineFeatures(Tt)},uncombineFeatures:function(){Pt.onUncombineFeatures(Tt)},render:function(Ht,Pe){Pt.toDisplayFeatures(Tt,Ht,Pe)}}}}function xt(C){return[].concat(C).filter(function(R){return R!==void 0})}function $t(){var C=this;if(!(C.ctx.map&&C.ctx.map.getSource(L.HOT)!==void 0))return Fe();var R=C.ctx.events.currentModeName();C.ctx.ui.queueMapClasses({mode:R});var Y=[],mt=[];C.isDirty?mt=C.getAllIds():(Y=C.getChangedIds().filter(function(en){return C.get(en)!==void 0}),mt=C.sources.hot.filter(function(en){return en.properties.id&&Y.indexOf(en.properties.id)===-1&&C.get(en.properties.id)!==void 0}).map(function(en){return en.properties.id})),C.sources.hot=[];var Tt=C.sources.cold.length;C.sources.cold=C.isDirty?[]:C.sources.cold.filter(function(en){var an=en.properties.id||en.properties.parent;return Y.indexOf(an)===-1});var Pt=Tt!==C.sources.cold.length||mt.length>0;function Ht(en,an){var Ge=C.get(en).internal(R);C.ctx.events.currentModeRender(Ge,function($n){C.sources[an].push($n)})}if(Y.forEach(function(en){return Ht(en,"hot")}),mt.forEach(function(en){return Ht(en,"cold")}),Pt&&C.ctx.map.getSource(L.COLD).setData({type:H.FEATURE_COLLECTION,features:C.sources.cold}),C.ctx.map.getSource(L.HOT).setData({type:H.FEATURE_COLLECTION,features:C.sources.hot}),C._emitSelectionChange&&(C.ctx.map.fire(lt.SELECTION_CHANGE,{features:C.getSelected().map(function(en){return en.toGeoJSON()}),points:C.getSelectedCoordinates().map(function(en){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:en.coordinates}}})}),C._emitSelectionChange=!1),C._deletedFeaturesToEmit.length){var Pe=C._deletedFeaturesToEmit.map(function(en){return en.toGeoJSON()});C._deletedFeaturesToEmit=[],C.ctx.map.fire(lt.DELETE,{features:Pe})}function Fe(){C.isDirty=!1,C.clearChangedIds()}Fe(),C.ctx.map.fire(lt.RENDER,{})}function ae(C){var R,Y=this;this._features={},this._featureIds=new Nt,this._selectedFeatureIds=new Nt,this._selectedCoordinates=[],this._changedFeatureIds=new Nt,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=C,this.sources={hot:[],cold:[]},this.render=function(){R||(R=requestAnimationFrame(function(){R=null,$t.call(Y)}))},this.isDirty=!1}function pe(C,R){var Y=C._selectedCoordinates.filter(function(mt){return C._selectedFeatureIds.has(mt.feature_id)});C._selectedCoordinates.length===Y.length||R.silent||(C._emitSelectionChange=!0),C._selectedCoordinates=Y}ae.prototype.createRenderBatch=function(){var C=this,R=this.render,Y=0;return this.render=function(){Y++},function(){C.render=R,Y>0&&C.render()}},ae.prototype.setDirty=function(){return this.isDirty=!0,this},ae.prototype.featureChanged=function(C){return this._changedFeatureIds.add(C),this},ae.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},ae.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},ae.prototype.getAllIds=function(){return this._featureIds.values()},ae.prototype.add=function(C){return this.featureChanged(C.id),this._features[C.id]=C,this._featureIds.add(C.id),this},ae.prototype.delete=function(C,R){var Y=this;return R===void 0&&(R={}),xt(C).forEach(function(mt){Y._featureIds.has(mt)&&(Y._featureIds.delete(mt),Y._selectedFeatureIds.delete(mt),R.silent||Y._deletedFeaturesToEmit.indexOf(Y._features[mt])===-1&&Y._deletedFeaturesToEmit.push(Y._features[mt]),delete Y._features[mt],Y.isDirty=!0)}),pe(this,R),this},ae.prototype.get=function(C){return this._features[C]},ae.prototype.getAll=function(){var C=this;return Object.keys(this._features).map(function(R){return C._features[R]})},ae.prototype.select=function(C,R){var Y=this;return R===void 0&&(R={}),xt(C).forEach(function(mt){Y._selectedFeatureIds.has(mt)||(Y._selectedFeatureIds.add(mt),Y._changedFeatureIds.add(mt),R.silent||(Y._emitSelectionChange=!0))}),this},ae.prototype.deselect=function(C,R){var Y=this;return R===void 0&&(R={}),xt(C).forEach(function(mt){Y._selectedFeatureIds.has(mt)&&(Y._selectedFeatureIds.delete(mt),Y._changedFeatureIds.add(mt),R.silent||(Y._emitSelectionChange=!0))}),pe(this,R),this},ae.prototype.clearSelected=function(C){return C===void 0&&(C={}),this.deselect(this._selectedFeatureIds.values(),{silent:C.silent}),this},ae.prototype.setSelected=function(C,R){var Y=this;return R===void 0&&(R={}),C=xt(C),this.deselect(this._selectedFeatureIds.values().filter(function(mt){return C.indexOf(mt)===-1}),{silent:R.silent}),this.select(C.filter(function(mt){return!Y._selectedFeatureIds.has(mt)}),{silent:R.silent}),this},ae.prototype.setSelectedCoordinates=function(C){return this._selectedCoordinates=C,this._emitSelectionChange=!0,this},ae.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},ae.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},ae.prototype.getSelected=function(){var C=this;return this._selectedFeatureIds.values().map(function(R){return C.get(R)})},ae.prototype.getSelectedCoordinates=function(){var C=this;return this._selectedCoordinates.map(function(R){return{coordinates:C.get(R.feature_id).getCoordinate(R.coord_path)}})},ae.prototype.isSelected=function(C){return this._selectedFeatureIds.has(C)},ae.prototype.setFeatureProperty=function(C,R,Y){this.get(C).setProperty(R,Y),this.featureChanged(C)},ae.prototype.storeMapConfig=function(){var C=this;Rt.forEach(function(R){C.ctx.map[R]&&(C._mapInitialConfig[R]=C.ctx.map[R].isEnabled())})},ae.prototype.restoreMapConfig=function(){var C=this;Object.keys(this._mapInitialConfig).forEach(function(R){C._mapInitialConfig[R]?C.ctx.map[R].enable():C.ctx.map[R].disable()})},ae.prototype.getInitialConfigValue=function(C){return this._mapInitialConfig[C]===void 0||this._mapInitialConfig[C]};var Oe=function(){for(var C=arguments,R={},Y=0;Y<arguments.length;Y++){var mt=C[Y];for(var Tt in mt)ln.call(mt,Tt)&&(R[Tt]=mt[Tt])}return R},ln=Object.prototype.hasOwnProperty,we=a(Oe),De=["mode","feature","mouse"];function Se(C){var R=null,Y=null,mt={onRemove:function(){return C.map.off("load",mt.connect),clearInterval(Y),mt.removeLayers(),C.store.restoreMapConfig(),C.ui.removeButtons(),C.events.removeEventListeners(),C.ui.clearMapClasses(),C.boxZoomInitial&&C.map.boxZoom.enable(),C.map=null,C.container=null,C.store=null,R&&R.parentNode&&R.parentNode.removeChild(R),R=null,this},connect:function(){C.map.off("load",mt.connect),clearInterval(Y),mt.addLayers(),C.store.storeMapConfig(),C.events.addEventListeners()},onAdd:function(Tt){var Pt=Tt.fire;return Tt.fire=function(Ht,Pe){var Fe=arguments;return Pt.length===1&&arguments.length!==1&&(Fe=[we({},{type:Ht},Pe)]),Pt.apply(Tt,Fe)},C.map=Tt,C.events=function(Ht){var Pe=Object.keys(Ht.options.modes).reduce(function(xe,An){return xe[An]=ut(Ht.options.modes[An]),xe},{}),Fe={},en={},an={},Ge=null,$n=null;an.drag=function(xe,An){An({point:xe.point,time:new Date().getTime()})?(Ht.ui.queueMapClasses({mouse:O.DRAG}),$n.drag(xe)):xe.originalEvent.stopPropagation()},an.mousedrag=function(xe){an.drag(xe,function(An){return!Ue(Fe,An)})},an.touchdrag=function(xe){an.drag(xe,function(An){return!Pi(en,An)})},an.mousemove=function(xe){if((xe.originalEvent.buttons!==void 0?xe.originalEvent.buttons:xe.originalEvent.which)===1)return an.mousedrag(xe);var An=_e(xe,Ht);xe.featureTarget=An,$n.mousemove(xe)},an.mousedown=function(xe){Fe={time:new Date().getTime(),point:xe.point};var An=_e(xe,Ht);xe.featureTarget=An,$n.mousedown(xe)},an.mouseup=function(xe){var An=_e(xe,Ht);xe.featureTarget=An,Ue(Fe,{point:xe.point,time:new Date().getTime()})?$n.click(xe):$n.mouseup(xe)},an.mouseout=function(xe){$n.mouseout(xe)},an.touchstart=function(xe){if(Ht.options.touchEnabled){en={time:new Date().getTime(),point:xe.point};var An=de.touch(xe,null,Ht)[0];xe.featureTarget=An,$n.touchstart(xe)}},an.touchmove=function(xe){if(Ht.options.touchEnabled)return $n.touchmove(xe),an.touchdrag(xe)},an.touchend=function(xe){if(xe.originalEvent.preventDefault(),Ht.options.touchEnabled){var An=de.touch(xe,null,Ht)[0];xe.featureTarget=An,Pi(en,{time:new Date().getTime(),point:xe.point})?$n.tap(xe):$n.touchend(xe)}};var Nr=function(xe){return!(xe===8||xe===46||xe>=48&&xe<=57)};function si(xe,An,or){or===void 0&&(or={}),$n.stop();var eo=Pe[xe];if(eo===void 0)throw new Error(xe+" is not valid");Ge=xe;var Qi=eo(Ht,An);$n=i(Qi,Ht),or.silent||Ht.map.fire(lt.MODE_CHANGE,{mode:xe}),Ht.store.setDirty(),Ht.store.render()}an.keydown=function(xe){(xe.srcElement||xe.target).classList.contains("mapboxgl-canvas")&&(xe.keyCode!==8&&xe.keyCode!==46||!Ht.options.controls.trash?Nr(xe.keyCode)?$n.keydown(xe):xe.keyCode===49&&Ht.options.controls.point?si(nt.DRAW_POINT):xe.keyCode===50&&Ht.options.controls.line_string?si(nt.DRAW_LINE_STRING):xe.keyCode===51&&Ht.options.controls.polygon&&si(nt.DRAW_POLYGON):(xe.preventDefault(),$n.trash()))},an.keyup=function(xe){Nr(xe.keyCode)&&$n.keyup(xe)},an.zoomend=function(){Ht.store.changeZoom()},an.data=function(xe){if(xe.dataType==="style"){var An=Ht.setup,or=Ht.map,eo=Ht.options,Qi=Ht.store;eo.styles.some(function(ws){return or.getLayer(ws.id)})||(An.addLayers(),Qi.setDirty(),Qi.render())}};var wr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){Ge=Ht.options.defaultMode,$n=i(Pe[Ge](Ht),Ht)},changeMode:si,actionable:function(xe){var An=!1;Object.keys(xe).forEach(function(or){if(wr[or]===void 0)throw new Error("Invalid action type");wr[or]!==xe[or]&&(An=!0),wr[or]=xe[or]}),An&&Ht.map.fire(lt.ACTIONABLE,{actions:wr})},currentModeName:function(){return Ge},currentModeRender:function(xe,An){return $n.render(xe,An)},fire:function(xe,An){an[xe]&&an[xe](An)},addEventListeners:function(){Ht.map.on("mousemove",an.mousemove),Ht.map.on("mousedown",an.mousedown),Ht.map.on("mouseup",an.mouseup),Ht.map.on("data",an.data),Ht.map.on("touchmove",an.touchmove),Ht.map.on("touchstart",an.touchstart),Ht.map.on("touchend",an.touchend),Ht.container.addEventListener("mouseout",an.mouseout),Ht.options.keybindings&&(Ht.container.addEventListener("keydown",an.keydown),Ht.container.addEventListener("keyup",an.keyup))},removeEventListeners:function(){Ht.map.off("mousemove",an.mousemove),Ht.map.off("mousedown",an.mousedown),Ht.map.off("mouseup",an.mouseup),Ht.map.off("data",an.data),Ht.map.off("touchmove",an.touchmove),Ht.map.off("touchstart",an.touchstart),Ht.map.off("touchend",an.touchend),Ht.container.removeEventListener("mouseout",an.mouseout),Ht.options.keybindings&&(Ht.container.removeEventListener("keydown",an.keydown),Ht.container.removeEventListener("keyup",an.keyup))},trash:function(xe){$n.trash(xe)},combineFeatures:function(){$n.combineFeatures()},uncombineFeatures:function(){$n.uncombineFeatures()},getMode:function(){return Ge}}}(C),C.ui=function(Ht){var Pe={},Fe=null,en={mode:null,feature:null,mouse:null},an={mode:null,feature:null,mouse:null};function Ge(xe){an=we(an,xe)}function $n(){var xe,An;if(Ht.container){var or=[],eo=[];De.forEach(function(Qi){an[Qi]!==en[Qi]&&(or.push(Qi+"-"+en[Qi]),an[Qi]!==null&&eo.push(Qi+"-"+an[Qi]))}),or.length>0&&(xe=Ht.container.classList).remove.apply(xe,or),eo.length>0&&(An=Ht.container.classList).add.apply(An,eo),en=we(en,an)}}function Nr(xe,An){An===void 0&&(An={});var or=document.createElement("button");return or.className=P.CONTROL_BUTTON+" "+An.className,or.setAttribute("title",An.title),An.container.appendChild(or),or.addEventListener("click",function(eo){if(eo.preventDefault(),eo.stopPropagation(),eo.target===Fe)return si(),void An.onDeactivate();wr(xe),An.onActivate()},!0),or}function si(){Fe&&(Fe.classList.remove(P.ACTIVE_BUTTON),Fe=null)}function wr(xe){si();var An=Pe[xe];An&&An&&xe!=="trash"&&(An.classList.add(P.ACTIVE_BUTTON),Fe=An)}return{setActiveButton:wr,queueMapClasses:Ge,updateMapClasses:$n,clearMapClasses:function(){Ge({mode:null,feature:null,mouse:null}),$n()},addButtons:function(){var xe=Ht.options.controls,An=document.createElement("div");return An.className=P.CONTROL_GROUP+" "+P.CONTROL_BASE,xe&&(xe[W.LINE]&&(Pe[W.LINE]=Nr(W.LINE,{container:An,className:P.CONTROL_BUTTON_LINE,title:"LineString tool "+(Ht.options.keybindings?"(l)":""),onActivate:function(){return Ht.events.changeMode(nt.DRAW_LINE_STRING)},onDeactivate:function(){return Ht.events.trash()}})),xe[W.POLYGON]&&(Pe[W.POLYGON]=Nr(W.POLYGON,{container:An,className:P.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(Ht.options.keybindings?"(p)":""),onActivate:function(){return Ht.events.changeMode(nt.DRAW_POLYGON)},onDeactivate:function(){return Ht.events.trash()}})),xe[W.POINT]&&(Pe[W.POINT]=Nr(W.POINT,{container:An,className:P.CONTROL_BUTTON_POINT,title:"Marker tool "+(Ht.options.keybindings?"(m)":""),onActivate:function(){return Ht.events.changeMode(nt.DRAW_POINT)},onDeactivate:function(){return Ht.events.trash()}})),xe.trash&&(Pe.trash=Nr("trash",{container:An,className:P.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){Ht.events.trash()}})),xe.combine_features&&(Pe.combine_features=Nr("combineFeatures",{container:An,className:P.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){Ht.events.combineFeatures()}})),xe.uncombine_features&&(Pe.uncombine_features=Nr("uncombineFeatures",{container:An,className:P.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){Ht.events.uncombineFeatures()}}))),An},removeButtons:function(){Object.keys(Pe).forEach(function(xe){var An=Pe[xe];An.parentNode&&An.parentNode.removeChild(An),delete Pe[xe]})}}}(C),C.container=Tt.getContainer(),C.store=new ae(C),R=C.ui.addButtons(),C.options.boxSelect&&(C.boxZoomInitial=Tt.boxZoom.isEnabled(),Tt.boxZoom.disable(),Tt.dragPan.disable(),Tt.dragPan.enable()),Tt.loaded()?mt.connect():(Tt.on("load",mt.connect),Y=setInterval(function(){Tt.loaded()&&mt.connect()},16)),C.events.start(),R},addLayers:function(){C.map.addSource(L.COLD,{data:{type:H.FEATURE_COLLECTION,features:[]},type:"geojson"}),C.map.addSource(L.HOT,{data:{type:H.FEATURE_COLLECTION,features:[]},type:"geojson"}),C.options.styles.forEach(function(Tt){C.map.addLayer(Tt)}),C.store.setDirty(!0),C.store.render()},removeLayers:function(){C.options.styles.forEach(function(Tt){C.map.getLayer(Tt.id)&&C.map.removeLayer(Tt.id)}),C.map.getSource(L.COLD)&&C.map.removeSource(L.COLD),C.map.getSource(L.HOT)&&C.map.removeSource(L.HOT)}};return C.setup=mt,mt}var tn=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function wn(C){return function(R){var Y=R.featureTarget;return!!Y&&!!Y.properties&&Y.properties.meta===C}}function Cn(C){return!!C.originalEvent&&!!C.originalEvent.shiftKey&&C.originalEvent.button===0}function Pn(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.active===yt.ACTIVE&&C.featureTarget.properties.meta===$.FEATURE}function Qn(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.active===yt.INACTIVE&&C.featureTarget.properties.meta===$.FEATURE}function Di(C){return C.featureTarget===void 0}function wi(C){return!!C.featureTarget&&!!C.featureTarget.properties&&C.featureTarget.properties.meta===$.FEATURE}function rr(C){var R=C.featureTarget;return!!R&&!!R.properties&&R.properties.meta===$.VERTEX}function Gr(C){return!!C.originalEvent&&C.originalEvent.shiftKey===!0}function qo(C){return C.keyCode===27}function pa(C){return C.keyCode===13}var Pa=Object.freeze({__proto__:null,isOfMetaType:wn,isShiftMousedown:Cn,isActiveFeature:Pn,isInactiveFeature:Qn,noTarget:Di,isFeature:wi,isVertex:rr,isShiftDown:Gr,isEscapeKey:qo,isEnterKey:pa,isTrue:function(){return!0}}),Ga=Ar;function Ar(C,R){this.x=C,this.y=R}Ar.prototype={clone:function(){return new Ar(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,R){return this.clone()._rotateAround(C,R)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var R=C.x-this.x,Y=C.y-this.y;return R*R+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,R){return Math.atan2(this.x*R-this.y*C,this.x*C+this.y*R)},_matMult:function(C){var R=C[0]*this.x+C[1]*this.y,Y=C[2]*this.x+C[3]*this.y;return this.x=R,this.y=Y,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var R=Math.cos(C),Y=Math.sin(C),mt=R*this.x-Y*this.y,Tt=Y*this.x+R*this.y;return this.x=mt,this.y=Tt,this},_rotateAround:function(C,R){var Y=Math.cos(C),mt=Math.sin(C),Tt=R.x+Y*(this.x-R.x)-mt*(this.y-R.y),Pt=R.y+mt*(this.x-R.x)+Y*(this.y-R.y);return this.x=Tt,this.y=Pt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ar.convert=function(C){return C instanceof Ar?C:Array.isArray(C)?new Ar(C[0],C[1]):C};var Mo=a(Ga);function Hs(C,R){var Y=R.getBoundingClientRect();return new Mo(C.clientX-Y.left-(R.clientLeft||0),C.clientY-Y.top-(R.clientTop||0))}function Gs(C,R,Y,mt){return{type:H.FEATURE,properties:{meta:$.VERTEX,parent:C,coord_path:Y,active:mt?yt.ACTIVE:yt.INACTIVE},geometry:{type:H.POINT,coordinates:R}}}function fl(C,R,Y){var mt=R.geometry.coordinates,Tt=Y.geometry.coordinates;if(mt[1]>85||mt[1]<Ct||Tt[1]>85||Tt[1]<Ct)return null;var Pt={lng:(mt[0]+Tt[0])/2,lat:(mt[1]+Tt[1])/2};return{type:H.FEATURE,properties:{meta:$.MIDPOINT,parent:C,lng:Pt.lng,lat:Pt.lat,coord_path:Y.properties.coord_path},geometry:{type:H.POINT,coordinates:[Pt.lng,Pt.lat]}}}function La(C,R,Y){R===void 0&&(R={}),Y===void 0&&(Y=null);var mt,Tt=C.geometry,Pt=Tt.type,Ht=Tt.coordinates,Pe=C.properties&&C.properties.id,Fe=[];function en(Ge,$n){var Nr="",si=null;Ge.forEach(function(wr,xe){var An=$n!=null?$n+"."+xe:String(xe),or=Gs(Pe,wr,An,an(An));if(R.midpoints&&si){var eo=fl(Pe,si,or);eo&&Fe.push(eo)}si=or;var Qi=JSON.stringify(wr);Nr!==Qi&&Fe.push(or),xe===0&&(Nr=Qi)})}function an(Ge){return!!R.selectedPaths&&R.selectedPaths.indexOf(Ge)!==-1}return Pt===H.POINT?Fe.push(Gs(Pe,Ht,Y,an(Y))):Pt===H.POLYGON?Ht.forEach(function(Ge,$n){en(Ge,Y!==null?Y+"."+$n:String($n))}):Pt===H.LINE_STRING?en(Ht,Y):Pt.indexOf(H.MULTI_PREFIX)===0&&(mt=Pt.replace(H.MULTI_PREFIX,""),Ht.forEach(function(Ge,$n){var Nr={type:H.FEATURE,properties:C.properties,geometry:{type:mt,coordinates:Ge}};Fe=Fe.concat(La(Nr,R,$n))})),Fe}var so={enable:function(C){setTimeout(function(){C.map&&C.map.doubleClickZoom&&C._ctx&&C._ctx.store&&C._ctx.store.getInitialConfigValue&&C._ctx.store.getInitialConfigValue("doubleClickZoom")&&C.map.doubleClickZoom.enable()},0)},disable:function(C){setTimeout(function(){C.map&&C.map.doubleClickZoom&&C.map.doubleClickZoom.disable()},0)}},qs={exports:{}},vu=function(C){if(!C||!C.type)return null;var R=qr[C.type];if(!R)return null;if(R==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:C}]};if(R==="feature")return{type:"FeatureCollection",features:[C]};if(R==="featurecollection")return C},qr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},U=a(vu),q=Object.freeze({__proto__:null,default:function C(R){switch(R&&R.type||null){case"FeatureCollection":return R.features=R.features.reduce(function(Y,mt){return Y.concat(C(mt))},[]),R;case"Feature":return R.geometry?C(R.geometry).map(function(Y){var mt={type:"Feature",properties:JSON.parse(JSON.stringify(R.properties)),geometry:Y};return R.id!==void 0&&(mt.id=R.id),mt}):[R];case"MultiPoint":return R.coordinates.map(function(Y){return{type:"Point",coordinates:Y}});case"MultiPolygon":return R.coordinates.map(function(Y){return{type:"Polygon",coordinates:Y}});case"MultiLineString":return R.coordinates.map(function(Y){return{type:"LineString",coordinates:Y}});case"GeometryCollection":return R.geometries.map(C).reduce(function(Y,mt){return Y.concat(mt)},[]);case"Point":case"Polygon":case"LineString":return[R]}}}),Q=vu,at=h(q),dt=function(C){return function R(Y){return Array.isArray(Y)&&Y.length&&typeof Y[0]=="number"?[Y]:Y.reduce(function(mt,Tt){return Array.isArray(Tt)&&Array.isArray(Tt[0])?mt.concat(R(Tt)):(mt.push(Tt),mt)},[])}(C)};at instanceof Function||(at=at.default);var St={exports:{}},Dt=St.exports=function(C){return new tt(C)};function tt(C){this.value=C}function vt(C,R,Y){var mt=[],Tt=[],Pt=!0;return function Ht(Pe){var Fe=Y?Zt(Pe):Pe,en={},an=!0,Ge={node:Fe,node_:Pe,path:[].concat(mt),parent:Tt[Tt.length-1],parents:Tt,key:mt.slice(-1)[0],isRoot:mt.length===0,level:mt.length,circular:null,update:function(si,wr){Ge.isRoot||(Ge.parent.node[Ge.key]=si),Ge.node=si,wr&&(an=!1)},delete:function(si){delete Ge.parent.node[Ge.key],si&&(an=!1)},remove:function(si){ie(Ge.parent.node)?Ge.parent.node.splice(Ge.key,1):delete Ge.parent.node[Ge.key],si&&(an=!1)},keys:null,before:function(si){en.before=si},after:function(si){en.after=si},pre:function(si){en.pre=si},post:function(si){en.post=si},stop:function(){Pt=!1},block:function(){an=!1}};if(!Pt)return Ge;function $n(){if(typeof Ge.node=="object"&&Ge.node!==null){Ge.keys&&Ge.node_===Ge.node||(Ge.keys=ge(Ge.node)),Ge.isLeaf=Ge.keys.length==0;for(var si=0;si<Tt.length;si++)if(Tt[si].node_===Pe){Ge.circular=Tt[si];break}}else Ge.isLeaf=!0,Ge.keys=null;Ge.notLeaf=!Ge.isLeaf,Ge.notRoot=!Ge.isRoot}$n();var Nr=R.call(Ge,Ge.node);return Nr!==void 0&&Ge.update&&Ge.update(Nr),en.before&&en.before.call(Ge,Ge.node),an&&(typeof Ge.node!="object"||Ge.node===null||Ge.circular||(Tt.push(Ge),$n(),ye(Ge.keys,function(si,wr){mt.push(si),en.pre&&en.pre.call(Ge,Ge.node[si],si);var xe=Ht(Ge.node[si]);Y&&sn.call(Ge.node,si)&&(Ge.node[si]=xe.node),xe.isLast=wr==Ge.keys.length-1,xe.isFirst=wr==0,en.post&&en.post.call(Ge,xe),mt.pop()}),Tt.pop()),en.after&&en.after.call(Ge,Ge.node)),Ge}(C).node}function Zt(C){if(typeof C=="object"&&C!==null){var R;if(ie(C))R=[];else if(be(C)==="[object Date]")R=new Date(C.getTime?C.getTime():C);else if(function(Tt){return be(Tt)==="[object RegExp]"}(C))R=new RegExp(C);else if(function(Tt){return be(Tt)==="[object Error]"}(C))R={message:C.message};else if(function(Tt){return be(Tt)==="[object Boolean]"}(C))R=new Boolean(C);else if(function(Tt){return be(Tt)==="[object Number]"}(C))R=new Number(C);else if(function(Tt){return be(Tt)==="[object String]"}(C))R=new String(C);else if(Object.create&&Object.getPrototypeOf)R=Object.create(Object.getPrototypeOf(C));else if(C.constructor===Object)R={};else{var Y=C.constructor&&C.constructor.prototype||C.__proto__||{},mt=function(){};mt.prototype=Y,R=new mt}return ye(ge(C),function(Tt){R[Tt]=C[Tt]}),R}return C}tt.prototype.get=function(C){for(var R=this.value,Y=0;Y<C.length;Y++){var mt=C[Y];if(!R||!sn.call(R,mt)){R=void 0;break}R=R[mt]}return R},tt.prototype.has=function(C){for(var R=this.value,Y=0;Y<C.length;Y++){var mt=C[Y];if(!R||!sn.call(R,mt))return!1;R=R[mt]}return!0},tt.prototype.set=function(C,R){for(var Y=this.value,mt=0;mt<C.length-1;mt++){var Tt=C[mt];sn.call(Y,Tt)||(Y[Tt]={}),Y=Y[Tt]}return Y[C[mt]]=R,R},tt.prototype.map=function(C){return vt(this.value,C,!0)},tt.prototype.forEach=function(C){return this.value=vt(this.value,C,!1),this.value},tt.prototype.reduce=function(C,R){var Y=arguments.length===1,mt=Y?this.value:R;return this.forEach(function(Tt){this.isRoot&&Y||(mt=C.call(this,mt,Tt))}),mt},tt.prototype.paths=function(){var C=[];return this.forEach(function(R){C.push(this.path)}),C},tt.prototype.nodes=function(){var C=[];return this.forEach(function(R){C.push(this.node)}),C},tt.prototype.clone=function(){var C=[],R=[];return function Y(mt){for(var Tt=0;Tt<C.length;Tt++)if(C[Tt]===mt)return R[Tt];if(typeof mt=="object"&&mt!==null){var Pt=Zt(mt);return C.push(mt),R.push(Pt),ye(ge(mt),function(Ht){Pt[Ht]=Y(mt[Ht])}),C.pop(),R.pop(),Pt}return mt}(this.value)};var ge=Object.keys||function(C){var R=[];for(var Y in C)R.push(Y);return R};function be(C){return Object.prototype.toString.call(C)}var ie=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"},ye=function(C,R){if(C.forEach)return C.forEach(R);for(var Y=0;Y<C.length;Y++)R(C[Y],Y,C)};ye(ge(tt.prototype),function(C){Dt[C]=function(R){var Y=[].slice.call(arguments,1),mt=new tt(R);return mt[C].apply(mt,Y)}});var sn=Object.hasOwnProperty||function(C,R){return R in C},on=St.exports,oe=ke;function ke(C){if(!(this instanceof ke))return new ke(C);this._bbox=C||[1/0,1/0,-1/0,-1/0],this._valid=!!C}ke.prototype.include=function(C){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],C[0]),this._bbox[1]=Math.min(this._bbox[1],C[1]),this._bbox[2]=Math.max(this._bbox[2],C[0]),this._bbox[3]=Math.max(this._bbox[3],C[1]),this},ke.prototype.equals=function(C){var R;return R=C instanceof ke?C.bbox():C,this._bbox[0]==R[0]&&this._bbox[1]==R[1]&&this._bbox[2]==R[2]&&this._bbox[3]==R[3]},ke.prototype.center=function(C){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},ke.prototype.union=function(C){var R;return this._valid=!0,R=C instanceof ke?C.bbox():C,this._bbox[0]=Math.min(this._bbox[0],R[0]),this._bbox[1]=Math.min(this._bbox[1],R[1]),this._bbox[2]=Math.max(this._bbox[2],R[2]),this._bbox[3]=Math.max(this._bbox[3],R[3]),this},ke.prototype.bbox=function(){return this._valid?this._bbox:null},ke.prototype.contains=function(C){if(!C)return this._fastContains();if(!this._valid)return null;var R=C[0],Y=C[1];return this._bbox[0]<=R&&this._bbox[1]<=Y&&this._bbox[2]>=R&&this._bbox[3]>=Y},ke.prototype.intersect=function(C){return this._valid?(R=C instanceof ke?C.bbox():C,!(this._bbox[0]>R[2]||this._bbox[2]<R[0]||this._bbox[3]<R[1]||this._bbox[1]>R[3])):null;var R},ke.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var C="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",C)},ke.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ne=function(C){if(!C)return[];var R=at(Q(C)),Y=[];return R.features.forEach(function(mt){mt.geometry&&(Y=Y.concat(dt(mt.geometry.coordinates)))}),Y},je=on,ei=oe,Ze={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},_i=Object.keys(Ze);function Vi(C){for(var R=ei(),Y=Ne(C),mt=0;mt<Y.length;mt++)R.include(Y[mt]);return R}qs.exports=function(C){return Vi(C).bbox()},qs.exports.polygon=function(C){return Vi(C).polygon()},qs.exports.bboxify=function(C){return je(C).map(function(R){R&&_i.some(function(Y){return!!R[Y]&&Ze[Y].indexOf(R.type)!==-1})&&(R.bbox=Vi(R).bbox(),this.update(R))})};var ci=a(qs.exports),mi=-90;function gi(C,R){var Y=mi,mt=90,Tt=mi,Pt=90,Ht=270,Pe=-270;C.forEach(function(en){var an=ci(en),Ge=an[1],$n=an[3],Nr=an[0],si=an[2];Ge>Y&&(Y=Ge),$n<mt&&(mt=$n),$n>Tt&&(Tt=$n),Ge<Pt&&(Pt=Ge),Nr<Ht&&(Ht=Nr),si>Pe&&(Pe=si)});var Fe=R;return Y+Fe.lat>85&&(Fe.lat=85-Y),Tt+Fe.lat>90&&(Fe.lat=90-Tt),mt+Fe.lat<-85&&(Fe.lat=-85-mt),Pt+Fe.lat<mi&&(Fe.lat=mi-Pt),Ht+Fe.lng<=-270&&(Fe.lng+=360*Math.ceil(Math.abs(Fe.lng)/360)),Pe+Fe.lng>=270&&(Fe.lng-=360*Math.ceil(Math.abs(Fe.lng)/360)),Fe}function Eo(C,R){var Y=gi(C.map(function(mt){return mt.toGeoJSON()}),R);C.forEach(function(mt){var Tt,Pt=mt.getCoordinates(),Ht=function(Fe){var en={lng:Fe[0]+Y.lng,lat:Fe[1]+Y.lat};return[en.lng,en.lat]},Pe=function(Fe){return Fe.map(function(en){return Ht(en)})};mt.type===H.POINT?Tt=Ht(Pt):mt.type===H.LINE_STRING||mt.type===H.MULTI_POINT?Tt=Pt.map(Ht):mt.type===H.POLYGON||mt.type===H.MULTI_LINE_STRING?Tt=Pt.map(Pe):mt.type===H.MULTI_POLYGON&&(Tt=Pt.map(function(Fe){return Fe.map(function(en){return Pe(en)})})),mt.incomingCoords(Tt)})}var Hn={onSetup:function(C){var R=this,Y={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:C.featureIds||[]};return this.setSelected(Y.initiallySelectedFeatureIds.filter(function(mt){return R.getFeature(mt)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),Y},fireUpdate:function(){this.map.fire(lt.UPDATE,{action:K.MOVE,features:this.getSelected().map(function(C){return C.toGeoJSON()})})},fireActionable:function(){var C=this,R=this.getSelected(),Y=R.filter(function(Pe){return C.isInstanceOf("MultiFeature",Pe)}),mt=!1;if(R.length>1){mt=!0;var Tt=R[0].type.replace("Multi","");R.forEach(function(Pe){Pe.type.replace("Multi","")!==Tt&&(mt=!1)})}var Pt=Y.length>0,Ht=R.length>0;this.setActionableState({combineFeatures:mt,uncombineFeatures:Pt,trash:Ht})},getUniqueIds:function(C){return C.length?C.map(function(R){return R.properties.id}).filter(function(R){return R!==void 0}).reduce(function(R,Y){return R.add(Y),R},new Nt).values():[]},stopExtendedInteractions:function(C){C.boxSelectElement&&(C.boxSelectElement.parentNode&&C.boxSelectElement.parentNode.removeChild(C.boxSelectElement),C.boxSelectElement=null),this.map.dragPan.enable(),C.boxSelecting=!1,C.canBoxSelect=!1,C.dragMoving=!1,C.canDragMove=!1},onStop:function(){so.enable(this)},onMouseMove:function(C,R){return wi(R)&&C.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(C),!0},onMouseOut:function(C){return!C.dragMoving||this.fireUpdate()}};Hn.onTap=Hn.onClick=function(C,R){return Di(R)?this.clickAnywhere(C,R):wn($.VERTEX)(R)?this.clickOnVertex(C,R):wi(R)?this.clickOnFeature(C,R):void 0},Hn.clickAnywhere=function(C){var R=this,Y=this.getSelectedIds();Y.length&&(this.clearSelectedFeatures(),Y.forEach(function(mt){return R.doRender(mt)})),so.enable(this),this.stopExtendedInteractions(C)},Hn.clickOnVertex=function(C,R){this.changeMode(nt.DIRECT_SELECT,{featureId:R.featureTarget.properties.parent,coordPath:R.featureTarget.properties.coord_path,startPos:R.lngLat}),this.updateUIClasses({mouse:O.MOVE})},Hn.startOnActiveFeature=function(C,R){this.stopExtendedInteractions(C),this.map.dragPan.disable(),this.doRender(R.featureTarget.properties.id),C.canDragMove=!0,C.dragMoveLocation=R.lngLat},Hn.clickOnFeature=function(C,R){var Y=this;so.disable(this),this.stopExtendedInteractions(C);var mt=Gr(R),Tt=this.getSelectedIds(),Pt=R.featureTarget.properties.id,Ht=this.isSelected(Pt);if(!mt&&Ht&&this.getFeature(Pt).type!==H.POINT)return this.changeMode(nt.DIRECT_SELECT,{featureId:Pt});Ht&&mt?(this.deselect(Pt),this.updateUIClasses({mouse:O.POINTER}),Tt.length===1&&so.enable(this)):!Ht&&mt?(this.select(Pt),this.updateUIClasses({mouse:O.MOVE})):Ht||mt||(Tt.forEach(function(Pe){return Y.doRender(Pe)}),this.setSelected(Pt),this.updateUIClasses({mouse:O.MOVE})),this.doRender(Pt)},Hn.onMouseDown=function(C,R){return Pn(R)?this.startOnActiveFeature(C,R):this.drawConfig.boxSelect&&Cn(R)?this.startBoxSelect(C,R):void 0},Hn.startBoxSelect=function(C,R){this.stopExtendedInteractions(C),this.map.dragPan.disable(),C.boxSelectStartLocation=Hs(R.originalEvent,this.map.getContainer()),C.canBoxSelect=!0},Hn.onTouchStart=function(C,R){if(Pn(R))return this.startOnActiveFeature(C,R)},Hn.onDrag=function(C,R){return C.canDragMove?this.dragMove(C,R):this.drawConfig.boxSelect&&C.canBoxSelect?this.whileBoxSelect(C,R):void 0},Hn.whileBoxSelect=function(C,R){C.boxSelecting=!0,this.updateUIClasses({mouse:O.ADD}),C.boxSelectElement||(C.boxSelectElement=document.createElement("div"),C.boxSelectElement.classList.add(P.BOX_SELECT),this.map.getContainer().appendChild(C.boxSelectElement));var Y=Hs(R.originalEvent,this.map.getContainer()),mt=Math.min(C.boxSelectStartLocation.x,Y.x),Tt=Math.max(C.boxSelectStartLocation.x,Y.x),Pt=Math.min(C.boxSelectStartLocation.y,Y.y),Ht=Math.max(C.boxSelectStartLocation.y,Y.y),Pe="translate("+mt+"px, "+Pt+"px)";C.boxSelectElement.style.transform=Pe,C.boxSelectElement.style.WebkitTransform=Pe,C.boxSelectElement.style.width=Tt-mt+"px",C.boxSelectElement.style.height=Ht-Pt+"px"},Hn.dragMove=function(C,R){C.dragMoving=!0,R.originalEvent.stopPropagation();var Y={lng:R.lngLat.lng-C.dragMoveLocation.lng,lat:R.lngLat.lat-C.dragMoveLocation.lat};Eo(this.getSelected(),Y),C.dragMoveLocation=R.lngLat},Hn.onTouchEnd=Hn.onMouseUp=function(C,R){var Y=this;if(C.dragMoving)this.fireUpdate();else if(C.boxSelecting){var mt=[C.boxSelectStartLocation,Hs(R.originalEvent,this.map.getContainer())],Tt=this.featuresAt(null,mt,"click"),Pt=this.getUniqueIds(Tt).filter(function(Ht){return!Y.isSelected(Ht)});Pt.length&&(this.select(Pt),Pt.forEach(function(Ht){return Y.doRender(Ht)}),this.updateUIClasses({mouse:O.MOVE}))}this.stopExtendedInteractions(C)},Hn.toDisplayFeatures=function(C,R,Y){R.properties.active=this.isSelected(R.properties.id)?yt.ACTIVE:yt.INACTIVE,Y(R),this.fireActionable(),R.properties.active===yt.ACTIVE&&R.geometry.type!==H.POINT&&La(R).forEach(Y)},Hn.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Hn.onCombineFeatures=function(){var C=this.getSelected();if(!(C.length===0||C.length<2)){for(var R=[],Y=[],mt=C[0].type.replace("Multi",""),Tt=0;Tt<C.length;Tt++){var Pt=C[Tt];if(Pt.type.replace("Multi","")!==mt)return;Pt.type.includes("Multi")?Pt.getCoordinates().forEach(function(Pe){R.push(Pe)}):R.push(Pt.getCoordinates()),Y.push(Pt.toGeoJSON())}if(Y.length>1){var Ht=this.newFeature({type:H.FEATURE,properties:Y[0].properties,geometry:{type:"Multi"+mt,coordinates:R}});this.addFeature(Ht),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([Ht.id]),this.map.fire(lt.COMBINE_FEATURES,{createdFeatures:[Ht.toGeoJSON()],deletedFeatures:Y})}this.fireActionable()}},Hn.onUncombineFeatures=function(){var C=this,R=this.getSelected();if(R.length!==0){for(var Y=[],mt=[],Tt=function(Ht){var Pe=R[Ht];C.isInstanceOf("MultiFeature",Pe)&&(Pe.getFeatures().forEach(function(Fe){C.addFeature(Fe),Fe.properties=Pe.properties,Y.push(Fe.toGeoJSON()),C.select([Fe.id])}),C.deleteFeature(Pe.id,{silent:!0}),mt.push(Pe.toGeoJSON()))},Pt=0;Pt<R.length;Pt++)Tt(Pt);Y.length>1&&this.map.fire(lt.UNCOMBINE_FEATURES,{createdFeatures:Y,deletedFeatures:mt}),this.fireActionable()}};var Pr=wn($.VERTEX),Wi=wn($.MIDPOINT),Wn={fireUpdate:function(){this.map.fire(lt.UPDATE,{action:K.CHANGE_COORDINATES,features:this.getSelected().map(function(C){return C.toGeoJSON()})})},fireActionable:function(C){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:C.selectedCoordPaths.length>0})},startDragging:function(C,R){this.map.dragPan.disable(),C.canDragMove=!0,C.dragMoveLocation=R.lngLat},stopDragging:function(C){this.map.dragPan.enable(),C.dragMoving=!1,C.canDragMove=!1,C.dragMoveLocation=null},onVertex:function(C,R){this.startDragging(C,R);var Y=R.featureTarget.properties,mt=C.selectedCoordPaths.indexOf(Y.coord_path);Gr(R)||mt!==-1?Gr(R)&&mt===-1&&C.selectedCoordPaths.push(Y.coord_path):C.selectedCoordPaths=[Y.coord_path];var Tt=this.pathsToCoordinates(C.featureId,C.selectedCoordPaths);this.setSelectedCoordinates(Tt)},onMidpoint:function(C,R){this.startDragging(C,R);var Y=R.featureTarget.properties;C.feature.addCoordinate(Y.coord_path,Y.lng,Y.lat),this.fireUpdate(),C.selectedCoordPaths=[Y.coord_path]},pathsToCoordinates:function(C,R){return R.map(function(Y){return{feature_id:C,coord_path:Y}})},onFeature:function(C,R){C.selectedCoordPaths.length===0?this.startDragging(C,R):this.stopDragging(C)},dragFeature:function(C,R,Y){Eo(this.getSelected(),Y),C.dragMoveLocation=R.lngLat},dragVertex:function(C,R,Y){for(var mt=C.selectedCoordPaths.map(function(Pe){return C.feature.getCoordinate(Pe)}),Tt=gi(mt.map(function(Pe){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:Pe}}}),Y),Pt=0;Pt<mt.length;Pt++){var Ht=mt[Pt];C.feature.updateCoordinate(C.selectedCoordPaths[Pt],Ht[0]+Tt.lng,Ht[1]+Tt.lat)}},clickNoTarget:function(){this.changeMode(nt.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(nt.SIMPLE_SELECT)},clickActiveFeature:function(C){C.selectedCoordPaths=[],this.clearSelectedCoordinates(),C.feature.changed()},onSetup:function(C){var R=C.featureId,Y=this.getFeature(R);if(!Y)throw new Error("You must provide a featureId to enter direct_select mode");if(Y.type===H.POINT)throw new TypeError("direct_select mode doesn't handle point features");var mt={featureId:R,feature:Y,dragMoveLocation:C.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:C.coordPath?[C.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(R,mt.selectedCoordPaths)),this.setSelected(R),so.disable(this),this.setActionableState({trash:!0}),mt},onStop:function(){so.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(C,R,Y){C.featureId===R.properties.id?(R.properties.active=yt.ACTIVE,Y(R),La(R,{map:this.map,midpoints:!0,selectedPaths:C.selectedCoordPaths}).forEach(Y)):(R.properties.active=yt.INACTIVE,Y(R)),this.fireActionable(C)},onTrash:function(C){C.selectedCoordPaths.sort(function(R,Y){return Y.localeCompare(R,"en",{numeric:!0})}).forEach(function(R){return C.feature.removeCoordinate(R)}),this.fireUpdate(),C.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(C),C.feature.isValid()===!1&&(this.deleteFeature([C.featureId]),this.changeMode(nt.SIMPLE_SELECT,{}))},onMouseMove:function(C,R){var Y=Pn(R),mt=Pr(R),Tt=Wi(R),Pt=C.selectedCoordPaths.length===0;return Y&&Pt||mt&&!Pt?this.updateUIClasses({mouse:O.MOVE}):this.updateUIClasses({mouse:O.NONE}),(mt||Y||Tt)&&C.dragMoving&&this.fireUpdate(),this.stopDragging(C),!0},onMouseOut:function(C){return C.dragMoving&&this.fireUpdate(),!0}};Wn.onTouchStart=Wn.onMouseDown=function(C,R){return Pr(R)?this.onVertex(C,R):Pn(R)?this.onFeature(C,R):Wi(R)?this.onMidpoint(C,R):void 0},Wn.onDrag=function(C,R){if(C.canDragMove===!0){C.dragMoving=!0,R.originalEvent.stopPropagation();var Y={lng:R.lngLat.lng-C.dragMoveLocation.lng,lat:R.lngLat.lat-C.dragMoveLocation.lat};C.selectedCoordPaths.length>0?this.dragVertex(C,R,Y):this.dragFeature(C,R,Y),C.dragMoveLocation=R.lngLat}},Wn.onClick=function(C,R){return Di(R)?this.clickNoTarget(C,R):Pn(R)?this.clickActiveFeature(C,R):Qn(R)?this.clickInactive(C,R):void this.stopDragging(C)},Wn.onTap=function(C,R){return Di(R)?this.clickNoTarget(C,R):Pn(R)?this.clickActiveFeature(C,R):Qn(R)?this.clickInactive(C,R):void 0},Wn.onTouchEnd=Wn.onMouseUp=function(C){C.dragMoving&&this.fireUpdate(),this.stopDragging(C)};var ai={};function So(C,R){return!!C.lngLat&&C.lngLat.lng===R[0]&&C.lngLat.lat===R[1]}ai.onSetup=function(){var C=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:[]}});return this.addFeature(C),this.clearSelectedFeatures(),this.updateUIClasses({mouse:O.ADD}),this.activateUIButton(W.POINT),this.setActionableState({trash:!0}),{point:C}},ai.stopDrawingAndRemove=function(C){this.deleteFeature([C.point.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT)},ai.onTap=ai.onClick=function(C,R){this.updateUIClasses({mouse:O.MOVE}),C.point.updateCoordinate("",R.lngLat.lng,R.lngLat.lat),this.map.fire(lt.CREATE,{features:[C.point.toGeoJSON()]}),this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.point.id]})},ai.onStop=function(C){this.activateUIButton(),C.point.getCoordinate().length||this.deleteFeature([C.point.id],{silent:!0})},ai.toDisplayFeatures=function(C,R,Y){var mt=R.properties.id===C.point.id;if(R.properties.active=mt?yt.ACTIVE:yt.INACTIVE,!mt)return Y(R)},ai.onTrash=ai.stopDrawingAndRemove,ai.onKeyUp=function(C,R){if(qo(R)||pa(R))return this.stopDrawingAndRemove(C,R)};var os={onSetup:function(){var C=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.POLYGON,coordinates:[[]]}});return this.addFeature(C),this.clearSelectedFeatures(),so.disable(this),this.updateUIClasses({mouse:O.ADD}),this.activateUIButton(W.POLYGON),this.setActionableState({trash:!0}),{polygon:C,currentVertexPosition:0}},clickAnywhere:function(C,R){if(C.currentVertexPosition>0&&So(R,C.polygon.coordinates[0][C.currentVertexPosition-1]))return this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.polygon.id]});this.updateUIClasses({mouse:O.ADD}),C.polygon.updateCoordinate("0."+C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),C.currentVertexPosition++,C.polygon.updateCoordinate("0."+C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat)},clickOnVertex:function(C){return this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.polygon.id]})},onMouseMove:function(C,R){C.polygon.updateCoordinate("0."+C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),rr(R)&&this.updateUIClasses({mouse:O.POINTER})}};os.onTap=os.onClick=function(C,R){return rr(R)?this.clickOnVertex(C,R):this.clickAnywhere(C,R)},os.onKeyUp=function(C,R){qo(R)?(this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT)):pa(R)&&this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.polygon.id]})},os.onStop=function(C){this.updateUIClasses({mouse:O.NONE}),so.enable(this),this.activateUIButton(),this.getFeature(C.polygon.id)!==void 0&&(C.polygon.removeCoordinate("0."+C.currentVertexPosition),C.polygon.isValid()?this.map.fire(lt.CREATE,{features:[C.polygon.toGeoJSON()]}):(this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT,{},{silent:!0})))},os.toDisplayFeatures=function(C,R,Y){var mt=R.properties.id===C.polygon.id;if(R.properties.active=mt?yt.ACTIVE:yt.INACTIVE,!mt)return Y(R);if(R.geometry.coordinates.length!==0){var Tt=R.geometry.coordinates[0].length;if(!(Tt<3)){if(R.properties.meta=$.FEATURE,Y(Gs(C.polygon.id,R.geometry.coordinates[0][0],"0.0",!1)),Tt>3){var Pt=R.geometry.coordinates[0].length-3;Y(Gs(C.polygon.id,R.geometry.coordinates[0][Pt],"0."+Pt,!1))}if(Tt<=4){var Ht=[[R.geometry.coordinates[0][0][0],R.geometry.coordinates[0][0][1]],[R.geometry.coordinates[0][1][0],R.geometry.coordinates[0][1][1]]];if(Y({type:H.FEATURE,properties:R.properties,geometry:{coordinates:Ht,type:H.LINE_STRING}}),Tt===3)return}return Y(R)}}},os.onTrash=function(C){this.deleteFeature([C.polygon.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT)};var Lr={onSetup:function(C){var R,Y,mt=(C=C||{}).featureId,Tt="forward";if(mt){if(!(R=this.getFeature(mt)))throw new Error("Could not find a feature with the provided featureId");var Pt=C.from;if(Pt&&Pt.type==="Feature"&&Pt.geometry&&Pt.geometry.type==="Point"&&(Pt=Pt.geometry),Pt&&Pt.type==="Point"&&Pt.coordinates&&Pt.coordinates.length===2&&(Pt=Pt.coordinates),!Pt||!Array.isArray(Pt))throw new Error("Please use the `from` property to indicate which point to continue the line from");var Ht=R.coordinates.length-1;if(R.coordinates[Ht][0]===Pt[0]&&R.coordinates[Ht][1]===Pt[1])Y=Ht+1,R.addCoordinate.apply(R,[Y].concat(R.coordinates[Ht]));else{if(R.coordinates[0][0]!==Pt[0]||R.coordinates[0][1]!==Pt[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");Tt="backwards",Y=0,R.addCoordinate.apply(R,[Y].concat(R.coordinates[0]))}}else R=this.newFeature({type:H.FEATURE,properties:{},geometry:{type:H.LINE_STRING,coordinates:[]}}),Y=0,this.addFeature(R);return this.clearSelectedFeatures(),so.disable(this),this.updateUIClasses({mouse:O.ADD}),this.activateUIButton(W.LINE),this.setActionableState({trash:!0}),{line:R,currentVertexPosition:Y,direction:Tt}},clickAnywhere:function(C,R){if(C.currentVertexPosition>0&&So(R,C.line.coordinates[C.currentVertexPosition-1])||C.direction==="backwards"&&So(R,C.line.coordinates[C.currentVertexPosition+1]))return this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.line.id]});this.updateUIClasses({mouse:O.ADD}),C.line.updateCoordinate(C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),C.direction==="forward"?(C.currentVertexPosition++,C.line.updateCoordinate(C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat)):C.line.addCoordinate(0,R.lngLat.lng,R.lngLat.lat)},clickOnVertex:function(C){return this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.line.id]})},onMouseMove:function(C,R){C.line.updateCoordinate(C.currentVertexPosition,R.lngLat.lng,R.lngLat.lat),rr(R)&&this.updateUIClasses({mouse:O.POINTER})}};Lr.onTap=Lr.onClick=function(C,R){if(rr(R))return this.clickOnVertex(C,R);this.clickAnywhere(C,R)},Lr.onKeyUp=function(C,R){pa(R)?this.changeMode(nt.SIMPLE_SELECT,{featureIds:[C.line.id]}):qo(R)&&(this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT))},Lr.onStop=function(C){so.enable(this),this.activateUIButton(),this.getFeature(C.line.id)!==void 0&&(C.line.removeCoordinate(""+C.currentVertexPosition),C.line.isValid()?this.map.fire(lt.CREATE,{features:[C.line.toGeoJSON()]}):(this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT,{},{silent:!0})))},Lr.onTrash=function(C){this.deleteFeature([C.line.id],{silent:!0}),this.changeMode(nt.SIMPLE_SELECT)},Lr.toDisplayFeatures=function(C,R,Y){var mt=R.properties.id===C.line.id;if(R.properties.active=mt?yt.ACTIVE:yt.INACTIVE,!mt)return Y(R);R.geometry.coordinates.length<2||(R.properties.meta=$.FEATURE,Y(Gs(C.line.id,R.geometry.coordinates[C.direction==="forward"?R.geometry.coordinates.length-2:1],""+(C.direction==="forward"?R.geometry.coordinates.length-2:1),!1)),Y(R))};var Ro={simple_select:Hn,direct_select:Wn,draw_point:ai,draw_polygon:os,draw_line_string:Lr},Pc={defaultMode:nt.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:tn,modes:Ro,controls:{},userProperties:!1},yu={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},kr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function _u(C,R){return C.map(function(Y){return Y.source?Y:we(Y,{id:Y.id+"."+R,source:R==="hot"?L.HOT:L.COLD})})}var yo={exports:{}};(function(C,R){var Y="__lodash_hash_undefined__",mt=9007199254740991,Tt="[object Arguments]",Pt="[object Array]",Ht="[object Boolean]",Pe="[object Date]",Fe="[object Error]",en="[object Function]",an="[object Map]",Ge="[object Number]",$n="[object Object]",Nr="[object Promise]",si="[object RegExp]",wr="[object Set]",xe="[object String]",An="[object Symbol]",or="[object WeakMap]",eo="[object ArrayBuffer]",Qi="[object DataView]",ws=/^\[object .+?Constructor\]$/,pl=/^(?:0|[1-9]\d*)$/,er={};er["[object Float32Array]"]=er["[object Float64Array]"]=er["[object Int8Array]"]=er["[object Int16Array]"]=er["[object Int32Array]"]=er["[object Uint8Array]"]=er["[object Uint8ClampedArray]"]=er["[object Uint16Array]"]=er["[object Uint32Array]"]=!0,er[Tt]=er[Pt]=er[eo]=er[Ht]=er[Qi]=er[Pe]=er[Fe]=er[en]=er[an]=er[Ge]=er[$n]=er[si]=er[wr]=er[xe]=er[or]=!1;var Ws=typeof ys=="object"&&ys&&ys.Object===Object&&ys,dl=typeof self=="object"&&self&&self.Object===Object&&self,Ui=Ws||dl||Function("return this")(),Ci=R&&!R.nodeType&&R,Zr=Ci&&C&&!C.nodeType&&C,Wl=Zr&&Zr.exports===Ci,Lc=Wl&&Ws.process,lf=function(){try{return Lc&&Lc.binding&&Lc.binding("util")}catch{}}(),uf=lf&&lf.isTypedArray;function dh(Wt,ue){for(var nn=-1,Dn=Wt==null?0:Wt.length;++nn<Dn;)if(ue(Wt[nn],nn,Wt))return!0;return!1}function kc(Wt){var ue=-1,nn=Array(Wt.size);return Wt.forEach(function(Dn,vr){nn[++ue]=[vr,Dn]}),nn}function mh(Wt){var ue=-1,nn=Array(Wt.size);return Wt.forEach(function(Dn){nn[++ue]=Dn}),nn}var lo,ec,Zs,cf=Array.prototype,Zl=Function.prototype,_o=Object.prototype,nc=Ui["__core-js_shared__"],uo=Zl.toString,ka=_o.hasOwnProperty,Cs=(lo=/[^.]+$/.exec(nc&&nc.keys&&nc.keys.IE_PROTO||""))?"Symbol(src)_1."+lo:"",Is=_o.toString,ml=RegExp("^"+uo.call(ka).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),co=Wl?Ui.Buffer:void 0,as=Ui.Symbol,xo=Ui.Uint8Array,gl=_o.propertyIsEnumerable,Ys=cf.splice,$o=as?as.toStringTag:void 0,xu=Object.getOwnPropertySymbols,$i=co?co.isBuffer:void 0,Vr=(ec=Object.keys,Zs=Object,function(Wt){return ec(Zs(Wt))}),Da=Ms(Ui,"DataView"),vl=Ms(Ui,"Map"),Dc=Ms(Ui,"Promise"),bu=Ms(Ui,"Set"),Rc=Ms(Ui,"WeakMap"),ss=Ms(Object,"create"),yl=Oo(Da),_l=Oo(vl),ic=Oo(Dc),Yl=Oo(bu),gh=Oo(Rc),Xs=as?as.prototype:void 0,rc=Xs?Xs.valueOf:void 0;function Jo(Wt){var ue=-1,nn=Wt==null?0:Wt.length;for(this.clear();++ue<nn;){var Dn=Wt[ue];this.set(Dn[0],Dn[1])}}function zo(Wt){var ue=-1,nn=Wt==null?0:Wt.length;for(this.clear();++ue<nn;){var Dn=Wt[ue];this.set(Dn[0],Dn[1])}}function Ks(Wt){var ue=-1,nn=Wt==null?0:Wt.length;for(this.clear();++ue<nn;){var Dn=Wt[ue];this.set(Dn[0],Dn[1])}}function xl(Wt){var ue=-1,nn=Wt==null?0:Wt.length;for(this.__data__=new Ks;++ue<nn;)this.add(Wt[ue])}function Ri(Wt){var ue=this.__data__=new zo(Wt);this.size=ue.size}function Au(Wt,ue){var nn=Mu(Wt),Dn=!nn&&Bc(Wt),vr=!nn&&!Dn&&Wo(Wt),zi=!nn&&!Dn&&!vr&&Kl(Wt),cr=nn||Dn||vr||zi,Ot=cr?function(Ae,Vn){for(var li=-1,Ii=Array(Ae);++li<Ae;)Ii[li]=Vn(li);return Ii}(Wt.length,String):[],he=Ot.length;for(var Kt in Wt)!ka.call(Wt,Kt)||cr&&(Kt=="length"||vr&&(Kt=="offset"||Kt=="parent")||zi&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||us(Kt,he))||Ot.push(Kt);return Ot}function zc(Wt,ue){for(var nn=Wt.length;nn--;)if(vh(Wt[nn][0],ue))return nn;return-1}function ls(Wt){return Wt==null?Wt===void 0?"[object Undefined]":"[object Null]":$o&&$o in Object(Wt)?function(ue){var nn=ka.call(ue,$o),Dn=ue[$o];try{ue[$o]=void 0;var vr=!0}catch{}var zi=Is.call(ue);return vr&&(nn?ue[$o]=Dn:delete ue[$o]),zi}(Wt):function(ue){return Is.call(ue)}(Wt)}function ta(Wt){return Al(Wt)&&ls(Wt)==Tt}function Oc(Wt,ue,nn,Dn,vr){return Wt===ue||(Wt==null||ue==null||!Al(Wt)&&!Al(ue)?Wt!=Wt&&ue!=ue:function(zi,cr,Ot,he,Kt,Ae){var Vn=Mu(zi),li=Mu(cr),Ii=Vn?Pt:Qs(zi),pn=li?Pt:Qs(cr),ji=(Ii=Ii==Tt?$n:Ii)==$n,Zo=(pn=pn==Tt?$n:pn)==$n,no=Ii==pn;if(no&&Wo(zi)){if(!Wo(cr))return!1;Vn=!0,ji=!1}if(no&&!ji)return Ae||(Ae=new Ri),Vn||Kl(zi)?bl(zi,cr,Ot,he,Kt,Ae):function(Zi,Ln,Wa,hr,Es,za,ar){switch(Wa){case Qi:if(Zi.byteLength!=Ln.byteLength||Zi.byteOffset!=Ln.byteOffset)return!1;Zi=Zi.buffer,Ln=Ln.buffer;case eo:return!(Zi.byteLength!=Ln.byteLength||!za(new xo(Zi),new xo(Ln)));case Ht:case Pe:case Ge:return vh(+Zi,+Ln);case Fe:return Zi.name==Ln.name&&Zi.message==Ln.message;case si:case xe:return Zi==Ln+"";case an:var Ye=kc;case wr:var io=1&hr;if(Ye||(Ye=mh),Zi.size!=Ln.size&&!io)return!1;var va=ar.get(Zi);if(va)return va==Ln;hr|=2,ar.set(Zi,Ln);var ya=bl(Ye(Zi),Ye(Ln),hr,Es,za,ar);return ar.delete(Zi),ya;case An:if(rc)return rc.call(Zi)==rc.call(Ln)}return!1}(zi,cr,Ii,Ot,he,Kt,Ae);if(!(1&Ot)){var Ra=ji&&ka.call(zi,"__wrapped__"),Eu=Zo&&ka.call(cr,"__wrapped__");if(Ra||Eu){var Su=Ra?zi.value():zi,Nc=Eu?cr.value():cr;return Ae||(Ae=new Ri),Kt(Su,Nc,Ot,he,Ae)}}return no?(Ae||(Ae=new Ri),function(Zi,Ln,Wa,hr,Es,za){var ar=1&Wa,Ye=Cu(Zi),io=Ye.length,va=Cu(Ln).length;if(io!=va&&!ar)return!1;for(var ya=io;ya--;){var To=Ye[ya];if(!(ar?To in Ln:ka.call(Ln,To)))return!1}var Po=za.get(Zi);if(Po&&za.get(Ln))return Po==Ln;var Ql=!0;za.set(Zi,Ln),za.set(Ln,Zi);for(var Re=ar;++ya<io;){var Js=Zi[To=Ye[ya]],wl=Ln[To];if(hr)var Cl=ar?hr(wl,Js,To,Ln,Zi,za):hr(Js,wl,To,Zi,Ln,za);if(!(Cl===void 0?Js===wl||Es(Js,wl,Wa,hr,za):Cl)){Ql=!1;break}Re||(Re=To=="constructor")}if(Ql&&!Re){var ro=Zi.constructor,ho=Ln.constructor;ro==ho||!("constructor"in Zi)||!("constructor"in Ln)||typeof ro=="function"&&ro instanceof ro&&typeof ho=="function"&&ho instanceof ho||(Ql=!1)}return za.delete(Zi),za.delete(Ln),Ql}(zi,cr,Ot,he,Kt,Ae)):!1}(Wt,ue,nn,Dn,Oc,vr))}function wu(Wt){return!(!Fc(Wt)||function(ue){return!!Cs&&Cs in ue}(Wt))&&($s(Wt)?ml:ws).test(Oo(Wt))}function oc(Wt){if(nn=(ue=Wt)&&ue.constructor,Dn=typeof nn=="function"&&nn.prototype||_o,ue!==Dn)return Vr(Wt);var ue,nn,Dn,vr=[];for(var zi in Object(Wt))ka.call(Wt,zi)&&zi!="constructor"&&vr.push(zi);return vr}function bl(Wt,ue,nn,Dn,vr,zi){var cr=1&nn,Ot=Wt.length,he=ue.length;if(Ot!=he&&!(cr&&he>Ot))return!1;var Kt=zi.get(Wt);if(Kt&&zi.get(ue))return Kt==ue;var Ae=-1,Vn=!0,li=2&nn?new xl:void 0;for(zi.set(Wt,ue),zi.set(ue,Wt);++Ae<Ot;){var Ii=Wt[Ae],pn=ue[Ae];if(Dn)var ji=cr?Dn(pn,Ii,Ae,ue,Wt,zi):Dn(Ii,pn,Ae,Wt,ue,zi);if(ji!==void 0){if(ji)continue;Vn=!1;break}if(li){if(!dh(ue,function(Zo,no){if(Ra=no,!li.has(Ra)&&(Ii===Zo||vr(Ii,Zo,nn,Dn,zi)))return li.push(no);var Ra})){Vn=!1;break}}else if(Ii!==pn&&!vr(Ii,pn,nn,Dn,zi)){Vn=!1;break}}return zi.delete(Wt),zi.delete(ue),Vn}function Cu(Wt){return function(ue,nn,Dn){var vr=nn(ue);return Mu(ue)?vr:function(zi,cr){for(var Ot=-1,he=cr.length,Kt=zi.length;++Ot<he;)zi[Kt+Ot]=cr[Ot];return zi}(vr,Dn(ue))}(Wt,ga,Iu)}function Xl(Wt,ue){var nn,Dn,vr=Wt.__data__;return((Dn=typeof(nn=ue))=="string"||Dn=="number"||Dn=="symbol"||Dn=="boolean"?nn!=="__proto__":nn===null)?vr[typeof ue=="string"?"string":"hash"]:vr.map}function Ms(Wt,ue){var nn=function(Dn,vr){return Dn==null?void 0:Dn[vr]}(Wt,ue);return wu(nn)?nn:void 0}Jo.prototype.clear=function(){this.__data__=ss?ss(null):{},this.size=0},Jo.prototype.delete=function(Wt){var ue=this.has(Wt)&&delete this.__data__[Wt];return this.size-=ue?1:0,ue},Jo.prototype.get=function(Wt){var ue=this.__data__;if(ss){var nn=ue[Wt];return nn===Y?void 0:nn}return ka.call(ue,Wt)?ue[Wt]:void 0},Jo.prototype.has=function(Wt){var ue=this.__data__;return ss?ue[Wt]!==void 0:ka.call(ue,Wt)},Jo.prototype.set=function(Wt,ue){var nn=this.__data__;return this.size+=this.has(Wt)?0:1,nn[Wt]=ss&&ue===void 0?Y:ue,this},zo.prototype.clear=function(){this.__data__=[],this.size=0},zo.prototype.delete=function(Wt){var ue=this.__data__,nn=zc(ue,Wt);return!(nn<0)&&(nn==ue.length-1?ue.pop():Ys.call(ue,nn,1),--this.size,!0)},zo.prototype.get=function(Wt){var ue=this.__data__,nn=zc(ue,Wt);return nn<0?void 0:ue[nn][1]},zo.prototype.has=function(Wt){return zc(this.__data__,Wt)>-1},zo.prototype.set=function(Wt,ue){var nn=this.__data__,Dn=zc(nn,Wt);return Dn<0?(++this.size,nn.push([Wt,ue])):nn[Dn][1]=ue,this},Ks.prototype.clear=function(){this.size=0,this.__data__={hash:new Jo,map:new(vl||zo),string:new Jo}},Ks.prototype.delete=function(Wt){var ue=Xl(this,Wt).delete(Wt);return this.size-=ue?1:0,ue},Ks.prototype.get=function(Wt){return Xl(this,Wt).get(Wt)},Ks.prototype.has=function(Wt){return Xl(this,Wt).has(Wt)},Ks.prototype.set=function(Wt,ue){var nn=Xl(this,Wt),Dn=nn.size;return nn.set(Wt,ue),this.size+=nn.size==Dn?0:1,this},xl.prototype.add=xl.prototype.push=function(Wt){return this.__data__.set(Wt,Y),this},xl.prototype.has=function(Wt){return this.__data__.has(Wt)},Ri.prototype.clear=function(){this.__data__=new zo,this.size=0},Ri.prototype.delete=function(Wt){var ue=this.__data__,nn=ue.delete(Wt);return this.size=ue.size,nn},Ri.prototype.get=function(Wt){return this.__data__.get(Wt)},Ri.prototype.has=function(Wt){return this.__data__.has(Wt)},Ri.prototype.set=function(Wt,ue){var nn=this.__data__;if(nn instanceof zo){var Dn=nn.__data__;if(!vl||Dn.length<199)return Dn.push([Wt,ue]),this.size=++nn.size,this;nn=this.__data__=new Ks(Dn)}return nn.set(Wt,ue),this.size=nn.size,this};var Iu=xu?function(Wt){return Wt==null?[]:(Wt=Object(Wt),function(ue,nn){for(var Dn=-1,vr=ue==null?0:ue.length,zi=0,cr=[];++Dn<vr;){var Ot=ue[Dn];nn(Ot,Dn,ue)&&(cr[zi++]=Ot)}return cr}(xu(Wt),function(ue){return gl.call(Wt,ue)}))}:function(){return[]},Qs=ls;function us(Wt,ue){return!!(ue=ue??mt)&&(typeof Wt=="number"||pl.test(Wt))&&Wt>-1&&Wt%1==0&&Wt<ue}function Oo(Wt){if(Wt!=null){try{return uo.call(Wt)}catch{}try{return Wt+""}catch{}}return""}function vh(Wt,ue){return Wt===ue||Wt!=Wt&&ue!=ue}(Da&&Qs(new Da(new ArrayBuffer(1)))!=Qi||vl&&Qs(new vl)!=an||Dc&&Qs(Dc.resolve())!=Nr||bu&&Qs(new bu)!=wr||Rc&&Qs(new Rc)!=or)&&(Qs=function(Wt){var ue=ls(Wt),nn=ue==$n?Wt.constructor:void 0,Dn=nn?Oo(nn):"";if(Dn)switch(Dn){case yl:return Qi;case _l:return an;case ic:return Nr;case Yl:return wr;case gh:return or}return ue});var Bc=ta(function(){return arguments}())?ta:function(Wt){return Al(Wt)&&ka.call(Wt,"callee")&&!gl.call(Wt,"callee")},Mu=Array.isArray,Wo=$i||function(){return!1};function $s(Wt){if(!Fc(Wt))return!1;var ue=ls(Wt);return ue==en||ue=="[object GeneratorFunction]"||ue=="[object AsyncFunction]"||ue=="[object Proxy]"}function ac(Wt){return typeof Wt=="number"&&Wt>-1&&Wt%1==0&&Wt<=mt}function Fc(Wt){var ue=typeof Wt;return Wt!=null&&(ue=="object"||ue=="function")}function Al(Wt){return Wt!=null&&typeof Wt=="object"}var Kl=uf?function(Wt){return function(ue){return Wt(ue)}}(uf):function(Wt){return Al(Wt)&&ac(Wt.length)&&!!er[ls(Wt)]};function ga(Wt){return(ue=Wt)!=null&&ac(ue.length)&&!$s(ue)?Au(Wt):oc(Wt);var ue}C.exports=function(Wt,ue){return Oc(Wt,ue)}})(yo,yo.exports);var Wr=a(yo.exports);function da(C,R){return C.length===R.length&&JSON.stringify(C.map(function(Y){return Y}).sort())===JSON.stringify(R.map(function(Y){return Y}).sort())}var gr={Polygon:bi,LineString:ui,Point:Li,MultiPolygon:me,MultiLineString:me,MultiPoint:me},qa=Object.freeze({__proto__:null,CommonSelectors:Pa,constrainFeatureMovement:gi,createMidPoint:fl,createSupplementaryPoints:La,createVertex:Gs,doubleClickZoom:so,euclideanDistance:He,featuresAt:de,getFeatureAtAndSetCursors:_e,isClick:Ue,isEventAtCoordinates:So,isTap:Pi,mapEventToBoundingBox:Ut,ModeHandler:i,moveFeatures:Eo,sortFeatures:Qt,stringSetsAreEqual:da,StringSet:Nt,theme:tn,toDenseArray:xt}),ma=function(C,R){var Y={options:C=function(Tt){Tt===void 0&&(Tt={});var Pt=we(Tt);return Tt.controls||(Pt.controls={}),Tt.displayControlsDefault===!1?Pt.controls=we(kr,Tt.controls):Pt.controls=we(yu,Tt.controls),(Pt=we(Pc,Pt)).styles=_u(Pt.styles,"cold").concat(_u(Pt.styles,"hot")),Pt}(C)};R=function(Tt,Pt){return Pt.modes=nt,Pt.getFeatureIdsAt=function(Ht){return de.click({point:Ht},null,Tt).map(function(Pe){return Pe.properties.id})},Pt.getSelectedIds=function(){return Tt.store.getSelectedIds()},Pt.getSelected=function(){return{type:H.FEATURE_COLLECTION,features:Tt.store.getSelectedIds().map(function(Ht){return Tt.store.get(Ht)}).map(function(Ht){return Ht.toGeoJSON()})}},Pt.getSelectedPoints=function(){return{type:H.FEATURE_COLLECTION,features:Tt.store.getSelectedCoordinates().map(function(Ht){return{type:H.FEATURE,properties:{},geometry:{type:H.POINT,coordinates:Ht.coordinates}}})}},Pt.set=function(Ht){if(Ht.type===void 0||Ht.type!==H.FEATURE_COLLECTION||!Array.isArray(Ht.features))throw new Error("Invalid FeatureCollection");var Pe=Tt.store.createRenderBatch(),Fe=Tt.store.getAllIds().slice(),en=Pt.add(Ht),an=new Nt(en);return(Fe=Fe.filter(function(Ge){return!an.has(Ge)})).length&&Pt.delete(Fe),Pe(),en},Pt.add=function(Ht){var Pe=JSON.parse(JSON.stringify(U(Ht))).features.map(function(Fe){if(Fe.id=Fe.id||mn(),Fe.geometry===null)throw new Error("Invalid geometry: null");if(Tt.store.get(Fe.id)===void 0||Tt.store.get(Fe.id).type!==Fe.geometry.type){var en=gr[Fe.geometry.type];if(en===void 0)throw new Error("Invalid geometry type: "+Fe.geometry.type+".");var an=new en(Tt,Fe);Tt.store.add(an)}else{var Ge=Tt.store.get(Fe.id);Ge.properties=Fe.properties,Wr(Ge.properties,Fe.properties)||Tt.store.featureChanged(Ge.id),Wr(Ge.getCoordinates(),Fe.geometry.coordinates)||Ge.incomingCoords(Fe.geometry.coordinates)}return Fe.id});return Tt.store.render(),Pe},Pt.get=function(Ht){var Pe=Tt.store.get(Ht);if(Pe)return Pe.toGeoJSON()},Pt.getAll=function(){return{type:H.FEATURE_COLLECTION,features:Tt.store.getAll().map(function(Ht){return Ht.toGeoJSON()})}},Pt.delete=function(Ht){return Tt.store.delete(Ht,{silent:!0}),Pt.getMode()!==nt.DIRECT_SELECT||Tt.store.getSelectedIds().length?Tt.store.render():Tt.events.changeMode(nt.SIMPLE_SELECT,void 0,{silent:!0}),Pt},Pt.deleteAll=function(){return Tt.store.delete(Tt.store.getAllIds(),{silent:!0}),Pt.getMode()===nt.DIRECT_SELECT?Tt.events.changeMode(nt.SIMPLE_SELECT,void 0,{silent:!0}):Tt.store.render(),Pt},Pt.changeMode=function(Ht,Pe){return Pe===void 0&&(Pe={}),Ht===nt.SIMPLE_SELECT&&Pt.getMode()===nt.SIMPLE_SELECT?(da(Pe.featureIds||[],Tt.store.getSelectedIds())||(Tt.store.setSelected(Pe.featureIds,{silent:!0}),Tt.store.render()),Pt):(Ht===nt.DIRECT_SELECT&&Pt.getMode()===nt.DIRECT_SELECT&&Pe.featureId===Tt.store.getSelectedIds()[0]||Tt.events.changeMode(Ht,Pe,{silent:!0}),Pt)},Pt.getMode=function(){return Tt.events.getMode()},Pt.trash=function(){return Tt.events.trash({silent:!0}),Pt},Pt.combineFeatures=function(){return Tt.events.combineFeatures({silent:!0}),Pt},Pt.uncombineFeatures=function(){return Tt.events.uncombineFeatures({silent:!0}),Pt},Pt.setFeatureProperty=function(Ht,Pe,Fe){return Tt.store.setFeatureProperty(Ht,Pe,Fe),Pt},Pt}(Y,R),Y.api=R;var mt=Se(Y);return R.onAdd=mt.onAdd,R.onRemove=mt.onRemove,R.types=W,R.options=C,R};function ql(C){ma(C,this)}return ql.modes=Ro,ql.constants=Et,ql.lib=qa,ql})})(lM);var k9=lM.exports;const D9=l_(k9),R9={key:0,class:"d-flex button-custom-container"},z9={key:1,class:"d-flex button-custom-container"},O9={class:"context-menu"},B9=["onClick"],F9=["innerHTML"],N9=tr({__name:"DrawControl",props:{...rs,drawOptions:Object},setup(t){const n=t,i=n.drawOptions,{mapId:a,moduleContainerProps:h}=Io(n,Bt=>{O("select"),Bt.on("draw.create",x),Bt.on("draw.update",M),Bt.on("draw.delete",T),Bt.addControl(y)},Bt=>{Bt.off("draw.create",x),Bt.off("draw.update",M),Bt.off("draw.delete",T),Bt.removeControl(y)}),{add:m,remove:o}=Cx(a.value,new Ib().setHandler(Et));let y=new D9({displayControlsDefault:!1,boxSelect:!1});function x(Bt){for(const de of Bt.features)V1(a.value,"added",de);U1(a.value,W.value),O("select")}function M(Bt){for(const de of Bt.features)V1(a.value,"updated",de);U1(a.value,W.value),O("select")}function T(Bt){for(const de of Bt.features)V1(a.value,"deleted",de);U1(a.value,W.value),O("select")}y9(a.value,y);const P={add:hp,delete:sb,update:B5,save:x5,discard:Cm,close:Cm,draw:C5},L=$e("");function O(Bt){switch(o(),L.value=Bt,Bt){case"select":case"delete":m();break}}const W=rn(()=>C9(a.value));function H(Bt){c2(a.value,W.value),h2(a.value,W.value,Bt)}const nt=rn(()=>A9(a.value)),lt=rn(()=>I9(a.value)),K=rn(()=>w9(a.value)),$=rn(()=>nt.value);function yt(){rM(a.value,W.value)}function Rt(){x9(a.value)}function Ct(){_9(a.value),o()}async function Et(Bt){const de=M9(a.value),bn=E9(a.value),_e=await(de.getFeatures&&de.getFeatures([Bt.lngLat.lng,Bt.lngLat.lat]))||[];switch(L.value){case"select":{const He=bn==null?void 0:bn.add({type:"FeatureCollection",features:_e});He&&He.length>0&&(c2(a.value,W.value),h2(a.value,W.value,"direct_select",void 0,{featureId:He[0]}));break}case"delete":{bn==null||bn.delete(bn.getSelectedIds()),de.deleteFeatures&&de.deleteFeatures(_e),de.reset&&de.reset();break}}}const Gt=$e(),kt=rn(()=>K.value.map(Bt=>typeof Bt=="string"?{id:Bt,name:U9[Bt]||Bt}:Bt));function Qt(){Gt.value&&Gt.value.close()}function Ut(Bt){if(K.value.length>1){Gt.value&&Gt.value.open(Bt);return}O("create"),H(K.value[0])}function Nt(){i&&aM(a.value,i)}return(Bt,de)=>(wt(),Ve(X(Ta),Sa(ha(X(h))),{btn:se(()=>[lt.value?(wt(),ce("div",R9,[$.value?(wt(),Ve(X(Im),{key:0,row:""},{default:se(()=>[jt(X(Tr),{onClick:de[0]||(de[0]=bn=>Rt())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.discard},null,8,["path"])]),_:1}),jt(X(Tr),{onClick:de[1]||(de[1]=bn=>yt())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.save},null,8,["path"])]),_:1})]),_:1})):(wt(),Ve(X(Im),{key:1,row:""},{default:se(()=>[jt(X(Tr),{onClick:de[2]||(de[2]=bn=>Ct())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.close},null,8,["path"])]),_:1}),jt(X(Tr),{active:L.value==="create",onClick:Ut},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.add},null,8,["path"])]),_:1},8,["active"]),jt(X(Tr),{active:L.value==="select",onClick:de[3]||(de[3]=bn=>O("select"))},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.update},null,8,["path"])]),_:1},8,["active"]),jt(X(Tr),{active:L.value==="delete",onClick:de[4]||(de[4]=bn=>O("delete"))},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.delete},null,8,["path"])]),_:1},8,["active"])]),_:1}))])):(wt(),ce("div",z9,[X(i)?(wt(),Ve(X(Tr),{key:0},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:P.draw,onClick:Nt},null,8,["path"])]),_:1})):gn("v-if",!0)]))]),default:se(()=>[jt(X(sM),{ref_key:"contextMenuRef",ref:Gt},{default:se(()=>[zt("ul",O9,[(wt(!0),ce(Mi,null,ja(kt.value,(bn,_e)=>(wt(),ce("li",{key:_e,onClick:Ho(He=>{O("create"),H(bn.id),Qt()},["stop"]),class:"context-menu__item"},[zt("span",{innerHTML:bn.name},null,8,F9)],8,B9))),128))])]),_:1},512)]),_:1},16))}}),V9=ii(N9,[["__scopeId","data-v-485dcf9b"]]),_m={POINT:"draw_point",LINE_STRING:"draw_line_string",POLYGON:"draw_polygon"},U9={[_m.POINT]:"draw point",[_m.LINE_STRING]:"draw line string",[_m.POLYGON]:"draw polygon"};class Zb extends fp{constructor(n={}){super("list",n,{show:!0,opacity:1}),this.setBuild(j9)}disableDelete(){return this.option.disable_delete=!0,this}disableOpacity(){return this.option.disabled_opacity=!0,this}setColor(n){return this.option.color=n,this}setGroup(n){return this.option.group=n,this}}function j9(t,n={}){const i=n.show!=null?n.show:!0,a=n.opacity!=null?n.opacity:1;let h;const m={setParent(o){h=o},get parent(){return h},index:0,id:t.id||Jh(),name:t.name,show:i,opacity:a,selected:!1,get metadata(){return t.metadata},color:n.color||"#38d4ff",config:{disable_delete:!1,disabled_opacity:!1,component:"layer-item"},multi:!1};return n.group&&(m.group=n.group),n.disable_delete&&(m.config.disable_delete=n.disable_delete),n.disabled_opacity&&(m.config.disabled_opacity=n.disabled_opacity),m}function fu(t){return t.parent}function H9(t,n,i){t.setLayerZoomRange(n.id,i["min-zoom"]||n["min-zoom"]||0,i["max-zoom"]||n["max-zoom"]||24);for(const a in i.paint)i.paint[a]!==n.paint[a]&&t.setPaintProperty(n.id,a,i.paint[a]);for(const a in i.layout)i.layout[a]!==n.layout[a]&&t.setLayoutProperty(n.id,a,i.layout[a])}const G9="Style Control",q9={area:"Area",line:"Line",point:"Point",symbol:"Symbol"},W9={title:"Layer",id:"Id",type:"Type","min-zoom":"Min zoom","max-zoom":"Max zoom"},Z9={title:"Style"},Y9={title:G9,add:q9,"back-to-default":"Back to default value",layer:W9,style:Z9},X9={color:"Color",width:"Width",opacity:"Opacity",blur:"Blur","stroke-color":"Stroke color","circle-pitch-alignment":"Pitch alignment","circle-pitch-scale":"Pitch scale","stroke-width":"Stroke width","stroke-opacity":"Stroke opacity"},K9={setting:X9},Q9={color:"Color",pattern:"Pattern",opacity:"Opacity",antialias:"Antialias",translate:"Translate","fill-antialias":"Antialias","fill-pattern":"Pattern","fill-outline-color":"Outline color"},$9={setting:Q9},J9={color:"Color",pattern:"Pattern",opacity:"Opacity",width:"Width",cap:"Cap",join:"Join","round-limit":"Round limit","miter-limit":"Miter limit","dash-array":"Dash array","grap-width":"Grap width",blur:"Blur",offset:"Offset",translate:"Translate","translate-anchor":"Translate anchor"},tN={setting:J9},eN={"raster-brightness-max":"Max brightness","raster-brightness-min":"Min brightness","raster-contrast":"Contrast","raster-fade-duration":"Fade duration","raster-opacity":"Opacity","raster-hue-rotate":"Hue rotate","raster-resampling":"Resampling","raster-saturation":"Saturation"},nN={setting:eN},iN={text:"Text",icon:"Icon",position:"Position",placement:"Placement"},rN={"text-field":"Text field","text-color":"Color","text-size":"Size","text-opacity":"Opacity","text-transform":"Transform","text-letter-spacing":"Letter spacing","text-line-height":"Line height","text-max-width":"Max width","text-halo-blur":"Halo blur","text-halo-width":"Halo width","text-halo-color":"Halo color","icon-image":"Image","icon-size":"Size","icon-opacity":"Opacity","icon-text-fit":"Fill icon to text"},oN={tab:iN,setting:rN},aN={class:"layer-control__title"},sN={class:"style-control"},lN=tr({__name:"style-control",props:{item:{},option:{}},emits:["close"],setup(t,{emit:n}){const i=n,a=t,{mapId:h,callMap:m}=Io(),{trans:o,setLocale:y}=fa(h.value);y({map:{"style-control":Y9},"circle-style":K9,"line-style":tN,"fill-style":$9,"symbol-style":oN,"raster-style":nN});const[x,M]=rd(!1),T=$e(),P=$e(void 0);let L=xv("");Hl(()=>{M(!0),P.value=void 0,gu(()=>{const H=fu(a.item);P.value=H.getView("map"),T.value=P.value.getValue(),L.value=P.value.getComponentUpdate()})});const O=()=>{P.value=void 0,T.value=void 0,i("close")},W=H=>{P.value&&m(nt=>{P.value&&(P.value.updateValue(nt,H),T.value=P.value.getValue())})};return(H,nt)=>(wt(),Ve(X(Ta),Sa(ha(H.$attrs)),{draggable:se(lt=>[X(L)?(wt(),Ve(X(BI),mr({key:0},lt,{right:"",show:X(x),"onUpdate:show":nt[1]||(nt[1]=K=>Ea(x)?x.value=K:null),onClose:O}),{title:se(()=>[zt("span",aN,oi(X(o)("map.style-control.title")),1)]),default:se(()=>[zt("div",sN,[(wt(),Ve(lh(X(L)()),{modelValue:T.value,"onUpdate:modelValue":nt[0]||(nt[0]=K=>T.value=K),onUpdateStyle:W,trans:X(o),mapId:X(h)},null,40,["modelValue","trans","mapId"]))])]),_:2},1040,["show"])):gn("v-if",!0)]),_:1},16))}}),uN={class:"multi-style-edit-container"},cN={class:"tab-container"},hN={class:"tab-item"},fN=["disabled"],pN={key:0,class:"style-container"},dN={class:"add-style-container"},mN={key:1,class:"style-container"},gN=tr({__name:"multi-style",props:$h({trans:{required:!0},mapId:{required:!0}},{modelValue:{required:!0,default:()=>[]},modelModifiers:{}}),emits:$h(["input","update-style","close"],["update:modelValue"]),setup(t,{emit:n}){const i=n,a=uh(t,"modelValue");hl(a,()=>{!x.value&&a.value.length>0&&(x.value=a.value[a.value.length-1].id)});const h=H=>{x.value=void 0,gu(()=>{x.value=H})},m=(H,nt)=>{i("update-style",{type:"update-one-layer",layer:H,index:a.value.findIndex(lt=>lt.id===nt)})},o=H=>{x.value=void 0,i("update-style",{type:"add-one-layer",layer:new F0().setStyleType(H).setColor("#fff").build()}),W(!1)},y=H=>{let nt=a.value.findIndex(lt=>lt.id===H);a.value[nt]&&(x.value=void 0,i("update-style",{type:"remove-one-layer",index:nt,layer:a.value[nt]}),a.value.splice(nt,1),a.value[0]&&h(a.value[0].id))},x=$e(a.value[0].id),M=rn(()=>a.value.map((H,nt)=>({text:`#${nt+1}`,value:H.id}))),T=rn(()=>a.value.find(H=>H.id===x.value)),P={delete:km,create:hp,close:Cm},[L,O]=rd(!1),W=H=>{O(H)};return(H,nt)=>{const lt=ih("input-select"),K=ih("SvgIcon"),$=ih("base-button"),yt=ih("SingleStyle");return wt(),ce("div",uN,[zt("div",cN,[zt("div",hN,[jt(lt,{modelValue:x.value,"onUpdate:modelValue":h,items:M.value},null,8,["modelValue","items"])]),zt("div",{class:"tab-item tab-add clickable",onClick:nt[0]||(nt[0]=Rt=>y(x.value)),disabled:!x.value},[zt("div",null,[jt(K,{size:"14",type:"mdi",path:P.delete,disabled:!x.value},null,8,["path","disabled"])])],8,fN),X(L)?(wt(),ce("div",{key:1,class:"tab-item tab-add clickable",onClick:nt[2]||(nt[2]=Rt=>W(!1))},[jt(K,{size:"14",type:"mdi",path:P.close},null,8,["path"])])):(wt(),ce("div",{key:0,class:"tab-item tab-add clickable",onClick:nt[1]||(nt[1]=Rt=>W(!0))},[zt("div",null,[jt(K,{size:"14",type:"mdi",path:P.create},null,8,["path"])])]))]),X(L)?(wt(),ce("div",pN,[zt("div",dN,[jt($,{onClick:nt[3]||(nt[3]=Rt=>o("area"))},{default:se(()=>[Va(oi(t.trans("map.style-control.add.area")),1)]),_:1}),jt($,{onClick:nt[4]||(nt[4]=Rt=>o("line"))},{default:se(()=>[Va(oi(t.trans("map.style-control.add.line")),1)]),_:1}),jt($,{onClick:nt[5]||(nt[5]=Rt=>o("point"))},{default:se(()=>[Va(oi(t.trans("map.style-control.add.point")),1)]),_:1}),jt($,{onClick:nt[6]||(nt[6]=Rt=>o("symbol"))},{default:se(()=>[Va(oi(t.trans("map.style-control.add.symbol")),1)]),_:1})])])):x.value?(wt(),ce("div",mN,[jt(yt,{modelValue:T.value,trans:t.trans,mapId:t.mapId,onUpdateStyle:nt[7]||(nt[7]=Rt=>m(Rt,x.value))},null,8,["modelValue","trans","mapId"])])):gn("v-if",!0)])}}});class vN extends Om{constructor(n){super(),this.info=Object.assign({metadata:{}},n)}get metadata(){return this.info?this.info.metadata:{}}}class yN extends vN{constructor(n){super(n),this.layers=n.layers,this.source=n.source,this.layers.forEach((i,a)=>{i.id||(i.id=`${this._id}-${a}`)}),this.source&&!this.source.id&&(this.source.id=this._id),this.runAfterSetParent=()=>{if(this.parent){const i=this.parent.getView("source"),a=i?i.id:null;(!this.source||!this.source.data)&&(this.source={id:a,data:i.getMapboxSource()})}}}getBeforeId(){return this.layers[0].id}getAllLayerIds(){return this.layers.map(n=>n.id)}addToMap(n,i){this.layers.forEach(a=>{n.getLayer(a.id)||(!a.source&&this.source&&(a.source=this.source.id),!a.source&&this.source.id&&(a.source=this.source.id),n.addLayer(a,i))})}removeFromMap(n){this.layers.forEach(i=>{n.getLayer(i.id)&&n.removeLayer(i.id)})}moveLayer(n,i){this.layers.forEach(a=>{n.getLayer(a.id)&&n.moveLayer(a.id,i)})}toggleShow(n,i){this.layers.forEach(a=>{n.getLayer(a.id)&&n.setLayoutProperty(a.id,"visibility",i?"visible":"none")})}setOpacity(n,i){this.layers.forEach(a=>{if(n.getLayer(a.id)){const h=a.type=="symbol"?"icon-opacity":`${a.type}-opacity`;n.setPaintProperty(a.id,h,i)}})}getValue(){return Mx(this.layers)}getComponentUpdate(){return()=>gN}updateValue(n,i){const{type:a,index:h}=i;let{layer:m}=i;switch(a){case"update-one-layer":H9(n,this.layers[h],m),this.layers[h]=Mx(Object.assign({},this.layers[h],m));break;case"add-one-layer":m=Object.assign({},{id:`${this._id}-${this.layers.length}`,source:this.source.id},m),n.addLayer(m),this.layers.push(m);break;case"remove-one-layer":n.getLayer(m.id)&&n.removeLayer(m.id),this.layers.splice(h,1);break}}}class uM extends Om{constructor(){super(),this.bounds=[-180,-85.051129,180,85.051129],this.runAfterSetParent=()=>{this.bounds&&this.parent&&(this.parent.metadata.bounds=this.bounds)}}getAll(){}setData(n){}setBounds(n){this.bounds=n,this.parent&&(this.parent.metadata.bounds=n)}addToMap(n){this.id&&!n.getSource(this.id)&&n.addSource(this.id,this.getMapboxSource())}removeFromMap(n){this.id&&n.getSource(this.id)&&n.removeSource(this.id)}getMapboxSource(){return{type:"geojson"}}}class _N extends uM{constructor(n={}){super(),this.option=n,this.option.bounds&&this.setBounds(this.option.bounds)}updateForMap(){}getMapboxSource(){return{type:"raster",...this.option,bounds:this.bounds||[-180,-85.051129,180,85.051129]}}}class cM extends fp{constructor(n={}){super("source",n),this.setBuild(()=>new _N(this.option))}setTiles(n){return this.option.tiles=n,this}setMaxzoom(n){return this.option.maxzoom=n,this}setMinzoom(n){return this.option.minzoom=n,this}setScheme(n){return this.option.scheme=n,this}setTileSize(n){return this.option.tileSize=n,this}setBounds(n){return this.option.bounds=n,this}setUrl(n){return this.option.url=n,this}}class xN extends fp{constructor(n={}){super("source",n),this.setBuild(()=>new bN(this.geojson,this.option))}setData(n){return this.geojson=n,this}}class bN extends uM{constructor(n,i={}){super(),this.field_id="id",this.setData(n),this.option=i}getMapboxSource(){return{type:"geojson",data:this.getAll()}}updateForMap(n){const i=n.getSource(this.id);i&&i.setData(this.geojson||{type:"FeatureCollection",features:[]})}setData(n){if(!n)return;typeof n=="string"&&(n=JSON.parse(n));let i;n.type==="FeatureCollection"?i=n:n.type==="Feature"?i={type:"FeatureCollection",features:[n]}:i={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]},this.geojson=i,this.setBounds(Sm(n))}getAll(){return this.geojson}}class w_ extends fp{constructor(n={}){super("map",n),this.setBuild((i,a)=>new yN(a))}setLayers(n){return this.option.layers=n,this}setLayer(n){return this.option.layers=[Object.assign({layout:{},paint:{}},n)],this}setSource(n){return this.option.source=n,this}setForLayer(n){return n.getView("action").addAction({id:"editable",component:()=>lN,menu:{id:"editable",location:"menu",name:"edit style",type:"item",icon:I5,order:2}}),this}}class hM{build(){return{type:"raster"}}}class F0{constructor(){this.type="point"}setColor(n){return this.color=n,this}setStyleType(n){return this.type=n,this}build(){return AN(this.type,this.color)}}const AN=(t,n)=>{switch(t){case"point":return{layout:{visibility:"visible"},type:"circle",paint:{"circle-color":n||h0(),"circle-radius":6}};case"line":return{layout:{visibility:"visible"},type:"line",paint:{"line-color":n||h0(),"line-width":4}};case"area":return{layout:{visibility:"visible"},type:"fill",paint:{"fill-color":n||h0()}};case"symbol":return{layout:{visibility:"visible"},type:"symbol",paint:{}};default:throw new Error("Invalid type: "+t)}},wN=tr({__name:"toggle-show",props:{item:{}},setup(t){const n=t,i={show:ub,hide:cb},a=rn(()=>n.item.show);return(h,m)=>a.value?(wt(),Ve(X(Nn),{key:0,size:"14",type:"mdi",path:i.show},null,8,["path"])):(wt(),Ve(X(Nn),{key:1,size:"14",type:"mdi",path:i.hide},null,8,["path"]))}});class CN extends fp{constructor(n={actions:[]}){super("action",n),this.setBuild((i,a)=>new IN(i,a))}addActions(n){return this.option.actions.push(...n),this}addAction(n){const i=this.option.actions.findIndex(a=>a.id===n.id);return i>=0&&this.option.actions.splice(i,1),n&&this.option.actions.push(n),this}}class IN extends Om{constructor(n,i={actions:[]}){super(),this.menu_cache={},this.layer=n,this.option=i,this.resetCacheMenu()}get menus(){return this.option.actions.reduce((n,i)=>(i.menu&&(i.menu.type=="item"&&(i.menu.id=i.id),n.push(i.menu)),n),[])}call(n,i){const a=this.menu_cache[n];this.parent&&a.menu.type=="item"&&(a.component?this.layer.getView("component").setFromAction(a):a.menu.click&&a.menu.click(this.parent,i))}get(n){return this.menu_cache[n]}addActions(n){return this.option.actions.push(...n),this.resetCacheMenu(),this}addAction(n){if(n){const i=this.option.actions.findIndex(a=>a.id===n.id);i>=0&&this.option.actions.splice(i,1),this.option.actions.push(n)}return this.resetCacheMenu(),this}updateAction(n){const i=this.option.actions.findIndex(a=>a.id===n.id);return i>=0&&(this.option.actions[i]=n,this.resetCacheMenu()),this.parent?this:this}resetCacheMenu(){this.menu_cache=this.option.actions.reduce((n,i)=>(n[i.id]=i,n),{})}}function Yb(){return{id:"to-bound",type:"to-bound",menu:{id:"to-bound",location:"extra",type:"item",name:"Fly to",icon:wv}}}function Xb(){return{id:"toggle-show",type:"toggle-show",menu:{id:"toggle-show",location:"extra",type:"item",name:"Fly to",icon:()=>wN}}}function MN(t){return{all:t=t||new Map,on:function(n,i){var a=t.get(n);a?a.push(i):t.set(n,[i])},off:function(n,i){var a=t.get(n);a&&(i?a.splice(a.indexOf(i)>>>0,1):t.set(n,[]))},emit:function(n,i){var a=t.get(n);a&&a.slice().map(function(h){h(i)}),(a=t.get("*"))&&a.slice().map(function(h){h(n,i)})}}}class EN{constructor(){this.views={}}addView(n,i){return this.views[n]=i,this}getView(n){return this.views[n]}runWithNameFunction(n,...i){const a=[];let{source:h,...m}=this.views;return n==="addToMap"?a.push(h[n](...i)):n!=="removeFromMap"&&(m=this.views,h=void 0),SN(m,o=>{o[n]&&a.push(o[n](...i))},this),n==="removeFromMap"&&a.push(h[n](...i)),Promise.all(a)}}function SN(t,n=a=>{},i){return Promise.all(Object.keys(t).map(a=>{if(Object.hasOwnProperty.call(t,a))return n.bind(i)(t[a])}))}class Kb extends Cb{constructor(){super(),this.eventBus=MN(),this.info={metadata:{}},this._view=new EN}get metadata(){return this.info.metadata}get name(){return this.info.name}async run(n,i,...a){return this._view.runWithNameFunction(n,i,...a)}async addToMap(n,...i){return this._view.runWithNameFunction("addToMap",n,...i)}async removeFromMap(n,...i){return this._view.runWithNameFunction("removeFromMap",n,...i)}async updateForMap(n,...i){return this._view.runWithNameFunction("updateForMap",n,...i)}setInfo(n){return n.metadata==null?n.metadata={loading:!1}:n.metadata.loading==null&&(n.metadata.loading=!1),this.info=n,this}setView(n,i){return this._view.addView(n,i),this}getView(n){return this._view.getView(n)}emit(n,i){return this.eventBus.emit(n,i),this}off(n,i){return this.eventBus.off(n,i),this}on(n,i){return this.eventBus.on(n,i),this}}const TN={style:{"min-width":"55px"}},PN={class:"btn-copy"},LN={__name:"table-td-copy",props:{value:{}},setup(t){const{copy:n}=s8({}),i={copy:_5};return(a,h)=>(wt(),ce("tr",null,[qn(a.$slots,"default",{},void 0,!0),zt("td",TN,[zt("div",PN,[jt(X(id),{onClick:h[0]||(h[0]=m=>X(n)(t.value))},{default:se(()=>[jt(X(Nn),{path:i.copy,size:"14",type:"mdi"},null,8,["path"])]),_:1})])])]))}},kN=ii(LN,[["__scopeId","data-v-6c9750b9"]]),DN={style:{"min-width":"60px"}},RN={key:1,colspan:"2"},zN={__name:"table-td-layer",props:{label:String,layer:{},field:{}},setup(t){const n=t,i=fu(n.layer),a=rn(()=>n.field.value instanceof Function?n.field.value(i):i[n.field.value]);return(h,m)=>(wt(),Ve(kN,{value:a.value},{default:se(()=>[t.field.inline?(wt(),ce("td",RN,[jt(X(RI),{readonly:"",rows:"10",modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=o=>a.value=o),label:t.label},null,8,["modelValue","label"])])):(wt(),ce(Mi,{key:0},[zt("td",DN,oi(t.label),1),zt("td",null,oi(a.value),1)],64))]),_:1},8,["value"]))}},ON=ii(zN,[["__scopeId","data-v-2c68689b"]]),BN={class:"table-show-info"},FN={name:"detail-layer-info"},NN=Object.assign(FN,{props:{item:{},option:{default:()=>({fields:[]})}},emits:["close"],setup(t,{emit:n}){const{mapId:i}=Io(),{trans:a}=fa(i.value),h=n;function m(o){o||h("close")}return(o,y)=>(wt(),Ve(X(Ta),Sa(ha(o.$attrs)),{draggable:se(x=>[jt(X(af),mr(x,{show:"","onUpdate:show":m,width:400}),{title:se(()=>[Va(oi(X(a)("map.layer-control.info.title")),1)]),default:se(()=>[zt("div",BN,[zt("table",null,[zt("tbody",null,[(wt(!0),ce(Mi,null,ja(t.option.fields,(M,T)=>(wt(),Ve(ON,{field:M,label:M.trans?X(a)(M.trans):M.text,layer:t.item,key:T},null,8,["field","label","layer"]))),128))])])])]),_:2},1040)]),_:1},16))}}),VN=ii(NN,[["__scopeId","data-v-9fdce074"]]),H1="show_info";class Qb extends fp{constructor({fields:n}){super(H1,{fields:n})}setForLayer(n){return n.getView("action").addAction({id:H1,component:()=>VN,menu:{id:H1,location:"menu",name:"info",type:"item",icon:L5},option:this.option}),this}}const UN="component";class jN{constructor(){this.key=UN}build(n){return new HN(n)}}class HN extends Om{constructor(n){super(),this.components=[],this.layer=n}add(n){return this.components.push(n),this}remove(n){return this.components=this.components.filter(i=>i.id!==n.id),this}removeFromMap(){this.components=[]}setFromAction(n){const i=n.id;if(!this.components.find(a=>a.id==i))return this.layer.emit("add-component",{layer:this.layer,component:{component:n.component,option:n.option,id:i}}),this.add({id:i}),this}}function $b(t,n,i={}){const{builds:a,actions:h}=n;let{builds:m=[]}=i;return a&&(m=[...a,...m]),m.unshift(new CN({actions:h})),m.unshift(new jN),m.forEach(o=>{if(o.setForLayer&&o.setForLayer(t),o.build){const y=o.build(t,o.option);y.setParent(t),t.setView(o.key,y)}}),t}function fM(t){const n=new Kb,{name:i,tiles:a,bounds:h}=t;n.setInfo({name:i,metadata:{}});const m=[new cM().setTiles(a).setBounds(h),new Zb,new w_().setLayer(new hM().build()),new Qb({fields:[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:y=>{const x=y.metadata.bounds;return x&&`${x[0]}, ${x[1]}, ${x[2]},${x[3]}`}},{trans:"map.layer-control.field.tiles",value:y=>{var x;return(x=y.getView("source").option.tiles)==null?void 0:x.join(`,
`)}}]})],o=[Yb(),Xb()];return $b(n,{builds:m,actions:o},t)}function GN(t){const{name:n,url:i}=t,a=new Kb;a.setInfo({name:n,metadata:{}});const h=[new cM().setUrl(i),new Zb,new w_().setLayer(new hM().build()),new Qb({fields:[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:o=>{const y=o.metadata.bounds;return y&&`${y[0]}, ${y[1]}, ${y[2]},${y[3]}`}},{trans:"map.layer-control.field.url",value:o=>o.getView("source").option.url,inline:!0}]})],m=[Yb(),Xb()];return $b(a,{builds:h,actions:m},t)}const qN="identify";class WN extends fp{constructor(n={}){super(qN,n),this.setBuild((i,a)=>new ZN(a))}setFieldName(n="name"){return this.option.field_name=n,this}setFieldId(n="id"){return this.option.field_id=n,this}}class ZN extends Om{constructor(n={}){super(),this.option=n}get name(){var n;return((n=this.parent)==null?void 0:n.info.name)||""}get config(){const n={field_name:"name",field_id:"id"};return this.option.field_name&&(n.field_name=this.option.field_name),this.option.field_id&&(n.field_id=this.option.field_id),n}}function pM(t){const{name:n,geojson:i,type:a}=t;let{color:h}=t;const m=new Kb;m.setInfo({name:n,metadata:{}}),h=h||h0();const o=[new xN().setData(i),new Zb().setColor(h),new WN,new Qb({fields:[{trans:"map.layer-control.field.name",value:"name"},{trans:"map.layer-control.field.bound.title",value:x=>{const M=x.metadata.bounds;return M&&`${M[0]}, ${M[1]}, ${M[2]},${M[3]}`}},{trans:"map.layer-control.field.geojson",value:x=>{const M=x.getView("source").geojson;return JSON.stringify(M,void 0,2)},inline:!0}]})];a&&o.push(new w_().setLayer(new F0().setStyleType(a).setColor(h).build()));const y=[Yb(),Xb()];return $b(m,{builds:o,actions:y},t)}const Fm="layer";function YN(t){rf(t,Fm,{layers:{},layerIds:$e([])})}sd(Fm,YN);async function Px(t,n){const i=ua(t,Fm);i.layers[n.id]=n,i.layerIds.value.push(n.id);const a=n.getView("list");a&&(a.index=i.layerIds.value.length),du.actions.getMap(t,async h=>{n.addToMap(h)})}function G1(t,n){const i=ua(t,Fm);du.actions.getMap(t,async a=>{n.removeFromMap(a)}),delete i.layers[n.id],i.layerIds.value=i.layerIds.value.filter(a=>a!=n.id)}function Jb(t,n){const i=ua(t,Fm),a=[];return i.layerIds.value.forEach(h=>{const m=i.layers[h];if(m){const o=m.getView(n);o&&a.push(o)}}),a}function XN(t){return ua(t,Fm).layerIds}const KN={},QN={class:"map-row"};function $N(t,n,i,a,h,m){return wt(),ce("div",QN,[qn(t.$slots,"default")])}const dM=ii(KN,[["render",$N]]),JN={class:"map-row"},tV={class:"map-col-12"},eV={__name:"xyz-json",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=uh(t,"modelValue"),{mapId:i}=Io(),{trans:a}=fa(i.value);return(h,m)=>(wt(),ce("div",JN,[qn(h.$slots,"default"),zt("div",tV,[jt(X(la),{modelValue:n.value.url,"onUpdate:modelValue":m[0]||(m[0]=o=>n.value.url=o),label:X(a)("map.layer-control.field.url")},null,8,["modelValue","label"])])]))}},nV={class:"map-row"},iV={class:"map-col-12"},rV={class:"map-col-6"},oV={class:"map-col-6"},aV={class:"map-col-6"},sV={class:"map-col-6"},lV={class:"map-col-6"},uV={class:"map-col-6"},cV={__name:"xyz-url",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const n=uh(t,"modelValue"),{mapId:i}=Io(),{trans:a}=fa(i.value);return(h,m)=>(wt(),ce("div",nV,[qn(h.$slots,"default"),zt("div",iV,[jt(X(la),{modelValue:n.value.url,"onUpdate:modelValue":m[0]||(m[0]=o=>n.value.url=o),label:X(a)("map.layer-control.field.url")},null,8,["modelValue","label"])]),zt("div",rV,[jt(X(la),{modelValue:n.value.minzoom,"onUpdate:modelValue":m[1]||(m[1]=o=>n.value.minzoom=o),label:X(a)("map.layer-control.field.minzoom")},null,8,["modelValue","label"])]),zt("div",oV,[jt(X(la),{modelValue:n.value.maxzoom,"onUpdate:modelValue":m[2]||(m[2]=o=>n.value.maxzoom=o),label:X(a)("map.layer-control.field.maxzoom")},null,8,["modelValue","label"])]),n.value.bounds?(wt(),ce(Mi,{key:0},[zt("div",aV,[jt(X(la),{modelValue:n.value.bounds[0],"onUpdate:modelValue":m[3]||(m[3]=o=>n.value.bounds[0]=o),label:X(a)("map.layer-control.field.bound.minx")},null,8,["modelValue","label"])]),zt("div",sV,[jt(X(la),{modelValue:n.value.bounds[1],"onUpdate:modelValue":m[4]||(m[4]=o=>n.value.bounds[1]=o),label:X(a)("map.layer-control.field.bound.miny")},null,8,["modelValue","label"])]),zt("div",lV,[jt(X(la),{modelValue:n.value.bounds[2],"onUpdate:modelValue":m[5]||(m[5]=o=>n.value.bounds[2]=o),label:X(a)("map.layer-control.field.bound.maxx")},null,8,["modelValue","label"])]),zt("div",uV,[jt(X(la),{modelValue:n.value.bounds[3],"onUpdate:modelValue":m[6]||(m[6]=o=>n.value.bounds[3]=o),label:X(a)("map.layer-control.field.bound.maxy")},null,8,["modelValue","label"])])],64)):gn("v-if",!0)]))}},hV={multiple:!0,accept:"*",reset:!1,directory:!1};function fV(t={}){const{document:n=Rb}=t,i=$e(null),{on:a,trigger:h}=gD();let m;n&&(m=n.createElement("input"),m.type="file",m.onchange=x=>{const M=x.target;i.value=M.files,h(i.value)});const o=()=>{i.value=null,m&&m.value&&(m.value="",h(null))},y=x=>{if(!m)return;const M={...hV,...t,...x};m.multiple=M.multiple,m.accept=M.accept,m.webkitdirectory=M.directory,BR(M,"capture")&&(m.capture=M.capture),M.reset&&o(),m.click()};return{files:X0(i),open:y,reset:o,onChange:a}}const pV=eb('<label class="ddf__label" for="upload-file" data-v-5a61e606><i class="ddf__label-inner" data-v-5a61e606><svg class="ddf__icon" viewBox="0 0 64 64" aria-hidden="true" data-v-5a61e606><path fill="currentColor" d="M51,27c-.374,0-.742.025-1.109.056a18,18,0,0,0-35.782,0C13.742,27.025,13.374,27,13,27a13,13,0,0,0,0,26H51a13,13,0,0,0,0-26Z" data-v-5a61e606></path><path d="M43.764,41.354l-11-13a1.033,1.033,0,0,0-1.526,0l-11,13A1,1,0,0,0,21,43h7V59h8V43h7a1,1,0,0,0,.764-1.646Z" data-v-5a61e606></path></svg><span class="ddf__text" data-v-5a61e606> Drag and drop your files here </span><span class="ddf__subtext" data-v-5a61e606> or click to browse your files </span></i></label>',1),dV=[pV],mV=tr({__name:"index",props:{multiple:Boolean,accept:String},emits:["change"],setup(t,{emit:n}){const i=t,a=n,{onChange:h,open:m}=fV({multiple:i.multiple,accept:i.accept});h(M=>{M&&o(Array.from(M))});function o(M){M&&a("change",i.multiple?M:M[0])}const y=$e(),{isOverDropZone:x}=l8(y,o);return(M,T)=>(wt(),ce("div",{class:bs(["ddf__area",{ddf__active:X(x)}]),ref_key:"dropZoneRef",ref:y,onClick:T[0]||(T[0]=P=>X(m)())},dV,2))}}),gV=ii(mV,[["__scopeId","data-v-5a61e606"]]);function vV(t={}){const n=new yV;async function i(a,h={}){return n.read(a,Object.assign({},t,h))}return{read:i}}class yV{async read(n,i={}){const a=i.parser||this.getParser(n),h=i.type||"text",m=i.onSuccess,o=i.onError;try{let y=await f2.read(n,h);return a&&(y=await a.parse(y,n)),m&&m(y),y}catch(y){throw o&&o(y),y}}getParser(n){switch(f2.getExtension(n)){case"geojson":case"json":return new _V}}}class f2{static getExtension(n){return n.name.split(".").pop()}static async read(n,i){return new Promise((a,h)=>{const m=new window.FileReader;m.onload=o=>o.target&&a(o.target.result),m.onerror=o=>h(o),i==="text"?m.readAsText(n):i==="arraybuffer"?m.readAsArrayBuffer(n):i==="binary"?m.readAsDataURL(n):h(new Error(`Read file as ${i} is not available`))})}}class _V{parse(n,i){const a=JSON.parse(n);return Promise.resolve(this.toGeojson(a))}toGeojson(n){return n.crs,n}}const xV={class:"map-row"},bV={class:"map-col-12"},AV={class:"map-col-12"},wV={key:0,class:"map-col-12"},CV={__name:"geojson-upload",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(t){const{read:n}=vV(),i=["point","line","area"],a=uh(t,"modelValue"),h=$e(null),{mapId:m}=Io(),{trans:o}=fa(m.value);function y(x){n(x).then(M=>{a.value.geojson=M,h.value=M?JSON.stringify(M,null,2):""})}return(x,M)=>(wt(),ce("div",xV,[qn(x.$slots,"default"),zt("div",bV,[jt(X(Tv),{modelValue:a.value.type,"onUpdate:modelValue":M[0]||(M[0]=T=>a.value.type=T),items:i,label:X(o)("map.layer-control.field.type")},null,8,["modelValue","label"])]),zt("div",AV,[jt(X(gV),{onChange:y,accept:".json,.geojson"})]),h.value?(wt(),ce("div",wV,[jt(X(RI),{modelValue:h.value,rows:"4",readonly:""},null,8,["modelValue"])])):gn("v-if",!0)]))}};class tA{get default_value(){return{}}validate(n){return!!n.name}}class IV extends tA{get component(){return()=>CV}get default_value(){return{type:"point",geojson:null}}validate(n){return!(!n.name||!n.geojson||!n.type)}get create(){return n=>pM({...n})}}class MV extends tA{get component(){return()=>eV}validate(n){return!(!n.name||!n.url)}get create(){return n=>GN({...n})}}class EV extends tA{get component(){return()=>cV}get default_value(){return{bounds:[-180,-85.051129,180,85.051129],minzoom:0,maxzoom:24}}validate(n){return!(!n.name||!n.url)}get create(){return n=>fM({name:n.name,...n,tiles:[n.url]})}}const p2={"raster-url":"Raster url layer","raster-json":"Raster json layer",geojson:"Geojson layer"};class SV{constructor(n){this.setType(n)}setType(n){this.helper=TV.create(n)}get default_value(){return this.helper.default_value}get create(){return this.helper.create}get component(){return this.helper.component||dM}validate(n){return this.helper.validate(n)}}const TV={create(t){switch(t){case"raster-url":return new EV;case"raster-json":return new MV;case"geojson":return new IV;default:throw new Error("not support type: "+t)}}},PV={class:"create-control-container"},LV={class:"form-container"},kV={class:"map-col-12"},DV={class:"map-col-12"},RV={name:"create-layer-control"},zV=Object.assign(RV,{props:{show:Boolean},emits:["update:show"],setup(t,{emit:n}){const i=t,{mapId:a,moduleContainerProps:h,callMap:m}=Io(i),{trans:o}=fa(a.value),y=n,x=rn({get(){return i.show},set($){y("update:show",$)}}),M={type:"geojson"},T=$e(1),P=$e(()=>dM),L=new SV(M.type),O=$e({...M,config:{name:"",...L.default_value}}),W=Object.keys(p2).map($=>({value:$,text:p2[$]}));function H($){L.setType($),P.value=L.component,O.value={config:{name:O.value.config.name,...L.default_value},type:O.value.type}}function nt($){const yt=L.create;if(!yt||!L.validate($.config))return;let Rt=yt($.config);m(Ct=>{Px(Ct.id,Rt)}),lt()}function lt(){L.setType(M.type),O.value={...M,config:{name:"",...L.default_value}},T.value++}function K(){lt()}return Hl(()=>{H(O.value.type)}),($,yt)=>(wt(),Ve(X(Ta),Sa(ha(X(h))),{draggable:se(Rt=>[jt(X(af),mr({show:x.value,"onUpdate:show":yt[4]||(yt[4]=Ct=>x.value=Ct)},Rt,{width:400,height:300,onClose:K,title:X(o)("map.layer-control.create.title")}),{default:se(()=>[zt("div",PV,[zt("div",LV,[(wt(),Ve(lh(P.value()),{modelValue:O.value.config,"onUpdate:modelValue":yt[2]||(yt[2]=Ct=>O.value.config=Ct),class:"create-control-form",key:T.value},{default:se(()=>[zt("div",kV,[jt(X(la),{modelValue:O.value.config.name,"onUpdate:modelValue":yt[0]||(yt[0]=Ct=>O.value.config.name=Ct),label:X(o)("map.layer-control.field.name")},null,8,["modelValue","label"])]),zt("div",DV,[jt(X(Tv),{modelValue:O.value.type,"onUpdate:modelValue":[yt[1]||(yt[1]=Ct=>O.value.type=Ct),H],items:X(W),label:X(o)("map.layer-control.field.type")},null,8,["modelValue","items","label"])])]),_:1},8,["modelValue"]))]),jt(X(id),{onClick:yt[3]||(yt[3]=Ct=>nt(O.value)),class:"btn-container"},{default:se(()=>[Va(oi(X(o)("map.layer-control.create-btn")),1)]),_:1})])]),_:2},1040,["show","title"])]),_:1},16))}}),OV=ii(zV,[["__scopeId","data-v-05cb6f44"]]),BV={components:{SvgIcon:Nn},props:{isSelected:Boolean,disabledDrag:Boolean,item:{type:Object,default:()=>({})}},computed:{path(){return{draggable:p5}}}},FV={class:"draggable-handle__icon"},NV={class:"draggale-item__info"};function VV(t,n,i,a,h,m){const o=ih("SvgIcon");return wt(),ce("div",{class:bs(["draggale-item",{"draggale-item-active":i.isSelected}])},[i.disabledDrag?gn("v-if",!0):(wt(),ce("div",{key:0,class:"draggable-handle",style:Ua({background:i.item.color})},[zt("div",FV,[jt(o,{size:"14",type:"mdi",path:m.path.draggable},null,8,["path"])])],4)),zt("div",NV,[qn(t.$slots,"default",{},void 0,!0)])],2)}const Lx=ii(BV,[["render",VV],["__scopeId","data-v-c77f1098"]]);/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function d2(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(t,h).enumerable})),i.push.apply(i,a)}return i}function hh(t){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?d2(Object(i),!0).forEach(function(a){UV(t,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d2(Object(i)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(i,a))})}return t}function f0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f0=function(n){return typeof n}:f0=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f0(t)}function UV(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function ef(){return ef=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},ef.apply(this,arguments)}function jV(t,n){if(t==null)return{};var i={},a=Object.keys(t),h,m;for(m=0;m<a.length;m++)h=a[m],!(n.indexOf(h)>=0)&&(i[h]=t[h]);return i}function HV(t,n){if(t==null)return{};var i=jV(t,n),a,h;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(t);for(h=0;h<m.length;h++)a=m[h],!(n.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var GV="1.15.2";function Kh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var sf=Kh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Pv=Kh(/Edge/i),m2=Kh(/firefox/i),Qg=Kh(/safari/i)&&!Kh(/chrome/i)&&!Kh(/android/i),mM=Kh(/iP(ad|od|hone)/i),gM=Kh(/chrome/i)&&Kh(/android/i),vM={capture:!1,passive:!1};function Br(t,n,i){t.addEventListener(n,i,!sf&&vM)}function _r(t,n,i){t.removeEventListener(n,i,!sf&&vM)}function N0(t,n){if(n){if(n[0]===">"&&(n=n.substring(1)),t)try{if(t.matches)return t.matches(n);if(t.msMatchesSelector)return t.msMatchesSelector(n);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch{return!1}return!1}}function qV(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Cc(t,n,i,a){if(t){i=i||document;do{if(n!=null&&(n[0]===">"?t.parentNode===i&&N0(t,n):N0(t,n))||a&&t===i)return t;if(t===i)break}while(t=qV(t))}return null}var g2=/\s+/g;function uu(t,n,i){if(t&&n)if(t.classList)t.classList[i?"add":"remove"](n);else{var a=(" "+t.className+" ").replace(g2," ").replace(" "+n+" "," ");t.className=(a+(i?" "+n:"")).replace(g2," ")}}function vi(t,n,i){var a=t&&t.style;if(a){if(i===void 0)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),n===void 0?i:i[n];!(n in a)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),a[n]=i+(typeof i=="string"?"":"px")}}function xm(t,n){var i="";if(typeof t=="string")i=t;else do{var a=vi(t,"transform");a&&a!=="none"&&(i=a+" "+i)}while(!n&&(t=t.parentNode));var h=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return h&&new h(i)}function yM(t,n,i){if(t){var a=t.getElementsByTagName(n),h=0,m=a.length;if(i)for(;h<m;h++)i(a[h],h);return a}return[]}function ah(){var t=document.scrollingElement;return t||document.documentElement}function Ma(t,n,i,a,h){if(!(!t.getBoundingClientRect&&t!==window)){var m,o,y,x,M,T,P;if(t!==window&&t.parentNode&&t!==ah()?(m=t.getBoundingClientRect(),o=m.top,y=m.left,x=m.bottom,M=m.right,T=m.height,P=m.width):(o=0,y=0,x=window.innerHeight,M=window.innerWidth,T=window.innerHeight,P=window.innerWidth),(n||i)&&t!==window&&(h=h||t.parentNode,!sf))do if(h&&h.getBoundingClientRect&&(vi(h,"transform")!=="none"||i&&vi(h,"position")!=="static")){var L=h.getBoundingClientRect();o-=L.top+parseInt(vi(h,"border-top-width")),y-=L.left+parseInt(vi(h,"border-left-width")),x=o+m.height,M=y+m.width;break}while(h=h.parentNode);if(a&&t!==window){var O=xm(h||t),W=O&&O.a,H=O&&O.d;O&&(o/=H,y/=W,P/=W,T/=H,x=o+T,M=y+P)}return{top:o,left:y,bottom:x,right:M,width:P,height:T}}}function v2(t,n,i){for(var a=Kf(t,!0),h=Ma(t)[n];a;){var m=Ma(a)[i],o=void 0;if(o=h>=m,!o)return a;if(a===ah())break;a=Kf(a,!1)}return!1}function Tm(t,n,i,a){for(var h=0,m=0,o=t.children;m<o.length;){if(o[m].style.display!=="none"&&o[m]!==yi.ghost&&(a||o[m]!==yi.dragged)&&Cc(o[m],i.draggable,t,!1)){if(h===n)return o[m];h++}m++}return null}function eA(t,n){for(var i=t.lastElementChild;i&&(i===yi.ghost||vi(i,"display")==="none"||n&&!N0(i,n));)i=i.previousElementSibling;return i||null}function Xu(t,n){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==yi.clone&&(!n||N0(t,n))&&i++;return i}function y2(t){var n=0,i=0,a=ah();if(t)do{var h=xm(t),m=h.a,o=h.d;n+=t.scrollLeft*m,i+=t.scrollTop*o}while(t!==a&&(t=t.parentNode));return[n,i]}function WV(t,n){for(var i in t)if(t.hasOwnProperty(i)){for(var a in n)if(n.hasOwnProperty(a)&&n[a]===t[i][a])return Number(i)}return-1}function Kf(t,n){if(!t||!t.getBoundingClientRect)return ah();var i=t,a=!1;do if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var h=vi(i);if(i.clientWidth<i.scrollWidth&&(h.overflowX=="auto"||h.overflowX=="scroll")||i.clientHeight<i.scrollHeight&&(h.overflowY=="auto"||h.overflowY=="scroll")){if(!i.getBoundingClientRect||i===document.body)return ah();if(a||n)return i;a=!0}}while(i=i.parentNode);return ah()}function ZV(t,n){if(t&&n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function q1(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}var $g;function _M(t,n){return function(){if(!$g){var i=arguments,a=this;i.length===1?t.call(a,i[0]):t.apply(a,i),$g=setTimeout(function(){$g=void 0},n)}}}function YV(){clearTimeout($g),$g=void 0}function xM(t,n,i){t.scrollLeft+=n,t.scrollTop+=i}function bM(t){var n=window.Polymer,i=window.jQuery||window.Zepto;return n&&n.dom?n.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function AM(t,n,i){var a={};return Array.from(t.children).forEach(function(h){var m,o,y,x;if(!(!Cc(h,n.draggable,t,!1)||h.animated||h===i)){var M=Ma(h);a.left=Math.min((m=a.left)!==null&&m!==void 0?m:1/0,M.left),a.top=Math.min((o=a.top)!==null&&o!==void 0?o:1/0,M.top),a.right=Math.max((y=a.right)!==null&&y!==void 0?y:-1/0,M.right),a.bottom=Math.max((x=a.bottom)!==null&&x!==void 0?x:-1/0,M.bottom)}}),a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}var pu="Sortable"+new Date().getTime();function XV(){var t=[],n;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var a=[].slice.call(this.el.children);a.forEach(function(h){if(!(vi(h,"display")==="none"||h===yi.ghost)){t.push({target:h,rect:Ma(h)});var m=hh({},t[t.length-1].rect);if(h.thisAnimationDuration){var o=xm(h,!0);o&&(m.top-=o.f,m.left-=o.e)}h.fromRect=m}})}},addAnimationState:function(a){t.push(a)},removeAnimationState:function(a){t.splice(WV(t,{target:a}),1)},animateAll:function(a){var h=this;if(!this.options.animation){clearTimeout(n),typeof a=="function"&&a();return}var m=!1,o=0;t.forEach(function(y){var x=0,M=y.target,T=M.fromRect,P=Ma(M),L=M.prevFromRect,O=M.prevToRect,W=y.rect,H=xm(M,!0);H&&(P.top-=H.f,P.left-=H.e),M.toRect=P,M.thisAnimationDuration&&q1(L,P)&&!q1(T,P)&&(W.top-P.top)/(W.left-P.left)===(T.top-P.top)/(T.left-P.left)&&(x=QV(W,L,O,h.options)),q1(P,T)||(M.prevFromRect=T,M.prevToRect=P,x||(x=h.options.animation),h.animate(M,W,P,x)),x&&(m=!0,o=Math.max(o,x),clearTimeout(M.animationResetTimer),M.animationResetTimer=setTimeout(function(){M.animationTime=0,M.prevFromRect=null,M.fromRect=null,M.prevToRect=null,M.thisAnimationDuration=null},x),M.thisAnimationDuration=x)}),clearTimeout(n),m?n=setTimeout(function(){typeof a=="function"&&a()},o):typeof a=="function"&&a(),t=[]},animate:function(a,h,m,o){if(o){vi(a,"transition",""),vi(a,"transform","");var y=xm(this.el),x=y&&y.a,M=y&&y.d,T=(h.left-m.left)/(x||1),P=(h.top-m.top)/(M||1);a.animatingX=!!T,a.animatingY=!!P,vi(a,"transform","translate3d("+T+"px,"+P+"px,0)"),this.forRepaintDummy=KV(a),vi(a,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),vi(a,"transform","translate3d(0,0,0)"),typeof a.animated=="number"&&clearTimeout(a.animated),a.animated=setTimeout(function(){vi(a,"transition",""),vi(a,"transform",""),a.animated=!1,a.animatingX=!1,a.animatingY=!1},o)}}}}function KV(t){return t.offsetWidth}function QV(t,n,i,a){return Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))/Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2))*a.animation}var im=[],W1={initializeByDefault:!0},Lv={mount:function(n){for(var i in W1)W1.hasOwnProperty(i)&&!(i in n)&&(n[i]=W1[i]);im.forEach(function(a){if(a.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),im.push(n)},pluginEvent:function(n,i,a){var h=this;this.eventCanceled=!1,a.cancel=function(){h.eventCanceled=!0};var m=n+"Global";im.forEach(function(o){i[o.pluginName]&&(i[o.pluginName][m]&&i[o.pluginName][m](hh({sortable:i},a)),i.options[o.pluginName]&&i[o.pluginName][n]&&i[o.pluginName][n](hh({sortable:i},a)))})},initializePlugins:function(n,i,a,h){im.forEach(function(y){var x=y.pluginName;if(!(!n.options[x]&&!y.initializeByDefault)){var M=new y(n,i,n.options);M.sortable=n,M.options=n.options,n[x]=M,ef(a,M.defaults)}});for(var m in n.options)if(n.options.hasOwnProperty(m)){var o=this.modifyOption(n,m,n.options[m]);typeof o<"u"&&(n.options[m]=o)}},getEventProperties:function(n,i){var a={};return im.forEach(function(h){typeof h.eventProperties=="function"&&ef(a,h.eventProperties.call(i[h.pluginName],n))}),a},modifyOption:function(n,i,a){var h;return im.forEach(function(m){n[m.pluginName]&&m.optionListeners&&typeof m.optionListeners[i]=="function"&&(h=m.optionListeners[i].call(n[m.pluginName],a))}),h}};function $V(t){var n=t.sortable,i=t.rootEl,a=t.name,h=t.targetEl,m=t.cloneEl,o=t.toEl,y=t.fromEl,x=t.oldIndex,M=t.newIndex,T=t.oldDraggableIndex,P=t.newDraggableIndex,L=t.originalEvent,O=t.putSortable,W=t.extraEventProperties;if(n=n||i&&i[pu],!!n){var H,nt=n.options,lt="on"+a.charAt(0).toUpperCase()+a.substr(1);window.CustomEvent&&!sf&&!Pv?H=new CustomEvent(a,{bubbles:!0,cancelable:!0}):(H=document.createEvent("Event"),H.initEvent(a,!0,!0)),H.to=o||i,H.from=y||i,H.item=h||i,H.clone=m,H.oldIndex=x,H.newIndex=M,H.oldDraggableIndex=T,H.newDraggableIndex=P,H.originalEvent=L,H.pullMode=O?O.lastPutMode:void 0;var K=hh(hh({},W),Lv.getEventProperties(a,n));for(var $ in K)H[$]=K[$];i&&i.dispatchEvent(H),nt[lt]&&nt[lt].call(n,H)}}var JV=["evt"],Bl=function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},h=a.evt,m=HV(a,JV);Lv.pluginEvent.bind(yi)(n,i,hh({dragEl:fn,parentEl:Qo,ghostEl:Bi,rootEl:Do,nextEl:Zp,lastDownEl:p0,cloneEl:Uo,cloneHidden:Yf,dragStarted:Lg,putSortable:ms,activeSortable:yi.active,originalEvent:h,oldIndex:fm,oldDraggableIndex:Jg,newIndex:cu,newDraggableIndex:Wf,hideGhostForTarget:MM,unhideGhostForTarget:EM,cloneNowHidden:function(){Yf=!0},cloneNowShown:function(){Yf=!1},dispatchSortableEvent:function(y){ll({sortable:i,name:y,originalEvent:h})}},m))};function ll(t){$V(hh({putSortable:ms,cloneEl:Uo,targetEl:fn,rootEl:Do,oldIndex:fm,oldDraggableIndex:Jg,newIndex:cu,newDraggableIndex:Wf},t))}var fn,Qo,Bi,Do,Zp,p0,Uo,Yf,fm,cu,Jg,Wf,$y,ms,sm=!1,V0=!1,U0=[],qp,wc,Z1,Y1,_2,x2,Lg,rm,tv,ev=!1,Jy=!1,d0,Fs,X1=[],kx=!1,j0=[],C_=typeof document<"u",t0=mM,b2=Pv||sf?"cssFloat":"float",tU=C_&&!gM&&!mM&&"draggable"in document.createElement("div"),wM=function(){if(C_){if(sf)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),CM=function(n,i){var a=vi(n),h=parseInt(a.width)-parseInt(a.paddingLeft)-parseInt(a.paddingRight)-parseInt(a.borderLeftWidth)-parseInt(a.borderRightWidth),m=Tm(n,0,i),o=Tm(n,1,i),y=m&&vi(m),x=o&&vi(o),M=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+Ma(m).width,T=x&&parseInt(x.marginLeft)+parseInt(x.marginRight)+Ma(o).width;if(a.display==="flex")return a.flexDirection==="column"||a.flexDirection==="column-reverse"?"vertical":"horizontal";if(a.display==="grid")return a.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(m&&y.float&&y.float!=="none"){var P=y.float==="left"?"left":"right";return o&&(x.clear==="both"||x.clear===P)?"vertical":"horizontal"}return m&&(y.display==="block"||y.display==="flex"||y.display==="table"||y.display==="grid"||M>=h&&a[b2]==="none"||o&&a[b2]==="none"&&M+T>h)?"vertical":"horizontal"},eU=function(n,i,a){var h=a?n.left:n.top,m=a?n.right:n.bottom,o=a?n.width:n.height,y=a?i.left:i.top,x=a?i.right:i.bottom,M=a?i.width:i.height;return h===y||m===x||h+o/2===y+M/2},nU=function(n,i){var a;return U0.some(function(h){var m=h[pu].options.emptyInsertThreshold;if(!(!m||eA(h))){var o=Ma(h),y=n>=o.left-m&&n<=o.right+m,x=i>=o.top-m&&i<=o.bottom+m;if(y&&x)return a=h}}),a},IM=function(n){function i(m,o){return function(y,x,M,T){var P=y.options.group.name&&x.options.group.name&&y.options.group.name===x.options.group.name;if(m==null&&(o||P))return!0;if(m==null||m===!1)return!1;if(o&&m==="clone")return m;if(typeof m=="function")return i(m(y,x,M,T),o)(y,x,M,T);var L=(o?y:x).options.group.name;return m===!0||typeof m=="string"&&m===L||m.join&&m.indexOf(L)>-1}}var a={},h=n.group;(!h||f0(h)!="object")&&(h={name:h}),a.name=h.name,a.checkPull=i(h.pull,!0),a.checkPut=i(h.put),a.revertClone=h.revertClone,n.group=a},MM=function(){!wM&&Bi&&vi(Bi,"display","none")},EM=function(){!wM&&Bi&&vi(Bi,"display","")};C_&&!gM&&document.addEventListener("click",function(t){if(V0)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),V0=!1,!1},!0);var Wp=function(n){if(fn){n=n.touches?n.touches[0]:n;var i=nU(n.clientX,n.clientY);if(i){var a={};for(var h in n)n.hasOwnProperty(h)&&(a[h]=n[h]);a.target=a.rootEl=i,a.preventDefault=void 0,a.stopPropagation=void 0,i[pu]._onDragOver(a)}}},iU=function(n){fn&&fn.parentNode[pu]._isOutsideThisEl(n.target)};function yi(t,n){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=n=ef({},n),t[pu]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return CM(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,y){o.setData("Text",y.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:yi.supportPointer!==!1&&"PointerEvent"in window&&!Qg,emptyInsertThreshold:5};Lv.initializePlugins(this,t,i);for(var a in i)!(a in n)&&(n[a]=i[a]);IM(n);for(var h in this)h.charAt(0)==="_"&&typeof this[h]=="function"&&(this[h]=this[h].bind(this));this.nativeDraggable=n.forceFallback?!1:tU,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Br(t,"pointerdown",this._onTapStart):(Br(t,"mousedown",this._onTapStart),Br(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Br(t,"dragover",this),Br(t,"dragenter",this)),U0.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),ef(this,XV())}yi.prototype={constructor:yi,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(rm=null)},_getDirection:function(n,i){return typeof this.options.direction=="function"?this.options.direction.call(this,n,i,fn):this.options.direction},_onTapStart:function(n){if(n.cancelable){var i=this,a=this.el,h=this.options,m=h.preventOnFilter,o=n.type,y=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,x=(y||n).target,M=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||x,T=h.filter;if(hU(a),!fn&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||h.disabled)&&!M.isContentEditable&&!(!this.nativeDraggable&&Qg&&x&&x.tagName.toUpperCase()==="SELECT")&&(x=Cc(x,h.draggable,a,!1),!(x&&x.animated)&&p0!==x)){if(fm=Xu(x),Jg=Xu(x,h.draggable),typeof T=="function"){if(T.call(this,n,x,this)){ll({sortable:i,rootEl:M,name:"filter",targetEl:x,toEl:a,fromEl:a}),Bl("filter",i,{evt:n}),m&&n.cancelable&&n.preventDefault();return}}else if(T&&(T=T.split(",").some(function(P){if(P=Cc(M,P.trim(),a,!1),P)return ll({sortable:i,rootEl:P,name:"filter",targetEl:x,fromEl:a,toEl:a}),Bl("filter",i,{evt:n}),!0}),T)){m&&n.cancelable&&n.preventDefault();return}h.handle&&!Cc(M,h.handle,a,!1)||this._prepareDragStart(n,y,x)}}},_prepareDragStart:function(n,i,a){var h=this,m=h.el,o=h.options,y=m.ownerDocument,x;if(a&&!fn&&a.parentNode===m){var M=Ma(a);if(Do=m,fn=a,Qo=fn.parentNode,Zp=fn.nextSibling,p0=a,$y=o.group,yi.dragged=fn,qp={target:fn,clientX:(i||n).clientX,clientY:(i||n).clientY},_2=qp.clientX-M.left,x2=qp.clientY-M.top,this._lastX=(i||n).clientX,this._lastY=(i||n).clientY,fn.style["will-change"]="all",x=function(){if(Bl("delayEnded",h,{evt:n}),yi.eventCanceled){h._onDrop();return}h._disableDelayedDragEvents(),!m2&&h.nativeDraggable&&(fn.draggable=!0),h._triggerDragStart(n,i),ll({sortable:h,name:"choose",originalEvent:n}),uu(fn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(T){yM(fn,T.trim(),K1)}),Br(y,"dragover",Wp),Br(y,"mousemove",Wp),Br(y,"touchmove",Wp),Br(y,"mouseup",h._onDrop),Br(y,"touchend",h._onDrop),Br(y,"touchcancel",h._onDrop),m2&&this.nativeDraggable&&(this.options.touchStartThreshold=4,fn.draggable=!0),Bl("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||i)&&(!this.nativeDraggable||!(Pv||sf))){if(yi.eventCanceled){this._onDrop();return}Br(y,"mouseup",h._disableDelayedDrag),Br(y,"touchend",h._disableDelayedDrag),Br(y,"touchcancel",h._disableDelayedDrag),Br(y,"mousemove",h._delayedDragTouchMoveHandler),Br(y,"touchmove",h._delayedDragTouchMoveHandler),o.supportPointer&&Br(y,"pointermove",h._delayedDragTouchMoveHandler),h._dragStartTimer=setTimeout(x,o.delay)}else x()}},_delayedDragTouchMoveHandler:function(n){var i=n.touches?n.touches[0]:n;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){fn&&K1(fn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;_r(n,"mouseup",this._disableDelayedDrag),_r(n,"touchend",this._disableDelayedDrag),_r(n,"touchcancel",this._disableDelayedDrag),_r(n,"mousemove",this._delayedDragTouchMoveHandler),_r(n,"touchmove",this._delayedDragTouchMoveHandler),_r(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,i){i=i||n.pointerType=="touch"&&n,!this.nativeDraggable||i?this.options.supportPointer?Br(document,"pointermove",this._onTouchMove):i?Br(document,"touchmove",this._onTouchMove):Br(document,"mousemove",this._onTouchMove):(Br(fn,"dragend",this),Br(Do,"dragstart",this._onDragStart));try{document.selection?m0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,i){if(sm=!1,Do&&fn){Bl("dragStarted",this,{evt:i}),this.nativeDraggable&&Br(document,"dragover",iU);var a=this.options;!n&&uu(fn,a.dragClass,!1),uu(fn,a.ghostClass,!0),yi.active=this,n&&this._appendGhost(),ll({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(wc){this._lastX=wc.clientX,this._lastY=wc.clientY,MM();for(var n=document.elementFromPoint(wc.clientX,wc.clientY),i=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(wc.clientX,wc.clientY),n!==i);)i=n;if(fn.parentNode[pu]._isOutsideThisEl(n),i)do{if(i[pu]){var a=void 0;if(a=i[pu]._onDragOver({clientX:wc.clientX,clientY:wc.clientY,target:n,rootEl:i}),a&&!this.options.dragoverBubble)break}n=i}while(i=i.parentNode);EM()}},_onTouchMove:function(n){if(qp){var i=this.options,a=i.fallbackTolerance,h=i.fallbackOffset,m=n.touches?n.touches[0]:n,o=Bi&&xm(Bi,!0),y=Bi&&o&&o.a,x=Bi&&o&&o.d,M=t0&&Fs&&y2(Fs),T=(m.clientX-qp.clientX+h.x)/(y||1)+(M?M[0]-X1[0]:0)/(y||1),P=(m.clientY-qp.clientY+h.y)/(x||1)+(M?M[1]-X1[1]:0)/(x||1);if(!yi.active&&!sm){if(a&&Math.max(Math.abs(m.clientX-this._lastX),Math.abs(m.clientY-this._lastY))<a)return;this._onDragStart(n,!0)}if(Bi){o?(o.e+=T-(Z1||0),o.f+=P-(Y1||0)):o={a:1,b:0,c:0,d:1,e:T,f:P};var L="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");vi(Bi,"webkitTransform",L),vi(Bi,"mozTransform",L),vi(Bi,"msTransform",L),vi(Bi,"transform",L),Z1=T,Y1=P,wc=m}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!Bi){var n=this.options.fallbackOnBody?document.body:Do,i=Ma(fn,!0,t0,!0,n),a=this.options;if(t0){for(Fs=n;vi(Fs,"position")==="static"&&vi(Fs,"transform")==="none"&&Fs!==document;)Fs=Fs.parentNode;Fs!==document.body&&Fs!==document.documentElement?(Fs===document&&(Fs=ah()),i.top+=Fs.scrollTop,i.left+=Fs.scrollLeft):Fs=ah(),X1=y2(Fs)}Bi=fn.cloneNode(!0),uu(Bi,a.ghostClass,!1),uu(Bi,a.fallbackClass,!0),uu(Bi,a.dragClass,!0),vi(Bi,"transition",""),vi(Bi,"transform",""),vi(Bi,"box-sizing","border-box"),vi(Bi,"margin",0),vi(Bi,"top",i.top),vi(Bi,"left",i.left),vi(Bi,"width",i.width),vi(Bi,"height",i.height),vi(Bi,"opacity","0.8"),vi(Bi,"position",t0?"absolute":"fixed"),vi(Bi,"zIndex","100000"),vi(Bi,"pointerEvents","none"),yi.ghost=Bi,n.appendChild(Bi),vi(Bi,"transform-origin",_2/parseInt(Bi.style.width)*100+"% "+x2/parseInt(Bi.style.height)*100+"%")}},_onDragStart:function(n,i){var a=this,h=n.dataTransfer,m=a.options;if(Bl("dragStart",this,{evt:n}),yi.eventCanceled){this._onDrop();return}Bl("setupClone",this),yi.eventCanceled||(Uo=bM(fn),Uo.removeAttribute("id"),Uo.draggable=!1,Uo.style["will-change"]="",this._hideClone(),uu(Uo,this.options.chosenClass,!1),yi.clone=Uo),a.cloneId=m0(function(){Bl("clone",a),!yi.eventCanceled&&(a.options.removeCloneOnHide||Do.insertBefore(Uo,fn),a._hideClone(),ll({sortable:a,name:"clone"}))}),!i&&uu(fn,m.dragClass,!0),i?(V0=!0,a._loopId=setInterval(a._emulateDragOver,50)):(_r(document,"mouseup",a._onDrop),_r(document,"touchend",a._onDrop),_r(document,"touchcancel",a._onDrop),h&&(h.effectAllowed="move",m.setData&&m.setData.call(a,h,fn)),Br(document,"drop",a),vi(fn,"transform","translateZ(0)")),sm=!0,a._dragStartId=m0(a._dragStarted.bind(a,i,n)),Br(document,"selectstart",a),Lg=!0,Qg&&vi(document.body,"user-select","none")},_onDragOver:function(n){var i=this.el,a=n.target,h,m,o,y=this.options,x=y.group,M=yi.active,T=$y===x,P=y.sort,L=ms||M,O,W=this,H=!1;if(kx)return;function nt(Ue,Pi){Bl(Ue,W,hh({evt:n,isOwner:T,axis:O?"vertical":"horizontal",revert:o,dragRect:h,targetRect:m,canSort:P,fromSortable:L,target:a,completed:K,onMove:function(Fn,mn){return e0(Do,i,fn,h,Fn,Ma(Fn),n,mn)},changed:$},Pi))}function lt(){nt("dragOverAnimationCapture"),W.captureAnimationState(),W!==L&&L.captureAnimationState()}function K(Ue){return nt("dragOverCompleted",{insertion:Ue}),Ue&&(T?M._hideClone():M._showClone(W),W!==L&&(uu(fn,ms?ms.options.ghostClass:M.options.ghostClass,!1),uu(fn,y.ghostClass,!0)),ms!==W&&W!==yi.active?ms=W:W===yi.active&&ms&&(ms=null),L===W&&(W._ignoreWhileAnimating=a),W.animateAll(function(){nt("dragOverAnimationComplete"),W._ignoreWhileAnimating=null}),W!==L&&(L.animateAll(),L._ignoreWhileAnimating=null)),(a===fn&&!fn.animated||a===i&&!a.animated)&&(rm=null),!y.dragoverBubble&&!n.rootEl&&a!==document&&(fn.parentNode[pu]._isOutsideThisEl(n.target),!Ue&&Wp(n)),!y.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),H=!0}function $(){cu=Xu(fn),Wf=Xu(fn,y.draggable),ll({sortable:W,name:"change",toEl:i,newIndex:cu,newDraggableIndex:Wf,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),a=Cc(a,y.draggable,i,!0),nt("dragOver"),yi.eventCanceled)return H;if(fn.contains(n.target)||a.animated&&a.animatingX&&a.animatingY||W._ignoreWhileAnimating===a)return K(!1);if(V0=!1,M&&!y.disabled&&(T?P||(o=Qo!==Do):ms===this||(this.lastPutMode=$y.checkPull(this,M,fn,n))&&x.checkPut(this,M,fn,n))){if(O=this._getDirection(n,a)==="vertical",h=Ma(fn),nt("dragOverValid"),yi.eventCanceled)return H;if(o)return Qo=Do,lt(),this._hideClone(),nt("revert"),yi.eventCanceled||(Zp?Do.insertBefore(fn,Zp):Do.appendChild(fn)),K(!0);var yt=eA(i,y.draggable);if(!yt||sU(n,O,this)&&!yt.animated){if(yt===fn)return K(!1);if(yt&&i===n.target&&(a=yt),a&&(m=Ma(a)),e0(Do,i,fn,h,a,m,n,!!a)!==!1)return lt(),yt&&yt.nextSibling?i.insertBefore(fn,yt.nextSibling):i.appendChild(fn),Qo=i,$(),K(!0)}else if(yt&&aU(n,O,this)){var Rt=Tm(i,0,y,!0);if(Rt===fn)return K(!1);if(a=Rt,m=Ma(a),e0(Do,i,fn,h,a,m,n,!1)!==!1)return lt(),i.insertBefore(fn,Rt),Qo=i,$(),K(!0)}else if(a.parentNode===i){m=Ma(a);var Ct=0,Et,Gt=fn.parentNode!==i,kt=!eU(fn.animated&&fn.toRect||h,a.animated&&a.toRect||m,O),Qt=O?"top":"left",Ut=v2(a,"top","top")||v2(fn,"top","top"),Nt=Ut?Ut.scrollTop:void 0;rm!==a&&(Et=m[Qt],ev=!1,Jy=!kt&&y.invertSwap||Gt),Ct=lU(n,a,m,O,kt?1:y.swapThreshold,y.invertedSwapThreshold==null?y.swapThreshold:y.invertedSwapThreshold,Jy,rm===a);var Bt;if(Ct!==0){var de=Xu(fn);do de-=Ct,Bt=Qo.children[de];while(Bt&&(vi(Bt,"display")==="none"||Bt===Bi))}if(Ct===0||Bt===a)return K(!1);rm=a,tv=Ct;var bn=a.nextElementSibling,_e=!1;_e=Ct===1;var He=e0(Do,i,fn,h,a,m,n,_e);if(He!==!1)return(He===1||He===-1)&&(_e=He===1),kx=!0,setTimeout(oU,30),lt(),_e&&!bn?i.appendChild(fn):a.parentNode.insertBefore(fn,_e?bn:a),Ut&&xM(Ut,0,Nt-Ut.scrollTop),Qo=fn.parentNode,Et!==void 0&&!Jy&&(d0=Math.abs(Et-Ma(a)[Qt])),$(),K(!0)}if(i.contains(fn))return K(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_r(document,"mousemove",this._onTouchMove),_r(document,"touchmove",this._onTouchMove),_r(document,"pointermove",this._onTouchMove),_r(document,"dragover",Wp),_r(document,"mousemove",Wp),_r(document,"touchmove",Wp)},_offUpEvents:function(){var n=this.el.ownerDocument;_r(n,"mouseup",this._onDrop),_r(n,"touchend",this._onDrop),_r(n,"pointerup",this._onDrop),_r(n,"touchcancel",this._onDrop),_r(document,"selectstart",this)},_onDrop:function(n){var i=this.el,a=this.options;if(cu=Xu(fn),Wf=Xu(fn,a.draggable),Bl("drop",this,{evt:n}),Qo=fn&&fn.parentNode,cu=Xu(fn),Wf=Xu(fn,a.draggable),yi.eventCanceled){this._nulling();return}sm=!1,Jy=!1,ev=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dx(this.cloneId),Dx(this._dragStartId),this.nativeDraggable&&(_r(document,"drop",this),_r(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Qg&&vi(document.body,"user-select",""),vi(fn,"transform",""),n&&(Lg&&(n.cancelable&&n.preventDefault(),!a.dropBubble&&n.stopPropagation()),Bi&&Bi.parentNode&&Bi.parentNode.removeChild(Bi),(Do===Qo||ms&&ms.lastPutMode!=="clone")&&Uo&&Uo.parentNode&&Uo.parentNode.removeChild(Uo),fn&&(this.nativeDraggable&&_r(fn,"dragend",this),K1(fn),fn.style["will-change"]="",Lg&&!sm&&uu(fn,ms?ms.options.ghostClass:this.options.ghostClass,!1),uu(fn,this.options.chosenClass,!1),ll({sortable:this,name:"unchoose",toEl:Qo,newIndex:null,newDraggableIndex:null,originalEvent:n}),Do!==Qo?(cu>=0&&(ll({rootEl:Qo,name:"add",toEl:Qo,fromEl:Do,originalEvent:n}),ll({sortable:this,name:"remove",toEl:Qo,originalEvent:n}),ll({rootEl:Qo,name:"sort",toEl:Qo,fromEl:Do,originalEvent:n}),ll({sortable:this,name:"sort",toEl:Qo,originalEvent:n})),ms&&ms.save()):cu!==fm&&cu>=0&&(ll({sortable:this,name:"update",toEl:Qo,originalEvent:n}),ll({sortable:this,name:"sort",toEl:Qo,originalEvent:n})),yi.active&&((cu==null||cu===-1)&&(cu=fm,Wf=Jg),ll({sortable:this,name:"end",toEl:Qo,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){Bl("nulling",this),Do=fn=Qo=Bi=Zp=Uo=p0=Yf=qp=wc=Lg=cu=Wf=fm=Jg=rm=tv=ms=$y=yi.dragged=yi.ghost=yi.clone=yi.active=null,j0.forEach(function(n){n.checked=!0}),j0.length=Z1=Y1=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":fn&&(this._onDragOver(n),rU(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],i,a=this.el.children,h=0,m=a.length,o=this.options;h<m;h++)i=a[h],Cc(i,o.draggable,this.el,!1)&&n.push(i.getAttribute(o.dataIdAttr)||cU(i));return n},sort:function(n,i){var a={},h=this.el;this.toArray().forEach(function(m,o){var y=h.children[o];Cc(y,this.options.draggable,h,!1)&&(a[m]=y)},this),i&&this.captureAnimationState(),n.forEach(function(m){a[m]&&(h.removeChild(a[m]),h.appendChild(a[m]))}),i&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,i){return Cc(n,i||this.options.draggable,this.el,!1)},option:function(n,i){var a=this.options;if(i===void 0)return a[n];var h=Lv.modifyOption(this,n,i);typeof h<"u"?a[n]=h:a[n]=i,n==="group"&&IM(a)},destroy:function(){Bl("destroy",this);var n=this.el;n[pu]=null,_r(n,"mousedown",this._onTapStart),_r(n,"touchstart",this._onTapStart),_r(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(_r(n,"dragover",this),_r(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),U0.splice(U0.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!Yf){if(Bl("hideClone",this),yi.eventCanceled)return;vi(Uo,"display","none"),this.options.removeCloneOnHide&&Uo.parentNode&&Uo.parentNode.removeChild(Uo),Yf=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(Yf){if(Bl("showClone",this),yi.eventCanceled)return;fn.parentNode==Do&&!this.options.group.revertClone?Do.insertBefore(Uo,fn):Zp?Do.insertBefore(Uo,Zp):Do.appendChild(Uo),this.options.group.revertClone&&this.animate(fn,Uo),vi(Uo,"display",""),Yf=!1}}};function rU(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function e0(t,n,i,a,h,m,o,y){var x,M=t[pu],T=M.options.onMove,P;return window.CustomEvent&&!sf&&!Pv?x=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent("move",!0,!0)),x.to=n,x.from=t,x.dragged=i,x.draggedRect=a,x.related=h||n,x.relatedRect=m||Ma(n),x.willInsertAfter=y,x.originalEvent=o,t.dispatchEvent(x),T&&(P=T.call(M,x,o)),P}function K1(t){t.draggable=!1}function oU(){kx=!1}function aU(t,n,i){var a=Ma(Tm(i.el,0,i.options,!0)),h=AM(i.el,i.options,Bi),m=10;return n?t.clientX<h.left-m||t.clientY<a.top&&t.clientX<a.right:t.clientY<h.top-m||t.clientY<a.bottom&&t.clientX<a.left}function sU(t,n,i){var a=Ma(eA(i.el,i.options.draggable)),h=AM(i.el,i.options,Bi),m=10;return n?t.clientX>h.right+m||t.clientY>a.bottom&&t.clientX>a.left:t.clientY>h.bottom+m||t.clientX>a.right&&t.clientY>a.top}function lU(t,n,i,a,h,m,o,y){var x=a?t.clientY:t.clientX,M=a?i.height:i.width,T=a?i.top:i.left,P=a?i.bottom:i.right,L=!1;if(!o){if(y&&d0<M*h){if(!ev&&(tv===1?x>T+M*m/2:x<P-M*m/2)&&(ev=!0),ev)L=!0;else if(tv===1?x<T+d0:x>P-d0)return-tv}else if(x>T+M*(1-h)/2&&x<P-M*(1-h)/2)return uU(n)}return L=L||o,L&&(x<T+M*m/2||x>P-M*m/2)?x>T+M/2?1:-1:0}function uU(t){return Xu(fn)<Xu(t)?1:-1}function cU(t){for(var n=t.tagName+t.className+t.src+t.href+t.textContent,i=n.length,a=0;i--;)a+=n.charCodeAt(i);return a.toString(36)}function hU(t){j0.length=0;for(var n=t.getElementsByTagName("input"),i=n.length;i--;){var a=n[i];a.checked&&j0.push(a)}}function m0(t){return setTimeout(t,0)}function Dx(t){return clearTimeout(t)}C_&&Br(document,"touchmove",function(t){(yi.active||sm)&&t.cancelable&&t.preventDefault()});yi.utils={on:Br,off:_r,css:vi,find:yM,is:function(n,i){return!!Cc(n,i,n,!1)},extend:ZV,throttle:_M,closest:Cc,toggleClass:uu,clone:bM,index:Xu,nextTick:m0,cancelNextTick:Dx,detectDirection:CM,getChild:Tm};yi.get=function(t){return t[pu]};yi.mount=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n[0].constructor===Array&&(n=n[0]),n.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(yi.utils=hh(hh({},yi.utils),a.utils)),Lv.mount(a)})};yi.create=function(t,n){return new yi(t,n)};yi.version=GV;var Ia=[],kg,Rx,zx=!1,Q1,$1,H0,Dg;function fU(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return t.prototype={dragStarted:function(i){var a=i.originalEvent;this.sortable.nativeDraggable?Br(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Br(document,"pointermove",this._handleFallbackAutoScroll):a.touches?Br(document,"touchmove",this._handleFallbackAutoScroll):Br(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var a=i.originalEvent;!this.options.dragOverBubble&&!a.rootEl&&this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?_r(document,"dragover",this._handleAutoScroll):(_r(document,"pointermove",this._handleFallbackAutoScroll),_r(document,"touchmove",this._handleFallbackAutoScroll),_r(document,"mousemove",this._handleFallbackAutoScroll)),A2(),g0(),YV()},nulling:function(){H0=Rx=kg=zx=Dg=Q1=$1=null,Ia.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,a){var h=this,m=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,y=document.elementFromPoint(m,o);if(H0=i,a||this.options.forceAutoScrollFallback||Pv||sf||Qg){J1(i,this.options,y,a);var x=Kf(y,!0);zx&&(!Dg||m!==Q1||o!==$1)&&(Dg&&A2(),Dg=setInterval(function(){var M=Kf(document.elementFromPoint(m,o),!0);M!==x&&(x=M,g0()),J1(i,h.options,M,a)},10),Q1=m,$1=o)}else{if(!this.options.bubbleScroll||Kf(y,!0)===ah()){g0();return}J1(i,this.options,Kf(y,!1),!1)}}},ef(t,{pluginName:"scroll",initializeByDefault:!0})}function g0(){Ia.forEach(function(t){clearInterval(t.pid)}),Ia=[]}function A2(){clearInterval(Dg)}var J1=_M(function(t,n,i,a){if(n.scroll){var h=(t.touches?t.touches[0]:t).clientX,m=(t.touches?t.touches[0]:t).clientY,o=n.scrollSensitivity,y=n.scrollSpeed,x=ah(),M=!1,T;Rx!==i&&(Rx=i,g0(),kg=n.scroll,T=n.scrollFn,kg===!0&&(kg=Kf(i,!0)));var P=0,L=kg;do{var O=L,W=Ma(O),H=W.top,nt=W.bottom,lt=W.left,K=W.right,$=W.width,yt=W.height,Rt=void 0,Ct=void 0,Et=O.scrollWidth,Gt=O.scrollHeight,kt=vi(O),Qt=O.scrollLeft,Ut=O.scrollTop;O===x?(Rt=$<Et&&(kt.overflowX==="auto"||kt.overflowX==="scroll"||kt.overflowX==="visible"),Ct=yt<Gt&&(kt.overflowY==="auto"||kt.overflowY==="scroll"||kt.overflowY==="visible")):(Rt=$<Et&&(kt.overflowX==="auto"||kt.overflowX==="scroll"),Ct=yt<Gt&&(kt.overflowY==="auto"||kt.overflowY==="scroll"));var Nt=Rt&&(Math.abs(K-h)<=o&&Qt+$<Et)-(Math.abs(lt-h)<=o&&!!Qt),Bt=Ct&&(Math.abs(nt-m)<=o&&Ut+yt<Gt)-(Math.abs(H-m)<=o&&!!Ut);if(!Ia[P])for(var de=0;de<=P;de++)Ia[de]||(Ia[de]={});(Ia[P].vx!=Nt||Ia[P].vy!=Bt||Ia[P].el!==O)&&(Ia[P].el=O,Ia[P].vx=Nt,Ia[P].vy=Bt,clearInterval(Ia[P].pid),(Nt!=0||Bt!=0)&&(M=!0,Ia[P].pid=setInterval((function(){a&&this.layer===0&&yi.active._onTouchMove(H0);var bn=Ia[this.layer].vy?Ia[this.layer].vy*y:0,_e=Ia[this.layer].vx?Ia[this.layer].vx*y:0;typeof T=="function"&&T.call(yi.dragged.parentNode[pu],_e,bn,t,H0,Ia[this.layer].el)!=="continue"||xM(Ia[this.layer].el,_e,bn)}).bind({layer:P}),24))),P++}while(n.bubbleScroll&&L!==x&&(L=Kf(L,!1)));zx=M}},30),SM=function(n){var i=n.originalEvent,a=n.putSortable,h=n.dragEl,m=n.activeSortable,o=n.dispatchSortableEvent,y=n.hideGhostForTarget,x=n.unhideGhostForTarget;if(i){var M=a||m;y();var T=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,P=document.elementFromPoint(T.clientX,T.clientY);x(),M&&!M.el.contains(P)&&(o("spill"),this.onSpill({dragEl:h,putSortable:a}))}};function nA(){}nA.prototype={startIndex:null,dragStart:function(n){var i=n.oldDraggableIndex;this.startIndex=i},onSpill:function(n){var i=n.dragEl,a=n.putSortable;this.sortable.captureAnimationState(),a&&a.captureAnimationState();var h=Tm(this.sortable.el,this.startIndex,this.options);h?this.sortable.el.insertBefore(i,h):this.sortable.el.appendChild(i),this.sortable.animateAll(),a&&a.animateAll()},drop:SM};ef(nA,{pluginName:"revertOnSpill"});function iA(){}iA.prototype={onSpill:function(n){var i=n.dragEl,a=n.putSortable,h=a||this.sortable;h.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),h.animateAll()},drop:SM};ef(iA,{pluginName:"removeOnSpill"});yi.mount(new fU);yi.mount(iA,nA);function TM(t,n,i={}){let a=Jh();const h=$e(n.get()||[]);i&&i.group&&(a=typeof i.group=="string"?i.group:i.group.name);let m;const{document:o=Rb,onAdd:y,onRemove:x,...M}=i,T={store:{get(){return sp(n.get()).map(nt=>nt.id)},set(H){const lt=H.toArray().map(K=>v0.value[a][K]);n.set(lt),h.value=lt}},onAdd(H){m==null||m.save(),y&&y(H)},onRemove(H){m==null||m.save(),x&&x(H)}},P=()=>{const H=sp(n.get());h.value=H,w2(H,a);const nt=typeof t=="string"?o==null?void 0:o.getElementById(t):Xf(t);!nt||m!==void 0||(m=new yi(nt,{...T,...M}))},L=()=>{m==null||m.destroy(),m=void 0},O=(H,nt)=>{if(nt!==void 0)m==null||m.option(H,nt);else return m==null?void 0:m.option(H)},W=(H=[])=>{w2(H,a),h.value=H};return TI(P),Rm(L),{stop:L,start:P,option:O,items:h,setCache:W}}const v0=$e({});function w2(t,n){v0.value[n]||(v0.value[n]={}),t.forEach(i=>v0.value[n][i.id]=i)}const pU={class:"draggable-group__info"},dU=["title"],mU={class:"draggable-group__action"},gU={key:0,class:"draggable-group__divider"},vU={key:0,class:"draggable-group__nodata"},yU=["data-id"],_U=tr({__name:"draggable-list-group",props:{layerGroup:{type:Object,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean,checkItemCanPutInChildren:{type:Function},currentItemDrag:{type:Object}},emits:["click:delete","click:un-group","click:select","drag-done","update:layer-group","update:currentItemDrag"],setup(t,{emit:n}){const i=t,a=n;function h(){a("click:select")}const m={group:{open:g5,close:m5,unGroup:q5,delete:km,show:ub,hide:cb}},o=$e(!0);function y(){o.value=!o.value}function x(){a("click:delete")}function M(){a("click:un-group")}const T=$e(null),P=$e(i.layerGroup.children.slice());TM(T,{get(){return P.value},set(O){P.value=O,L()}},{handle:".draggable-handle",group:{name:"layers",pull:!0,put:i.checkItemCanPutInChildren},onChoose(O){a("update:currentItemDrag",O.oldIndex!=null?P.value[O.oldIndex]:void 0)}});function L(){gu(()=>{a("update:layer-group",{...i.layerGroup,children:P.value}),a("drag-done")})}return(O,W)=>(wt(),Ve(Lx,{disabledDrag:t.disabledDrag,class:"draggable-group__item"},{default:se(()=>[zt("div",pU,[zt("span",{class:"draggable-group__title",title:t.layerGroup.name},oi(t.layerGroup.name),9,dU),zt("div",mU,[t.layerGroup.children&&t.layerGroup.children.length>0?(wt(),ce("span",{key:0,onClick:W[0]||(W[0]=H=>M())},[jt(X(Nn),{size:"14",type:"mdi",path:m.group.unGroup},null,8,["path"])])):gn("v-if",!0),zt("span",{onClick:W[1]||(W[1]=H=>x())},[jt(X(Nn),{size:"14",type:"mdi",path:m.group.delete},null,8,["path"])]),zt("span",{onClick:W[2]||(W[2]=H=>y())},[o.value?(wt(),Ve(X(Nn),{key:0,size:"14",type:"mdi",path:m.group.close},null,8,["path"])):(wt(),Ve(X(Nn),{key:1,size:"14",type:"mdi",path:m.group.open},null,8,["path"]))])])]),o.value?(wt(),ce("div",gU)):gn("v-if",!0),zt("div",{class:bs({"draggable-group__children-container":o.value})},[!P.value||P.value.length<1?(wt(),ce("div",vU," Drag layer inside this group ")):gn("v-if",!0),zt("div",{class:"draggable-group__children",ref_key:"child",ref:T},[(wt(!0),ce(Mi,null,ja(P.value,H=>(wt(),ce("div",{class:"draggable__item",key:H.id,"data-id":H.id},[jt(Lx,{disabledDrag:t.disabledDrag,isSelected:t.selected.includes(H.id),item:H},{default:se(()=>[qn(O.$slots,"item",{group:t.layerGroup,isSelected:t.selected.includes(H.id),item:H,toggleSelect:h},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"])],8,yU))),128))],512)],2)]),_:3},8,["disabledDrag"]))}}),xU=ii(_U,[["__scopeId","data-v-6a7679c6"]]),bU=["data-id"],AU=tr({__name:"draggable-list",props:{items:{type:Array,required:!0},selected:{type:Array,default:()=>[]},disabledSelect:Boolean,disabledDrag:Boolean},emits:["update:selected","click-group:remove","click-drag:done","update:items"],setup(t,{expose:n,emit:i}){const a=t,h=i,m=$e([]),o=$e({}),y=$e(void 0),x=rn({get(){return a.selected},set(Et){h("update:selected",Et)}}),M=$e(null),{setCache:T,items:P}=TM(M,{get(){return m.value},set(Et){m.value=Et}},{handle:".draggable-handle",group:{name:"layers",pull:!0,put:!0},onChoose(Et){y.value=Et.oldIndex!=null?m.value[Et.oldIndex]:void 0},onEnd(){$()}});Hl(()=>{L(a.items)});function L(Et=[]){(Et==null||Et.length===0)&&(Et=a.items),m.value=O(Et),T(Et)}function O(Et){let Gt=[];if(!Et||Et.length==0)return Gt;let kt={};return Et.forEach(Qt=>{if(!Qt.group){Gt.push(Qt);return}kt[Qt.group.id]||(kt[Qt.group.id]=Ct(Qt.group),Gt.push(kt[Qt.group.id])),kt[Qt.group.id].children.push(Qt)}),Gt}function W(Et){return Et.reduce((Gt,kt)=>(kt.isGroup?kt.children.length>0&&Gt.push(...kt.children.map(Qt=>(Qt.group={id:kt.id,name:kt.name},Qt))):(kt.group=void 0,Gt.push(kt)),Gt),[])}function H(Et){a.disabledSelect||(x.value.includes(Et.id)?x.value=x.value.filter(Gt=>Gt!=Et.id):(x.value.push(Et.id),o.value[Et.id]=Et))}function nt(Et){let Gt=[];x.value&&x.value.length>0&&(m.value=m.value.filter(Qt=>!x.value.includes(Qt.id)).map(Qt=>("isGroup"in Qt&&Qt.isGroup&&(Qt.children=Qt.children.filter(Ut=>!x.value.includes(Ut.id))),Qt)),Gt=x.value.map(Qt=>o.value[Qt]),x.value=[],o.value={});let kt=Ct({name:Et||"New Group",children:Gt});m.value.unshift(kt),kt.children.length>0&&$(),T(m.value)}function lt(Et,Gt){m.value.splice(Gt,1),Et.children.length>0&&m.value.splice(Gt,0,...Et.children)}function K(Et,Gt){m.value[Gt]={...m.value[Gt],...Et}}function $(){gu(()=>{y.value=void 0,h("update:items",W(m.value)),h("click-drag:done")})}function yt(){return!(y.value&&y.value.isGroup)}function Rt(Et,Gt){m.value.splice(Gt,1),h("click-group:remove",Et)}function Ct(Et){let Gt={id:`group-${new Date().getTime()}`,name:"New Group",isGroup:!0,show:!0,children:[]};return Gt=Object.assign({},Gt,Et),Gt}return n({update:L,addNewGroup:nt}),(Et,Gt)=>(wt(),ce("div",{ref_key:"el",ref:M,class:"draggable-group-container"},[(wt(!0),ce(Mi,null,ja(X(P),(kt,Qt)=>(wt(),ce("div",{key:kt.id,"data-id":kt.id,class:"draggable__item item"},[kt.isGroup?(wt(),Ve(xU,{key:kt.id,"layer-group":kt,"onUpdate:layerGroup":Ut=>K(Ut,Qt),disabledDrag:t.disabledDrag,"onClick:delete":Ut=>Rt(kt,Qt),"onClick:unGroup":Ut=>lt(kt,Qt),checkItemCanPutInChildren:yt,onDragDone:$,"onClick:select":H,currentItemDrag:y.value,"onUpdate:currentItemDrag":Gt[0]||(Gt[0]=Ut=>y.value=Ut)},{item:se(Ut=>[qn(Et.$slots,"item",mr({ref_for:!0},Ut),void 0,!0)]),_:2},1032,["layer-group","onUpdate:layerGroup","disabledDrag","onClick:delete","onClick:unGroup","currentItemDrag"])):(wt(),Ve(Lx,{disabledDrag:t.disabledDrag,isSelected:x.value.includes(kt.id),item:kt,key:kt.id},{default:se(()=>[qn(Et.$slots,"item",{isSelected:x.value.includes(kt.id),item:kt,index:Qt,toggleSelect:H},void 0,!0)]),_:2},1032,["disabledDrag","isSelected","item"]))],8,bU))),128))],512))}}),wU=ii(AU,[["__scopeId","data-v-f7f6101d"]]),CU={name:"VueSlider",props:{modelValue:{},min:{default:0},max:{default:100},step:{default:1},disabled:Boolean},computed:{backgroundSize(){return(this.modelValue-this.min)*100/(this.max-this.min)+"% 100%"},form:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},IU=["value","min","max","step","disabled"];function MU(t,n,i,a,h,m){return wt(),ce("input",{value:m.form,onInput:n[0]||(n[0]=({target:o})=>m.form=parseFloat(o.value)),type:"range",min:i.min,max:i.max,step:i.step,style:Ua({backgroundSize:m.backgroundSize}),disabled:i.disabled},null,44,IU)}const EU=ii(CU,[["render",MU],["__scopeId","data-v-efcc123b"]]),SU={__name:"layer-item-icon",props:{loading:Boolean,item:{require:!0,type:Object}},setup(t){const n={loading:hb,layer:o_};return(i,a)=>(wt(),ce("div",null,[t.loading?(wt(),Ve(X(Nn),{key:0,size:"14",type:"mdi",path:n.loading,class:"spin"},null,8,["path"])):(wt(),Ve(X(Nn),{key:1,size:"14",type:"mdi",path:n.layer},null,8,["path"]))]))}},PM=t=>(fh("data-v-95d64c48"),t=t(),ph(),t),TU={class:"layer-item-container"},PU={class:"layer-item__info"},LU=["title"],kU=PM(()=>zt("div",{class:"v-spacer"},null,-1)),DU={class:"layer-item__title-action"},RU=["disabled","title","onClick"],zU=["disabled"],OU=["disabled"],BU={key:0,class:"layer-item__action"},FU={key:0,class:"layer-item__opacity"},NU=PM(()=>zt("div",{class:"v-spacer"},null,-1)),VU={key:1},UU=tr({__name:"layer-item",props:{item:{}},emits:["update:item","click","click:remove","click:action","click:edit","click:content-menu"],setup(t,{emit:n}){const i=t,a=n,h=rn(()=>i.item&&i.item.parent&&i.item.parent.getView("legend")),m=$e(!1),o=$e(),y={menu:lb,loading:hb,layer:o_,flyTo:wv,show:ub,hide:cb,delete:km,edit:F5,legendOpen:R5,legendClose:YC},x=rn(()=>i.item.metadata&&i.item.metadata.loading);rn(()=>i.item.show);const M=rn({get(){return i.item.opacity},set(lt){let K=i.item;K.opacity=lt,a("update:item",K)}}),T=()=>{a("click:remove",i.item)};function P(){m.value=!m.value,m.value}const L=rn(()=>{var lt;return i.item?((lt=fu(i.item).getView("action"))==null?void 0:lt.menus)||[]:[]}),O=rn(()=>L.value.filter(lt=>lt.location=="extra").sort((lt,K)=>(lt.order||0)-(K.order||0))),W=rn(()=>L.value.filter(lt=>lt.location=="menu").sort((lt,K)=>(lt.order||0)-(K.order||0)));function H(lt){a("click:content-menu",{event:lt,actions:W.value,item:i.item})}function nt(lt){a("click:action",{action:lt,item:i.item})}return(lt,K)=>(wt(),ce("div",TU,[zt("div",PU,[jt(SU,{class:"layer-item__icon",loading:x.value,item:{item:lt.item}},null,8,["loading","item"]),zt("span",{class:"layer-item__title",title:lt.item.name,onClick:K[0]||(K[0]=$=>a("click",lt.item))},[zt("span",null,oi(lt.item.name),1)],8,LU),kU,zt("div",DU,[qn(lt.$slots,"pre-btn",{loading:x.value},void 0,!0),(wt(!0),ce(Mi,null,ja(O.value,($,yt)=>(wt(),ce(Mi,{key:yt},[$.type==="item"?(wt(),ce("button",mr({key:0,class:"layer-item__button",disabled:x.value,title:$.name,ref_for:!0},$.attr,{onClick:Rt=>nt($)}),[$.icon?(wt(),ce(Mi,{key:0},[typeof $.icon!="string"?(wt(),Ve(lh($.icon()),{key:0,item:lt.item},null,8,["item"])):(wt(),Ve(X(Nn),{key:1,size:"14",type:"mdi",path:$.icon},null,8,["path"]))],64)):gn("v-if",!0)],16,RU)):gn("v-if",!0)],64))),128)),gn(` <button
          class="layer-item__button"
          @click.stop="toggleShow"
          :disabled="loading"
        >
          <SvgIcon size="14" type="mdi" :path="path.show" v-if="isShow" />
          <SvgIcon size="14" type="mdi" :path="path.hide" v-else />
        </button> `),lt.item.config.disable_delete?gn("v-if",!0):(wt(),ce("button",{key:0,class:"layer-item__button",disabled:x.value,onClick:Ho(T,["stop"])},[jt(X(Nn),{size:"14",type:"mdi",path:y.delete},null,8,["path"])],8,zU)),qn(lt.$slots,"extra-btn",{loading:x.value},void 0,!0),W.value.length>0?(wt(),ce("button",{key:1,class:"layer-item__button",disabled:x.value,onClick:Ho(H,["prevent","stop"])},[jt(X(Nn),{size:"14",type:"mdi",path:y.menu},null,8,["path"])],8,OU)):gn("v-if",!0),lt.item.config.disabled_opacity&&h.value?(wt(),ce("button",{key:2,class:"layer-item__button",onClick:Ho(P,["stop"])},[jt(X(Nn),{size:"14",type:"mdi",path:m.value?y.legendClose:y.legendOpen},null,8,["path"])])):gn("v-if",!0)])]),lt.item.config.disabled_opacity?gn("v-if",!0):(wt(),ce("div",BU,[lt.item.config.disabled_opacity?gn("v-if",!0):(wt(),ce("div",FU,[jt(EU,{modelValue:M.value,"onUpdate:modelValue":K[1]||(K[1]=$=>M.value=$),modelModifiers:{number:!0},max:"1",step:"0.01",disabled:x.value},null,8,["modelValue","disabled"])])),NU,h.value?(wt(),ce("button",{key:1,class:"layer-item__button",onClick:Ho(P,["stop"])},[jt(X(Nn),{size:"14",type:"mdi",path:m.value?y.legendClose:y.legendOpen},null,8,["path"])])):gn("v-if",!0)])),m.value&&o.value?(wt(),ce("div",VU,[(wt(!0),ce(Mi,null,ja(o.value.items,($,yt)=>(wt(),Ve(lh(o.value.component),{value:$,key:yt},null,8,["value"]))),128))])):gn("v-if",!0)]))}}),jU=ii(UU,[["__scopeId","data-v-95d64c48"]]),HU=t=>(fh("data-v-aece6682"),t=t(),ph(),t),GU={class:"layer-control-container"},qU={class:"layer-control__header"},WU=HU(()=>zt("div",{class:"v-spacer"},null,-1)),ZU={class:"layer-control__list"},YU={class:"layer-context-menu"},XU=["onClick"],KU={class:"layer-context-menu__item-icon"},QU=["innerHTML"],$U=tr({__name:"LayerList",props:{...rs,disabledDrag:Boolean,disabled:Boolean},emits:["click:create"],setup(t,{emit:n}){const i=t,a=n,h={icon:o_,menu:lb,group:{create:ZC},deleteAll:km,layer:{create:hp}},{callMap:m,mapId:o}=Io(i),y=rn(()=>XN(o.value).value);hl(y,()=>{lt(),gu(()=>{nt()})},{deep:!0});const x=$e([]);Hl(()=>{lt(),nt()});const M=$e(void 0),T=$e([]);function P(){m(Ut=>{let Nt="";x.value.slice().reverse().forEach(async(Bt,de)=>{Bt.index=de;let bn=fu(Bt);bn&&(bn.run("moveLayer",Ut,Nt),Nt=await bn.run("getBeforeId",Ut,Nt))})})}function L(Ut){Ut&&typeof Ut!="string"&&(!Ut||!Ut.children||Ut.children.length===0||Ut.children.forEach(Nt=>{let Bt=fu(Nt);Bt&&G1(o.value,Bt)}))}function O(Ut){m(Nt=>{let Bt=fu(Ut);Bt&&(Bt.run("toggleShow",Nt,Ut.show),Ut.config.disabled_opacity||Bt.run("setOpacity",Nt,Ut.opacity))})}function W(Ut){Ut&&m(Nt=>{Nt.fitBounds(Ut,{padding:50,duration:10})})}function H(Ut){if(!Ut)return;let Nt=fu(Ut);Nt&&G1(o.value,Nt)}function nt(){M.value&&M.value.update(x.value)}function lt(){x.value&&(x.value=Jb(o.value,"list").sort((Ut,Nt)=>Nt.index-Ut.index))}function K(){a("click:create")}function $(){M.value&&M.value.addNewGroup("")}function yt(){!x.value||x.value.length===0||x.value.forEach(Ut=>{let Nt=fu(Ut);Nt&&G1(o.value,Nt)})}const Rt=$e(),Ct=jl({items:[],view:void 0});function Et({event:Ut,item:Nt,actions:Bt}){Ct.items=Bt?[...Bt]:[],Ct.view=Nt,Rt.value&&Rt.value.open(Ut,Nt)}function Gt(){Ct.items=[],Ct.view=void 0,Rt.value&&Rt.value.close()}const kt={"to-bound":Ut=>{W(Ut.metadata.bounds)},"toggle-show":Ut=>{Ut.show=!Ut.show,O(Ut)}};function Qt({action:Ut,item:Nt}){const Bt=Ut;if(!Bt||Bt.type!=="item"||!Nt)return;let de=fu(Nt);if(!de)return;const bn=de.getView("action"),_e=bn.get(Bt.id);_e.type&&kt[_e.type]?kt[_e.type](Nt,de):bn.call(Bt.id,o.value)}return(Ut,Nt)=>(wt(),ce("div",GU,[zt("div",qU,[zt("button",{class:"layer-item__button",onClick:Nt[0]||(Nt[0]=Ho(Bt=>K(),["stop"]))},[jt(X(Nn),{size:"14",type:"mdi",path:h.layer.create},null,8,["path"])]),WU,zt("button",{class:"layer-item__button",onClick:Nt[1]||(Nt[1]=Bt=>$())},[jt(X(Nn),{size:"14",type:"mdi",path:h.group.create},null,8,["path"])]),zt("button",{class:"layer-item__button",onClick:yt},[jt(X(Nn),{size:"14",type:"mdi",path:h.deleteAll},null,8,["path"])])]),zt("div",ZU,[jt(wU,{ref_key:"groupRef",ref:M,items:x.value,"onUpdate:items":Nt[2]||(Nt[2]=Bt=>x.value=Bt),selected:T.value,"onUpdate:selected":Nt[3]||(Nt[3]=Bt=>T.value=Bt),disabled:t.disabled,disabledDrag:t.disabledDrag,"onClickDrag:done":Nt[4]||(Nt[4]=Bt=>P()),"onClickGroup:remove":L},{item:se(({isSelected:Bt,item:de,toggleSelect:bn})=>[qn(Ut.$slots,"item",{item:de,isSelected:Bt,toggleSelect:bn},()=>[(wt(),Ve(lh(de.component||jU),{item:de,isSelected:Bt,onClick:_e=>bn(de),"onUpdate:item":O,"onClick:remove":H,"onClick:contentMenu":Et,"onClick:action":Qt},null,40,["item","isSelected","onClick"]))],!0)]),_:3},8,["items","selected","disabled","disabledDrag"])]),jt(X(sM),{ref_key:"contextMenuRef",ref:Rt},{default:se(()=>[zt("ul",YU,[(wt(!0),ce(Mi,null,ja(Ct.items,(Bt,de)=>(wt(),ce("li",{key:de,onClick:Ho(bn=>{Qt({action:Bt,item:Ct.view}),Gt()},["stop"]),class:bs(["layer-context-menu__item",[Bt.class,Bt.type==="divider"?"layer-context-menu__divider":""]])},[zt("div",KU,[jt(X(Nn),{size:"14",type:"mdi",path:Bt.icon||X(v5)},null,8,["path"])]),zt("span",{innerHTML:Bt.name},null,8,QU)],10,XU))),128))])]),_:1},512)]))}}),JU=ii($U,[["__scopeId","data-v-aece6682"]]),t7=tr({__name:"layer-component",props:{item:{}},setup(t){const n=Lm(),i=t,a=xv([]);function h(o){var M,T;let y=a.value.findIndex(P=>P.id==o.id);if(y<0)return;const x=a.value[y];(M=fu(i.item))==null||M.getView("component").remove({id:x.id}),a.value.splice(y,1),(T=n==null?void 0:n.proxy)==null||T.$forceUpdate()}function m({component:o}){var y;a.value.push({id:o.id,attr:{item:i.item,option:o.option},component:o.component}),(y=n==null?void 0:n.proxy)==null||y.$forceUpdate()}return Hl(()=>{fu(i.item).on("add-component",m)}),bv(()=>{fu(i.item).off("add-component",m)}),(o,y)=>(wt(!0),ce(Mi,null,ja(a.value,x=>(wt(),Ve(lh(x.component()),mr({key:x.id,ref_for:!0},x.attr,{onClose:M=>h(x)}),null,16,["onClose"]))),128))}}),e7={class:"layer-control__title"},n7={class:"layer-control"},i7={class:"base-map-card-container"},r7={name:"layer-control"},o7=tr({...r7,props:{...rs,disabledDrag:Boolean,disabled:Boolean},setup(t){const n=t,{mapId:i,moduleContainerProps:a}=Io(n),{trans:h,setLocale:m}=fa(i.value);m({map:{"layer-control":{title:"Layer Control","create-btn":"Create Layer",create:{title:"New Layer"},field:{name:"Name",type:"Type",url:"Url",minzoom:"Min zoom",maxzoom:"Max zoom",file:"File",geojson:"Geojson",tiles:"Tiles",bound:{title:"Bound",minx:"Min Longitude",miny:"Min Latitude",maxx:"Max Longitude",maxy:"Max Latitude"}},info:{title:"Info"}}}});const o={icon:o_,menu:lb,group:{create:ZC},deleteAll:km,layer:{create:hp}},[y,x]=rd(!0),M=rn(()=>Jb(i.value,"list")),[T,P]=rd();function L(){P()}return(O,W)=>(wt(),Ve(X(Ta),Sa(ha(X(a))),{btn:se(()=>[X(y)?gn("v-if",!0):(wt(),Ve(X(Tr),{key:0,tooltip:X(h)("map.layer-control.title"),onClick:W[0]||(W[0]=Ho(H=>X(x)(),["stop"])),active:X(y)},{default:se(()=>[jt(X(Nn),{size:"14",type:"mdi",path:o.icon},null,8,["path"])]),_:1},8,["tooltip","active"]))]),draggable:se(H=>[jt(X(BI),{containerId:H.containerId,show:X(y),"onUpdate:show":W[2]||(W[2]=nt=>Ea(y)?y.value=nt:null)},{title:se(()=>[zt("span",e7,oi(X(h)("map.layer-control.title")),1)]),default:se(()=>[zt("div",n7,[jt(JU,{mapId:X(i),"onClick:create":W[1]||(W[1]=nt=>L())},null,8,["mapId"]),zt("div",i7,[qn(O.$slots,"endList",{mapId:X(i)},void 0,!0)])])]),_:2},1032,["containerId","show"])]),default:se(()=>[jt(OV,{show:X(T),"onUpdate:show":W[3]||(W[3]=H=>Ea(T)?T.value=H:null)},null,8,["show"]),(wt(!0),ce(Mi,null,ja(M.value,H=>(wt(),Ve(t7,{key:H.id,item:H},null,8,["item"]))),128)),qn(O.$slots,"default",{},void 0,!0)]),_:3},16))}}),a7=ii(o7,[["__scopeId","data-v-74dd1181"]]),s7=t=>(fh("data-v-e3b81bed"),t=t(),ph(),t),l7={class:"identify-control-container"},u7={class:"identify-control-header"},c7=["innerHTML"],h7=s7(()=>zt("hr",{class:"identify-control-separator"},null,-1)),f7={class:"identify-control-body"},p7={class:"identify-control-list-item__header"},d7={class:"identify-control-list-item__container"},m7=tr({__name:"IdentifyControl",props:{...rs},setup(t){const n={icon:S5,boxSelect:H5,mapClick:A5},i=t,{mapId:a,moduleContainerProps:h,callMap:m}=Io(i),{trans:o,setLocale:y}=fa(a.value),{format:x}=bI(a.value);y({map:{identify:{title:"Identify",point:"Point"}}});const M=rn(()=>Jb(a.value,"identify")),T=rn(()=>M.value.length>0),P=rn(()=>M.value.reduce((mn,Kn)=>{let Li=fu(Kn);if(!Li)return mn;let ui=Li.getView("map");return ui&&ui.getAllLayerIds().forEach(le=>{mn[le]=Kn}),mn},{})),L=rn(()=>Object.keys(P.value)),{add:O,remove:W,isActive:H}=Cx(a.value,new Ib().setHandler(yt)),{add:nt,remove:lt,isActive:K}=Cx(a.value,new HR().setHandler(Rt)),$=jl({latitude:0,longitude:0});function yt(mn){$.latitude=mn.lngLat.lat,$.longitude=mn.lngLat.lng,m(Kn=>{const Li=Kn.queryRenderedFeatures(mn.point,{layers:L.value});Fn(Li)})}function Rt(mn){Ue(),mn&&Ct(mn)}function Ct(mn){mn&&m(Kn=>{const Li=Kn.queryRenderedFeatures(mn,{layers:L.value});Fn(Li)})}const Et=$e(!1);function Gt(){Et.value=!Et.value,Nt()}function kt(){Qt()}function Qt(){de(),Ue()}const Ut=$e(!1);function Nt(){Ut.value?de():Bt()}function Bt(){Ut.value=!0,O()}function de(){Ut.value=!1,W()}const bn=$e(!1);function _e(){bn.value?Ue():He()}function He(){bn.value=!0,nt()}function Ue(){bn.value=!1,lt()}const Pi=jl({items:[],loading:!1}),ri=rn(()=>{if(!$)return"";const mn=x($);return mn.longitude+", &nbsp;"+mn.latitude});function Fn(mn){Pi.items=[];let Kn=mn.reduce((Li,ui)=>{let bi=ui.layer,le=P.value[bi.id];if(!le)return Li;let Ke=le.config.field_id||"id",me=le.config.field_name||"name";return Li[le.id]||(Li[le.id]={name:le.name,view:le,children:{},field_name:me}),Li[le.id].children[ui.properties[Ke]]={id:ui.properties[Ke],name:ui.properties[me],data:Object.assign({geometry:ui.geometry},ui.properties)},Li},{});Pi.items=Object.keys(Kn).map(Li=>Kn[Li])}return(mn,Kn)=>(wt(),Ve(X(Ta),Sa(ha(X(h))),{btn:se(()=>[T.value?(wt(),Ve(X(Tr),{key:0,tooltip:X(o)("map.identify.title"),onClick:Kn[0]||(Kn[0]=Ho(Li=>Gt(),["stop"])),active:Et.value},{default:se(()=>[jt(X(Nn),{size:"14",type:"mdi",path:n.icon},null,8,["path"])]),_:1},8,["tooltip","active"])):gn("v-if",!0)]),draggable:se(Li=>[Et.value?(wt(),Ve(X(af),mr({key:0,show:Et.value,"onUpdate:show":Kn[3]||(Kn[3]=ui=>Et.value=ui)},Li,{width:400,height:300,onClose:kt,title:X(o)("map.identify.title")}),{"extra-btn":se(()=>[jt(X(id),{onClick:Kn[1]||(Kn[1]=Ho(ui=>Nt(),["stop"])),active:X(H),disabled:X(H)},{default:se(()=>[jt(X(Nn),{size:"14",type:"mdi",path:n.mapClick},null,8,["path"])]),_:1},8,["active","disabled"]),jt(X(id),{onClick:Kn[2]||(Kn[2]=Ho(ui=>_e(),["stop"])),active:X(K),disabled:X(K)},{default:se(()=>[jt(X(Nn),{size:"14",type:"mdi",path:n.boxSelect},null,8,["path"])]),_:1},8,["active","disabled"])]),default:se(()=>[zt("div",l7,[zt("div",u7,[zt("b",null,oi(X(o)("map.identify.point"))+":",1),zt("span",{innerHTML:ri.value},null,8,c7)]),h7,zt("div",f7,[(wt(!0),ce(Mi,null,ja(Pi.items,ui=>(wt(),ce("div",{key:ui.view.id,class:"identify-control-list-item"},[zt("div",p7,oi(ui.name),1),zt("div",d7,[(wt(!0),ce(Mi,null,ja(ui.children,bi=>(wt(),ce("div",{class:"identify-control-child-item",key:bi.id},[zt("span",null,oi(bi.name),1)]))),128))])]))),128))])])]),_:2},1040,["show","title"])):gn("v-if",!0)]),_:1},16))}}),g7=ii(m7,[["__scopeId","data-v-e3b81bed"]]);var LM={exports:{}};(function(t,n){(function(i,a){a()})(ys,function(){function i(M,T){return typeof T>"u"?T={autoBom:!1}:typeof T!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),T={autoBom:!T}),T.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(M.type)?new Blob(["\uFEFF",M],{type:M.type}):M}function a(M,T,P){var L=new XMLHttpRequest;L.open("GET",M),L.responseType="blob",L.onload=function(){x(L.response,T,P)},L.onerror=function(){console.error("could not download file")},L.send()}function h(M){var T=new XMLHttpRequest;T.open("HEAD",M,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function m(M){try{M.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),M.dispatchEvent(T)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ys=="object"&&ys.global===ys?ys:void 0,y=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),x=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(M,T,P){var L=o.URL||o.webkitURL,O=document.createElement("a");T=T||M.name||"download",O.download=T,O.rel="noopener",typeof M=="string"?(O.href=M,O.origin===location.origin?m(O):h(O.href)?a(M,T,P):m(O,O.target="_blank")):(O.href=L.createObjectURL(M),setTimeout(function(){L.revokeObjectURL(O.href)},4e4),setTimeout(function(){m(O)},0))}:"msSaveOrOpenBlob"in navigator?function(M,T,P){if(T=T||M.name||"download",typeof M!="string")navigator.msSaveOrOpenBlob(i(M,P),T);else if(h(M))a(M,T,P);else{var L=document.createElement("a");L.href=M,L.target="_blank",setTimeout(function(){m(L)})}}:function(M,T,P,L){if(L=L||open("","_blank"),L&&(L.document.title=L.document.body.innerText="downloading..."),typeof M=="string")return a(M,T,P);var O=M.type==="application/octet-stream",W=/constructor/i.test(o.HTMLElement)||o.safari,H=/CriOS\/[\d]+/.test(navigator.userAgent);if((H||O&&W||y)&&typeof FileReader<"u"){var nt=new FileReader;nt.onloadend=function(){var $=nt.result;$=H?$:$.replace(/^data:[^;]*;/,"data:attachment/file;"),L?L.location.href=$:location=$,L=null},nt.readAsDataURL(M)}else{var lt=o.URL||o.webkitURL,K=lt.createObjectURL(M);L?L.location=K:location.href=K,L=null,setTimeout(function(){lt.revokeObjectURL(K)},4e4)}});o.saveAs=x.saveAs=x,t.exports=x})})(LM);var rA=LM.exports;const v7=l_(rA),y7={class:"field-container"},_7={class:"label-container"},x7={class:"label-field"},b7=["disabled","title"],A7=["disabled"],w7={class:"geometry-list-container"},C7={class:""},I7=["onUpdate:modelValue","onChange"],M7={class:""},E7=["onUpdate:modelValue","onChange"],S7={class:""},T7=["onClick"],P7={__name:"field-geometry",props:$h({modelValue:{type:Array,default:()=>[[0,0]]},maxLength:{type:Number,default:0},title:String,titleActionDownload:String,titleActionFillBound:String,titleActionAddPoint:String},{modelValue:{default:[[0,0]]},modelModifiers:{}}),emits:$h(["click:remove","click:fillbound"],["update:modelValue"]),setup(t,{emit:n}){const i=t,a=uh(t,"modelValue"),h={add:hp,fillBound:wv,delete:sb,download:w5,upload:W5},m=n,o=W=>{a.value=W},y=()=>{a.value||(a.value=[]),a.value.push([null,null])},x=()=>{o(a)},M=W=>{a.value.splice(W,1),m("click:remove",W),o(a)},T=W=>{if(!(!W||!W.length))return W.length==1?ns(W[0]):W.length==2?_s(W):Bm([[...W,W[0]]])},P=()=>{let W={type:"FeatureCollection",features:[T(a.value)]};const H=new window.Blob([JSON.stringify(W)],{type:"text/plain;charset=utf-8"});v7.saveAs(H,"geojson.json")},L=()=>{m("click:fillbound",T(a.value))},O=rn(()=>!i.maxLength||a.value.length<i.maxLength);return(W,H)=>(wt(),ce("div",y7,[zt("div",_7,[zt("div",x7,oi(t.title),1),zt("div",null,[zt("button",{onClick:L,disabled:!t.modelValue||t.modelValue.length<1,class:"setting-button",title:t.titleActionFillBound},[jt(X(Nn),{size:16,type:"mdi",path:h.fillBound,title:t.titleActionDownload},null,8,["path","title"])],8,b7),zt("button",{onClick:P,class:"setting-button",disabled:!t.modelValue||t.modelValue.length<1},[jt(X(Nn),{size:16,type:"mdi",path:h.download,title:t.titleActionAddPoint},null,8,["path","title"])],8,A7),O.value?(wt(),ce("button",{key:0,onClick:y,class:"setting-button"},[jt(X(Nn),{size:16,type:"mdi",path:h.add},null,8,["path"])])):gn("v-if",!0)])]),zt("div",w7,[(wt(!0),ce(Mi,null,ja(t.modelValue,(nt,lt)=>(wt(),ce("div",{class:"geometry-list-item",key:lt},[zt("div",null,"#"+oi(lt+1),1),zt("div",C7,[np(zt("input",{class:"setting-input","onUpdate:modelValue":K=>a.value[lt][0]=K,type:"number",step:"any",onChange:K=>x()},null,40,I7),[[uv,a.value[lt][0]]])]),zt("div",M7,[np(zt("input",{class:"setting-input","onUpdate:modelValue":K=>a.value[lt][1]=K,type:"number",step:"any",onChange:K=>x()},null,40,E7),[[uv,a.value[lt][1]]])]),zt("div",S7,[zt("button",{onClick:K=>M(lt),class:"setting-button"},[jt(X(Nn),{size:16,type:"mdi",path:h.delete},null,8,["path"])],8,T7)])]))),128))])]))}},L7=ii(P7,[["__scopeId","data-v-0595addf"]]),k7={class:"label-container"},D7={class:"label-field"},R7={class:"label-field-value"},z7={__name:"fields-show",props:{fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]}},setup(t){return(n,i)=>(wt(),ce("div",null,[(wt(!0),ce(Mi,null,ja(t.fields,(a,h)=>(wt(),ce("div",{class:"field-container label-value",key:h},[zt("div",k7,[zt("div",D7,oi(a.text),1),zt("div",R7,oi(a.value),1)])]))),128))]))}},O7=ii(z7,[["__scopeId","data-v-4149af43"]]),B7={class:"setting-container"},F7={__name:"MeasurementSettingPopup",props:$h({...rs,modelValue:Array,maxLength:{type:Number,default:0},fields:{type:Array,default:()=>[{text:"Status",value:"waiting..."}]},popUpPosition:{type:Object,default:()=>({top:50,right:40,width:350,height:300})}},{modelValue:{default:[[0,0]]},modelModifiers:{},show:{default:!1},showModifiers:{}}),emits:$h(["update:modelValue"],["update:modelValue","update:show"]),setup(t,{emit:n}){const i=n,a=t,{callMap:h,moduleContainerProps:m,mapId:o}=Io(a),{trans:y}=fa(o.value),x=uh(t,"modelValue"),M=uh(t,"show"),T=L=>{h(O=>{tM(O,L)})};function P(L){i("update:modelValue",L.value)}return(L,O)=>(wt(),Ve(X(Ta),Sa(ha(X(m))),{draggable:se(W=>[M.value?(wt(),Ve(X(af),mr({key:0},Object.assign(W,t.popUpPosition),{show:M.value,"onUpdate:show":O[0]||(O[0]=H=>M.value=H),title:X(y)("map.measurement.setting.title")}),{default:se(()=>[zt("div",B7,[jt(O7,{fields:t.fields},null,8,["fields"]),jt(L7,{"onUpdate:modelValue":P,modelValue:x.value,maxLength:t.maxLength,"onClick:fillbound":T,title:X(y)("map.measurement.setting.field.data"),titleActionDownload:X(y)("map.measurement.action.download"),titleActionFillBound:X(y)("map.measurement.action.fly-to"),titleActionAddPoint:X(y)("map.measurement.action.add-point")},null,8,["modelValue","maxLength","title","titleActionDownload","titleActionFillBound","titleActionAddPoint"])])]),_:2},1040,["show","title"])):gn("v-if",!0)]),default:se(()=>[qn(L.$slots,"default",{},void 0,!0)]),_:3},16))}},N7=ii(F7,[["__scopeId","data-v-1de39f61"]]);class I_{constructor(){this.value=[]}get coordinates(){return this.value.filter(n=>n[0]!=null&&n[1]!=null)}start(){}add(n){const i=V7(this.value);i>=0?this.value[i]=n:this.value.push(n)}init(n){this.value=n}getResult(){return{}}reset(){this.value=[]}destroy(){this.value=[]}}function V7(t=[]){return t.findIndex(n=>!n[0]||!n[1])}function G0(t,n="vi"){return new Intl.NumberFormat(n).format(t)}class U7 extends I_{get name(){return"Measure Area"}get type(){return"area"}getResult(){const h={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return h;if(this.coordinates.length==1)return h.features=[ns(this.coordinates[0])],h;if(this.coordinates.length==2)return h.features=[_s(this.coordinates)],h;const m=Bm([[...this.coordinates,this.coordinates[0]]]);return h.features=[m],h.value=OF(m),h.format=tx(h.value),h.features_label=[IF(m,{properties:{is_label:!0,is_center:!0,text:tx(h.value)}})],h.fields=[{trans:"map.measurement.setting.area",value:tx(h.value)}],h}}function tx(t=0){return t<1e6?`${G0(t.toFixed(2))} m`:`${G0((t/1e6).toFixed(2))} km`}class j7 extends I_{get name(){return"Measure Azimuth"}get type(){return"line"}get setting(){return{maxLength:2}}add(n){this.value.length>1&&(this.value=this.value.slice(0,1)),this.value.push(n)}getResult(){const h={features:[],value:0,features_label:[]};if(!this.coordinates||this.coordinates.length<1)return h;if(this.coordinates.length==1)return h.features=[ns(this.coordinates[0])],h;const m=this.coordinates[this.coordinates.length-1],o=this.coordinates[this.coordinates.length-2],y=_s(this.coordinates);h.features=[y];const x=YI(o,m);return h.value=jI(x).toFixed(3),h.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:m},properties:{is_label:!0,text:`${h.value} `,rotation:x}}],h.fields=[{trans:"map.measurement.setting.azimuth",value:`${h.value} `}],h}}class H7 extends I_{get name(){return"Measure Distance"}get type(){return"line"}getResult(){const h={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return h;if(this.coordinates.length==1)return h.features=[ns(this.coordinates[0])],h;const m=_s(this.coordinates);return h.features=[m],h.value=s2(m),h.format=ex(h.value),h.features_label=this.coordinates.map((o,y,x)=>({type:"Feature",properties:{is_label:!0,text:ex(y<1?0:s2(_s(x.slice(0,y+1))))},geometry:{type:"Point",coordinates:o}})),h.fields=[{trans:"map.measurement.setting.distance",value:ex(h.value)}],h}}function ex(t=0){return t<1?`${G0((t*1e3).toFixed(2))} m`:`${G0(t.toFixed(2))} km`}class G7 extends I_{constructor(n=[]){super(),this.crs_items=n}get name(){return"Measure Point"}get type(){return"point"}get setting(){return{maxLength:1}}add(n){this.value.length>0&&(this.value=[]),this.value.push(n)}getResult(){const h={features:[],value:0,features_label:[],fields:[]};if(!this.coordinates||this.coordinates.length<1)return h;h.features=[ns(this.coordinates[0])];const m=this.coordinates[0][0],o=this.coordinates[0][1],y=wx({longitude:m,latitude:o},void 0,!1);if(y&&(h.value=`${y.longitude}, ${y.latitude}`),this.crs_items){const x=this.crs_items.find(M=>M.default);h.fields=[{trans:x==null?void 0:x.name,value:h.value}],this.crs_items.filter(M=>!M.default).forEach(M=>{var T;if(!M.default&&M.proj4js){const P=wx({longitude:m,latitude:o},M,!1);P&&((T=h.fields)==null||T.push({trans:M.name,value:`${P.longitude}, ${P.latitude}`}))}})}else h.fields=[{trans:"map.measurement.setting.point",value:h.value}];return h.features_label=[{type:"Feature",geometry:{type:"Point",coordinates:this.coordinates[0]},properties:{is_label:!0,text:h.value}}],h}}class oA{start(n){}view(n){}reset(){}destroy(){}}class q7 extends oA{constructor(n){super(),this.layers=[],this.map=n}init(n,i){return i.id||(i.id=`measurment-control-${Jh()}`),this.map.addSource(i.id,i.data),n.forEach(a=>{a.id||(a.id=`measurment-control-${Jh()}`),a.source||(a.source=i.id),this.map.addLayer(a)}),this.source=i,this.layers=n,this}start(){this.onStart&&this.onStart()}reset(){const n=this.map.getSource(this.source.id);n&&n.setData({type:"FeatureCollection",features:[]}),this.onReset&&this.onReset()}destroy(){this.map&&(this.layers.forEach(n=>{const i=n.id;this.map.getLayer(i)&&this.map.removeLayer(i),this.map.getSource(i)&&this.map.removeSource(i)}),this.map.getSource(this.source.id)&&this.map.removeSource(this.source.id))}view({features:n=[],features_label:i=[]}={}){const a=this.map.getSource(this.source.id);a&&a.setData({type:"FeatureCollection",features:[...n,...i]})}}class W7 extends oA{constructor(n){super(),this.markers=[],this.bindEvent={},this.color="#fff",this.map=n,this.markers=[]}setColor(n){return this.color=n,this}view({coordinates:n=[]}={}){const i=!!this.onDragMarker;if(n.length<this.markers.length)for(;n.length<this.markers.length;){const a=this.markers.pop();a&&a.remove()}n.forEach((a,h)=>{if(!a[0]||!a[1])return;let m=this.markers[h];m||(this.bindEvent[h]={},m=Z7({color:this.color,draggable:i}),this.markers[h]=m),m.setLngLat({lng:a[0],lat:a[1]}).addTo(this.map),i&&(this.bindEvent[h].dragend&&m.off("dragend",this.bindEvent[h].dragend),this.bindEvent[h].dragend=()=>{const y=m.getLngLat(),x=[y.lng,y.lat],M=n.slice();M[h]=x,this.onDragMarker&&this.onDragMarker(M,x,h,m)},m.on("dragend",this.bindEvent[h].dragend));const o=m.getElement();this.onRightClickMarker&&(this.bindEvent[h].contextmenu&&o.removeEventListener("contextmenu",this.bindEvent[h].contextmenu),this.bindEvent[h].contextmenu=y=>{y.preventDefault();const x=m.getLngLat();this.onRightClickMarker&&this.onRightClickMarker([x.lng,x.lat],h,m)},o.addEventListener("contextmenu",this.bindEvent[h].contextmenu))})}reset(){this.markers.forEach(n=>{n.remove()}),this.markers=[]}destroy(){this.reset()}}function Z7({color:t,draggable:n=!1}={}){const i=document.createElement("div");return i.style.width="12px",i.style.height="12px",i.style.borderRadius="50%",i.style.background="#fff",i.style.boxSizing="border-box",i.style.border=`2px solid ${t}`,i.style.cursor="pointer",new z0.Marker({element:i,draggable:n})}const C2=function(){let t=null;const n=[],i=P=>{for(let L=0;L<n.length;L++)P(n[L])},a=P=>{t=P},h=P=>{n.push(P)},m=()=>{t&&t.start(),i(P=>{P.start&&P.start(x())})},o=()=>{t&&t.reset(),i(P=>{P.reset&&P.reset()})},y=()=>{t&&t.destroy(),i(P=>{P.destroy()})},x=()=>({coordinates:t.value,setting:t.setting,...t.getResult()});return{get type(){return t?t.type:null},get action(){return t},setAction:a,addView:h,start:m,reset:o,destroy:y,add:P=>{t&&t.add(P),i(L=>{L.view&&L.view(x())})},init:(P=[])=>{t&&t.init(P),i(L=>{L.view(x())})},getResult:x}};class Y7 extends oA{start({setting:n}={}){this.onChangeSetting&&this.onChangeSetting(n)}view({coordinates:n=[],setting:i={},fields:a=[]}={}){this.onChangeValue&&this.onChangeValue(n),this.onChangeSetting&&(i.fields=a,this.onChangeSetting(i))}reset(){this.onChangeValue&&this.onChangeValue([]),this.onChangeSetting&&this.onChangeSetting()}}const X7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAADo6zjiAAAAAXNSR0IArs4c6QAAA4RJREFUWEe9l09o02AYxtdkTRlfL13aie1Cdwgt7cqwiptUA2MHYb04xXhRUFQ6ENHT7rnvpOBhZaIieMlBPYyBIBtEKhtq/TM7W3JYyVpxbdZLvkHTtUrKNrou/5pt5tCWfu/7Pr/naXlJbF2HuKLRqFdpT6fTRatjbFYblT4AwHflHUI4ZHWOZQCapjGWZauKME3TDpZlZSsQlgFcLtfLSqVyQxHFcfyVKIrX/ytAV1fX3zZBS2YsNXm93gfFYvFRK4DX631YLBYfd5qCJQAEQbYbjQbaKoYgSL3RaHQfO0AgELiQy+U4NaFAIEDlcrkPnUB0nIDdbt+s1WouNREMwyqyLPceGwBFUSc5jtNdOhRFeTmO+20WoqMEAABpCOEpveEAgK8QwuiRAyQSCXsymTS1bDpZTKYTwHH8uSiKN804w3H8hSiKt8zUmgZQWTxG803NNlVEEMQ9QRCeGCm2nhMEcd9MjykAtcVjBGN2MRkCkCR5juf5j0aCaueRSOT8yspKSq/XEADDsLIsy7gVAAzDRFmW3ZYBYrFYXyqV+mNFfLcnFoudSKVSG1ozdBMAAHyCEJ45DIDT6fwiSZLmDE2AThaPEWAikcCSyWRNrU4ToLe3d3Zzc/OO0XAz5x6P51mpVLrdEYCFxWPEompW9Uufz5coFAozRhM7Off5fJOFQiHZ3qMKgCBIzcrdjR4QiqLb9XrdbggQDoeHM5nMkhl3PT09WQRBlOeCoJn6cDg8kslklltrDyTgcDg2qtWqx2hgMBi8ls1mWaWOJMmrPM83P+tdDoejVK1W+zQBKIrycBynuTSURgBAdmpqKsIwzHbrIIZhuqenp1eM0qAoqo/juNJu774EAABLEMJhLRd+v/9KPp9/reeSIIgJQRA0awAAyxDCkQMAo6Oj3YuLi6rLQnEdj8cHWZatG8WsnNM0jc7Pz/+UJEn1v8EwjH03wb0E3G73TLlcTrQLEARxWRCEN2aE22sGBgYm1tbWDqThdruT5XJ5Uqlv/Qn2PWo5nc5f4+PjEbOutQB30vghSVKoraap3Xzp7++/s76+PrtbsEP+1oprrR6SJC/xPL+XpN/vv5vP5582AVAUlZUlAQDIxOPxocO61ktjbm7u29bW1iCKorV6vY7ZQqHQ6dXV1c8kSU7wPH+kro3SiEQiZ204jr8fGxu7eFyu9dJYWFh49w9KoVXl/UeUKQAAAABJRU5ErkJggg==",K7="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGmSURBVDiNldPBitpAGAfwv5mMmy85JCistD5Ai/gCPYovYJENCPZQF8VD36HXUkrfQws9R8WLF58gh2h2W2PpoeTWxBgzMr1spd3uUvOHOQ2//3yHb4C/UyGi95Zl3XLOUwASgFRVNTVN8ysRfQTwFA+FMdYhoqjf7+9ns5kMgkCGYSjDMJTb7VbO53M5HA4PRBRzzl//g8vlcrxYLE7osbNcLmWlUok459cAULgb+2YymRi1Wu3B6e7H9300Go1dkiTPGRG97Xa7LzqdjnqWBlAqlRBFEVzXNZRisXhl2/bFufh3bNvmAF4WOOd73/cvDMPIVSCEQLVaFUqWZbkxAKiqCsaYVHLLe1E452kcx7mhEALH47Gg6Lr+3fO83AXr9Rq6rofK4XD4NB6P07wFo9Eok1J+LgC41DTt1nEco16vn4VXqxWazeYuSZJnCoAfWZZdt9vtneu6/8We56HVasVCiDcAvp0uGGM2Ef3s9Xp7x3HkZrM57X8QBHI6ncrBYJASUcQYe/XYA5eapr2zLOuGc77H3XfmnKemaX4hog8AnvwJfgHMKs1jQ++4tQAAAABJRU5ErkJggg==",Ig="#004E98",Q7=tr({__name:"MeasurementControl",props:{...rs},setup(t){const{getCrsItems:n}=db,{addImage:i}=ZR;let a=C2();const h=t,m=$e(""),o=$e([]),y=$e({show:!0,maxLength:0,fields:[]}),x={add:hp,fillBound:wv,distance:U5,area:j5,azimuth:G5,point:fb,clear:sb,close:Cm,setting:qC},{callMap:M,mapId:T,moduleContainerProps:P}=Io(h,H,nt),{trans:L,setLocale:O}=fa(T.value);O({map:{measurement:{action:{clear:"Clear",close:"Close",setting:"Setting",download:"Download","add-point":"Add point","fly-to":"Fill bound",add:"Add"},title:"Measurement",result:"Measurement Result",field:{"unit-distance":"Unit distance","unit-area":"Unit area"},tools:{point:"Measure Point",distance:"Measure Distance",area:"Measure Area",azimuth:"Measure azimuth"},unit:{meter:"Meter",kilometer:"Kilometer","square-meter":"Square Meter",hecta:"Hecta","square-kilometer":"Square Kilometer"},setting:{title:"Setting",field:{data:"Data"},point:"Point",distance:"Distance",area:"Area",azimuth:"Azimuthi"},"no-data":{text:"Status",value:"Waiting..."}}}});const W=new Ib().setHandler(lt);function H(Nt){i(Nt.id,"azimuth-arrow",X7,{sdf:!0}),i(Nt.id,"measurment-round",K7,{content:[4,4,12,12],stretchX:[[6,10]],stretchY:[[6,10]]}),a=C2();let Bt=new q7(Nt);Bt.init([{type:"line",paint:{"line-color":Ig,"line-width":2}},{type:"fill",filter:["==","$type","Polygon"],paint:{"fill-color":Ig,"fill-opacity":.3}},{type:"symbol",filter:["has","rotation"],paint:{"icon-color":Ig},layout:{"icon-size":1.2,"icon-rotate":{type:"identity",property:"rotation"},"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0,"icon-image":"azimuth-arrow",visibility:"visible"}},{type:"symbol",filter:["all",["has","is_label"],["==","$type","Point"]],layout:{"text-field":"{text}","text-offset":["case",["to-boolean",["get","is_center"]],["literal",[0,0]],["literal",[0,2]]],"text-size":14,"text-allow-overlap":!0,"icon-allow-overlap":!0,"icon-image":"measurment-round","icon-text-fit":"both"},paint:{"text-color":"#fff","text-halo-color":Ig,"text-halo-width":2}}],{data:{type:"geojson",data:{type:"FeatureCollection",features:[]}}});const{add:de,remove:bn}=wI(Nt.id,W);Bt.onStart=()=>{Nt&&de()},Bt.onReset=()=>{bn()};let _e=new W7(Nt);_e.setColor(Ig),_e.onDragMarker=Ue=>{a.init(Ue)},_e.onRightClickMarker=(Ue,Pi)=>{o.value.splice(Pi,1),a.init(o.value)};let He=new Y7;He.onChangeValue=Ue=>{o.value=(Ue||[]).slice()},He.onChangeSetting=(Ue={})=>{y.value.maxLength=Ue.maxLength||0;let Pi=Ue.fields;(!Pi||Pi.length==0)&&(Pi=[{text:L.value("map.measurement.no-data.text"),value:L.value("map.measurement.no-data.value")}]),y.value.fields=Pi.map(ri=>({...ri,text:ri.trans?L.value(ri.trans):ri.text}))},a.addView(Bt),a.addView(_e),a.addView(He)}function nt(){a&&a.destroy(),Qt()}function lt(Nt){const Bt=[Nt.lngLat.lng,Nt.lngLat.lat];a.action&&a.add(Bt)}function K(Nt){return kt(!1),m.value==Nt?(m.value=void 0,a.setAction(null),!1):(m.value=Nt,!0)}function $(){K("distance")&&(a.setAction(new H7),a.start())}function yt(){K("area")&&(a.setAction(new U7),a.start())}function Rt(){K("azimuth")&&(a.setAction(new j7),a.start())}function Ct(){K("point")&&(a.setAction(new G7(n(T.value))),a.start())}function Et(){y.value.show=!y.value.show}function Gt(){M(Nt=>{tM(Nt,YF(o.value))})}function kt(Nt=!0){a&&(a.reset(),Nt&&gu(()=>{a.start()}))}function Qt(){kt(!1),m.value=void 0,a&&a.setAction(null)}function Ut(Nt=[]){a&&a.init(Nt)}return(Nt,Bt)=>(wt(),Ve(X(Ta),Sa(ha(X(P))),{btn:se(()=>[m.value?(wt(),Ve(X(Im),{key:1,row:""},{default:se(()=>[gn(` <MapControlButton
          :tooltip="trans('map.measurement.action.add')"
          @click="addToLayerControl()"
          :disabled="!coordinates || coordinates.length < 1"
        >
          <SvgIcon :size="18" type="mdi" :path="path.add" />
        </MapControlButton> `),jt(X(Tr),{tooltip:X(L)("map.measurement.action.setting"),onClick:Bt[4]||(Bt[4]=de=>Et()),active:y.value.show},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.setting},null,8,["path"])]),_:1},8,["tooltip","active"]),jt(X(Tr),{disabled:!o.value||o.value.length<1,tooltip:X(L)("map.measurement.action.fly-to"),onClick:Bt[5]||(Bt[5]=de=>Gt())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.fillBound},null,8,["path"])]),_:1},8,["disabled","tooltip"]),jt(X(Tr),{tooltip:X(L)("map.measurement.action.clear"),onClick:Bt[6]||(Bt[6]=de=>kt())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.clear},null,8,["path"])]),_:1},8,["tooltip"]),jt(X(Tr),{tooltip:X(L)("map.measurement.action.close"),onClick:Bt[7]||(Bt[7]=de=>Qt())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.close},null,8,["path"])]),_:1},8,["tooltip"])]),_:1})):(wt(),Ve(X(Im),{key:0,row:""},{default:se(()=>[jt(X(Tr),{tooltip:X(L)("map.measurement.tools.distance"),onClick:Bt[0]||(Bt[0]=de=>$()),active:m.value=="distance"},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.distance},null,8,["path"])]),_:1},8,["tooltip","active"]),jt(X(Tr),{tooltip:X(L)("map.measurement.tools.area"),onClick:Bt[1]||(Bt[1]=de=>yt()),active:m.value=="area"},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.area},null,8,["path"])]),_:1},8,["tooltip","active"]),jt(X(Tr),{tooltip:X(L)("map.measurement.tools.azimuth"),onClick:Bt[2]||(Bt[2]=de=>Rt()),active:m.value=="azimuth"},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.azimuth},null,8,["path"])]),_:1},8,["tooltip","active"]),jt(X(Tr),{tooltip:X(L)("map.measurement.tools.point"),onClick:Bt[3]||(Bt[3]=de=>Ct()),active:m.value=="point"},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:x.point},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1}))]),default:se(()=>[qn(Nt.$slots,"default"),m.value?(wt(),Ve(N7,{key:0,modelValue:o.value,show:y.value.show,"onUpdate:show":Bt[8]||(Bt[8]=de=>y.value.show=de),position:Nt.position,"onUpdate:modelValue":Ut,maxLength:y.value.maxLength,fields:y.value.fields},null,8,["modelValue","show","position","maxLength","fields"])):gn("v-if",!0)]),_:3},16))}});class $7{constructor(n){this.mapCanvas=n,this.color="#535353"}create(){this.updateValues(),this.createCanvas(this.mapCanvas.parentElement)}updateValues(){this.width=this.mapCanvas.clientWidth,this.height=this.mapCanvas.clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const n=this.width/2,i=this.height/2;this.yLine.setAttribute("x1",`${n}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${n}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${i}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${i}px`)}}createCanvas(n){if(this.width!==void 0&&this.height!==void 0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",i.setAttribute("width",`${this.width}px`),i.setAttribute("height",`${this.height}px`);const a=this.width/2,h=this.height/2;this.yLine=i.appendChild(this.createLine(a,0,a,this.height,this.color,"2px")),this.xLine=i.appendChild(this.createLine(0,h,this.width,h,this.color,"2px")),n.appendChild(i),this.svgCanvas=i}}createLine(n,i,a,h,m,o){const y=document.createElementNS("http://www.w3.org/2000/svg","line");return y.setAttribute("x1",n+""),y.setAttribute("y1",i+""),y.setAttribute("x2",a+""),y.setAttribute("y2",h+""),y.setAttribute("stroke-dasharray","5,5"),y.setAttribute("stroke",m),y.setAttribute("stroke-width",o),y}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}function kM(t){const{renderMap:n,hidden:i}=DM(t,a=>{const h=t.getCanvas();a.style.width=h.clientWidth+"px",a.style.height=h.clientHeight+"px"});return new Promise(a=>{n.once("idle",()=>{var m;const h=n.getCanvas();a(h.toDataURL()),n.remove(),(m=i.parentNode)==null||m.removeChild(i)})})}async function J7(t,n){const{renderMap:i,hidden:a}=DM(t,h=>{h.style.width=I2(+n.width,1),h.style.height=I2(+n.height,1)});return new Promise(h=>{i.once("idle",()=>{var o;const m=i.getCanvas();h(m.toDataURL()),i.remove(),(o=a.parentNode)==null||o.removeChild(a)})})}function I2(t,n=96){return`${n*t}px`}function DM(t,n){var y;const i=document.createElement("div");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.padding="0",i.style.margin="0",i.style.background="transparent",i.style.zIndex="-1",document.body.appendChild(i);const a=document.createElement("div");n(a),i.appendChild(a);const h=new Pg.Map({container:a,center:t.getCenter(),zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:t._requestManager._transformRequestFn}),m=(t.style.imageManager||{}).images||{};m&&((y=Object.keys(m))==null?void 0:y.length)>0&&Object.keys(m).forEach(x=>{x&&h.addImage(x,m[x].data)});const o=t.getStyle();if(o&&o.sources){const x=o.sources;Object.keys(x).forEach(M=>{const T=x[M];Object.keys(T).forEach(P=>{T[P]||delete T[P]})})}return h.setStyle(o),{renderMap:h,hidden:i}}class tj{constructor(n,i){this.mapCanvas=n,this.setOption(i)}getCutSize(){return{width:this.cutWidth,height:this.cutHeight,startX:this.cutStartX,startY:this.cutStartY}}mapResize(){this.generateCutOut()}create(){this.createCanvas(this.mapCanvas.parentElement),this.generateCutOut()}createCanvas(n){const i=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=this.mapCanvas.clientWidth,h=this.mapCanvas.clientHeight;i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style["pointer-events"]="none",i.setAttribute("width",`${a}px`),i.setAttribute("height",`${h}px`);const m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("style","fill:#888888;stroke-width:0"),m.setAttribute("fill-opacity","0.5"),i.append(m),n.appendChild(i),this.svgCanvas=i,this.svgPath=m}generateCutOut(){if(this.svgCanvas===void 0||this.svgPath===void 0)return;const n=this.mapCanvas.clientWidth,i=this.mapCanvas.clientHeight,a=this.option.ratio;let h=i;h>n&&(h=n);let m=0,o=0;if(a>=1?(m=Math.floor(h*4/5-30),o=m/a):(o=Math.floor(h*4/5-30),m=Math.floor(o*a)),this.option.orientation!=="landscape"){if(m>o){const O=o;o=m,m=O}}else if(m<o){const O=o;o=m,m=O}this.cutStartX=n/2-m/2,this.cutStartY=i/2-o/2;const y=o,x=m;this.cutWidth=m,this.cutHeight=o;const M=this.cutStartX,T=M+x,P=this.cutStartY,L=P+y;this.svgCanvas.setAttribute("width",`${n}px`),this.svgCanvas.setAttribute("height",`${i}px`),this.svgPath.setAttribute("d",`M 0 0 L ${n} 0 L ${n} ${i} L 0 ${i} M ${M} ${P} L ${M} ${L} L ${T} ${L} L ${T} ${P}`)}setOption(n){this.option=n,this.generateCutOut()}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0)}}const ej=tr({__name:"PrintControl",props:{...rs,fileName:{type:String,default:"map"}},setup(t){const n=t,i={print:V5,close:Cm,save:WC},{callMap:a,mapId:h,moduleContainerProps:m}=Io(n),{trans:o,setLocale:y}=fa(h.value);y({map:{print:{title:"Print",actions:{save:"save",clear:"clear"}}}});const x=$e({show:!1,loading:!1});function M(P){a(async L=>{x.value.loading=!0;try{let O=await kM(L);P?P(O):await T(O)}finally{x.value.loading=!1}})}async function T(P){rA.saveAs(P,`${n.fileName}.png`)}return(P,L)=>(wt(),Ve(X(Ta),Sa(ha(X(m))),{btn:se(()=>[jt(X(Tr),{tooltip:X(o)("map.print.title"),onClick:L[0]||(L[0]=Ho(O=>M(T),["stop"])),loading:x.value.loading},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:i.print},null,8,["path"])]),_:1},8,["tooltip","loading"])]),_:1},16))}}),aA="print";function nj(t){rf(t,aA,void 0)}sd(aA,nj);const ij=(t,{show:n,close:i,save:a,saveAll:h})=>{rf(t,aA,{show:n,close:i,save:a,saveAll:h})},rj=t=>(fh("data-v-a5fdedaa"),t=t(),ph(),t),oj={class:"setting-container"},aj=rj(()=>zt("div",{class:"grow"},null,-1)),sj=tr({__name:"PrintAdvancedControl",props:{...rs,disabledCrosshair:Boolean,disabledPrintableArea:Boolean,fileName:{type:String,default:"map"}},setup(t){const n=t,i={print:N5,close:Cm,save:WC,setting:qC},{callMap:a,mapId:h,moduleContainerProps:m}=Io(n,M),{trans:o,setLocale:y}=fa(h.value);y({map:{print:{title:"Print",actions:{save:"save",clear:"clear",setting:"Setting"},setting:{title:"Setting"},field:{ratio:"Ratio",orientation:"Orientation"},btn:{apply:"Print"}}}});const x=$e({show:!1,loading:!1,setting_show:!1,setting:{ratio:1,orientation:"portrait"}});bv(()=>{L()});function M(){ij(h.value,{show:Ct=>O(Ct),close:()=>L(),save:Ct=>P(Ct),saveAll:Ct=>T(Ct)})}function T(Ct){a(async Et=>{x.value.loading=!0;try{let Gt=await kM(Et);Ct?Ct(Gt):await W(Gt)}finally{x.value.loading=!1}})}async function P(Ct){a(async Et=>{if(nt)try{x.value.loading=!0;let Gt=await J7(Et,nt.getCutSize());Ct?Ct(Gt):await W(Gt)}finally{x.value.loading=!1}})}function L(){x.value.loading=!1,x.value.show=!1,lt(x.value.show),K(x.value.show,x.value.setting)}function O(Ct){x.value.show=!0,lt(x.value.show),K(x.value.show,Ct)}async function W(Ct){rA.saveAs(Ct,`${n.fileName}.png`)}let H,nt;function lt(Ct){n.disabledCrosshair||a(Et=>{Ct===!1?H!==void 0&&(H.destroy(),H=void 0):(H=new $7(Et.getCanvas()),H.create())})}function K(Ct,Et){n.disabledPrintableArea||a(Gt=>{Ct===!1?(Gt.off("resize",$),nt!==void 0&&(nt.destroy(),nt=void 0)):(Gt.on("resize",$),nt=new tj(Gt.getCanvas(),Et),nt.create())})}function $(){nt&&nt.mapResize(),H&&H.mapResize()}function yt(){x.value.setting_show=!x.value.setting_show}function Rt(){nt&&nt.setOption(x.value.setting)}return(Ct,Et)=>(wt(),Ve(X(Ta),Sa(ha(X(m))),{btn:se(()=>[jt(X(Im),{row:""},{default:se(()=>[x.value.show?(wt(),ce(Mi,{key:1},[jt(X(Tr),{disabled:x.value.loading,loading:x.value.loading,tooltip:X(o)("map.print.actions.save"),onClick:Et[1]||(Et[1]=Gt=>P())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:i.save},null,8,["path"])]),_:1},8,["disabled","loading","tooltip"]),jt(X(Tr),{disabled:x.value.loading,tooltip:X(o)("map.print.actions.clear"),onClick:Et[2]||(Et[2]=Gt=>L())},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:i.close},null,8,["path"])]),_:1},8,["disabled","tooltip"])],64)):(wt(),Ve(X(Tr),{key:0,active:x.value.show,tooltip:X(o)("map.print.title"),onClick:Et[0]||(Et[0]=Ho(Gt=>O(x.value.setting),["stop"])),loading:x.value.loading},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:i.print},null,8,["path"])]),_:1},8,["active","tooltip","loading"])),jt(X(Tr),{tooltip:X(o)("map.print.actions.setting"),onClick:Et[3]||(Et[3]=Gt=>yt()),active:x.value.setting_show},{default:se(()=>[jt(X(Nn),{size:18,type:"mdi",path:i.setting},null,8,["path"])]),_:1},8,["tooltip","active"])]),_:1})]),draggable:se(Gt=>[x.value.setting_show?(wt(),Ve(X(af),mr({key:0},Gt,{height:220,show:x.value.setting_show,"onUpdate:show":Et[9]||(Et[9]=kt=>x.value.setting_show=kt),title:X(o)("map.print.setting.title")}),{default:se(()=>[zt("div",oj,[zt("div",null,[jt(X(la),{modelValue:x.value.setting.ratio,"onUpdate:modelValue":Et[4]||(Et[4]=kt=>x.value.setting.ratio=kt),label:X(o)("map.print.field.ratio"),onChange:Et[5]||(Et[5]=kt=>Rt())},null,8,["modelValue","label"])]),zt("div",null,[jt(X(Tv),{modelValue:x.value.setting.orientation,"onUpdate:modelValue":Et[6]||(Et[6]=kt=>x.value.setting.orientation=kt),items:[{value:"landscape",text:"Landscape"},{value:"portrait",text:"Portrait"}],label:X(o)("map.print.field.orientation"),onChange:Et[7]||(Et[7]=kt=>Rt())},null,8,["modelValue","label"])]),aj,x.value.show?(wt(),Ve(X(id),{key:0,class:"btn-container",onClick:Et[8]||(Et[8]=kt=>P())},{default:se(()=>[Va(oi(X(o)("map.print.btn.apply")),1)]),_:1})):gn("v-if",!0)])]),_:2},1040,["show","title"])):gn("v-if",!0)]),_:1},16))}}),lj=ii(sj,[["__scopeId","data-v-a5fdedaa"]]),uj=tr({__name:"AllMapView",setup(t){function n(i){Px(i.id,fM({name:"raster 1",tiles:["https://naturalearthtiles.roblabs.com/tiles/natural_earth_cross_blended_hypso_shaded_relief.raster/{z}/{x}/{y}.png"],bounds:[104.96327341667353,18.461221184685627,106.65936430823979,19.549518287564368]})),Px(i.id,pM({name:"geojson 1",type:"line",color:"#ff0000",geojson:{type:"FeatureCollection",features:[{type:"Feature",properties:{id:"1",name:"feature 2"},geometry:{coordinates:[[[104.96327341667353,19.549518287564368],[104.96327341667353,18.461221184685627],[106.65936430823979,18.461221184685627],[106.65936430823979,19.549518287564368],[104.96327341667353,19.549518287564368]]],type:"Polygon"}}]},builds:[new w_().setLayers([new F0().setStyleType("area").setColor("#0000FF").build(),new F0().setStyleType("point").setColor("#ff0000").build()]),new P9().setDrawSupport([_m.POINT,_m.POLYGON,_m.LINE_STRING])]}))}return(i,a)=>(wt(),Ve(X(L8),{onMapLoaded:n},{default:se(()=>[jt(X(Q7),{position:"top-right"}),jt(X(V9),{position:"top-right"}),jt(X(g7),{position:"top-right"}),jt(X(g8),{position:"top-right"}),jt(X(a7),{position:"top-left"},{endList:se(({mapId:h})=>[jt(X(s9),{mapId:h},null,8,["mapId"])]),_:1}),jt(X(lj)),jt(X(ej)),jt(X(r8)),jt(X(X8)),jt(X(f8)),jt(X(h8)),jt(X($8)),jt(X(v8)),jt(X(q8)),jt(X(g9),{position:"bottom-left"})]),_:1}))}}),cj=h5({history:V3("/"),routes:[{path:"/",name:"home",component:uj},{path:"/draw/",component:()=>b1(()=>import("./example-ohW8m96B.js"),__vite__mapDeps([0,1]))},{path:"/basemap/",component:()=>b1(()=>import("./example-BEazziij.js"),__vite__mapDeps([2,3]))},{path:"/measurement/",component:()=>b1(()=>import("./example-DplTOB-5.js"),__vite__mapDeps([4,1]))}]}),hj=tr({__name:"App",setup(t){return(n,i)=>(wt(),Ve(X(GC)))}}),fj=ii(hj,[["__scopeId","data-v-b7680054"]]),RM=s3(fj);RM.use(cj);RM.mount("#root");export{g9 as B,V9 as D,Mi as F,L8 as M,ii as _,jt as a,_m as b,Ve as c,tr as d,rs as e,l9 as f,Io as g,eM as h,hl as i,Im as j,ce as k,qn as l,mr as m,Ta as n,wt as o,bs as p,$e as q,ja as r,s9 as s,oi as t,X as u,yP as v,se as w,gn as x,Q7 as y};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/example-ohW8m96B.js","assets/example-BRI0LJKA.css","assets/example-BEazziij.js","assets/example-B3CW6woM.css","assets/example-DplTOB-5.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
